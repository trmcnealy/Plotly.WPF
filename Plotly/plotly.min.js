/*
 The buffer module from node.js, for the browser.

 @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 @license  MIT
 The buffer module from node.js, for the browser.

 @author   Feross Aboukhadijeh <https://feross.org>
 @license  MIT
 @overview es6-promise - a tiny implementation of Promises/A+.
 @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 @license   Licensed under MIT license
            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 @version   v4.2.8+1e68dce6
 Determine if an object is a Buffer

 @author   Feross Aboukhadijeh <https://feross.org>
 @license  MIT
 pad-left <https://github.com/jonschlinkert/pad-left>

 Copyright (c) 2014-2015, Jon Schlinkert.
 Licensed under the MIT license.
 repeat-string <https://github.com/jonschlinkert/repeat-string>

 Copyright (c) 2014-2015, Jon Schlinkert.
 Licensed under the MIT License.
*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(b){var K=0;return function(){return K<b.length?{done:!1,value:b[K++]}:{done:!0}}};$jscomp.arrayIterator=function(b){return{next:$jscomp.arrayIteratorImpl(b)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,K,G){if(b==Array.prototype||b==Object.prototype)return b;b[K]=G.value;return b};$jscomp.getGlobal=function(b){b=["object"==typeof globalThis&&globalThis,b,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var K=0;K<b.length;++K){var G=b[K];if(G&&G.Math==Math)return G}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(b,K){var G=$jscomp.propertyToPolyfillSymbol[K];if(null==G)return b[K];G=b[G];return void 0!==G?G:b[K]};
$jscomp.polyfill=function(b,K,G,q){K&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(b,K,G,q):$jscomp.polyfillUnisolated(b,K,G,q))};$jscomp.polyfillUnisolated=function(b,K,G,q){G=$jscomp.global;b=b.split(".");for(q=0;q<b.length-1;q++){var m=b[q];if(!(m in G))return;G=G[m]}b=b[b.length-1];q=G[b];K=K(q);K!=q&&null!=K&&$jscomp.defineProperty(G,b,{configurable:!0,writable:!0,value:K})};
$jscomp.polyfillIsolated=function(b,K,G,q){var m=b.split(".");b=1===m.length;q=m[0];q=!b&&q in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var l=0;l<m.length-1;l++){var h=m[l];if(!(h in q))return;q=q[h]}m=m[m.length-1];G=$jscomp.IS_SYMBOL_NATIVE&&"es6"===G?q[m]:null;K=K(G);null!=K&&(b?$jscomp.defineProperty($jscomp.polyfills,m,{configurable:!0,writable:!0,value:K}):K!==G&&(void 0===$jscomp.propertyToPolyfillSymbol[m]&&($jscomp.propertyToPolyfillSymbol[m]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(m):
$jscomp.POLYFILL_PREFIX+m),$jscomp.defineProperty(q,$jscomp.propertyToPolyfillSymbol[m],{configurable:!0,writable:!0,value:K})))};$jscomp.initSymbol=function(){};
$jscomp.polyfill("Symbol",function(b){if(b)return b;var K=function(m,l){this.$jscomp$symbol$id_=m;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:l})};K.prototype.toString=function(){return this.$jscomp$symbol$id_};var G=0,q=function(m){if(this instanceof q)throw new TypeError("Symbol is not a constructor");return new K("jscomp_symbol_"+(m||"")+"_"+G++,m)};return q},"es6","es3");
$jscomp.polyfill("Symbol.iterator",function(b){if(b)return b;b=Symbol("Symbol.iterator");for(var K="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),G=0;G<K.length;G++){var q=$jscomp.global[K[G]];"function"===typeof q&&"function"!=typeof q.prototype[b]&&$jscomp.defineProperty(q.prototype,b,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return b},"es6",
"es3");$jscomp.iteratorPrototype=function(b){b={next:b};b[Symbol.iterator]=function(){return this};return b};$jscomp.iteratorFromArray=function(b,K){b instanceof String&&(b+="");var G=0,q=!1,m={next:function(){if(!q&&G<b.length){var l=G++;return{value:K(l,b[l]),done:!1}}q=!0;return{done:!0,value:void 0}}};m[Symbol.iterator]=function(){return m};return m};$jscomp.polyfill("Array.prototype.keys",function(b){return b?b:function(){return $jscomp.iteratorFromArray(this,function(K){return K})}},"es6","es3");
$jscomp.polyfill("Array.prototype.entries",function(b){return b?b:function(){return $jscomp.iteratorFromArray(this,function(K,G){return[K,G]})}},"es6","es3");$jscomp.polyfill("Array.prototype.values",function(b){return b?b:function(){return $jscomp.iteratorFromArray(this,function(K,G){return G})}},"es8","es3");$jscomp.polyfill("Math.imul",function(b){return b?b:function(K,G){K=Number(K);G=Number(G);var q=K&65535,m=G&65535;return q*m+((K>>>16&65535)*m+q*(G>>>16&65535)<<16>>>0)|0}},"es6","es3");
$jscomp.polyfill("Number.isNaN",function(b){return b?b:function(K){return"number"===typeof K&&isNaN(K)}},"es6","es3");$jscomp.makeIterator=function(b){var K="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];return K?K.call(b):$jscomp.arrayIterator(b)};
$jscomp.polyfill("Promise",function(b){function K(){this.batch_=null}function G(h){return h instanceof m?h:new m(function(a,g){a(h)})}if(b&&(!($jscomp.FORCE_POLYFILL_PROMISE||$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION&&"undefined"===typeof $jscomp.global.PromiseRejectionEvent)||!$jscomp.global.Promise||-1===$jscomp.global.Promise.toString().indexOf("[native code]")))return b;K.prototype.asyncExecute=function(h){if(null==this.batch_){this.batch_=[];var a=this;this.asyncExecuteFunction(function(){a.executeBatch_()})}this.batch_.push(h)};
var q=$jscomp.global.setTimeout;K.prototype.asyncExecuteFunction=function(h){q(h,0)};K.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var h=this.batch_;this.batch_=[];for(var a=0;a<h.length;++a){var g=h[a];h[a]=null;try{g()}catch(e){this.asyncThrow_(e)}}}this.batch_=null};K.prototype.asyncThrow_=function(h){this.asyncExecuteFunction(function(){throw h;})};var m=function(h){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];this.isRejectionHandled_=!1;var a=this.createResolveAndReject_();
try{h(a.resolve,a.reject)}catch(g){a.reject(g)}};m.prototype.createResolveAndReject_=function(){function h(e){return function(n){g||(g=!0,e.call(a,n))}}var a=this,g=!1;return{resolve:h(this.resolveTo_),reject:h(this.reject_)}};m.prototype.resolveTo_=function(h){if(h===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(h instanceof m)this.settleSameAsPromise_(h);else{a:switch(typeof h){case "object":var a=null!=h;break a;case "function":a=!0;break a;default:a=!1}a?this.resolveToNonPromiseObj_(h):
this.fulfill_(h)}};m.prototype.resolveToNonPromiseObj_=function(h){var a=void 0;try{a=h.then}catch(g){this.reject_(g);return}"function"==typeof a?this.settleSameAsThenable_(a,h):this.fulfill_(h)};m.prototype.reject_=function(h){this.settle_(2,h)};m.prototype.fulfill_=function(h){this.settle_(1,h)};m.prototype.settle_=function(h,a){if(0!=this.state_)throw Error("Cannot settle("+h+", "+a+"): Promise already settled in state"+this.state_);this.state_=h;this.result_=a;2===this.state_&&this.scheduleUnhandledRejectionCheck_();
this.executeOnSettledCallbacks_()};m.prototype.scheduleUnhandledRejectionCheck_=function(){var h=this;q(function(){if(h.notifyUnhandledRejection_()){var a=$jscomp.global.console;"undefined"!==typeof a&&a.error(h.result_)}},1)};m.prototype.notifyUnhandledRejection_=function(){if(this.isRejectionHandled_)return!1;var h=$jscomp.global.CustomEvent,a=$jscomp.global.Event,g=$jscomp.global.dispatchEvent;if("undefined"===typeof g)return!0;"function"===typeof h?h=new h("unhandledrejection",{cancelable:!0}):
"function"===typeof a?h=new a("unhandledrejection",{cancelable:!0}):(h=$jscomp.global.document.createEvent("CustomEvent"),h.initCustomEvent("unhandledrejection",!1,!0,h));h.promise=this;h.reason=this.result_;return g(h)};m.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var h=0;h<this.onSettledCallbacks_.length;++h)l.asyncExecute(this.onSettledCallbacks_[h]);this.onSettledCallbacks_=null}};var l=new K;m.prototype.settleSameAsPromise_=function(h){var a=this.createResolveAndReject_();
h.callWhenSettled_(a.resolve,a.reject)};m.prototype.settleSameAsThenable_=function(h,a){var g=this.createResolveAndReject_();try{h.call(a,g.resolve,g.reject)}catch(e){g.reject(e)}};m.prototype.then=function(h,a){function g(c,d){return"function"==typeof c?function(f){try{e(c(f))}catch(k){n(k)}}:d}var e,n,p=new m(function(c,d){e=c;n=d});this.callWhenSettled_(g(h,e),g(a,n));return p};m.prototype.catch=function(h){return this.then(void 0,h)};m.prototype.callWhenSettled_=function(h,a){function g(){switch(e.state_){case 1:h(e.result_);
break;case 2:a(e.result_);break;default:throw Error("Unexpected state: "+e.state_);}}var e=this;null==this.onSettledCallbacks_?l.asyncExecute(g):this.onSettledCallbacks_.push(g);this.isRejectionHandled_=!0};m.resolve=G;m.reject=function(h){return new m(function(a,g){g(h)})};m.race=function(h){return new m(function(a,g){for(var e=$jscomp.makeIterator(h),n=e.next();!n.done;n=e.next())G(n.value).callWhenSettled_(a,g)})};m.all=function(h){var a=$jscomp.makeIterator(h),g=a.next();return g.done?G([]):new m(function(e,
n){function p(f){return function(k){c[f]=k;d--;0==d&&e(c)}}var c=[],d=0;do c.push(void 0),d++,G(g.value).callWhenSettled_(p(c.length-1),n),g=a.next();while(!g.done)})};return m},"es6","es3");$jscomp.polyfill("Array.prototype.fill",function(b){return b?b:function(K,G,q){var m=this.length||0;0>G&&(G=Math.max(0,m+G));if(null==q||q>m)q=m;q=Number(q);0>q&&(q=Math.max(0,m+q));for(G=Number(G||0);G<q;G++)this[G]=K;return this}},"es6","es3");$jscomp.typedArrayFill=function(b){return b?b:Array.prototype.fill};
$jscomp.polyfill("Int8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint8ClampedArray.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
$jscomp.polyfill("Uint32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Float32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Float64Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.findInternal=function(b,K,G){b instanceof String&&(b=String(b));for(var q=b.length,m=0;m<q;m++){var l=b[m];if(K.call(G,l,m,b))return{i:m,v:l}}return{i:-1,v:void 0}};
$jscomp.polyfill("Array.prototype.find",function(b){return b?b:function(K,G){return $jscomp.findInternal(this,K,G).v}},"es6","es3");$jscomp.owns=function(b,K){return Object.prototype.hasOwnProperty.call(b,K)};$jscomp.assign=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.assign?Object.assign:function(b,K){for(var G=1;G<arguments.length;G++){var q=arguments[G];if(q)for(var m in q)$jscomp.owns(q,m)&&(b[m]=q[m])}return b};
$jscomp.polyfill("Object.assign",function(b){return b||$jscomp.assign},"es6","es3");$jscomp.polyfill("Array.from",function(b){return b?b:function(K,G,q){G=null!=G?G:function(a){return a};var m=[],l="undefined"!=typeof Symbol&&Symbol.iterator&&K[Symbol.iterator];if("function"==typeof l){K=l.call(K);for(var h=0;!(l=K.next()).done;)m.push(G.call(q,l.value,h++))}else for(l=K.length,h=0;h<l;h++)m.push(G.call(q,K[h],h));return m}},"es6","es3");
$jscomp.polyfill("Math.sign",function(b){return b?b:function(K){K=Number(K);return 0===K||isNaN(K)?K:0<K?1:-1}},"es6","es3");$jscomp.underscoreProtoCanBeSet=function(){var b={a:!0},K={};try{return K.__proto__=b,K.a}catch(G){}return!1};$jscomp.setPrototypeOf=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(b,K){b.__proto__=K;if(b.__proto__!==K)throw new TypeError(b+" is not extensible");return b}:null;
$jscomp.polyfill("Object.setPrototypeOf",function(b){return b||$jscomp.setPrototypeOf},"es6","es5");$jscomp.checkEs6ConformanceViaProxy=function(){try{var b={},K=Object.create(new $jscomp.global.Proxy(b,{get:function(G,q,m){return G==b&&"q"==q&&m==K}}));return!0===K.q}catch(G){return!1}};$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();
$jscomp.polyfill("WeakMap",function(b){function K(){if(!b||!Object.seal)return!1;try{var e=Object.seal({}),n=Object.seal({}),p=new b([[e,2],[n,3]]);if(2!=p.get(e)||3!=p.get(n))return!1;p.delete(e);p.set(n,4);return!p.has(e)&&4==p.get(n)}catch(c){return!1}}function G(){}function q(e){var n=typeof e;return"object"===n&&null!==e||"function"===n}function m(e){if(!$jscomp.owns(e,h)){var n=new G;$jscomp.defineProperty(e,h,{value:n})}}function l(e){if(!$jscomp.ISOLATE_POLYFILLS){var n=Object[e];n&&(Object[e]=
function(p){if(p instanceof G)return p;Object.isExtensible(p)&&m(p);return n(p)})}}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(b&&$jscomp.ES6_CONFORMANCE)return b}else if(K())return b;var h="$jscomp_hidden_"+Math.random();l("freeze");l("preventExtensions");l("seal");var a=0,g=function(e){this.id_=(a+=Math.random()+1).toString();if(e){e=$jscomp.makeIterator(e);for(var n;!(n=e.next()).done;)n=n.value,this.set(n[0],n[1])}};g.prototype.set=function(e,n){if(!q(e))throw Error("Invalid WeakMap key");
m(e);if(!$jscomp.owns(e,h))throw Error("WeakMap key fail: "+e);e[h][this.id_]=n;return this};g.prototype.get=function(e){return q(e)&&$jscomp.owns(e,h)?e[h][this.id_]:void 0};g.prototype.has=function(e){return q(e)&&$jscomp.owns(e,h)&&$jscomp.owns(e[h],this.id_)};g.prototype.delete=function(e){return q(e)&&$jscomp.owns(e,h)&&$jscomp.owns(e[h],this.id_)?delete e[h][this.id_]:!1};return g},"es6","es3");$jscomp.polyfill("globalThis",function(b){return b||$jscomp.global},"es_2020","es3");
$jscomp.polyfill("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991},"es6","es3");
$jscomp.polyfill("Math.hypot",function(b){return b?b:function(K){if(2>arguments.length)return arguments.length?Math.abs(arguments[0]):0;var G,q,m;for(G=m=0;G<arguments.length;G++)m=Math.max(m,Math.abs(arguments[G]));if(1E100<m||1E-100>m){if(!m)return m;for(G=q=0;G<arguments.length;G++){var l=Number(arguments[G])/m;q+=l*l}return Math.sqrt(q)*m}for(G=q=0;G<arguments.length;G++)l=Number(arguments[G]),q+=l*l;return Math.sqrt(q)}},"es6","es3");
$jscomp.checkStringArgs=function(b,K,G){if(null==b)throw new TypeError("The 'this' value for String.prototype."+G+" must not be null or undefined");if(K instanceof RegExp)throw new TypeError("First argument to String.prototype."+G+" must not be a regular expression");return b+""};
$jscomp.polyfill("String.prototype.endsWith",function(b){return b?b:function(K,G){var q=$jscomp.checkStringArgs(this,K,"endsWith");K+="";void 0===G&&(G=q.length);G=Math.max(0,Math.min(G|0,q.length));for(var m=K.length;0<m&&0<G;)if(q[--G]!=K[--m])return!1;return 0>=m}},"es6","es3");$jscomp.polyfill("Math.log2",function(b){return b?b:function(K){return Math.log(K)/Math.LN2}},"es6","es3");$jscomp.polyfill("Object.getOwnPropertySymbols",function(b){return b?b:function(){return[]}},"es6","es5");
$jscomp.polyfill("String.prototype.repeat",function(b){return b?b:function(K){var G=$jscomp.checkStringArgs(this,null,"repeat");if(0>K||1342177279<K)throw new RangeError("Invalid count value");K|=0;for(var q="";K;)if(K&1&&(q+=G),K>>>=1)G+=G;return q}},"es6","es3");
$jscomp.polyfill("Array.prototype.flat",function(b){return b?b:function(K){K=void 0===K?1:K;for(var G=[],q=0;q<this.length;q++){var m=this[q];Array.isArray(m)&&0<K?(m=Array.prototype.flat.call(m,K-1),G.push.apply(G,m)):G.push(m)}return G}},"es9","es5");
$jscomp.polyfill("String.fromCodePoint",function(b){return b?b:function(K){for(var G="",q=0;q<arguments.length;q++){var m=Number(arguments[q]);if(0>m||1114111<m||m!==Math.floor(m))throw new RangeError("invalid_code_point "+m);65535>=m?G+=String.fromCharCode(m):(m-=65536,G+=String.fromCharCode(m>>>10&1023|55296),G+=String.fromCharCode(m&1023|56320))}return G}},"es6","es3");
(function(b){"object"===typeof exports&&"undefined"!==typeof module?module.exports=b():"function"===typeof define&&define.amd?define([],b):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).Plotly=b()})(function(){return function(){function b(K,G,q){function m(a,g){if(!G[a]){if(!K[a]){var e="function"==typeof require&&require;if(!g&&e)return e(a,!0);if(l)return l(a,!0);g=Error("Cannot find module '"+a+"'");throw g.code="MODULE_NOT_FOUND",g;
}g=G[a]={exports:{}};K[a][0].call(g.exports,function(n){return m(K[a][1][n]||n)},g,g.exports,b,K,G,q)}return G[a].exports}for(var l="function"==typeof require&&require,h=0;h<q.length;h++)m(q[h]);return m}return b}()({1:[function(b,K,G){b=b("../src/lib");K={"X,X div":"direction:ltr;font-family:'Open Sans', verdana, arial, sans-serif;margin:0;padding:0;","X input,X button":"font-family:'Open Sans', verdana, arial, sans-serif;","X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;",
"X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;",
"X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;",
"X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color 0.3s ease 0s;-moz-transition:background-color 0.3s ease 0s;-ms-transition:background-color 0.3s ease 0s;-o-transition:background-color 0.3s ease 0s;transition:background-color 0.3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity 0.3s ease 0s;-moz-transition:opacity 0.3s ease 0s;-ms-transition:opacity 0.3s ease 0s;-o-transition:opacity 0.3s ease 0s;transition:opacity 0.3s ease 0s;",
"X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;",
"X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;",
"X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":"content:'';position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;","X [data-title]:after":"content:attr(data-title);background:#69738a;color:white;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;",
"X .vertical [data-title]:before":"border:6px solid transparent;border-left-color:#69738a;margin-top:8px;margin-right:-30px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:white;","X .select-outline-2":"stroke:black;stroke-dasharray:2px 2px;",Y:"font-family:'Open Sans', verdana, arial, sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;","Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,0.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;",
"Y .notifier-close":"color:#fff;opacity:0.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var q in K)G=q.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier"),b.addStyleRule(G,K[q])},{"../src/lib":778}],2:[function(b,K,G){K.exports=b("../src/transforms/aggregate")},{"../src/transforms/aggregate":1365}],3:[function(b,K,G){K.exports=
b("../src/traces/bar")},{"../src/traces/bar":929}],4:[function(b,K,G){K.exports=b("../src/traces/barpolar")},{"../src/traces/barpolar":942}],5:[function(b,K,G){K.exports=b("../src/traces/box")},{"../src/traces/box":952}],6:[function(b,K,G){K.exports=b("../src/components/calendars")},{"../src/components/calendars":641}],7:[function(b,K,G){K.exports=b("../src/traces/candlestick")},{"../src/traces/candlestick":961}],8:[function(b,K,G){K.exports=b("../src/traces/carpet")},{"../src/traces/carpet":980}],
9:[function(b,K,G){K.exports=b("../src/traces/choropleth")},{"../src/traces/choropleth":994}],10:[function(b,K,G){K.exports=b("../src/traces/choroplethmapbox")},{"../src/traces/choroplethmapbox":1001}],11:[function(b,K,G){K.exports=b("../src/traces/cone")},{"../src/traces/cone":1007}],12:[function(b,K,G){K.exports=b("../src/traces/contour")},{"../src/traces/contour":1022}],13:[function(b,K,G){K.exports=b("../src/traces/contourcarpet")},{"../src/traces/contourcarpet":1033}],14:[function(b,K,G){K.exports=
b("../src/core")},{"../src/core":755}],15:[function(b,K,G){K.exports=b("../src/traces/densitymapbox")},{"../src/traces/densitymapbox":1041}],16:[function(b,K,G){K.exports=b("../src/transforms/filter")},{"../src/transforms/filter":1366}],17:[function(b,K,G){K.exports=b("../src/traces/funnel")},{"../src/traces/funnel":1051}],18:[function(b,K,G){K.exports=b("../src/traces/funnelarea")},{"../src/traces/funnelarea":1060}],19:[function(b,K,G){K.exports=b("../src/transforms/groupby")},{"../src/transforms/groupby":1367}],
20:[function(b,K,G){K.exports=b("../src/traces/heatmap")},{"../src/traces/heatmap":1073}],21:[function(b,K,G){K.exports=b("../src/traces/heatmapgl")},{"../src/traces/heatmapgl":1083}],22:[function(b,K,G){K.exports=b("../src/traces/histogram")},{"../src/traces/histogram":1095}],23:[function(b,K,G){K.exports=b("../src/traces/histogram2d")},{"../src/traces/histogram2d":1101}],24:[function(b,K,G){K.exports=b("../src/traces/histogram2dcontour")},{"../src/traces/histogram2dcontour":1105}],25:[function(b,
K,G){K.exports=b("../src/traces/image")},{"../src/traces/image":1113}],26:[function(b,K,G){G=b("./core");G.register([b("./bar"),b("./box"),b("./heatmap"),b("./histogram"),b("./histogram2d"),b("./histogram2dcontour"),b("./contour"),b("./scatterternary"),b("./violin"),b("./funnel"),b("./waterfall"),b("./image"),b("./pie"),b("./sunburst"),b("./treemap"),b("./funnelarea"),b("./scatter3d"),b("./surface"),b("./isosurface"),b("./volume"),b("./mesh3d"),b("./cone"),b("./streamtube"),b("./scattergeo"),b("./choropleth"),
b("./scattergl"),b("./splom"),b("./pointcloud"),b("./heatmapgl"),b("./parcoords"),b("./parcats"),b("./scattermapbox"),b("./choroplethmapbox"),b("./densitymapbox"),b("./sankey"),b("./indicator"),b("./table"),b("./carpet"),b("./scattercarpet"),b("./contourcarpet"),b("./ohlc"),b("./candlestick"),b("./scatterpolar"),b("./scatterpolargl"),b("./barpolar")]);G.register([b("./aggregate"),b("./filter"),b("./groupby"),b("./sort")]);G.register([b("./calendars")]);K.exports=G},{"./aggregate":2,"./bar":3,"./barpolar":4,
"./box":5,"./calendars":6,"./candlestick":7,"./carpet":8,"./choropleth":9,"./choroplethmapbox":10,"./cone":11,"./contour":12,"./contourcarpet":13,"./core":14,"./densitymapbox":15,"./filter":16,"./funnel":17,"./funnelarea":18,"./groupby":19,"./heatmap":20,"./heatmapgl":21,"./histogram":22,"./histogram2d":23,"./histogram2dcontour":24,"./image":25,"./indicator":27,"./isosurface":28,"./mesh3d":29,"./ohlc":30,"./parcats":31,"./parcoords":32,"./pie":33,"./pointcloud":34,"./sankey":35,"./scatter3d":36,"./scattercarpet":37,
"./scattergeo":38,"./scattergl":39,"./scattermapbox":40,"./scatterpolar":41,"./scatterpolargl":42,"./scatterternary":43,"./sort":44,"./splom":45,"./streamtube":46,"./sunburst":47,"./surface":48,"./table":49,"./treemap":50,"./violin":51,"./volume":52,"./waterfall":53}],27:[function(b,K,G){K.exports=b("../src/traces/indicator")},{"../src/traces/indicator":1121}],28:[function(b,K,G){K.exports=b("../src/traces/isosurface")},{"../src/traces/isosurface":1127}],29:[function(b,K,G){K.exports=b("../src/traces/mesh3d")},
{"../src/traces/mesh3d":1132}],30:[function(b,K,G){K.exports=b("../src/traces/ohlc")},{"../src/traces/ohlc":1137}],31:[function(b,K,G){K.exports=b("../src/traces/parcats")},{"../src/traces/parcats":1146}],32:[function(b,K,G){K.exports=b("../src/traces/parcoords")},{"../src/traces/parcoords":1156}],33:[function(b,K,G){K.exports=b("../src/traces/pie")},{"../src/traces/pie":1167}],34:[function(b,K,G){K.exports=b("../src/traces/pointcloud")},{"../src/traces/pointcloud":1176}],35:[function(b,K,G){K.exports=
b("../src/traces/sankey")},{"../src/traces/sankey":1182}],36:[function(b,K,G){K.exports=b("../src/traces/scatter3d")},{"../src/traces/scatter3d":1220}],37:[function(b,K,G){K.exports=b("../src/traces/scattercarpet")},{"../src/traces/scattercarpet":1227}],38:[function(b,K,G){K.exports=b("../src/traces/scattergeo")},{"../src/traces/scattergeo":1235}],39:[function(b,K,G){K.exports=b("../src/traces/scattergl")},{"../src/traces/scattergl":1248}],40:[function(b,K,G){K.exports=b("../src/traces/scattermapbox")},
{"../src/traces/scattermapbox":1258}],41:[function(b,K,G){K.exports=b("../src/traces/scatterpolar")},{"../src/traces/scatterpolar":1266}],42:[function(b,K,G){K.exports=b("../src/traces/scatterpolargl")},{"../src/traces/scatterpolargl":1273}],43:[function(b,K,G){K.exports=b("../src/traces/scatterternary")},{"../src/traces/scatterternary":1281}],44:[function(b,K,G){K.exports=b("../src/transforms/sort")},{"../src/transforms/sort":1369}],45:[function(b,K,G){K.exports=b("../src/traces/splom")},{"../src/traces/splom":1290}],
46:[function(b,K,G){K.exports=b("../src/traces/streamtube")},{"../src/traces/streamtube":1298}],47:[function(b,K,G){K.exports=b("../src/traces/sunburst")},{"../src/traces/sunburst":1306}],48:[function(b,K,G){K.exports=b("../src/traces/surface")},{"../src/traces/surface":1315}],49:[function(b,K,G){K.exports=b("../src/traces/table")},{"../src/traces/table":1323}],50:[function(b,K,G){K.exports=b("../src/traces/treemap")},{"../src/traces/treemap":1332}],51:[function(b,K,G){K.exports=b("../src/traces/violin")},
{"../src/traces/violin":1344}],52:[function(b,K,G){K.exports=b("../src/traces/volume")},{"../src/traces/volume":1352}],53:[function(b,K,G){K.exports=b("../src/traces/waterfall")},{"../src/traces/waterfall":1360}],54:[function(b,K,G){function q(g,e){this._controllerNames=Object.keys(g);this._controllerList=this._controllerNames.map(function(n){return g[n]});this._mode=e;this._active=g[e];this._active||(this._mode="turntable",this._active=g.turntable);this.modes=this._controllerNames;this.computedMatrix=
this._active.computedMatrix;this.computedEye=this._active.computedEye;this.computedUp=this._active.computedUp;this.computedCenter=this._active.computedCenter;this.computedRadius=this._active.computedRadius}K.exports=function(g){g=g||{};var e=g.eye||[0,0,1],n=g.center||[0,0,0],p=g.up||[0,1,0],c=g.distanceLimits||[0,Infinity];g=g.mode||"turntable";var d=m(),f=l(),k=h();d.setDistanceLimits(c[0],c[1]);d.lookAt(0,e,n,p);f.setDistanceLimits(c[0],c[1]);f.lookAt(0,e,n,p);k.setDistanceLimits(c[0],c[1]);k.lookAt(0,
e,n,p);return new q({turntable:d,orbit:f,matrix:k},g)};var m=b("turntable-camera-controller"),l=b("orbit-camera-controller"),h=b("matrix-camera-controller"),a=q.prototype;[["flush",1],["idle",1],["lookAt",4],["rotate",4],["pan",4],["translate",4],["setMatrix",2],["setDistanceLimits",2],["setDistance",2]].forEach(function(g){for(var e=g[0],n=[],p=0;p<g[1];++p)n.push("a"+p);g="var cc=this._controllerList;for(var i=0;i<cc.length;++i){cc[i]."+g[0]+"("+n.join()+")}";a[e]=Function.apply(null,n.concat(g))});
a.recalcMatrix=function(g){this._active.recalcMatrix(g)};a.getDistance=function(g){return this._active.getDistance(g)};a.getDistanceLimits=function(g){return this._active.getDistanceLimits(g)};a.lastT=function(){return this._active.lastT()};a.setMode=function(g){if(g!==this._mode){var e=this._controllerNames.indexOf(g);if(!(0>e)){var n=this._active;e=this._controllerList[e];var p=Math.max(n.lastT(),e.lastT());n.recalcMatrix(p);e.setMatrix(p,n.computedMatrix);this._active=e;this._mode=g;this.computedMatrix=
this._active.computedMatrix;this.computedEye=this._active.computedEye;this.computedUp=this._active.computedUp;this.computedCenter=this._active.computedCenter;this.computedRadius=this._active.computedRadius}}};a.getMode=function(){return this._mode}},{"matrix-camera-controller":480,"orbit-camera-controller":501,"turntable-camera-controller":581}],55:[function(b,K,G){(function(q,m){"object"===typeof G&&"undefined"!==typeof K?m(G,b("d3-array"),b("d3-collection"),b("d3-shape"),b("elementary-circuits-directed-graph")):
m(q.d3=q.d3||{},q.d3,q.d3,q.d3,null)})(this,function(q,m,l,h,a){function g(ba){return ba.target.depth}function e(ba,ma){return ba.sourceLinks.length?ba.depth:ma-1}function n(ba){return function(){return ba}}function p(ba,ma){return d(ba.source,ma.source)||ba.index-ma.index}function c(ba,ma){return d(ba.target,ma.target)||ba.index-ma.index}function d(ba,ma){return ba.partOfCycle===ma.partOfCycle?ba.y0-ma.y0:"top"===ba.circularLinkType||"bottom"===ma.circularLinkType?-1:1}function f(ba){return ba.value}
function k(ba){return(ba.y0+ba.y1)/2}function r(ba){return k(ba.source)}function u(ba){return k(ba.target)}function v(ba){return ba.index}function x(ba){return ba.nodes}function C(ba){return ba.links}function z(ba,ma){ba=ba.get(ma);if(!ba)throw Error("missing: "+ma);return ba}function y(ba,ma,qa){var ka=0;if(null===qa){var oa=[];for(ma=0;ma<ba.links.length;ma++){var na=ba.links[ma],la=na.source.index;na=na.target.index;oa[la]||(oa[la]=[]);oa[na]||(oa[na]=[]);-1===oa[la].indexOf(na)&&oa[la].push(na)}oa=
a(oa);oa.sort(function(sa,ta){return sa.length-ta.length});var ia={};for(ma=0;ma<oa.length;ma++)la=oa[ma].slice(-2),ia[la[0]]||(ia[la[0]]={}),ia[la[0]][la[1]]=!0;ba.links.forEach(function(sa){var ta=sa.target.index,Aa=sa.source.index;ta===Aa||ia[Aa]&&ia[Aa][ta]?(sa.circular=!0,sa.circularLinkID=ka,ka+=1):sa.circular=!1})}else ba.links.forEach(function(sa){sa.source[qa]<sa.target[qa]?sa.circular=!1:(sa.circular=!0,sa.circularLinkID=ka,ka+=1)})}function D(ba,ma){var qa=0,ka=0;ba.links.forEach(function(oa){oa.circular&&
(oa.circularLinkType=oa.source.circularLinkType||oa.target.circularLinkType?oa.source.circularLinkType?oa.source.circularLinkType:oa.target.circularLinkType:qa<ka?"top":"bottom","top"==oa.circularLinkType?qa+=1:ka+=1,ba.nodes.forEach(function(na){if(ma(na)==ma(oa.source)||ma(na)==ma(oa.target))na.circularLinkType=oa.circularLinkType}))});ba.links.forEach(function(oa){oa.circular&&(oa.source.circularLinkType==oa.target.circularLinkType&&(oa.circularLinkType=oa.source.circularLinkType),fa(oa,ma)&&(oa.circularLinkType=
oa.source.circularLinkType))})}function A(ba){return Math.atan(Math.abs(ba.target.x0-ba.source.x1)/Math.abs(ba.y1-ba.y0))}function t(ba,ma){var qa=0;ba.sourceLinks.forEach(function(oa){qa=oa.circular&&!fa(oa,ma)?qa+1:qa});var ka=0;ba.targetLinks.forEach(function(oa){ka=oa.circular&&!fa(oa,ma)?ka+1:ka});return qa+ka}function B(ba){var ma=0;ba.source.sourceLinks.forEach(function(ka){ma=ka.circular?ma+1:ma});var qa=0;ba.target.targetLinks.forEach(function(ka){qa=ka.circular?qa+1:qa});return 1<ma||1<
qa?!1:!0}function F(ba,ma,qa){ba.sort(J);ba.forEach(function(ka,oa){var na=0;if(!fa(ka,qa)||!B(ka)){var la=0;for(la;la<oa;la++){var ia=ba[oa];var sa=ba[la];ia=ia.source.column<sa.target.column?!1:ia.target.column>sa.source.column?!1:!0;ia&&(ia=ba[la].circularPathData.verticalBuffer+ba[la].width/2+ma,na=ia>na?ia:na)}}ka.circularPathData.verticalBuffer=na+ka.width/2});return ba}function I(ba,ma,qa,ka){var oa=m.min(ba.links,function(la){return la.source.y0});ba.links.forEach(function(la){la.circular&&
(la.circularPathData={})});var na=ba.links.filter(function(la){return"top"==la.circularLinkType});F(na,ma,ka);na=ba.links.filter(function(la){return"bottom"==la.circularLinkType});F(na,ma,ka);ba.links.forEach(function(la){if(la.circular){la.circularPathData.arcRadius=la.width+10;la.circularPathData.leftNodeBuffer=5;la.circularPathData.rightNodeBuffer=5;la.circularPathData.sourceWidth=la.source.x1-la.source.x0;la.circularPathData.sourceX=la.source.x0+la.circularPathData.sourceWidth;la.circularPathData.targetX=
la.target.x0;la.circularPathData.sourceY=la.y0;la.circularPathData.targetY=la.y1;if(fa(la,ka)&&B(la))la.circularPathData.leftSmallArcRadius=10+la.width/2,la.circularPathData.leftLargeArcRadius=10+la.width/2,la.circularPathData.rightSmallArcRadius=10+la.width/2,la.circularPathData.rightLargeArcRadius=10+la.width/2,"bottom"==la.circularLinkType?(la.circularPathData.verticalFullExtent=la.source.y1+25+la.circularPathData.verticalBuffer,la.circularPathData.verticalLeftInnerExtent=la.circularPathData.verticalFullExtent-
la.circularPathData.leftLargeArcRadius,la.circularPathData.verticalRightInnerExtent=la.circularPathData.verticalFullExtent-la.circularPathData.rightLargeArcRadius):(la.circularPathData.verticalFullExtent=la.source.y0-25-la.circularPathData.verticalBuffer,la.circularPathData.verticalLeftInnerExtent=la.circularPathData.verticalFullExtent+la.circularPathData.leftLargeArcRadius,la.circularPathData.verticalRightInnerExtent=la.circularPathData.verticalFullExtent+la.circularPathData.rightLargeArcRadius);
else{var ia=la.source.column,sa=la.circularLinkType,ta=ba.links.filter(function(Ka){return Ka.source.column==ia&&Ka.circularLinkType==sa});"bottom"==la.circularLinkType?ta.sort(H):ta.sort(L);var Aa=0;ta.forEach(function(Ka,Sa){Ka.circularLinkID==la.circularLinkID&&(la.circularPathData.leftSmallArcRadius=10+la.width/2+Aa,la.circularPathData.leftLargeArcRadius=10+la.width/2+Sa*ma+Aa);Aa+=Ka.width});ia=la.target.column;ta=ba.links.filter(function(Ka){return Ka.target.column==ia&&Ka.circularLinkType==
sa});"bottom"==la.circularLinkType?ta.sort(M):ta.sort(P);Aa=0;ta.forEach(function(Ka,Sa){Ka.circularLinkID==la.circularLinkID&&(la.circularPathData.rightSmallArcRadius=10+la.width/2+Aa,la.circularPathData.rightLargeArcRadius=10+la.width/2+Sa*ma+Aa);Aa+=Ka.width});"bottom"==la.circularLinkType?(la.circularPathData.verticalFullExtent=Math.max(qa,la.source.y1,la.target.y1)+25+la.circularPathData.verticalBuffer,la.circularPathData.verticalLeftInnerExtent=la.circularPathData.verticalFullExtent-la.circularPathData.leftLargeArcRadius,
la.circularPathData.verticalRightInnerExtent=la.circularPathData.verticalFullExtent-la.circularPathData.rightLargeArcRadius):(la.circularPathData.verticalFullExtent=oa-25-la.circularPathData.verticalBuffer,la.circularPathData.verticalLeftInnerExtent=la.circularPathData.verticalFullExtent+la.circularPathData.leftLargeArcRadius,la.circularPathData.verticalRightInnerExtent=la.circularPathData.verticalFullExtent+la.circularPathData.rightLargeArcRadius)}la.circularPathData.leftInnerExtent=la.circularPathData.sourceX+
la.circularPathData.leftNodeBuffer;la.circularPathData.rightInnerExtent=la.circularPathData.targetX-la.circularPathData.rightNodeBuffer;la.circularPathData.leftFullExtent=la.circularPathData.sourceX+la.circularPathData.leftLargeArcRadius+la.circularPathData.leftNodeBuffer;la.circularPathData.rightFullExtent=la.circularPathData.targetX-la.circularPathData.rightLargeArcRadius-la.circularPathData.rightNodeBuffer}la.circular?la.path="top"==la.circularLinkType?"M"+la.circularPathData.sourceX+" "+la.circularPathData.sourceY+
" L"+la.circularPathData.leftInnerExtent+" "+la.circularPathData.sourceY+" A"+la.circularPathData.leftLargeArcRadius+" "+la.circularPathData.leftSmallArcRadius+" 0 0 0 "+la.circularPathData.leftFullExtent+" "+(la.circularPathData.sourceY-la.circularPathData.leftSmallArcRadius)+" L"+la.circularPathData.leftFullExtent+" "+la.circularPathData.verticalLeftInnerExtent+" A"+la.circularPathData.leftLargeArcRadius+" "+la.circularPathData.leftLargeArcRadius+" 0 0 0 "+la.circularPathData.leftInnerExtent+" "+
la.circularPathData.verticalFullExtent+" L"+la.circularPathData.rightInnerExtent+" "+la.circularPathData.verticalFullExtent+" A"+la.circularPathData.rightLargeArcRadius+" "+la.circularPathData.rightLargeArcRadius+" 0 0 0 "+la.circularPathData.rightFullExtent+" "+la.circularPathData.verticalRightInnerExtent+" L"+la.circularPathData.rightFullExtent+" "+(la.circularPathData.targetY-la.circularPathData.rightSmallArcRadius)+" A"+la.circularPathData.rightLargeArcRadius+" "+la.circularPathData.rightSmallArcRadius+
" 0 0 0 "+la.circularPathData.rightInnerExtent+" "+la.circularPathData.targetY+" L"+la.circularPathData.targetX+" "+la.circularPathData.targetY:"M"+la.circularPathData.sourceX+" "+la.circularPathData.sourceY+" L"+la.circularPathData.leftInnerExtent+" "+la.circularPathData.sourceY+" A"+la.circularPathData.leftLargeArcRadius+" "+la.circularPathData.leftSmallArcRadius+" 0 0 1 "+la.circularPathData.leftFullExtent+" "+(la.circularPathData.sourceY+la.circularPathData.leftSmallArcRadius)+" L"+la.circularPathData.leftFullExtent+
" "+la.circularPathData.verticalLeftInnerExtent+" A"+la.circularPathData.leftLargeArcRadius+" "+la.circularPathData.leftLargeArcRadius+" 0 0 1 "+la.circularPathData.leftInnerExtent+" "+la.circularPathData.verticalFullExtent+" L"+la.circularPathData.rightInnerExtent+" "+la.circularPathData.verticalFullExtent+" A"+la.circularPathData.rightLargeArcRadius+" "+la.circularPathData.rightLargeArcRadius+" 0 0 1 "+la.circularPathData.rightFullExtent+" "+la.circularPathData.verticalRightInnerExtent+" L"+la.circularPathData.rightFullExtent+
" "+(la.circularPathData.targetY+la.circularPathData.rightSmallArcRadius)+" A"+la.circularPathData.rightLargeArcRadius+" "+la.circularPathData.rightSmallArcRadius+" 0 0 1 "+la.circularPathData.rightInnerExtent+" "+la.circularPathData.targetY+" L"+la.circularPathData.targetX+" "+la.circularPathData.targetY:(ta=h.linkHorizontal().source(function(Ka){return[Ka.source.x0+(Ka.source.x1-Ka.source.x0),Ka.y0]}).target(function(Ka){return[Ka.target.x0,Ka.y1]}),la.path=ta(la))})}function J(ba,ma){return N(ba)==
N(ma)?"bottom"==ba.circularLinkType?H(ba,ma):L(ba,ma):N(ma)-N(ba)}function L(ba,ma){return ba.y0-ma.y0}function H(ba,ma){return ma.y0-ba.y0}function P(ba,ma){return ba.y1-ma.y1}function M(ba,ma){return ma.y1-ba.y1}function N(ba){return ba.target.column-ba.source.column}function T(ba,ma){var qa=A(ba);ma=(ma.target.x0-ma.source.x1)/Math.tan(qa);return"up"==aa(ba)?ba.y1+ma:ba.y1-ma}function Q(ba,ma){var qa=A(ba);ma=(ma.target.x0-ma.source.x1)/Math.tan(qa);return"up"==aa(ba)?ba.y1-ma:ba.y1+ma}function U(ba,
ma,qa,ka){ba.links.forEach(function(oa){if(!oa.circular&&1<oa.target.column-oa.source.column){var na=oa.source.column+1,la=oa.target.column-1,ia=1,sa=la-na+1;for(ia=1;na<=la;na++,ia++)ba.nodes.forEach(function(ta){if(ta.column==na){var Aa=ia/(sa+1),Ka=Math.pow(1-Aa,3)*oa.y0+3*Aa*Math.pow(1-Aa,2)*oa.y0+3*Math.pow(Aa,2)*(1-Aa)*oa.y1+Math.pow(Aa,3)*oa.y1;Aa=Ka-oa.width/2;Ka+=oa.width/2;if(Aa>ta.y0&&Aa<ta.y1){var Sa=ta.y1-Aa+10;Sa="bottom"==ta.circularLinkType?Sa:-Sa;ta=S(ta,Sa,ma,qa);ba.nodes.forEach(function(db){ka(db)!=
ka(ta)&&db.column==ta.column&&(ta.y0>db.y0&&ta.y0<db.y1||ta.y1>db.y0&&ta.y1<db.y1||ta.y0<db.y0&&ta.y1>db.y1)&&S(db,Sa,ma,qa)})}else Ka>ta.y0&&Ka<ta.y1?(Sa=Ka-ta.y0+10,ta=S(ta,Sa,ma,qa),ba.nodes.forEach(function(db){ka(db)!=ka(ta)&&db.column==ta.column&&db.y0<ta.y1&&db.y1>ta.y1&&S(db,Sa,ma,qa)})):Aa<ta.y0&&Ka>ta.y1&&(Sa=Ka-ta.y0+10,ta=S(ta,Sa,ma,qa),ba.nodes.forEach(function(db){ka(db)!=ka(ta)&&db.column==ta.column&&db.y0<ta.y1&&db.y1>ta.y1&&S(db,Sa,ma,qa)}))}})}})}function S(ba,ma,qa,ka){ba.y0+ma>=
qa&&ba.y1+ma<=ka&&(ba.y0+=ma,ba.y1+=ma,ba.targetLinks.forEach(function(oa){oa.y1+=ma}),ba.sourceLinks.forEach(function(oa){oa.y0+=ma}));return ba}function X(ba,ma,qa,ka){ba.nodes.forEach(function(oa){ka&&oa.y+(oa.y1-oa.y0)>ma&&(oa.y-=oa.y+(oa.y1-oa.y0)-ma);var na=ba.links.filter(function(sa){return qa(sa.source)==qa(oa)}),la=na.length;1<la&&na.sort(function(sa,ta){if(!sa.circular&&!ta.circular)if(sa.target.column!=ta.target.column&&aa(sa)==aa(ta)){if(sa.target.column>ta.target.column)return ta=Q(ta,
sa),sa.y1-ta;if(ta.target.column>sa.target.column)return Q(sa,ta)-ta.y1}else return sa.y1-ta.y1;if(sa.circular&&!ta.circular)return"top"==sa.circularLinkType?-1:1;if(ta.circular&&!sa.circular)return"top"==ta.circularLinkType?1:-1;if(sa.circular&&ta.circular)return sa.circularLinkType===ta.circularLinkType&&"top"==sa.circularLinkType?sa.target.column===ta.target.column?sa.target.y1-ta.target.y1:ta.target.column-sa.target.column:sa.circularLinkType===ta.circularLinkType&&"bottom"==sa.circularLinkType?
sa.target.column===ta.target.column?ta.target.y1-sa.target.y1:sa.target.column-ta.target.column:"top"==sa.circularLinkType?-1:1});var ia=oa.y0;na.forEach(function(sa){sa.y0=ia+sa.width/2;ia+=sa.width});na.forEach(function(sa,ta){if("bottom"==sa.circularLinkType){ta+=1;var Aa=0;for(ta;ta<la;ta++)Aa+=na[ta].width;sa.y0=oa.y1-Aa-sa.width/2}})})}function Z(ba,ma,qa){ba.nodes.forEach(function(ka){var oa=ba.links.filter(function(ia){return qa(ia.target)==qa(ka)}),na=oa.length;1<na&&oa.sort(function(ia,
sa){if(!ia.circular&&!sa.circular)if(ia.source.column!=sa.source.column&&aa(ia)==aa(sa)){if(sa.source.column<ia.source.column)return sa=T(sa,ia),ia.y0-sa;if(ia.source.column<sa.source.column)return T(ia,sa)-sa.y0}else return ia.y0-sa.y0;if(ia.circular&&!sa.circular)return"top"==ia.circularLinkType?-1:1;if(sa.circular&&!ia.circular)return"top"==sa.circularLinkType?1:-1;if(ia.circular&&sa.circular)return ia.circularLinkType===sa.circularLinkType&&"top"==ia.circularLinkType?ia.source.column===sa.source.column?
ia.source.y1-sa.source.y1:ia.source.column-sa.source.column:ia.circularLinkType===sa.circularLinkType&&"bottom"==ia.circularLinkType?ia.source.column===sa.source.column?ia.source.y1-sa.source.y1:sa.source.column-ia.source.column:"top"==ia.circularLinkType?-1:1});var la=ka.y0;oa.forEach(function(ia){ia.y1=la+ia.width/2;la+=ia.width});oa.forEach(function(ia,sa){if("bottom"==ia.circularLinkType){sa+=1;var ta=0;for(sa;sa<na;sa++)ta+=oa[sa].width;ia.y1=ka.y1-ta-ia.width/2}})})}function aa(ba){return 0<
ba.y0-ba.y1?"up":"down"}function fa(ba,ma){return ma(ba.source)==ma(ba.target)}function ha(ba,ma,qa){var ka=ba.nodes;ba=ba.links;var oa=!1,na=!1;ba.forEach(function(ta){"top"==ta.circularLinkType?oa=!0:"bottom"==ta.circularLinkType&&(na=!0)});if(0==oa||0==na){var la=m.min(ka,function(ta){return ta.y0}),ia=m.max(ka,function(ta){return ta.y1}),sa=(qa-ma)/(ia-la);ka.forEach(function(ta){var Aa=(ta.y1-ta.y0)*sa;ta.y0=(ta.y0-la)*sa;ta.y1=ta.y0+Aa});ba.forEach(function(ta){ta.y0=(ta.y0-la)*sa;ta.y1=(ta.y1-
la)*sa;ta.width*=sa})}}a=a&&a.hasOwnProperty("default")?a["default"]:a;var ja="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(ba){return typeof ba}:function(ba){return ba&&"function"===typeof Symbol&&ba.constructor===Symbol&&ba!==Symbol.prototype?"symbol":typeof ba};q.sankeyCircular=function(){function ba(){var Ga={nodes:ab.apply(null,arguments),links:Ya.apply(null,arguments)};ma(Ga);y(Ga,eb,Ba);qa(Ga);na(Ga);D(Ga,eb);la(Ga,hb,eb);ia(Ga);for(var Na=0;4>Na;Na++)X(Ga,Ka,eb),Z(Ga,
Ka,eb),U(Ga,ta,Ka,eb),X(Ga,Ka,eb),Z(Ga,Ka,eb);ha(Ga,ta,Ka);I(Ga,nb,Ka,eb);return Ga}function ma(Ga){Ga.nodes.forEach(function($a,Va){$a.index=Va;$a.sourceLinks=[];$a.targetLinks=[]});var Na=l.map(Ga.nodes,eb);Ga.links.forEach(function($a,Va){$a.index=Va;Va=$a.source;var qb=$a.target;"object"!==("undefined"===typeof Va?"undefined":ja(Va))&&(Va=$a.source=z(Na,Va));"object"!==("undefined"===typeof qb?"undefined":ja(qb))&&(qb=$a.target=z(Na,qb));Va.sourceLinks.push($a);qb.targetLinks.push($a)});return Ga}
function qa(Ga){Ga.nodes.forEach(function(Na){Na.partOfCycle=!1;Na.value=Math.max(m.sum(Na.sourceLinks,f),m.sum(Na.targetLinks,f));Na.sourceLinks.forEach(function($a){$a.circular&&(Na.partOfCycle=!0,Na.circularLinkType=$a.circularLinkType)});Na.targetLinks.forEach(function($a){$a.circular&&(Na.partOfCycle=!0,Na.circularLinkType=$a.circularLinkType)})})}function ka(Ga){var Na=0,$a=0,Va=0,qb=0,Ha=m.max(Ga.nodes,function(Ra){return Ra.column});Ga.links.forEach(function(Ra){Ra.circular&&("top"==Ra.circularLinkType?
Na+=Ra.width:$a+=Ra.width,0==Ra.target.column&&(qb+=Ra.width),Ra.source.column==Ha&&(Va+=Ra.width))});Na=0<Na?Na+25+10:Na;$a=0<$a?$a+25+10:$a;Va=0<Va?Va+25+10:Va;qb=0<qb?qb+25+10:qb;return{top:Na,bottom:$a,left:qb,right:Va}}function oa(Ga,Na){var $a=m.max(Ga.nodes,function(Ha){return Ha.column}),Va=Aa-sa,qb=Ka-ta;Va/=Va+Na.right+Na.left;qb/=qb+Na.top+Na.bottom;sa=sa*Va+Na.left;Aa=0==Na.right?Aa:Aa*Va;ta=ta*qb+Na.top;Ka*=qb;Ga.nodes.forEach(function(Ha){Ha.x0=sa+(Aa-sa-Sa)/$a*Ha.column;Ha.x1=Ha.x0+
Sa});return qb}function na(Ga){var Na;var $a=Ga.nodes;var Va=[];for(Na=0;$a.length;++Na,$a=Va,Va=[])$a.forEach(function(qb){qb.depth=Na;qb.sourceLinks.forEach(function(Ha){0>Va.indexOf(Ha.target)&&!Ha.circular&&Va.push(Ha.target)})});$a=Ga.nodes;Va=[];for(Na=0;$a.length;++Na,$a=Va,Va=[])$a.forEach(function(qb){qb.height=Na;qb.targetLinks.forEach(function(Ha){0>Va.indexOf(Ha.source)&&!Ha.circular&&Va.push(Ha.source)})});Ga.nodes.forEach(function(qb){qb.column=Math.floor(lb.call(null,qb,Na))})}function la(Ga,
Na,$a){function Va(La,gb){var ob=Ha.length;Ha.forEach(function(ub){var za=ub.length,Da=ub[0].depth;ub.forEach(function(Ja){if((Ja.sourceLinks.length||Ja.targetLinks.length)&&!(Ja.partOfCycle&&0<t(Ja,gb)))if(0==Da&&1==za){var Ta=Ja.y1-Ja.y0;Ja.y0=Ka/2-Ta/2;Ja.y1=Ka/2+Ta/2}else if(Da==ob-1&&1==za)Ta=Ja.y1-Ja.y0,Ja.y0=Ka/2-Ta/2,Ja.y1=Ka/2+Ta/2;else{Ta=m.mean(Ja.sourceLinks,u);var Xa=m.mean(Ja.targetLinks,r);Ta=((Ta&&Xa?(Ta+Xa)/2:Ta||Xa)-k(Ja))*La;Ja.y0+=Ta;Ja.y1+=Ta}})})}function qb(){Ha.forEach(function(La){var gb=
ta,ob=La.length,ub;La.sort(d);for(ub=0;ub<ob;++ub){var za=La[ub];var Da=gb-za.y0;0<Da&&(za.y0+=Da,za.y1+=Da);gb=za.y1+db}Da=gb-db-Ka;if(0<Da)for(gb=za.y0-=Da,za.y1-=Da,ub=ob-2;0<=ub;--ub)za=La[ub],Da=za.y1+db-gb,0<Da&&(za.y0-=Da,za.y1-=Da),gb=za.y0})}var Ha=l.nest().key(function(La){return La.column}).sortKeys(m.ascending).entries(Ga.nodes).map(function(La){return La.values});(function(La){if(va){var gb=Infinity;Ha.forEach(function(Da){Da=Ka*va/(Da.length+1);gb=Da<gb?Da:gb});db=gb}var ob=m.min(Ha,
function(Da){return(Ka-ta-(Da.length-1)*db)/m.sum(Da,f)});ob*=.3;Ga.links.forEach(function(Da){Da.width=Da.value*ob});var ub=ka(Ga),za=oa(Ga,ub);ob*=za;Ga.links.forEach(function(Da){Da.width=Da.value*ob});Ha.forEach(function(Da){var Ja=Da.length;Da.forEach(function(Ta,Xa){Ta.depth==Ha.length-1&&1==Ja?Ta.y0=Ka/2-Ta.value*ob:0==Ta.depth&&1==Ja?Ta.y0=Ka/2-Ta.value*ob:Ta.partOfCycle?0==t(Ta,La)?Ta.y0=Ka/2+Xa:Ta.y0="top"==Ta.circularLinkType?ta+Xa:Ka-Ta.value*ob-Xa:Ta.y0=0==ub.top||0==ub.bottom?(Ka-ta)/
Ja*Xa:(Ka-ta)/2-Ja/2+Xa;Ta.y1=Ta.y0+Ta.value*ob})})})($a);qb();for(var Ra=1;0<Na;--Na)Va(Ra*=.99,$a),qb()}function ia(Ga){Ga.nodes.forEach(function(Na){Na.sourceLinks.sort(c);Na.targetLinks.sort(p)});Ga.nodes.forEach(function(Na){var $a=Na.y0,Va=$a,qb=Na.y1,Ha=qb;Na.sourceLinks.forEach(function(Ra){Ra.circular?(Ra.y0=qb-Ra.width/2,qb-=Ra.width):(Ra.y0=$a+Ra.width/2,$a+=Ra.width)});Na.targetLinks.forEach(function(Ra){Ra.circular?(Ra.y1=Ha-Ra.width/2,Ha-=Ra.width):(Ra.y1=Va+Ra.width/2,Va+=Ra.width)})})}
var sa=0,ta=0,Aa=1,Ka=1,Sa=24,db,eb=v,lb=e,ab=x,Ya=C,hb=32,nb=2,va,Ba=null;ba.nodeId=function(Ga){return arguments.length?(eb="function"===typeof Ga?Ga:n(Ga),ba):eb};ba.nodeAlign=function(Ga){return arguments.length?(lb="function"===typeof Ga?Ga:n(Ga),ba):lb};ba.nodeWidth=function(Ga){return arguments.length?(Sa=+Ga,ba):Sa};ba.nodePadding=function(Ga){return arguments.length?(db=+Ga,ba):db};ba.nodes=function(Ga){return arguments.length?(ab="function"===typeof Ga?Ga:n(Ga),ba):ab};ba.links=function(Ga){return arguments.length?
(Ya="function"===typeof Ga?Ga:n(Ga),ba):Ya};ba.size=function(Ga){return arguments.length?(sa=ta=0,Aa=+Ga[0],Ka=+Ga[1],ba):[Aa-sa,Ka-ta]};ba.extent=function(Ga){return arguments.length?(sa=+Ga[0][0],Aa=+Ga[1][0],ta=+Ga[0][1],Ka=+Ga[1][1],ba):[[sa,ta],[Aa,Ka]]};ba.iterations=function(Ga){return arguments.length?(hb=+Ga,ba):hb};ba.circularLinkGap=function(Ga){return arguments.length?(nb=+Ga,ba):nb};ba.nodePaddingRatio=function(Ga){return arguments.length?(va=+Ga,ba):va};ba.sortNodes=function(Ga){return arguments.length?
(Ba=Ga,ba):Ba};ba.update=function(Ga){D(Ga,eb);ia(Ga);Ga.links.forEach(function(Na){Na.circular&&(Na.circularLinkType=Na.y0+Na.y1<Ka?"top":"bottom",Na.source.circularLinkType=Na.circularLinkType,Na.target.circularLinkType=Na.circularLinkType)});X(Ga,Ka,eb,!1);Z(Ga,Ka,eb);I(Ga,nb,Ka,eb);return Ga};return ba};q.sankeyCenter=function(ba){return ba.targetLinks.length?ba.depth:ba.sourceLinks.length?m.min(ba.sourceLinks,g)-1:0};q.sankeyLeft=function(ba){return ba.depth};q.sankeyRight=function(ba,ma){return ma-
1-ba.height};q.sankeyJustify=e;Object.defineProperty(q,"__esModule",{value:!0})})},{"d3-array":156,"d3-collection":157,"d3-shape":165,"elementary-circuits-directed-graph":179}],56:[function(b,K,G){(function(q,m){"object"===typeof G&&"undefined"!==typeof K?m(G,b("d3-array"),b("d3-collection"),b("d3-shape")):m(q.d3=q.d3||{},q.d3,q.d3,q.d3)})(this,function(q,m,l,h){function a(D){return D.target.depth}function g(D,A){return D.sourceLinks.length?D.depth:A-1}function e(D){return function(){return D}}function n(D,
A){return c(D.source,A.source)||D.index-A.index}function p(D,A){return c(D.target,A.target)||D.index-A.index}function c(D,A){return D.y0-A.y0}function d(D){return D.value}function f(D){return(D.y0+D.y1)/2}function k(D){return f(D.source)*D.value}function r(D){return f(D.target)*D.value}function u(D){return D.index}function v(D){return D.nodes}function x(D){return D.links}function C(D,A){D=D.get(A);if(!D)throw Error("missing: "+A);return D}function z(D){return[D.source.x1,D.y0]}function y(D){return[D.target.x0,
D.y1]}q.sankey=function(){function D(){var aa={nodes:U.apply(null,arguments),links:S.apply(null,arguments)};A(aa);t(aa);B(aa);F(aa,X);I(aa);return aa}function A(aa){aa.nodes.forEach(function(ha,ja){ha.index=ja;ha.sourceLinks=[];ha.targetLinks=[]});var fa=l.map(aa.nodes,T);aa.links.forEach(function(ha,ja){ha.index=ja;ja=ha.source;var ba=ha.target;"object"!==typeof ja&&(ja=ha.source=C(fa,ja));"object"!==typeof ba&&(ba=ha.target=C(fa,ba));ja.sourceLinks.push(ha);ba.targetLinks.push(ha)})}function t(aa){aa.nodes.forEach(function(fa){fa.value=
Math.max(m.sum(fa.sourceLinks,d),m.sum(fa.targetLinks,d))})}function B(aa){var fa;var ha=aa.nodes;var ja=[];for(fa=0;ha.length;++fa,ha=ja,ja=[])ha.forEach(function(ma){ma.depth=fa;ma.sourceLinks.forEach(function(qa){0>ja.indexOf(qa.target)&&ja.push(qa.target)})});ha=aa.nodes;ja=[];for(fa=0;ha.length;++fa,ha=ja,ja=[])ha.forEach(function(ma){ma.height=fa;ma.targetLinks.forEach(function(qa){0>ja.indexOf(qa.source)&&ja.push(qa.source)})});var ba=(H-J-M)/(fa-1);aa.nodes.forEach(function(ma){ma.x1=(ma.x0=
J+Math.max(0,Math.min(fa-1,Math.floor(Q.call(null,ma,fa))))*ba)+M})}function F(aa){function fa(ka){ba.forEach(function(oa){oa.forEach(function(na){if(na.targetLinks.length){var la=(m.sum(na.targetLinks,k)/m.sum(na.targetLinks,d)-f(na))*ka;na.y0+=la;na.y1+=la}})})}function ha(ka){ba.slice().reverse().forEach(function(oa){oa.forEach(function(na){if(na.sourceLinks.length){var la=(m.sum(na.sourceLinks,r)/m.sum(na.sourceLinks,d)-f(na))*ka;na.y0+=la;na.y1+=la}})})}function ja(){ba.forEach(function(ka){var oa=
L,na=ka.length,la;ka.sort(c);for(la=0;la<na;++la){var ia=ka[la];var sa=oa-ia.y0;0<sa&&(ia.y0+=sa,ia.y1+=sa);oa=ia.y1+N}sa=oa-N-P;if(0<sa)for(oa=ia.y0-=sa,ia.y1-=sa,la=na-2;0<=la;--la)ia=ka[la],sa=ia.y1+N-oa,0<sa&&(ia.y0-=sa,ia.y1-=sa),oa=ia.y0})}var ba=l.nest().key(function(ka){return ka.x0}).sortKeys(m.ascending).entries(aa.nodes).map(function(ka){return ka.values});(function(){var ka=m.max(ba,function(na){return na.length});ka=Z*(P-L)/(ka-1);N>ka&&(N=ka);var oa=m.min(ba,function(na){return(P-L-
(na.length-1)*N)/m.sum(na,d)});ba.forEach(function(na){na.forEach(function(la,ia){la.y1=(la.y0=ia)+la.value*oa})});aa.links.forEach(function(na){na.width=na.value*oa})})();ja();for(var ma=1,qa=X;0<qa;--qa)ha(ma*=.99),ja(),fa(ma),ja()}function I(aa){aa.nodes.forEach(function(fa){fa.sourceLinks.sort(p);fa.targetLinks.sort(n)});aa.nodes.forEach(function(fa){var ha=fa.y0,ja=ha;fa.sourceLinks.forEach(function(ba){ba.y0=ha+ba.width/2;ha+=ba.width});fa.targetLinks.forEach(function(ba){ba.y1=ja+ba.width/
2;ja+=ba.width})})}var J=0,L=0,H=1,P=1,M=24,N=8,T=u,Q=g,U=v,S=x,X=32,Z=2/3;D.update=function(aa){I(aa);return aa};D.nodeId=function(aa){return arguments.length?(T="function"===typeof aa?aa:e(aa),D):T};D.nodeAlign=function(aa){return arguments.length?(Q="function"===typeof aa?aa:e(aa),D):Q};D.nodeWidth=function(aa){return arguments.length?(M=+aa,D):M};D.nodePadding=function(aa){return arguments.length?(N=+aa,D):N};D.nodes=function(aa){return arguments.length?(U="function"===typeof aa?aa:e(aa),D):U};
D.links=function(aa){return arguments.length?(S="function"===typeof aa?aa:e(aa),D):S};D.size=function(aa){return arguments.length?(J=L=0,H=+aa[0],P=+aa[1],D):[H-J,P-L]};D.extent=function(aa){return arguments.length?(J=+aa[0][0],H=+aa[1][0],L=+aa[0][1],P=+aa[1][1],D):[[J,L],[H,P]]};D.iterations=function(aa){return arguments.length?(X=+aa,D):X};return D};q.sankeyCenter=function(D){return D.targetLinks.length?D.depth:D.sourceLinks.length?m.min(D.sourceLinks,a)-1:0};q.sankeyLeft=function(D){return D.depth};
q.sankeyRight=function(D,A){return A-1-D.height};q.sankeyJustify=g;q.sankeyLinkHorizontal=function(){return h.linkHorizontal().source(z).target(y)};Object.defineProperty(q,"__esModule",{value:!0})})},{"d3-array":156,"d3-collection":157,"d3-shape":165}],57:[function(b,K,G){K.exports=b("./quad")},{"./quad":58}],58:[function(b,K,G){function q(f,k){var r=k[0],u=k[1],v=1/(k[2]-r);k=1/(k[3]-u);for(var x=Array(f.length),C=0,z=f.length/2;C<z;C++)x[2*C]=l((f[2*C]-r)*v,0,1),x[2*C+1]=l((f[2*C+1]-u)*k,0,1);return x}
var m=b("binary-search-bounds"),l=b("clamp"),h=b("parse-rect"),a=b("array-bounds"),g=b("pick-by-alias"),e=b("defined"),n=b("flatten-vertex-data"),p=b("is-obj"),c=b("dtype"),d=b("math-log2");K.exports=function(f,k){function r(H,P,M,N,T,Q){if(!N.length)return null;var U=A[T]||(A[T]=[]),S=B[T]||(B[T]=[]),X=t[T]||(t[T]=[]),Z=U.length;T++;if(T>x||1073741824<Q){for(H=0;H<N.length;H++)U.push(N[H]),S.push(Q),X.push(null,null,null,null);return Z}U.push(N[0]);S.push(Q);if(1>=N.length)return X.push(null,null,
null,null),Z;U=.5*M;S=H+U;M=P+U;for(var aa=[],fa=[],ha=[],ja=[],ba=1,ma=N.length;ba<ma;ba++){var qa=N[ba],ka=z[2*qa+1];z[2*qa]<S?ka<M?aa.push(qa):fa.push(qa):ka<M?ha.push(qa):ja.push(qa)}Q<<=2;X.push(r(H,P,U,aa,T,Q),r(H,M,U,fa,T,Q+1),r(S,P,U,ha,T,Q+2),r(S,M,U,ja,T,Q+3));return Z}function u(H,P,M,N,T){for(var Q=[],U=0;U<T;U++){var S=B[U],X=F[U][0],Z=v(H,P,U),aa=v(M,N,U);Z=m.ge(S,Z);S=m.gt(S,aa,Z,S.length-1);Q[U]=[Z+X,S+X]}return Q}function v(H,P,M){for(var N=1,T=.5,Q=.5,U=.5,S=0;S<M;S++)N<<=2,N+=H<
T?P<Q?0:1:P<Q?2:3,U*=.5,T+=H<T?-U:U,Q+=P<Q?-U:U;return N}k||(k={});f=n(f,"float64");k=g(k,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var x=e(k.maxDepth,255),C=e(k.bounds,a(f,2));C[0]===C[2]&&C[2]++;C[1]===C[3]&&C[3]++;var z=q(f,C),y=f.length>>>1;k.dtype||(k.dtype="array");if("string"===typeof k.dtype)var D=new (c(k.dtype))(y);else k.dtype&&(D=k.dtype,Array.isArray(D)&&(D.length=y));
for(k=0;k<y;++k)D[k]=k;var A=[],t=[],B=[],F=[];r(0,0,1,D,0,1);for(k=y=0;k<A.length;k++){var I=A[k];if(D.set)D.set(I,y);else for(var J=0,L=I.length;J<L;J++)D[J+y]=I[J];I=y+A[k].length;F[k]=[y,I];y=I}D.range=function(){function H(ma,qa,ka,oa,na,la){if(null!==na&&null!==la&&!(X>ma+ka||Z>qa+ka||aa<ma||fa<qa||oa>=ha||na===la)){var ia=A[oa];void 0===la&&(la=ia.length);for(var sa=na;sa<la;sa++){var ta=ia[sa],Aa=f[2*ta],Ka=f[2*ta+1];Aa>=T&&Aa<=U&&Ka>=Q&&Ka<=S&&ba.push(ta)}Aa=t[oa];la=Aa[4*na];ia=Aa[4*na+
1];sa=Aa[4*na+2];ta=Aa[4*na+3];a:{Ka=null;for(var Sa=0;null===Ka;)if(Ka=Aa[4*(na+1)+Sa],Sa++,Sa>Aa.length){na=null;break a}na=Ka}ka*=.5;oa+=1;H(ma,qa,ka,oa,la,ia||sa||ta||na);H(ma,qa+ka,ka,oa,ia,sa||ta||na);H(ma+ka,qa,ka,oa,sa,ta||na);H(ma+ka,qa+ka,ka,oa,ta,na)}}for(var P=[],M=arguments.length;M--;)P[M]=arguments[M];if(p(P[P.length-1])){var N=P.pop();P.length||null==N.x&&null==N.l&&null==N.left||(P=[N],M={});M=g(N,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",
lod:"lod details ranges offsets"})}else M={};P.length||(P=C);P=h.apply(void 0,P);P=[Math.min(P.x,P.x+P.width),Math.min(P.y,P.y+P.height),Math.max(P.x,P.x+P.width),Math.max(P.y,P.y+P.height)];var T=P[0],Q=P[1],U=P[2],S=P[3];P=q([T,Q,U,S],C);var X=P[0],Z=P[1],aa=P[2],fa=P[3],ha=e(M.level,A.length);if(null!=M.d){if("number"===typeof M.d)var ja=[M.d,M.d];else M.d.length&&(ja=M.d);ha=Math.min(Math.max(Math.ceil(-d(Math.abs(ja[0])/(C[2]-C[0]))),Math.ceil(-d(Math.abs(ja[1])/(C[3]-C[1])))),ha)}ha=Math.min(ha,
A.length);if(M.lod)return u(X,Z,aa,fa,ha);var ba=[];H(0,0,1,0,0,1);return ba};return D}},{"array-bounds":70,"binary-search-bounds":96,clamp:120,defined:170,dtype:175,"flatten-vertex-data":244,"is-obj":468,"math-log2":479,"parse-rect":504,"pick-by-alias":511}],59:[function(b,K,G){function q(h){var a=0;if(h&&0<h.length){a+=Math.abs(m(h[0]));for(var g=1;g<h.length;g++)a-=Math.abs(m(h[g]))}return a}function m(h){var a,g=0,e=h.length;if(2<e){for(a=0;a<e;a++){if(a===e-2){var n=e-2;var p=e-1;var c=0}else a===
e-1?(n=e-1,p=0,c=1):(n=a,p=a+1,c=a+2);n=h[n];p=h[p];c=h[c];g+=(c[0]*Math.PI/180-n[0]*Math.PI/180)*Math.sin(p[1]*Math.PI/180)}g=40680631590769*g/2}return g}Object.defineProperty(G,"__esModule",{value:!0});var l=b("@turf/meta");G.default=function(h){return l.geomReduce(h,function(a,g){a:{var e=0,n;switch(g.type){case "Polygon":g=q(g.coordinates);break a;case "MultiPolygon":for(n=0;n<g.coordinates.length;n++)e+=q(g.coordinates[n]);g=e;break a}g=0}return a+g},0)}},{"@turf/meta":63}],60:[function(b,K,
G){Object.defineProperty(G,"__esModule",{value:!0});var q=b("@turf/meta");G.default=function(m){var l=[Infinity,Infinity,-Infinity,-Infinity];q.coordEach(m,function(h){l[0]>h[0]&&(l[0]=h[0]);l[1]>h[1]&&(l[1]=h[1]);l[2]<h[0]&&(l[2]=h[0]);l[3]<h[1]&&(l[3]=h[1])});return l}},{"@turf/meta":63}],61:[function(b,K,G){Object.defineProperty(G,"__esModule",{value:!0});var q=b("@turf/meta"),m=b("@turf/helpers");G.default=function(l,h){void 0===h&&(h={});var a=0,g=0,e=0;q.coordEach(l,function(n){a+=n[0];g+=n[1];
e++});return m.point([a/e,g/e],h.properties)}},{"@turf/helpers":62,"@turf/meta":63}],62:[function(b,K,G){function q(k,r,u){void 0===u&&(u={});var v={type:"Feature"};if(0===u.id||u.id)v.id=u.id;u.bbox&&(v.bbox=u.bbox);v.properties=r||{};v.geometry=k;return v}function m(k,r,u){void 0===u&&(u={});return q({type:"Point",coordinates:k},r,u)}function l(k,r,u){void 0===u&&(u={});for(var v=0;v<k.length;v++){var x=k[v];if(4>x.length)throw Error("Each LinearRing of a Polygon must have 4 or more Positions.");
for(var C=0;C<x[x.length-1].length;C++)if(x[x.length-1][C]!==x[0][C])throw Error("First and last Position are not equivalent.");}return q({type:"Polygon",coordinates:k},r,u)}function h(k,r,u){void 0===u&&(u={});if(2>k.length)throw Error("coordinates must be an array of two or more positions");return q({type:"LineString",coordinates:k},r,u)}function a(k,r){void 0===r&&(r={});var u={type:"FeatureCollection"};r.id&&(u.id=r.id);r.bbox&&(u.bbox=r.bbox);u.features=k;return u}function g(k,r,u){void 0===
u&&(u={});return q({type:"MultiLineString",coordinates:k},r,u)}function e(k,r,u){void 0===u&&(u={});return q({type:"MultiPoint",coordinates:k},r,u)}function n(k,r,u){void 0===u&&(u={});return q({type:"MultiPolygon",coordinates:k},r,u)}function p(k,r){void 0===r&&(r="kilometers");var u=G.factors[r];if(!u)throw Error(r+" units is invalid");return k*u}function c(k,r){void 0===r&&(r="kilometers");var u=G.factors[r];if(!u)throw Error(r+" units is invalid");return k/u}function d(k){return k%(2*Math.PI)*
180/Math.PI}function f(k){return!isNaN(k)&&null!==k&&!Array.isArray(k)&&!/^\s*$/.test(k)}Object.defineProperty(G,"__esModule",{value:!0});G.earthRadius=6371008.8;G.factors={centimeters:100*G.earthRadius,centimetres:100*G.earthRadius,degrees:G.earthRadius/111325,feet:3.28084*G.earthRadius,inches:39.37*G.earthRadius,kilometers:G.earthRadius/1E3,kilometres:G.earthRadius/1E3,meters:G.earthRadius,metres:G.earthRadius,miles:G.earthRadius/1609.344,millimeters:1E3*G.earthRadius,millimetres:1E3*G.earthRadius,
nauticalmiles:G.earthRadius/1852,radians:1,yards:G.earthRadius/1.0936};G.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1E3,millimetres:1E3,nauticalmiles:1/1852,radians:1/G.earthRadius,yards:1/1.0936};G.areaFactors={acres:2.47105E-4,centimeters:1E4,centimetres:1E4,feet:10.763910417,inches:1550.003100006,kilometers:1E-6,kilometres:1E-6,meters:1,metres:1,miles:3.86E-7,millimeters:1E6,
millimetres:1E6,yards:1.195990046};G.feature=q;G.geometry=function(k,r,u){switch(k){case "Point":return m(r).geometry;case "LineString":return h(r).geometry;case "Polygon":return l(r).geometry;case "MultiPoint":return e(r).geometry;case "MultiLineString":return g(r).geometry;case "MultiPolygon":return n(r).geometry;default:throw Error(k+" is invalid");}};G.point=m;G.points=function(k,r,u){void 0===u&&(u={});return a(k.map(function(v){return m(v,r)}),u)};G.polygon=l;G.polygons=function(k,r,u){void 0===
u&&(u={});return a(k.map(function(v){return l(v,r)}),u)};G.lineString=h;G.lineStrings=function(k,r,u){void 0===u&&(u={});return a(k.map(function(v){return h(v,r)}),u)};G.featureCollection=a;G.multiLineString=g;G.multiPoint=e;G.multiPolygon=n;G.geometryCollection=function(k,r,u){void 0===u&&(u={});return q({type:"GeometryCollection",geometries:k},r,u)};G.round=function(k,r){void 0===r&&(r=0);if(r&&!(0<=r))throw Error("precision must be a positive number");r=Math.pow(10,r||0);return Math.round(k*r)/
r};G.radiansToLength=p;G.lengthToRadians=c;G.lengthToDegrees=function(k,r){return d(c(k,r))};G.bearingToAzimuth=function(k){k%=360;0>k&&(k+=360);return k};G.radiansToDegrees=d;G.degreesToRadians=function(k){return k%360*Math.PI/180};G.convertLength=function(k,r,u){void 0===r&&(r="kilometers");void 0===u&&(u="kilometers");if(!(0<=k))throw Error("length must be a positive number");return p(c(k,r),u)};G.convertArea=function(k,r,u){void 0===r&&(r="meters");void 0===u&&(u="kilometers");if(!(0<=k))throw Error("area must be a positive number");
r=G.areaFactors[r];if(!r)throw Error("invalid original units");u=G.areaFactors[u];if(!u)throw Error("invalid final units");return k/r*u};G.isNumber=f;G.isObject=function(k){return!!k&&k.constructor===Object};G.validateBBox=function(k){if(!k)throw Error("bbox is required");if(!Array.isArray(k))throw Error("bbox must be an Array");if(4!==k.length&&6!==k.length)throw Error("bbox must be an Array of 4 or 6 numbers");k.forEach(function(r){if(!f(r))throw Error("bbox must only contain numbers");})};G.validateId=
function(k){if(!k)throw Error("id is required");if(-1===["string","number"].indexOf(typeof k))throw Error("id must be a number or a string");};G.radians2degrees=function(){throw Error("method has been renamed to `radiansToDegrees`");};G.degrees2radians=function(){throw Error("method has been renamed to `degreesToRadians`");};G.distanceToDegrees=function(){throw Error("method has been renamed to `lengthToDegrees`");};G.distanceToRadians=function(){throw Error("method has been renamed to `lengthToRadians`");
};G.radiansToDistance=function(){throw Error("method has been renamed to `radiansToLength`");};G.bearingToAngle=function(){throw Error("method has been renamed to `bearingToAzimuth`");};G.convertDistance=function(){throw Error("method has been renamed to `convertLength`");}},{}],63:[function(b,K,G){function q(p,c,d){if(null!==p){var f,k=0,r;var u=p.type;for(var v="FeatureCollection"===u,x="Feature"===u,C=v?p.features.length:1,z=0;z<C;z++){var y=(r=(f=v?p.features[z].geometry:x?p.geometry:p)?"GeometryCollection"===
f.type:!1)?f.geometries.length:1;for(var D=0;D<y;D++){var A=0,t=0;var B=r?f.geometries[D]:f;if(null!==B){var F=B.coordinates;var I=B.type;var J=!d||"Polygon"!==I&&"MultiPolygon"!==I?0:1;switch(I){case null:break;case "Point":if(!1===c(F,k,z,A,t))return!1;k++;break;case "LineString":case "MultiPoint":for(u=0;u<F.length;u++){if(!1===c(F[u],k,z,A,t))return!1;k++;"MultiPoint"===I&&A++}break;case "Polygon":case "MultiLineString":for(u=0;u<F.length;u++){for(B=0;B<F[u].length-J;B++){if(!1===c(F[u][B],k,
z,A,t))return!1;k++}"MultiLineString"===I&&A++;"Polygon"===I&&t++}break;case "MultiPolygon":for(u=0;u<F.length;u++){for(B=t=0;B<F[u].length;B++){for(I=0;I<F[u][B].length-J;I++){if(!1===c(F[u][B][I],k,z,A,t))return!1;k++}t++}A++}break;case "GeometryCollection":for(u=0;u<B.geometries.length;u++)if(!1===q(B.geometries[u],c,d))return!1;break;default:throw Error("Unknown Geometry Type");}}}}}}function m(p,c){var d;switch(p.type){case "FeatureCollection":for(d=0;d<p.features.length&&!1!==c(p.features[d].properties,
d);d++);break;case "Feature":c(p.properties,0)}}function l(p,c){if("Feature"===p.type)c(p,0);else if("FeatureCollection"===p.type)for(var d=0;d<p.features.length&&!1!==c(p.features[d],d);d++);}function h(p,c){var d,f,k,r,u=0,v="FeatureCollection"===p.type,x="Feature"===p.type,C=v?p.features.length:1;for(d=0;d<C;d++){var z=v?p.features[d].geometry:x?p.geometry:p;var y=v?p.features[d].properties:x?p.properties:{};var D=v?p.features[d].bbox:x?p.bbox:void 0;var A=v?p.features[d].id:x?p.id:void 0;var t=
(r=z?"GeometryCollection"===z.type:!1)?z.geometries.length:1;for(k=0;k<t;k++){var B=r?z.geometries[k]:z;if(null===B){if(!1===c(null,u,y,D,A))return!1}else switch(B.type){case "Point":case "LineString":case "MultiPoint":case "Polygon":case "MultiLineString":case "MultiPolygon":if(!1===c(B,u,y,D,A))return!1;break;case "GeometryCollection":for(f=0;f<B.geometries.length;f++)if(!1===c(B.geometries[f],u,y,D,A))return!1;break;default:throw Error("Unknown Geometry Type");}}u++}}function a(p,c){h(p,function(d,
f,k,r,u){var v=null===d?null:d.type;switch(v){case null:case "Point":case "LineString":case "Polygon":if(!1===c(n.feature(d,k,{bbox:r,id:u}),f,0))return!1;return}switch(v){case "MultiPoint":var x="Point";break;case "MultiLineString":x="LineString";break;case "MultiPolygon":x="Polygon"}for(r=0;r<d.coordinates.length;r++)if(!1===c(n.feature({type:x,coordinates:d.coordinates[r]},k),f,r))return!1})}function g(p,c){a(p,function(d,f,k){var r=0;if(d.geometry){var u=d.geometry.type;if("Point"!==u&&"MultiPoint"!==
u){var v,x=0,C=0,z=0;if(!1===q(d,function(y,D,A,t,B){if(void 0===v||f>x||t>C||B>z)v=y,x=f,C=t,z=B,r=0;else{D=n.lineString([v,y],d.properties);if(!1===c(D,f,k,B,r))return!1;r++;v=y}}))return!1}}})}function e(p,c){if(!p)throw Error("geojson is required");a(p,function(d,f,k){if(null!==d.geometry){var r=d.geometry.coordinates;switch(d.geometry.type){case "LineString":if(!1===c(d,f,k,0,0))return!1;break;case "Polygon":for(var u=0;u<r.length;u++)if(!1===c(n.lineString(r[u],d.properties),f,k,u))return!1}}})}
Object.defineProperty(G,"__esModule",{value:!0});var n=b("@turf/helpers");G.coordEach=q;G.coordReduce=function(p,c,d,f){var k=d;q(p,function(r,u,v,x,C){k=0===u&&void 0===d?r:c(k,r,u,v,x,C)},f);return k};G.propEach=m;G.propReduce=function(p,c,d){var f=d;m(p,function(k,r){f=0===r&&void 0===d?k:c(f,k,r)});return f};G.featureEach=l;G.featureReduce=function(p,c,d){var f=d;l(p,function(k,r){f=0===r&&void 0===d?k:c(f,k,r)});return f};G.coordAll=function(p){var c=[];q(p,function(d){c.push(d)});return c};
G.geomEach=h;G.geomReduce=function(p,c,d){var f=d;h(p,function(k,r,u,v,x){f=0===r&&void 0===d?k:c(f,k,r,u,v,x)});return f};G.flattenEach=a;G.flattenReduce=function(p,c,d){var f=d;a(p,function(k,r,u){f=0===r&&0===u&&void 0===d?k:c(f,k,r,u)});return f};G.segmentEach=g;G.segmentReduce=function(p,c,d){var f=d,k=!1;g(p,function(r,u,v,x,C){f=!1===k&&void 0===d?r:c(f,r,u,v,x,C);k=!0});return f};G.lineEach=e;G.lineReduce=function(p,c,d){var f=d;e(p,function(k,r,u,v){f=0===r&&void 0===d?k:c(f,k,r,u,v)});return f};
G.findSegment=function(p,c){c=c||{};if(!n.isObject(c))throw Error("options is invalid");var d=c.featureIndex||0,f=c.multiFeatureIndex||0,k=c.geometryIndex||0,r=c.segmentIndex||0,u=c.properties;switch(p.type){case "FeatureCollection":0>d&&(d=p.features.length+d);u=u||p.features[d].properties;p=p.features[d].geometry;break;case "Feature":u=u||p.properties;p=p.geometry;break;case "Point":case "MultiPoint":return null;case "LineString":case "Polygon":case "MultiLineString":case "MultiPolygon":break;default:throw Error("geojson is invalid");
}if(null===p)return null;d=p.coordinates;switch(p.type){case "Point":case "MultiPoint":return null;case "LineString":return 0>r&&(r=d.length+r-1),n.lineString([d[r],d[r+1]],u,c);case "Polygon":return 0>k&&(k=d.length+k),0>r&&(r=d[k].length+r-1),n.lineString([d[k][r],d[k][r+1]],u,c);case "MultiLineString":return 0>f&&(f=d.length+f),0>r&&(r=d[f].length+r-1),n.lineString([d[f][r],d[f][r+1]],u,c);case "MultiPolygon":return 0>f&&(f=d.length+f),0>k&&(k=d[f].length+k),0>r&&(r=d[f][k].length-r-1),n.lineString([d[f][k][r],
d[f][k][r+1]],u,c)}throw Error("geojson is invalid");};G.findPoint=function(p,c){c=c||{};if(!n.isObject(c))throw Error("options is invalid");var d=c.featureIndex||0,f=c.multiFeatureIndex||0,k=c.geometryIndex||0,r=c.coordIndex||0,u=c.properties;switch(p.type){case "FeatureCollection":0>d&&(d=p.features.length+d);u=u||p.features[d].properties;p=p.features[d].geometry;break;case "Feature":u=u||p.properties;p=p.geometry;break;case "Point":case "MultiPoint":return null;case "LineString":case "Polygon":case "MultiLineString":case "MultiPolygon":break;
default:throw Error("geojson is invalid");}if(null===p)return null;d=p.coordinates;switch(p.type){case "Point":return n.point(d,u,c);case "MultiPoint":return 0>f&&(f=d.length+f),n.point(d[f],u,c);case "LineString":return 0>r&&(r=d.length+r),n.point(d[r],u,c);case "Polygon":return 0>k&&(k=d.length+k),0>r&&(r=d[k].length+r),n.point(d[k][r],u,c);case "MultiLineString":return 0>f&&(f=d.length+f),0>r&&(r=d[f].length+r),n.point(d[f][r],u,c);case "MultiPolygon":return 0>f&&(f=d.length+f),0>k&&(k=d[f].length+
k),0>r&&(r=d[f][k].length-r),n.point(d[f][k][r],u,c)}throw Error("geojson is invalid");}},{"@turf/helpers":62}],64:[function(b,K,G){G="undefined"===typeof WeakMap?b("weak-map"):WeakMap;var q=b("gl-buffer"),m=b("gl-vao"),l=new G;K.exports=function(h){var a=l.get(h),g=a&&(a._triangleBuffer.handle||a._triangleBuffer.buffer);g&&h.isBuffer(g)||(g=q(h,new Float32Array([-1,-1,-1,4,4,-1])),a=m(h,[{buffer:g,type:h.FLOAT,size:2}]),a._triangleBuffer=g,l.set(h,a));a.bind();h.drawArrays(h.TRIANGLES,0,3);a.unbind()}},
{"gl-buffer":259,"gl-vao":358,"weak-map":602}],65:[function(b,K,G){K.exports=function(q){var m=0,l=0,h=0,a=0;return q.map(function(g){g=g.slice();var e=g[0],n=e.toUpperCase();if(e!=n)switch(g[0]=n,e){case "a":g[6]+=h;g[7]+=a;break;case "v":g[1]+=a;break;case "h":g[1]+=h;break;default:for(e=1;e<g.length;)g[e++]+=h,g[e++]+=a}switch(n){case "Z":h=m;a=l;break;case "H":h=g[1];break;case "V":a=g[1];break;case "M":h=m=g[1];a=l=g[2];break;default:h=g[g.length-2],a=g[g.length-1]}return g})}},{}],66:[function(b,
K,G){var q=b("pad-left");K.exports=function(m,l,h){l="number"===typeof l?l:1;h=h||": ";m=m.split(/\r?\n/);var a=String(m.length+l-1).length;return m.map(function(g,e){e+=l;return q(e,a-String(e).length)+h+g}).join("\n")}},{"pad-left":502}],67:[function(b,K,G){K.exports=function(m){var l=m.length;if(0===l)return[];if(1===l)return[0];for(var h=m[0].length,a=[m[0]],g=[0],e=1;e<l;++e){a.push(m[e]);a:{var n=a;for(var p=h,c=Array(p+1),d=0;d<n.length;++d)c[d]=n[d];for(d=0;d<=n.length;++d){for(var f=n.length;f<=
p;++f){for(var k=Array(p),r=0;r<p;++r)k[r]=Math.pow(f+1-d,r);c[f]=k}if(q.apply(void 0,c)){n=!0;break a}}n=!1}if(n){if(g.push(e),g.length===h+1)break}else a.pop()}return g};var q=b("robust-orientation")},{"robust-orientation":548}],68:[function(b,K,G){K.exports=function(l,h){return q(h).filter(function(a){for(var g=Array(a.length),e=0;e<a.length;++e)g[e]=h[a[e]];return 1>m(g)*l})};var q=b("delaunay-triangulate"),m=b("circumradius")},{circumradius:119,"delaunay-triangulate":171}],69:[function(b,K,G){K.exports=
function(l,h){return m(q(l,h))};var q=b("alpha-complex"),m=b("simplicial-complex-boundary")},{"alpha-complex":68,"simplicial-complex-boundary":555}],70:[function(b,K,G){K.exports=function(q,m){if(!q||null==q.length)throw Error("Argument should be an array");m=null==m?1:Math.floor(m);for(var l=Array(2*m),h=0;h<m;h++){for(var a=-Infinity,g=Infinity,e=h,n=q.length;e<n;e+=m)q[e]>a&&(a=q[e]),q[e]<g&&(g=q[e]);l[h]=g;l[m+h]=a}return l}},{}],71:[function(b,K,G){var q=b("array-bounds");K.exports=function(m,
l,h){if(!m||null==m.length)throw Error("Argument should be an array");null==l&&(l=1);null==h&&(h=q(m,l));for(var a=0;a<l;a++){var g=h[l+a],e=h[a],n,p=m.length;if(Infinity===g&&-Infinity===e)for(n=a;n<p;n+=l)m[n]=m[n]===g?1:m[n]===e?0:.5;else if(Infinity===g)for(n=a;n<p;n+=l)m[n]=m[n]===g?1:0;else if(-Infinity===e)for(n=a;n<p;n+=l)m[n]=m[n]===e?0:1;else for(g-=e,n=a;n<p;n+=l)isNaN(m[n])||(m[n]=0===g?.5:(m[n]-e)/g)}return m}},{"array-bounds":70}],72:[function(b,K,G){K.exports=function(q,m){var l="number"===
typeof q,h="number"===typeof m;l&&!h?(m=q,q=0):l||h||(m=q=0);q|=0;m=(m|0)-q;if(0>m)throw Error("array length must be positive");l=Array(m);for(h=0;h<m;h++,q++)l[h]=q;return l}},{}],73:[function(b,K,G){(function(q){(function(){function m(F,I){if(F===I)return 0;for(var J=F.length,L=I.length,H=0,P=Math.min(J,L);H<P;++H)if(F[H]!==I[H]){J=F[H];L=I[H];break}return J<L?-1:L<J?1:0}function l(F){return q.Buffer&&"function"===typeof q.Buffer.isBuffer?q.Buffer.isBuffer(F):!(null==F||!F._isBuffer)}function h(F){return l(F)||
"function"!==typeof q.ArrayBuffer?!1:"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(F):F?F instanceof DataView||F.buffer&&F.buffer instanceof ArrayBuffer?!0:!1:!1}function a(F){if(C.isFunction(F))return D?F.name:(F=F.toString().match(t))&&F[1]}function g(F,I){return"string"===typeof F?F.length<I?F:F.slice(0,I):F}function e(F){if(D||!C.isFunction(F))return C.inspect(F);F=a(F);return"[Function"+(F?": "+F:"")+"]"}function n(F,I,J,L,H){throw new A.AssertionError({message:J,actual:F,expected:I,
operator:L,stackStartFunction:H});}function p(F,I){F||n(F,!0,I,"==",A.ok)}function c(F,I,J,L){if(F===I)return!0;if(l(F)&&l(I))return 0===m(F,I);if(C.isDate(F)&&C.isDate(I))return F.getTime()===I.getTime();if(C.isRegExp(F)&&C.isRegExp(I))return F.source===I.source&&F.global===I.global&&F.multiline===I.multiline&&F.lastIndex===I.lastIndex&&F.ignoreCase===I.ignoreCase;if(null!==F&&"object"===typeof F||null!==I&&"object"===typeof I){if(!h(F)||!h(I)||Object.prototype.toString.call(F)!==Object.prototype.toString.call(I)||
F instanceof Float32Array||F instanceof Float64Array){if(l(F)!==l(I))return!1;L=L||{actual:[],expected:[]};var H=L.actual.indexOf(F);if(-1!==H&&H===L.expected.indexOf(I))return!0;L.actual.push(F);L.expected.push(I);return f(F,I,J,L)}return 0===m(new Uint8Array(F.buffer),new Uint8Array(I.buffer))}return J?F===I:F==I}function d(F){return"[object Arguments]"==Object.prototype.toString.call(F)}function f(F,I,J,L){if(null===F||void 0===F||null===I||void 0===I)return!1;if(C.isPrimitive(F)||C.isPrimitive(I))return F===
I;if(J&&Object.getPrototypeOf(F)!==Object.getPrototypeOf(I))return!1;var H=d(F),P=d(I);if(H&&!P||!H&&P)return!1;if(H)return F=y.call(F),I=y.call(I),c(F,I,J);H=B(F);var M=B(I);if(H.length!==M.length)return!1;H.sort();M.sort();for(P=H.length-1;0<=P;P--)if(H[P]!==M[P])return!1;for(P=H.length-1;0<=P;P--)if(M=H[P],!c(F[M],I[M],J,L))return!1;return!0}function k(F,I,J){c(F,I,!0)&&n(F,I,J,"notDeepStrictEqual",k)}function r(F,I){if(!F||!I)return!1;if("[object RegExp]"==Object.prototype.toString.call(I))return I.test(F);
try{if(F instanceof I)return!0}catch(J){}return Error.isPrototypeOf(I)?!1:!0===I.call({},F)}function u(F,I,J,L){if("function"!==typeof I)throw new TypeError('"block" argument must be a function');"string"===typeof J&&(L=J,J=null);try{I()}catch(N){var H=N}I=H;L=(J&&J.name?" ("+J.name+").":".")+(L?" "+L:".");F&&!I&&n(I,J,"Missing expected exception"+L);H="string"===typeof L;var P=!F&&C.isError(I),M=!F&&I&&!J;(P&&H&&r(I,J)||M)&&n(I,J,"Got unwanted exception"+L);if(F&&I&&J&&!r(I,J)||!F&&I)throw I;}function v(F,
I){F||n(F,!0,I,"==",v)}var x=b("object-assign"),C=b("util/"),z=Object.prototype.hasOwnProperty,y=Array.prototype.slice,D=function(){return"foo"===function(){}.name}(),A=K.exports=p,t=/\s*function\s+([^\(\s]*)\s*/;A.AssertionError=function(F){this.name="AssertionError";this.actual=F.actual;this.expected=F.expected;this.operator=F.operator;F.message?(this.message=F.message,this.generatedMessage=!1):(this.message=g(e(this.actual),128)+" "+this.operator+" "+g(e(this.expected),128),this.generatedMessage=
!0);var I=F.stackStartFunction||n;Error.captureStackTrace?Error.captureStackTrace(this,I):(F=Error(),F.stack&&(F=F.stack,I=a(I),I=F.indexOf("\n"+I),0<=I&&(I=F.indexOf("\n",I+1),F=F.substring(I+1)),this.stack=F))};C.inherits(A.AssertionError,Error);A.fail=n;A.ok=p;A.equal=function(F,I,J){F!=I&&n(F,I,J,"==",A.equal)};A.notEqual=function(F,I,J){F==I&&n(F,I,J,"!=",A.notEqual)};A.deepEqual=function(F,I,J){c(F,I,!1)||n(F,I,J,"deepEqual",A.deepEqual)};A.deepStrictEqual=function(F,I,J){c(F,I,!0)||n(F,I,J,
"deepStrictEqual",A.deepStrictEqual)};A.notDeepEqual=function(F,I,J){c(F,I,!1)&&n(F,I,J,"notDeepEqual",A.notDeepEqual)};A.notDeepStrictEqual=k;A.strictEqual=function(F,I,J){F!==I&&n(F,I,J,"===",A.strictEqual)};A.notStrictEqual=function(F,I,J){F===I&&n(F,I,J,"!==",A.notStrictEqual)};A.throws=function(F,I,J){u(!0,F,I,J)};A.doesNotThrow=function(F,I,J){u(!1,F,I,J)};A.ifError=function(F){if(F)throw F;};A.strict=x(v,A,{equal:A.strictEqual,deepEqual:A.deepStrictEqual,notEqual:A.notStrictEqual,notDeepEqual:A.notDeepStrictEqual});
A.strict.strict=A.strict;var B=Object.keys||function(F){var I=[],J;for(J in F)z.call(F,J)&&I.push(J);return I}}).call(this)}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"object-assign":499,"util/":76}],74:[function(b,K,G){K.exports="function"===typeof Object.create?function(q,m){q.super_=m;q.prototype=Object.create(m.prototype,{constructor:{value:q,enumerable:!1,writable:!0,configurable:!0}})}:function(q,m){q.super_=m;var l=
function(){};l.prototype=m.prototype;q.prototype=new l;q.prototype.constructor=q}},{}],75:[function(b,K,G){K.exports=function(q){return q&&"object"===typeof q&&"function"===typeof q.copy&&"function"===typeof q.fill&&"function"===typeof q.readUInt8}},{}],76:[function(b,K,G){(function(q,m){(function(){function l(L,H){var P={seen:[],stylize:a};3<=arguments.length&&(P.depth=arguments[2]);4<=arguments.length&&(P.colors=arguments[3]);r(H)?P.showHidden=H:H&&G._extend(P,H);x(P.showHidden)&&(P.showHidden=
!1);x(P.depth)&&(P.depth=2);x(P.colors)&&(P.colors=!1);x(P.customInspect)&&(P.customInspect=!0);P.colors&&(P.stylize=h);return e(P,L,P.depth)}function h(L,H){return(H=l.styles[H])?"\u001b["+l.colors[H][0]+"m"+L+"\u001b["+l.colors[H][1]+"m":L}function a(L,H){return L}function g(L){var H={};L.forEach(function(P,M){H[P]=!0});return H}function e(L,H,P){if(L.customInspect&&H&&A(H.inspect)&&H.inspect!==G.inspect&&(!H.constructor||H.constructor.prototype!==H)){var M=H.inspect(P,L);v(M)||(M=e(L,M,P));return M}if(M=
n(L,H))return M;var N=Object.keys(H),T=g(N);L.showHidden&&(N=Object.getOwnPropertyNames(H));if(D(H)&&(0<=N.indexOf("message")||0<=N.indexOf("description")))return p(H);if(0===N.length){if(A(H))return L.stylize("[Function"+(H.name?": "+H.name:"")+"]","special");if(C(H))return L.stylize(RegExp.prototype.toString.call(H),"regexp");if(y(H))return L.stylize(Date.prototype.toString.call(H),"date");if(D(H))return p(H)}M="";var Q=!1,U=["{","}"];k(H)&&(Q=!0,U=["[","]"]);A(H)&&(M=" [Function"+(H.name?": "+
H.name:"")+"]");C(H)&&(M=" "+RegExp.prototype.toString.call(H));y(H)&&(M=" "+Date.prototype.toUTCString.call(H));D(H)&&(M=" "+p(H));if(0===N.length&&(!Q||0==H.length))return U[0]+M+U[1];if(0>P)return C(H)?L.stylize(RegExp.prototype.toString.call(H),"regexp"):L.stylize("[Object]","special");L.seen.push(H);N=Q?c(L,H,P,T,N):N.map(function(S){return d(L,H,P,T,S,Q)});L.seen.pop();return f(N,M,U)}function n(L,H){if(x(H))return L.stylize("undefined","undefined");if(v(H))return H="'"+JSON.stringify(H).replace(/^"|"$/g,
"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'",L.stylize(H,"string");if(u(H))return L.stylize(""+H,"number");if(r(H))return L.stylize(""+H,"boolean");if(null===H)return L.stylize("null","null")}function p(L){return"["+Error.prototype.toString.call(L)+"]"}function c(L,H,P,M,N){for(var T=[],Q=0,U=H.length;Q<U;++Q)Object.prototype.hasOwnProperty.call(H,String(Q))?T.push(d(L,H,P,M,String(Q),!0)):T.push("");N.forEach(function(S){S.match(/^\d+$/)||T.push(d(L,H,P,M,S,!0))});return T}function d(L,H,P,M,
N,T){var Q,U;H=Object.getOwnPropertyDescriptor(H,N)||{value:H[N]};H.get?U=H.set?L.stylize("[Getter/Setter]","special"):L.stylize("[Getter]","special"):H.set&&(U=L.stylize("[Setter]","special"));Object.prototype.hasOwnProperty.call(M,N)||(Q="["+N+"]");U||(0>L.seen.indexOf(H.value)?(U=null===P?e(L,H.value,null):e(L,H.value,P-1),-1<U.indexOf("\n")&&(U=T?U.split("\n").map(function(S){return"  "+S}).join("\n").substr(2):"\n"+U.split("\n").map(function(S){return"   "+S}).join("\n"))):U=L.stylize("[Circular]",
"special"));if(x(Q)){if(T&&N.match(/^\d+$/))return U;Q=JSON.stringify(""+N);Q.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(Q=Q.substr(1,Q.length-2),Q=L.stylize(Q,"name")):(Q=Q.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),Q=L.stylize(Q,"string"))}return Q+": "+U}function f(L,H,P){var M=0;return 60<L.reduce(function(N,T){M++;0<=T.indexOf("\n")&&M++;return N+T.replace(/\u001b\[\d\d?m/g,"").length+1},0)?P[0]+(""===H?"":H+"\n ")+" "+L.join(",\n  ")+" "+P[1]:P[0]+H+" "+L.join(", ")+" "+P[1]}
function k(L){return Array.isArray(L)}function r(L){return"boolean"===typeof L}function u(L){return"number"===typeof L}function v(L){return"string"===typeof L}function x(L){return void 0===L}function C(L){return z(L)&&"[object RegExp]"===Object.prototype.toString.call(L)}function z(L){return"object"===typeof L&&null!==L}function y(L){return z(L)&&"[object Date]"===Object.prototype.toString.call(L)}function D(L){return z(L)&&("[object Error]"===Object.prototype.toString.call(L)||L instanceof Error)}
function A(L){return"function"===typeof L}function t(L){return 10>L?"0"+L.toString(10):L.toString(10)}var B=/%[sdj%]/g;G.format=function(L){if(!v(L)){for(var H=[],P=0;P<arguments.length;P++)H.push(l(arguments[P]));return H.join(" ")}P=1;var M=arguments,N=M.length;H=String(L).replace(B,function(Q){if("%%"===Q)return"%";if(P>=N)return Q;switch(Q){case "%s":return String(M[P++]);case "%d":return Number(M[P++]);case "%j":try{return JSON.stringify(M[P++])}catch(U){return"[Circular]"}default:return Q}});
for(var T=M[P];P<N;T=M[++P])H=null!==T&&z(T)?H+(" "+l(T)):H+(" "+T);return H};G.deprecate=function(L,H){if(x(m.process))return function(){return G.deprecate(L,H).apply(this,arguments)};if(!0===q.noDeprecation)return L;var P=!1;return function(){if(!P){if(q.throwDeprecation)throw Error(H);q.traceDeprecation?console.trace(H):console.error(H);P=!0}return L.apply(this,arguments)}};var F={},I;G.debuglog=function(L){x(I)&&(I=q.env.NODE_DEBUG||"");L=L.toUpperCase();if(!F[L])if((new RegExp("\\b"+L+"\\b",
"i")).test(I)){var H=q.pid;F[L]=function(){var P=G.format.apply(G,arguments);console.error("%s %d: %s",L,H,P)}}else F[L]=function(){};return F[L]};G.inspect=l;l.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};l.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"};G.isArray=k;G.isBoolean=
r;G.isNull=function(L){return null===L};G.isNullOrUndefined=function(L){return null==L};G.isNumber=u;G.isString=v;G.isSymbol=function(L){return"symbol"===typeof L};G.isUndefined=x;G.isRegExp=C;G.isObject=z;G.isDate=y;G.isError=D;G.isFunction=A;G.isPrimitive=function(L){return null===L||"boolean"===typeof L||"number"===typeof L||"string"===typeof L||"symbol"===typeof L||"undefined"===typeof L};G.isBuffer=b("./support/isBuffer");var J="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");G.log=
function(){var L=console,H=L.log;var P=new Date;var M=[t(P.getHours()),t(P.getMinutes()),t(P.getSeconds())].join(":");P=[P.getDate(),J[P.getMonth()],M].join(" ");H.call(L,"%s - %s",P,G.format.apply(G,arguments))};G.inherits=b("inherits");G._extend=function(L,H){if(!H||!z(H))return L;for(var P=Object.keys(H),M=P.length;M--;)L[P[M]]=H[P[M]];return L}}).call(this)}).call(this,b("_process"),"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./support/isBuffer":75,
_process:526,inherits:74}],77:[function(b,K,G){K.exports=function(q){return atob(q)}},{}],78:[function(b,K,G){function q(l){for(var h=0,a=0;a<l.length;++a)h+=l[a];return h}K.exports=function(l,h){for(var a=h.length,g=Array(a+1),e=0;e<a;++e){for(var n=Array(a+1),p=0;p<=a;++p)n[p]=l[p][e];g[e]=n}g[a]=Array(a+1);for(e=0;e<=a;++e)g[a][e]=1;l=Array(a+1);for(e=0;e<a;++e)l[e]=h[e];l[a]=1;h=m(g,l);g=q(h[a+1]);0===g&&(g=1);l=Array(a+1);for(e=0;e<=a;++e)l[e]=q(h[e])/g;return l};var m=b("robust-linear-solve")},
{"robust-linear-solve":547}],79:[function(b,K,G){function q(a){var g=a.length;if(0<g%4)throw Error("Invalid string. Length must be a multiple of 4");a=a.indexOf("=");-1===a&&(a=g);return[a,a===g?0:4-a%4]}G.byteLength=function(a){a=q(a);var g=a[1];return 3*(a[0]+g)/4-g};G.toByteArray=function(a){var g=q(a);var e=g[0];g=g[1];var n=new h(3*(e+g)/4-g),p=0,c=0<g?e-4:e,d;for(d=0;d<c;d+=4)e=l[a.charCodeAt(d)]<<18|l[a.charCodeAt(d+1)]<<12|l[a.charCodeAt(d+2)]<<6|l[a.charCodeAt(d+3)],n[p++]=e>>16&255,n[p++]=
e>>8&255,n[p++]=e&255;2===g&&(e=l[a.charCodeAt(d)]<<2|l[a.charCodeAt(d+1)]>>4,n[p++]=e&255);1===g&&(e=l[a.charCodeAt(d)]<<10|l[a.charCodeAt(d+1)]<<4|l[a.charCodeAt(d+2)]>>2,n[p++]=e>>8&255,n[p++]=e&255);return n};G.fromByteArray=function(a){for(var g=a.length,e=g%3,n=[],p=0,c=g-e;p<c;p+=16383){for(var d=n,f=d.push,k,r=a,u=p+16383>c?c:p+16383,v=[],x=p;x<u;x+=3)k=(r[x]<<16&16711680)+(r[x+1]<<8&65280)+(r[x+2]&255),v.push(m[k>>18&63]+m[k>>12&63]+m[k>>6&63]+m[k&63]);k=v.join("");f.call(d,k)}1===e?(a=a[g-
1],n.push(m[a>>2]+m[a<<4&63]+"==")):2===e&&(a=(a[g-2]<<8)+a[g-1],n.push(m[a>>10]+m[a>>4&63]+m[a<<2&63]+"="));return n.join("")};var m=[],l=[],h="undefined"!==typeof Uint8Array?Uint8Array:Array;for(b=0;64>b;++b)m[b]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[b],l["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(b)]=b;l[45]=62;l[95]=63},{}],80:[function(b,K,G){var q=b("./lib/rationalize");K.exports=function(m,l){return q(m[0].mul(l[1]).add(l[0].mul(m[1])),
m[1].mul(l[1]))}},{"./lib/rationalize":90}],81:[function(b,K,G){K.exports=function(q,m){return q[0].mul(m[1]).cmp(m[0].mul(q[1]))}},{}],82:[function(b,K,G){var q=b("./lib/rationalize");K.exports=function(m,l){return q(m[0].mul(l[1]),m[1].mul(l[0]))}},{"./lib/rationalize":90}],83:[function(b,K,G){function q(n,p){if(m(n))return p?e(n,q(p)):[n[0].clone(),n[1].clone()];var c=0;if(l(n))n=n.clone();else if("string"===typeof n)n=a(n);else{if(0===n)return[h(0),h(1)];if(n!==Math.floor(n))for(;n!==Math.floor(n);)n*=
Math.pow(2,256),c-=256;n=h(n)}if(m(p))n.mul(p[1]),p=p[0].clone();else if(l(p))p=p.clone();else if("string"===typeof p)p=a(p);else if(p){if(p!==Math.floor(p))for(;p!==Math.floor(p);)p*=Math.pow(2,256),c+=256;p=h(p)}else p=h(1);0<c?n=n.ushln(c):0>c&&(p=p.ushln(-c));return g(n,p)}var m=b("./is-rat"),l=b("./lib/is-bn"),h=b("./lib/num-to-bn"),a=b("./lib/str-to-bn"),g=b("./lib/rationalize"),e=b("./div");K.exports=q},{"./div":82,"./is-rat":84,"./lib/is-bn":88,"./lib/num-to-bn":89,"./lib/rationalize":90,
"./lib/str-to-bn":91}],84:[function(b,K,G){var q=b("./lib/is-bn");K.exports=function(m){return Array.isArray(m)&&2===m.length&&q(m[0])&&q(m[1])}},{"./lib/is-bn":88}],85:[function(b,K,G){var q=b("bn.js");K.exports=function(m){return m.cmp(new q(0))}},{"bn.js":99}],86:[function(b,K,G){var q=b("./bn-sign");K.exports=function(m){var l=m.length,h=m.words,a=0;if(1===l)a=h[0];else if(2===l)a=h[0]+67108864*h[1];else for(var g=0;g<l;g++)a+=h[g]*Math.pow(67108864,g);return q(m)*a}},{"./bn-sign":85}],87:[function(b,
K,G){var q=b("double-bits"),m=b("bit-twiddle").countTrailingZeros;K.exports=function(l){var h=m(q.lo(l));if(32>h)return h;l=m(q.hi(l));return 20<l?52:l+32}},{"bit-twiddle":97,"double-bits":173}],88:[function(b,K,G){b("bn.js");K.exports=function(q){return q&&"object"===typeof q&&!!q.words}},{"bn.js":99}],89:[function(b,K,G){var q=b("bn.js"),m=b("double-bits");K.exports=function(l){var h=m.exponent(l);return 52>h?new q(l):(new q(l*Math.pow(2,52-h))).ushln(h-52)}},{"bn.js":99,"double-bits":173}],90:[function(b,
K,G){var q=b("./num-to-bn"),m=b("./bn-sign");K.exports=function(l,h){var a=m(l),g=m(h);if(0===a)return[q(0),q(1)];if(0===g)return[q(0),q(0)];0>g&&(l=l.neg(),h=h.neg());a=l.gcd(h);return a.cmpn(1)?[l.div(a),h.div(a)]:[l,h]}},{"./bn-sign":85,"./num-to-bn":89}],91:[function(b,K,G){var q=b("bn.js");K.exports=function(m){return new q(m)}},{"bn.js":99}],92:[function(b,K,G){var q=b("./lib/rationalize");K.exports=function(m,l){return q(m[0].mul(l[0]),m[1].mul(l[1]))}},{"./lib/rationalize":90}],93:[function(b,
K,G){var q=b("./lib/bn-sign");K.exports=function(m){return q(m[0])*q(m[1])}},{"./lib/bn-sign":85}],94:[function(b,K,G){var q=b("./lib/rationalize");K.exports=function(m,l){return q(m[0].mul(l[1]).sub(m[1].mul(l[0])),m[1].mul(l[1]))}},{"./lib/rationalize":90}],95:[function(b,K,G){var q=b("./lib/bn-to-num"),m=b("./lib/ctz");K.exports=function(l){var h=l[0];l=l[1];if(0===h.cmpn(0))return 0;var a=h.abs().divmod(l.abs()),g=q(a.div);a=a.mod;h=h.negative!==l.negative?-1:1;if(0===a.cmpn(0))return h*g;if(g){var e=
m(g)+4;l=q(a.ushln(e).divRound(l));return h*(g+l*Math.pow(2,-e))}g=l.bitLength()-a.bitLength()+53;l=q(a.ushln(g).divRound(l));if(1023>g)return h*l*Math.pow(2,-g);l*=Math.pow(2,-1023);return h*l*Math.pow(2,1023-g)}},{"./lib/bn-to-num":86,"./lib/ctz":87}],96:[function(b,K,G){function q(l,h,a,g,e){l=["function ",l,"(a,l,h,",g.join(","),"){",e?"":"var i=",a?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a[m]"];e?0>h.indexOf("c")?l.push(";if(x===y){return m}else if(x<=y){"):l.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):
l.push(";if(",h,"){i=m;");a?l.push("l=m+1}else{h=m-1}"):l.push("h=m-1}else{l=m+1}");l.push("}");e?l.push("return -1};"):l.push("return i};");return l.join("")}function m(l,h,a,g){return(new Function([q("A","x"+l+"y",h,["y"],g),q("P","c(x,y)"+l+"0",h,["y","c"],g),"function dispatchBsearch",a,"(a,y,c,l,h){if(typeof(c)==='function'){return P(a,(l===void 0)?0:l|0,(h===void 0)?a.length-1:h|0,y,c)}else{return A(a,(c===void 0)?0:c|0,(l===void 0)?a.length-1:l|0,y)}}return dispatchBsearch",a].join("")))()}
K.exports={ge:m(">=",!1,"GE"),gt:m(">",!1,"GT"),lt:m("<",!0,"LT"),le:m("<=",!0,"LE"),eq:m("-",!0,"EQ",!0)}},{}],97:[function(b,K,G){function q(l){var h=32;(l&=-l)&&h--;l&65535&&(h-=16);l&16711935&&(h-=8);l&252645135&&(h-=4);l&858993459&&(h-=2);l&1431655765&&--h;return h}"use restrict";G.INT_BITS=32;G.INT_MAX=2147483647;G.INT_MIN=-2147483648;G.sign=function(l){return(0<l)-(0>l)};G.abs=function(l){var h=l>>31;return(l^h)-h};G.min=function(l,h){return h^(l^h)&-(l<h)};G.max=function(l,h){return l^(l^
h)&-(l<h)};G.isPow2=function(l){return!(l&l-1)&&!!l};G.log2=function(l){var h=(65535<l)<<4;l>>>=h;var a=(255<l)<<3;l>>>=a;h|=a;a=(15<l)<<2;l>>>=a;h|=a;a=(3<l)<<1;return h|a|l>>>a>>1};G.log10=function(l){return 1E9<=l?9:1E8<=l?8:1E7<=l?7:1E6<=l?6:1E5<=l?5:1E4<=l?4:1E3<=l?3:100<=l?2:10<=l?1:0};G.popCount=function(l){l-=l>>>1&1431655765;l=(l&858993459)+(l>>>2&858993459);return 16843009*(l+(l>>>4)&252645135)>>>24};G.countTrailingZeros=q;G.nextPow2=function(l){l+=0===l;--l;l|=l>>>1;l|=l>>>2;l|=l>>>4;l|=
l>>>8;return(l|l>>>16)+1};G.prevPow2=function(l){l|=l>>>1;l|=l>>>2;l|=l>>>4;l|=l>>>8;l|=l>>>16;return l-(l>>>1)};G.parity=function(l){l^=l>>>16;l^=l>>>8;return 27030>>>((l^l>>>4)&15)&1};var m=Array(256);(function(l){for(var h=0;256>h;++h){var a=h,g=h,e=7;for(a>>>=1;a;a>>>=1)g<<=1,g|=a&1,--e;l[h]=g<<e&255}})(m);G.reverse=function(l){return m[l&255]<<24|m[l>>>8&255]<<16|m[l>>>16&255]<<8|m[l>>>24&255]};G.interleave2=function(l,h){l&=65535;l=(l|l<<8)&16711935;l=(l|l<<4)&252645135;l=(l|l<<2)&858993459;
h&=65535;h=(h|h<<8)&16711935;h=(h|h<<4)&252645135;h=(h|h<<2)&858993459;return(l|l<<1)&1431655765|((h|h<<1)&1431655765)<<1};G.deinterleave2=function(l,h){l=l>>>h&1431655765;l=(l|l>>>1)&858993459;l=(l|l>>>2)&252645135;l=(l|l>>>4)&16711935;return((l|l>>>16)&65535)<<16>>16};G.interleave3=function(l,h,a){l&=1023;l=(l|l<<16)&4278190335;l=(l|l<<8)&251719695;l=(l|l<<4)&3272356035;h&=1023;h=(h|h<<16)&4278190335;h=(h|h<<8)&251719695;h=(h|h<<4)&3272356035;a&=1023;a=(a|a<<16)&4278190335;a=(a|a<<8)&251719695;
a=(a|a<<4)&3272356035;return(l|l<<2)&1227133513|((h|h<<2)&1227133513)<<1|((a|a<<2)&1227133513)<<2};G.deinterleave3=function(l,h){l=l>>>h&1227133513;l=(l|l>>>2)&3272356035;l=(l|l>>>4)&251719695;l=(l|l>>>8)&4278190335;return((l|l>>>16)&1023)<<22>>22};G.nextCombination=function(l){var h=l|l-1;return h+1|(~h&-~h)-1>>>q(l)+1}},{}],98:[function(b,K,G){function q(a,g,e,n,p,c,d){for(var f=0;f<g;f++){for(var k=0;k<e;k++)n[k]=a[k*g+f];m(n,p,c,d,e);for(k=0;k<e;k++)a[k*g+f]=p[k]}for(k=0;k<e;k++){for(f=0;f<g;f++)n[f]=
a[k*g+f];m(n,p,c,d,g);for(f=0;f<g;f++)a[k*g+f]=Math.sqrt(p[f])}}function m(a,g,e,n,p){e[0]=0;n[0]=-h;n[1]=+h;for(var c=1,d=0;c<p;c++){for(var f=(a[c]+c*c-(a[e[d]]+e[d]*e[d]))/(2*c-2*e[d]);f<=n[d];)d--,f=(a[c]+c*c-(a[e[d]]+e[d]*e[d]))/(2*c-2*e[d]);d++;e[d]=c;n[d]=f;n[d+1]=+h}for(d=c=0;c<p;c++){for(;n[d+1]<c;)d++;g[c]=(c-e[d])*(c-e[d])+a[e[d]]}}var l=b("clamp");K.exports=function(a,g){g||(g={});var e=null==g.cutoff?.25:g.cutoff,n=null==g.radius?8:g.radius,p=g.channel||0;if(ArrayBuffer.isView(a)||Array.isArray(a)){if(!g.width||
!g.height)throw Error("For raw data width and height should be provided by options");var c=g.width;var d=g.height;var f=a;var k=g.stride?g.stride:Math.floor(a.length/c/d)}else window.HTMLCanvasElement&&a instanceof window.HTMLCanvasElement?(d=a,f=d.getContext("2d"),c=d.width,d=d.height,f=f.getImageData(0,0,c,d),f=f.data,k=4):window.CanvasRenderingContext2D&&a instanceof window.CanvasRenderingContext2D?(d=a.canvas,c=d.width,d=d.height,f=a.getImageData(0,0,c,d),f=f.data,k=4):window.ImageData&&a instanceof
window.ImageData&&(c=a.width,d=a.height,f=a.data,k=4);var r=Math.max(c,d);if(window.Uint8ClampedArray&&f instanceof window.Uint8ClampedArray||window.Uint8Array&&f instanceof window.Uint8Array){var u=f;f=Array(c*d);a=0;for(g=u.length;a<g;a++)f[a]=u[a*k+p]/255}else if(1!==k)throw Error("Raw data can have only 1 value per pixel");p=Array(c*d);k=Array(c*d);u=Array(r);var v=Array(r),x=Array(r+1);r=Array(r);a=0;for(g=c*d;a<g;a++){var C=f[a];p[a]=1===C?0:0===C?h:Math.pow(Math.max(0,.5-C),2);k[a]=1===C?h:
0===C?0:Math.pow(Math.max(0,C-.5),2)}q(p,c,d,u,v,r,x);q(k,c,d,u,v,r,x);f=window.Float32Array?new Float32Array(c*d):Array(c*d);a=0;for(g=c*d;a<g;a++)f[a]=l(1-((p[a]-k[a])/n+e),0,1);return f};var h=1E20},{clamp:120}],99:[function(b,K,G){(function(q,m){function l(t,B){if(!t)throw Error(B||"Assertion failed");}function h(t,B){t.super_=B;var F=function(){};F.prototype=B.prototype;t.prototype=new F;t.prototype.constructor=t}function a(t,B,F){if(a.isBN(t))return t;this.negative=0;this.words=null;this.length=
0;this.red=null;if(null!==t){if("le"===B||"be"===B)F=B,B=10;this._init(t||0,B||10,F||"be")}}function g(t,B,F){var I=0;for(F=Math.min(t.length,F);B<F;B++){var J=t.charCodeAt(B)-48;I<<=4;I=49<=J&&54>=J?I|J-49+10:17<=J&&22>=J?I|J-17+10:I|J&15}return I}function e(t,B,F,I){var J=0;for(F=Math.min(t.length,F);B<F;B++){var L=t.charCodeAt(B)-48;J*=I;J=49<=L?J+(L-49+10):17<=L?J+(L-17+10):J+L}return J}function n(t,B,F){F.negative=B.negative^t.negative;var I=t.length+B.length|0;F.length=I;I=I-1|0;var J=t.words[0]|
0,L=B.words[0]|0;J*=L;var H=J/67108864|0;F.words[0]=J&67108863;for(var P=1;P<I;P++){var M=H>>>26,N=H&67108863;H=Math.min(P,B.length-1);for(var T=Math.max(0,P-t.length+1);T<=H;T++)J=t.words[P-T|0]|0,L=B.words[T]|0,J=J*L+N,M+=J/67108864|0,N=J&67108863;F.words[P]=N|0;H=M|0}0!==H?F.words[P]=H|0:F.length--;return F.strip()}function p(t,B){this.x=t;this.y=B}function c(t,B){this.name=t;this.p=new a(B,16);this.n=this.p.bitLength();this.k=(new a(1)).iushln(this.n).isub(this.p);this.tmp=this._tmp()}function d(){c.call(this,
"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function f(){c.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function k(){c.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function r(){c.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function u(t){"string"===typeof t?(t=a._prime(t),this.m=t.p,this.prime=t):(l(t.gtn(1),"modulus must be greater than 1"),this.m=t,
this.prime=null)}function v(t){u.call(this,t);this.shift=this.m.bitLength();0!==this.shift%26&&(this.shift+=26-this.shift%26);this.r=(new a(1)).iushln(this.shift);this.r2=this.imod(this.r.sqr());this.rinv=this.r._invmp(this.m);this.minv=this.rinv.mul(this.r).isubn(1).div(this.m);this.minv=this.minv.umod(this.r);this.minv=this.r.sub(this.minv)}"object"===typeof q?q.exports=a:m.BN=a;a.BN=a;a.wordSize=26;try{var x=b("buffer").Buffer}catch(t){}a.isBN=function(t){return t instanceof a?!0:null!==t&&"object"===
typeof t&&t.constructor.wordSize===a.wordSize&&Array.isArray(t.words)};a.max=function(t,B){return 0<t.cmp(B)?t:B};a.min=function(t,B){return 0>t.cmp(B)?t:B};a.prototype._init=function(t,B,F){if("number"===typeof t)return this._initNumber(t,B,F);if("object"===typeof t)return this._initArray(t,B,F);"hex"===B&&(B=16);l(B===(B|0)&&2<=B&&36>=B);t=t.toString().replace(/\s+/g,"");var I=0;"-"===t[0]&&I++;16===B?this._parseHex(t,I):this._parseBase(t,B,I);"-"===t[0]&&(this.negative=1);this.strip();"le"===F&&
this._initArray(this.toArray(),B,F)};a.prototype._initNumber=function(t,B,F){0>t&&(this.negative=1,t=-t);67108864>t?(this.words=[t&67108863],this.length=1):4503599627370496>t?(this.words=[t&67108863,t/67108864&67108863],this.length=2):(l(9007199254740992>t),this.words=[t&67108863,t/67108864&67108863,1],this.length=3);"le"===F&&this._initArray(this.toArray(),B,F)};a.prototype._initArray=function(t,B,F){l("number"===typeof t.length);if(0>=t.length)return this.words=[0],this.length=1,this;this.length=
Math.ceil(t.length/3);this.words=Array(this.length);for(B=0;B<this.length;B++)this.words[B]=0;var I=0;if("be"===F)for(B=t.length-1,F=0;0<=B;B-=3){var J=t[B]|t[B-1]<<8|t[B-2]<<16;this.words[F]|=J<<I&67108863;this.words[F+1]=J>>>26-I&67108863;I+=24;26<=I&&(I-=26,F++)}else if("le"===F)for(F=B=0;B<t.length;B+=3)J=t[B]|t[B+1]<<8|t[B+2]<<16,this.words[F]|=J<<I&67108863,this.words[F+1]=J>>>26-I&67108863,I+=24,26<=I&&(I-=26,F++);return this.strip()};a.prototype._parseHex=function(t,B){this.length=Math.ceil((t.length-
B)/6);this.words=Array(this.length);for(var F=0;F<this.length;F++)this.words[F]=0;var I,J=0;F=t.length-6;for(I=0;F>=B;F-=6){var L=g(t,F,F+6);this.words[I]|=L<<J&67108863;this.words[I+1]|=L>>>26-J&4194303;J+=24;26<=J&&(J-=26,I++)}F+6!==B&&(L=g(t,B,F+6),this.words[I]|=L<<J&67108863,this.words[I+1]|=L>>>26-J&4194303);this.strip()};a.prototype._parseBase=function(t,B,F){this.words=[0];this.length=1;for(var I=0,J=1;67108863>=J;J*=B)I++;I--;J=J/B|0;var L=t.length-F,H=L%I;L=Math.min(L,L-H)+F;for(var P=F;P<
L;P+=I)F=e(t,P,P+I,B),this.imuln(J),67108864>this.words[0]+F?this.words[0]+=F:this._iaddn(F);if(0!==H){I=1;F=e(t,P,t.length,B);for(P=0;P<H;P++)I*=B;this.imuln(I);67108864>this.words[0]+F?this.words[0]+=F:this._iaddn(F)}};a.prototype.copy=function(t){t.words=Array(this.length);for(var B=0;B<this.length;B++)t.words[B]=this.words[B];t.length=this.length;t.negative=this.negative;t.red=this.red};a.prototype.clone=function(){var t=new a(null);this.copy(t);return t};a.prototype._expand=function(t){for(;this.length<
t;)this.words[this.length++]=0;return this};a.prototype.strip=function(){for(;1<this.length&&0===this.words[this.length-1];)this.length--;return this._normSign()};a.prototype._normSign=function(){1===this.length&&0===this.words[0]&&(this.negative=0);return this};a.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var C=" 0 00 000 0000 00000 000000 0000000 00000000 000000000 0000000000 00000000000 000000000000 0000000000000 00000000000000 000000000000000 0000000000000000 00000000000000000 000000000000000000 0000000000000000000 00000000000000000000 000000000000000000000 0000000000000000000000 00000000000000000000000 000000000000000000000000 0000000000000000000000000".split(" "),
z=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],y=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1E7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64E6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243E5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(t,B){t=t||10;B=B|0||1;if(16===t||"hex"===t){var F="";for(var I=t=0,J=0;J<this.length;J++){var L=
this.words[J],H=((L<<t|I)&16777215).toString(16);I=L>>>24-t&16777215;F=0!==I||J!==this.length-1?C[6-H.length]+H+F:H+F;t+=2;26<=t&&(t-=26,J--)}for(0!==I&&(F=I.toString(16)+F);0!==F.length%B;)F="0"+F;0!==this.negative&&(F="-"+F);return F}if(t===(t|0)&&2<=t&&36>=t){I=z[t];J=y[t];F="";L=this.clone();for(L.negative=0;!L.isZero();)H=L.modn(J).toString(t),L=L.idivn(J),F=L.isZero()?H+F:C[I-H.length]+H+F;for(this.isZero()&&(F="0"+F);0!==F.length%B;)F="0"+F;0!==this.negative&&(F="-"+F);return F}l(!1,"Base should be between 2 and 36")};
a.prototype.toNumber=function(){var t=this.words[0];2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:2<this.length&&l(!1,"Number can only safely store up to 53 bits");return 0!==this.negative?-t:t};a.prototype.toJSON=function(){return this.toString(16)};a.prototype.toBuffer=function(t,B){l("undefined"!==typeof x);return this.toArrayLike(x,t,B)};a.prototype.toArray=function(t,B){return this.toArrayLike(Array,t,B)};a.prototype.toArrayLike=
function(t,B,F){var I=this.byteLength();F=F||Math.max(1,I);l(I<=F,"byte array longer than desired length");l(0<F,"Requested array length <= 0");this.strip();var J="le"===B;t=new t(F);B=this.clone();if(J){for(J=0;!B.isZero();J++)I=B.andln(255),B.iushrn(8),t[J]=I;for(;J<F;J++)t[J]=0}else{for(J=0;J<F-I;J++)t[J]=0;for(J=0;!B.isZero();J++)I=B.andln(255),B.iushrn(8),t[F-J-1]=I}return t};a.prototype._countBits=Math.clz32?function(t){return 32-Math.clz32(t)}:function(t){var B=0;4096<=t&&(B+=13,t>>>=13);64<=
t&&(B+=7,t>>>=7);8<=t&&(B+=4,t>>>=4);2<=t&&(B+=2,t>>>=2);return B+t};a.prototype._zeroBits=function(t){if(0===t)return 26;var B=0;0===(t&8191)&&(B+=13,t>>>=13);0===(t&127)&&(B+=7,t>>>=7);0===(t&15)&&(B+=4,t>>>=4);0===(t&3)&&(B+=2,t>>>=2);0===(t&1)&&B++;return B};a.prototype.bitLength=function(){var t=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+t};a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,B=0;B<this.length;B++){var F=this._zeroBits(this.words[B]);
t+=F;if(26!==F)break}return t};a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)};a.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()};a.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()};a.prototype.isNeg=function(){return 0!==this.negative};a.prototype.neg=function(){return this.clone().ineg()};a.prototype.ineg=function(){this.isZero()||(this.negative^=1);return this};a.prototype.iuor=
function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var B=0;B<t.length;B++)this.words[B]|=t.words[B];return this.strip()};a.prototype.ior=function(t){l(0===(this.negative|t.negative));return this.iuor(t)};a.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)};a.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)};a.prototype.iuand=function(t){var B=this.length>t.length?t:this;for(var F=0;F<B.length;F++)this.words[F]&=
t.words[F];this.length=B.length;return this.strip()};a.prototype.iand=function(t){l(0===(this.negative|t.negative));return this.iuand(t)};a.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)};a.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)};a.prototype.iuxor=function(t){if(this.length>t.length)var B=this;else B=t,t=this;for(var F=0;F<t.length;F++)this.words[F]=B.words[F]^t.words[F];if(this!==B)for(;F<
B.length;F++)this.words[F]=B.words[F];this.length=B.length;return this.strip()};a.prototype.ixor=function(t){l(0===(this.negative|t.negative));return this.iuxor(t)};a.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)};a.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)};a.prototype.inotn=function(t){l("number"===typeof t&&0<=t);var B=Math.ceil(t/26)|0;t%=26;this._expand(B);0<t&&B--;for(var F=0;F<B;F++)this.words[F]=
~this.words[F]&67108863;0<t&&(this.words[F]=~this.words[F]&67108863>>26-t);return this.strip()};a.prototype.notn=function(t){return this.clone().inotn(t)};a.prototype.setn=function(t,B){l("number"===typeof t&&0<=t);var F=t/26|0;t%=26;this._expand(F+1);this.words[F]=B?this.words[F]|1<<t:this.words[F]&~(1<<t);return this.strip()};a.prototype.iadd=function(t){if(0!==this.negative&&0===t.negative)return this.negative=0,this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative){t.negative=
0;var B=this.isub(t);t.negative=1;return B._normSign()}if(this.length>t.length)var F=this;else F=t,t=this;for(var I=B=0;I<t.length;I++)B=(F.words[I]|0)+(t.words[I]|0)+B,this.words[I]=B&67108863,B>>>=26;for(;0!==B&&I<F.length;I++)B=(F.words[I]|0)+B,this.words[I]=B&67108863,B>>>=26;this.length=F.length;if(0!==B)this.words[this.length]=B,this.length++;else if(F!==this)for(;I<F.length;I++)this.words[I]=F.words[I];return this};a.prototype.add=function(t){if(0!==t.negative&&0===this.negative){t.negative=
0;var B=this.sub(t);t.negative^=1;return B}return 0===t.negative&&0!==this.negative?(this.negative=0,B=t.sub(this),this.negative=1,B):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)};a.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var B=this.iadd(t);t.negative=1;return B._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();B=this.cmp(t);if(0===B)return this.negative=0,this.length=1,this.words[0]=0,this;if(0<B)var F=this;
else F=t,t=this;for(var I=0,J=0;J<t.length;J++)B=(F.words[J]|0)-(t.words[J]|0)+I,I=B>>26,this.words[J]=B&67108863;for(;0!==I&&J<F.length;J++)B=(F.words[J]|0)+I,I=B>>26,this.words[J]=B&67108863;if(0===I&&J<F.length&&F!==this)for(;J<F.length;J++)this.words[J]=F.words[J];this.length=Math.max(this.length,J);F!==this&&(this.negative=1);return this.strip()};a.prototype.sub=function(t){return this.clone().isub(t)};var D=function(t,B,F){var I=t.words,J=B.words,L=F.words,H=0,P=I[0]|0,M=P&8191,N=P>>>13,T=I[1]|
0;P=T&8191;var Q=T>>>13,U=I[2]|0;T=U&8191;var S=U>>>13,X=I[3]|0;U=X&8191;var Z=X>>>13,aa=I[4]|0;X=aa&8191;var fa=aa>>>13,ha=I[5]|0;aa=ha&8191;var ja=ha>>>13,ba=I[6]|0;ha=ba&8191;var ma=ba>>>13,qa=I[7]|0;ba=qa&8191;var ka=qa>>>13,oa=I[8]|0;qa=oa&8191;oa>>>=13;var na=I[9]|0;I=na&8191;na>>>=13;var la=J[0]|0,ia=la&8191,sa=la>>>13,ta=J[1]|0;la=ta&8191;var Aa=ta>>>13,Ka=J[2]|0;ta=Ka&8191;var Sa=Ka>>>13,db=J[3]|0;Ka=db&8191;var eb=db>>>13,lb=J[4]|0;db=lb&8191;var ab=lb>>>13,Ya=J[5]|0;lb=Ya&8191;var hb=Ya>>>
13,nb=J[6]|0;Ya=nb&8191;var va=nb>>>13,Ba=J[7]|0;nb=Ba&8191;var Ga=Ba>>>13,Na=J[8]|0;Ba=Na&8191;Na>>>=13;var $a=J[9]|0;J=$a&8191;$a>>>=13;F.negative=t.negative^B.negative;F.length=19;var Va=Math.imul(M,ia);t=Math.imul(M,sa);t=t+Math.imul(N,ia)|0;B=Math.imul(N,sa);var qb=(H+Va|0)+((t&8191)<<13)|0;H=(B+(t>>>13)|0)+(qb>>>26)|0;qb&=67108863;Va=Math.imul(P,ia);t=Math.imul(P,sa);t=t+Math.imul(Q,ia)|0;B=Math.imul(Q,sa);Va=Va+Math.imul(M,la)|0;t=t+Math.imul(M,Aa)|0;t=t+Math.imul(N,la)|0;B=B+Math.imul(N,Aa)|
0;var Ha=(H+Va|0)+((t&8191)<<13)|0;H=(B+(t>>>13)|0)+(Ha>>>26)|0;Ha&=67108863;Va=Math.imul(T,ia);t=Math.imul(T,sa);t=t+Math.imul(S,ia)|0;B=Math.imul(S,sa);Va=Va+Math.imul(P,la)|0;t=t+Math.imul(P,Aa)|0;t=t+Math.imul(Q,la)|0;B=B+Math.imul(Q,Aa)|0;Va=Va+Math.imul(M,ta)|0;t=t+Math.imul(M,Sa)|0;t=t+Math.imul(N,ta)|0;B=B+Math.imul(N,Sa)|0;var Ra=(H+Va|0)+((t&8191)<<13)|0;H=(B+(t>>>13)|0)+(Ra>>>26)|0;Ra&=67108863;Va=Math.imul(U,ia);t=Math.imul(U,sa);t=t+Math.imul(Z,ia)|0;B=Math.imul(Z,sa);Va=Va+Math.imul(T,
la)|0;t=t+Math.imul(T,Aa)|0;t=t+Math.imul(S,la)|0;B=B+Math.imul(S,Aa)|0;Va=Va+Math.imul(P,ta)|0;t=t+Math.imul(P,Sa)|0;t=t+Math.imul(Q,ta)|0;B=B+Math.imul(Q,Sa)|0;Va=Va+Math.imul(M,Ka)|0;t=t+Math.imul(M,eb)|0;t=t+Math.imul(N,Ka)|0;B=B+Math.imul(N,eb)|0;var La=(H+Va|0)+((t&8191)<<13)|0;H=(B+(t>>>13)|0)+(La>>>26)|0;La&=67108863;Va=Math.imul(X,ia);t=Math.imul(X,sa);t=t+Math.imul(fa,ia)|0;B=Math.imul(fa,sa);Va=Va+Math.imul(U,la)|0;t=t+Math.imul(U,Aa)|0;t=t+Math.imul(Z,la)|0;B=B+Math.imul(Z,Aa)|0;Va=Va+
Math.imul(T,ta)|0;t=t+Math.imul(T,Sa)|0;t=t+Math.imul(S,ta)|0;B=B+Math.imul(S,Sa)|0;Va=Va+Math.imul(P,Ka)|0;t=t+Math.imul(P,eb)|0;t=t+Math.imul(Q,Ka)|0;B=B+Math.imul(Q,eb)|0;Va=Va+Math.imul(M,db)|0;t=t+Math.imul(M,ab)|0;t=t+Math.imul(N,db)|0;B=B+Math.imul(N,ab)|0;var gb=(H+Va|0)+((t&8191)<<13)|0;H=(B+(t>>>13)|0)+(gb>>>26)|0;gb&=67108863;Va=Math.imul(aa,ia);t=Math.imul(aa,sa);t=t+Math.imul(ja,ia)|0;B=Math.imul(ja,sa);Va=Va+Math.imul(X,la)|0;t=t+Math.imul(X,Aa)|0;t=t+Math.imul(fa,la)|0;B=B+Math.imul(fa,
Aa)|0;Va=Va+Math.imul(U,ta)|0;t=t+Math.imul(U,Sa)|0;t=t+Math.imul(Z,ta)|0;B=B+Math.imul(Z,Sa)|0;Va=Va+Math.imul(T,Ka)|0;t=t+Math.imul(T,eb)|0;t=t+Math.imul(S,Ka)|0;B=B+Math.imul(S,eb)|0;Va=Va+Math.imul(P,db)|0;t=t+Math.imul(P,ab)|0;t=t+Math.imul(Q,db)|0;B=B+Math.imul(Q,ab)|0;Va=Va+Math.imul(M,lb)|0;t=t+Math.imul(M,hb)|0;t=t+Math.imul(N,lb)|0;B=B+Math.imul(N,hb)|0;var ob=(H+Va|0)+((t&8191)<<13)|0;H=(B+(t>>>13)|0)+(ob>>>26)|0;ob&=67108863;Va=Math.imul(ha,ia);t=Math.imul(ha,sa);t=t+Math.imul(ma,ia)|
0;B=Math.imul(ma,sa);Va=Va+Math.imul(aa,la)|0;t=t+Math.imul(aa,Aa)|0;t=t+Math.imul(ja,la)|0;B=B+Math.imul(ja,Aa)|0;Va=Va+Math.imul(X,ta)|0;t=t+Math.imul(X,Sa)|0;t=t+Math.imul(fa,ta)|0;B=B+Math.imul(fa,Sa)|0;Va=Va+Math.imul(U,Ka)|0;t=t+Math.imul(U,eb)|0;t=t+Math.imul(Z,Ka)|0;B=B+Math.imul(Z,eb)|0;Va=Va+Math.imul(T,db)|0;t=t+Math.imul(T,ab)|0;t=t+Math.imul(S,db)|0;B=B+Math.imul(S,ab)|0;Va=Va+Math.imul(P,lb)|0;t=t+Math.imul(P,hb)|0;t=t+Math.imul(Q,lb)|0;B=B+Math.imul(Q,hb)|0;Va=Va+Math.imul(M,Ya)|0;
t=t+Math.imul(M,va)|0;t=t+Math.imul(N,Ya)|0;B=B+Math.imul(N,va)|0;var ub=(H+Va|0)+((t&8191)<<13)|0;H=(B+(t>>>13)|0)+(ub>>>26)|0;ub&=67108863;Va=Math.imul(ba,ia);t=Math.imul(ba,sa);t=t+Math.imul(ka,ia)|0;B=Math.imul(ka,sa);Va=Va+Math.imul(ha,la)|0;t=t+Math.imul(ha,Aa)|0;t=t+Math.imul(ma,la)|0;B=B+Math.imul(ma,Aa)|0;Va=Va+Math.imul(aa,ta)|0;t=t+Math.imul(aa,Sa)|0;t=t+Math.imul(ja,ta)|0;B=B+Math.imul(ja,Sa)|0;Va=Va+Math.imul(X,Ka)|0;t=t+Math.imul(X,eb)|0;t=t+Math.imul(fa,Ka)|0;B=B+Math.imul(fa,eb)|0;
Va=Va+Math.imul(U,db)|0;t=t+Math.imul(U,ab)|0;t=t+Math.imul(Z,db)|0;B=B+Math.imul(Z,ab)|0;Va=Va+Math.imul(T,lb)|0;t=t+Math.imul(T,hb)|0;t=t+Math.imul(S,lb)|0;B=B+Math.imul(S,hb)|0;Va=Va+Math.imul(P,Ya)|0;t=t+Math.imul(P,va)|0;t=t+Math.imul(Q,Ya)|0;B=B+Math.imul(Q,va)|0;Va=Va+Math.imul(M,nb)|0;t=t+Math.imul(M,Ga)|0;t=t+Math.imul(N,nb)|0;B=B+Math.imul(N,Ga)|0;var za=(H+Va|0)+((t&8191)<<13)|0;H=(B+(t>>>13)|0)+(za>>>26)|0;za&=67108863;Va=Math.imul(qa,ia);t=Math.imul(qa,sa);t=t+Math.imul(oa,ia)|0;B=Math.imul(oa,
sa);Va=Va+Math.imul(ba,la)|0;t=t+Math.imul(ba,Aa)|0;t=t+Math.imul(ka,la)|0;B=B+Math.imul(ka,Aa)|0;Va=Va+Math.imul(ha,ta)|0;t=t+Math.imul(ha,Sa)|0;t=t+Math.imul(ma,ta)|0;B=B+Math.imul(ma,Sa)|0;Va=Va+Math.imul(aa,Ka)|0;t=t+Math.imul(aa,eb)|0;t=t+Math.imul(ja,Ka)|0;B=B+Math.imul(ja,eb)|0;Va=Va+Math.imul(X,db)|0;t=t+Math.imul(X,ab)|0;t=t+Math.imul(fa,db)|0;B=B+Math.imul(fa,ab)|0;Va=Va+Math.imul(U,lb)|0;t=t+Math.imul(U,hb)|0;t=t+Math.imul(Z,lb)|0;B=B+Math.imul(Z,hb)|0;Va=Va+Math.imul(T,Ya)|0;t=t+Math.imul(T,
va)|0;t=t+Math.imul(S,Ya)|0;B=B+Math.imul(S,va)|0;Va=Va+Math.imul(P,nb)|0;t=t+Math.imul(P,Ga)|0;t=t+Math.imul(Q,nb)|0;B=B+Math.imul(Q,Ga)|0;Va=Va+Math.imul(M,Ba)|0;t=t+Math.imul(M,Na)|0;t=t+Math.imul(N,Ba)|0;B=B+Math.imul(N,Na)|0;var Da=(H+Va|0)+((t&8191)<<13)|0;H=(B+(t>>>13)|0)+(Da>>>26)|0;Da&=67108863;Va=Math.imul(I,ia);t=Math.imul(I,sa);t=t+Math.imul(na,ia)|0;B=Math.imul(na,sa);Va=Va+Math.imul(qa,la)|0;t=t+Math.imul(qa,Aa)|0;t=t+Math.imul(oa,la)|0;B=B+Math.imul(oa,Aa)|0;Va=Va+Math.imul(ba,ta)|
0;t=t+Math.imul(ba,Sa)|0;t=t+Math.imul(ka,ta)|0;B=B+Math.imul(ka,Sa)|0;Va=Va+Math.imul(ha,Ka)|0;t=t+Math.imul(ha,eb)|0;t=t+Math.imul(ma,Ka)|0;B=B+Math.imul(ma,eb)|0;Va=Va+Math.imul(aa,db)|0;t=t+Math.imul(aa,ab)|0;t=t+Math.imul(ja,db)|0;B=B+Math.imul(ja,ab)|0;Va=Va+Math.imul(X,lb)|0;t=t+Math.imul(X,hb)|0;t=t+Math.imul(fa,lb)|0;B=B+Math.imul(fa,hb)|0;Va=Va+Math.imul(U,Ya)|0;t=t+Math.imul(U,va)|0;t=t+Math.imul(Z,Ya)|0;B=B+Math.imul(Z,va)|0;Va=Va+Math.imul(T,nb)|0;t=t+Math.imul(T,Ga)|0;t=t+Math.imul(S,
nb)|0;B=B+Math.imul(S,Ga)|0;Va=Va+Math.imul(P,Ba)|0;t=t+Math.imul(P,Na)|0;t=t+Math.imul(Q,Ba)|0;B=B+Math.imul(Q,Na)|0;Va=Va+Math.imul(M,J)|0;t=t+Math.imul(M,$a)|0;t=t+Math.imul(N,J)|0;B=B+Math.imul(N,$a)|0;M=(H+Va|0)+((t&8191)<<13)|0;H=(B+(t>>>13)|0)+(M>>>26)|0;M&=67108863;Va=Math.imul(I,la);t=Math.imul(I,Aa);t=t+Math.imul(na,la)|0;B=Math.imul(na,Aa);Va=Va+Math.imul(qa,ta)|0;t=t+Math.imul(qa,Sa)|0;t=t+Math.imul(oa,ta)|0;B=B+Math.imul(oa,Sa)|0;Va=Va+Math.imul(ba,Ka)|0;t=t+Math.imul(ba,eb)|0;t=t+Math.imul(ka,
Ka)|0;B=B+Math.imul(ka,eb)|0;Va=Va+Math.imul(ha,db)|0;t=t+Math.imul(ha,ab)|0;t=t+Math.imul(ma,db)|0;B=B+Math.imul(ma,ab)|0;Va=Va+Math.imul(aa,lb)|0;t=t+Math.imul(aa,hb)|0;t=t+Math.imul(ja,lb)|0;B=B+Math.imul(ja,hb)|0;Va=Va+Math.imul(X,Ya)|0;t=t+Math.imul(X,va)|0;t=t+Math.imul(fa,Ya)|0;B=B+Math.imul(fa,va)|0;Va=Va+Math.imul(U,nb)|0;t=t+Math.imul(U,Ga)|0;t=t+Math.imul(Z,nb)|0;B=B+Math.imul(Z,Ga)|0;Va=Va+Math.imul(T,Ba)|0;t=t+Math.imul(T,Na)|0;t=t+Math.imul(S,Ba)|0;B=B+Math.imul(S,Na)|0;Va=Va+Math.imul(P,
J)|0;t=t+Math.imul(P,$a)|0;t=t+Math.imul(Q,J)|0;B=B+Math.imul(Q,$a)|0;P=(H+Va|0)+((t&8191)<<13)|0;H=(B+(t>>>13)|0)+(P>>>26)|0;P&=67108863;Va=Math.imul(I,ta);t=Math.imul(I,Sa);t=t+Math.imul(na,ta)|0;B=Math.imul(na,Sa);Va=Va+Math.imul(qa,Ka)|0;t=t+Math.imul(qa,eb)|0;t=t+Math.imul(oa,Ka)|0;B=B+Math.imul(oa,eb)|0;Va=Va+Math.imul(ba,db)|0;t=t+Math.imul(ba,ab)|0;t=t+Math.imul(ka,db)|0;B=B+Math.imul(ka,ab)|0;Va=Va+Math.imul(ha,lb)|0;t=t+Math.imul(ha,hb)|0;t=t+Math.imul(ma,lb)|0;B=B+Math.imul(ma,hb)|0;Va=
Va+Math.imul(aa,Ya)|0;t=t+Math.imul(aa,va)|0;t=t+Math.imul(ja,Ya)|0;B=B+Math.imul(ja,va)|0;Va=Va+Math.imul(X,nb)|0;t=t+Math.imul(X,Ga)|0;t=t+Math.imul(fa,nb)|0;B=B+Math.imul(fa,Ga)|0;Va=Va+Math.imul(U,Ba)|0;t=t+Math.imul(U,Na)|0;t=t+Math.imul(Z,Ba)|0;B=B+Math.imul(Z,Na)|0;Va=Va+Math.imul(T,J)|0;t=t+Math.imul(T,$a)|0;t=t+Math.imul(S,J)|0;B=B+Math.imul(S,$a)|0;T=(H+Va|0)+((t&8191)<<13)|0;H=(B+(t>>>13)|0)+(T>>>26)|0;T&=67108863;Va=Math.imul(I,Ka);t=Math.imul(I,eb);t=t+Math.imul(na,Ka)|0;B=Math.imul(na,
eb);Va=Va+Math.imul(qa,db)|0;t=t+Math.imul(qa,ab)|0;t=t+Math.imul(oa,db)|0;B=B+Math.imul(oa,ab)|0;Va=Va+Math.imul(ba,lb)|0;t=t+Math.imul(ba,hb)|0;t=t+Math.imul(ka,lb)|0;B=B+Math.imul(ka,hb)|0;Va=Va+Math.imul(ha,Ya)|0;t=t+Math.imul(ha,va)|0;t=t+Math.imul(ma,Ya)|0;B=B+Math.imul(ma,va)|0;Va=Va+Math.imul(aa,nb)|0;t=t+Math.imul(aa,Ga)|0;t=t+Math.imul(ja,nb)|0;B=B+Math.imul(ja,Ga)|0;Va=Va+Math.imul(X,Ba)|0;t=t+Math.imul(X,Na)|0;t=t+Math.imul(fa,Ba)|0;B=B+Math.imul(fa,Na)|0;Va=Va+Math.imul(U,J)|0;t=t+Math.imul(U,
$a)|0;t=t+Math.imul(Z,J)|0;B=B+Math.imul(Z,$a)|0;U=(H+Va|0)+((t&8191)<<13)|0;H=(B+(t>>>13)|0)+(U>>>26)|0;U&=67108863;Va=Math.imul(I,db);t=Math.imul(I,ab);t=t+Math.imul(na,db)|0;B=Math.imul(na,ab);Va=Va+Math.imul(qa,lb)|0;t=t+Math.imul(qa,hb)|0;t=t+Math.imul(oa,lb)|0;B=B+Math.imul(oa,hb)|0;Va=Va+Math.imul(ba,Ya)|0;t=t+Math.imul(ba,va)|0;t=t+Math.imul(ka,Ya)|0;B=B+Math.imul(ka,va)|0;Va=Va+Math.imul(ha,nb)|0;t=t+Math.imul(ha,Ga)|0;t=t+Math.imul(ma,nb)|0;B=B+Math.imul(ma,Ga)|0;Va=Va+Math.imul(aa,Ba)|
0;t=t+Math.imul(aa,Na)|0;t=t+Math.imul(ja,Ba)|0;B=B+Math.imul(ja,Na)|0;Va=Va+Math.imul(X,J)|0;t=t+Math.imul(X,$a)|0;t=t+Math.imul(fa,J)|0;B=B+Math.imul(fa,$a)|0;X=(H+Va|0)+((t&8191)<<13)|0;H=(B+(t>>>13)|0)+(X>>>26)|0;X&=67108863;Va=Math.imul(I,lb);t=Math.imul(I,hb);t=t+Math.imul(na,lb)|0;B=Math.imul(na,hb);Va=Va+Math.imul(qa,Ya)|0;t=t+Math.imul(qa,va)|0;t=t+Math.imul(oa,Ya)|0;B=B+Math.imul(oa,va)|0;Va=Va+Math.imul(ba,nb)|0;t=t+Math.imul(ba,Ga)|0;t=t+Math.imul(ka,nb)|0;B=B+Math.imul(ka,Ga)|0;Va=Va+
Math.imul(ha,Ba)|0;t=t+Math.imul(ha,Na)|0;t=t+Math.imul(ma,Ba)|0;B=B+Math.imul(ma,Na)|0;Va=Va+Math.imul(aa,J)|0;t=t+Math.imul(aa,$a)|0;t=t+Math.imul(ja,J)|0;B=B+Math.imul(ja,$a)|0;aa=(H+Va|0)+((t&8191)<<13)|0;H=(B+(t>>>13)|0)+(aa>>>26)|0;aa&=67108863;Va=Math.imul(I,Ya);t=Math.imul(I,va);t=t+Math.imul(na,Ya)|0;B=Math.imul(na,va);Va=Va+Math.imul(qa,nb)|0;t=t+Math.imul(qa,Ga)|0;t=t+Math.imul(oa,nb)|0;B=B+Math.imul(oa,Ga)|0;Va=Va+Math.imul(ba,Ba)|0;t=t+Math.imul(ba,Na)|0;t=t+Math.imul(ka,Ba)|0;B=B+Math.imul(ka,
Na)|0;Va=Va+Math.imul(ha,J)|0;t=t+Math.imul(ha,$a)|0;t=t+Math.imul(ma,J)|0;B=B+Math.imul(ma,$a)|0;ha=(H+Va|0)+((t&8191)<<13)|0;H=(B+(t>>>13)|0)+(ha>>>26)|0;ha&=67108863;Va=Math.imul(I,nb);t=Math.imul(I,Ga);t=t+Math.imul(na,nb)|0;B=Math.imul(na,Ga);Va=Va+Math.imul(qa,Ba)|0;t=t+Math.imul(qa,Na)|0;t=t+Math.imul(oa,Ba)|0;B=B+Math.imul(oa,Na)|0;Va=Va+Math.imul(ba,J)|0;t=t+Math.imul(ba,$a)|0;t=t+Math.imul(ka,J)|0;B=B+Math.imul(ka,$a)|0;ba=(H+Va|0)+((t&8191)<<13)|0;H=(B+(t>>>13)|0)+(ba>>>26)|0;ba&=67108863;
Va=Math.imul(I,Ba);t=Math.imul(I,Na);t=t+Math.imul(na,Ba)|0;B=Math.imul(na,Na);Va=Va+Math.imul(qa,J)|0;t=t+Math.imul(qa,$a)|0;t=t+Math.imul(oa,J)|0;B=B+Math.imul(oa,$a)|0;qa=(H+Va|0)+((t&8191)<<13)|0;H=(B+(t>>>13)|0)+(qa>>>26)|0;qa&=67108863;Va=Math.imul(I,J);t=Math.imul(I,$a);t=t+Math.imul(na,J)|0;B=Math.imul(na,$a);N=(H+Va|0)+((t&8191)<<13)|0;H=(B+(t>>>13)|0)+(N>>>26)|0;L[0]=qb;L[1]=Ha;L[2]=Ra;L[3]=La;L[4]=gb;L[5]=ob;L[6]=ub;L[7]=za;L[8]=Da;L[9]=M;L[10]=P;L[11]=T;L[12]=U;L[13]=X;L[14]=aa;L[15]=
ha;L[16]=ba;L[17]=qa;L[18]=N&67108863;0!==H&&(L[19]=H,F.length++);return F};Math.imul||(D=n);a.prototype.mulTo=function(t,B){var F=this.length+t.length;if(10===this.length&&10===t.length)t=D(this,t,B);else if(63>F)t=n(this,t,B);else if(1024>F){B.negative=t.negative^this.negative;B.length=this.length+t.length;for(var I=0,J=F=0;J<B.length-1;J++){var L=F;F=0;I&=67108863;for(var H=Math.min(J,t.length-1),P=Math.max(0,J-this.length+1);P<=H;P++){var M=(this.words[J-P]|0)*(t.words[P]|0),N=M&67108863;L=L+
(M/67108864|0)|0;N=N+I|0;I=N&67108863;L=L+(N>>>26)|0;F+=L>>>26;L&=67108863}B.words[J]=I;I=L}0!==I?B.words[J]=I:B.length--;t=B.strip()}else t=(new p).mulp(this,t,B);return t};p.prototype.makeRBT=function(t){for(var B=Array(t),F=a.prototype._countBits(t)-1,I=0;I<t;I++)B[I]=this.revBin(I,F,t);return B};p.prototype.revBin=function(t,B,F){if(0===t||t===F-1)return t;for(var I=F=0;I<B;I++)F|=(t&1)<<B-I-1,t>>=1;return F};p.prototype.permute=function(t,B,F,I,J,L){for(var H=0;H<L;H++)I[H]=B[t[H]],J[H]=F[t[H]]};
p.prototype.transform=function(t,B,F,I,J,L){this.permute(L,t,B,F,I,J);for(t=1;t<J;t<<=1){B=t<<1;L=Math.cos(2*Math.PI/B);for(var H=Math.sin(2*Math.PI/B),P=0;P<J;P+=B)for(var M=L,N=H,T=0;T<t;T++){var Q=F[P+T],U=I[P+T],S=F[P+T+t],X=I[P+T+t],Z=M*S-N*X;X=M*X+N*S;S=Z;F[P+T]=Q+S;I[P+T]=U+X;F[P+T+t]=Q-S;I[P+T+t]=U-X;T!==B&&(Z=L*M-H*N,N=L*N+H*M,M=Z)}}};p.prototype.guessLen13b=function(t,B){t=Math.max(B,t)|1;B=t&1;var F=0;for(t=t/2|0;t;t>>>=1)F++;return 1<<F+1+B};p.prototype.conjugate=function(t,B,F){if(!(1>=
F))for(var I=0;I<F/2;I++){var J=t[I];t[I]=t[F-I-1];t[F-I-1]=J;J=B[I];B[I]=-B[F-I-1];B[F-I-1]=-J}};p.prototype.normalize13b=function(t,B){for(var F=0,I=0;I<B/2;I++)F=8192*Math.round(t[2*I+1]/B)+Math.round(t[2*I]/B)+F,t[I]=F&67108863,F=67108864>F?0:F/67108864|0;return t};p.prototype.convert13b=function(t,B,F,I){for(var J=0,L=0;L<B;L++)J+=t[L]|0,F[2*L]=J&8191,J>>>=13,F[2*L+1]=J&8191,J>>>=13;for(L=2*B;L<I;++L)F[L]=0;l(0===J);l(0===(J&-8192))};p.prototype.stub=function(t){for(var B=Array(t),F=0;F<t;F++)B[F]=
0;return B};p.prototype.mulp=function(t,B,F){var I=2*this.guessLen13b(t.length,B.length),J=this.makeRBT(I),L=this.stub(I),H=Array(I),P=Array(I),M=Array(I),N=Array(I),T=Array(I),Q=Array(I),U=F.words;U.length=I;this.convert13b(t.words,t.length,H,I);this.convert13b(B.words,B.length,N,I);this.transform(H,L,P,M,I,J);this.transform(N,L,T,Q,I,J);for(H=0;H<I;H++)N=P[H]*T[H]-M[H]*Q[H],M[H]=P[H]*Q[H]+M[H]*T[H],P[H]=N;this.conjugate(P,M,I);this.transform(P,M,U,L,I,J);this.conjugate(U,L,I);this.normalize13b(U,
I);F.negative=t.negative^B.negative;F.length=t.length+B.length;return F.strip()};a.prototype.mul=function(t){var B=new a(null);B.words=Array(this.length+t.length);return this.mulTo(t,B)};a.prototype.mulf=function(t){var B=new a(null);B.words=Array(this.length+t.length);return(new p).mulp(this,t,B)};a.prototype.imul=function(t){return this.clone().mulTo(t,this)};a.prototype.imuln=function(t){l("number"===typeof t);l(67108864>t);for(var B=0,F=0;F<this.length;F++){var I=(this.words[F]|0)*t,J=(I&67108863)+
(B&67108863);B>>=26;B+=I/67108864|0;B+=J>>>26;this.words[F]=J&67108863}0!==B&&(this.words[F]=B,this.length++);return this};a.prototype.muln=function(t){return this.clone().imuln(t)};a.prototype.sqr=function(){return this.mul(this)};a.prototype.isqr=function(){return this.imul(this.clone())};a.prototype.pow=function(t){for(var B=Array(t.bitLength()),F=0;F<B.length;F++){var I=F%26;B[F]=(t.words[F/26|0]&1<<I)>>>I}if(0===B.length)return new a(1);t=this;for(F=0;F<B.length&&0===B[F];F++,t=t.sqr());if(++F<
B.length)for(I=t.sqr();F<B.length;F++,I=I.sqr())0!==B[F]&&(t=t.mul(I));return t};a.prototype.iushln=function(t){l("number"===typeof t&&0<=t);var B=t%26;t=(t-B)/26;var F=67108863>>>26-B<<26-B,I;if(0!==B){var J=0;for(I=0;I<this.length;I++){var L=this.words[I]&F;this.words[I]=(this.words[I]|0)-L<<B|J;J=L>>>26-B}J&&(this.words[I]=J,this.length++)}if(0!==t){for(I=this.length-1;0<=I;I--)this.words[I+t]=this.words[I];for(I=0;I<t;I++)this.words[I]=0;this.length+=t}return this.strip()};a.prototype.ishln=function(t){l(0===
this.negative);return this.iushln(t)};a.prototype.iushrn=function(t,B,F){l("number"===typeof t&&0<=t);var I=t%26,J=Math.min((t-I)/26,this.length);t=67108863^67108863>>>I<<I;B=Math.max(0,(B?(B-B%26)/26:0)-J);if(F){for(var L=0;L<J;L++)F.words[L]=this.words[L];F.length=J}if(0!==J)if(this.length>J)for(this.length-=J,L=0;L<this.length;L++)this.words[L]=this.words[L+J];else this.words[0]=0,this.length=1;J=0;for(L=this.length-1;0<=L&&(0!==J||L>=B);L--){var H=this.words[L]|0;this.words[L]=J<<26-I|H>>>I;J=
H&t}F&&0!==J&&(F.words[F.length++]=J);0===this.length&&(this.words[0]=0,this.length=1);return this.strip()};a.prototype.ishrn=function(t,B,F){l(0===this.negative);return this.iushrn(t,B,F)};a.prototype.shln=function(t){return this.clone().ishln(t)};a.prototype.ushln=function(t){return this.clone().iushln(t)};a.prototype.shrn=function(t){return this.clone().ishrn(t)};a.prototype.ushrn=function(t){return this.clone().iushrn(t)};a.prototype.testn=function(t){l("number"===typeof t&&0<=t);var B=t%26;t=
(t-B)/26;return this.length<=t?!1:!!(this.words[t]&1<<B)};a.prototype.imaskn=function(t){l("number"===typeof t&&0<=t);var B=t%26;t=(t-B)/26;l(0===this.negative,"imaskn works only with positive numbers");if(this.length<=t)return this;0!==B&&t++;this.length=Math.min(t,this.length);0!==B&&(this.words[this.length-1]&=67108863^67108863>>>B<<B);return this.strip()};a.prototype.maskn=function(t){return this.clone().imaskn(t)};a.prototype.iaddn=function(t){l("number"===typeof t);l(67108864>t);if(0>t)return this.isubn(-t);
if(0!==this.negative){if(1===this.length&&(this.words[0]|0)<t)return this.words[0]=t-(this.words[0]|0),this.negative=0,this;this.negative=0;this.isubn(t);this.negative=1;return this}return this._iaddn(t)};a.prototype._iaddn=function(t){this.words[0]+=t;for(t=0;t<this.length&&67108864<=this.words[t];t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;this.length=Math.max(this.length,t+1);return this};a.prototype.isubn=function(t){l("number"===typeof t);l(67108864>t);if(0>
t)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;this.words[0]-=t;if(1===this.length&&0>this.words[0])this.words[0]=-this.words[0],this.negative=1;else for(t=0;t<this.length&&0>this.words[t];t++)this.words[t]+=67108864,--this.words[t+1];return this.strip()};a.prototype.addn=function(t){return this.clone().iaddn(t)};a.prototype.subn=function(t){return this.clone().isubn(t)};a.prototype.iabs=function(){this.negative=0;return this};a.prototype.abs=
function(){return this.clone().iabs()};a.prototype._ishlnsubmul=function(t,B,F){var I;this._expand(t.length+F);var J=0;for(I=0;I<t.length;I++){var L=(this.words[I+F]|0)+J;J=(t.words[I]|0)*B;L-=J&67108863;J=(L>>26)-(J/67108864|0);this.words[I+F]=L&67108863}for(;I<this.length-F;I++)L=(this.words[I+F]|0)+J,J=L>>26,this.words[I+F]=L&67108863;if(0===J)return this.strip();l(-1===J);for(I=J=0;I<this.length;I++)L=-(this.words[I]|0)+J,J=L>>26,this.words[I]=L&67108863;this.negative=1;return this.strip()};a.prototype._wordDiv=
function(t,B){var F=this.clone(),I=t,J=I.words[I.length-1]|0;t=26-this._countBits(J);0!==t&&(I=I.ushln(t),F.iushln(t),J=I.words[I.length-1]|0);var L=F.length-I.length;if("mod"!==B){var H=new a(null);H.length=L+1;H.words=Array(H.length);for(var P=0;P<H.length;P++)H.words[P]=0}P=F.clone()._ishlnsubmul(I,1,L);0===P.negative&&(F=P,H&&(H.words[L]=1));for(--L;0<=L;L--){P=67108864*(F.words[I.length+L]|0)+(F.words[I.length+L-1]|0);P=Math.min(P/J|0,67108863);for(F._ishlnsubmul(I,P,L);0!==F.negative;)P--,F.negative=
0,F._ishlnsubmul(I,1,L),F.isZero()||(F.negative^=1);H&&(H.words[L]=P)}H&&H.strip();F.strip();"div"!==B&&0!==t&&F.iushrn(t);return{div:H||null,mod:F}};a.prototype.divmod=function(t,B,F){l(!t.isZero());if(this.isZero())return{div:new a(0),mod:new a(0)};var I;if(0!==this.negative&&0===t.negative){var J=this.neg().divmod(t,B);"mod"!==B&&(I=J.div.neg());if("div"!==B){var L=J.mod.neg();F&&0!==L.negative&&L.iadd(t)}return{div:I,mod:L}}return 0===this.negative&&0!==t.negative?(J=this.divmod(t.neg(),B),"mod"!==
B&&(I=J.div.neg()),{div:I,mod:J.mod}):0!==(this.negative&t.negative)?(J=this.neg().divmod(t.neg(),B),"div"!==B&&(L=J.mod.neg(),F&&0!==L.negative&&L.isub(t)),{div:J.div,mod:L}):t.length>this.length||0>this.cmp(t)?{div:new a(0),mod:this}:1===t.length?"div"===B?{div:this.divn(t.words[0]),mod:null}:"mod"===B?{div:null,mod:new a(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new a(this.modn(t.words[0]))}:this._wordDiv(t,B)};a.prototype.div=function(t){return this.divmod(t,"div",!1).div};a.prototype.mod=
function(t){return this.divmod(t,"mod",!1).mod};a.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod};a.prototype.divRound=function(t){var B=this.divmod(t);if(B.mod.isZero())return B.div;var F=0!==B.div.negative?B.mod.isub(t):B.mod,I=t.ushrn(1);t=t.andln(1);F=F.cmp(I);return 0>F||1===t&&0===F?B.div:0!==B.div.negative?B.div.isubn(1):B.div.iaddn(1)};a.prototype.modn=function(t){l(67108863>=t);for(var B=67108864%t,F=0,I=this.length-1;0<=I;I--)F=(B*F+(this.words[I]|0))%t;return F};a.prototype.idivn=
function(t){l(67108863>=t);for(var B=0,F=this.length-1;0<=F;F--)B=(this.words[F]|0)+67108864*B,this.words[F]=B/t|0,B%=t;return this.strip()};a.prototype.divn=function(t){return this.clone().idivn(t)};a.prototype.egcd=function(t){l(0===t.negative);l(!t.isZero());var B=this,F=t.clone();B=0!==B.negative?B.umod(t):B.clone();t=new a(1);for(var I=new a(0),J=new a(0),L=new a(1),H=0;B.isEven()&&F.isEven();)B.iushrn(1),F.iushrn(1),++H;for(var P=F.clone(),M=B.clone();!B.isZero();){for(var N=0,T=1;0===(B.words[0]&
T)&&26>N;++N,T<<=1);if(0<N)for(B.iushrn(N);0<N--;){if(t.isOdd()||I.isOdd())t.iadd(P),I.isub(M);t.iushrn(1);I.iushrn(1)}N=0;for(T=1;0===(F.words[0]&T)&&26>N;++N,T<<=1);if(0<N)for(F.iushrn(N);0<N--;){if(J.isOdd()||L.isOdd())J.iadd(P),L.isub(M);J.iushrn(1);L.iushrn(1)}0<=B.cmp(F)?(B.isub(F),t.isub(J),I.isub(L)):(F.isub(B),J.isub(t),L.isub(I))}return{a:J,b:L,gcd:F.iushln(H)}};a.prototype._invmp=function(t){l(0===t.negative);l(!t.isZero());var B=this,F=t.clone();B=0!==B.negative?B.umod(t):B.clone();for(var I=
new a(1),J=new a(0),L=F.clone();0<B.cmpn(1)&&0<F.cmpn(1);){for(var H=0,P=1;0===(B.words[0]&P)&&26>H;++H,P<<=1);if(0<H)for(B.iushrn(H);0<H--;)I.isOdd()&&I.iadd(L),I.iushrn(1);H=0;for(P=1;0===(F.words[0]&P)&&26>H;++H,P<<=1);if(0<H)for(F.iushrn(H);0<H--;)J.isOdd()&&J.iadd(L),J.iushrn(1);0<=B.cmp(F)?(B.isub(F),I.isub(J)):(F.isub(B),J.isub(I))}B=0===B.cmpn(1)?I:J;0>B.cmpn(0)&&B.iadd(t);return B};a.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var B=this.clone();
t=t.clone();B.negative=0;for(var F=t.negative=0;B.isEven()&&t.isEven();F++)B.iushrn(1),t.iushrn(1);do{for(;B.isEven();)B.iushrn(1);for(;t.isEven();)t.iushrn(1);var I=B.cmp(t);if(0>I)I=B,B=t,t=I;else if(0===I||0===t.cmpn(1))break;B.isub(t)}while(1);return t.iushln(F)};a.prototype.invm=function(t){return this.egcd(t).a.umod(t)};a.prototype.isEven=function(){return 0===(this.words[0]&1)};a.prototype.isOdd=function(){return 1===(this.words[0]&1)};a.prototype.andln=function(t){return this.words[0]&t};
a.prototype.bincn=function(t){l("number"===typeof t);var B=t%26;t=(t-B)/26;B=1<<B;if(this.length<=t)return this._expand(t+1),this.words[t]|=B,this;for(;0!==B&&t<this.length;t++){var F=this.words[t]|0;F+=B;B=F>>>26;F&=67108863;this.words[t]=F}0!==B&&(this.words[t]=B,this.length++);return this};a.prototype.isZero=function(){return 1===this.length&&0===this.words[0]};a.prototype.cmpn=function(t){var B=0>t;if(0!==this.negative&&!B)return-1;if(0===this.negative&&B)return 1;this.strip();1<this.length?t=
1:(B&&(t=-t),l(67108863>=t,"Number is too big"),B=this.words[0]|0,t=B===t?0:B<t?-1:1);return 0!==this.negative?-t|0:t};a.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;t=this.ucmp(t);return 0!==this.negative?-t|0:t};a.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var B=0,F=this.length-1;0<=F;F--){var I=this.words[F]|0,J=t.words[F]|0;if(I!==J){I<J?B=-1:I>J&&(B=1);break}}return B};
a.prototype.gtn=function(t){return 1===this.cmpn(t)};a.prototype.gt=function(t){return 1===this.cmp(t)};a.prototype.gten=function(t){return 0<=this.cmpn(t)};a.prototype.gte=function(t){return 0<=this.cmp(t)};a.prototype.ltn=function(t){return-1===this.cmpn(t)};a.prototype.lt=function(t){return-1===this.cmp(t)};a.prototype.lten=function(t){return 0>=this.cmpn(t)};a.prototype.lte=function(t){return 0>=this.cmp(t)};a.prototype.eqn=function(t){return 0===this.cmpn(t)};a.prototype.eq=function(t){return 0===
this.cmp(t)};a.red=function(t){return new u(t)};a.prototype.toRed=function(t){l(!this.red,"Already a number in reduction context");l(0===this.negative,"red works only with positives");return t.convertTo(this)._forceRed(t)};a.prototype.fromRed=function(){l(this.red,"fromRed works only with numbers in reduction context");return this.red.convertFrom(this)};a.prototype._forceRed=function(t){this.red=t;return this};a.prototype.forceRed=function(t){l(!this.red,"Already a number in reduction context");return this._forceRed(t)};
a.prototype.redAdd=function(t){l(this.red,"redAdd works only with red numbers");return this.red.add(this,t)};a.prototype.redIAdd=function(t){l(this.red,"redIAdd works only with red numbers");return this.red.iadd(this,t)};a.prototype.redSub=function(t){l(this.red,"redSub works only with red numbers");return this.red.sub(this,t)};a.prototype.redISub=function(t){l(this.red,"redISub works only with red numbers");return this.red.isub(this,t)};a.prototype.redShl=function(t){l(this.red,"redShl works only with red numbers");
return this.red.shl(this,t)};a.prototype.redMul=function(t){l(this.red,"redMul works only with red numbers");this.red._verify2(this,t);return this.red.mul(this,t)};a.prototype.redIMul=function(t){l(this.red,"redMul works only with red numbers");this.red._verify2(this,t);return this.red.imul(this,t)};a.prototype.redSqr=function(){l(this.red,"redSqr works only with red numbers");this.red._verify1(this);return this.red.sqr(this)};a.prototype.redISqr=function(){l(this.red,"redISqr works only with red numbers");
this.red._verify1(this);return this.red.isqr(this)};a.prototype.redSqrt=function(){l(this.red,"redSqrt works only with red numbers");this.red._verify1(this);return this.red.sqrt(this)};a.prototype.redInvm=function(){l(this.red,"redInvm works only with red numbers");this.red._verify1(this);return this.red.invm(this)};a.prototype.redNeg=function(){l(this.red,"redNeg works only with red numbers");this.red._verify1(this);return this.red.neg(this)};a.prototype.redPow=function(t){l(this.red&&!t.red,"redPow(normalNum)");
this.red._verify1(this);return this.red.pow(this,t)};var A={k256:null,p224:null,p192:null,p25519:null};c.prototype._tmp=function(){var t=new a(null);t.words=Array(Math.ceil(this.n/13));return t};c.prototype.ireduce=function(t){do{this.split(t,this.tmp);t=this.imulK(t);t=t.iadd(this.tmp);var B=t.bitLength()}while(B>this.n);B=B<this.n?-1:t.ucmp(this.p);0===B?(t.words[0]=0,t.length=1):0<B?t.isub(this.p):t.strip();return t};c.prototype.split=function(t,B){t.iushrn(this.n,0,B)};c.prototype.imulK=function(t){return t.imul(this.k)};
h(d,c);d.prototype.split=function(t,B){for(var F=Math.min(t.length,9),I=0;I<F;I++)B.words[I]=t.words[I];B.length=F;if(9>=t.length)t.words[0]=0,t.length=1;else{F=t.words[9];B.words[B.length++]=F&4194303;for(I=10;I<t.length;I++)B=t.words[I]|0,t.words[I-10]=(B&4194303)<<4|F>>>22,F=B;F>>>=22;t.words[I-10]=F;t.length=0===F&&10<t.length?t.length-10:t.length-9}};d.prototype.imulK=function(t){t.words[t.length]=0;t.words[t.length+1]=0;t.length+=2;for(var B=0,F=0;F<t.length;F++){var I=t.words[F]|0;B+=977*I;
t.words[F]=B&67108863;B=64*I+(B/67108864|0)}0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--);return t};h(f,c);h(k,c);h(r,c);r.prototype.imulK=function(t){for(var B=0,F=0;F<t.length;F++){B=19*(t.words[F]|0)+B;var I=B&67108863;B>>>=26;t.words[F]=I}0!==B&&(t.words[t.length++]=B);return t};a._prime=function(t){if(A[t])return A[t];if("k256"===t)var B=new d;else if("p224"===t)B=new f;else if("p192"===t)B=new k;else if("p25519"===t)B=new r;else throw Error("Unknown prime "+t);return A[t]=
B};u.prototype._verify1=function(t){l(0===t.negative,"red works only with positives");l(t.red,"red works only with red numbers")};u.prototype._verify2=function(t,B){l(0===(t.negative|B.negative),"red works only with positives");l(t.red&&t.red===B.red,"red works only with red numbers")};u.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)};u.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)};u.prototype.add=
function(t,B){this._verify2(t,B);t=t.add(B);0<=t.cmp(this.m)&&t.isub(this.m);return t._forceRed(this)};u.prototype.iadd=function(t,B){this._verify2(t,B);t=t.iadd(B);0<=t.cmp(this.m)&&t.isub(this.m);return t};u.prototype.sub=function(t,B){this._verify2(t,B);t=t.sub(B);0>t.cmpn(0)&&t.iadd(this.m);return t._forceRed(this)};u.prototype.isub=function(t,B){this._verify2(t,B);t=t.isub(B);0>t.cmpn(0)&&t.iadd(this.m);return t};u.prototype.shl=function(t,B){this._verify1(t);return this.imod(t.ushln(B))};u.prototype.imul=
function(t,B){this._verify2(t,B);return this.imod(t.imul(B))};u.prototype.mul=function(t,B){this._verify2(t,B);return this.imod(t.mul(B))};u.prototype.isqr=function(t){return this.imul(t,t.clone())};u.prototype.sqr=function(t){return this.mul(t,t)};u.prototype.sqrt=function(t){if(t.isZero())return t.clone();var B=this.m.andln(3);l(1===B%2);if(3===B)return B=this.m.add(new a(1)).iushrn(2),this.pow(t,B);for(var F=this.m.subn(1),I=0;!F.isZero()&&0===F.andln(1);)I++,F.iushrn(1);l(!F.isZero());B=(new a(1)).toRed(this);
var J=B.redNeg(),L=this.m.subn(1).iushrn(1),H=this.m.bitLength();for(H=(new a(2*H*H)).toRed(this);0!==this.pow(H,L).cmp(J);)H.redIAdd(J);L=this.pow(H,F);J=this.pow(t,F.addn(1).iushrn(1));t=this.pow(t,F);for(F=I;0!==t.cmp(B);){H=t;for(I=0;0!==H.cmp(B);I++)H=H.redSqr();l(I<F);L=this.pow(L,(new a(1)).iushln(F-I-1));J=J.redMul(L);L=L.redSqr();t=t.redMul(L);F=I}return J};u.prototype.invm=function(t){t=t._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)};u.prototype.pow=
function(t,B){if(B.isZero())return(new a(1)).toRed(this);if(0===B.cmpn(1))return t.clone();var F=Array(16);F[0]=(new a(1)).toRed(this);F[1]=t;for(var I=2;I<F.length;I++)F[I]=this.mul(F[I-1],t);t=F[0];var J=0,L=0,H=B.bitLength()%26;0===H&&(H=26);for(I=B.length-1;0<=I;I--){var P=B.words[I];for(--H;0<=H;H--){var M=P>>H&1;t!==F[0]&&(t=this.sqr(t));if(0===M&&0===J)L=0;else if(J<<=1,J|=M,L++,4===L||0===I&&0===H)t=this.mul(t,F[J]),J=L=0}H=26}return t};u.prototype.convertTo=function(t){var B=t.umod(this.m);
return B===t?B.clone():B};u.prototype.convertFrom=function(t){t=t.clone();t.red=null;return t};a.mont=function(t){return new v(t)};h(v,u);v.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))};v.prototype.convertFrom=function(t){t=this.imod(t.mul(this.rinv));t.red=null;return t};v.prototype.imul=function(t,B){if(t.isZero()||B.isZero())return t.words[0]=0,t.length=1,t;t=t.imul(B);B=t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);B=t=t.isub(B).iushrn(this.shift);
0<=t.cmp(this.m)?B=t.isub(this.m):0>t.cmpn(0)&&(B=t.iadd(this.m));return B._forceRed(this)};v.prototype.mul=function(t,B){if(t.isZero()||B.isZero())return(new a(0))._forceRed(this);t=t.mul(B);B=t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);B=t=t.isub(B).iushrn(this.shift);0<=t.cmp(this.m)?B=t.isub(this.m):0>t.cmpn(0)&&(B=t.iadd(this.m));return B._forceRed(this)};v.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}})("undefined"===typeof K||
K,this)},{buffer:108}],100:[function(b,K,G){K.exports=function(q){var m,l,h,a=q.length;for(m=l=0;m<a;++m)l+=q[m].length;var g=Array(l),e=0;for(m=0;m<a;++m){var n=q[m],p=n.length;for(l=0;l<p;++l){var c=g[e++]=Array(p-1),d=0;for(h=0;h<p;++h)h!==l&&(c[d++]=n[h]);l&1&&(h=c[1],c[1]=c[0],c[0]=h)}}return g}},{}],101:[function(b,K,G){function q(n,p,c,d){for(var f=0,k=0,r=0,u=n.length;r<u;++r){var v=n[r],x;a:{for(x=0;x<p;++x)if(!(v[x]<=v[x+p])){x=!0;break a}x=!1}if(!x){for(x=0;x<2*p;++x)c[f++]=v[x];d[k++]=
r}}return k}function m(n,p,c,d){var f=n.length,k=p.length;if(!(0>=f||0>=k)){var r=n[0].length>>>1;if(!(0>=r)){var u=h.mallocDouble(2*r*f),v=h.mallocInt32(f);f=q(n,r,u,v);if(0<f){if(1===r&&d){a.init(f);var x=a.sweepComplete(r,c,0,f,u,v,0,f,u,v)}else{n=h.mallocDouble(2*r*k);var C=h.mallocInt32(k);k=q(p,r,n,C);0<k&&(a.init(f+k),x=1===r?a.sweepBipartite(r,c,0,f,u,v,0,k,n,C):g(r,c,d,f,u,v,k,n,C),h.free(n),h.free(C))}h.free(u);h.free(v)}return x}}}function l(n,p){e.push([n,p])}K.exports=function(n,p,c){switch(arguments.length){case 1:return e=
[],m(n,n,l,!0),e;case 2:if("function"===typeof p)return m(n,n,p,!0);e=[];m(n,p,l,!1);return e;case 3:return m(n,p,c,!1);default:throw Error("box-intersect: Invalid arguments");}};var h=b("typedarray-pool"),a=b("./lib/sweep"),g=b("./lib/intersect"),e},{"./lib/intersect":103,"./lib/sweep":107,"typedarray-pool":595}],102:[function(b,K,G){function q(l){function h(p,c){var d="bruteForce"+(p?"Red":"Blue")+(c?"Flip":"")+(l?"Full":""),f=["function ",d,"(",m.join(),"){","var ","es","=2*","d",";"],k="for(var j=bs,bp=es*bs;j<be;++j,bp+=es){var y0=bb[ax+bp],"+
(l?"y1=bb[ax+bp+d],":"")+"yi=bi[j];";p?f.push("for(var i=rs,rp=es*rs;i<re;++i,rp+=es){var x0=rb[ax+rp],x1=rb[ax+rp+d],xi=ri[i];","Q",":",k):f.push(k,"Q",":","for(var i=rs,rp=es*rs;i<re;++i,rp+=es){var x0=rb[ax+rp],x1=rb[ax+rp+d],xi=ri[i];");l?f.push("if(y1<x0||x1<y0)continue;"):c?f.push("if(y0<=x0||x1<y0)continue;"):f.push("if(y0<x0||x1<y0)continue;");f.push("for(var k=ax+1;k<d;++k){var r0=rb[k+rp],r1=rb[k+d+rp],b0=bb[k+bp],b1=bb[k+d+bp];if(r1<b0||b1<r0)continue Q;}var rv=vv(");c?f.push("yi,xi"):
f.push("xi,yi");f.push(");if(rv!==void 0)return rv;}}}");p=f.join("");g.push(p);n.push("return "+d+"("+m.join()+");")}var a="bruteForce"+(l?"Full":"Partial"),g=[],e=m.slice();l||e.splice(3,0,"fp");var n=["function "+a+"("+e.join()+"){"];n.push("if(re-rs>be-bs){");l?(h(!0,!1),n.push("}else{"),h(!1,!1)):(n.push("if(fp){"),h(!0,!0),n.push("}else{"),h(!0,!1),n.push("}}else{if(fp){"),h(!1,!0),n.push("}else{"),h(!1,!1),n.push("}"));n.push("}}return "+a);a=g.join("")+n.join("");return(new Function(a))()}
var m="d ax vv rs re rb ri bs be bb bi".split(" ");G.partial=q(!1);G.full=q(!0)},{}],103:[function(b,K,G){function q(D,A,t,B,F,I,J,L,H){var P=x*D;z[P]=A;z[P+1]=t;z[P+2]=B;z[P+3]=F;z[P+4]=I;z[P+5]=J;D*=C;y[D]=L;y[D+1]=H}K.exports=function(D,A,t,B,F,I,J,L,H){var P=8*l.log2(B+J+1)*(D+1)|0,M=l.nextPow2(x*P);z.length<M&&(m.free(z),z=m.mallocInt32(M));P=l.nextPow2(C*P);y.length<P&&(m.free(y),y=m.mallocDouble(P));P=0;M=2*D;q(P++,0,0,B,0,J,t?16:0,-Infinity,Infinity);for(t||q(P++,0,0,J,0,B,1,-Infinity,Infinity);0<
P;){--P;t=P*x;var N=z[t];J=z[t+1];var T=z[t+2],Q=z[t+3],U=z[t+4];t=z[t+5];B=P*C;var S=y[B],X=y[B+1],Z=t&1,aa=!!(t&16),fa=F,ha=I,ja=L;B=H;Z&&(fa=L,ha=H,ja=F,B=I);if(t&2&&(T=k(D,N,J,T,fa,ha,X),J>=T))continue;if(t&4&&(J=r(D,N,J,T,fa,ha,S),J>=T))continue;t=T-J;var ba=U-Q;if(aa){if(D*t*(t+ba)<c){var ma=g.scanComplete(D,N,A,J,T,fa,ha,Q,U,ja,B);if(void 0!==ma)return ma;continue}}else if(D*Math.min(t,ba)<n){ma=h(D,N,A,Z,J,T,fa,ha,Q,U,ja,B);if(void 0!==ma)return ma;continue}else if(D*t*ba<p){ma=g.scanBipartite(D,
N,A,Z,J,T,fa,ha,Q,U,ja,B);if(void 0!==ma)return ma;continue}t=d(D,N,J,T,fa,ha,S,X);if(J<t)if(D*(t-J)<n){if(ma=a(D,N+1,A,J,t,fa,ha,Q,U,ja,B),void 0!==ma)return ma}else if(N===D-2){if(ma=Z?g.sweepBipartite(D,A,Q,U,ja,B,J,t,fa,ha):g.sweepBipartite(D,A,J,t,fa,ha,Q,U,ja,B),void 0!==ma)return ma}else q(P++,N+1,J,t,Q,U,Z,-Infinity,Infinity),q(P++,N+1,Q,U,J,t,Z^1,-Infinity,Infinity);if(t<T)if(J=e(D,N,Q,U,ja,B),ma=ja[M*J+N],ba=f(D,N,J,U,ja,B,ma),ba<U&&q(P++,N,t,T,ba,U,(Z|4)+(aa?16:0),ma,X),Q<J&&q(P++,N,t,
T,Q,J,(Z|2)+(aa?16:0),S,ma),J+1===ba){if(aa)a:{Q=D;U=A;B=B[J];Z=2*Q;J*=Z;S=ja[J+N];X=t;t*=Z;b:for(;X<T;++X,t+=Z)if(aa=ha[X],aa!==B&&(ba=fa[t+N],ma=fa[t+N+Q],!(S<ba||ma<S))){for(var qa=N+1;qa<Q;++qa){ba=fa[t+qa];ma=fa[t+qa+Q];var ka=ja[J+qa+Q];if(ma<ja[J+qa]||ka<ba)continue b}aa=U(aa,B);if(void 0!==aa){ma=aa;break a}}ma=void 0}else a:{Q=D;U=A;B=B[J];S=2*Q;J*=S;X=ja[J+N];aa=t;t*=S;b:for(;aa<T;++aa,t+=S)if(ba=fa[t+N],ma=fa[t+N+Q],!(X<ba||ma<X||Z&&X===ba)){qa=ha[aa];for(ka=N+1;ka<Q;++ka){ba=fa[t+ka];
ma=fa[t+ka+Q];var oa=ja[J+ka+Q];if(ma<ja[J+ka]||oa<ba)continue b}ba=Z?U(B,qa):U(qa,B);if(void 0!==ba){ma=ba;break a}}ma=void 0}if(void 0!==ma)return ma}else if(J<ba)if(aa){if(T=u(D,N,t,T,fa,ha,ma),t<T)if(Q=f(D,N,t,T,fa,ha,ma),N===D-2){if(t<Q&&(ma=g.sweepComplete(D,A,t,Q,fa,ha,J,ba,ja,B),void 0!==ma)||Q<T&&(ma=g.sweepBipartite(D,A,Q,T,fa,ha,J,ba,ja,B),void 0!==ma))return ma}else t<Q&&q(P++,N+1,t,Q,J,ba,16,-Infinity,Infinity),Q<T&&(q(P++,N+1,Q,T,J,ba,0,-Infinity,Infinity),q(P++,N+1,J,ba,Q,T,1,-Infinity,
Infinity))}else T=Z?v(D,N,t,T,fa,ha,ma):u(D,N,t,T,fa,ha,ma),t<T&&(N===D-2?Z?g.sweepBipartite(D,A,J,ba,ja,B,t,T,fa,ha):g.sweepBipartite(D,A,t,T,fa,ha,J,ba,ja,B):(q(P++,N+1,t,T,J,ba,Z,-Infinity,Infinity),q(P++,N+1,J,ba,t,T,Z^1,-Infinity,Infinity)))}};var m=b("typedarray-pool"),l=b("bit-twiddle");K=b("./brute");var h=K.partial,a=K.full,g=b("./sweep"),e=b("./median");b=b("./partition");var n=128,p=4194304,c=4194304,d=b("!(lo>=p0)&&!(p1>=hi)",["p0","p1"]),f=b("lo===p0",["p0"]),k=b("lo<p0",["p0"]),r=b("hi<=p0",
["p0"]),u=b("lo<=p0&&p0<=hi",["p0"]),v=b("lo<p0&&p0<=hi",["p0"]),x=6,C=2,z=m.mallocInt32(1024),y=m.mallocDouble(1024)},{"./brute":102,"./median":104,"./partition":105,"./sweep":107,"bit-twiddle":97,"typedarray-pool":595}],104:[function(b,K,G){K.exports=function(l,h,a,g,e,n){if(g<=a+1)return a;var p=a,c=g;g=g+a>>>1;for(var d=2*l,f,k;p<c;){if(c-p<m){f=h;k=e;for(var r=n,u=2*l,v=u*(p+1)+f,x=p+1;x<c;++x,v+=u)for(var C=k[v],z=x,y=u*(x-1);z>p&&k[y+f]>C;--z,y-=u){for(var D=y,A=y+u,t=0;t<u;++t,++D,++A){var B=
k[D];k[D]=k[A];k[A]=B}D=r[z];r[z]=r[z-1];r[z-1]=D}break}v=c-p;f=Math.random()*v+p|0;k=e[d*f+h];u=Math.random()*v+p|0;r=e[d*u+h];x=Math.random()*v+p|0;v=e[d*x+h];k<=r?v>=r?(f=u,k=r):k>=v||(f=x,k=v):r>=v?(f=u,k=r):v>=k||(f=x,k=v);r=d*(c-1);u=d*f;for(v=0;v<d;++v,++r,++u)x=e[r],e[r]=e[u],e[u]=x;r=n[c-1];n[c-1]=n[f];n[f]=r;f=q(l,h,p,c-1,e,n,k);r=d*(c-1);u=d*f;for(v=0;v<d;++v,++r,++u)x=e[r],e[r]=e[u],e[u]=x;r=n[c-1];n[c-1]=n[f];n[f]=r;if(g<f){for(c=f-1;p<c&&e[d*(c-1)+h]===k;)--c;c+=1}else if(f<g)for(p=
f+1;p<c&&e[d*p+h]===k;)p+=1;else break}return q(l,h,a,g,e,n,e[d*g+h])};var q=b("./partition")("lo<p0",["p0"]),m=8},{"./partition":105}],105:[function(b,K,G){K.exports=function(m,l){l="abcdef".split("").concat(l);var h=[];0<=m.indexOf("lo")&&h.push("lo=e[k+n]");0<=m.indexOf("hi")&&h.push("hi=e[k+o]");l.push(q.replace("_",h.join()).replace("$",m));return Function.apply(void 0,l)};var q="for(var j=2*a,k=j*c,l=k,m=c,n=b,o=a+b,p=c;d>p;++p,k+=j){var _;if($)if(m===p)m+=1,l+=j;else{for(var s=0;j>s;++s){var t=e[k+s];e[k+s]=e[l],e[l++]=t}var u=f[p];f[p]=f[m],f[m++]=u}}return m"},
{}],106:[function(b,K,G){function q(p,c,d){for(var f=2*(p+1),k=p+1;k<=c;++k){for(var r=d[f++],u=d[f++],v=k,x=f-2;v-- >p;){var C=d[x-2],z=d[x-1];if(C<r)break;else if(C===r&&z<u)break;d[x]=C;d[x+1]=z;x-=2}d[x]=r;d[x+1]=u}}function m(p,c,d){p*=2;c*=2;var f=d[p],k=d[p+1];d[p]=d[c];d[p+1]=d[c+1];d[c]=f;d[c+1]=k}function l(p,c,d){p*=2;c*=2;d[p]=d[c];d[p+1]=d[c+1]}function h(p,c,d,f,k){p*=2;c*=2;k[p]=k[c];k[c]=d;k[p+1]=k[c+1];k[c+1]=f}function a(p,c,d){p*=2;c*=2;var f=d[p],k=d[c];return f<k?!1:f===k?d[p+
1]>d[c+1]:!0}function g(p,c,d,f){p*=2;var k=f[p];return k<c?!0:k===c?f[p+1]<d:!1}function e(p,c,d){var f=(c-p+1)/6|0,k=p+f,r=c-f,u=p+c>>1,v=u-f,x=u+f,C=k,z=v,y=u,D=x,A=r;f=p+1;var t=c-1;if(a(C,z,d)){var B=C;C=z;z=B}a(D,A,d)&&(B=D,D=A,A=B);a(C,y,d)&&(B=C,C=y,y=B);a(z,y,d)&&(B=z,z=y,y=B);a(C,D,d)&&(B=C,C=D,D=B);a(y,D,d)&&(B=y,y=D,D=B);a(z,A,d)&&(B=z,z=A,A=B);a(z,y,d)&&(B=z,z=y,y=B);a(D,A,d)&&(B=D,D=A,A=B);B=d[2*z];z=d[2*z+1];var F=d[2*D];D=d[2*D+1];C*=2;y*=2;A*=2;k*=2;u*=2;r*=2;for(var I=0;2>I;++I){var J=
d[y+I],L=d[A+I];d[k+I]=d[C+I];d[u+I]=J;d[r+I]=L}l(v,p,d);l(x,c,d);for(v=f;v<=t;++v)if(g(v,B,z,d))v!==f&&m(v,f,d),++f;else if(!g(v,F,D,d))for(;;)if(g(t,F,D,d)){g(t,B,z,d)?(x=v,r=f,u=t,C=d,x*=2,r*=2,u*=2,k=C[x],y=C[x+1],C[x]=C[r],C[x+1]=C[r+1],C[r]=C[u],C[r+1]=C[u+1],C[u]=k,C[u+1]=y,++f):m(v,t,d);--t;break}else if(--t<v)break;h(p,f-1,B,z,d);h(c,t+1,F,D,d);f-2-p<=n?q(p,f-2,d):e(p,f-2,d);c-(t+2)<=n?q(t+2,c,d):e(t+2,c,d);t-f<=n?q(f,t,d):e(f,t,d)}K.exports=function(p,c){c<=4*n?q(0,c-1,p):e(0,c-1,p)};var n=
32},{}],107:[function(b,K,G){function q(k,r,u,v){v=r[v];u=k[u-1];k[v]=u;r[u]=v}K.exports={init:function(k){k=l.nextPow2(k);g.length<k&&(m.free(g),g=m.mallocInt32(k));e.length<k&&(m.free(e),e=m.mallocInt32(k));n.length<k&&(m.free(n),n=m.mallocInt32(k));p.length<k&&(m.free(p),p=m.mallocInt32(k));c.length<k&&(m.free(c),c=m.mallocInt32(k));d.length<k&&(m.free(d),d=m.mallocInt32(k));k*=8;f.length<k&&(m.free(f),f=m.mallocDouble(k))},sweepBipartite:function(k,r,u,v,x,C,z,y,D,A){var t=0,B=2*k;--k;for(var F=
B-1;u<v;++u){var I=C[u],J=B*u;f[t++]=x[J+k];f[t++]=-(I+1);f[t++]=x[J+F];f[t++]=I}for(u=z;u<y;++u)I=A[u]+a,v=B*u,f[t++]=D[v+k],f[t++]=-I,f[t++]=D[v+F],f[t++]=I;y=t>>>1;h(f,y);for(u=A=D=0;u<y;++u)if(t=f[2*u+1]|0,t>=a)t=t-a|0,q(n,p,A--,t);else if(0<=t)q(g,e,D--,t);else if(t<=-a){t=-t-a|0;for(B=0;B<D;++B)if(v=r(g[B],t),void 0!==v)return v;B=p;v=A++;n[v]=t;B[t]=v}else{t=-t-1|0;for(B=0;B<A;++B)if(v=r(t,n[B]),void 0!==v)return v;B=e;v=D++;g[v]=t;B[t]=v}},sweepComplete:function(k,r,u,v,x,C,z,y,D,A){var t=
0,B=2*k;--k;for(var F=B-1;u<v;++u){var I=C[u]+1<<1,J=B*u;f[t++]=x[J+k];f[t++]=-I;f[t++]=x[J+F];f[t++]=I}for(u=z;u<y;++u)I=A[u]+1<<1,v=B*u,f[t++]=D[v+k],f[t++]=-I|1,f[t++]=D[v+F],f[t++]=I|1;y=t>>>1;h(f,y);for(u=t=A=D=0;u<y;++u)if(B=f[2*u+1]|0,v=B&1,u<y-1&&B>>1===f[2*u+3]>>1&&(v=2,u+=1),0>B){B=-(B>>1)-1;for(x=0;x<t;++x)if(C=r(c[x],B),void 0!==C)return C;if(0!==v)for(x=0;x<D;++x)if(C=r(g[x],B),void 0!==C)return C;if(1!==v)for(x=0;x<A;++x)if(C=r(n[x],B),void 0!==C)return C;0===v?(v=e,x=D++,g[x]=B,v[B]=
x):1===v?(v=p,x=A++,n[x]=B,v[B]=x):2===v&&(v=d,x=t++,c[x]=B,v[B]=x)}else B=(B>>1)-1,0===v?q(g,e,D--,B):1===v?q(n,p,A--,B):2===v&&q(c,d,t--,B)},scanBipartite:function(k,r,u,v,x,C,z,y,D,A,t,B){var F=0,I=2*k,J=r+k,L=1,H=1;for(v?H=a:L=a;x<C;++x){var P=x+L,M=I*x;f[F++]=z[M+r];f[F++]=-P;f[F++]=z[M+J];f[F++]=P}for(x=D;x<A;++x)P=x+H,C=I*x,f[F++]=t[C+r],f[F++]=-P;A=F>>>1;h(f,A);for(x=F=0;x<A;++x)if(P=f[2*x+1]|0,0>P)if(P=-P,P>=a?(H=!v,P-=a):(H=!!v,--P),H)H=e,C=F++,g[C]=P,H[P]=C;else a:for(H=B[P],P*=I,C=t[P+
r+1],D=t[P+r+1+k],J=0;J<F;++J){M=g[J];var N=I*M;if(!(D<z[N+r+1]||z[N+r+1+k]<C)){for(var T=r+2;T<k;++T)if(t[P+T+k]<z[N+T]||z[N+T+k]<t[P+T])continue a;M=y[M];M=v?u(H,M):u(M,H);if(void 0!==M)return M}}else q(g,e,F--,P-L)},scanComplete:function(k,r,u,v,x,C,z,y,D,A,t){for(var B=0,F=2*k,I=r+k;v<x;++v){var J=v+a,L=F*v;f[B++]=C[L+r];f[B++]=-J;f[B++]=C[L+I];f[B++]=J}for(v=y;v<D;++v)J=v+1,x=F*v,f[B++]=A[x+r],f[B++]=-J;D=B>>>1;h(f,D);for(v=B=0;v<D;++v)if(x=f[2*v+1]|0,0>x)if(J=-x,J>=a)g[B++]=J-a;else a:for(--J,
x=t[J],J*=F,I=A[J+r+1],L=A[J+r+1+k],y=0;y<B;++y){var H=g[y],P=z[H];if(P===x)break;H*=F;if(!(L<C[H+r+1]||C[H+r+1+k]<I)){for(var M=r+2;M<k;++M)if(A[J+M+k]<C[H+M]||C[H+M+k]<A[J+M])continue a;P=u(P,x);if(void 0!==P)return P}}else{J=x-a;for(y=B-1;0<=y;--y)if(g[y]===J){for(M=y+1;M<B;++M)g[M-1]=g[M];break}--B}}};var m=b("typedarray-pool"),l=b("bit-twiddle"),h=b("./sort"),a=268435456,g=m.mallocInt32(1024),e=m.mallocInt32(1024),n=m.mallocInt32(1024),p=m.mallocInt32(1024),c=m.mallocInt32(1024),d=m.mallocInt32(1024),
f=m.mallocDouble(8192)},{"./sort":106,"bit-twiddle":97,"typedarray-pool":595}],108:[function(b,K,G){},{}],109:[function(b,K,G){arguments[4][108][0].apply(G,arguments)},{dup:108}],110:[function(b,K,G){function q(){q.init.call(this)}function m(k){if("function"!==typeof k)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof k);}function l(k,r,u,v){m(u);var x=k._events;if(void 0===x)x=k._events=Object.create(null),k._eventsCount=0;else{void 0!==x.newListener&&
(k.emit("newListener",r,u.listener?u.listener:u),x=k._events);var C=x[r]}void 0===C?(x[r]=u,++k._eventsCount):("function"===typeof C?C=x[r]=v?[u,C]:[C,u]:v?C.unshift(u):C.push(u),u=void 0===k._maxListeners?q.defaultMaxListeners:k._maxListeners,0<u&&C.length>u&&!C.warned&&(C.warned=!0,u=Error("Possible EventEmitter memory leak detected. "+C.length+" "+String(r)+" listeners added. Use emitter.setMaxListeners() to increase limit"),u.name="MaxListenersExceededWarning",u.emitter=k,u.type=r,u.count=C.length,
console&&console.warn&&console.warn(u)));return k}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function a(k,r,u){k={fired:!1,wrapFn:void 0,target:k,type:r,listener:u};r=h.bind(k);r.listener=u;return k.wrapFn=r}function g(k,r,u){k=k._events;if(void 0===k)return[];r=k[r];if(void 0===r)return[];if("function"===typeof r)return u?[r.listener||r]:[r];if(u)for(u=
Array(r.length),k=0;k<u.length;++k)u[k]=r[k].listener||r[k];else u=n(r,r.length);return u}function e(k){var r=this._events;if(void 0!==r){k=r[k];if("function"===typeof k)return 1;if(void 0!==k)return k.length}return 0}function n(k,r){for(var u=Array(r),v=0;v<r;++v)u[v]=k[v];return u}var p=(b="object"===typeof Reflect?Reflect:null)&&"function"===typeof b.apply?b.apply:function(k,r,u){return Function.prototype.apply.call(k,r,u)};var c=b&&"function"===typeof b.ownKeys?b.ownKeys:Object.getOwnPropertySymbols?
function(k){return Object.getOwnPropertyNames(k).concat(Object.getOwnPropertySymbols(k))}:function(k){return Object.getOwnPropertyNames(k)};var d=Number.isNaN||function(k){return k!==k};K.exports=q;K.exports.once=function(k,r){return new Promise(function(u,v){function x(){void 0!==C&&k.removeListener("error",C);u([].slice.call(arguments))}if("error"!==r){var C=function(z){k.removeListener(r,x);v(z)};k.once("error",C)}k.once(r,x)})};q.EventEmitter=q;q.prototype._events=void 0;q.prototype._eventsCount=
0;q.prototype._maxListeners=void 0;var f=10;Object.defineProperty(q,"defaultMaxListeners",{enumerable:!0,get:function(){return f},set:function(k){if("number"!==typeof k||0>k||d(k))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+k+".");f=k}});q.init=function(){if(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)this._events=Object.create(null),this._eventsCount=0;this._maxListeners=this._maxListeners||void 0};
q.prototype.setMaxListeners=function(k){if("number"!==typeof k||0>k||d(k))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+k+".");this._maxListeners=k;return this};q.prototype.getMaxListeners=function(){return void 0===this._maxListeners?q.defaultMaxListeners:this._maxListeners};q.prototype.emit=function(k){for(var r=[],u=1;u<arguments.length;u++)r.push(arguments[u]);u="error"===k;var v=this._events;if(void 0!==v)u=u&&void 0===v.error;else if(!u)return!1;
if(u){var x;0<r.length&&(x=r[0]);if(x instanceof Error)throw x;r=Error("Unhandled error."+(x?" ("+x.message+")":""));r.context=x;throw r;}u=v[k];if(void 0===u)return!1;if("function"===typeof u)p(u,this,r);else for(x=u.length,v=n(u,x),u=0;u<x;++u)p(v[u],this,r);return!0};q.prototype.addListener=function(k,r){return l(this,k,r,!1)};q.prototype.on=q.prototype.addListener;q.prototype.prependListener=function(k,r){return l(this,k,r,!0)};q.prototype.once=function(k,r){m(r);this.on(k,a(this,k,r));return this};
q.prototype.prependOnceListener=function(k,r){m(r);this.prependListener(k,a(this,k,r));return this};q.prototype.removeListener=function(k,r){var u;m(r);var v=this._events;if(void 0===v)return this;var x=v[k];if(void 0===x)return this;if(x===r||x.listener===r)0===--this._eventsCount?this._events=Object.create(null):(delete v[k],v.removeListener&&this.emit("removeListener",k,x.listener||r));else if("function"!==typeof x){var C=-1;for(u=x.length-1;0<=u;u--)if(x[u]===r||x[u].listener===r){var z=x[u].listener;
C=u;break}if(0>C)return this;if(0===C)x.shift();else{for(;C+1<x.length;C++)x[C]=x[C+1];x.pop()}1===x.length&&(v[k]=x[0]);void 0!==v.removeListener&&this.emit("removeListener",k,z||r)}return this};q.prototype.off=q.prototype.removeListener;q.prototype.removeAllListeners=function(k){var r=this._events;if(void 0===r)return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[k]&&(0===--this._eventsCount?this._events=Object.create(null):
delete r[k]),this;if(0===arguments.length){var u=Object.keys(r);for(r=0;r<u.length;++r){var v=u[r];"removeListener"!==v&&this.removeAllListeners(v)}this.removeAllListeners("removeListener");this._events=Object.create(null);this._eventsCount=0;return this}u=r[k];if("function"===typeof u)this.removeListener(k,u);else if(void 0!==u)for(r=u.length-1;0<=r;r--)this.removeListener(k,u[r]);return this};q.prototype.listeners=function(k){return g(this,k,!0)};q.prototype.rawListeners=function(k){return g(this,
k,!1)};q.listenerCount=function(k,r){return"function"===typeof k.listenerCount?k.listenerCount(r):e.call(k,r)};q.prototype.listenerCount=e;q.prototype.eventNames=function(){return 0<this._eventsCount?c(this._events):[]}},{}],111:[function(b,K,G){(function(q){(function(){function m(M){if(M>L)throw new RangeError('The value "'+M+'" is invalid for option "size"');M=new Uint8Array(M);M.__proto__=l.prototype;return M}function l(M,N,T){if("number"===typeof M){if("string"===typeof N)throw new TypeError('The "string" argument must be of type string. Received type number');
return g(M)}return h(M,N,T)}function h(M,N,T){if("string"===typeof M){var Q=N;if("string"!==typeof Q||""===Q)Q="utf8";if(!l.isEncoding(Q))throw new TypeError("Unknown encoding: "+Q);N=c(M,Q)|0;T=m(N);M=T.write(M,Q);M!==N&&(T=T.slice(0,M));return T}if(ArrayBuffer.isView(M))return e(M);if(null==M)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof M);if(F(M,ArrayBuffer)||M&&F(M.buffer,ArrayBuffer)){if(0>N||M.byteLength<
N)throw new RangeError('"offset" is outside of buffer bounds');if(M.byteLength<N+(T||0))throw new RangeError('"length" is outside of buffer bounds');M=void 0===N&&void 0===T?new Uint8Array(M):void 0===T?new Uint8Array(M,N):new Uint8Array(M,N,T);M.__proto__=l.prototype;return M}if("number"===typeof M)throw new TypeError('The "value" argument must not be of type number. Received type number');Q=M.valueOf&&M.valueOf();if(null!=Q&&Q!==M)return l.from(Q,N,T);if(Q=n(M))return Q;if("undefined"!==typeof Symbol&&
null!=Symbol.toPrimitive&&"function"===typeof M[Symbol.toPrimitive])return l.from(M[Symbol.toPrimitive]("string"),N,T);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof M);}function a(M){if("number"!==typeof M)throw new TypeError('"size" argument must be of type number');if(0>M)throw new RangeError('The value "'+M+'" is invalid for option "size"');}function g(M){a(M);return m(0>M?0:p(M)|0)}function e(M){for(var N=
0>M.length?0:p(M.length)|0,T=m(N),Q=0;Q<N;Q+=1)T[Q]=M[Q]&255;return T}function n(M){if(l.isBuffer(M)){var N=p(M.length)|0,T=m(N);if(0===T.length)return T;M.copy(T,0,0,N);return T}if(void 0!==M.length)return(N="number"!==typeof M.length)||(N=M.length,N=N!==N),N?m(0):e(M);if("Buffer"===M.type&&Array.isArray(M.data))return e(M.data)}function p(M){if(M>=L)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+L.toString(16)+" bytes");return M|0}function c(M,N){if(l.isBuffer(M))return M.length;
if(ArrayBuffer.isView(M)||F(M,ArrayBuffer))return M.byteLength;if("string"!==typeof M)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof M);var T=M.length,Q=2<arguments.length&&!0===arguments[2];if(!Q&&0===T)return 0;for(var U=!1;;)switch(N){case "ascii":case "latin1":case "binary":return T;case "utf8":case "utf-8":return D(M).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*T;case "hex":return T>>>1;case "base64":return t(M).length;
default:if(U)return Q?-1:D(M).length;N=(""+N).toLowerCase();U=!0}}function d(M,N,T){var Q=!1;if(void 0===N||0>N)N=0;if(N>this.length)return"";if(void 0===T||T>this.length)T=this.length;if(0>=T)return"";T>>>=0;N>>>=0;if(T<=N)return"";for(M||(M="utf8");;)switch(M){case "hex":M=N;N=T;T=this.length;if(!M||0>M)M=0;if(!N||0>N||N>T)N=T;Q="";for(T=M;T<N;++T)M=Q,Q=this[T],Q=16>Q?"0"+Q.toString(16):Q.toString(16),Q=M+Q;return Q;case "utf8":case "utf-8":return u(this,N,T);case "ascii":M="";for(T=Math.min(this.length,
T);N<T;++N)M+=String.fromCharCode(this[N]&127);return M;case "latin1":case "binary":M="";for(T=Math.min(this.length,T);N<T;++N)M+=String.fromCharCode(this[N]);return M;case "base64":return N=0===N&&T===this.length?I.fromByteArray(this):I.fromByteArray(this.slice(N,T)),N;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":N=this.slice(N,T);T="";for(M=0;M<N.length;M+=2)T+=String.fromCharCode(N[M]+256*N[M+1]);return T;default:if(Q)throw new TypeError("Unknown encoding: "+M);M=(M+"").toLowerCase();
Q=!0}}function f(M,N,T){var Q=M[N];M[N]=M[T];M[T]=Q}function k(M,N,T,Q,U){if(0===M.length)return-1;"string"===typeof T?(Q=T,T=0):2147483647<T?T=2147483647:-2147483648>T&&(T=-2147483648);T=+T;T!==T&&(T=U?0:M.length-1);0>T&&(T=M.length+T);if(T>=M.length){if(U)return-1;T=M.length-1}else if(0>T)if(U)T=0;else return-1;"string"===typeof N&&(N=l.from(N,Q));if(l.isBuffer(N))return 0===N.length?-1:r(M,N,T,Q,U);if("number"===typeof N)return N&=255,"function"===typeof Uint8Array.prototype.indexOf?U?Uint8Array.prototype.indexOf.call(M,
N,T):Uint8Array.prototype.lastIndexOf.call(M,N,T):r(M,[N],T,Q,U);throw new TypeError("val must be string, number or Buffer");}function r(M,N,T,Q,U){function S(fa,ha){return 1===X?fa[ha]:fa.readUInt16BE(ha*X)}var X=1,Z=M.length,aa=N.length;if(void 0!==Q&&(Q=String(Q).toLowerCase(),"ucs2"===Q||"ucs-2"===Q||"utf16le"===Q||"utf-16le"===Q)){if(2>M.length||2>N.length)return-1;X=2;Z/=2;aa/=2;T/=2}if(U)for(Q=-1;T<Z;T++)if(S(M,T)===S(N,-1===Q?0:T-Q)){if(-1===Q&&(Q=T),T-Q+1===aa)return Q*X}else-1!==Q&&(T-=
T-Q),Q=-1;else for(T+aa>Z&&(T=Z-aa);0<=T;T--){Z=!0;for(Q=0;Q<aa;Q++)if(S(M,T+Q)!==S(N,Q)){Z=!1;break}if(Z)return T}return-1}function u(M,N,T){T=Math.min(M.length,T);for(var Q=[];N<T;){var U=M[N],S=null,X=239<U?4:223<U?3:191<U?2:1;if(N+X<=T)switch(X){case 1:128>U&&(S=U);break;case 2:var Z=M[N+1];128===(Z&192)&&(U=(U&31)<<6|Z&63,127<U&&(S=U));break;case 3:Z=M[N+1];var aa=M[N+2];128===(Z&192)&&128===(aa&192)&&(U=(U&15)<<12|(Z&63)<<6|aa&63,2047<U&&(55296>U||57343<U)&&(S=U));break;case 4:Z=M[N+1];aa=M[N+
2];var fa=M[N+3];128===(Z&192)&&128===(aa&192)&&128===(fa&192)&&(U=(U&15)<<18|(Z&63)<<12|(aa&63)<<6|fa&63,65535<U&&1114112>U&&(S=U))}null===S?(S=65533,X=1):65535<S&&(S-=65536,Q.push(S>>>10&1023|55296),S=56320|S&1023);Q.push(S);N+=X}M=Q.length;if(M<=H)Q=String.fromCharCode.apply(String,Q);else{T="";for(N=0;N<M;)T+=String.fromCharCode.apply(String,Q.slice(N,N+=H));Q=T}return Q}function v(M,N,T){if(0!==M%1||0>M)throw new RangeError("offset is not uint");if(M+N>T)throw new RangeError("Trying to access beyond buffer length");
}function x(M,N,T,Q,U,S){if(!l.isBuffer(M))throw new TypeError('"buffer" argument must be a Buffer instance');if(N>U||N<S)throw new RangeError('"value" argument is out of bounds');if(T+Q>M.length)throw new RangeError("Index out of range");}function C(M,N,T,Q,U,S){if(T+Q>M.length)throw new RangeError("Index out of range");if(0>T)throw new RangeError("Index out of range");}function z(M,N,T,Q,U){N=+N;T>>>=0;U||C(M,N,T,4,3.4028234663852886E38,-3.4028234663852886E38);J.write(M,N,T,Q,23,4);return T+4}function y(M,
N,T,Q,U){N=+N;T>>>=0;U||C(M,N,T,8,1.7976931348623157E308,-1.7976931348623157E308);J.write(M,N,T,Q,52,8);return T+8}function D(M,N){N=N||Infinity;for(var T,Q=M.length,U=null,S=[],X=0;X<Q;++X){T=M.charCodeAt(X);if(55295<T&&57344>T){if(!U){if(56319<T){-1<(N-=3)&&S.push(239,191,189);continue}else if(X+1===Q){-1<(N-=3)&&S.push(239,191,189);continue}U=T;continue}if(56320>T){-1<(N-=3)&&S.push(239,191,189);U=T;continue}T=(U-55296<<10|T-56320)+65536}else U&&-1<(N-=3)&&S.push(239,191,189);U=null;if(128>T){if(0>
--N)break;S.push(T)}else if(2048>T){if(0>(N-=2))break;S.push(T>>6|192,T&63|128)}else if(65536>T){if(0>(N-=3))break;S.push(T>>12|224,T>>6&63|128,T&63|128)}else if(1114112>T){if(0>(N-=4))break;S.push(T>>18|240,T>>12&63|128,T>>6&63|128,T&63|128)}else throw Error("Invalid code point");}return S}function A(M){for(var N=[],T=0;T<M.length;++T)N.push(M.charCodeAt(T)&255);return N}function t(M){var N=I,T=N.toByteArray;M=M.split("=")[0];M=M.trim().replace(P,"");if(2>M.length)M="";else for(;0!==M.length%4;)M+=
"=";return T.call(N,M)}function B(M,N,T,Q){for(var U=0;U<Q&&!(U+T>=N.length||U>=M.length);++U)N[U+T]=M[U];return U}function F(M,N){return M instanceof N||null!=M&&null!=M.constructor&&null!=M.constructor.name&&M.constructor.name===N.name}var I=b("base64-js"),J=b("ieee754");G.Buffer=l;G.SlowBuffer=function(M){+M!=M&&(M=0);return l.alloc(+M)};G.INSPECT_MAX_BYTES=50;var L=2147483647;G.kMaxLength=L;l.TYPED_ARRAY_SUPPORT=function(){try{var M=new Uint8Array(1);M.__proto__={__proto__:Uint8Array.prototype,
foo:function(){return 42}};return 42===M.foo()}catch(N){return!1}}();l.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}});Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}});
"undefined"!==typeof Symbol&&null!=Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1});l.poolSize=8192;l.from=function(M,N,T){return h(M,N,T)};l.prototype.__proto__=Uint8Array.prototype;l.__proto__=Uint8Array;l.alloc=function(M,N,T){a(M);M=0>=M?m(M):void 0!==N?"string"===typeof T?m(M).fill(N,T):m(M).fill(N):m(M);return M};l.allocUnsafe=function(M){return g(M)};l.allocUnsafeSlow=function(M){return g(M)};l.isBuffer=function(M){return null!=
M&&!0===M._isBuffer&&M!==l.prototype};l.compare=function(M,N){F(M,Uint8Array)&&(M=l.from(M,M.offset,M.byteLength));F(N,Uint8Array)&&(N=l.from(N,N.offset,N.byteLength));if(!l.isBuffer(M)||!l.isBuffer(N))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(M===N)return 0;for(var T=M.length,Q=N.length,U=0,S=Math.min(T,Q);U<S;++U)if(M[U]!==N[U]){T=M[U];Q=N[U];break}return T<Q?-1:Q<T?1:0};l.isEncoding=function(M){switch(String(M).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;
default:return!1}};l.concat=function(M,N){if(!Array.isArray(M))throw new TypeError('"list" argument must be an Array of Buffers');if(0===M.length)return l.alloc(0);var T;if(void 0===N)for(T=N=0;T<M.length;++T)N+=M[T].length;N=l.allocUnsafe(N);var Q=0;for(T=0;T<M.length;++T){var U=M[T];F(U,Uint8Array)&&(U=l.from(U));if(!l.isBuffer(U))throw new TypeError('"list" argument must be an Array of Buffers');U.copy(N,Q);Q+=U.length}return N};l.byteLength=c;l.prototype._isBuffer=!0;l.prototype.swap16=function(){var M=
this.length;if(0!==M%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var N=0;N<M;N+=2)f(this,N,N+1);return this};l.prototype.swap32=function(){var M=this.length;if(0!==M%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var N=0;N<M;N+=4)f(this,N,N+3),f(this,N+1,N+2);return this};l.prototype.swap64=function(){var M=this.length;if(0!==M%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var N=0;N<M;N+=8)f(this,N,N+7),f(this,N+1,N+6),
f(this,N+2,N+5),f(this,N+3,N+4);return this};l.prototype.toString=function(){var M=this.length;return 0===M?"":0===arguments.length?u(this,0,M):d.apply(this,arguments)};l.prototype.toLocaleString=l.prototype.toString;l.prototype.equals=function(M){if(!l.isBuffer(M))throw new TypeError("Argument must be a Buffer");return this===M?!0:0===l.compare(this,M)};l.prototype.inspect=function(){var M=G.INSPECT_MAX_BYTES;var N=this.toString("hex",0,M).replace(/(.{2})/g,"$1 ").trim();this.length>M&&(N+=" ... ");
return"<Buffer "+N+">"};l.prototype.compare=function(M,N,T,Q,U){F(M,Uint8Array)&&(M=l.from(M,M.offset,M.byteLength));if(!l.isBuffer(M))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof M);void 0===N&&(N=0);void 0===T&&(T=M?M.length:0);void 0===Q&&(Q=0);void 0===U&&(U=this.length);if(0>N||T>M.length||0>Q||U>this.length)throw new RangeError("out of range index");if(Q>=U&&N>=T)return 0;if(Q>=U)return-1;if(N>=T)return 1;N>>>=0;T>>>=0;Q>>>=0;U>>>=
0;if(this===M)return 0;var S=U-Q,X=T-N,Z=Math.min(S,X);Q=this.slice(Q,U);M=M.slice(N,T);for(N=0;N<Z;++N)if(Q[N]!==M[N]){S=Q[N];X=M[N];break}return S<X?-1:X<S?1:0};l.prototype.includes=function(M,N,T){return-1!==this.indexOf(M,N,T)};l.prototype.indexOf=function(M,N,T){return k(this,M,N,T,!0)};l.prototype.lastIndexOf=function(M,N,T){return k(this,M,N,T,!1)};l.prototype.write=function(M,N,T,Q){if(void 0===N)Q="utf8",T=this.length,N=0;else if(void 0===T&&"string"===typeof N)Q=N,T=this.length,N=0;else if(isFinite(N))N>>>=
0,isFinite(T)?(T>>>=0,void 0===Q&&(Q="utf8")):(Q=T,T=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var U=this.length-N;if(void 0===T||T>U)T=U;if(0<M.length&&(0>T||0>N)||N>this.length)throw new RangeError("Attempt to write outside buffer bounds");Q||(Q="utf8");for(U=!1;;)switch(Q){case "hex":a:{N=Number(N)||0;Q=this.length-N;T?(T=Number(T),T>Q&&(T=Q)):T=Q;Q=M.length;T>Q/2&&(T=Q/2);for(Q=0;Q<T;++Q){U=parseInt(M.substr(2*Q,2),16);if(U!==U){M=Q;break a}this[N+
Q]=U}M=Q}return M;case "utf8":case "utf-8":return B(D(M,this.length-N),this,N,T);case "ascii":return B(A(M),this,N,T);case "latin1":case "binary":return B(A(M),this,N,T);case "base64":return B(t(M),this,N,T);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":Q=M;U=this.length-N;for(var S=[],X=0;X<Q.length&&!(0>(U-=2));++X){var Z=Q.charCodeAt(X);M=Z>>8;Z%=256;S.push(Z);S.push(M)}return B(S,this,N,T);default:if(U)throw new TypeError("Unknown encoding: "+Q);Q=(""+Q).toLowerCase();U=!0}};l.prototype.toJSON=
function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var H=4096;l.prototype.slice=function(M,N){var T=this.length;M=~~M;N=void 0===N?T:~~N;0>M?(M+=T,0>M&&(M=0)):M>T&&(M=T);0>N?(N+=T,0>N&&(N=0)):N>T&&(N=T);N<M&&(N=M);M=this.subarray(M,N);M.__proto__=l.prototype;return M};l.prototype.readUIntLE=function(M,N,T){M>>>=0;N>>>=0;T||v(M,N,this.length);T=this[M];for(var Q=1,U=0;++U<N&&(Q*=256);)T+=this[M+U]*Q;return T};l.prototype.readUIntBE=function(M,N,T){M>>>=0;N>>>=0;T||
v(M,N,this.length);T=this[M+--N];for(var Q=1;0<N&&(Q*=256);)T+=this[M+--N]*Q;return T};l.prototype.readUInt8=function(M,N){M>>>=0;N||v(M,1,this.length);return this[M]};l.prototype.readUInt16LE=function(M,N){M>>>=0;N||v(M,2,this.length);return this[M]|this[M+1]<<8};l.prototype.readUInt16BE=function(M,N){M>>>=0;N||v(M,2,this.length);return this[M]<<8|this[M+1]};l.prototype.readUInt32LE=function(M,N){M>>>=0;N||v(M,4,this.length);return(this[M]|this[M+1]<<8|this[M+2]<<16)+16777216*this[M+3]};l.prototype.readUInt32BE=
function(M,N){M>>>=0;N||v(M,4,this.length);return 16777216*this[M]+(this[M+1]<<16|this[M+2]<<8|this[M+3])};l.prototype.readIntLE=function(M,N,T){M>>>=0;N>>>=0;T||v(M,N,this.length);T=this[M];for(var Q=1,U=0;++U<N&&(Q*=256);)T+=this[M+U]*Q;T>=128*Q&&(T-=Math.pow(2,8*N));return T};l.prototype.readIntBE=function(M,N,T){M>>>=0;N>>>=0;T||v(M,N,this.length);T=N;for(var Q=1,U=this[M+--T];0<T&&(Q*=256);)U+=this[M+--T]*Q;U>=128*Q&&(U-=Math.pow(2,8*N));return U};l.prototype.readInt8=function(M,N){M>>>=0;N||
v(M,1,this.length);return this[M]&128?-1*(255-this[M]+1):this[M]};l.prototype.readInt16LE=function(M,N){M>>>=0;N||v(M,2,this.length);M=this[M]|this[M+1]<<8;return M&32768?M|4294901760:M};l.prototype.readInt16BE=function(M,N){M>>>=0;N||v(M,2,this.length);M=this[M+1]|this[M]<<8;return M&32768?M|4294901760:M};l.prototype.readInt32LE=function(M,N){M>>>=0;N||v(M,4,this.length);return this[M]|this[M+1]<<8|this[M+2]<<16|this[M+3]<<24};l.prototype.readInt32BE=function(M,N){M>>>=0;N||v(M,4,this.length);return this[M]<<
24|this[M+1]<<16|this[M+2]<<8|this[M+3]};l.prototype.readFloatLE=function(M,N){M>>>=0;N||v(M,4,this.length);return J.read(this,M,!0,23,4)};l.prototype.readFloatBE=function(M,N){M>>>=0;N||v(M,4,this.length);return J.read(this,M,!1,23,4)};l.prototype.readDoubleLE=function(M,N){M>>>=0;N||v(M,8,this.length);return J.read(this,M,!0,52,8)};l.prototype.readDoubleBE=function(M,N){M>>>=0;N||v(M,8,this.length);return J.read(this,M,!1,52,8)};l.prototype.writeUIntLE=function(M,N,T,Q){M=+M;N>>>=0;T>>>=0;Q||x(this,
M,N,T,Math.pow(2,8*T)-1,0);Q=1;var U=0;for(this[N]=M&255;++U<T&&(Q*=256);)this[N+U]=M/Q&255;return N+T};l.prototype.writeUIntBE=function(M,N,T,Q){M=+M;N>>>=0;T>>>=0;Q||x(this,M,N,T,Math.pow(2,8*T)-1,0);Q=T-1;var U=1;for(this[N+Q]=M&255;0<=--Q&&(U*=256);)this[N+Q]=M/U&255;return N+T};l.prototype.writeUInt8=function(M,N,T){M=+M;N>>>=0;T||x(this,M,N,1,255,0);this[N]=M&255;return N+1};l.prototype.writeUInt16LE=function(M,N,T){M=+M;N>>>=0;T||x(this,M,N,2,65535,0);this[N]=M&255;this[N+1]=M>>>8;return N+
2};l.prototype.writeUInt16BE=function(M,N,T){M=+M;N>>>=0;T||x(this,M,N,2,65535,0);this[N]=M>>>8;this[N+1]=M&255;return N+2};l.prototype.writeUInt32LE=function(M,N,T){M=+M;N>>>=0;T||x(this,M,N,4,4294967295,0);this[N+3]=M>>>24;this[N+2]=M>>>16;this[N+1]=M>>>8;this[N]=M&255;return N+4};l.prototype.writeUInt32BE=function(M,N,T){M=+M;N>>>=0;T||x(this,M,N,4,4294967295,0);this[N]=M>>>24;this[N+1]=M>>>16;this[N+2]=M>>>8;this[N+3]=M&255;return N+4};l.prototype.writeIntLE=function(M,N,T,Q){M=+M;N>>>=0;Q||(Q=
Math.pow(2,8*T-1),x(this,M,N,T,Q-1,-Q));Q=0;var U=1,S=0;for(this[N]=M&255;++Q<T&&(U*=256);)0>M&&0===S&&0!==this[N+Q-1]&&(S=1),this[N+Q]=(M/U>>0)-S&255;return N+T};l.prototype.writeIntBE=function(M,N,T,Q){M=+M;N>>>=0;Q||(Q=Math.pow(2,8*T-1),x(this,M,N,T,Q-1,-Q));Q=T-1;var U=1,S=0;for(this[N+Q]=M&255;0<=--Q&&(U*=256);)0>M&&0===S&&0!==this[N+Q+1]&&(S=1),this[N+Q]=(M/U>>0)-S&255;return N+T};l.prototype.writeInt8=function(M,N,T){M=+M;N>>>=0;T||x(this,M,N,1,127,-128);0>M&&(M=255+M+1);this[N]=M&255;return N+
1};l.prototype.writeInt16LE=function(M,N,T){M=+M;N>>>=0;T||x(this,M,N,2,32767,-32768);this[N]=M&255;this[N+1]=M>>>8;return N+2};l.prototype.writeInt16BE=function(M,N,T){M=+M;N>>>=0;T||x(this,M,N,2,32767,-32768);this[N]=M>>>8;this[N+1]=M&255;return N+2};l.prototype.writeInt32LE=function(M,N,T){M=+M;N>>>=0;T||x(this,M,N,4,2147483647,-2147483648);this[N]=M&255;this[N+1]=M>>>8;this[N+2]=M>>>16;this[N+3]=M>>>24;return N+4};l.prototype.writeInt32BE=function(M,N,T){M=+M;N>>>=0;T||x(this,M,N,4,2147483647,
-2147483648);0>M&&(M=4294967295+M+1);this[N]=M>>>24;this[N+1]=M>>>16;this[N+2]=M>>>8;this[N+3]=M&255;return N+4};l.prototype.writeFloatLE=function(M,N,T){return z(this,M,N,!0,T)};l.prototype.writeFloatBE=function(M,N,T){return z(this,M,N,!1,T)};l.prototype.writeDoubleLE=function(M,N,T){return y(this,M,N,!0,T)};l.prototype.writeDoubleBE=function(M,N,T){return y(this,M,N,!1,T)};l.prototype.copy=function(M,N,T,Q){if(!l.isBuffer(M))throw new TypeError("argument should be a Buffer");T||(T=0);Q||0===Q||
(Q=this.length);N>=M.length&&(N=M.length);N||(N=0);0<Q&&Q<T&&(Q=T);if(Q===T||0===M.length||0===this.length)return 0;if(0>N)throw new RangeError("targetStart out of bounds");if(0>T||T>=this.length)throw new RangeError("Index out of range");if(0>Q)throw new RangeError("sourceEnd out of bounds");Q>this.length&&(Q=this.length);M.length-N<Q-T&&(Q=M.length-N+T);var U=Q-T;if(this===M&&"function"===typeof Uint8Array.prototype.copyWithin)this.copyWithin(N,T,Q);else if(this===M&&T<N&&N<Q)for(Q=U-1;0<=Q;--Q)M[Q+
N]=this[Q+T];else Uint8Array.prototype.set.call(M,this.subarray(T,Q),N);return U};l.prototype.fill=function(M,N,T,Q){if("string"===typeof M){"string"===typeof N?(Q=N,N=0,T=this.length):"string"===typeof T&&(Q=T,T=this.length);if(void 0!==Q&&"string"!==typeof Q)throw new TypeError("encoding must be a string");if("string"===typeof Q&&!l.isEncoding(Q))throw new TypeError("Unknown encoding: "+Q);if(1===M.length){var U=M.charCodeAt(0);if("utf8"===Q&&128>U||"latin1"===Q)M=U}}else"number"===typeof M&&(M&=
255);if(0>N||this.length<N||this.length<T)throw new RangeError("Out of range index");if(T<=N)return this;N>>>=0;T=void 0===T?this.length:T>>>0;M||(M=0);if("number"===typeof M)for(Q=N;Q<T;++Q)this[Q]=M;else{U=l.isBuffer(M)?M:l.from(M,Q);var S=U.length;if(0===S)throw new TypeError('The value "'+M+'" is invalid for argument "value"');for(Q=0;Q<T-N;++Q)this[Q+N]=U[Q%S]}return this};var P=/[^+/0-9A-Za-z-_]/g}).call(this)}).call(this,b("buffer").Buffer)},{"base64-js":79,buffer:111,ieee754:442}],112:[function(b,
K,G){function q(n){return[Math.min(n[0],n[1]),Math.max(n[0],n[1])]}function m(n,p){return n[0]-p[0]||n[1]-p[1]}function l(n,p,c){return p in n?n[p]:c}var h=b("./lib/monotone"),a=b("./lib/triangulation"),g=b("./lib/delaunay"),e=b("./lib/filter");K.exports=function(n,p,c){Array.isArray(p)?(c=c||{},p=p||[]):(c=p||{},p=[]);var d=!!l(c,"delaunay",!0),f=!!l(c,"interior",!0),k=!!l(c,"exterior",!0);c=!!l(c,"infinity",!1);if(!f&&!k||0===n.length)return[];var r=h(n,p);if(d||f!==k||c){p=a(n.length,p.map(q).sort(m));
for(var u=0;u<r.length;++u){var v=r[u];p.addTriangle(v[0],v[1],v[2])}d&&g(n,p);return k?f?c?e(p,0,c):p.cells():e(p,1,c):e(p,-1)}return r}},{"./lib/delaunay":113,"./lib/filter":114,"./lib/monotone":115,"./lib/triangulation":116}],113:[function(b,K,G){function q(l,h,a,g,e,n){var p=h.opposite(g,e);if(!(0>p)){if(e<g){var c=g;g=e;e=c;c=n;n=p;p=c}h.isConstraint(g,e)||0>m(l[g],l[e],l[n],l[p])&&a.push(g,e)}}var m=b("robust-in-sphere")[4];b("binary-search-bounds");K.exports=function(l,h){for(var a=[],g=l.length,
e=h.stars,n=0;n<g;++n)for(var p=e[n],c=1;c<p.length;c+=2){var d=p[c];if(!(d<n||h.isConstraint(n,d))){for(var f=p[c-1],k=-1,r=1;r<p.length;r+=2)if(p[r-1]===d){k=p[r];break}0>k||0>m(l[n],l[d],l[f],l[k])&&a.push(n,d)}}for(;0<a.length;){d=a.pop();n=a.pop();k=f=-1;p=e[n];for(g=1;g<p.length;g+=2)c=p[g-1],r=p[g],c===d?k=r:r===d&&(f=c);0>f||0>k||0<=m(l[n],l[d],l[f],l[k])||(h.flip(n,d),q(l,h,a,f,n,k),q(l,h,a,n,k,f),q(l,h,a,k,d,f),q(l,h,a,d,f,k))}}},{"binary-search-bounds":96,"robust-in-sphere":546}],114:[function(b,
K,G){function q(h,a,g,e,n,p,c){this.cells=h;this.neighbor=a;this.flags=e;this.constraint=g;this.active=n;this.next=p;this.boundary=c}function m(h,a){return h[0]-a[0]||h[1]-a[1]||h[2]-a[2]}var l=b("binary-search-bounds");K.exports=function(h,a,g){for(var e=h.cells(),n=e.length,p=0;p<n;++p){var c=e[p],d=c[0],f=c[1],k=c[2];f<k?f<d&&(c[0]=f,c[1]=k,c[2]=d):k<d&&(c[0]=k,c[1]=d,c[2]=f)}e.sort(m);var r=Array(n);for(p=0;p<r.length;++p)r[p]=0;var u=[],v=[],x=Array(3*n),C=Array(3*n),z=null;g&&(z=[]);k=new q(e,
x,C,r,u,v,z);for(p=0;p<n;++p){c=e[p];for(var y=0;3>y;++y){d=c[y];f=c[(y+1)%3];var D=x[3*p+y]=k.locate(f,d,h.opposite(f,d)),A=C[3*p+y]=h.isConstraint(d,f);0>D&&(A?v.push(p):(u.push(p),r[p]=1),g&&z.push([f,d,-1]))}}if(0===a)return g?k.cells.concat(k.boundary):k.cells;n=1;p=k.active;c=k.next;h=k.flags;e=k.cells;d=k.constraint;for(f=k.neighbor;0<p.length||0<c.length;){for(;0<p.length;)if(r=p.pop(),h[r]!==-n)for(h[r]=n,u=0;3>u;++u)v=f[3*r+u],0<=v&&0===h[v]&&(d[3*r+u]?c.push(v):(p.push(v),h[v]=n));r=c;
c=p;p=r;c.length=0;n=-n}for(p=n=0;p<e.length;++p)h[p]===a&&(e[n++]=e[p]);e.length=n;return g?e.concat(k.boundary):e};q.prototype.locate=function(){var h=[0,0,0];return function(a,g,e){var n=a,p=g,c=e;g<e?g<a&&(n=g,p=e,c=a):e<a&&(n=e,p=a,c=g);if(0>n)return-1;h[0]=n;h[1]=p;h[2]=c;return l.eq(this.cells,h,m)}}()},{"binary-search-bounds":96}],115:[function(b,K,G){function q(n,p,c,d,f){this.a=n;this.b=p;this.idx=c;this.lowerIds=d;this.upperIds=f}function m(n,p,c,d){this.a=n;this.b=p;this.type=c;this.idx=
d}function l(n,p){var c=n.a[0]-p.a[0]||n.a[1]-p.a[1]||n.type-p.type;return c||0!==n.type&&(c=e(n.a,n.b,p.b))?c:n.idx-p.idx}function h(n,p){return e(n.a,n.b,p)}function a(n,p){var c;return(c=n.a[0]<p.a[0]?e(n.a,n.b,p.a):e(p.b,p.a,n.a))?c:(c=p.b[0]<n.b[0]?e(n.a,n.b,p.b):e(p.b,p.a,n.b))||n.idx-p.idx}var g=b("binary-search-bounds"),e=b("robust-orientation")[3];K.exports=function(n,p){for(var c=n.length,d=p.length,f=[],k=0;k<c;++k)f.push(new m(n[k],null,0,k));for(k=0;k<d;++k){var r=p[k];c=n[r[0]];r=n[r[1]];
c[0]<r[0]?f.push(new m(c,r,2,k),new m(r,c,1,k)):c[0]>r[0]&&f.push(new m(r,c,2,k),new m(c,r,1,k))}f.sort(l);k=f[0].a[0]-(1+Math.abs(f[0].a[0]))*Math.pow(2,-52);p=[new q([k,1],[k,0],-1,[],[],[],[])];d=[];k=0;for(c=f.length;k<c;++k){var u=f[k];r=u.type;if(0===r){r=d;var v=p,x=n,C=u.a;u=u.idx;for(var z=g.lt(v,C,h),y=g.gt(v,C,h);z<y;++z){for(var D=v[z],A=D.lowerIds,t=A.length;1<t&&0<e(x[A[t-2]],x[A[t-1]],C);)r.push([A[t-1],A[t-2],u]),--t;A.length=t;A.push(u);D=D.upperIds;for(t=D.length;1<t&&0>e(x[D[t-
2]],x[D[t-1]],C);)r.push([D[t-2],D[t-1],u]),--t;D.length=t;D.push(u)}}else 2===r?(r=p,v=u,x=g.le(r,v,a),C=r[x],u=C.upperIds,y=u[u.length-1],C.upperIds=[y],r.splice(x+1,0,new q(v.a,v.b,v.idx,[y],u))):(r=p,v=u,x=v.a,v.a=v.b,v.b=x,v=g.eq(r,v,a),r[v-1].upperIds=r[v].upperIds,r.splice(v,1))}return d}},{"binary-search-bounds":96,"robust-orientation":548}],116:[function(b,K,G){function q(h,a){this.stars=h;this.edges=a}function m(h,a,g){for(var e=1,n=h.length;e<n;e+=2)if(h[e-1]===a&&h[e]===g){h[e-1]=h[n-
2];h[e]=h[n-1];h.length=n-2;break}}var l=b("binary-search-bounds");K.exports=function(h,a){for(var g=Array(h),e=0;e<h;++e)g[e]=[];return new q(g,a)};b=q.prototype;b.isConstraint=function(){function h(g,e){return g[0]-e[0]||g[1]-e[1]}var a=[0,0];return function(g,e){a[0]=Math.min(g,e);a[1]=Math.max(g,e);return 0<=l.eq(this.edges,a,h)}}();b.removeTriangle=function(h,a,g){var e=this.stars;m(e[h],a,g);m(e[a],g,h);m(e[g],h,a)};b.addTriangle=function(h,a,g){var e=this.stars;e[h].push(a,g);e[a].push(g,h);
e[g].push(h,a)};b.opposite=function(h,a){a=this.stars[a];for(var g=1,e=a.length;g<e;g+=2)if(a[g]===h)return a[g-1];return-1};b.flip=function(h,a){var g=this.opposite(h,a),e=this.opposite(a,h);this.removeTriangle(h,a,g);this.removeTriangle(a,h,e);this.addTriangle(h,e,g);this.addTriangle(a,g,e)};b.edges=function(){for(var h=this.stars,a=[],g=0,e=h.length;g<e;++g)for(var n=h[g],p=0,c=n.length;p<c;p+=2)a.push([n[p],n[p+1]]);return a};b.cells=function(){for(var h=this.stars,a=[],g=0,e=h.length;g<e;++g)for(var n=
h[g],p=0,c=n.length;p<c;p+=2){var d=n[p],f=n[p+1];g<Math.min(d,f)&&a.push([g,d,f])}return a}},{"binary-search-bounds":96}],117:[function(b,K,G){K.exports=function(q){for(var m=1,l=1;l<q.length;++l)for(var h=0;h<l;++h)if(q[l]<q[h])m=-m;else if(q[h]===q[l])return 0;return m}},{}],118:[function(b,K,G){function q(g,e){for(var n=0,p=g.length,c=0;c<p;++c)n+=g[c]*e[c];return n}function m(g){var e=g.length;if(0===e)return[];for(var n=h([g.length+1,g.length+1],1),p=h([g.length+1],1),c=n[e][e]=0;c<e;++c){for(var d=
0;d<=c;++d)n[d][c]=n[c][d]=2*q(g[c],g[d]);p[c]=q(g[c],g[c])}g=a(n,p);n=0;p=g[e+1];for(c=0;c<p.length;++c)n+=p[c];var f=Array(e);for(c=0;c<e;++c){p=g[c];var k=0;for(d=0;d<p.length;++d)k+=p[d];f[c]=k/n}return f}function l(g){if(0===g.length)return[];for(var e=g[0].length,n=h([e]),p=m(g),c=0;c<g.length;++c)for(var d=0;d<e;++d)n[d]+=g[c][d]*p[c];return n}var h=b("dup"),a=b("robust-linear-solve");l.barycenetric=m;K.exports=l},{dup:176,"robust-linear-solve":547}],119:[function(b,K,G){K.exports=function(m){for(var l=
q(m),h=0,a=0;a<m.length;++a)for(var g=m[a],e=0;e<l.length;++e)h+=Math.pow(g[e]-l[e],2);return Math.sqrt(h/m.length)};var q=b("circumcenter")},{circumcenter:118}],120:[function(b,K,G){K.exports=function(q,m,l){return m<l?q<m?m:q>l?l:q:q<l?l:q>m?m:q}},{}],121:[function(b,K,G){function q(y){y=v(y);return[C(y,-Infinity),C(y,Infinity)]}function m(y){for(var D=Array(y.length),A=0;A<y.length;++A){var t=y[A];D[A]=[C(t[0],-Infinity),C(t[1],-Infinity),C(t[0],Infinity),C(t[1],Infinity)]}return D}function l(y,
D,A){var t=[];f(A,function(B,F){var I=D[B],J=D[F];I[0]!==J[0]&&I[0]!==J[1]&&I[1]!==J[0]&&I[1]!==J[1]&&k(y[I[0]],y[I[1]],y[J[0]],y[J[1]])&&t.push([B,F])});return t}function h(y,D,A,t){var B=[];f(A,t,function(F,I){var J=D[F];if(J[0]!==I&&J[1]!==I){var L=y[I];k(y[J[0]],y[J[1]],L,L)&&B.push([F,I])}});return B}function a(y,D,A,t,B){var F,I=y.map(function(Q){return[r(Q[0]),r(Q[1])]});for(F=0;F<A.length;++F){var J=A[F];var L=J[0];J=J[1];var H=D[L],P=D[J];if(H=z(x(y[H[0]]),x(y[H[1]]),x(y[P[0]]),x(y[P[1]])))P=
y.length,y.push([v(H[0]),v(H[1])]),I.push(H),t.push([L,P],[J,P])}t.sort(function(Q,U){if(Q[0]!==U[0])return Q[0]-U[0];Q=I[Q[1]];U=I[U[1]];return u(Q[0],U[0])||u(Q[1],U[1])});for(F=t.length-1;0<=F;--F){J=t[F];L=J[0];H=D[L];P=H[0];A=H[1];var M=y[P],N=y[A];0>(M[0]-N[0]||M[1]-N[1])&&(M=P,P=A,A=M);H[0]=P;P=H[1]=J[1];var T;for(B&&(T=H[2]);0<F&&t[F-1][0]===L;)J=t[--F],J=J[1],B?D.push([P,J,T]):D.push([P,J]),P=J;B?D.push([P,A,T]):D.push([P,A])}return I}function g(y,D,A){A=D.length;for(var t=new d(A),B=[],
F=0;F<D.length;++F){var I=D[F],J=q(I[0]);I=q(I[1]);B.push([C(J[0],-Infinity),C(I[0],-Infinity),C(J[1],Infinity),C(I[1],Infinity)])}f(B,function(L,H){t.link(L,H)});J=!0;D=Array(A);for(F=0;F<A;++F)B=t.find(F),B!==F&&(J=!1,y[B]=[Math.min(y[F][0],y[B][0]),Math.min(y[F][1],y[B][1])]);if(J)return null;for(F=J=0;F<A;++F)B=t.find(F),B===F?(D[F]=J,y[J++]=y[F]):D[F]=-1;y.length=J;for(F=0;F<A;++F)0>D[F]&&(D[F]=D[t.find(F)]);return D}function e(y,D){return y[0]-D[0]||y[1]-D[1]}function n(y,D){var A=y[0]-D[0]||
y[1]-D[1];return A?A:y[2]<D[2]?-1:y[2]>D[2]?1:0}function p(y,D,A){if(0!==y.length){if(D)for(var t=0;t<y.length;++t){var B=y[t],F=D[B[0]],I=D[B[1]];B[0]=Math.min(F,I);B[1]=Math.max(F,I)}else for(t=0;t<y.length;++t)B=y[t],F=B[0],I=B[1],B[0]=Math.min(F,I),B[1]=Math.max(F,I);A?y.sort(n):y.sort(e);for(t=D=1;t<y.length;++t)if(B=y[t-1],F=y[t],F[0]!==B[0]||F[1]!==B[1]||A&&F[2]!==B[2])y[D++]=F;y.length=D}}function c(y,D,A){for(var t=Array(D.length),B=0;B<D.length;++B){var F=D[B],I=y[F[0]];F=y[F[1]];t[B]=[C(Math.min(I[0],
F[0]),-Infinity),C(Math.min(I[1],F[1]),-Infinity),C(Math.max(I[0],F[0]),Infinity),C(Math.max(I[1],F[1]),Infinity)]}B=l(y,D,t);I=m(y);t=h(y,D,t,I);F=a(y,D,B,t,A);y=g(y,F,I);p(D,y,A);return y?!0:0<B.length||0<t.length}K.exports=function(y,D,A){if(A){var t=D;for(var B=Array(D.length),F=0;F<D.length;++F){var I=D[F];B[F]=[I[0],I[1],A[F]]}D=B}F=D;I=!!A;B=g(y,[],m(y));p(F,B,I);for(B=!!B;c(y,D,!!A);)B=!0;if(A&&B)for(t.length=0,F=A.length=0;F<D.length;++F)I=D[F],t.push([I[0],I[1]]),A.push(I[2]);return B};
var d=b("union-find"),f=b("box-intersect"),k=b("robust-segment-intersect"),r=b("big-rat"),u=b("big-rat/cmp"),v=b("big-rat/to-float"),x=b("rat-vec"),C=b("nextafter"),z=b("./lib/rat-seg-intersect")},{"./lib/rat-seg-intersect":122,"big-rat":83,"big-rat/cmp":81,"big-rat/to-float":95,"box-intersect":101,nextafter:496,"rat-vec":530,"robust-segment-intersect":551,"union-find":596}],122:[function(b,K,G){function q(p,c){return h(m(p[0],c[1]),m(p[1],c[0]))}K.exports=function(p,c,d,f){c=g(c,p);var k=g(f,d);
f=q(c,k);if(0===a(f))return null;d=g(p,d);d=q(k,d);d=l(d,f);c=n(c,d);return e(p,c)};var m=b("big-rat/mul"),l=b("big-rat/div"),h=b("big-rat/sub"),a=b("big-rat/sign"),g=b("rat-vec/sub"),e=b("rat-vec/add"),n=b("rat-vec/muls")},{"big-rat/div":82,"big-rat/mul":92,"big-rat/sign":93,"big-rat/sub":94,"rat-vec/add":529,"rat-vec/muls":531,"rat-vec/sub":532}],123:[function(b,K,G){function q(l,h){null==h&&(h=!0);var a=l[0],g=l[1],e=l[2];l=l[3];null==l&&(l=h?1:255);h&&(a*=255,g*=255,e*=255,l*=255);a=m(a,0,255)&
255;g=m(g,0,255)&255;e=m(e,0,255)&255;l=m(l,0,255)&255;return 16777216*a+(g<<16)+(e<<8)+l}var m=b("clamp");K.exports=q;K.exports.to=q;K.exports.from=function(l,h){l=+l;var a=l>>>24,g=(l&16711680)>>>16,e=(l&65280)>>>8;l&=255;return!1===h?[a,g,e,l]:[a/255,g/255,e/255,l/255]}},{clamp:120}],124:[function(b,K,G){K.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,
235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,
50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,
128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,
160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,
21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,
230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,
224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],125:[function(b,K,G){var q=b("color-rgba"),m=b("clamp"),l=b("dtype");K.exports=function(h,a){"float"!==a&&a||(a="array");"uint"===a&&(a="uint8");"uint_clamped"===a&&(a="uint8_clamped");var g=new (l(a))(4);a="uint8"!==a&&"uint8_clamped"!==a;h.length&&"string"!==typeof h||(h=q(h),h[0]/=255,h[1]/=255,h[2]/=255);var e=h;e=e instanceof Uint8Array||e instanceof
Uint8ClampedArray?!0:Array.isArray(e)&&(1<e[0]||0===e[0])&&(1<e[1]||0===e[1])&&(1<e[2]||0===e[2])&&(!e[3]||1<e[3])?!0:!1;if(e)return g[0]=h[0],g[1]=h[1],g[2]=h[2],g[3]=null!=h[3]?h[3]:255,a&&(g[0]/=255,g[1]/=255,g[2]/=255,g[3]/=255),g;a?(g[0]=h[0],g[1]=h[1],g[2]=h[2],g[3]=null!=h[3]?h[3]:1):(g[0]=m(Math.floor(255*h[0]),0,255),g[1]=m(Math.floor(255*h[1]),0,255),g[2]=m(Math.floor(255*h[2]),0,255),g[3]=null==h[3]?255:m(Math.floor(255*h[3]),0,255));return g}},{clamp:120,"color-rgba":127,dtype:175}],126:[function(b,
K,G){(function(q){(function(){var m=b("color-name"),l=b("is-plain-obj"),h=b("defined");K.exports=function(g){var e,n=[],p=1;if("string"===typeof g)if(m[g]){n=m[g].slice();var c="rgb"}else if("transparent"===g)p=0,c="rgb",n=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(g)){var d=g.slice(1),f=d.length;p=1;4>=f?(n=[parseInt(d[0]+d[0],16),parseInt(d[1]+d[1],16),parseInt(d[2]+d[2],16)],4===f&&(p=parseInt(d[3]+d[3],16)/255)):(n=[parseInt(d[0]+d[1],16),parseInt(d[2]+d[3],16),parseInt(d[4]+d[5],16)],8===f&&(p=parseInt(d[6]+
d[7],16)/255));n[0]||(n[0]=0);n[1]||(n[1]=0);n[2]||(n[2]=0);c="rgb"}else(e=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(g))?(g=e[1],p="rgb"===g,c=d=g.replace(/a$/,""),f="cmyk"===d?4:"gray"===d?1:3,n=e[2].trim().split(/\s*,\s*/).map(function(k,r){if(/%$/.test(k)){if(r===f)return parseFloat(k)/100;if("rgb"===d)return 255*parseFloat(k)/100}else if("h"===d[r]&&!/deg$/.test(k)&&void 0!==a[k])return a[k];return parseFloat(k)}),g===d&&n.push(1),p=p?1:void 0===n[f]?
1:n[f],n=n.slice(0,f)):10<g.length&&/[0-9](?:\s|\/)/.test(g)&&(n=g.match(/([0-9]+)/g).map(function(k){return parseFloat(k)}),c=g.match(/([a-z])/ig).join("").toLowerCase());else if(!isNaN(g))c="rgb",n=[g>>>16,(g&65280)>>>8,g&255];else if(l(g))e=h(g.r,g.red,g.R,null),null!==e?(c="rgb",n=[e,h(g.g,g.green,g.G),h(g.b,g.blue,g.B)]):(c="hsl",n=[h(g.h,g.hue,g.H),h(g.s,g.saturation,g.S),h(g.l,g.lightness,g.L,g.b,g.brightness)]),p=h(g.a,g.alpha,g.opacity,1),null!=g.opacity&&(p/=100);else if(Array.isArray(g)||
q.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(g))n=[g[0],g[1],g[2]],c="rgb",p=4===g.length?g[3]:1;return{space:c,values:n,alpha:p}};var a={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}}).call(this)}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"color-name":124,defined:170,"is-plain-obj":469}],127:[function(b,K,G){var q=b("color-parse"),m=b("color-space/hsl"),l=b("clamp");K.exports=function(h){var a=q(h);if(!a.space)return[];
h=Array(3);h[0]=l(a.values[0],0,255);h[1]=l(a.values[1],0,255);h[2]=l(a.values[2],0,255);"h"===a.space[0]&&(h=m.rgb(h));h.push(l(a.alpha,0,1));return h}},{clamp:120,"color-parse":126,"color-space/hsl":128}],128:[function(b,K,G){b=b("./rgb");K.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(q){var m=q[0]/360,l=q[1]/100;q=q[2]/100;if(0===l){var h=255*q;return[h,h,h]}l=.5>q?q*(1+l):q+l-q*l;q=2*q-l;var a=[0,0,0];for(var g=0;3>g;g++)h=
m+1/3*-(g-1),0>h?h++:1<h&&h--,h=1>6*h?q+6*(l-q)*h:1>2*h?l:2>3*h?q+(l-q)*(2/3-h)*6:q,a[g]=255*h;return a}};b.hsl=function(q){var m=q[0]/255,l=q[1]/255,h=q[2]/255;q=Math.min(m,l,h);var a=Math.max(m,l,h),g=a-q,e;a===q?e=0:m===a?e=(l-h)/g:l===a?e=2+(h-m)/g:h===a&&(e=4+(m-l)/g);e=Math.min(60*e,360);0>e&&(e+=360);m=(q+a)/2;return[e,100*(a===q?0:.5>=m?g/(a+q):g/(2-a-q)),100*m]}},{"./rgb":129}],129:[function(b,K,G){K.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},
{}],130:[function(b,K,G){K.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,
0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],cool:[{index:0,rgb:[0,255,255]},{index:1,rgb:[255,0,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},
{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},
{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},
{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,
0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,
rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,
44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,
rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,
0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,
rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,
rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,
196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,
rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,
rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,
185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,
157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,
52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,
rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},{}],131:[function(b,K,G){function q(g){return[g[0]/255,g[1]/255,g[2]/
255,g[3]]}function m(g){for(var e,n="#",p=0;3>p;++p)e=g[p],e=e.toString(16),n+=("00"+e).substr(e.length);return n}function l(g){return"rgba("+g.join(",")+")"}var h=b("./colorScale"),a=b("lerp");K.exports=function(g){var e,n;g||(g={});var p=(g.nshades||72)-1;var c=g.format||"hex";(e=g.colormap)||(e="jet");if("string"===typeof e){e=e.toLowerCase();if(!h[e])throw Error(e+" not a supported colorscale");var d=h[e]}else if(Array.isArray(e))d=e.slice();else throw Error("unsupported colormap option",e);if(d.length>
p+1)throw Error(e+" map requires nshades to be at least size "+d.length);var f=Array.isArray(g.alpha)?2!==g.alpha.length?[1,1]:g.alpha.slice():"number"===typeof g.alpha?[g.alpha,g.alpha]:[1,1];g=d.map(function(z){return Math.round(z.index*p)});f[0]=Math.min(Math.max(f[0],0),1);f[1]=Math.min(Math.max(f[1],0),1);var k=d.map(function(z,y){z=d[y].index;y=d[y].rgb.slice();if(4===y.length&&0<=y[3]&&1>=y[3])return y;y[3]=f[0]+(f[1]-f[0])*z;return y});var r=[];for(n=0;n<g.length-1;++n){var u=g[n+1]-g[n];
e=k[n];var v=k[n+1];for(var x=0;x<u;x++){var C=x/u;r.push([Math.round(a(e[0],v[0],C)),Math.round(a(e[1],v[1],C)),Math.round(a(e[2],v[2],C)),a(e[3],v[3],C)])}}r.push(d[d.length-1].rgb.concat(f[1]));"hex"===c?r=r.map(m):"rgbaString"===c?r=r.map(l):"float"===c&&(r=r.map(q));return r}},{"./colorScale":130,lerp:472}],132:[function(b,K,G){function q(e,n,p){var c=h(e[0],-n[0]);e=h(e[1],-n[1]);var d=h(p[0],-n[0]);n=h(p[1],-n[1]);c=g(a(c,d),a(e,n));return 0<=c[c.length-1]}K.exports=function(e,n,p,c){var d=
m(n,p,c);if(0===d){d=l(m(e,n,p));var f=l(m(e,n,c));return d===f?0===d&&(p=q(e,n,p),e=q(e,n,c),p!==e)?p?1:-1:0:0===f?0<d?-1:q(e,n,c)?-1:1:0===d?0<f?1:q(e,n,p)?1:-1:l(f-d)}f=m(e,n,p);return 0<f?0<d&&0<m(e,n,c)?1:-1:0>f?0<d||0<m(e,n,c)?1:-1:0<m(e,n,c)?1:q(e,n,p)?1:-1};var m=b("robust-orientation"),l=b("signum"),h=b("two-sum"),a=b("robust-product"),g=b("robust-sum")},{"robust-orientation":548,"robust-product":549,"robust-sum":553,signum:554,"two-sum":583}],133:[function(b,K,G){function q(l,h){return l-
h}K.exports=function(l,h){var a=l.length,g=l.length-h.length;if(g)return g;switch(a){case 0:return 0;case 1:return l[0]-h[0];case 2:return l[0]+l[1]-h[0]-h[1]||m(l[0],l[1])-m(h[0],h[1]);case 3:a=l[0]+l[1];var e=h[0]+h[1];if(g=a+l[2]-(e+h[2]))return g;g=m(l[0],l[1]);var n=m(h[0],h[1]);return m(g,l[2])-m(n,h[2])||m(g+l[2],a)-m(n+h[2],e);case 4:g=l[0];a=l[1];e=l[2];l=l[3];n=h[0];var p=h[1],c=h[2];h=h[3];return g+a+e+l-(n+p+c+h)||m(g,a,e,l)-m(n,p,c,h,n)||m(g+a,g+e,g+l,a+e,a+l,e+l)-m(n+p,n+c,n+h,p+c,p+
h,c+h)||m(g+a+e,g+a+l,g+e+l,a+e+l)-m(n+p+c,n+p+h,n+c+h,p+c+h);default:l=l.slice().sort(q);h=h.slice().sort(q);for(e=0;e<a;++e)if(g=l[e]-h[e])return g;return 0}};var m=Math.min},{}],134:[function(b,K,G){var q=b("compare-cell"),m=b("cell-orientation");K.exports=function(l,h){return q(l,h)||m(l)-m(h)}},{"cell-orientation":117,"compare-cell":133}],135:[function(b,K,G){var q=b("./lib/ch1d"),m=b("./lib/ch2d"),l=b("./lib/chnd");K.exports=function(h){var a=h.length;if(0===a)return[];if(1===a)return[[0]];
a=h[0].length;return 0===a?[]:1===a?q(h):2===a?m(h):l(h,a)}},{"./lib/ch1d":136,"./lib/ch2d":137,"./lib/chnd":138}],136:[function(b,K,G){K.exports=function(q){for(var m=0,l=0,h=1;h<q.length;++h)q[h][0]<q[m][0]&&(m=h),q[h][0]>q[l][0]&&(l=h);return m<l?[[m],[l]]:m>l?[[l],[m]]:[[m]]}},{}],137:[function(b,K,G){K.exports=function(m){m=q(m);var l=m.length;if(2>=l)return[];for(var h=Array(l),a=m[l-1],g=0;g<l;++g){var e=m[g];h[g]=[a,e];a=e}return h};var q=b("monotone-convex-hull-2d")},{"monotone-convex-hull-2d":482}],
138:[function(b,K,G){K.exports=function(l,h){try{return q(l,!0)}catch(f){var a=m(l);if(a.length<=h)return[];h=l.length;for(var g=Array(h),e=0;e<a.length;++e)g[e]=l[a[e]];var n=a.length;for(e=0;e<h;++e)0>a.indexOf(e)&&(g[n++]=l[e]);l=q(g,!0);h=l.length;g=a.length;for(e=0;e<h;++e){n=l[e];for(var p=0;p<n.length;++p){var c=n[p];if(c<g)n[p]=a[c];else{c-=g;for(var d=0;d<g;++d)c>=a[d]&&(c+=1);n[p]=c}}}return l}};var q=b("incremental-convex-hull"),m=b("affine-hull")},{"affine-hull":67,"incremental-convex-hull":459}],
139:[function(b,K,G){K.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",
BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",
CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|\u00e7)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",
DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",
DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",
IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",
LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",
ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",
MDA:"moldov|b(a|e)ssarabia",REU:"r(e|\u00e9)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|\u00e9)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|\u00e3)o.?tom(e|\u00e9)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",
SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",
TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",
VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},
{}],140:[function(b,K,G){K.exports="xx-small x-small small medium large x-large xx-large larger smaller".split(" ")},{}],141:[function(b,K,G){K.exports="normal condensed semi-condensed extra-condensed ultra-condensed expanded semi-expanded extra-expanded ultra-expanded".split(" ")},{}],142:[function(b,K,G){K.exports=["normal","italic","oblique"]},{}],143:[function(b,K,G){K.exports="normal bold bolder lighter 100 200 300 400 500 600 700 800 900".split(" ")},{}],144:[function(b,K,G){K.exports={parse:b("./parse"),
stringify:b("./stringify")}},{"./parse":146,"./stringify":147}],145:[function(b,K,G){var q=b("css-font-size-keywords");K.exports={isSize:function(m){return/^[\d\.]/.test(m)||-1!==m.indexOf("/")||-1!==q.indexOf(m)}}},{"css-font-size-keywords":140}],146:[function(b,K,G){function q(f){if("string"!==typeof f)throw Error("Font argument must be a string.");if(d[f])return d[f];if(""===f)throw Error("Cannot parse an empty string.");if(-1!==a.indexOf(f))return d[f]={system:f};for(var k={style:"normal",variant:"normal",
weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},r=p(f,/\s+/),u;u=r.shift();){if(-1!==h.indexOf(u))return["style","variant","weight","stretch"].forEach(function(x){k[x]=u}),d[f]=k;if(-1!==e.indexOf(u))k.style=u;else if("normal"===u||"small-caps"===u)k.variant=u;else if(-1!==n.indexOf(u))k.stretch=u;else if(-1!==g.indexOf(u))k.weight=u;else{if(c(u)){var v=p(u,"/");k.size=v[0];null!=v[1]?k.lineHeight=m(v[1]):"/"===r[0]&&(r.shift(),k.lineHeight=m(r.shift()));if(!r.length)throw Error("Missing required font-family.");
k.family=p(r.join(" "),/\s*,\s*/).map(l);return d[f]=k}throw Error("Unknown or unsupported font token: "+u);}}throw Error("Missing required font-size.");}function m(f){var k=parseFloat(f);return k.toString()===f?k:f}var l=b("unquote"),h=b("css-global-keywords"),a=b("css-system-font-keywords"),g=b("css-font-weight-keywords"),e=b("css-font-style-keywords"),n=b("css-font-stretch-keywords"),p=b("string-split-by"),c=b("./lib/util").isSize;K.exports=q;var d=q.cache={}},{"./lib/util":145,"css-font-stretch-keywords":141,
"css-font-style-keywords":142,"css-font-weight-keywords":143,"css-global-keywords":148,"css-system-font-keywords":149,"string-split-by":568,unquote:598}],147:[function(b,K,G){function q(f,k){if(f&&!k[f]&&!a[f])throw Error("Unknown keyword `"+f+"`");return f}function m(f){for(var k={},r=0;r<f.length;r++)k[f[r]]=1;return k}var l=b("pick-by-alias"),h=b("./lib/util").isSize,a=m(b("css-global-keywords")),g=m(b("css-system-font-keywords")),e=m(b("css-font-weight-keywords")),n=m(b("css-font-style-keywords")),
p=m(b("css-font-stretch-keywords")),c={normal:1,"small-caps":1},d={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1};K.exports=function(f){f=l(f,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",
family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"});if(f.system)return f.system&&q(f.system,g),f.system;q(f.style,n);q(f.variant,c);q(f.weight,e);q(f.stretch,p);null==f.size&&(f.size="1rem");"number"===typeof f.size&&(f.size+="px");if(!h)throw Error("Bad size value `"+f.size+"`");f.family||(f.family="serif");Array.isArray(f.family)&&(f.family.length||(f.family=["serif"]),f.family=f.family.map(function(r){return d[r]?r:'"'+r+'"'}).join(", "));
var k=[];k.push(f.style);f.variant!==f.style&&k.push(f.variant);f.weight!==f.variant&&f.weight!==f.style&&k.push(f.weight);f.stretch!==f.weight&&f.stretch!==f.variant&&f.stretch!==f.style&&k.push(f.stretch);k.push(f.size+(null==f.lineHeight||"normal"===f.lineHeight||"1"===f.lineHeight+""?"":"/"+f.lineHeight));k.push(f.family);return k.filter(Boolean).join(" ")}},{"./lib/util":145,"css-font-stretch-keywords":141,"css-font-style-keywords":142,"css-font-weight-keywords":143,"css-global-keywords":148,
"css-system-font-keywords":149,"pick-by-alias":511}],148:[function(b,K,G){K.exports=["inherit","initial","unset"]},{}],149:[function(b,K,G){K.exports="caption icon menu message-box small-caption status-bar".split(" ")},{}],150:[function(b,K,G){K.exports=function(q,m,l,h,a,g){var e=a-1,n=a*a,p=e*e,c=(1+2*a)*p;p*=a;a=n*(3-2*a);e*=n;if(q.length){g||(g=Array(q.length));for(n=q.length-1;0<=n;--n)g[n]=c*q[n]+p*m[n]+a*l[n]+e*h[n];return g}return c*q+p*m+a*l+e*h};K.exports.derivative=function(q,m,l,h,a,g){var e=
6*a*a-6*a,n=3*a*a-4*a+1,p=-6*a*a+6*a;a=3*a*a-2*a;if(q.length){g||(g=Array(q.length));for(var c=q.length-1;0<=c;--c)g[c]=e*q[c]+n*m[c]+p*l[c]+a*h[c];return g}return e*q+n*m+p*l[c]+a*h}},{}],151:[function(b,K,G){function q(){this.argTypes=[];this.shimArgs=[];this.arrayArgs=[];this.arrayBlockIndices=[];this.scalarArgs=[];this.offsetArgs=[];this.offsetArgIndex=[];this.indexArgs=[];this.shapeArgs=[];this.funcName="";this.post=this.body=this.pre=null;this.debug=!1}var m=b("./lib/thunk.js");K.exports=function(l){var h=
new q;h.pre=l.pre;h.body=l.body;h.post=l.post;var a=l.args.slice(0);h.argTypes=a;for(var g=0;g<a.length;++g){var e=a[g];if("array"===e||"object"===typeof e&&e.blockIndices){h.argTypes[g]="array";h.arrayArgs.push(g);h.arrayBlockIndices.push(e.blockIndices?e.blockIndices:0);h.shimArgs.push("array"+g);if(g<h.pre.args.length&&0<h.pre.args[g].count)throw Error("cwise: pre() block may not reference array args");if(g<h.post.args.length&&0<h.post.args[g].count)throw Error("cwise: post() block may not reference array args");
}else if("scalar"===e)h.scalarArgs.push(g),h.shimArgs.push("scalar"+g);else if("index"===e){h.indexArgs.push(g);if(g<h.pre.args.length&&0<h.pre.args[g].count)throw Error("cwise: pre() block may not reference array index");if(g<h.body.args.length&&h.body.args[g].lvalue)throw Error("cwise: body() block may not write to array index");if(g<h.post.args.length&&0<h.post.args[g].count)throw Error("cwise: post() block may not reference array index");}else if("shape"===e){h.shapeArgs.push(g);if(g<h.pre.args.length&&
h.pre.args[g].lvalue)throw Error("cwise: pre() block may not write to array shape");if(g<h.body.args.length&&h.body.args[g].lvalue)throw Error("cwise: body() block may not write to array shape");if(g<h.post.args.length&&h.post.args[g].lvalue)throw Error("cwise: post() block may not write to array shape");}else if("object"===typeof e&&e.offset)h.argTypes[g]="offset",h.offsetArgs.push({array:e.array,offset:e.offset}),h.offsetArgIndex.push(g);else throw Error("cwise: Unknown argument type "+a[g]);}if(0>=
h.arrayArgs.length)throw Error("cwise: No array arguments specified");if(h.pre.args.length>a.length)throw Error("cwise: Too many arguments in pre() block");if(h.body.args.length>a.length)throw Error("cwise: Too many arguments in body() block");if(h.post.args.length>a.length)throw Error("cwise: Too many arguments in post() block");h.debug=!!l.printCode||!!l.debug;h.funcName=l.funcName||"cwise";h.blockSize=l.blockSize||64;return m(h)}},{"./lib/thunk.js":153}],152:[function(b,K,G){function q(h,a,g){var e=
h.length,n=a.arrayArgs.length;a=0<a.indexArgs.length;var p=[],c=[],d=0,f,k;for(f=0;f<e;++f)c.push(["i",f,"=0"].join(""));for(k=0;k<n;++k)for(f=0;f<e;++f){var r=d;d=h[f];0===f?c.push(["d",k,"s",f,"=t",k,"p",d].join("")):c.push(["d",k,"s",f,"=(t",k,"p",d,"-s",r,"*t",k,"p",r,")"].join(""))}0<c.length&&p.push("var "+c.join(","));for(f=e-1;0<=f;--f)d=h[f],p.push(["for(i",f,"=0;i",f,"<s",d,";++i",f,"){"].join(""));p.push(g);for(f=0;f<e;++f){r=d;d=h[f];for(k=0;k<n;++k)p.push(["p",k,"+=d",k,"s",f].join(""));
a&&(0<f&&p.push(["index[",r,"]-=s",r].join("")),p.push(["++index[",d,"]"].join("")));p.push("}")}return p.join("\n")}function m(h,a,g){for(var e=h.body,n=[],p=[],c=0;c<h.args.length;++c){var d=h.args[c];if(!(0>=d.count)){var f=new RegExp(d.name,"g"),k="",r=a.arrayArgs.indexOf(c);switch(a.argTypes[c]){case "offset":var u=a.offsetArgIndex.indexOf(c);r=a.offsetArgs[u].array;k="+q"+u;case "array":k="p"+r+k;var v="l"+c;u="a"+r;if(0===a.arrayBlockIndices[r])1===d.count?"generic"===g[r]?d.lvalue?(n.push(["var ",
v,"=",u,".get(",k,")"].join("")),e=e.replace(f,v),p.push([u,".set(",k,",",v,")"].join(""))):e=e.replace(f,[u,".get(",k,")"].join("")):e=e.replace(f,[u,"[",k,"]"].join("")):"generic"===g[r]?(n.push(["var ",v,"=",u,".get(",k,")"].join("")),e=e.replace(f,v),d.lvalue&&p.push([u,".set(",k,",",v,")"].join(""))):(n.push(["var ",v,"=",u,"[",k,"]"].join("")),e=e.replace(f,v),d.lvalue&&p.push([u,"[",k,"]=",v].join("")));else{f=[d.name];d=[k];for(k=0;k<Math.abs(a.arrayBlockIndices[r]);k++)f.push("\\s*\\[([^\\]]+)\\]"),
d.push("$"+(k+1)+"*t"+r+"b"+k);f=new RegExp(f.join(""),"g");k=d.join("+");if("generic"===g[r])throw Error("cwise: Generic arrays not supported in combination with blocks!");e=e.replace(f,[u,"[",k,"]"].join(""))}break;case "scalar":e=e.replace(f,"Y"+a.scalarArgs.indexOf(c));break;case "index":e=e.replace(f,"index");break;case "shape":e=e.replace(f,"shape")}}}return[n.join("\n"),e,p.join("\n")].join("\n").trim()}var l=b("uniq");K.exports=function(h,a){for(var g=a[1].length-Math.abs(h.arrayBlockIndices[0])|
0,e=Array(h.arrayArgs.length),n=Array(h.arrayArgs.length),p=0;p<h.arrayArgs.length;++p)n[p]=a[2*p],e[p]=a[2*p+1];var c=[],d=[],f=[],k=[],r=[];for(p=0;p<h.arrayArgs.length;++p){0>h.arrayBlockIndices[p]?(f.push(0),k.push(g),c.push(g),d.push(g+h.arrayBlockIndices[p])):(f.push(h.arrayBlockIndices[p]),k.push(h.arrayBlockIndices[p]+g),c.push(0),d.push(h.arrayBlockIndices[p]));for(var u=[],v=0;v<e[p].length;v++)f[p]<=e[p][v]&&e[p][v]<k[p]&&u.push(e[p][v]-f[p]);r.push(u)}d=["SS"];k=["'use strict'"];u=[];
for(v=0;v<g;++v)u.push(["s",v,"=SS[",v,"]"].join(""));for(p=0;p<h.arrayArgs.length;++p){d.push("a"+p);d.push("t"+p);d.push("p"+p);for(v=0;v<g;++v)u.push(["t",p,"p",v,"=t",p,"[",f[p]+v,"]"].join(""));for(v=0;v<Math.abs(h.arrayBlockIndices[p]);++v)u.push(["t",p,"b",v,"=t",p,"[",c[p]+v,"]"].join(""))}for(p=0;p<h.scalarArgs.length;++p)d.push("Y"+p);0<h.shapeArgs.length&&u.push("shape=SS.slice(0)");if(0<h.indexArgs.length){v=Array(g);for(p=0;p<g;++p)v[p]="0";u.push(["index=[",v.join(","),"]"].join(""))}for(p=
0;p<h.offsetArgs.length;++p){c=h.offsetArgs[p];f=[];for(v=0;v<c.offset.length;++v)0!==c.offset[v]&&(1===c.offset[v]?f.push(["t",c.array,"p",v].join("")):f.push([c.offset[v],"*t",c.array,"p",v].join("")));0===f.length?u.push("q"+p+"=0"):u.push(["q",p,"=",f.join("+")].join(""))}p=l([].concat(h.pre.thisVars).concat(h.body.thisVars).concat(h.post.thisVars));u=u.concat(p);0<u.length&&k.push("var "+u.join(","));for(p=0;p<h.arrayArgs.length;++p)k.push("p"+p+"|=0");3<h.pre.body.length&&k.push(m(h.pre,h,n));
v=m(h.body,h,n);a:for(p=0,u=r[0].length;p<u;){for(c=1;c<r.length;++c)if(r[c][p]!==r[0][p])break a;++p}if(p<g){g=k.push;u=p;r=r[0];c=r.length;f=h.arrayArgs.length;for(var x=h.blockSize,C=0<h.indexArgs.length,z=[],y=0;y<f;++y)z.push(["var offset",y,"=p",y].join(""));for(y=u;y<c;++y)z.push(["for(var j"+y+"=SS[",r[y],"]|0;j",y,">0;){"].join("")),z.push(["if(j",y,"<",x,"){"].join("")),z.push(["s",r[y],"=j",y].join("")),z.push(["j",y,"=0"].join("")),z.push(["}else{s",r[y],"=",x].join("")),z.push(["j",y,
"-=",x,"}"].join("")),C&&z.push(["index[",r[y],"]=j",y].join(""));for(y=0;y<f;++y){x=["offset"+y];for(C=u;C<c;++C)x.push(["j",C,"*t",y,"p",r[C]].join(""));z.push(["p",y,"=(",x.join("+"),")"].join(""))}z.push(q(r,h,v));for(y=u;y<c;++y)z.push("}");r=z.join("\n");g.call(k,r)}else k.push(q(r[0],h,v));3<h.post.body.length&&k.push(m(h.post,h,n));h.debug&&console.log("-----Generated cwise routine for ",a,":\n"+k.join("\n")+"\n----------");h=h.funcName||"unnamed";e=e[0].join("s");a=Array(n.length);r=!0;for(g=
0;g<n.length;++g)v=n[g],u=(u=v.match(/\d+/))?u[0]:"",0===v.charAt(0)?a[g]="u"+v.charAt(1)+u:a[g]=v.charAt(0)+u,0<g&&(r=r&&a[g]===a[g-1]);n=r?a[0]:a.join("");n=[h,"_cwise_loop_",e,"m",p,n].join("");return(new Function(["function ",n,"(",d.join(","),"){",k.join("\n"),"} return ",n].join("")))()}},{uniq:597}],153:[function(b,K,G){var q=b("./compile.js");K.exports=function(m){var l=["'use strict'","var CACHED={}"],h=[];l.push(["return function ",m.funcName+"_cwise_thunk","(",m.shimArgs.join(","),"){"].join(""));
for(var a=[],g=[],e=[["array",m.arrayArgs[0],".shape.slice(",Math.max(0,m.arrayBlockIndices[0]),0>m.arrayBlockIndices[0]?","+m.arrayBlockIndices[0]+")":")"].join("")],n=[],p=[],c=0;c<m.arrayArgs.length;++c){var d=m.arrayArgs[c];h.push(["t",d,"=array",d,".dtype,r",d,"=array",d,".order"].join(""));a.push("t"+d);a.push("r"+d);g.push("t"+d);g.push("r"+d+".join()");e.push("array"+d+".data");e.push("array"+d+".stride");e.push("array"+d+".offset|0");0<c&&(n.push("array"+m.arrayArgs[0]+".shape.length===array"+
d+".shape.length+"+(Math.abs(m.arrayBlockIndices[0])-Math.abs(m.arrayBlockIndices[c]))),p.push("array"+m.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,m.arrayBlockIndices[0])+"]===array"+d+".shape[shapeIndex+"+Math.max(0,m.arrayBlockIndices[c])+"]"))}1<m.arrayArgs.length&&(l.push("if (!("+n.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),l.push("for(var shapeIndex=array"+m.arrayArgs[0]+".shape.length-"+Math.abs(m.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),
l.push("if (!("+p.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),l.push("}"));for(c=0;c<m.scalarArgs.length;++c)e.push("scalar"+m.scalarArgs[c]);h.push(["type=[",g.join(","),"].join()"].join(""));h.push("proc=CACHED[type]");l.push("var "+h.join(","));l.push(["if(!proc){CACHED[type]=proc=compile([",a.join(","),"])}return proc(",e.join(","),")}"].join(""));m.debug&&console.log("-----Generated thunk:\n"+l.join("\n")+"\n----------");return(new Function("compile",l.join("\n")))(q.bind(void 0,
m))}},{"./compile.js":152}],154:[function(b,K,G){var q=b("type/value/is"),m=b("type/value/ensure"),l=b("type/plain-function/ensure"),h=b("es5-ext/object/copy"),a=b("es5-ext/object/normalize-options"),g=b("es5-ext/object/map"),e=Function.prototype.bind,n=Object.defineProperty,p=Object.prototype.hasOwnProperty;var c=function(d,f,k){var r=m(f)&&l(f.value);var u=h(f);delete u.writable;delete u.value;u.get=function(){if(!k.overwriteDefinition&&p.call(this,d))return r;f.value=e.call(r,k.resolveContext?
k.resolveContext(this):this);n(this,d,f);return this[d]};return u};K.exports=function(d,f){var k=a(f);q(k.resolveContext)&&l(k.resolveContext);return g(d,function(r,u){return c(u,r,k)})}},{"es5-ext/object/copy":196,"es5-ext/object/map":204,"es5-ext/object/normalize-options":205,"type/plain-function/ensure":589,"type/value/ensure":593,"type/value/is":594}],155:[function(b,K,G){var q=b("type/value/is"),m=b("type/plain-function/is"),l=b("es5-ext/object/assign"),h=b("es5-ext/object/normalize-options"),
a=b("es5-ext/string/#/contains");(K.exports=function(g,e){if(2>arguments.length||"string"!==typeof g){var n=e;e=g;g=null}else n=arguments[2];if(q(g)){var p=a.call(g,"c");var c=a.call(g,"e");var d=a.call(g,"w")}else p=d=!0,c=!1;p={value:e,configurable:p,enumerable:c,writable:d};return n?l(h(n),p):p}).gs=function(g,e,n,p){"string"!==typeof g&&(p=n,n=e,e=g,g=null);q(e)?m(e)?q(n)?m(n)||(p=n,n=void 0):n=void 0:(p=e,e=n=void 0):e=void 0;if(q(g)){var c=a.call(g,"c");g=a.call(g,"e")}else c=!0,g=!1;e={get:e,
set:n,configurable:c,enumerable:g};return p?l(h(p),e):e}},{"es5-ext/object/assign":193,"es5-ext/object/normalize-options":205,"es5-ext/string/#/contains":212,"type/plain-function/is":590,"type/value/is":594}],156:[function(b,K,G){(function(q,m){"object"===typeof G&&"undefined"!==typeof K?m(G):m(q.d3=q.d3||{})})(this,function(q){function m(L,H){return L<H?-1:L>H?1:L>=H?0:NaN}function l(L){1===L.length&&(L=h(L));return{left:function(H,P,M,N){null==M&&(M=0);null==N&&(N=H.length);for(;M<N;){var T=M+N>>>
1;0>L(H[T],P)?M=T+1:N=T}return M},right:function(H,P,M,N){null==M&&(M=0);null==N&&(N=H.length);for(;M<N;){var T=M+N>>>1;0<L(H[T],P)?N=T:M=T+1}return M}}}function h(L){return function(H,P){return m(L(H),P)}}function a(L,H){return[L,H]}function g(L){return null===L?NaN:+L}function e(L,H){var P=L.length,M=0,N=-1,T=0,Q,U=0;if(null==H)for(;++N<P;){if(!isNaN(Q=g(L[N]))){var S=Q-T;T+=S/++M;U+=S*(Q-T)}}else for(;++N<P;)isNaN(Q=g(H(L[N],N,L)))||(S=Q-T,T+=S/++M,U+=S*(Q-T));if(1<M)return U/(M-1)}function n(L,
H){return(L=e(L,H))?Math.sqrt(L):L}function p(L,H){var P=L.length,M=-1,N,T,Q;if(null==H)for(;++M<P;){if(null!=(N=L[M])&&N>=N)for(T=Q=N;++M<P;)null!=(N=L[M])&&(T>N&&(T=N),Q<N&&(Q=N))}else for(;++M<P;)if(null!=(N=H(L[M],M,L))&&N>=N)for(T=Q=N;++M<P;)null!=(N=H(L[M],M,L))&&(T>N&&(T=N),Q<N&&(Q=N));return[T,Q]}function c(L){return function(){return L}}function d(L){return L}function f(L,H,P){L=+L;H=+H;P=2>(N=arguments.length)?(H=L,L=0,1):3>N?1:+P;for(var M=-1,N=Math.max(0,Math.ceil((H-L)/P))|0,T=Array(N);++M<
N;)T[M]=L+M*P;return T}function k(L,H,P){H=(H-L)/Math.max(0,P);L=Math.floor(Math.log(H)/Math.LN10);H/=Math.pow(10,L);return 0<=L?(H>=F?10:H>=I?5:H>=J?2:1)*Math.pow(10,L):-Math.pow(10,-L)/(H>=F?10:H>=I?5:H>=J?2:1)}function r(L,H,P){var M=Math.abs(H-L)/Math.max(0,P);P=Math.pow(10,Math.floor(Math.log(M)/Math.LN10));M/=P;M>=F?P*=10:M>=I?P*=5:M>=J&&(P*=2);return H<L?-P:P}function u(L){return Math.ceil(Math.log(L.length)/Math.LN2)+1}function v(L,H,P){null==P&&(P=g);if(M=L.length){if(0>=(H=+H)||2>M)return+P(L[0],
0,L);if(1<=H)return+P(L[M-1],M-1,L);var M;H*=M-1;M=Math.floor(H);var N=+P(L[M],M,L);L=+P(L[M+1],M+1,L);return N+(L-N)*(H-M)}}function x(L,H){var P=L.length,M=-1,N,T;if(null==H)for(;++M<P;){if(null!=(N=L[M])&&N>=N)for(T=N;++M<P;)null!=(N=L[M])&&T>N&&(T=N)}else for(;++M<P;)if(null!=(N=H(L[M],M,L))&&N>=N)for(T=N;++M<P;)null!=(N=H(L[M],M,L))&&T>N&&(T=N);return T}function C(L){if(!(T=L.length))return[];for(var H=-1,P=x(L,z),M=Array(P);++H<P;)for(var N=-1,T,Q=M[H]=Array(T);++N<T;)Q[N]=L[N][H];return M}
function z(L){return L.length}var y=l(m),D=y.right;y=y.left;var A=Array.prototype,t=A.slice,B=A.map,F=Math.sqrt(50),I=Math.sqrt(10),J=Math.sqrt(2);q.bisect=D;q.bisectRight=D;q.bisectLeft=y;q.ascending=m;q.bisector=l;q.cross=function(L,H,P){var M=L.length,N=H.length,T=Array(M*N),Q,U,S;null==P&&(P=a);for(Q=S=0;Q<M;++Q){var X=L[Q];for(U=0;U<N;++U,++S)T[S]=P(X,H[U])}return T};q.descending=function(L,H){return H<L?-1:H>L?1:H>=L?0:NaN};q.deviation=n;q.extent=p;q.histogram=function(){function L(N){var T,
Q=N.length,U=Array(Q);for(T=0;T<Q;++T)U[T]=H(N[T],T,N);T=P(U);var S=T[0],X=T[1],Z=M(U,S,X);Array.isArray(Z)||(Z=r(S,X,Z),Z=f(Math.ceil(S/Z)*Z,X,Z));for(var aa=Z.length;Z[0]<=S;)Z.shift(),--aa;for(;Z[aa-1]>X;)Z.pop(),--aa;var fa=Array(aa+1);for(T=0;T<=aa;++T){var ha=fa[T]=[];ha.x0=0<T?Z[T-1]:S;ha.x1=T<aa?Z[T]:X}for(T=0;T<Q;++T)ha=U[T],S<=ha&&ha<=X&&fa[D(Z,ha,0,aa)].push(N[T]);return fa}var H=d,P=p,M=u;L.value=function(N){return arguments.length?(H="function"===typeof N?N:c(N),L):H};L.domain=function(N){return arguments.length?
(P="function"===typeof N?N:c([N[0],N[1]]),L):P};L.thresholds=function(N){return arguments.length?(M="function"===typeof N?N:Array.isArray(N)?c(t.call(N)):c(N),L):M};return L};q.thresholdFreedmanDiaconis=function(L,H,P){L=B.call(L,g).sort(m);return Math.ceil((P-H)/(2*(v(L,.75)-v(L,.25))*Math.pow(L.length,-1/3)))};q.thresholdScott=function(L,H,P){return Math.ceil((P-H)/(3.5*n(L)*Math.pow(L.length,-1/3)))};q.thresholdSturges=u;q.max=function(L,H){var P=L.length,M=-1,N,T;if(null==H)for(;++M<P;){if(null!=
(N=L[M])&&N>=N)for(T=N;++M<P;)null!=(N=L[M])&&N>T&&(T=N)}else for(;++M<P;)if(null!=(N=H(L[M],M,L))&&N>=N)for(T=N;++M<P;)null!=(N=H(L[M],M,L))&&N>T&&(T=N);return T};q.mean=function(L,H){var P=L.length,M=P,N=-1,T,Q=0;if(null==H)for(;++N<P;)isNaN(T=g(L[N]))?--M:Q+=T;else for(;++N<P;)isNaN(T=g(H(L[N],N,L)))?--M:Q+=T;if(M)return Q/M};q.median=function(L,H){var P=L.length,M=-1,N,T=[];if(null==H)for(;++M<P;)isNaN(N=g(L[M]))||T.push(N);else for(;++M<P;)isNaN(N=g(H(L[M],M,L)))||T.push(N);return v(T.sort(m),
.5)};q.merge=function(L){var H=L.length;var P=-1;for(var M=0,N,T;++P<H;)M+=L[P].length;for(N=Array(M);0<=--H;)for(T=L[H],P=T.length;0<=--P;)N[--M]=T[P];return N};q.min=x;q.pairs=function(L,H){null==H&&(H=a);for(var P=0,M=L.length-1,N=L[0],T=Array(0>M?0:M);P<M;)T[P]=H(N,N=L[++P]);return T};q.permute=function(L,H){for(var P=H.length,M=Array(P);P--;)M[P]=L[H[P]];return M};q.quantile=v;q.range=f;q.scan=function(L,H){if(P=L.length){var P,M=0,N=0,T,Q=L[N];for(null==H&&(H=m);++M<P;)if(0>H(T=L[M],Q)||0!==
H(Q,Q))Q=T,N=M;if(0===H(Q,Q))return N}};q.shuffle=function(L,H,P){P=(null==P?L.length:P)-(H=null==H?0:+H);for(var M,N;P;)N=Math.random()*P--|0,M=L[P+H],L[P+H]=L[N+H],L[N+H]=M;return L};q.sum=function(L,H){var P=L.length,M=-1,N,T=0;if(null==H)for(;++M<P;){if(N=+L[M])T+=N}else for(;++M<P;)if(N=+H(L[M],M,L))T+=N;return T};q.ticks=function(L,H,P){var M,N=-1,T;H=+H;L=+L;P=+P;if(L===H&&0<P)return[L];if(M=H<L){var Q=L;L=H;H=Q}if(0===(T=k(L,H,P))||!isFinite(T))return[];if(0<T)for(L=Math.ceil(L/T),H=Math.floor(H/
T),H=Array(Q=Math.ceil(H-L+1));++N<Q;)H[N]=(L+N)*T;else for(L=Math.floor(L*T),H=Math.ceil(H*T),H=Array(Q=Math.ceil(L-H+1));++N<Q;)H[N]=(L-N)/T;M&&H.reverse();return H};q.tickIncrement=k;q.tickStep=r;q.transpose=C;q.variance=e;q.zip=function(){return C(arguments)};Object.defineProperty(q,"__esModule",{value:!0})})},{}],157:[function(b,K,G){(function(q,m){"object"===typeof G&&"undefined"!==typeof K?m(G):m(q.d3=q.d3||{})})(this,function(q){function m(){}function l(d,f){var k=new m;if(d instanceof m)d.each(function(x,
C){k.set(C,x)});else if(Array.isArray(d)){var r=-1,u=d.length,v;if(null==f)for(;++r<u;)k.set(r,d[r]);else for(;++r<u;)k.set(f(v=d[r],r,d),v)}else if(d)for(r in d)k.set(r,d[r]);return k}function h(){return{}}function a(d,f,k){d[f]=k}function g(){return l()}function e(d,f,k){d.set(f,k)}function n(){}function p(d,f){var k=new n;if(d instanceof n)d.each(function(v){k.add(v)});else if(d){var r=-1,u=d.length;if(null==f)for(;++r<u;)k.add(d[r]);else for(;++r<u;)k.add(f(d[r],r,d))}return k}m.prototype=l.prototype=
{constructor:m,has:function(d){return"$"+d in this},get:function(d){return this["$"+d]},set:function(d,f){this["$"+d]=f;return this},remove:function(d){d="$"+d;return d in this&&delete this[d]},clear:function(){for(var d in this)"$"===d[0]&&delete this[d]},keys:function(){var d=[],f;for(f in this)"$"===f[0]&&d.push(f.slice(1));return d},values:function(){var d=[],f;for(f in this)"$"===f[0]&&d.push(this[f]);return d},entries:function(){var d=[],f;for(f in this)"$"===f[0]&&d.push({key:f.slice(1),value:this[f]});
return d},size:function(){var d=0,f;for(f in this)"$"===f[0]&&++d;return d},empty:function(){for(var d in this)if("$"===d[0])return!1;return!0},each:function(d){for(var f in this)"$"===f[0]&&d(this[f],f.slice(1),this)}};var c=l.prototype;n.prototype=p.prototype={constructor:n,has:c.has,add:function(d){d+="";this["$"+d]=d;return this},remove:c.remove,clear:c.clear,values:c.keys,size:c.size,empty:c.empty,each:c.each};q.nest=function(){function d(C,z,y,D){if(z>=k.length)return null!=u&&C.sort(u),null!=
v?v(C):C;for(var A=-1,t=C.length,B=k[z++],F,I,J=l(),L,H=y();++A<t;)(L=J.get(F=B(I=C[A])+""))?L.push(I):J.set(F,[I]);J.each(function(P,M){D(H,M,d(P,z,y,D))});return H}function f(C,z){if(++z>k.length)return C;var y=r[z-1];if(null!=v&&z>=k.length)var D=C.entries();else D=[],C.each(function(A,t){D.push({key:t,values:f(A,z)})});return null!=y?D.sort(function(A,t){return y(A.key,t.key)}):D}var k=[],r=[],u,v,x;return x={object:function(C){return d(C,0,h,a)},map:function(C){return d(C,0,g,e)},entries:function(C){return f(d(C,
0,g,e),0)},key:function(C){k.push(C);return x},sortKeys:function(C){r[k.length-1]=C;return x},sortValues:function(C){u=C;return x},rollup:function(C){v=C;return x}}};q.set=p;q.map=l;q.keys=function(d){var f=[],k;for(k in d)f.push(k);return f};q.values=function(d){var f=[],k;for(k in d)f.push(d[k]);return f};q.entries=function(d){var f=[],k;for(k in d)f.push({key:k,value:d[k]});return f};Object.defineProperty(q,"__esModule",{value:!0})})},{}],158:[function(b,K,G){(function(q,m){"object"===typeof G&&
"undefined"!==typeof K?m(G):(q=q||self,m(q.d3=q.d3||{}))})(this,function(q){function m(ia,sa,ta){ia.prototype=sa.prototype=ta;ta.constructor=ia}function l(ia,sa){ia=Object.create(ia.prototype);for(var ta in sa)ia[ta]=sa[ta];return ia}function h(){}function a(){return this.rgb().formatHex()}function g(){return this.rgb().formatRgb()}function e(ia){var sa,ta;ia=(ia+"").trim().toLowerCase();return(sa=U.exec(ia))?(ta=sa[1].length,sa=parseInt(sa[1],16),6===ta?n(sa):3===ta?new f(sa>>8&15|sa>>4&240,sa>>
4&15|sa&240,(sa&15)<<4|sa&15,1):8===ta?p(sa>>24&255,sa>>16&255,sa>>8&255,(sa&255)/255):4===ta?p(sa>>12&15|sa>>8&240,sa>>8&15|sa>>4&240,sa>>4&15|sa&240,((sa&15)<<4|sa&15)/255):null):(sa=S.exec(ia))?new f(sa[1],sa[2],sa[3],1):(sa=X.exec(ia))?new f(255*sa[1]/100,255*sa[2]/100,255*sa[3]/100,1):(sa=Z.exec(ia))?p(sa[1],sa[2],sa[3],sa[4]):(sa=aa.exec(ia))?p(255*sa[1]/100,255*sa[2]/100,255*sa[3]/100,sa[4]):(sa=fa.exec(ia))?v(sa[1],sa[2]/100,sa[3]/100,1):(sa=ha.exec(ia))?v(sa[1],sa[2]/100,sa[3]/100,sa[4]):
ja.hasOwnProperty(ia)?n(ja[ia]):"transparent"===ia?new f(NaN,NaN,NaN,0):null}function n(ia){return new f(ia>>16&255,ia>>8&255,ia&255,1)}function p(ia,sa,ta,Aa){0>=Aa&&(ia=sa=ta=NaN);return new f(ia,sa,ta,Aa)}function c(ia){ia instanceof h||(ia=e(ia));if(!ia)return new f;ia=ia.rgb();return new f(ia.r,ia.g,ia.b,ia.opacity)}function d(ia,sa,ta,Aa){return 1===arguments.length?c(ia):new f(ia,sa,ta,null==Aa?1:Aa)}function f(ia,sa,ta,Aa){this.r=+ia;this.g=+sa;this.b=+ta;this.opacity=+Aa}function k(){return"#"+
u(this.r)+u(this.g)+u(this.b)}function r(){var ia=this.opacity;ia=isNaN(ia)?1:Math.max(0,Math.min(1,ia));return(1===ia?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===ia?")":", "+ia+")")}function u(ia){ia=Math.max(0,Math.min(255,Math.round(ia)||0));return(16>ia?"0":"")+ia.toString(16)}function v(ia,sa,ta,Aa){0>=Aa?ia=sa=ta=NaN:0>=ta||1<=ta?ia=sa=NaN:0>=sa&&(ia=NaN);return new z(ia,
sa,ta,Aa)}function x(ia){if(ia instanceof z)return new z(ia.h,ia.s,ia.l,ia.opacity);ia instanceof h||(ia=e(ia));if(!ia)return new z;if(ia instanceof z)return ia;ia=ia.rgb();var sa=ia.r/255,ta=ia.g/255,Aa=ia.b/255,Ka=Math.min(sa,ta,Aa),Sa=Math.max(sa,ta,Aa),db=NaN,eb=Sa-Ka,lb=(Sa+Ka)/2;eb?(db=sa===Sa?(ta-Aa)/eb+6*(ta<Aa):ta===Sa?(Aa-sa)/eb+2:(sa-ta)/eb+4,eb/=.5>lb?Sa+Ka:2-Sa-Ka,db*=60):eb=0<lb&&1>lb?0:db;return new z(db,eb,lb,ia.opacity)}function C(ia,sa,ta,Aa){return 1===arguments.length?x(ia):new z(ia,
sa,ta,null==Aa?1:Aa)}function z(ia,sa,ta,Aa){this.h=+ia;this.s=+sa;this.l=+ta;this.opacity=+Aa}function y(ia,sa,ta){return 255*(60>ia?sa+(ta-sa)*ia/60:180>ia?ta:240>ia?sa+(ta-sa)*(240-ia)/60:sa)}function D(ia){if(ia instanceof t)return new t(ia.l,ia.a,ia.b,ia.opacity);if(ia instanceof P)return M(ia);ia instanceof f||(ia=c(ia));var sa=J(ia.r),ta=J(ia.g),Aa=J(ia.b),Ka=B(.2225045*sa+.7168786*ta+.0606169*Aa);if(sa===ta&&ta===Aa)var Sa=sa=Ka;else Sa=B((.4360747*sa+.3850649*ta+.1430804*Aa)/.96422),sa=B((.0139322*
sa+.0971045*ta+.7141733*Aa)/.82521);return new t(116*Ka-16,500*(Sa-Ka),200*(Ka-sa),ia.opacity)}function A(ia,sa,ta,Aa){return 1===arguments.length?D(ia):new t(ia,sa,ta,null==Aa?1:Aa)}function t(ia,sa,ta,Aa){this.l=+ia;this.a=+sa;this.b=+ta;this.opacity=+Aa}function B(ia){return ia>na?Math.pow(ia,1/3):ia/oa+qa}function F(ia){return ia>ka?ia*ia*ia:oa*(ia-qa)}function I(ia){return 255*(.0031308>=ia?12.92*ia:1.055*Math.pow(ia,1/2.4)-.055)}function J(ia){return.04045>=(ia/=255)?ia/12.92:Math.pow((ia+.055)/
1.055,2.4)}function L(ia){if(ia instanceof P)return new P(ia.h,ia.c,ia.l,ia.opacity);ia instanceof t||(ia=D(ia));if(0===ia.a&&0===ia.b)return new P(NaN,0<ia.l&&100>ia.l?0:NaN,ia.l,ia.opacity);var sa=Math.atan2(ia.b,ia.a)*ma;return new P(0>sa?sa+360:sa,Math.sqrt(ia.a*ia.a+ia.b*ia.b),ia.l,ia.opacity)}function H(ia,sa,ta,Aa){return 1===arguments.length?L(ia):new P(ia,sa,ta,null==Aa?1:Aa)}function P(ia,sa,ta,Aa){this.h=+ia;this.c=+sa;this.l=+ta;this.opacity=+Aa}function M(ia){if(isNaN(ia.h))return new t(ia.l,
0,0,ia.opacity);var sa=ia.h*ba;return new t(ia.l,Math.cos(sa)*ia.c,Math.sin(sa)*ia.c,ia.opacity)}function N(ia,sa,ta,Aa){if(1===arguments.length){var Ka=ia;if(Ka instanceof T)Ka=new T(Ka.h,Ka.s,Ka.l,Ka.opacity);else{Ka instanceof f||(Ka=c(Ka));var Sa=Ka.g/255,db=Ka.b/255,eb=(la*db+Ka.r/255*-1.7884503806-3.5172982438*Sa)/(la+-1.7884503806-3.5172982438);db-=eb;var lb=(1.97294*(Sa-eb)- -.29227*db)/-.90649;db=(Sa=Math.sqrt(lb*lb+db*db)/(1.97294*eb*(1-eb)))?Math.atan2(lb,db)*ma-120:NaN;Ka=new T(0>db?db+
360:db,Sa,eb,Ka.opacity)}}else Ka=new T(ia,sa,ta,null==Aa?1:Aa);return Ka}function T(ia,sa,ta,Aa){this.h=+ia;this.s=+sa;this.l=+ta;this.opacity=+Aa}var Q=1/.7,U=/^#([0-9a-f]{3,8})$/,S=/^rgb\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*\)$/,X=/^rgb\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,Z=/^rgba\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,aa=/^rgba\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,
fa=/^hsl\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,ha=/^hsla\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,ja={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,
burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,
darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,
lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,
mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,
red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};m(h,e,{copy:function(ia){return Object.assign(new this.constructor,
this,ia)},displayable:function(){return this.rgb().displayable()},hex:a,formatHex:a,formatHsl:function(){return x(this).formatHsl()},formatRgb:g,toString:g});m(f,d,l(h,{brighter:function(ia){ia=null==ia?Q:Math.pow(Q,ia);return new f(this.r*ia,this.g*ia,this.b*ia,this.opacity)},darker:function(ia){ia=null==ia?.7:Math.pow(.7,ia);return new f(this.r*ia,this.g*ia,this.b*ia,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&255.5>this.r&&-.5<=this.g&&255.5>this.g&&-.5<=
this.b&&255.5>this.b&&0<=this.opacity&&1>=this.opacity},hex:k,formatHex:k,formatRgb:r,toString:r}));m(z,C,l(h,{brighter:function(ia){ia=null==ia?Q:Math.pow(Q,ia);return new z(this.h,this.s,this.l*ia,this.opacity)},darker:function(ia){ia=null==ia?.7:Math.pow(.7,ia);return new z(this.h,this.s,this.l*ia,this.opacity)},rgb:function(){var ia=this.h%360+360*(0>this.h),sa=isNaN(ia)||isNaN(this.s)?0:this.s,ta=this.l;sa=ta+(.5>ta?ta:1-ta)*sa;ta=2*ta-sa;return new f(y(240<=ia?ia-240:ia+120,ta,sa),y(ia,ta,sa),
y(120>ia?ia+240:ia-120,ta,sa),this.opacity)},displayable:function(){return(0<=this.s&&1>=this.s||isNaN(this.s))&&0<=this.l&&1>=this.l&&0<=this.opacity&&1>=this.opacity},formatHsl:function(){var ia=this.opacity;ia=isNaN(ia)?1:Math.max(0,Math.min(1,ia));return(1===ia?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===ia?")":", "+ia+")")}}));var ba=Math.PI/180,ma=180/Math.PI,qa=4/29,ka=6/29,oa=3*ka*ka,na=ka*ka*ka;m(t,A,l(h,{brighter:function(ia){return new t(this.l+18*(null==
ia?1:ia),this.a,this.b,this.opacity)},darker:function(ia){return new t(this.l-18*(null==ia?1:ia),this.a,this.b,this.opacity)},rgb:function(){var ia=(this.l+16)/116,sa=isNaN(this.a)?ia:ia+this.a/500,ta=isNaN(this.b)?ia:ia-this.b/200;sa=.96422*F(sa);ia=1*F(ia);ta=.82521*F(ta);return new f(I(3.1338561*sa-1.6168667*ia-.4906146*ta),I(-.9787684*sa+1.9161415*ia+.033454*ta),I(.0719453*sa-.2289914*ia+1.4052427*ta),this.opacity)}}));m(P,H,l(h,{brighter:function(ia){return new P(this.h,this.c,this.l+18*(null==
ia?1:ia),this.opacity)},darker:function(ia){return new P(this.h,this.c,this.l-18*(null==ia?1:ia),this.opacity)},rgb:function(){return M(this).rgb()}}));var la=1.78277*-.29227-.1347134789;m(T,N,l(h,{brighter:function(ia){ia=null==ia?Q:Math.pow(Q,ia);return new T(this.h,this.s,this.l*ia,this.opacity)},darker:function(ia){ia=null==ia?.7:Math.pow(.7,ia);return new T(this.h,this.s,this.l*ia,this.opacity)},rgb:function(){var ia=isNaN(this.h)?0:(this.h+120)*ba,sa=+this.l,ta=isNaN(this.s)?0:this.s*sa*(1-
sa),Aa=Math.cos(ia);ia=Math.sin(ia);return new f(255*(sa+ta*(-.14861*Aa+1.78277*ia)),255*(sa+ta*(-.29227*Aa+-.90649*ia)),255*(sa+1.97294*ta*Aa),this.opacity)}}));q.color=e;q.cubehelix=N;q.gray=function(ia,sa){return new t(ia,0,0,null==sa?1:sa)};q.hcl=H;q.hsl=C;q.lab=A;q.lch=function(ia,sa,ta,Aa){return 1===arguments.length?L(ia):new P(ta,sa,ia,null==Aa?1:Aa)};q.rgb=d;Object.defineProperty(q,"__esModule",{value:!0})})},{}],159:[function(b,K,G){(function(q,m){"object"===typeof G&&"undefined"!==typeof K?
m(G):(q=q||self,m(q.d3=q.d3||{}))})(this,function(q){function m(){for(var e=0,n=arguments.length,p={},c;e<n;++e){if(!(c=arguments[e]+"")||c in p||/[\s.]/.test(c))throw Error("illegal type: "+c);p[c]=[]}return new l(p)}function l(e){this._=e}function h(e,n){return e.trim().split(/^|\s+/).map(function(p){var c="",d=p.indexOf(".");0<=d&&(c=p.slice(d+1),p=p.slice(0,d));if(p&&!n.hasOwnProperty(p))throw Error("unknown type: "+p);return{type:p,name:c}})}function a(e,n,p){for(var c=0,d=e.length;c<d;++c)if(e[c].name===
n){e[c]=g;e=e.slice(0,c).concat(e.slice(c+1));break}null!=p&&e.push({name:n,value:p});return e}var g={value:function(){}};l.prototype=m.prototype={constructor:l,on:function(e,n){var p=this._,c=h(e+"",p),d,f=-1,k=c.length;if(2>arguments.length)for(;++f<k;){var r;if(r=d=(e=c[f]).type){a:{r=p[d];for(var u=0,v=r.length;u<v;++u)if((d=r[u]).name===e.name){d=d.value;break a}d=void 0}r=d}if(r)return d}else{if(null!=n&&"function"!==typeof n)throw Error("invalid callback: "+n);for(;++f<k;)if(d=(e=c[f]).type)p[d]=
a(p[d],e.name,n);else if(null==n)for(d in p)p[d]=a(p[d],e.name,null);return this}},copy:function(){var e={},n=this._,p;for(p in n)e[p]=n[p].slice();return new l(e)},call:function(e,n){if(0<(d=arguments.length-2))for(var p=Array(d),c=0,d,f;c<d;++c)p[c]=arguments[c+2];if(!this._.hasOwnProperty(e))throw Error("unknown type: "+e);f=this._[e];c=0;for(d=f.length;c<d;++c)f[c].value.apply(n,p)},apply:function(e,n,p){if(!this._.hasOwnProperty(e))throw Error("unknown type: "+e);e=this._[e];for(var c=0,d=e.length;c<
d;++c)e[c].value.apply(n,p)}};q.dispatch=m;Object.defineProperty(q,"__esModule",{value:!0})})},{}],160:[function(b,K,G){(function(q,m){"object"===typeof G&&"undefined"!==typeof K?m(G,b("d3-quadtree"),b("d3-collection"),b("d3-dispatch"),b("d3-timer")):m(q.d3=q.d3||{},q.d3,q.d3,q.d3,q.d3)})(this,function(q,m,l,h,a){function g(u){return function(){return u}}function e(){return 1E-6*(Math.random()-.5)}function n(u){return u.x+u.vx}function p(u){return u.y+u.vy}function c(u){return u.index}function d(u,
v){u=u.get(v);if(!u)throw Error("missing: "+v);return u}function f(u){return u.x}function k(u){return u.y}var r=Math.PI*(3-Math.sqrt(5));q.forceCenter=function(u,v){function x(){var z,y=C.length,D=0,A=0;for(z=0;z<y;++z){var t=C[z];D+=t.x;A+=t.y}D=D/y-u;A=A/y-v;for(z=0;z<y;++z)t=C[z],t.x-=D,t.y-=A}var C;null==u&&(u=0);null==v&&(v=0);x.initialize=function(z){C=z};x.x=function(z){return arguments.length?(u=+z,x):u};x.y=function(z){return arguments.length?(v=+z,x):v};return x};q.forceCollide=function(u){function v(){function t(T,
Q,U,S,X){var Z=T.data;T=T.r;var aa=P+T;if(Z)Z.index>J.index&&(Q=L-Z.x-Z.vx,U=H-Z.y-Z.vy,S=Q*Q+U*U,S<aa*aa&&(0===Q&&(Q=e(),S+=Q*Q),0===U&&(U=e(),S+=U*U),S=(aa-(S=Math.sqrt(S)))/S*D,J.vx+=(Q*=S)*(aa=(T*=T)/(M+T)),J.vy+=(U*=S)*aa,Z.vx-=Q*(aa=1-aa),Z.vy-=U*aa));else return Q>L+aa||S<L-aa||U>H+aa||X<H-aa}for(var B,F=z.length,I,J,L,H,P,M,N=0;N<A;++N)for(I=m.quadtree(z,n,p).visitAfter(x),B=0;B<F;++B)J=z[B],P=y[J.index],M=P*P,L=J.x+J.vx,H=J.y+J.vy,I.visit(t)}function x(t){if(t.data)return t.r=y[t.data.index];
for(var B=t.r=0;4>B;++B)t[B]&&t[B].r>t.r&&(t.r=t[B].r)}function C(){if(z){var t,B=z.length;y=Array(B);for(t=0;t<B;++t){var F=z[t];y[F.index]=+u(F,t,z)}}}var z,y,D=1,A=1;"function"!==typeof u&&(u=g(null==u?1:+u));v.initialize=function(t){z=t;C()};v.iterations=function(t){return arguments.length?(A=+t,v):A};v.strength=function(t){return arguments.length?(D=+t,v):D};v.radius=function(t){return arguments.length?(u="function"===typeof t?t:g(+t),C(),v):u};return v};q.forceLink=function(u){function v(H){for(var P=
0,M=u.length;P<L;++P)for(var N=0,T,Q,U,S,X;N<M;++N)T=u[N],Q=T.source,T=T.target,U=T.x+T.vx-Q.x-Q.vx||e(),S=T.y+T.vy-Q.y-Q.vy||e(),X=Math.sqrt(U*U+S*S),X=(X-B[N])/X*H*A[N],U*=X,S*=X,T.vx-=U*(X=J[N]),T.vy-=S*X,Q.vx+=U*(X=1-X),Q.vy+=S*X}function x(){if(F){var H=F.length,P=u.length,M=l.map(F,y);var N=0;for(I=Array(H);N<P;++N)H=u[N],H.index=N,"object"!==typeof H.source&&(H.source=d(M,H.source)),"object"!==typeof H.target&&(H.target=d(M,H.target)),I[H.source.index]=(I[H.source.index]||0)+1,I[H.target.index]=
(I[H.target.index]||0)+1;N=0;for(J=Array(P);N<P;++N)H=u[N],J[N]=I[H.source.index]/(I[H.source.index]+I[H.target.index]);A=Array(P);C();B=Array(P);z()}}function C(){if(F)for(var H=0,P=u.length;H<P;++H)A[H]=+D(u[H],H,u)}function z(){if(F)for(var H=0,P=u.length;H<P;++H)B[H]=+t(u[H],H,u)}var y=c,D=function(H){return 1/Math.min(I[H.source.index],I[H.target.index])},A,t=g(30),B,F,I,J,L=1;null==u&&(u=[]);v.initialize=function(H){F=H;x()};v.links=function(H){return arguments.length?(u=H,x(),v):u};v.id=function(H){return arguments.length?
(y=H,v):y};v.iterations=function(H){return arguments.length?(L=+H,v):L};v.strength=function(H){return arguments.length?(D="function"===typeof H?H:g(+H),C(),v):D};v.distance=function(H){return arguments.length?(t="function"===typeof H?H:g(+H),z(),v):t};return v};q.forceManyBody=function(){function u(J){var L=z.length,H=m.quadtree(z,f,k).visitAfter(x);D=J;for(J=0;J<L;++J)y=z[J],H.visit(C)}function v(){if(z){var J,L=z.length;t=Array(L);for(J=0;J<L;++J){var H=z[J];t[H.index]=+A(H,J,z)}}}function x(J){var L=
0,H,P,M=0,N,T,Q;if(J.length){for(N=T=Q=0;4>Q;++Q)(H=J[Q])&&(P=Math.abs(H.value))&&(L+=H.value,M+=P,N+=P*H.x,T+=P*H.y);J.x=N/M;J.y=T/M}else{H=J;H.x=H.data.x;H.y=H.data.y;do L+=t[H.data.index];while(H=H.next)}J.value=L}function C(J,L,H,P){if(!J.value)return!0;H=J.x-y.x;var M=J.y-y.y;L=P-L;P=H*H+M*M;if(L*L/I<P)return P<F&&(0===H&&(H=e(),P+=H*H),0===M&&(M=e(),P+=M*M),P<B&&(P=Math.sqrt(B*P)),y.vx+=H*J.value*D/P,y.vy+=M*J.value*D/P),!0;if(!(J.length||P>=F)){if(J.data!==y||J.next)0===H&&(H=e(),P+=H*H),0===
M&&(M=e(),P+=M*M),P<B&&(P=Math.sqrt(B*P));do J.data!==y&&(L=t[J.data.index]*D/P,y.vx+=H*L,y.vy+=M*L);while(J=J.next)}}var z,y,D,A=g(-30),t,B=1,F=Infinity,I=.81;u.initialize=function(J){z=J;v()};u.strength=function(J){return arguments.length?(A="function"===typeof J?J:g(+J),v(),u):A};u.distanceMin=function(J){return arguments.length?(B=J*J,u):Math.sqrt(B)};u.distanceMax=function(J){return arguments.length?(F=J*J,u):Math.sqrt(F)};u.theta=function(J){return arguments.length?(I=J*J,u):Math.sqrt(I)};return u};
q.forceRadial=function(u,v,x){function C(B){for(var F=0,I=y.length;F<I;++F){var J=y[F],L=J.x-v||1E-6,H=J.y-x||1E-6,P=Math.sqrt(L*L+H*H);P=(t[F]-P)*A[F]*B/P;J.vx+=L*P;J.vy+=H*P}}function z(){if(y){var B,F=y.length;A=Array(F);t=Array(F);for(B=0;B<F;++B)t[B]=+u(y[B],B,y),A[B]=isNaN(t[B])?0:+D(y[B],B,y)}}var y,D=g(.1),A,t;"function"!==typeof u&&(u=g(+u));null==v&&(v=0);null==x&&(x=0);C.initialize=function(B){y=B;z()};C.strength=function(B){return arguments.length?(D="function"===typeof B?B:g(+B),z(),
C):D};C.radius=function(B){return arguments.length?(u="function"===typeof B?B:g(+B),z(),C):u};C.x=function(B){return arguments.length?(v=+B,C):v};C.y=function(B){return arguments.length?(x=+B,C):x};return C};q.forceSimulation=function(u){function v(){x();L.call("tick",y);D<A&&(J.stop(),L.call("end",y))}function x(H){var P,M=u.length;void 0===H&&(H=1);for(var N=0;N<H;++N)for(D+=(B-D)*t,I.each(function(Q){Q(D)}),P=0;P<M;++P){var T=u[P];null==T.fx?T.x+=T.vx*=F:(T.x=T.fx,T.vx=0);null==T.fy?T.y+=T.vy*=
F:(T.y=T.fy,T.vy=0)}return y}function C(){for(var H=0,P=u.length,M;H<P;++H){M=u[H];M.index=H;null!=M.fx&&(M.x=M.fx);null!=M.fy&&(M.y=M.fy);if(isNaN(M.x)||isNaN(M.y)){var N=10*Math.sqrt(H),T=H*r;M.x=N*Math.cos(T);M.y=N*Math.sin(T)}if(isNaN(M.vx)||isNaN(M.vy))M.vx=M.vy=0}}function z(H){H.initialize&&H.initialize(u);return H}var y,D=1,A=.001,t=1-Math.pow(A,1/300),B=0,F=.6,I=l.map(),J=a.timer(v),L=h.dispatch("tick","end");null==u&&(u=[]);C();return y={tick:x,restart:function(){return J.restart(v),y},
stop:function(){return J.stop(),y},nodes:function(H){return arguments.length?(u=H,C(),I.each(z),y):u},alpha:function(H){return arguments.length?(D=+H,y):D},alphaMin:function(H){return arguments.length?(A=+H,y):A},alphaDecay:function(H){return arguments.length?(t=+H,y):+t},alphaTarget:function(H){return arguments.length?(B=+H,y):B},velocityDecay:function(H){return arguments.length?(F=1-H,y):1-F},force:function(H,P){return 1<arguments.length?(null==P?I.remove(H):I.set(H,z(P)),y):I.get(H)},find:function(H,
P,M){var N,T=u.length;M=null==M?Infinity:M*M;for(N=0;N<T;++N){var Q=u[N];var U=H-Q.x;var S=P-Q.y;U=U*U+S*S;if(U<M){var X=Q;M=U}}return X},on:function(H,P){return 1<arguments.length?(L.on(H,P),y):L.on(H)}}};q.forceX=function(u){function v(A){for(var t=0,B=z.length,F;t<B;++t)F=z[t],F.vx+=(D[t]-F.x)*y[t]*A}function x(){if(z){var A,t=z.length;y=Array(t);D=Array(t);for(A=0;A<t;++A)y[A]=isNaN(D[A]=+u(z[A],A,z))?0:+C(z[A],A,z)}}var C=g(.1),z,y,D;"function"!==typeof u&&(u=g(null==u?0:+u));v.initialize=function(A){z=
A;x()};v.strength=function(A){return arguments.length?(C="function"===typeof A?A:g(+A),x(),v):C};v.x=function(A){return arguments.length?(u="function"===typeof A?A:g(+A),x(),v):u};return v};q.forceY=function(u){function v(A){for(var t=0,B=z.length,F;t<B;++t)F=z[t],F.vy+=(D[t]-F.y)*y[t]*A}function x(){if(z){var A,t=z.length;y=Array(t);D=Array(t);for(A=0;A<t;++A)y[A]=isNaN(D[A]=+u(z[A],A,z))?0:+C(z[A],A,z)}}var C=g(.1),z,y,D;"function"!==typeof u&&(u=g(null==u?0:+u));v.initialize=function(A){z=A;x()};
v.strength=function(A){return arguments.length?(C="function"===typeof A?A:g(+A),x(),v):C};v.y=function(A){return arguments.length?(u="function"===typeof A?A:g(+A),x(),v):u};return v};Object.defineProperty(q,"__esModule",{value:!0})})},{"d3-collection":157,"d3-dispatch":159,"d3-quadtree":164,"d3-timer":168}],161:[function(b,K,G){(function(q,m){"object"===typeof G&&"undefined"!==typeof K?m(G):(q=q||self,m(q.d3=q.d3||{}))})(this,function(q){function m(oa,na){return oa.parent===na.parent?1:2}function l(oa,
na){return oa+na.x}function h(oa,na){return Math.max(oa,na.y)}function a(oa){for(var na;na=oa.children;)oa=na[0];return oa}function g(oa){for(var na;na=oa.children;)oa=na[na.length-1];return oa}function e(oa){var na=0,la=oa.children,ia=la&&la.length;if(ia)for(;0<=--ia;)na+=la[ia].value;else na=1;oa.value=na}function n(oa,na){var la=new f(oa);oa=+oa.value&&(la.value=oa.value);var ia,sa=[la],ta,Aa,Ka,Sa;for(null==na&&(na=p);ia=sa.pop();)if(oa&&(ia.value=+ia.data.value),(Aa=na(ia.data))&&(Sa=Aa.length))for(ia.children=
Array(Sa),Ka=Sa-1;0<=Ka;--Ka)sa.push(ta=ia.children[Ka]=new f(Aa[Ka])),ta.parent=ia,ta.depth=ia.depth+1;return la.eachBefore(d)}function p(oa){return oa.children}function c(oa){oa.data=oa.data.data}function d(oa){var na=0;do oa.height=na;while((oa=oa.parent)&&oa.height<++na)}function f(oa){this.data=oa;this.depth=this.height=0;this.parent=null}function k(oa){var na=0;oa=ja.call(oa);for(var la=oa.length,ia,sa;la;)sa=Math.random()*la--|0,ia=oa[la],oa[la]=oa[sa],oa[sa]=ia;la=oa.length;ia=[];for(var ta;na<
la;)if(sa=oa[na],ta&&u(ta,sa))++na;else{a:if(na=ia,v(sa,na))na=[sa];else{for(ia=0;ia<na.length;++ia)if(r(sa,na[ia])&&v(x(na[ia],sa),na)){na=[na[ia],sa];break a}for(ia=0;ia<na.length-1;++ia)for(ta=ia+1;ta<na.length;++ta)if(r(x(na[ia],na[ta]),sa)&&r(x(na[ia],sa),na[ta])&&r(x(na[ta],sa),na[ia])&&v(C(na[ia],na[ta],sa),na)){na=[na[ia],na[ta],sa];break a}throw Error();}a:{na=ia=na;switch(na.length){case 1:na=na[0];na={x:na.x,y:na.y,r:na.r};break a;case 2:na=x(na[0],na[1]);break a;case 3:na=C(na[0],na[1],
na[2]);break a}na=void 0}ta=na;na=0}return ta}function r(oa,na){var la=oa.r-na.r,ia=na.x-oa.x;oa=na.y-oa.y;return 0>la||la*la<ia*ia+oa*oa}function u(oa,na){var la=oa.r-na.r+1E-6,ia=na.x-oa.x;oa=na.y-oa.y;return 0<la&&la*la>ia*ia+oa*oa}function v(oa,na){for(var la=0;la<na.length;++la)if(!u(oa,na[la]))return!1;return!0}function x(oa,na){var la=oa.x,ia=oa.y;oa=oa.r;var sa=na.x,ta=na.y;na=na.r;var Aa=sa-la,Ka=ta-ia,Sa=na-oa,db=Math.sqrt(Aa*Aa+Ka*Ka);return{x:(la+sa+Aa/db*Sa)/2,y:(ia+ta+Ka/db*Sa)/2,r:(db+
oa+na)/2}}function C(oa,na,la){var ia=oa.x,sa=oa.y;oa=oa.r;var ta=na.x,Aa=na.y,Ka=na.r,Sa=la.x,db=la.y,eb=la.r;la=ia-ta;na=ia-Sa;var lb=sa-Aa,ab=sa-db,Ya=Ka-oa,hb=eb-oa,nb=ia*ia+sa*sa-oa*oa;Aa=nb-ta*ta-Aa*Aa+Ka*Ka;db=nb-Sa*Sa-db*db+eb*eb;Sa=na*lb-la*ab;ta=(lb*db-ab*Aa)/(2*Sa)-ia;lb=(ab*Ya-lb*hb)/Sa;ab=(na*Aa-la*db)/(2*Sa)-sa;la=(la*hb-na*Ya)/Sa;na=lb*lb+la*la-1;Ya=2*(oa+ta*lb+ab*la);oa=ta*ta+ab*ab-oa*oa;oa=-(na?(Ya+Math.sqrt(Ya*Ya-4*na*oa))/(2*na):oa/Ya);return{x:ia+ta+lb*oa,y:sa+ab+la*oa,r:oa}}function z(oa,
na,la){var ia=oa.x-na.x,sa=oa.y-na.y,ta=ia*ia+sa*sa;if(ta){var Aa=na.r+la.r;Aa*=Aa;var Ka=oa.r+la.r;Ka*=Ka;if(Aa>Ka){var Sa=(ta+Ka-Aa)/(2*ta);Aa=Math.sqrt(Math.max(0,Ka/ta-Sa*Sa));la.x=oa.x-Sa*ia-Aa*sa;la.y=oa.y-Sa*sa+Aa*ia}else Sa=(ta+Aa-Ka)/(2*ta),Aa=Math.sqrt(Math.max(0,Aa/ta-Sa*Sa)),la.x=na.x+Sa*ia-Aa*sa,la.y=na.y+Sa*sa+Aa*ia}else la.x=na.x+la.r,la.y=na.y}function y(oa,na){var la=oa.r+na.r-1E-6,ia=na.x-oa.x;oa=na.y-oa.y;return 0<la&&la*la>ia*ia+oa*oa}function D(oa){var na=oa._,la=oa.next._,ia=
na.r+la.r;oa=(na.x*la.r+la.x*na.r)/ia;na=(na.y*la.r+la.y*na.r)/ia;return oa*oa+na*na}function A(oa){this._=oa;this.previous=this.next=null}function t(oa){if(!(la=oa.length))return 0;var na,la;var ia=oa[0];ia.x=0;ia.y=0;if(!(1<la))return ia.r;var sa=oa[1];ia.x=-sa.r;sa.x=ia.r;sa.y=0;if(!(2<la))return ia.r+sa.r;z(sa,ia,na=oa[2]);ia=new A(ia);sa=new A(sa);na=new A(na);ia.next=na.previous=sa;sa.next=ia.previous=na;na.next=sa.previous=ia;var ta=3;a:for(;ta<la;++ta){z(ia._,sa._,na=oa[ta]);na=new A(na);
var Aa=sa.next;var Ka=ia.previous;var Sa=sa._.r;var db=ia._.r;do if(Sa<=db){if(y(Aa._,na._)){sa=Aa;ia.next=sa;sa.previous=ia;--ta;continue a}Sa+=Aa._.r;Aa=Aa.next}else{if(y(Ka._,na._)){ia=Ka;ia.next=sa;sa.previous=ia;--ta;continue a}db+=Ka._.r;Ka=Ka.previous}while(Aa!==Ka.next);na.previous=ia;na.next=sa;ia.next=sa.previous=sa=na;for(Aa=D(ia);(na=na.next)!==sa;)(Ka=D(na))<Aa&&(ia=na,Aa=Ka);sa=ia.next}ia=[sa._];for(na=sa;(na=na.next)!==sa;)ia.push(na._);na=k(ia);for(ta=0;ta<la;++ta)ia=oa[ta],ia.x-=
na.x,ia.y-=na.y;return na.r}function B(oa){if("function"!==typeof oa)throw Error();return oa}function F(){return 0}function I(oa){return function(){return oa}}function J(oa){return Math.sqrt(oa.value)}function L(oa){return function(na){na.children||(na.r=Math.max(0,+oa(na)||0))}}function H(oa,na){return function(la){if(ia=la.children){var ia,sa,ta=ia.length,Aa=oa(la)*na||0;if(Aa)for(sa=0;sa<ta;++sa)ia[sa].r+=Aa;var Ka=t(ia);if(Aa)for(sa=0;sa<ta;++sa)ia[sa].r-=Aa;la.r=Ka+Aa}}}function P(oa){return function(na){var la=
na.parent;na.r*=oa;la&&(na.x=la.x+oa*na.x,na.y=la.y+oa*na.y)}}function M(oa){oa.x0=Math.round(oa.x0);oa.y0=Math.round(oa.y0);oa.x1=Math.round(oa.x1);oa.y1=Math.round(oa.y1)}function N(oa,na,la,ia,sa){var ta=oa.children,Aa=-1,Ka=ta.length;for(ia=oa.value&&(ia-na)/oa.value;++Aa<Ka;)oa=ta[Aa],oa.y0=la,oa.y1=sa,oa.x0=na,oa.x1=na+=oa.value*ia}function T(oa){return oa.id}function Q(oa){return oa.parentId}function U(oa,na){return oa.parent===na.parent?1:2}function S(oa){var na=oa.children;return na?na[0]:
oa.t}function X(oa){var na=oa.children;return na?na[na.length-1]:oa.t}function Z(oa,na){this._=oa;this.A=this.children=this.parent=null;this.a=this;this.s=this.c=this.m=this.z=0;this.t=null;this.i=na}function aa(oa){oa=new Z(oa,0);for(var na,la=[oa],ia,sa,ta;na=la.pop();)if(sa=na._.children)for(na.children=Array(ia=sa.length),ta=ia-1;0<=ta;--ta)la.push(ia=na.children[ta]=new Z(sa[ta],ta)),ia.parent=na;(oa.parent=new Z(null,0)).children=[oa];return oa}function fa(oa,na,la,ia,sa){var ta=oa.children,
Aa=-1,Ka=ta.length;for(sa=oa.value&&(sa-la)/oa.value;++Aa<Ka;)oa=ta[Aa],oa.x0=na,oa.x1=ia,oa.y0=la,oa.y1=la+=oa.value*sa}function ha(oa,na,la,ia,sa,ta){for(var Aa=[],Ka=na.children,Sa,db,eb=Sa=0,lb=Ka.length,ab,Ya=na.value,hb,nb,va,Ba,Ga,Na;Sa<lb;){na=sa-la;ab=ta-ia;do hb=Ka[eb++].value;while(!hb&&eb<lb);nb=va=hb;Na=Math.max(ab/na,na/ab)/(Ya*oa);Ba=hb*hb*Na;for(Ga=Math.max(va/Ba,Ba/nb);eb<lb;++eb){hb+=db=Ka[eb].value;db<nb&&(nb=db);db>va&&(va=db);Ba=hb*hb*Na;Ba=Math.max(va/Ba,Ba/nb);if(Ba>Ga){hb-=
db;break}Ga=Ba}Aa.push(Sa={value:hb,dice:na<ab,children:Ka.slice(Sa,eb)});Sa.dice?N(Sa,la,ia,sa,Ya?ia+=ab*hb/Ya:ta):fa(Sa,la,ia,Ya?la+=na*hb/Ya:sa,ta);Ya-=hb;Sa=eb}return Aa}f.prototype=n.prototype={constructor:f,count:function(){return this.eachAfter(e)},each:function(oa){var na,la=[this],ia;do{var sa=la.reverse();for(la=[];na=sa.pop();)if(oa(na),na=na.children){var ta=0;for(ia=na.length;ta<ia;++ta)la.push(na[ta])}}while(la.length);return this},eachAfter:function(oa){for(var na,la=[this],ia=[],sa,
ta;na=la.pop();)if(ia.push(na),na=na.children)for(sa=0,ta=na.length;sa<ta;++sa)la.push(na[sa]);for(;na=ia.pop();)oa(na);return this},eachBefore:function(oa){for(var na,la=[this],ia;na=la.pop();)if(oa(na),na=na.children)for(ia=na.length-1;0<=ia;--ia)la.push(na[ia]);return this},sum:function(oa){return this.eachAfter(function(na){for(var la=+oa(na.data)||0,ia=na.children,sa=ia&&ia.length;0<=--sa;)la+=ia[sa].value;na.value=la})},sort:function(oa){return this.eachBefore(function(na){na.children&&na.children.sort(oa)})},
path:function(oa){var na=this;var la=na;var ia=oa;if(la!==ia){var sa=la.ancestors(),ta=ia.ancestors(),Aa=null;la=sa.pop();for(ia=ta.pop();la===ia;)Aa=la,la=sa.pop(),ia=ta.pop();la=Aa}for(ia=[na];na!==la;)na=na.parent,ia.push(na);for(na=ia.length;oa!==la;)ia.splice(na,0,oa),oa=oa.parent;return ia},ancestors:function(){for(var oa=this,na=[oa];oa=oa.parent;)na.push(oa);return na},descendants:function(){var oa=[];this.each(function(na){oa.push(na)});return oa},leaves:function(){var oa=[];this.eachBefore(function(na){na.children||
oa.push(na)});return oa},links:function(){var oa=this,na=[];oa.each(function(la){la!==oa&&na.push({source:la.parent,target:la})});return na},copy:function(){return n(this).eachBefore(c)}};var ja=Array.prototype.slice,ba={depth:-1},ma={};Z.prototype=Object.create(f.prototype);var qa=(1+Math.sqrt(5))/2,ka=function la(na){function ia(sa,ta,Aa,Ka,Sa){ha(na,sa,ta,Aa,Ka,Sa)}ia.ratio=function(sa){return la(1<(sa=+sa)?sa:1)};return ia}(qa);qa=function ia(la){function sa(ta,Aa,Ka,Sa,db){if((eb=ta._squarify)&&
eb.ratio===la)for(var eb,lb,ab,Ya=-1,hb,nb=eb.length,va=ta.value;++Ya<nb;){ta=eb[Ya];lb=ta.children;ab=ta.value=0;for(hb=lb.length;ab<hb;++ab)ta.value+=lb[ab].value;ta.dice?N(ta,Aa,Ka,Sa,Ka+=(db-Ka)*ta.value/va):fa(ta,Aa,Ka,Aa+=(Sa-Aa)*ta.value/va,db);va-=ta.value}else ta._squarify=eb=ha(la,ta,Aa,Ka,Sa,db),eb.ratio=la}sa.ratio=function(ta){return ia(1<(ta=+ta)?ta:1)};return sa}(qa);q.cluster=function(){function la(Ka){var Sa,db=0;Ka.eachAfter(function(hb){var nb=hb.children;if(nb){var va=nb.reduce(l,
0)/nb.length;hb.x=va;hb.y=1+nb.reduce(h,0)}else hb.x=Sa?db+=ia(hb,Sa):0,hb.y=0,Sa=hb});var eb=a(Ka),lb=g(Ka),ab=eb.x-ia(eb,lb)/2,Ya=lb.x+ia(lb,eb)/2;return Ka.eachAfter(Aa?function(hb){hb.x=(hb.x-Ka.x)*sa;hb.y=(Ka.y-hb.y)*ta}:function(hb){hb.x=(hb.x-ab)/(Ya-ab)*sa;hb.y=(1-(Ka.y?hb.y/Ka.y:1))*ta})}var ia=m,sa=1,ta=1,Aa=!1;la.separation=function(Ka){return arguments.length?(ia=Ka,la):ia};la.size=function(Ka){return arguments.length?(Aa=!1,sa=+Ka[0],ta=+Ka[1],la):Aa?null:[sa,ta]};la.nodeSize=function(Ka){return arguments.length?
(Aa=!0,sa=+Ka[0],ta=+Ka[1],la):Aa?[sa,ta]:null};return la};q.hierarchy=n;q.pack=function(){function la(Ka){Ka.x=sa/2;Ka.y=ta/2;ia?Ka.eachBefore(L(ia)).eachAfter(H(Aa,.5)).eachBefore(P(1)):Ka.eachBefore(L(J)).eachAfter(H(F,1)).eachAfter(H(Aa,Ka.r/Math.min(sa,ta))).eachBefore(P(Math.min(sa,ta)/(2*Ka.r)));return Ka}var ia=null,sa=1,ta=1,Aa=F;la.radius=function(Ka){return arguments.length?(ia=null==Ka?null:B(Ka),la):ia};la.size=function(Ka){return arguments.length?(sa=+Ka[0],ta=+Ka[1],la):[sa,ta]};la.padding=
function(Ka){return arguments.length?(Aa="function"===typeof Ka?Ka:I(+Ka),la):Aa};return la};q.packEnclose=k;q.packSiblings=function(la){t(la);return la};q.partition=function(){function la(Sa){var db=Sa.height+1;Sa.x0=Sa.y0=Aa;Sa.x1=sa;Sa.y1=ta/db;Sa.eachBefore(ia(ta,db));Ka&&Sa.eachBefore(M);return Sa}function ia(Sa,db){return function(eb){eb.children&&N(eb,eb.x0,Sa*(eb.depth+1)/db,eb.x1,Sa*(eb.depth+2)/db);var lb=eb.x0,ab=eb.y0,Ya=eb.x1-Aa,hb=eb.y1-Aa;Ya<lb&&(lb=Ya=(lb+Ya)/2);hb<ab&&(ab=hb=(ab+
hb)/2);eb.x0=lb;eb.y0=ab;eb.x1=Ya;eb.y1=hb}}var sa=1,ta=1,Aa=0,Ka=!1;la.round=function(Sa){return arguments.length?(Ka=!!Sa,la):Ka};la.size=function(Sa){return arguments.length?(sa=+Sa[0],ta=+Sa[1],la):[sa,ta]};la.padding=function(Sa){return arguments.length?(Aa=+Sa,la):Aa};return la};q.stratify=function(){function la(ta){var Aa,Ka=ta.length,Sa=Array(Ka),db,eb={};for(Aa=0;Aa<Ka;++Aa){var lb=ta[Aa];var ab=Sa[Aa]=new f(lb);null!=(db=ia(lb,Aa,ta))&&(db+="")&&(lb="$"+(ab.id=db),eb[lb]=lb in eb?ma:ab)}for(Aa=
0;Aa<Ka;++Aa)if(ab=Sa[Aa],db=sa(ta[Aa],Aa,ta),null!=db&&(db+="")){lb=eb["$"+db];if(!lb)throw Error("missing: "+db);if(lb===ma)throw Error("ambiguous: "+db);lb.children?lb.children.push(ab):lb.children=[ab];ab.parent=lb}else{if(Ya)throw Error("multiple roots");var Ya=ab}if(!Ya)throw Error("no root");Ya.parent=ba;Ya.eachBefore(function(hb){hb.depth=hb.parent.depth+1;--Ka}).eachBefore(d);Ya.parent=null;if(0<Ka)throw Error("cycle");return Ya}var ia=T,sa=Q;la.id=function(ta){return arguments.length?(ia=
B(ta),la):ia};la.parentId=function(ta){return arguments.length?(sa=B(ta),la):sa};return la};q.tree=function(){function la(eb){var lb=aa(eb);lb.eachAfter(ia);lb.parent.m=-lb.z;lb.eachBefore(sa);if(db)eb.eachBefore(ta);else{var ab=eb,Ya=eb,hb=eb;eb.eachBefore(function(Ga){Ga.x<ab.x&&(ab=Ga);Ga.x>Ya.x&&(Ya=Ga);Ga.depth>hb.depth&&(hb=Ga)});lb=ab===Ya?1:Aa(ab,Ya)/2;var nb=lb-ab.x,va=Ka/(Ya.x+lb+nb),Ba=Sa/(hb.depth||1);eb.eachBefore(function(Ga){Ga.x=(Ga.x+nb)*va;Ga.y=Ga.depth*Ba})}return eb}function ia(eb){var lb=
eb.children,ab=eb.parent.children,Ya=eb.i?ab[eb.i-1]:null;if(lb){for(var hb=0,nb=0,va=eb.children,Ba=va.length,Ga;0<=--Ba;)Ga=va[Ba],Ga.z+=hb,Ga.m+=hb,hb+=Ga.s+(nb+=Ga.c);lb=(lb[0].z+lb[lb.length-1].z)/2;Ya?(eb.z=Ya.z+Aa(eb._,Ya._),eb.m=eb.z-lb):eb.z=lb}else Ya&&(eb.z=Ya.z+Aa(eb._,Ya._));lb=eb.parent;ab=eb.parent.A||ab[0];if(Ya){nb=hb=eb;va=hb.parent.children[0];Ba=hb.m;Ga=nb.m;for(var Na=Ya.m,$a=va.m,Va;Ya=X(Ya),hb=S(hb),Ya&&hb;){va=S(va);nb=X(nb);nb.a=eb;Va=Ya.z+Na-hb.z-Ba+Aa(Ya._,hb._);if(0<Va){var qb=
Ya.a.parent===eb.parent?Ya.a:ab,Ha=eb,Ra=Va,La=Ra/(Ha.i-qb.i);Ha.c-=La;Ha.s+=Ra;qb.c+=La;Ha.z+=Ra;Ha.m+=Ra;Ba+=Va;Ga+=Va}Na+=Ya.m;Ba+=hb.m;$a+=va.m;Ga+=nb.m}Ya&&!X(nb)&&(nb.t=Ya,nb.m+=Na-Ga);hb&&!S(va)&&(va.t=hb,va.m+=Ba-$a,ab=eb)}lb.A=ab}function sa(eb){eb._.x=eb.z+eb.parent.m;eb.m+=eb.parent.m}function ta(eb){eb.x*=Ka;eb.y=eb.depth*Sa}var Aa=U,Ka=1,Sa=1,db=null;la.separation=function(eb){return arguments.length?(Aa=eb,la):Aa};la.size=function(eb){return arguments.length?(db=!1,Ka=+eb[0],Sa=+eb[1],
la):db?null:[Ka,Sa]};la.nodeSize=function(eb){return arguments.length?(db=!0,Ka=+eb[0],Sa=+eb[1],la):db?[Ka,Sa]:null};return la};q.treemap=function(){function la(hb){hb.x0=hb.y0=0;hb.x1=Aa;hb.y1=Ka;hb.eachBefore(ia);Sa=[0];ta&&hb.eachBefore(M);return hb}function ia(hb){var nb=Sa[hb.depth],va=hb.x0+nb,Ba=hb.y0+nb,Ga=hb.x1-nb,Na=hb.y1-nb;Ga<va&&(va=Ga=(va+Ga)/2);Na<Ba&&(Ba=Na=(Ba+Na)/2);hb.x0=va;hb.y0=Ba;hb.x1=Ga;hb.y1=Na;hb.children&&(nb=Sa[hb.depth+1]=db(hb)/2,va+=Ya(hb)-nb,Ba+=eb(hb)-nb,Ga-=lb(hb)-
nb,Na-=ab(hb)-nb,Ga<va&&(va=Ga=(va+Ga)/2),Na<Ba&&(Ba=Na=(Ba+Na)/2),sa(hb,va,Ba,Ga,Na))}var sa=ka,ta=!1,Aa=1,Ka=1,Sa=[0],db=F,eb=F,lb=F,ab=F,Ya=F;la.round=function(hb){return arguments.length?(ta=!!hb,la):ta};la.size=function(hb){return arguments.length?(Aa=+hb[0],Ka=+hb[1],la):[Aa,Ka]};la.tile=function(hb){return arguments.length?(sa=B(hb),la):sa};la.padding=function(hb){return arguments.length?la.paddingInner(hb).paddingOuter(hb):la.paddingInner()};la.paddingInner=function(hb){return arguments.length?
(db="function"===typeof hb?hb:I(+hb),la):db};la.paddingOuter=function(hb){return arguments.length?la.paddingTop(hb).paddingRight(hb).paddingBottom(hb).paddingLeft(hb):la.paddingTop()};la.paddingTop=function(hb){return arguments.length?(eb="function"===typeof hb?hb:I(+hb),la):eb};la.paddingRight=function(hb){return arguments.length?(lb="function"===typeof hb?hb:I(+hb),la):lb};la.paddingBottom=function(hb){return arguments.length?(ab="function"===typeof hb?hb:I(+hb),la):ab};la.paddingLeft=function(hb){return arguments.length?
(Ya="function"===typeof hb?hb:I(+hb),la):Ya};return la};q.treemapBinary=function(la,ia,sa,ta,Aa){function Ka(Ya,hb,nb,va,Ba,Ga,Na){if(Ya>=hb-1)Ya=Sa[Ya],Ya.x0=va,Ya.y0=Ba,Ya.x1=Ga,Ya.y1=Na;else{for(var $a=ab[Ya],Va=nb/2+$a,qb=Ya+1,Ha=hb-1;qb<Ha;){var Ra=qb+Ha>>>1;ab[Ra]<Va?qb=Ra+1:Ha=Ra}Va-ab[qb-1]<ab[qb]-Va&&Ya+1<qb&&--qb;$a=ab[qb]-$a;Va=nb-$a;Ga-va>Na-Ba?(nb=(va*Va+Ga*$a)/nb,Ka(Ya,qb,$a,va,Ba,nb,Na),Ka(qb,hb,Va,nb,Ba,Ga,Na)):(nb=(Ba*Va+Na*$a)/nb,Ka(Ya,qb,$a,va,Ba,Ga,nb),Ka(qb,hb,Va,va,nb,Ga,Na))}}
var Sa=la.children,db,eb=Sa.length,lb,ab=Array(eb+1);for(ab[0]=lb=db=0;db<eb;++db)ab[db+1]=lb+=Sa[db].value;Ka(0,eb,la.value,ia,sa,ta,Aa)};q.treemapDice=N;q.treemapResquarify=qa;q.treemapSlice=fa;q.treemapSliceDice=function(la,ia,sa,ta,Aa){(la.depth&1?fa:N)(la,ia,sa,ta,Aa)};q.treemapSquarify=ka;Object.defineProperty(q,"__esModule",{value:!0})})},{}],162:[function(b,K,G){(function(q,m){"object"===typeof G&&"undefined"!==typeof K?m(G,b("d3-color")):(q=q||self,m(q.d3=q.d3||{},q.d3))})(this,function(q,
m){function l(la,ia,sa,ta,Aa){var Ka=la*la,Sa=Ka*la;return((1-3*la+3*Ka-Sa)*ia+(4-6*Ka+3*Sa)*sa+(1+3*la+3*Ka-3*Sa)*ta+Sa*Aa)/6}function h(la){var ia=la.length-1;return function(sa){var ta=0>=sa?sa=0:1<=sa?(sa=1,ia-1):Math.floor(sa*ia),Aa=la[ta],Ka=la[ta+1];return l((sa-ta/ia)*ia,0<ta?la[ta-1]:2*Aa-Ka,Aa,Ka,ta<ia-1?la[ta+2]:2*Ka-Aa)}}function a(la){var ia=la.length;return function(sa){var ta=Math.floor((0>(sa%=1)?++sa:sa)*ia);return l((sa-ta/ia)*ia,la[(ta+ia-1)%ia],la[ta%ia],la[(ta+1)%ia],la[(ta+2)%
ia])}}function g(la){return function(){return la}}function e(la,ia){return function(sa){return la+sa*ia}}function n(la,ia,sa){return la=Math.pow(la,sa),ia=Math.pow(ia,sa)-la,sa=1/sa,function(ta){return Math.pow(la+ta*ia,sa)}}function p(la,ia){var sa=ia-la;return sa?e(la,180<sa||-180>sa?sa-360*Math.round(sa/360):sa):g(isNaN(la)?ia:la)}function c(la){return 1===(la=+la)?d:function(ia,sa){return sa-ia?n(ia,sa,la):g(isNaN(ia)?sa:ia)}}function d(la,ia){var sa=ia-la;return sa?e(la,sa):g(isNaN(la)?ia:la)}
function f(la){return function(ia){var sa=ia.length,ta=Array(sa),Aa=Array(sa),Ka=Array(sa),Sa;for(Sa=0;Sa<sa;++Sa){var db=m.rgb(ia[Sa]);ta[Sa]=db.r||0;Aa[Sa]=db.g||0;Ka[Sa]=db.b||0}ta=la(ta);Aa=la(Aa);Ka=la(Ka);db.opacity=1;return function(eb){db.r=ta(eb);db.g=Aa(eb);db.b=Ka(eb);return db+""}}}function k(la,ia){ia||(ia=[]);var sa=la?Math.min(ia.length,la.length):0,ta=ia.slice(),Aa;return function(Ka){for(Aa=0;Aa<sa;++Aa)ta[Aa]=la[Aa]*(1-Ka)+ia[Aa]*Ka;return ta}}function r(la){return ArrayBuffer.isView(la)&&
!(la instanceof DataView)}function u(la,ia){var sa=ia?ia.length:0,ta=la?Math.min(sa,la.length):0,Aa=Array(ta),Ka=Array(sa),Sa;for(Sa=0;Sa<ta;++Sa)Aa[Sa]=A(la[Sa],ia[Sa]);for(;Sa<sa;++Sa)Ka[Sa]=ia[Sa];return function(db){for(Sa=0;Sa<ta;++Sa)Ka[Sa]=Aa[Sa](db);return Ka}}function v(la,ia){var sa=new Date;return la=+la,ia=+ia,function(ta){return sa.setTime(la*(1-ta)+ia*ta),sa}}function x(la,ia){return la=+la,ia=+ia,function(sa){return la*(1-sa)+ia*sa}}function C(la,ia){var sa={},ta={},Aa;if(null===la||
"object"!==typeof la)la={};if(null===ia||"object"!==typeof ia)ia={};for(Aa in ia)Aa in la?sa[Aa]=A(la[Aa],ia[Aa]):ta[Aa]=ia[Aa];return function(Ka){for(Aa in sa)ta[Aa]=sa[Aa](Ka);return ta}}function z(la){return function(){return la}}function y(la){return function(ia){return la(ia)+""}}function D(la,ia){var sa=N.lastIndex=T.lastIndex=0,ta,Aa,Ka,Sa=-1,db=[],eb=[];la+="";for(ia+="";(ta=N.exec(la))&&(Aa=T.exec(ia));)(Ka=Aa.index)>sa&&(Ka=ia.slice(sa,Ka),db[Sa]?db[Sa]+=Ka:db[++Sa]=Ka),(ta=ta[0])===(Aa=
Aa[0])?db[Sa]?db[Sa]+=Aa:db[++Sa]=Aa:(db[++Sa]=null,eb.push({i:Sa,x:x(ta,Aa)})),sa=T.lastIndex;sa<ia.length&&(Ka=ia.slice(sa),db[Sa]?db[Sa]+=Ka:db[++Sa]=Ka);return 2>db.length?eb[0]?y(eb[0].x):z(ia):(ia=eb.length,function(lb){for(var ab=0,Ya;ab<ia;++ab)db[(Ya=eb[ab]).i]=Ya.x(lb);return db.join("")})}function A(la,ia){var sa=typeof ia,ta;return null==ia||"boolean"===sa?g(ia):("number"===sa?x:"string"===sa?(ta=m.color(ia))?(ia=ta,H):D:ia instanceof m.color?H:ia instanceof Date?v:r(ia)?k:Array.isArray(ia)?
u:"function"!==typeof ia.valueOf&&"function"!==typeof ia.toString||isNaN(ia)?C:x)(la,ia)}function t(la,ia,sa,ta,Aa,Ka){var Sa,db,eb;if(Sa=Math.sqrt(la*la+ia*ia))la/=Sa,ia/=Sa;if(eb=la*sa+ia*ta)sa-=la*eb,ta-=ia*eb;if(db=Math.sqrt(sa*sa+ta*ta))sa/=db,ta/=db,eb/=db;la*ta<ia*sa&&(la=-la,ia=-ia,eb=-eb,Sa=-Sa);return{translateX:Aa,translateY:Ka,rotate:Math.atan2(ia,la)*Q,skewX:Math.atan(eb)*Q,scaleX:Sa,scaleY:db}}function B(la,ia,sa,ta){function Aa(lb){return lb.length?lb.pop()+" ":""}function Ka(lb,ab,
Ya,hb,nb,va){lb!==Ya||ab!==hb?(nb=nb.push("translate(",null,ia,null,sa),va.push({i:nb-4,x:x(lb,Ya)},{i:nb-2,x:x(ab,hb)})):(Ya||hb)&&nb.push("translate("+Ya+ia+hb+sa)}function Sa(lb,ab,Ya,hb){lb!==ab?(180<lb-ab?ab+=360:180<ab-lb&&(lb+=360),hb.push({i:Ya.push(Aa(Ya)+"rotate(",null,ta)-2,x:x(lb,ab)})):ab&&Ya.push(Aa(Ya)+"rotate("+ab+ta)}function db(lb,ab,Ya,hb){lb!==ab?hb.push({i:Ya.push(Aa(Ya)+"skewX(",null,ta)-2,x:x(lb,ab)}):ab&&Ya.push(Aa(Ya)+"skewX("+ab+ta)}function eb(lb,ab,Ya,hb,nb,va){lb!==Ya||
ab!==hb?(nb=nb.push(Aa(nb)+"scale(",null,",",null,")"),va.push({i:nb-4,x:x(lb,Ya)},{i:nb-2,x:x(ab,hb)})):1===Ya&&1===hb||nb.push(Aa(nb)+"scale("+Ya+","+hb+")")}return function(lb,ab){var Ya=[],hb=[];lb=la(lb);ab=la(ab);Ka(lb.translateX,lb.translateY,ab.translateX,ab.translateY,Ya,hb);Sa(lb.rotate,ab.rotate,Ya,hb);db(lb.skewX,ab.skewX,Ya,hb);eb(lb.scaleX,lb.scaleY,ab.scaleX,ab.scaleY,Ya,hb);lb=ab=null;return function(nb){for(var va=-1,Ba=hb.length,Ga;++va<Ba;)Ya[(Ga=hb[va]).i]=Ga.x(nb);return Ya.join("")}}}
function F(la){return((la=Math.exp(la))+1/la)/2}function I(la){return function(ia,sa){var ta=la((ia=m.hsl(ia)).h,(sa=m.hsl(sa)).h),Aa=d(ia.s,sa.s),Ka=d(ia.l,sa.l),Sa=d(ia.opacity,sa.opacity);return function(db){ia.h=ta(db);ia.s=Aa(db);ia.l=Ka(db);ia.opacity=Sa(db);return ia+""}}}function J(la){return function(ia,sa){var ta=la((ia=m.hcl(ia)).h,(sa=m.hcl(sa)).h),Aa=d(ia.c,sa.c),Ka=d(ia.l,sa.l),Sa=d(ia.opacity,sa.opacity);return function(db){ia.h=ta(db);ia.c=Aa(db);ia.l=Ka(db);ia.opacity=Sa(db);return ia+
""}}}function L(la){return function ta(sa){function Aa(Ka,Sa){var db=la((Ka=m.cubehelix(Ka)).h,(Sa=m.cubehelix(Sa)).h),eb=d(Ka.s,Sa.s),lb=d(Ka.l,Sa.l),ab=d(Ka.opacity,Sa.opacity);return function(Ya){Ka.h=db(Ya);Ka.s=eb(Ya);Ka.l=lb(Math.pow(Ya,sa));Ka.opacity=ab(Ya);return Ka+""}}sa=+sa;Aa.gamma=ta;return Aa}(1)}var H=function sa(ia){function ta(Ka,Sa){var db=Aa((Ka=m.rgb(Ka)).r,(Sa=m.rgb(Sa)).r),eb=Aa(Ka.g,Sa.g),lb=Aa(Ka.b,Sa.b),ab=d(Ka.opacity,Sa.opacity);return function(Ya){Ka.r=db(Ya);Ka.g=eb(Ya);
Ka.b=lb(Ya);Ka.opacity=ab(Ya);return Ka+""}}var Aa=c(ia);ta.gamma=sa;return ta}(1),P=f(h),M=f(a),N=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,T=new RegExp(N.source,"g"),Q=180/Math.PI,U={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},S,X,Z,aa,fa=B(function(ia){if("none"===ia)return U;S||(S=document.createElement("DIV"),X=document.documentElement,Z=document.defaultView);S.style.transform=ia;ia=Z.getComputedStyle(X.appendChild(S),null).getPropertyValue("transform");X.removeChild(S);
ia=ia.slice(7,-1).split(",");return t(+ia[0],+ia[1],+ia[2],+ia[3],+ia[4],+ia[5])},"px, ","px)","deg)"),ha=B(function(ia){if(null==ia)return U;aa||(aa=document.createElementNS("http://www.w3.org/2000/svg","g"));aa.setAttribute("transform",ia);if(!(ia=aa.transform.baseVal.consolidate()))return U;ia=ia.matrix;return t(ia.a,ia.b,ia.c,ia.d,ia.e,ia.f)},", ",")",")"),ja=Math.SQRT2,ba=I(p),ma=I(d),qa=J(p),ka=J(d),oa=L(p),na=L(d);q.interpolate=A;q.interpolateArray=function(ia,sa){return(r(sa)?k:u)(ia,sa)};
q.interpolateBasis=h;q.interpolateBasisClosed=a;q.interpolateCubehelix=oa;q.interpolateCubehelixLong=na;q.interpolateDate=v;q.interpolateDiscrete=function(ia){var sa=ia.length;return function(ta){return ia[Math.max(0,Math.min(sa-1,Math.floor(ta*sa)))]}};q.interpolateHcl=qa;q.interpolateHclLong=ka;q.interpolateHsl=ba;q.interpolateHslLong=ma;q.interpolateHue=function(ia,sa){var ta=p(+ia,+sa);return function(Aa){Aa=ta(Aa);return Aa-360*Math.floor(Aa/360)}};q.interpolateLab=function(ia,sa){var ta=d((ia=
m.lab(ia)).l,(sa=m.lab(sa)).l),Aa=d(ia.a,sa.a),Ka=d(ia.b,sa.b),Sa=d(ia.opacity,sa.opacity);return function(db){ia.l=ta(db);ia.a=Aa(db);ia.b=Ka(db);ia.opacity=Sa(db);return ia+""}};q.interpolateNumber=x;q.interpolateNumberArray=k;q.interpolateObject=C;q.interpolateRgb=H;q.interpolateRgbBasis=P;q.interpolateRgbBasisClosed=M;q.interpolateRound=function(ia,sa){return ia=+ia,sa=+sa,function(ta){return Math.round(ia*(1-ta)+sa*ta)}};q.interpolateString=D;q.interpolateTransformCss=fa;q.interpolateTransformSvg=
ha;q.interpolateZoom=function(ia,sa){var ta=ia[0],Aa=ia[1],Ka=ia[2];ia=sa[2];var Sa=sa[0]-ta,db=sa[1]-Aa,eb=Sa*Sa+db*db;if(1E-12>eb){var lb=Math.log(ia/Ka)/ja;ia=function(hb){return[ta+hb*Sa,Aa+hb*db,Ka*Math.exp(ja*hb*lb)]}}else{var ab=Math.sqrt(eb);sa=(ia*ia-Ka*Ka+4*eb)/(4*Ka*ab);ia=(ia*ia-Ka*Ka-4*eb)/(4*ia*ab);var Ya=Math.log(Math.sqrt(sa*sa+1)-sa);lb=(Math.log(Math.sqrt(ia*ia+1)-ia)-Ya)/ja;ia=function(hb){hb*=lb;var nb=F(Ya),va=ja*hb+Ya;var Ba=((va=Math.exp(2*va))-1)/(va+1);var Ga=Ya;va=((Ga=Math.exp(Ga))-
1/Ga)/2;Ba=Ka/(2*ab)*(nb*Ba-va);return[ta+Ba*Sa,Aa+Ba*db,Ka*nb/F(ja*hb+Ya)]}}ia.duration=1E3*lb;return ia};q.piecewise=function(ia,sa){for(var ta=0,Aa=sa.length-1,Ka=sa[0],Sa=Array(0>Aa?0:Aa);ta<Aa;)Sa[ta]=ia(Ka,Ka=sa[++ta]);return function(db){var eb=Math.max(0,Math.min(Aa-1,Math.floor(db*=Aa)));return Sa[eb](db-eb)}};q.quantize=function(ia,sa){for(var ta=Array(sa),Aa=0;Aa<sa;++Aa)ta[Aa]=ia(Aa/(sa-1));return ta};Object.defineProperty(q,"__esModule",{value:!0})})},{"d3-color":158}],163:[function(b,
K,G){(function(q,m){"object"===typeof G&&"undefined"!==typeof K?m(G):(q=q||self,m(q.d3=q.d3||{}))})(this,function(q){function m(){this._x0=this._y0=this._x1=this._y1=null;this._=""}function l(){return new m}var h=Math.PI,a=2*h,g=a-1E-6;m.prototype=l.prototype={constructor:m,moveTo:function(e,n){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+n)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,n){this._+="L"+(this._x1=+e)+","+(this._y1=
+n)},quadraticCurveTo:function(e,n,p,c){this._+="Q"+ +e+","+ +n+","+(this._x1=+p)+","+(this._y1=+c)},bezierCurveTo:function(e,n,p,c,d,f){this._+="C"+ +e+","+ +n+","+ +p+","+ +c+","+(this._x1=+d)+","+(this._y1=+f)},arcTo:function(e,n,p,c,d){e=+e;n=+n;p=+p;c=+c;d=+d;var f=this._x1,k=this._y1,r=p-e,u=c-n,v=f-e,x=k-n,C=v*v+x*x;if(0>d)throw Error("negative radius: "+d);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=n);else if(1E-6<C)if(1E-6<Math.abs(x*r-u*v)&&d){p-=f;c-=k;var z=r*r+u*u;k=Math.sqrt(z);
f=Math.sqrt(C);C=d*Math.tan((h-Math.acos((z+C-(p*p+c*c))/(2*k*f)))/2);f=C/f;C/=k;1E-6<Math.abs(f-1)&&(this._+="L"+(e+f*v)+","+(n+f*x));this._+="A"+d+","+d+",0,0,"+ +(x*p>v*c)+","+(this._x1=e+C*r)+","+(this._y1=n+C*u)}else this._+="L"+(this._x1=e)+","+(this._y1=n)},arc:function(e,n,p,c,d,f){e=+e;n=+n;p=+p;f=!!f;var k=p*Math.cos(c),r=p*Math.sin(c),u=e+k,v=n+r,x=1^f;c=f?c-d:d-c;if(0>p)throw Error("negative radius: "+p);if(null===this._x1)this._+="M"+u+","+v;else if(1E-6<Math.abs(this._x1-u)||1E-6<Math.abs(this._y1-
v))this._+="L"+u+","+v;p&&(0>c&&(c=c%a+a),c>g?this._+="A"+p+","+p+",0,1,"+x+","+(e-k)+","+(n-r)+"A"+p+","+p+",0,1,"+x+","+(this._x1=u)+","+(this._y1=v):1E-6<c&&(this._+="A"+p+","+p+",0,"+ +(c>=h)+","+x+","+(this._x1=e+p*Math.cos(d))+","+(this._y1=n+p*Math.sin(d))))},rect:function(e,n,p,c){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+n)+"h"+ +p+"v"+ +c+"h"+-p+"Z"},toString:function(){return this._}};q.path=l;Object.defineProperty(q,"__esModule",{value:!0})})},{}],164:[function(b,K,G){(function(q,
m){"object"===typeof G&&"undefined"!==typeof K?m(G):(q=q||self,m(q.d3=q.d3||{}))})(this,function(q){function m(c,d,f,k){if(isNaN(d)||isNaN(f))return c;var r,u=c._root;k={data:k};var v=c._x0,x=c._y0,C=c._x1,z=c._y1,y,D,A,t;if(!u)return c._root=k,c;for(;u.length;)if((A=d>=(y=(v+C)/2))?v=y:C=y,(t=f>=(D=(x+z)/2))?x=D:z=D,r=u,!(u=u[A|=t<<1]))return r[A]=k,c;var B=+c._x.call(null,u.data);var F=+c._y.call(null,u.data);if(d===B&&f===F)return k.next=u,r?r[A]=k:c._root=k,c;do r=r?r[A]=Array(4):c._root=Array(4),
(A=d>=(y=(v+C)/2))?v=y:C=y,(t=f>=(D=(x+z)/2))?x=D:z=D;while((A|=t<<1)===(t=(F>=D)<<1|B>=y));return r[t]=u,r[A]=k,c}function l(c,d,f,k,r){this.node=c;this.x0=d;this.y0=f;this.x1=k;this.y1=r}function h(c){return c[0]}function a(c){return c[1]}function g(c,d,f){d=new e(null==d?h:d,null==f?a:f,NaN,NaN,NaN,NaN);return null==c?d:d.addAll(c)}function e(c,d,f,k,r,u){this._x=c;this._y=d;this._x0=f;this._y0=k;this._x1=r;this._y1=u;this._root=void 0}function n(c){for(var d={data:c.data},f=d;c=c.next;)f=f.next=
{data:c.data};return d}var p=g.prototype=e.prototype;p.copy=function(){var c=new e(this._x,this._y,this._x0,this._y0,this._x1,this._y1),d=this._root,f,k;if(!d)return c;if(!d.length)return c._root=n(d),c;for(f=[{source:d,target:c._root=Array(4)}];d=f.pop();)for(var r=0;4>r;++r)if(k=d.source[r])k.length?f.push({source:k,target:d.target[r]=Array(4)}):d.target[r]=n(k);return c};p.add=function(c){var d=+this._x.call(null,c),f=+this._y.call(null,c);return m(this.cover(d,f),d,f,c)};p.addAll=function(c){var d,
f,k=c.length,r,u,v=Array(k),x=Array(k),C=Infinity,z=Infinity,y=-Infinity,D=-Infinity;for(f=0;f<k;++f)isNaN(r=+this._x.call(null,d=c[f]))||isNaN(u=+this._y.call(null,d))||(v[f]=r,x[f]=u,r<C&&(C=r),r>y&&(y=r),u<z&&(z=u),u>D&&(D=u));if(C>y||z>D)return this;this.cover(C,z).cover(y,D);for(f=0;f<k;++f)m(this,v[f],x[f],c[f]);return this};p.cover=function(c,d){if(isNaN(c=+c)||isNaN(d=+d))return this;var f=this._x0,k=this._y0,r=this._x1,u=this._y1;if(isNaN(f))r=(f=Math.floor(c))+1,u=(k=Math.floor(d))+1;else{for(var v=
r-f,x=this._root,C,z;f>c||c>=r||k>d||d>=u;)switch(z=(d<k)<<1|c<f,C=Array(4),C[z]=x,x=C,v*=2,z){case 0:r=f+v;u=k+v;break;case 1:f=r-v;u=k+v;break;case 2:r=f+v;k=u-v;break;case 3:f=r-v,k=u-v}this._root&&this._root.length&&(this._root=x)}this._x0=f;this._y0=k;this._x1=r;this._y1=u;return this};p.data=function(){var c=[];this.visit(function(d){if(!d.length){do c.push(d.data);while(d=d.next)}});return c};p.extent=function(c){return arguments.length?this.cover(+c[0][0],+c[0][1]).cover(+c[1][0],+c[1][1]):
isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]};p.find=function(c,d,f){var k=this._x0,r=this._y0,u,v,x,C,z=this._x1,y=this._y1,D=[],A=this._root,t;A&&D.push(new l(A,k,r,z,y));null==f?f=Infinity:(k=c-f,r=d-f,z=c+f,y=d+f,f*=f);for(;t=D.pop();)if(!(!(A=t.node)||(u=t.x0)>z||(v=t.y0)>y||(x=t.x1)<k||(C=t.y1)<r))if(A.length){t=(u+x)/2;var B=(v+C)/2;D.push(new l(A[3],t,B,x,C),new l(A[2],u,B,t,C),new l(A[1],t,v,x,B),new l(A[0],u,v,t,B));if(A=(d>=B)<<1|c>=t)t=D[D.length-1],D[D.length-1]=D[D.length-
1-A],D[D.length-1-A]=t}else if(t=c-+this._x.call(null,A.data),B=d-+this._y.call(null,A.data),t=t*t+B*B,t<f){var F=Math.sqrt(f=t);k=c-F;r=d-F;z=c+F;y=d+F;F=A.data}return F};p.remove=function(c){if(isNaN(C=+this._x.call(null,c))||isNaN(z=+this._y.call(null,c)))return this;var d,f=this._root,k,r=this._x0,u=this._y0,v=this._x1,x=this._y1,C,z,y,D,A,t;if(!f)return this;if(f.length)for(;;){(A=C>=(y=(r+v)/2))?r=y:v=y;(t=z>=(D=(u+x)/2))?u=D:x=D;if(!(d=f,f=f[A|=t<<1]))return this;if(!f.length)break;if(d[A+
1&3]||d[A+2&3]||d[A+3&3]){var B=d;var F=A}}for(;f.data!==c;)if(!(k=f,f=f.next))return this;(c=f.next)&&delete f.next;if(k)return c?k.next=c:delete k.next,this;if(!d)return this._root=c,this;c?d[A]=c:delete d[A];(f=d[0]||d[1]||d[2]||d[3])&&f===(d[3]||d[2]||d[1]||d[0])&&!f.length&&(B?B[F]=f:this._root=f);return this};p.removeAll=function(c){for(var d=0,f=c.length;d<f;++d)this.remove(c[d]);return this};p.root=function(){return this._root};p.size=function(){var c=0;this.visit(function(d){if(!d.length){do++c;
while(d=d.next)}});return c};p.visit=function(c){var d=[],f,k=this._root,r,u,v,x;for(k&&d.push(new l(k,this._x0,this._y0,this._x1,this._y1));f=d.pop();)if(!c(k=f.node,u=f.x0,v=f.y0,x=f.x1,f=f.y1)&&k.length){var C=(u+x)/2,z=(v+f)/2;(r=k[3])&&d.push(new l(r,C,z,x,f));(r=k[2])&&d.push(new l(r,u,z,C,f));(r=k[1])&&d.push(new l(r,C,v,x,z));(r=k[0])&&d.push(new l(r,u,v,C,z))}return this};p.visitAfter=function(c){var d=[],f=[],k;for(this._root&&d.push(new l(this._root,this._x0,this._y0,this._x1,this._y1));k=
d.pop();){var r=k.node;if(r.length){var u,v=k.x0,x=k.y0,C=k.x1,z=k.y1,y=(v+C)/2,D=(x+z)/2;(u=r[0])&&d.push(new l(u,v,x,y,D));(u=r[1])&&d.push(new l(u,y,x,C,D));(u=r[2])&&d.push(new l(u,v,D,y,z));(u=r[3])&&d.push(new l(u,y,D,C,z))}f.push(k)}for(;k=f.pop();)c(k.node,k.x0,k.y0,k.x1,k.y1);return this};p.x=function(c){return arguments.length?(this._x=c,this):this._x};p.y=function(c){return arguments.length?(this._y=c,this):this._y};q.quadtree=g;Object.defineProperty(q,"__esModule",{value:!0})})},{}],165:[function(b,
K,G){(function(q,m){"object"===typeof G&&"undefined"!==typeof K?m(G,b("d3-path")):(q=q||self,m(q.d3=q.d3||{},q.d3))})(this,function(q,m){function l(fb){return function(){return fb}}function h(fb){return 1<=fb?Ha:-1>=fb?-Ha:Math.asin(fb)}function a(fb){return fb.innerRadius}function g(fb){return fb.outerRadius}function e(fb){return fb.startAngle}function n(fb){return fb.endAngle}function p(fb){return fb&&fb.padAngle}function c(fb,tb,Pb,ec,cc,Zb,Qb){var sb=fb-Pb,Gb=tb-ec;Qb=(Qb?Zb:-Zb)/Va(sb*sb+Gb*
Gb);Gb*=Qb;sb*=-Qb;var xb=fb+Gb,Jb=tb+sb,Xb=Pb+Gb,nc=ec+sb;Pb=(xb+Xb)/2;ec=(Jb+nc)/2;tb=Xb-xb;fb=nc-Jb;Qb=tb*tb+fb*fb;Zb=cc-Zb;nc=xb*nc-Xb*Jb;var Qc=(0>fb?-1:1)*Va(Ga(0,Zb*Zb*Qb-nc*nc));xb=(nc*fb-tb*Qc)/Qb;Jb=(-nc*tb-fb*Qc)/Qb;Xb=(nc*fb+tb*Qc)/Qb;tb=(-nc*tb+fb*Qc)/Qb;fb=xb-Pb;Qb=Jb-ec;Pb=Xb-Pb;ec=tb-ec;fb*fb+Qb*Qb>Pb*Pb+ec*ec&&(xb=Xb,Jb=tb);return{cx:xb,cy:Jb,x01:-Gb,y01:-sb,x11:xb*(cc/Zb-1),y11:Jb*(cc/Zb-1)}}function d(fb){this._context=fb}function f(fb){return new d(fb)}function k(fb){return fb[0]}
function r(fb){return fb[1]}function u(){function fb(sb){var Gb,xb=sb.length,Jb,Xb=!1,nc;null==cc&&(Qb=Zb(nc=m.path()));for(Gb=0;Gb<=xb;++Gb)!(Gb<xb&&ec(Jb=sb[Gb],Gb,sb))===Xb&&((Xb=!Xb)?Qb.lineStart():Qb.lineEnd()),Xb&&Qb.point(+tb(Jb,Gb,sb),+Pb(Jb,Gb,sb));if(nc)return Qb=null,nc+""||null}var tb=k,Pb=r,ec=l(!0),cc=null,Zb=f,Qb=null;fb.x=function(sb){return arguments.length?(tb="function"===typeof sb?sb:l(+sb),fb):tb};fb.y=function(sb){return arguments.length?(Pb="function"===typeof sb?sb:l(+sb),
fb):Pb};fb.defined=function(sb){return arguments.length?(ec="function"===typeof sb?sb:l(!!sb),fb):ec};fb.curve=function(sb){return arguments.length?(Zb=sb,null!=cc&&(Qb=Zb(cc)),fb):Zb};fb.context=function(sb){return arguments.length?(null==sb?cc=Qb=null:Qb=Zb(cc=sb),fb):cc};return fb}function v(){function fb(Jb){var Xb,nc,Qc=Jb.length,$c,Uc=!1,ac,Ac=Array(Qc),Zc=Array(Qc);null==sb&&(xb=Gb(ac=m.path()));for(Xb=0;Xb<=Qc;++Xb){if(!(Xb<Qc&&Qb($c=Jb[Xb],Xb,Jb))===Uc)if(Uc=!Uc){var wc=Xb;xb.areaStart();
xb.lineStart()}else{xb.lineEnd();xb.lineStart();for(nc=Xb-1;nc>=wc;--nc)xb.point(Ac[nc],Zc[nc]);xb.lineEnd();xb.areaEnd()}Uc&&(Ac[Xb]=+Pb($c,Xb,Jb),Zc[Xb]=+cc($c,Xb,Jb),xb.point(ec?+ec($c,Xb,Jb):Ac[Xb],Zb?+Zb($c,Xb,Jb):Zc[Xb]))}if(ac)return xb=null,ac+""||null}function tb(){return u().defined(Qb).curve(Gb).context(sb)}var Pb=k,ec=null,cc=l(0),Zb=r,Qb=l(!0),sb=null,Gb=f,xb=null;fb.x=function(Jb){return arguments.length?(Pb="function"===typeof Jb?Jb:l(+Jb),ec=null,fb):Pb};fb.x0=function(Jb){return arguments.length?
(Pb="function"===typeof Jb?Jb:l(+Jb),fb):Pb};fb.x1=function(Jb){return arguments.length?(ec=null==Jb?null:"function"===typeof Jb?Jb:l(+Jb),fb):ec};fb.y=function(Jb){return arguments.length?(cc="function"===typeof Jb?Jb:l(+Jb),Zb=null,fb):cc};fb.y0=function(Jb){return arguments.length?(cc="function"===typeof Jb?Jb:l(+Jb),fb):cc};fb.y1=function(Jb){return arguments.length?(Zb=null==Jb?null:"function"===typeof Jb?Jb:l(+Jb),fb):Zb};fb.lineX0=fb.lineY0=function(){return tb().x(Pb).y(cc)};fb.lineY1=function(){return tb().x(Pb).y(Zb)};
fb.lineX1=function(){return tb().x(ec).y(cc)};fb.defined=function(Jb){return arguments.length?(Qb="function"===typeof Jb?Jb:l(!!Jb),fb):Qb};fb.curve=function(Jb){return arguments.length?(Gb=Jb,null!=sb&&(xb=Gb(sb)),fb):Gb};fb.context=function(Jb){return arguments.length?(null==Jb?sb=xb=null:xb=Gb(sb=Jb),fb):sb};return fb}function x(fb,tb){return tb<fb?-1:tb>fb?1:tb>=fb?0:NaN}function C(fb){return fb}function z(fb){this._curve=fb}function y(fb){function tb(Pb){return new z(fb(Pb))}tb._curve=fb;return tb}
function D(fb){var tb=fb.curve;fb.angle=fb.x;delete fb.x;fb.radius=fb.y;delete fb.y;fb.curve=function(Pb){return arguments.length?tb(y(Pb)):tb()._curve};return fb}function A(){return D(u().curve(La))}function t(){var fb=v().curve(La),tb=fb.curve,Pb=fb.lineX0,ec=fb.lineX1,cc=fb.lineY0,Zb=fb.lineY1;fb.angle=fb.x;delete fb.x;fb.startAngle=fb.x0;delete fb.x0;fb.endAngle=fb.x1;delete fb.x1;fb.radius=fb.y;delete fb.y;fb.innerRadius=fb.y0;delete fb.y0;fb.outerRadius=fb.y1;delete fb.y1;fb.lineStartAngle=
function(){return D(Pb())};delete fb.lineX0;fb.lineEndAngle=function(){return D(ec())};delete fb.lineX1;fb.lineInnerRadius=function(){return D(cc())};delete fb.lineY0;fb.lineOuterRadius=function(){return D(Zb())};delete fb.lineY1;fb.curve=function(Qb){return arguments.length?tb(y(Qb)):tb()._curve};return fb}function B(fb,tb){return[(tb=+tb)*Math.cos(fb-=Math.PI/2),tb*Math.sin(fb)]}function F(fb){return fb.source}function I(fb){return fb.target}function J(fb){function tb(){var sb,Gb=gb.call(arguments),
xb=Pb.apply(this,Gb),Jb=ec.apply(this,Gb);Qb||(Qb=sb=m.path());fb(Qb,+cc.apply(this,(Gb[0]=xb,Gb)),+Zb.apply(this,Gb),+cc.apply(this,(Gb[0]=Jb,Gb)),+Zb.apply(this,Gb));if(sb)return Qb=null,sb+""||null}var Pb=F,ec=I,cc=k,Zb=r,Qb=null;tb.source=function(sb){return arguments.length?(Pb=sb,tb):Pb};tb.target=function(sb){return arguments.length?(ec=sb,tb):ec};tb.x=function(sb){return arguments.length?(cc="function"===typeof sb?sb:l(+sb),tb):cc};tb.y=function(sb){return arguments.length?(Zb="function"===
typeof sb?sb:l(+sb),tb):Zb};tb.context=function(sb){return arguments.length?(Qb=null==sb?null:sb,tb):Qb};return tb}function L(fb,tb,Pb,ec,cc){fb.moveTo(tb,Pb);fb.bezierCurveTo(tb=(tb+ec)/2,Pb,tb,cc,ec,cc)}function H(fb,tb,Pb,ec,cc){fb.moveTo(tb,Pb);fb.bezierCurveTo(tb,Pb=(Pb+cc)/2,ec,Pb,ec,cc)}function P(fb,tb,Pb,ec,cc){var Zb=B(tb,Pb);tb=B(tb,Pb=(Pb+cc)/2);Pb=B(ec,Pb);ec=B(ec,cc);fb.moveTo(Zb[0],Zb[1]);fb.bezierCurveTo(tb[0],tb[1],Pb[0],Pb[1],ec[0],ec[1])}function M(){}function N(fb,tb,Pb){fb._context.bezierCurveTo((2*
fb._x0+fb._x1)/3,(2*fb._y0+fb._y1)/3,(fb._x0+2*fb._x1)/3,(fb._y0+2*fb._y1)/3,(fb._x0+4*fb._x1+tb)/6,(fb._y0+4*fb._y1+Pb)/6)}function T(fb){this._context=fb}function Q(fb){this._context=fb}function U(fb){this._context=fb}function S(fb,tb){this._basis=new T(fb);this._beta=tb}function X(fb,tb,Pb){fb._context.bezierCurveTo(fb._x1+fb._k*(fb._x2-fb._x0),fb._y1+fb._k*(fb._y2-fb._y0),fb._x2+fb._k*(fb._x1-tb),fb._y2+fb._k*(fb._y1-Pb),fb._x2,fb._y2)}function Z(fb,tb){this._context=fb;this._k=(1-tb)/6}function aa(fb,
tb){this._context=fb;this._k=(1-tb)/6}function fa(fb,tb){this._context=fb;this._k=(1-tb)/6}function ha(fb,tb,Pb){var ec=fb._x1,cc=fb._y1,Zb=fb._x2,Qb=fb._y2;if(1E-12<fb._l01_a){var sb=2*fb._l01_2a+3*fb._l01_a*fb._l12_a+fb._l12_2a,Gb=3*fb._l01_a*(fb._l01_a+fb._l12_a);ec=(ec*sb-fb._x0*fb._l12_2a+fb._x2*fb._l01_2a)/Gb;cc=(cc*sb-fb._y0*fb._l12_2a+fb._y2*fb._l01_2a)/Gb}1E-12<fb._l23_a&&(sb=2*fb._l23_2a+3*fb._l23_a*fb._l12_a+fb._l12_2a,Gb=3*fb._l23_a*(fb._l23_a+fb._l12_a),Zb=(Zb*sb+fb._x1*fb._l23_2a-tb*
fb._l12_2a)/Gb,Qb=(Qb*sb+fb._y1*fb._l23_2a-Pb*fb._l12_2a)/Gb);fb._context.bezierCurveTo(ec,cc,Zb,Qb,fb._x2,fb._y2)}function ja(fb,tb){this._context=fb;this._alpha=tb}function ba(fb,tb){this._context=fb;this._alpha=tb}function ma(fb,tb){this._context=fb;this._alpha=tb}function qa(fb){this._context=fb}function ka(fb,tb,Pb){var ec=fb._x1-fb._x0;tb-=fb._x1;var cc=(fb._y1-fb._y0)/(ec||0>tb&&-0);fb=(Pb-fb._y1)/(tb||0>ec&&-0);return((0>cc?-1:1)+(0>fb?-1:1))*Math.min(Math.abs(cc),Math.abs(fb),.5*Math.abs((cc*
tb+fb*ec)/(ec+tb)))||0}function oa(fb,tb){var Pb=fb._x1-fb._x0;return Pb?(3*(fb._y1-fb._y0)/Pb-tb)/2:tb}function na(fb,tb,Pb){var ec=fb._x0,cc=fb._x1,Zb=fb._y1,Qb=(cc-ec)/3;fb._context.bezierCurveTo(ec+Qb,fb._y0+Qb*tb,cc-Qb,Zb-Qb*Pb,cc,Zb)}function la(fb){this._context=fb}function ia(fb){this._context=new sa(fb)}function sa(fb){this._context=fb}function ta(fb){this._context=fb}function Aa(fb){var tb,Pb=fb.length-1,ec=Array(Pb),cc=Array(Pb),Zb=Array(Pb);ec[0]=0;cc[0]=2;Zb[0]=fb[0]+2*fb[1];for(tb=1;tb<
Pb-1;++tb)ec[tb]=1,cc[tb]=4,Zb[tb]=4*fb[tb]+2*fb[tb+1];ec[Pb-1]=2;cc[Pb-1]=7;Zb[Pb-1]=8*fb[Pb-1]+fb[Pb];for(tb=1;tb<Pb;++tb){var Qb=ec[tb]/cc[tb-1];cc[tb]-=Qb;Zb[tb]-=Qb*Zb[tb-1]}ec[Pb-1]=Zb[Pb-1]/cc[Pb-1];for(tb=Pb-2;0<=tb;--tb)ec[tb]=(Zb[tb]-ec[tb+1])/cc[tb];cc[Pb-1]=(fb[Pb]+ec[Pb-1])/2;for(tb=0;tb<Pb-1;++tb)cc[tb]=2*fb[tb+1]-ec[tb+1];return[ec,cc]}function Ka(fb,tb){this._context=fb;this._t=tb}function Sa(fb,tb){if(1<(Qb=fb.length))for(var Pb=1,ec,cc,Zb=fb[tb[0]],Qb,sb=Zb.length;Pb<Qb;++Pb)for(cc=
Zb,Zb=fb[tb[Pb]],ec=0;ec<sb;++ec)Zb[ec][1]+=Zb[ec][0]=isNaN(cc[ec][1])?cc[ec][0]:cc[ec][1]}function db(fb){fb=fb.length;for(var tb=Array(fb);0<=--fb;)tb[fb]=fb;return tb}function eb(fb,tb){return fb[tb]}function lb(fb){var tb=fb.map(ab);return db(fb).sort(function(Pb,ec){return tb[Pb]-tb[ec]})}function ab(fb){for(var tb=-1,Pb=0,ec=fb.length,cc,Zb=-Infinity;++tb<ec;)(cc=+fb[tb][1])>Zb&&(Zb=cc,Pb=tb);return Pb}function Ya(fb){var tb=fb.map(hb);return db(fb).sort(function(Pb,ec){return tb[Pb]-tb[ec]})}
function hb(fb){for(var tb=0,Pb=-1,ec=fb.length,cc;++Pb<ec;)if(cc=+fb[Pb][1])tb+=cc;return tb}var nb=Math.abs,va=Math.atan2,Ba=Math.cos,Ga=Math.max,Na=Math.min,$a=Math.sin,Va=Math.sqrt,qb=Math.PI,Ha=qb/2,Ra=2*qb;d.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(fb,tb){fb=+fb;tb=+tb;switch(this._point){case 0:this._point=
1;this._line?this._context.lineTo(fb,tb):this._context.moveTo(fb,tb);break;case 1:this._point=2;default:this._context.lineTo(fb,tb)}}};var La=y(f);z.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(fb,tb){this._curve.point(tb*Math.sin(fb),tb*-Math.cos(fb))}};var gb=Array.prototype.slice,ob={draw:function(fb,tb){tb=Math.sqrt(tb/qb);fb.moveTo(tb,0);
fb.arc(0,0,tb,0,Ra)}},ub={draw:function(fb,tb){tb=Math.sqrt(tb/5)/2;fb.moveTo(-3*tb,-tb);fb.lineTo(-tb,-tb);fb.lineTo(-tb,-3*tb);fb.lineTo(tb,-3*tb);fb.lineTo(tb,-tb);fb.lineTo(3*tb,-tb);fb.lineTo(3*tb,tb);fb.lineTo(tb,tb);fb.lineTo(tb,3*tb);fb.lineTo(-tb,3*tb);fb.lineTo(-tb,tb);fb.lineTo(-3*tb,tb);fb.closePath()}},za=Math.sqrt(1/3),Da=2*za,Ja={draw:function(fb,tb){tb=Math.sqrt(tb/Da);var Pb=tb*za;fb.moveTo(0,-tb);fb.lineTo(Pb,0);fb.lineTo(0,tb);fb.lineTo(-Pb,0);fb.closePath()}},Ta=Math.sin(qb/10)/
Math.sin(7*qb/10),Xa=Math.sin(Ra/10)*Ta,kb=-Math.cos(Ra/10)*Ta;Ta={draw:function(fb,tb){tb=Math.sqrt(.8908130915292852*tb);var Pb=Xa*tb,ec=kb*tb;fb.moveTo(0,-tb);fb.lineTo(Pb,ec);for(var cc=1;5>cc;++cc){var Zb=Ra*cc/5,Qb=Math.cos(Zb);Zb=Math.sin(Zb);fb.lineTo(Zb*tb,-Qb*tb);fb.lineTo(Qb*Pb-Zb*ec,Zb*Pb+Qb*ec)}fb.closePath()}};var rb={draw:function(fb,tb){tb=Math.sqrt(tb);var Pb=-tb/2;fb.rect(Pb,Pb,tb,tb)}},Mb=Math.sqrt(3),Fb={draw:function(fb,tb){tb=-Math.sqrt(tb/(3*Mb));fb.moveTo(0,2*tb);fb.lineTo(-Mb*
tb,-tb);fb.lineTo(Mb*tb,-tb);fb.closePath()}},Lb=Math.sqrt(3)/2,Vb=1/Math.sqrt(12),xc=3*(Vb/2+1),Gc={draw:function(fb,tb){var Pb=Math.sqrt(tb/xc);tb=Pb/2;var ec=Pb*Vb;Pb=Pb*Vb+Pb;var cc=-tb;fb.moveTo(tb,ec);fb.lineTo(tb,Pb);fb.lineTo(cc,Pb);fb.lineTo(-.5*tb-Lb*ec,Lb*tb+-.5*ec);fb.lineTo(-.5*tb-Lb*Pb,Lb*tb+-.5*Pb);fb.lineTo(-.5*cc-Lb*Pb,Lb*cc+-.5*Pb);fb.lineTo(-.5*tb+Lb*ec,-.5*ec-Lb*tb);fb.lineTo(-.5*tb+Lb*Pb,-.5*Pb-Lb*tb);fb.lineTo(-.5*cc+Lb*Pb,-.5*Pb-Lb*cc);fb.closePath()}},Hc=[ob,ub,Ja,rb,Ta,Fb,
Gc];T.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN;this._point=0},lineEnd:function(){switch(this._point){case 3:N(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(fb,tb){fb=+fb;tb=+tb;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(fb,tb):this._context.moveTo(fb,
tb);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:N(this,fb,tb)}this._x0=this._x1;this._x1=fb;this._y0=this._y1;this._y1=tb}};Q.prototype={areaStart:M,areaEnd:M,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN;this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2);this._context.closePath();break;case 2:this._context.moveTo((this._x2+
2*this._x3)/3,(this._y2+2*this._y3)/3);this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3);this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(fb,tb){fb=+fb;tb=+tb;switch(this._point){case 0:this._point=1;this._x2=fb;this._y2=tb;break;case 1:this._point=2;this._x3=fb;this._y3=tb;break;case 2:this._point=3;this._x4=fb;this._y4=tb;this._context.moveTo((this._x0+4*this._x1+fb)/6,(this._y0+
4*this._y1+tb)/6);break;default:N(this,fb,tb)}this._x0=this._x1;this._x1=fb;this._y0=this._y1;this._y1=tb}};U.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN;this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath();this._line=1-this._line},point:function(fb,tb){fb=+fb;tb=+tb;switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=
3;var Pb=(this._x0+4*this._x1+fb)/6,ec=(this._y0+4*this._y1+tb)/6;this._line?this._context.lineTo(Pb,ec):this._context.moveTo(Pb,ec);break;case 3:this._point=4;default:N(this,fb,tb)}this._x0=this._x1;this._x1=fb;this._y0=this._y1;this._y1=tb}};S.prototype={lineStart:function(){this._x=[];this._y=[];this._basis.lineStart()},lineEnd:function(){var fb=this._x,tb=this._y,Pb=fb.length-1;if(0<Pb)for(var ec=fb[0],cc=tb[0],Zb=fb[Pb]-ec,Qb=tb[Pb]-cc,sb=-1,Gb;++sb<=Pb;)Gb=sb/Pb,this._basis.point(this._beta*
fb[sb]+(1-this._beta)*(ec+Gb*Zb),this._beta*tb[sb]+(1-this._beta)*(cc+Gb*Qb));this._x=this._y=null;this._basis.lineEnd()},point:function(fb,tb){this._x.push(+fb);this._y.push(+tb)}};var Wc=function Pb(tb){function ec(cc){return 1===tb?new T(cc):new S(cc,tb)}ec.beta=function(cc){return Pb(+cc)};return ec}(.85);Z.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,
this._y2);break;case 3:X(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(tb,Pb){tb=+tb;Pb=+Pb;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(tb,Pb):this._context.moveTo(tb,Pb);break;case 1:this._point=2;this._x1=tb;this._y1=Pb;break;case 2:this._point=3;default:X(this,tb,Pb)}this._x0=this._x1;this._x1=this._x2;this._x2=tb;this._y0=this._y1;this._y1=this._y2;this._y2=Pb}};var ib=function ec(Pb){function cc(Zb){return new Z(Zb,
Pb)}cc.tension=function(Zb){return ec(+Zb)};return cc}(0);aa.prototype={areaStart:M,areaEnd:M,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN;this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3);this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3);this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),
this.point(this._x5,this._y5)}},point:function(Pb,ec){Pb=+Pb;ec=+ec;switch(this._point){case 0:this._point=1;this._x3=Pb;this._y3=ec;break;case 1:this._point=2;this._context.moveTo(this._x4=Pb,this._y4=ec);break;case 2:this._point=3;this._x5=Pb;this._y5=ec;break;default:X(this,Pb,ec)}this._x0=this._x1;this._x1=this._x2;this._x2=Pb;this._y0=this._y1;this._y1=this._y2;this._y2=ec}};var Yb=function cc(ec){function Zb(Qb){return new aa(Qb,ec)}Zb.tension=function(Qb){return cc(+Qb)};return Zb}(0);fa.prototype=
{areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath();this._line=1-this._line},point:function(ec,cc){ec=+ec;cc=+cc;switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);
break;case 3:this._point=4;default:X(this,ec,cc)}this._x0=this._x1;this._x1=this._x2;this._x2=ec;this._y0=this._y1;this._y1=this._y2;this._y2=cc}};var dc=function Zb(cc){function Qb(sb){return new fa(sb,cc)}Qb.tension=function(sb){return Zb(+sb)};return Qb}(0);ja.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=
0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(cc,Zb){cc=+cc;Zb=+Zb;if(this._point){var Qb=this._x2-cc,sb=this._y2-Zb;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(Qb*Qb+sb*sb,this._alpha))}switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(cc,Zb):this._context.moveTo(cc,Zb);break;case 1:this._point=
2;break;case 2:this._point=3;default:ha(this,cc,Zb)}this._l01_a=this._l12_a;this._l12_a=this._l23_a;this._l01_2a=this._l12_2a;this._l12_2a=this._l23_2a;this._x0=this._x1;this._x1=this._x2;this._x2=cc;this._y0=this._y1;this._y1=this._y2;this._y2=Zb}};var oc=function Qb(Zb){function sb(Gb){return Zb?new ja(Gb,Zb):new Z(Gb,0)}sb.alpha=function(Gb){return Qb(+Gb)};return sb}(.5);ba.prototype={areaStart:M,areaEnd:M,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=
this._y2=this._y3=this._y4=this._y5=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3);this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3);this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(Zb,Qb){Zb=+Zb;Qb=+Qb;if(this._point){var sb=this._x2-Zb,Gb=this._y2-
Qb;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(sb*sb+Gb*Gb,this._alpha))}switch(this._point){case 0:this._point=1;this._x3=Zb;this._y3=Qb;break;case 1:this._point=2;this._context.moveTo(this._x4=Zb,this._y4=Qb);break;case 2:this._point=3;this._x5=Zb;this._y5=Qb;break;default:ha(this,Zb,Qb)}this._l01_a=this._l12_a;this._l12_a=this._l23_a;this._l01_2a=this._l12_2a;this._l12_2a=this._l23_2a;this._x0=this._x1;this._x1=this._x2;this._x2=Zb;this._y0=this._y1;this._y1=this._y2;this._y2=Qb}};var tc=function sb(Qb){function Gb(xb){return Qb?
new ba(xb,Qb):new aa(xb,0)}Gb.alpha=function(xb){return sb(+xb)};return Gb}(.5);ma.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath();this._line=1-this._line},point:function(Qb,sb){Qb=+Qb;sb=+sb;if(this._point){var Gb=
this._x2-Qb,xb=this._y2-sb;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(Gb*Gb+xb*xb,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ha(this,Qb,sb)}this._l01_a=this._l12_a;this._l12_a=this._l23_a;this._l01_2a=this._l12_2a;this._l12_2a=this._l23_2a;this._x0=this._x1;this._x1=this._x2;this._x2=Qb;this._y0=this._y1;this._y1=
this._y2;this._y2=sb}};var Lc=function Gb(sb){function xb(Jb){return sb?new ma(Jb,sb):new fa(Jb,0)}xb.alpha=function(Jb){return Gb(+Jb)};return xb}(.5);qa.prototype={areaStart:M,areaEnd:M,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(sb,Gb){sb=+sb;Gb=+Gb;this._point?this._context.lineTo(sb,Gb):(this._point=1,this._context.moveTo(sb,Gb))}};la.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=
this._x1=this._y0=this._y1=this._t0=NaN;this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:na(this,this._t0,oa(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(sb,Gb){var xb=NaN;sb=+sb;Gb=+Gb;if(sb!==this._x1||Gb!==this._y1){switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(sb,Gb):this._context.moveTo(sb,Gb);break;case 1:this._point=
2;break;case 2:this._point=3;na(this,oa(this,xb=ka(this,sb,Gb)),xb);break;default:na(this,this._t0,xb=ka(this,sb,Gb))}this._x0=this._x1;this._x1=sb;this._y0=this._y1;this._y1=Gb;this._t0=xb}}};(ia.prototype=Object.create(la.prototype)).point=function(sb,Gb){la.prototype.point.call(this,Gb,sb)};sa.prototype={moveTo:function(sb,Gb){this._context.moveTo(Gb,sb)},closePath:function(){this._context.closePath()},lineTo:function(sb,Gb){this._context.lineTo(Gb,sb)},bezierCurveTo:function(sb,Gb,xb,Jb,Xb,nc){this._context.bezierCurveTo(Gb,
sb,Jb,xb,nc,Xb)}};ta.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[];this._y=[]},lineEnd:function(){var sb=this._x,Gb=this._y,xb=sb.length;if(xb)if(this._line?this._context.lineTo(sb[0],Gb[0]):this._context.moveTo(sb[0],Gb[0]),2===xb)this._context.lineTo(sb[1],Gb[1]);else for(var Jb=Aa(sb),Xb=Aa(Gb),nc=0,Qc=1;Qc<xb;++nc,++Qc)this._context.bezierCurveTo(Jb[0][nc],Xb[0][nc],Jb[1][nc],Xb[1][nc],sb[Qc],Gb[Qc]);(this._line||0!==this._line&&
1===xb)&&this._context.closePath();this._line=1-this._line;this._x=this._y=null},point:function(sb,Gb){this._x.push(+sb);this._y.push(+Gb)}};Ka.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN;this._point=0},lineEnd:function(){0<this._t&&1>this._t&&2===this._point&&this._context.lineTo(this._x,this._y);(this._line||0!==this._line&&1===this._point)&&this._context.closePath();0<=this._line&&(this._t=1-this._t,this._line=1-this._line)},
point:function(sb,Gb){sb=+sb;Gb=+Gb;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(sb,Gb):this._context.moveTo(sb,Gb);break;case 1:this._point=2;default:if(0>=this._t)this._context.lineTo(this._x,Gb),this._context.lineTo(sb,Gb);else{var xb=this._x*(1-this._t)+sb*this._t;this._context.lineTo(xb,this._y);this._context.lineTo(xb,Gb)}}this._x=sb;this._y=Gb}};q.arc=function(){function sb(){var ac,Ac=+Gb.apply(this,arguments),Zc=+xb.apply(this,arguments),wc=nc.apply(this,arguments)-
Ha,Dc=Qc.apply(this,arguments)-Ha,ad=nb(Dc-wc),Rc=Dc>wc;Uc||(Uc=ac=m.path());if(Zc<Ac){var Bc=Zc;Zc=Ac;Ac=Bc}if(1E-12<Zc)if(ad>Ra-1E-12)Uc.moveTo(Zc*Ba(wc),Zc*$a(wc)),Uc.arc(0,0,Zc,wc,Dc,!Rc),1E-12<Ac&&(Uc.moveTo(Ac*Ba(Dc),Ac*$a(Dc)),Uc.arc(0,0,Ac,Dc,wc,Rc));else{var id=wc,jd=Dc;Bc=wc;var ld=Dc,ke=ad,ud=ad,td=$c.apply(this,arguments)/2,Sd=1E-12<td&&(Xb?+Xb.apply(this,arguments):Va(Ac*Ac+Zc*Zc)),be=Na(nb(Zc-Ac)/2,+Jb.apply(this,arguments)),Ld=be,te=be;if(1E-12<Sd){var ze=h(Sd/Ac*$a(td));td=h(Sd/Zc*
$a(td));1E-12<(ke-=2*ze)?(ze*=Rc?1:-1,Bc+=ze,ld-=ze):(ke=0,Bc=ld=(wc+Dc)/2);1E-12<(ud-=2*td)?(td*=Rc?1:-1,id+=td,jd-=td):(ud=0,id=jd=(wc+Dc)/2)}wc=Zc*Ba(id);Dc=Zc*$a(id);ze=Ac*Ba(ld);td=Ac*$a(ld);if(1E-12<be){var Dd=Zc*Ba(jd),zd=Zc*$a(jd),oe=Ac*Ba(Bc),me=Ac*$a(Bc);if(ad=ad<qb){var re=oe-wc;ad=me-Dc;Sd=ze-Dd;var Te=td-zd,pf=Te*re-Sd*ad;1E-12>pf*pf?re=void 0:(pf=(Sd*(Dc-zd)-Te*(wc-Dd))/pf,re=[wc+pf*re,Dc+pf*ad]);ad=re}ad&&(Ld=wc-re[0],te=Dc-re[1],ad=Dd-re[0],Sd=zd-re[1],Ld=(Ld*ad+te*Sd)/(Va(Ld*Ld+te*
te)*Va(ad*ad+Sd*Sd)),te=1/$a((1<Ld?0:-1>Ld?qb:Math.acos(Ld))/2),re=Va(re[0]*re[0]+re[1]*re[1]),Ld=Na(be,(Ac-re)/(te-1)),te=Na(be,(Zc-re)/(te+1)))}1E-12<ud?1E-12<te?(id=c(oe,me,wc,Dc,Zc,te,Rc),jd=c(Dd,zd,ze,td,Zc,te,Rc),Uc.moveTo(id.cx+id.x01,id.cy+id.y01),te<be?Uc.arc(id.cx,id.cy,te,va(id.y01,id.x01),va(jd.y01,jd.x01),!Rc):(Uc.arc(id.cx,id.cy,te,va(id.y01,id.x01),va(id.y11,id.x11),!Rc),Uc.arc(0,0,Zc,va(id.cy+id.y11,id.cx+id.x11),va(jd.cy+jd.y11,jd.cx+jd.x11),!Rc),Uc.arc(jd.cx,jd.cy,te,va(jd.y11,jd.x11),
va(jd.y01,jd.x01),!Rc))):(Uc.moveTo(wc,Dc),Uc.arc(0,0,Zc,id,jd,!Rc)):Uc.moveTo(wc,Dc);1E-12<Ac&&1E-12<ke?1E-12<Ld?(id=c(ze,td,Dd,zd,Ac,-Ld,Rc),jd=c(wc,Dc,oe,me,Ac,-Ld,Rc),Uc.lineTo(id.cx+id.x01,id.cy+id.y01),Ld<be?Uc.arc(id.cx,id.cy,Ld,va(id.y01,id.x01),va(jd.y01,jd.x01),!Rc):(Uc.arc(id.cx,id.cy,Ld,va(id.y01,id.x01),va(id.y11,id.x11),!Rc),Uc.arc(0,0,Ac,va(id.cy+id.y11,id.cx+id.x11),va(jd.cy+jd.y11,jd.cx+jd.x11),Rc),Uc.arc(jd.cx,jd.cy,Ld,va(jd.y11,jd.x11),va(jd.y01,jd.x01),!Rc))):Uc.arc(0,0,Ac,ld,
Bc,Rc):Uc.lineTo(ze,td)}else Uc.moveTo(0,0);Uc.closePath();if(ac)return Uc=null,ac+""||null}var Gb=a,xb=g,Jb=l(0),Xb=null,nc=e,Qc=n,$c=p,Uc=null;sb.centroid=function(){var ac=(+Gb.apply(this,arguments)+ +xb.apply(this,arguments))/2,Ac=(+nc.apply(this,arguments)+ +Qc.apply(this,arguments))/2-qb/2;return[Ba(Ac)*ac,$a(Ac)*ac]};sb.innerRadius=function(ac){return arguments.length?(Gb="function"===typeof ac?ac:l(+ac),sb):Gb};sb.outerRadius=function(ac){return arguments.length?(xb="function"===typeof ac?
ac:l(+ac),sb):xb};sb.cornerRadius=function(ac){return arguments.length?(Jb="function"===typeof ac?ac:l(+ac),sb):Jb};sb.padRadius=function(ac){return arguments.length?(Xb=null==ac?null:"function"===typeof ac?ac:l(+ac),sb):Xb};sb.startAngle=function(ac){return arguments.length?(nc="function"===typeof ac?ac:l(+ac),sb):nc};sb.endAngle=function(ac){return arguments.length?(Qc="function"===typeof ac?ac:l(+ac),sb):Qc};sb.padAngle=function(ac){return arguments.length?($c="function"===typeof ac?ac:l(+ac),
sb):$c};sb.context=function(ac){return arguments.length?(Uc=null==ac?null:ac,sb):Uc};return sb};q.area=v;q.areaRadial=t;q.curveBasis=function(sb){return new T(sb)};q.curveBasisClosed=function(sb){return new Q(sb)};q.curveBasisOpen=function(sb){return new U(sb)};q.curveBundle=Wc;q.curveCardinal=ib;q.curveCardinalClosed=Yb;q.curveCardinalOpen=dc;q.curveCatmullRom=oc;q.curveCatmullRomClosed=tc;q.curveCatmullRomOpen=Lc;q.curveLinear=f;q.curveLinearClosed=function(sb){return new qa(sb)};q.curveMonotoneX=
function(sb){return new la(sb)};q.curveMonotoneY=function(sb){return new ia(sb)};q.curveNatural=function(sb){return new ta(sb)};q.curveStep=function(sb){return new Ka(sb,.5)};q.curveStepAfter=function(sb){return new Ka(sb,1)};q.curveStepBefore=function(sb){return new Ka(sb,0)};q.line=u;q.lineRadial=A;q.linkHorizontal=function(){return J(L)};q.linkRadial=function(){var sb=J(P);sb.angle=sb.x;delete sb.x;sb.radius=sb.y;delete sb.y;return sb};q.linkVertical=function(){return J(H)};q.pie=function(){function sb($c){var Uc,
ac=$c.length;var Ac=0;var Zc=Array(ac),wc=Array(ac),Dc=+Xb.apply(this,arguments);var ad=Math.min(Ra,Math.max(-Ra,nc.apply(this,arguments)-Dc));var Rc=Math.min(Math.abs(ad)/ac,Qc.apply(this,arguments)),Bc=Rc*(0>ad?-1:1),id;for(Uc=0;Uc<ac;++Uc)0<(id=wc[Zc[Uc]=Uc]=+Gb($c[Uc],Uc,$c))&&(Ac+=id);null!=xb?Zc.sort(function(ld,ke){return xb(wc[ld],wc[ke])}):null!=Jb&&Zc.sort(function(ld,ke){return Jb($c[ld],$c[ke])});Uc=0;for(ad=Ac?(ad-ac*Bc)/Ac:0;Uc<ac;++Uc,Dc=jd){Ac=Zc[Uc];id=wc[Ac];var jd=Dc+(0<id?id*ad:
0)+Bc;wc[Ac]={data:$c[Ac],index:Uc,value:id,startAngle:Dc,endAngle:jd,padAngle:Rc}}return wc}var Gb=C,xb=x,Jb=null,Xb=l(0),nc=l(Ra),Qc=l(0);sb.value=function($c){return arguments.length?(Gb="function"===typeof $c?$c:l(+$c),sb):Gb};sb.sortValues=function($c){return arguments.length?(xb=$c,Jb=null,sb):xb};sb.sort=function($c){return arguments.length?(Jb=$c,xb=null,sb):Jb};sb.startAngle=function($c){return arguments.length?(Xb="function"===typeof $c?$c:l(+$c),sb):Xb};sb.endAngle=function($c){return arguments.length?
(nc="function"===typeof $c?$c:l(+$c),sb):nc};sb.padAngle=function($c){return arguments.length?(Qc="function"===typeof $c?$c:l(+$c),sb):Qc};return sb};q.pointRadial=B;q.radialArea=t;q.radialLine=A;q.stack=function(){function sb(nc){var Qc=Gb.apply(this,arguments),$c,Uc=nc.length,ac=Qc.length,Ac=Array(ac);for($c=0;$c<ac;++$c){for(var Zc=Qc[$c],wc=Ac[$c]=Array(Uc),Dc=0,ad;Dc<Uc;++Dc)wc[Dc]=ad=[0,+Xb(nc[Dc],Zc,Dc,nc)],ad.data=nc[Dc];wc.key=Zc}$c=0;for(Qc=xb(Ac);$c<ac;++$c)Ac[Qc[$c]].index=$c;Jb(Ac,Qc);
return Ac}var Gb=l([]),xb=db,Jb=Sa,Xb=eb;sb.keys=function(nc){return arguments.length?(Gb="function"===typeof nc?nc:l(gb.call(nc)),sb):Gb};sb.value=function(nc){return arguments.length?(Xb="function"===typeof nc?nc:l(+nc),sb):Xb};sb.order=function(nc){return arguments.length?(xb=null==nc?db:"function"===typeof nc?nc:l(gb.call(nc)),sb):xb};sb.offset=function(nc){return arguments.length?(Jb=null==nc?Sa:nc,sb):Jb};return sb};q.stackOffsetDiverging=function(sb,Gb){if(0<(Uc=sb.length))for(var xb,Jb=0,
Xb,nc,Qc,$c,Uc,ac=sb[Gb[0]].length;Jb<ac;++Jb)for(xb=Qc=$c=0;xb<Uc;++xb)0<(nc=(Xb=sb[Gb[xb]][Jb])[1]-Xb[0])?(Xb[0]=Qc,Xb[1]=Qc+=nc):0>nc?(Xb[1]=$c,Xb[0]=$c+=nc):(Xb[0]=0,Xb[1]=nc)};q.stackOffsetExpand=function(sb,Gb){if(0<(Jb=sb.length)){for(var xb,Jb,Xb=0,nc=sb[0].length,Qc;Xb<nc;++Xb){for(Qc=xb=0;xb<Jb;++xb)Qc+=sb[xb][Xb][1]||0;if(Qc)for(xb=0;xb<Jb;++xb)sb[xb][Xb][1]/=Qc}Sa(sb,Gb)}};q.stackOffsetNone=Sa;q.stackOffsetSilhouette=function(sb,Gb){if(0<(Xb=sb.length)){for(var xb=0,Jb=sb[Gb[0]],Xb,nc=
Jb.length;xb<nc;++xb){for(var Qc=0,$c=0;Qc<Xb;++Qc)$c+=sb[Qc][xb][1]||0;Jb[xb][1]+=Jb[xb][0]=-$c/2}Sa(sb,Gb)}};q.stackOffsetWiggle=function(sb,Gb){if(0<(Qc=sb.length)&&0<(nc=(Xb=sb[Gb[0]]).length)){for(var xb=0,Jb=1,Xb,nc,Qc;Jb<nc;++Jb){for(var $c=0,Uc=0,ac=0;$c<Qc;++$c){var Ac=sb[Gb[$c]],Zc=Ac[Jb][1]||0;Ac=(Zc-(Ac[Jb-1][1]||0))/2;for(var wc=0;wc<$c;++wc){var Dc=sb[Gb[wc]];Ac+=(Dc[Jb][1]||0)-(Dc[Jb-1][1]||0)}Uc+=Zc;ac+=Ac*Zc}Xb[Jb-1][1]+=Xb[Jb-1][0]=xb;Uc&&(xb-=ac/Uc)}Xb[Jb-1][1]+=Xb[Jb-1][0]=xb;
Sa(sb,Gb)}};q.stackOrderAppearance=lb;q.stackOrderAscending=Ya;q.stackOrderDescending=function(sb){return Ya(sb).reverse()};q.stackOrderInsideOut=function(sb){var Gb=sb.length,xb=sb.map(hb),Jb=lb(sb),Xb=0,nc=0,Qc=[],$c=[];for(sb=0;sb<Gb;++sb){var Uc=Jb[sb];Xb<nc?(Xb+=xb[Uc],Qc.push(Uc)):(nc+=xb[Uc],$c.push(Uc))}return $c.reverse().concat(Qc)};q.stackOrderNone=db;q.stackOrderReverse=function(sb){return db(sb).reverse()};q.symbol=function(){function sb(){var Xb;Jb||(Jb=Xb=m.path());Gb.apply(this,arguments).draw(Jb,
+xb.apply(this,arguments));if(Xb)return Jb=null,Xb+""||null}var Gb=l(ob),xb=l(64),Jb=null;sb.type=function(Xb){return arguments.length?(Gb="function"===typeof Xb?Xb:l(Xb),sb):Gb};sb.size=function(Xb){return arguments.length?(xb="function"===typeof Xb?Xb:l(+Xb),sb):xb};sb.context=function(Xb){return arguments.length?(Jb=null==Xb?null:Xb,sb):Jb};return sb};q.symbolCircle=ob;q.symbolCross=ub;q.symbolDiamond=Ja;q.symbolSquare=rb;q.symbolStar=Ta;q.symbolTriangle=Fb;q.symbolWye=Gc;q.symbols=Hc;Object.defineProperty(q,
"__esModule",{value:!0})})},{"d3-path":163}],166:[function(b,K,G){(function(q,m){"object"===typeof G&&"undefined"!==typeof K?m(G,b("d3-time")):(q=q||self,m(q.d3=q.d3||{},q.d3))})(this,function(q,m){function l(Ja){if(0<=Ja.y&&100>Ja.y){var Ta=new Date(-1,Ja.m,Ja.d,Ja.H,Ja.M,Ja.S,Ja.L);Ta.setFullYear(Ja.y);return Ta}return new Date(Ja.y,Ja.m,Ja.d,Ja.H,Ja.M,Ja.S,Ja.L)}function h(Ja){if(0<=Ja.y&&100>Ja.y){var Ta=new Date(Date.UTC(-1,Ja.m,Ja.d,Ja.H,Ja.M,Ja.S,Ja.L));Ta.setUTCFullYear(Ja.y);return Ta}return new Date(Date.UTC(Ja.y,
Ja.m,Ja.d,Ja.H,Ja.M,Ja.S,Ja.L))}function a(Ja,Ta,Xa){return{y:Ja,m:Ta,d:Xa,H:0,M:0,S:0,L:0}}function g(Ja){function Ta(Qb,sb){return function(Gb){var xb=[],Jb=-1,Xb=0,nc=Qb.length,Qc,$c;for(Gb instanceof Date||(Gb=new Date(+Gb));++Jb<nc;)if(37===Qb.charCodeAt(Jb)){xb.push(Qb.slice(Xb,Jb));null!=(Xb=Ra[Qc=Qb.charAt(++Jb)])?Qc=Qb.charAt(++Jb):Xb="e"===Qc?" ":"0";if($c=sb[Qc])Qc=$c(Gb,Xb);xb.push(Qc);Xb=Jb+1}xb.push(Qb.slice(Xb,Jb));return xb.join("")}}function Xa(Qb,sb){return function(Gb){var xb=a(1900,
void 0,1);if(kb(xb,Qb,Gb+="",0)!=Gb.length)return null;if("Q"in xb)return new Date(xb.Q);if("s"in xb)return new Date(1E3*xb.s+("L"in xb?xb.L:0));!sb||"Z"in xb||(xb.Z=0);"p"in xb&&(xb.H=xb.H%12+12*xb.p);void 0===xb.m&&(xb.m="q"in xb?xb.q:0);if("V"in xb){if(1>xb.V||53<xb.V)return null;"w"in xb||(xb.w=1);if("Z"in xb){Gb=h(a(xb.y,0,1));var Jb=Gb.getUTCDay();Gb=4<Jb||0===Jb?m.utcMonday.ceil(Gb):m.utcMonday(Gb);Gb=m.utcDay.offset(Gb,7*(xb.V-1));xb.y=Gb.getUTCFullYear();xb.m=Gb.getUTCMonth();xb.d=Gb.getUTCDate()+
(xb.w+6)%7}else Gb=l(a(xb.y,0,1)),Jb=Gb.getDay(),Gb=4<Jb||0===Jb?m.timeMonday.ceil(Gb):m.timeMonday(Gb),Gb=m.timeDay.offset(Gb,7*(xb.V-1)),xb.y=Gb.getFullYear(),xb.m=Gb.getMonth(),xb.d=Gb.getDate()+(xb.w+6)%7}else if("W"in xb||"U"in xb)"w"in xb||(xb.w="u"in xb?xb.u%7:"W"in xb?1:0),Jb="Z"in xb?h(a(xb.y,0,1)).getUTCDay():l(a(xb.y,0,1)).getDay(),xb.m=0,xb.d="W"in xb?(xb.w+6)%7+7*xb.W-(Jb+5)%7:xb.w+7*xb.U-(Jb+6)%7;return"Z"in xb?(xb.H+=xb.Z/100|0,xb.M+=xb.Z%100,h(xb)):l(xb)}}function kb(Qb,sb,Gb,xb){for(var Jb=
0,Xb=sb.length,nc=Gb.length,Qc;Jb<Xb;){if(xb>=nc)return-1;Qc=sb.charCodeAt(Jb++);if(37===Qc){if(Qc=sb.charAt(Jb++),Qc=Zb[Qc in Ra?sb.charAt(Jb++):Qc],!Qc||0>(xb=Qc(Qb,Gb,xb)))return-1}else if(Qc!=Gb.charCodeAt(xb++))return-1}return xb}var rb=Ja.dateTime,Mb=Ja.date,Fb=Ja.time,Lb=Ja.periods,Vb=Ja.days,xc=Ja.shortDays,Gc=Ja.months,Hc=Ja.shortMonths,Wc=p(Lb),ib=c(Lb),Yb=p(Vb),dc=c(Vb),oc=p(xc),tc=c(xc),Lc=p(Gc),fb=c(Gc),tb=p(Hc),Pb=c(Hc),ec={a:function(Qb){return xc[Qb.getDay()]},A:function(Qb){return Vb[Qb.getDay()]},
b:function(Qb){return Hc[Qb.getMonth()]},B:function(Qb){return Gc[Qb.getMonth()]},c:null,d:M,e:M,f:S,H:N,I:T,j:Q,L:U,m:X,M:Z,p:function(Qb){return Lb[+(12<=Qb.getHours())]},q:function(Qb){return 1+~~(Qb.getMonth()/3)},Q:Na,s:$a,S:aa,u:fa,U:ha,V:ja,w:ba,W:ma,x:null,X:null,y:qa,Y:ka,Z:oa,"%":Ga},cc={a:function(Qb){return xc[Qb.getUTCDay()]},A:function(Qb){return Vb[Qb.getUTCDay()]},b:function(Qb){return Hc[Qb.getUTCMonth()]},B:function(Qb){return Gc[Qb.getUTCMonth()]},c:null,d:na,e:na,f:Aa,H:la,I:ia,
j:sa,L:ta,m:Ka,M:Sa,p:function(Qb){return Lb[+(12<=Qb.getUTCHours())]},q:function(Qb){return 1+~~(Qb.getUTCMonth()/3)},Q:Na,s:$a,S:db,u:eb,U:lb,V:ab,w:Ya,W:hb,x:null,X:null,y:nb,Y:va,Z:Ba,"%":Ga},Zb={a:function(Qb,sb,Gb){return(sb=oc.exec(sb.slice(Gb)))?(Qb.w=tc[sb[0].toLowerCase()],Gb+sb[0].length):-1},A:function(Qb,sb,Gb){return(sb=Yb.exec(sb.slice(Gb)))?(Qb.w=dc[sb[0].toLowerCase()],Gb+sb[0].length):-1},b:function(Qb,sb,Gb){return(sb=tb.exec(sb.slice(Gb)))?(Qb.m=Pb[sb[0].toLowerCase()],Gb+sb[0].length):
-1},B:function(Qb,sb,Gb){return(sb=Lc.exec(sb.slice(Gb)))?(Qb.m=fb[sb[0].toLowerCase()],Gb+sb[0].length):-1},c:function(Qb,sb,Gb){return kb(Qb,rb,sb,Gb)},d:D,e:D,f:J,H:t,I:t,j:A,L:I,m:y,M:B,p:function(Qb,sb,Gb){return(sb=Wc.exec(sb.slice(Gb)))?(Qb.p=ib[sb[0].toLowerCase()],Gb+sb[0].length):-1},q:z,Q:H,s:P,S:F,u:f,U:k,V:r,w:d,W:u,x:function(Qb,sb,Gb){return kb(Qb,Mb,sb,Gb)},X:function(Qb,sb,Gb){return kb(Qb,Fb,sb,Gb)},y:x,Y:v,Z:C,"%":L};ec.x=Ta(Mb,ec);ec.X=Ta(Fb,ec);ec.c=Ta(rb,ec);cc.x=Ta(Mb,cc);cc.X=
Ta(Fb,cc);cc.c=Ta(rb,cc);return{format:function(Qb){var sb=Ta(Qb+="",ec);sb.toString=function(){return Qb};return sb},parse:function(Qb){var sb=Xa(Qb+="",!1);sb.toString=function(){return Qb};return sb},utcFormat:function(Qb){var sb=Ta(Qb+="",cc);sb.toString=function(){return Qb};return sb},utcParse:function(Qb){var sb=Xa(Qb+="",!0);sb.toString=function(){return Qb};return sb}}}function e(Ja,Ta,Xa){var kb=0>Ja?"-":"";Ja=(kb?-Ja:Ja)+"";var rb=Ja.length;return kb+(rb<Xa?Array(Xa-rb+1).join(Ta)+Ja:Ja)}
function n(Ja){return Ja.replace(ob,"\\$&")}function p(Ja){return new RegExp("^(?:"+Ja.map(n).join("|")+")","i")}function c(Ja){for(var Ta={},Xa=-1,kb=Ja.length;++Xa<kb;)Ta[Ja[Xa].toLowerCase()]=Xa;return Ta}function d(Ja,Ta,Xa){return(Ta=La.exec(Ta.slice(Xa,Xa+1)))?(Ja.w=+Ta[0],Xa+Ta[0].length):-1}function f(Ja,Ta,Xa){return(Ta=La.exec(Ta.slice(Xa,Xa+1)))?(Ja.u=+Ta[0],Xa+Ta[0].length):-1}function k(Ja,Ta,Xa){return(Ta=La.exec(Ta.slice(Xa,Xa+2)))?(Ja.U=+Ta[0],Xa+Ta[0].length):-1}function r(Ja,Ta,
Xa){return(Ta=La.exec(Ta.slice(Xa,Xa+2)))?(Ja.V=+Ta[0],Xa+Ta[0].length):-1}function u(Ja,Ta,Xa){return(Ta=La.exec(Ta.slice(Xa,Xa+2)))?(Ja.W=+Ta[0],Xa+Ta[0].length):-1}function v(Ja,Ta,Xa){return(Ta=La.exec(Ta.slice(Xa,Xa+4)))?(Ja.y=+Ta[0],Xa+Ta[0].length):-1}function x(Ja,Ta,Xa){return(Ta=La.exec(Ta.slice(Xa,Xa+2)))?(Ja.y=+Ta[0]+(68<+Ta[0]?1900:2E3),Xa+Ta[0].length):-1}function C(Ja,Ta,Xa){return(Ta=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(Ta.slice(Xa,Xa+6)))?(Ja.Z=Ta[1]?0:-(Ta[2]+(Ta[3]||"00")),Xa+Ta[0].length):
-1}function z(Ja,Ta,Xa){return(Ta=La.exec(Ta.slice(Xa,Xa+1)))?(Ja.q=3*Ta[0]-3,Xa+Ta[0].length):-1}function y(Ja,Ta,Xa){return(Ta=La.exec(Ta.slice(Xa,Xa+2)))?(Ja.m=Ta[0]-1,Xa+Ta[0].length):-1}function D(Ja,Ta,Xa){return(Ta=La.exec(Ta.slice(Xa,Xa+2)))?(Ja.d=+Ta[0],Xa+Ta[0].length):-1}function A(Ja,Ta,Xa){return(Ta=La.exec(Ta.slice(Xa,Xa+3)))?(Ja.m=0,Ja.d=+Ta[0],Xa+Ta[0].length):-1}function t(Ja,Ta,Xa){return(Ta=La.exec(Ta.slice(Xa,Xa+2)))?(Ja.H=+Ta[0],Xa+Ta[0].length):-1}function B(Ja,Ta,Xa){return(Ta=
La.exec(Ta.slice(Xa,Xa+2)))?(Ja.M=+Ta[0],Xa+Ta[0].length):-1}function F(Ja,Ta,Xa){return(Ta=La.exec(Ta.slice(Xa,Xa+2)))?(Ja.S=+Ta[0],Xa+Ta[0].length):-1}function I(Ja,Ta,Xa){return(Ta=La.exec(Ta.slice(Xa,Xa+3)))?(Ja.L=+Ta[0],Xa+Ta[0].length):-1}function J(Ja,Ta,Xa){return(Ta=La.exec(Ta.slice(Xa,Xa+6)))?(Ja.L=Math.floor(Ta[0]/1E3),Xa+Ta[0].length):-1}function L(Ja,Ta,Xa){return(Ja=gb.exec(Ta.slice(Xa,Xa+1)))?Xa+Ja[0].length:-1}function H(Ja,Ta,Xa){return(Ta=La.exec(Ta.slice(Xa)))?(Ja.Q=+Ta[0],Xa+Ta[0].length):
-1}function P(Ja,Ta,Xa){return(Ta=La.exec(Ta.slice(Xa)))?(Ja.s=+Ta[0],Xa+Ta[0].length):-1}function M(Ja,Ta){return e(Ja.getDate(),Ta,2)}function N(Ja,Ta){return e(Ja.getHours(),Ta,2)}function T(Ja,Ta){return e(Ja.getHours()%12||12,Ta,2)}function Q(Ja,Ta){return e(1+m.timeDay.count(m.timeYear(Ja),Ja),Ta,3)}function U(Ja,Ta){return e(Ja.getMilliseconds(),Ta,3)}function S(Ja,Ta){return U(Ja,Ta)+"000"}function X(Ja,Ta){return e(Ja.getMonth()+1,Ta,2)}function Z(Ja,Ta){return e(Ja.getMinutes(),Ta,2)}function aa(Ja,
Ta){return e(Ja.getSeconds(),Ta,2)}function fa(Ja){Ja=Ja.getDay();return 0===Ja?7:Ja}function ha(Ja,Ta){return e(m.timeSunday.count(m.timeYear(Ja)-1,Ja),Ta,2)}function ja(Ja,Ta){var Xa=Ja.getDay();Ja=4<=Xa||0===Xa?m.timeThursday(Ja):m.timeThursday.ceil(Ja);return e(m.timeThursday.count(m.timeYear(Ja),Ja)+(4===m.timeYear(Ja).getDay()),Ta,2)}function ba(Ja){return Ja.getDay()}function ma(Ja,Ta){return e(m.timeMonday.count(m.timeYear(Ja)-1,Ja),Ta,2)}function qa(Ja,Ta){return e(Ja.getFullYear()%100,Ta,
2)}function ka(Ja,Ta){return e(Ja.getFullYear()%1E4,Ta,4)}function oa(Ja){Ja=Ja.getTimezoneOffset();return(0<Ja?"-":(Ja*=-1,"+"))+e(Ja/60|0,"0",2)+e(Ja%60,"0",2)}function na(Ja,Ta){return e(Ja.getUTCDate(),Ta,2)}function la(Ja,Ta){return e(Ja.getUTCHours(),Ta,2)}function ia(Ja,Ta){return e(Ja.getUTCHours()%12||12,Ta,2)}function sa(Ja,Ta){return e(1+m.utcDay.count(m.utcYear(Ja),Ja),Ta,3)}function ta(Ja,Ta){return e(Ja.getUTCMilliseconds(),Ta,3)}function Aa(Ja,Ta){return ta(Ja,Ta)+"000"}function Ka(Ja,
Ta){return e(Ja.getUTCMonth()+1,Ta,2)}function Sa(Ja,Ta){return e(Ja.getUTCMinutes(),Ta,2)}function db(Ja,Ta){return e(Ja.getUTCSeconds(),Ta,2)}function eb(Ja){Ja=Ja.getUTCDay();return 0===Ja?7:Ja}function lb(Ja,Ta){return e(m.utcSunday.count(m.utcYear(Ja)-1,Ja),Ta,2)}function ab(Ja,Ta){var Xa=Ja.getUTCDay();Ja=4<=Xa||0===Xa?m.utcThursday(Ja):m.utcThursday.ceil(Ja);return e(m.utcThursday.count(m.utcYear(Ja),Ja)+(4===m.utcYear(Ja).getUTCDay()),Ta,2)}function Ya(Ja){return Ja.getUTCDay()}function hb(Ja,
Ta){return e(m.utcMonday.count(m.utcYear(Ja)-1,Ja),Ta,2)}function nb(Ja,Ta){return e(Ja.getUTCFullYear()%100,Ta,2)}function va(Ja,Ta){return e(Ja.getUTCFullYear()%1E4,Ta,4)}function Ba(){return"+0000"}function Ga(){return"%"}function Na(Ja){return+Ja}function $a(Ja){return Math.floor(+Ja/1E3)}function Va(Ja){ub=g(Ja);q.timeFormat=ub.format;q.timeParse=ub.parse;q.utcFormat=ub.utcFormat;q.utcParse=ub.utcParse;return ub}function qb(Ja){return Ja.toISOString()}function Ha(Ja){Ja=new Date(Ja);return isNaN(Ja)?
null:Ja}var Ra={"-":"",_:" ",0:"0"},La=/^\s*\d+/,gb=/^%/,ob=/[\\^$*+?|[\]().{}]/g,ub;Va({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});var za=Date.prototype.toISOString?
qb:q.utcFormat("%Y-%m-%dT%H:%M:%S.%LZ"),Da=+new Date("2000-01-01T00:00:00.000Z")?Ha:q.utcParse("%Y-%m-%dT%H:%M:%S.%LZ");q.isoFormat=za;q.isoParse=Da;q.timeFormatDefaultLocale=Va;q.timeFormatLocale=g;Object.defineProperty(q,"__esModule",{value:!0})})},{"d3-time":167}],167:[function(b,K,G){(function(q,m){"object"===typeof G&&"undefined"!==typeof K?m(G):(q=q||self,m(q.d3=q.d3||{}))})(this,function(q){function m(ab,Ya,hb,nb){function va(Ba){return ab(Ba=0===arguments.length?new Date:new Date(+Ba)),Ba}
va.floor=function(Ba){return ab(Ba=new Date(+Ba)),Ba};va.ceil=function(Ba){return ab(Ba=new Date(Ba-1)),Ya(Ba,1),ab(Ba),Ba};va.round=function(Ba){var Ga=va(Ba),Na=va.ceil(Ba);return Ba-Ga<Na-Ba?Ga:Na};va.offset=function(Ba,Ga){return Ya(Ba=new Date(+Ba),null==Ga?1:Math.floor(Ga)),Ba};va.range=function(Ba,Ga,Na){var $a=[],Va;Ba=va.ceil(Ba);Na=null==Na?1:Math.floor(Na);if(!(Ba<Ga&&0<Na))return $a;do $a.push(Va=new Date(+Ba)),Ya(Ba,Na),ab(Ba);while(Va<Ba&&Ba<Ga);return $a};va.filter=function(Ba){return m(function(Ga){if(Ga>=
Ga)for(;ab(Ga),!Ba(Ga);)Ga.setTime(Ga-1)},function(Ga,Na){if(Ga>=Ga)if(0>Na)for(;0>=++Na;)for(;Ya(Ga,-1),!Ba(Ga););else for(;0<=--Na;)for(;Ya(Ga,1),!Ba(Ga););})};hb&&(va.count=function(Ba,Ga){a.setTime(+Ba);g.setTime(+Ga);ab(a);ab(g);return Math.floor(hb(a,g))},va.every=function(Ba){Ba=Math.floor(Ba);return isFinite(Ba)&&0<Ba?1<Ba?va.filter(nb?function(Ga){return 0===nb(Ga)%Ba}:function(Ga){return 0===va.count(0,Ga)%Ba}):va:null});return va}function l(ab){return m(function(Ya){Ya.setDate(Ya.getDate()-
(Ya.getDay()+7-ab)%7);Ya.setHours(0,0,0,0)},function(Ya,hb){Ya.setDate(Ya.getDate()+7*hb)},function(Ya,hb){return(hb-Ya-6E4*(hb.getTimezoneOffset()-Ya.getTimezoneOffset()))/6048E5})}function h(ab){return m(function(Ya){Ya.setUTCDate(Ya.getUTCDate()-(Ya.getUTCDay()+7-ab)%7);Ya.setUTCHours(0,0,0,0)},function(Ya,hb){Ya.setUTCDate(Ya.getUTCDate()+7*hb)},function(Ya,hb){return(hb-Ya)/6048E5})}var a=new Date,g=new Date,e=m(function(){},function(ab,Ya){ab.setTime(+ab+Ya)},function(ab,Ya){return Ya-ab});
e.every=function(ab){ab=Math.floor(ab);return isFinite(ab)&&0<ab?1<ab?m(function(Ya){Ya.setTime(Math.floor(Ya/ab)*ab)},function(Ya,hb){Ya.setTime(+Ya+hb*ab)},function(Ya,hb){return(hb-Ya)/ab}):e:null};var n=e.range,p=m(function(ab){ab.setTime(ab-ab.getMilliseconds())},function(ab,Ya){ab.setTime(+ab+1E3*Ya)},function(ab,Ya){return(Ya-ab)/1E3},function(ab){return ab.getUTCSeconds()}),c=p.range,d=m(function(ab){ab.setTime(ab-ab.getMilliseconds()-1E3*ab.getSeconds())},function(ab,Ya){ab.setTime(+ab+6E4*
Ya)},function(ab,Ya){return(Ya-ab)/6E4},function(ab){return ab.getMinutes()}),f=d.range,k=m(function(ab){ab.setTime(ab-ab.getMilliseconds()-1E3*ab.getSeconds()-6E4*ab.getMinutes())},function(ab,Ya){ab.setTime(+ab+36E5*Ya)},function(ab,Ya){return(Ya-ab)/36E5},function(ab){return ab.getHours()}),r=k.range,u=m(function(ab){ab.setHours(0,0,0,0)},function(ab,Ya){ab.setDate(ab.getDate()+Ya)},function(ab,Ya){return(Ya-ab-6E4*(Ya.getTimezoneOffset()-ab.getTimezoneOffset()))/864E5},function(ab){return ab.getDate()-
1}),v=u.range,x=l(0),C=l(1),z=l(2),y=l(3),D=l(4),A=l(5),t=l(6),B=x.range,F=C.range,I=z.range,J=y.range,L=D.range,H=A.range,P=t.range,M=m(function(ab){ab.setDate(1);ab.setHours(0,0,0,0)},function(ab,Ya){ab.setMonth(ab.getMonth()+Ya)},function(ab,Ya){return Ya.getMonth()-ab.getMonth()+12*(Ya.getFullYear()-ab.getFullYear())},function(ab){return ab.getMonth()}),N=M.range,T=m(function(ab){ab.setMonth(0,1);ab.setHours(0,0,0,0)},function(ab,Ya){ab.setFullYear(ab.getFullYear()+Ya)},function(ab,Ya){return Ya.getFullYear()-
ab.getFullYear()},function(ab){return ab.getFullYear()});T.every=function(ab){return isFinite(ab=Math.floor(ab))&&0<ab?m(function(Ya){Ya.setFullYear(Math.floor(Ya.getFullYear()/ab)*ab);Ya.setMonth(0,1);Ya.setHours(0,0,0,0)},function(Ya,hb){Ya.setFullYear(Ya.getFullYear()+hb*ab)}):null};var Q=T.range,U=m(function(ab){ab.setUTCSeconds(0,0)},function(ab,Ya){ab.setTime(+ab+6E4*Ya)},function(ab,Ya){return(Ya-ab)/6E4},function(ab){return ab.getUTCMinutes()}),S=U.range,X=m(function(ab){ab.setUTCMinutes(0,
0,0)},function(ab,Ya){ab.setTime(+ab+36E5*Ya)},function(ab,Ya){return(Ya-ab)/36E5},function(ab){return ab.getUTCHours()}),Z=X.range,aa=m(function(ab){ab.setUTCHours(0,0,0,0)},function(ab,Ya){ab.setUTCDate(ab.getUTCDate()+Ya)},function(ab,Ya){return(Ya-ab)/864E5},function(ab){return ab.getUTCDate()-1}),fa=aa.range,ha=h(0),ja=h(1),ba=h(2),ma=h(3),qa=h(4),ka=h(5),oa=h(6),na=ha.range,la=ja.range,ia=ba.range,sa=ma.range,ta=qa.range,Aa=ka.range,Ka=oa.range,Sa=m(function(ab){ab.setUTCDate(1);ab.setUTCHours(0,
0,0,0)},function(ab,Ya){ab.setUTCMonth(ab.getUTCMonth()+Ya)},function(ab,Ya){return Ya.getUTCMonth()-ab.getUTCMonth()+12*(Ya.getUTCFullYear()-ab.getUTCFullYear())},function(ab){return ab.getUTCMonth()}),db=Sa.range,eb=m(function(ab){ab.setUTCMonth(0,1);ab.setUTCHours(0,0,0,0)},function(ab,Ya){ab.setUTCFullYear(ab.getUTCFullYear()+Ya)},function(ab,Ya){return Ya.getUTCFullYear()-ab.getUTCFullYear()},function(ab){return ab.getUTCFullYear()});eb.every=function(ab){return isFinite(ab=Math.floor(ab))&&
0<ab?m(function(Ya){Ya.setUTCFullYear(Math.floor(Ya.getUTCFullYear()/ab)*ab);Ya.setUTCMonth(0,1);Ya.setUTCHours(0,0,0,0)},function(Ya,hb){Ya.setUTCFullYear(Ya.getUTCFullYear()+hb*ab)}):null};var lb=eb.range;q.timeDay=u;q.timeDays=v;q.timeFriday=A;q.timeFridays=H;q.timeHour=k;q.timeHours=r;q.timeInterval=m;q.timeMillisecond=e;q.timeMilliseconds=n;q.timeMinute=d;q.timeMinutes=f;q.timeMonday=C;q.timeMondays=F;q.timeMonth=M;q.timeMonths=N;q.timeSaturday=t;q.timeSaturdays=P;q.timeSecond=p;q.timeSeconds=
c;q.timeSunday=x;q.timeSundays=B;q.timeThursday=D;q.timeThursdays=L;q.timeTuesday=z;q.timeTuesdays=I;q.timeWednesday=y;q.timeWednesdays=J;q.timeWeek=x;q.timeWeeks=B;q.timeYear=T;q.timeYears=Q;q.utcDay=aa;q.utcDays=fa;q.utcFriday=ka;q.utcFridays=Aa;q.utcHour=X;q.utcHours=Z;q.utcMillisecond=e;q.utcMilliseconds=n;q.utcMinute=U;q.utcMinutes=S;q.utcMonday=ja;q.utcMondays=la;q.utcMonth=Sa;q.utcMonths=db;q.utcSaturday=oa;q.utcSaturdays=Ka;q.utcSecond=p;q.utcSeconds=c;q.utcSunday=ha;q.utcSundays=na;q.utcThursday=
qa;q.utcThursdays=ta;q.utcTuesday=ba;q.utcTuesdays=ia;q.utcWednesday=ma;q.utcWednesdays=sa;q.utcWeek=ha;q.utcWeeks=na;q.utcYear=eb;q.utcYears=lb;Object.defineProperty(q,"__esModule",{value:!0})})},{}],168:[function(b,K,G){(function(q,m){"object"===typeof G&&"undefined"!==typeof K?m(G):(q=q||self,m(q.d3=q.d3||{}))})(this,function(q){function m(){return v||(z(l),v=C.now()+x)}function l(){v=0}function h(){this._call=this._time=this._next=null}function a(y,D,A){var t=new h;t.restart(y,D,A);return t}function g(){m();
++c;for(var y=k,D;y;)0<=(D=v-y._time)&&y._call.call(null,D),y=y._next;--c}function e(){v=(u=C.now())+x;c=d=0;try{g()}finally{c=0;for(var y,D=k,A,t=Infinity;D;)D._call?(t>D._time&&(t=D._time),y=D,D=D._next):(A=D._next,D._next=null,D=y?y._next=A:k=A);r=y;p(t);v=0}}function n(){var y=C.now(),D=y-u;1E3<D&&(x-=D,u=y)}function p(y){c||(d&&(d=clearTimeout(d)),24<y-v?(Infinity>y&&(d=setTimeout(e,y-C.now()-x)),f&&(f=clearInterval(f))):(f||(u=C.now(),f=setInterval(n,1E3)),c=1,z(e)))}var c=0,d=0,f=0,k,r,u=0,
v=0,x=0,C="object"===typeof performance&&performance.now?performance:Date,z="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(y){setTimeout(y,17)};h.prototype=a.prototype={constructor:h,restart:function(y,D,A){if("function"!==typeof y)throw new TypeError("callback is not a function");A=(null==A?m():+A)+(null==D?0:+D);this._next||r===this||(r?r._next=this:k=this,r=this);this._call=y;this._time=A;p()},stop:function(){this._call&&(this._call=null,
this._time=Infinity,p())}};q.interval=function(y,D,A){var t=new h,B=D;if(null==D)return t.restart(y,D,A),t;D=+D;A=null==A?m():+A;t.restart(function J(I){I+=B;t.restart(J,B+=D,A);y(I)},D,A);return t};q.now=m;q.timeout=function(y,D,A){var t=new h;D=null==D?0:+D;t.restart(function(B){t.stop();y(B+D)},D,A);return t};q.timer=a;q.timerFlush=g;Object.defineProperty(q,"__esModule",{value:!0})})},{}],169:[function(b,K,G){!function(){function q(O){return O&&(O.ownerDocument&&O.ownerDocument.defaultView||O.document&&
O||O.defaultView)}function m(O,ea){return O<ea?-1:O>ea?1:O>=ea?0:NaN}function l(O){return null===O?NaN:+O}function h(O){return!isNaN(O)}function a(O){return{left:function(ea,ra,xa,ya){3>arguments.length&&(xa=0);4>arguments.length&&(ya=ea.length);for(;xa<ya;){var Ca=xa+ya>>>1;0>O(ea[Ca],ra)?xa=Ca+1:ya=Ca}return xa},right:function(ea,ra,xa,ya){3>arguments.length&&(xa=0);4>arguments.length&&(ya=ea.length);for(;xa<ya;){var Ca=xa+ya>>>1;0<O(ea[Ca],ra)?ya=Ca:xa=Ca+1}return xa}}}function g(O){return O.length}
function e(O,ea){for(var ra in ea)Object.defineProperty(O.prototype,ra,{value:ea[ra],enumerable:!1})}function n(){this._=Object.create(null)}function p(O){return"__proto__"===(O+="")||"\x00"===O[0]?"\x00"+O:O}function c(O){return"\x00"===(O+="")[0]?O.slice(1):O}function d(O){return p(O)in this._}function f(O){return(O=p(O))in this._&&delete this._[O]}function k(){var O=[],ea;for(ea in this._)O.push(c(ea));return O}function r(){var O=0,ea;for(ea in this._)++O;return O}function u(){for(var O in this._)return!1;
return!0}function v(){this._=Object.create(null)}function x(O){return O}function C(O,ea,ra){return function(){var xa=ra.apply(ea,arguments);return xa===ea?O:xa}}function z(O,ea){if(ea in O)return ea;ea=ea.charAt(0).toUpperCase()+ea.slice(1);for(var ra=0,xa=vh.length;ra<xa;++ra){var ya=vh[ra]+ea;if(ya in O)return ya}}function y(){}function D(){}function A(O){function ea(){for(var ya=ra,Ca=-1,Pa=ya.length,Ia;++Ca<Pa;)(Ia=ya[Ca].on)&&Ia.apply(this,arguments);return O}var ra=[],xa=new n;ea.on=function(ya,
Ca){var Pa=xa.get(ya),Ia;if(2>arguments.length)return Pa&&Pa.on;Pa&&(Pa.on=null,ra=ra.slice(0,Ia=ra.indexOf(Pa)).concat(ra.slice(Ia+1)),xa.remove(ya));Ca&&ra.push(xa.set(ya,{on:Ca}));return O};return ea}function t(){zb.event.preventDefault()}function B(){for(var O=zb.event,ea;ea=O.sourceEvent;)O=ea;return O}function F(O){for(var ea=new D,ra=0,xa=arguments.length;++ra<xa;)ea[arguments[ra]]=A(ea);ea.of=function(ya,Ca){return function(Pa){try{var Ia=Pa.sourceEvent=zb.event;Pa.target=O;zb.event=Pa;ea[Pa.type].apply(ya,
Ca)}finally{zb.event=Ia}}};return ea}function I(O){Cg(O,Ce);return O}function J(O){return"function"===typeof O?O:function(){return nk(O,this)}}function L(O){return"function"===typeof O?O:function(){return ok(O,this)}}function H(O,ea){function ra(){this.removeAttribute(O)}function xa(){this.removeAttributeNS(O.space,O.local)}function ya(){this.setAttribute(O,ea)}function Ca(){this.setAttributeNS(O.space,O.local,ea)}function Pa(){var Oa=ea.apply(this,arguments);null==Oa?this.removeAttribute(O):this.setAttribute(O,
Oa)}function Ia(){var Oa=ea.apply(this,arguments);null==Oa?this.removeAttributeNS(O.space,O.local):this.setAttributeNS(O.space,O.local,Oa)}O=zb.ns.qualify(O);return null==ea?O.local?xa:ra:"function"===typeof ea?O.local?Ia:Pa:O.local?Ca:ya}function P(O){return new RegExp("(?:^|\\s+)"+zb.requote(O)+"(?:\\s+|$)","g")}function M(O,ea){function ra(){for(var Ca=-1;++Ca<ya;)O[Ca](this,ea)}function xa(){for(var Ca=-1,Pa=ea.apply(this,arguments);++Ca<ya;)O[Ca](this,Pa)}O=(O+"").trim().split(/^|\s+/).map(N);
var ya=O.length;return"function"===typeof ea?xa:ra}function N(O){var ea=P(O);return function(ra,xa){if(ya=ra.classList)return xa?ya.add(O):ya.remove(O);var ya=ra.getAttribute("class")||"";xa?(ea.lastIndex=0,ea.test(ya)||ra.setAttribute("class",(ya+" "+O).trim().replace(/\s+/g," "))):ra.setAttribute("class",ya.replace(ea," ").trim().replace(/\s+/g," "))}}function T(O,ea,ra){function xa(){this.style.removeProperty(O)}function ya(){this.style.setProperty(O,ea,ra)}function Ca(){var Pa=ea.apply(this,arguments);
null==Pa?this.style.removeProperty(O):this.style.setProperty(O,Pa,ra)}return null==ea?xa:"function"===typeof ea?Ca:ya}function Q(O,ea){function ra(){delete this[O]}function xa(){this[O]=ea}function ya(){var Ca=ea.apply(this,arguments);null==Ca?delete this[O]:this[O]=Ca}return null==ea?ra:"function"===typeof ea?ya:xa}function U(O){function ea(){var xa=this.ownerDocument,ya=this.namespaceURI;return"http://www.w3.org/1999/xhtml"===ya&&"http://www.w3.org/1999/xhtml"===xa.documentElement.namespaceURI?
xa.createElement(O):xa.createElementNS(ya,O)}function ra(){return this.ownerDocument.createElementNS(O.space,O.local)}return"function"===typeof O?O:(O=zb.ns.qualify(O)).local?ra:ea}function S(){var O=this.parentNode;O&&O.removeChild(this)}function X(O){return function(){return Hj(this,O)}}function Z(O){arguments.length||(O=m);return function(ea,ra){return ea&&ra?O(ea.__data__,ra.__data__):!ea-!ra}}function aa(O,ea){for(var ra=0,xa=O.length;ra<xa;ra++)for(var ya=O[ra],Ca=0,Pa=ya.length,Ia;Ca<Pa;Ca++)(Ia=
ya[Ca])&&ea(Ia,Ca,ra);return O}function fa(O){Cg(O,ch);return O}function ha(O){var ea,ra;return function(xa,ya,Ca){xa=O[Ca].update;var Pa=xa.length;Ca!=ra&&(ra=Ca,ea=0);for(ya>=ea&&(ea=ya+1);!(ya=xa[ea])&&++ea<Pa;);return ya}}function ja(O,ea,ra){function xa(){var bb=this[Pa];bb&&(this.removeEventListener(O,bb,bb.$),delete this[Pa])}function ya(){var bb=Oa(ea,$f(arguments));xa.call(this);this.addEventListener(O,this[Pa]=bb,bb.$=ra);bb._=ea}function Ca(){var bb=new RegExp("^__on([^.]+)"+zb.requote(O)+
"$"),mb,vb;for(vb in this)if(mb=vb.match(bb)){var Ab=this[vb];this.removeEventListener(mb[1],Ab,Ab.$);delete this[vb]}}var Pa="__on"+O,Ia=O.indexOf("."),Oa=ba;0<Ia&&(O=O.slice(0,Ia));var Ua=dh.get(O);Ua&&(O=Ua,Oa=ma);return Ia?ea?ya:xa:ea?y:Ca}function ba(O,ea){return function(ra){var xa=zb.event;zb.event=ra;ea[0]=this.__data__;try{O.apply(this,ea)}finally{zb.event=xa}}}function ma(O,ea){var ra=ba(O,ea);return function(xa){var ya=xa.relatedTarget;ya&&(ya===this||ya.compareDocumentPosition(this)&8)||
ra.call(this,xa)}}function qa(O){var ea=".dragsuppress-"+ ++Ei,ra="click"+ea,xa=zb.select(q(O)).on("touchmove"+ea,t).on("dragstart"+ea,t).on("selectstart"+ea,t);null==fg&&(fg="onselectstart"in O?!1:z(O.style,"userSelect"));if(fg){var ya=(O&&(O.ownerDocument||O.document||O).documentElement).style,Ca=ya[fg];ya[fg]="none"}return function(Pa){xa.on(ea,null);fg&&(ya[fg]=Ca);if(Pa){var Ia=function(){xa.on(ra,null)};xa.on(ra,function(){t();Ia()},!0);setTimeout(Ia,0)}}}function ka(O,ea){ea.changedTouches&&
(ea=ea.changedTouches[0]);var ra=O.ownerSVGElement||O;if(ra.createSVGPoint){var xa=ra.createSVGPoint();if(0>Zh&&(ra=q(O),ra.scrollX||ra.scrollY)){ra=zb.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var ya=ra[0][0].getScreenCTM();Zh=!(ya.f||ya.e);ra.remove()}Zh?(xa.x=ea.pageX,xa.y=ea.pageY):(xa.x=ea.clientX,xa.y=ea.clientY);xa=xa.matrixTransform(O.getScreenCTM().inverse());return[xa.x,xa.y]}xa=O.getBoundingClientRect();return[ea.clientX-
xa.left-O.clientLeft,ea.clientY-xa.top-O.clientTop]}function oa(){return zb.event.changedTouches[0].identifier}function na(O,ea,ra){return(ea[0]-O[0])*(ra[1]-O[1])-(ea[1]-O[1])*(ra[0]-O[0])}function la(O){return 1<O?0:-1>O?Yd:Math.acos(O)}function ia(O){return 1<O?Ye:-1>O?-Ye:Math.asin(O)}function sa(O){return((O=Math.exp(O))+1/O)/2}function ta(O){return(O=Math.sin(O/2))*O}function Aa(){}function Ka(O,ea,ra){return this instanceof Ka?void(this.h=+O,this.s=+ea,this.l=+ra):2>arguments.length?O instanceof
Ka?new Ka(O.h,O.s,O.l):$a(""+O,Va,Ka):new Ka(O,ea,ra)}function Sa(O,ea,ra){function xa(Pa){360<Pa?Pa-=360:0>Pa&&(Pa+=360);return 60>Pa?Ca+(ya-Ca)*Pa/60:180>Pa?ya:240>Pa?Ca+(ya-Ca)*(240-Pa)/60:Ca}O=isNaN(O)?0:0>(O%=360)?O+360:O;ea=isNaN(ea)?0:0>ea?0:1<ea?1:ea;ra=0>ra?0:1<ra?1:ra;var ya=.5>=ra?ra*(1+ea):ra+ea-ra*ea;var Ca=2*ra-ya;return new Ba(Math.round(255*xa(O+120)),Math.round(255*xa(O)),Math.round(255*xa(O-120)))}function db(O,ea,ra){return this instanceof db?void(this.h=+O,this.c=+ea,this.l=+ra):
2>arguments.length?O instanceof db?new db(O.h,O.c,O.l):O instanceof lb?Ya(O.l,O.a,O.b):Ya((O=qb((O=zb.rgb(O)).r,O.g,O.b)).l,O.a,O.b):new db(O,ea,ra)}function eb(O,ea,ra){isNaN(O)&&(O=0);isNaN(ea)&&(ea=0);return new lb(ra,Math.cos(O*=ce)*ea,Math.sin(O)*ea)}function lb(O,ea,ra){return this instanceof lb?void(this.l=+O,this.a=+ea,this.b=+ra):2>arguments.length?O instanceof lb?new lb(O.l,O.a,O.b):O instanceof db?eb(O.h,O.c,O.l):qb((O=Ba(O)).r,O.g,O.b):new lb(O,ea,ra)}function ab(O,ea,ra){O=(O+16)/116;
ra=O-ra/200;ea=hb(O+ea/500)*Ij;O=hb(O)*Bd;ra=hb(ra)*Jj;return new Ba(va(3.2404542*ea-1.5371385*O-.4985314*ra),va(-.969266*ea+1.8760108*O+.041556*ra),va(.0556434*ea-.2040259*O+1.0572252*ra))}function Ya(O,ea,ra){return 0<O?new db(Math.atan2(ra,ea)*Qe,Math.sqrt(ea*ea+ra*ra),O):new db(NaN,NaN,O)}function hb(O){return.206893034<O?O*O*O:(O-4/29)/7.787037}function nb(O){return.008856<O?Math.pow(O,1/3):7.787037*O+4/29}function va(O){return Math.round(255*(.00304>=O?12.92*O:1.055*Math.pow(O,1/2.4)-.055))}
function Ba(O,ea,ra){return this instanceof Ba?void(this.r=~~O,this.g=~~ea,this.b=~~ra):2>arguments.length?O instanceof Ba?new Ba(O.r,O.g,O.b):$a(""+O,Ba,Sa):new Ba(O,ea,ra)}function Ga(O){return new Ba(O>>16,O>>8&255,O&255)+""}function Na(O){return 16>O?"0"+Math.max(0,O).toString(16):Math.min(255,O).toString(16)}function $a(O,ea,ra){var xa=0,ya=0,Ca=0,Pa;if(Pa=/([a-z]+)\((.*)\)/.exec(O=O.toLowerCase())){var Ia=Pa[2].split(",");switch(Pa[1]){case "hsl":return ra(parseFloat(Ia[0]),parseFloat(Ia[1])/
100,parseFloat(Ia[2])/100);case "rgb":return ea(Ra(Ia[0]),Ra(Ia[1]),Ra(Ia[2]))}}if(ra=cj.get(O))return ea(ra.r,ra.g,ra.b);null==O||"#"!==O.charAt(0)||isNaN(ra=parseInt(O.slice(1),16))||(4===O.length?(xa=(ra&3840)>>4,xa|=xa>>4,ya=ra&240,ya|=ya>>4,Ca=ra&15,Ca|=Ca<<4):7===O.length&&(xa=(ra&16711680)>>16,ya=(ra&65280)>>8,Ca=ra&255));return ea(xa,ya,Ca)}function Va(O,ea,ra){var xa=Math.min(O/=255,ea/=255,ra/=255),ya=Math.max(O,ea,ra),Ca=ya-xa,Pa=(ya+xa)/2;Ca?(xa=.5>Pa?Ca/(ya+xa):Ca/(2-ya-xa),O=60*(O==
ya?(ea-ra)/Ca+(ea<ra?6:0):ea==ya?(ra-O)/Ca+2:(O-ea)/Ca+4)):(O=NaN,xa=0<Pa&&1>Pa?0:O);return new Ka(O,xa,Pa)}function qb(O,ea,ra){O=Ha(O);ea=Ha(ea);ra=Ha(ra);var xa=nb((.4124564*O+.3575761*ea+.1804375*ra)/Ij),ya=nb((.2126729*O+.7151522*ea+.072175*ra)/Bd);O=nb((.0193339*O+.119192*ea+.9503041*ra)/Jj);return lb(116*ya-16,500*(xa-ya),200*(ya-O))}function Ha(O){return.04045>=(O/=255)?O/12.92:Math.pow((O+.055)/1.055,2.4)}function Ra(O){var ea=parseFloat(O);return"%"===O.charAt(O.length-1)?Math.round(2.55*
ea):ea}function La(O){return"function"===typeof O?O:function(){return O}}function gb(O){return function(ea,ra,xa){2===arguments.length&&"function"===typeof ra&&(xa=ra,ra=null);return ob(ea,ra,O,xa)}}function ob(O,ea,ra,xa){function ya(){var bb=Oa.status,mb;if(mb=!bb)mb=(mb=Oa.responseType)&&"text"!==mb?Oa.response:Oa.responseText;if(mb||200<=bb&&300>bb||304===bb){try{var vb=ra.call(Ca,Oa)}catch(Ab){Pa.error.call(Ca,Ab);return}Pa.load.call(Ca,vb)}else Pa.error.call(Ca,Oa)}var Ca={},Pa=zb.dispatch("beforesend",
"progress","load","error"),Ia={},Oa=new XMLHttpRequest,Ua=null;!this.XDomainRequest||"withCredentials"in Oa||!/^(http(s)?:)?\/\//.test(O)||(Oa=new XDomainRequest);"onload"in Oa?Oa.onload=Oa.onerror=ya:Oa.onreadystatechange=function(){3<Oa.readyState&&ya()};Oa.onprogress=function(bb){var mb=zb.event;zb.event=bb;try{Pa.progress.call(Ca,Oa)}finally{zb.event=mb}};Ca.header=function(bb,mb){bb=(bb+"").toLowerCase();if(2>arguments.length)return Ia[bb];null==mb?delete Ia[bb]:Ia[bb]=mb+"";return Ca};Ca.mimeType=
function(bb){if(!arguments.length)return ea;ea=null==bb?null:bb+"";return Ca};Ca.responseType=function(bb){if(!arguments.length)return Ua;Ua=bb;return Ca};Ca.response=function(bb){ra=bb;return Ca};["get","post"].forEach(function(bb){Ca[bb]=function(){return Ca.send.apply(Ca,[bb].concat($f(arguments)))}});Ca.send=function(bb,mb,vb){2===arguments.length&&"function"===typeof mb&&(vb=mb,mb=null);Oa.open(bb,O,!0);null==ea||"accept"in Ia||(Ia.accept=ea+",*/*");if(Oa.setRequestHeader)for(var Ab in Ia)Oa.setRequestHeader(Ab,
Ia[Ab]);null!=ea&&Oa.overrideMimeType&&Oa.overrideMimeType(ea);null!=Ua&&(Oa.responseType=Ua);if(null!=vb)Ca.on("error",vb).on("load",function(Bb){vb(null,Bb)});Pa.beforesend.call(Ca,Oa);Oa.send(null==mb?null:mb);return Ca};Ca.abort=function(){Oa.abort();return Ca};zb.rebind(Ca,Pa,"on");return null==xa?Ca:Ca.get(ub(xa))}function ub(O){return 1===O.length?function(ea,ra){O(null==ea?ra:null)}:O}function za(O,ea,ra){var xa=arguments.length;2>xa&&(ea=0);3>xa&&(ra=Date.now());xa={c:O,t:ra+ea,n:null};dj?
dj.n=xa:Fi=xa;dj=xa;If||(Ke=clearTimeout(Ke),If=1,$h(Da));return xa}function Da(){var O=Ja();O=Ta()-O;24<O?(isFinite(O)&&(clearTimeout(Ke),Ke=setTimeout(Da,O)),If=0):(If=1,$h(Da))}function Ja(){for(var O=Date.now(),ea=Fi;ea;)O>=ea.t&&ea.c(O-ea.t)&&(ea.c=null),ea=ea.n;return O}function Ta(){for(var O,ea=Fi,ra=Infinity;ea;)ea.c?(ea.t<ra&&(ra=ea.t),ea=(O=ea).n):ea=O?O.n=ea.n:Fi=ea.n;dj=O;return ra}function Xa(O,ea){return ea-(O?Math.ceil(Math.log(O)/Math.LN10):1)}function kb(O){var ea=O.decimal,ra=O.thousands,
xa=O.grouping,ya=O.currency,Ca=xa&&ra?function(Pa,Ia){for(var Oa=Pa.length,Ua=[],bb=0,mb=xa[0],vb=0;0<Oa&&0<mb;){vb+mb+1>Ia&&(mb=Math.max(1,Ia-vb));Ua.push(Pa.substring(Oa-=mb,Oa+mb));if((vb+=mb+1)>Ia)break;mb=xa[bb=(bb+1)%xa.length]}return Ua.reverse().join(ra)}:x;return function(Pa){Pa=Mg.exec(Pa);var Ia=Pa[1]||" ",Oa=Pa[2]||">",Ua=Pa[3]||"-",bb=Pa[4]||"",mb=Pa[5],vb=+Pa[6],Ab=Pa[7],Bb=Pa[8],Nb=Pa[9],Ub=1,fc="",rc="",vc=!1,zc=!0;Bb&&(Bb=+Bb.substring(1));if(mb||"0"===Ia&&"="===Oa)mb=Ia="0",Oa="=";
switch(Nb){case "n":Ab=!0;Nb="g";break;case "%":Ub=100;rc="%";Nb="f";break;case "p":Ub=100;rc="%";Nb="r";break;case "b":case "o":case "x":case "X":"#"===bb&&(fc="0"+Nb.toLowerCase());case "c":zc=!1;case "d":vc=!0;Bb=0;break;case "s":Ub=-1,Nb="r"}"$"===bb&&(fc=ya[0],rc=ya[1]);"r"!=Nb||Bb||(Nb="g");if(null!=Bb)if("g"==Nb)Bb=Math.max(1,Math.min(21,Bb));else if("e"==Nb||"f"==Nb)Bb=Math.max(0,Math.min(20,Bb));Nb=pk.get(Nb)||rb;var Kc=mb&&Ab;return function(Ib){var Wb=rc;if(vc&&Ib%1)return"";var sc=0>Ib||
0===Ib&&0>1/Ib?(Ib=-Ib,"-"):"-"===Ua?"":Ua;0>Ub?(Wb=zb.formatPrefix(Ib,Bb),Ib=Wb.scale(Ib),Wb=Wb.symbol+rc):Ib*=Ub;Ib=Nb(Ib,Bb);var Tc=Ib.lastIndexOf(".");if(0>Tc)if(Tc=zc?Ib.lastIndexOf("e"):-1,0>Tc){var Vc=Ib;Ib=""}else Vc=Ib.substring(0,Tc),Ib=Ib.substring(Tc);else Vc=Ib.substring(0,Tc),Ib=ea+Ib.substring(Tc+1);!mb&&Ab&&(Vc=Ca(Vc,Infinity));Tc=fc.length+Vc.length+Ib.length+(Kc?0:sc.length);var Xc=Tc<vb?Array(Tc=vb-Tc+1).join(Ia):"";Kc&&(Vc=Ca(Xc+Vc,Xc.length?vb-Ib.length:Infinity));sc+=fc;Ib=Vc+
Ib;return("<"===Oa?sc+Ib+Xc:">"===Oa?Xc+sc+Ib:"^"===Oa?Xc.substring(0,Tc>>=1)+sc+Ib+Xc.substring(Tc):sc+(Kc?Ib:Xc+Ib))+Wb}}}function rb(O){return O+""}function Mb(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function Fb(O,ea,ra){function xa(Oa){var Ua=O(Oa),bb=Ca(Ua,1);return Oa-Ua<bb-Oa?Ua:bb}function ya(Oa){ea(Oa=O(new ff(Oa-1)),1);return Oa}function Ca(Oa,Ua){ea(Oa=new ff(+Oa),Ua);return Oa}function Pa(Oa,Ua,bb){Oa=ya(Oa);var mb=[];if(1<bb)for(;Oa<Ua;)ra(Oa)%
bb||mb.push(new Date(+Oa)),ea(Oa,1);else for(;Oa<Ua;)mb.push(new Date(+Oa)),ea(Oa,1);return mb}O.floor=O;O.round=xa;O.ceil=ya;O.offset=Ca;O.range=Pa;var Ia=O.utc=Lb(O);Ia.floor=Ia;Ia.round=Lb(xa);Ia.ceil=Lb(ya);Ia.offset=Lb(Ca);Ia.range=function(Oa,Ua,bb){try{ff=Mb;var mb=new Mb;mb._=Oa;return Pa(mb,Ua,bb)}finally{ff=Date}};return O}function Lb(O){return function(ea,ra){try{ff=Mb;var xa=new Mb;xa._=ea;return O(xa,ra)._}finally{ff=Date}}}function Vb(O){function ea(Ib){function Wb(Tc){for(var Vc=[],
Xc=-1,Nc=0,yd,Rd;++Xc<sc;)if(37===Ib.charCodeAt(Xc)){Vc.push(Ib.slice(Nc,Xc));null!=(yd=Gi[Nc=Ib.charAt(++Xc)])&&(Nc=Ib.charAt(++Xc));if(Rd=zc[Nc])Nc=Rd(Tc,null==yd?"e"===Nc?" ":"0":yd);Vc.push(Nc);Nc=Xc+1}Vc.push(Ib.slice(Nc,Xc));return Vc.join("")}var sc=Ib.length;Wb.parse=function(Tc){var Vc={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(ra(Vc,Ib,Tc,0)!=Tc.length)return null;"p"in Vc&&(Vc.H=Vc.H%12+12*Vc.p);Tc=null!=Vc.Z&&ff!==Mb;var Xc=new (Tc?Mb:ff);"j"in Vc?Xc.setFullYear(Vc.y,0,Vc.j):"W"in Vc||
"U"in Vc?("w"in Vc||(Vc.w="W"in Vc?1:0),Xc.setFullYear(Vc.y,0,1),Xc.setFullYear(Vc.y,0,"W"in Vc?(Vc.w+6)%7+7*Vc.W-(Xc.getDay()+5)%7:Vc.w+7*Vc.U-(Xc.getDay()+6)%7)):Xc.setFullYear(Vc.y,Vc.m,Vc.d);Xc.setHours(Vc.H+(Vc.Z/100|0),Vc.M+Vc.Z%100,Vc.S,Vc.L);return Tc?Xc._:Xc};Wb.toString=function(){return Ib};return Wb}function ra(Ib,Wb,sc,Tc){for(var Vc,Xc=0,Nc=Wb.length,yd=sc.length;Xc<Nc;){if(Tc>=yd)return-1;Vc=Wb.charCodeAt(Xc++);if(37===Vc){if(Vc=Wb.charAt(Xc++),Vc=Kc[Vc in Gi?Wb.charAt(Xc++):Vc],!Vc||
0>(Tc=Vc(Ib,sc,Tc)))return-1}else if(Vc!=sc.charCodeAt(Tc++))return-1}return Tc}var xa=O.dateTime,ya=O.date,Ca=O.time,Pa=O.periods,Ia=O.days,Oa=O.shortDays,Ua=O.months,bb=O.shortMonths;ea.utc=function(Ib){function Wb(Tc){try{ff=Mb;var Vc=new ff;Vc._=Tc;return sc(Vc)}finally{ff=Date}}var sc=ea(Ib);Wb.parse=function(Tc){try{ff=Mb;var Vc=sc.parse(Tc);return Vc&&Vc._}finally{ff=Date}};Wb.toString=sc.toString;return Wb};ea.multi=ea.utc.multi=Gb;var mb=zb.map(),vb=Gc(Ia),Ab=Hc(Ia),Bb=Gc(Oa),Nb=Hc(Oa),Ub=
Gc(Ua),fc=Hc(Ua),rc=Gc(bb),vc=Hc(bb);Pa.forEach(function(Ib,Wb){mb.set(Ib.toLowerCase(),Wb)});var zc={a:function(Ib){return Oa[Ib.getDay()]},A:function(Ib){return Ia[Ib.getDay()]},b:function(Ib){return bb[Ib.getMonth()]},B:function(Ib){return Ua[Ib.getMonth()]},c:ea(xa),d:function(Ib,Wb){return xc(Ib.getDate(),Wb,2)},e:function(Ib,Wb){return xc(Ib.getDate(),Wb,2)},H:function(Ib,Wb){return xc(Ib.getHours(),Wb,2)},I:function(Ib,Wb){return xc(Ib.getHours()%12||12,Wb,2)},j:function(Ib,Wb){return xc(1+
Cd.dayOfYear(Ib),Wb,3)},L:function(Ib,Wb){return xc(Ib.getMilliseconds(),Wb,3)},m:function(Ib,Wb){return xc(Ib.getMonth()+1,Wb,2)},M:function(Ib,Wb){return xc(Ib.getMinutes(),Wb,2)},p:function(Ib){return Pa[+(12<=Ib.getHours())]},S:function(Ib,Wb){return xc(Ib.getSeconds(),Wb,2)},U:function(Ib,Wb){return xc(Cd.sundayOfYear(Ib),Wb,2)},w:function(Ib){return Ib.getDay()},W:function(Ib,Wb){return xc(Cd.mondayOfYear(Ib),Wb,2)},x:ea(ya),X:ea(Ca),y:function(Ib,Wb){return xc(Ib.getFullYear()%100,Wb,2)},Y:function(Ib,
Wb){return xc(Ib.getFullYear()%1E4,Wb,4)},Z:Qb,"%":function(){return"%"}},Kc={a:function(Ib,Wb,sc){Bb.lastIndex=0;return(Wb=Bb.exec(Wb.slice(sc)))?(Ib.w=Nb.get(Wb[0].toLowerCase()),sc+Wb[0].length):-1},A:function(Ib,Wb,sc){vb.lastIndex=0;return(Wb=vb.exec(Wb.slice(sc)))?(Ib.w=Ab.get(Wb[0].toLowerCase()),sc+Wb[0].length):-1},b:function(Ib,Wb,sc){rc.lastIndex=0;return(Wb=rc.exec(Wb.slice(sc)))?(Ib.m=vc.get(Wb[0].toLowerCase()),sc+Wb[0].length):-1},B:function(Ib,Wb,sc){Ub.lastIndex=0;return(Wb=Ub.exec(Wb.slice(sc)))?
(Ib.m=fc.get(Wb[0].toLowerCase()),sc+Wb[0].length):-1},c:function(Ib,Wb,sc){return ra(Ib,zc.c.toString(),Wb,sc)},d:fb,e:fb,H:Pb,I:Pb,j:tb,L:Zb,m:Lc,M:ec,p:function(Ib,Wb,sc){Wb=mb.get(Wb.slice(sc,sc+=2).toLowerCase());return null==Wb?-1:(Ib.p=Wb,sc)},S:cc,U:ib,w:Wc,W:Yb,x:function(Ib,Wb,sc){return ra(Ib,zc.x.toString(),Wb,sc)},X:function(Ib,Wb,sc){return ra(Ib,zc.X.toString(),Wb,sc)},y:oc,Y:dc,Z:tc,"%":sb};return ea}function xc(O,ea,ra){var xa=0>O?"-":"";O=(xa?-O:O)+"";var ya=O.length;return xa+(ya<
ra?Array(ra-ya+1).join(ea)+O:O)}function Gc(O){return new RegExp("^(?:"+O.map(zb.requote).join("|")+")","i")}function Hc(O){for(var ea=new n,ra=-1,xa=O.length;++ra<xa;)ea.set(O[ra].toLowerCase(),ra);return ea}function Wc(O,ea,ra){xd.lastIndex=0;return(ea=xd.exec(ea.slice(ra,ra+1)))?(O.w=+ea[0],ra+ea[0].length):-1}function ib(O,ea,ra){xd.lastIndex=0;return(ea=xd.exec(ea.slice(ra)))?(O.U=+ea[0],ra+ea[0].length):-1}function Yb(O,ea,ra){xd.lastIndex=0;return(ea=xd.exec(ea.slice(ra)))?(O.W=+ea[0],ra+ea[0].length):
-1}function dc(O,ea,ra){xd.lastIndex=0;return(ea=xd.exec(ea.slice(ra,ra+4)))?(O.y=+ea[0],ra+ea[0].length):-1}function oc(O,ea,ra){xd.lastIndex=0;if(ea=xd.exec(ea.slice(ra,ra+2))){var xa=+ea[0];O=(O.y=xa+(68<xa?1900:2E3),ra+ea[0].length)}else O=-1;return O}function tc(O,ea,ra){return/^[+-]\d{4}$/.test(ea=ea.slice(ra,ra+5))?(O.Z=-ea,ra+5):-1}function Lc(O,ea,ra){xd.lastIndex=0;return(ea=xd.exec(ea.slice(ra,ra+2)))?(O.m=ea[0]-1,ra+ea[0].length):-1}function fb(O,ea,ra){xd.lastIndex=0;return(ea=xd.exec(ea.slice(ra,
ra+2)))?(O.d=+ea[0],ra+ea[0].length):-1}function tb(O,ea,ra){xd.lastIndex=0;return(ea=xd.exec(ea.slice(ra,ra+3)))?(O.j=+ea[0],ra+ea[0].length):-1}function Pb(O,ea,ra){xd.lastIndex=0;return(ea=xd.exec(ea.slice(ra,ra+2)))?(O.H=+ea[0],ra+ea[0].length):-1}function ec(O,ea,ra){xd.lastIndex=0;return(ea=xd.exec(ea.slice(ra,ra+2)))?(O.M=+ea[0],ra+ea[0].length):-1}function cc(O,ea,ra){xd.lastIndex=0;return(ea=xd.exec(ea.slice(ra,ra+2)))?(O.S=+ea[0],ra+ea[0].length):-1}function Zb(O,ea,ra){xd.lastIndex=0;return(ea=
xd.exec(ea.slice(ra,ra+3)))?(O.L=+ea[0],ra+ea[0].length):-1}function Qb(O){var ea=O.getTimezoneOffset();O=0<ea?"-":"+";var ra=Wd(ea)/60|0;ea=Wd(ea)%60;return O+xc(ra,"0",2)+xc(ea,"0",2)}function sb(O,ea,ra){Zd.lastIndex=0;return(O=Zd.exec(ea.slice(ra,ra+1)))?ra+O[0].length:-1}function Gb(O){for(var ea=O.length,ra=-1;++ra<ea;)O[ra][0]=this(O[ra][0]);return function(xa){for(var ya=0,Ca=O[ya];!Ca[1](xa);)Ca=O[++ya];return Ca[0](xa)}}function xb(){}function Jb(O,ea,ra){var xa=ra.s=O+ea,ya=xa-O;ra.t=O-
(xa-ya)+(ea-ya)}function Xb(O,ea){if(O&&Pf.hasOwnProperty(O.type))Pf[O.type](O,ea)}function nc(O,ea,ra){var xa=-1;ra=O.length-ra;for(ea.lineStart();++xa<ra;){var ya=O[xa];ea.point(ya[0],ya[1],ya[2])}ea.lineEnd()}function Qc(O,ea){var ra=-1,xa=O.length;for(ea.polygonStart();++ra<xa;)nc(O[ra],ea,1);ea.polygonEnd()}function $c(){function O(Pa,Ia){Pa*=ce;Ia=Ia*ce/2+Yd/4;var Oa=Pa-xa,Ua=0<=Oa?1:-1;Oa*=Ua;var bb=Math.cos(Ia);Ia=Math.sin(Ia);var mb=Ca*Ia;ai.add(Math.atan2(mb*Ua*Math.sin(Oa),ya*bb+mb*Math.cos(Oa)));
xa=Pa;ya=bb;Ca=Ia}var ea,ra,xa,ya,Ca;Jf.point=function(Pa,Ia){Jf.point=O;xa=(ea=Pa)*ce;ya=Math.cos(Ia=(ra=Ia)*ce/2+Yd/4);Ca=Math.sin(Ia)};Jf.lineEnd=function(){O(ea,ra)}}function Uc(O){var ea=O[0];O=O[1];var ra=Math.cos(O);return[ra*Math.cos(ea),ra*Math.sin(ea),Math.sin(O)]}function ac(O,ea){return O[0]*ea[0]+O[1]*ea[1]+O[2]*ea[2]}function Ac(O,ea){return[O[1]*ea[2]-O[2]*ea[1],O[2]*ea[0]-O[0]*ea[2],O[0]*ea[1]-O[1]*ea[0]]}function Zc(O,ea){O[0]+=ea[0];O[1]+=ea[1];O[2]+=ea[2]}function wc(O,ea){return[O[0]*
ea,O[1]*ea,O[2]*ea]}function Dc(O){var ea=Math.sqrt(O[0]*O[0]+O[1]*O[1]+O[2]*O[2]);O[0]/=ea;O[1]/=ea;O[2]/=ea}function ad(O){return[Math.atan2(O[1],O[0]),ia(O[2])]}function Rc(O,ea){return 1E-6>Wd(O[0]-ea[0])&&1E-6>Wd(O[1]-ea[1])}function Bc(O,ea){O*=ce;var ra=Math.cos(ea*=ce);id(ra*Math.cos(O),ra*Math.sin(O),Math.sin(ea))}function id(O,ea,ra){++Ee;eh+=(O-eh)/Ee;fh+=(ea-fh)/Ee;Dg+=(ra-Dg)/Ee}function jd(){function O(ya,Ca){ya*=ce;var Pa=Math.cos(Ca*=ce),Ia=Pa*Math.cos(ya);ya=Pa*Math.sin(ya);Ca=Math.sin(Ca);
var Oa=Math.atan2(Math.sqrt((Oa=ra*Ca-xa*ya)*Oa+(Oa=xa*Ia-ea*Ca)*Oa+(Oa=ea*ya-ra*Ia)*Oa),ea*Ia+ra*ya+xa*Ca);wh+=Oa;Qf+=Oa*(ea+(ea=Ia));Ng+=Oa*(ra+(ra=ya));sg+=Oa*(xa+(xa=Ca));id(ea,ra,xa)}var ea,ra,xa;gg.point=function(ya,Ca){ya*=ce;var Pa=Math.cos(Ca*=ce);ea=Pa*Math.cos(ya);ra=Pa*Math.sin(ya);xa=Math.sin(Ca);gg.point=O;id(ea,ra,xa)}}function ld(){gg.point=Bc}function ke(){function O(Pa,Ia){Pa*=ce;var Oa=Math.cos(Ia*=ce),Ua=Oa*Math.cos(Pa);Pa=Oa*Math.sin(Pa);Ia=Math.sin(Ia);Oa=ya*Ia-Ca*Pa;var bb=
Ca*Ua-xa*Ia,mb=xa*Pa-ya*Ua,vb=Math.sqrt(Oa*Oa+bb*bb+mb*mb),Ab=xa*Ua+ya*Pa+Ca*Ia,Bb=vb&&-la(Ab)/vb;vb=Math.atan2(vb,Ab);xh+=Bb*Oa;yh+=Bb*bb;Eg+=Bb*mb;wh+=vb;Qf+=vb*(xa+(xa=Ua));Ng+=vb*(ya+(ya=Pa));sg+=vb*(Ca+(Ca=Ia));id(xa,ya,Ca)}var ea,ra,xa,ya,Ca;gg.point=function(Pa,Ia){ea=Pa;ra=Ia;gg.point=O;Pa*=ce;var Oa=Math.cos(Ia*=ce);xa=Oa*Math.cos(Pa);ya=Oa*Math.sin(Pa);Ca=Math.sin(Ia);id(xa,ya,Ca)};gg.lineEnd=function(){O(ea,ra);gg.lineEnd=ld;gg.point=Bc}}function ud(O,ea){function ra(xa,ya){return xa=O(xa,
ya),ea(xa[0],xa[1])}O.invert&&ea.invert&&(ra.invert=function(xa,ya){return xa=ea.invert(xa,ya),xa&&O.invert(xa[0],xa[1])});return ra}function td(){return!0}function Sd(O,ea,ra,xa,ya){var Ca=[],Pa=[];O.forEach(function(mb){if(!(0>=(vb=mb.length-1))){var vb,Ab=mb[0],Bb=mb[vb];if(Rc(Ab,Bb)){ya.lineStart();for(Bb=0;Bb<vb;++Bb)ya.point((Ab=mb[Bb])[0],Ab[1]);ya.lineEnd()}else vb=new Ld(Ab,mb,null,!0),Ab=new Ld(Ab,null,vb,!1),vb.o=Ab,Ca.push(vb),Pa.push(Ab),vb=new Ld(Bb,mb,null,!1),Ab=new Ld(Bb,null,vb,
!0),vb.o=Ab,Ca.push(vb),Pa.push(Ab)}});Pa.sort(ea);be(Ca);be(Pa);if(Ca.length){O=0;ea=ra;for(ra=Pa.length;O<ra;++O)Pa[O].e=ea=!ea;ea=Ca[0];for(var Ia,Oa;;){for(var Ua=ea,bb=!0;Ua.v;)if((Ua=Ua.n)===ea)return;Ia=Ua.z;ya.lineStart();do{Ua.v=Ua.o.v=!0;if(Ua.e){if(bb)for(O=0,ra=Ia.length;O<ra;++O)ya.point((Oa=Ia[O])[0],Oa[1]);else xa(Ua.x,Ua.n.x,1,ya);Ua=Ua.n}else{if(bb)for(Ia=Ua.p.z,O=Ia.length-1;0<=O;--O)ya.point((Oa=Ia[O])[0],Oa[1]);else xa(Ua.x,Ua.p.x,-1,ya);Ua=Ua.p}Ua=Ua.o;Ia=Ua.z;bb=!bb}while(!Ua.v);
ya.lineEnd()}}}function be(O){if(ea=O.length){for(var ea,ra=0,xa=O[0],ya;++ra<ea;)xa.n=ya=O[ra],ya.p=xa,xa=ya;xa.n=ya=O[0];ya.p=xa}}function Ld(O,ea,ra,xa){this.x=O;this.z=ea;this.o=ra;this.e=xa;this.v=!1;this.n=this.p=null}function te(O,ea,ra,xa){return function(ya,Ca){function Pa(Ib,Wb){var sc=ya(Ib,Wb);O(Ib=sc[0],Wb=sc[1])&&Ca.point(Ib,Wb)}function Ia(Ib,Wb){Ib=ya(Ib,Wb);Ab.point(Ib[0],Ib[1])}function Oa(){Nb.point=Ia;Ab.lineStart()}function Ua(){Nb.point=Pa;Ab.lineEnd()}function bb(Ib,Wb){Kc.push([Ib,
Wb]);Ib=ya(Ib,Wb);rc.point(Ib[0],Ib[1])}function mb(){rc.lineStart();Kc=[]}function vb(){bb(Kc[0][0],Kc[0][1]);rc.lineEnd();var Ib=rc.clean(),Wb=fc.buffer(),sc=Wb.length;Kc.pop();zc.push(Kc);Kc=null;if(sc)if(Ib&1){Ib=Wb[0];sc=Ib.length-1;Wb=-1;var Tc;if(0<sc){vc||(Ca.polygonStart(),vc=!0);for(Ca.lineStart();++Wb<sc;)Ca.point((Tc=Ib[Wb])[0],Tc[1]);Ca.lineEnd()}}else 1<sc&&Ib&2&&Wb.push(Wb.pop().concat(Wb.shift())),Ub.push(Wb.filter(ze))}var Ab=ea(Ca),Bb=ya.invert(xa[0],xa[1]),Nb={point:Pa,lineStart:Oa,
lineEnd:Ua,polygonStart:function(){Nb.point=bb;Nb.lineStart=mb;Nb.lineEnd=vb;Ub=[];zc=[]},polygonEnd:function(){Nb.point=Pa;Nb.lineStart=Oa;Nb.lineEnd=Ua;Ub=zb.merge(Ub);var Ib=Bb;var Wb=zc;var sc=Ib[0],Tc=Ib[1],Vc=[Math.sin(sc),-Math.cos(sc),0],Xc=0,Nc=0;ai.reset();for(var yd=0,Rd=Wb.length;yd<Rd;++yd){var ae=Wb[yd],he=ae.length;if(he){var de=ae[0],ne=de[0];Ib=de[1]/2+Yd/4;for(var Pd=Math.sin(Ib),yf=Math.cos(Ib),Ze=1;;){Ze===he&&(Ze=0);Ib=ae[Ze];var hg=Ib[0],bi=Ib[1]/2+Yd/4,ej=Math.sin(bi);bi=Math.cos(bi);
var gh=hg-ne,fj=0<=gh?1:-1,Oe=fj*gh,He=Oe>Yd;Pd*=ej;ai.add(Math.atan2(Pd*fj*Math.sin(Oe),yf*bi+Pd*Math.cos(Oe)));Xc+=He?gh+fj*zf:gh;He^ne>=sc^hg>=sc&&(de=Ac(Uc(de),Uc(Ib)),Dc(de),ne=Ac(Vc,de),Dc(ne),ne=(He^0<=gh?-1:1)*ia(ne[2]),Tc>ne||Tc===ne&&(de[0]||de[1]))&&(Nc+=He^0<=gh?1:-1);if(!Ze++)break;ne=hg;Pd=ej;yf=bi;de=Ib}}}Wb=(-1E-6>Xc||1E-6>Xc&&-1E-6>ai)^Nc&1;Ub.length?(vc||(Ca.polygonStart(),vc=!0),Sd(Ub,zd,Wb,ra,Ca)):Wb&&(vc||(Ca.polygonStart(),vc=!0),Ca.lineStart(),ra(null,null,1,Ca),Ca.lineEnd());
vc&&(Ca.polygonEnd(),vc=!1);Ub=zc=null},sphere:function(){Ca.polygonStart();Ca.lineStart();ra(null,null,1,Ca);Ca.lineEnd();Ca.polygonEnd()}},Ub,fc=Dd(),rc=ea(fc),vc=!1,zc,Kc;return Nb}}function ze(O){return 1<O.length}function Dd(){var O=[],ea;return{lineStart:function(){O.push(ea=[])},point:function(ra,xa){ea.push([ra,xa])},lineEnd:y,buffer:function(){var ra=O;O=[];ea=null;return ra},rejoin:function(){1<O.length&&O.push(O.pop().concat(O.shift()))}}}function zd(O,ea){return(0>(O=O.x)[0]?O[1]-Ye-1E-6:
Ye-O[1])-(0>(ea=ea.x)[0]?ea[1]-Ye-1E-6:Ye-ea[1])}function oe(O){function ea(Oa,Ua){return Math.cos(Oa)*Math.cos(Ua)>ya}function ra(Oa,Ua,bb){var mb=Uc(Oa),vb=Uc(Ua),Ab=[1,0,0];vb=Ac(mb,vb);var Bb=ac(vb,vb);mb=vb[0];var Nb=Bb-mb*mb;if(!Nb)return!bb&&Oa;Bb=ya*Bb/Nb;Nb=-ya*mb/Nb;mb=Ac(Ab,vb);Ab=wc(Ab,Bb);vb=wc(vb,Nb);Zc(Ab,vb);vb=ac(Ab,mb);Bb=ac(mb,mb);Nb=vb*vb-Bb*(ac(Ab,Ab)-1);if(!(0>Nb)){var Ub=Math.sqrt(Nb);Nb=wc(mb,(-vb-Ub)/Bb);Zc(Nb,Ab);Nb=ad(Nb);if(!bb)return Nb;bb=Oa[0];var fc=Ua[0];Oa=Oa[1];
Ua=Ua[1];if(fc<bb){var rc=bb;bb=fc;fc=rc}var vc=fc-bb,zc=1E-6>Wd(vc-Yd);!zc&&Ua<Oa&&(rc=Oa,Oa=Ua,Ua=rc);if(zc||1E-6>vc?zc?0<Oa+Ua^Nb[1]<(1E-6>Wd(Nb[0]-bb)?Oa:Ua):Oa<=Nb[1]&&Nb[1]<=Ua:vc>Yd^(bb<=Nb[0]&&Nb[0]<=fc))return Ua=wc(mb,(-vb+Ub)/Bb),Zc(Ua,Ab),[Nb,ad(Ua)]}}function xa(Oa,Ua){var bb=Ca?O:Yd-O,mb=0;Oa<-bb?mb|=1:Oa>bb&&(mb|=2);Ua<-bb?mb|=4:Ua>bb&&(mb|=8);return mb}var ya=Math.cos(O),Ca=0<ya,Pa=1E-6<Wd(ya),Ia=lc(O,6*ce);return te(ea,function(Oa){var Ua,bb,mb,vb,Ab;return{lineStart:function(){vb=
mb=!1;Ab=1},point:function(Bb,Nb){var Ub=[Bb,Nb],fc=ea(Bb,Nb);Nb=Ca?fc?0:xa(Bb,Nb):fc?xa(Bb+(0>Bb?Yd:-Yd),Nb):0;!Ua&&(vb=mb=fc)&&Oa.lineStart();fc!==mb&&(Bb=ra(Ua,Ub),Rc(Ua,Bb)||Rc(Ub,Bb))&&(Ub[0]+=1E-6,Ub[1]+=1E-6,fc=ea(Ub[0],Ub[1]));if(fc!==mb)Ab=0,fc?(Oa.lineStart(),Bb=ra(Ub,Ua),Oa.point(Bb[0],Bb[1])):(Bb=ra(Ua,Ub),Oa.point(Bb[0],Bb[1]),Oa.lineEnd()),Ua=Bb;else if(Pa&&Ua&&Ca^fc){var rc;Nb&bb||!(rc=ra(Ub,Ua,!0))||(Ab=0,Ca?(Oa.lineStart(),Oa.point(rc[0][0],rc[0][1]),Oa.point(rc[1][0],rc[1][1]),Oa.lineEnd()):
(Oa.point(rc[1][0],rc[1][1]),Oa.lineEnd(),Oa.lineStart(),Oa.point(rc[0][0],rc[0][1])))}!fc||Ua&&Rc(Ua,Ub)||Oa.point(Ub[0],Ub[1]);Ua=Ub;mb=fc;bb=Nb},lineEnd:function(){mb&&Oa.lineEnd();Ua=null},clean:function(){return Ab|(vb&&mb)<<1}}},Ia,Ca?[0,-O]:[-Yd,O-Yd])}function me(O,ea,ra,xa){return function(ya){var Ca=ya.a,Pa=ya.b,Ia=Ca.x;Ca=Ca.y;var Oa=0,Ua=1,bb=Pa.x-Ia;Pa=Pa.y-Ca;var mb=O-Ia;if(bb||!(0<mb)){mb/=bb;if(0>bb){if(mb<Oa)return;mb<Ua&&(Ua=mb)}else if(0<bb){if(mb>Ua)return;mb>Oa&&(Oa=mb)}mb=ra-
Ia;if(bb||!(0>mb)){mb/=bb;if(0>bb){if(mb>Ua)return;mb>Oa&&(Oa=mb)}else if(0<bb){if(mb<Oa)return;mb<Ua&&(Ua=mb)}mb=ea-Ca;if(Pa||!(0<mb)){mb/=Pa;if(0>Pa){if(mb<Oa)return;mb<Ua&&(Ua=mb)}else if(0<Pa){if(mb>Ua)return;mb>Oa&&(Oa=mb)}mb=xa-Ca;if(Pa||!(0>mb)){mb/=Pa;if(0>Pa){if(mb>Ua)return;mb>Oa&&(Oa=mb)}else if(0<Pa){if(mb<Oa)return;mb<Ua&&(Ua=mb)}0<Oa&&(ya.a={x:Ia+Oa*bb,y:Ca+Oa*Pa});1>Ua&&(ya.b={x:Ia+Ua*bb,y:Ca+Ua*Pa});return ya}}}}}}function re(O,ea,ra,xa){function ya(Ia,Oa){return 1E-6>Wd(Ia[0]-O)?
0<Oa?0:3:1E-6>Wd(Ia[0]-ra)?0<Oa?2:1:1E-6>Wd(Ia[1]-ea)?0<Oa?1:0:0<Oa?3:2}function Ca(Ia,Oa){return Pa(Ia.x,Oa.x)}function Pa(Ia,Oa){var Ua=ya(Ia,1),bb=ya(Oa,1);return Ua!==bb?Ua-bb:0===Ua?Oa[1]-Ia[1]:1===Ua?Ia[0]-Oa[0]:2===Ua?Ia[1]-Oa[1]:Oa[0]-Ia[0]}return function(Ia){function Oa(Vc,Xc,Nc,yd){var Rd=0,ae=0;if(null==Vc||(Rd=ya(Vc,Nc))!==(ae=ya(Xc,Nc))||0>Pa(Vc,Xc)^0<Nc){do yd.point(0===Rd||3===Rd?O:ra,1<Rd?xa:ea);while((Rd=(Rd+Nc+4)%4)!==ae)}else yd.point(Xc[0],Xc[1])}function Ua(Vc,Xc){O<=Vc&&Vc<=
ra&&ea<=Xc&&Xc<=xa&&Ia.point(Vc,Xc)}function bb(Vc,Xc){Vc=Math.max(-1E9,Math.min(1E9,Vc));Xc=Math.max(-1E9,Math.min(1E9,Xc));var Nc=O<=Vc&&Vc<=ra&&ea<=Xc&&Xc<=xa;Nb&&Ub.push([Vc,Xc]);if(sc)rc=Vc,vc=Xc,zc=Nc,sc=!1,Nc&&(Ia.lineStart(),Ia.point(Vc,Xc));else if(Nc&&Wb)Ia.point(Vc,Xc);else{var yd={a:{x:Kc,y:Ib},b:{x:Vc,y:Xc}};Ab(yd)?(Wb||(Ia.lineStart(),Ia.point(yd.a.x,yd.a.y)),Ia.point(yd.b.x,yd.b.y),Nc||Ia.lineEnd(),Tc=!1):Nc&&(Ia.lineStart(),Ia.point(Vc,Xc),Tc=!1)}Kc=Vc;Ib=Xc;Wb=Nc}var mb=Ia,vb=Dd(),
Ab=me(O,ea,ra,xa),Bb,Nb,Ub,fc={point:Ua,lineStart:function(){fc.point=bb;Nb&&Nb.push(Ub=[]);sc=!0;Wb=!1;Kc=Ib=NaN},lineEnd:function(){Bb&&(bb(rc,vc),zc&&Wb&&vb.rejoin(),Bb.push(vb.buffer()));fc.point=Ua;Wb&&Ia.lineEnd()},polygonStart:function(){Ia=vb;Bb=[];Nb=[];Tc=!0},polygonEnd:function(){Ia=mb;Bb=zb.merge(Bb);var Vc=[O,xa];for(var Xc=0,Nc=Nb.length,yd=Vc[1],Rd=0;Rd<Nc;++Rd)for(var ae=1,he=Nb[Rd],de=he.length,ne=he[0],Pd;ae<de;++ae)Pd=he[ae],ne[1]<=yd?Pd[1]>yd&&0<na(ne,Pd,Vc)&&++Xc:Pd[1]<=yd&&0>
na(ne,Pd,Vc)&&--Xc,ne=Pd;Vc=0!==Xc;Xc=Tc&&Vc;Nc=Bb.length;if(Xc||Nc)Ia.polygonStart(),Xc&&(Ia.lineStart(),Oa(null,null,1,Ia),Ia.lineEnd()),Nc&&Sd(Bb,Ca,Vc,Oa,Ia),Ia.polygonEnd();Bb=Nb=Ub=null}},rc,vc,zc,Kc,Ib,Wb,sc,Tc;return fc}}function Te(O){var ea=0,ra=Yd/3,xa=Ob(O);O=xa(ea,ra);O.parallels=function(ya){return arguments.length?xa(ea=ya[0]*Yd/180,ra=ya[1]*Yd/180):[ea/Yd*180,ra/Yd*180]};return O}function pf(O,ea){function ra(Pa,Ia){Ia=Math.sqrt(ya-2*xa*Math.sin(Ia))/xa;return[Ia*Math.sin(Pa*=xa),
Ca-Ia*Math.cos(Pa)]}O=Math.sin(O);var xa=(O+Math.sin(ea))/2,ya=1+O*(2*xa-O),Ca=Math.sqrt(ya)/xa;ra.invert=function(Pa,Ia){Ia=Ca-Ia;return[Math.atan2(Pa,Ia)/xa,ia((ya-(Pa*Pa+Ia*Ia)*xa*xa)/(2*xa))]};return ra}function af(){function O(Ca,Pa){gj+=ya*Ca-xa*Pa;xa=Ca;ya=Pa}var ea,ra,xa,ya;Og.point=function(Ca,Pa){Og.point=O;ea=xa=Ca;ra=ya=Pa};Og.lineEnd=function(){O(ea,ra)}}function gf(){function O(Oa,Ua){Pa.push("M",Oa,",",Ua,Ca)}function ea(Oa,Ua){Pa.push("M",Oa,",",Ua);Ia.point=ra}function ra(Oa,Ua){Pa.push("L",
Oa,",",Ua)}function xa(){Ia.point=O}function ya(){Pa.push("Z")}var Ca=Ve(4.5),Pa=[],Ia={point:O,lineStart:function(){Ia.point=ea},lineEnd:xa,polygonStart:function(){Ia.lineEnd=ya},polygonEnd:function(){Ia.lineEnd=xa;Ia.point=O},pointRadius:function(Oa){Ca=Ve(Oa);return Ia},result:function(){if(Pa.length){var Oa=Pa.join("");Pa=[];return Oa}}};return Ia}function Ve(O){return"m0,"+O+"a"+O+","+O+" 0 1,1 0,"+-2*O+"a"+O+","+O+" 0 1,1 0,"+2*O+"z"}function Rb(O,ea){eh+=O;fh+=ea;++Dg}function Pc(){function O(xa,
ya){var Ca=xa-ea,Pa=ya-ra;Ca=Math.sqrt(Ca*Ca+Pa*Pa);Qf+=Ca*(ea+xa)/2;Ng+=Ca*(ra+ya)/2;sg+=Ca;Rb(ea=xa,ra=ya)}var ea,ra;ag.point=function(xa,ya){ag.point=O;Rb(ea=xa,ra=ya)}}function uc(){ag.point=Rb}function gd(){function O(Ca,Pa){var Ia=Ca-xa,Oa=Pa-ya;Ia=Math.sqrt(Ia*Ia+Oa*Oa);Qf+=Ia*(xa+Ca)/2;Ng+=Ia*(ya+Pa)/2;sg+=Ia;Ia=ya*Ca-xa*Pa;xh+=Ia*(xa+Ca);yh+=Ia*(ya+Pa);Eg+=3*Ia;Rb(xa=Ca,ya=Pa)}var ea,ra,xa,ya;ag.point=function(Ca,Pa){ag.point=O;Rb(ea=xa=Ca,ra=ya=Pa)};ag.lineEnd=function(){O(ea,ra)}}function Jd(O){function ea(Oa,
Ua){O.moveTo(Oa+Pa,Ua);O.arc(Oa,Ua,Pa,0,zf)}function ra(Oa,Ua){O.moveTo(Oa,Ua);Ia.point=xa}function xa(Oa,Ua){O.lineTo(Oa,Ua)}function ya(){Ia.point=ea}function Ca(){O.closePath()}var Pa=4.5,Ia={point:ea,lineStart:function(){Ia.point=ra},lineEnd:ya,polygonStart:function(){Ia.lineEnd=Ca},polygonEnd:function(){Ia.lineEnd=ya;Ia.point=ea},pointRadius:function(Oa){Pa=Oa;return Ia},result:y};return Ia}function Td(O){function ea(Oa){return(Ia?xa:ra)(Oa)}function ra(Oa){return ee(Oa,function(Ua,bb){Ua=O(Ua,
bb);Oa.point(Ua[0],Ua[1])})}function xa(Oa){function Ua(yd,Rd){yd=O(yd,Rd);Oa.point(yd[0],yd[1])}function bb(){Wb=NaN;Nc.point=mb;Oa.lineStart()}function mb(yd,Rd){var ae=Uc([yd,Rd]);Rd=O(yd,Rd);ya(Wb,sc,Ib,Tc,Vc,Xc,Wb=Rd[0],sc=Rd[1],Ib=yd,Tc=ae[0],Vc=ae[1],Xc=ae[2],Ia,Oa);Oa.point(Wb,sc)}function vb(){Nc.point=Ua;Oa.lineEnd()}function Ab(){bb();Nc.point=Bb;Nc.lineEnd=Nb}function Bb(yd,Rd){mb(Ub=yd,Rd);fc=Wb;rc=sc;vc=Tc;zc=Vc;Kc=Xc;Nc.point=mb}function Nb(){ya(Wb,sc,Ib,Tc,Vc,Xc,fc,rc,Ub,vc,zc,Kc,
Ia,Oa);Nc.lineEnd=vb;vb()}var Ub,fc,rc,vc,zc,Kc,Ib,Wb,sc,Tc,Vc,Xc,Nc={point:Ua,lineStart:bb,lineEnd:vb,polygonStart:function(){Oa.polygonStart();Nc.lineStart=Ab},polygonEnd:function(){Oa.polygonEnd();Nc.lineStart=bb}};return Nc}function ya(Oa,Ua,bb,mb,vb,Ab,Bb,Nb,Ub,fc,rc,vc,zc,Kc){var Ib=Bb-Oa,Wb=Nb-Ua,sc=Ib*Ib+Wb*Wb;if(sc>4*Ca&&zc--){var Tc=mb+fc,Vc=vb+rc,Xc=Ab+vc,Nc=Math.sqrt(Tc*Tc+Vc*Vc+Xc*Xc),yd=Math.asin(Xc/=Nc),Rd=1E-6>Wd(Wd(Xc)-1)||1E-6>Wd(bb-Ub)?(bb+Ub)/2:Math.atan2(Vc,Tc),ae=O(Rd,yd);yd=
ae[0];ae=ae[1];var he=yd-Oa,de=ae-Ua,ne=Wb*he-Ib*de;if(ne*ne/sc>Ca||.3<Wd((Ib*he+Wb*de)/sc-.5)||mb*fc+vb*rc+Ab*vc<Pa)ya(Oa,Ua,bb,mb,vb,Ab,yd,ae,Rd,Tc/=Nc,Vc/=Nc,Xc,zc,Kc),Kc.point(yd,ae),ya(yd,ae,Rd,Tc,Vc,Xc,Bb,Nb,Ub,fc,rc,vc,zc,Kc)}}var Ca=.5,Pa=Math.cos(30*ce),Ia=16;ea.precision=function(Oa){if(!arguments.length)return Math.sqrt(Ca);Ia=0<(Ca=Oa*Oa)&&16;return ea};return ea}function Fd(O){var ea=Td(function(ra,xa){return O([ra*Qe,xa*Qe])});return function(ra){return hc(ea(ra))}}function Ed(O){this.stream=
O}function ee(O,ea){return{point:ea,sphere:function(){O.sphere()},lineStart:function(){O.lineStart()},lineEnd:function(){O.lineEnd()},polygonStart:function(){O.polygonStart()},polygonEnd:function(){O.polygonEnd()}}}function ge(O){return Ob(function(){return O})()}function Ob(O){function ea(sc){sc=Ia(sc[0]*ce,sc[1]*ce);return[sc[0]*Ua+fc,rc-sc[1]*Ua]}function ra(sc){return(sc=Ia.invert((sc[0]-fc)/Ua,(rc-sc[1])/Ua))&&[sc[0]*Qe,sc[1]*Qe]}function xa(){Ia=ud(Pa=Ic(Bb,Nb,Ub),Ca);var sc=Ca(vb,Ab);fc=bb-
sc[0]*Ua;rc=mb+sc[1]*Ua;return ya()}function ya(){Wb&&(Wb.valid=!1,Wb=null);return ea}var Ca,Pa,Ia,Oa=Td(function(sc,Tc){sc=Ca(sc,Tc);return[sc[0]*Ua+fc,rc-sc[1]*Ua]}),Ua=150,bb=480,mb=250,vb=0,Ab=0,Bb=0,Nb=0,Ub=0,fc,rc,vc=Kj,zc=x,Kc=null,Ib=null,Wb;ea.stream=function(sc){Wb&&(Wb.valid=!1);Wb=hc(vc(Pa,Oa(zc(sc))));Wb.valid=!0;return Wb};ea.clipAngle=function(sc){if(!arguments.length)return Kc;vc=null==sc?(Kc=sc,Kj):oe((Kc=+sc)*ce);return ya()};ea.clipExtent=function(sc){if(!arguments.length)return Ib;
zc=(Ib=sc)?re(sc[0][0],sc[0][1],sc[1][0],sc[1][1]):x;return ya()};ea.scale=function(sc){if(!arguments.length)return Ua;Ua=+sc;return xa()};ea.translate=function(sc){if(!arguments.length)return[bb,mb];bb=+sc[0];mb=+sc[1];return xa()};ea.center=function(sc){if(!arguments.length)return[vb*Qe,Ab*Qe];vb=sc[0]%360*ce;Ab=sc[1]%360*ce;return xa()};ea.rotate=function(sc){if(!arguments.length)return[Bb*Qe,Nb*Qe,Ub*Qe];Bb=sc[0]%360*ce;Nb=sc[1]%360*ce;Ub=2<sc.length?sc[2]%360*ce:0;return xa()};zb.rebind(ea,Oa,
"precision");return function(){Ca=O.apply(this,arguments);ea.invert=Ca.invert&&ra;return xa()}}function hc(O){return ee(O,function(ea,ra){O.point(ea*ce,ra*ce)})}function Cc(O,ea){return[O,ea]}function Sc(O,ea){return[O>Yd?O-zf:O<-Yd?O+zf:O,ea]}function Ic(O,ea,ra){return O?ea||ra?ud(Jc(O),yc(ea,ra)):Jc(O):ea||ra?yc(ea,ra):Sc}function Mc(O){return function(ea,ra){return ea+=O,[ea>Yd?ea-zf:ea<-Yd?ea+zf:ea,ra]}}function Jc(O){var ea=Mc(O);ea.invert=Mc(-O);return ea}function yc(O,ea){function ra(Ia,Oa){var Ua=
Math.cos(Oa),bb=Math.cos(Ia)*Ua;Ia=Math.sin(Ia)*Ua;Oa=Math.sin(Oa);Ua=Oa*xa+bb*ya;return[Math.atan2(Ia*Ca-Ua*Pa,bb*xa-Oa*ya),ia(Ua*Ca+Ia*Pa)]}var xa=Math.cos(O),ya=Math.sin(O),Ca=Math.cos(ea),Pa=Math.sin(ea);ra.invert=function(Ia,Oa){var Ua=Math.cos(Oa),bb=Math.cos(Ia)*Ua;Ia=Math.sin(Ia)*Ua;Oa=Math.sin(Oa);Ua=Oa*Ca-Ia*Pa;return[Math.atan2(Ia*Ca+Oa*Pa,bb*xa+Ua*ya),ia(Ua*xa-bb*ya)]};return ra}function lc(O,ea){var ra=Math.cos(O),xa=Math.sin(O);return function(ya,Ca,Pa,Ia){var Oa=Pa*ea;if(null!=ya){if(ya=
pc(ra,ya),Ca=pc(ra,Ca),0<Pa?ya<Ca:ya>Ca)ya+=Pa*zf}else ya=O+Pa*zf,Ca=O-.5*Oa;for(var Ua;0<Pa?ya>Ca:ya<Ca;ya-=Oa)Ia.point((Ua=ad([ra,-xa*Math.cos(ya),-xa*Math.sin(ya)]))[0],Ua[1])}}function pc(O,ea){ea=Uc(ea);ea[0]-=O;Dc(ea);O=la(-ea[1]);return((0>-ea[2]?-O:O)+2*Math.PI-1E-6)%(2*Math.PI)}function mc(O,ea,ra){var xa=zb.range(O,ea-1E-6,ra).concat(ea);return function(ya){return xa.map(function(Ca){return[ya,Ca]})}}function cd(O,ea,ra){var xa=zb.range(O,ea-1E-6,ra).concat(ea);return function(ya){return xa.map(function(Ca){return[Ca,
ya]})}}function kd(O){return O.source}function nd(O){return O.target}function qd(O,ea,ra,xa){var ya=Math.cos(ea),Ca=Math.sin(ea),Pa=Math.cos(xa),Ia=Math.sin(xa),Oa=ya*Math.cos(O),Ua=ya*Math.sin(O),bb=Pa*Math.cos(ra),mb=Pa*Math.sin(ra),vb=2*Math.asin(Math.sqrt(ta(xa-ea)+ya*Pa*ta(ra-O))),Ab=1/Math.sin(vb);ra=vb?function(Bb){var Nb=Math.sin(Bb*=vb)*Ab;Bb=Math.sin(vb-Bb)*Ab;var Ub=Bb*Oa+Nb*bb,fc=Bb*Ua+Nb*mb;return[Math.atan2(fc,Ub)*Qe,Math.atan2(Bb*Ca+Nb*Ia,Math.sqrt(Ub*Ub+fc*fc))*Qe]}:function(){return[O*
Qe,ea*Qe]};ra.distance=vb;return ra}function md(O,ea){function ra(xa,ya){var Ca=Math.cos(ya),Pa=O(Math.cos(xa)*Ca);return[Pa*Ca*Math.sin(xa),Pa*Math.sin(ya)]}ra.invert=function(xa,ya){var Ca=Math.sqrt(xa*xa+ya*ya),Pa=ea(Ca),Ia=Math.sin(Pa);return[Math.atan2(xa*Ia,Ca*Math.cos(Pa)),Math.asin(Ca&&ya*Ia/Ca)]};return ra}function pe(O,ea){function ra(Pa,Ia){0<Ca?Ia<-Ye+1E-6&&(Ia=-Ye+1E-6):Ia>Ye-1E-6&&(Ia=Ye-1E-6);Ia=Ca/Math.pow(Math.tan(Yd/4+Ia/2),ya);return[Ia*Math.sin(ya*Pa),Ca-Ia*Math.cos(ya*Pa)]}var xa=
Math.cos(O),ya=O===ea?Math.sin(O):Math.log(xa/Math.cos(ea))/Math.log(Math.tan(Yd/4+ea/2)/Math.tan(Yd/4+O/2)),Ca=xa*Math.pow(Math.tan(Yd/4+O/2),ya)/ya;if(!ya)return Be;ra.invert=function(Pa,Ia){Ia=Ca-Ia;return[Math.atan2(Pa,Ia)/ya,2*Math.atan(Math.pow(Ca/((0<ya?1:0>ya?-1:0)*Math.sqrt(Pa*Pa+Ia*Ia)),1/ya))-Ye]};return ra}function qe(O,ea){function ra(Pa,Ia){Ia=Ca-Ia;return[Ia*Math.sin(ya*Pa),Ca-Ia*Math.cos(ya*Pa)]}var xa=Math.cos(O),ya=O===ea?Math.sin(O):(xa-Math.cos(ea))/(ea-O),Ca=xa/ya+O;if(1E-6>Wd(ya))return Cc;
ra.invert=function(Pa,Ia){Ia=Ca-Ia;return[Math.atan2(Pa,Ia)/ya,Ca-(0<ya?1:0>ya?-1:0)*Math.sqrt(Pa*Pa+Ia*Ia)]};return ra}function Be(O,ea){return[O,Math.log(Math.tan(Yd/4+ea/2))]}function fe(O){var ea=ge(O),ra=ea.scale,xa=ea.translate,ya=ea.clipExtent,Ca;ea.scale=function(){var Pa=ra.apply(ea,arguments);return Pa===ea?Ca?ea.clipExtent(null):ea:Pa};ea.translate=function(){var Pa=xa.apply(ea,arguments);return Pa===ea?Ca?ea.clipExtent(null):ea:Pa};ea.clipExtent=function(Pa){var Ia=ya.apply(ea,arguments);
if(Ia===ea){if(Ca=null==Pa){var Oa=Yd*ra(),Ua=xa();ya([[Ua[0]-Oa,Ua[1]-Oa],[Ua[0]+Oa,Ua[1]+Oa]])}}else Ca&&(Ia=null);return Ia};return ea.clipExtent(null)}function De(O,ea){return[Math.log(Math.tan(Yd/4+ea/2)),-O]}function Rf(O){return O[0]}function Fg(O){return O[1]}function Hi(O){for(var ea=O.length,ra=[0,1],xa=2,ya=2;ya<ea;ya++){for(;1<xa&&0>=na(O[ra[xa-2]],O[ra[xa-1]],O[ya]);)--xa;ra[xa++]=ya}return ra.slice(0,xa)}function hj(O,ea){return O[0]-ea[0]||O[1]-ea[1]}function ij(O,ea,ra){return(ra[0]-
ea[0])*(O[1]-ea[1])<(ra[1]-ea[1])*(O[0]-ea[0])}function hh(O,ea,ra,xa){var ya=O[0],Ca=ra[0],Pa=ea[0]-ya,Ia=xa[0]-Ca;O=O[1];ra=ra[1];ea=ea[1]-O;xa=xa[1]-ra;Ca=(Ia*(O-ra)-xa*(ya-Ca))/(xa*Pa-Ia*ea);return[ya+Ca*Pa,O+Ca*ea]}function Lj(O){var ea=O[0];O=O[O.length-1];return!(ea[0]-O[0]||ea[1]-O[1])}function jj(){Sf(this);this.edge=this.site=this.circle=null}function Mj(O){var ea=qk.pop()||new jj;ea.site=O;return ea}function ci(O){zh(O);di.remove(O);qk.push(O);Sf(O)}function Ii(O,ea){var ra=O.site,xa=ra.x,
ya=ra.y,Ca=ya-ea;if(!Ca)return xa;O=O.P;if(!O)return-Infinity;ra=O.site;O=ra.x;ra=ra.y;ea=ra-ea;if(!ea)return O;var Pa=O-xa,Ia=1/Ca-1/ea,Oa=Pa/ea;return Ia?(-Oa+Math.sqrt(Oa*Oa-2*Ia*(Pa*Pa/(-2*ea)-ra+ea/2+ya-Ca/2)))/Ia+xa:(xa+O)/2}function Pg(O){this.site=O;this.edges=[]}function Nj(O,ea){return ea.angle-O.angle}function Oj(){Sf(this);this.x=this.y=this.arc=this.site=this.cy=null}function Ah(O){var ea=O.P,ra=O.N;if(ea&&ra){var xa=ea.site;ea=O.site;var ya=ra.site;if(xa!==ya){ra=ea.x;var Ca=ea.y,Pa=
xa.x-ra,Ia=xa.y-Ca;xa=ya.x-ra;ya=ya.y-Ca;var Oa=2*(Pa*ya-Ia*xa);if(!(-1E-12<=Oa)){var Ua=Pa*Pa+Ia*Ia,bb=xa*xa+ya*ya;Ia=(ya*Ua-Ia*bb)/Oa;Pa=(Pa*bb-xa*Ua)/Oa;ya=Pa+Ca;Ca=rk.pop()||new Oj;Ca.arc=O;Ca.site=ea;Ca.x=Ia+ra;Ca.y=ya+Math.sqrt(Ia*Ia+Pa*Pa);Ca.cy=ya;O.circle=Ca;O=null;for(ea=Ji._;ea;)if(Ca.y<ea.y||Ca.y===ea.y&&Ca.x<=ea.x)if(ea.L)ea=ea.L;else{O=ea.P;break}else if(ea.R)ea=ea.R;else{O=ea;break}Ji.insert(O,Ca);O||(ef=Ca)}}}}function zh(O){var ea=O.circle;ea&&(ea.P||(ef=ea.N),Ji.remove(ea),rk.push(ea),
Sf(ea),O.circle=null)}function ei(O,ea){var ra=O.b;if(ra)return!0;var xa=O.a;ra=ea[0][0];var ya=ea[1][0],Ca=ea[0][1];ea=ea[1][1];var Pa=O.l,Ia=O.r,Oa=Pa.x;Pa=Pa.y;var Ua=Ia.x;Ia=Ia.y;var bb=(Oa+Ua)/2;if(Ia===Pa){if(bb<ra||bb>=ya)return;if(Oa>Ua){if(!xa)xa={x:bb,y:Ca};else if(xa.y>=ea)return;ra={x:bb,y:ea}}else{if(!xa)xa={x:bb,y:ea};else if(xa.y<Ca)return;ra={x:bb,y:Ca}}}else{var mb=(Oa-Ua)/(Ia-Pa);bb=(Pa+Ia)/2-mb*bb;if(-1>mb||1<mb)if(Oa>Ua){if(!xa)xa={x:(Ca-bb)/mb,y:Ca};else if(xa.y>=ea)return;ra=
{x:(ea-bb)/mb,y:ea}}else{if(!xa)xa={x:(ea-bb)/mb,y:ea};else if(xa.y<Ca)return;ra={x:(Ca-bb)/mb,y:Ca}}else if(Pa<Ia){if(!xa)xa={x:ra,y:mb*ra+bb};else if(xa.x>=ya)return;ra={x:ya,y:mb*ya+bb}}else{if(!xa)xa={x:ya,y:mb*ya+bb};else if(xa.x<ra)return;ra={x:ra,y:mb*ra+bb}}}O.a=xa;O.b=ra;return!0}function Bh(O,ea){this.l=O;this.r=ea;this.a=this.b=null}function Ch(O,ea,ra,xa){var ya=new Bh(O,ea);fi.push(ya);ra&&gi(ya,O,ea,ra);xa&&gi(ya,ea,O,xa);Dh[O.i].edges.push(new ih(ya,O,ea));Dh[ea.i].edges.push(new ih(ya,
ea,O));return ya}function gi(O,ea,ra,xa){O.a||O.b?O.l===ra?O.b=xa:O.a=xa:(O.a=xa,O.l=ea,O.r=ra)}function ih(O,ea,ra){var xa=O.a,ya=O.b;this.edge=O;this.site=ea;this.angle=ra?Math.atan2(ra.y-ea.y,ra.x-ea.x):O.l===ea?Math.atan2(ya.x-xa.x,xa.y-ya.y):Math.atan2(xa.x-ya.x,ya.y-xa.y)}function Ae(){this._=null}function Sf(O){O.U=O.C=O.L=O.R=O.P=O.N=null}function Eh(O,ea){var ra=ea.R,xa=ea.U;xa?xa.L===ea?xa.L=ra:xa.R=ra:O._=ra;ra.U=xa;ea.U=ra;ea.R=ra.L;ea.R&&(ea.R.U=ea);ra.L=ea}function Fh(O,ea){var ra=ea.L,
xa=ea.U;xa?xa.L===ea?xa.L=ra:xa.R=ra:O._=ra;ra.U=xa;ea.U=ra;ea.L=ra.R;ea.L&&(ea.L.U=ea);ra.R=ea}function Pj(O){for(;O.L;)O=O.L;return O}function hi(O,ea){var ra=O.sort(Ki).pop(),xa;fi=[];Dh=Array(O.length);di=new Ae;for(Ji=new Ae;;){var ya=ef;if(ra&&(!ya||ra.y<ya.y||ra.y===ya.y&&ra.x<ya.x)){if(ra.x!==xa||ra.y!==Ca){Dh[ra.i]=new Pg(ra);var Ca=xa=void 0;ya=ra;for(var Pa=ya.x,Ia=ya.y,Oa=di._;Oa;){var Ua=Ii(Oa,Ia)-Pa;if(1E-6<Ua)Oa=Oa.L;else{var bb=Oa;var mb=Ia;var vb=bb.N;vb?mb=Ii(vb,mb):(bb=bb.site,
mb=bb.y===mb?bb.x:Infinity);mb=Pa-mb;if(1E-6<mb){if(!Oa.R){Ca=Oa;break}Oa=Oa.R}else{-1E-6<Ua?(Ca=Oa.P,xa=Oa):-1E-6<mb?(Ca=Oa,xa=Oa.N):Ca=xa=Oa;break}}}Ua=Mj(ya);di.insert(Ca,Ua);if(Ca||xa)if(Ca===xa)zh(Ca),xa=Mj(Ca.site),di.insert(Ua,xa),Ua.edge=xa.edge=Ch(Ca.site,Ua.site),Ah(Ca),Ah(xa);else if(xa){zh(Ca);zh(xa);Pa=Ca.site;Oa=Pa.x;mb=Pa.y;bb=ya.x-Oa;vb=ya.y-mb;Ia=xa.site;var Ab=Ia.x-Oa,Bb=Ia.y-mb,Nb=2*(bb*Bb-vb*Ab),Ub=bb*bb+vb*vb,fc=Ab*Ab+Bb*Bb;Oa={x:(Bb*Ub-vb*fc)/Nb+Oa,y:(bb*fc-Ab*Ub)/Nb+mb};gi(xa.edge,
Pa,Ia,Oa);Ua.edge=Ch(Pa,ya,null,Oa);xa.edge=Ch(ya,Ia,null,Oa);Ah(Ca);Ah(xa)}else Ua.edge=Ch(Ca.site,Ua.site);xa=ra.x;Ca=ra.y}ra=O.pop()}else if(ya){Ia=ya.arc;ya=Ia.circle;Pa=ya.x;Oa=ya.cy;ya={x:Pa,y:Oa};bb=Ia.P;mb=Ia.N;Ua=[Ia];ci(Ia);for(Ia=bb;Ia.circle&&1E-6>Wd(Pa-Ia.circle.x)&&1E-6>Wd(Oa-Ia.circle.cy);)bb=Ia.P,Ua.unshift(Ia),ci(Ia),Ia=bb;Ua.unshift(Ia);zh(Ia);for(bb=mb;bb.circle&&1E-6>Wd(Pa-bb.circle.x)&&1E-6>Wd(Oa-bb.circle.cy);)mb=bb.N,Ua.push(bb),ci(bb),bb=mb;Ua.push(bb);zh(bb);Oa=Ua.length;
for(Pa=1;Pa<Oa;++Pa)bb=Ua[Pa],Ia=Ua[Pa-1],gi(bb.edge,Ia.site,bb.site,ya);Ia=Ua[0];bb=Ua[Oa-1];bb.edge=Ch(Ia.site,bb.site,null,ya);Ah(Ia);Ah(bb)}else break}if(ea){O=fi;ra=me(ea[0][0],ea[0][1],ea[1][0],ea[1][1]);for(xa=O.length;xa--;)if(Ca=O[xa],!ei(Ca,ea)||!ra(Ca)||1E-6>Wd(Ca.a.x-Ca.b.x)&&1E-6>Wd(Ca.a.y-Ca.b.y))Ca.a=Ca.b=null,O.splice(xa,1);O=ea[0][0];ra=ea[1][0];xa=ea[0][1];ea=ea[1][1];Ca=Dh;for(ya=Ca.length;ya--;)if((Ua=Ca[ya])&&Ua.prepare())for(Ia=Ua.edges,Oa=Ia.length,Pa=0;Pa<Oa;)if(Ub=Ia[Pa].end(),
Bb=Ub.x,Nb=Ub.y,mb=Ia[++Pa%Oa].start(),Ab=mb.x,fc=mb.y,1E-6<Wd(Bb-Ab)||1E-6<Wd(Nb-fc))mb=Ia,bb=mb.splice,vb=Pa,Ab=1E-6>Wd(Bb-O)&&1E-6<ea-Nb?{x:O,y:1E-6>Wd(Ab-O)?fc:ea}:1E-6>Wd(Nb-ea)&&1E-6<ra-Bb?{x:1E-6>Wd(fc-ea)?Ab:ra,y:ea}:1E-6>Wd(Bb-ra)&&1E-6<Nb-xa?{x:ra,y:1E-6>Wd(Ab-ra)?fc:xa}:1E-6>Wd(Nb-xa)&&1E-6<Bb-O?{x:1E-6>Wd(fc-xa)?Ab:O,y:xa}:null,Bb=new Bh(Ua.site,null),Bb.a=Ub,Bb.b=Ab,fi.push(Bb),bb.call(mb,vb,0,new ih(Bb,Ua.site,null)),++Oa}ea={cells:Dh,edges:fi};di=Ji=fi=Dh=null;return ea}function Ki(O,
ea){return ea.y-O.y||ea.x-O.x}function Qj(O){return O.x}function Rj(O){return O.y}function Sj(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function ii(O,ea,ra,xa,ya,Ca){if(!O(ea,ra,xa,ya,Ca)){var Pa=.5*(ra+ya),Ia=.5*(xa+Ca);ea=ea.nodes;ea[0]&&ii(O,ea[0],ra,xa,Pa,Ia);ea[1]&&ii(O,ea[1],Pa,xa,ya,Ia);ea[2]&&ii(O,ea[2],ra,Ia,Pa,Ca);ea[3]&&ii(O,ea[3],Pa,Ia,ya,Ca)}}function sk(O,ea,ra,xa,ya,Ca,Pa){var Ia=Infinity,Oa;(function Nb(bb,mb,vb,Ab,Bb){if(!(mb>Ca||vb>Pa||Ab<xa||Bb<ya)){if(Ub=bb.point){var Ub,
fc=ea-bb.x,rc=ra-bb.y;fc=fc*fc+rc*rc;fc<Ia&&(fc=Math.sqrt(Ia=fc),xa=ea-fc,ya=ra-fc,Ca=ea+fc,Pa=ra+fc,Oa=Ub)}Ub=bb.nodes;fc=.5*(mb+Ab);rc=.5*(vb+Bb);for(var vc=(ra>=rc)<<1|ea>=fc,zc=vc+4;vc<zc;++vc)if(bb=Ub[vc&3])switch(vc&3){case 0:Nb(bb,mb,vb,fc,rc);break;case 1:Nb(bb,fc,vb,Ab,rc);break;case 2:Nb(bb,mb,rc,fc,Bb);break;case 3:Nb(bb,fc,rc,Ab,Bb)}}})(O,xa,ya,Ca,Pa);return Oa}function Gh(O,ea){O=zb.rgb(O);ea=zb.rgb(ea);var ra=O.r,xa=O.g,ya=O.b,Ca=ea.r-ra,Pa=ea.g-xa,Ia=ea.b-ya;return function(Oa){return"#"+
Na(Math.round(ra+Ca*Oa))+Na(Math.round(xa+Pa*Oa))+Na(Math.round(ya+Ia*Oa))}}function jh(O,ea){var ra={},xa={},ya;for(ya in O)ya in ea?ra[ya]=Qg(O[ya],ea[ya]):xa[ya]=O[ya];for(ya in ea)ya in O||(xa[ya]=ea[ya]);return function(Ca){for(ya in ra)xa[ya]=ra[ya](Ca);return xa}}function tg(O,ea){O=+O;ea=+ea;return function(ra){return O*(1-ra)+ea*ra}}function Tj(O,ea){var ra=ji.lastIndex=kh.lastIndex=0,xa,ya,Ca,Pa=-1,Ia=[],Oa=[];O+="";for(ea+="";(xa=ji.exec(O))&&(ya=kh.exec(ea));)(Ca=ya.index)>ra&&(Ca=ea.slice(ra,
Ca),Ia[Pa]?Ia[Pa]+=Ca:Ia[++Pa]=Ca),(xa=xa[0])===(ya=ya[0])?Ia[Pa]?Ia[Pa]+=ya:Ia[++Pa]=ya:(Ia[++Pa]=null,Oa.push({i:Pa,x:tg(xa,ya)})),ra=kh.lastIndex;ra<ea.length&&(Ca=ea.slice(ra),Ia[Pa]?Ia[Pa]+=Ca:Ia[++Pa]=Ca);return 2>Ia.length?Oa[0]?(ea=Oa[0].x,function(Ua){return ea(Ua)+""}):function(){return ea}:(ea=Oa.length,function(Ua){for(var bb=0,mb;bb<ea;++bb)Ia[(mb=Oa[bb]).i]=mb.x(Ua);return Ia.join("")})}function Qg(O,ea){for(var ra=zb.interpolators.length,xa;0<=--ra&&!(xa=zb.interpolators[ra](O,ea)););
return xa}function ki(O,ea){var ra=[],xa=[],ya=O.length,Ca=ea.length,Pa=Math.min(O.length,ea.length),Ia;for(Ia=0;Ia<Pa;++Ia)ra.push(Qg(O[Ia],ea[Ia]));for(;Ia<ya;++Ia)xa[Ia]=O[Ia];for(;Ia<Ca;++Ia)xa[Ia]=ea[Ia];return function(Oa){for(Ia=0;Ia<Pa;++Ia)xa[Ia]=ra[Ia](Oa);return xa}}function Pe(O){return function(ea){return 0>=ea?0:1<=ea?1:O(ea)}}function lh(O){return function(ea){return 1-O(1-ea)}}function Rg(O){return function(ea){return.5*(.5>ea?O(2*ea):2-O(2-2*ea))}}function Sg(O){return O*O}function Fe(O){return O*
O*O}function Ie(O){if(0>=O)return 0;if(1<=O)return 1;var ea=O*O,ra=ea*O;return 4*(.5>O?ra:3*(O-ea)+ra-.75)}function Gg(O){return 1-Math.cos(O*Ye)}function Hh(O){return Math.pow(2,10*(O-1))}function Uj(O){return 1-Math.sqrt(1-O*O)}function kj(O){return O<1/2.75?7.5625*O*O:O<2/2.75?7.5625*(O-=1.5/2.75)*O+.75:O<2.5/2.75?7.5625*(O-=2.25/2.75)*O+.9375:7.5625*(O-=2.625/2.75)*O+.984375}function lj(O,ea){ea-=O;return function(ra){return Math.round(O+ea*ra)}}function mj(O){var ea=[O.a,O.b],ra=[O.c,O.d],xa=
mh(ea),ya=ea[0]*ra[0]+ea[1]*ra[1],Ca=-ya;ra[0]+=Ca*ea[0];ra[1]+=Ca*ea[1];Ca=mh(ra)||0;ea[0]*ra[1]<ra[0]*ea[1]&&(ea[0]*=-1,ea[1]*=-1,xa*=-1,ya*=-1);this.rotate=(xa?Math.atan2(ea[1],ea[0]):Math.atan2(-ra[0],ra[1]))*Qe;this.translate=[O.e,O.f];this.scale=[xa,Ca];this.skew=Ca?Math.atan2(ya,Ca)*Qe:0}function mh(O){var ea=Math.sqrt(O[0]*O[0]+O[1]*O[1]);ea&&(O[0]/=ea,O[1]/=ea);return ea}function qf(O){return O.length?O.pop()+",":""}function Li(O,ea,ra,xa){O[0]!==ea[0]||O[1]!==ea[1]?(ra=ra.push("translate(",
null,",",null,")"),xa.push({i:ra-4,x:tg(O[0],ea[0])},{i:ra-2,x:tg(O[1],ea[1])})):(ea[0]||ea[1])&&ra.push("translate("+ea+")")}function tk(O,ea,ra,xa){O!==ea?(180<O-ea?ea+=360:180<ea-O&&(O+=360),xa.push({i:ra.push(qf(ra)+"rotate(",null,")")-2,x:tg(O,ea)})):ea&&ra.push(qf(ra)+"rotate("+ea+")")}function hf(O,ea,ra,xa){O!==ea?xa.push({i:ra.push(qf(ra)+"skewX(",null,")")-2,x:tg(O,ea)}):ea&&ra.push(qf(ra)+"skewX("+ea+")")}function ig(O,ea,ra,xa){O[0]!==ea[0]||O[1]!==ea[1]?(ra=ra.push(qf(ra)+"scale(",null,
",",null,")"),xa.push({i:ra-4,x:tg(O[0],ea[0])},{i:ra-2,x:tg(O[1],ea[1])})):1===ea[0]&&1===ea[1]||ra.push(qf(ra)+"scale("+ea+")")}function Ef(O,ea){var ra=[],xa=[];O=zb.transform(O);ea=zb.transform(ea);Li(O.translate,ea.translate,ra,xa);tk(O.rotate,ea.rotate,ra,xa);hf(O.skew,ea.skew,ra,xa);ig(O.scale,ea.scale,ra,xa);O=ea=null;return function(ya){for(var Ca=-1,Pa=xa.length,Ia;++Ca<Pa;)ra[(Ia=xa[Ca]).i]=Ia.x(ya);return ra.join("")}}function Ih(O,ea){ea=(ea-=O=+O)||1/ea;return function(ra){return(ra-
O)/ea}}function nh(O,ea){ea=(ea-=O=+O)||1/ea;return function(ra){return Math.max(0,Math.min(1,(ra-O)/ea))}}function jg(O){for(var ea=[],ra=O.parent;null!=ra;)ea.push(O),O=ra,ra=ra.parent;ea.push(O);return ea}function Tf(O){O.fixed|=2}function Jh(O){O.fixed&=-7}function nj(O){O.fixed|=4;O.px=O.x;O.py=O.y}function Mi(O){O.fixed&=-5}function Uf(O,ea,ra){var xa=0,ya=0;O.charge=0;if(!O.leaf)for(var Ca=O.nodes,Pa=Ca.length,Ia=-1,Oa;++Ia<Pa;)Oa=Ca[Ia],null!=Oa&&(Uf(Oa,ea,ra),O.charge+=Oa.charge,xa+=Oa.charge*
Oa.cx,ya+=Oa.charge*Oa.cy);O.point&&(O.leaf||(O.point.x+=Math.random()-.5,O.point.y+=Math.random()-.5),ea*=ra[O.point.index],O.charge+=O.pointCharge=ea,xa+=ea*O.point.x,ya+=ea*O.point.y);O.cx=xa/O.charge;O.cy=ya/O.charge}function jf(O,ea){zb.rebind(O,ea,"sort","children","value");O.nodes=O;O.links=Kh;return O}function li(O,ea){for(var ra=[O];null!=(O=ra.pop());)if(ea(O),(ya=O.children)&&(xa=ya.length))for(var xa,ya;0<=--xa;)ra.push(ya[xa])}function Vf(O,ea){for(var ra=[O],xa=[];null!=(O=ra.pop());)if(xa.push(O),
(Ca=O.children)&&(ya=Ca.length)){O=-1;for(var ya,Ca;++O<ya;)ra.push(Ca[O])}for(;null!=(O=xa.pop());)ea(O)}function oj(O){return O.children}function oh(O){return O.value}function Af(O,ea){return ea.value-O.value}function Kh(O){return zb.merge(O.map(function(ea){return(ea.children||[]).map(function(ra){return{source:ea,target:ra}})}))}function Tg(O){return O.x}function bg(O){return O.y}function Hg(O,ea,ra){O.y0=ea;O.y=ra}function Ug(O){return zb.range(O.length)}function ug(O){var ea=-1;O=O[0].length;
for(var ra=[];++ea<O;)ra[ea]=0;return ra}function Ni(O){for(var ea=1,ra=0,xa=O[0][1],ya,Ca=O.length;ea<Ca;++ea)(ya=O[ea][1])>xa&&(ra=ea,xa=ya);return ra}function Vj(O){return O.reduce(Md,0)}function Md(O,ea){return O+ea[1]}function uk(O,ea){return kg(O,Math.ceil(Math.log(ea.length)/Math.LN2+1))}function kg(O,ea){var ra=-1,xa=+O[0];O=(O[1]-xa)/ea;for(var ya=[];++ra<=ea;)ya[ra]=O*ra+xa;return ya}function Vg(O){return[zb.min(O),zb.max(O)]}function ph(O,ea){return O.value-ea.value}function Lh(O,ea){var ra=
O._pack_next;O._pack_next=ea;ea._pack_prev=O;ea._pack_next=ra;ra._pack_prev=ea}function Mh(O,ea){O._pack_next=ea;ea._pack_prev=O}function Nh(O,ea){var ra=ea.x-O.x,xa=ea.y-O.y;O=O.r+ea.r;return.999*O*O>ra*ra+xa*xa}function lg(O){function ea(fc){xa=Math.min(fc.x-fc.r,xa);ya=Math.max(fc.x+fc.r,ya);Ca=Math.min(fc.y-fc.r,Ca);Pa=Math.max(fc.y+fc.r,Pa)}if((ra=O.children)&&(bb=ra.length)){var ra,xa=Infinity,ya=-Infinity,Ca=Infinity,Pa=-Infinity,Ia,Oa,Ua,bb;ra.forEach(vk);var mb=ra[0];mb.x=-mb.r;mb.y=0;ea(mb);
if(1<bb){var vb=ra[1];vb.x=vb.r;vb.y=0;ea(vb);if(2<bb){var Ab=ra[2];Wf(mb,vb,Ab);ea(Ab);Lh(mb,Ab);mb._pack_prev=Ab;Lh(Ab,vb);vb=mb._pack_next;for(Ia=3;Ia<bb;Ia++){Wf(mb,vb,Ab=ra[Ia]);var Bb=0,Nb=1,Ub=1;for(Oa=vb._pack_next;Oa!==vb;Oa=Oa._pack_next,Nb++)if(Nh(Oa,Ab)){Bb=1;break}if(1==Bb)for(Ua=mb._pack_prev;Ua!==Oa._pack_prev&&!Nh(Ua,Ab);Ua=Ua._pack_prev,Ub++);Bb?(Nb<Ub||Nb==Ub&&vb.r<mb.r?Mh(mb,vb=Oa):Mh(mb=Ua,vb),Ia--):(Lh(mb,Ab),vb=Ab,ea(Ab))}}}mb=(xa+ya)/2;vb=(Ca+Pa)/2;for(Ia=Oa=0;Ia<bb;Ia++)Ab=
ra[Ia],Ab.x-=mb,Ab.y-=vb,Oa=Math.max(Oa,Ab.r+Math.sqrt(Ab.x*Ab.x+Ab.y*Ab.y));O.r=Oa;ra.forEach(wk)}}function vk(O){O._pack_next=O._pack_prev=O}function wk(O){delete O._pack_next;delete O._pack_prev}function Wj(O,ea,ra,xa){var ya=O.children;O.x=ea+=xa*O.x;O.y=ra+=xa*O.y;O.r*=xa;if(ya){O=-1;for(var Ca=ya.length;++O<Ca;)Wj(ya[O],ea,ra,xa)}}function Wf(O,ea,ra){var xa=O.r+ra.r,ya=ea.x-O.x,Ca=ea.y-O.y;if(xa&&(ya||Ca)){var Pa=ea.r+ra.r,Ia=ya*ya+Ca*Ca;Pa*=Pa;xa*=xa;ea=.5+(xa-Pa)/(2*Ia);Pa=Math.sqrt(Math.max(0,
2*Pa*(xa+Ia)-(xa-=Ia)*xa-Pa*Pa))/(2*Ia);ra.x=O.x+ea*ya+Pa*Ca;ra.y=O.y+ea*Ca-Pa*ya}else ra.x=O.x+xa,ra.y=O.y}function Ge(O,ea){return O.parent==ea.parent?1:2}function Wg(O){var ea=O.children;return ea.length?ea[0]:O.t}function Xg(O){var ea=O.children,ra;return(ra=ea.length)?ea[ra-1]:O.t}function Oi(O){return 1+zb.max(O,function(ea){return ea.y})}function cg(O){return O.reduce(function(ea,ra){return ea+ra.x},0)/O.length}function Yg(O){var ea=O.children;return ea&&ea.length?Yg(ea[0]):O}function Oh(O){var ea=
O.children,ra;return ea&&(ra=ea.length)?Oh(ea[ra-1]):O}function vg(O){return{x:O.x,y:O.y,dx:O.dx,dy:O.dy}}function wg(O,ea){var ra=O.x+ea[3],xa=O.y+ea[0],ya=O.dx-ea[1]-ea[3];O=O.dy-ea[0]-ea[2];0>ya&&(ra+=ya/2,ya=0);0>O&&(xa+=O/2,O=0);return{x:ra,y:xa,dx:ya,dy:O}}function Kf(O){var ea=O[0];O=O[O.length-1];return ea<O?[ea,O]:[O,ea]}function Xf(O){return O.rangeExtent?O.rangeExtent():Kf(O.range())}function Xj(O,ea,ra,xa){var ya=ra(O[0],O[1]),Ca=xa(ea[0],ea[1]);return function(Pa){return Ca(ya(Pa))}}
function Pi(O,ea){var ra=0,xa=O.length-1,ya=O[ra],Ca=O[xa];if(Ca<ya){var Pa=ra;ra=xa;xa=Pa;Pa=ya;ya=Ca;Ca=Pa}O[ra]=ea.floor(ya);O[xa]=ea.ceil(Ca);return O}function Qi(O){return O?{floor:function(ea){return Math.floor(ea/O)*O},ceil:function(ea){return Math.ceil(ea/O)*O}}:Ri}function jb(O,ea,ra,xa){var ya=[],Ca=[],Pa=0,Ia=Math.min(O.length,ea.length)-1;O[Ia]<O[0]&&(O=O.slice().reverse(),ea=ea.slice().reverse());for(;++Pa<=Ia;)ya.push(ra(O[Pa-1],O[Pa])),Ca.push(xa(ea[Pa-1],ea[Pa]));return function(Oa){var Ua=
zb.bisect(O,Oa,1,Ia)-1;return Ca[Ua](ya[Ua](Oa))}}function V(O,ea,ra,xa){function ya(){var Oa=2<Math.min(O.length,ea.length)?jb:Xj,Ua=xa?nh:Ih;Pa=Oa(O,ea,Ua,ra);Ia=Oa(ea,O,Ua,Qg);return Ca}function Ca(Oa){return Pa(Oa)}var Pa,Ia;Ca.invert=function(Oa){return Ia(Oa)};Ca.domain=function(Oa){if(!arguments.length)return O;O=Oa.map(Number);return ya()};Ca.range=function(Oa){if(!arguments.length)return ea;ea=Oa;return ya()};Ca.rangeRound=function(Oa){return Ca.range(Oa).interpolate(lj)};Ca.clamp=function(Oa){if(!arguments.length)return xa;
xa=Oa;return ya()};Ca.interpolate=function(Oa){if(!arguments.length)return ra;ra=Oa;return ya()};Ca.ticks=function(Oa){return zb.range.apply(zb,ca(O,Oa))};Ca.tickFormat=function(Oa,Ua){return ua(O,Oa,Ua)};Ca.nice=function(Oa){W(O,Oa);return ya()};Ca.copy=function(){return V(O,ea,ra,xa)};return ya()}function Y(O,ea){return zb.rebind(O,ea,"range","rangeRound","interpolate","clamp")}function W(O,ea){Pi(O,Qi(ca(O,ea)[2]));Pi(O,Qi(ca(O,ea)[2]));return O}function ca(O,ea){null==ea&&(ea=10);O=Kf(O);var ra=
O[1]-O[0],xa=Math.pow(10,Math.floor(Math.log(ra/ea)/Math.LN10));ea=ea/ra*xa;.15>=ea?xa*=10:.35>=ea?xa*=5:.75>=ea&&(xa*=2);O[0]=Math.ceil(O[0]/xa)*xa;O[1]=Math.floor(O[1]/xa)*xa+.5*xa;O[2]=xa;return O}function ua(O,ea,ra){O=ca(O,ea);if(ra){ea=Mg.exec(ra);ea.shift();if("s"===ea[8]){var xa=zb.formatPrefix(Math.max(Wd(O[0]),Wd(O[1])));ea[7]||(ea[7]="."+Fa(xa.scale(O[2])));ea[8]="f";ra=zb.format(ea.join(""));return function(ya){return ra(xa.scale(ya))+xa.symbol}}ea[7]||(ea[7]="."+Qa(ea[8],O));ra=ea.join("")}else ra=
",."+Fa(O[2])+"f";return zb.format(ra)}function Fa(O){return-Math.floor(Math.log(O)/Math.LN10+.01)}function Qa(O,ea){var ra=Fa(ea[2]);return O in Ph?Math.abs(ra-Fa(Math.max(Wd(ea[0]),Wd(ea[1]))))+ +("e"!==O):ra-2*("%"===O)}function Za(O,ea,ra,xa){function ya(Ia){return(ra?Math.log(0>Ia?0:Ia):-Math.log(0<Ia?0:-Ia))/Math.log(ea)}function Ca(Ia){return ra?Math.pow(ea,Ia):-Math.pow(ea,-Ia)}function Pa(Ia){return O(ya(Ia))}Pa.invert=function(Ia){return Ca(O.invert(Ia))};Pa.domain=function(Ia){if(!arguments.length)return xa;
ra=0<=Ia[0];O.domain((xa=Ia.map(Number)).map(ya));return Pa};Pa.base=function(Ia){if(!arguments.length)return ea;ea=+Ia;O.domain(xa.map(ya));return Pa};Pa.nice=function(){var Ia=Pi(xa.map(ya),ra?Math:Lf);O.domain(Ia);xa=Ia.map(Ca);return Pa};Pa.ticks=function(){var Ia=Kf(xa),Oa=[],Ua=Ia[0];Ia=Ia[1];var bb=Math.floor(ya(Ua)),mb=Math.ceil(ya(Ia)),vb=ea%1?2:ea;if(isFinite(mb-bb)){if(ra){for(;bb<mb;bb++)for(var Ab=1;Ab<vb;Ab++)Oa.push(Ca(bb)*Ab);Oa.push(Ca(bb))}else for(Oa.push(Ca(bb));bb++<mb;)for(Ab=
vb-1;0<Ab;Ab--)Oa.push(Ca(bb)*Ab);for(bb=0;Oa[bb]<Ua;bb++);for(mb=Oa.length;Oa[mb-1]>Ia;mb--);Oa=Oa.slice(bb,mb)}return Oa};Pa.tickFormat=function(Ia,Oa){if(!arguments.length)return dg;2>arguments.length?Oa=dg:"function"!==typeof Oa&&(Oa=zb.format(Oa));var Ua=Math.max(1,ea*Ia/Pa.ticks().length);return function(bb){var mb=bb/Ca(Math.round(ya(bb)));mb*ea<ea-.5&&(mb*=ea);return mb<=Ua?Oa(bb):""}};Pa.copy=function(){return Za(O.copy(),ea,ra,xa)};return Y(Pa,O)}function wb(O,ea,ra){function xa(Pa){return O(ya(Pa))}
var ya=Db(ea),Ca=Db(1/ea);xa.invert=function(Pa){return Ca(O.invert(Pa))};xa.domain=function(Pa){if(!arguments.length)return ra;O.domain((ra=Pa.map(Number)).map(ya));return xa};xa.ticks=function(Pa){return zb.range.apply(zb,ca(ra,Pa))};xa.tickFormat=function(Pa,Ia){return ua(ra,Pa,Ia)};xa.nice=function(Pa){return xa.domain(W(ra,Pa))};xa.exponent=function(Pa){if(!arguments.length)return ea;ya=Db(ea=Pa);Ca=Db(1/ea);O.domain(ra.map(ya));return xa};xa.copy=function(){return wb(O.copy(),ea,ra)};return Y(xa,
O)}function Db(O){return function(ea){return 0>ea?-Math.pow(-ea,O):Math.pow(ea,O)}}function Eb(O,ea){function ra(Ia){return Ca[((ya.get(Ia)||("range"===ea.t?ya.set(Ia,O.push(Ia)):NaN))-1)%Ca.length]}function xa(Ia,Oa){return zb.range(O.length).map(function(Ua){return Ia+Oa*Ua})}var ya,Ca,Pa;ra.domain=function(Ia){if(!arguments.length)return O;O=[];ya=new n;for(var Oa=-1,Ua=Ia.length,bb;++Oa<Ua;)ya.has(bb=Ia[Oa])||ya.set(bb,O.push(bb));return ra[ea.t].apply(ra,ea.a)};ra.range=function(Ia){if(!arguments.length)return Ca;
Ca=Ia;Pa=0;ea={t:"range",a:arguments};return ra};ra.rangePoints=function(Ia,Oa){2>arguments.length&&(Oa=0);var Ua=Ia[0],bb=Ia[1];bb=2>O.length?(Ua=(Ua+bb)/2,0):(bb-Ua)/(O.length-1+Oa);Ca=xa(Ua+bb*Oa/2,bb);Pa=0;ea={t:"rangePoints",a:arguments};return ra};ra.rangeRoundPoints=function(Ia,Oa){2>arguments.length&&(Oa=0);var Ua=Ia[0],bb=Ia[1],mb=2>O.length?(Ua=bb=Math.round((Ua+bb)/2),0):(bb-Ua)/(O.length-1+Oa)|0;Ca=xa(Ua+Math.round(mb*Oa/2+(bb-Ua-(O.length-1+Oa)*mb)/2),mb);Pa=0;ea={t:"rangeRoundPoints",
a:arguments};return ra};ra.rangeBands=function(Ia,Oa,Ua){2>arguments.length&&(Oa=0);3>arguments.length&&(Ua=Oa);var bb=Ia[1]<Ia[0],mb=Ia[bb-0],vb=(Ia[1-bb]-mb)/(O.length-Oa+2*Ua);Ca=xa(mb+vb*Ua,vb);bb&&Ca.reverse();Pa=vb*(1-Oa);ea={t:"rangeBands",a:arguments};return ra};ra.rangeRoundBands=function(Ia,Oa,Ua){2>arguments.length&&(Oa=0);3>arguments.length&&(Ua=Oa);var bb=Ia[1]<Ia[0],mb=Ia[bb-0],vb=Ia[1-bb],Ab=Math.floor((vb-mb)/(O.length-Oa+2*Ua));Ca=xa(mb+Math.round((vb-mb-(O.length-Oa)*Ab)/2),Ab);
bb&&Ca.reverse();Pa=Math.round(Ab*(1-Oa));ea={t:"rangeRoundBands",a:arguments};return ra};ra.rangeBand=function(){return Pa};ra.rangeExtent=function(){return Kf(ea.a[0])};ra.copy=function(){return Eb(O,ea)};return ra.domain(O)}function kc(O,ea){function ra(){var Ca=0,Pa=ea.length;for(ya=[];++Ca<Pa;)ya[Ca-1]=zb.quantile(O,Ca/Pa);return xa}function xa(Ca){if(!isNaN(Ca=+Ca))return ea[zb.bisect(ya,Ca)]}var ya;xa.domain=function(Ca){if(!arguments.length)return O;O=Ca.map(l).filter(h).sort(m);return ra()};
xa.range=function(Ca){if(!arguments.length)return ea;ea=Ca;return ra()};xa.quantiles=function(){return ya};xa.invertExtent=function(Ca){Ca=ea.indexOf(Ca);return 0>Ca?[NaN,NaN]:[0<Ca?ya[Ca-1]:O[0],Ca<ya.length?ya[Ca]:O[O.length-1]]};xa.copy=function(){return kc(O,ea)};return ra()}function jc(O,ea,ra){function xa(Ia){return ra[Math.max(0,Math.min(Pa,Math.floor(Ca*(Ia-O))))]}function ya(){Ca=ra.length/(ea-O);Pa=ra.length-1;return xa}var Ca,Pa;xa.domain=function(Ia){if(!arguments.length)return[O,ea];
O=+Ia[0];ea=+Ia[Ia.length-1];return ya()};xa.range=function(Ia){if(!arguments.length)return ra;ra=Ia;return ya()};xa.invertExtent=function(Ia){Ia=ra.indexOf(Ia);Ia=0>Ia?NaN:Ia/Ca+O;return[Ia,Ia+1/Ca]};xa.copy=function(){return jc(O,ea,ra)};return ya()}function $b(O,ea){function ra(xa){if(xa<=xa)return ea[zb.bisect(O,xa)]}ra.domain=function(xa){if(!arguments.length)return O;O=xa;return ra};ra.range=function(xa){if(!arguments.length)return ea;ea=xa;return ra};ra.invertExtent=function(xa){xa=ea.indexOf(xa);
return[O[xa-1],O[xa]]};ra.copy=function(){return $b(O,ea)};return ra}function ic(O){function ea(ra){return+ra}ea.invert=ea;ea.domain=ea.range=function(ra){if(!arguments.length)return O;O=ra.map(ea);return ea};ea.ticks=function(ra){return zb.range.apply(zb,ca(O,ra))};ea.tickFormat=function(ra,xa){return ua(O,ra,xa)};ea.copy=function(){return ic(O)};return ea}function gc(){return 0}function Cb(O){return O.innerRadius}function bc(O){return O.outerRadius}function Ec(O){return O.startAngle}function Yc(O){return O.endAngle}
function fd(O){return O&&O.padAngle}function Fc(O,ea,ra,xa){return 0<(O-ra)*ea-(ea-xa)*O?0:1}function hd(O,ea,ra,xa,ya){var Ca=O[0]-ea[0],Pa=O[1]-ea[1];ya=(ya?xa:-xa)/Math.sqrt(Ca*Ca+Pa*Pa);Pa*=ya;Ca*=-ya;var Ia=O[0]+Pa,Oa=O[1]+Ca,Ua=ea[0]+Pa,bb=ea[1]+Ca;O=(Ia+Ua)/2;ea=(Oa+bb)/2;ya=Ua-Ia;var mb=bb-Oa,vb=ya*ya+mb*mb;xa=ra-xa;bb=Ia*bb-Ua*Oa;var Ab=(0>mb?-1:1)*Math.sqrt(Math.max(0,xa*xa*vb-bb*bb));Ia=(bb*mb-ya*Ab)/vb;Oa=(-bb*ya-mb*Ab)/vb;Ua=(bb*mb+ya*Ab)/vb;ya=(-bb*ya+mb*Ab)/vb;mb=Ia-O;vb=Oa-ea;O=Ua-
O;ea=ya-ea;mb*mb+vb*vb>O*O+ea*ea&&(Ia=Ua,Oa=ya);return[[Ia-Pa,Oa-Ca],[Ia*ra/xa,Oa*ra/xa]]}function dd(O){function ea(Oa){function Ua(){bb.push("M",Ca(O(mb),Ia))}for(var bb=[],mb=[],vb=-1,Ab=Oa.length,Bb,Nb=La(ra),Ub=La(xa);++vb<Ab;)ya.call(this,Bb=Oa[vb],vb)?mb.push([+Nb.call(this,Bb,vb),+Ub.call(this,Bb,vb)]):mb.length&&(Ua(),mb=[]);mb.length&&Ua();return bb.length?bb.join(""):null}var ra=Rf,xa=Fg,ya=td,Ca=sd,Pa=Ca.key,Ia=.7;ea.x=function(Oa){if(!arguments.length)return ra;ra=Oa;return ea};ea.y=
function(Oa){if(!arguments.length)return xa;xa=Oa;return ea};ea.defined=function(Oa){if(!arguments.length)return ya;ya=Oa;return ea};ea.interpolate=function(Oa){if(!arguments.length)return Pa;Pa="function"===typeof Oa?Ca=Oa:(Ca=xk.get(Oa)||sd).key;return ea};ea.tension=function(Oa){if(!arguments.length)return Ia;Ia=Oa;return ea};return ea}function sd(O){return 1<O.length?O.join("L"):O+"Z"}function vd(O){return O.join("L")+"Z"}function od(O){for(var ea=0,ra=O.length,xa=O[0],ya=[xa[0],",",xa[1]];++ea<
ra;)ya.push("V",(xa=O[ea])[1],"H",xa[0]);return ya.join("")}function $d(O){for(var ea=0,ra=O.length,xa=O[0],ya=[xa[0],",",xa[1]];++ea<ra;)ya.push("H",(xa=O[ea])[0],"V",xa[1]);return ya.join("")}function Xd(O,ea){if(1>ea.length||O.length!=ea.length&&O.length!=ea.length+2)return sd(O);var ra=O.length!=ea.length,xa="",ya=O[0],Ca=O[1],Pa=ea[0],Ia=Pa,Oa=1;ra&&(xa+="Q"+(Ca[0]-2*Pa[0]/3)+","+(Ca[1]-2*Pa[1]/3)+","+Ca[0]+","+Ca[1],ya=O[1],Oa=2);if(1<ea.length)for(Ia=ea[1],Ca=O[Oa],Oa++,xa+="C"+(ya[0]+Pa[0])+
","+(ya[1]+Pa[1])+","+(Ca[0]-Ia[0])+","+(Ca[1]-Ia[1])+","+Ca[0]+","+Ca[1],ya=2;ya<ea.length;ya++,Oa++)Ca=O[Oa],Ia=ea[ya],xa+="S"+(Ca[0]-Ia[0])+","+(Ca[1]-Ia[1])+","+Ca[0]+","+Ca[1];ra&&(O=O[Oa],xa+="Q"+(Ca[0]+2*Ia[0]/3)+","+(Ca[1]+2*Ia[1]/3)+","+O[0]+","+O[1]);return xa}function xe(O,ea){var ra=[];ea=(1-ea)/2;for(var xa,ya=O[0],Ca=O[1],Pa=1,Ia=O.length;++Pa<Ia;)xa=ya,ya=Ca,Ca=O[Pa],ra.push([ea*(Ca[0]-xa[0]),ea*(Ca[1]-xa[1])]);return ra}function ye(O){if(3>O.length)return sd(O);var ea=1,ra=O.length,
xa=O[0],ya=xa[0],Ca=xa[1],Pa=[ya,ya,ya,(xa=O[1])[0]],Ia=[Ca,Ca,Ca,xa[1]];ya=[ya,",",Ca,"L",ue(Zg,Pa),",",ue(Zg,Ia)];for(O.push(O[ra-1]);++ea<=ra;)xa=O[ea],Pa.shift(),Pa.push(xa[0]),Ia.shift(),Ia.push(xa[1]),Nd(ya,Pa,Ia);O.pop();ya.push("L",xa);return ya.join("")}function ue(O,ea){return O[0]*ea[0]+O[1]*ea[1]+O[2]*ea[2]+O[3]*ea[3]}function Nd(O,ea,ra){O.push("C",ue(Uk,ea),",",ue(Uk,ra),",",ue(Yf,ea),",",ue(Yf,ra),",",ue(Zg,ea),",",ue(Zg,ra))}function ie(O,ea){return(ea[1]-O[1])/(ea[0]-O[0])}function Le(O){for(var ea,
ra=-1,xa=O.length,ya,Ca;++ra<xa;)ea=O[ra],ya=ea[0],Ca=ea[1]-Ye,ea[0]=ya*Math.cos(Ca),ea[1]=ya*Math.sin(Ca);return O}function se(O){function ea(vb){function Ab(){Bb.push("M",Ia(O(Ub),mb),bb,Ua(O(Nb.reverse()),mb),"Z")}for(var Bb=[],Nb=[],Ub=[],fc=-1,rc=vb.length,vc,zc=La(ra),Kc=La(ya),Ib=ra===xa?function(){return sc}:La(xa),Wb=ya===Ca?function(){return Tc}:La(Ca),sc,Tc;++fc<rc;)Pa.call(this,vc=vb[fc],fc)?(Nb.push([sc=+zc.call(this,vc,fc),Tc=+Kc.call(this,vc,fc)]),Ub.push([+Ib.call(this,vc,fc),+Wb.call(this,
vc,fc)])):Nb.length&&(Ab(),Nb=[],Ub=[]);Nb.length&&Ab();return Bb.length?Bb.join(""):null}var ra=Rf,xa=Rf,ya=0,Ca=Fg,Pa=td,Ia=sd,Oa=Ia.key,Ua=Ia,bb="L",mb=.7;ea.x=function(vb){if(!arguments.length)return xa;ra=xa=vb;return ea};ea.x0=function(vb){if(!arguments.length)return ra;ra=vb;return ea};ea.x1=function(vb){if(!arguments.length)return xa;xa=vb;return ea};ea.y=function(vb){if(!arguments.length)return Ca;ya=Ca=vb;return ea};ea.y0=function(vb){if(!arguments.length)return ya;ya=vb;return ea};ea.y1=
function(vb){if(!arguments.length)return Ca;Ca=vb;return ea};ea.defined=function(vb){if(!arguments.length)return Pa;Pa=vb;return ea};ea.interpolate=function(vb){if(!arguments.length)return Oa;Oa="function"===typeof vb?Ia=vb:(Ia=xk.get(vb)||sd).key;Ua=Ia.reverse||Ia;bb=Ia.closed?"M":"L";return ea};ea.tension=function(vb){if(!arguments.length)return mb;mb=vb;return ea};return ea}function Ne(O){return O.radius}function rf(O){return[O.x,O.y]}function bf(O){return function(){var ea=O.apply(this,arguments),
ra=ea[0];ea=ea[1]-Ye;return[ra*Math.cos(ea),ra*Math.sin(ea)]}}function qh(){return 64}function We(){return"circle"}function uf(O){O=Math.sqrt(O/Yd);return"M0,"+O+"A"+O+","+O+" 0 1,1 0,"+-O+"A"+O+","+O+" 0 1,1 0,"+O+"Z"}function mg(O){return function(){var ea,ra,xa;(ea=this[O])&&(xa=ea[ra=ea.active])&&(xa.timer.c=null,xa.timer.t=NaN,--ea.count?delete ea[ra]:delete this[O],ea.active+=.5,xa.event&&xa.event.interrupt.call(this,this.__data__,xa.index))}}function Qh(O,ea,ra){Cg(O,kf);O.namespace=ea;O.id=
ra;return O}function Ff(O,ea,ra,xa){var ya=O.id,Ca=O.namespace;return aa(O,"function"===typeof ra?function(Pa,Ia,Oa){Pa[Ca][ya].tween.set(ea,xa(ra.call(Pa,Pa.__data__,Ia,Oa)))}:(ra=xa(ra),function(Pa){Pa[Ca][ya].tween.set(ea,ra)}))}function Si(O){null==O&&(O="");return function(){this.textContent=O}}function ve(O){return null==O?"__transition__":"__transition_"+O+"__"}function Je(O,ea,ra,xa,ya){function Ca(Nb){var Ub=Ua.delay;Bb.t=Ub+Ab;if(Ub<=Nb)return Pa(Nb-Ub);Bb.c=Pa}function Pa(Nb){var Ub=Oa.active,
fc=Oa[Ub];fc&&(fc.timer.c=null,fc.timer.t=NaN,--Oa.count,delete Oa[Ub],fc.event&&fc.event.interrupt.call(O,O.__data__,fc.index));for(var rc in Oa)+rc<xa&&(Ub=Oa[rc],Ub.timer.c=null,Ub.timer.t=NaN,--Oa.count,delete Oa[rc]);Bb.c=Ia;za(function(){Bb.c&&Ia(Nb||1)&&(Bb.c=null,Bb.t=NaN);return 1},0,Ab);Oa.active=xa;Ua.event&&Ua.event.start.call(O,O.__data__,ea);vb=[];Ua.tween.forEach(function(vc,zc){(zc=zc.call(O,O.__data__,ea))&&vb.push(zc)});mb=Ua.ease;bb=Ua.duration}function Ia(Nb){Nb/=bb;for(var Ub=
mb(Nb),fc=vb.length;0<fc;)vb[--fc].call(O,Ub);if(1<=Nb)return Ua.event&&Ua.event.end.call(O,O.__data__,ea),--Oa.count?delete Oa[xa]:delete O[ra],1}var Oa=O[ra]||(O[ra]={active:0,count:0}),Ua=Oa[xa],bb,mb,vb;if(!Ua){var Ab=ya.time;var Bb=za(Ca,0,Ab);Ua=Oa[xa]={tween:new n,time:Ab,timer:Bb,delay:ya.delay,duration:ya.duration,ease:ya.ease,index:ea};ya=null;++Oa.count}}function eg(O,ea,ra){O.attr("transform",function(xa){var ya=ea(xa);return"translate("+(isFinite(ya)?ya:ra(xa))+",0)"})}function Mf(O,
ea,ra){O.attr("transform",function(xa){var ya=ea(xa);return"translate(0,"+(isFinite(ya)?ya:ra(xa))+")"})}function xg(O){return O.toISOString()}function yg(O,ea,ra){function xa(Ca){return O(Ca)}function ya(Ca,Pa){var Ia=(Ca[1]-Ca[0])/Pa,Oa=zb.bisect(rh,Ia);return Oa==rh.length?[ea.year,ca(Ca.map(function(Ua){return Ua/31536E6}),Pa)[2]]:Oa?ea[Ia/rh[Oa-1]<rh[Oa]/Ia?Oa-1:Oa]:[Ig,ca(Ca,Pa)[2]]}xa.invert=function(Ca){return vf(O.invert(Ca))};xa.domain=function(Ca){if(!arguments.length)return O.domain().map(vf);
O.domain(Ca);return xa};xa.nice=function(Ca,Pa){function Ia(bb){return!isNaN(bb)&&!Ca.range(bb,vf(+bb+1),Pa).length}var Oa=xa.domain(),Ua=Kf(Oa);if(Ua=null==Ca?ya(Ua,10):"number"===typeof Ca&&ya(Ua,Ca))Ca=Ua[0],Pa=Ua[1];return xa.domain(Pi(Oa,1<Pa?{floor:function(bb){for(;Ia(bb=Ca.floor(bb));)bb=vf(bb-1);return bb},ceil:function(bb){for(;Ia(bb=Ca.ceil(bb));)bb=vf(+bb+1);return bb}}:Ca))};xa.ticks=function(Ca,Pa){var Ia=Kf(xa.domain()),Oa=null==Ca?ya(Ia,10):"number"===typeof Ca?ya(Ia,Ca):!Ca.range&&
[{range:Ca},Pa];Oa&&(Ca=Oa[0],Pa=Oa[1]);return Ca.range(Ia[0],vf(+Ia[1]+1),1>Pa?1:Pa)};xa.tickFormat=function(){return ra};xa.copy=function(){return yg(O.copy(),ea,ra)};return Y(xa,O)}function vf(O){return new Date(O)}function Ti(O){return JSON.parse(O.responseText)}function mi(O){var ea=sf.createRange();ea.selectNode(sf.body);return ea.createContextualFragment(O.responseText)}var zb={version:"3.5.17"},Vk=[].slice,$f=function(O){return Vk.call(O)},sf=document;if(sf)try{$f(sf.documentElement.childNodes)[0].nodeType}catch(O){$f=
function(ea){for(var ra=ea.length,xa=Array(ra);ra--;)xa[ra]=ea[ra];return xa}}Date.now||(Date.now=function(){return+new Date});if(sf)try{sf.createElement("DIV").style.setProperty("opacity",0,"")}catch(O){var pj=this.Element.prototype,Bf=pj.setAttribute,Rh=pj.setAttributeNS,sh=this.CSSStyleDeclaration.prototype,ni=sh.setProperty;pj.setAttribute=function(ea,ra){Bf.call(this,ea,ra+"")};pj.setAttributeNS=function(ea,ra,xa){Rh.call(this,ea,ra,xa+"")};sh.setProperty=function(ea,ra,xa){ni.call(this,ea,ra+
"",xa)}}zb.ascending=m;zb.descending=function(O,ea){return ea<O?-1:ea>O?1:ea>=O?0:NaN};zb.min=function(O,ea){var ra=-1,xa=O.length,ya;if(1===arguments.length){for(;++ra<xa;)if(null!=(ya=O[ra])&&ya>=ya){var Ca=ya;break}for(;++ra<xa;)null!=(ya=O[ra])&&Ca>ya&&(Ca=ya)}else{for(;++ra<xa;)if(null!=(ya=ea.call(O,O[ra],ra))&&ya>=ya){Ca=ya;break}for(;++ra<xa;)null!=(ya=ea.call(O,O[ra],ra))&&Ca>ya&&(Ca=ya)}return Ca};zb.max=function(O,ea){var ra=-1,xa=O.length,ya;if(1===arguments.length){for(;++ra<xa;)if(null!=
(ya=O[ra])&&ya>=ya){var Ca=ya;break}for(;++ra<xa;)null!=(ya=O[ra])&&ya>Ca&&(Ca=ya)}else{for(;++ra<xa;)if(null!=(ya=ea.call(O,O[ra],ra))&&ya>=ya){Ca=ya;break}for(;++ra<xa;)null!=(ya=ea.call(O,O[ra],ra))&&ya>Ca&&(Ca=ya)}return Ca};zb.extent=function(O,ea){var ra=-1,xa=O.length,ya,Ca;if(1===arguments.length){for(;++ra<xa;)if(null!=(ya=O[ra])&&ya>=ya){var Pa=Ca=ya;break}for(;++ra<xa;)null!=(ya=O[ra])&&(Pa>ya&&(Pa=ya),Ca<ya&&(Ca=ya))}else{for(;++ra<xa;)if(null!=(ya=ea.call(O,O[ra],ra))&&ya>=ya){Pa=Ca=
ya;break}for(;++ra<xa;)null!=(ya=ea.call(O,O[ra],ra))&&(Pa>ya&&(Pa=ya),Ca<ya&&(Ca=ya))}return[Pa,Ca]};zb.sum=function(O,ea){var ra=0,xa=O.length,ya,Ca=-1;if(1===arguments.length)for(;++Ca<xa;)isNaN(ya=+O[Ca])||(ra+=ya);else for(;++Ca<xa;)isNaN(ya=+ea.call(O,O[Ca],Ca))||(ra+=ya);return ra};zb.mean=function(O,ea){var ra=0,xa=O.length,ya,Ca=-1,Pa=xa;if(1===arguments.length)for(;++Ca<xa;)isNaN(ya=l(O[Ca]))?--Pa:ra+=ya;else for(;++Ca<xa;)isNaN(ya=l(ea.call(O,O[Ca],Ca)))?--Pa:ra+=ya;if(Pa)return ra/Pa};
zb.quantile=function(O,ea){var ra=(O.length-1)*ea+1;ea=Math.floor(ra);var xa=+O[ea-1];return(ra-=ea)?xa+ra*(O[ea]-xa):xa};zb.median=function(O,ea){var ra=[],xa=O.length,ya,Ca=-1;if(1===arguments.length)for(;++Ca<xa;)isNaN(ya=l(O[Ca]))||ra.push(ya);else for(;++Ca<xa;)isNaN(ya=l(ea.call(O,O[Ca],Ca)))||ra.push(ya);if(ra.length)return zb.quantile(ra.sort(m),.5)};zb.variance=function(O,ea){var ra=O.length,xa=0,ya,Ca=0,Pa=-1,Ia=0;if(1===arguments.length)for(;++Pa<ra;){if(!isNaN(ya=l(O[Pa]))){var Oa=ya-
xa;xa+=Oa/++Ia;Ca+=Oa*(ya-xa)}}else for(;++Pa<ra;)isNaN(ya=l(ea.call(O,O[Pa],Pa)))||(Oa=ya-xa,xa+=Oa/++Ia,Ca+=Oa*(ya-xa));if(1<Ia)return Ca/(Ia-1)};zb.deviation=function(){var O=zb.variance.apply(this,arguments);return O?Math.sqrt(O):O};var Sh=a(m);zb.bisectLeft=Sh.left;zb.bisect=zb.bisectRight=Sh.right;zb.bisector=function(O){return a(1===O.length?function(ea,ra){return m(O(ea),ra)}:O)};zb.shuffle=function(O,ea,ra){3>(xa=arguments.length)&&(ra=O.length,2>xa&&(ea=0));for(var xa=ra-ea,ya,Ca;xa;)Ca=
Math.random()*xa--|0,ya=O[xa+ea],O[xa+ea]=O[Ca+ea],O[Ca+ea]=ya;return O};zb.permute=function(O,ea){for(var ra=ea.length,xa=Array(ra);ra--;)xa[ra]=O[ea[ra]];return xa};zb.pairs=function(O){for(var ea=0,ra=O.length-1,xa=O[0],ya=Array(0>ra?0:ra);ea<ra;)ya[ea]=[xa,xa=O[++ea]];return ya};zb.transpose=function(O){if(!(Ca=O.length))return[];for(var ea=-1,ra=zb.min(O,g),xa=Array(ra);++ea<ra;)for(var ya=-1,Ca,Pa=xa[ea]=Array(Ca);++ya<Ca;)Pa[ya]=O[ya][ea];return xa};zb.zip=function(){return zb.transpose(arguments)};
zb.keys=function(O){var ea=[],ra;for(ra in O)ea.push(ra);return ea};zb.values=function(O){var ea=[],ra;for(ra in O)ea.push(O[ra]);return ea};zb.entries=function(O){var ea=[],ra;for(ra in O)ea.push({key:ra,value:O[ra]});return ea};zb.merge=function(O){var ea=O.length;var ra=-1;for(var xa=0,ya,Ca;++ra<ea;)xa+=O[ra].length;for(ya=Array(xa);0<=--ea;)for(Ca=O[ea],ra=Ca.length;0<=--ra;)ya[--xa]=Ca[ra];return ya};var Wd=Math.abs;zb.range=function(O,ea,ra){3>arguments.length&&(ra=1,2>arguments.length&&(ea=
O,O=0));if(Infinity===(ea-O)/ra)throw Error("infinite range");var xa=[];var ya=Wd(ra);for(var Ca=1;ya*Ca%1;)Ca*=10;ya=Ca;Ca=-1;var Pa;O*=ya;ea*=ya;ra*=ya;if(0>ra)for(;(Pa=O+ra*++Ca)>ea;)xa.push(Pa/ya);else for(;(Pa=O+ra*++Ca)<ea;)xa.push(Pa/ya);return xa};zb.map=function(O,ea){var ra=new n;if(O instanceof n)O.forEach(function(Pa,Ia){ra.set(Pa,Ia)});else if(Array.isArray(O)){var xa=-1,ya=O.length,Ca;if(1===arguments.length)for(;++xa<ya;)ra.set(xa,O[xa]);else for(;++xa<ya;)ra.set(ea.call(O,Ca=O[xa],
xa),Ca)}else for(xa in O)ra.set(xa,O[xa]);return ra};e(n,{has:d,get:function(O){return this._[p(O)]},set:function(O,ea){return this._[p(O)]=ea},remove:f,keys:k,values:function(){var O=[],ea;for(ea in this._)O.push(this._[ea]);return O},entries:function(){var O=[],ea;for(ea in this._)O.push({key:c(ea),value:this._[ea]});return O},size:r,empty:u,forEach:function(O){for(var ea in this._)O.call(this,c(ea),this._[ea])}});zb.nest=function(){function O(Ia,Oa,Ua){if(Ua>=xa.length)return Pa?Pa.call(ra,Oa):
Ca?Oa.sort(Ca):Oa;for(var bb=-1,mb=Oa.length,vb=xa[Ua++],Ab,Bb,Nb=new n,Ub;++bb<mb;)(Ub=Nb.get(Ab=vb(Bb=Oa[bb])))?Ub.push(Bb):Nb.set(Ab,[Bb]);Ia?(Bb=Ia(),Oa=function(fc,rc){Bb.set(fc,O(Ia,rc,Ua))}):(Bb={},Oa=function(fc,rc){Bb[fc]=O(Ia,rc,Ua)});Nb.forEach(Oa);return Bb}function ea(Ia,Oa){if(Oa>=xa.length)return Ia;var Ua=[],bb=ya[Oa++];Ia.forEach(function(mb,vb){Ua.push({key:mb,values:ea(vb,Oa)})});return bb?Ua.sort(function(mb,vb){return bb(mb.key,vb.key)}):Ua}var ra={},xa=[],ya=[],Ca,Pa;ra.map=
function(Ia,Oa){return O(Oa,Ia,0)};ra.entries=function(Ia){return ea(O(zb.map,Ia,0),0)};ra.key=function(Ia){xa.push(Ia);return ra};ra.sortKeys=function(Ia){ya[xa.length-1]=Ia;return ra};ra.sortValues=function(Ia){Ca=Ia;return ra};ra.rollup=function(Ia){Pa=Ia;return ra};return ra};zb.set=function(O){var ea=new v;if(O)for(var ra=0,xa=O.length;ra<xa;++ra)ea.add(O[ra]);return ea};e(v,{has:d,add:function(O){this._[p(O+="")]=!0;return O},remove:f,values:k,size:r,empty:u,forEach:function(O){for(var ea in this._)O.call(this,
c(ea))}});zb.behavior={};zb.rebind=function(O,ea){for(var ra=1,xa=arguments.length,ya;++ra<xa;)O[ya=arguments[ra]]=C(O,ea,ea[ya]);return O};var vh="webkit ms moz Moz o O".split(" ");zb.dispatch=function(){for(var O=new D,ea=-1,ra=arguments.length;++ea<ra;)O[arguments[ea]]=A(O);return O};D.prototype.on=function(O,ea){var ra=O.indexOf("."),xa="";0<=ra&&(xa=O.slice(ra+1),O=O.slice(0,ra));if(O)return 2>arguments.length?this[O].on(xa):this[O].on(xa,ea);if(2===arguments.length){if(null==ea)for(O in this)if(this.hasOwnProperty(O))this[O].on(xa,
null);return this}};zb.event=null;zb.requote=function(O){return O.replace(oi,"\\$&")};var oi=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Cg={}.__proto__?function(O,ea){O.__proto__=ea}:function(O,ea){for(var ra in ea)O[ra]=ea[ra]},nk=function(O,ea){return ea.querySelector(O)},ok=function(O,ea){return ea.querySelectorAll(O)},Hj=function(O,ea){var ra=O.matches||O[z(O,"matchesSelector")];Hj=function(xa,ya){return ra.call(xa,ya)};return Hj(O,ea)};"function"===typeof Sizzle&&(nk=function(O,ea){return Sizzle(O,ea)[0]||
null},ok=Sizzle,Hj=Sizzle.matchesSelector);zb.selection=function(){return zb.select(sf.documentElement)};var Ce=zb.selection.prototype=[];Ce.select=function(O){var ea=[],ra,xa,ya,Ca;O=J(O);for(var Pa=-1,Ia=this.length;++Pa<Ia;){ea.push(ra=[]);ra.parentNode=(ya=this[Pa]).parentNode;for(var Oa=-1,Ua=ya.length;++Oa<Ua;)(Ca=ya[Oa])?(ra.push(xa=O.call(Ca,Ca.__data__,Oa,Pa)),xa&&"__data__"in Ca&&(xa.__data__=Ca.__data__)):ra.push(null)}return I(ea)};Ce.selectAll=function(O){var ea=[],ra,xa;O=L(O);for(var ya=
-1,Ca=this.length;++ya<Ca;)for(var Pa=this[ya],Ia=-1,Oa=Pa.length;++Ia<Oa;)if(xa=Pa[Ia])ea.push(ra=$f(O.call(xa,xa.__data__,Ia,ya))),ra.parentNode=xa;return I(ea)};var yk={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};zb.ns={prefix:yk,qualify:function(O){var ea=O.indexOf(":"),ra=O;0<=ea&&"xmlns"!==(ra=O.slice(0,ea))&&(O=O.slice(ea+1));return yk.hasOwnProperty(ra)?
{space:yk[ra],local:O}:O}};Ce.attr=function(O,ea){if(2>arguments.length){if("string"===typeof O){var ra=this.node();O=zb.ns.qualify(O);return O.local?ra.getAttributeNS(O.space,O.local):ra.getAttribute(O)}for(ea in O)this.each(H(ea,O[ea]));return this}return this.each(H(O,ea))};Ce.classed=function(O,ea){if(2>arguments.length){if("string"===typeof O){var ra=this.node(),xa=(O=(O+"").trim().split(/^|\s+/)).length,ya=-1;if(ea=ra.classList)for(;++ya<xa;){if(!ea.contains(O[ya]))return!1}else for(ea=ra.getAttribute("class");++ya<
xa;)if(!P(O[ya]).test(ea))return!1;return!0}for(ea in O)this.each(M(ea,O[ea]));return this}return this.each(M(O,ea))};Ce.style=function(O,ea,ra){var xa=arguments.length;if(3>xa){if("string"!==typeof O){2>xa&&(ea="");for(ra in O)this.each(T(ra,O[ra],ea));return this}if(2>xa)return xa=this.node(),q(xa).getComputedStyle(xa,null).getPropertyValue(O);ra=""}return this.each(T(O,ea,ra))};Ce.property=function(O,ea){if(2>arguments.length){if("string"===typeof O)return this.node()[O];for(ea in O)this.each(Q(ea,
O[ea]));return this}return this.each(Q(O,ea))};Ce.text=function(O){return arguments.length?this.each("function"===typeof O?function(){var ea=O.apply(this,arguments);this.textContent=null==ea?"":ea}:null==O?function(){this.textContent=""}:function(){this.textContent=O}):this.node().textContent};Ce.html=function(O){return arguments.length?this.each("function"===typeof O?function(){var ea=O.apply(this,arguments);this.innerHTML=null==ea?"":ea}:null==O?function(){this.innerHTML=""}:function(){this.innerHTML=
O}):this.node().innerHTML};Ce.append=function(O){O=U(O);return this.select(function(){return this.appendChild(O.apply(this,arguments))})};Ce.insert=function(O,ea){O=U(O);ea=J(ea);return this.select(function(){return this.insertBefore(O.apply(this,arguments),ea.apply(this,arguments)||null)})};Ce.remove=function(){return this.each(S)};Ce.data=function(O,ea){function ra(bb,mb){var vb,Ab=bb.length,Bb=mb.length,Nb=Math.min(Ab,Bb),Ub=Array(Bb),fc=Array(Bb),rc=Array(Ab),vc,zc;if(ea){Nb=new n;var Kc=Array(Ab),
Ib;for(vb=-1;++vb<Ab;)if(vc=bb[vb])Nb.has(Ib=ea.call(vc,vc.__data__,vb))?rc[vb]=vc:Nb.set(Ib,vc),Kc[vb]=Ib;for(vb=-1;++vb<Bb;)(vc=Nb.get(Ib=ea.call(mb,zc=mb[vb],vb)))?!0!==vc&&(Ub[vb]=vc,vc.__data__=zc):fc[vb]={__data__:zc},Nb.set(Ib,!0);for(vb=-1;++vb<Ab;)vb in Kc&&!0!==Nb.get(Kc[vb])&&(rc[vb]=bb[vb])}else{for(vb=-1;++vb<Nb;)vc=bb[vb],zc=mb[vb],vc?(vc.__data__=zc,Ub[vb]=vc):fc[vb]={__data__:zc};for(;vb<Bb;++vb)fc[vb]={__data__:mb[vb]};for(;vb<Ab;++vb)rc[vb]=bb[vb]}fc.update=Ub;fc.parentNode=Ub.parentNode=
rc.parentNode=bb.parentNode;Ia.push(fc);Oa.push(Ub);Ua.push(rc)}var xa=-1,ya=this.length,Ca,Pa;if(!arguments.length){for(O=Array(ya=(Ca=this[0]).length);++xa<ya;)if(Pa=Ca[xa])O[xa]=Pa.__data__;return O}var Ia=fa([]),Oa=I([]),Ua=I([]);if("function"===typeof O)for(;++xa<ya;)ra(Ca=this[xa],O.call(Ca,Ca.parentNode.__data__,xa));else for(;++xa<ya;)ra(Ca=this[xa],O);Oa.enter=function(){return Ia};Oa.exit=function(){return Ua};return Oa};Ce.datum=function(O){return arguments.length?this.property("__data__",
O):this.property("__data__")};Ce.filter=function(O){var ea=[],ra,xa,ya;"function"!==typeof O&&(O=X(O));for(var Ca=0,Pa=this.length;Ca<Pa;Ca++){ea.push(ra=[]);ra.parentNode=(xa=this[Ca]).parentNode;for(var Ia=0,Oa=xa.length;Ia<Oa;Ia++)(ya=xa[Ia])&&O.call(ya,ya.__data__,Ia,Ca)&&ra.push(ya)}return I(ea)};Ce.order=function(){for(var O=-1,ea=this.length;++O<ea;)for(var ra=this[O],xa=ra.length-1,ya=ra[xa],Ca;0<=--xa;)if(Ca=ra[xa])ya&&ya!==Ca.nextSibling&&ya.parentNode.insertBefore(Ca,ya),ya=Ca;return this};
Ce.sort=function(O){O=Z.apply(this,arguments);for(var ea=-1,ra=this.length;++ea<ra;)this[ea].sort(O);return this.order()};Ce.each=function(O){return aa(this,function(ea,ra,xa){O.call(ea,ea.__data__,ra,xa)})};Ce.call=function(O){var ea=$f(arguments);O.apply(ea[0]=this,ea);return this};Ce.empty=function(){return!this.node()};Ce.node=function(){for(var O=0,ea=this.length;O<ea;O++)for(var ra=this[O],xa=0,ya=ra.length;xa<ya;xa++){var Ca=ra[xa];if(Ca)return Ca}return null};Ce.size=function(){var O=0;aa(this,
function(){++O});return O};var ch=[];zb.selection.enter=fa;zb.selection.enter.prototype=ch;ch.append=Ce.append;ch.empty=Ce.empty;ch.node=Ce.node;ch.call=Ce.call;ch.size=Ce.size;ch.select=function(O){for(var ea=[],ra,xa,ya,Ca,Pa,Ia=-1,Oa=this.length;++Ia<Oa;){ya=(Ca=this[Ia]).update;ea.push(ra=[]);ra.parentNode=Ca.parentNode;for(var Ua=-1,bb=Ca.length;++Ua<bb;)(Pa=Ca[Ua])?(ra.push(ya[Ua]=xa=O.call(Ca.parentNode,Pa.__data__,Ua,Ia)),xa.__data__=Pa.__data__):ra.push(null)}return I(ea)};ch.insert=function(O,
ea){2>arguments.length&&(ea=ha(this));return Ce.insert.call(this,O,ea)};zb.select=function(O){if("string"===typeof O){var ea=[nk(O,sf)];ea.parentNode=sf.documentElement}else ea=[O],ea.parentNode=O&&(O.ownerDocument||O.document||O).documentElement;return I([ea])};zb.selectAll=function(O){"string"===typeof O?(O=$f(ok(O,sf)),O.parentNode=sf.documentElement):(O=$f(O),O.parentNode=null);return I([O])};Ce.on=function(O,ea,ra){var xa=arguments.length;if(3>xa){if("string"!==typeof O){2>xa&&(ea=!1);for(ra in O)this.each(ja(ra,
O[ra],ea));return this}if(2>xa)return(xa=this.node()["__on"+O])&&xa._;ra=!1}return this.each(ja(O,ea,ra))};var dh=zb.map({mouseenter:"mouseover",mouseleave:"mouseout"});sf&&dh.forEach(function(O){"on"+O in sf&&dh.remove(O)});var fg,Ei=0;zb.mouse=function(O){return ka(O,B())};var Zh=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;zb.touch=function(O,ea,ra){3>arguments.length&&(ra=ea,ea=B().changedTouches);if(ea)for(var xa=0,ya=ea.length,Ca;xa<ya;++xa)if((Ca=ea[xa]).identifier===ra)return ka(O,
Ca)};zb.behavior.drag=function(){function O(){this.on("mousedown.drag",ya).on("touchstart.drag",Ca)}function ea(Pa,Ia,Oa,Ua,bb){return function(){var mb=zb.event.target.correspondingElement||zb.event.target,vb=this.parentNode,Ab=ra.of(this,arguments),Bb=0,Nb=Pa(),Ub=".drag"+(null==Nb?"":"-"+Nb),fc=zb.select(Oa(mb)).on(Ua+Ub,function(){var Kc=Ia(vb,Nb);if(Kc){var Ib=Kc[0]-vc[0];var Wb=Kc[1]-vc[1];Bb|=Ib|Wb;vc=Kc;Ab({type:"drag",x:Kc[0]+zc[0],y:Kc[1]+zc[1],dx:Ib,dy:Wb})}}).on(bb+Ub,function(){Ia(vb,
Nb)&&(fc.on(Ua+Ub,null).on(bb+Ub,null),rc(Bb),Ab({type:"dragend"}))}),rc=qa(mb),vc=Ia(vb,Nb);if(xa){var zc=xa.apply(this,arguments);zc=[zc.x-vc[0],zc.y-vc[1]]}else zc=[0,0];Ab({type:"dragstart"})}}var ra=F(O,"drag","dragstart","dragend"),xa=null,ya=ea(y,zb.mouse,q,"mousemove","mouseup"),Ca=ea(oa,zb.touch,x,"touchmove","touchend");O.origin=function(Pa){if(!arguments.length)return xa;xa=Pa;return O};return zb.rebind(O,ra,"on")};zb.touches=function(O,ea){2>arguments.length&&(ea=B().touches);return ea?
$f(ea).map(function(ra){var xa=ka(O,ra);xa.identifier=ra.identifier;return xa}):[]};var Yd=Math.PI,zf=2*Yd,qj=zf-1E-6,Ye=Yd/2,ce=Yd/180,Qe=180/Yd,rj=Math.SQRT2;zb.interpolateZoom=function(O,ea){var ra=O[0],xa=O[1],ya=O[2];O=ea[2];var Ca=ea[0]-ra,Pa=ea[1]-xa,Ia=Ca*Ca+Pa*Pa;if(1E-12>Ia){var Oa=Math.log(O/ya)/rj;O=function(mb){return[ra+mb*Ca,xa+mb*Pa,ya*Math.exp(rj*mb*Oa)]}}else{var Ua=Math.sqrt(Ia);ea=(O*O-ya*ya+4*Ia)/(4*ya*Ua);O=(O*O-ya*ya-4*Ia)/(4*O*Ua);var bb=Math.log(Math.sqrt(ea*ea+1)-ea);Oa=
(Math.log(Math.sqrt(O*O+1)-O)-bb)/rj;O=function(mb){mb*=Oa;var vb=sa(bb),Ab=rj*mb+bb;var Bb=((Ab=Math.exp(2*Ab))-1)/(Ab+1);var Nb=bb;Ab=((Nb=Math.exp(Nb))-1/Nb)/2;Bb=ya/(2*Ua)*(vb*Bb-Ab);return[ra+Bb*Ca,xa+Bb*Pa,ya*vb/sa(rj*mb+bb)]}}O.duration=1E3*Oa;return O};zb.behavior.zoom=function(){function O(Nc){Nc.on("mousedown.zoom",Ua).on(Yj+".zoom",mb).on("dblclick.zoom",vb).on("touchstart.zoom",bb)}function ea(Nc){return[(Nc[0]-Ab.x)/Ab.k,(Nc[1]-Ab.y)/Ab.k]}function ra(Nc){Ab.k=Math.max(rc[0],Math.min(rc[1],
Nc))}function xa(Nc,yd){yd=[yd[0]*Ab.k+Ab.x,yd[1]*Ab.k+Ab.y];Ab.x+=Nc[0]-yd[0];Ab.y+=Nc[1]-yd[1]}function ya(Nc,yd,Rd,ae){Nc.__chart__={x:Ab.x,y:Ab.y,k:Ab.k};ra(Math.pow(2,ae));xa(Nb=yd,Rd);Nc=zb.select(Nc);0<vc&&(Nc=Nc.transition().duration(vc));Nc.call(O.event)}function Ca(){Tc&&Tc.domain(sc.range().map(function(Nc){return(Nc-Ab.x)/Ab.k}).map(sc.invert));Xc&&Xc.domain(Vc.range().map(function(Nc){return(Nc-Ab.y)/Ab.k}).map(Vc.invert))}function Pa(Nc){zc++||Nc({type:"zoomstart"})}function Ia(Nc){Ca();
Nc({type:"zoom",scale:Ab.k,translate:[Ab.x,Ab.y]})}function Oa(Nc){--zc||(Nc({type:"zoomend"}),Nb=null)}function Ua(){var Nc=this,yd=Wb.of(Nc,arguments),Rd=0,ae=zb.select(q(Nc)).on("mousemove.zoom",function(){Rd=1;xa(zb.mouse(Nc),he);Ia(yd)}).on("mouseup.zoom",function(){ae.on("mousemove.zoom",null).on("mouseup.zoom",null);de(Rd);Oa(yd)}),he=ea(zb.mouse(Nc)),de=qa(Nc);wf.call(Nc);Pa(yd)}function bb(){function Nc(){var Oe=zb.touches(he);yf=Ab.k;Oe.forEach(function(He){He.identifier in ne&&(ne[He.identifier]=
ea(He))});return Oe}function yd(){var Oe=zb.event.target;zb.select(Oe).on(hg,Rd).on(bi,ae);ej.push(Oe);Oe=zb.event.changedTouches;for(var He=0,ng=Oe.length;He<ng;++He)ne[Oe[He].identifier]=null;He=Nc();ng=Date.now();1===He.length?(500>ng-Ib&&(Oe=He[0],ya(he,Oe,ne[Oe.identifier],Math.floor(Math.log(Ab.k)/Math.LN2)+1),t()),Ib=ng):1<He.length&&(Oe=He[0],ng=He[1],He=Oe[0]-ng[0],Oe=Oe[1]-ng[1],Pd=He*He+Oe*Oe)}function Rd(){var Oe=zb.touches(he),He;wf.call(he);for(var ng=0,zk=Oe.length;ng<zk;++ng,He=null){var pi=
Oe[ng];if(He=ne[pi.identifier]){if(Ui)break;var qi=pi;var Ui=He}}if(He){var Th=(Th=pi[0]-qi[0])*Th+(Th=pi[1]-qi[1])*Th;Oe=Pd&&Math.sqrt(Th/Pd);qi=[(qi[0]+pi[0])/2,(qi[1]+pi[1])/2];Ui=[(Ui[0]+He[0])/2,(Ui[1]+He[1])/2];ra(Oe*yf)}Ib=null;xa(qi,Ui);Ia(de)}function ae(){if(zb.event.touches.length){for(var Oe=zb.event.changedTouches,He=0,ng=Oe.length;He<ng;++He)delete ne[Oe[He].identifier];for(var zk in ne)return void Nc()}zb.selectAll(ej).on(Ze,null);gh.on("mousedown.zoom",Ua).on("touchstart.zoom",bb);
fj();Oa(de)}var he=this,de=Wb.of(he,arguments),ne={},Pd=0,yf,Ze=".zoom-"+zb.event.changedTouches[0].identifier,hg="touchmove"+Ze,bi="touchend"+Ze,ej=[],gh=zb.select(he),fj=qa(he);yd();Pa(de);gh.on("mousedown.zoom",null).on("touchstart.zoom",yd)}function mb(){var Nc=Wb.of(this,arguments);Kc?clearTimeout(Kc):(wf.call(this),Bb=ea(Nb=Ub||zb.mouse(this)),Pa(Nc));Kc=setTimeout(function(){Kc=null;Oa(Nc)},50);t();ra(Math.pow(2,.002*Zj())*Ab.k);xa(Nb,Bb);Ia(Nc)}function vb(){var Nc=zb.mouse(this),yd=Math.log(Ab.k)/
Math.LN2;ya(this,Nc,ea(Nc),zb.event.shiftKey?Math.ceil(yd)-1:Math.floor(yd)+1)}var Ab={x:0,y:0,k:1},Bb,Nb,Ub,fc=[960,500],rc=Wk,vc=250,zc=0,Kc,Ib,Wb=F(O,"zoomstart","zoom","zoomend"),sc,Tc,Vc,Xc;Yj||(Yj="onwheel"in sf?(Zj=function(){return-zb.event.deltaY*(zb.event.deltaMode?120:1)},"wheel"):"onmousewheel"in sf?(Zj=function(){return zb.event.wheelDelta},"mousewheel"):(Zj=function(){return-zb.event.detail},"MozMousePixelScroll"));O.event=function(Nc){Nc.each(function(){var yd=Wb.of(this,arguments),
Rd=Ab;ri?zb.select(this).transition().each("start.zoom",function(){Ab=this.__chart__||{x:0,y:0,k:1};Pa(yd)}).tween("zoom:zoom",function(){var ae=fc[0],he=fc[1],de=Nb?Nb[0]:ae/2,ne=Nb?Nb[1]:he/2,Pd=zb.interpolateZoom([(de-Ab.x)/Ab.k,(ne-Ab.y)/Ab.k,ae/Ab.k],[(de-Rd.x)/Rd.k,(ne-Rd.y)/Rd.k,ae/Rd.k]);return function(yf){yf=Pd(yf);var Ze=ae/yf[2];this.__chart__=Ab={x:de-yf[0]*Ze,y:ne-yf[1]*Ze,k:Ze};Ia(yd)}}).each("interrupt.zoom",function(){Oa(yd)}).each("end.zoom",function(){Oa(yd)}):(this.__chart__=Ab,
Pa(yd),Ia(yd),Oa(yd))})};O.translate=function(Nc){if(!arguments.length)return[Ab.x,Ab.y];Ab={x:+Nc[0],y:+Nc[1],k:Ab.k};Ca();return O};O.scale=function(Nc){if(!arguments.length)return Ab.k;Ab={x:Ab.x,y:Ab.y,k:null};ra(+Nc);Ca();return O};O.scaleExtent=function(Nc){if(!arguments.length)return rc;rc=null==Nc?Wk:[+Nc[0],+Nc[1]];return O};O.center=function(Nc){if(!arguments.length)return Ub;Ub=Nc&&[+Nc[0],+Nc[1]];return O};O.size=function(Nc){if(!arguments.length)return fc;fc=Nc&&[+Nc[0],+Nc[1]];return O};
O.duration=function(Nc){if(!arguments.length)return vc;vc=+Nc;return O};O.x=function(Nc){if(!arguments.length)return Tc;Tc=Nc;sc=Nc.copy();Ab={x:0,y:0,k:1};return O};O.y=function(Nc){if(!arguments.length)return Xc;Xc=Nc;Vc=Nc.copy();Ab={x:0,y:0,k:1};return O};return zb.rebind(O,Wb,"on")};var Wk=[0,Infinity],Zj,Yj;zb.color=Aa;Aa.prototype.toString=function(){return this.rgb()+""};zb.hsl=Ka;var Vi=Ka.prototype=new Aa;Vi.brighter=function(O){O=Math.pow(.7,arguments.length?O:1);return new Ka(this.h,this.s,
this.l/O)};Vi.darker=function(O){O=Math.pow(.7,arguments.length?O:1);return new Ka(this.h,this.s,O*this.l)};Vi.rgb=function(){return Sa(this.h,this.s,this.l)};zb.hcl=db;var si=db.prototype=new Aa;si.brighter=function(O){return new db(this.h,this.c,Math.min(100,this.l+ti*(arguments.length?O:1)))};si.darker=function(O){return new db(this.h,this.c,Math.max(0,this.l-ti*(arguments.length?O:1)))};si.rgb=function(){return eb(this.h,this.c,this.l).rgb()};zb.lab=lb;var ti=18,Ij=.95047,Bd=1,Jj=1.08883,Cf=lb.prototype=
new Aa;Cf.brighter=function(O){return new lb(Math.min(100,this.l+ti*(arguments.length?O:1)),this.a,this.b)};Cf.darker=function(O){return new lb(Math.max(0,this.l-ti*(arguments.length?O:1)),this.a,this.b)};Cf.rgb=function(){return ab(this.l,this.a,this.b)};zb.rgb=Ba;var Jg=Ba.prototype=new Aa;Jg.brighter=function(O){O=Math.pow(.7,arguments.length?O:1);var ea=this.r,ra=this.g,xa=this.b;if(!ea&&!ra&&!xa)return new Ba(30,30,30);ea&&30>ea&&(ea=30);ra&&30>ra&&(ra=30);xa&&30>xa&&(xa=30);return new Ba(Math.min(255,
ea/O),Math.min(255,ra/O),Math.min(255,xa/O))};Jg.darker=function(O){O=Math.pow(.7,arguments.length?O:1);return new Ba(O*this.r,O*this.g,O*this.b)};Jg.hsl=function(){return Va(this.r,this.g,this.b)};Jg.toString=function(){return"#"+Na(this.r)+Na(this.g)+Na(this.b)};var cj=zb.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,
chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,
deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,
lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,
mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,
saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});cj.forEach(function(O,ea){cj.set(O,new Ba(ea>>16,ea>>8&255,ea&255))});zb.functor=
La;zb.xhr=gb(x);zb.dsv=function(O,ea){function ra(Ua,bb,mb){3>arguments.length&&(mb=bb,bb=null);var vb=ob(Ua,ea,null==bb?xa:ya(bb),mb);vb.row=function(Ab){return arguments.length?vb.response(null==(bb=Ab)?xa:ya(Ab)):bb};return vb}function xa(Ua){return ra.parse(Ua.responseText)}function ya(Ua){return function(bb){return ra.parse(bb.responseText,Ua)}}function Ca(Ua){return Ua.map(Pa).join(O)}function Pa(Ua){return Ia.test(Ua)?'"'+Ua.replace(/"/g,'""')+'"':Ua}var Ia=new RegExp('["'+O+"\n]"),Oa=O.charCodeAt(0);
ra.parse=function(Ua,bb){var mb;return ra.parseRows(Ua,function(vb,Ab){if(mb)return mb(vb,Ab-1);var Bb=new Function("d","return {"+vb.map(function(Nb,Ub){return JSON.stringify(Nb)+": d["+Ub+"]"}).join(",")+"}");mb=bb?function(Nb,Ub){return bb(Bb(Nb),Ub)}:Bb})};ra.parseRows=function(Ua,bb){function mb(){if(Ub>=Nb)return Ab;if(vc)return vc=!1,vb;var Kc=Ub;if(34===Ua.charCodeAt(Kc)){for(var Ib=Kc;Ib++<Nb;)if(34===Ua.charCodeAt(Ib)){if(34!==Ua.charCodeAt(Ib+1))break;++Ib}Ub=Ib+2;var Wb=Ua.charCodeAt(Ib+
1);13===Wb?(vc=!0,10===Ua.charCodeAt(Ib+2)&&++Ub):10===Wb&&(vc=!0);return Ua.slice(Kc+1,Ib).replace(/""/g,'"')}for(;Ub<Nb;){Wb=Ua.charCodeAt(Ub++);Ib=1;if(10===Wb)vc=!0;else if(13===Wb)vc=!0,10===Ua.charCodeAt(Ub)&&(++Ub,++Ib);else if(Wb!==Oa)continue;return Ua.slice(Kc,Ub-Ib)}return Ua.slice(Kc)}for(var vb={},Ab={},Bb=[],Nb=Ua.length,Ub=0,fc=0,rc,vc;(rc=mb())!==Ab;){for(var zc=[];rc!==vb&&rc!==Ab;)zc.push(rc),rc=mb();bb&&null==(zc=bb(zc,fc++))||Bb.push(zc)}return Bb};ra.format=function(Ua){if(Array.isArray(Ua[0]))return ra.formatRows(Ua);
var bb=new v,mb=[];Ua.forEach(function(vb){for(var Ab in vb)bb.has(Ab)||mb.push(bb.add(Ab))});return[mb.map(Pa).join(O)].concat(Ua.map(function(vb){return mb.map(function(Ab){return Pa(vb[Ab])}).join(O)})).join("\n")};ra.formatRows=function(Ua){return Ua.map(Ca).join("\n")};return ra};zb.csv=zb.dsv(",","text/csv");zb.tsv=zb.dsv("\t","text/tab-separated-values");var Fi,dj,If,Ke,$h=this[z(this,"requestAnimationFrame")]||function(O){setTimeout(O,17)};zb.timer=function(){za.apply(this,arguments)};zb.timer.flush=
function(){Ja();Ta()};zb.round=function(O,ea){return ea?Math.round(O*(ea=Math.pow(10,ea)))/ea:Math.round(O)};var sj="y z a f p n \u00b5 m  k M G T P E Z Y".split(" ").map(function(O,ea){var ra=Math.pow(10,3*Wd(8-ea));return{scale:8<ea?function(xa){return xa/ra}:function(xa){return xa*ra},symbol:O}});zb.formatPrefix=function(O,ea){var ra=0;if(O=+O)0>O&&(O*=-1),ea&&(O=zb.round(O,Xa(O,ea))),ra=1+Math.floor(1E-12+Math.log(O)/Math.LN10),ra=Math.max(-24,Math.min(24,3*Math.floor((ra-1)/3)));return sj[8+
ra/3]};var Mg=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,pk=zb.map({b:function(O){return O.toString(2)},c:function(O){return String.fromCharCode(O)},o:function(O){return O.toString(8)},x:function(O){return O.toString(16)},X:function(O){return O.toString(16).toUpperCase()},g:function(O,ea){return O.toPrecision(ea)},e:function(O,ea){return O.toExponential(ea)},f:function(O,ea){return O.toFixed(ea)},r:function(O,ea){return(O=zb.round(O,Xa(O,ea))).toFixed(Math.max(0,Math.min(20,
Xa(O*(1+1E-15),ea))))}}),Cd=zb.time={},ff=Date;Mb.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},
getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){lf.setUTCDate.apply(this._,arguments)},setDay:function(){lf.setUTCDay.apply(this._,arguments)},setFullYear:function(){lf.setUTCFullYear.apply(this._,arguments)},setHours:function(){lf.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){lf.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){lf.setUTCMinutes.apply(this._,arguments)},setMonth:function(){lf.setUTCMonth.apply(this._,
arguments)},setSeconds:function(){lf.setUTCSeconds.apply(this._,arguments)},setTime:function(){lf.setTime.apply(this._,arguments)}};var lf=Date.prototype;Cd.year=Fb(function(O){O=Cd.day(O);O.setMonth(0,1);return O},function(O,ea){O.setFullYear(O.getFullYear()+ea)},function(O){return O.getFullYear()});Cd.years=Cd.year.range;Cd.years.utc=Cd.year.utc.range;Cd.day=Fb(function(O){var ea=new ff(2E3,0);ea.setFullYear(O.getFullYear(),O.getMonth(),O.getDate());return ea},function(O,ea){O.setDate(O.getDate()+
ea)},function(O){return O.getDate()-1});Cd.days=Cd.day.range;Cd.days.utc=Cd.day.utc.range;Cd.dayOfYear=function(O){var ea=Cd.year(O);return Math.floor((O-ea-6E4*(O.getTimezoneOffset()-ea.getTimezoneOffset()))/864E5)};"sunday monday tuesday wednesday thursday friday saturday".split(" ").forEach(function(O,ea){ea=7-ea;var ra=Cd[O]=Fb(function(xa){(xa=Cd.day(xa)).setDate(xa.getDate()-(xa.getDay()+ea)%7);return xa},function(xa,ya){xa.setDate(xa.getDate()+7*Math.floor(ya))},function(xa){var ya=Cd.year(xa).getDay();
return Math.floor((Cd.dayOfYear(xa)+(ya+ea)%7)/7)-(ya!==ea)});Cd[O+"s"]=ra.range;Cd[O+"s"].utc=ra.utc.range;Cd[O+"OfYear"]=function(xa){var ya=Cd.year(xa).getDay();return Math.floor((Cd.dayOfYear(xa)+(ya+ea)%7)/7)}});Cd.week=Cd.sunday;Cd.weeks=Cd.sunday.range;Cd.weeks.utc=Cd.sunday.utc.range;Cd.weekOfYear=Cd.sundayOfYear;var Gi={"-":"",_:" ",0:"0"},xd=/^\s*\d+/,Zd=/^%/;zb.locale=function(O){return{numberFormat:kb(O),timeFormat:Vb(O)}};var tj=zb.locale({decimal:".",thousands:",",grouping:[3],currency:["$",
""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});zb.format=tj.numberFormat;zb.geo={};xb.prototype={s:0,t:0,add:function(O){Jb(O,this.t,th);Jb(th.s,this.s,this);this.s?
this.t+=th.t:this.s=th.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var th=new xb;zb.geo.stream=function(O,ea){if(O&&Wi.hasOwnProperty(O.type))Wi[O.type](O,ea);else Xb(O,ea)};var Wi={Feature:function(O,ea){Xb(O.geometry,ea)},FeatureCollection:function(O,ea){O=O.features;for(var ra=-1,xa=O.length;++ra<xa;)Xb(O[ra].geometry,ea)}},Pf={Sphere:function(O,ea){ea.sphere()},Point:function(O,ea){O=O.coordinates;ea.point(O[0],O[1],O[2])},MultiPoint:function(O,ea){for(var ra=O.coordinates,
xa=-1,ya=ra.length;++xa<ya;)O=ra[xa],ea.point(O[0],O[1],O[2])},LineString:function(O,ea){nc(O.coordinates,ea,0)},MultiLineString:function(O,ea){O=O.coordinates;for(var ra=-1,xa=O.length;++ra<xa;)nc(O[ra],ea,0)},Polygon:function(O,ea){Qc(O.coordinates,ea)},MultiPolygon:function(O,ea){O=O.coordinates;for(var ra=-1,xa=O.length;++ra<xa;)Qc(O[ra],ea)},GeometryCollection:function(O,ea){O=O.geometries;for(var ra=-1,xa=O.length;++ra<xa;)Xb(O[ra],ea)}};zb.geo.area=function(O){og=0;zb.geo.stream(O,Jf);return og};
var og,ai=new xb,Jf={sphere:function(){og+=4*Yd},point:y,lineStart:y,lineEnd:y,polygonStart:function(){ai.reset();Jf.lineStart=$c},polygonEnd:function(){var O=2*ai;og+=0>O?4*Yd+O:O;Jf.lineStart=Jf.lineEnd=Jf.point=y}};zb.geo.bounds=function(){function O(Ib,Wb){vc.push(zc=[bb=Ib,vb=Ib]);Wb<mb&&(mb=Wb);Wb>Ab&&(Ab=Wb)}function ea(Ib,Wb){var sc=Uc([Ib*ce,Wb*ce]);if(fc){var Tc=Ac(fc,sc);Tc=Ac([Tc[1],-Tc[0],0],Tc);Dc(Tc);Tc=ad(Tc);var Vc=Ib-Bb,Xc=0<Vc?1:-1,Nc=Tc[0]*Qe*Xc;Vc=180<Wd(Vc);Vc^(Xc*Bb<Nc&&Nc<
Xc*Ib)?(Wb=Tc[1]*Qe,Wb>Ab&&(Ab=Wb)):(Nc=(Nc+360)%360-180,Vc^(Xc*Bb<Nc&&Nc<Xc*Ib))?(Wb=-Tc[1]*Qe,Wb<mb&&(mb=Wb)):(Wb<mb&&(mb=Wb),Wb>Ab&&(Ab=Wb));Vc?Ib<Bb?Ia(bb,Ib)>Ia(bb,vb)&&(vb=Ib):Ia(Ib,vb)>Ia(bb,vb)&&(bb=Ib):vb>=bb?(Ib<bb&&(bb=Ib),Ib>vb&&(vb=Ib)):Ib>Bb?Ia(bb,Ib)>Ia(bb,vb)&&(vb=Ib):Ia(Ib,vb)>Ia(bb,vb)&&(bb=Ib)}else O(Ib,Wb);fc=sc;Bb=Ib}function ra(){Kc.point=ea}function xa(){zc[0]=bb;zc[1]=vb;Kc.point=O;fc=null}function ya(Ib,Wb){if(fc){var sc=Ib-Bb;rc+=180<Wd(sc)?sc+(0<sc?360:-360):sc}else Nb=
Ib,Ub=Wb;Jf.point(Ib,Wb);ea(Ib,Wb)}function Ca(){Jf.lineStart()}function Pa(){ya(Nb,Ub);Jf.lineEnd();1E-6<Wd(rc)&&(bb=-(vb=180));zc[0]=bb;zc[1]=vb;fc=null}function Ia(Ib,Wb){return 0>(Wb-=Ib)?Wb+360:Wb}function Oa(Ib,Wb){return Ib[0]-Wb[0]}function Ua(Ib,Wb){return Wb[0]<=Wb[1]?Wb[0]<=Ib&&Ib<=Wb[1]:Ib<Wb[0]||Wb[1]<Ib}var bb,mb,vb,Ab,Bb,Nb,Ub,fc,rc,vc,zc,Kc={point:O,lineStart:ra,lineEnd:xa,polygonStart:function(){Kc.point=ya;Kc.lineStart=Ca;Kc.lineEnd=Pa;rc=0;Jf.polygonStart()},polygonEnd:function(){Jf.polygonEnd();
Kc.point=O;Kc.lineStart=ra;Kc.lineEnd=xa;0>ai?(bb=-(vb=180),mb=-(Ab=90)):1E-6<rc?Ab=90:-1E-6>rc&&(mb=-90);zc[0]=bb;zc[1]=vb}};return function(Ib){Ab=vb=-(bb=mb=Infinity);vc=[];zb.geo.stream(Ib,Kc);if(Ib=vc.length){vc.sort(Oa);for(var Wb=1,sc=vc[0],Tc,Vc=[sc];Wb<Ib;++Wb)Tc=vc[Wb],Ua(Tc[0],sc)||Ua(Tc[1],sc)?(Ia(sc[0],Tc[1])>Ia(sc[0],sc[1])&&(sc[1]=Tc[1]),Ia(Tc[0],sc[1])>Ia(sc[0],sc[1])&&(sc[0]=Tc[0])):Vc.push(sc=Tc);var Xc=-Infinity,Nc;Ib=Vc.length-1;Wb=0;for(sc=Vc[Ib];Wb<=Ib;sc=Tc,++Wb)Tc=Vc[Wb],(Nc=
Ia(sc[1],Tc[0]))>Xc&&(Xc=Nc,bb=Tc[0],vb=sc[1])}vc=zc=null;return Infinity===bb||Infinity===mb?[[NaN,NaN],[NaN,NaN]]:[[bb,mb],[vb,Ab]]}}();zb.geo.centroid=function(O){Ee=wh=eh=fh=Dg=Qf=Ng=sg=xh=yh=Eg=0;zb.geo.stream(O,gg);O=xh;var ea=yh,ra=Eg,xa=O*O+ea*ea+ra*ra;return 1E-12>xa&&(O=Qf,ea=Ng,ra=sg,1E-6>wh&&(O=eh,ea=fh,ra=Dg),xa=O*O+ea*ea+ra*ra,1E-12>xa)?[NaN,NaN]:[Math.atan2(ea,O)*Qe,ia(ra/Math.sqrt(xa))*Qe]};var Ee,wh,eh,fh,Dg,Qf,Ng,sg,xh,yh,Eg,gg={sphere:y,point:Bc,lineStart:jd,lineEnd:ld,polygonStart:function(){gg.lineStart=
ke},polygonEnd:function(){gg.lineStart=jd}},Kj=te(td,function(O){var ea=NaN,ra=NaN,xa=NaN,ya;return{lineStart:function(){O.lineStart();ya=1},point:function(Ca,Pa){var Ia=0<Ca?Yd:-Yd,Oa=Wd(Ca-ea);if(1E-6>Wd(Oa-Yd))O.point(ea,ra=0<(ra+Pa)/2?Ye:-Ye),O.point(xa,ra),O.lineEnd(),O.lineStart(),O.point(Ia,ra),O.point(Ca,ra),ya=0;else if(xa!==Ia&&Oa>=Yd){1E-6>Wd(ea-xa)&&(ea-=1E-6*xa);1E-6>Wd(Ca-Ia)&&(Ca-=1E-6*Ia);Oa=ea;var Ua=ra,bb=Ca,mb,vb,Ab=Math.sin(Oa-bb);ra=1E-6<Wd(Ab)?Math.atan((Math.sin(Ua)*(vb=Math.cos(Pa))*
Math.sin(bb)-Math.sin(Pa)*(mb=Math.cos(Ua))*Math.sin(Oa))/(mb*vb*Ab)):(Ua+Pa)/2;O.point(xa,ra);O.lineEnd();O.lineStart();O.point(Ia,ra);ya=0}O.point(ea=Ca,ra=Pa);xa=Ia},lineEnd:function(){O.lineEnd();ea=ra=NaN},clean:function(){return 2-ya}}},function(O,ea,ra,xa){null==O?(ra*=Ye,xa.point(-Yd,ra),xa.point(0,ra),xa.point(Yd,ra),xa.point(Yd,0),xa.point(Yd,-ra),xa.point(0,-ra),xa.point(-Yd,-ra),xa.point(-Yd,0),xa.point(-Yd,ra)):1E-6<Wd(O[0]-ea[0])?(O=O[0]<ea[0]?Yd:-Yd,ra=ra*O/2,xa.point(-O,ra),xa.point(0,
ra),xa.point(O,ra)):xa.point(ea[0],ea[1])},[-Yd,-Yd/2]);zb.geo.clipExtent=function(){var O,ea,ra,xa,ya,Ca,Pa={stream:function(Ia){ya&&(ya.valid=!1);ya=Ca(Ia);ya.valid=!0;return ya},extent:function(Ia){if(!arguments.length)return[[O,ea],[ra,xa]];Ca=re(O=+Ia[0][0],ea=+Ia[0][1],ra=+Ia[1][0],xa=+Ia[1][1]);ya&&(ya.valid=!1,ya=null);return Pa}};return Pa.extent([[0,0],[960,500]])};(zb.geo.conicEqualArea=function(){return Te(pf)}).raw=pf;zb.geo.albers=function(){return zb.geo.conicEqualArea().rotate([96,
0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};zb.geo.albersUsa=function(){function O(Ua){var bb=Ua[0];Ua=Ua[1];ya=null;(Pa(bb,Ua),ya)||(Ia(bb,Ua),ya)||Oa(bb,Ua);return ya}var ea=zb.geo.albers(),ra=zb.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),xa=zb.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),ya,Ca={point:function(Ua,bb){ya=[Ua,bb]}},Pa,Ia,Oa;O.invert=function(Ua){var bb=ea.scale(),mb=ea.translate(),vb=(Ua[0]-mb[0])/bb;bb=(Ua[1]-
mb[1])/bb;return(.12<=bb&&.234>bb&&-.425<=vb&&-.214>vb?ra:.166<=bb&&.234>bb&&-.214<=vb&&-.115>vb?xa:ea).invert(Ua)};O.stream=function(Ua){var bb=ea.stream(Ua),mb=ra.stream(Ua),vb=xa.stream(Ua);return{point:function(Ab,Bb){bb.point(Ab,Bb);mb.point(Ab,Bb);vb.point(Ab,Bb)},sphere:function(){bb.sphere();mb.sphere();vb.sphere()},lineStart:function(){bb.lineStart();mb.lineStart();vb.lineStart()},lineEnd:function(){bb.lineEnd();mb.lineEnd();vb.lineEnd()},polygonStart:function(){bb.polygonStart();mb.polygonStart();
vb.polygonStart()},polygonEnd:function(){bb.polygonEnd();mb.polygonEnd();vb.polygonEnd()}}};O.precision=function(Ua){if(!arguments.length)return ea.precision();ea.precision(Ua);ra.precision(Ua);xa.precision(Ua);return O};O.scale=function(Ua){if(!arguments.length)return ea.scale();ea.scale(Ua);ra.scale(.35*Ua);xa.scale(Ua);return O.translate(ea.translate())};O.translate=function(Ua){if(!arguments.length)return ea.translate();var bb=ea.scale(),mb=+Ua[0],vb=+Ua[1];Pa=ea.translate(Ua).clipExtent([[mb-
.455*bb,vb-.238*bb],[mb+.455*bb,vb+.238*bb]]).stream(Ca).point;Ia=ra.translate([mb-.307*bb,vb+.201*bb]).clipExtent([[mb-.425*bb+1E-6,vb+.12*bb+1E-6],[mb-.214*bb-1E-6,vb+.234*bb-1E-6]]).stream(Ca).point;Oa=xa.translate([mb-.205*bb,vb+.212*bb]).clipExtent([[mb-.214*bb+1E-6,vb+.166*bb+1E-6],[mb-.115*bb-1E-6,vb+.234*bb-1E-6]]).stream(Ca).point;return O};return O.scale(1070)};var $g,gj,Og={point:y,lineStart:y,lineEnd:y,polygonStart:function(){gj=0;Og.lineStart=af},polygonEnd:function(){Og.lineStart=Og.lineEnd=
Og.point=y;$g+=Wd(gj/2)}},ui,Xi,Yi,Uh,Ak={point:function(O,ea){O<ui&&(ui=O);O>Yi&&(Yi=O);ea<Xi&&(Xi=ea);ea>Uh&&(Uh=ea)},lineStart:y,lineEnd:y,polygonStart:y,polygonEnd:y},ag={point:Rb,lineStart:Pc,lineEnd:uc,polygonStart:function(){ag.lineStart=gd},polygonEnd:function(){ag.point=Rb;ag.lineStart=Pc;ag.lineEnd=uc}};zb.geo.path=function(){function O(Oa){Oa&&("function"===typeof ra&&Pa.pointRadius(+ra.apply(this,arguments)),Ia&&Ia.valid||(Ia=Ca(Pa)),zb.geo.stream(Oa,Ia));return Pa.result()}function ea(){Ia=
null;return O}var ra=4.5,xa,ya,Ca,Pa,Ia;O.area=function(Oa){$g=0;zb.geo.stream(Oa,Ca(Og));return $g};O.centroid=function(Oa){eh=fh=Dg=Qf=Ng=sg=xh=yh=Eg=0;zb.geo.stream(Oa,Ca(ag));return Eg?[xh/Eg,yh/Eg]:sg?[Qf/sg,Ng/sg]:Dg?[eh/Dg,fh/Dg]:[NaN,NaN]};O.bounds=function(Oa){Yi=Uh=-(ui=Xi=Infinity);zb.geo.stream(Oa,Ca(Ak));return[[ui,Xi],[Yi,Uh]]};O.projection=function(Oa){if(!arguments.length)return xa;Ca=(xa=Oa)?Oa.stream||Fd(Oa):x;return ea()};O.context=function(Oa){if(!arguments.length)return ya;Pa=
null==(ya=Oa)?new gf:new Jd(Oa);"function"!==typeof ra&&Pa.pointRadius(ra);return ea()};O.pointRadius=function(Oa){if(!arguments.length)return ra;ra="function"===typeof Oa?Oa:(Pa.pointRadius(+Oa),+Oa);return O};return O.projection(zb.geo.albersUsa()).context(null)};zb.geo.transform=function(O){return{stream:function(ea){ea=new Ed(ea);for(var ra in O)ea[ra]=O[ra];return ea}}};Ed.prototype={point:function(O,ea){this.stream.point(O,ea)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},
lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};zb.geo.projection=ge;zb.geo.projectionMutator=Ob;(zb.geo.equirectangular=function(){return ge(Cc)}).raw=Cc.invert=Cc;zb.geo.rotation=function(O){function ea(ra){ra=O(ra[0]*ce,ra[1]*ce);return ra[0]*=Qe,ra[1]*=Qe,ra}O=Ic(O[0]%360*ce,O[1]*ce,2<O.length?O[2]*ce:0);ea.invert=function(ra){ra=O.invert(ra[0]*ce,ra[1]*ce);return ra[0]*=Qe,ra[1]*=Qe,ra};return ea};
Sc.invert=Cc;zb.geo.circle=function(){function O(){var Ca="function"===typeof ea?ea.apply(this,arguments):ea,Pa=Ic(-Ca[0]*ce,-Ca[1]*ce,0).invert,Ia=[];ya(null,null,1,{point:function(Oa,Ua){Ia.push(Oa=Pa(Oa,Ua));Oa[0]*=Qe;Oa[1]*=Qe}});return{type:"Polygon",coordinates:[Ia]}}var ea=[0,0],ra,xa=6,ya;O.origin=function(Ca){if(!arguments.length)return ea;ea=Ca;return O};O.angle=function(Ca){if(!arguments.length)return ra;ya=lc((ra=+Ca)*ce,xa*ce);return O};O.precision=function(Ca){if(!arguments.length)return xa;
ya=lc(ra*ce,(xa=+Ca)*ce);return O};return O.angle(90)};zb.geo.distance=function(O,ea){var ra=(ea[0]-O[0])*ce,xa=O[1]*ce,ya=ea[1]*ce;ea=Math.cos(ra);O=Math.sin(xa);xa=Math.cos(xa);var Ca=Math.sin(ya);ya=Math.cos(ya);var Pa;return Math.atan2(Math.sqrt((Pa=ya*Math.sin(ra))*Pa+(Pa=xa*Ca-O*ya*ea)*Pa),O*Ca+xa*ya*ea)};zb.geo.graticule=function(){function O(){return{type:"MultiLineString",coordinates:ea()}}function ea(){return zb.range(Math.ceil(Ca/vb)*vb,ya,vb).map(Ub).concat(zb.range(Math.ceil(Ua/Ab)*Ab,
Oa,Ab).map(fc)).concat(zb.range(Math.ceil(xa/bb)*bb,ra,bb).filter(function(vc){return 1E-6<Wd(vc%vb)}).map(Bb)).concat(zb.range(Math.ceil(Ia/mb)*mb,Pa,mb).filter(function(vc){return 1E-6<Wd(vc%Ab)}).map(Nb))}var ra,xa,ya,Ca,Pa,Ia,Oa,Ua,bb=10,mb=bb,vb=90,Ab=360,Bb,Nb,Ub,fc,rc=2.5;O.lines=function(){return ea().map(function(vc){return{type:"LineString",coordinates:vc}})};O.outline=function(){return{type:"Polygon",coordinates:[Ub(Ca).concat(fc(Oa).slice(1),Ub(ya).reverse().slice(1),fc(Ua).reverse().slice(1))]}};
O.extent=function(vc){return arguments.length?O.majorExtent(vc).minorExtent(vc):O.minorExtent()};O.majorExtent=function(vc){if(!arguments.length)return[[Ca,Ua],[ya,Oa]];Ca=+vc[0][0];ya=+vc[1][0];Ua=+vc[0][1];Oa=+vc[1][1];Ca>ya&&(vc=Ca,Ca=ya,ya=vc);Ua>Oa&&(vc=Ua,Ua=Oa,Oa=vc);return O.precision(rc)};O.minorExtent=function(vc){if(!arguments.length)return[[xa,Ia],[ra,Pa]];xa=+vc[0][0];ra=+vc[1][0];Ia=+vc[0][1];Pa=+vc[1][1];xa>ra&&(vc=xa,xa=ra,ra=vc);Ia>Pa&&(vc=Ia,Ia=Pa,Pa=vc);return O.precision(rc)};
O.step=function(vc){return arguments.length?O.majorStep(vc).minorStep(vc):O.minorStep()};O.majorStep=function(vc){if(!arguments.length)return[vb,Ab];vb=+vc[0];Ab=+vc[1];return O};O.minorStep=function(vc){if(!arguments.length)return[bb,mb];bb=+vc[0];mb=+vc[1];return O};O.precision=function(vc){if(!arguments.length)return rc;rc=+vc;Bb=mc(Ia,Pa,90);Nb=cd(xa,ra,rc);Ub=mc(Ua,Oa,90);fc=cd(Ca,ya,rc);return O};return O.majorExtent([[-180,-89.999999],[180,89.999999]]).minorExtent([[-180,-80.000001],[180,80.000001]])};
zb.geo.greatArc=function(){function O(){return{type:"LineString",coordinates:[ra||ea.apply(this,arguments),ya||xa.apply(this,arguments)]}}var ea=kd,ra,xa=nd,ya;O.distance=function(){return zb.geo.distance(ra||ea.apply(this,arguments),ya||xa.apply(this,arguments))};O.source=function(Ca){if(!arguments.length)return ea;ea=Ca;ra="function"===typeof Ca?null:Ca;return O};O.target=function(Ca){if(!arguments.length)return xa;xa=Ca;ya="function"===typeof Ca?null:Ca;return O};O.precision=function(){return arguments.length?
O:0};return O};zb.geo.interpolate=function(O,ea){return qd(O[0]*ce,O[1]*ce,ea[0]*ce,ea[1]*ce)};zb.geo.length=function(O){uj=0;zb.geo.stream(O,vi);return uj};var uj,vi={sphere:y,point:y,lineStart:function(){function O(ya,Ca){var Pa=Math.sin(Ca*=ce);Ca=Math.cos(Ca);var Ia=Wd((ya*=ce)-ea),Oa=Math.cos(Ia);uj+=Math.atan2(Math.sqrt((Ia=Ca*Math.sin(Ia))*Ia+(Ia=xa*Pa-ra*Ca*Oa)*Ia),ra*Pa+xa*Ca*Oa);ea=ya;ra=Pa;xa=Ca}var ea,ra,xa;vi.point=function(ya,Ca){ea=ya*ce;ra=Math.sin(Ca*=ce);xa=Math.cos(Ca);vi.point=
O};vi.lineEnd=function(){vi.point=vi.lineEnd=y}},lineEnd:y,polygonStart:y,polygonEnd:y},ak=md(function(O){return Math.sqrt(2/(1+O))},function(O){return 2*Math.asin(O/2)});(zb.geo.azimuthalEqualArea=function(){return ge(ak)}).raw=ak;var Bk=md(function(O){return(O=Math.acos(O))&&O/Math.sin(O)},x);(zb.geo.azimuthalEquidistant=function(){return ge(Bk)}).raw=Bk;(zb.geo.conicConformal=function(){return Te(pe)}).raw=pe;(zb.geo.conicEquidistant=function(){return Te(qe)}).raw=qe;var Ck=md(function(O){return 1/
O},Math.atan);(zb.geo.gnomonic=function(){return ge(Ck)}).raw=Ck;Be.invert=function(O,ea){return[O,2*Math.atan(Math.exp(ea))-Ye]};(zb.geo.mercator=function(){return fe(Be)}).raw=Be;var Dk=md(function(){return 1},Math.asin);(zb.geo.orthographic=function(){return ge(Dk)}).raw=Dk;var Ek=md(function(O){return 1/(1+O)},function(O){return 2*Math.atan(O)});(zb.geo.stereographic=function(){return ge(Ek)}).raw=Ek;De.invert=function(O,ea){return[-ea,2*Math.atan(Math.exp(O))-Ye]};(zb.geo.transverseMercator=
function(){var O=fe(De),ea=O.center,ra=O.rotate;O.center=function(xa){return xa?ea([-xa[1],xa[0]]):(xa=ea(),[xa[1],-xa[0]])};O.rotate=function(xa){return xa?ra([xa[0],xa[1],2<xa.length?xa[2]+90:90]):(xa=ra(),[xa[0],xa[1],xa[2]-90])};return ra([0,0,90])}).raw=De;zb.geom={};zb.geom.hull=function(O){function ea(ya){if(3>ya.length)return[];var Ca=La(ra),Pa=La(xa),Ia,Oa=ya.length,Ua=[],bb=[];for(Ia=0;Ia<Oa;Ia++)Ua.push([+Ca.call(this,ya[Ia],Ia),+Pa.call(this,ya[Ia],Ia),Ia]);Ua.sort(hj);for(Ia=0;Ia<Oa;Ia++)bb.push([Ua[Ia][0],
-Ua[Ia][1]]);Ca=Hi(Ua);bb=Hi(bb);Pa=bb[0]===Ca[0];Oa=bb[bb.length-1]===Ca[Ca.length-1];var mb=[];for(Ia=Ca.length-1;0<=Ia;--Ia)mb.push(ya[Ua[Ca[Ia]][2]]);for(Ia=+Pa;Ia<bb.length-Oa;++Ia)mb.push(ya[Ua[bb[Ia]][2]]);return mb}var ra=Rf,xa=Fg;if(arguments.length)return ea(O);ea.x=function(ya){return arguments.length?(ra=ya,ea):ra};ea.y=function(ya){return arguments.length?(xa=ya,ea):xa};return ea};zb.geom.polygon=function(O){Cg(O,vj);return O};var vj=zb.geom.polygon.prototype=[];vj.area=function(){for(var O=
-1,ea=this.length,ra,xa=this[ea-1],ya=0;++O<ea;)ra=xa,xa=this[O],ya+=ra[1]*xa[0]-ra[0]*xa[1];return.5*ya};vj.centroid=function(O){var ea=-1,ra=this.length,xa=0,ya=0,Ca=this[ra-1];for(arguments.length||(O=-1/(6*this.area()));++ea<ra;){var Pa=Ca;Ca=this[ea];var Ia=Pa[0]*Ca[1]-Ca[0]*Pa[1];xa+=(Pa[0]+Ca[0])*Ia;ya+=(Pa[1]+Ca[1])*Ia}return[xa*O,ya*O]};vj.clip=function(O){for(var ea,ra=Lj(O),xa=-1,ya=this.length-Lj(this),Ca,Pa,Ia=this[ya-1],Oa,Ua,bb;++xa<ya;){ea=O.slice();O.length=0;Oa=this[xa];Ua=ea[(Pa=
ea.length-ra)-1];for(Ca=-1;++Ca<Pa;)bb=ea[Ca],ij(bb,Ia,Oa)?(ij(Ua,Ia,Oa)||O.push(hh(Ua,bb,Ia,Oa)),O.push(bb)):ij(Ua,Ia,Oa)&&O.push(hh(Ua,bb,Ia,Oa)),Ua=bb;ra&&O.push(O[0]);Ia=Oa}return O};var fi,Dh,di,qk=[],ef,Ji,rk=[];Pg.prototype.prepare=function(){for(var O=this.edges,ea=O.length,ra;ea--;)ra=O[ea].edge,ra.b&&ra.a||O.splice(ea,1);O.sort(Nj);return O.length};ih.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:
this.edge.a}};Ae.prototype={insert:function(O,ea){var ra;if(O){ea.P=O;if(ea.N=O.N)O.N.P=ea;O.N=ea;if(O.R){for(O=O.R;O.L;)O=O.L;O.L=ea}else O.R=ea;var xa=O}else this._?(O=Pj(this._),ea.P=null,ea.N=O,O.P=O.L=ea,xa=O):(ea.P=ea.N=null,this._=ea,xa=null);ea.L=ea.R=null;ea.U=xa;ea.C=!0;for(O=ea;xa&&xa.C;)ea=xa.U,xa===ea.L?(ra=ea.R)&&ra.C?(xa.C=ra.C=!1,ea.C=!0,O=ea):(O===xa.R&&(Eh(this,xa),O=xa,xa=O.U),xa.C=!1,ea.C=!0,Fh(this,ea)):(ra=ea.L)&&ra.C?(xa.C=ra.C=!1,ea.C=!0,O=ea):(O===xa.L&&(Fh(this,xa),O=xa,
xa=O.U),xa.C=!1,ea.C=!0,Eh(this,ea)),xa=O.U;this._.C=!1},remove:function(O){O.N&&(O.N.P=O.P);O.P&&(O.P.N=O.N);O.N=O.P=null;var ea=O.U,ra=O.L,xa=O.R;var ya=ra?xa?Pj(xa):ra:xa;ea?ea.L===O?ea.L=ya:ea.R=ya:this._=ya;if(ra&&xa){var Ca=ya.C;ya.C=O.C;ya.L=ra;ra.U=ya;ya!==xa?(ea=ya.U,ya.U=O.U,O=ya.R,ea.L=O,ya.R=xa,xa.U=ya):(ya.U=ea,ea=ya,O=ya.R)}else Ca=O.C,O=ya;O&&(O.U=ea);if(!Ca)if(O&&O.C)O.C=!1;else{do{if(O===this._)break;if(O===ea.L){if(O=ea.R,O.C&&(O.C=!1,ea.C=!0,Eh(this,ea),O=ea.R),O.L&&O.L.C||O.R&&
O.R.C){O.R&&O.R.C||(O.L.C=!1,O.C=!0,Fh(this,O),O=ea.R);O.C=ea.C;ea.C=O.R.C=!1;Eh(this,ea);O=this._;break}}else if(O=ea.L,O.C&&(O.C=!1,ea.C=!0,Fh(this,ea),O=ea.L),O.L&&O.L.C||O.R&&O.R.C){O.L&&O.L.C||(O.R.C=!1,O.C=!0,Eh(this,O),O=ea.L);O.C=ea.C;ea.C=O.L.C=!1;Fh(this,ea);O=this._;break}O.C=!0;O=ea;ea=ea.U}while(!O.C);O&&(O.C=!1)}}};zb.geom.voronoi=function(O){function ea(Oa){var Ua=Array(Oa.length),bb=Ia[0][0],mb=Ia[0][1],vb=Ia[1][0],Ab=Ia[1][1];hi(ra(Oa),Ia).cells.forEach(function(Bb,Nb){var Ub=Bb.edges;
Bb=Bb.site;(Ua[Nb]=Ub.length?Ub.map(function(fc){fc=fc.start();return[fc.x,fc.y]}):Bb.x>=bb&&Bb.x<=vb&&Bb.y>=mb&&Bb.y<=Ab?[[bb,Ab],[vb,Ab],[vb,mb],[bb,mb]]:[]).point=Oa[Nb]});return Ua}function ra(Oa){return Oa.map(function(Ua,bb){return{x:1E-6*Math.round(Ca(Ua,bb)/1E-6),y:1E-6*Math.round(Pa(Ua,bb)/1E-6),i:bb}})}var xa=Rf,ya=Fg,Ca=xa,Pa=ya,Ia=bk;if(O)return ea(O);ea.links=function(Oa){return hi(ra(Oa)).edges.filter(function(Ua){return Ua.l&&Ua.r}).map(function(Ua){return{source:Oa[Ua.l.i],target:Oa[Ua.r.i]}})};
ea.triangles=function(Oa){var Ua=[];hi(ra(Oa)).cells.forEach(function(bb,mb){var vb=bb.site;bb=bb.edges.sort(Nj);var Ab=-1,Bb=bb.length,Nb=bb[Bb-1].edge;for(Nb=Nb.l===vb?Nb.r:Nb.l;++Ab<Bb;){var Ub=Nb;Nb=bb[Ab].edge;Nb=Nb.l===vb?Nb.r:Nb.l;mb<Ub.i&&mb<Nb.i&&0>(vb.x-Nb.x)*(Ub.y-vb.y)-(vb.x-Ub.x)*(Nb.y-vb.y)&&Ua.push([Oa[mb],Oa[Ub.i],Oa[Nb.i]])}});return Ua};ea.x=function(Oa){return arguments.length?(Ca=La(xa=Oa),ea):xa};ea.y=function(Oa){return arguments.length?(Pa=La(ya=Oa),ea):ya};ea.clipExtent=function(Oa){if(!arguments.length)return Ia===
bk?null:Ia;Ia=null==Oa?bk:Oa;return ea};ea.size=function(Oa){return arguments.length?ea.clipExtent(Oa&&[[0,0],Oa]):Ia===bk?null:Ia&&Ia[1]};return ea};var bk=[[-1E6,-1E6],[1E6,1E6]];zb.geom.delaunay=function(O){return zb.geom.voronoi().triangles(O)};zb.geom.quadtree=function(O,ea,ra,xa,ya){function Ca(Ua){function bb(Tc,Vc,Xc,Nc,yd,Rd,ae,he){if(!isNaN(Xc)&&!isNaN(Nc))if(Tc.leaf){var de=Tc.x,ne=Tc.y;if(null!=de){if(!(.01>Wd(de-Xc)+Wd(ne-Nc))){var Pd=Tc.point;Tc.x=Tc.y=Tc.point=null;mb(Tc,Pd,de,ne,yd,
Rd,ae,he)}mb(Tc,Vc,Xc,Nc,yd,Rd,ae,he)}else Tc.x=Xc,Tc.y=Nc,Tc.point=Vc}else mb(Tc,Vc,Xc,Nc,yd,Rd,ae,he)}function mb(Tc,Vc,Xc,Nc,yd,Rd,ae,he){var de=.5*(yd+ae),ne=.5*(Rd+he),Pd=Xc>=de,yf=Nc>=ne,Ze=yf<<1|Pd;Tc.leaf=!1;Tc=Tc.nodes[Ze]||(Tc.nodes[Ze]=Sj());Pd?yd=de:ae=de;yf?Rd=ne:he=ne;bb(Tc,Vc,Xc,Nc,yd,Rd,ae,he)}var vb=La(Pa),Ab=La(Ia),Bb;if(null!=ea){var Nb=ea;var Ub=ra;var fc=xa;var rc=ya}else{fc=rc=-(Nb=Ub=Infinity);var vc=[];var zc=[];var Kc=Ua.length;if(Oa)for(Bb=0;Bb<Kc;++Bb){var Ib=Ua[Bb];Ib.x<
Nb&&(Nb=Ib.x);Ib.y<Ub&&(Ub=Ib.y);Ib.x>fc&&(fc=Ib.x);Ib.y>rc&&(rc=Ib.y);vc.push(Ib.x);zc.push(Ib.y)}else for(Bb=0;Bb<Kc;++Bb){var Wb=+vb(Ib=Ua[Bb],Bb);Ib=+Ab(Ib,Bb);Wb<Nb&&(Nb=Wb);Ib<Ub&&(Ub=Ib);Wb>fc&&(fc=Wb);Ib>rc&&(rc=Ib);vc.push(Wb);zc.push(Ib)}}Wb=fc-Nb;Ib=rc-Ub;Wb>Ib?rc=Ub+Wb:fc=Nb+Ib;var sc=Sj();sc.add=function(Tc){bb(sc,Tc,+vb(Tc,++Bb),+Ab(Tc,Bb),Nb,Ub,fc,rc)};sc.visit=function(Tc){ii(Tc,sc,Nb,Ub,fc,rc)};sc.find=function(Tc){return sk(sc,Tc[0],Tc[1],Nb,Ub,fc,rc)};Bb=-1;if(null==ea){for(;++Bb<
Kc;)bb(sc,Ua[Bb],vc[Bb],zc[Bb],Nb,Ub,fc,rc);--Bb}else Ua.forEach(sc.add);vc=zc=Ua=Ib=null;return sc}var Pa=Rf,Ia=Fg,Oa;if(Oa=arguments.length)return Pa=Qj,Ia=Rj,3===Oa&&(ya=ra,xa=ea,ra=ea=0),Ca(O);Ca.x=function(Ua){return arguments.length?(Pa=Ua,Ca):Pa};Ca.y=function(Ua){return arguments.length?(Ia=Ua,Ca):Ia};Ca.extent=function(Ua){if(!arguments.length)return null==ea?null:[[ea,ra],[xa,ya]];null==Ua?ea=ra=xa=ya=null:(ea=+Ua[0][0],ra=+Ua[0][1],xa=+Ua[1][0],ya=+Ua[1][1]);return Ca};Ca.size=function(Ua){if(!arguments.length)return null==
ea?null:[xa-ea,ya-ra];null==Ua?ea=ra=xa=ya=null:(ea=ra=0,xa=+Ua[0],ya=+Ua[1]);return Ca};return Ca};zb.interpolateRgb=Gh;zb.interpolateObject=jh;zb.interpolateNumber=tg;zb.interpolateString=Tj;var ji=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,kh=new RegExp(ji.source,"g");zb.interpolate=Qg;zb.interpolators=[function(O,ea){var ra=typeof ea;return("string"===ra?cj.has(ea.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(ea)?Gh:Tj:ea instanceof Aa?Gh:Array.isArray(ea)?ki:"object"===ra&&isNaN(ea)?jh:tg)(O,ea)}];
zb.interpolateArray=ki;var Xk=function(){return x},wi=zb.map({linear:Xk,poly:function(O){return function(ea){return Math.pow(ea,O)}},quad:function(){return Sg},cubic:function(){return Fe},sin:function(){return Gg},exp:function(){return Hh},circle:function(){return Uj},elastic:function(O,ea){2>arguments.length&&(ea=.45);if(arguments.length)var ra=ea/zf*Math.asin(1/O);else O=1,ra=ea/4;return function(xa){return 1+O*Math.pow(2,-10*xa)*Math.sin((xa-ra)*zf/ea)}},back:function(O){O||(O=1.70158);return function(ea){return ea*
ea*((O+1)*ea-O)}},bounce:function(){return kj}}),il=zb.map({"in":x,out:lh,"in-out":Rg,"out-in":function(O){return Rg(lh(O))}});zb.ease=function(O){var ea=O.indexOf("-"),ra=0<=ea?O.slice(0,ea):O;ea=0<=ea?O.slice(ea+1):"in";ra=wi.get(ra)||Xk;ea=il.get(ea)||x;return Pe(ea(ra.apply(null,Vk.call(arguments,1))))};zb.interpolateHcl=function(O,ea){O=zb.hcl(O);ea=zb.hcl(ea);var ra=O.h,xa=O.c,ya=O.l,Ca=ea.h-ra,Pa=ea.c-xa,Ia=ea.l-ya;isNaN(Pa)&&(Pa=0,xa=isNaN(xa)?ea.c:xa);isNaN(Ca)?(Ca=0,ra=isNaN(ra)?ea.h:ra):
180<Ca?Ca-=360:-180>Ca&&(Ca+=360);return function(Oa){return eb(ra+Ca*Oa,xa+Pa*Oa,ya+Ia*Oa)+""}};zb.interpolateHsl=function(O,ea){O=zb.hsl(O);ea=zb.hsl(ea);var ra=O.h,xa=O.s,ya=O.l,Ca=ea.h-ra,Pa=ea.s-xa,Ia=ea.l-ya;isNaN(Pa)&&(Pa=0,xa=isNaN(xa)?ea.s:xa);isNaN(Ca)?(Ca=0,ra=isNaN(ra)?ea.h:ra):180<Ca?Ca-=360:-180>Ca&&(Ca+=360);return function(Oa){return Sa(ra+Ca*Oa,xa+Pa*Oa,ya+Ia*Oa)+""}};zb.interpolateLab=function(O,ea){O=zb.lab(O);ea=zb.lab(ea);var ra=O.l,xa=O.a,ya=O.b,Ca=ea.l-ra,Pa=ea.a-xa,Ia=ea.b-
ya;return function(Oa){return ab(ra+Ca*Oa,xa+Pa*Oa,ya+Ia*Oa)+""}};zb.interpolateRound=lj;zb.transform=function(O){var ea=sf.createElementNS(zb.ns.prefix.svg,"g");return(zb.transform=function(ra){if(null!=ra){ea.setAttribute("transform",ra);var xa=ea.transform.baseVal.consolidate()}return new mj(xa?xa.matrix:ck)})(O)};mj.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var ck={a:1,b:0,c:0,d:1,e:0,f:0};zb.interpolateTransform=
Ef;zb.layout={};zb.layout.bundle=function(){return function(O){for(var ea=[],ra=-1,xa=O.length;++ra<xa;){var ya=ea,Ca=ya.push,Pa=O[ra],Ia=Pa.source;Pa=Pa.target;var Oa=Pa;if(Ia===Oa)var Ua=Ia;else{Ua=jg(Ia);Oa=jg(Oa);for(var bb=Ua.pop(),mb=Oa.pop(),vb=null;bb===mb;)vb=bb,bb=Ua.pop(),mb=Oa.pop();Ua=vb}for(Oa=[Ia];Ia!==Ua;)Ia=Ia.parent,Oa.push(Ia);for(Ia=Oa.length;Pa!==Ua;)Oa.splice(Ia,0,Pa),Pa=Pa.parent;Ca.call(ya,Oa)}return ea}};zb.layout.chord=function(){function O(){var mb={},vb=[],Ab=zb.range(Pa),
Bb=[],Nb,Ub;xa=[];ya=[];var fc=0;for(Nb=-1;++Nb<Pa;){var rc=0;for(Ub=-1;++Ub<Pa;)rc+=Ca[Nb][Ub];vb.push(rc);Bb.push(zb.range(Pa));fc+=rc}Oa&&Ab.sort(function(Tc,Vc){return Oa(vb[Tc],vb[Vc])});Ua&&Bb.forEach(function(Tc,Vc){Tc.sort(function(Xc,Nc){return Ua(Ca[Vc][Xc],Ca[Vc][Nc])})});fc=(zf-Ia*Pa)/fc;rc=0;for(Nb=-1;++Nb<Pa;){var vc=rc;for(Ub=-1;++Ub<Pa;){var zc=Ab[Nb],Kc=Bb[zc][Ub],Ib=Ca[zc][Kc],Wb=rc,sc=rc+=Ib*fc;mb[zc+"-"+Kc]={index:zc,subindex:Kc,startAngle:Wb,endAngle:sc,value:Ib}}ya[zc]={index:zc,
startAngle:vc,endAngle:rc,value:vb[zc]};rc+=Ia}for(Nb=-1;++Nb<Pa;)for(Ub=Nb-1;++Ub<Pa;)Ab=mb[Nb+"-"+Ub],Bb=mb[Ub+"-"+Nb],(Ab.value||Bb.value)&&xa.push(Ab.value<Bb.value?{source:Bb,target:Ab}:{source:Ab,target:Bb});bb&&ea()}function ea(){xa.sort(function(mb,vb){return bb((mb.source.value+mb.target.value)/2,(vb.source.value+vb.target.value)/2)})}var ra={},xa,ya,Ca,Pa,Ia=0,Oa,Ua,bb;ra.matrix=function(mb){if(!arguments.length)return Ca;Pa=(Ca=mb)&&Ca.length;xa=ya=null;return ra};ra.padding=function(mb){if(!arguments.length)return Ia;
Ia=mb;xa=ya=null;return ra};ra.sortGroups=function(mb){if(!arguments.length)return Oa;Oa=mb;xa=ya=null;return ra};ra.sortSubgroups=function(mb){if(!arguments.length)return Ua;Ua=mb;xa=null;return ra};ra.sortChords=function(mb){if(!arguments.length)return bb;bb=mb;xa&&ea();return ra};ra.chords=function(){xa||O();return xa};ra.groups=function(){ya||O();return ya};return ra};zb.layout.force=function(){function O(zc){return function(Kc,Ib,Wb,sc){if(Kc.point!==zc){Wb=Kc.cx-zc.x;var Tc=Kc.cy-zc.y;Ib=sc-
Ib;sc=Wb*Wb+Tc*Tc;if(Ib*Ib/Bb<sc)return sc<vb&&(Ib=Kc.charge/sc,zc.px-=Wb*Ib,zc.py-=Tc*Ib),!0;Kc.point&&sc&&sc<vb&&(Ib=Kc.pointCharge/sc,zc.px-=Wb*Ib,zc.py-=Tc*Ib)}return!Kc.charge}}function ea(zc){zc.px=zb.event.x;zc.py=zb.event.y;ra.resume()}var ra={},xa=zb.dispatch("start","tick","end"),ya,Ca=[1,1],Pa,Ia,Oa=.9,Ua=jl,bb=kl,mb=-30,vb=Yk,Ab=.1,Bb=.64,Nb=[],Ub=[],fc,rc,vc;ra.tick=function(){if(.005>(Ia*=.99))return ya=null,xa.end({type:"end",alpha:Ia=0}),!0;var zc=Nb.length,Kc=Ub.length,Ib,Wb;for(Ib=
0;Ib<Kc;++Ib){var sc=Ub[Ib];var Tc=sc.source;var Vc=sc.target;var Xc=Vc.x-Tc.x;var Nc=Vc.y-Tc.y;if(Wb=Xc*Xc+Nc*Nc)Wb=Ia*rc[Ib]*((Wb=Math.sqrt(Wb))-fc[Ib])/Wb,Xc*=Wb,Nc*=Wb,Vc.x-=Xc*(Wb=Tc.weight+Vc.weight?Tc.weight/(Tc.weight+Vc.weight):.5),Vc.y-=Nc*Wb,Tc.x+=Xc*(Wb=1-Wb),Tc.y+=Nc*Wb}if(Wb=Ia*Ab)if(Xc=Ca[0]/2,Nc=Ca[1]/2,Ib=-1,Wb)for(;++Ib<zc;)sc=Nb[Ib],sc.x+=(Xc-sc.x)*Wb,sc.y+=(Nc-sc.y)*Wb;if(mb)for(Uf(Kc=zb.geom.quadtree(Nb),Ia,vc),Ib=-1;++Ib<zc;)(sc=Nb[Ib]).fixed||Kc.visit(O(sc));for(Ib=-1;++Ib<
zc;)sc=Nb[Ib],sc.fixed?(sc.x=sc.px,sc.y=sc.py):(sc.x-=(sc.px-(sc.px=sc.x))*Oa,sc.y-=(sc.py-(sc.py=sc.y))*Oa);xa.tick({type:"tick",alpha:Ia})};ra.nodes=function(zc){if(!arguments.length)return Nb;Nb=zc;return ra};ra.links=function(zc){if(!arguments.length)return Ub;Ub=zc;return ra};ra.size=function(zc){if(!arguments.length)return Ca;Ca=zc;return ra};ra.linkDistance=function(zc){if(!arguments.length)return Ua;Ua="function"===typeof zc?zc:+zc;return ra};ra.distance=ra.linkDistance;ra.linkStrength=function(zc){if(!arguments.length)return bb;
bb="function"===typeof zc?zc:+zc;return ra};ra.friction=function(zc){if(!arguments.length)return Oa;Oa=+zc;return ra};ra.charge=function(zc){if(!arguments.length)return mb;mb="function"===typeof zc?zc:+zc;return ra};ra.chargeDistance=function(zc){if(!arguments.length)return Math.sqrt(vb);vb=zc*zc;return ra};ra.gravity=function(zc){if(!arguments.length)return Ab;Ab=+zc;return ra};ra.theta=function(zc){if(!arguments.length)return Math.sqrt(Bb);Bb=zc*zc;return ra};ra.alpha=function(zc){if(!arguments.length)return Ia;
zc=+zc;Ia?0<zc?Ia=zc:(ya.c=null,ya.t=NaN,ya=null,xa.end({type:"end",alpha:Ia=0})):0<zc&&(xa.start({type:"start",alpha:Ia=zc}),ya=za(ra.tick));return ra};ra.start=function(){function zc(Nc,yd){if(!Vc){Vc=Array(Ib);for(ae=0;ae<Ib;++ae)Vc[ae]=[];for(ae=0;ae<Wb;++ae){var Rd=Ub[ae];Vc[Rd.source.index].push(Rd.target);Vc[Rd.target.index].push(Rd.source)}}Rd=Vc[Kc];for(var ae=-1,he=Rd.length,de;++ae<he;)if(!isNaN(de=Rd[ae][Nc]))return de;return Math.random()*yd}var Kc,Ib=Nb.length,Wb=Ub.length,sc=Ca[0],
Tc=Ca[1],Vc,Xc;for(Kc=0;Kc<Ib;++Kc)(Xc=Nb[Kc]).index=Kc,Xc.weight=0;for(Kc=0;Kc<Wb;++Kc)Xc=Ub[Kc],"number"==typeof Xc.source&&(Xc.source=Nb[Xc.source]),"number"==typeof Xc.target&&(Xc.target=Nb[Xc.target]),++Xc.source.weight,++Xc.target.weight;for(Kc=0;Kc<Ib;++Kc)Xc=Nb[Kc],isNaN(Xc.x)&&(Xc.x=zc("x",sc)),isNaN(Xc.y)&&(Xc.y=zc("y",Tc)),isNaN(Xc.px)&&(Xc.px=Xc.x),isNaN(Xc.py)&&(Xc.py=Xc.y);fc=[];if("function"===typeof Ua)for(Kc=0;Kc<Wb;++Kc)fc[Kc]=+Ua.call(this,Ub[Kc],Kc);else for(Kc=0;Kc<Wb;++Kc)fc[Kc]=
Ua;rc=[];if("function"===typeof bb)for(Kc=0;Kc<Wb;++Kc)rc[Kc]=+bb.call(this,Ub[Kc],Kc);else for(Kc=0;Kc<Wb;++Kc)rc[Kc]=bb;vc=[];if("function"===typeof mb)for(Kc=0;Kc<Ib;++Kc)vc[Kc]=+mb.call(this,Nb[Kc],Kc);else for(Kc=0;Kc<Ib;++Kc)vc[Kc]=mb;return ra.resume()};ra.resume=function(){return ra.alpha(.1)};ra.stop=function(){return ra.alpha(0)};ra.drag=function(){Pa||(Pa=zb.behavior.drag().origin(x).on("dragstart.force",Tf).on("drag.force",ea).on("dragend.force",Jh));if(!arguments.length)return Pa;this.on("mouseover.force",
nj).on("mouseout.force",Mi).call(Pa)};return zb.rebind(ra,xa,"on")};var jl=20,kl=1,Yk=Infinity;zb.layout.hierarchy=function(){function O(ya){var Ca=[ya],Pa=[],Ia;for(ya.depth=0;null!=(Ia=Ca.pop());)if(Pa.push(Ia),(Ua=ra.call(O,Ia,Ia.depth))&&(Oa=Ua.length)){for(var Oa,Ua,bb;0<=--Oa;)Ca.push(bb=Ua[Oa]),bb.parent=Ia,bb.depth=Ia.depth+1;xa&&(Ia.value=0);Ia.children=Ua}else xa&&(Ia.value=+xa.call(O,Ia,Ia.depth)||0),delete Ia.children;Vf(ya,function(mb){var vb,Ab;ea&&(vb=mb.children)&&vb.sort(ea);xa&&
(Ab=mb.parent)&&(Ab.value+=mb.value)});return Pa}var ea=Af,ra=oj,xa=oh;O.sort=function(ya){if(!arguments.length)return ea;ea=ya;return O};O.children=function(ya){if(!arguments.length)return ra;ra=ya;return O};O.value=function(ya){if(!arguments.length)return xa;xa=ya;return O};O.revalue=function(ya){xa&&(li(ya,function(Ca){Ca.children&&(Ca.value=0)}),Vf(ya,function(Ca){var Pa;Ca.children||(Ca.value=+xa.call(O,Ca,Ca.depth)||0);if(Pa=Ca.parent)Pa.value+=Ca.value}));return ya};return O};zb.layout.partition=
function(){function O(Ca,Pa,Ia,Oa){var Ua=Ca.children;Ca.x=Pa;Ca.y=Ca.depth*Oa;Ca.dx=Ia;Ca.dy=Oa;if(Ua&&(mb=Ua.length)){var bb=-1,mb,vb;for(Ia=Ca.value?Ia/Ca.value:0;++bb<mb;)O(vb=Ua[bb],Pa,Ca=vb.value*Ia,Oa),Pa+=Ca}}function ea(Ca){Ca=Ca.children;var Pa=0;if(Ca&&(Oa=Ca.length))for(var Ia=-1,Oa;++Ia<Oa;)Pa=Math.max(Pa,ea(Ca[Ia]));return 1+Pa}function ra(Ca,Pa){Ca=xa.call(this,Ca,Pa);O(Ca[0],0,ya[0],ya[1]/ea(Ca[0]));return Ca}var xa=zb.layout.hierarchy(),ya=[1,1];ra.size=function(Ca){if(!arguments.length)return ya;
ya=Ca;return ra};return jf(ra,xa)};zb.layout.pie=function(){function O(Pa){var Ia=Pa.length,Oa=Pa.map(function(fc,rc){return+ea.call(O,fc,rc)}),Ua=+("function"===typeof xa?xa.apply(this,arguments):xa),bb=("function"===typeof ya?ya.apply(this,arguments):ya)-Ua,mb=Math.min(Math.abs(bb)/Ia,+("function"===typeof Ca?Ca.apply(this,arguments):Ca)),vb=mb*(0>bb?-1:1),Ab=zb.sum(Oa),Bb=Ab?(bb-Ia*vb)/Ab:0;Ia=zb.range(Ia);var Nb=[],Ub;null!=ra&&Ia.sort(ra===Fk?function(fc,rc){return Oa[rc]-Oa[fc]}:function(fc,
rc){return ra(Pa[fc],Pa[rc])});Ia.forEach(function(fc){Nb[fc]={data:Pa[fc],value:Ub=Oa[fc],startAngle:Ua,endAngle:Ua+=Ub*Bb+vb,padAngle:mb}});return Nb}var ea=Number,ra=Fk,xa=0,ya=zf,Ca=0;O.value=function(Pa){if(!arguments.length)return ea;ea=Pa;return O};O.sort=function(Pa){if(!arguments.length)return ra;ra=Pa;return O};O.startAngle=function(Pa){if(!arguments.length)return xa;xa=Pa;return O};O.endAngle=function(Pa){if(!arguments.length)return ya;ya=Pa;return O};O.padAngle=function(Pa){if(!arguments.length)return Ca;
Ca=Pa;return O};return O};var Fk={};zb.layout.stack=function(){function O(Ia,Oa){if(!(vb=Ia.length))return Ia;var Ua=Ia.map(function(Ub,fc){return ea.call(O,Ub,fc)}),bb=Ua.map(function(Ub){return Ub.map(function(fc,rc){return[Ca.call(O,fc,rc),Pa.call(O,fc,rc)]})}),mb=ra.call(O,bb,Oa);Ua=zb.permute(Ua,mb);bb=zb.permute(bb,mb);Oa=xa.call(O,bb,Oa);mb=Ua[0].length;var vb,Ab,Bb,Nb;for(Bb=0;Bb<mb;++Bb)for(ya.call(O,Ua[0][Bb],Nb=Oa[Bb],bb[0][Bb][1]),Ab=1;Ab<vb;++Ab)ya.call(O,Ua[Ab][Bb],Nb+=bb[Ab-1][Bb][1],
bb[Ab][Bb][1]);return Ia}var ea=x,ra=Ug,xa=ug,ya=Hg,Ca=Tg,Pa=bg;O.values=function(Ia){if(!arguments.length)return ea;ea=Ia;return O};O.order=function(Ia){if(!arguments.length)return ra;ra="function"===typeof Ia?Ia:ll.get(Ia)||Ug;return O};O.offset=function(Ia){if(!arguments.length)return xa;xa="function"===typeof Ia?Ia:ml.get(Ia)||ug;return O};O.x=function(Ia){if(!arguments.length)return Ca;Ca=Ia;return O};O.y=function(Ia){if(!arguments.length)return Pa;Pa=Ia;return O};O.out=function(Ia){if(!arguments.length)return ya;
ya=Ia;return O};return O};var ll=zb.map({"inside-out":function(O){var ea=O.length,ra=O.map(Ni),xa=O.map(Vj),ya=zb.range(ea).sort(function(bb,mb){return ra[bb]-ra[mb]}),Ca=0,Pa=0,Ia=[],Oa=[];for(O=0;O<ea;++O){var Ua=ya[O];Ca<Pa?(Ca+=xa[Ua],Ia.push(Ua)):(Pa+=xa[Ua],Oa.push(Ua))}return Oa.reverse().concat(Ia)},reverse:function(O){return zb.range(O.length).reverse()},"default":Ug}),ml=zb.map({silhouette:function(O){var ea=O.length,ra=O[0].length,xa=[],ya=0,Ca,Pa,Ia,Oa=[];for(Pa=0;Pa<ra;++Pa){for(Ia=Ca=
0;Ca<ea;Ca++)Ia+=O[Ca][Pa][1];Ia>ya&&(ya=Ia);xa.push(Ia)}for(Pa=0;Pa<ra;++Pa)Oa[Pa]=(ya-xa[Pa])/2;return Oa},wiggle:function(O){var ea=O.length,ra=O[0],xa=ra.length,ya,Ca,Pa,Ia,Oa,Ua,bb,mb=[];mb[0]=Ua=bb=0;for(Ca=1;Ca<xa;++Ca){for(Pa=ya=0;ya<ea;++ya)Pa+=O[ya][Ca][1];var vb=ya=0;for(Oa=ra[Ca][0]-ra[Ca-1][0];ya<ea;++ya){var Ab=0;for(Ia=(O[ya][Ca][1]-O[ya][Ca-1][1])/(2*Oa);Ab<ya;++Ab)Ia+=(O[Ab][Ca][1]-O[Ab][Ca-1][1])/Oa;vb+=Ia*O[ya][Ca][1]}mb[Ca]=Ua-=Pa?vb/Pa*Oa:0;Ua<bb&&(bb=Ua)}for(Ca=0;Ca<xa;++Ca)mb[Ca]-=
bb;return mb},expand:function(O){var ea=O.length,ra=O[0].length,xa=1/ea,ya,Ca,Pa,Ia=[];for(Ca=0;Ca<ra;++Ca){for(Pa=ya=0;ya<ea;ya++)Pa+=O[ya][Ca][1];if(Pa)for(ya=0;ya<ea;ya++)O[ya][Ca][1]/=Pa;else for(ya=0;ya<ea;ya++)O[ya][Ca][1]=xa}for(Ca=0;Ca<ra;++Ca)Ia[Ca]=0;return Ia},zero:ug});zb.layout.histogram=function(){function O(Ca,Pa){var Ia=[],Oa=Ca.map(ra,this),Ua=xa.call(this,Oa,Pa),bb=ya.call(this,Ua,Oa,Pa);Pa=-1;for(var mb=Oa.length,vb=bb.length-1,Ab=ea?1:1/mb;++Pa<vb;){var Bb=Ia[Pa]=[];Bb.dx=bb[Pa+
1]-(Bb.x=bb[Pa]);Bb.y=0}if(0<vb)for(Pa=-1;++Pa<mb;)Bb=Oa[Pa],Bb>=Ua[0]&&Bb<=Ua[1]&&(Bb=Ia[zb.bisect(bb,Bb,1,vb)-1],Bb.y+=Ab,Bb.push(Ca[Pa]));return Ia}var ea=!0,ra=Number,xa=Vg,ya=uk;O.value=function(Ca){if(!arguments.length)return ra;ra=Ca;return O};O.range=function(Ca){if(!arguments.length)return xa;xa=La(Ca);return O};O.bins=function(Ca){if(!arguments.length)return ya;ya="number"===typeof Ca?function(Pa){return kg(Pa,Ca)}:La(Ca);return O};O.frequency=function(Ca){if(!arguments.length)return ea;
ea=!!Ca;return O};return O};zb.layout.pack=function(){function O(Ca,Pa){Ca=ea.call(this,Ca,Pa);Pa=Ca[0];var Ia=xa[0],Oa=xa[1],Ua=null==ya?Math.sqrt:"function"===typeof ya?ya:function(){return ya};Pa.x=Pa.y=0;Vf(Pa,function(mb){mb.r=+Ua(mb.value)});Vf(Pa,lg);if(ra){var bb=ra*(ya?1:Math.max(2*Pa.r/Ia,2*Pa.r/Oa))/2;Vf(Pa,function(mb){mb.r+=bb});Vf(Pa,lg);Vf(Pa,function(mb){mb.r-=bb})}Wj(Pa,Ia/2,Oa/2,ya?1:1/Math.max(2*Pa.r/Ia,2*Pa.r/Oa));return Ca}var ea=zb.layout.hierarchy().sort(ph),ra=0,xa=[1,1],ya;
O.size=function(Ca){if(!arguments.length)return xa;xa=Ca;return O};O.radius=function(Ca){if(!arguments.length)return ya;ya=null==Ca||"function"===typeof Ca?Ca:+Ca;return O};O.padding=function(Ca){if(!arguments.length)return ra;ra=+Ca;return O};return jf(O,ea)};zb.layout.tree=function(){function O(Ua,bb){Ua=Ca.call(this,Ua,bb);bb=Ua[0];var mb=ea(bb);Vf(mb,ra);mb.parent.m=-mb.z;li(mb,xa);if(Oa)li(bb,ya);else{var vb=bb,Ab=bb,Bb=bb;li(bb,function(rc){rc.x<vb.x&&(vb=rc);rc.x>Ab.x&&(Ab=rc);rc.depth>Bb.depth&&
(Bb=rc)});var Nb=Pa(vb,Ab)/2-vb.x,Ub=Ia[0]/(Ab.x+Pa(Ab,vb)/2+Nb),fc=Ia[1]/(Bb.depth||1);li(bb,function(rc){rc.x=(rc.x+Nb)*Ub;rc.y=rc.depth*fc})}return Ua}function ea(Ua){Ua={A:null,children:[Ua]};for(var bb=[Ua],mb;null!=(mb=bb.pop());)for(var vb=mb.children,Ab,Bb=0,Nb=vb.length;Bb<Nb;++Bb)bb.push((vb[Bb]=Ab={_:vb[Bb],parent:mb,children:(Ab=vb[Bb].children)&&Ab.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:Bb}).a=Ab);return Ua.children[0]}function ra(Ua){var bb=Ua.children,mb=Ua.parent.children,
vb=Ua.i?mb[Ua.i-1]:null;if(bb.length){for(var Ab=0,Bb=0,Nb=Ua.children,Ub=Nb.length,fc;0<=--Ub;)fc=Nb[Ub],fc.z+=Ab,fc.m+=Ab,Ab+=fc.s+(Bb+=fc.c);bb=(bb[0].z+bb[bb.length-1].z)/2;vb?(Ua.z=vb.z+Pa(Ua._,vb._),Ua.m=Ua.z-bb):Ua.z=bb}else vb&&(Ua.z=vb.z+Pa(Ua._,vb._));bb=Ua.parent;mb=Ua.parent.A||mb[0];if(vb){Bb=Ab=Ua;Nb=Ab.parent.children[0];Ub=Ab.m;fc=Bb.m;for(var rc=vb.m,vc=Nb.m,zc;vb=Xg(vb),Ab=Wg(Ab),vb&&Ab;){Nb=Wg(Nb);Bb=Xg(Bb);Bb.a=Ua;zc=vb.z+rc-Ab.z-Ub+Pa(vb._,Ab._);if(0<zc){var Kc=vb.a.parent===
Ua.parent?vb.a:mb,Ib=Ua,Wb=zc,sc=Wb/(Ib.i-Kc.i);Ib.c-=sc;Ib.s+=Wb;Kc.c+=sc;Ib.z+=Wb;Ib.m+=Wb;Ub+=zc;fc+=zc}rc+=vb.m;Ub+=Ab.m;vc+=Nb.m;fc+=Bb.m}vb&&!Xg(Bb)&&(Bb.t=vb,Bb.m+=rc-fc);Ab&&!Wg(Nb)&&(Nb.t=Ab,Nb.m+=Ub-vc,mb=Ua)}bb.A=mb}function xa(Ua){Ua._.x=Ua.z+Ua.parent.m;Ua.m+=Ua.parent.m}function ya(Ua){Ua.x*=Ia[0];Ua.y=Ua.depth*Ia[1]}var Ca=zb.layout.hierarchy().sort(null).value(null),Pa=Ge,Ia=[1,1],Oa=null;O.separation=function(Ua){if(!arguments.length)return Pa;Pa=Ua;return O};O.size=function(Ua){if(!arguments.length)return Oa?
null:Ia;Oa=null==(Ia=Ua)?ya:null;return O};O.nodeSize=function(Ua){if(!arguments.length)return Oa?Ia:null;Oa=null==(Ia=Ua)?null:ya;return O};return jf(O,Ca)};zb.layout.cluster=function(){function O(Ca,Pa){Ca=ea.call(this,Ca,Pa);var Ia=Ca[0],Oa,Ua=0;Vf(Ia,function(Ab){var Bb=Ab.children;Bb&&Bb.length?(Ab.x=cg(Bb),Ab.y=Oi(Bb)):(Ab.x=Oa?Ua+=ra(Ab,Oa):0,Ab.y=0,Oa=Ab)});Pa=Yg(Ia);var bb=Oh(Ia),mb=Pa.x-ra(Pa,bb)/2,vb=bb.x+ra(bb,Pa)/2;Vf(Ia,ya?function(Ab){Ab.x=(Ab.x-Ia.x)*xa[0];Ab.y=(Ia.y-Ab.y)*xa[1]}:
function(Ab){Ab.x=(Ab.x-mb)/(vb-mb)*xa[0];Ab.y=(1-(Ia.y?Ab.y/Ia.y:1))*xa[1]});return Ca}var ea=zb.layout.hierarchy().sort(null).value(null),ra=Ge,xa=[1,1],ya=!1;O.separation=function(Ca){if(!arguments.length)return ra;ra=Ca;return O};O.size=function(Ca){if(!arguments.length)return ya?null:xa;ya=null==(xa=Ca);return O};O.nodeSize=function(Ca){if(!arguments.length)return ya?xa:null;ya=null!=(xa=Ca);return O};return jf(O,ea)};zb.layout.treemap=function(){function O(Bb,Nb){for(var Ub=-1,fc=Bb.length,
rc,vc;++Ub<fc;)vc=(rc=Bb[Ub]).value*(0>Nb?0:Nb),rc.area=isNaN(vc)||0>=vc?0:vc}function ea(Bb){var Nb=Bb.children;if(Nb&&Nb.length){var Ub=Ua(Bb),fc=[],rc=Nb.slice(),vc=Infinity,zc,Kc="slice"===vb?Ub.dx:"dice"===vb?Ub.dy:"slice-dice"===vb?Bb.depth&1?Ub.dy:Ub.dx:Math.min(Ub.dx,Ub.dy);O(rc,Ub.dx*Ub.dy/Bb.value);for(fc.area=0;0<(Bb=rc.length);){fc.push(Bb=rc[Bb-1]);fc.area+=Bb.area;if(!(Bb="squarify"!==vb)){Bb=Kc;for(var Ib=fc.area,Wb=0,sc=Infinity,Tc=-1,Vc=fc.length;++Tc<Vc;)if(zc=fc[Tc].area)zc<sc&&
(sc=zc),zc>Wb&&(Wb=zc);Ib*=Ib;Bb*=Bb;Bb=(zc=Ib?Math.max(Bb*Wb*Ab/Ib,Ib/(Bb*sc*Ab)):Infinity)<=vc}Bb?(rc.pop(),vc=zc):(fc.area-=fc.pop().area,xa(fc,Kc,Ub,!1),Kc=Math.min(Ub.dx,Ub.dy),fc.length=fc.area=0,vc=Infinity)}fc.length&&(xa(fc,Kc,Ub,!0),fc.length=fc.area=0);Nb.forEach(ea)}}function ra(Bb){var Nb=Bb.children;if(Nb&&Nb.length){var Ub=Ua(Bb),fc=Nb.slice(),rc=[];O(fc,Ub.dx*Ub.dy/Bb.value);for(rc.area=0;Bb=fc.pop();)rc.push(Bb),rc.area+=Bb.area,null!=Bb.z&&(xa(rc,Bb.z?Ub.dx:Ub.dy,Ub,!fc.length),
rc.length=rc.area=0);Nb.forEach(ra)}}function xa(Bb,Nb,Ub,fc){var rc=-1,vc=Bb.length,zc=Ub.x,Kc=Ub.y,Ib=Nb?Pa(Bb.area/Nb):0;if(Nb==Ub.dx){if(fc||Ib>Ub.dy)Ib=Ub.dy;for(;++rc<vc;){var Wb=Bb[rc];Wb.x=zc;Wb.y=Kc;Wb.dy=Ib;zc+=Wb.dx=Math.min(Ub.x+Ub.dx-zc,Ib?Pa(Wb.area/Ib):0)}Wb.z=!0;Wb.dx+=Ub.x+Ub.dx-zc;Ub.y+=Ib;Ub.dy-=Ib}else{if(fc||Ib>Ub.dx)Ib=Ub.dx;for(;++rc<vc;)Wb=Bb[rc],Wb.x=zc,Wb.y=Kc,Wb.dx=Ib,Kc+=Wb.dy=Math.min(Ub.y+Ub.dy-Kc,Ib?Pa(Wb.area/Ib):0);Wb.z=!1;Wb.dy+=Ub.y+Ub.dy-Kc;Ub.x+=Ib;Ub.dx-=Ib}}
function ya(Bb){Bb=mb||Ca(Bb);var Nb=Bb[0];Nb.x=Nb.y=0;Nb.value?(Nb.dx=Ia[0],Nb.dy=Ia[1]):Nb.dx=Nb.dy=0;mb&&Ca.revalue(Nb);O([Nb],Nb.dx*Nb.dy/Nb.value);(mb?ra:ea)(Nb);bb&&(mb=Bb);return Bb}var Ca=zb.layout.hierarchy(),Pa=Math.round,Ia=[1,1],Oa=null,Ua=vg,bb=!1,mb,vb="squarify",Ab=.5*(1+Math.sqrt(5));ya.size=function(Bb){if(!arguments.length)return Ia;Ia=Bb;return ya};ya.padding=function(Bb){function Nb(rc){var vc=Bb.call(ya,rc,rc.depth);return null==vc?vg(rc):wg(rc,"number"===typeof vc?[vc,vc,vc,
vc]:vc)}function Ub(rc){return wg(rc,Bb)}if(!arguments.length)return Oa;var fc;Ua=null==(Oa=Bb)?vg:"function"===(fc=typeof Bb)?Nb:"number"===fc?(Bb=[Bb,Bb,Bb,Bb],Ub):Ub;return ya};ya.round=function(Bb){if(!arguments.length)return Pa!=Number;Pa=Bb?Math.round:Number;return ya};ya.sticky=function(Bb){if(!arguments.length)return bb;bb=Bb;mb=null;return ya};ya.ratio=function(Bb){if(!arguments.length)return Ab;Ab=Bb;return ya};ya.mode=function(Bb){if(!arguments.length)return vb;vb=Bb+"";return ya};return jf(ya,
Ca)};zb.random={normal:function(O,ea){var ra=arguments.length;2>ra&&(ea=1);1>ra&&(O=0);return function(){do{var xa=2*Math.random()-1;var ya=2*Math.random()-1;ya=xa*xa+ya*ya}while(!ya||1<ya);return O+ea*xa*Math.sqrt(-2*Math.log(ya)/ya)}},logNormal:function(){var O=zb.random.normal.apply(zb,arguments);return function(){return Math.exp(O())}},bates:function(O){var ea=zb.random.irwinHall(O);return function(){return ea()/O}},irwinHall:function(O){return function(){for(var ea=0,ra=0;ra<O;ra++)ea+=Math.random();
return ea}}};zb.scale={};var Ri={floor:x,ceil:x};zb.scale.linear=function(){return V([0,1],[0,1],Qg,!1)};var Ph={s:1,g:1,p:1,r:1,e:1};zb.scale.log=function(){return Za(zb.scale.linear().domain([0,1]),10,!0,[1,10])};var dg=zb.format(".0e"),Lf={floor:function(O){return-Math.ceil(-O)},ceil:function(O){return-Math.floor(-O)}};zb.scale.pow=function(){return wb(zb.scale.linear(),1,[0,1])};zb.scale.sqrt=function(){return zb.scale.pow().exponent(.5)};zb.scale.ordinal=function(){return Eb([],{t:"range",a:[[]]})};
zb.scale.category10=function(){return zb.scale.ordinal().range(zg)};zb.scale.category20=function(){return zb.scale.ordinal().range(pg)};zb.scale.category20b=function(){return zb.scale.ordinal().range(Ag)};zb.scale.category20c=function(){return zb.scale.ordinal().range(Vh)};var zg=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Ga),pg=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,
8355711,13092807,12369186,14408589,1556175,10410725].map(Ga),Ag=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Ga),Vh=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Ga);zb.scale.quantile=function(){return kc([],[])};zb.scale.quantize=function(){return jc(0,
1,[0,1])};zb.scale.threshold=function(){return $b([.5],[0,1])};zb.scale.identity=function(){return ic([0,1])};zb.svg={};zb.svg.arc=function(){function O(){var Ua=Math.max(0,+ra.apply(this,arguments)),bb=Math.max(0,+xa.apply(this,arguments)),mb=Pa.apply(this,arguments)-Ye,vb=Ia.apply(this,arguments)-Ye,Ab=Math.abs(vb-mb),Bb=mb>vb?0:1;if(bb<Ua){var Nb=bb;bb=Ua;Ua=Nb}if(Ab>=qj)return ea(bb,Bb)+(Ua?ea(Ua,1-Bb):"")+"Z";var Ub,fc=0,rc=0,vc=[];if(Ub=(+Oa.apply(this,arguments)||0)/2){var zc=Ca===qg?Math.sqrt(Ua*
Ua+bb*bb):+Ca.apply(this,arguments);Bb||(rc*=-1);bb&&(rc=ia(zc/bb*Math.sin(Ub)));Ua&&(fc=ia(zc/Ua*Math.sin(Ub)))}if(bb){zc=bb*Math.cos(mb+rc);Ub=bb*Math.sin(mb+rc);var Kc=bb*Math.cos(vb-rc);var Ib=bb*Math.sin(vb-rc);var Wb=Math.abs(vb-mb-2*rc)<=Yd?0:1;rc&&Fc(zc,Ub,Kc,Ib)===Bb^Wb&&(Kc=(mb+vb)/2,zc=bb*Math.cos(Kc),Ub=bb*Math.sin(Kc),Kc=Ib=null)}else zc=Ub=0;if(Ua){rc=Ua*Math.cos(vb-fc);var sc=Ua*Math.sin(vb-fc);var Tc=Ua*Math.cos(mb+fc);var Vc=Ua*Math.sin(mb+fc);var Xc=Math.abs(mb-vb+2*fc)<=Yd?0:1;
fc&&Fc(rc,sc,Tc,Vc)===1-Bb^Xc&&(Tc=(mb+vb)/2,rc=Ua*Math.cos(Tc),sc=Ua*Math.sin(Tc),Tc=Vc=null)}else rc=sc=0;1E-6<Ab&&.001<(Nb=Math.min(Math.abs(bb-Ua)/2,+ya.apply(this,arguments)))?(Wb=Ua<bb^Bb?0:1,Xc=mb=Nb,Ab<Yd&&(Ab=null==Tc?[rc,sc]:null==Kc?[zc,Ub]:hh([zc,Ub],[Tc,Vc],[Kc,Ib],[rc,sc]),Xc=zc-Ab[0],mb=Ub-Ab[1],vb=Kc-Ab[0],fc=Ib-Ab[1],mb=1/Math.sin(Math.acos((Xc*vb+mb*fc)/(Math.sqrt(Xc*Xc+mb*mb)*Math.sqrt(vb*vb+fc*fc)))/2),Ab=Math.sqrt(Ab[0]*Ab[0]+Ab[1]*Ab[1]),Xc=Math.min(Nb,(Ua-Ab)/(mb-1)),mb=Math.min(Nb,
(bb-Ab)/(mb+1))),null!=Kc?(Ab=hd(null==Tc?[rc,sc]:[Tc,Vc],[zc,Ub],bb,mb,Bb),vb=hd([Kc,Ib],[rc,sc],bb,mb,Bb),Nb===mb?vc.push("M",Ab[0],"A",mb,",",mb," 0 0,",Wb," ",Ab[1],"A",bb,",",bb," 0 ",1-Bb^Fc(Ab[1][0],Ab[1][1],vb[1][0],vb[1][1]),",",Bb," ",vb[1],"A",mb,",",mb," 0 0,",Wb," ",vb[0]):vc.push("M",Ab[0],"A",mb,",",mb," 0 1,",Wb," ",vb[0])):vc.push("M",zc,",",Ub),null!=Tc?(bb=hd([zc,Ub],[Tc,Vc],Ua,-Xc,Bb),Kc=hd([rc,sc],null==Kc?[zc,Ub]:[Kc,Ib],Ua,-Xc,Bb),Nb===Xc?vc.push("L",Kc[0],"A",Xc,",",Xc," 0 0,",
Wb," ",Kc[1],"A",Ua,",",Ua," 0 ",Bb^Fc(Kc[1][0],Kc[1][1],bb[1][0],bb[1][1]),",",1-Bb," ",bb[1],"A",Xc,",",Xc," 0 0,",Wb," ",bb[0]):vc.push("L",Kc[0],"A",Xc,",",Xc," 0 0,",Wb," ",bb[0])):vc.push("L",rc,",",sc)):(vc.push("M",zc,",",Ub),null!=Kc&&vc.push("A",bb,",",bb," 0 ",Wb,",",Bb," ",Kc,",",Ib),vc.push("L",rc,",",sc),null!=Tc&&vc.push("A",Ua,",",Ua," 0 ",Xc,",",1-Bb," ",Tc,",",Vc));vc.push("Z");return vc.join("")}function ea(Ua,bb){return"M0,"+Ua+"A"+Ua+","+Ua+" 0 1,"+bb+" 0,"+-Ua+"A"+Ua+","+Ua+
" 0 1,"+bb+" 0,"+Ua}var ra=Cb,xa=bc,ya=gc,Ca=qg,Pa=Ec,Ia=Yc,Oa=fd;O.innerRadius=function(Ua){if(!arguments.length)return ra;ra=La(Ua);return O};O.outerRadius=function(Ua){if(!arguments.length)return xa;xa=La(Ua);return O};O.cornerRadius=function(Ua){if(!arguments.length)return ya;ya=La(Ua);return O};O.padRadius=function(Ua){if(!arguments.length)return Ca;Ca=Ua==qg?qg:La(Ua);return O};O.startAngle=function(Ua){if(!arguments.length)return Pa;Pa=La(Ua);return O};O.endAngle=function(Ua){if(!arguments.length)return Ia;
Ia=La(Ua);return O};O.padAngle=function(Ua){if(!arguments.length)return Oa;Oa=La(Ua);return O};O.centroid=function(){var Ua=(+ra.apply(this,arguments)+ +xa.apply(this,arguments))/2,bb=(+Pa.apply(this,arguments)+ +Ia.apply(this,arguments))/2-Ye;return[Math.cos(bb)*Ua,Math.sin(bb)*Ua]};return O};var qg="auto";zb.svg.line=function(){return dd(x)};var xk=zb.map({linear:sd,"linear-closed":vd,step:function(O){for(var ea=0,ra=O.length,xa=O[0],ya=[xa[0],",",xa[1]];++ea<ra;)ya.push("H",(xa[0]+(xa=O[ea])[0])/
2,"V",xa[1]);1<ra&&ya.push("H",xa[0]);return ya.join("")},"step-before":od,"step-after":$d,basis:ye,"basis-open":function(O){if(4>O.length)return sd(O);for(var ea=[],ra=-1,xa=O.length,ya,Ca=[0],Pa=[0];3>++ra;)ya=O[ra],Ca.push(ya[0]),Pa.push(ya[1]);ea.push(ue(Zg,Ca)+","+ue(Zg,Pa));for(--ra;++ra<xa;)ya=O[ra],Ca.shift(),Ca.push(ya[0]),Pa.shift(),Pa.push(ya[1]),Nd(ea,Ca,Pa);return ea.join("")},"basis-closed":function(O){for(var ea,ra=-1,xa=O.length,ya=xa+4,Ca,Pa=[],Ia=[];4>++ra;)Ca=O[ra%xa],Pa.push(Ca[0]),
Ia.push(Ca[1]);ea=[ue(Zg,Pa),",",ue(Zg,Ia)];for(--ra;++ra<ya;)Ca=O[ra%xa],Pa.shift(),Pa.push(Ca[0]),Ia.shift(),Ia.push(Ca[1]),Nd(ea,Pa,Ia);return ea.join("")},bundle:function(O,ea){var ra=O.length-1;if(ra)for(var xa=O[0][0],ya=O[0][1],Ca=O[ra][0]-xa,Pa=O[ra][1]-ya,Ia=-1,Oa,Ua;++Ia<=ra;)Oa=O[Ia],Ua=Ia/ra,Oa[0]=ea*Oa[0]+(1-ea)*(xa+Ua*Ca),Oa[1]=ea*Oa[1]+(1-ea)*(ya+Ua*Pa);return ye(O)},cardinal:function(O,ea){return 3>O.length?sd(O):O[0]+Xd(O,xe(O,ea))},"cardinal-open":function(O,ea){return 4>O.length?
sd(O):O[1]+Xd(O.slice(1,-1),xe(O,ea))},"cardinal-closed":function(O,ea){return 3>O.length?vd(O):O[0]+Xd((O.push(O[0]),O),xe([O[O.length-2]].concat(O,[O[1]]),ea))},monotone:function(O){if(3>O.length)O=sd(O);else{var ea=O[0],ra=[],xa;var ya=0;var Ca=O.length-1;var Pa=[];var Ia=O[1];for(xa=Pa[0]=ie(O[0],Ia);++ya<Ca;)Pa[ya]=(xa+(xa=ie(Ia,Ia=O[ya+1])))/2;Pa[ya]=xa;for(var Oa=-1,Ua=O.length-1;++Oa<Ua;)ya=ie(O[Oa],O[Oa+1]),1E-6>Wd(ya)?Pa[Oa]=Pa[Oa+1]=0:(Ca=Pa[Oa]/ya,Ia=Pa[Oa+1]/ya,xa=Ca*Ca+Ia*Ia,9<xa&&(xa=
3*ya/Math.sqrt(xa),Pa[Oa]=xa*Ca,Pa[Oa+1]=xa*Ia));for(Oa=-1;++Oa<=Ua;)xa=(O[Math.min(Ua,Oa+1)][0]-O[Math.max(0,Oa-1)][0])/(6*(1+Pa[Oa]*Pa[Oa])),ra.push([xa||0,Pa[Oa]*xa||0]);O=ea+Xd(O,ra)}return O}});xk.forEach(function(O,ea){ea.key=O;ea.closed=/-closed$/.test(O)});var Uk=[0,2/3,1/3,0],Yf=[0,1/3,2/3,0],Zg=[0,1/6,2/3,1/6];zb.svg.line.radial=function(){var O=dd(Le);O.radius=O.x;delete O.x;O.angle=O.y;delete O.y;return O};od.reverse=$d;$d.reverse=od;zb.svg.area=function(){return se(x)};zb.svg.area.radial=
function(){var O=se(Le);O.radius=O.x;delete O.x;O.innerRadius=O.x0;delete O.x0;O.outerRadius=O.x1;delete O.x1;O.angle=O.y;delete O.y;O.startAngle=O.y0;delete O.y0;O.endAngle=O.y1;delete O.y1;return O};zb.svg.chord=function(){function O(Oa,Ua){var bb=ea(this,xa,Oa,Ua);Oa=ea(this,ya,Oa,Ua);return"M"+bb.p0+ra(bb.r,bb.p1,bb.a1-bb.a0)+(bb.a0==Oa.a0&&bb.a1==Oa.a1?"Q 0,0 "+bb.p0:"Q 0,0 "+Oa.p0+ra(Oa.r,Oa.p1,Oa.a1-Oa.a0)+("Q 0,0 "+bb.p0))+"Z"}function ea(Oa,Ua,bb,mb){var vb=Ua.call(Oa,bb,mb);Ua=Ca.call(Oa,
vb,mb);bb=Pa.call(Oa,vb,mb)-Ye;Oa=Ia.call(Oa,vb,mb)-Ye;return{r:Ua,a0:bb,a1:Oa,p0:[Ua*Math.cos(bb),Ua*Math.sin(bb)],p1:[Ua*Math.cos(Oa),Ua*Math.sin(Oa)]}}function ra(Oa,Ua,bb){return"A"+Oa+","+Oa+" 0 "+ +(bb>Yd)+",1 "+Ua}var xa=kd,ya=nd,Ca=Ne,Pa=Ec,Ia=Yc;O.radius=function(Oa){if(!arguments.length)return Ca;Ca=La(Oa);return O};O.source=function(Oa){if(!arguments.length)return xa;xa=La(Oa);return O};O.target=function(Oa){if(!arguments.length)return ya;ya=La(Oa);return O};O.startAngle=function(Oa){if(!arguments.length)return Pa;
Pa=La(Oa);return O};O.endAngle=function(Oa){if(!arguments.length)return Ia;Ia=La(Oa);return O};return O};zb.svg.diagonal=function(){function O(ya,Ca){var Pa=ea.call(this,ya,Ca);ya=ra.call(this,ya,Ca);Ca=(Pa.y+ya.y)/2;Pa=[Pa,{x:Pa.x,y:Ca},{x:ya.x,y:Ca},ya];Pa=Pa.map(xa);return"M"+Pa[0]+"C"+Pa[1]+" "+Pa[2]+" "+Pa[3]}var ea=kd,ra=nd,xa=rf;O.source=function(ya){if(!arguments.length)return ea;ea=La(ya);return O};O.target=function(ya){if(!arguments.length)return ra;ra=La(ya);return O};O.projection=function(ya){if(!arguments.length)return xa;
xa=ya;return O};return O};zb.svg.diagonal.radial=function(){var O=zb.svg.diagonal(),ea=rf,ra=O.projection;O.projection=function(xa){return arguments.length?ra(bf(ea=xa)):ea};return O};zb.svg.symbol=function(){function O(xa,ya){return(Zk.get(ea.call(this,xa,ya))||uf)(ra.call(this,xa,ya))}var ea=We,ra=qh;O.type=function(xa){if(!arguments.length)return ea;ea=La(xa);return O};O.size=function(xa){if(!arguments.length)return ra;ra=La(xa);return O};return O};var Zk=zb.map({circle:uf,cross:function(O){O=
Math.sqrt(O/5)/2;return"M"+-3*O+","+-O+"H"+-O+"V"+-3*O+"H"+O+"V"+-O+"H"+3*O+"V"+O+"H"+O+"V"+3*O+"H"+-O+"V"+O+"H"+-3*O+"Z"},diamond:function(O){O=Math.sqrt(O/(2*Wh));var ea=O*Wh;return"M0,"+-O+"L"+ea+",0 0,"+O+" "+-ea+",0Z"},square:function(O){O=Math.sqrt(O)/2;return"M"+-O+","+-O+"L"+O+","+-O+" "+O+","+O+" "+-O+","+O+"Z"},"triangle-down":function(O){O=Math.sqrt(O/wj);var ea=O*wj/2;return"M0,"+ea+"L"+O+","+-ea+" "+-O+","+-ea+"Z"},"triangle-up":function(O){O=Math.sqrt(O/wj);var ea=O*wj/2;return"M0,"+
-ea+"L"+O+","+ea+" "+-O+","+ea+"Z"}});zb.svg.symbolTypes=Zk.keys();var wj=Math.sqrt(3),Wh=Math.tan(30*ce);Ce.transition=function(O){var ea=ri||++$k;O=ve(O);for(var ra=[],xa,ya,Ca=dk||{time:Date.now(),ease:Ie,delay:0,duration:250},Pa=-1,Ia=this.length;++Pa<Ia;){ra.push(xa=[]);for(var Oa=this[Pa],Ua=-1,bb=Oa.length;++Ua<bb;)(ya=Oa[Ua])&&Je(ya,Ua,O,ea,Ca),xa.push(ya)}return Qh(ra,O,ea)};Ce.interrupt=function(O){return this.each(null==O?wf:mg(ve(O)))};var wf=mg(ve()),kf=[],$k=0,ri,dk;kf.call=Ce.call;
kf.empty=Ce.empty;kf.node=Ce.node;kf.size=Ce.size;zb.transition=function(O,ea){return O&&O.transition?ri?O.transition(ea):O:zb.selection().transition(O)};zb.transition.prototype=kf;kf.select=function(O){var ea=this.id,ra=this.namespace,xa=[],ya,Ca,Pa;O=J(O);for(var Ia=-1,Oa=this.length;++Ia<Oa;){xa.push(ya=[]);for(var Ua=this[Ia],bb=-1,mb=Ua.length;++bb<mb;)(Pa=Ua[bb])&&(Ca=O.call(Pa,Pa.__data__,bb,Ia))?("__data__"in Pa&&(Ca.__data__=Pa.__data__),Je(Ca,bb,ra,ea,Pa[ra][ea]),ya.push(Ca)):ya.push(null)}return Qh(xa,
ra,ea)};kf.selectAll=function(O){var ea=this.id,ra=this.namespace,xa=[],ya,Ca;O=L(O);for(var Pa=-1,Ia=this.length;++Pa<Ia;)for(var Oa=this[Pa],Ua=-1,bb=Oa.length;++Ua<bb;)if(ya=Oa[Ua]){var mb=ya[ra][ea];var vb=O.call(ya,ya.__data__,Ua,Pa);xa.push(ya=[]);for(var Ab=-1,Bb=vb.length;++Ab<Bb;)(Ca=vb[Ab])&&Je(Ca,Ab,ra,ea,mb),ya.push(Ca)}return Qh(xa,ra,ea)};kf.filter=function(O){var ea=[],ra,xa;"function"!==typeof O&&(O=X(O));for(var ya=0,Ca=this.length;ya<Ca;ya++){ea.push(ra=[]);var Pa=this[ya];for(var Ia=
0,Oa=Pa.length;Ia<Oa;Ia++)(xa=Pa[Ia])&&O.call(xa,xa.__data__,Ia,ya)&&ra.push(xa)}return Qh(ea,this.namespace,this.id)};kf.tween=function(O,ea){var ra=this.id,xa=this.namespace;return 2>arguments.length?this.node()[xa][ra].tween.get(O):aa(this,null==ea?function(ya){ya[xa][ra].tween.remove(O)}:function(ya){ya[xa][ra].tween.set(O,ea)})};kf.attr=function(O,ea){function ra(){this.removeAttribute(Ia)}function xa(){this.removeAttributeNS(Ia.space,Ia.local)}function ya(Oa){return null==Oa?ra:(Oa+="",function(){var Ua=
this.getAttribute(Ia),bb;return Ua!==Oa&&(bb=Pa(Ua,Oa),function(mb){this.setAttribute(Ia,bb(mb))})})}function Ca(Oa){return null==Oa?xa:(Oa+="",function(){var Ua=this.getAttributeNS(Ia.space,Ia.local),bb;return Ua!==Oa&&(bb=Pa(Ua,Oa),function(mb){this.setAttributeNS(Ia.space,Ia.local,bb(mb))})})}if(2>arguments.length){for(ea in O)this.attr(ea,O[ea]);return this}var Pa="transform"==O?Ef:Qg,Ia=zb.ns.qualify(O);return Ff(this,"attr."+O,ea,Ia.local?Ca:ya)};kf.attrTween=function(O,ea){function ra(Ca,Pa){var Ia=
ea.call(this,Ca,Pa,this.getAttribute(ya));return Ia&&function(Oa){this.setAttribute(ya,Ia(Oa))}}function xa(Ca,Pa){var Ia=ea.call(this,Ca,Pa,this.getAttributeNS(ya.space,ya.local));return Ia&&function(Oa){this.setAttributeNS(ya.space,ya.local,Ia(Oa))}}var ya=zb.ns.qualify(O);return this.tween("attr."+O,ya.local?xa:ra)};kf.style=function(O,ea,ra){function xa(){this.style.removeProperty(O)}var ya=arguments.length;if(3>ya){if("string"!==typeof O){2>ya&&(ea="");for(ra in O)this.style(ra,O[ra],ea);return this}ra=
""}return Ff(this,"style."+O,ea,function(Ca){return null==Ca?xa:(Ca+="",function(){var Pa=q(this).getComputedStyle(this,null).getPropertyValue(O),Ia;return Pa!==Ca&&(Ia=Qg(Pa,Ca),function(Oa){this.style.setProperty(O,Ia(Oa),ra)})})})};kf.styleTween=function(O,ea,ra){3>arguments.length&&(ra="");return this.tween("style."+O,function(xa,ya){var Ca=ea.call(this,xa,ya,q(this).getComputedStyle(this,null).getPropertyValue(O));return Ca&&function(Pa){this.style.setProperty(O,Ca(Pa),ra)}})};kf.text=function(O){return Ff(this,
"text",O,Si)};kf.remove=function(){var O=this.namespace;return this.each("end.transition",function(){var ea;2>this[O].count&&(ea=this.parentNode)&&ea.removeChild(this)})};kf.ease=function(O){var ea=this.id,ra=this.namespace;if(1>arguments.length)return this.node()[ra][ea].ease;"function"!==typeof O&&(O=zb.ease.apply(zb,arguments));return aa(this,function(xa){xa[ra][ea].ease=O})};kf.delay=function(O){var ea=this.id,ra=this.namespace;return 1>arguments.length?this.node()[ra][ea].delay:aa(this,"function"===
typeof O?function(xa,ya,Ca){xa[ra][ea].delay=+O.call(xa,xa.__data__,ya,Ca)}:(O=+O,function(xa){xa[ra][ea].delay=O}))};kf.duration=function(O){var ea=this.id,ra=this.namespace;return 1>arguments.length?this.node()[ra][ea].duration:aa(this,"function"===typeof O?function(xa,ya,Ca){xa[ra][ea].duration=Math.max(1,O.call(xa,xa.__data__,ya,Ca))}:(O=Math.max(1,O),function(xa){xa[ra][ea].duration=O}))};kf.each=function(O,ea){var ra=this.id,xa=this.namespace;if(2>arguments.length){var ya=dk,Ca=ri;try{ri=ra,
aa(this,function(Pa,Ia,Oa){dk=Pa[xa][ra];O.call(Pa,Pa.__data__,Ia,Oa)})}finally{dk=ya,ri=Ca}}else aa(this,function(Pa){Pa=Pa[xa][ra];(Pa.event||(Pa.event=zb.dispatch("start","end","interrupt"))).on(O,ea)});return this};kf.transition=function(){for(var O=this.id,ea=++$k,ra=this.namespace,xa=[],ya,Ca,Pa,Ia,Oa=0,Ua=this.length;Oa<Ua;Oa++){xa.push(ya=[]);Ca=this[Oa];for(var bb=0,mb=Ca.length;bb<mb;bb++){if(Pa=Ca[bb])Ia=Pa[ra][O],Je(Pa,bb,ra,ea,{time:Ia.time,ease:Ia.ease,delay:Ia.delay+Ia.duration,duration:Ia.duration});
ya.push(Pa)}}return Qh(xa,ra,ea)};zb.svg.axis=function(){function O(Ua){Ua.each(function(){var bb=zb.select(this),mb=this.__chart__||ea,vb=this.__chart__=ea.copy(),Ab=null==Ia?vb.ticks?vb.ticks.apply(vb,Pa):vb.domain():Ia,Bb=null==Oa?vb.tickFormat?vb.tickFormat.apply(vb,Pa):x:Oa,Nb=bb.selectAll(".tick").data(Ab,vb);Ab=Nb.enter().insert("g",".domain").attr("class","tick").style("opacity",1E-6);var Ub=zb.transition(Nb.exit()).style("opacity",1E-6).remove(),fc=zb.transition(Nb.order()).style("opacity",
1),rc=Math.max(xa,0)+Ca,vc=Xf(vb);bb=bb.selectAll(".domain").data([0]);bb=(bb.enter().append("path").attr("class","domain"),zb.transition(bb));Ab.append("line");Ab.append("text");var zc=Ab.select("line"),Kc=fc.select("line");Nb=Nb.select("text").text(Bb);var Ib=Ab.select("text"),Wb=fc.select("text"),sc="top"===ra||"left"===ra?-1:1;if("bottom"===ra||"top"===ra){Bb=eg;var Tc="x";var Vc="y";var Xc="x2";var Nc="y2";Nb.attr("dy",0>sc?"0em":".71em").style("text-anchor","middle");bb.attr("d","M"+vc[0]+","+
sc*ya+"V0H"+vc[1]+"V"+sc*ya)}else Bb=Mf,Tc="y",Vc="x",Xc="y2",Nc="x2",Nb.attr("dy",".32em").style("text-anchor",0>sc?"end":"start"),bb.attr("d","M"+sc*ya+","+vc[0]+"H0V"+vc[1]+"H"+sc*ya);zc.attr(Nc,sc*xa);Ib.attr(Vc,sc*rc);Kc.attr(Xc,0).attr(Nc,sc*xa);Wb.attr(Tc,0).attr(Vc,sc*rc);if(vb.rangeBand){var yd=vb,Rd=yd.rangeBand()/2;mb=vb=function(ae){return yd(ae)+Rd}}else mb.rangeBand?mb=vb:Ub.call(Bb,vb,mb);Ab.call(Bb,mb,vb);fc.call(Bb,vb,vb)})}var ea=zb.scale.linear(),ra=Gk,xa=6,ya=6,Ca=3,Pa=[10],Ia=
null,Oa;O.scale=function(Ua){if(!arguments.length)return ea;ea=Ua;return O};O.orient=function(Ua){if(!arguments.length)return ra;ra=Ua in Kg?Ua+"":Gk;return O};O.ticks=function(){if(!arguments.length)return Pa;Pa=$f(arguments);return O};O.tickValues=function(Ua){if(!arguments.length)return Ia;Ia=Ua;return O};O.tickFormat=function(Ua){if(!arguments.length)return Oa;Oa=Ua;return O};O.tickSize=function(Ua){var bb=arguments.length;if(!bb)return xa;xa=+Ua;ya=+arguments[bb-1];return O};O.innerTickSize=
function(Ua){if(!arguments.length)return xa;xa=+Ua;return O};O.outerTickSize=function(Ua){if(!arguments.length)return ya;ya=+Ua;return O};O.tickPadding=function(Ua){if(!arguments.length)return Ca;Ca=+Ua;return O};O.tickSubdivide=function(){return arguments.length&&O};return O};var Gk="bottom",Kg={top:1,right:1,bottom:1,left:1};zb.svg.brush=function(){function O(Nb){Nb.each(function(){var Ub=zb.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",
ya).on("touchstart.brush",ya),fc=Ub.selectAll(".background").data([0]);fc.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");Ub.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var rc=Ub.selectAll(".resize").data(Bb,x);rc.exit().remove();rc.enter().append("g").attr("class",function(vc){return"resize "+vc}).style("cursor",function(vc){return nl[vc]}).append("rect").attr("x",function(vc){return/[ew]$/.test(vc)?
-3:null}).attr("y",function(vc){return/^[ns]/.test(vc)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");rc.style("display",O.empty()?"none":null);Ub=zb.transition(Ub);fc=zb.transition(fc);Pa&&(rc=Xf(Pa),fc.attr("x",rc[0]).attr("width",rc[1]-rc[0]),ra(Ub));Ia&&(rc=Xf(Ia),fc.attr("y",rc[0]).attr("height",rc[1]-rc[0]),xa(Ub));ea(Ub)})}function ea(Nb){Nb.selectAll(".resize").attr("transform",function(Ub){return"translate("+Oa[+/e$/.test(Ub)]+","+Ua[+/^s/.test(Ub)]+")"})}function ra(Nb){Nb.select(".extent").attr("x",
Oa[0]);Nb.selectAll(".extent,.n>rect,.s>rect").attr("width",Oa[1]-Oa[0])}function xa(Nb){Nb.select(".extent").attr("y",Ua[0]);Nb.selectAll(".extent,.e>rect,.w>rect").attr("height",Ua[1]-Ua[0])}function ya(){function Nb(){var he=zb.mouse(rc),de=!1;ae&&(he[0]+=ae[0],he[1]+=ae[1]);Tc||(zb.event.altKey?(Xc||(Xc=[(Oa[0]+Oa[1])/2,(Ua[0]+Ua[1])/2]),Nc[0]=Oa[+(he[0]<Xc[0])],Nc[1]=Ua[+(he[1]<Xc[1])]):Xc=null);Wb&&Ub(he,Pa,0)&&(ra(Kc),de=!0);sc&&Ub(he,Ia,1)&&(xa(Kc),de=!0);de&&(ea(Kc),zc({type:"brush",mode:Tc?
"move":"resize"}))}function Ub(he,de,ne){var Pd=Xf(de);de=Pd[0];var yf=Pd[1];Pd=Nc[ne];var Ze=ne?Ua:Oa,hg=Ze[1]-Ze[0];Tc&&(de-=Pd,yf-=hg+Pd);he=(ne?Ab:vb)?Math.max(de,Math.min(yf,he[ne])):he[ne];Tc?de=(he+=Pd)+hg:(Xc&&(Pd=Math.max(de,Math.min(yf,2*Xc[ne]-he))),Pd<he?(de=he,he=Pd):de=Pd);if(Ze[0]!=he||Ze[1]!=de)return ne?mb=null:bb=null,Ze[0]=he,Ze[1]=de,!0}function fc(){Nb();Kc.style("pointer-events","all").selectAll(".resize").style("display",O.empty()?"none":null);zb.select("body").style("cursor",
null);yd.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);Vc();zc({type:"brushend"})}var rc=this,vc=zb.select(zb.event.target),zc=Ca.of(rc,arguments),Kc=zb.select(rc),Ib=vc.datum(),Wb=!/^(n|s)$/.test(Ib)&&Pa,sc=!/^(e|w)$/.test(Ib)&&Ia,Tc=vc.classed("extent"),Vc=qa(rc),Xc,Nc=zb.mouse(rc),yd=zb.select(q(rc)).on("keydown.brush",function(){32==zb.event.keyCode&&(Tc||(Xc=null,Nc[0]-=Oa[1],Nc[1]-=Ua[1],
Tc=2),t())}).on("keyup.brush",function(){32==zb.event.keyCode&&2==Tc&&(Nc[0]+=Oa[1],Nc[1]+=Ua[1],Tc=0,t())});if(zb.event.changedTouches)yd.on("touchmove.brush",Nb).on("touchend.brush",fc);else yd.on("mousemove.brush",Nb).on("mouseup.brush",fc);Kc.interrupt().selectAll("*").interrupt();if(Tc)Nc[0]=Oa[0]-Nc[0],Nc[1]=Ua[0]-Nc[1];else if(Ib){var Rd=+/w$/.test(Ib);Ib=+/^n/.test(Ib);var ae=[Oa[1-Rd]-Nc[0],Ua[1-Ib]-Nc[1]];Nc[0]=Oa[Rd];Nc[1]=Ua[Ib]}else zb.event.altKey&&(Xc=Nc.slice());Kc.style("pointer-events",
"none").selectAll(".resize").style("display",null);zb.select("body").style("cursor",vc.style("cursor"));zc({type:"brushstart"});Nb()}var Ca=F(O,"brushstart","brush","brushend"),Pa=null,Ia=null,Oa=[0,0],Ua=[0,0],bb,mb,vb=!0,Ab=!0,Bb=Hk[0];O.event=function(Nb){Nb.each(function(){var Ub=Ca.of(this,arguments),fc={x:Oa,y:Ua,i:bb,j:mb},rc=this.__chart__||fc;this.__chart__=fc;ri?zb.select(this).transition().each("start.brush",function(){bb=rc.i;mb=rc.j;Oa=rc.x;Ua=rc.y;Ub({type:"brushstart"})}).tween("brush:brush",
function(){var vc=ki(Oa,fc.x),zc=ki(Ua,fc.y);bb=mb=null;return function(Kc){Oa=fc.x=vc(Kc);Ua=fc.y=zc(Kc);Ub({type:"brush",mode:"resize"})}}).each("end.brush",function(){bb=fc.i;mb=fc.j;Ub({type:"brush",mode:"resize"});Ub({type:"brushend"})}):(Ub({type:"brushstart"}),Ub({type:"brush",mode:"resize"}),Ub({type:"brushend"}))})};O.x=function(Nb){if(!arguments.length)return Pa;Pa=Nb;Bb=Hk[!Pa<<1|!Ia];return O};O.y=function(Nb){if(!arguments.length)return Ia;Ia=Nb;Bb=Hk[!Pa<<1|!Ia];return O};O.clamp=function(Nb){if(!arguments.length)return Pa&&
Ia?[vb,Ab]:Pa?vb:Ia?Ab:null;Pa&&Ia?(vb=!!Nb[0],Ab=!!Nb[1]):Pa?vb=!!Nb:Ia&&(Ab=!!Nb);return O};O.extent=function(Nb){if(!arguments.length){if(Pa)if(bb){var Ub=bb[0];var fc=bb[1]}else if(Ub=Oa[0],fc=Oa[1],Pa.invert&&(Ub=Pa.invert(Ub),fc=Pa.invert(fc)),fc<Ub){var rc=Ub;Ub=fc;fc=rc}if(Ia)if(mb){var vc=mb[0];var zc=mb[1]}else vc=Ua[0],zc=Ua[1],Ia.invert&&(vc=Ia.invert(vc),zc=Ia.invert(zc)),zc<vc&&(rc=vc,vc=zc,zc=rc);return Pa&&Ia?[[Ub,vc],[fc,zc]]:Pa?[Ub,fc]:Ia&&[vc,zc]}Pa&&(Ub=Nb[0],fc=Nb[1],Ia&&(Ub=
Ub[0],fc=fc[0]),bb=[Ub,fc],Pa.invert&&(Ub=Pa(Ub),fc=Pa(fc)),fc<Ub&&(rc=Ub,Ub=fc,fc=rc),Ub!=Oa[0]||fc!=Oa[1])&&(Oa=[Ub,fc]);Ia&&(vc=Nb[0],zc=Nb[1],Pa&&(vc=vc[1],zc=zc[1]),mb=[vc,zc],Ia.invert&&(vc=Ia(vc),zc=Ia(zc)),zc<vc&&(rc=vc,vc=zc,zc=rc),vc!=Ua[0]||zc!=Ua[1])&&(Ua=[vc,zc]);return O};O.clear=function(){O.empty()||(Oa=[0,0],Ua=[0,0],bb=mb=null);return O};O.empty=function(){return!!Pa&&Oa[0]==Oa[1]||!!Ia&&Ua[0]==Ua[1]};return zb.rebind(O,Ca,"on")};var nl={n:"ns-resize",e:"ew-resize",s:"ns-resize",
w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Hk=["n e s w nw ne se sw".split(" "),["e","w"],["n","s"],[]],Ik=Cd.format=tj.timeFormat,Jk=Ik.utc,Kk=Jk("%Y-%m-%dT%H:%M:%S.%LZ");Ik.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?xg:Kk;xg.parse=function(O){O=new Date(O);return isNaN(O)?null:O};xg.toString=Kk.toString;Cd.second=Fb(function(O){return new ff(1E3*Math.floor(O/1E3))},function(O,ea){O.setTime(O.getTime()+1E3*Math.floor(ea))},function(O){return O.getSeconds()});
Cd.seconds=Cd.second.range;Cd.seconds.utc=Cd.second.utc.range;Cd.minute=Fb(function(O){return new ff(6E4*Math.floor(O/6E4))},function(O,ea){O.setTime(O.getTime()+6E4*Math.floor(ea))},function(O){return O.getMinutes()});Cd.minutes=Cd.minute.range;Cd.minutes.utc=Cd.minute.utc.range;Cd.hour=Fb(function(O){var ea=O.getTimezoneOffset()/60;return new ff(36E5*(Math.floor(O/36E5-ea)+ea))},function(O,ea){O.setTime(O.getTime()+36E5*Math.floor(ea))},function(O){return O.getHours()});Cd.hours=Cd.hour.range;Cd.hours.utc=
Cd.hour.utc.range;Cd.month=Fb(function(O){O=Cd.day(O);O.setDate(1);return O},function(O,ea){O.setMonth(O.getMonth()+ea)},function(O){return O.getMonth()});Cd.months=Cd.month.range;Cd.months.utc=Cd.month.utc.range;var rh=[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],Lk=[[Cd.second,1],[Cd.second,5],[Cd.second,15],[Cd.second,30],[Cd.minute,1],[Cd.minute,5],[Cd.minute,15],[Cd.minute,30],[Cd.hour,1],[Cd.hour,3],[Cd.hour,6],[Cd.hour,12],[Cd.day,1],
[Cd.day,2],[Cd.week,1],[Cd.month,1],[Cd.month,3],[Cd.year,1]],Mk=Ik.multi([[".%L",function(O){return O.getMilliseconds()}],[":%S",function(O){return O.getSeconds()}],["%I:%M",function(O){return O.getMinutes()}],["%I %p",function(O){return O.getHours()}],["%a %d",function(O){return O.getDay()&&1!=O.getDate()}],["%b %d",function(O){return 1!=O.getDate()}],["%B",function(O){return O.getMonth()}],["%Y",td]]),Ig={range:function(O,ea,ra){return zb.range(Math.ceil(O/ra)*ra,+ea,ra).map(vf)},floor:x,ceil:x};
Lk.year=Cd.year;Cd.scale=function(){return yg(zb.scale.linear(),Lk,Mk)};var al=Lk.map(function(O){return[O[0].utc,O[1]]}),ol=Jk.multi([[".%L",function(O){return O.getUTCMilliseconds()}],[":%S",function(O){return O.getUTCSeconds()}],["%I:%M",function(O){return O.getUTCMinutes()}],["%I %p",function(O){return O.getUTCHours()}],["%a %d",function(O){return O.getUTCDay()&&1!=O.getUTCDate()}],["%b %d",function(O){return 1!=O.getUTCDate()}],["%B",function(O){return O.getUTCMonth()}],["%Y",td]]);al.year=Cd.year.utc;
Cd.scale.utc=function(){return yg(zb.scale.linear(),al,ol)};zb.text=gb(function(O){return O.responseText});zb.json=function(O,ea){return ob(O,"application/json",Ti,ea)};zb.html=function(O,ea){return ob(O,"text/html",mi,ea)};zb.xml=gb(function(O){return O.responseXML});"object"===typeof K&&K.exports?K.exports=zb:this.d3=zb}()},{}],170:[function(b,K,G){K.exports=function(){for(var q=0;q<arguments.length;q++)if(void 0!==arguments[q])return arguments[q]}},{}],171:[function(b,K,G){function q(g,e){this.point=
g;this.index=e}function m(g,e){g=g.point;e=e.point;for(var n=g.length,p=0;p<n;++p){var c=e[p]-g[p];if(c)return c}return 0}function l(g,e,n){if(1===g)return n?[[-1,0]]:[];e=e.map(function(d,f){return[d[0],f]});e.sort(function(d,f){return d[0]-f[0]});for(var p=Array(g-1),c=1;c<g;++c)p[c-1]=[e[c-1][1],e[c][1]];n&&p.push([-1,p[0][1]],[p[g-1][1],-1]);return p}var h=b("incremental-convex-hull"),a=b("uniq");K.exports=function(g,e){var n=g.length;if(0===n)return[];var p=g[0].length;if(1>p)return[];if(1===
p)return l(n,g,e);for(var c=Array(n),d=1,f=0;f<n;++f){for(var k=g[f],r=Array(p+1),u=0,v=0;v<p;++v){var x=k[v];r[v]=x;u+=x*x}r[p]=u;c[f]=new q(r,f);d=Math.max(u,d)}a(c,m);n=c.length;g=Array(n+p+1);var C=Array(n+p+1);k=Array(p+1);for(f=0;f<=p;++f)k[f]=0;k[p]=(p+1)*(p+1)*d;g[0]=k.slice();C[0]=-1;for(f=0;f<=p;++f)r=k.slice(),r[f]=1,g[f+1]=r,C[f+1]=-1;for(f=0;f<n;++f)d=c[f],g[f+p+1]=d.point,C[f+p+1]=d.index;n=h(g,!1);n=e?n.filter(function(z){for(var y=0,D=0;D<=p;++D){var A=C[z[D]];if(0>A&&2<=++y)return!1;
z[D]=A}return!0}):n.filter(function(z){for(var y=0;y<=p;++y){var D=C[z[y]];if(0>D)return!1;z[y]=D}return!0});if(p&1)for(f=0;f<n.length;++f)d=n[f],r=d[0],d[0]=d[1],d[1]=r;return n}},{"incremental-convex-hull":459,uniq:597}],172:[function(b,K,G){function q(a,g){Array.isArray(a)&&(a=a.join(", "));var e={},n=16,p=.05;if(g)if(2===g.length&&"number"===typeof g[0])var c=m(g);else Array.isArray(g)?c=g:(g.o?c=m(g.o):g.pairs&&(c=g.pairs),g.fontSize&&(n=g.fontSize),null!=g.threshold&&(p=g.threshold));c||(c=
h);l.font=n+"px "+a;for(a=0;a<c.length;a++){g=c[a];var d=l.measureText(g[0]).width+l.measureText(g[1]).width,f=l.measureText(g).width;Math.abs(d-f)>n*p&&(e[g]=(f-d)/n*1E3)}return e}function m(a){for(var g=[],e=a[0];e<=a[1];e++)for(var n=String.fromCharCode(e),p=a[0];p<a[1];p++){var c=String.fromCharCode(p);g.push(n+c)}return g}K.exports=q;var l=(q.canvas=document.createElement("canvas")).getContext("2d"),h=m([32,126]);q.createPairs=m;q.ascii=h},{}],173:[function(b,K,G){(function(q){(function(){var m=
!1;if("undefined"!==typeof Float64Array){var l=new Float64Array(1),h=new Uint32Array(l.buffer);l[0]=1;m=!0;1072693248===h[1]?(K.exports=function(g){l[0]=g;return[h[0],h[1]]},K.exports.pack=function(g,e){h[0]=g;h[1]=e;return l[0]},K.exports.lo=function(g){l[0]=g;return h[0]},K.exports.hi=function(g){l[0]=g;return h[1]}):1072693248===h[0]?(K.exports=function(g){l[0]=g;return[h[1],h[0]]},K.exports.pack=function(g,e){h[1]=g;h[0]=e;return l[0]},K.exports.lo=function(g){l[0]=g;return h[1]},K.exports.hi=
function(g){l[0]=g;return h[0]}):m=!1}if(!m){var a=new q(8);K.exports=function(g){a.writeDoubleLE(g,0,!0);return[a.readUInt32LE(0,!0),a.readUInt32LE(4,!0)]};K.exports.pack=function(g,e){a.writeUInt32LE(g,0,!0);a.writeUInt32LE(e,4,!0);return a.readDoubleLE(0,!0)};K.exports.lo=function(g){a.writeDoubleLE(g,0,!0);return a.readUInt32LE(0,!0)};K.exports.hi=function(g){a.writeDoubleLE(g,0,!0);return a.readUInt32LE(4,!0)}}K.exports.sign=function(g){return K.exports.hi(g)>>>31};K.exports.exponent=function(g){return(K.exports.hi(g)<<
1>>>21)-1023};K.exports.fraction=function(g){var e=K.exports.lo(g);g=K.exports.hi(g);var n=g&1048575;g&2146435072&&(n+=1048576);return[e,n]};K.exports.denormalized=function(g){return!(K.exports.hi(g)&2146435072)}}).call(this)}).call(this,b("buffer").Buffer)},{buffer:111}],174:[function(b,K,G){var q=b("abs-svg-path"),m=b("normalize-svg-path"),l={M:"moveTo",C:"bezierCurveTo"};K.exports=function(h,a){h.beginPath();m(q(a)).forEach(function(g){var e=g[0];g=g.slice(1);h[l[e]].apply(h,g)});h.closePath()}},
{"abs-svg-path":65,"normalize-svg-path":497}],175:[function(b,K,G){K.exports=function(q){switch(q){case "int8":return Int8Array;case "int16":return Int16Array;case "int32":return Int32Array;case "uint8":return Uint8Array;case "uint16":return Uint16Array;case "uint32":return Uint32Array;case "float32":return Float32Array;case "float64":return Float64Array;case "array":return Array;case "uint8_clamped":return Uint8ClampedArray}}},{}],176:[function(b,K,G){function q(m,l,h){var a=m[h]|0;if(0>=a)return[];
var g=Array(a),e;if(h===m.length-1)for(e=0;e<a;++e)g[e]=l;else for(e=0;e<a;++e)g[e]=q(m,l,h+1);return g}K.exports=function(m,l){"undefined"===typeof l&&(l=0);switch(typeof m){case "number":if(0<m){m|=0;var h;var a=Array(m);for(h=0;h<m;++h)a[h]=l;return a}break;case "object":if("number"===typeof m.length)return q(m,l,0)}return[]}},{}],177:[function(b,K,G){function q(D,A,t){t=t||2;var B=A&&A.length,F=B?A[0]*t:D.length,I=m(D,0,F,t,!0),J=[];if(!I||I.next===I.prev)return J;var L;if(B){var H=t;B=[];var P;
var M=0;for(P=A.length;M<P;M++){var N=A[M]*H;var T=M<P-1?A[M+1]*H:D.length;N=m(D,N,T,H,!1);N===N.next&&(N.steiner=!0);T=B;var Q=T.push,U=N,S=N;do{if(U.x<S.x||U.x===S.x&&U.y<S.y)S=U;U=U.next}while(U!==N);Q.call(T,S)}B.sort(g);for(M=0;M<B.length;M++){H=B[M];A=I;if(A=e(H,A))H=v(A,H),l(A,A.next),l(H,H.next);I=l(I,I.next)}}if(D.length>80*t){var X=L=D[0];var Z=B=D[1];for(H=t;H<F;H+=t)M=D[H],A=D[H+1],M<X&&(X=M),A<Z&&(Z=A),M>L&&(L=M),A>B&&(B=A);L=Math.max(L-X,B-Z);L=0!==L?1/L:0}h(I,J,t,X,Z,L);return J}function m(D,
A,t,B,F){if(F===0<y(D,A,t,B))for(F=A;F<t;F+=B)var I=x(F,D[F],D[F+1],I);else for(F=t-B;F>=A;F-=B)I=x(F,D[F],D[F+1],I);I&&d(I,I.next)&&(C(I),I=I.next);return I}function l(D,A){if(!D)return D;A||(A=D);do{var t=!1;if(D.steiner||!d(D,D.next)&&0!==c(D.prev,D,D.next))D=D.next;else{C(D);D=A=D.prev;if(D===D.next)break;t=!0}}while(t||D!==A);return A}function h(D,A,t,B,F,I,J){if(D){if(!J&&I){var L=D,H=L;do null===H.z&&(H.z=n(H.x,H.y,B,F,I)),H.prevZ=H.prev,H=H.nextZ=H.next;while(H!==L);H.prevZ.nextZ=null;H.prevZ=
null;L=H;var P,M,N,T,Q=1;do{H=L;var U=L=null;for(M=0;H;){M++;var S=H;for(P=N=0;P<Q&&(N++,S=S.nextZ,S);P++);for(T=Q;0<N||0<T&&S;)0!==N&&(0===T||!S||H.z<=S.z)?(P=H,H=H.nextZ,N--):(P=S,S=S.nextZ,T--),U?U.nextZ=P:L=P,P.prevZ=U,U=P;H=S}U.nextZ=null;Q*=2}while(1<M)}for(L=D;D.prev!==D.next;){H=D.prev;S=D.next;if(I)U=a(D,B,F,I);else a:if(U=D,M=U.prev,N=U,Q=U.next,0<=c(M,N,Q))U=!1;else{for(P=U.next.next;P!==U.prev;){if(p(M.x,M.y,N.x,N.y,Q.x,Q.y,P.x,P.y)&&0<=c(P.prev,P,P.next)){U=!1;break a}P=P.next}U=!0}if(U)A.push(H.i/
t),A.push(D.i/t),A.push(S.i/t),C(D),L=D=S.next;else if(D=S,D===L){if(!J)h(l(D),A,t,B,F,I,1);else if(1===J){D=l(D);J=A;L=t;H=D;do S=H.prev,U=H.next.next,!d(S,U)&&f(S,H,H.next,U)&&u(S,U)&&u(U,S)&&(J.push(S.i/L),J.push(H.i/L),J.push(U.i/L),C(H),C(H.next),H=D=U),H=H.next;while(H!==D);D=l(H);h(D,A,t,B,F,I,2)}else if(2===J)a:{J=D;do{for(L=J.next.next;L!==J.prev;){if(H=J.i!==L.i){H=J;S=L;if(U=H.next.i!==S.i&&H.prev.i!==S.i){b:{U=H;do{if(U.i!==H.i&&U.next.i!==H.i&&U.i!==S.i&&U.next.i!==S.i&&f(U,U.next,H,
S)){U=!0;break b}U=U.next}while(U!==H);U=!1}U=!U}if(U){if(U=u(H,S)&&u(S,H)){U=H;M=!1;N=(H.x+S.x)/2;Q=(H.y+S.y)/2;do U.y>Q!==U.next.y>Q&&U.next.y!==U.y&&N<(U.next.x-U.x)*(Q-U.y)/(U.next.y-U.y)+U.x&&(M=!M),U=U.next;while(U!==H);U=M}U=U&&(c(H.prev,H,S.prev)||c(H,S.prev,S))||d(H,S)&&0<c(H.prev,H,H.next)&&0<c(S.prev,S,S.next)}H=U}if(H){D=v(J,L);J=l(J,J.next);D=l(D,D.next);h(J,A,t,B,F,I);h(D,A,t,B,F,I);break a}L=L.next}J=J.next}while(J!==D)}break}}}}function a(D,A,t,B){var F=D.prev,I=D.next;if(0<=c(F,D,
I))return!1;var J=F.x>D.x?F.x>I.x?F.x:I.x:D.x>I.x?D.x:I.x,L=F.y>D.y?F.y>I.y?F.y:I.y:D.y>I.y?D.y:I.y,H=n(F.x<D.x?F.x<I.x?F.x:I.x:D.x<I.x?D.x:I.x,F.y<D.y?F.y<I.y?F.y:I.y:D.y<I.y?D.y:I.y,A,t,B);A=n(J,L,A,t,B);t=D.prevZ;for(B=D.nextZ;t&&t.z>=H&&B&&B.z<=A;){if(t!==D.prev&&t!==D.next&&p(F.x,F.y,D.x,D.y,I.x,I.y,t.x,t.y)&&0<=c(t.prev,t,t.next))return!1;t=t.prevZ;if(B!==D.prev&&B!==D.next&&p(F.x,F.y,D.x,D.y,I.x,I.y,B.x,B.y)&&0<=c(B.prev,B,B.next))return!1;B=B.nextZ}for(;t&&t.z>=H;){if(t!==D.prev&&t!==D.next&&
p(F.x,F.y,D.x,D.y,I.x,I.y,t.x,t.y)&&0<=c(t.prev,t,t.next))return!1;t=t.prevZ}for(;B&&B.z<=A;){if(B!==D.prev&&B!==D.next&&p(F.x,F.y,D.x,D.y,I.x,I.y,B.x,B.y)&&0<=c(B.prev,B,B.next))return!1;B=B.nextZ}return!0}function g(D,A){return D.x-A.x}function e(D,A){var t=A,B=D.x,F=D.y,I=-Infinity;do{if(F<=t.y&&F>=t.next.y&&t.next.y!==t.y){var J=t.x+(F-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(J<=B&&J>I){I=J;if(J===B){if(F===t.y)return t;if(F===t.next.y)return t.next}var L=t.x<t.next.x?t:t.next}}t=t.next}while(t!==
A);if(!L)return null;if(B===I)return L;A=L;J=L.x;var H=L.y,P=Infinity;t=L;do{if(B>=t.x&&t.x>=J&&B!==t.x&&p(F<H?B:I,F,J,H,F<H?I:B,F,t.x,t.y)){var M=Math.abs(F-t.y)/(B-t.x);var N;if((N=u(t,D))&&!(N=M<P)&&(N=M===P)&&!(N=t.x>L.x)&&(N=t.x===L.x)){N=L;var T=t;N=0>c(N.prev,N,T.prev)&&0>c(T.next,N,N.next)}N&&(L=t,P=M)}t=t.next}while(t!==A);return L}function n(D,A,t,B,F){D=32767*(D-t)*F;A=32767*(A-B)*F;D=(D|D<<8)&16711935;D=(D|D<<4)&252645135;D=(D|D<<2)&858993459;A=(A|A<<8)&16711935;A=(A|A<<4)&252645135;A=
(A|A<<2)&858993459;return(D|D<<1)&1431655765|((A|A<<1)&1431655765)<<1}function p(D,A,t,B,F,I,J,L){return 0<=(F-J)*(A-L)-(D-J)*(I-L)&&0<=(D-J)*(B-L)-(t-J)*(A-L)&&0<=(t-J)*(I-L)-(F-J)*(B-L)}function c(D,A,t){return(A.y-D.y)*(t.x-A.x)-(A.x-D.x)*(t.y-A.y)}function d(D,A){return D.x===A.x&&D.y===A.y}function f(D,A,t,B){var F=r(c(D,A,t)),I=r(c(D,A,B)),J=r(c(t,B,D)),L=r(c(t,B,A));return F!==I&&J!==L||0===F&&k(D,t,A)||0===I&&k(D,B,A)||0===J&&k(t,D,B)||0===L&&k(t,A,B)?!0:!1}function k(D,A,t){return A.x<=Math.max(D.x,
t.x)&&A.x>=Math.min(D.x,t.x)&&A.y<=Math.max(D.y,t.y)&&A.y>=Math.min(D.y,t.y)}function r(D){return 0<D?1:0>D?-1:0}function u(D,A){return 0>c(D.prev,D,D.next)?0<=c(D,A,D.next)&&0<=c(D,D.prev,A):0>c(D,A,D.prev)||0>c(D,D.next,A)}function v(D,A){var t=new z(D.i,D.x,D.y),B=new z(A.i,A.x,A.y),F=D.next,I=A.prev;D.next=A;A.prev=D;t.next=F;F.prev=t;B.next=t;t.prev=B;I.next=B;B.prev=I;return B}function x(D,A,t,B){D=new z(D,A,t);B?(D.next=B.next,D.prev=B,B.next.prev=D,B.next=D):(D.prev=D,D.next=D);return D}function C(D){D.next.prev=
D.prev;D.prev.next=D.next;D.prevZ&&(D.prevZ.nextZ=D.nextZ);D.nextZ&&(D.nextZ.prevZ=D.prevZ)}function z(D,A,t){this.i=D;this.x=A;this.y=t;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function y(D,A,t,B){for(var F=0,I=t-B;A<t;A+=B)F+=(D[I]-D[A])*(D[A+1]+D[I+1]),I=A;return F}K.exports=q;K.exports.default=q;q.deviation=function(D,A,t,B){var F=A&&A.length,I=Math.abs(y(D,0,F?A[0]*t:D.length,t));if(F){F=0;for(var J=A.length;F<J;F++)I-=Math.abs(y(D,A[F]*t,F<J-1?A[F+1]*t:D.length,
t))}for(F=A=0;F<B.length;F+=3){J=B[F]*t;var L=B[F+1]*t,H=B[F+2]*t;A+=Math.abs((D[J]-D[H])*(D[L+1]-D[J+1])-(D[J]-D[L])*(D[H+1]-D[J+1]))}return 0===I&&0===A?0:Math.abs((A-I)/I)};q.flatten=function(D){for(var A=D[0][0].length,t={vertices:[],holes:[],dimensions:A},B=0,F=0;F<D.length;F++){for(var I=0;I<D[F].length;I++)for(var J=0;J<A;J++)t.vertices.push(D[F][I][J]);0<F&&(B+=D[F-1].length,t.holes.push(B))}return t}},{}],178:[function(b,K,G){K.exports=function(m,l){var h=m.length;if("number"!==typeof l){for(var a=
l=0;a<h;++a){var g=m[a];l=Math.max(l,g[0],g[1])}l=(l|0)+1}l|=0;var e=Array(l);for(a=0;a<l;++a)e[a]=[];for(a=0;a<h;++a)g=m[a],e[g[0]].push(g[1]),e[g[1]].push(g[0]);for(m=0;m<l;++m)q(e[m],function(n,p){return n-p});return e};var q=b("uniq")},{uniq:597}],179:[function(b,K,G){var q=b("strongly-connected-components");K.exports=function(m,l){function h(C){c[C]=!1;d.hasOwnProperty(C)&&Object.keys(d[C]).forEach(function(z){delete d[C][z];c[z]&&h(z)})}function a(C){var z=!1;p.push(C);c[C]=!0;var y;for(y=0;y<
f[C].length;y++){var D=f[C][y];D===k?(z=k,z=[].concat(p).concat(z),l?l(a):n.push(z),z=!0):c[D]||(z=a(D))}if(z)h(C);else for(y=0;y<f[C].length;y++){D=f[C][y];var A=d[D];A||(A={},d[D]=A);A[D]=!0}p.pop();return z}function g(C){for(var z=0;z<m.length;z++)z<C&&(m[z]=[]),m[z]=m[z].filter(function(y){return y>=C})}function e(C){g(C);var z=q(m).components.filter(function(B){return 1<B.length});C=Infinity;for(var y,D=0;D<z.length;D++)for(var A=0;A<z[D].length;A++)z[D][A]<C&&(C=z[D][A],y=D);var t=z[y];if(!t)return!1;
y=m.map(function(B,F){return-1===t.indexOf(F)?[]:B.filter(function(I){return-1!==t.indexOf(I)})});return{leastVertex:C,adjList:y}}var n=[],p=[],c=[],d={},f=[];var k=0;for(var r=m.length;k<r;){var u=e(k);k=u.leastVertex;if(f=u.adjList){for(u=0;u<f.length;u++)for(var v=0;v<f[u].length;v++){var x=f[u][v];c[+x]=!1;d[x]={}}a(k);k+=1}else k=r}if(!l)return n}},{"strongly-connected-components":569}],180:[function(b,K,G){var q=b("../../object/valid-value");K.exports=function(){q(this).length=0;return this}},
{"../../object/valid-value":211}],181:[function(b,K,G){K.exports=b("./is-implemented")()?Array.from:b("./shim")},{"./is-implemented":182,"./shim":183}],182:[function(b,K,G){K.exports=function(){var q=Array.from;if("function"!==typeof q)return!1;var m=["raz","dwa"];q=q(m);return!(!q||q===m||"dwa"!==q[1])}},{}],183:[function(b,K,G){var q=b("es6-symbol").iterator,m=b("../../function/is-arguments"),l=b("../../function/is-function"),h=b("../../number/to-pos-integer"),a=b("../../object/valid-callable"),
g=b("../../object/valid-value"),e=b("../../object/is-value"),n=b("../../string/is-string"),p=Array.isArray,c=Function.prototype.call,d={configurable:!0,enumerable:!0,writable:!0,value:null},f=Object.defineProperty;K.exports=function(k,r,u){var v,x;k=Object(g(k));e(r)&&a(r);if(this&&this!==Array&&l(this))var C=this;else{if(!r){if(m(k)){var z=k.length;if(1!==z)return Array.apply(null,k);var y=Array(1);y[0]=k[0];return y}if(p(k)){y=Array(z=k.length);for(v=0;v<z;++v)y[v]=k[v];return y}}y=[]}if(!p(k))if(void 0!==
(v=k[q])){z=a(v).call(k);C&&(y=new C);var D=z.next();for(v=0;!D.done;)D=r?c.call(r,u,D.value,v):D.value,C?(d.value=D,f(y,v,d)):y[v]=D,D=z.next(),++v;z=v}else if(n(k)){z=k.length;C&&(y=new C);for(x=v=0;v<z;++v){D=k[v];if(v+1<z){var A=D.charCodeAt(0);55296<=A&&56319>=A&&(D+=k[++v])}D=r?c.call(r,u,D,x):D;C?(d.value=D,f(y,x,d)):y[x]=D;++x}z=x}if(void 0===z)for(z=h(k.length),C&&(y=new C(z)),v=0;v<z;++v)D=r?c.call(r,u,k[v],v):k[v],C?(d.value=D,f(y,v,d)):y[v]=D;C&&(d.value=null,y.length=z);return y}},{"../../function/is-arguments":184,
"../../function/is-function":185,"../../number/to-pos-integer":191,"../../object/is-value":200,"../../object/valid-callable":209,"../../object/valid-value":211,"../../string/is-string":215,"es6-symbol":225}],184:[function(b,K,G){var q=Object.prototype.toString,m=q.call(function(){return arguments}());K.exports=function(l){return q.call(l)===m}},{}],185:[function(b,K,G){var q=Object.prototype.toString,m=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);K.exports=function(l){return"function"===
typeof l&&m(q.call(l))}},{}],186:[function(b,K,G){K.exports=function(){}},{}],187:[function(b,K,G){K.exports=b("./is-implemented")()?Math.sign:b("./shim")},{"./is-implemented":188,"./shim":189}],188:[function(b,K,G){K.exports=function(){var q=Math.sign;return"function"!==typeof q?!1:1===q(10)&&-1===q(-20)}},{}],189:[function(b,K,G){K.exports=function(q){q=Number(q);return isNaN(q)||0===q?q:0<q?1:-1}},{}],190:[function(b,K,G){var q=b("../math/sign"),m=Math.abs,l=Math.floor;K.exports=function(h){if(isNaN(h))return 0;
h=Number(h);return 0!==h&&isFinite(h)?q(h)*l(m(h)):h}},{"../math/sign":187}],191:[function(b,K,G){var q=b("./to-integer"),m=Math.max;K.exports=function(l){return m(0,q(l))}},{"./to-integer":190}],192:[function(b,K,G){var q=b("./valid-callable"),m=b("./valid-value"),l=Function.prototype.bind,h=Function.prototype.call,a=Object.keys,g=Object.prototype.propertyIsEnumerable;K.exports=function(e,n){return function(p,c,d,f){p=Object(m(p));q(c);var k=a(p);f&&k.sort("function"===typeof f?l.call(f,p):void 0);
"function"!==typeof e&&(e=k[e]);return h.call(e,k,function(r,u){return g.call(p,r)?h.call(c,d,p[r],r,p,u):n})}}},{"./valid-callable":209,"./valid-value":211}],193:[function(b,K,G){K.exports=b("./is-implemented")()?Object.assign:b("./shim")},{"./is-implemented":194,"./shim":195}],194:[function(b,K,G){K.exports=function(){var q=Object.assign;if("function"!==typeof q)return!1;var m={foo:"raz"};q(m,{bar:"dwa"},{trzy:"trzy"});return"razdwatrzy"===m.foo+m.bar+m.trzy}},{}],195:[function(b,K,G){var q=b("../keys"),
m=b("../valid-value"),l=Math.max;K.exports=function(h,a){var g,e,n=l(arguments.length,2);h=Object(m(h));var p=function(c){try{h[c]=a[c]}catch(d){g||(g=d)}};for(e=1;e<n;++e)a=arguments[e],q(a).forEach(p);if(void 0!==g)throw g;return h}},{"../keys":201,"../valid-value":211}],196:[function(b,K,G){var q=b("../array/from"),m=b("./assign"),l=b("./valid-value");K.exports=function(h,a,g){var e=Object(l(h)),n=Object(g);if(e!==h&&!a)return e;var p={};a?q(a,function(c){if(n.ensure||c in h)p[c]=h[c]}):m(p,h);
return p}},{"../array/from":181,"./assign":193,"./valid-value":211}],197:[function(b,K,G){var q=Object.create,m;b("./set-prototype-of/is-implemented")()||(m=b("./set-prototype-of/shim"));K.exports=function(){if(!m||1!==m.level)return q;var l={};var h={};var a={configurable:!1,enumerable:!1,writable:!0,value:void 0};Object.getOwnPropertyNames(Object.prototype).forEach(function(g){h[g]="__proto__"===g?{configurable:!0,enumerable:!1,writable:!0,value:void 0}:a});Object.defineProperties(l,h);Object.defineProperty(m,
"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:l});return function(g,e){return q(null===g?l:g,e)}}()},{"./set-prototype-of/is-implemented":207,"./set-prototype-of/shim":208}],198:[function(b,K,G){K.exports=b("./_iterate")("forEach")},{"./_iterate":192}],199:[function(b,K,G){var q=b("./is-value"),m={function:!0,object:!0};K.exports=function(l){return q(l)&&m[typeof l]||!1}},{"./is-value":200}],200:[function(b,K,G){var q=b("../function/noop")();K.exports=function(m){return m!==q&&null!==
m}},{"../function/noop":186}],201:[function(b,K,G){K.exports=b("./is-implemented")()?Object.keys:b("./shim")},{"./is-implemented":202,"./shim":203}],202:[function(b,K,G){K.exports=function(){try{return Object.keys("primitive"),!0}catch(q){return!1}}},{}],203:[function(b,K,G){var q=b("../is-value"),m=Object.keys;K.exports=function(l){return m(q(l)?Object(l):l)}},{"../is-value":200}],204:[function(b,K,G){var q=b("./valid-callable"),m=b("./for-each"),l=Function.prototype.call;K.exports=function(h,a,
g){var e={};q(a);m(h,function(n,p,c,d){e[p]=l.call(a,g,n,p,c,d)});return e}},{"./for-each":198,"./valid-callable":209}],205:[function(b,K,G){var q=b("./is-value"),m=Array.prototype.forEach,l=Object.create;K.exports=function(h){var a=l(null);m.call(arguments,function(g){if(q(g)){g=Object(g);for(var e in g)a[e]=g[e]}});return a}},{"./is-value":200}],206:[function(b,K,G){K.exports=b("./is-implemented")()?Object.setPrototypeOf:b("./shim")},{"./is-implemented":207,"./shim":208}],207:[function(b,K,G){var q=
Object.create,m=Object.getPrototypeOf,l={};K.exports=function(h){var a=Object.setPrototypeOf;return"function"!==typeof a?!1:m(a((h||q)(null),l))===l}},{}],208:[function(b,K,G){var q=b("../is-object"),m=b("../valid-value"),l=Object.prototype.isPrototypeOf,h=Object.defineProperty,a={configurable:!0,enumerable:!1,writable:!0,value:void 0};var g=function(e,n){m(e);if(null===n||q(n))return e;throw new TypeError("Prototype must be null or an object");};K.exports=function(e){if(!e)return null;if(2===e.level)if(e.set){var n=
e.set;var p=function(c,d){n.call(g(c,d),d);return c}}else p=function(c,d){g(c,d).__proto__=d;return c};else p=function k(d,f){var r;g(d,f);(r=l.call(k.nullPolyfill,d))&&delete k.nullPolyfill.__proto__;null===f&&(f=k.nullPolyfill);d.__proto__=f;r&&h(k.nullPolyfill,"__proto__",a);return d};return Object.defineProperty(p,"level",{configurable:!1,enumerable:!1,writable:!1,value:e.level})}(function(){var e=Object.create(null),n={},p=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(p){try{var c=
p.set;c.call(e,n)}catch(d){}if(Object.getPrototypeOf(e)===n)return{set:c,level:2}}e.__proto__=n;if(Object.getPrototypeOf(e)===n)return{level:2};e={};e.__proto__=n;return Object.getPrototypeOf(e)===n?{level:1}:!1}());b("../create")},{"../create":197,"../is-object":199,"../valid-value":211}],209:[function(b,K,G){K.exports=function(q){if("function"!==typeof q)throw new TypeError(q+" is not a function");return q}},{}],210:[function(b,K,G){var q=b("./is-object");K.exports=function(m){if(!q(m))throw new TypeError(m+
" is not an Object");return m}},{"./is-object":199}],211:[function(b,K,G){var q=b("./is-value");K.exports=function(m){if(!q(m))throw new TypeError("Cannot use null or undefined");return m}},{"./is-value":200}],212:[function(b,K,G){K.exports=b("./is-implemented")()?String.prototype.contains:b("./shim")},{"./is-implemented":213,"./shim":214}],213:[function(b,K,G){K.exports=function(){return"function"!==typeof"razdwatrzy".contains?!1:!0==="razdwatrzy".contains("dwa")&&!1==="razdwatrzy".contains("foo")}},
{}],214:[function(b,K,G){var q=String.prototype.indexOf;K.exports=function(m,l){return-1<q.call(this,m,l)}},{}],215:[function(b,K,G){var q=Object.prototype.toString,m=q.call("");K.exports=function(l){return"string"===typeof l||l&&"object"===typeof l&&(l instanceof String||q.call(l)===m)||!1}},{}],216:[function(b,K,G){var q=Object.create(null),m=Math.random;K.exports=function(){do var l=m().toString(36).slice(2);while(q[l]);return l}},{}],217:[function(b,K,G){G=b("es5-ext/object/set-prototype-of");
var q=b("es5-ext/string/#/contains"),m=b("d"),l=b("es6-symbol"),h=b("./"),a=Object.defineProperty;var g=K.exports=function(e,n){if(!(this instanceof g))throw new TypeError("Constructor requires 'new'");h.call(this,e);n=n?q.call(n,"key+value")?"key+value":q.call(n,"key")?"key":"value":"value";a(this,"__kind__",m("",n))};G&&G(g,h);delete g.prototype.constructor;g.prototype=Object.create(h.prototype,{_resolve:m(function(e){return"value"===this.__kind__?this.__list__[e]:"key+value"===this.__kind__?[e,
this.__list__[e]]:e})});a(g.prototype,l.toStringTag,m("c","Array Iterator"))},{"./":220,d:155,"es5-ext/object/set-prototype-of":206,"es5-ext/string/#/contains":212,"es6-symbol":225}],218:[function(b,K,G){var q=b("es5-ext/function/is-arguments"),m=b("es5-ext/object/valid-callable"),l=b("es5-ext/string/is-string"),h=b("./get"),a=Array.isArray,g=Function.prototype.call,e=Array.prototype.some;K.exports=function(n,p,c){var d,f;a(n)||q(n)?d="array":l(n)?d="string":n=h(n);m(p);var k=function(){f=!0};if("array"===
d)e.call(n,function(x){g.call(p,c,x,k);return f});else if("string"===d){var r=n.length;for(d=0;d<r;++d){var u=n[d];if(d+1<r){var v=u.charCodeAt(0);55296<=v&&56319>=v&&(u+=n[++d])}g.call(p,c,u,k);if(f)break}}else for(d=n.next();!d.done;){g.call(p,c,d.value,k);if(f)break;d=n.next()}}},{"./get":219,"es5-ext/function/is-arguments":184,"es5-ext/object/valid-callable":209,"es5-ext/string/is-string":215}],219:[function(b,K,G){var q=b("es5-ext/function/is-arguments"),m=b("es5-ext/string/is-string"),l=b("./array"),
h=b("./string"),a=b("./valid-iterable"),g=b("es6-symbol").iterator;K.exports=function(e){return"function"===typeof a(e)[g]?e[g]():q(e)?new l(e):m(e)?new h(e):new l(e)}},{"./array":217,"./string":222,"./valid-iterable":223,"es5-ext/function/is-arguments":184,"es5-ext/string/is-string":215,"es6-symbol":225}],220:[function(b,K,G){var q=b("es5-ext/array/#/clear");G=b("es5-ext/object/assign");var m=b("es5-ext/object/valid-callable"),l=b("es5-ext/object/valid-value"),h=b("d"),a=b("d/auto-bind"),g=b("es6-symbol"),
e=Object.defineProperty,n=Object.defineProperties,p;K.exports=p=function(c,d){if(!(this instanceof p))throw new TypeError("Constructor requires 'new'");n(this,{__list__:h("w",l(c)),__context__:h("w",d),__nextIndex__:h("w",0)});d&&(m(d.on),d.on("_add",this._onAdd),d.on("_delete",this._onDelete),d.on("_clear",this._onClear))};delete p.prototype.constructor;n(p.prototype,G({_next:h(function(){if(this.__list__){if(this.__redo__){var c=this.__redo__.shift();if(void 0!==c)return c}if(this.__nextIndex__<
this.__list__.length)return this.__nextIndex__++;this._unBind()}}),next:h(function(){return this._createResult(this._next())}),_createResult:h(function(c){return void 0===c?{done:!0,value:void 0}:{done:!1,value:this._resolve(c)}}),_resolve:h(function(c){return this.__list__[c]}),_unBind:h(function(){this.__list__=null;delete this.__redo__;this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=
null)}),toString:h(function(){return"[object "+(this[g.toStringTag]||"Object")+"]"})},a({_onAdd:h(function(c){c>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach(function(d,f){d>=c&&(this.__redo__[f]=++d)},this),this.__redo__.push(c)):e(this,"__redo__",h("c",[c])))}),_onDelete:h(function(c){if(!(c>=this.__nextIndex__)&&(--this.__nextIndex__,this.__redo__)){var d=this.__redo__.indexOf(c);-1!==d&&this.__redo__.splice(d,1);this.__redo__.forEach(function(f,k){f>c&&(this.__redo__[k]=
--f)},this)}}),_onClear:h(function(){this.__redo__&&q.call(this.__redo__);this.__nextIndex__=0})})));e(p.prototype,g.iterator,h(function(){return this}))},{d:155,"d/auto-bind":154,"es5-ext/array/#/clear":180,"es5-ext/object/assign":193,"es5-ext/object/valid-callable":209,"es5-ext/object/valid-value":211,"es6-symbol":225}],221:[function(b,K,G){var q=b("es5-ext/function/is-arguments"),m=b("es5-ext/object/is-value"),l=b("es5-ext/string/is-string"),h=b("es6-symbol").iterator,a=Array.isArray;K.exports=
function(g){return m(g)?a(g)||l(g)||q(g)?!0:"function"===typeof g[h]:!1}},{"es5-ext/function/is-arguments":184,"es5-ext/object/is-value":200,"es5-ext/string/is-string":215,"es6-symbol":225}],222:[function(b,K,G){G=b("es5-ext/object/set-prototype-of");var q=b("d"),m=b("es6-symbol"),l=b("./"),h=Object.defineProperty;var a=K.exports=function(g){if(!(this instanceof a))throw new TypeError("Constructor requires 'new'");g=String(g);l.call(this,g);h(this,"__length__",q("",g.length))};G&&G(a,l);delete a.prototype.constructor;
a.prototype=Object.create(l.prototype,{_next:q(function(){if(this.__list__){if(this.__nextIndex__<this.__length__)return this.__nextIndex__++;this._unBind()}}),_resolve:q(function(g){g=this.__list__[g];if(this.__nextIndex__===this.__length__)return g;var e=g.charCodeAt(0);return 55296<=e&&56319>=e?g+this.__list__[this.__nextIndex__++]:g})});h(a.prototype,m.toStringTag,q("c","String Iterator"))},{"./":220,d:155,"es5-ext/object/set-prototype-of":206,"es6-symbol":225}],223:[function(b,K,G){var q=b("./is-iterable");
K.exports=function(m){if(!q(m))throw new TypeError(m+" is not iterable");return m}},{"./is-iterable":221}],224:[function(b,K,G){(function(q,m){(function(){(function(l,h){"object"===typeof G&&"undefined"!==typeof K?K.exports=h():l.ES6Promise=h()})(this,function(){function l(qa){return"function"===typeof qa}function h(){return function(){return q.nextTick(p)}}function a(){return"undefined"!==typeof P?function(){P(p)}:n()}function g(){var qa=0,ka=new Q(p),oa=document.createTextNode("");ka.observe(oa,
{characterData:!0});return function(){oa.data=qa=++qa%2}}function e(){var qa=new MessageChannel;qa.port1.onmessage=p;return function(){return qa.port2.postMessage(0)}}function n(){var qa=setTimeout;return function(){return qa(p,1)}}function p(){for(var qa=0;qa<H;qa+=2)(0,S[qa])(S[qa+1]),S[qa]=void 0,S[qa+1]=void 0;H=0}function c(){try{var qa=Function("return this")().require("vertx");P=qa.runOnLoop||qa.runOnContext;return a()}catch(ka){return n()}}function d(qa,ka){var oa=this,na=new this.constructor(k);
void 0===na[Z]&&I(na);var la=oa._state;if(la){var ia=arguments[la-1];N(function(){return B(la,na,ia,oa._result)})}else A(oa,na,qa,ka);return na}function f(qa){if(qa&&"object"===typeof qa&&qa.constructor===this)return qa;var ka=new this(k);C(ka,qa);return ka}function k(){}function r(qa,ka,oa,na){try{qa.call(ka,oa,na)}catch(la){return la}}function u(qa,ka,oa){N(function(na){var la=!1,ia=r(oa,ka,function(sa){la||(la=!0,ka!==sa?C(na,sa):y(na,sa))},function(sa){la||(la=!0,D(na,sa))},"Settle: "+(na._label||
" unknown promise"));!la&&ia&&(la=!0,D(na,ia))},qa)}function v(qa,ka){ka._state===fa?y(qa,ka._result):ka._state===ha?D(qa,ka._result):A(ka,void 0,function(oa){return C(qa,oa)},function(oa){return D(qa,oa)})}function x(qa,ka,oa){ka.constructor===qa.constructor&&oa===d&&ka.constructor.resolve===f?v(qa,ka):void 0===oa?y(qa,ka):l(oa)?u(qa,ka,oa):y(qa,ka)}function C(qa,ka){if(qa===ka)D(qa,new TypeError("You cannot resolve a promise with itself"));else{var oa=typeof ka;if(null===ka||"object"!==oa&&"function"!==
oa)y(qa,ka);else{oa=void 0;try{oa=ka.then}catch(na){D(qa,na);return}x(qa,ka,oa)}}}function z(qa){qa._onerror&&qa._onerror(qa._result);t(qa)}function y(qa,ka){qa._state===aa&&(qa._result=ka,qa._state=fa,0!==qa._subscribers.length&&N(t,qa))}function D(qa,ka){qa._state===aa&&(qa._state=ha,qa._result=ka,N(z,qa))}function A(qa,ka,oa,na){var la=qa._subscribers,ia=la.length;qa._onerror=null;la[ia]=ka;la[ia+fa]=oa;la[ia+ha]=na;0===ia&&qa._state&&N(t,qa)}function t(qa){var ka=qa._subscribers,oa=qa._state;
if(0!==ka.length){for(var na,la,ia=qa._result,sa=0;sa<ka.length;sa+=3)na=ka[sa],la=ka[sa+oa],na?B(oa,na,la,ia):la(ia);qa._subscribers.length=0}}function B(qa,ka,oa,na){var la=l(oa),ia=void 0,sa=void 0,ta=!0;if(la){try{ia=oa(na)}catch(Aa){ta=!1,sa=Aa}if(ka===ia){D(ka,new TypeError("A promises callback cannot return that same promise."));return}}else ia=na;ka._state===aa&&(la&&ta?C(ka,ia):!1===ta?D(ka,sa):qa===fa?y(ka,ia):qa===ha&&D(ka,ia))}function F(qa,ka){try{ka(function(oa){C(qa,oa)},function(oa){D(qa,
oa)})}catch(oa){D(qa,oa)}}function I(qa){qa[Z]=ja++;qa._state=void 0;qa._result=void 0;qa._subscribers=[]}var J=void 0,L=J=Array.isArray?Array.isArray:function(qa){return"[object Array]"===Object.prototype.toString.call(qa)},H=0,P=void 0,M=void 0,N=function(qa,ka){S[H]=qa;S[H+1]=ka;H+=2;2===H&&(M?M(p):X())},T=(J="undefined"!==typeof window?window:void 0)||{},Q=T.MutationObserver||T.WebKitMutationObserver;T="undefined"===typeof self&&"undefined"!==typeof q&&"[object process]"==={}.toString.call(q);
var U="undefined"!==typeof Uint8ClampedArray&&"undefined"!==typeof importScripts&&"undefined"!==typeof MessageChannel,S=Array(1E3),X=void 0;X=T?h():Q?g():U?e():void 0===J&&"function"===typeof b?c():n();var Z=Math.random().toString(36).substring(2),aa=void 0,fa=1,ha=2,ja=0,ba=function(){function qa(ka,oa){this._instanceConstructor=ka;this.promise=new ka(k);this.promise[Z]||I(this.promise);L(oa)?(this._remaining=this.length=oa.length,this._result=Array(this.length),0===this.length?y(this.promise,this._result):
(this.length=this.length||0,this._enumerate(oa),0===this._remaining&&y(this.promise,this._result))):D(this.promise,Error("Array Methods must be provided an Array"))}qa.prototype._enumerate=function(ka){for(var oa=0;this._state===aa&&oa<ka.length;oa++)this._eachEntry(ka[oa],oa)};qa.prototype._eachEntry=function(ka,oa){var na=this._instanceConstructor,la=na.resolve;if(la===f){var ia=la=void 0,sa=!1;try{la=ka.then}catch(ta){sa=!0,ia=ta}la===d&&ka._state!==aa?this._settledAt(ka._state,oa,ka._result):
"function"!==typeof la?(this._remaining--,this._result[oa]=ka):na===ma?(na=new na(k),sa?D(na,ia):x(na,ka,la),this._willSettleAt(na,oa)):this._willSettleAt(new na(function(ta){return ta(ka)}),oa)}else this._willSettleAt(la(ka),oa)};qa.prototype._settledAt=function(ka,oa,na){var la=this.promise;la._state===aa&&(this._remaining--,ka===ha?D(la,na):this._result[oa]=na);0===this._remaining&&y(la,this._result)};qa.prototype._willSettleAt=function(ka,oa){var na=this;A(ka,void 0,function(la){return na._settledAt(fa,
oa,la)},function(la){return na._settledAt(ha,oa,la)})};return qa}(),ma=function(){function qa(ka){this[Z]=ja++;this._result=this._state=void 0;this._subscribers=[];if(k!==ka){if("function"!==typeof ka)throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(this instanceof qa)F(this,ka);else throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");}}qa.prototype.catch=
function(ka){return this.then(null,ka)};qa.prototype.finally=function(ka){var oa=this.constructor;return l(ka)?this.then(function(na){return oa.resolve(ka()).then(function(){return na})},function(na){return oa.resolve(ka()).then(function(){throw na;})}):this.then(ka,ka)};return qa}();ma.prototype.then=d;ma.all=function(qa){return(new ba(this,qa)).promise};ma.race=function(qa){var ka=this;return L(qa)?new ka(function(oa,na){for(var la=qa.length,ia=0;ia<la;ia++)ka.resolve(qa[ia]).then(oa,na)}):new ka(function(oa,
na){return na(new TypeError("You must pass an array to race."))})};ma.resolve=f;ma.reject=function(qa){var ka=new this(k);D(ka,qa);return ka};ma._setScheduler=function(qa){M=qa};ma._setAsap=function(qa){N=qa};ma._asap=N;ma.polyfill=function(){var qa=void 0;if("undefined"!==typeof m)qa=m;else if("undefined"!==typeof self)qa=self;else try{qa=Function("return this")()}catch(na){throw Error("polyfill failed because global object is unavailable in this environment");}var ka=qa.Promise;if(ka){var oa=null;
try{oa=Object.prototype.toString.call(ka.resolve())}catch(na){}if("[object Promise]"===oa&&!ka.cast)return}qa.Promise=ma};return ma.Promise=ma})}).call(this)}).call(this,b("_process"),"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{_process:526}],225:[function(b,K,G){K.exports=b("./is-implemented")()?b("ext/global-this").Symbol:b("./polyfill")},{"./is-implemented":226,"./polyfill":231,"ext/global-this":238}],226:[function(b,K,G){var q=b("ext/global-this"),
m={object:!0,symbol:!0};K.exports=function(){var l=q.Symbol;if("function"!==typeof l)return!1;var h=l("test symbol");try{String(h)}catch(a){return!1}return m[typeof l.iterator]&&m[typeof l.toPrimitive]&&m[typeof l.toStringTag]?!0:!1}},{"ext/global-this":238}],227:[function(b,K,G){K.exports=function(q){return q?"symbol"===typeof q?!0:q.constructor&&"Symbol"===q.constructor.name?"Symbol"===q[q.constructor.toStringTag]:!1:!1}},{}],228:[function(b,K,G){var q=b("d");b=Object.create;var m=Object.defineProperty,
l=Object.prototype,h=b(null);K.exports=function(a){for(var g=0,e,n;h[a+(g||"")];)++g;a+=g||"";h[a]=!0;e="@@"+a;m(l,e,q.gs(null,function(p){n||(n=!0,m(this,e,q(p)),n=!1)}));return e}},{d:155}],229:[function(b,K,G){var q=b("d"),m=b("ext/global-this").Symbol;K.exports=function(l){return Object.defineProperties(l,{hasInstance:q("",m&&m.hasInstance||l("hasInstance")),isConcatSpreadable:q("",m&&m.isConcatSpreadable||l("isConcatSpreadable")),iterator:q("",m&&m.iterator||l("iterator")),match:q("",m&&m.match||
l("match")),replace:q("",m&&m.replace||l("replace")),search:q("",m&&m.search||l("search")),species:q("",m&&m.species||l("species")),split:q("",m&&m.split||l("split")),toPrimitive:q("",m&&m.toPrimitive||l("toPrimitive")),toStringTag:q("",m&&m.toStringTag||l("toStringTag")),unscopables:q("",m&&m.unscopables||l("unscopables"))})}},{d:155,"ext/global-this":238}],230:[function(b,K,G){var q=b("d"),m=b("../../../validate-symbol"),l=Object.create(null);K.exports=function(h){return Object.defineProperties(h,
{for:q(function(a){return l[a]?l[a]:l[a]=h(String(a))}),keyFor:q(function(a){var g;m(a);for(g in l)if(l[g]===a)return g})})}},{"../../../validate-symbol":232,d:155}],231:[function(b,K,G){var q=b("d"),m=b("./validate-symbol"),l=b("ext/global-this").Symbol,h=b("./lib/private/generate-name");G=b("./lib/private/setup/standard-symbols");b=b("./lib/private/setup/symbol-registry");var a=Object.create,g=Object.defineProperties,e=Object.defineProperty,n;if("function"===typeof l)try{String(l());var p=!0}catch(d){}else l=
null;var c=function(d){if(this instanceof c)throw new TypeError("Symbol is not a constructor");return n(d)};K.exports=n=function k(f){if(this instanceof k)throw new TypeError("Symbol is not a constructor");if(p)return l(f);var r=a(c.prototype);f=void 0===f?"":String(f);return g(r,{__description__:q("",f),__name__:q("",h(f))})};G(n);b(n);g(c.prototype,{constructor:q(n),toString:q("",function(){return this.__name__})});g(n.prototype,{toString:q(function(){return"Symbol ("+m(this).__description__+")"}),
valueOf:q(function(){return m(this)})});e(n.prototype,n.toPrimitive,q("",function(){var f=m(this);return"symbol"===typeof f?f:f.toString()}));e(n.prototype,n.toStringTag,q("c","Symbol"));e(c.prototype,n.toStringTag,q("c",n.prototype[n.toStringTag]));e(c.prototype,n.toPrimitive,q("c",n.prototype[n.toPrimitive]))},{"./lib/private/generate-name":228,"./lib/private/setup/standard-symbols":229,"./lib/private/setup/symbol-registry":230,"./validate-symbol":232,d:155,"ext/global-this":238}],232:[function(b,
K,G){var q=b("./is-symbol");K.exports=function(m){if(!q(m))throw new TypeError(m+" is not a symbol");return m}},{"./is-symbol":227}],233:[function(b,K,G){K.exports=b("./is-implemented")()?WeakMap:b("./polyfill")},{"./is-implemented":234,"./polyfill":236}],234:[function(b,K,G){K.exports=function(){var q;if("function"!==typeof WeakMap)return!1;try{var m=new WeakMap([[q={},"one"],[{},"two"],[{},"three"]])}catch(l){return!1}return"[object WeakMap]"!==String(m)||"function"!==typeof m.set||m.set({},1)!==
m||"function"!==typeof m.delete||"function"!==typeof m.has||"one"!==m.get(q)?!1:!0}},{}],235:[function(b,K,G){b="function"!==typeof WeakMap?!1:"[object WeakMap]"===Object.prototype.toString.call(new WeakMap);K.exports=b},{}],236:[function(b,K,G){var q=b("es5-ext/object/is-value"),m=b("es5-ext/object/set-prototype-of"),l=b("es5-ext/object/valid-object"),h=b("es5-ext/object/valid-value"),a=b("es5-ext/string/random-uniq"),g=b("d"),e=b("es6-iterator/get"),n=b("es6-iterator/for-of");G=b("es6-symbol").toStringTag;
var p=b("./is-native-implemented"),c=Array.isArray,d=Object.defineProperty,f=Object.prototype.hasOwnProperty,k=Object.getPrototypeOf,r;K.exports=r=function(u){if(!(this instanceof r))throw new TypeError("Constructor requires 'new'");var v=p&&m&&WeakMap!==r?m(new WeakMap,k(this)):this;q(u)&&(c(u)||(u=e(u)));d(v,"__weakMapData__",g("c","$weakMap$"+a()));if(!u)return v;n(u,function(x){h(x);v.set(x[0],x[1])});return v};p&&(m&&m(r,WeakMap),r.prototype=Object.create(WeakMap.prototype,{constructor:g(r)}));
Object.defineProperties(r.prototype,{delete:g(function(u){return f.call(l(u),this.__weakMapData__)?(delete u[this.__weakMapData__],!0):!1}),get:g(function(u){if(f.call(l(u),this.__weakMapData__))return u[this.__weakMapData__]}),has:g(function(u){return f.call(l(u),this.__weakMapData__)}),set:g(function(u,v){d(l(u),this.__weakMapData__,g("c",v));return this}),toString:g(function(){return"[object WeakMap]"})});d(r.prototype,G,g("c","WeakMap"))},{"./is-native-implemented":235,d:155,"es5-ext/object/is-value":200,
"es5-ext/object/set-prototype-of":206,"es5-ext/object/valid-object":210,"es5-ext/object/valid-value":211,"es5-ext/string/random-uniq":216,"es6-iterator/for-of":218,"es6-iterator/get":219,"es6-symbol":225}],237:[function(b,K,G){var q=function(){if("object"===typeof self&&self)return self;if("object"===typeof window&&window)return window;throw Error("Unable to resolve global `this`");};K.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},
configurable:!0})}catch(m){return q()}try{return void 0===Object.prototype.__global__?q():Object.prototype.__global__}finally{delete Object.prototype.__global__}}()},{}],238:[function(b,K,G){K.exports=b("./is-implemented")()?globalThis:b("./implementation")},{"./implementation":237,"./is-implemented":239}],239:[function(b,K,G){K.exports=function(){return"object"===typeof globalThis&&globalThis?globalThis.Array===Array:!1}},{}],240:[function(b,K,G){K.exports=function(q,m,l){m=m||0;l=l||1;return[[q[12]+
q[0],q[13]+q[1],q[14]+q[2],q[15]+q[3]],[q[12]-q[0],q[13]-q[1],q[14]-q[2],q[15]-q[3]],[q[12]+q[4],q[13]+q[5],q[14]+q[6],q[15]+q[7]],[q[12]-q[4],q[13]-q[5],q[14]-q[6],q[15]-q[7]],[m*q[12]+q[8],m*q[13]+q[9],m*q[14]+q[10],m*q[15]+q[11]],[l*q[12]-q[8],l*q[13]-q[9],l*q[14]-q[10],l*q[15]-q[11]]]}},{}],241:[function(b,K,G){var q=b("is-string-blank");K.exports=function(m){var l=typeof m;if("string"===l){if(l=m,m=+m,0===m&&q(l))return!1}else if("number"!==l)return!1;return 1>m-m}},{"is-string-blank":470}],
242:[function(b,K,G){function q(g,e,n){return Math.min(e,Math.max(g,n))}function m(g,e,n){this.dimension=g.length;this.bounds=[Array(this.dimension),Array(this.dimension)];for(var p=0;p<this.dimension;++p)this.bounds[0][p]=-Infinity,this.bounds[1][p]=Infinity;this._state=g.slice().reverse();this._velocity=e.slice().reverse();this._time=[n];this._scratch=[g.slice(),g.slice(),g.slice(),g.slice(),g.slice()]}function l(g){for(var e=Array(g),n=0;n<g;++n)e[n]=0;return e}K.exports=function(g,e,n){switch(arguments.length){case 0:return new m([0],
[0],0);case 1:if("number"===typeof g){var p=l(g);return new m(p,p,0)}return new m(g,l(g.length),0);case 2:if("number"===typeof e)return p=l(g.length),new m(g,p,+e);n=0;case 3:if(g.length!==e.length)throw Error("state and velocity lengths must match");return new m(g,e,n)}};var h=b("cubic-hermite"),a=b("binary-search-bounds");b=m.prototype;b.flush=function(g){g=a.gt(this._time,g)-1;0>=g||(this._time.splice(0,g),this._state.splice(0,g*this.dimension),this._velocity.splice(0,g*this.dimension))};b.curve=
function(g){var e=this._time,n=e.length,p=a.le(e,g),c=this._scratch[0],d=this._state,f=this._velocity,k=this.dimension,r=this.bounds;if(0>p){var u=k-1;for(e=0;e<k;++e,--u)c[e]=d[u]}else if(p>=n-1)for(u=d.length-1,g-=e[n-1],e=0;e<k;++e,--u)c[e]=d[u]+g*f[u];else{u=k*(p+1)-1;n=e[p];p=e[p+1]-n||1;var v=this._scratch[1],x=this._scratch[2],C=this._scratch[3],z=this._scratch[4],y=!0;for(e=0;e<k;++e,--u)v[e]=d[u],C[e]=f[u]*p,x[e]=d[u+k],z[e]=f[u+k]*p,y=y&&v[e]===x[e]&&C[e]===z[e]&&0===C[e];if(y)for(e=0;e<
k;++e)c[e]=v[e];else h(v,C,x,z,(g-n)/p,c)}d=r[0];r=r[1];for(e=0;e<k;++e)c[e]=q(d[e],r[e],c[e]);return c};b.dcurve=function(g){var e=this._time,n=e.length,p=a.le(e,g),c=this._scratch[0],d=this._state,f=this._velocity,k=this.dimension;if(p>=n-1)for(n=d.length-1,e=0;e<k;++e,--n)c[e]=f[n];else{n=k*(p+1)-1;var r=e[p];p=e[p+1]-r||1;var u=this._scratch[1],v=this._scratch[2],x=this._scratch[3],C=this._scratch[4],z=!0;for(e=0;e<k;++e,--n)u[e]=d[n],x[e]=f[n]*p,v[e]=d[n+k],C[e]=f[n+k]*p,z=z&&u[e]===v[e]&&x[e]===
C[e]&&0===x[e];if(z)for(e=0;e<k;++e)c[e]=0;else for(h.derivative(u,x,v,C,(g-r)/p,c),e=0;e<k;++e)c[e]/=p}return c};b.lastT=function(){var g=this._time;return g[g.length-1]};b.stable=function(){for(var g=this._velocity,e=g.length,n=this.dimension-1;0<=n;--n)if(g[--e])return!1;return!0};b.jump=function(g){var e=this.lastT(),n=this.dimension;if(!(g<e||arguments.length!==n+1)){var p=this._state,c=this._velocity,d=p.length-this.dimension,f=this.bounds,k=f[0];f=f[1];this._time.push(e,g);for(e=0;2>e;++e)for(var r=
0;r<n;++r)p.push(p[d++]),c.push(0);this._time.push(g);for(r=n;0<r;--r)p.push(q(k[r-1],f[r-1],arguments[r])),c.push(0)}};b.push=function(g){var e=this.lastT(),n=this.dimension;if(!(g<e||arguments.length!==n+1)){var p=this._state,c=this._velocity,d=p.length-this.dimension,f=g-e,k=this.bounds;e=k[0];k=k[1];f=1E-6<f?1/f:0;for(this._time.push(g);0<n;--n){var r=q(e[n-1],k[n-1],arguments[n]);p.push(r);c.push((r-p[d++])*f)}}};b.set=function(g){var e=this.dimension;if(!(g<this.lastT()||arguments.length!==
e+1)){var n=this._state,p=this._velocity,c=this.bounds,d=c[0];c=c[1];for(this._time.push(g);0<e;--e)n.push(q(d[e-1],c[e-1],arguments[e])),p.push(0)}};b.move=function(g){var e=this.lastT(),n=this.dimension;if(!(g<=e||arguments.length!==n+1)){var p=this._state,c=this._velocity,d=p.length-this.dimension,f=this.bounds,k=f[0];f=f[1];e=g-e;e=1E-6<e?1/e:0;for(this._time.push(g);0<n;--n){var r=arguments[n];p.push(q(k[n-1],f[n-1],p[d++]+r));c.push(r*e)}}};b.idle=function(g){var e=this.lastT();if(!(g<e)){var n=
this.dimension,p=this._state,c=this._velocity,d=p.length-n,f=this.bounds,k=f[0];f=f[1];e=g-e;this._time.push(g);for(g=n-1;0<=g;--g)p.push(q(k[g],f[g],p[d]+e*c[d])),c.push(0),d+=1}}},{"binary-search-bounds":243,"cubic-hermite":150}],243:[function(b,K,G){function q(l,h,a,g,e,n){l=["function ",l,"(a,l,h,",g.join(","),"){",n?"":"var i=",a?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a",e?".get(m)":"[m]"];n?0>h.indexOf("c")?l.push(";if(x===y){return m}else if(x<=y){"):l.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):
l.push(";if(",h,"){i=m;");a?l.push("l=m+1}else{h=m-1}"):l.push("h=m-1}else{l=m+1}");l.push("}");n?l.push("return -1};"):l.push("return i};");return l.join("")}function m(l,h,a,g){return(new Function([q("A","x"+l+"y",h,["y"],!1,g),q("B","x"+l+"y",h,["y"],!0,g),q("P","c(x,y)"+l+"0",h,["y","c"],!1,g),q("Q","c(x,y)"+l+"0",h,["y","c"],!0,g),"function dispatchBsearch",a,"(a,y,c,l,h){if(a.shape){if(typeof(c)==='function'){return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)==='function'){return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)}else{return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)}}}return dispatchBsearch",
a].join("")))()}K.exports={ge:m(">=",!1,"GE"),gt:m(">",!1,"GT"),lt:m("<",!0,"LT"),le:m("<=",!0,"LE"),eq:m("-",!0,"EQ",!0)}},{}],244:[function(b,K,G){var q=b("dtype");K.exports=function(m,l,h){if(!m)throw new TypeError("must specify data as first parameter");h=+(h||0)|0;if(Array.isArray(m)&&m[0]&&"number"===typeof m[0][0]){var a=m[0].length,g=m.length*a;l&&"string"!==typeof l||(l=new (q(l||"float32"))(g+h));var e=l.length-h;if(g!==e)throw Error("source length "+g+" ("+a+"x"+m.length+") does not match destination length "+
e);for(g=0;g<m.length;g++)for(e=0;e<a;e++)l[h++]=null===m[g][e]?NaN:m[g][e]}else if(l&&"string"!==typeof l)l.set(m,h);else if(a=q(l||"float32"),Array.isArray(m)||"array"===l)for(l=new a(m.length+h),g=0,a=l.length;h<a;h++,g++)l[h]=null===m[g]?NaN:m[g];else 0===h?l=new a(m):(l=new a(m.length+h),l.set(m,h));return l}},{dtype:175}],245:[function(b,K,G){var q=b("css-font/stringify"),m=[32,126];K.exports=function(l){l=l||{};var h=l.shape?l.shape:l.canvas?[l.canvas.width,l.canvas.height]:[512,512],a=l.canvas||
document.createElement("canvas"),g=l.font,e="number"===typeof l.step?[l.step,l.step]:l.step||[32,32];l=l.chars||m;g&&"string"!==typeof g&&(g=q(g));if(!Array.isArray(l))l=String(l).split("");else if(2===l.length&&"number"===typeof l[0]&&"number"===typeof l[1]){for(var n=[],p=l[0],c=0;p<=l[1];p++)n[c++]=String.fromCharCode(p);l=n}h=h.slice();a.width=h[0];a.height=h[1];n=a.getContext("2d");n.fillStyle="#000";n.fillRect(0,0,a.width,a.height);n.font=g;n.textAlign="center";n.textBaseline="middle";n.fillStyle=
"#fff";g=e[0]/2;c=e[1]/2;for(p=0;p<l.length;p++)n.fillText(l[p],g,c),(g+=e[0])>h[0]-e[0]/2&&(g=e[0]/2,c+=e[1]);return a}},{"css-font/stringify":147}],246:[function(b,K,G){function q(a,g){g||(g={});if("string"===typeof a||Array.isArray(a))g.family=a;var e=Array.isArray(g.family)?g.family.join(", "):g.family;if(!e)throw Error("`family` must be defined");var n=g.size||g.fontSize||g.em||48;a=[g.style||g.fontStyle||"",g.weight||g.fontWeight||"",n].join(" ")+"px "+e;var p=g.origin||"top";if(q.cache[e]&&
n<=q.cache[e].em)return m(q.cache[e],p);var c=g.canvas||q.canvas,d=c.getContext("2d"),f=void 0!==g.upper?g.upper:"H",k=void 0!==g.lower?g.lower:"x",r=void 0!==g.descent?g.descent:"p",u=void 0!==g.ascent?g.ascent:"h",v=void 0!==g.tittle?g.tittle:"i";g=void 0!==g.overshoot?g.overshoot:"O";var x=Math.ceil(1.5*n);c.height=x;c.width=.5*x;d.font=a;a={top:0};d.clearRect(0,0,x,x);d.textBaseline="top";d.fillStyle="black";d.fillText("H",0,0);c=l(d.getImageData(0,0,x,x));d.clearRect(0,0,x,x);d.textBaseline=
"bottom";d.fillText("H",0,x);var C=l(d.getImageData(0,0,x,x));a.lineHeight=a.bottom=x-C+c;d.clearRect(0,0,x,x);d.textBaseline="alphabetic";d.fillText("H",0,x);C=l(d.getImageData(0,0,x,x));C=x-C-1+c;a.baseline=a.alphabetic=C;d.clearRect(0,0,x,x);d.textBaseline="middle";d.fillText("H",0,.5*x);var z=l(d.getImageData(0,0,x,x));a.median=a.middle=x-z-1+c-.5*x;d.clearRect(0,0,x,x);d.textBaseline="hanging";d.fillText("H",0,.5*x);z=l(d.getImageData(0,0,x,x));a.hanging=x-z-1+c-.5*x;d.clearRect(0,0,x,x);d.textBaseline=
"ideographic";d.fillText("H",0,x);z=l(d.getImageData(0,0,x,x));a.ideographic=x-z-1+c;f&&(d.clearRect(0,0,x,x),d.textBaseline="top",d.fillText(f,0,0),a.upper=l(d.getImageData(0,0,x,x)),a.capHeight=a.baseline-a.upper);k&&(d.clearRect(0,0,x,x),d.textBaseline="top",d.fillText(k,0,0),a.lower=l(d.getImageData(0,0,x,x)),a.xHeight=a.baseline-a.lower);v&&(d.clearRect(0,0,x,x),d.textBaseline="top",d.fillText(v,0,0),a.tittle=l(d.getImageData(0,0,x,x)));u&&(d.clearRect(0,0,x,x),d.textBaseline="top",d.fillText(u,
0,0),a.ascent=l(d.getImageData(0,0,x,x)));r&&(d.clearRect(0,0,x,x),d.textBaseline="top",d.fillText(r,0,0),a.descent=h(d.getImageData(0,0,x,x)));g&&(d.clearRect(0,0,x,x),d.textBaseline="top",d.fillText(g,0,0),d=h(d.getImageData(0,0,x,x)),a.overshoot=d-C);for(var y in a)a[y]/=n;a.em=n;q.cache[e]=a;return m(a,p)}function m(a,g){var e={};"string"===typeof g&&(g=a[g]);for(var n in a)"em"!==n&&(e[n]=a[n]-g);return e}function l(a){var g=a.height;a=a.data;for(var e=3;e<a.length;e+=4)if(0!==a[e])return Math.floor(.25*
(e-3)/g)}function h(a){var g=a.height;a=a.data;for(var e=a.length-1;0<e;e-=4)if(0!==a[e])return Math.floor(.25*(e-3)/g)}K.exports=q;q.canvas=document.createElement("canvas");q.cache={}},{}],247:[function(b,K,G){function q(f,k,r,u,v,x){this._color=f;this.key=k;this.value=r;this.left=u;this.right=v;this._count=x}function m(f){return new q(f._color,f.key,f.value,f.left,f.right,f._count)}function l(f,k){return new q(f,k.key,k.value,k.left,k.right,k._count)}function h(f){f._count=1+(f.left?f.left._count:
0)+(f.right?f.right._count:0)}function a(f,k){this._compare=f;this.root=k}function g(f,k){if(k.left){var r=g(f,k.left);if(r)return r}if(r=f(k.key,k.value))return r;if(k.right)return g(f,k.right)}function e(f,k,r,u){if(0>=k(f,u.key)){if(u.left){var v=e(f,k,r,u.left);if(v)return v}if(v=r(u.key,u.value))return v}if(u.right)return e(f,k,r,u.right)}function n(f,k,r,u,v){var x=r(f,v.key),C=r(k,v.key);if(0>=x&&(v.left&&(x=n(f,k,r,u,v.left))||0<C&&(x=u(v.key,v.value))))return x;if(0<C&&v.right)return n(f,
k,r,u,v.right)}function p(f,k){this.tree=f;this._stack=k}function c(f,k){f.key=k.key;f.value=k.value;f.left=k.left;f.right=k.right;f._color=k._color;f._count=k._count}function d(f,k){return f<k?-1:f>k?1:0}K.exports=function(f){return new a(f||d,null)};b=a.prototype;Object.defineProperty(b,"keys",{get:function(){var f=[];this.forEach(function(k,r){f.push(k)});return f}});Object.defineProperty(b,"values",{get:function(){var f=[];this.forEach(function(k,r){f.push(r)});return f}});Object.defineProperty(b,
"length",{get:function(){return this.root?this.root._count:0}});b.insert=function(f,k){for(var r=this._compare,u=this.root,v=[],x=[];u;){var C=r(f,u.key);v.push(u);x.push(C);u=0>=C?u.left:u.right}v.push(new q(0,f,k,null,null,1));for(f=v.length-2;0<=f;--f)u=v[f],v[f]=0>=x[f]?new q(u._color,u.key,u.value,v[f+1],u.right,u._count+1):new q(u._color,u.key,u.value,u.left,v[f+1],u._count+1);for(f=v.length-1;1<f;--f){x=v[f-1];u=v[f];if(1===x._color||1===u._color)break;k=v[f-2];if(k.left===x)if(x.left===u)if((C=
k.right)&&0===C._color)x._color=1,k.right=l(1,C),k._color=0,--f;else{k._color=0;k.left=x.right;x._color=1;x.right=k;v[f-2]=x;v[f-1]=u;h(k);h(x);3<=f&&(f=v[f-3],f.left===k?f.left=x:f.right=x);break}else if((C=k.right)&&0===C._color)x._color=1,k.right=l(1,C),k._color=0,--f;else{x.right=u.left;k._color=0;k.left=u.right;u._color=1;u.left=x;u.right=k;v[f-2]=u;v[f-1]=x;h(k);h(x);h(u);3<=f&&(f=v[f-3],f.left===k?f.left=u:f.right=u);break}else if(x.right===u)if((C=k.left)&&0===C._color)x._color=1,k.left=l(1,
C),k._color=0,--f;else{k._color=0;k.right=x.left;x._color=1;x.left=k;v[f-2]=x;v[f-1]=u;h(k);h(x);3<=f&&(f=v[f-3],f.right===k?f.right=x:f.left=x);break}else if((C=k.left)&&0===C._color)x._color=1,k.left=l(1,C),k._color=0,--f;else{x.left=u.right;k._color=0;k.right=u.left;u._color=1;u.right=x;u.left=k;v[f-2]=u;v[f-1]=x;h(k);h(x);h(u);3<=f&&(f=v[f-3],f.right===k?f.right=u:f.left=u);break}}v[0]._color=1;return new a(r,v[0])};b.forEach=function(f,k,r){if(this.root)switch(arguments.length){case 1:return g(f,
this.root);case 2:return e(k,this._compare,f,this.root);case 3:if(!(0<=this._compare(k,r)))return n(k,r,this._compare,f,this.root)}};Object.defineProperty(b,"begin",{get:function(){for(var f=[],k=this.root;k;)f.push(k),k=k.left;return new p(this,f)}});Object.defineProperty(b,"end",{get:function(){for(var f=[],k=this.root;k;)f.push(k),k=k.right;return new p(this,f)}});b.at=function(f){if(0>f)return new p(this,[]);for(var k=this.root,r=[];;){r.push(k);if(k.left){if(f<k.left._count){k=k.left;continue}f-=
k.left._count}if(!f)return new p(this,r);--f;if(k.right){if(f>=k.right._count)break;k=k.right}else break}return new p(this,[])};b.ge=function(f){for(var k=this._compare,r=this.root,u=[],v=0;r;){var x=k(f,r.key);u.push(r);0>=x&&(v=u.length);r=0>=x?r.left:r.right}u.length=v;return new p(this,u)};b.gt=function(f){for(var k=this._compare,r=this.root,u=[],v=0;r;){var x=k(f,r.key);u.push(r);0>x&&(v=u.length);r=0>x?r.left:r.right}u.length=v;return new p(this,u)};b.lt=function(f){for(var k=this._compare,
r=this.root,u=[],v=0;r;){var x=k(f,r.key);u.push(r);0<x&&(v=u.length);r=0>=x?r.left:r.right}u.length=v;return new p(this,u)};b.le=function(f){for(var k=this._compare,r=this.root,u=[],v=0;r;){var x=k(f,r.key);u.push(r);0<=x&&(v=u.length);r=0>x?r.left:r.right}u.length=v;return new p(this,u)};b.find=function(f){for(var k=this._compare,r=this.root,u=[];r;){var v=k(f,r.key);u.push(r);if(0===v)return new p(this,u);r=0>=v?r.left:r.right}return new p(this,[])};b.remove=function(f){return(f=this.find(f))?
f.remove():this};b.get=function(f){for(var k=this._compare,r=this.root;r;){var u=k(f,r.key);if(0===u)return r.value;r=0>=u?r.left:r.right}};b=p.prototype;Object.defineProperty(b,"valid",{get:function(){return 0<this._stack.length}});Object.defineProperty(b,"node",{get:function(){return 0<this._stack.length?this._stack[this._stack.length-1]:null},enumerable:!0});b.clone=function(){return new p(this.tree,this._stack.slice())};b.remove=function(){var f=this._stack;if(0===f.length)return this.tree;var k=
Array(f.length),r=f[f.length-1];k[k.length-1]=new q(r._color,r.key,r.value,r.left,r.right,r._count);for(var u=f.length-2;0<=u;--u)r=f[u],k[u]=r.left===f[u+1]?new q(r._color,r.key,r.value,k[u+1],r.right,r._count):new q(r._color,r.key,r.value,r.left,k[u+1],r._count);r=k[k.length-1];if(r.left&&r.right){f=k.length;for(r=r.left;r.right;)k.push(r),r=r.right;u=k[f-1];k.push(new q(r._color,u.key,u.value,r.left,r.right,r._count));k[f-1].key=r.key;k[f-1].value=r.value;for(u=k.length-2;u>=f;--u)r=k[u],k[u]=
new q(r._color,r.key,r.value,r.left,k[u+1],r._count);k[f-1].left=k[f]}r=k[k.length-1];if(0===r._color)for(u=k[k.length-2],u.left===r?u.left=null:u.right===r&&(u.right=null),k.pop(),u=0;u<k.length;++u)k[u]._count--;else if(r.left||r.right)for(r.left?c(r,r.left):r.right&&c(r,r.right),r._color=1,u=0;u<k.length-1;++u)k[u]._count--;else{if(1===k.length)return new a(this.tree._compare,null);for(u=0;u<k.length;++u)k[u]._count--;u=k[k.length-2];for(var v,x,C,z=k.length-1;0<=z;--z){f=k[z];if(0===z){f._color=
1;break}v=k[z-1];if(v.left===f){x=v.right;if(x.right&&0===x.right._color){x=v.right=m(x);C=x.right=m(x.right);v.right=x.left;x.left=v;x.right=C;x._color=v._color;f._color=1;v._color=1;C._color=1;h(v);h(x);if(1<z){var y=k[z-2];y.left===v?y.left=x:y.right=x}k[z-1]=x;break}else if(x.left&&0===x.left._color){x=v.right=m(x);C=x.left=m(x.left);v.right=C.left;x.left=C.right;C.left=v;C.right=x;C._color=v._color;v._color=1;x._color=1;f._color=1;h(v);h(x);h(C);1<z&&(y=k[z-2],y.left===v?y.left=C:y.right=C);
k[z-1]=C;break}if(1===x._color)if(0===v._color){v._color=1;v.right=l(0,x);break}else v.right=l(0,x);else x=m(x),v.right=x.left,x.left=v,x._color=v._color,v._color=0,h(v),h(x),1<z&&(y=k[z-2],y.left===v?y.left=x:y.right=x),k[z-1]=x,k[z]=v,z+1<k.length?k[z+1]=f:k.push(f),z+=2}else{x=v.left;if(x.left&&0===x.left._color){x=v.left=m(x);C=x.left=m(x.left);v.left=x.right;x.right=v;x.left=C;x._color=v._color;f._color=1;v._color=1;C._color=1;h(v);h(x);1<z&&(y=k[z-2],y.right===v?y.right=x:y.left=x);k[z-1]=x;
break}else if(x.right&&0===x.right._color){x=v.left=m(x);C=x.right=m(x.right);v.left=C.right;x.right=C.left;C.right=v;C.left=x;C._color=v._color;v._color=1;x._color=1;f._color=1;h(v);h(x);h(C);1<z&&(y=k[z-2],y.right===v?y.right=C:y.left=C);k[z-1]=C;break}if(1===x._color)if(0===v._color){v._color=1;v.left=l(0,x);break}else v.left=l(0,x);else x=m(x),v.left=x.right,x.right=v,x._color=v._color,v._color=0,h(v),h(x),1<z&&(y=k[z-2],y.right===v?y.right=x:y.left=x),k[z-1]=x,k[z]=v,z+1<k.length?k[z+1]=f:k.push(f),
z+=2}}u.left===r?u.left=null:u.right=null}return new a(this.tree._compare,k[0])};Object.defineProperty(b,"key",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].key},enumerable:!0});Object.defineProperty(b,"value",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].value},enumerable:!0});Object.defineProperty(b,"index",{get:function(){var f=0,k=this._stack;if(0===k.length)return(f=this.tree.root)?f._count:0;k[k.length-1].left&&(f=k[k.length-
1].left._count);for(var r=k.length-2;0<=r;--r)k[r+1]===k[r].right&&(++f,k[r].left&&(f+=k[r].left._count));return f},enumerable:!0});b.next=function(){var f=this._stack;if(0!==f.length){var k=f[f.length-1];if(k.right)for(k=k.right;k;)f.push(k),k=k.left;else for(f.pop();0<f.length&&f[f.length-1].right===k;)k=f[f.length-1],f.pop()}};Object.defineProperty(b,"hasNext",{get:function(){var f=this._stack;if(0===f.length)return!1;if(f[f.length-1].right)return!0;for(var k=f.length-1;0<k;--k)if(f[k-1].left===
f[k])return!0;return!1}});b.update=function(f){var k=this._stack;if(0===k.length)throw Error("Can't update empty node!");var r=Array(k.length),u=k[k.length-1];r[r.length-1]=new q(u._color,u.key,f,u.left,u.right,u._count);for(f=k.length-2;0<=f;--f)u=k[f],r[f]=u.left===k[f+1]?new q(u._color,u.key,u.value,r[f+1],u.right,u._count):new q(u._color,u.key,u.value,u.left,r[f+1],u._count);return new a(this.tree._compare,r[0])};b.prev=function(){var f=this._stack;if(0!==f.length){var k=f[f.length-1];if(k.left)for(k=
k.left;k;)f.push(k),k=k.right;else for(f.pop();0<f.length&&f[f.length-1].left===k;)k=f[f.length-1],f.pop()}};Object.defineProperty(b,"hasPrev",{get:function(){var f=this._stack;if(0===f.length)return!1;if(f[f.length-1].left)return!0;for(var k=f.length-1;0<k;--k)if(f[k-1].right===f[k])return!0;return!1}})},{}],248:[function(b,K,G){function q(h){if(0>h)return Number("0/0");for(var a=l[0],g=l.length-1;0<g;--g)a+=l[g]/(h+g);g=h+4.7421875+.5;return.5*Math.log(2*Math.PI)+(h+.5)*Math.log(g)-g+Math.log(a)-
Math.log(h)}var m=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9.984369578019572E-6,1.5056327351493116E-7],l=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3.399464998481189E-5,4.652362892704858E-5,-9.837447530487956E-5,1.580887032249125E-4,-2.1026444172410488E-4,2.1743961811521265E-4,-1.643181065367639E-4,8.441822398385275E-5,-2.6190838401581408E-5,3.6899182659531625E-6];
K.exports=function g(a){if(.5>a)return Math.PI/(Math.sin(Math.PI*a)*g(1-a));if(100<a)return Math.exp(q(a));--a;for(var e=m[0],n=1;9>n;n++)e+=m[n]/(a+n);n=a+7+.5;return Math.sqrt(2*Math.PI)*Math.pow(n,a+.5)*Math.exp(-n)*e};K.exports.log=q},{}],249:[function(b,K,G){K.exports=function(q,m){if("string"!==typeof q)throw new TypeError("must specify type string");m=m||{};if("undefined"===typeof document&&!m.canvas)return null;var l=m.canvas||document.createElement("canvas");"number"===typeof m.width&&(l.width=
m.width);"number"===typeof m.height&&(l.height=m.height);var h;try{var a=[q];0===q.indexOf("webgl")&&a.push("experimental-"+q);for(q=0;q<a.length;q++)if(h=l.getContext(a[q],m))return h}catch(g){h=null}return h||null}},{}],250:[function(b,K,G){function q(x,C){x[0]=C[0];x[1]=C[1];x[2]=C[2];return x}function m(x){this.gl=x;this.pixelRatio=1;this.bounds=[[-10,-10,-10],[10,10,10]];this.ticks=[[],[],[]];this.autoTicks=!0;this.tickSpacing=[1,1,1];this.tickEnable=[!0,!0,!0];this.tickFont=["sans-serif","sans-serif",
"sans-serif"];this.tickSize=[12,12,12];this.tickAngle=[0,0,0];this.tickAlign=["auto","auto","auto"];this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.tickPad=[10,10,10];this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]};this.labels=["x","y","z"];this.labelEnable=[!0,!0,!0];this.labelFont="sans-serif";this.labelSize=[20,20,20];this.labelAngle=[0,0,0];this.labelAlign=["auto","auto","auto"];this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.labelPad=[10,10,10];this.lineEnable=[!0,!0,!0];this.lineMirror=
[!1,!1,!1];this.lineWidth=[1,1,1];this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.lineTickEnable=[!0,!0,!0];this.lineTickMirror=[!1,!1,!1];this.lineTickLength=[0,0,0];this.lineTickWidth=[1,1,1];this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.gridEnable=[!0,!0,!0];this.gridWidth=[1,1,1];this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.zeroEnable=[!0,!0,!0];this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.zeroLineWidth=[2,2,2];this.backgroundEnable=[!1,!1,!1];this.backgroundColor=
[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]];this._firstInit=!0;this._lines=this._text=null;this._background=e(x)}function l(){this.primalOffset=[0,0,0];this.primalMinor=[0,0,0];this.mirrorOffset=[0,0,0];this.mirrorMinor=[0,0,0]}function h(x,C,z,y,D){var A=x.primalOffset,t=x.primalMinor,B=x.mirrorOffset;x=x.mirrorMinor;y=y[C];for(var F=0;3>F;++F)if(C!==F){var I=A,J=B,L=t,H=x;y&1<<F&&(I=B,J=A,L=x,H=t);I[F]=z[0][F];J[F]=z[1][F];0<D[F]?(L[F]=-1,H[F]=0):(L[F]=0,H[F]=1)}}K.exports=function(x,C){x=new m(x);
x.update(C);return x};var a=b("./lib/text.js"),g=b("./lib/lines.js"),e=b("./lib/background.js"),n=b("./lib/cube.js"),p=b("./lib/ticks.js"),c=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);b=m.prototype;b.update=function(x){function C(H,P,M){if(M in x){var N=x[M],T=this[M],Q;(H?Array.isArray(N)&&Array.isArray(N[0]):Array.isArray(N))?this[M]=Q=[P(N[0]),P(N[1]),P(N[2])]:this[M]=Q=[P(N),P(N),P(N)];for(H=0;3>H;++H)if(Q[H]!==T[H])return!0}return!1}x=x||{};var z=C.bind(this,!1,Number),y=C.bind(this,
!1,Boolean),D=C.bind(this,!1,String),A=C.bind(this,!0,function(H){if(Array.isArray(H)){if(3===H.length)return[+H[0],+H[1],+H[2],1];if(4===H.length)return[+H[0],+H[1],+H[2],+H[3]]}return[0,0,0,1]}),t=!1,B=!1;if("bounds"in x){var F=x.bounds,I=0;for(;2>I;++I)for(var J=0;3>J;++J)F[I][J]!==this.bounds[I][J]&&(B=!0),this.bounds[I][J]=F[I][J]}if("ticks"in x){var L=x.ticks;t=!0;this.autoTicks=!1;for(I=0;3>I;++I)this.tickSpacing[I]=0}else z("tickSpacing")&&(B=this.autoTicks=!0);this._firstInit&&("ticks"in
x||"tickSpacing"in x||(this.autoTicks=!0),t=B=!0,this._firstInit=!1);B&&this.autoTicks&&(L=p.create(this.bounds,this.tickSpacing),t=!0);if(t){for(I=0;3>I;++I)L[I].sort(function(H,P){return H.x-P.x});p.equal(L,this.ticks)?t=!1:this.ticks=L}y("tickEnable");D("tickFont")&&(t=!0);z("tickSize");z("tickAngle");z("tickPad");A("tickColor");L=D("labels");D("labelFont")&&(L=!0);y("labelEnable");z("labelSize");z("labelPad");A("labelColor");y("lineEnable");y("lineMirror");z("lineWidth");A("lineColor");y("lineTickEnable");
y("lineTickMirror");z("lineTickLength");z("lineTickWidth");A("lineTickColor");y("gridEnable");z("gridWidth");A("gridColor");y("zeroEnable");A("zeroLineColor");z("zeroLineWidth");y("backgroundEnable");A("backgroundColor");this._text?this._text&&(L||t)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=a(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont);this._lines&&t&&(this._lines.dispose(),this._lines=null);this._lines||(this._lines=
g(this.gl,this.bounds,this.ticks))};var d=[new l,new l,new l],f=[0,0,0],k={model:c,view:c,projection:c,_ortho:!1};b.isOpaque=function(){return!0};b.isTransparent=function(){return!1};b.drawTransparent=function(x){};var r=[0,0,0],u=[0,0,0],v=[0,0,0];b.draw=function(x){function C(M){P=[0,0,0];P[M]=1}function z(M,N,T){var Q=(M+1)%3;M=(M+2)%3;var U=N[Q];N=N[M];var S=T[Q];T=T[M];0<U&&0<T?C(Q):0<U&&0>T?C(Q):0>U&&0<T?C(Q):0>U&&0>T?C(Q):0<N&&0<S?C(M):0<N&&0>S?C(M):0>N&&0<S?C(M):0>N&&0>S&&C(M)}x=x||k;var y=
this.gl,D=x.model||c,A=x.view||c,t=x.projection||c,B=this.bounds;x=x._ortho||!1;var F=n(D,A,t,B,x),I=F.cubeEdges;F=F.axis;x=(x?2:1)*this.pixelRatio*(t[3]*A[12]+t[7]*A[13]+t[11]*A[14]+t[15]*A[15])/y.drawingBufferHeight;for(y=0;3>y;++y)this.lastCubeProps.cubeEdges[y]=I[y],this.lastCubeProps.axis[y]=F[y];for(y=0;3>y;++y)h(d[y],y,this.bounds,I,F);y=this.gl;for(y=0;3>y;++y)f[y]=this.backgroundEnable[y]?F[y]:0;this._background.draw(D,A,t,B,f,this.backgroundColor);this._lines.bind(D,A,t,this);for(y=0;3>
y;++y){var J=[0,0,0];J[y]=0<F[y]?B[1][y]:B[0][y];for(I=0;2>I;++I){var L=(y+1+I)%3,H=(y+1+(I^1))%3;this.gridEnable[L]&&this._lines.drawGrid(L,H,this.bounds,J,this.gridColor[L],this.gridWidth[L]*this.pixelRatio)}for(I=0;2>I;++I)L=(y+1+I)%3,H=(y+1+(I^1))%3,this.zeroEnable[H]&&0>=Math.min(B[0][H],B[1][H])&&0<=Math.max(B[0][H],B[1][H])&&this._lines.drawZero(L,H,this.bounds,J,this.zeroLineColor[H],this.zeroLineWidth[H]*this.pixelRatio)}for(y=0;3>y;++y){this.lineEnable[y]&&this._lines.drawAxisLine(y,this.bounds,
d[y].primalOffset,this.lineColor[y],this.lineWidth[y]*this.pixelRatio);this.lineMirror[y]&&this._lines.drawAxisLine(y,this.bounds,d[y].mirrorOffset,this.lineColor[y],this.lineWidth[y]*this.pixelRatio);F=q(r,d[y].primalMinor);J=q(u,d[y].mirrorMinor);L=this.lineTickLength;for(I=0;3>I;++I)H=x/D[5*I],F[I]=F[I]*L[I]*H,J[I]=J[I]*L[I]*H;this.lineTickEnable[y]&&this._lines.drawAxisTicks(y,d[y].primalOffset,F,this.lineTickColor[y],this.lineTickWidth[y]*this.pixelRatio);this.lineTickMirror[y]&&this._lines.drawAxisTicks(y,
d[y].mirrorOffset,J,this.lineTickColor[y],this.lineTickWidth[y]*this.pixelRatio)}this._lines.unbind();this._text.bind(D,A,t,this.pixelRatio);for(y=0;3>y;++y){A=d[y].primalMinor;t=d[y].mirrorMinor;F=q(v,d[y].primalOffset);for(I=0;3>I;++I)this.lineTickEnable[y]&&(F[I]+=x*A[I]*Math.max(this.lineTickLength[I],0)/D[5*I]);J=[0,0,0];J[y]=1;if(this.tickEnable[y]){-3600===this.tickAngle[y]?(this.tickAngle[y]=0,this.tickAlign[y]="auto"):this.tickAlign[y]=-1;I=1;L=[this.tickAlign[y],.5,I];L[0]="auto"===L[0]?
0:parseInt(""+L[0]);var P=[0,0,0];z(y,A,t);for(I=0;3>I;++I)F[I]+=x*A[I]*this.tickPad[I]/D[5*I];this._text.drawTicks(y,this.tickSize[y],this.tickAngle[y],F,this.tickColor[y],J,P,L)}if(this.labelEnable[y]){I=0;P=[0,0,0];4<this.labels[y].length&&(C(y),I=1);L=[this.labelAlign[y],.5,I];L[0]="auto"===L[0]?0:parseInt(""+L[0]);for(I=0;3>I;++I)F[I]+=x*A[I]*this.labelPad[I]/D[5*I];F[y]+=.5*(B[0][y]+B[1][y]);this._text.drawLabel(y,this.labelSize[y],this.labelAngle[y],F,this.labelColor[y],[0,0,0],P,L)}}this._text.unbind()};
b.dispose=function(){this._text.dispose();this._lines.dispose();this._background.dispose();this.gl=this._background=this._text=this._lines=null}},{"./lib/background.js":251,"./lib/cube.js":252,"./lib/lines.js":253,"./lib/text.js":255,"./lib/ticks.js":256}],251:[function(b,K,G){function q(a,g,e,n){this.gl=a;this.buffer=g;this.vao=e;this.shader=n}K.exports=function(a){for(var g=[],e=[],n=0,p=0;3>p;++p)for(var c=(p+1)%3,d=(p+2)%3,f=[0,0,0],k=[0,0,0],r=-1;1>=r;r+=2){e.push(n,n+2,n+1,n+1,n+2,n+3);f[p]=
r;k[p]=r;for(var u=-1;1>=u;u+=2){f[c]=u;for(var v=-1;1>=v;v+=2)f[d]=v,g.push(f[0],f[1],f[2],k[0],k[1],k[2]),n+=1}u=c;c=d;d=u}g=m(a,new Float32Array(g));e=m(a,new Uint16Array(e),a.ELEMENT_ARRAY_BUFFER);e=l(a,[{buffer:g,type:a.FLOAT,size:3,offset:0,stride:24},{buffer:g,type:a.FLOAT,size:3,offset:12,stride:24}],e);n=h(a);n.attributes.position.location=0;n.attributes.normal.location=1;return new q(a,g,e,n)};var m=b("gl-buffer"),l=b("gl-vao"),h=b("./shaders").bg;b=q.prototype;b.draw=function(a,g,e,n,p,
c){for(var d=!1,f=0;3>f;++f)d=d||p[f];d&&(d=this.gl,d.enable(d.POLYGON_OFFSET_FILL),d.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:a,view:g,projection:e,bounds:n,enable:p,colors:c},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),d.disable(d.POLYGON_OFFSET_FILL))};b.dispose=function(){this.vao.dispose();this.buffer.dispose();this.shader.dispose()}},{"./shaders":254,"gl-buffer":259,"gl-vao":358}],252:[function(b,K,G){K.exports=function(r,u,v,x,C){m(a,u,r);
m(a,v,a);for(r=u=0;2>r;++r)for(n[2]=x[r][2],v=0;2>v;++v){n[1]=x[v][1];for(var z=0;2>z;++z){n[0]=x[z][0];for(var y=g[u],D=n,A=a,t=0;4>t;++t){y[t]=A[12+t];for(var B=0;3>B;++B)y[t]+=D[B]*A[4*B+t]}u+=1}}x=-1;for(r=0;8>r;++r){u=g[r][3];for(v=0;3>v;++v)e[r][v]=g[r][v]/u;C&&(e[r][2]*=-1);0>u&&(0>x?x=r:e[r][2]<e[x][2]&&(x=r))}if(0>x)for(r=x=0;3>r;++r){u=(r+2)%3;C=(r+1)%3;z=v=-1;for(y=0;2>y;++y)D=y<<r,A=D+(y<<u)+(1-y<<C),t=D+(1-y<<u)+(y<<C),0>h(e[D],e[A],e[t],p)||(y?v=1:z=1);if(!(0>v||0>z))for(y=0;2>y;++y){D=
y<<r;A=D+(y<<u)+(1-y<<C);t=D+(1-y<<u)+(y<<C);a:{D=[g[D],g[A],g[t],g[D+(1<<u)+(1<<C)]];for(t=0;t<c.length;++t)if(D=l.positive(D,c[t]),3>D.length){D=0;break a}t=D[0];A=t[0]/t[3];B=t[1]/t[3];var F=0;for(t=1;t+1<D.length;++t){var I=D[t],J=D[t+1];F+=Math.abs((I[0]/I[3]-A)*(J[1]/J[3]-B)-(I[1]/I[3]-B)*(J[0]/J[3]-A))}D=F}y?v=D:z=D}z>v&&(x|=1<<r)}u=7^x;y=-1;for(r=0;8>r;++r)r!==x&&r!==u&&(0>y?y=r:e[y][1]>e[r][1]&&(y=r));v=-1;for(r=0;3>r;++r)D=y^1<<r,D!==x&&D!==u&&(0>v&&(v=D),C=e[D],C[0]<e[v][0]&&(v=D));z=-1;
for(r=0;3>r;++r)D=y^1<<r,D!==x&&D!==u&&D!==v&&(0>z&&(z=D),C=e[D],C[0]>e[z][0]&&(z=D));C=d;C[0]=C[1]=C[2]=0;C[q.log2(v^y)]=y&v;C[q.log2(y^z)]=y&z;r=z^7;r===x||r===u?(r=v^7,C[q.log2(z^r)]=r&z):C[q.log2(v^r)]=r&v;C=f;for(r=0;3>r;++r)C[r]=x&1<<r?-1:1;return k};var q=b("bit-twiddle"),m=b("gl-mat4/multiply"),l=b("split-polygon"),h=b("robust-orientation"),a=Array(16),g=Array(8),e=Array(8),n=Array(3),p=[0,0,0];(function(){for(var r=0;8>r;++r)g[r]=[1,1,1,1],e[r]=[1,1,1]})();var c=[[0,0,1,0,0],[0,0,-1,1,0],
[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]],d=[1,1,1],f=[0,0,0],k={cubeEdges:d,axis:f}},{"bit-twiddle":97,"gl-mat4/multiply":295,"robust-orientation":548,"split-polygon":566}],253:[function(b,K,G){function q(f){f[0]=f[1]=f[2]=0;return f}function m(f,k){f[0]=k[0];f[1]=k[1];f[2]=k[2];return f}function l(f,k,r,u,v,x,C,z){this.gl=f;this.vertBuffer=k;this.vao=r;this.shader=u;this.tickCount=v;this.tickOffset=x;this.gridCount=C;this.gridOffset=z}K.exports=function(f,k,r){var u=[];k=[0,0,0];var v=
[0,0,0],x=[0,0,0],C=[0,0,0];u.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var z=0;3>z;++z){for(var y=u.length/3|0,D=0;D<r[z].length;++D){var A=+r[z][D].x;u.push(A,0,1,A,1,1,A,0,-1,A,0,-1,A,1,1,A,1,-1)}A=u.length/3|0;k[z]=y;v[z]=A-y;y=u.length/3|0;for(D=0;D<r[z].length;++D)A=+r[z][D].x,u.push(A,0,1,A,1,1,A,0,-1,A,0,-1,A,1,1,A,1,-1);A=u.length/3|0;x[z]=y;C[z]=A-y}r=h(f,new Float32Array(u));u=a(f,[{buffer:r,type:f.FLOAT,size:3,stride:0,offset:0}]);z=g(f);z.attributes.position.location=0;return new l(f,
r,u,z,v,k,C,x)};var h=b("gl-buffer"),a=b("gl-vao"),g=b("./shaders").line,e=[0,0,0],n=[0,0,0],p=[0,0,0],c=[0,0,0],d=[1,1];b=l.prototype;b.bind=function(f,k,r){this.shader.bind();this.shader.uniforms.model=f;this.shader.uniforms.view=k;this.shader.uniforms.projection=r;d[0]=this.gl.drawingBufferWidth;d[1]=this.gl.drawingBufferHeight;this.shader.uniforms.screenShape=d;this.vao.bind()};b.unbind=function(){this.vao.unbind()};b.drawAxisLine=function(f,k,r,u,v){var x=q(n);this.shader.uniforms.majorAxis=
n;x[f]=k[1][f]-k[0][f];this.shader.uniforms.minorAxis=x;r=m(c,r);r[f]+=k[0][f];this.shader.uniforms.offset=r;this.shader.uniforms.lineWidth=v;this.shader.uniforms.color=u;k=q(p);k[(f+2)%3]=1;this.shader.uniforms.screenAxis=k;this.vao.draw(this.gl.TRIANGLES,6);k=q(p);k[(f+1)%3]=1;this.shader.uniforms.screenAxis=k;this.vao.draw(this.gl.TRIANGLES,6)};b.drawAxisTicks=function(f,k,r,u,v){if(this.tickCount[f]){var x=q(e);x[f]=1;this.shader.uniforms.majorAxis=x;this.shader.uniforms.offset=k;this.shader.uniforms.minorAxis=
r;this.shader.uniforms.color=u;this.shader.uniforms.lineWidth=v;k=q(p);k[f]=1;this.shader.uniforms.screenAxis=k;this.vao.draw(this.gl.TRIANGLES,this.tickCount[f],this.tickOffset[f])}};b.drawGrid=function(f,k,r,u,v,x){if(this.gridCount[f]){var C=q(n);C[k]=r[1][k]-r[0][k];this.shader.uniforms.minorAxis=C;u=m(c,u);u[k]+=r[0][k];this.shader.uniforms.offset=u;k=q(e);k[f]=1;this.shader.uniforms.majorAxis=k;k=q(p);k[f]=1;this.shader.uniforms.screenAxis=k;this.shader.uniforms.lineWidth=x;this.shader.uniforms.color=
v;this.vao.draw(this.gl.TRIANGLES,this.gridCount[f],this.gridOffset[f])}};b.drawZero=function(f,k,r,u,v,x){var C=q(n);this.shader.uniforms.majorAxis=C;C[f]=r[1][f]-r[0][f];this.shader.uniforms.minorAxis=C;u=m(c,u);u[f]+=r[0][f];this.shader.uniforms.offset=u;f=q(p);f[k]=1;this.shader.uniforms.screenAxis=f;this.shader.uniforms.lineWidth=x;this.shader.uniforms.color=v;this.vao.draw(this.gl.TRIANGLES,6)};b.dispose=function(){this.vao.dispose();this.vertBuffer.dispose();this.shader.dispose()}},{"./shaders":254,
"gl-buffer":259,"gl-vao":358}],254:[function(b,K,G){K=b("glslify");var q=b("gl-shader"),m=K(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, majorAxis, minorAxis, screenAxis;\nuniform float lineWidth;\nuniform vec2 screenShape;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nvoid main() {\n  vec3 major = position.x * majorAxis;\n  vec3 minor = position.y * minorAxis;\n\n  vec3 vPosition = major + minor + offset;\n  vec3 pPosition = project(vPosition);\n  vec3 offset = project(vPosition + screenAxis * position.z);\n\n  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;\n\n  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);\n}\n"]),
l=K(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);G.line=function(n){return q(n,m,l,null,[{name:"position",type:"vec3"}])};var h=K(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, axis, alignDir, alignOpt;\nuniform float scale, angle, pixelScale;\nuniform vec2 resolution;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nfloat computeViewAngle(vec3 a, vec3 b) {\n  vec3 A = project(a);\n  vec3 B = project(b);\n\n  return atan(\n    (B.y - A.y) * resolution.y,\n    (B.x - A.x) * resolution.x\n  );\n}\n\nconst float PI = 3.141592;\nconst float TWO_PI = 2.0 * PI;\nconst float HALF_PI = 0.5 * PI;\nconst float ONE_AND_HALF_PI = 1.5 * PI;\n\nint option = int(floor(alignOpt.x + 0.001));\nfloat hv_ratio =       alignOpt.y;\nbool enableAlign =    (alignOpt.z != 0.0);\n\nfloat mod_angle(float a) {\n  return mod(a, PI);\n}\n\nfloat positive_angle(float a) {\n  return mod_angle((a < 0.0) ?\n    a + TWO_PI :\n    a\n  );\n}\n\nfloat look_upwards(float a) {\n  float b = positive_angle(a);\n  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?\n    b - PI :\n    b;\n}\n\nfloat look_horizontal_or_vertical(float a, float ratio) {\n  // ratio controls the ratio between being horizontal to (vertical + horizontal)\n  // if ratio is set to 0.5 then it is 50%, 50%.\n  // when using a higher ratio e.g. 0.75 the result would\n  // likely be more horizontal than vertical.\n\n  float b = positive_angle(a);\n\n  return\n    (b < (      ratio) * HALF_PI) ? 0.0 :\n    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :\n    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :\n    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :\n                                    0.0;\n}\n\nfloat roundTo(float a, float b) {\n  return float(b * floor((a + 0.5 * b) / b));\n}\n\nfloat look_round_n_directions(float a, int n) {\n  float b = positive_angle(a);\n  float div = TWO_PI / float(n);\n  float c = roundTo(b, div);\n  return look_upwards(c);\n}\n\nfloat applyAlignOption(float rawAngle, float delta) {\n  return\n    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions\n    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical\n    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis\n    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards\n    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal\n                    rawAngle;                // otherwise return back raw input angle\n}\n\nbool isAxisTitle = (axis.x == 0.0) &&\n                   (axis.y == 0.0) &&\n                   (axis.z == 0.0);\n\nvoid main() {\n  //Compute world offset\n  float axisDistance = position.z;\n  vec3 dataPosition = axisDistance * axis + offset;\n\n  float beta = angle; // i.e. user defined attributes for each tick\n\n  float axisAngle;\n  float clipAngle;\n  float flip;\n\n  if (enableAlign) {\n    axisAngle = (isAxisTitle) ? HALF_PI :\n                      computeViewAngle(dataPosition, dataPosition + axis);\n    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);\n\n    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;\n    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;\n\n    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),\n                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;\n\n    beta += applyAlignOption(clipAngle, flip * PI);\n  }\n\n  //Compute plane offset\n  vec2 planeCoord = position.xy * pixelScale;\n\n  mat2 planeXform = scale * mat2(\n     cos(beta), sin(beta),\n    -sin(beta), cos(beta)\n  );\n\n  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;\n\n  //Compute clip position\n  vec3 clipPosition = project(dataPosition);\n\n  //Apply text offset in clip coordinates\n  clipPosition += vec3(viewOffset, 0.0);\n\n  //Done\n  gl_Position = vec4(clipPosition, 1.0);\n}"]),
a=K(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);G.text=function(n){return q(n,h,a,null,[{name:"position",type:"vec3"}])};var g=K(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection;\nuniform vec3 enable;\nuniform vec3 bounds[2];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n\n  vec3 signAxis = sign(bounds[1] - bounds[0]);\n\n  vec3 realNormal = signAxis * normal;\n\n  if(dot(realNormal, enable) > 0.0) {\n    vec3 minRange = min(bounds[0], bounds[1]);\n    vec3 maxRange = max(bounds[0], bounds[1]);\n    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));\n    gl_Position = projection * view * model * vec4(nPosition, 1.0);\n  } else {\n    gl_Position = vec4(0,0,0,0);\n  }\n\n  colorChannel = abs(realNormal);\n}"]),
e=K(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 colors[3];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  gl_FragColor = colorChannel.x * colors[0] +\n                 colorChannel.y * colors[1] +\n                 colorChannel.z * colors[2];\n}"]);G.bg=function(n){return q(n,g,e,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},{"gl-shader":335,glslify:257}],255:[function(b,K,G){(function(q){(function(){function m(c,d,f,k){this.gl=c;this.shader=d;this.buffer=
f;this.vao=k;this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}K.exports=function(c,d,f,k,r,u){var v=l(c),x=h(c,[{buffer:v,size:3}]),C=g(c);C.attributes.position.location=0;c=new m(c,C,v,x);c.update(d,f,k,r,u);return c};var l=b("gl-buffer"),h=b("gl-vao"),a=b("vectorize-text"),g=b("./shaders").text,e=window||q.global||{},n=e.__TEXT_CACHE||{};e.__TEXT_CACHE={};e=m.prototype;var p=[0,0];e.bind=function(c,d,f,k){this.vao.bind();this.shader.bind();var r=this.shader.uniforms;r.model=
c;r.view=d;r.projection=f;r.pixelScale=k;p[0]=this.gl.drawingBufferWidth;p[1]=this.gl.drawingBufferHeight;this.shader.uniforms.resolution=p};e.unbind=function(){this.vao.unbind()};e.update=function(c,d,f,k,r){function u(B,F,I,J,L,H){var P=n[I];P||(P=n[I]={});var M=P[F];if(!M){M=P;I={triangles:!0,font:I,textAlign:"center",textBaseline:"middle",lineSpacing:L,styletags:H};try{var N=a(F,I)}catch(T){console.warn('error vectorizing text:"'+F+'" error:',T),N={cells:[],positions:[]}}M=M[F]=N}F=(J||12)/12;
J=M.positions;M=M.cells;N=0;for(I=M.length;N<I;++N)for(L=M[N],H=2;0<=H;--H)P=J[L[H]],v.push(F*P[0],-F*P[1],B)}for(var v=[],x=[0,0,0],C=[0,0,0],z=[0,0,0],y=[0,0,0],D={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},A=0;3>A;++A){z[A]=v.length/3|0;u(.5*(c[0][A]+c[1][A]),d[A],f[A],12,1.25,D);y[A]=(v.length/3|0)-z[A];x[A]=v.length/3|0;for(var t=0;t<k[A].length;++t)k[A][t].text&&u(k[A][t].x,k[A][t].text,k[A][t].font||r,k[A][t].fontSize||12,1.25,D);C[A]=(v.length/3|0)-x[A]}this.buffer.update(v);
this.tickOffset=x;this.tickCount=C;this.labelOffset=z;this.labelCount=y};e.drawTicks=function(c,d,f,k,r,u,v,x){this.tickCount[c]&&(this.shader.uniforms.axis=u,this.shader.uniforms.color=r,this.shader.uniforms.angle=f,this.shader.uniforms.scale=d,this.shader.uniforms.offset=k,this.shader.uniforms.alignDir=v,this.shader.uniforms.alignOpt=x,this.vao.draw(this.gl.TRIANGLES,this.tickCount[c],this.tickOffset[c]))};e.drawLabel=function(c,d,f,k,r,u,v,x){this.labelCount[c]&&(this.shader.uniforms.axis=u,this.shader.uniforms.color=
r,this.shader.uniforms.angle=f,this.shader.uniforms.scale=d,this.shader.uniforms.offset=k,this.shader.uniforms.alignDir=v,this.shader.uniforms.alignOpt=x,this.vao.draw(this.gl.TRIANGLES,this.labelCount[c],this.labelOffset[c]))};e.dispose=function(){this.shader.dispose();this.vao.dispose();this.buffer.dispose()}}).call(this)}).call(this,b("_process"))},{"./shaders":254,_process:526,"gl-buffer":259,"gl-vao":358,"vectorize-text":600}],256:[function(b,K,G){function q(m,l){var h=m+"",a=h.indexOf("."),
g=0;0<=a&&(g=h.length-a-1);h=Math.pow(10,g);m=Math.round(m*l*h);l=m+"";if(0<=l.indexOf("e"))return l;l=m/h;h=m%h;0>m?(l=-Math.ceil(l)|0,h=-h|0):(l=Math.floor(l)|0,h|=0);l=""+l;0>m&&(l="-"+l);if(g){for(h=""+h;h.length<g;)h="0"+h;return l+"."+h}return l}G.create=function(m,l){for(var h=[],a=0;3>a;++a){for(var g=[],e=0;e*l[a]<=m[1][a];++e)g.push({x:e*l[a],text:q(l[a],e)});for(e=-1;e*l[a]>=m[0][a];--e)g.push({x:e*l[a],text:q(l[a],e)});h.push(g)}return h};G.equal=function(m,l){for(var h=0;3>h;++h){if(m[h].length!==
l[h].length)return!1;for(var a=0;a<m[h].length;++a){var g=m[h][a],e=l[h][a];if(g.x!==e.x||g.text!==e.text||g.font!==e.font||g.fontColor!==e.fontColor||g.fontSize!==e.fontSize||g.dx!==e.dx||g.dy!==e.dy)return!1}}return!0}},{}],257:[function(b,K,G){K.exports=function(q){"string"===typeof q&&(q=[q]);for(var m=[].slice.call(arguments,1),l=[],h=0;h<q.length-1;h++)l.push(q[h],m[h]||"");l.push(q[h]);return l.join("")}},{}],258:[function(b,K,G){function q(r,u,v){this.lo=r;this.hi=u;this.pixelsPerDataUnit=
v}K.exports=function(r,u,v,x,C){var z=u.model||n,y=u.view||n,D=u.projection||n;u=u._ortho||!1;r=r.bounds;C=C||h(z,y,D,r,u);C=C.axis;a(p,y,z);a(p,D,p);z=f;for(y=0;3>y;++y)z[y].lo=Infinity,z[y].hi=-Infinity,z[y].pixelsPerDataUnit=Infinity;D=m(g(p,p));g(p,p);for(var A=0;3>A;++A){var t=(A+1)%3,B=(A+2)%3,F=k;y=0;a:for(;2>y;++y){var I=[];if(0>C[A]!==!!y){F[A]=r[y][A];for(var J=0;2>J;++J){F[t]=r[J^y][t];for(var L=0;2>L;++L)F[B]=r[L^J^y][B],I.push(F.slice())}for(J=L=u?5:4;J===L;++J){if(0===I.length)continue a;
I=l.positive(I,D[J])}for(J=0;J<I.length;++J){B=I[J];L=k;var H=p;for(var P=B,M=v,N=x,T=0;3>T;++T){for(var Q=c,U=d,S=0;3>S;++S)U[S]=Q[S]=P[S];U[3]=Q[3]=1;U[T]+=1;e(U,U,H);0>U[3]&&(L[T]=Infinity);--Q[T];e(Q,Q,H);0>Q[3]&&(L[T]=Infinity);S=(Q[0]/Q[3]-U[0]/U[3])*M;Q=(Q[1]/Q[3]-U[1]/U[3])*N;L[T]=.25*Math.sqrt(S*S+Q*Q)}H=L;for(L=0;3>L;++L)z[L].lo=Math.min(z[L].lo,B[L]),z[L].hi=Math.max(z[L].hi,B[L]),L!==A&&(z[L].pixelsPerDataUnit=Math.min(z[L].pixelsPerDataUnit,Math.abs(H[L])))}}}}return z};var m=b("extract-frustum-planes"),
l=b("split-polygon"),h=b("./lib/cube.js"),a=b("gl-mat4/multiply"),g=b("gl-mat4/transpose"),e=b("gl-vec4/transformMat4"),n=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),p=new Float32Array(16),c=[0,0,0,1],d=[0,0,0,1],f=[new q(Infinity,-Infinity,Infinity),new q(Infinity,-Infinity,Infinity),new q(Infinity,-Infinity,Infinity)],k=[0,0,0]},{"./lib/cube.js":252,"extract-frustum-planes":240,"gl-mat4/multiply":295,"gl-mat4/transpose":306,"gl-vec4/transformMat4":429,"split-polygon":566}],259:[function(b,
K,G){function q(n,p,c,d,f){this.gl=n;this.type=p;this.handle=c;this.length=d;this.usage=f}function m(n,p,c,d,f,k){var r=f.length*f.BYTES_PER_ELEMENT;if(0>k)return n.bufferData(p,f,d),r;if(r+k>c)throw Error("gl-buffer: If resizing buffer, must not specify offset");n.bufferSubData(p,k,f);return c}function l(n,p){p=h.malloc(n.length,p);for(var c=n.length,d=0;d<c;++d)p[d]=n[d];return p}var h=b("typedarray-pool"),a=b("ndarray-ops"),g=b("ndarray"),e="uint8 uint8_clamped uint16 uint32 int8 int16 int32 float32".split(" ");
b=q.prototype;b.bind=function(){this.gl.bindBuffer(this.type,this.handle)};b.unbind=function(){this.gl.bindBuffer(this.type,null)};b.dispose=function(){this.gl.deleteBuffer(this.handle)};b.update=function(n,p){"number"!==typeof p&&(p=-1);this.bind();if("object"===typeof n&&"undefined"!==typeof n.shape){var c=n.dtype;0>e.indexOf(c)&&(c="float32");this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(c=this.gl.getExtension("OES_element_index_uint")&&"uint16"!==c?"uint32":"uint16");var d;if(d=c===n.dtype)a:{d=
n.stride;for(var f=1,k=d.length-1;0<=k;--k){if(d[k]!==f){d=!1;break a}f*=n.shape[k]}d=!0}d?this.length=0===n.offset&&n.data.length===n.shape[0]?m(this.gl,this.type,this.length,this.usage,n.data,p):m(this.gl,this.type,this.length,this.usage,n.data.subarray(n.offset,n.shape[0]),p):(c=h.malloc(n.size,c),d=g(c,n.shape),a.assign(d,n),this.length=0>p?m(this.gl,this.type,this.length,this.usage,c,p):m(this.gl,this.type,this.length,this.usage,c.subarray(0,n.size),p),h.free(c))}else if(Array.isArray(n))c=this.type===
this.gl.ELEMENT_ARRAY_BUFFER?l(n,"uint16"):l(n,"float32"),this.length=0>p?m(this.gl,this.type,this.length,this.usage,c,p):m(this.gl,this.type,this.length,this.usage,c.subarray(0,n.length),p),h.free(c);else if("object"===typeof n&&"number"===typeof n.length)this.length=m(this.gl,this.type,this.length,this.usage,n,p);else if("number"===typeof n||void 0===n){if(0<=p)throw Error("gl-buffer: Cannot specify offset when resizing buffer");n|=0;0>=n&&(n=1);this.gl.bufferData(this.type,n|0,this.usage);this.length=
n}else throw Error("gl-buffer: Invalid data type");};K.exports=function(n,p,c,d){c=c||n.ARRAY_BUFFER;d=d||n.DYNAMIC_DRAW;if(c!==n.ARRAY_BUFFER&&c!==n.ELEMENT_ARRAY_BUFFER)throw Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(d!==n.DYNAMIC_DRAW&&d!==n.STATIC_DRAW&&d!==n.STREAM_DRAW)throw Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var f=n.createBuffer();n=new q(n,c,f,0,
d);n.update(p);return n}},{ndarray:495,"ndarray-ops":490,"typedarray-pool":595}],260:[function(b,K,G){var q=b("gl-vec3");K.exports=function(l,h){var a=l.positions,g=l.vectors,e={positions:[],vertexIntensity:[],vertexIntensityBounds:l.vertexIntensityBounds,vectors:[],cells:[],coneOffset:l.coneOffset,colormap:l.colormap};if(0===l.positions.length)return h&&(h[0]=[0,0,0],h[1]=[0,0,0]),e;for(var n=0,p=Infinity,c=-Infinity,d=Infinity,f=-Infinity,k=Infinity,r=-Infinity,u=null,v=null,x=[],C=Infinity,z=!1,
y=0;y<a.length;y++){var D=a[y];p=Math.min(D[0],p);c=Math.max(D[0],c);d=Math.min(D[1],d);f=Math.max(D[1],f);k=Math.min(D[2],k);r=Math.max(D[2],r);var A=g[y];q.length(A)>n&&(n=q.length(A));y&&((z=2*q.distance(u,D)/(q.length(v)+q.length(A)))?(C=Math.min(C,z),z=!1):z=!0);z||(u=D,v=A);x.push(A)}y=[p,d,k];D=[c,f,r];h&&(h[0]=y,h[1]=D);0===n&&(n=1);h=1/n;isFinite(C)||(C=1);e.vectorScale=C;y=l.coneSize||.5;l.absoluteConeSize&&(y=l.absoluteConeSize*h);e.coneScale=y;for(l=y=0;y<a.length;y++)for(D=a[y],C=D[0],
n=D[1],D=D[2],c=x[y],f=q.length(c)*h,r=0;8>r;r++)e.positions.push([C,n,D,l++]),e.positions.push([C,n,D,l++]),e.positions.push([C,n,D,l++]),e.positions.push([C,n,D,l++]),e.positions.push([C,n,D,l++]),e.positions.push([C,n,D,l++]),e.vectors.push(c),e.vectors.push(c),e.vectors.push(c),e.vectors.push(c),e.vectors.push(c),e.vectors.push(c),e.vertexIntensity.push(f,f,f),e.vertexIntensity.push(f,f,f),g=e.positions.length,e.cells.push([g-6,g-5,g-4],[g-3,g-2,g-1]);return e};var m=b("./lib/shaders");K.exports.createMesh=
b("./create_mesh");K.exports.createConeMesh=function(l,h){return K.exports.createMesh(l,h,{shaders:m,traceType:"cone"})}},{"./create_mesh":261,"./lib/shaders":262,"gl-vec3":377}],261:[function(b,K,G){function q(d,f,k,r,u,v,x,C,z,y,D){this.gl=d;this.pixelRatio=1;this.cells=[];this.positions=[];this.intensity=[];this.texture=f;this.dirty=!0;this.triShader=k;this.pickShader=r;this.trianglePositions=u;this.triangleVectors=v;this.triangleColors=C;this.triangleUVs=z;this.triangleIds=x;this.triangleVAO=
y;this.triangleCount=0;this.pickId=1;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.lightPosition=[1E5,1E5,0];this.diffuseLight=this.ambientLight=.8;this.specularLight=2;this.roughness=.5;this.fresnel=1.5;this.opacity=1;this.traceType=D;this.tubeScale=1;this.coneScale=2;this.vectorScale=1;this.coneOffset=.25;this._projection=this._view=this._model=c;this._resolution=[1,1]}var m=b("gl-shader"),
l=b("gl-buffer"),h=b("gl-vao"),a=b("gl-texture2d"),g=b("gl-mat4/multiply"),e=b("gl-mat4/invert"),n=b("ndarray"),p=b("colormap"),c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];b=q.prototype;b.isOpaque=function(){return 1<=this.opacity};b.isTransparent=function(){return 1>this.opacity};b.pickSlots=1;b.setPickBase=function(d){this.pickId=d};b.update=function(d){d=d||{};var f=this.gl;this.dirty=!0;"lightPosition"in d&&(this.lightPosition=d.lightPosition);"opacity"in d&&(this.opacity=d.opacity);"ambient"in d&&(this.ambientLight=
d.ambient);"diffuse"in d&&(this.diffuseLight=d.diffuse);"specular"in d&&(this.specularLight=d.specular);"roughness"in d&&(this.roughness=d.roughness);"fresnel"in d&&(this.fresnel=d.fresnel);void 0!==d.tubeScale&&(this.tubeScale=d.tubeScale);void 0!==d.vectorScale&&(this.vectorScale=d.vectorScale);void 0!==d.coneScale&&(this.coneScale=d.coneScale);void 0!==d.coneOffset&&(this.coneOffset=d.coneOffset);if(d.colormap){this.texture.shape=[256,256];this.texture.minFilter=f.LINEAR_MIPMAP_LINEAR;this.texture.magFilter=
f.LINEAR;f=this.texture;var k=f.setPixels;var r=p({colormap:d.colormap,nshades:256,format:"rgba"});for(var u=new Uint8Array(1024),v=0;256>v;++v){for(var x=r[v],C=0;3>C;++C)u[4*v+C]=x[C];u[4*v+3]=255*x[3]}r=n(u,[256,256,4],[4,0,1]);k.call(f,r);this.texture.generateMipmap()}f=d.cells;k=d.positions;r=d.vectors;if(k&&f&&r){u=[];v=[];x=[];C=[];var z=[];this.cells=f;this.positions=k;this.vectors=r;var y=d.meshColor||[1,1,1,1],D=d.vertexIntensity,A=Infinity,t=-Infinity;if(D)if(d.vertexIntensityBounds)A=
+d.vertexIntensityBounds[0],t=+d.vertexIntensityBounds[1];else for(d=0;d<D.length;++d){var B=D[d];A=Math.min(A,B);t=Math.max(t,B)}else for(d=0;d<k.length;++d)B=k[d][2],A=Math.min(A,B),t=Math.max(t,B);if(D)this.intensity=D;else{d=k.length;B=Array(d);for(var F=0;F<d;++F)B[F]=k[F][2];this.intensity=B}this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];for(d=0;d<k.length;++d){var I=k[d];for(B=0;3>B;++B)!isNaN(I[B])&&isFinite(I[B])&&(this.bounds[0][B]=Math.min(this.bounds[0][B],
I[B]),this.bounds[1][B]=Math.max(this.bounds[1][B],I[B]))}d=F=0;a:for(;d<f.length;++d){var J=f[d];switch(J.length){case 3:for(B=0;3>B;++B){var L=J[B];I=k[L];for(L=0;3>L;++L)if(isNaN(I[L])||!isFinite(I[L]))continue a}for(B=0;3>B;++B){L=J[2-B];I=k[L];u.push(I[0],I[1],I[2],I[3]);var H=r[L];v.push(H[0],H[1],H[2],H[3]||0);H=y;3===H.length?x.push(H[0],H[1],H[2],1):x.push(H[0],H[1],H[2],H[3]);I=D?[(D[L]-A)/(t-A),0]:[(I[2]-A)/(t-A),0];C.push(I[0],I[1]);z.push(d)}F+=1}}this.triangleCount=F;this.trianglePositions.update(u);
this.triangleVectors.update(v);this.triangleColors.update(x);this.triangleUVs.update(C);this.triangleIds.update(new Uint32Array(z))}};b.drawTransparent=b.draw=function(d){d=d||{};var f=this.gl,k=d.model||c,r=d.view||c,u=d.projection||c,v=[[-1E6,-1E6,-1E6],[1E6,1E6,1E6]];for(d=0;3>d;++d)v[0][d]=Math.max(v[0][d],this.clipBounds[0][d]),v[1][d]=Math.min(v[1][d],this.clipBounds[1][d]);k={model:k,view:r,projection:u,inverseModel:c.slice(),clipBounds:v,kambient:this.ambientLight,kdiffuse:this.diffuseLight,
kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};k.inverseModel=e(k.inverseModel,k.model);f.disable(f.CULL_FACE);this.texture.bind(0);r=Array(16);g(r,k.view,k.model);g(r,k.projection,r);e(r,r);for(d=0;3>d;++d)k.eyePosition[d]=r[12+d]/r[15];u=r[15];for(d=0;3>d;++d)u+=this.lightPosition[d]*r[4*d+
3];for(d=0;3>d;++d){v=r[12+d];for(var x=0;3>x;++x)v+=r[4*x+d]*this.lightPosition[x];k.lightPosition[d]=v/u}0<this.triangleCount&&(d=this.triShader,d.bind(),d.uniforms=k,this.triangleVAO.bind(),f.drawArrays(f.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())};b.drawPick=function(d){d=d||{};var f=this.gl,k=d.model||c,r=d.view||c;d=d.projection||c;for(var u=[[-1E6,-1E6,-1E6],[1E6,1E6,1E6]],v=0;3>v;++v)u[0][v]=Math.max(u[0][v],this.clipBounds[0][v]),u[1][v]=Math.min(u[1][v],this.clipBounds[1][v]);
this._model=[].slice.call(k);this._view=[].slice.call(r);this._projection=[].slice.call(d);this._resolution=[f.drawingBufferWidth,f.drawingBufferHeight];k={model:k,view:r,projection:d,clipBounds:u,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255};r=this.pickShader;r.bind();r.uniforms=k;0<this.triangleCount&&(this.triangleVAO.bind(),f.drawArrays(f.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())};b.pick=function(d){if(!d||
d.id!==this.pickId)return null;d=d.value[0]+256*d.value[1]+65536*d.value[2];var f=this.cells[d],k=this.positions[f[1]].slice(0,3);k={position:k,dataCoordinate:k,index:Math.floor(f[1]/48)};"cone"===this.traceType?k.index=Math.floor(f[1]/48):"streamtube"===this.traceType&&(k.intensity=this.intensity[f[1]],k.velocity=this.vectors[f[1]].slice(0,3),k.divergence=this.vectors[f[1]][3],k.index=d);return k};b.dispose=function(){this.texture.dispose();this.triShader.dispose();this.pickShader.dispose();this.triangleVAO.dispose();
this.trianglePositions.dispose();this.triangleVectors.dispose();this.triangleColors.dispose();this.triangleUVs.dispose();this.triangleIds.dispose()};K.exports=function(d,f,k){var r=k.shaders;1===arguments.length&&(f=d,d=f.gl);var u=m(d,r.meshShader.vertex,r.meshShader.fragment,null,r.meshShader.attributes);u.attributes.position.location=0;u.attributes.color.location=2;u.attributes.uv.location=3;u.attributes.vector.location=4;r=m(d,r.pickShader.vertex,r.pickShader.fragment,null,r.pickShader.attributes);
r.attributes.position.location=0;r.attributes.id.location=1;r.attributes.vector.location=4;var v=a(d,n(new Uint8Array([255,255,255,255]),[1,1,4]));v.generateMipmap();v.minFilter=d.LINEAR_MIPMAP_LINEAR;v.magFilter=d.LINEAR;var x=l(d),C=l(d),z=l(d),y=l(d),D=l(d),A=h(d,[{buffer:x,type:d.FLOAT,size:4},{buffer:D,type:d.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:z,type:d.FLOAT,size:4},{buffer:y,type:d.FLOAT,size:2},{buffer:C,type:d.FLOAT,size:4}]);u=new q(d,v,u,r,x,C,D,z,y,A,k.traceType||"cone");u.update(f);
return u}},{colormap:131,"gl-buffer":259,"gl-mat4/invert":293,"gl-mat4/multiply":295,"gl-shader":335,"gl-texture2d":353,"gl-vao":358,ndarray:495}],262:[function(b,K,G){var q=b("glslify");b=q(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec3 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, coneScale, coneOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * conePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(conePosition, 1.0);\n  vec4 t_position  = view * conePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = conePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]);
K=q(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]);
var m=q(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float vectorScale, coneScale, coneOffset;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n  gl_Position = projection * view * conePosition;\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]);
q=q(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);
G.meshShader={vertex:b,fragment:K,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]};G.pickShader={vertex:m,fragment:q,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},{glslify:263}],263:[function(b,K,G){arguments[4][257][0].apply(G,arguments)},{dup:257}],264:[function(b,K,G){K.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",
256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",
2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",
3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",
6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",
32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",
32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",
33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34E3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",
34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",
34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",
35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",
35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",
36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",
36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",
37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],265:[function(b,K,G){var q=b("./1.0/numbers");K.exports=function(m){return q[m]}},{"./1.0/numbers":264}],266:[function(b,K,G){function q(p,c,d,f){this.gl=p;this.shader=f;this.buffer=c;this.vao=d;this.pixelRatio=1;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.lineWidth=[1,1,1];this.capSize=
[10,10,10];this.lineCount=[0,0,0];this.lineOffset=[0,0,0];this.opacity=1;this.hasAlpha=!1}function m(p,c){for(var d=0;3>d;++d)p[0][d]=Math.min(p[0][d],c[d]),p[1][d]=Math.max(p[1][d],c[d])}function l(p,c,d,f){f=n[f];for(var k=0;k<f.length;++k){var r=f[k];p.push(c[0],c[1],c[2],d[0],d[1],d[2],d[3],r[0],r[1],r[2])}return f.length}K.exports=function(p){var c=p.gl,d=h(c),f=a(c,[{buffer:d,type:c.FLOAT,size:3,offset:0,stride:40},{buffer:d,type:c.FLOAT,size:4,offset:12,stride:40},{buffer:d,type:c.FLOAT,size:3,
offset:28,stride:40}]),k=g(c);k.attributes.position.location=0;k.attributes.color.location=1;k.attributes.offset.location=2;c=new q(c,d,f,k);c.update(p);return c};var h=b("gl-buffer"),a=b("gl-vao"),g=b("./shaders/index"),e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];b=q.prototype;b.isOpaque=function(){return!this.hasAlpha};b.isTransparent=function(){return this.hasAlpha};b.drawTransparent=b.draw=function(p){var c=this.gl,d=this.shader.uniforms;this.shader.bind();var f=d.view=p.view||e,k=d.projection=p.projection||
e;d.model=p.model||e;d.clipBounds=this.clipBounds;d.opacity=this.opacity;p=(p._ortho?2:1)*this.pixelRatio*(k[3]*f[12]+k[7]*f[13]+k[11]*f[14]+k[15]*f[15])/c.drawingBufferHeight;this.vao.bind();for(f=0;3>f;++f)c.lineWidth(this.lineWidth[f]*this.pixelRatio),d.capSize=this.capSize[f]*p,this.lineCount[f]&&c.drawArrays(c.LINES,this.lineOffset[f],this.lineCount[f]);this.vao.unbind()};var n=function(){for(var p=Array(3),c=0;3>c;++c){for(var d=[],f=1;2>=f;++f)for(var k=-1;1>=k;k+=2){var r=[0,0,0];r[(f+c)%
3]=k;d.push(r)}p[c]=d}return p}();b.update=function(p){p=p||{};"lineWidth"in p&&(this.lineWidth=p.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth]));"capSize"in p&&(this.capSize=p.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize]));this.hasAlpha=!1;"opacity"in p&&(this.opacity=+p.opacity,1>this.opacity&&(this.hasAlpha=!0));var c=p.color||[[0,0,0],[0,0,0],[0,0,0]],d=p.position;p=p.error;Array.isArray(c[0])||
(c=[c,c,c]);if(d&&p){var f=[],k=d.length,r=0;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.lineCount=[0,0,0];for(var u=0;3>u;++u){this.lineOffset[u]=r;var v=0;a:for(;v<k;++v){for(var x=d[v],C=0;3>C;++C)if(isNaN(x[C])||!isFinite(x[C]))continue a;C=p[v];var z=c[u];Array.isArray(z[0])&&(z=c[v]);3===z.length?z=[z[0],z[1],z[2],1]:4===z.length&&(z=[z[0],z[1],z[2],z[3]],!this.hasAlpha&&1>z[3]&&(this.hasAlpha=!0));if(!isNaN(C[0][u])&&!isNaN(C[1][u])){if(0>C[0][u]){var y=
x.slice();y[u]+=C[0][u];f.push(x[0],x[1],x[2],z[0],z[1],z[2],z[3],0,0,0,y[0],y[1],y[2],z[0],z[1],z[2],z[3],0,0,0);m(this.bounds,y);r+=2+l(f,y,z,u)}0<C[1][u]&&(y=x.slice(),y[u]+=C[1][u],f.push(x[0],x[1],x[2],z[0],z[1],z[2],z[3],0,0,0,y[0],y[1],y[2],z[0],z[1],z[2],z[3],0,0,0),m(this.bounds,y),r+=2+l(f,y,z,u))}}this.lineCount[u]=r-this.lineOffset[u]}this.buffer.update(f)}};b.dispose=function(){this.shader.dispose();this.buffer.dispose();this.vao.dispose()}},{"./shaders/index":268,"gl-buffer":259,"gl-vao":358}],
267:[function(b,K,G){arguments[4][257][0].apply(G,arguments)},{dup:257}],268:[function(b,K,G){G=b("glslify");var q=b("gl-shader"),m=G(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, offset;\nattribute vec4 color;\nuniform mat4 model, view, projection;\nuniform float capSize;\nvarying vec4 fragColor;\nvarying vec3 fragPosition;\n\nvoid main() {\n  vec4 worldPosition  = model * vec4(position, 1.0);\n  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);\n  gl_Position         = projection * view * worldPosition;\n  fragColor           = color;\n  fragPosition        = position;\n}"]),
l=G(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float opacity;\nvarying vec3 fragPosition;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  gl_FragColor = opacity * fragColor;\n}"]);
K.exports=function(h){return q(h,m,l,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},{"gl-shader":335,glslify:267}],269:[function(b,K,G){function q(u){var v=u.getParameter(u.FRAMEBUFFER_BINDING),x=u.getParameter(u.RENDERBUFFER_BINDING);u=u.getParameter(u.TEXTURE_BINDING_2D);return[v,x,u]}function m(u,v){u.bindFramebuffer(u.FRAMEBUFFER,v[0]);u.bindRenderbuffer(u.RENDERBUFFER,v[1]);u.bindTexture(u.TEXTURE_2D,v[2])}function l(u){switch(u){case d:throw Error("gl-fbo: Framebuffer unsupported");
case f:throw Error("gl-fbo: Framebuffer incomplete attachment");case k:throw Error("gl-fbo: Framebuffer incomplete dimensions");case r:throw Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw Error("gl-fbo: Framebuffer failed for unspecified reason");}}function h(u,v,x,C,z,y){if(!C)return null;v=p(u,v,x,z,C);v.magFilter=u.NEAREST;v.minFilter=u.NEAREST;v.mipSamples=1;v.bind();u.framebufferTexture2D(u.FRAMEBUFFER,y,u.TEXTURE_2D,v.handle,0);return v}function a(u,v,x,C,z){var y=
u.createRenderbuffer();u.bindRenderbuffer(u.RENDERBUFFER,y);u.renderbufferStorage(u.RENDERBUFFER,C,v,x);u.framebufferRenderbuffer(u.FRAMEBUFFER,z,u.RENDERBUFFER,y);return y}function g(u){var v=q(u.gl),x=u.gl,C=u.handle=x.createFramebuffer(),z=u._shape[0],y=u._shape[1],D=u.color.length,A=u._ext,t=u._useStencil,B=u._useDepth,F=u._colorType;x.bindFramebuffer(x.FRAMEBUFFER,C);for(C=0;C<D;++C)u.color[C]=h(x,z,y,F,x.RGBA,x.COLOR_ATTACHMENT0+C);0===D?(u._color_rb=a(x,z,y,x.RGBA4,x.COLOR_ATTACHMENT0),A&&
A.drawBuffersWEBGL(c[0])):1<D&&A.drawBuffersWEBGL(c[D]);(D=x.getExtension("WEBGL_depth_texture"))?t?u.depth=h(x,z,y,D.UNSIGNED_INT_24_8_WEBGL,x.DEPTH_STENCIL,x.DEPTH_STENCIL_ATTACHMENT):B&&(u.depth=h(x,z,y,x.UNSIGNED_SHORT,x.DEPTH_COMPONENT,x.DEPTH_ATTACHMENT)):B&&t?u._depth_rb=a(x,z,y,x.DEPTH_STENCIL,x.DEPTH_STENCIL_ATTACHMENT):B?u._depth_rb=a(x,z,y,x.DEPTH_COMPONENT16,x.DEPTH_ATTACHMENT):t&&(u._depth_rb=a(x,z,y,x.STENCIL_INDEX,x.STENCIL_ATTACHMENT));z=x.checkFramebufferStatus(x.FRAMEBUFFER);if(z!==
x.FRAMEBUFFER_COMPLETE){u._destroyed=!0;x.bindFramebuffer(x.FRAMEBUFFER,null);x.deleteFramebuffer(u.handle);u.handle=null;u.depth&&(u.depth.dispose(),u.depth=null);u._depth_rb&&(x.deleteRenderbuffer(u._depth_rb),u._depth_rb=null);for(C=0;C<u.color.length;++C)u.color[C].dispose(),u.color[C]=null;u._color_rb&&(x.deleteRenderbuffer(u._color_rb),u._color_rb=null);m(x,v);l(z)}m(x,v)}function e(u,v,x,C,z,y,D,A){this.gl=u;this._shape=[v|0,x|0];this._destroyed=!1;this._ext=A;this.color=Array(z);for(u=0;u<
z;++u)this.color[u]=null;this._depth_rb=this.depth=this._color_rb=null;this._colorType=C;this._useDepth=y;this._useStencil=D;var t=this;v=[v|0,x|0];Object.defineProperties(v,{0:{get:function(){return t._shape[0]},set:function(B){return t.width=B}},1:{get:function(){return t._shape[1]},set:function(B){return t.height=B}}});this._shapeVector=v;g(this)}function n(u,v,x){if(u._destroyed)throw Error("gl-fbo: Can't resize destroyed FBO");if(u._shape[0]!==v||u._shape[1]!==x){var C=u.gl,z=C.getParameter(C.MAX_RENDERBUFFER_SIZE);
if(0>v||v>z||0>x||x>z)throw Error("gl-fbo: Can't resize FBO, invalid dimensions");u._shape[0]=v;u._shape[1]=x;v=q(C);for(x=0;x<u.color.length;++x)u.color[x].shape=u._shape;u._color_rb&&(C.bindRenderbuffer(C.RENDERBUFFER,u._color_rb),C.renderbufferStorage(C.RENDERBUFFER,C.RGBA4,u._shape[0],u._shape[1]));u.depth&&(u.depth.shape=u._shape);u._depth_rb&&(C.bindRenderbuffer(C.RENDERBUFFER,u._depth_rb),u._useDepth&&u._useStencil?C.renderbufferStorage(C.RENDERBUFFER,C.DEPTH_STENCIL,u._shape[0],u._shape[1]):
u._useDepth?C.renderbufferStorage(C.RENDERBUFFER,C.DEPTH_COMPONENT16,u._shape[0],u._shape[1]):u._useStencil&&C.renderbufferStorage(C.RENDERBUFFER,C.STENCIL_INDEX,u._shape[0],u._shape[1]));C.bindFramebuffer(C.FRAMEBUFFER,u.handle);x=C.checkFramebufferStatus(C.FRAMEBUFFER);x!==C.FRAMEBUFFER_COMPLETE&&(u.dispose(),m(C,v),l(x));m(C,v)}}var p=b("gl-texture2d");K.exports=function(u,v,x,C){d||(d=u.FRAMEBUFFER_UNSUPPORTED,f=u.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,k=u.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,r=u.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);
var z=u.getExtension("WEBGL_draw_buffers");if(!c&&z){var y=u.getParameter(z.MAX_COLOR_ATTACHMENTS_WEBGL);c=Array(y+1);for(var D=0;D<=y;++D){for(var A=Array(y),t=0;t<D;++t)A[t]=u.COLOR_ATTACHMENT0+t;for(t=D;t<y;++t)A[t]=u.NONE;c[D]=A}}Array.isArray(v)&&(C=x,x=v[1]|0,v=v[0]|0);if("number"!==typeof v)throw Error("gl-fbo: Missing shape parameter");y=u.getParameter(u.MAX_RENDERBUFFER_SIZE);if(0>v||v>y||0>x||x>y)throw Error("gl-fbo: Parameters are too large for FBO");C=C||{};y=1;if("color"in C){y=Math.max(C.color|
0,0);if(0>y)throw Error("gl-fbo: Must specify a nonnegative number of colors");if(1<y){if(!z)throw Error("gl-fbo: Multiple draw buffer extension not supported");if(y>u.getParameter(z.MAX_COLOR_ATTACHMENTS_WEBGL))throw Error("gl-fbo: Context does not support "+y+" draw buffers");}}D=u.UNSIGNED_BYTE;A=u.getExtension("OES_texture_float");if(C.float&&0<y){if(!A)throw Error("gl-fbo: Context does not support floating point textures");D=u.FLOAT}else C.preferFloat&&0<y&&A&&(D=u.FLOAT);A=!0;"depth"in C&&(A=
!!C.depth);t=!1;"stencil"in C&&(t=!!C.stencil);return new e(u,v,x,D,y,A,t,z)};var c=null,d,f,k,r;b=e.prototype;Object.defineProperties(b,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(u){Array.isArray(u)||(u=[u|0,u|0]);if(2!==u.length)throw Error("gl-fbo: Shape vector must be length 2");var v=u[0]|0;u=u[1]|0;n(this,v,u);return[v,u]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(u){u|=0;n(this,u,this._shape[1]);return u},
enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(u){u|=0;n(this,this._shape[0],u);return u},enumerable:!1}});b.bind=function(){if(!this._destroyed){var u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,this.handle);u.viewport(0,0,this._shape[0],this._shape[1])}};b.dispose=function(){if(!this._destroyed){this._destroyed=!0;var u=this.gl;u.deleteFramebuffer(this.handle);this.handle=null;this.depth&&(this.depth.dispose(),this.depth=null);this._depth_rb&&(u.deleteRenderbuffer(this._depth_rb),
this._depth_rb=null);for(var v=0;v<this.color.length;++v)this.color[v].dispose(),this.color[v]=null;this._color_rb&&(u.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},{"gl-texture2d":353}],270:[function(b,K,G){var q=b("sprintf-js").sprintf,m=b("gl-constants/lookup"),l=b("glsl-shader-name"),h=b("add-line-numbers");K.exports=function(a,g,e){var n=l(g)||"of unknown name (see npm glsl-shader-name)",p="unknown type";void 0!==e&&(p=e===m.FRAGMENT_SHADER?"fragment":"vertex");e=q("Error compiling %s shader %s:\n",
p,n);n=q("%s%s",e,a);var c=a.split("\n");a={};for(p=0;p<c.length;p++){var d=c[p];if(""!==d&&"\x00"!==d){var f=parseInt(d.split(":")[2]);if(isNaN(f))throw Error(q("Could not parse error: %s",d));a[f]=d}}g=h(g).split("\n");for(p=0;p<g.length;p++)if(a[p+3]||a[p+2]||a[p+1])e+=g[p]+"\n",a[p+1]&&(c=a[p+1],c=c.substr(c.split(":",3).join(":").length+1).trim(),e+=q("^^^ %s\n\n",c));return{long:e.trim(),short:n.trim()}}},{"add-line-numbers":66,"gl-constants/lookup":265,"glsl-shader-name":431,"sprintf-js":567}],
271:[function(b,K,G){function q(p,c,d,f,k,r,u){this.plot=p;this.shader=c;this.pickShader=d;this.positionBuffer=f;this.weightBuffer=k;this.colorBuffer=r;this.idBuffer=u;this.xData=[];this.yData=[];this.shape=[0,0];this.bounds=[Infinity,Infinity,-Infinity,-Infinity];this.pickOffset=0}K.exports=function(p,c){var d=p.gl,f=a(d,e.vertex,e.fragment),k=a(d,e.pickVertex,e.pickFragment),r=g(d),u=g(d),v=g(d);d=g(d);f=new q(p,f,k,r,u,v,d);f.update(c);p.addObject(f);return f};var m=b("binary-search-bounds"),l=
b("iota-array"),h=b("typedarray-pool"),a=b("gl-shader"),g=b("gl-buffer"),e=b("./lib/shaders");b=q.prototype;var n=[0,0,1,0,0,1,1,0,1,1,0,1];b.draw=function(){var p=[1,0,0,0,1,0,0,0,1];return function(){var c=this.plot,d=this.shader,f=this.bounds,k=this.numVertices;if(!(0>=k)){var r=c.gl;c=c.dataBox;var u=f[3]-f[1],v=c[2]-c[0],x=c[3]-c[1];p[0]=2*(f[2]-f[0])/v;p[4]=2*u/x;p[6]=2*(f[0]-c[0])/v-1;p[7]=2*(f[1]-c[1])/x-1;d.bind();f=d.uniforms;f.viewTransform=p;f.shape=this.shape;d=d.attributes;this.positionBuffer.bind();
d.position.pointer();this.weightBuffer.bind();d.weight.pointer(r.UNSIGNED_BYTE,!1);this.colorBuffer.bind();d.color.pointer(r.UNSIGNED_BYTE,!0);r.drawArrays(r.TRIANGLES,0,k)}}}();b.drawPick=function(){var p=[1,0,0,0,1,0,0,0,1],c=[0,0,0,0];return function(d){var f=this.plot,k=this.pickShader,r=this.bounds,u=this.numVertices;if(!(0>=u)){var v=f.gl;f=f.dataBox;var x=r[3]-r[1],C=f[2]-f[0],z=f[3]-f[1];p[0]=2*(r[2]-r[0])/C;p[4]=2*x/z;p[6]=2*(r[0]-f[0])/C-1;p[7]=2*(r[1]-f[1])/z-1;for(r=0;4>r;++r)c[r]=d>>
8*r&255;this.pickOffset=d;k.bind();r=k.uniforms;r.viewTransform=p;r.pickOffset=c;r.shape=this.shape;k=k.attributes;this.positionBuffer.bind();k.position.pointer();this.weightBuffer.bind();k.weight.pointer(v.UNSIGNED_BYTE,!1);this.idBuffer.bind();k.pickId.pointer(v.UNSIGNED_BYTE,!1);v.drawArrays(v.TRIANGLES,0,u);return d+this.shape[0]*this.shape[1]}}}();b.pick=function(p,c,d){p=this.pickOffset;c=this.shape[0]*this.shape[1];if(d<p||d>=p+c)return null;d-=p;return{object:this,pointId:d,dataCoord:[this.xData[d%
this.shape[0]],this.yData[d/this.shape[0]|0]]}};b.update=function(p){p=p||{};var c=p.shape||[0,0],d=p.x||l(c[0]),f=p.y||l(c[1]),k=p.z||new Float32Array(c[0]*c[1]),r=!1!==p.zsmooth;this.xData=d;this.yData=f;var u=p.colorLevels||[0];p=p.colorValues||[0,0,0,1];var v=u.length,x=this.bounds;if(r){var C=x[0]=d[0];var z=x[1]=f[0];var y=x[2]=d[d.length-1];x=x[3]=f[f.length-1]}else C=x[0]=d[0]+(d[1]-d[0])/2,z=x[1]=f[0]+(f[1]-f[0])/2,y=x[2]=d[d.length-1]+(d[d.length-1]-d[d.length-2])/2,x=x[3]=f[f.length-1]+
(f[f.length-1]-f[f.length-2])/2;y=1/(y-C);x=1/(x-z);var D=c[0];c=c[1];this.shape=[D,c];var A=(r?(D-1)*(c-1):D*c)*(n.length>>>1);this.numVertices=A;var t=h.mallocUint8(4*A),B=h.mallocFloat32(2*A),F=h.mallocUint8(2*A);A=h.mallocUint32(A);for(var I=0,J=r?D-1:D,L=r?c-1:c,H=0;H<L;++H){if(r){var P=x*(f[H]-z);var M=x*(f[H+1]-z)}else P=H<c-1?x*(f[H]-(f[H+1]-f[H])/2-z):x*(f[H]-(f[H]-f[H-1])/2-z),M=H<c-1?x*(f[H]+(f[H+1]-f[H])/2-z):x*(f[H]+(f[H]-f[H-1])/2-z);for(var N=0;N<J;++N){if(r){var T=y*(d[N]-C);var Q=
y*(d[N+1]-C)}else T=N<D-1?y*(d[N]-(d[N+1]-d[N])/2-C):y*(d[N]-(d[N]-d[N-1])/2-C),Q=N<D-1?y*(d[N]+(d[N+1]-d[N])/2-C):y*(d[N]+(d[N]-d[N-1])/2-C);for(var U=0;U<n.length;U+=2){var S=n[U],X=n[U+1],Z=k[r?(H+X)*D+(N+S):H*D+N],aa=m.le(u,Z);if(0>aa){aa=p[0];Z=p[1];var fa=p[2];var ha=p[3]}else if(aa===v-1)aa=p[4*v-4],Z=p[4*v-3],fa=p[4*v-2],ha=p[4*v-1];else{ha=(Z-u[aa])/(u[aa+1]-u[aa]);var ja=1-ha,ba=4*aa,ma=4*(aa+1);aa=ja*p[ba]+ha*p[ma];Z=ja*p[ba+1]+ha*p[ma+1];fa=ja*p[ba+2]+ha*p[ma+2];ha=ja*p[ba+3]+ha*p[ma+
3]}t[4*I]=255*aa;t[4*I+1]=255*Z;t[4*I+2]=255*fa;t[4*I+3]=255*ha;B[2*I]=.5*T+.5*Q;B[2*I+1]=.5*P+.5*M;F[2*I]=S;F[2*I+1]=X;A[I]=H*D+N;I+=1}}}this.positionBuffer.update(B);this.weightBuffer.update(F);this.colorBuffer.update(t);this.idBuffer.update(A);h.free(B);h.free(t);h.free(F);h.free(A)};b.dispose=function(){this.shader.dispose();this.pickShader.dispose();this.positionBuffer.dispose();this.weightBuffer.dispose();this.colorBuffer.dispose();this.idBuffer.dispose();this.plot.removeObject(this)}},{"./lib/shaders":272,
"binary-search-bounds":96,"gl-buffer":259,"gl-shader":335,"iota-array":463,"typedarray-pool":595}],272:[function(b,K,G){b=b("glslify");K.exports={fragment:b(["precision lowp float;\n#define GLSLIFY 1\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);\n}\n"]),vertex:b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 color;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  fragColor = color;\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"]),
pickFragment:b(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nuniform vec2 shape;\nuniform vec4 pickOffset;\n\nvoid main() {\n  vec2 d = step(.5, vWeight);\n  vec4 id = fragId + pickOffset;\n  id.x += d.x + d.y*shape.x;\n\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  gl_FragColor = id/255.;\n}\n"]),
pickVertex:b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nvoid main() {\n  vWeight = weight;\n\n  fragId = pickId;\n\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"])}},{glslify:273}],273:[function(b,K,G){arguments[4][257][0].apply(G,
arguments)},{dup:257}],274:[function(b,K,G){K=b("glslify");var q=b("gl-shader"),m=K(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, nextPosition;\nattribute float arcLength, lineWidth;\nattribute vec4 color;\n\nuniform vec2 screenShape;\nuniform float pixelRatio;\nuniform mat4 model, view, projection;\n\nvarying vec4 fragColor;\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  vec4 startPoint = project(position);\n  vec4 endPoint   = project(nextPosition);\n\n  vec2 A = startPoint.xy / startPoint.w;\n  vec2 B =   endPoint.xy /   endPoint.w;\n\n  float clipAngle = atan(\n    (B.y - A.y) * screenShape.y,\n    (B.x - A.x) * screenShape.x\n  );\n\n  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(\n    sin(clipAngle),\n    -cos(clipAngle)\n  ) / screenShape;\n\n  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);\n\n  worldPosition = position;\n  pixelArcLength = arcLength;\n  fragColor = color;\n}\n"]),
l=K(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3      clipBounds[2];\nuniform sampler2D dashTexture;\nuniform float     dashScale;\nuniform float     opacity;\n\nvarying vec3    worldPosition;\nvarying float   pixelArcLength;\nvarying vec4    fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;\n  if(dashWeight < 0.5) {\n    discard;\n  }\n  gl_FragColor = fragColor * opacity;\n}\n"]),
h=K(["precision highp float;\n#define GLSLIFY 1\n\n#define FLOAT_MAX  1.70141184e38\n#define FLOAT_MIN  1.17549435e-38\n\n// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl\nvec4 packFloat(float v) {\n  float av = abs(v);\n\n  //Handle special cases\n  if(av < FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v > FLOAT_MAX) {\n    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;\n  } else if(v < -FLOAT_MAX) {\n    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;\n  }\n\n  vec4 c = vec4(0,0,0,0);\n\n  //Compute exponent and mantissa\n  float e = floor(log2(av));\n  float m = av * pow(2.0, -e) - 1.0;\n\n  //Unpack mantissa\n  c[1] = floor(128.0 * m);\n  m -= c[1] / 128.0;\n  c[2] = floor(32768.0 * m);\n  m -= c[2] / 32768.0;\n  c[3] = floor(8388608.0 * m);\n\n  //Unpack exponent\n  float ebias = e + 127.0;\n  c[0] = floor(ebias / 2.0);\n  ebias -= c[0] * 2.0;\n  c[1] += floor(ebias) * 128.0;\n\n  //Unpack sign bit\n  c[0] += 128.0 * step(0.0, -v);\n\n  //Scale back to range\n  return c / 255.0;\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform float pickId;\nuniform vec3 clipBounds[2];\n\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;\n\n  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);\n}"]),
a=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];G.createShader=function(g){return q(g,m,l,null,a)};G.createPickShader=function(g){return q(g,m,h,null,a)}},{"gl-shader":335,glslify:276}],275:[function(b,K,G){function q(r){for(var u=[[-1E6,-1E6,-1E6],[1E6,1E6,1E6]],v=0;3>v;++v)u[0][v]=Math.max(r[0][v],u[0][v]),u[1][v]=Math.min(r[1][v],u[1][v]);return u}function m(r,u,v,x){this.arcLength=r;
this.position=u;this.index=v;this.dataCoordinate=x}function l(r,u,v,x,C,z){this.gl=r;this.shader=u;this.pickShader=v;this.buffer=x;this.vao=C;this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.points=[];this.arcLength=[];this.vertexCount=0;this.bounds=[[0,0,0],[0,0,0]];this.pickId=0;this.lineWidth=1;this.texture=z;this.opacity=this.dashScale=1;this.hasAlpha=!1;this.dirty=!0;this.pixelRatio=1}K.exports=function(r){var u=r.gl||r.scene&&r.scene.gl,v=d(u);v.attributes.position.location=
0;v.attributes.nextPosition.location=1;v.attributes.arcLength.location=2;v.attributes.lineWidth.location=3;v.attributes.color.location=4;var x=f(u);x.attributes.position.location=0;x.attributes.nextPosition.location=1;x.attributes.arcLength.location=2;x.attributes.lineWidth.location=3;x.attributes.color.location=4;for(var C=h(u),z=a(u,[{buffer:C,size:3,offset:0,stride:48},{buffer:C,size:3,offset:12,stride:48},{buffer:C,size:1,offset:24,stride:48},{buffer:C,size:1,offset:28,stride:48},{buffer:C,size:4,
offset:32,stride:48}]),y=c(Array(1024),[256,1,4]),D=0;1024>D;++D)y.data[D]=255;y=g(u,y);y.wrap=u.REPEAT;u=new l(u,v,x,C,z,y);u.update(r);return u};var h=b("gl-buffer"),a=b("gl-vao"),g=b("gl-texture2d"),e=new Uint8Array(4),n=new Float32Array(e.buffer),p=b("binary-search-bounds"),c=b("ndarray");b=b("./lib/shaders");var d=b.createShader,f=b.createPickShader,k=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];b=l.prototype;b.isTransparent=function(){return this.hasAlpha};b.isOpaque=function(){return!this.hasAlpha};b.pickSlots=
1;b.setPickBase=function(r){this.pickId=r};b.drawTransparent=b.draw=function(r){if(this.vertexCount){var u=this.gl,v=this.shader,x=this.vao;v.bind();v.uniforms={model:r.model||k,view:r.view||k,projection:r.projection||k,clipBounds:q(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[u.drawingBufferWidth,u.drawingBufferHeight],pixelRatio:this.pixelRatio};x.bind();x.draw(u.TRIANGLE_STRIP,this.vertexCount);
x.unbind()}};b.drawPick=function(r){if(this.vertexCount){var u=this.gl,v=this.pickShader,x=this.vao;v.bind();v.uniforms={model:r.model||k,view:r.view||k,projection:r.projection||k,pickId:this.pickId,clipBounds:q(this.clipBounds),screenShape:[u.drawingBufferWidth,u.drawingBufferHeight],pixelRatio:this.pixelRatio};x.bind();x.draw(u.TRIANGLE_STRIP,this.vertexCount);x.unbind()}};b.update=function(r){var u;this.dirty=!0;var v=!!r.connectGaps;"dashScale"in r&&(this.dashScale=r.dashScale);this.hasAlpha=
!1;"opacity"in r&&(this.opacity=+r.opacity,1>this.opacity&&(this.hasAlpha=!0));var x=[],C=[],z=[],y=0,D=0,A=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]],t=r.position||r.positions;if(t){var B=r.color||r.colors||[0,0,0,1],F=r.lineWidth||1,I=!1;var J=1;a:for(;J<t.length;++J){var L=t[J-1],H=t[J];C.push(y);z.push(L.slice());for(u=0;3>u;++u){if(isNaN(L[u])||isNaN(H[u])||!isFinite(L[u])||!isFinite(H[u])){if(!v&&0<x.length){for(I=0;24>I;++I)x.push(x[x.length-12]);D+=2;I=!0}continue a}A[0][u]=
Math.min(A[0][u],L[u],H[u]);A[1][u]=Math.max(A[1][u],L[u],H[u])}if(Array.isArray(B[0])){var P=B.length>J-1?B[J-1]:0<B.length?B[B.length-1]:[0,0,0,1];var M=B.length>J?B[J]:0<B.length?B[B.length-1]:[0,0,0,1]}else P=M=B;3===P.length&&(P=[P[0],P[1],P[2],1]);3===M.length&&(M=[M[0],M[1],M[2],1]);!this.hasAlpha&&1>P[3]&&(this.hasAlpha=!0);var N=Array.isArray(F)?F.length>J-1?F[J-1]:0<F.length?F[F.length-1]:[0,0,0,1]:F;var T=y;u=y;for(var Q=y=0;3>Q;++Q){var U=L[Q]-H[Q];y+=U*U}y=u+Math.sqrt(y);if(I){for(u=
0;2>u;++u)x.push(L[0],L[1],L[2],H[0],H[1],H[2],T,N,P[0],P[1],P[2],P[3]);D+=2;I=!1}x.push(L[0],L[1],L[2],H[0],H[1],H[2],T,N,P[0],P[1],P[2],P[3],L[0],L[1],L[2],H[0],H[1],H[2],T,-N,P[0],P[1],P[2],P[3],H[0],H[1],H[2],L[0],L[1],L[2],y,-N,M[0],M[1],M[2],M[3],H[0],H[1],H[2],L[0],L[1],L[2],y,N,M[0],M[1],M[2],M[3]);D+=4}}this.buffer.update(x);C.push(y);z.push(t[t.length-1].slice());this.bounds=A;this.vertexCount=D;this.points=z;this.arcLength=C;if("dashes"in r){r=r.dashes.slice();r.unshift(0);for(J=1;J<r.length;++J)r[J]=
r[J-1]+r[J];v=c(Array(1024),[256,1,4]);for(J=0;256>J;++J){for(u=0;4>u;++u)v.set(J,0,u,0);p.le(r,r[r.length-1]*J/255)&1?v.set(J,0,0,0):v.set(J,0,0,255)}this.texture.setPixels(v)}};b.dispose=function(){this.shader.dispose();this.vao.dispose();this.buffer.dispose()};b.pick=function(r){if(!r||r.id!==this.pickId)return null;var u=r.value[0];var v=r.value[1];r=r.value[2];e[0]=0;e[1]=r;e[2]=v;e[3]=u;u=n[0];r=p.le(this.arcLength,u);if(0>r)return null;if(r===this.arcLength.length-1)return new m(this.arcLength[this.arcLength.length-
1],this.points[this.points.length-1].slice(),r);var x=this.points[r],C=this.points[Math.min(r+1,this.points.length-1)],z=(u-this.arcLength[r])/(this.arcLength[r+1]-this.arcLength[r]),y=1-z;v=[0,0,0];for(var D=0;3>D;++D)v[D]=y*x[D]+z*C[D];r=Math.min(.5>z?r:r+1,this.points.length-1);return new m(u,v,r,this.points[r])}},{"./lib/shaders":274,"binary-search-bounds":96,"gl-buffer":259,"gl-texture2d":353,"gl-vao":358,ndarray:495}],276:[function(b,K,G){arguments[4][257][0].apply(G,arguments)},{dup:257}],
277:[function(b,K,G){K.exports=function(q,m){var l=m[0],h=m[1],a=m[2],g=m[3],e=m[4],n=m[5],p=m[6],c=m[7],d=m[8],f=m[9],k=m[10],r=m[11],u=m[12],v=m[13],x=m[14];m=m[15];q[0]=n*(k*m-r*x)-f*(p*m-c*x)+v*(p*r-c*k);q[1]=-(h*(k*m-r*x)-f*(a*m-g*x)+v*(a*r-g*k));q[2]=h*(p*m-c*x)-n*(a*m-g*x)+v*(a*c-g*p);q[3]=-(h*(p*r-c*k)-n*(a*r-g*k)+f*(a*c-g*p));q[4]=-(e*(k*m-r*x)-d*(p*m-c*x)+u*(p*r-c*k));q[5]=l*(k*m-r*x)-d*(a*m-g*x)+u*(a*r-g*k);q[6]=-(l*(p*m-c*x)-e*(a*m-g*x)+u*(a*c-g*p));q[7]=l*(p*r-c*k)-e*(a*r-g*k)+d*(a*c-
g*p);q[8]=e*(f*m-r*v)-d*(n*m-c*v)+u*(n*r-c*f);q[9]=-(l*(f*m-r*v)-d*(h*m-g*v)+u*(h*r-g*f));q[10]=l*(n*m-c*v)-e*(h*m-g*v)+u*(h*c-g*n);q[11]=-(l*(n*r-c*f)-e*(h*r-g*f)+d*(h*c-g*n));q[12]=-(e*(f*x-k*v)-d*(n*x-p*v)+u*(n*k-p*f));q[13]=l*(f*x-k*v)-d*(h*x-a*v)+u*(h*k-a*f);q[14]=-(l*(n*x-p*v)-e*(h*x-a*v)+u*(h*p-a*n));q[15]=l*(n*k-p*f)-e*(h*k-a*f)+d*(h*p-a*n);return q}},{}],278:[function(b,K,G){K.exports=function(q){var m=new Float32Array(16);m[0]=q[0];m[1]=q[1];m[2]=q[2];m[3]=q[3];m[4]=q[4];m[5]=q[5];m[6]=
q[6];m[7]=q[7];m[8]=q[8];m[9]=q[9];m[10]=q[10];m[11]=q[11];m[12]=q[12];m[13]=q[13];m[14]=q[14];m[15]=q[15];return m}},{}],279:[function(b,K,G){K.exports=function(q,m){q[0]=m[0];q[1]=m[1];q[2]=m[2];q[3]=m[3];q[4]=m[4];q[5]=m[5];q[6]=m[6];q[7]=m[7];q[8]=m[8];q[9]=m[9];q[10]=m[10];q[11]=m[11];q[12]=m[12];q[13]=m[13];q[14]=m[14];q[15]=m[15];return q}},{}],280:[function(b,K,G){K.exports=function(){var q=new Float32Array(16);q[0]=1;q[1]=0;q[2]=0;q[3]=0;q[4]=0;q[5]=1;q[6]=0;q[7]=0;q[8]=0;q[9]=0;q[10]=1;
q[11]=0;q[12]=0;q[13]=0;q[14]=0;q[15]=1;return q}},{}],281:[function(b,K,G){K.exports=function(q){var m=q[0],l=q[1],h=q[2],a=q[3],g=q[4],e=q[5],n=q[6],p=q[7],c=q[8],d=q[9],f=q[10],k=q[11],r=q[12],u=q[13],v=q[14];q=q[15];return(m*e-l*g)*(f*q-k*v)-(m*n-h*g)*(d*q-k*u)+(m*p-a*g)*(d*v-f*u)+(l*n-h*e)*(c*q-k*r)-(l*p-a*e)*(c*v-f*r)+(h*p-a*n)*(c*u-d*r)}},{}],282:[function(b,K,G){K.exports=function(q,m){var l=m[0],h=m[1],a=m[2];m=m[3];var g=l+l,e=h+h,n=a+a;l*=g;var p=h*g;h*=e;var c=a*g,d=a*e;a*=n;g*=m;e*=m;
m*=n;q[0]=1-h-a;q[1]=p+m;q[2]=c-e;q[3]=0;q[4]=p-m;q[5]=1-l-a;q[6]=d+g;q[7]=0;q[8]=c+e;q[9]=d-g;q[10]=1-l-h;q[11]=0;q[12]=0;q[13]=0;q[14]=0;q[15]=1;return q}},{}],283:[function(b,K,G){K.exports=function(q,m,l){var h=l[0],a=l[1];l=l[2];var g=Math.sqrt(h*h+a*a+l*l);if(1E-6>Math.abs(g))return null;g=1/g;h*=g;a*=g;l*=g;g=Math.sin(m);m=Math.cos(m);var e=1-m;q[0]=h*h*e+m;q[1]=a*h*e+l*g;q[2]=l*h*e-a*g;q[3]=0;q[4]=h*a*e-l*g;q[5]=a*a*e+m;q[6]=l*a*e+h*g;q[7]=0;q[8]=h*l*e+a*g;q[9]=a*l*e-h*g;q[10]=l*l*e+m;q[11]=
0;q[12]=0;q[13]=0;q[14]=0;q[15]=1;return q}},{}],284:[function(b,K,G){K.exports=function(q,m,l){var h=m[0],a=m[1],g=m[2],e=m[3],n=h+h,p=a+a,c=g+g;m=h*n;var d=h*p;h*=c;var f=a*p;a*=c;g*=c;n*=e;p*=e;e*=c;q[0]=1-(f+g);q[1]=d+e;q[2]=h-p;q[3]=0;q[4]=d-e;q[5]=1-(m+g);q[6]=a+n;q[7]=0;q[8]=h+p;q[9]=a-n;q[10]=1-(m+f);q[11]=0;q[12]=l[0];q[13]=l[1];q[14]=l[2];q[15]=1;return q}},{}],285:[function(b,K,G){K.exports=function(q,m){q[0]=m[0];q[1]=0;q[2]=0;q[3]=0;q[4]=0;q[5]=m[1];q[6]=0;q[7]=0;q[8]=0;q[9]=0;q[10]=
m[2];q[11]=0;q[12]=0;q[13]=0;q[14]=0;q[15]=1;return q}},{}],286:[function(b,K,G){K.exports=function(q,m){q[0]=1;q[1]=0;q[2]=0;q[3]=0;q[4]=0;q[5]=1;q[6]=0;q[7]=0;q[8]=0;q[9]=0;q[10]=1;q[11]=0;q[12]=m[0];q[13]=m[1];q[14]=m[2];q[15]=1;return q}},{}],287:[function(b,K,G){K.exports=function(q,m){var l=Math.sin(m);m=Math.cos(m);q[0]=1;q[1]=0;q[2]=0;q[3]=0;q[4]=0;q[5]=m;q[6]=l;q[7]=0;q[8]=0;q[9]=-l;q[10]=m;q[11]=0;q[12]=0;q[13]=0;q[14]=0;q[15]=1;return q}},{}],288:[function(b,K,G){K.exports=function(q,m){var l=
Math.sin(m);m=Math.cos(m);q[0]=m;q[1]=0;q[2]=-l;q[3]=0;q[4]=0;q[5]=1;q[6]=0;q[7]=0;q[8]=l;q[9]=0;q[10]=m;q[11]=0;q[12]=0;q[13]=0;q[14]=0;q[15]=1;return q}},{}],289:[function(b,K,G){K.exports=function(q,m){var l=Math.sin(m);m=Math.cos(m);q[0]=m;q[1]=l;q[2]=0;q[3]=0;q[4]=-l;q[5]=m;q[6]=0;q[7]=0;q[8]=0;q[9]=0;q[10]=1;q[11]=0;q[12]=0;q[13]=0;q[14]=0;q[15]=1;return q}},{}],290:[function(b,K,G){K.exports=function(q,m,l,h,a,g,e){var n=1/(l-m),p=1/(a-h),c=1/(g-e);q[0]=2*g*n;q[1]=0;q[2]=0;q[3]=0;q[4]=0;q[5]=
2*g*p;q[6]=0;q[7]=0;q[8]=(l+m)*n;q[9]=(a+h)*p;q[10]=(e+g)*c;q[11]=-1;q[12]=0;q[13]=0;q[14]=e*g*2*c;q[15]=0;return q}},{}],291:[function(b,K,G){K.exports=function(q){q[0]=1;q[1]=0;q[2]=0;q[3]=0;q[4]=0;q[5]=1;q[6]=0;q[7]=0;q[8]=0;q[9]=0;q[10]=1;q[11]=0;q[12]=0;q[13]=0;q[14]=0;q[15]=1;return q}},{}],292:[function(b,K,G){K.exports={create:b("./create"),clone:b("./clone"),copy:b("./copy"),identity:b("./identity"),transpose:b("./transpose"),invert:b("./invert"),adjoint:b("./adjoint"),determinant:b("./determinant"),
multiply:b("./multiply"),translate:b("./translate"),scale:b("./scale"),rotate:b("./rotate"),rotateX:b("./rotateX"),rotateY:b("./rotateY"),rotateZ:b("./rotateZ"),fromRotation:b("./fromRotation"),fromRotationTranslation:b("./fromRotationTranslation"),fromScaling:b("./fromScaling"),fromTranslation:b("./fromTranslation"),fromXRotation:b("./fromXRotation"),fromYRotation:b("./fromYRotation"),fromZRotation:b("./fromZRotation"),fromQuat:b("./fromQuat"),frustum:b("./frustum"),perspective:b("./perspective"),
perspectiveFromFieldOfView:b("./perspectiveFromFieldOfView"),ortho:b("./ortho"),lookAt:b("./lookAt"),str:b("./str")}},{"./adjoint":277,"./clone":278,"./copy":279,"./create":280,"./determinant":281,"./fromQuat":282,"./fromRotation":283,"./fromRotationTranslation":284,"./fromScaling":285,"./fromTranslation":286,"./fromXRotation":287,"./fromYRotation":288,"./fromZRotation":289,"./frustum":290,"./identity":291,"./invert":293,"./lookAt":294,"./multiply":295,"./ortho":296,"./perspective":297,"./perspectiveFromFieldOfView":298,
"./rotate":299,"./rotateX":300,"./rotateY":301,"./rotateZ":302,"./scale":303,"./str":304,"./translate":305,"./transpose":306}],293:[function(b,K,G){K.exports=function(q,m){var l=m[0],h=m[1],a=m[2],g=m[3],e=m[4],n=m[5],p=m[6],c=m[7],d=m[8],f=m[9],k=m[10],r=m[11],u=m[12],v=m[13],x=m[14];m=m[15];var C=l*n-h*e,z=l*p-a*e,y=l*c-g*e,D=h*p-a*n,A=h*c-g*n,t=a*c-g*p,B=d*v-f*u,F=d*x-k*u,I=d*m-r*u,J=f*x-k*v,L=f*m-r*v,H=k*m-r*x,P=C*H-z*L+y*J+D*I-A*F+t*B;if(!P)return null;P=1/P;q[0]=(n*H-p*L+c*J)*P;q[1]=(a*L-h*
H-g*J)*P;q[2]=(v*t-x*A+m*D)*P;q[3]=(k*A-f*t-r*D)*P;q[4]=(p*I-e*H-c*F)*P;q[5]=(l*H-a*I+g*F)*P;q[6]=(x*y-u*t-m*z)*P;q[7]=(d*t-k*y+r*z)*P;q[8]=(e*L-n*I+c*B)*P;q[9]=(h*I-l*L-g*B)*P;q[10]=(u*A-v*y+m*C)*P;q[11]=(f*y-d*A-r*C)*P;q[12]=(n*F-e*J-p*B)*P;q[13]=(l*J-h*F+a*B)*P;q[14]=(v*z-u*D-x*C)*P;q[15]=(d*D-f*z+k*C)*P;return q}},{}],294:[function(b,K,G){var q=b("./identity");K.exports=function(m,l,h,a){var g=l[0],e=l[1];l=l[2];var n=a[0];var p=a[1];var c=a[2];var d=h[0];a=h[1];var f=h[2];if(1E-6>Math.abs(g-
d)&&1E-6>Math.abs(e-a)&&1E-6>Math.abs(l-f))return q(m);h=g-d;a=e-a;d=l-f;var k=1/Math.sqrt(h*h+a*a+d*d);h*=k;a*=k;d*=k;f=p*d-c*a;c=c*h-n*d;n=n*a-p*h;(k=Math.sqrt(f*f+c*c+n*n))?(k=1/k,f*=k,c*=k,n*=k):n=c=f=0;p=a*n-d*c;var r=d*f-h*n;var u=h*c-a*f;(k=Math.sqrt(p*p+r*r+u*u))?(k=1/k,p*=k,r*=k,u*=k):u=r=p=0;m[0]=f;m[1]=p;m[2]=h;m[3]=0;m[4]=c;m[5]=r;m[6]=a;m[7]=0;m[8]=n;m[9]=u;m[10]=d;m[11]=0;m[12]=-(f*g+c*e+n*l);m[13]=-(p*g+r*e+u*l);m[14]=-(h*g+a*e+d*l);m[15]=1;return m}},{"./identity":291}],295:[function(b,
K,G){K.exports=function(q,m,l){var h=m[0],a=m[1],g=m[2],e=m[3],n=m[4],p=m[5],c=m[6],d=m[7],f=m[8],k=m[9],r=m[10],u=m[11],v=m[12],x=m[13],C=m[14];m=m[15];var z=l[0],y=l[1],D=l[2],A=l[3];q[0]=z*h+y*n+D*f+A*v;q[1]=z*a+y*p+D*k+A*x;q[2]=z*g+y*c+D*r+A*C;q[3]=z*e+y*d+D*u+A*m;z=l[4];y=l[5];D=l[6];A=l[7];q[4]=z*h+y*n+D*f+A*v;q[5]=z*a+y*p+D*k+A*x;q[6]=z*g+y*c+D*r+A*C;q[7]=z*e+y*d+D*u+A*m;z=l[8];y=l[9];D=l[10];A=l[11];q[8]=z*h+y*n+D*f+A*v;q[9]=z*a+y*p+D*k+A*x;q[10]=z*g+y*c+D*r+A*C;q[11]=z*e+y*d+D*u+A*m;z=l[12];
y=l[13];D=l[14];A=l[15];q[12]=z*h+y*n+D*f+A*v;q[13]=z*a+y*p+D*k+A*x;q[14]=z*g+y*c+D*r+A*C;q[15]=z*e+y*d+D*u+A*m;return q}},{}],296:[function(b,K,G){K.exports=function(q,m,l,h,a,g,e){var n=1/(m-l),p=1/(h-a),c=1/(g-e);q[0]=-2*n;q[1]=0;q[2]=0;q[3]=0;q[4]=0;q[5]=-2*p;q[6]=0;q[7]=0;q[8]=0;q[9]=0;q[10]=2*c;q[11]=0;q[12]=(m+l)*n;q[13]=(a+h)*p;q[14]=(e+g)*c;q[15]=1;return q}},{}],297:[function(b,K,G){K.exports=function(q,m,l,h,a){m=1/Math.tan(m/2);var g=1/(h-a);q[0]=m/l;q[1]=0;q[2]=0;q[3]=0;q[4]=0;q[5]=m;
q[6]=0;q[7]=0;q[8]=0;q[9]=0;q[10]=(a+h)*g;q[11]=-1;q[12]=0;q[13]=0;q[14]=2*a*h*g;q[15]=0;return q}},{}],298:[function(b,K,G){K.exports=function(q,m,l,h){var a=Math.tan(m.upDegrees*Math.PI/180),g=Math.tan(m.downDegrees*Math.PI/180),e=Math.tan(m.leftDegrees*Math.PI/180);m=Math.tan(m.rightDegrees*Math.PI/180);var n=2/(e+m),p=2/(a+g);q[0]=n;q[1]=0;q[2]=0;q[3]=0;q[4]=0;q[5]=p;q[6]=0;q[7]=0;q[8]=-((e-m)*n*.5);q[9]=(a-g)*p*.5;q[10]=h/(l-h);q[11]=-1;q[12]=0;q[13]=0;q[14]=h*l/(l-h);q[15]=0;return q}},{}],
299:[function(b,K,G){K.exports=function(q,m,l,h){var a=h[0],g=h[1];h=h[2];var e=Math.sqrt(a*a+g*g+h*h);if(1E-6>Math.abs(e))return null;e=1/e;a*=e;g*=e;h*=e;var n=Math.sin(l);var p=Math.cos(l);var c=1-p;l=m[0];e=m[1];var d=m[2];var f=m[3];var k=m[4];var r=m[5];var u=m[6];var v=m[7];var x=m[8];var C=m[9];var z=m[10];var y=m[11];var D=a*a*c+p;var A=g*a*c+h*n;var t=h*a*c-g*n;var B=a*g*c-h*n;var F=g*g*c+p;var I=h*g*c+a*n;var J=a*h*c+g*n;a=g*h*c-a*n;g=h*h*c+p;q[0]=l*D+k*A+x*t;q[1]=e*D+r*A+C*t;q[2]=d*D+
u*A+z*t;q[3]=f*D+v*A+y*t;q[4]=l*B+k*F+x*I;q[5]=e*B+r*F+C*I;q[6]=d*B+u*F+z*I;q[7]=f*B+v*F+y*I;q[8]=l*J+k*a+x*g;q[9]=e*J+r*a+C*g;q[10]=d*J+u*a+z*g;q[11]=f*J+v*a+y*g;m!==q&&(q[12]=m[12],q[13]=m[13],q[14]=m[14],q[15]=m[15]);return q}},{}],300:[function(b,K,G){K.exports=function(q,m,l){var h=Math.sin(l);l=Math.cos(l);var a=m[4],g=m[5],e=m[6],n=m[7],p=m[8],c=m[9],d=m[10],f=m[11];m!==q&&(q[0]=m[0],q[1]=m[1],q[2]=m[2],q[3]=m[3],q[12]=m[12],q[13]=m[13],q[14]=m[14],q[15]=m[15]);q[4]=a*l+p*h;q[5]=g*l+c*h;q[6]=
e*l+d*h;q[7]=n*l+f*h;q[8]=p*l-a*h;q[9]=c*l-g*h;q[10]=d*l-e*h;q[11]=f*l-n*h;return q}},{}],301:[function(b,K,G){K.exports=function(q,m,l){var h=Math.sin(l);l=Math.cos(l);var a=m[0],g=m[1],e=m[2],n=m[3],p=m[8],c=m[9],d=m[10],f=m[11];m!==q&&(q[4]=m[4],q[5]=m[5],q[6]=m[6],q[7]=m[7],q[12]=m[12],q[13]=m[13],q[14]=m[14],q[15]=m[15]);q[0]=a*l-p*h;q[1]=g*l-c*h;q[2]=e*l-d*h;q[3]=n*l-f*h;q[8]=a*h+p*l;q[9]=g*h+c*l;q[10]=e*h+d*l;q[11]=n*h+f*l;return q}},{}],302:[function(b,K,G){K.exports=function(q,m,l){var h=
Math.sin(l);l=Math.cos(l);var a=m[0],g=m[1],e=m[2],n=m[3],p=m[4],c=m[5],d=m[6],f=m[7];m!==q&&(q[8]=m[8],q[9]=m[9],q[10]=m[10],q[11]=m[11],q[12]=m[12],q[13]=m[13],q[14]=m[14],q[15]=m[15]);q[0]=a*l+p*h;q[1]=g*l+c*h;q[2]=e*l+d*h;q[3]=n*l+f*h;q[4]=p*l-a*h;q[5]=c*l-g*h;q[6]=d*l-e*h;q[7]=f*l-n*h;return q}},{}],303:[function(b,K,G){K.exports=function(q,m,l){var h=l[0],a=l[1];l=l[2];q[0]=m[0]*h;q[1]=m[1]*h;q[2]=m[2]*h;q[3]=m[3]*h;q[4]=m[4]*a;q[5]=m[5]*a;q[6]=m[6]*a;q[7]=m[7]*a;q[8]=m[8]*l;q[9]=m[9]*l;q[10]=
m[10]*l;q[11]=m[11]*l;q[12]=m[12];q[13]=m[13];q[14]=m[14];q[15]=m[15];return q}},{}],304:[function(b,K,G){K.exports=function(q){return"mat4("+q[0]+", "+q[1]+", "+q[2]+", "+q[3]+", "+q[4]+", "+q[5]+", "+q[6]+", "+q[7]+", "+q[8]+", "+q[9]+", "+q[10]+", "+q[11]+", "+q[12]+", "+q[13]+", "+q[14]+", "+q[15]+")"}},{}],305:[function(b,K,G){K.exports=function(q,m,l){var h=l[0],a=l[1];l=l[2];if(m===q)q[12]=m[0]*h+m[4]*a+m[8]*l+m[12],q[13]=m[1]*h+m[5]*a+m[9]*l+m[13],q[14]=m[2]*h+m[6]*a+m[10]*l+m[14],q[15]=m[3]*
h+m[7]*a+m[11]*l+m[15];else{var g=m[0];var e=m[1];var n=m[2];var p=m[3];var c=m[4];var d=m[5];var f=m[6];var k=m[7];var r=m[8];var u=m[9];var v=m[10];var x=m[11];q[0]=g;q[1]=e;q[2]=n;q[3]=p;q[4]=c;q[5]=d;q[6]=f;q[7]=k;q[8]=r;q[9]=u;q[10]=v;q[11]=x;q[12]=g*h+c*a+r*l+m[12];q[13]=e*h+d*a+u*l+m[13];q[14]=n*h+f*a+v*l+m[14];q[15]=p*h+k*a+x*l+m[15]}return q}},{}],306:[function(b,K,G){K.exports=function(q,m){if(q===m){var l=m[1],h=m[2],a=m[3],g=m[6],e=m[7],n=m[11];q[1]=m[4];q[2]=m[8];q[3]=m[12];q[4]=l;q[6]=
m[9];q[7]=m[13];q[8]=h;q[9]=g;q[11]=m[14];q[12]=a;q[13]=e;q[14]=n}else q[0]=m[0],q[1]=m[4],q[2]=m[8],q[3]=m[12],q[4]=m[1],q[5]=m[5],q[6]=m[9],q[7]=m[13],q[8]=m[2],q[9]=m[6],q[10]=m[10],q[11]=m[14],q[12]=m[3],q[13]=m[7],q[14]=m[11],q[15]=m[15];return q}},{}],307:[function(b,K,G){function q(h,a){for(var g=[0,0,0,0],e=0;4>e;++e)for(var n=0;4>n;++n)g[n]+=h[4*e+n]*a[e];return g}var m=b("barycentric"),l=b("polytope-closest-point/lib/closest_point_2d.js");K.exports=function(h,a,g,e,n,p){if(1===h.length)return[0,
h[0].slice()];for(var c=Array(h.length),d=0;d<h.length;++d){var f=d,k=h[d],r=p;k=q(n,q(e,q(g,[k[0],k[1],k[2],1])));for(var u=0;3>u;++u)k[u]/=k[3];c[f]=[.5*r[0]*(1+k[0]),.5*r[1]*(1-k[1])]}g=0;e=Infinity;for(d=0;d<c.length;++d){for(p=n=0;2>p;++p)n+=Math.pow(c[d][p]-a[p],2);n<e&&(e=n,g=d)}if(2===c.length){for(n=e=d=0;2>n;++n)d+=Math.pow(a[n]-c[0][n],2),e+=Math.pow(a[n]-c[1][n],2);d=Math.sqrt(d);e=Math.sqrt(e);a=1E-6>d+e?[1,0]:[e/(d+e),d/(e+d)]}else 3===c.length?(d=[0,0],l(c[0],c[1],c[2],a,d),a=m(c,d)):
a=[];for(d=c=0;3>d;++d){if(-.001>a[d]||1.0001<a[d])return null;c+=a[d]}if(.001<Math.abs(c-1))return null;c=[0,0,0];for(d=0;d<h.length;++d)for(e=h[d],n=a[d],p=0;3>p;++p)c[p]+=n*e[p];return[g,c,a]}},{barycentric:78,"polytope-closest-point/lib/closest_point_2d.js":525}],308:[function(b,K,G){var q=b("glslify");b=q(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, normal;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model\n           , view\n           , projection\n           , inverseModel;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  gl_Position      = project(position);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * vec4(position , 1.0);\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  f_color          = color;\n  f_data           = position;\n  f_uv             = uv;\n}\n"]);
K=q(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\n//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (f_color.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], f_data)\n  ) discard;\n\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d\n\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * f_color.a;\n}\n"]);
var m=q(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model, view, projection;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_color = color;\n  f_data  = position;\n  f_uv    = uv;\n}"]),l=q(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;\n\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),
h=q(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\nattribute float pointSize;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);\n  } else {\n    gl_Position = projection * view * model * vec4(position, 1.0);\n  }\n  gl_PointSize = pointSize;\n  f_color = color;\n  f_uv = uv;\n}"]),
a=q(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);\n  if(dot(pointR, pointR) > 0.25) {\n    discard;\n  }\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),g=q(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_id        = id;\n  f_position  = position;\n}"]),
e=q(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]),
n=q(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3  position;\nattribute float pointSize;\nattribute vec4  id;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);\n  } else {\n    gl_Position  = projection * view * model * vec4(position, 1.0);\n    gl_PointSize = pointSize;\n  }\n  f_id         = id;\n  f_position   = position;\n}"]),
p=q(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n}"]);q=q(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec3 contourColor;\n\nvoid main() {\n  gl_FragColor = vec4(contourColor, 1.0);\n}\n"]);G.meshShader={vertex:b,fragment:K,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]};
G.wireShader={vertex:m,fragment:l,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]};G.pointShader={vertex:h,fragment:a,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]};G.pickShader={vertex:g,fragment:e,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]};G.pointPickShader={vertex:n,fragment:e,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},
{name:"id",type:"vec4"}]};G.contourShader={vertex:p,fragment:q,attributes:[{name:"position",type:"vec3"}]}},{glslify:310}],309:[function(b,K,G){function q(A,t,B,F,I,J,L,H,P,M,N,T,Q,U,S,X,Z,aa,fa,ha,ja,ba,ma,qa,ka,oa,na){this.gl=A;this.pixelRatio=1;this.cells=[];this.positions=[];this.intensity=[];this.texture=t;this.dirty=!0;this.triShader=B;this.lineShader=F;this.pointShader=I;this.pickShader=J;this.pointPickShader=L;this.contourShader=H;this.trianglePositions=P;this.triangleColors=N;this.triangleNormals=
Q;this.triangleUVs=T;this.triangleIds=M;this.triangleVAO=U;this.triangleCount=0;this.lineWidth=1;this.edgePositions=S;this.edgeColors=Z;this.edgeUVs=aa;this.edgeIds=X;this.edgeVAO=fa;this.edgeCount=0;this.pointPositions=ha;this.pointColors=ba;this.pointUVs=ma;this.pointSizes=qa;this.pointIds=ja;this.pointVAO=ka;this.pointCount=0;this.contourLineWidth=1;this.contourPositions=oa;this.contourVAO=na;this.contourCount=0;this.contourColor=[0,0,0];this.pickVertex=this.contourEnable=!0;this.pickId=1;this.bounds=
[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.lightPosition=[1E5,1E5,0];this.diffuseLight=this.ambientLight=.8;this.specularLight=2;this.roughness=.5;this.fresnel=1.5;this.opacity=1;this.opacityscale=this.hasAlpha=!1;this._projection=this._view=this._model=D;this._resolution=[1,1]}function m(A,t){if(!t||!t.length)return 1;for(var B=0;B<t.length&&!(2>t.length);++B){if(t[B][0]===A)return t[B][1];if(t[B][0]>
A&&0<B)return A=(t[B][0]-A)/(t[B][0]-t[B-1][0]),t[B][1]*(1-A)+A*t[B-1][1]}return 1}var l=b("gl-shader"),h=b("gl-buffer"),a=b("gl-vao"),g=b("gl-texture2d"),e=b("normals"),n=b("gl-mat4/multiply"),p=b("gl-mat4/invert"),c=b("ndarray"),d=b("colormap"),f=b("simplicial-complex-contour"),k=b("typedarray-pool");G=b("./lib/shaders");var r=b("./lib/closest-point"),u=G.meshShader,v=G.wireShader,x=G.pointShader,C=G.pickShader,z=G.pointPickShader,y=G.contourShader,D=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];b=q.prototype;
b.isOpaque=function(){return!this.hasAlpha};b.isTransparent=function(){return this.hasAlpha};b.pickSlots=1;b.setPickBase=function(A){this.pickId=A};b.highlight=function(A){if(A&&this.contourEnable){var t=f(this.cells,this.intensity,A.intensity);A=t.cells;var B=t.vertexIds;t=t.vertexWeights;for(var F=A.length,I=k.mallocFloat32(6*F),J=0,L=0;L<F;++L)for(var H=A[L],P=0;2>P;++P){var M=H[0];2===H.length&&(M=H[P]);var N=t[M],T=1-N,Q=this.positions[B[M][0]];M=this.positions[B[M][1]];for(var U=0;3>U;++U)I[J++]=
N*Q[U]+T*M[U]}this.contourCount=J/3|0;this.contourPositions.update(I.subarray(0,J));k.free(I)}else this.contourCount=0};b.update=function(A){A=A||{};var t=this.gl;this.dirty=!0;"contourEnable"in A&&(this.contourEnable=A.contourEnable);"contourColor"in A&&(this.contourColor=A.contourColor);"lineWidth"in A&&(this.lineWidth=A.lineWidth);"lightPosition"in A&&(this.lightPosition=A.lightPosition);this.hasAlpha=!1;"opacity"in A&&(this.opacity=A.opacity,1>this.opacity&&(this.hasAlpha=!0));"opacityscale"in
A&&(this.opacityscale=A.opacityscale,this.hasAlpha=!0);"ambient"in A&&(this.ambientLight=A.ambient);"diffuse"in A&&(this.diffuseLight=A.diffuse);"specular"in A&&(this.specularLight=A.specular);"roughness"in A&&(this.roughness=A.roughness);"fresnel"in A&&(this.fresnel=A.fresnel);if(A.texture)this.texture.dispose(),this.texture=g(t,A.texture);else if(A.colormap){this.texture.shape=[256,256];this.texture.minFilter=t.LINEAR_MIPMAP_LINEAR;this.texture.magFilter=t.LINEAR;t=this.texture;var B=t.setPixels;
var F=this.opacityscale;for(var I=d({colormap:A.colormap,nshades:256,format:"rgba"}),J=new Uint8Array(1024),L=0;256>L;++L){for(var H=I[L],P=0;3>P;++P)J[4*L+P]=H[P];J[4*L+3]=F?255*m(L/255,F):255*H[3]}F=c(J,[256,256,4],[4,0,1]);B.call(t,F);this.texture.generateMipmap()}t=A.cells;if((B=A.positions)&&t){F=[];I=[];J=[];L=[];H=[];P=[];var M=[],N=[],T=[],Q=[],U=[],S=[],X=[],Z=[];this.cells=t;this.positions=B;var aa=A.vertexNormals,fa=A.cellNormals,ha=void 0===A.vertexNormalsEpsilon?1E-6:A.vertexNormalsEpsilon,
ja=void 0===A.faceNormalsEpsilon?1E-6:A.faceNormalsEpsilon;A.useFacetNormals&&!fa&&(fa=e.faceNormals(t,B,ja));fa||aa||(aa=e.vertexNormals(t,B,ha));ha=A.vertexColors;ja=A.cellColors;var ba=A.meshColor||[1,1,1,1],ma=A.vertexUVs,qa=A.vertexIntensity,ka=A.cellUVs,oa=A.cellIntensity,na=Infinity,la=-Infinity;if(!ma&&!ka)if(qa)if(A.vertexIntensityBounds)na=+A.vertexIntensityBounds[0],la=+A.vertexIntensityBounds[1];else for(var ia=0;ia<qa.length;++ia){var sa=qa[ia];na=Math.min(na,sa);la=Math.max(la,sa)}else if(oa)if(A.cellIntensityBounds)na=
+A.cellIntensityBounds[0],la=+A.cellIntensityBounds[1];else for(ia=0;ia<oa.length;++ia)sa=oa[ia],na=Math.min(na,sa),la=Math.max(la,sa);else for(ia=0;ia<B.length;++ia)sa=B[ia][2],na=Math.min(na,sa),la=Math.max(la,sa);if(qa)this.intensity=qa;else if(oa)this.intensity=oa;else{ia=B.length;sa=Array(ia);for(var ta=0;ta<ia;++ta)sa[ta]=B[ta][2];this.intensity=sa}this.pickVertex=!(oa||ja);sa=A.pointSizes;A=A.pointSize||1;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];for(ia=0;ia<
B.length;++ia){var Aa=B[ia];for(ta=0;3>ta;++ta)!isNaN(Aa[ta])&&isFinite(Aa[ta])&&(this.bounds[0][ta]=Math.min(this.bounds[0][ta],Aa[ta]),this.bounds[1][ta]=Math.max(this.bounds[1][ta],Aa[ta]))}var Ka=0,Sa=0,db=0;ia=0;a:for(;ia<t.length;++ia){var eb=t[ia];switch(eb.length){case 1:var lb=eb[0];Aa=B[lb];for(ta=0;3>ta;++ta)if(isNaN(Aa[ta])||!isFinite(Aa[ta]))continue a;Q.push(Aa[0],Aa[1],Aa[2]);var ab=ha?ha[lb]:ja?ja[ia]:ba;this.opacityscale&&qa?I.push(ab[0],ab[1],ab[2],this.opacity*m((qa[lb]-na)/(la-
na),this.opacityscale)):3===ab.length?U.push(ab[0],ab[1],ab[2],this.opacity):(U.push(ab[0],ab[1],ab[2],ab[3]*this.opacity),1>ab[3]&&(this.hasAlpha=!0));Aa=ma?ma[lb]:qa?[(qa[lb]-na)/(la-na),0]:ka?ka[ia]:oa?[(oa[ia]-na)/(la-na),0]:[(Aa[2]-na)/(la-na),0];S.push(Aa[0],Aa[1]);sa?X.push(sa[lb]):X.push(A);Z.push(ia);db+=1;break;case 2:for(ta=0;2>ta;++ta)for(lb=eb[ta],Aa=B[lb],lb=0;3>lb;++lb)if(isNaN(Aa[lb])||!isFinite(Aa[lb]))continue a;for(ta=0;2>ta;++ta)lb=eb[ta],Aa=B[lb],P.push(Aa[0],Aa[1],Aa[2]),ab=
ha?ha[lb]:ja?ja[ia]:ba,this.opacityscale&&qa?I.push(ab[0],ab[1],ab[2],this.opacity*m((qa[lb]-na)/(la-na),this.opacityscale)):3===ab.length?M.push(ab[0],ab[1],ab[2],this.opacity):(M.push(ab[0],ab[1],ab[2],ab[3]*this.opacity),1>ab[3]&&(this.hasAlpha=!0)),Aa=ma?ma[lb]:qa?[(qa[lb]-na)/(la-na),0]:ka?ka[ia]:oa?[(oa[ia]-na)/(la-na),0]:[(Aa[2]-na)/(la-na),0],N.push(Aa[0],Aa[1]),T.push(ia);Sa+=1;break;case 3:for(ta=0;3>ta;++ta)for(lb=eb[ta],Aa=B[lb],lb=0;3>lb;++lb)if(isNaN(Aa[lb])||!isFinite(Aa[lb]))continue a;
for(ta=0;3>ta;++ta)lb=eb[2-ta],Aa=B[lb],F.push(Aa[0],Aa[1],Aa[2]),(ab=ha?ha[lb]:ja?ja[ia]:ba)?this.opacityscale&&qa?I.push(ab[0],ab[1],ab[2],this.opacity*m((qa[lb]-na)/(la-na),this.opacityscale)):3===ab.length?I.push(ab[0],ab[1],ab[2],this.opacity):(I.push(ab[0],ab[1],ab[2],ab[3]*this.opacity),1>ab[3]&&(this.hasAlpha=!0)):I.push(.5,.5,.5,1),Aa=ma?ma[lb]:qa?[(qa[lb]-na)/(la-na),0]:ka?ka[ia]:oa?[(oa[ia]-na)/(la-na),0]:[(Aa[2]-na)/(la-na),0],L.push(Aa[0],Aa[1]),Aa=aa?aa[lb]:fa[ia],J.push(Aa[0],Aa[1],
Aa[2]),H.push(ia);Ka+=1}}this.pointCount=db;this.edgeCount=Sa;this.triangleCount=Ka;this.pointPositions.update(Q);this.pointColors.update(U);this.pointUVs.update(S);this.pointSizes.update(X);this.pointIds.update(new Uint32Array(Z));this.edgePositions.update(P);this.edgeColors.update(M);this.edgeUVs.update(N);this.edgeIds.update(new Uint32Array(T));this.trianglePositions.update(F);this.triangleColors.update(I);this.triangleUVs.update(L);this.triangleNormals.update(J);this.triangleIds.update(new Uint32Array(H))}};
b.drawTransparent=b.draw=function(A){A=A||{};var t=this.gl,B=A.model||D,F=A.view||D,I=A.projection||D,J=[[-1E6,-1E6,-1E6],[1E6,1E6,1E6]];for(A=0;3>A;++A)J[0][A]=Math.max(J[0][A],this.clipBounds[0][A]),J[1][A]=Math.min(J[1][A],this.clipBounds[1][A]);B={model:B,view:F,projection:I,inverseModel:D.slice(),clipBounds:J,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,
texture:0};B.inverseModel=p(B.inverseModel,B.model);t.disable(t.CULL_FACE);this.texture.bind(0);F=Array(16);n(F,B.view,B.model);n(F,B.projection,F);p(F,F);for(A=0;3>A;++A)B.eyePosition[A]=F[12+A]/F[15];I=F[15];for(A=0;3>A;++A)I+=this.lightPosition[A]*F[4*A+3];for(A=0;3>A;++A){J=F[12+A];for(var L=0;3>L;++L)J+=F[4*L+A]*this.lightPosition[L];B.lightPosition[A]=J/I}0<this.triangleCount&&(A=this.triShader,A.bind(),A.uniforms=B,this.triangleVAO.bind(),t.drawArrays(t.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind());
0<this.edgeCount&&0<this.lineWidth&&(A=this.lineShader,A.bind(),A.uniforms=B,this.edgeVAO.bind(),t.lineWidth(this.lineWidth*this.pixelRatio),t.drawArrays(t.LINES,0,2*this.edgeCount),this.edgeVAO.unbind());0<this.pointCount&&(A=this.pointShader,A.bind(),A.uniforms=B,this.pointVAO.bind(),t.drawArrays(t.POINTS,0,this.pointCount),this.pointVAO.unbind());this.contourEnable&&0<this.contourCount&&0<this.contourLineWidth&&(A=this.contourShader,A.bind(),A.uniforms=B,this.contourVAO.bind(),t.drawArrays(t.LINES,
0,this.contourCount),this.contourVAO.unbind())};b.drawPick=function(A){A=A||{};var t=this.gl,B=A.model||D,F=A.view||D;A=A.projection||D;for(var I=[[-1E6,-1E6,-1E6],[1E6,1E6,1E6]],J=0;3>J;++J)I[0][J]=Math.max(I[0][J],this.clipBounds[0][J]),I[1][J]=Math.min(I[1][J],this.clipBounds[1][J]);this._model=[].slice.call(B);this._view=[].slice.call(F);this._projection=[].slice.call(A);this._resolution=[t.drawingBufferWidth,t.drawingBufferHeight];B={model:B,view:F,projection:A,clipBounds:I,pickId:this.pickId/
255};F=this.pickShader;F.bind();F.uniforms=B;0<this.triangleCount&&(this.triangleVAO.bind(),t.drawArrays(t.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind());0<this.edgeCount&&(this.edgeVAO.bind(),t.lineWidth(this.lineWidth*this.pixelRatio),t.drawArrays(t.LINES,0,2*this.edgeCount),this.edgeVAO.unbind());0<this.pointCount&&(F=this.pointPickShader,F.bind(),F.uniforms=B,this.pointVAO.bind(),t.drawArrays(t.POINTS,0,this.pointCount),this.pointVAO.unbind())};b.pick=function(A){if(!A||A.id!==this.pickId)return null;
for(var t=A.value[0]+256*A.value[1]+65536*A.value[2],B=this.cells[t],F=this.positions,I=Array(B.length),J=0;J<B.length;++J)I[J]=F[B[J]];J=A.coord[0];A=A.coord[1];if(!this.pickVertex){I=this.positions[B[0]];F=this.positions[B[1]];var L=this.positions[B[2]];return{_cellCenter:!0,position:[J,A],index:t,cell:B,cellId:t,intensity:this.intensity[t],dataCoordinate:[(I[0]+F[0]+L[0])/3,(I[1]+F[1]+L[1])/3,(I[2]+F[2]+L[2])/3]}}I=r(I,[J*this.pixelRatio,this._resolution[1]-A*this.pixelRatio],this._model,this._view,
this._projection,this._resolution);if(!I)return null;A=I[2];for(J=F=0;J<B.length;++J)F+=A[J]*this.intensity[B[J]];return{position:I[1],index:B[I[0]],cell:B,cellId:t,intensity:F,dataCoordinate:this.positions[B[I[0]]]}};b.dispose=function(){this.texture.dispose();this.triShader.dispose();this.lineShader.dispose();this.pointShader.dispose();this.pickShader.dispose();this.pointPickShader.dispose();this.triangleVAO.dispose();this.trianglePositions.dispose();this.triangleColors.dispose();this.triangleUVs.dispose();
this.triangleNormals.dispose();this.triangleIds.dispose();this.edgeVAO.dispose();this.edgePositions.dispose();this.edgeColors.dispose();this.edgeUVs.dispose();this.edgeIds.dispose();this.pointVAO.dispose();this.pointPositions.dispose();this.pointColors.dispose();this.pointUVs.dispose();this.pointSizes.dispose();this.pointIds.dispose();this.contourVAO.dispose();this.contourPositions.dispose();this.contourShader.dispose()};K.exports=function(A,t){1===arguments.length&&(t=A,A=t.gl);if(!(A.getExtension("OES_standard_derivatives")||
A.getExtension("MOZ_OES_standard_derivatives")||A.getExtension("WEBKIT_OES_standard_derivatives")))throw Error("derivatives not supported");var B=l(A,u.vertex,u.fragment);B.attributes.position.location=0;B.attributes.color.location=2;B.attributes.uv.location=3;B.attributes.normal.location=4;var F=l(A,v.vertex,v.fragment);F.attributes.position.location=0;F.attributes.color.location=2;F.attributes.uv.location=3;var I=l(A,x.vertex,x.fragment);I.attributes.position.location=0;I.attributes.color.location=
2;I.attributes.uv.location=3;I.attributes.pointSize.location=4;var J=l(A,C.vertex,C.fragment);J.attributes.position.location=0;J.attributes.id.location=1;var L=l(A,z.vertex,z.fragment);L.attributes.position.location=0;L.attributes.id.location=1;L.attributes.pointSize.location=4;var H=l(A,y.vertex,y.fragment);H.attributes.position.location=0;var P=g(A,c(new Uint8Array([255,255,255,255]),[1,1,4]));P.generateMipmap();P.minFilter=A.LINEAR_MIPMAP_LINEAR;P.magFilter=A.LINEAR;var M=h(A),N=h(A),T=h(A),Q=
h(A),U=h(A),S=a(A,[{buffer:M,type:A.FLOAT,size:3},{buffer:U,type:A.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:N,type:A.FLOAT,size:4},{buffer:T,type:A.FLOAT,size:2},{buffer:Q,type:A.FLOAT,size:3}]),X=h(A),Z=h(A),aa=h(A),fa=h(A),ha=a(A,[{buffer:X,type:A.FLOAT,size:3},{buffer:fa,type:A.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:Z,type:A.FLOAT,size:4},{buffer:aa,type:A.FLOAT,size:2}]),ja=h(A),ba=h(A),ma=h(A),qa=h(A),ka=h(A),oa=a(A,[{buffer:ja,type:A.FLOAT,size:3},{buffer:ka,type:A.UNSIGNED_BYTE,size:4,
normalized:!0},{buffer:ba,type:A.FLOAT,size:4},{buffer:ma,type:A.FLOAT,size:2},{buffer:qa,type:A.FLOAT,size:1}]),na=h(A),la=a(A,[{buffer:na,type:A.FLOAT,size:3}]);B=new q(A,P,B,F,I,J,L,H,M,U,N,T,Q,S,X,fa,Z,aa,ha,ja,ka,ba,ma,qa,oa,na,la);B.update(t);return B}},{"./lib/closest-point":307,"./lib/shaders":308,colormap:131,"gl-buffer":259,"gl-mat4/invert":293,"gl-mat4/multiply":295,"gl-shader":335,"gl-texture2d":353,"gl-vao":358,ndarray:495,normals:498,"simplicial-complex-contour":556,"typedarray-pool":595}],
310:[function(b,K,G){arguments[4][257][0].apply(G,arguments)},{dup:257}],311:[function(b,K,G){function q(a,g,e){this.plot=a;this.vbo=g;this.shader=e}K.exports=function(a){var g=a.gl,e=m(g,[0,0,0,1,1,0,1,1]);g=l(g,h.boxVert,h.lineFrag);return new q(a,e,g)};var m=b("gl-buffer"),l=b("gl-shader"),h=b("./shaders");b=q.prototype;b.bind=function(){var a=this.shader;this.vbo.bind();this.shader.bind();a.attributes.coord.pointer();a.uniforms.screenBox=this.plot.screenBox};b.drawBox=function(){var a=[0,0],g=
[0,0];return function(e,n,p,c,d){var f=this.shader,k=this.plot.gl;a[0]=e;a[1]=n;g[0]=p;g[1]=c;f.uniforms.lo=a;f.uniforms.hi=g;f.uniforms.color=d;k.drawArrays(k.TRIANGLE_STRIP,0,4)}}();b.dispose=function(){this.vbo.dispose();this.shader.dispose()}},{"./shaders":314,"gl-buffer":259,"gl-shader":335}],312:[function(b,K,G){function q(e,n,p,c){this.plot=e;this.vbo=n;this.shader=p;this.tickShader=c;this.ticks=[[],[]]}function m(e,n){return e-n}K.exports=function(e){var n=e.gl,p=l(n),c=h(n,g.gridVert,g.gridFrag);
n=h(n,g.tickVert,g.gridFrag);return new q(e,p,c,n)};var l=b("gl-buffer"),h=b("gl-shader"),a=b("binary-search-bounds"),g=b("./shaders");b=q.prototype;b.draw=function(){var e=[0,0],n=[0,0],p=[0,0];return function(){var c=this.plot,d=this.vbo,f=this.shader,k=this.ticks,r=c.gl,u=c._tickBounds,v=c.dataBox,x=c.viewBox,C=c.gridLineWidth,z=c.gridLineColor,y=c.gridLineEnable;c=c.pixelRatio;for(var D=0;2>D;++D){var A=u[D],t=.5*(v[D+2]+v[D]),B=v[D+2]-v[D];n[D]=2*(u[D+2]-A)/B;e[D]=2*(A-t)/B}f.bind();d.bind();
f.attributes.dataCoord.pointer();f.uniforms.dataShift=e;f.uniforms.dataScale=n;for(D=d=0;2>D;++D)p[0]=p[1]=0,p[D]=1,f.uniforms.dataAxis=p,f.uniforms.lineWidth=C[D]/(x[D+2]-x[D])*c,f.uniforms.color=z[D],u=6*k[D].length,y[D]&&u&&r.drawArrays(r.TRIANGLES,d,u),d+=u}}();b.drawTickMarks=function(){var e=[0,0],n=[0,0],p=[1,0],c=[0,1],d=[0,0],f=[0,0];return function(){var k=this.plot,r=this.vbo,u=this.tickShader,v=this.ticks,x=k.gl,C=k._tickBounds,z=k.dataBox,y=k.viewBox,D=k.pixelRatio,A=k.screenBox,t=A[2]-
A[0];A=A[3]-A[1];for(var B=y[2]-y[0],F=y[3]-y[1],I=0;2>I;++I){var J=C[I],L=.5*(z[I+2]+z[I]),H=z[I+2]-z[I];n[I]=2*(C[I+2]-J)/H;e[I]=2*(J-L)/H}n[0]*=B/t;e[0]*=B/t;n[1]*=F/A;e[1]*=F/A;u.bind();r.bind();u.attributes.dataCoord.pointer();r=u.uniforms;r.dataShift=e;r.dataScale=n;u=k.tickMarkLength;B=k.tickMarkWidth;k=k.tickMarkColor;I=6*v[0].length;J=Math.min(a.ge(v[0],(z[0]-C[0])/(C[2]-C[0]),m),v[0].length);L=Math.min(a.gt(v[0],(z[2]-C[0])/(C[2]-C[0]),m),v[0].length);F=6*J;J=6*Math.max(0,L-J);L=Math.min(a.ge(v[1],
(z[1]-C[1])/(C[3]-C[1]),m),v[1].length);v=Math.min(a.gt(v[1],(z[3]-C[1])/(C[3]-C[1]),m),v[1].length);C=I+6*L;v=6*Math.max(0,v-L);d[0]=2*(y[0]-u[1])/t-1;d[1]=(y[3]+y[1])/A-1;f[0]=u[1]*D/t;f[1]=B[1]*D/A;v&&(r.color=k[1],r.tickScale=f,r.dataAxis=c,r.screenOffset=d,x.drawArrays(x.TRIANGLES,C,v));d[0]=(y[2]+y[0])/t-1;d[1]=2*(y[1]-u[0])/A-1;f[0]=B[0]*D/t;f[1]=u[0]*D/A;J&&(r.color=k[0],r.tickScale=f,r.dataAxis=p,r.screenOffset=d,x.drawArrays(x.TRIANGLES,F,J));d[0]=2*(y[2]+u[3])/t-1;d[1]=(y[3]+y[1])/A-1;
f[0]=u[3]*D/t;f[1]=B[3]*D/A;v&&(r.color=k[3],r.tickScale=f,r.dataAxis=c,r.screenOffset=d,x.drawArrays(x.TRIANGLES,C,v));d[0]=(y[2]+y[0])/t-1;d[1]=2*(y[3]+u[2])/A-1;f[0]=B[2]*D/t;f[1]=u[2]*D/A;J&&(r.color=k[2],r.tickScale=f,r.dataAxis=p,r.screenOffset=d,x.drawArrays(x.TRIANGLES,F,J))}}();b.update=function(){var e=[1,1,-1,-1,1,-1],n=[1,-1,1,1,-1,-1];return function(p){var c=p.ticks;p=p.bounds;for(var d=new Float32Array(18*(c[0].length+c[1].length)),f=0,k=[[],[]],r=0;2>r;++r)for(var u=k[r],v=c[r],x=
p[r],C=p[r+2],z=0;z<v.length;++z){var y=(v[z].x-x)/(C-x);u.push(y);for(var D=0;6>D;++D)d[f++]=y,d[f++]=e[D],d[f++]=n[D]}this.ticks=k;this.vbo.update(d)}}();b.dispose=function(){this.vbo.dispose();this.shader.dispose();this.tickShader.dispose()}},{"./shaders":314,"binary-search-bounds":96,"gl-buffer":259,"gl-shader":335}],313:[function(b,K,G){function q(a,g,e){this.plot=a;this.vbo=g;this.shader=e}K.exports=function(a){var g=a.gl,e=m(g,[-1,-1,-1,1,1,-1,1,1]);g=l(g,h.lineVert,h.lineFrag);return new q(a,
e,g)};var m=b("gl-buffer"),l=b("gl-shader"),h=b("./shaders");b=q.prototype;b.bind=function(){var a=this.shader;this.vbo.bind();this.shader.bind();a.attributes.coord.pointer();a.uniforms.screenBox=this.plot.screenBox};b.drawLine=function(){var a=[0,0],g=[0,0];return function(e,n,p,c,d,f){var k=this.plot,r=this.shader,u=k.gl;a[0]=e;a[1]=n;g[0]=p;g[1]=c;r.uniforms.start=a;r.uniforms.end=g;r.uniforms.width=d*k.pixelRatio;r.uniforms.color=f;u.drawArrays(u.TRIANGLE_STRIP,0,4)}}();b.dispose=function(){this.vbo.dispose();
this.shader.dispose()}},{"./shaders":314,"gl-buffer":259,"gl-shader":335}],314:[function(b,K,G){b=b("glslify");G=b(["precision lowp float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = vec4(color.xyz * color.w, color.w);\n}\n"]);K.exports={lineVert:b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 start, end;\nuniform float width;\n\nvec2 perp(vec2 v) {\n  return vec2(v.y, -v.x);\n}\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  vec2 delta = normalize(perp(start - end));\n  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));\n  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);\n}\n"]),
lineFrag:G,textVert:b(["#define GLSLIFY 1\nattribute vec3 textCoordinate;\n\nuniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;\nuniform float angle;\n\nvoid main() {\n  float dataOffset  = textCoordinate.z;\n  vec2 glyphOffset  = textCoordinate.xy;\n  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +\n    glyphMatrix * glyphOffset * textScale + screenOffset;\n  gl_Position = vec4(screenCoordinate, 0, 1);\n}\n"]),
textFrag:G,gridVert:b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale;\nuniform float lineWidth;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;\n  gl_Position = vec4(pos, 0, 1);\n}\n"]),gridFrag:G,boxVert:b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 lo, hi;\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);\n}\n"]),
tickVert:b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);\n}\n"])}},{glslify:316}],315:[function(b,K,G){function q(e,n,p){this.plot=e;this.vbo=n;this.shader=p;this.tickOffset=[[],[]];this.tickX=[[],[]];this.labelOffset=[0,0];this.labelCount=[0,0]}
K.exports=function(e){var n=e.gl,p=m(n);n=l(n,g.textVert,g.textFrag);return new q(e,p,n)};var m=b("gl-buffer"),l=b("gl-shader"),h=b("text-cache"),a=b("binary-search-bounds"),g=b("./shaders");b=q.prototype;b.drawTicks=function(){var e=[0,0],n=[0,0],p=[0,0];return function(c){var d=this.plot,f=this.shader,k=this.tickX[c],r=this.tickOffset[c],u=d.gl,v=d.viewBox,x=d.dataBox,C=d.screenBox,z=d.pixelRatio,y=d.tickEnable,D=d.tickPad,A=d.tickColor,t=d.tickAngle,B=d.labelEnable,F=d.labelPad,I=d.labelColor;
d=d.labelAngle;var J=this.labelOffset[c],L=this.labelCount[c],H=a.lt(k,x[c]);k=a.le(k,x[c+2]);e[0]=e[1]=0;e[c]=1;n[c]=(v[2+c]+v[c])/(C[2+c]-C[c])-1;C=2/C[2+(c^1)]-C[c^1];n[c^1]=C*v[c^1]-1;y[c]&&(n[c^1]-=C*z*D[c],H<k&&r[k]>r[H]&&(f.uniforms.dataAxis=e,f.uniforms.screenOffset=n,f.uniforms.color=A[c],f.uniforms.angle=t[c],u.drawArrays(u.TRIANGLES,r[H],r[k]-r[H])));B[c]&&L&&(n[c^1]-=C*z*F[c],f.uniforms.dataAxis=p,f.uniforms.screenOffset=n,f.uniforms.color=I[c],f.uniforms.angle=d[c],u.drawArrays(u.TRIANGLES,
J,L));n[c^1]=C*v[2+(c^1)]-1;y[c+2]&&(n[c^1]+=C*z*D[c+2],H<k&&r[k]>r[H]&&(f.uniforms.dataAxis=e,f.uniforms.screenOffset=n,f.uniforms.color=A[c+2],f.uniforms.angle=t[c+2],u.drawArrays(u.TRIANGLES,r[H],r[k]-r[H])));B[c+2]&&L&&(n[c^1]+=C*z*F[c+2],f.uniforms.dataAxis=p,f.uniforms.screenOffset=n,f.uniforms.color=I[c+2],f.uniforms.angle=d[c+2],u.drawArrays(u.TRIANGLES,J,L))}}();b.drawTitle=function(){var e=[0,0],n=[0,0];return function(){var p=this.plot,c=this.shader,d=p.gl,f=p.screenBox,k=p.titleCenter,
r=p.titleAngle,u=p.titleColor;p=p.pixelRatio;if(this.titleCount){for(var v=0;2>v;++v)n[v]=2*(k[v]*p-f[v])/(f[2+v]-f[v])-1;c.bind();c.uniforms.dataAxis=e;c.uniforms.screenOffset=n;c.uniforms.angle=r;c.uniforms.color=u;d.drawArrays(d.TRIANGLES,this.titleOffset,this.titleCount)}}}();b.bind=function(){var e=[0,0],n=[0,0],p=[0,0];return function(){var c=this.plot,d=this.shader,f=c._tickBounds,k=c.dataBox,r=c.screenBox,u=c.viewBox;d.bind();for(var v=0;2>v;++v){var x=f[v],C=.5*(k[v+2]+k[v]),z=k[v+2]-k[v],
y=u[v+2]-u[v],D=r[v+2]-r[v];n[v]=2*(f[v+2]-x)/z*y/D;e[v]=2*(x-C)/z*y/D}p[1]=2*c.pixelRatio/(r[3]-r[1]);p[0]=p[1]*(r[3]-r[1])/(r[2]-r[0]);d.uniforms.dataScale=n;d.uniforms.dataShift=e;d.uniforms.textScale=p;this.vbo.bind();d.attributes.textCoordinate.pointer()}}();b.update=function(e){var n=[],p=e.ticks,c=e.bounds,d,f;for(f=0;2>f;++f){var k=[Math.floor(n.length/3)],r=[-Infinity],u=p[f];for(d=0;d<u.length;++d){var v=u[d];var x=v.x;var C=v.text;var z=v.font||"sans-serif";v=v.fontSize||12;for(var y=1/
(c[f+2]-c[f]),D=c[f],A=C.split("\n"),t=0;t<A.length;t++){var B=h(z,A[t]).data;for(C=0;C<B.length;C+=2)n.push(B[C]*v,-B[C+1]*v-t*v*1.2,(x-D)*y)}k.push(Math.floor(n.length/3));r.push(x)}this.tickOffset[f]=k;this.tickX[f]=r}for(f=0;2>f;++f){this.labelOffset[f]=Math.floor(n.length/3);B=h(e.labelFont[f],e.labels[f],{textAlign:"center"}).data;v=e.labelSize[f];for(d=0;d<B.length;d+=2)n.push(B[d]*v,-B[d+1]*v,0);this.labelCount[f]=Math.floor(n.length/3)-this.labelOffset[f]}this.titleOffset=Math.floor(n.length/
3);B=h(e.titleFont,e.title).data;v=e.titleSize;for(d=0;d<B.length;d+=2)n.push(B[d]*v,-B[d+1]*v,0);this.titleCount=Math.floor(n.length/3)-this.titleOffset;this.vbo.update(n)};b.dispose=function(){this.vbo.dispose();this.shader.dispose()}},{"./shaders":314,"binary-search-bounds":96,"gl-buffer":259,"gl-shader":335,"text-cache":575}],316:[function(b,K,G){arguments[4][257][0].apply(G,arguments)},{dup:257}],317:[function(b,K,G){function q(p,c){this.gl=p;this.pickBuffer=c;this.screenBox=[0,0,p.drawingBufferWidth,
p.drawingBufferHeight];this.viewBox=[0,0,0,0];this.dataBox=[-10,-10,10,10];this.gridLineEnable=[!0,!0];this.gridLineWidth=[1,1];this.gridLineColor=[[0,0,0,1],[0,0,0,1]];this.pixelRatio=1;this.tickMarkLength=[0,0,0,0];this.tickMarkWidth=[0,0,0,0];this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.tickPad=[15,15,15,15];this.tickAngle=[0,0,0,0];this.tickEnable=[!0,!0,!0,!0];this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.labelPad=[15,15,15,15];this.labelAngle=[0,Math.PI/
2,0,3*Math.PI/2];this.labelEnable=[!0,!0,!0,!0];this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.titleCenter=[0,0];this.titleEnable=!0;this.titleAngle=0;this.titleColor=[0,0,0,1];this.borderColor=[0,0,0,0];this.backgroundColor=[0,0,0,0];this.zeroLineEnable=[!0,!0];this.zeroLineWidth=[4,4];this.zeroLineColor=[[0,0,0,1],[0,0,0,1]];this.borderLineEnable=[!0,!0,!0,!0];this.borderLineWidth=[2,2,2,2];this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.box=this.line=this.text=
this.grid=null;this.objects=[];this.overlays=[];this._tickBounds=[Infinity,Infinity,-Infinity,-Infinity];this.pickDirty=this.dirty=this.static=!1;this.pickDelay=120;this.pickRadius=10;this._pickTimeout=null;this._drawPick=this.drawPick.bind(this);this._depthCounter=0}function m(p){p=p.slice();for(var c=0;c<p.length;++c)p[c]=p[c].slice();return p}function l(p,c){return p.x-c.x}K.exports=function(p){var c=p.gl,d=h(c,[c.drawingBufferWidth,c.drawingBufferHeight]);c=new q(c,d);c.grid=a(c);c.text=g(c);
c.line=e(c);c.box=n(c);c.update(p);return c};var h=b("gl-select-static"),a=b("./lib/grid"),g=b("./lib/text"),e=b("./lib/line"),n=b("./lib/box");b=q.prototype;b.setDirty=function(){this.dirty=this.pickDirty=!0};b.setOverlayDirty=function(){this.dirty=!0};b.nextDepthValue=function(){return this._depthCounter++/65536};b.draw=function(){return function(){var p=this.gl,c=this.screenBox,d=this.viewBox,f=this.dataBox,k=this.pixelRatio,r=this.grid,u=this.line,v=this.text,x=this.objects;this._depthCounter=
0;this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay));if(this.dirty){this.dirty=!1;p.bindFramebuffer(p.FRAMEBUFFER,null);p.enable(p.SCISSOR_TEST);p.disable(p.DEPTH_TEST);p.depthFunc(p.LESS);p.depthMask(!1);p.enable(p.BLEND);p.blendEquation(p.FUNC_ADD,p.FUNC_ADD);p.blendFunc(p.ONE,p.ONE_MINUS_SRC_ALPHA);if(this.borderColor){p.scissor(c[0],c[1],c[2]-c[0],c[3]-c[1]);var C=this.borderColor;p.clearColor(C[0]*
C[3],C[1]*C[3],C[2]*C[3],C[3]);p.clear(p.COLOR_BUFFER_BIT|p.DEPTH_BUFFER_BIT)}p.scissor(d[0],d[1],d[2]-d[0],d[3]-d[1]);p.viewport(d[0],d[1],d[2]-d[0],d[3]-d[1]);C=this.backgroundColor;p.clearColor(C[0]*C[3],C[1]*C[3],C[2]*C[3],C[3]);p.clear(p.COLOR_BUFFER_BIT);r.draw();C=this.zeroLineEnable;var z=this.zeroLineColor,y=this.zeroLineWidth;if(C[0]||C[1])for(u.bind(),r=0;2>r;++r)if(C[r]&&0>=f[r]&&0<=f[r+2]){var D=c[r]-f[r]*(c[r+2]-c[r])/(f[r+2]-f[r]);0===r?u.drawLine(D,c[1],D,c[3],y[r],z[r]):u.drawLine(c[0],
D,c[2],D,y[r],z[r])}for(r=0;r<x.length;++r)x[r].draw();p.viewport(c[0],c[1],c[2]-c[0],c[3]-c[1]);p.scissor(c[0],c[1],c[2]-c[0],c[3]-c[1]);this.grid.drawTickMarks();u.bind();c=this.borderLineEnable;f=this.borderLineWidth;x=this.borderLineColor;c[1]&&u.drawLine(d[0],d[1]-.5*f[1]*k,d[0],d[3]+.5*f[3]*k,f[1],x[1]);c[0]&&u.drawLine(d[0]-.5*f[0]*k,d[1],d[2]+.5*f[2]*k,d[1],f[0],x[0]);c[3]&&u.drawLine(d[2],d[1]-.5*f[1]*k,d[2],d[3]+.5*f[3]*k,f[3],x[3]);c[2]&&u.drawLine(d[0]-.5*f[0]*k,d[3],d[2]+.5*f[2]*k,d[3],
f[2],x[2]);v.bind();for(r=0;2>r;++r)v.drawTicks(r);this.titleEnable&&v.drawTitle();d=this.overlays;for(r=0;r<d.length;++r)d[r].draw();p.disable(p.SCISSOR_TEST);p.disable(p.BLEND);p.depthMask(!0)}}}();b.drawPick=function(){return function(){if(!this.static){var p=this.pickBuffer;this._pickTimeout=null;p.begin();for(var c=1,d=this.objects,f=0;f<d.length;++f)c=d[f].drawPick(c);p.end()}}}();b.pick=function(){return function(p,c){if(!this.static){var d=this.pixelRatio,f=this.pickPixelRatio,k=this.viewBox;
p=Math.round((p-k[0]/d)*f)|0;c=Math.round((c-k[1]/d)*f)|0;d=this.pickBuffer.query(p,c,this.pickRadius);if(!d)return null;d=d.id+(d.value[0]<<8)+(d.value[1]<<16)+(d.value[2]<<24);f=this.objects;for(k=0;k<f.length;++k){var r=f[k].pick(p,c,d);if(r)return r}return null}}}();b.setScreenBox=function(p){var c=this.screenBox,d=this.pixelRatio;c[0]=Math.round(p[0]*d)|0;c[1]=Math.round(p[1]*d)|0;c[2]=Math.round(p[2]*d)|0;c[3]=Math.round(p[3]*d)|0;this.setDirty()};b.setDataBox=function(p){var c=this.dataBox;
if(c[0]!==p[0]||c[1]!==p[1]||c[2]!==p[2]||c[3]!==p[3])c[0]=p[0],c[1]=p[1],c[2]=p[2],c[3]=p[3],this.setDirty()};b.setViewBox=function(p){var c=this.pixelRatio,d=this.viewBox;d[0]=Math.round(p[0]*c)|0;d[1]=Math.round(p[1]*c)|0;d[2]=Math.round(p[2]*c)|0;d[3]=Math.round(p[3]*c)|0;c=this.pickPixelRatio;this.pickBuffer.shape=[Math.round((p[2]-p[0])*c)|0,Math.round((p[3]-p[1])*c)|0];this.setDirty()};b.update=function(p){p=p||{};var c=this.gl,d=this.pixelRatio=p.pixelRatio||1;this.pickPixelRatio=Math.max(d,
1);this.setScreenBox(p.screenBox||[0,0,c.drawingBufferWidth/d,c.drawingBufferHeight/d]);this.setViewBox(p.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/d,.125*(this.screenBox[3]-this.screenBox[1])/d,.875*(this.screenBox[2]-this.screenBox[0])/d,.875*(this.screenBox[3]-this.screenBox[1])/d]);c=this.viewBox;var f=(c[2]-c[0])/(c[3]-c[1]);this.setDataBox(p.dataBox||[-10,-10/f,10,10/f]);this.borderColor=!1!==p.borderColor?(p.borderColor||[0,0,0,0]).slice():!1;this.backgroundColor=(p.backgroundColor||
[0,0,0,0]).slice();this.gridLineEnable=(p.gridLineEnable||[!0,!0]).slice();this.gridLineWidth=(p.gridLineWidth||[1,1]).slice();this.gridLineColor=m(p.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]);this.zeroLineEnable=(p.zeroLineEnable||[!0,!0]).slice();this.zeroLineWidth=(p.zeroLineWidth||[4,4]).slice();this.zeroLineColor=m(p.zeroLineColor||[[0,0,0,1],[0,0,0,1]]);this.tickMarkLength=(p.tickMarkLength||[0,0,0,0]).slice();this.tickMarkWidth=(p.tickMarkWidth||[0,0,0,0]).slice();this.tickMarkColor=m(p.tickMarkColor||
[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);this.titleCenter=(p.titleCenter||[.5*(c[0]+c[2])/d,(c[3]+120)/d]).slice();this.titleEnable=!("titleEnable"in p)||!!p.titleEnable;this.titleAngle=p.titleAngle||0;this.titleColor=(p.titleColor||[0,0,0,1]).slice();this.labelPad=(p.labelPad||[15,15,15,15]).slice();this.labelAngle=(p.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice();this.labelEnable=(p.labelEnable||[!0,!0,!0,!0]).slice();this.labelColor=m(p.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);
this.tickPad=(p.tickPad||[15,15,15,15]).slice();this.tickAngle=(p.tickAngle||[0,0,0,0]).slice();this.tickEnable=(p.tickEnable||[!0,!0,!0,!0]).slice();this.tickColor=m(p.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);this.borderLineEnable=(p.borderLineEnable||[!0,!0,!0,!0]).slice();this.borderLineWidth=(p.borderLineWidth||[2,2,2,2]).slice();this.borderLineColor=m(p.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);d=p.ticks||[[],[]];c=this._tickBounds;c[0]=c[1]=Infinity;c[2]=c[3]=
-Infinity;for(f=0;2>f;++f){var k=d[f].slice(0);0!==k.length&&(k.sort(l),c[f]=Math.min(c[f],k[0].x),c[f+2]=Math.max(c[f+2],k[k.length-1].x))}this.grid.update({bounds:c,ticks:d});this.text.update({bounds:c,ticks:d,labels:p.labels||["x","y"],labelSize:p.labelSize||[12,12],labelFont:p.labelFont||["sans-serif","sans-serif"],title:p.title||"",titleSize:p.titleSize||18,titleFont:p.titleFont||"sans-serif"});this.static=!!p.static;this.setDirty()};b.dispose=function(){this.box.dispose();this.grid.dispose();
this.text.dispose();this.line.dispose();for(var p=this.objects.length-1;0<=p;--p)this.objects[p].dispose();this.objects.length=0;for(p=this.overlays.length-1;0<=p;--p)this.overlays[p].dispose();this.overlays.length=0;this.gl=null};b.addObject=function(p){0>this.objects.indexOf(p)&&(this.objects.push(p),this.setDirty())};b.removeObject=function(p){for(var c=this.objects,d=0;d<c.length;++d)if(c[d]===p){c.splice(d,1);this.setDirty();break}};b.addOverlay=function(p){0>this.overlays.indexOf(p)&&(this.overlays.push(p),
this.setOverlayDirty())};b.removeOverlay=function(p){for(var c=this.overlays,d=0;d<c.length;++d)if(c[d]===p){c.splice(d,1);this.setOverlayDirty();break}}},{"./lib/box":311,"./lib/grid":312,"./lib/line":313,"./lib/text":315,"gl-select-static":334}],318:[function(b,K,G){K.exports=function(e,n){e=e||document.body;n=n||{};var p=[.01,Infinity];"distanceLimits"in n&&(p[0]=n.distanceLimits[0],p[1]=n.distanceLimits[1]);"zoomMin"in n&&(p[0]=n.zoomMin);"zoomMax"in n&&(p[1]=n.zoomMax);var c=m({center:n.center||
[0,0,0],up:n.up||[0,1,0],eye:n.eye||[0,0,10],mode:n.mode||"orbit",distanceLimits:p}),d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],f=0,k=e.clientWidth,r=e.clientHeight,u={keyBindingMode:"rotate",enableWheel:!0,view:c,element:e,delay:n.delay||16,rotateSpeed:n.rotateSpeed||1,zoomSpeed:n.zoomSpeed||1,translateSpeed:n.translateSpeed||1,flipX:!!n.flipX,flipY:!!n.flipY,modes:c.modes,_ortho:n._ortho||n.projection&&"orthographic"===n.projection.type||!1,tick:function(){var v=q(),x=this.delay,C=v-2*x;c.idle(v-x);c.recalcMatrix(C);
c.flush(v-(100+2*x));v=!0;x=c.computedMatrix;for(C=0;16>C;++C)v=v&&d[C]===x[C],d[C]=x[C];x=e.clientWidth===k&&e.clientHeight===r;k=e.clientWidth;r=e.clientHeight;if(v)return!x;f=Math.exp(c.computedRadius[0]);return!0},lookAt:function(v,x,C){c.lookAt(c.lastT(),v,x,C)},rotate:function(v,x,C){c.rotate(c.lastT(),v,x,C)},pan:function(v,x,C){c.pan(c.lastT(),v,x,C)},translate:function(v,x,C){c.translate(c.lastT(),v,x,C)}};Object.defineProperties(u,{matrix:{get:function(){return c.computedMatrix},set:function(v){c.setMatrix(c.lastT(),
v);return c.computedMatrix},enumerable:!0},mode:{get:function(){return c.getMode()},set:function(v){var x=c.computedUp.slice(),C=c.computedEye.slice(),z=c.computedCenter.slice();c.setMode(v);"turntable"===v&&(v=q(),c._active.lookAt(v,C,z,x),c._active.lookAt(v+500,C,z,[0,0,1]),c._active.flush(v));return c.getMode()},enumerable:!0},center:{get:function(){return c.computedCenter},set:function(v){c.lookAt(c.lastT(),null,v);return c.computedCenter},enumerable:!0},eye:{get:function(){return c.computedEye},
set:function(v){c.lookAt(c.lastT(),v);return c.computedEye},enumerable:!0},up:{get:function(){return c.computedUp},set:function(v){c.lookAt(c.lastT(),null,null,v);return c.computedUp},enumerable:!0},distance:{get:function(){return f},set:function(v){c.setDistance(c.lastT(),v);return v},enumerable:!0},distanceLimits:{get:function(){return c.getDistanceLimits(p)},set:function(v){c.setDistanceLimits(v);return v},enumerable:!0}});e.addEventListener("contextmenu",function(v){v.preventDefault();return!1});
u._lastX=-1;u._lastY=-1;u._lastMods={shift:!1,control:!1,alt:!1,meta:!1};u.enableMouseListeners=function(){function v(x,C,z,y){var D=u.keyBindingMode;if(!1!==D){var A="rotate"===D,t="pan"===D;D="zoom"===D;var B=!!y.control,F=!!y.alt,I=!!y.shift,J=!!(x&1),L=!!(x&2);x=!!(x&4);var H=1/e.clientHeight,P=H*(C-u._lastX),M=H*(z-u._lastY),N=u.flipX?1:-1,T=u.flipY?1:-1,Q=Math.PI*u.rotateSpeed;H=q();-1!==u._lastX&&-1!==u._lastY&&((A&&J&&!B&&!F&&!I||J&&!B&&!F&&I)&&c.rotate(H,N*Q*P,-T*Q*M,0),(t&&J&&!B&&!F&&!I||
L||J&&B&&!F&&!I)&&c.pan(H,-u.translateSpeed*P*f,u.translateSpeed*M*f,0),D&&J&&!B&&!F&&!I||x||J&&!B&&F&&!I)&&(A=-u.zoomSpeed*M/window.innerHeight*(H-c.lastT())*100,c.pan(H,0,0,f*(Math.exp(A)-1)));u._lastX=C;u._lastY=z;u._lastMods=y;return!0}}u.mouseListener=l(e,v);e.addEventListener("touchstart",function(x){x=a(x.changedTouches[0],e);v(0,x[0],x[1],u._lastMods);v(1,x[0],x[1],u._lastMods)},g?{passive:!0}:!1);e.addEventListener("touchmove",function(x){var C=a(x.changedTouches[0],e);v(1,C[0],C[1],u._lastMods);
x.preventDefault()},g?{passive:!1}:!1);e.addEventListener("touchend",function(x){v(0,u._lastX,u._lastY,u._lastMods)},g?{passive:!0}:!1);u.wheelListener=h(e,function(x,C){if(!1!==u.keyBindingMode&&u.enableWheel){var z=u.flipX?1:-1,y=u.flipY?1:-1,D=q();Math.abs(x)>Math.abs(C)?c.rotate(D,0,0,-x*z*Math.PI*u.rotateSpeed/window.innerWidth):u._ortho||(x=-u.zoomSpeed*y*C/window.innerHeight*(D-c.lastT())/20,c.pan(D,0,0,f*(Math.exp(x)-1)))}},!0)};u.enableMouseListeners();return u};var q=b("right-now"),m=b("3d-view"),
l=b("mouse-change"),h=b("mouse-wheel"),a=b("mouse-event-offset"),g=b("has-passive-events")},{"3d-view":54,"has-passive-events":441,"mouse-change":483,"mouse-event-offset":484,"mouse-wheel":486,"right-now":542}],319:[function(b,K,G){G=b("glslify");var q=b("gl-shader"),m=G(["precision mediump float;\n#define GLSLIFY 1\nattribute vec2 position;\nvarying vec2 uv;\nvoid main() {\n  uv = position;\n  gl_Position = vec4(position, 0, 1);\n}"]),l=G(["precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D accumBuffer;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));\n  gl_FragColor = min(vec4(1,1,1,1), accum);\n}"]);
K.exports=function(h){return q(h,m,l,null,[{name:"position",type:"vec2"}])}},{"gl-shader":335,glslify:320}],320:[function(b,K,G){arguments[4][257][0].apply(G,arguments)},{dup:257}],321:[function(b,K,G){function q(){this.mouse=[-1,-1];this.screen=null;this.distance=Infinity;this.data=this.object=this.dataPosition=this.dataCoordinate=this.index=null}function m(v,x){var C=null;try{(C=v.getContext("webgl",x))||(C=v.getContext("experimental-webgl",x))}catch(z){return null}return C}function l(v){return"boolean"===
typeof v?v:!0}var h=b("./camera.js"),a=b("gl-axes3d"),g=b("gl-axes3d/properties"),e=b("gl-spikes3d"),n=b("gl-select-static"),p=b("gl-fbo"),c=b("a-big-triangle"),d=b("mouse-change"),f=b("gl-mat4/perspective"),k=b("gl-mat4/ortho"),r=b("./lib/shader"),u=b("is-mobile")({tablet:!0,featureDetect:!0});K.exports={createScene:function(v){function x(){if(!ha._stopped&&ha.autoResize){var qa=A.parentNode;if(qa&&qa!==document.body){var ka=qa.clientWidth;qa=qa.clientHeight}else ka=window.innerWidth,qa=window.innerHeight;
var oa=Math.ceil(ka*ha.pixelRatio)|0,na=Math.ceil(qa*ha.pixelRatio)|0;if(oa!==A.width||na!==A.height)A.width=oa,A.height=na,oa=A.style,oa.position=oa.position||"absolute",oa.left="0px",oa.top="0px",oa.width=ka+"px",oa.height=qa+"px",X=!0}}function C(){for(var qa=T.length,ka=S.length,oa=0;oa<ka;++oa)U[oa]=0;oa=0;a:for(;oa<qa;++oa){var na=T[oa],la=na.pickSlots;if(la){for(var ia=0;ia<ka;++ia)if(255>U[ia]+la){Q[oa]=ia;na.setPickBase(U[ia]+1);U[ia]+=la;continue a}ia=n(t,fa);Q[oa]=ka;S.push(ia);U.push(la);
na.setPickBase(1);ka+=1}else Q[oa]=-1}for(;0<ka&&0===U[ka-1];)U.pop(),S.pop().dispose()}function z(){if(ha.contextLost)return!0;if(t.isContextLost()&&(ha.contextLost=!0,ha.mouseListener.enabled=!1,ha.selection.object=null,ha.oncontextloss))ha.oncontextloss()}function y(){if(!z()){x();var qa=ha.camera.tick();aa.view=ha.camera.matrix;X=X||qa;Z=Z||qa;M.pixelRatio=ha.pixelRatio;N.pixelRatio=ha.pixelRatio;qa=T.length;var ka=ba[0],oa=ba[1];ka[0]=ka[1]=ka[2]=Infinity;oa[0]=oa[1]=oa[2]=-Infinity;for(var na=
0;na<qa;++na){var la=T[na];la.pixelRatio=ha.pixelRatio;la.axes=ha.axes;X=X||!!la.dirty;Z=Z||!!la.dirty;if(la=la.bounds){var ia=la[0],sa=la[1];for(la=0;3>la;++la)ka[la]=Math.min(ka[la],ia[la]),oa[la]=Math.max(oa[la],sa[la])}}ia=ha.bounds;if(ha.autoBounds)for(la=0;3>la;++la)oa[la]<ka[la]?(ka[la]=-1,oa[la]=1):(ka[la]===oa[la]&&(--ka[la],oa[la]+=1),na=.05*(oa[la]-ka[la]),ka[la]-=na,oa[la]+=na),ia[0][la]=ka[la],ia[1][la]=oa[la];ka=!1;for(la=0;3>la;++la)ka=ka||ma[0][la]!==ia[0][la]||ma[1][la]!==ia[1][la],
ma[0][la]=ia[0][la],ma[1][la]=ia[1][la];Z=Z||ka;if(X=X||ka){if(ka){ka=[0,0,0];for(na=0;3>na;++na)oa=na,la=(ia[1][na]-ia[0][na])/10,sa=Math.round(Math.log(Math.abs(la))/Math.log(10)),0>sa?(sa=Math.round(Math.pow(10,-sa)),la=Math.ceil(la*sa)/sa):0<sa?(sa=Math.round(Math.pow(10,sa)),la=Math.ceil(la/sa)*sa):la=Math.ceil(la),ka[oa]=la;M.autoTicks?M.update({bounds:ia,tickSpacing:ka}):M.update({bounds:ia})}ka=t.drawingBufferWidth;oa=t.drawingBufferHeight;fa[0]=ka;fa[1]=oa;ja[0]=Math.max(ka/ha.pixelRatio,
1)|0;ja[1]=Math.max(oa/ha.pixelRatio,1)|0;na=ha;la=na.bounds;var ta=na.cameraParams,Aa=ta.projection;sa=ta.model;var Ka=na.zNear,Sa=na.zFar,db=na.fovy,eb=na.gl.drawingBufferWidth/na.gl.drawingBufferHeight;L?(k(Aa,-eb,eb,-1,1,Ka,Sa),ta._ortho=!0):(f(Aa,db,eb,Ka,Sa),ta._ortho=!1);for(ta=0;16>ta;++ta)sa[ta]=0;sa[15]=1;for(ta=Aa=0;3>ta;++ta)Aa=Math.max(Aa,la[1][ta]-la[0][ta]);for(ta=0;3>ta;++ta)sa[5*ta]=na.autoScale?na.aspect[ta]/(la[1][ta]-la[0][ta]):1/Aa,na.autoCenter&&(sa[12+ta]=.5*-sa[5*ta]*(la[0][ta]+
la[1][ta]));for(na=0;na<qa;++na)la=T[na],la.axesBounds=ia,ha.clipToBounds&&(la.clipBounds=ia);F.object&&(N.position=ha.snapToData?F.dataCoordinate:F.dataPosition,N.bounds=ia);if(Z&&(Z=!1,!z()))for(t.colorMask(!0,!0,!0,!0),t.depthMask(!0),t.disable(t.BLEND),t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),ia=T.length,na=S.length,la=0;la<na;++la){sa=S[la];sa.shape=ja;sa.begin();for(ta=0;ta<ia;++ta)Q[ta]===la&&(Aa=T[ta],Aa.drawPick&&(Aa.pixelRatio=1,Aa.drawPick(aa)));sa.end()}ha.axesPixels=g(ha.axes,aa,
ka,oa);if(ha.onrender)ha.onrender();t.bindFramebuffer(t.FRAMEBUFFER,null);t.viewport(0,0,ka,oa);ha.clearRGBA();t.depthMask(!0);t.colorMask(!0,!0,!0,!0);t.enable(t.DEPTH_TEST);t.depthFunc(t.LEQUAL);t.disable(t.BLEND);t.disable(t.CULL_FACE);ia=!1;M.enable&&(ia=ia||M.isTransparent(),M.draw(aa));N.axes=M;F.object&&N.draw(aa);t.disable(t.CULL_FACE);for(na=0;na<qa;++na)la=T[na],la.axes=M,la.pixelRatio=ha.pixelRatio,la.isOpaque&&la.isOpaque()&&la.draw(aa),la.isTransparent&&la.isTransparent()&&(ia=!0);if(ia){I.shape=
fa;I.bind();t.clear(t.DEPTH_BUFFER_BIT);t.colorMask(!1,!1,!1,!1);t.depthMask(!0);t.depthFunc(t.LESS);M.enable&&M.isTransparent()&&M.drawTransparent(aa);for(na=0;na<qa;++na)la=T[na],la.isOpaque&&la.isOpaque()&&la.draw(aa);t.enable(t.BLEND);t.blendEquation(t.FUNC_ADD);t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA);t.colorMask(!0,!0,!0,!0);t.depthMask(!1);t.clearColor(0,0,0,0);t.clear(t.COLOR_BUFFER_BIT);M.isTransparent()&&M.drawTransparent(aa);for(na=0;na<qa;++na)la=T[na],la.isTransparent&&la.isTransparent()&&
la.drawTransparent(aa);t.bindFramebuffer(t.FRAMEBUFFER,null);t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA);t.disable(t.DEPTH_TEST);J.bind();I.color[0].bind(0);J.uniforms.accumBuffer=0;c(t);t.disable(t.BLEND)}X=!1;for(na=0;na<qa;++na)T[na].dirty=!1}}}function D(){ha._stopped||ha.contextLost||(y(),requestAnimationFrame(D))}v=v||{};v.camera=v.camera||{};var A=v.canvas;A||(A=document.createElement("canvas"),v.container?v.container.appendChild(A):document.body.appendChild(A));var t=v.gl;t||(v.glOptions&&(u=
!!v.glOptions.preserveDrawingBuffer),t=m(A,v.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:u}));if(!t)throw Error("webgl not supported");var B=v.bounds||[[-10,-10,-10],[10,10,10]],F=new q,I=p(t,t.drawingBufferWidth,t.drawingBufferHeight,{preferFloat:!u}),J=r(t),L=v.cameraObject&&!0===v.cameraObject._ortho||v.camera.projection&&"orthographic"===v.camera.projection.type||!1,H={eye:v.camera.eye||[2,0,0],center:v.camera.center||[0,0,0],up:v.camera.up||[0,1,0],zoomMin:v.camera.zoomMax||
.1,zoomMax:v.camera.zoomMin||100,mode:v.camera.mode||"turntable",_ortho:L},P=v.axes||{},M=a(t,P);M.enable=!P.disable;var N=e(t,v.spikes||{}),T=[],Q=[],U=[],S=[],X=!0,Z=!0,aa={view:null,projection:Array(16),model:Array(16),_ortho:!1};Z=!0;var fa=[t.drawingBufferWidth,t.drawingBufferHeight];H=v.cameraObject||h(A,H);var ha={gl:t,contextLost:!1,pixelRatio:v.pixelRatio||1,canvas:A,selection:F,camera:H,axes:M,axesPixels:null,spikes:N,bounds:B,objects:T,shape:fa,aspect:v.aspectRatio||[1,1,1],pickRadius:v.pickRadius||
10,zNear:v.zNear||.01,zFar:v.zFar||1E3,fovy:v.fovy||Math.PI/4,clearColor:v.clearColor||[0,0,0,0],autoResize:l(v.autoResize),autoBounds:l(v.autoBounds),autoScale:!!v.autoScale,autoCenter:l(v.autoCenter),clipToBounds:l(v.clipToBounds),snapToData:!!v.snapToData,onselect:v.onselect||null,onrender:v.onrender||null,onclick:v.onclick||null,cameraParams:aa,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(qa){this.aspect[0]=
qa.x;this.aspect[1]=qa.y;this.aspect[2]=qa.z;Z=!0},setBounds:function(qa,ka){this.bounds[0][qa]=ka.min;this.bounds[1][qa]=ka.max},setClearColor:function(qa){this.clearColor=qa},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]);this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},ja=[t.drawingBufferWidth/ha.pixelRatio|0,t.drawingBufferHeight/ha.pixelRatio|0];ha.autoResize&&x();window.addEventListener("resize",x);ha.update=
function(qa){ha._stopped||(Z=X=!0)};ha.add=function(qa){ha._stopped||(qa.axes=M,T.push(qa),Q.push(-1),Z=X=!0,C())};ha.remove=function(qa){ha._stopped||(qa=T.indexOf(qa),0>qa||(T.splice(qa,1),Q.pop(),Z=X=!0,C()))};ha.dispose=function(){if(!ha._stopped&&(ha._stopped=!0,window.removeEventListener("resize",x),A.removeEventListener("webglcontextlost",z),ha.mouseListener.enabled=!1,!ha.contextLost)){M.dispose();N.dispose();for(var qa=0;qa<T.length;++qa)T[qa].dispose();I.dispose();for(qa=0;qa<S.length;++qa)S[qa].dispose();
J.dispose();N=M=t=null;T=[]}};ha._mouseRotating=!1;ha._prevButtons=0;ha.enableMouseListeners=function(){ha.mouseListener=d(A,function(qa,ka,oa){if(!ha._stopped){var na=S.length,la=T.length,ia=F.object;F.distance=Infinity;F.mouse[0]=ka;F.mouse[1]=oa;F.object=null;F.screen=null;F.dataCoordinate=F.dataPosition=null;var sa=!1;if(qa&&ha._prevButtons)ha._mouseRotating=!0;else{ha._mouseRotating&&(Z=!0);ha._mouseRotating=!1;for(var ta=0;ta<na;++ta){var Aa=S[ta].query(ka,ja[1]-oa-1,ha.pickRadius);if(Aa&&!(Aa.distance>
F.distance))for(var Ka=0;Ka<la;++Ka){var Sa=T[Ka];if(Q[Ka]===ta){var db=Sa.pick(Aa);db&&(F.buttons=qa,F.screen=Aa.coord,F.distance=Aa.distance,F.object=Sa,F.index=db.distance,F.dataPosition=db.position,F.dataCoordinate=db.dataCoordinate,F.data=db,sa=!0)}}}}ia&&ia!==F.object&&(ia.highlight&&ia.highlight(null),X=!0);F.object&&(F.object.highlight&&F.object.highlight(F.data),X=!0);if((sa=sa||F.object!==ia)&&ha.onselect)ha.onselect(F);if(qa&1&&!(ha._prevButtons&1)&&ha.onclick)ha.onclick(F);ha._prevButtons=
qa}})};A.addEventListener("webglcontextlost",z);var ba=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]],ma=[ba[0].slice(),ba[1].slice()];ha.enableMouseListeners();D();ha.redraw=function(){ha._stopped||(X=!0,y())};return ha},createCamera:h}},{"./camera.js":318,"./lib/shader":319,"a-big-triangle":64,"gl-axes3d":250,"gl-axes3d/properties":258,"gl-fbo":269,"gl-mat4/ortho":296,"gl-mat4/perspective":297,"gl-select-static":334,"gl-spikes3d":345,"is-mobile":467,"mouse-change":483}],322:[function(b,
K,G){b=b("glslify");G.pointVertex=b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform float pointCloud;\n\nhighp float rand(vec2 co) {\n  highp float a = 12.9898;\n  highp float b = 78.233;\n  highp float c = 43758.5453;\n  highp float d = dot(co.xy, vec2(a, b));\n  highp float e = mod(d, 3.14);\n  return fract(sin(e) * c);\n}\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n    // if we don't jitter the point size a bit, overall point cloud\n    // saturation 'jumps' on zooming, which is disturbing and confusing\n  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    // get the same square surface as circle would be\n    gl_PointSize *= 0.886;\n  }\n}"]);
G.pointFragment=b(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color, borderColor;\nuniform float centerFraction;\nuniform float pointCloud;\n\nvoid main() {\n  float radius;\n  vec4 baseColor;\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    if(centerFraction == 1.0) {\n      gl_FragColor = color;\n    } else {\n      gl_FragColor = mix(borderColor, color, centerFraction);\n    }\n  } else {\n    radius = length(2.0 * gl_PointCoord.xy - 1.0);\n    if(radius > 1.0) {\n      discard;\n    }\n    baseColor = mix(borderColor, color, step(radius, centerFraction));\n    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);\n  }\n}\n"]);
G.pickVertex=b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform vec4 pickOffset;\n\nvarying vec4 fragId;\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n  gl_PointSize = pointSize;\n\n  vec4 id = pickId + pickOffset;\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  fragId = id;\n}\n"]);
G.pickFragment=b(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\n\nvoid main() {\n  float radius = length(2.0 * gl_PointCoord.xy - 1.0);\n  if(radius > 1.0) {\n    discard;\n  }\n  gl_FragColor = fragId / 255.0;\n}\n"])},{glslify:323}],323:[function(b,K,G){arguments[4][257][0].apply(G,arguments)},{dup:257}],324:[function(b,K,G){function q(g,e,n,p,c){this.plot=g;this.offsetBuffer=e;this.pickBuffer=n;this.shader=p;this.pickShader=c;this.sizeMin=.5;this.sizeMinCap=2;this.sizeMax=
20;this.areaRatio=1;this.pointCount=0;this.color=[1,0,0,1];this.borderColor=[0,0,0,1];this.blend=!1;this.pickOffset=0;this.points=null}var m=b("gl-shader"),l=b("gl-buffer"),h=b("typedarray-pool"),a=b("./lib/shader");K.exports=function(g,e){var n=g.gl,p=l(n),c=l(n),d=m(n,a.pointVertex,a.pointFragment);n=m(n,a.pickVertex,a.pickFragment);p=new q(g,p,c,d,n);p.update(e);g.addObject(p);return p};b=q.prototype;b.dispose=function(){this.shader.dispose();this.pickShader.dispose();this.offsetBuffer.dispose();
this.pickBuffer.dispose();this.plot.removeObject(this)};b.update=function(g){function e(u,v){return u in g?g[u]:v}var n;g=g||{};this.sizeMin=e("sizeMin",.5);this.sizeMax=e("sizeMax",20);this.color=e("color",[1,0,0,1]).slice();this.areaRatio=e("areaRatio",1);this.borderColor=e("borderColor",[0,0,0,1]).slice();this.blend=e("blend",!1);var p=g.positions.length>>>1,c=g.positions instanceof Float32Array,d=g.idToIndex instanceof Int32Array&&g.idToIndex.length>=p,f=g.positions,k=c?f:h.mallocFloat32(f.length),
r=d?g.idToIndex:h.mallocInt32(p);c||k.set(f);if(!d)for(k.set(f),n=0;n<p;n++)r[n]=n;this.points=f;this.offsetBuffer.update(k);this.pickBuffer.update(r);c||h.free(k);d||h.free(r);this.pointCount=p;this.pickOffset=0};b.unifiedDraw=function(){var g=[1,0,0,0,1,0,0,0,1],e=[0,0,0,0];return function(n){var p=void 0!==n,c=p?this.pickShader:this.shader,d=this.plot.gl,f=this.plot.dataBox;if(0===this.pointCount)return n;var k=f[2]-f[0],r=f[3]-f[1],u=this.points,v=0,x=u.length>>>1,C;for(C=0;C<x;C++){var z=u[2*
C],y=u[2*C+1];z>=f[0]&&z<=f[2]&&y>=f[1]&&y<=f[3]&&v++}u=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(v,.33333)));g[0]=2/k;g[4]=2/r;g[6]=-2*f[0]/k-1;g[7]=-2*f[1]/r-1;this.offsetBuffer.bind();c.bind();c.attributes.position.pointer();c.uniforms.matrix=g;c.uniforms.color=this.color;c.uniforms.borderColor=this.borderColor;c.uniforms.pointCloud=5>u;c.uniforms.pointSize=u;c.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio)));
p&&(e[0]=n&255,e[1]=n>>8&255,e[2]=n>>16&255,e[3]=n>>24&255,this.pickBuffer.bind(),c.attributes.pickId.pointer(d.UNSIGNED_BYTE),c.uniforms.pickOffset=e,this.pickOffset=n);p=d.getParameter(d.BLEND);c=d.getParameter(d.DITHER);p&&!this.blend&&d.disable(d.BLEND);c&&d.disable(d.DITHER);d.drawArrays(d.POINTS,0,this.pointCount);p&&!this.blend&&d.enable(d.BLEND);c&&d.enable(d.DITHER);return n+this.pointCount}}();b.draw=b.unifiedDraw;b.drawPick=b.unifiedDraw;b.pick=function(g,e,n){g=this.pickOffset;e=this.pointCount;
if(n<g||n>=g+e)return null;n-=g;g=this.points;return{object:this,pointId:n,dataCoord:[g[2*n],g[2*n+1]]}}},{"./lib/shader":322,"gl-buffer":259,"gl-shader":335,"typedarray-pool":595}],325:[function(b,K,G){K.exports=function(q,m,l,h){var a=m[0],g=m[1],e=m[2];m=m[3];var n=l[0],p=l[1],c=l[2];l=l[3];var d=a*n+g*p+e*c+m*l;0>d&&(d=-d,n=-n,p=-p,c=-c,l=-l);if(1E-6<1-d){var f=Math.acos(d);var k=Math.sin(f);d=Math.sin((1-h)*f)/k;h=Math.sin(h*f)/k}else d=1-h;q[0]=d*a+h*n;q[1]=d*g+h*p;q[2]=d*e+h*c;q[3]=d*m+h*l;
return q}},{}],326:[function(b,K,G){K.exports=function(q){return q||0===q?q.toString():""}},{}],327:[function(b,K,G){var q=b("vectorize-text");K.exports=function(l,h,a){var g=m[h];g||(g=m[h]={});if(l in g)return g[l];var e={textAlign:"center",textBaseline:"middle",lineHeight:1,font:h,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0};h=q(l,e);e.triangles=!1;e=q(l,e);var n,p;if(a&&1!==a){for(n=0;n<h.positions.length;++n)for(p=0;p<h.positions[n].length;++p)h.positions[n][p]/=
a;for(n=0;n<e.positions.length;++n)for(p=0;p<e.positions[n].length;++p)e.positions[n][p]/=a}a=[[Infinity,Infinity],[-Infinity,-Infinity]];var c=e.positions.length;for(n=0;n<c;++n){var d=e.positions[n];for(p=0;2>p;++p)a[0][p]=Math.min(a[0][p],d[p]),a[1][p]=Math.max(a[1][p],d[p])}return g[l]=[h,e,a]};var m={}},{"vectorize-text":600}],328:[function(b,K,G){function q(k,r){k=m(k,r);r=k.attributes;r.position.location=0;r.color.location=1;r.glyph.location=2;r.id.location=3;return k}var m=b("gl-shader"),
l=b("glslify");b=l(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform vec4 highlightId;\nuniform float highlightScale;\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = 1.0;\n    if(distance(highlightId, id) < 0.0001) {\n      scale = highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1);\n    vec4 viewPosition = view * worldPosition;\n    viewPosition = viewPosition / viewPosition.w;\n    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]);
K=l(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float highlightScale, pixelRatio;\nuniform vec4 highlightId;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = pixelRatio;\n    if(distance(highlightId.bgr, id.bgr) < 0.001) {\n      scale *= highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1.0);\n    vec4 viewPosition = view * worldPosition;\n    vec4 clipPosition = projection * viewPosition;\n    clipPosition /= clipPosition.w;\n\n    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]);
var h=l(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform float highlightScale;\nuniform vec4 highlightId;\nuniform vec3 axes[2];\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float scale, pixelRatio;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float lscale = pixelRatio * scale;\n    if(distance(highlightId, id) < 0.0001) {\n      lscale *= highlightScale;\n    }\n\n    vec4 clipCenter   = projection * view * model * vec4(position, 1);\n    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;\n    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = dataPosition;\n  }\n}\n"]),
a=l(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float opacity;\n\nvarying vec4 interpColor;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (\n    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||\n    interpColor.a * opacity == 0.\n  ) discard;\n  gl_FragColor = interpColor * opacity;\n}\n"]);
l=l(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float pickGroup;\n\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;\n\n  gl_FragColor = vec4(pickGroup, pickId.bgr);\n}"]);
var g=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],e={vertex:b,fragment:a,attributes:g},n={vertex:K,fragment:a,attributes:g},p={vertex:h,fragment:a,attributes:g},c={vertex:b,fragment:l,attributes:g},d={vertex:K,fragment:l,attributes:g},f={vertex:h,fragment:l,attributes:g};G.createPerspective=function(k){return q(k,e)};G.createOrtho=function(k){return q(k,n)};G.createProject=function(k){return q(k,p)};G.createPickPerspective=function(k){return q(k,
c)};G.createPickOrtho=function(k){return q(k,d)};G.createPickProject=function(k){return q(k,f)}},{"gl-shader":335,glslify:329}],329:[function(b,K,G){arguments[4][257][0].apply(G,arguments)},{dup:257}],330:[function(b,K,G){function q(H,P){var M=H[0],N=H[1],T=H[2],Q=H[3];H[0]=P[0]*M+P[4]*N+P[8]*T+P[12]*Q;H[1]=P[1]*M+P[5]*N+P[9]*T+P[13]*Q;H[2]=P[2]*M+P[6]*N+P[10]*T+P[14]*Q;H[3]=P[3]*M+P[7]*N+P[11]*T+P[15]*Q;return H}function m(H,P,M,N){q(N,N,M);q(N,N,P);return q(N,N,H)}function l(H,P){this.index=H;this.dataCoordinate=
this.position=P}function h(H){return!0===H||1<H?1:H}function a(H,P,M,N,T,Q,U,S,X,Z,aa,fa){this.gl=H;this.pixelRatio=1;this.shader=P;this.orthoShader=M;this.projectShader=N;this.pointBuffer=T;this.colorBuffer=Q;this.glyphBuffer=U;this.idBuffer=S;this.vao=X;this.lineVertexCount=this.vertexCount=0;this.opacity=1;this.hasAlpha=!1;this.lineWidth=0;this.projectScale=[2/3,2/3,2/3];this.projectOpacity=[1,1,1];this.projectHasAlpha=!1;this.pickId=0;this.pickPerspectiveShader=Z;this.pickOrthoShader=aa;this.pickProjectShader=
fa;this.points=[];this._selectResult=new l(0,[0,0,0]);this.useOrtho=!0;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.axesProject=[!0,!0,!0];this.axesBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.highlightId=[1,1,1,1];this.highlightScale=2;this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.dirty=!0}function g(H){H[0]=H[1]=H[2]=0;return H}function e(H,P){H[0]=P[0];H[1]=P[1];H[2]=P[2];H[3]=1;return H}function n(H,
P,M,N){H[0]=P[0];H[1]=P[1];H[2]=P[2];H[M]=N;return H}function p(H,P,M,N,T,Q,U){var S=M.gl;if(Q===M.projectHasAlpha||U){for(var X=M.axesProject,Z=M.gl,aa=P.uniforms,fa=N.model||z,ha=N.view||z,ja=N.projection||z,ba=M.axesBounds,ma=M.clipBounds,qa=J,ka=0;2>ka;++ka)for(var oa=0;3>oa;++oa)qa[ka][oa]=Math.max(Math.min(ma[ka][oa],1E8),-1E8);ma=M.axes&&M.axes.lastCubeProps?M.axes.lastCubeProps.axis:[1,1,1];y[0]=2/Z.drawingBufferWidth;y[1]=2/Z.drawingBufferHeight;P.bind();aa.view=ha;aa.projection=ja;aa.screenSize=
y;aa.highlightId=M.highlightId;aa.highlightScale=M.highlightScale;aa.clipBounds=qa;aa.pickGroup=M.pickId/255;aa.pixelRatio=T;for(P=0;3>P;++P)if(X[P]){aa.scale=M.projectScale[P];aa.opacity=M.projectOpacity[P];ka=F;for(var na=0;16>na;++na)ka[na]=0;for(na=0;4>na;++na)ka[5*na]=1;ka[5*P]=0;ka[12+P]=0>ma[P]?ba[0][P]:ba[1][P];u(ka,fa,ka);aa.model=ka;ka=(P+1)%3;oa=(P+2)%3;var la=g(D),ia=g(A);la[ka]=1;ia[oa]=1;na=m(ja,ha,fa,e(t,la));var sa=m(ja,ha,fa,e(B,ia));if(Math.abs(na[1])>Math.abs(sa[1])){var ta=na;
na=sa;sa=ta;ta=la;la=ia;ia=ta;ta=ka;ka=oa;oa=ta}0>na[0]&&(la[ka]=-1);0<sa[1]&&(ia[oa]=-1);for(na=ta=sa=0;4>na;++na)sa+=Math.pow(fa[4*ka+na],2),ta+=Math.pow(fa[4*oa+na],2);la[ka]/=Math.sqrt(sa);ia[oa]/=Math.sqrt(ta);aa.axes[0]=la;aa.axes[1]=ia;aa.fragClipBounds[0]=n(I,qa[0],P,-1E8);aa.fragClipBounds[1]=n(I,qa[1],P,1E8);M.vao.bind();M.vao.draw(Z.TRIANGLES,M.vertexCount);0<M.lineWidth&&(Z.lineWidth(M.lineWidth*T),M.vao.draw(Z.LINES,M.lineVertexCount,M.vertexCount));M.vao.unbind()}}if(Q===M.hasAlpha||
U)H.bind(),H=H.uniforms,H.model=N.model||z,H.view=N.view||z,H.projection=N.projection||z,y[0]=2/S.drawingBufferWidth,y[1]=2/S.drawingBufferHeight,H.screenSize=y,H.highlightId=M.highlightId,H.highlightScale=M.highlightScale,H.fragClipBounds=L,H.clipBounds=M.axes.bounds,H.opacity=M.opacity,H.pickGroup=M.pickId/255,H.pixelRatio=T,M.vao.bind(),M.vao.draw(S.TRIANGLES,M.vertexCount),0<M.lineWidth&&(S.lineWidth(M.lineWidth*T),M.vao.draw(S.LINES,M.lineVertexCount,M.vertexCount)),M.vao.unbind()}function c(H,
P,M,N){P=Array.isArray(H)?P<H.length?H[P]:void 0:H;P=C(P);H=!0;d(P)&&(P="\u25bc",H=!1);M=x(P,M,N);return{mesh:M[0],lines:M[1],bounds:M[2],visible:H}}var d=b("is-string-blank"),f=b("gl-buffer"),k=b("gl-vao"),r=b("typedarray-pool"),u=b("gl-mat4/multiply"),v=b("./lib/shaders"),x=b("./lib/glyphs"),C=b("./lib/get-simple-string"),z=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];K.exports=function(H){var P=H.gl,M=v.createPerspective(P),N=v.createOrtho(P),T=v.createProject(P),Q=v.createPickPerspective(P),U=v.createPickOrtho(P),
S=v.createPickProject(P),X=f(P),Z=f(P),aa=f(P),fa=f(P),ha=k(P,[{buffer:X,size:3,type:P.FLOAT},{buffer:Z,size:4,type:P.FLOAT},{buffer:aa,size:2,type:P.FLOAT},{buffer:fa,size:4,type:P.UNSIGNED_BYTE,normalized:!0}]);P=new a(P,M,N,T,X,Z,aa,fa,ha,Q,U,S);P.update(H);return P};b=a.prototype;b.pickSlots=1;b.setPickBase=function(H){this.pickId=H};b.isTransparent=function(){if(this.hasAlpha)return!0;for(var H=0;3>H;++H)if(this.axesProject[H]&&this.projectHasAlpha)return!0;return!1};b.isOpaque=function(){if(!this.hasAlpha)return!0;
for(var H=0;3>H;++H)if(this.axesProject[H]&&!this.projectHasAlpha)return!0;return!1};var y=[0,0],D=[0,0,0],A=[0,0,0],t=[0,0,0,1],B=[0,0,0,1],F=z.slice(),I=[0,0,0],J=[[0,0,0],[0,0,0]],L=[[-1E8,-1E8,-1E8],[1E8,1E8,1E8]];b.draw=function(H){p(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,H,this.pixelRatio,!1,!1)};b.drawTransparent=function(H){p(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,H,this.pixelRatio,!0,!1)};b.drawPick=function(H){p(this.useOrtho?this.pickOrthoShader:
this.pickPerspectiveShader,this.pickProjectShader,this,H,1,!0,!0)};b.pick=function(H){if(!H||H.id!==this.pickId)return null;var P=H.value[2]+(H.value[1]<<8)+(H.value[0]<<16);if(P>=this.pointCount||0>P)return null;H=this.points[P];var M=this._selectResult;M.index=P;for(P=0;3>P;++P)M.position[P]=M.dataCoordinate[P]=H[P];return M};b.highlight=function(H){H?(H=H.index,this.highlightId=[(H&255)/255,(H>>8&255)/255,(H>>16&255)/255,0]):this.highlightId=[1,1,1,1]};b.update=function(H){H=H||{};"perspective"in
H&&(this.useOrtho=!H.perspective);"orthographic"in H&&(this.useOrtho=!!H.orthographic);"lineWidth"in H&&(this.lineWidth=H.lineWidth);if("project"in H)if(Array.isArray(H.project))this.axesProject=H.project;else{var P=!!H.project;this.axesProject=[P,P,P]}"projectScale"in H&&(Array.isArray(H.projectScale)?this.projectScale=H.projectScale.slice():(P=+H.projectScale,this.projectScale=[P,P,P]));this.projectHasAlpha=!1;if("projectOpacity"in H){Array.isArray(H.projectOpacity)?this.projectOpacity=H.projectOpacity.slice():
(P=+H.projectOpacity,this.projectOpacity=[P,P,P]);for(var M=0;3>M;++M)this.projectOpacity[M]=h(this.projectOpacity[M]),1>this.projectOpacity[M]&&(this.projectHasAlpha=!0)}this.hasAlpha=!1;"opacity"in H&&(this.opacity=h(H.opacity),1>this.opacity&&(this.hasAlpha=!0));this.dirty=!0;P=H.position;var N=H.font||"normal",T=H.alignment||[0,0];if(2===T.length){var Q=T[0];var U=T[1]}else for(Q=[],U=[],M=0;M<T.length;++M)Q[M]=T[M][0],U[M]=T[M][1];T=[Infinity,Infinity,Infinity];var S=[-Infinity,-Infinity,-Infinity],
X=H.glyph,Z=H.color,aa=H.size,fa=H.angle;H=H.lineColor;var ha=-1,ja=0,ba=0,ma=0;if(P.length)a:for(ma=P.length,M=0;M<ma;++M){for(var qa=P[M],ka=0;3>ka;++ka)if(isNaN(qa[ka])||!isFinite(qa[ka]))continue a;var oa=c(X,M,N,this.pixelRatio),na=oa.mesh,la=oa.lines;ja+=3*na.cells.length;ba+=2*la.edges.length}M=ja+ba;var ia=r.mallocFloat(3*M),sa=r.mallocFloat(4*M),ta=r.mallocFloat(2*M),Aa=r.mallocUint32(M);if(0<M){var Ka=0,Sa=ja,db=[0,0,0,1],eb=[0,0,0,1],lb=Array.isArray(Z)&&Array.isArray(Z[0]),ab=Array.isArray(H)&&
Array.isArray(H[0]);M=0;a:for(;M<ma;++M){ha+=1;qa=P[M];for(ka=0;3>ka;++ka){if(isNaN(qa[ka])||!isFinite(qa[ka]))continue a;S[ka]=Math.max(S[ka],qa[ka]);T[ka]=Math.min(T[ka],qa[ka])}oa=c(X,M,N,this.pixelRatio);na=oa.mesh;la=oa.lines;var Ya=oa.bounds;var hb=oa.visible;if(hb)if(Array.isArray(Z))if(oa=lb?M<Z.length?Z[M]:[0,0,0,0]:Z,3===oa.length){for(ka=0;3>ka;++ka)db[ka]=oa[ka];db[3]=1}else{if(4===oa.length){for(ka=0;4>ka;++ka)db[ka]=oa[ka];!this.hasAlpha&&1>oa[3]&&(this.hasAlpha=!0)}}else db[0]=db[1]=
db[2]=0,db[3]=1;else db=[1,1,1,0];if(hb)if(Array.isArray(H))if(oa=ab?M<H.length?H[M]:[0,0,0,0]:H,3===oa.length){for(ka=0;3>ka;++ka)eb[ka]=oa[ka];eb[ka]=1}else{if(4===oa.length){for(ka=0;4>ka;++ka)eb[ka]=oa[ka];!this.hasAlpha&&1>oa[3]&&(this.hasAlpha=!0)}}else eb[0]=eb[1]=eb[2]=0,eb[3]=1;else eb=[1,1,1,0];oa=.5;hb?Array.isArray(aa)?oa=M<aa.length?+aa[M]:12:aa?oa=+aa:this.useOrtho&&(oa=12):oa=0;qa=0;Array.isArray(fa)?qa=M<fa.length?+fa[M]:0:fa&&(qa=+fa);hb=Math.cos(qa);var nb=Math.sin(qa);qa=P[M];for(ka=
0;3>ka;++ka)S[ka]=Math.max(S[ka],qa[ka]),T[ka]=Math.min(T[ka],qa[ka]);ka=0;Array.isArray(Q)?ka=M<Q.length?Q[M]:0:Q&&(ka=Q);var va=0;Array.isArray(U)?va=M<U.length?U[M]:0:U&&(va=U);ka*=0<ka?1-Ya[0][0]:0>ka?1+Ya[1][0]:1;va*=0<va?1-Ya[0][1]:0>va?1+Ya[1][1]:1;Ya=[ka,va];va=na.cells||[];na=na.positions||[];for(ka=0;ka<va.length;++ka)for(var Ba=va[ka],Ga=0;3>Ga;++Ga){for(var Na=0;3>Na;++Na)ia[3*Ka+Na]=qa[Na];for(Na=0;4>Na;++Na)sa[4*Ka+Na]=db[Na];Aa[Ka]=ha;Na=na[Ba[Ga]];ta[2*Ka]=oa*(hb*Na[0]-nb*Na[1]+Ya[0]);
ta[2*Ka+1]=oa*(nb*Na[0]+hb*Na[1]+Ya[1]);Ka+=1}va=la.edges;na=la.positions;for(ka=0;ka<va.length;++ka)for(Ba=va[ka],Ga=0;2>Ga;++Ga){for(Na=0;3>Na;++Na)ia[3*Sa+Na]=qa[Na];for(Na=0;4>Na;++Na)sa[4*Sa+Na]=eb[Na];Aa[Sa]=ha;Na=na[Ba[Ga]];ta[2*Sa]=oa*(hb*Na[0]-nb*Na[1]+Ya[0]);ta[2*Sa+1]=oa*(nb*Na[0]+hb*Na[1]+Ya[1]);Sa+=1}}}this.bounds=[T,S];this.points=P;this.pointCount=P.length;this.vertexCount=ja;this.lineVertexCount=ba;this.pointBuffer.update(ia);this.colorBuffer.update(sa);this.glyphBuffer.update(ta);
this.idBuffer.update(Aa);r.free(ia);r.free(sa);r.free(ta);r.free(Aa)};b.dispose=function(){this.shader.dispose();this.orthoShader.dispose();this.pickPerspectiveShader.dispose();this.pickOrthoShader.dispose();this.vao.dispose();this.pointBuffer.dispose();this.colorBuffer.dispose();this.glyphBuffer.dispose();this.idBuffer.dispose()}},{"./lib/get-simple-string":326,"./lib/glyphs":327,"./lib/shaders":328,"gl-buffer":259,"gl-mat4/multiply":295,"gl-vao":358,"is-string-blank":470,"typedarray-pool":595}],
331:[function(b,K,G){b=b("glslify");G.boxVertex=b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 vertex;\n\nuniform vec2 cornerA, cornerB;\n\nvoid main() {\n  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);\n}\n"]);G.boxFragment=b(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor = color;\n}\n"])},{glslify:332}],332:[function(b,K,G){arguments[4][257][0].apply(G,arguments)},{dup:257}],333:[function(b,K,G){function q(a,g,
e){this.plot=a;this.boxBuffer=g;this.boxShader=e;this.enabled=!0;this.selectBox=[Infinity,Infinity,-Infinity,-Infinity];this.borderColor=[0,0,0,1];this.innerFill=!1;this.innerColor=[0,0,0,.25];this.outerFill=!0;this.outerColor=[0,0,0,.5];this.borderWidth=10}var m=b("gl-shader"),l=b("gl-buffer"),h=b("./lib/shaders");K.exports=function(a,g){var e=a.gl,n=l(e,[0,0,0,1,1,0,1,1]);e=m(e,h.boxVertex,h.boxFragment);n=new q(a,n,e);n.update(g);a.addOverlay(n);return n};b=q.prototype;b.draw=function(){if(this.enabled){var a=
this.plot,g=this.selectBox,e=this.borderWidth,n=this.innerColor,p=this.outerColor,c=this.borderColor,d=a.box,f=a.screenBox,k=a.dataBox,r=a.viewBox,u=a.pixelRatio;a=(g[0]-k[0])*(r[2]-r[0])/(k[2]-k[0])+r[0];var v=(g[1]-k[1])*(r[3]-r[1])/(k[3]-k[1])+r[1],x=(g[2]-k[0])*(r[2]-r[0])/(k[2]-k[0])+r[0];g=(g[3]-k[1])*(r[3]-r[1])/(k[3]-k[1])+r[1];a=Math.max(a,r[0]);v=Math.max(v,r[1]);x=Math.min(x,r[2]);g=Math.min(g,r[3]);x<a||g<v||(d.bind(),r=f[2]-f[0],f=f[3]-f[1],this.outerFill&&(d.drawBox(0,0,r,v,p),d.drawBox(0,
v,a,g,p),d.drawBox(0,g,r,f,p),d.drawBox(x,v,r,g,p)),this.innerFill&&d.drawBox(a,v,x,g,n),0<e&&(e*=u,d.drawBox(a-e,v-e,x+e,v+e,c),d.drawBox(a-e,g-e,x+e,g+e,c),d.drawBox(a-e,v-e,a+e,g+e,c),d.drawBox(x-e,v-e,x+e,g+e,c)))}};b.update=function(a){a=a||{};this.innerFill=!!a.innerFill;this.outerFill=!!a.outerFill;this.innerColor=(a.innerColor||[0,0,0,.5]).slice();this.outerColor=(a.outerColor||[0,0,0,.5]).slice();this.borderColor=(a.borderColor||[0,0,0,1]).slice();this.borderWidth=a.borderWidth||0;this.selectBox=
(a.selectBox||this.selectBox).slice()};b.dispose=function(){this.boxBuffer.dispose();this.boxShader.dispose();this.plot.removeOverlay(this)}},{"./lib/shaders":331,"gl-buffer":259,"gl-shader":335}],334:[function(b,K,G){function q(e,n,p,c,d){this.coord=[e,n];this.id=p;this.value=c;this.distance=d}function m(e,n,p){this.gl=e;this.fbo=n;this.buffer=p;this._readTimeout=null;var c=this;this._readCallback=function(){c.gl&&(n.bind(),e.readPixels(0,0,n.shape[0],n.shape[1],e.RGBA,e.UNSIGNED_BYTE,c.buffer),
c._readTimeout=null)}}K.exports=function(e,n){var p=n[0],c=n[1];n=l(e,p,c,{});p=h.mallocUint8(p*c*4);return new m(e,n,p)};var l=b("gl-fbo"),h=b("typedarray-pool"),a=b("ndarray"),g=b("bit-twiddle").nextPow2;b=m.prototype;Object.defineProperty(b,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(e){if(this.gl){this.fbo.shape=e;var n=this.fbo.shape[0],p=this.fbo.shape[1];if(p*n*4>this.buffer.length){h.free(this.buffer);for(var c=this.buffer=h.mallocUint8(g(p*n*4)),d=0;d<
p*n*4;++d)c[d]=255}return e}}});b.begin=function(){var e=this.gl;e&&(this.fbo.bind(),e.clearColor(1,1,1,1),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT))};b.end=function(){var e=this.gl;e&&(e.bindFramebuffer(e.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))};b.query=function(e,n,p){if(!this.gl)return null;var c=this.fbo.shape.slice();e|=0;n|=0;"number"!==typeof p&&(p=1);var d=Math.min(Math.max(e-p,0),c[0])|0,f=Math.min(Math.max(e+
p,0),c[0])|0;e=Math.min(Math.max(n-p,0),c[1])|0;n=Math.min(Math.max(n+p,0),c[1])|0;if(f<=d||n<=e)return null;n=[f-d,n-e];c=a(this.buffer,[n[0],n[1],4],[4,4*c[0],1],4*(d+c[0]*e));n=c.hi(n[0],n[1],1);f=p;for(var k=1E8,r=-1,u=-1,v=n.shape[0],x=n.shape[1],C=0;C<v;C++)for(var z=0;z<x;z++){var y=n.get(C,z,0),D=n.get(C,z,1),A=n.get(C,z,2),t=n.get(C,z,3);if(255>y||255>D||255>A||255>t)y=f-C,D=p-z,y=y*y+D*D,y<k&&(k=y,r=C,u=z)}n=[r,u,k];f=n[0];p=n[1];if(0>f||Math.pow(this.radius,2)<n[2])return null;k=c.get(f,
p,0);r=c.get(f,p,1);u=c.get(f,p,2);c=c.get(f,p,3);return new q(f+d|0,p+e|0,k,[r,u,c],Math.sqrt(n[2]))};b.dispose=function(){this.gl&&(this.fbo.dispose(),h.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},{"bit-twiddle":97,"gl-fbo":269,ndarray:495,"typedarray-pool":595}],335:[function(b,K,G){function q(p){this.gl=p;this.gl.lastAttribCount=0;this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}
function m(p,c){return p.name<c.name?-1:1}var l=b("./lib/create-uniforms"),h=b("./lib/create-attributes"),a=b("./lib/reflect"),g=b("./lib/shader-cache"),e=b("./lib/runtime-reflect"),n=b("./lib/GLError");b=q.prototype;b.bind=function(){this.program||this._relink();var p,c=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),d=this.gl.lastAttribCount;if(c>d)for(p=d;p<c;p++)this.gl.enableVertexAttribArray(p);else if(d>c)for(p=c;p<d;p++)this.gl.disableVertexAttribArray(p);this.gl.lastAttribCount=
c;this.gl.useProgram(this.program)};b.dispose=function(){for(var p=this.gl.lastAttribCount,c=0;c<p;c++)this.gl.disableVertexAttribArray(c);this.gl.lastAttribCount=0;this._fref&&this._fref.dispose();this._vref&&this._vref.dispose();this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null};b.update=function(p,c,d,f){function k(){u.program=g.program(v,u._vref,u._fref,x,C);for(var F=0;F<d.length;++F)B[F]=v.getUniformLocation(u.program,d[F].name)}
if(!c||1===arguments.length){var r=p;p=r.vertex;c=r.fragment;d=r.uniforms;f=r.attributes}var u=this,v=u.gl;r=u._vref;u._vref=g.shader(v,v.VERTEX_SHADER,p);r&&r.dispose();u.vertShader=u._vref.shader;r=this._fref;u._fref=g.shader(v,v.FRAGMENT_SHADER,c);r&&r.dispose();u.fragShader=u._fref.shader;if(!d||!f){r=v.createProgram();v.attachShader(r,u.fragShader);v.attachShader(r,u.vertShader);v.linkProgram(r);if(!v.getProgramParameter(r,v.LINK_STATUS))throw r=v.getProgramInfoLog(r),new n(r,"Error linking program:"+
r);d=d||e.uniforms(v,r);f=f||e.attributes(v,r);v.deleteProgram(r)}f=f.slice();f.sort(m);r=[];var x=[],C=[],z;for(z=0;z<f.length;++z){var y=f[z];if(0<=y.type.indexOf("mat")){for(var D=y.type.charAt(y.type.length-1)|0,A=Array(D),t=0;t<D;++t)A[t]=C.length,x.push(y.name+"["+t+"]"),"number"===typeof y.location?C.push(y.location+t):Array.isArray(y.location)&&y.location.length===D&&"number"===typeof y.location[t]?C.push(y.location[t]|0):C.push(-1);r.push({name:y.name,type:y.type,locations:A})}else r.push({name:y.name,
type:y.type,locations:[C.length]}),x.push(y.name),"number"===typeof y.location?C.push(y.location|0):C.push(-1)}for(z=y=0;z<C.length;++z)if(0>C[z]){for(;0<=C.indexOf(y);)y+=1;C[z]=y}var B=Array(d.length);k();u._relink=k;u.types={uniforms:a(d),attributes:a(f)};u.attributes=h(v,u,r,C);Object.defineProperty(u,"uniforms",l(v,u,d,B))};K.exports=function(p,c,d,f,k){p=new q(p);p.update(c,d,f,k);return p}},{"./lib/GLError":336,"./lib/create-attributes":337,"./lib/create-uniforms":338,"./lib/reflect":339,"./lib/runtime-reflect":340,
"./lib/shader-cache":341}],336:[function(b,K,G){function q(m,l,h){this.shortMessage=l||"";this.longMessage=h||"";this.rawError=m||"";this.message="gl-shader: "+(l||m||"")+(h?"\n"+h:"");this.stack=Error().stack}q.prototype=Error();q.prototype.name="GLError";q.prototype.constructor=q;K.exports=q},{}],337:[function(b,K,G){function q(a,g,e,n,p,c){this._gl=a;this._wrapper=g;this._index=e;this._locations=n;this._dimension=p;this._constFunc=c}function m(a,g,e,n,p,c,d){for(var f=["gl","v"],k=[],r=0;r<p;++r)f.push("x"+
r),k.push("x"+r);f.push("if(x0.length===void 0){return gl.vertexAttrib"+p+"f(v,"+k.join()+")}else{return gl.vertexAttrib"+p+"fv(v,x0)}");var u=Function.apply(null,f),v=new q(a,g,e,n,p,u);Object.defineProperty(c,d,{set:function(x){a.disableVertexAttribArray(n[e]);u(a,n[e],x);return x},get:function(){return v},enumerable:!0})}function l(a,g,e,n,p,c,d){for(var f=Array(p),k=Array(p),r=0;r<p;++r)m(a,g,e[r],n,p,f,r),k[r]=f[r];Object.defineProperty(f,"location",{set:function(x){if(Array.isArray(x))for(var C=
0;C<p;++C)k[C].location=x[C];else for(C=0;C<p;++C)k[C].location=x+C;return x},get:function(){for(var x=Array(p),C=0;C<p;++C)x[C]=n[e[C]];return x},enumerable:!0});f.pointer=function(x,C,z,y){x=x||a.FLOAT;C=!!C;z=z||p*p;y=y||0;for(var D=0;D<p;++D){var A=n[e[D]];a.vertexAttribPointer(A,p,x,C,z,y+D*p);a.enableVertexAttribArray(A)}};var u=Array(p),v=a["vertexAttrib"+p+"fv"];Object.defineProperty(c,d,{set:function(x){for(var C=0;C<p;++C){var z=n[e[C]];a.disableVertexAttribArray(z);if(Array.isArray(x[0]))v.call(a,
z,x[C]);else{for(var y=0;y<p;++y)u[y]=x[p*C+y];v.call(a,z,u)}}return x},get:function(){return f},enumerable:!0})}K.exports=function(a,g,e,n){for(var p={},c=0,d=e.length;c<d;++c){var f=e[c],k=f.name,r=f.type;f=f.locations;switch(r){case "bool":case "int":case "float":m(a,g,f[0],n,1,p,k);break;default:if(0<=r.indexOf("vec")){var u=r.charCodeAt(r.length-1)-48;if(2>u||4<u)throw new h("","Invalid data type for attribute "+k+": "+r);m(a,g,f[0],n,u,p,k)}else if(0<=r.indexOf("mat")){u=r.charCodeAt(r.length-
1)-48;if(2>u||4<u)throw new h("","Invalid data type for attribute "+k+": "+r);l(a,g,f,n,u,p,k)}else throw new h("","Unknown data type for attribute "+k+": "+r);}}return p};var h=b("./GLError");b=q.prototype;b.pointer=function(a,g,e,n){var p=this._gl,c=this._locations[this._index];p.vertexAttribPointer(c,this._dimension,a||p.FLOAT,!!g,e||0,n||0);p.enableVertexAttribArray(c)};b.set=function(a,g,e,n){return this._constFunc(this._locations[this._index],a,g,e,n)};Object.defineProperty(b,"location",{get:function(){return this._locations[this._index]},
set:function(a){a!==this._locations[this._index]&&(this._locations[this._index]=a|0,this._wrapper.program=null);return a|0}})},{"./GLError":336}],338:[function(b,K,G){function q(a){return(new Function("y","return function(){return y}"))(a)}function m(a,g){for(var e=Array(a),n=0;n<a;++n)e[n]=g;return e}var l=b("./reflect"),h=b("./GLError");K.exports=function(a,g,e,n){function p(v,x,C){switch(C){case "bool":case "int":case "sampler2D":case "samplerCube":return"gl.uniform1i(locations["+x+"],obj"+v+")";
case "float":return"gl.uniform1f(locations["+x+"],obj"+v+")";default:var z=C.indexOf("vec");if(0<=z&&1>=z&&C.length===4+z){z=C.charCodeAt(C.length-1)-48;if(2>z||4<z)throw new h("","Invalid data type");switch(C.charAt(0)){case "b":case "i":return"gl.uniform"+z+"iv(locations["+x+"],obj"+v+")";case "v":return"gl.uniform"+z+"fv(locations["+x+"],obj"+v+")";default:throw new h("","Unrecognized data type for vector "+v+": "+C);}}else{if(0===C.indexOf("mat")&&4===C.length){z=C.charCodeAt(C.length-1)-48;if(2>
z||4<z)throw new h("","Invalid uniform dimension type for matrix "+v+": "+C);return"gl.uniformMatrix"+z+"fv(locations["+x+"],false,obj"+v+")"}throw new h("","Unknown uniform data type for "+v+": "+C);}}}function c(v,x){if("object"!==typeof x)return[[v,x]];var C=[],z;for(z in x){var y=x[z],D=v;D=parseInt(z)+""===z?D+("["+z+"]"):D+("."+z);"object"===typeof y?C.push.apply(C,c(D,y)):C.push([D,y])}return C}function d(v){var x=["return function updateProperty(obj){"];v=c("",v);for(var C=0;C<v.length;++C){var z=
v[C],y=z[0];z=z[1];n[z]&&x.push(p(y,z,e[z].type))}x.push("return obj}");return(new Function("gl","locations",x.join("\n")))(a,n)}function f(v){switch(v){case "bool":return!1;case "int":case "sampler2D":case "samplerCube":return 0;case "float":return 0;default:var x=v.indexOf("vec");if(0<=x&&1>=x&&v.length===4+x){x=v.charCodeAt(v.length-1)-48;if(2>x||4<x)throw new h("","Invalid data type");return"b"===v.charAt(0)?m(x,!1):m(x,0)}if(0===v.indexOf("mat")&&4===v.length){x=v.charCodeAt(v.length-1)-48;if(2>
x||4<x)throw new h("","Invalid uniform dimension type for matrix : "+v);return m(x*x,0)}throw new h("","Unknown uniform data type for : "+v);}}function k(v,x,C){if("object"===typeof C){var z=r(C);Object.defineProperty(v,x,{get:q(z),set:d(C),enumerable:!0,configurable:!1})}else if(n[C]){z=Object;var y=z.defineProperty;var D=(new Function("gl","wrapper","locations","return function(){return gl.getUniform(wrapper.program,locations["+C+"])}"))(a,g,n);y.call(z,v,x,{get:D,set:d(C),enumerable:!0,configurable:!1})}else v[x]=
f(e[C].type)}function r(v){if(Array.isArray(v)){var x=Array(v.length);for(var C=0;C<v.length;++C)k(x,C,v[C])}else for(C in x={},v)k(x,C,v[C]);return x}var u=l(e,!0);return{get:q(r(u)),set:d(u),enumerable:!0,configurable:!0}}},{"./GLError":336,"./reflect":339}],339:[function(b,K,G){K.exports=function(q,m){for(var l={},h=0;h<q.length;++h)for(var a=q[h].name.split("."),g=l,e=0;e<a.length;++e){var n=a[e].split("[");if(1<n.length){n[0]in g||(g[n[0]]=[]);g=g[n[0]];for(var p=1;p<n.length;++p){var c=parseInt(n[p]);
p<n.length-1||e<a.length-1?(c in g||(g[c]=p<n.length-1?[]:{}),g=g[c]):g[c]=m?h:q[h].type}}else e<a.length-1?(n[0]in g||(g[n[0]]={}),g=g[n[0]]):g[n[0]]=m?h:q[h].type}return l}},{}],340:[function(b,K,G){function q(h,a){if(!l){var g=Object.keys(m);l={};for(var e=0;e<g.length;++e){var n=g[e];l[h[n]]=m[n]}}return l[a]}G.uniforms=function(h,a){for(var g=h.getProgramParameter(a,h.ACTIVE_UNIFORMS),e=[],n=0;n<g;++n){var p=h.getActiveUniform(a,n);if(p){var c=q(h,p.type);if(1<p.size)for(var d=0;d<p.size;++d)e.push({name:p.name.replace("[0]",
"["+d+"]"),type:c});else e.push({name:p.name,type:c})}}return e};G.attributes=function(h,a){for(var g=h.getProgramParameter(a,h.ACTIVE_ATTRIBUTES),e=[],n=0;n<g;++n){var p=h.getActiveAttrib(a,n);p&&e.push({name:p.name,type:q(h,p.type)})}return e};var m={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",
SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},l=null},{}],341:[function(b,K,G){function q(n,p,c,d,f,k,r){this.id=n;this.src=p;this.type=c;this.shader=d;this.count=k;this.programs=[];this.cache=r}function m(n){this.gl=n;this.shaders=[{},{}];this.programs={}}function l(n){var p=g.get(n);p||(p=new m(n),g.set(n,p));return p}G.shader=function(n,p,c){return l(n).getShaderReference(p,c)};G.program=function(n,p,c,d,f){return l(n).getProgram(p,c,d,f)};var h=b("./GLError"),a=b("gl-format-compiler-error"),
g=new ("undefined"===typeof WeakMap?b("weakmap-shim"):WeakMap),e=0;q.prototype.dispose=function(){if(0===--this.count){for(var n=this.cache,p=n.gl,c=this.programs,d=0,f=c.length;d<f;++d){var k=n.programs[c[d]];k&&(delete n.programs[d],p.deleteProgram(k))}p.deleteShader(this.shader);delete n.shaders[this.type===p.FRAGMENT_SHADER|0][this.src]}};b=m.prototype;b.getShaderReference=function(n,p){var c=this.gl,d=this.shaders[n===c.FRAGMENT_SHADER|0],f=d[p];if(f&&c.isShader(f.shader))f.count+=1;else{f=c.createShader(n);
c.shaderSource(f,p);c.compileShader(f);if(!c.getShaderParameter(f,c.COMPILE_STATUS)){c=c.getShaderInfoLog(f);try{var k=a(c,p,n)}catch(r){throw console.warn("Failed to format compiler error: "+r),new h(c,"Error compiling shader:\n"+c);}throw new h(c,k.short,k.long);}f=d[p]=new q(e++,p,n,f,[],1,this)}return f};b.getProgram=function(n,p,c,d){var f=[n.id,p.id,c.join(":"),d.join(":")].join("@"),k=this.programs[f];if(!k||!this.gl.isProgram(k)){k=this.programs;var r=this.gl,u=n.shader,v=p.shader,x=r.createProgram();
r.attachShader(x,u);r.attachShader(x,v);for(u=0;u<c.length;++u)r.bindAttribLocation(x,d[u],c[u]);r.linkProgram(x);if(!r.getProgramParameter(x,r.LINK_STATUS))throw n=r.getProgramInfoLog(x),new h(n,"Error linking program: "+n);k[f]=k=x;n.programs.push(f);p.programs.push(f)}return k}},{"./GLError":336,"gl-format-compiler-error":270,"weakmap-shim":605}],342:[function(b,K,G){function q(m){this.plot=m;this.enable=[!0,!0,!1,!1];this.width=[1,1,1,1];this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.center=
[Infinity,Infinity]}K.exports=function(m,l){var h=new q(m);h.update(l);m.addOverlay(h);return h};b=q.prototype;b.update=function(m){m=m||{};this.enable=(m.enable||[!0,!0,!1,!1]).slice();this.width=(m.width||[1,1,1,1]).slice();this.color=(m.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(l){return l.slice()});this.center=(m.center||[Infinity,Infinity]).slice();this.plot.setOverlayDirty()};b.draw=function(){var m=this.enable,l=this.width,h=this.color,a=this.center,g=this.plot,e=g.line,
n=g.dataBox;g=g.viewBox;e.bind();if(n[0]<=a[0]&&a[0]<=n[2]&&n[1]<=a[1]&&a[1]<=n[3]){var p=g[0]+(a[0]-n[0])/(n[2]-n[0])*(g[2]-g[0]);a=g[1]+(a[1]-n[1])/(n[3]-n[1])*(g[3]-g[1]);m[0]&&e.drawLine(p,a,g[0],a,l[0],h[0]);m[1]&&e.drawLine(p,a,p,g[1],l[1],h[1]);m[2]&&e.drawLine(p,a,g[2],a,l[2],h[2]);m[3]&&e.drawLine(p,a,p,g[3],l[3],h[3])}};b.dispose=function(){this.plot.removeOverlay(this)}},{}],343:[function(b,K,G){arguments[4][257][0].apply(G,arguments)},{dup:257}],344:[function(b,K,G){G=b("glslify");var q=
b("gl-shader"),m=G(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, color;\nattribute float weight;\n\nuniform mat4 model, view, projection;\nuniform vec3 coordinates[3];\nuniform vec4 colors[3];\nuniform vec2 screenShape;\nuniform float lineWidth;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vertexPosition = mix(coordinates[0],\n    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));\n\n  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);\n  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;\n  vec2 delta = weight * clipOffset * screenShape;\n  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;\n\n  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);\n  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];\n}\n"]),
l=G(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n  gl_FragColor = fragColor;\n}"]);K.exports=function(h){return q(h,m,l,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},{"gl-shader":335,glslify:343}],345:[function(b,K,G){function q(p,c,d,f){this.gl=p;this.buffer=c;this.vao=d;this.shader=f;this.pixelRatio=1;this.bounds=[[-1E3,-1E3,-1E3],[1E3,1E3,1E3]];this.position=[0,0,0];this.lineWidth=[2,2,2];this.colors=
[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.enabled=[!0,!0,!0];this.drawSides=[!0,!0,!0];this.axes=null}var m=b("gl-buffer"),l=b("gl-vao"),h=b("./shaders/index");K.exports=function(p,c){function d(v,x,C,z,y,D){v=[v,x,C,0,0,0,1];v[z+3]=1;v[z]=y;f.push.apply(f,v);v[6]=-1;f.push.apply(f,v);v[z]=D;f.push.apply(f,v);f.push.apply(f,v);v[6]=1;f.push.apply(f,v);v[z]=y;f.push.apply(f,v)}var f=[];d(0,0,0,0,0,1);d(0,0,0,1,0,1);d(0,0,0,2,0,1);d(1,0,0,1,-1,1);d(1,0,0,2,-1,1);d(0,1,0,0,-1,1);d(0,1,0,2,-1,1);d(0,0,1,0,
-1,1);d(0,0,1,1,-1,1);var k=m(p,f),r=l(p,[{type:p.FLOAT,buffer:k,size:3,offset:0,stride:28},{type:p.FLOAT,buffer:k,size:3,offset:12,stride:28},{type:p.FLOAT,buffer:k,size:1,offset:24,stride:28}]),u=h(p);u.attributes.position.location=0;u.attributes.color.location=1;u.attributes.weight.location=2;p=new q(p,k,r,u);p.update(c);return p};var a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];b=q.prototype;var g=[0,0,0],e=[0,0,0],n=[0,0];b.isTransparent=function(){return!1};b.drawTransparent=function(p){};b.draw=function(p){var c=
this.gl,d=this.vao,f=this.shader;d.bind();f.bind();var k=p.model||a,r=p.view||a;p=p.projection||a;if(this.axes)var u=this.axes.lastCubeProps.axis;for(var v=0;3>v;++v)u&&0>u[v]?(g[v]=this.bounds[0][v],e[v]=this.bounds[1][v]):(g[v]=this.bounds[1][v],e[v]=this.bounds[0][v]);n[0]=c.drawingBufferWidth;n[1]=c.drawingBufferHeight;f.uniforms.model=k;f.uniforms.view=r;f.uniforms.projection=p;f.uniforms.coordinates=[this.position,g,e];f.uniforms.colors=this.colors;f.uniforms.screenShape=n;for(v=0;3>v;++v)f.uniforms.lineWidth=
this.lineWidth[v]*this.pixelRatio,this.enabled[v]&&(d.draw(c.TRIANGLES,6,6*v),this.drawSides[v]&&d.draw(c.TRIANGLES,12,18+12*v));d.unbind()};b.update=function(p){p&&("bounds"in p&&(this.bounds=p.bounds),"position"in p&&(this.position=p.position),"lineWidth"in p&&(this.lineWidth=p.lineWidth),"colors"in p&&(this.colors=p.colors),"enabled"in p&&(this.enabled=p.enabled),"drawSides"in p&&(this.drawSides=p.drawSides))};b.dispose=function(){this.vao.dispose();this.buffer.dispose();this.shader.dispose()}},
{"./shaders/index":344,"gl-buffer":259,"gl-vao":358}],346:[function(b,K,G){var q=b("glslify");b=q(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, tubeScale;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * tubePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(tubePosition, 1.0);\n  vec4 t_position  = view * tubePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = tubePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]);
K=q(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]);
var m=q(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float tubeScale;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  gl_Position = projection * view * tubePosition;\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]);
q=q(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);
G.meshShader={vertex:b,fragment:K,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]};G.pickShader={vertex:m,fragment:q,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},{glslify:347}],347:[function(b,K,G){arguments[4][257][0].apply(G,arguments)},{dup:257}],348:[function(b,K,G){var q=b("gl-vec3"),m=b("gl-vec4"),l="xyz xzy yxz yzx zxy zyx".split(" "),h=function(d,f,k,r){for(var u=0,
v=0;v<d.length;v++)for(var x=d[v].velocities,C=0;C<x.length;C++)u=Math.max(u,q.length(x[C]));d=d.map(function(J){var L=u,H=J.points,P=J.velocities;J=J.divergences;var M=[],N=[],T=[],Q=[],U=[],S=[],X=0;m.create();for(var Z=m.create(),aa=0;aa<H.length;aa++){var fa=H[aa],ha=P[aa],ja=J[aa];0===k&&(ja=.05*r);var ba=q.length(ha)/L;var ma=m.create();q.copy(ma,ha);ma[3]=ja;for(ha=0;8>ha;ha++)U[ha]=[fa[0],fa[1],fa[2],ha];if(0<Q.length)for(ha=0;8>ha;ha++)fa=(ha+1)%8,M.push(Q[ha],U[ha],U[fa],U[fa],Q[fa],Q[ha]),
T.push(Z,ma,ma,ma,Z,Z),S.push(X,ba,ba,ba,X,X),fa=M.length,N.push([fa-6,fa-5,fa-4],[fa-3,fa-2,fa-1]);X=Q;Q=U;U=X;Z=ma;X=ba}return{positions:M,cells:N,vectors:T,vertexIntensity:S}});x=[];var z=[],y=[],D=[];for(v=0;v<d.length;v++){var A=d[v],t=x.length;x=x.concat(A.positions);y=y.concat(A.vectors);D=D.concat(A.vertexIntensity);for(C=0;C<A.cells.length;C++){var B=A.cells[C],F=[];z.push(F);for(var I=0;I<B.length;I++)F.push(B[I]+t)}}return{positions:x,cells:z,vectors:y,vertexIntensity:D,colormap:f}},a=
function(d,f){var k=d.length,r;for(r=0;r<k;r++){var u=d[r];if(u===f)break;else if(u>f)return r-1}return r},g=function(d,f,k){return d<f?f:d>k?k:d},e=function(d){var f=Infinity;d.sort(function(v,x){return v-x});for(var k=d.length,r=1;r<k;r++){var u=Math.abs(d[r]-d[r-1]);u<f&&(f=u)}return f},n=function(d){for(var f=[],k=[],r=[],u={},v={},x={},C=d.length,z=0;z<C;z++){var y=d[z],D=y[0],A=y[1];y=y[2];u[D]||(f.push(D),u[D]=!0);v[A]||(k.push(A),v[A]=!0);x[y]||(r.push(y),x[y]=!0)}d=e(f);k=e(k);r=e(r);r=Math.min(d,
k,r);return isFinite(r)?r:1};K.exports=function(d,f){var k=d.startingPositions,r=d.maxLength||1E3,u=d.tubeSize||1,v=d.absoluteTubeSize,x=d.gridFill||"+x+y+z",C,z,y;-1!==x.indexOf("-x")&&(C=!0);-1!==x.indexOf("-y")&&(z=!0);-1!==x.indexOf("-z")&&(y=!0);var D=l.indexOf(x.replace(/-/g,"").replace(/\+/g,""));var A=d.getVelocity||function(qa){var ka=d.vectors,oa=d.meshgrid;var na=qa[0];var la=qa[1],ia=qa[2];qa=oa[0].length;var sa=oa[1].length,ta=oa[2].length,Aa=a(oa[0],na),Ka=a(oa[1],la),Sa=a(oa[2],ia),
db=Aa+1,eb=Ka+1,lb=Sa+1;Aa=g(Aa,0,qa-1);db=g(db,0,qa-1);Ka=g(Ka,0,sa-1);eb=g(eb,0,sa-1);Sa=g(Sa,0,ta-1);lb=g(lb,0,ta-1);if(0>Aa||0>Ka||0>Sa||db>qa-1||eb>sa-1||lb>ta-1)na=q.create();else{var ab=oa[0][Aa],Ya=oa[1][Ka],hb=oa[2][Sa];na=(na-ab)/(oa[0][db]-ab);la=(la-Ya)/(oa[1][eb]-Ya);oa=(ia-hb)/(oa[2][lb]-hb);isFinite(na)||(na=.5);isFinite(la)||(la=.5);isFinite(oa)||(oa=.5);C&&(Aa=qa-1-Aa,db=qa-1-db);z&&(Ka=sa-1-Ka,eb=sa-1-eb);y&&(Sa=ta-1-Sa,lb=ta-1-lb);switch(D){case 5:Ka*=ta;eb*=ta;Aa=Aa*ta*sa;db=db*
ta*sa;break;case 4:Aa*=ta;db*=ta;Ka=Ka*ta*qa;eb=eb*ta*qa;break;case 3:Sa*=sa;lb*=sa;Aa=Aa*sa*ta;db=db*sa*ta;break;case 2:Aa*=sa;db*=sa;Sa=Sa*sa*qa;lb=lb*sa*qa;break;case 1:Sa*=qa;lb*=qa;Ka=Ka*qa*ta;eb=eb*qa*ta;break;default:Ka*=qa,eb*=qa,Sa=Sa*qa*sa,lb=lb*qa*sa}qa=ka[Aa+Ka+Sa];sa=ka[Aa+Ka+lb];ta=ka[Aa+eb+Sa];Aa=ka[Aa+eb+lb];ia=ka[db+Ka+Sa];Ka=ka[db+Ka+lb];Sa=ka[db+eb+Sa];hb=ka[db+eb+lb];ka=q.create();db=q.create();eb=q.create();lb=q.create();q.lerp(ka,qa,ia,na);q.lerp(db,sa,Ka,na);q.lerp(eb,ta,Sa,
na);q.lerp(lb,Aa,hb,na);na=q.create();qa=q.create();q.lerp(na,ka,eb,la);q.lerp(qa,db,lb,la);la=q.create();q.lerp(la,na,qa,oa);na=la}return na};x=d.getDivergence||function(qa,ka){var oa=q.create();q.add(oa,qa,[1E-4,0,0]);var na=A(oa);q.subtract(na,na,ka);q.scale(na,na,1E4);q.add(oa,qa,[0,1E-4,0]);var la=A(oa);q.subtract(la,la,ka);q.scale(la,la,1E4);q.add(oa,qa,[0,0,1E-4]);qa=A(oa);q.subtract(qa,qa,ka);q.scale(qa,qa,1E4);q.add(oa,na,la);q.add(oa,oa,qa);return oa};var t=[],B=f[0][0],F=f[0][1],I=f[0][2],
J=f[1][0],L=f[1][1],H=f[1][2],P=function(qa){var ka=qa[0],oa=qa[1];qa=qa[2];return!(ka<B||ka>J||oa<F||oa>L||qa<I||qa>H)},M=10*q.distance(f[0],f[1])/r,N=M*M;f=1;var T=0,Q=k.length;1<Q&&(f=n(k));for(var U=0;U<Q;U++){var S=q.create();q.copy(S,k[U]);var X=[S],Z=[],aa=A(S),fa=S;Z.push(aa);var ha=[],ja=x(S,aa);ja=q.length(ja);isFinite(ja)&&ja>T&&(T=ja);ha.push(ja);t.push({points:X,velocities:Z,divergences:ha});for(var ba=0;ba<100*r&&X.length<r&&P(S);){ba++;var ma=q.clone(aa);aa=q.squaredLength(ma);if(0===
aa)break;else aa>N&&q.scale(ma,ma,M/Math.sqrt(aa));q.add(ma,ma,S);aa=A(ma);q.squaredDistance(fa,ma)-N>-1E-4*N&&(X.push(ma),fa=ma,Z.push(aa),ja=x(ma,aa),ja=q.length(ja),isFinite(ja)&&ja>T&&(T=ja),ha.push(ja));S=ma}}k=h(t,d.colormap,T,f);v?k.tubeScale=v:(0===T&&(T=1),k.tubeScale=.5*u*f/T);return k};var p=b("./lib/shaders"),c=b("gl-cone3d").createMesh;K.exports.createTubeMesh=function(d,f){return c(d,f,{shaders:p,traceType:"streamtube"})}},{"./lib/shaders":346,"gl-cone3d":260,"gl-vec3":377,"gl-vec4":413}],
349:[function(b,K,G){var q=b("gl-shader");b=b("glslify");var m=b(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute vec3 f;\nattribute vec3 normal;\n\nuniform vec3 objectOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 lightPosition, eyePosition;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 localCoordinate = vec3(uv.zw, f.x);\n  worldCoordinate = objectOffset + localCoordinate;\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n  vec4 clipPosition = projection * view * worldPosition;\n  gl_Position = clipPosition;\n  kill = f.y;\n  value = f.z;\n  planeCoordinate = uv.xy;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * worldPosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  lightDirection = lightPosition - cameraCoordinate.xyz;\n  eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);\n}\n"]),
l=b(["precision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat beckmannSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness) {\n  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 lowerBound, upperBound;\nuniform float contourTint;\nuniform vec4 contourColor;\nuniform sampler2D colormap;\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform float vertexColor;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  if (\n    kill > 0.0 ||\n    vColor.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)\n  ) discard;\n\n  vec3 N = normalize(surfaceNormal);\n  vec3 V = normalize(eyeDirection);\n  vec3 L = normalize(lightDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  //decide how to interpolate color \u2014 in vertex or in fragment\n  vec4 surfaceColor =\n    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +\n    step(.5, vertexColor) * vColor;\n\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;\n}\n"]),
h=b(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute float f;\n\nuniform vec3 objectOffset;\nuniform mat3 permutation;\nuniform mat4 model, view, projection;\nuniform float height, zOffset;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 dataCoordinate = permutation * vec3(uv.xy, height);\n  worldCoordinate = objectOffset + dataCoordinate;\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n\n  vec4 clipPosition = projection * view * worldPosition;\n  clipPosition.z += zOffset;\n\n  gl_Position = clipPosition;\n  value = f + objectOffset.z;\n  kill = -1.0;\n  planeCoordinate = uv.zw;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Don't do lighting for contours\n  surfaceNormal   = vec3(1,0,0);\n  eyeDirection    = vec3(0,1,0);\n  lightDirection  = vec3(0,0,1);\n}\n"]),
a=b(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec2 shape;\nuniform vec3 clipBounds[2];\nuniform float pickId;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 surfaceNormal;\n\nvec2 splitFloat(float v) {\n  float vh = 255.0 * v;\n  float upper = floor(vh);\n  float lower = fract(vh);\n  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);\n}\n\nvoid main() {\n  if ((kill > 0.0) ||\n      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;\n\n  vec2 ux = splitFloat(planeCoordinate.x / shape.x);\n  vec2 uy = splitFloat(planeCoordinate.y / shape.y);\n  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));\n}\n"]);
G.createShader=function(g){g=q(g,m,l,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);g.attributes.uv.location=0;g.attributes.f.location=1;g.attributes.normal.location=2;return g};G.createPickShader=function(g){g=q(g,m,a,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);g.attributes.uv.location=0;g.attributes.f.location=1;g.attributes.normal.location=2;return g};G.createContourShader=function(g){g=q(g,h,l,null,[{name:"uv",type:"vec4"},
{name:"f",type:"float"}]);g.attributes.uv.location=0;g.attributes.f.location=1;return g};G.createPickContourShader=function(g){g=q(g,h,a,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);g.attributes.uv.location=0;g.attributes.f.location=1;return g}},{"gl-shader":335,glslify:350}],350:[function(b,K,G){arguments[4][257][0].apply(G,arguments)},{dup:257}],351:[function(b,K,G){function q(Z,aa,fa,ha,ja){this.position=Z;this.index=aa;this.uv=fa;this.level=ha;this.dataCoordinate=ja}function m(Z,aa,
fa,ha,ja,ba,ma,qa,ka,oa,na,la,ia,sa,ta){this.gl=Z;this.shape=aa;this.bounds=fa;this.objectOffset=ta;this.intensityBounds=[];this._shader=ha;this._pickShader=ja;this._coordinateBuffer=ba;this._vao=ma;this._colorMap=qa;this._contourShader=ka;this._contourPickShader=oa;this._contourBuffer=na;this._contourVAO=la;this._contourOffsets=[[],[],[]];this._contourCounts=[[],[],[]];this._vertexCount=0;this._pickResult=new q([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]);this._dynamicBuffer=ia;this._dynamicVAO=sa;this._dynamicOffsets=
[0,0,0];this._dynamicCounts=[0,0,0];this.contourWidth=[1,1,1];this.contourLevels=[[1],[1],[1]];this.contourTint=[0,0,0];this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]];this.showSurface=this.showContour=!0;this.enableHighlight=[!0,!0,!0];this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.highlightTint=[1,1,1];this.highlightLevel=[-1,-1,-1];this.enableDynamic=[!0,!0,!0];this.dynamicLevel=[NaN,NaN,NaN];this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.dynamicTint=[1,1,1];this.dynamicWidth=
[1,1,1];this.axesBounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.surfaceProject=[!1,!1,!1];this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]];this.colorBounds=[!1,!1];this._field=[x(k.mallocFloat(1024),[0,0]),x(k.mallocFloat(1024),[0,0]),x(k.mallocFloat(1024),[0,0])];this.pickId=1;this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.snapToData=!1;this.opacity=this.pixelRatio=1;this.lightPosition=[10,1E4,0];this.diffuseLight=this.ambientLight=
.8;this.specularLight=2;this.roughness=.5;this.fresnel=1.5;this.vertexColor=0;this.dirty=!0}function l(Z,aa){if(!aa||!aa.length)return 1;for(var fa=0;fa<aa.length&&!(2>aa.length);++fa){if(aa[fa][0]===Z)return aa[fa][1];if(aa[fa][0]>Z&&0<fa)return Z=(aa[fa][0]-Z)/(aa[fa][0]-aa[fa-1][0]),aa[fa][1]*(1-Z)+Z*aa[fa-1][1]}return 1}function h(Z,aa){var fa,ha,ja=aa.axes&&aa.axes.lastCubeProps.axis||N,ba=aa.showSurface,ma=aa.showContour;for(fa=0;3>fa;++fa)for(ba=ba||aa.surfaceProject[fa],ha=0;3>ha;++ha)ma=
ma||aa.contourProject[fa][ha];for(fa=0;3>fa;++fa){var qa=T.projections[fa];for(ha=0;16>ha;++ha)qa[ha]=0;for(ha=0;4>ha;++ha)qa[5*ha]=1;qa[5*fa]=0;qa[12+fa]=aa.axesBounds[+(0<ja[fa])][fa];z(qa,Z.model,qa);var ka=T.clipBounds[fa];for(qa=0;2>qa;++qa)for(ha=0;3>ha;++ha)ka[qa][ha]=Z.clipBounds[qa][ha];ka[0][fa]=-1E8;ka[1][fa]=1E8}T.showSurface=ba;T.showContour=ma;return T}function a(Z,aa){Z=Z||{};aa=this.gl;aa.disable(aa.CULL_FACE);this._colorMap.bind(0);var fa=Q;fa.model=Z.model||L;fa.view=Z.view||L;fa.projection=
Z.projection||L;fa.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]];fa.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]];fa.objectOffset=this.objectOffset;fa.contourColor=this.contourColor[0];fa.inverseModel=y(fa.inverseModel,fa.model);for(Z=0;2>Z;++Z)for(var ha=fa.clipBounds[Z],ja=0;3>ja;++ja)ha[ja]=Math.min(Math.max(this.clipBounds[Z][ja],-1E8),1E8);fa.kambient=this.ambientLight;fa.kdiffuse=this.diffuseLight;fa.kspecular=
this.specularLight;fa.roughness=this.roughness;fa.fresnel=this.fresnel;fa.opacity=this.opacity;fa.height=0;fa.permutation=S;fa.vertexColor=this.vertexColor;ha=U;z(ha,fa.view,fa.model);z(ha,fa.projection,ha);y(ha,ha);for(Z=0;3>Z;++Z)fa.eyePosition[Z]=ha[12+Z]/ha[15];var ba=ha[15];for(Z=0;3>Z;++Z)ba+=this.lightPosition[Z]*ha[4*Z+3];for(Z=0;3>Z;++Z){var ma=ha[12+Z];for(ja=0;3>ja;++ja)ma+=ha[4*ja+Z]*this.lightPosition[ja];fa.lightPosition[Z]=ma/ba}ha=h(fa,this);if(ha.showSurface){this._shader.bind();
this._shader.uniforms=fa;this._vao.bind();this.showSurface&&this._vertexCount&&this._vao.draw(aa.TRIANGLES,this._vertexCount);for(Z=0;3>Z;++Z)this.surfaceProject[Z]&&this.vertexCount&&(this._shader.uniforms.model=ha.projections[Z],this._shader.uniforms.clipBounds=ha.clipBounds[Z],this._vao.draw(aa.TRIANGLES,this._vertexCount));this._vao.unbind()}if(ha.showContour){ba=this._contourShader;fa.kambient=1;fa.kdiffuse=0;fa.kspecular=0;fa.opacity=1;ba.bind();ba.uniforms=fa;ma=this._contourVAO;ma.bind();
for(Z=0;3>Z;++Z)for(ba.uniforms.permutation=P[Z],aa.lineWidth(this.contourWidth[Z]*this.pixelRatio),ja=0;ja<this.contourLevels[Z].length;++ja){if(ja===this.highlightLevel[Z])ba.uniforms.contourColor=this.highlightColor[Z],ba.uniforms.contourTint=this.highlightTint[Z];else if(0===ja||ja-1===this.highlightLevel[Z])ba.uniforms.contourColor=this.contourColor[Z],ba.uniforms.contourTint=this.contourTint[Z];this._contourCounts[Z][ja]&&(ba.uniforms.height=this.contourLevels[Z][ja],ma.draw(aa.LINES,this._contourCounts[Z][ja],
this._contourOffsets[Z][ja]))}for(Z=0;3>Z;++Z)for(ba.uniforms.model=ha.projections[Z],ba.uniforms.clipBounds=ha.clipBounds[Z],ja=0;3>ja;++ja)if(this.contourProject[Z][ja]){ba.uniforms.permutation=P[ja];aa.lineWidth(this.contourWidth[ja]*this.pixelRatio);for(var qa=0;qa<this.contourLevels[ja].length;++qa){if(qa===this.highlightLevel[ja])ba.uniforms.contourColor=this.highlightColor[ja],ba.uniforms.contourTint=this.highlightTint[ja];else if(0===qa||qa-1===this.highlightLevel[ja])ba.uniforms.contourColor=
this.contourColor[ja],ba.uniforms.contourTint=this.contourTint[ja];this._contourCounts[ja][qa]&&(ba.uniforms.height=this.contourLevels[ja][qa],ma.draw(aa.LINES,this._contourCounts[ja][qa],this._contourOffsets[ja][qa]))}}ma.unbind();ma=this._dynamicVAO;ma.bind();for(Z=0;3>Z;++Z)if(0!==this._dynamicCounts[Z])for(ba.uniforms.model=fa.model,ba.uniforms.clipBounds=fa.clipBounds,ba.uniforms.permutation=P[Z],aa.lineWidth(this.dynamicWidth[Z]*this.pixelRatio),ba.uniforms.contourColor=this.dynamicColor[Z],
ba.uniforms.contourTint=this.dynamicTint[Z],ba.uniforms.height=this.dynamicLevel[Z],ma.draw(aa.LINES,this._dynamicCounts[Z],this._dynamicOffsets[Z]),ja=0;3>ja;++ja)this.contourProject[ja][Z]&&(ba.uniforms.model=ha.projections[ja],ba.uniforms.clipBounds=ha.clipBounds[ja],ma.draw(aa.LINES,this._dynamicCounts[Z],this._dynamicOffsets[Z]));ma.unbind()}}function g(Z,aa){return Array.isArray(Z)?[aa(Z[0]),aa(Z[1]),aa(Z[2])]:[aa(Z),aa(Z),aa(Z)]}function e(Z){return Array.isArray(Z)?3===Z.length?[Z[0],Z[1],
Z[2],1]:[Z[0],Z[1],Z[2],Z[3]]:[0,0,0,1]}function n(Z){if(Array.isArray(Z)){if(Array.isArray(Z))return[e(Z[0]),e(Z[1]),e(Z[2])];Z=e(Z);return[Z.slice(),Z.slice(),Z.slice()]}}K.exports=function(Z){var aa=Z.gl,fa=t(aa),ha=F(aa),ja=B(aa),ba=I(aa),ma=c(aa),qa=d(aa,[{buffer:ma,size:4,stride:J,offset:0},{buffer:ma,size:3,stride:J,offset:16},{buffer:ma,size:3,stride:J,offset:28}]),ka=c(aa),oa=d(aa,[{buffer:ka,size:4,stride:20,offset:0},{buffer:ka,size:1,stride:20,offset:16}]),na=c(aa),la=d(aa,[{buffer:na,
size:2,type:aa.FLOAT}]),ia=f(aa,1,M,aa.RGBA,aa.UNSIGNED_BYTE);ia.minFilter=aa.LINEAR;ia.magFilter=aa.LINEAR;aa=new m(aa,[0,0],[[0,0,0],[0,0,0]],fa,ha,ma,qa,ia,ja,ba,ka,oa,na,la,[0,0,0]);fa={levels:[[],[],[]]};for(var sa in Z)fa[sa]=Z[sa];fa.colormap=fa.colormap||"jet";aa.update(fa);return aa};var p=b("bit-twiddle"),c=b("gl-buffer"),d=b("gl-vao"),f=b("gl-texture2d"),k=b("typedarray-pool"),r=b("colormap"),u=b("ndarray-ops"),v=b("ndarray-pack"),x=b("ndarray"),C=b("surface-nets"),z=b("gl-mat4/multiply"),
y=b("gl-mat4/invert"),D=b("binary-search-bounds"),A=b("ndarray-gradient");b=b("./lib/shaders");var t=b.createShader,B=b.createContourShader,F=b.createPickShader,I=b.createPickContourShader,J=40,L=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],H=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],P=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];(function(){for(var Z=0;3>Z;++Z){var aa=P[Z],fa=(Z+2)%3;aa[(Z+1)%3]=1;aa[fa+3]=1;aa[Z+6]=1}})();var M=256;b=m.prototype;b.genColormap=function(Z,aa){var fa=!1;Z=v([r({colormap:Z,
nshades:M,format:"rgba"}).map(function(ha,ja){ja=aa?l(ja/255,aa):ha[3];1>ja&&(fa=!0);return[ha[0],ha[1],ha[2],255*ja]})]);u.divseq(Z,255);this.hasAlphaScale=fa;return Z};b.isTransparent=function(){return 1>this.opacity||this.hasAlphaScale};b.isOpaque=function(){return!this.isTransparent()};b.pickSlots=1;b.setPickBase=function(Z){this.pickId=Z};var N=[0,0,0],T={showSurface:!1,showContour:!1,projections:[L.slice(),L.slice(),L.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]},
Q={model:L,view:L,projection:L,inverseModel:L.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1E-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1E3,1E3,1E3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},U=L.slice(),S=[1,0,0,0,1,0,0,0,1];b.draw=function(Z){return a.call(this,Z,!1)};b.drawTransparent=function(Z){return a.call(this,
Z,!0)};var X={model:L,view:L,projection:L,inverseModel:L,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};b.drawPick=function(Z){Z=Z||{};var aa=this.gl;aa.disable(aa.CULL_FACE);X.model=Z.model||L;X.view=Z.view||L;X.projection=Z.projection||L;X.shape=this._field[2].shape;X.pickId=this.pickId/255;X.lowerBound=this.bounds[0];X.upperBound=this.bounds[1];
X.objectOffset=this.objectOffset;X.permutation=S;for(Z=0;2>Z;++Z)for(var fa=X.clipBounds[Z],ha=0;3>ha;++ha)fa[ha]=Math.min(Math.max(this.clipBounds[Z][ha],-1E8),1E8);fa=h(X,this);if(fa.showSurface){this._pickShader.bind();this._pickShader.uniforms=X;this._vao.bind();this._vao.draw(aa.TRIANGLES,this._vertexCount);for(Z=0;3>Z;++Z)this.surfaceProject[Z]&&(this._pickShader.uniforms.model=fa.projections[Z],this._pickShader.uniforms.clipBounds=fa.clipBounds[Z],this._vao.draw(aa.TRIANGLES,this._vertexCount));
this._vao.unbind()}if(fa.showContour){var ja=this._contourPickShader;ja.bind();ja.uniforms=X;var ba=this._contourVAO;ba.bind();for(ha=0;3>ha;++ha)for(aa.lineWidth(this.contourWidth[ha]*this.pixelRatio),ja.uniforms.permutation=P[ha],Z=0;Z<this.contourLevels[ha].length;++Z)this._contourCounts[ha][Z]&&(ja.uniforms.height=this.contourLevels[ha][Z],ba.draw(aa.LINES,this._contourCounts[ha][Z],this._contourOffsets[ha][Z]));for(Z=0;3>Z;++Z)for(ja.uniforms.model=fa.projections[Z],ja.uniforms.clipBounds=fa.clipBounds[Z],
ha=0;3>ha;++ha)if(this.contourProject[Z][ha]){ja.uniforms.permutation=P[ha];aa.lineWidth(this.contourWidth[ha]*this.pixelRatio);for(var ma=0;ma<this.contourLevels[ha].length;++ma)this._contourCounts[ha][ma]&&(ja.uniforms.height=this.contourLevels[ha][ma],ba.draw(aa.LINES,this._contourCounts[ha][ma],this._contourOffsets[ha][ma]))}ba.unbind()}};b.pick=function(Z){if(!Z||Z.id!==this.pickId)return null;var aa=this._field[2].shape,fa=this._pickResult,ha=aa[0]*(Z.value[0]+(Z.value[2]>>4)/16)/255,ja=Math.floor(ha),
ba=ha-ja;Z=aa[1]*(Z.value[1]+(Z.value[2]&15)/16)/255;var ma=Math.floor(Z),qa=Z-ma;ja+=1;ma+=1;for(var ka=fa.position,oa=ka[0]=ka[1]=ka[2]=0;2>oa;++oa)for(var na=oa?ba:1-ba,la=0;2>la;++la)for(var ia=ja+oa,sa=ma+la,ta=na*(la?qa:1-qa),Aa=0;3>Aa;++Aa)ka[Aa]+=this._field[Aa].get(ia,sa)*ta;oa=this._pickResult.level;for(na=0;3>na;++na)oa[na]=D.le(this.contourLevels[na],ka[na]),0>oa[na]?0<this.contourLevels[na].length&&(oa[na]=0):oa[na]<this.contourLevels[na].length-1&&Math.abs(this.contourLevels[na][oa[na]]-
ka[na])>Math.abs(this.contourLevels[na][oa[na]+1]-ka[na])&&(oa[na]+=1);fa.index[0]=.5>ba?ja:ja+1;fa.index[1]=.5>qa?ma:ma+1;fa.uv[0]=ha/aa[0];fa.uv[1]=Z/aa[1];for(Aa=0;3>Aa;++Aa)fa.dataCoordinate[Aa]=this._field[Aa].get(fa.index[0],fa.index[1]);return fa};b.padField=function(Z,aa){var fa=aa.shape.slice(),ha=Z.shape.slice();u.assign(Z.lo(1,1).hi(fa[0],fa[1]),aa);u.assign(Z.lo(1).hi(fa[0],1),aa.hi(fa[0],1));u.assign(Z.lo(1,ha[1]-1).hi(fa[0],1),aa.lo(0,fa[1]-1).hi(fa[0],1));u.assign(Z.lo(0,1).hi(1,fa[1]),
aa.hi(1));u.assign(Z.lo(ha[0]-1,1).hi(1,fa[1]),aa.lo(fa[0]-1));Z.set(0,0,aa.get(0,0));Z.set(0,ha[1]-1,aa.get(0,fa[1]-1));Z.set(ha[0]-1,0,aa.get(fa[0]-1,0));Z.set(ha[0]-1,ha[1]-1,aa.get(fa[0]-1,fa[1]-1))};b.update=function(Z){Z=Z||{};this.objectOffset=Z.objectOffset||this.objectOffset;this.dirty=!0;"contourWidth"in Z&&(this.contourWidth=g(Z.contourWidth,Number));"showContour"in Z&&(this.showContour=g(Z.showContour,Boolean));"showSurface"in Z&&(this.showSurface=!!Z.showSurface);"contourTint"in Z&&(this.contourTint=
g(Z.contourTint,Boolean));"contourColor"in Z&&(this.contourColor=n(Z.contourColor));"contourProject"in Z&&(this.contourProject=g(Z.contourProject,function(Na){return g(Na,Boolean)}));"surfaceProject"in Z&&(this.surfaceProject=Z.surfaceProject);"dynamicColor"in Z&&(this.dynamicColor=n(Z.dynamicColor));"dynamicTint"in Z&&(this.dynamicTint=g(Z.dynamicTint,Number));"dynamicWidth"in Z&&(this.dynamicWidth=g(Z.dynamicWidth,Number));"opacity"in Z&&(this.opacity=Z.opacity);"opacityscale"in Z&&(this.opacityscale=
Z.opacityscale);"colorBounds"in Z&&(this.colorBounds=Z.colorBounds);"vertexColor"in Z&&(this.vertexColor=Z.vertexColor?1:0);"colormap"in Z&&this._colorMap.setPixels(this.genColormap(Z.colormap,this.opacityscale));var aa=Z.field||Z.coords&&Z.coords[2]||null,fa=!1;aa||(aa=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0));if("field"in Z||"coords"in Z){var ha=(aa.shape[0]+2)*(aa.shape[1]+2);ha>this._field[2].data.length&&
(k.freeFloat(this._field[2].data),this._field[2].data=k.mallocFloat(p.nextPow2(ha)));this._field[2]=x(this._field[2].data,[aa.shape[0]+2,aa.shape[1]+2]);this.padField(this._field[2],aa);ha=this.shape=aa.shape.slice();for(aa=0;2>aa;++aa)this._field[2].size>this._field[aa].data.length&&(k.freeFloat(this._field[aa].data),this._field[aa].data=k.mallocFloat(this._field[2].size)),this._field[aa]=x(this._field[aa].data,[ha[0]+2,ha[1]+2]);if(Z.coords){var ja=Z.coords;if(!Array.isArray(ja)||3!==ja.length)throw Error("gl-surface: invalid coordinates for x/y");
for(aa=0;2>aa;++aa){var ba=ja[aa];for(ma=0;2>ma;++ma)if(ba.shape[ma]!==ha[ma])throw Error("gl-surface: coords have incorrect shape");this.padField(this._field[aa],ba)}}else if(Z.ticks){ma=Z.ticks;if(!Array.isArray(ma)||2!==ma.length)throw Error("gl-surface: invalid ticks");for(aa=0;2>aa;++aa){ja=ma[aa];if(Array.isArray(ja)||ja.length)ja=x(ja);if(ja.shape[0]!==ha[aa])throw Error("gl-surface: invalid tick length");ba=x(ja.data,ha);ba.stride[aa]=ja.stride[0];ba.stride[aa^1]=0;this.padField(this._field[aa],
ba)}}else{for(aa=0;2>aa;++aa)ma=[0,0],ma[aa]=1,this._field[aa]=x(this._field[aa].data,[ha[0]+2,ha[1]+2],ma,0);this._field[0].set(0,0,0);for(var ma=0;ma<ha[0];++ma)this._field[0].set(ma+1,0,ma);this._field[0].set(ha[0]+1,0,ha[0]-1);this._field[1].set(0,0,0);for(ma=0;ma<ha[1];++ma)this._field[1].set(0,ma+1,ma);this._field[1].set(0,ha[1]+1,ha[1]-1)}ma=this._field;ja=x(k.mallocFloat(6*ma[2].size),[3,ha[0]+2,ha[1]+2,2]);for(aa=0;3>aa;++aa)A(ja.pick(aa),ma[aa],"mirror");var qa=x(k.mallocFloat(3*ma[2].size),
[ha[0]+2,ha[1]+2,3]);for(aa=0;aa<ha[0]+2;++aa)for(ma=0;ma<ha[1]+2;++ma){ba=ja.get(0,aa,ma,0);var ka=ja.get(0,aa,ma,1),oa=ja.get(1,aa,ma,0),na=ja.get(1,aa,ma,1),la=ja.get(2,aa,ma,0),ia=ja.get(2,aa,ma,1),sa=oa*ia-na*la;la=la*ka-ia*ba;ia=ba*na-ka*oa;ba=Math.sqrt(sa*sa+la*la+ia*ia);1E-8>ba?(ba=Math.max(Math.abs(sa),Math.abs(la),Math.abs(ia)),1E-8>ba?(ia=1,la=sa=0,ba=1):ba=1/ba):ba=1/Math.sqrt(ba);qa.set(aa,ma,0,sa*ba);qa.set(aa,ma,1,la*ba);qa.set(aa,ma,2,ia*ba)}k.free(ja.data);var ta=[Infinity,Infinity,
Infinity],Aa=[-Infinity,-Infinity,-Infinity],Ka=Infinity,Sa=-Infinity,db=k.mallocFloat(p.nextPow2((ha[0]-1)*(ha[1]-1)*60)),eb=0;for(aa=ja=0;aa<ha[0]-1;++aa)a:for(ma=0;ma<ha[1]-1;++ma){for(sa=0;2>sa;++sa)for(la=0;2>la;++la)for(ba=0;3>ba;++ba)if(ka=this._field[ba].get(1+aa+sa,1+ma+la),isNaN(ka)||!isFinite(ka))continue a;for(ba=0;6>ba;++ba){oa=aa+H[ba][0];na=ma+H[ba][1];var lb=this._field[0].get(oa+1,na+1),ab=this._field[1].get(oa+1,na+1);ka=this._field[2].get(oa+1,na+1);sa=qa.get(oa+1,na+1,0);la=qa.get(oa+
1,na+1,1);ia=qa.get(oa+1,na+1,2);Z.intensity&&(Ya=Z.intensity.get(oa,na));var Ya=Z.intensity?Z.intensity.get(oa,na):ka+this.objectOffset[2];db[eb++]=oa;db[eb++]=na;db[eb++]=lb;db[eb++]=ab;db[eb++]=ka;db[eb++]=0;db[eb++]=Ya;db[eb++]=sa;db[eb++]=la;db[eb++]=ia;ta[0]=Math.min(ta[0],lb+this.objectOffset[0]);ta[1]=Math.min(ta[1],ab+this.objectOffset[1]);ta[2]=Math.min(ta[2],ka+this.objectOffset[2]);Ka=Math.min(Ka,Ya);Aa[0]=Math.max(Aa[0],lb+this.objectOffset[0]);Aa[1]=Math.max(Aa[1],ab+this.objectOffset[1]);
Aa[2]=Math.max(Aa[2],ka+this.objectOffset[2]);Sa=Math.max(Sa,Ya);ja+=1}}Z.intensityBounds&&(Ka=+Z.intensityBounds[0],Sa=+Z.intensityBounds[1]);for(aa=6;aa<eb;aa+=10)db[aa]=(db[aa]-Ka)/(Sa-Ka);this._vertexCount=ja;this._coordinateBuffer.update(db.subarray(0,eb));k.freeFloat(db);k.free(qa.data);this.bounds=[ta,Aa];this.intensity=Z.intensity||this._field[2];if(this.intensityBounds[0]!==Ka||this.intensityBounds[1]!==Sa)fa=!0;this.intensityBounds=[Ka,Sa]}if("levels"in Z){ha=Z.levels;ha=Array.isArray(ha[0])?
ha.slice():[[],[],ha];for(aa=0;3>aa;++aa)ha[aa]=ha[aa].slice(),ha[aa].sort(function(Na,$a){return Na-$a});for(aa=0;3>aa;++aa)for(ma=0;ma<ha[aa].length;++ma)ha[aa][ma]-=this.objectOffset[aa];aa=0;a:for(;3>aa;++aa){if(ha[aa].length!==this.contourLevels[aa].length){fa=!0;break}for(ma=0;ma<ha[aa].length;++ma)if(ha[aa][ma]!==this.contourLevels[aa][ma]){fa=!0;break a}}this.contourLevels=ha}if(fa){ma=this._field;ha=this.shape;fa=[];for(Z=0;3>Z;++Z){qa=this.contourLevels[Z];ia=[];ta=[];Aa=[0,0,0];for(aa=
0;aa<qa.length;++aa){Ka=C(this._field[Z],qa[aa]);ia.push(fa.length/5|0);ma=ja=0;a:for(;ma<Ka.cells.length;++ma)for(Sa=Ka.cells[ma],ba=0;2>ba;++ba){db=Ka.positions[Sa[ba]];ka=db[0];eb=Math.floor(ka)|0;lb=ka-eb;ka=db[1];ab=Math.floor(ka)|0;Ya=ka-ab;var hb=!1,nb=0;b:for(;3>nb;++nb){Aa[nb]=0;var va=(Z+nb+1)%3;for(sa=0;2>sa;++sa){var Ba=sa?lb:1-lb;oa=Math.min(Math.max(eb+sa,0),ha[0])|0;for(la=0;2>la;++la){var Ga=la?Ya:1-Ya;na=Math.min(Math.max(ab+la,0),ha[1])|0;ka=2>nb?this._field[va].get(oa,na):(this.intensity.get(oa,
na)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]);if(!isFinite(ka)||isNaN(ka)){hb=!0;break b}Aa[nb]+=Ba*Ga*ka}}}if(hb){if(0<ba){for(ba=0;5>ba;++ba)fa.pop();--ja}continue a}else fa.push(Aa[0],Aa[1],db[0],db[1],Aa[2]),ja+=1}ta.push(ja)}this._contourOffsets[Z]=ia;this._contourCounts[Z]=ta}ha=k.mallocFloat(fa.length);for(aa=0;aa<fa.length;++aa)ha[aa]=fa[aa];this._contourBuffer.update(ha);k.freeFloat(ha)}};b.dispose=function(){this._shader.dispose();this._vao.dispose();this._coordinateBuffer.dispose();
this._colorMap.dispose();this._contourBuffer.dispose();this._contourVAO.dispose();this._contourShader.dispose();this._contourPickShader.dispose();this._dynamicBuffer.dispose();this._dynamicVAO.dispose();for(var Z=0;3>Z;++Z)k.freeFloat(this._field[Z].data)};b.highlight=function(Z){var aa;if(Z){for(aa=0;3>aa;++aa)this.highlightLevel[aa]=this.enableHighlight[aa]?Z.level[aa]:-1;Z=this.snapToData?Z.dataCoordinate:Z.position;for(aa=0;3>aa;++aa)Z[aa]-=this.objectOffset[aa];if(this.enableDynamic[0]&&Z[0]!==
this.dynamicLevel[0]||this.enableDynamic[1]&&Z[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&Z[2]!==this.dynamicLevel[2]){for(var fa=0,ha=this.shape,ja=k.mallocFloat(12*ha[0]*ha[1]),ba=0;3>ba;++ba)if(this.enableDynamic[ba]){this.dynamicLevel[ba]=Z[ba];var ma=this._field[(ba+1)%3],qa=this._field[(ba+2)%3];aa=C(this._field[ba],Z[ba]);var ka=aa.cells,oa=aa.positions;this._dynamicOffsets[ba]=fa;for(aa=0;aa<ka.length;++aa)for(var na=ka[aa],la=0;2>la;++la){var ia=oa[na[la]],sa=+ia[0],ta=sa|0,Aa=Math.min(ta+
1,ha[0])|0,Ka=sa-ta,Sa=1-Ka,db=+ia[1];ia=db|0;sa=Math.min(ia+1,ha[1])|0;var eb=db-ia,lb=1-eb;db=Sa*lb;Sa*=eb;lb*=Ka;eb*=Ka;Ka=db*ma.get(ta,ia)+Sa*ma.get(ta,sa)+lb*ma.get(Aa,ia)+eb*ma.get(Aa,sa);ta=db*qa.get(ta,ia)+Sa*qa.get(ta,sa)+lb*qa.get(Aa,ia)+eb*qa.get(Aa,sa);if(isNaN(Ka)||isNaN(ta)){la&&--fa;break}ja[2*fa]=Ka;ja[2*fa+1]=ta;fa+=1}this._dynamicCounts[ba]=fa-this._dynamicOffsets[ba]}else this.dynamicLevel[ba]=NaN,this._dynamicCounts[ba]=0;this._dynamicBuffer.update(ja.subarray(0,2*fa));k.freeFloat(ja)}}else this._dynamicCounts=
[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],this.highlightLevel=[-1,-1,-1]}},{"./lib/shaders":349,"binary-search-bounds":96,"bit-twiddle":97,colormap:131,"gl-buffer":259,"gl-mat4/invert":293,"gl-mat4/multiply":295,"gl-texture2d":353,"gl-vao":358,ndarray:495,"ndarray-gradient":488,"ndarray-ops":490,"ndarray-pack":491,"surface-nets":570,"typedarray-pool":595}],352:[function(b,K,G){var q=b("css-font"),m=b("pick-by-alias"),l=b("regl"),h=b("gl-util/context");G=b("es6-weak-map");var a=b("color-normalize"),
g=b("font-atlas"),e=b("typedarray-pool"),n=b("parse-rect"),p=b("is-plain-obj"),c=b("parse-unit"),d=b("to-px"),f=b("detect-kerning"),k=b("object-assign"),r=b("font-measure"),u=b("flatten-vertex-data"),v=b("bit-twiddle").nextPow2,x=new G,C=!1;document.body&&(b=document.body.appendChild(document.createElement("div")),b.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(b).fontStretch&&(C=!0),document.body.removeChild(b));var z=function(y){"function"===typeof y&&y._gl&&y.prop&&
y.texture&&y.buffer?(y={regl:y},this.gl=y.regl._gl):this.gl=h(y);this.regl=(this.shader=x.get(this.gl))?this.shader.regl:y.regl||l({gl:this.gl});this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"});this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"});this.shader||(this.shader=this.createShader(),x.set(this.gl,this.shader));this.batch=[];this.fontSize=[];this.font=[];this.fontAtlas=[];this.draw=this.shader.draw.bind(this);this.render=function(){this.regl._refresh();this.draw(this.batch)};
this.canvas=this.gl.canvas;this.update(p(y)?y:{})};z.prototype.createShader=function(){var y=this.regl,D=y({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:y.prop("count"),offset:y.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:y.this("sizeBuffer")},width:{offset:0,stride:8,buffer:y.this("sizeBuffer")},char:y.this("charBuffer"),position:y.this("position")},
uniforms:{atlasSize:function(A,t){return[t.atlas.width,t.atlas.height]},atlasDim:function(A,t){return[t.atlas.cols,t.atlas.rows]},atlas:function(A,t){return t.atlas.texture},charStep:function(A,t){return t.atlas.step},em:function(A,t){return t.atlas.em},color:y.prop("color"),opacity:y.prop("opacity"),viewport:y.this("viewportArray"),scale:y.this("scale"),align:y.prop("align"),baseline:y.prop("baseline"),translate:y.this("translate"),positionOffset:y.prop("positionOffset")},primitive:"points",viewport:y.this("viewport"),
vert:"\n\t\t\tprecision highp float;\n\t\t\tattribute float width, charOffset, char;\n\t\t\tattribute vec2 position;\n\t\t\tuniform float fontSize, charStep, em, align, baseline;\n\t\t\tuniform vec4 viewport;\n\t\t\tuniform vec4 color;\n\t\t\tuniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvoid main () {\n\t\t\t\t"+(z.normalViewport?"":"vec2 positionOffset = vec2(positionOffset.x,- positionOffset.y);")+
"\n\n\t\t\t\tvec2 offset = floor(em * (vec2(align + charOffset, baseline)\n\t\t\t\t\t+ positionOffset))\n\t\t\t\t\t/ (viewport.zw * scale.xy);\n\n\t\t\t\tvec2 position = (position + translate) * scale;\n\t\t\t\tposition += offset * scale;\n\n\t\t\t\t"+(z.normalViewport?"position.y = 1. - position.y;":"")+"\n\n\t\t\t\tcharCoord = position * viewport.zw + viewport.xy;\n\n\t\t\t\tgl_Position = vec4(position * 2. - 1., 0, 1);\n\n\t\t\t\tgl_PointSize = charStep;\n\n\t\t\t\tcharId.x = mod(char, atlasDim.x);\n\t\t\t\tcharId.y = floor(char / atlasDim.x);\n\n\t\t\t\tcharWidth = width * em;\n\n\t\t\t\tfontColor = color / 255.;\n\t\t\t}",
frag:"\n\t\t\tprecision highp float;\n\t\t\tuniform sampler2D atlas;\n\t\t\tuniform float fontSize, charStep, opacity;\n\t\t\tuniform vec2 atlasSize;\n\t\t\tuniform vec4 viewport;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\n\t\t\tfloat lightness(vec4 color) {\n\t\t\t\treturn color.r * 0.299 + color.g * 0.587 + color.b * 0.114;\n\t\t\t}\n\n\t\t\tvoid main () {\n\t\t\t\tvec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;\n\t\t\t\tfloat halfCharStep = floor(charStep * .5 + .5);\n\n\t\t\t\t// invert y and shift by 1px (FF expecially needs that)\n\t\t\t\tuv.y = charStep - uv.y;\n\n\t\t\t\t// ignore points outside of character bounding box\n\t\t\t\tfloat halfCharWidth = ceil(charWidth * .5);\n\t\t\t\tif (floor(uv.x) > halfCharStep + halfCharWidth ||\n\t\t\t\t\tfloor(uv.x) < halfCharStep - halfCharWidth) return;\n\n\t\t\t\tuv += charId * charStep;\n\t\t\t\tuv = uv / atlasSize;\n\n\t\t\t\tvec4 color = fontColor;\n\t\t\t\tvec4 mask = texture2D(atlas, uv);\n\n\t\t\t\tfloat maskY = lightness(mask);\n\t\t\t\t// float colorY = lightness(color);\n\t\t\t\tcolor.a *= maskY;\n\t\t\t\tcolor.a *= opacity;\n\n\t\t\t\t// color.a += .1;\n\n\t\t\t\t// antialiasing, see yiq color space y-channel formula\n\t\t\t\t// color.rgb += (1. - color.rgb) * (1. - mask.rgb);\n\n\t\t\t\tgl_FragColor = color;\n\t\t\t}"});
return{regl:y,draw:D,atlas:{}}};z.prototype.update=function(y){var D=this;if("string"===typeof y)y={text:y};else if(!y)return;y=m(y,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",
kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0);null!=y.opacity&&(Array.isArray(y.opacity)?this.opacity=y.opacity.map(function(S){return parseFloat(S)}):this.opacity=parseFloat(y.opacity));null!=y.viewport&&(this.viewport=n(y.viewport),z.normalViewport&&(this.viewport.y=this.canvas.height-this.viewport.y-this.viewport.height),
this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]);null==this.viewport&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]);null!=y.kerning&&(this.kerning=y.kerning);null!=y.offset&&("number"===typeof y.offset&&(y.offset=[y.offset,0]),this.positionOffset=u(y.offset));y.direction&&(this.direction=y.direction);y.range&&(this.range=
y.range,this.scale=[1/(y.range[2]-y.range[0]),1/(y.range[3]-y.range[1])],this.translate=[-y.range[0],-y.range[1]]);y.scale&&(this.scale=y.scale);y.translate&&(this.translate=y.translate);this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]);this.translate||(this.translate=[0,0]);this.font.length||y.font||(y.font=z.baseFontSize+"px sans-serif");var A=!1,t=!1;y.font&&(Array.isArray(y.font)?y.font:[y.font]).forEach(function(S,X){if("string"===typeof S)try{S=q.parse(S)}catch(ha){S=q.parse(z.baseFontSize+
"px "+S)}else S=q.parse(q.stringify(S));var Z=q.stringify({size:z.baseFontSize,family:S.family,stretch:C?S.stretch:void 0,variant:S.variant,weight:S.weight,style:S.style}),aa=c(S.size);aa=Math.round(aa[0]*d(aa[1]));aa!==D.fontSize[X]&&(t=!0,D.fontSize[X]=aa);if(!D.font[X]||Z!=D.font[X].baseString)if(A=!0,D.font[X]=z.fonts[Z],!D.font[X]){aa=S.family.join(", ");var fa=[S.style];S.style!=S.variant&&fa.push(S.variant);S.variant!=S.weight&&fa.push(S.weight);C&&S.weight!=S.stretch&&fa.push(S.stretch);D.font[X]=
{baseString:Z,family:aa,weight:S.weight,stretch:S.stretch,style:S.style,variant:S.variant,width:{},kerning:{},metrics:r(aa,{origin:"top",fontSize:z.baseFontSize,fontStyle:fa.join(" ")})};z.fonts[Z]=D.font[X]}});(A||t)&&this.font.forEach(function(S,X){var Z=q.stringify({size:D.fontSize[X],family:S.family,stretch:C?S.stretch:void 0,variant:S.variant,weight:S.weight,style:S.style});D.fontAtlas[X]=D.shader.atlas[Z];D.fontAtlas[X]||(D.shader.atlas[Z]=D.fontAtlas[X]={fontString:Z,step:2*Math.ceil(D.fontSize[X]*
S.metrics.bottom*.5),em:D.fontSize[X],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:D.regl.texture()});null==y.text&&(y.text=D.text)});if("string"===typeof y.text&&y.position&&2<y.position.length){for(var B=Array(.5*y.position.length),F=0;F<B.length;F++)B[F]=y.text;y.text=B}if(null!=y.text||A){this.textOffsets=[0];if(Array.isArray(y.text)){this.count=y.text[0].length;this.counts=[this.count];for(B=1;B<y.text.length;B++)this.textOffsets[B]=this.textOffsets[B-1]+y.text[B-1].length,this.count+=
y.text[B].length,this.counts.push(y.text[B].length);this.text=y.text.join("")}else this.text=y.text,this.count=this.text.length,this.counts=[this.count];var I=[];this.font.forEach(function(S,X){z.atlasContext.font=S.baseString;X=D.fontAtlas[X];for(var Z=0;Z<D.text.length;Z++){var aa=D.text.charAt(Z);null==X.ids[aa]&&(X.ids[aa]=X.chars.length,X.chars.push(aa),I.push(aa));if(null==S.width[aa]&&(S.width[aa]=z.atlasContext.measureText(aa).width/z.baseFontSize,D.kerning)){var fa=[],ha;for(ha in S.width)fa.push(ha+
aa,aa+ha);k(S.kerning,f(S.family,{pairs:fa}))}}})}if(y.position)if(2<y.position.length){B=!y.position[0].length;F=e.mallocFloat(2*this.count);for(var J=0,L=0;J<this.counts.length;J++){var H=this.counts[J];if(B)for(var P=0;P<H;P++)F[L++]=y.position[2*J],F[L++]=y.position[2*J+1];else for(P=0;P<H;P++)F[L++]=y.position[J][0],F[L++]=y.position[J][1]}this.position.call?this.position({type:"float",data:F}):this.position=this.regl.buffer({type:"float",data:F});e.freeFloat(F)}else this.position.destroy&&this.position.destroy(),
this.position={constant:y.position};if(y.text||A){B=e.mallocUint8(this.count);F=e.mallocFloat(2*this.count);this.textWidth=[];for(L=J=0;J<this.counts.length;J++){H=this.counts[J];P=this.font[J]||this.font[0];for(var M=this.fontAtlas[J]||this.fontAtlas[0],N=0;N<H;N++){var T=this.text.charAt(L),Q=this.text.charAt(L-1);B[L]=M.ids[T];F[2*L]=P.width[T];if(N){var U=F[2*L-1]+.5*F[2*L-2]+.5*F[2*L];this.kerning&&(T=P.kerning[Q+T])&&(U+=.001*T);F[2*L+1]=U}else F[2*L+1]=.5*F[2*L];L++}this.textWidth.push(F.length?
.5*F[2*L-2]+F[2*L-1]:0)}y.align||(y.align=this.align);this.charBuffer({data:B,type:"uint8",usage:"stream"});this.sizeBuffer({data:F,type:"float",usage:"stream"});e.freeUint8(B);e.freeFloat(F);I.length&&this.font.forEach(function(S,X){S=D.fontAtlas[X];X=S.step;var Z=Math.min(Math.floor(z.maxAtlasSize/X),S.chars.length),aa=Math.ceil(S.chars.length/Z),fa=v(Z*X),ha=v(aa*X);S.width=fa;S.height=ha;S.rows=aa;S.cols=Z;S.em&&S.texture({data:g({canvas:z.atlasCanvas,font:S.fontString,chars:S.chars,shape:[fa,
ha],step:[X,X]})})})}y.align&&(this.align=y.align,this.alignOffset=this.textWidth.map(function(S,X){X=Array.isArray(D.align)?1<D.align.length?D.align[X]:D.align[0]:D.align;if("number"===typeof X)return X;switch(X){case "right":case "end":return-S;case "center":case "centre":case "middle":return.5*-S}return 0}));null==this.baseline&&null==y.baseline&&(y.baseline=0);null!=y.baseline&&(this.baseline=y.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(S,
X){X=(D.font[X]||D.font[0]).metrics;var Z=.5*X.bottom;Z="number"===typeof S?Z+(S-X.baseline):Z+-X[S];z.normalViewport||(Z*=-1);return Z}));if(null!=y.color)if(y.color||(y.color="transparent"),"string"!==typeof y.color&&isNaN(y.color)){if("number"===typeof y.color[0]&&y.color.length>this.counts.length)for(F=y.color.length,B=e.mallocUint8(F),J=(y.color.subarray||y.color.slice).bind(y.color),L=0;L<F;L+=4)B.set(a(J(L,L+4),"uint8"),L);else for(F=y.color.length,B=e.mallocUint8(4*F),J=0;J<F;J++)B.set(a(y.color[J]||
0,"uint8"),4*J);this.color=B}else this.color=a(y.color,"uint8");if(y.position||y.text||y.color||y.baseline||y.align||y.font||y.offset||y.opacity)if(4<this.color.length||1<this.baselineOffset.length||this.align&&1<this.align.length||1<this.fontAtlas.length||2<this.positionOffset.length)for(this.batch=Array(Math.max(.5*this.position.length||0,.25*this.color.length||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,.5*this.positionOffset.length||0)),
B=0;B<this.batch.length;B++)this.batch[B]={count:1<this.counts.length?this.counts[B]:this.counts[0],offset:1<this.textOffsets.length?this.textOffsets[B]:this.textOffsets[0],color:this.color?4>=this.color.length?this.color:this.color.subarray(4*B,4*B+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[B]:this.opacity,baseline:null!=this.baselineOffset[B]?this.baselineOffset[B]:this.baselineOffset[0],align:this.align?null!=this.alignOffset[B]?this.alignOffset[B]:this.alignOffset[0]:0,atlas:this.fontAtlas[B]||
this.fontAtlas[0],positionOffset:2<this.positionOffset.length?this.positionOffset.subarray(2*B,2*B+2):this.positionOffset};else this.batch=this.count?[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:[]};z.prototype.destroy=function(){};z.prototype.kerning=!0;z.prototype.position={constant:new Float32Array(2)};
z.prototype.translate=null;z.prototype.scale=null;z.prototype.font=null;z.prototype.text="";z.prototype.positionOffset=[0,0];z.prototype.opacity=1;z.prototype.color=new Uint8Array([0,0,0,255]);z.prototype.alignOffset=[0,0];z.normalViewport=!1;z.maxAtlasSize=1024;z.atlasCanvas=document.createElement("canvas");z.atlasContext=z.atlasCanvas.getContext("2d",{alpha:!1});z.baseFontSize=64;z.fonts={};K.exports=z},{"bit-twiddle":97,"color-normalize":125,"css-font":144,"detect-kerning":172,"es6-weak-map":233,
"flatten-vertex-data":244,"font-atlas":245,"font-measure":246,"gl-util/context":354,"is-plain-obj":469,"object-assign":499,"parse-rect":504,"parse-unit":506,"pick-by-alias":511,regl:540,"to-px":578,"typedarray-pool":595}],353:[function(b,K,G){function q(k){return"undefined"!=typeof HTMLCanvasElement&&k instanceof HTMLCanvasElement||"undefined"!=typeof HTMLImageElement&&k instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&k instanceof HTMLVideoElement||"undefined"!=typeof ImageData&&
k instanceof ImageData}function m(k,r,u){var v=k.gl,x=v.getParameter(v.MAX_TEXTURE_SIZE);if(0>r||r>x||0>u||u>x)throw Error("gl-texture2d: Invalid texture size");k._shape=[r,u];k.bind();v.texImage2D(v.TEXTURE_2D,0,k.format,r,u,0,k.format,k.type,null);k._mipLevels=[0];return k}function l(k,r,u,v,x,C){this.gl=k;this.handle=r;this.format=x;this.type=C;this._shape=[u,v];this._mipLevels=[0];this._minFilter=this._magFilter=k.NEAREST;this._wrapT=this._wrapS=k.CLAMP_TO_EDGE;this._anisoSamples=1;var z=this;
k=[this._wrapS,this._wrapT];Object.defineProperties(k,[{get:function(){return z._wrapS},set:function(y){return z.wrapS=y}},{get:function(){return z._wrapT},set:function(y){return z.wrapT=y}}]);this._wrapVector=k;k=[this._shape[0],this._shape[1]];Object.defineProperties(k,[{get:function(){return z._shape[0]},set:function(y){return z.width=y}},{get:function(){return z._shape[1]},set:function(y){return z.height=y}}]);this._shapeVector=k}function h(k,r){return 3===k.length?1===r[2]&&r[1]===k[0]*k[2]&&
r[0]===k[2]:1===r[0]&&r[1]===k[0]}function a(k){var r=k.createTexture();k.bindTexture(k.TEXTURE_2D,r);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,k.NEAREST);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,k.NEAREST);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_S,k.CLAMP_TO_EDGE);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_T,k.CLAMP_TO_EDGE);return r}function g(k,r,u,v,x){var C=k.getParameter(k.MAX_TEXTURE_SIZE);if(0>r||r>C||0>u||u>C)throw Error("gl-texture2d: Invalid texture shape");if(x===
k.FLOAT&&!k.getExtension("OES_texture_float"))throw Error("gl-texture2d: Floating point textures not supported on this platform");C=a(k);k.texImage2D(k.TEXTURE_2D,0,v,r,u,0,v,x,null);return new l(k,C,r,u,v,x)}var e=b("ndarray"),n=b("ndarray-ops"),p=b("typedarray-pool");K.exports=function(k){if(1>=arguments.length)throw Error("gl-texture2d: Missing arguments for texture2d constructor");c||(c=[k.LINEAR,k.NEAREST_MIPMAP_LINEAR,k.LINEAR_MIPMAP_NEAREST,k.LINEAR_MIPMAP_NEAREST],d=[k.NEAREST,k.LINEAR,k.NEAREST_MIPMAP_NEAREST,
k.NEAREST_MIPMAP_LINEAR,k.LINEAR_MIPMAP_NEAREST,k.LINEAR_MIPMAP_LINEAR],f=[k.REPEAT,k.CLAMP_TO_EDGE,k.MIRRORED_REPEAT]);if("number"===typeof arguments[1])return g(k,arguments[1],arguments[2],arguments[3]||k.RGBA,arguments[4]||k.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return g(k,arguments[1][0]|0,arguments[1][1]|0,arguments[2]||k.RGBA,arguments[3]||k.UNSIGNED_BYTE);if("object"===typeof arguments[1]){var r=arguments[1],u=q(r)?r:r.raw;if(u){var v=r.width|0;r=r.height|0;var x=arguments[2]||k.RGBA,
C=arguments[3]||k.UNSIGNED_BYTE,z=a(k);k.texImage2D(k.TEXTURE_2D,0,x,x,C,u);return new l(k,z,v,r,x,C)}if(r.shape&&r.data&&r.stride){z=r;var y=z.dtype;u=z.shape.slice();r=k.getParameter(k.MAX_TEXTURE_SIZE);if(0>u[0]||u[0]>r||0>u[1]||u[1]>r)throw Error("gl-texture2d: Invalid texture size");r=h(u,z.stride.slice());"float32"===y?x=k.FLOAT:"float64"===y?(x=k.FLOAT,r=!1,y="float32"):"uint8"===y?x=k.UNSIGNED_BYTE:(x=k.UNSIGNED_BYTE,r=!1,y="uint8");if(2===u.length)C=k.LUMINANCE,u=[u[0],u[1],1],z=e(z.data,
u,[z.stride[0],z.stride[1],1],z.offset);else if(3===u.length)if(1===u[2])C=k.ALPHA;else if(2===u[2])C=k.LUMINANCE_ALPHA;else if(3===u[2])C=k.RGB;else if(4===u[2])C=k.RGBA;else throw Error("gl-texture2d: Invalid shape for pixel coords");else throw Error("gl-texture2d: Invalid shape for texture");x!==k.FLOAT||k.getExtension("OES_texture_float")||(x=k.UNSIGNED_BYTE,r=!1);var D=z.size;if(r)z=0===z.offset&&z.data.length===D?z.data:z.data.subarray(z.offset,z.offset+D);else{var A=[u[2],u[2]*u[0],1];v=p.malloc(D,
y);A=e(v,u,A,0);"float32"!==y&&"float64"!==y||x!==k.UNSIGNED_BYTE?n.assign(A,z):n.muls(A,z,255);z=v.subarray(0,D)}y=a(k);k.texImage2D(k.TEXTURE_2D,0,C,u[0],u[1],0,C,x,z);r||p.free(v);return new l(k,y,u[0],u[1],C,x)}}throw Error("gl-texture2d: Invalid arguments for texture2d constructor");};var c=null,d=null,f=null;b=l.prototype;Object.defineProperties(b,{minFilter:{get:function(){return this._minFilter},set:function(k){this.bind();var r=this.gl;this.type===r.FLOAT&&0<=c.indexOf(k)&&!r.getExtension("OES_texture_float_linear")&&
(k=r.NEAREST);if(0>d.indexOf(k))throw Error("gl-texture2d: Unknown filter mode "+k);r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,k);return this._minFilter=k}},magFilter:{get:function(){return this._magFilter},set:function(k){this.bind();var r=this.gl;this.type===r.FLOAT&&0<=c.indexOf(k)&&!r.getExtension("OES_texture_float_linear")&&(k=r.NEAREST);if(0>d.indexOf(k))throw Error("gl-texture2d: Unknown filter mode "+k);r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,k);return this._magFilter=k}},
mipSamples:{get:function(){return this._anisoSamples},set:function(k){var r=this._anisoSamples;this._anisoSamples=Math.max(k,1)|0;r!==this._anisoSamples&&(k=this.gl.getExtension("EXT_texture_filter_anisotropic"))&&this.gl.texParameterf(this.gl.TEXTURE_2D,k.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples);return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(k){this.bind();if(0>f.indexOf(k))throw Error("gl-texture2d: Unknown wrap mode "+k);this.gl.texParameteri(this.gl.TEXTURE_2D,
this.gl.TEXTURE_WRAP_S,k);return this._wrapS=k}},wrapT:{get:function(){return this._wrapT},set:function(k){this.bind();if(0>f.indexOf(k))throw Error("gl-texture2d: Unknown wrap mode "+k);this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,k);return this._wrapT=k}},wrap:{get:function(){return this._wrapVector},set:function(k){Array.isArray(k)||(k=[k,k]);if(2!==k.length)throw Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var r=0;2>r;++r)if(0>f.indexOf(k[r]))throw Error("gl-texture2d: Unknown wrap mode "+
k);this._wrapS=k[0];this._wrapT=k[1];r=this.gl;this.bind();r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,this._wrapS);r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,this._wrapT);return k}},shape:{get:function(){return this._shapeVector},set:function(k){if(!Array.isArray(k))k=[k|0,k|0];else if(2!==k.length)throw Error("gl-texture2d: Invalid texture shape");m(this,k[0]|0,k[1]|0);return[k[0]|0,k[1]|0]}},width:{get:function(){return this._shape[0]},set:function(k){k|=0;m(this,k,this._shape[1]);return k}},
height:{get:function(){return this._shape[1]},set:function(k){k|=0;m(this,this._shape[0],k);return k}}});b.bind=function(k){var r=this.gl;void 0!==k&&r.activeTexture(r.TEXTURE0+(k|0));r.bindTexture(r.TEXTURE_2D,this.handle);return void 0!==k?k|0:r.getParameter(r.ACTIVE_TEXTURE)-r.TEXTURE0};b.dispose=function(){this.gl.deleteTexture(this.handle)};b.generateMipmap=function(){this.bind();this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var k=Math.min(this._shape[0],this._shape[1]),r=0;0<k;++r,k>>>=1)0>
this._mipLevels.indexOf(r)&&this._mipLevels.push(r)};b.setPixels=function(k,r,u,v){var x=this.gl;this.bind();Array.isArray(r)?(v=u,u=r[1]|0,r=r[0]|0):(r=r||0,u=u||0);v=v||0;var C=q(k)?k:k.raw;if(C)0>this._mipLevels.indexOf(v)?(x.texImage2D(x.TEXTURE_2D,0,this.format,this.format,this.type,C),this._mipLevels.push(v)):x.texSubImage2D(x.TEXTURE_2D,v,r,u,this.format,this.type,C);else if(k.shape&&k.stride&&k.data){if(2>k.shape.length||r+k.shape[1]>this._shape[1]>>>v||u+k.shape[0]>this._shape[0]>>>v||0>
r||0>u)throw Error("gl-texture2d: Texture dimensions are out of bounds");C=this.format;var z=this.type,y=this._mipLevels,D=k.dtype,A=k.shape.slice();if(2>A.length||3<A.length)throw Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var t=h(A,k.stride.slice());"float32"===D?D=x.FLOAT:"float64"===D?(D=x.FLOAT,t=!1):"uint8"===D?D=x.UNSIGNED_BYTE:(D=x.UNSIGNED_BYTE,t=!1);if(2===A.length){var B=x.LUMINANCE;A=[A[0],A[1],1];k=e(k.data,A,[k.stride[0],k.stride[1],1],k.offset)}else if(3===A.length)if(1===
A[2])B=x.ALPHA;else if(2===A[2])B=x.LUMINANCE_ALPHA;else if(3===A[2])B=x.RGB;else if(4===A[2])B=x.RGBA;else throw Error("gl-texture2d: Invalid shape for pixel coords");else throw Error("gl-texture2d: Invalid shape for texture");B!==x.LUMINANCE&&B!==x.ALPHA||C!==x.LUMINANCE&&C!==x.ALPHA||(B=C);if(B!==C)throw Error("gl-texture2d: Incompatible texture format for setPixels");B=k.size;var F=0>y.indexOf(v);F&&y.push(v);D===z&&t?0===k.offset&&k.data.length===B?F?x.texImage2D(x.TEXTURE_2D,v,C,A[0],A[1],0,
C,z,k.data):x.texSubImage2D(x.TEXTURE_2D,v,r,u,A[0],A[1],C,z,k.data):F?x.texImage2D(x.TEXTURE_2D,v,C,A[0],A[1],0,C,z,k.data.subarray(k.offset,k.offset+B)):x.texSubImage2D(x.TEXTURE_2D,v,r,u,A[0],A[1],C,z,k.data.subarray(k.offset,k.offset+B)):(y=z===x.FLOAT?p.mallocFloat32(B):p.mallocUint8(B),t=e(y,A,[A[2],A[2]*A[0],1]),D===x.FLOAT&&z===x.UNSIGNED_BYTE?n.muls(t,k,255):n.assign(t,k),F?x.texImage2D(x.TEXTURE_2D,v,C,A[0],A[1],0,C,z,y.subarray(0,B)):x.texSubImage2D(x.TEXTURE_2D,v,r,u,A[0],A[1],C,z,y.subarray(0,
B)),z===x.FLOAT?p.freeFloat32(y):p.freeUint8(y))}else throw Error("gl-texture2d: Unsupported data type");}},{ndarray:495,"ndarray-ops":490,"typedarray-pool":595}],354:[function(b,K,G){(function(q){(function(){function m(g){if(g.container)if(g.container==document.body)document.body.style.width||(g.canvas.width=g.width||g.pixelRatio*q.innerWidth),document.body.style.height||(g.canvas.height=g.height||g.pixelRatio*q.innerHeight);else{var e=g.container.getBoundingClientRect();g.canvas.width=g.width||
e.right-e.left;g.canvas.height=g.height||e.bottom-e.top}}function l(g){return"function"===typeof g.getContext&&"width"in g&&"height"in g}function h(){var g=document.createElement("canvas");g.style.position="absolute";g.style.top=0;g.style.left=0;return g}var a=b("pick-by-alias");K.exports=function(g){g?"string"===typeof g&&(g={container:g}):g={};g=l(g)?{container:g}:"string"===typeof g.nodeName&&"function"===typeof g.appendChild&&"function"===typeof g.getBoundingClientRect?{container:g}:"function"===
typeof g.drawArrays||"function"===typeof g.drawElements?{gl:g}:a(g,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0);g.pixelRatio||(g.pixelRatio=q.pixelRatio||1);if(g.gl)return g.gl;g.canvas&&(g.container=g.canvas.parentNode);if(g.container){if("string"===typeof g.container){var e=
document.querySelector(g.container);if(!e)throw Error("Element "+g.container+" is not found");g.container=e}l(g.container)?(g.canvas=g.container,g.container=g.canvas.parentNode):g.canvas||(g.canvas=h(),g.container.appendChild(g.canvas),m(g))}else if(!g.canvas)if("undefined"!==typeof document)g.container=document.body||document.documentElement,g.canvas=h(),g.container.appendChild(g.canvas),m(g);else throw Error("Not DOM environment. Use headless-gl.");if(!g.gl)try{g.gl=g.canvas.getContext("webgl",
g.attrs)}catch(n){try{g.gl=g.canvas.getContext("experimental-webgl",g.attrs)}catch(p){g.gl=g.canvas.getContext("webgl-experimental",g.attrs)}}return g.gl}}).call(this)}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"pick-by-alias":511}],355:[function(b,K,G){K.exports=function(q,m,l){m?m.bind():q.bindBuffer(q.ELEMENT_ARRAY_BUFFER,null);m=q.getParameter(q.MAX_VERTEX_ATTRIBS)|0;if(l){if(l.length>m)throw Error("gl-vao: Too many vertex attributes");
for(var h=0;h<l.length;++h){var a=l[h];if(a.buffer){var g=a.size||4,e=a.type||q.FLOAT,n=!!a.normalized,p=a.stride||0,c=a.offset||0;a.buffer.bind();q.enableVertexAttribArray(h);q.vertexAttribPointer(h,g,e,n,p,c)}else{if("number"===typeof a)q.vertexAttrib1f(h,a);else if(1===a.length)q.vertexAttrib1f(h,a[0]);else if(2===a.length)q.vertexAttrib2f(h,a[0],a[1]);else if(3===a.length)q.vertexAttrib3f(h,a[0],a[1],a[2]);else if(4===a.length)q.vertexAttrib4f(h,a[0],a[1],a[2],a[3]);else throw Error("gl-vao: Invalid vertex attribute");
q.disableVertexAttribArray(h)}}}else q.bindBuffer(q.ARRAY_BUFFER,null),h=0;for(;h<m;++h)q.disableVertexAttribArray(h)}},{}],356:[function(b,K,G){function q(l){this.gl=l;this._attributes=this._elements=null;this._elementsType=l.UNSIGNED_SHORT}var m=b("./do-bind.js");q.prototype.bind=function(){m(this.gl,this._elements,this._attributes)};q.prototype.update=function(l,h,a){this._elements=h;this._attributes=l;this._elementsType=a||this.gl.UNSIGNED_SHORT};q.prototype.dispose=function(){};q.prototype.unbind=
function(){};q.prototype.draw=function(l,h,a){a=a||0;var g=this.gl;this._elements?g.drawElements(l,h,this._elementsType,a):g.drawArrays(l,a,h)};K.exports=function(l){return new q(l)}},{"./do-bind.js":355}],357:[function(b,K,G){function q(h,a,g,e,n,p){this.location=h;this.dimension=a;this.a=g;this.b=e;this.c=n;this.d=p}function m(h,a,g){this.gl=h;this._ext=a;this.handle=g;this._attribs=[];this._useElements=!1;this._elementsType=h.UNSIGNED_SHORT}var l=b("./do-bind.js");q.prototype.bind=function(h){switch(this.dimension){case 1:h.vertexAttrib1f(this.location,
this.a);break;case 2:h.vertexAttrib2f(this.location,this.a,this.b);break;case 3:h.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:h.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}};m.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var h=0;h<this._attribs.length;++h)this._attribs[h].bind(this.gl)};m.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)};m.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)};m.prototype.update=
function(h,a,g){this.bind();l(this.gl,a,h);this.unbind();this._attribs.length=0;if(h)for(var e=0;e<h.length;++e){var n=h[e];"number"===typeof n?this._attribs.push(new q(e,1,n)):Array.isArray(n)&&this._attribs.push(new q(e,n.length,n[0],n[1],n[2],n[3]))}this._useElements=!!a;this._elementsType=g||this.gl.UNSIGNED_SHORT};m.prototype.draw=function(h,a,g){g=g||0;var e=this.gl;this._useElements?e.drawElements(h,a,this._elementsType,g):e.drawArrays(h,g,a)};K.exports=function(h,a){return new m(h,a,a.createVertexArrayOES())}},
{"./do-bind.js":355}],358:[function(b,K,G){function q(h){this.bindVertexArrayOES=h.bindVertexArray.bind(h);this.createVertexArrayOES=h.createVertexArray.bind(h);this.deleteVertexArrayOES=h.deleteVertexArray.bind(h)}var m=b("./lib/vao-native.js"),l=b("./lib/vao-emulated.js");K.exports=function(h,a,g,e){var n=h.createVertexArray?new q(h):h.getExtension("OES_vertex_array_object");h=n?m(h,n):l(h);h.update(a,g,e);return h}},{"./lib/vao-emulated.js":356,"./lib/vao-native.js":357}],359:[function(b,K,G){K.exports=
function(q,m,l){q[0]=m[0]+l[0];q[1]=m[1]+l[1];q[2]=m[2]+l[2];return q}},{}],360:[function(b,K,G){K.exports=function(h,a){h=q(h[0],h[1],h[2]);a=q(a[0],a[1],a[2]);m(h,h);m(a,a);a=l(h,a);return 1<a?0:Math.acos(a)};var q=b("./fromValues"),m=b("./normalize"),l=b("./dot")},{"./dot":370,"./fromValues":376,"./normalize":387}],361:[function(b,K,G){K.exports=function(q,m){q[0]=Math.ceil(m[0]);q[1]=Math.ceil(m[1]);q[2]=Math.ceil(m[2]);return q}},{}],362:[function(b,K,G){K.exports=function(q){var m=new Float32Array(3);
m[0]=q[0];m[1]=q[1];m[2]=q[2];return m}},{}],363:[function(b,K,G){K.exports=function(q,m){q[0]=m[0];q[1]=m[1];q[2]=m[2];return q}},{}],364:[function(b,K,G){K.exports=function(){var q=new Float32Array(3);q[0]=0;q[1]=0;q[2]=0;return q}},{}],365:[function(b,K,G){K.exports=function(q,m,l){var h=m[0],a=m[1];m=m[2];var g=l[0],e=l[1];l=l[2];q[0]=a*l-m*e;q[1]=m*g-h*l;q[2]=h*e-a*g;return q}},{}],366:[function(b,K,G){K.exports=b("./distance")},{"./distance":367}],367:[function(b,K,G){K.exports=function(q,m){var l=
m[0]-q[0],h=m[1]-q[1];q=m[2]-q[2];return Math.sqrt(l*l+h*h+q*q)}},{}],368:[function(b,K,G){K.exports=b("./divide")},{"./divide":369}],369:[function(b,K,G){K.exports=function(q,m,l){q[0]=m[0]/l[0];q[1]=m[1]/l[1];q[2]=m[2]/l[2];return q}},{}],370:[function(b,K,G){K.exports=function(q,m){return q[0]*m[0]+q[1]*m[1]+q[2]*m[2]}},{}],371:[function(b,K,G){K.exports=1E-6},{}],372:[function(b,K,G){K.exports=function(m,l){var h=m[0],a=m[1];m=m[2];var g=l[0],e=l[1];l=l[2];return Math.abs(h-g)<=q*Math.max(1,Math.abs(h),
Math.abs(g))&&Math.abs(a-e)<=q*Math.max(1,Math.abs(a),Math.abs(e))&&Math.abs(m-l)<=q*Math.max(1,Math.abs(m),Math.abs(l))};var q=b("./epsilon")},{"./epsilon":371}],373:[function(b,K,G){K.exports=function(q,m){return q[0]===m[0]&&q[1]===m[1]&&q[2]===m[2]}},{}],374:[function(b,K,G){K.exports=function(q,m){q[0]=Math.floor(m[0]);q[1]=Math.floor(m[1]);q[2]=Math.floor(m[2]);return q}},{}],375:[function(b,K,G){K.exports=function(m,l,h,a,g,e){l||(l=3);h||(h=0);for(a=a?Math.min(a*l+h,m.length):m.length;h<a;h+=
l)q[0]=m[h],q[1]=m[h+1],q[2]=m[h+2],g(q,q,e),m[h]=q[0],m[h+1]=q[1],m[h+2]=q[2];return m};var q=b("./create")()},{"./create":364}],376:[function(b,K,G){K.exports=function(q,m,l){var h=new Float32Array(3);h[0]=q;h[1]=m;h[2]=l;return h}},{}],377:[function(b,K,G){K.exports={EPSILON:b("./epsilon"),create:b("./create"),clone:b("./clone"),angle:b("./angle"),fromValues:b("./fromValues"),copy:b("./copy"),set:b("./set"),equals:b("./equals"),exactEquals:b("./exactEquals"),add:b("./add"),subtract:b("./subtract"),
sub:b("./sub"),multiply:b("./multiply"),mul:b("./mul"),divide:b("./divide"),div:b("./div"),min:b("./min"),max:b("./max"),floor:b("./floor"),ceil:b("./ceil"),round:b("./round"),scale:b("./scale"),scaleAndAdd:b("./scaleAndAdd"),distance:b("./distance"),dist:b("./dist"),squaredDistance:b("./squaredDistance"),sqrDist:b("./sqrDist"),length:b("./length"),len:b("./len"),squaredLength:b("./squaredLength"),sqrLen:b("./sqrLen"),negate:b("./negate"),inverse:b("./inverse"),normalize:b("./normalize"),dot:b("./dot"),
cross:b("./cross"),lerp:b("./lerp"),random:b("./random"),transformMat4:b("./transformMat4"),transformMat3:b("./transformMat3"),transformQuat:b("./transformQuat"),rotateX:b("./rotateX"),rotateY:b("./rotateY"),rotateZ:b("./rotateZ"),forEach:b("./forEach")}},{"./add":359,"./angle":360,"./ceil":361,"./clone":362,"./copy":363,"./create":364,"./cross":365,"./dist":366,"./distance":367,"./div":368,"./divide":369,"./dot":370,"./epsilon":371,"./equals":372,"./exactEquals":373,"./floor":374,"./forEach":375,
"./fromValues":376,"./inverse":378,"./len":379,"./length":380,"./lerp":381,"./max":382,"./min":383,"./mul":384,"./multiply":385,"./negate":386,"./normalize":387,"./random":388,"./rotateX":389,"./rotateY":390,"./rotateZ":391,"./round":392,"./scale":393,"./scaleAndAdd":394,"./set":395,"./sqrDist":396,"./sqrLen":397,"./squaredDistance":398,"./squaredLength":399,"./sub":400,"./subtract":401,"./transformMat3":402,"./transformMat4":403,"./transformQuat":404}],378:[function(b,K,G){K.exports=function(q,m){q[0]=
1/m[0];q[1]=1/m[1];q[2]=1/m[2];return q}},{}],379:[function(b,K,G){K.exports=b("./length")},{"./length":380}],380:[function(b,K,G){K.exports=function(q){var m=q[0],l=q[1];q=q[2];return Math.sqrt(m*m+l*l+q*q)}},{}],381:[function(b,K,G){K.exports=function(q,m,l,h){var a=m[0],g=m[1];m=m[2];q[0]=a+h*(l[0]-a);q[1]=g+h*(l[1]-g);q[2]=m+h*(l[2]-m);return q}},{}],382:[function(b,K,G){K.exports=function(q,m,l){q[0]=Math.max(m[0],l[0]);q[1]=Math.max(m[1],l[1]);q[2]=Math.max(m[2],l[2]);return q}},{}],383:[function(b,
K,G){K.exports=function(q,m,l){q[0]=Math.min(m[0],l[0]);q[1]=Math.min(m[1],l[1]);q[2]=Math.min(m[2],l[2]);return q}},{}],384:[function(b,K,G){K.exports=b("./multiply")},{"./multiply":385}],385:[function(b,K,G){K.exports=function(q,m,l){q[0]=m[0]*l[0];q[1]=m[1]*l[1];q[2]=m[2]*l[2];return q}},{}],386:[function(b,K,G){K.exports=function(q,m){q[0]=-m[0];q[1]=-m[1];q[2]=-m[2];return q}},{}],387:[function(b,K,G){K.exports=function(q,m){var l=m[0],h=m[1],a=m[2];l=l*l+h*h+a*a;0<l&&(l=1/Math.sqrt(l),q[0]=
m[0]*l,q[1]=m[1]*l,q[2]=m[2]*l);return q}},{}],388:[function(b,K,G){K.exports=function(q,m){m=m||1;var l=2*Math.random()*Math.PI,h=2*Math.random()-1,a=Math.sqrt(1-h*h)*m;q[0]=Math.cos(l)*a;q[1]=Math.sin(l)*a;q[2]=h*m;return q}},{}],389:[function(b,K,G){K.exports=function(q,m,l,h){var a=l[1];l=l[2];var g=m[1]-a,e=m[2]-l,n=Math.sin(h);h=Math.cos(h);q[0]=m[0];q[1]=a+g*h-e*n;q[2]=l+g*n+e*h;return q}},{}],390:[function(b,K,G){K.exports=function(q,m,l,h){var a=l[0];l=l[2];var g=m[0]-a,e=m[2]-l,n=Math.sin(h);
h=Math.cos(h);q[0]=a+e*n+g*h;q[1]=m[1];q[2]=l+e*h-g*n;return q}},{}],391:[function(b,K,G){K.exports=function(q,m,l,h){var a=l[0];l=l[1];var g=m[0]-a,e=m[1]-l,n=Math.sin(h);h=Math.cos(h);q[0]=a+g*h-e*n;q[1]=l+g*n+e*h;q[2]=m[2];return q}},{}],392:[function(b,K,G){K.exports=function(q,m){q[0]=Math.round(m[0]);q[1]=Math.round(m[1]);q[2]=Math.round(m[2]);return q}},{}],393:[function(b,K,G){K.exports=function(q,m,l){q[0]=m[0]*l;q[1]=m[1]*l;q[2]=m[2]*l;return q}},{}],394:[function(b,K,G){K.exports=function(q,
m,l,h){q[0]=m[0]+l[0]*h;q[1]=m[1]+l[1]*h;q[2]=m[2]+l[2]*h;return q}},{}],395:[function(b,K,G){K.exports=function(q,m,l,h){q[0]=m;q[1]=l;q[2]=h;return q}},{}],396:[function(b,K,G){K.exports=b("./squaredDistance")},{"./squaredDistance":398}],397:[function(b,K,G){K.exports=b("./squaredLength")},{"./squaredLength":399}],398:[function(b,K,G){K.exports=function(q,m){var l=m[0]-q[0],h=m[1]-q[1];q=m[2]-q[2];return l*l+h*h+q*q}},{}],399:[function(b,K,G){K.exports=function(q){var m=q[0],l=q[1];q=q[2];return m*
m+l*l+q*q}},{}],400:[function(b,K,G){K.exports=b("./subtract")},{"./subtract":401}],401:[function(b,K,G){K.exports=function(q,m,l){q[0]=m[0]-l[0];q[1]=m[1]-l[1];q[2]=m[2]-l[2];return q}},{}],402:[function(b,K,G){K.exports=function(q,m,l){var h=m[0],a=m[1];m=m[2];q[0]=h*l[0]+a*l[3]+m*l[6];q[1]=h*l[1]+a*l[4]+m*l[7];q[2]=h*l[2]+a*l[5]+m*l[8];return q}},{}],403:[function(b,K,G){K.exports=function(q,m,l){var h=m[0],a=m[1];m=m[2];var g=l[3]*h+l[7]*a+l[11]*m+l[15];g=g||1;q[0]=(l[0]*h+l[4]*a+l[8]*m+l[12])/
g;q[1]=(l[1]*h+l[5]*a+l[9]*m+l[13])/g;q[2]=(l[2]*h+l[6]*a+l[10]*m+l[14])/g;return q}},{}],404:[function(b,K,G){K.exports=function(q,m,l){var h=m[0],a=m[1],g=m[2];m=l[0];var e=l[1],n=l[2];l=l[3];var p=l*h+e*g-n*a,c=l*a+n*h-m*g,d=l*g+m*a-e*h;h=-m*h-e*a-n*g;q[0]=p*l+h*-m+c*-n-d*-e;q[1]=c*l+h*-e+d*-m-p*-n;q[2]=d*l+h*-n+p*-e-c*-m;return q}},{}],405:[function(b,K,G){K.exports=function(q,m,l){q[0]=m[0]+l[0];q[1]=m[1]+l[1];q[2]=m[2]+l[2];q[3]=m[3]+l[3];return q}},{}],406:[function(b,K,G){K.exports=function(q){var m=
new Float32Array(4);m[0]=q[0];m[1]=q[1];m[2]=q[2];m[3]=q[3];return m}},{}],407:[function(b,K,G){K.exports=function(q,m){q[0]=m[0];q[1]=m[1];q[2]=m[2];q[3]=m[3];return q}},{}],408:[function(b,K,G){K.exports=function(){var q=new Float32Array(4);q[0]=0;q[1]=0;q[2]=0;q[3]=0;return q}},{}],409:[function(b,K,G){K.exports=function(q,m){var l=m[0]-q[0],h=m[1]-q[1],a=m[2]-q[2];q=m[3]-q[3];return Math.sqrt(l*l+h*h+a*a+q*q)}},{}],410:[function(b,K,G){K.exports=function(q,m,l){q[0]=m[0]/l[0];q[1]=m[1]/l[1];q[2]=
m[2]/l[2];q[3]=m[3]/l[3];return q}},{}],411:[function(b,K,G){K.exports=function(q,m){return q[0]*m[0]+q[1]*m[1]+q[2]*m[2]+q[3]*m[3]}},{}],412:[function(b,K,G){K.exports=function(q,m,l,h){var a=new Float32Array(4);a[0]=q;a[1]=m;a[2]=l;a[3]=h;return a}},{}],413:[function(b,K,G){K.exports={create:b("./create"),clone:b("./clone"),fromValues:b("./fromValues"),copy:b("./copy"),set:b("./set"),add:b("./add"),subtract:b("./subtract"),multiply:b("./multiply"),divide:b("./divide"),min:b("./min"),max:b("./max"),
scale:b("./scale"),scaleAndAdd:b("./scaleAndAdd"),distance:b("./distance"),squaredDistance:b("./squaredDistance"),length:b("./length"),squaredLength:b("./squaredLength"),negate:b("./negate"),inverse:b("./inverse"),normalize:b("./normalize"),dot:b("./dot"),lerp:b("./lerp"),random:b("./random"),transformMat4:b("./transformMat4"),transformQuat:b("./transformQuat")}},{"./add":405,"./clone":406,"./copy":407,"./create":408,"./distance":409,"./divide":410,"./dot":411,"./fromValues":412,"./inverse":414,"./length":415,
"./lerp":416,"./max":417,"./min":418,"./multiply":419,"./negate":420,"./normalize":421,"./random":422,"./scale":423,"./scaleAndAdd":424,"./set":425,"./squaredDistance":426,"./squaredLength":427,"./subtract":428,"./transformMat4":429,"./transformQuat":430}],414:[function(b,K,G){K.exports=function(q,m){q[0]=1/m[0];q[1]=1/m[1];q[2]=1/m[2];q[3]=1/m[3];return q}},{}],415:[function(b,K,G){K.exports=function(q){var m=q[0],l=q[1],h=q[2];q=q[3];return Math.sqrt(m*m+l*l+h*h+q*q)}},{}],416:[function(b,K,G){K.exports=
function(q,m,l,h){var a=m[0],g=m[1],e=m[2];m=m[3];q[0]=a+h*(l[0]-a);q[1]=g+h*(l[1]-g);q[2]=e+h*(l[2]-e);q[3]=m+h*(l[3]-m);return q}},{}],417:[function(b,K,G){K.exports=function(q,m,l){q[0]=Math.max(m[0],l[0]);q[1]=Math.max(m[1],l[1]);q[2]=Math.max(m[2],l[2]);q[3]=Math.max(m[3],l[3]);return q}},{}],418:[function(b,K,G){K.exports=function(q,m,l){q[0]=Math.min(m[0],l[0]);q[1]=Math.min(m[1],l[1]);q[2]=Math.min(m[2],l[2]);q[3]=Math.min(m[3],l[3]);return q}},{}],419:[function(b,K,G){K.exports=function(q,
m,l){q[0]=m[0]*l[0];q[1]=m[1]*l[1];q[2]=m[2]*l[2];q[3]=m[3]*l[3];return q}},{}],420:[function(b,K,G){K.exports=function(q,m){q[0]=-m[0];q[1]=-m[1];q[2]=-m[2];q[3]=-m[3];return q}},{}],421:[function(b,K,G){K.exports=function(q,m){var l=m[0],h=m[1],a=m[2];m=m[3];var g=l*l+h*h+a*a+m*m;0<g&&(g=1/Math.sqrt(g),q[0]=l*g,q[1]=h*g,q[2]=a*g,q[3]=m*g);return q}},{}],422:[function(b,K,G){var q=b("./normalize"),m=b("./scale");K.exports=function(l,h){h=h||1;l[0]=Math.random();l[1]=Math.random();l[2]=Math.random();
l[3]=Math.random();q(l,l);m(l,l,h);return l}},{"./normalize":421,"./scale":423}],423:[function(b,K,G){K.exports=function(q,m,l){q[0]=m[0]*l;q[1]=m[1]*l;q[2]=m[2]*l;q[3]=m[3]*l;return q}},{}],424:[function(b,K,G){K.exports=function(q,m,l,h){q[0]=m[0]+l[0]*h;q[1]=m[1]+l[1]*h;q[2]=m[2]+l[2]*h;q[3]=m[3]+l[3]*h;return q}},{}],425:[function(b,K,G){K.exports=function(q,m,l,h,a){q[0]=m;q[1]=l;q[2]=h;q[3]=a;return q}},{}],426:[function(b,K,G){K.exports=function(q,m){var l=m[0]-q[0],h=m[1]-q[1],a=m[2]-q[2];
q=m[3]-q[3];return l*l+h*h+a*a+q*q}},{}],427:[function(b,K,G){K.exports=function(q){var m=q[0],l=q[1],h=q[2];q=q[3];return m*m+l*l+h*h+q*q}},{}],428:[function(b,K,G){K.exports=function(q,m,l){q[0]=m[0]-l[0];q[1]=m[1]-l[1];q[2]=m[2]-l[2];q[3]=m[3]-l[3];return q}},{}],429:[function(b,K,G){K.exports=function(q,m,l){var h=m[0],a=m[1],g=m[2];m=m[3];q[0]=l[0]*h+l[4]*a+l[8]*g+l[12]*m;q[1]=l[1]*h+l[5]*a+l[9]*g+l[13]*m;q[2]=l[2]*h+l[6]*a+l[10]*g+l[14]*m;q[3]=l[3]*h+l[7]*a+l[11]*g+l[15]*m;return q}},{}],430:[function(b,
K,G){K.exports=function(q,m,l){var h=m[0],a=m[1],g=m[2],e=l[0],n=l[1],p=l[2];l=l[3];var c=l*h+n*g-p*a,d=l*a+p*h-e*g,f=l*g+e*a-n*h;h=-e*h-n*a-p*g;q[0]=c*l+h*-e+d*-p-f*-n;q[1]=d*l+h*-n+f*-e-c*-p;q[2]=f*l+h*-p+c*-n-d*-e;q[3]=m[3];return q}},{}],431:[function(b,K,G){var q=b("glsl-tokenizer"),m=b("atob-lite");K.exports=function(l){l=Array.isArray(l)?l:q(l);for(var h=0;h<l.length;h++){var a=l[h];if("preprocessor"===a.type&&(a=a.data.match(/#define\s+SHADER_NAME(_B64)?\s+(.+)$/))&&a[2])return l=a[2],(a[1]?
m(l):l).trim()}}},{"atob-lite":77,"glsl-tokenizer":438}],432:[function(b,K,G){K.exports=function(D){function A(oa){oa.length&&U.push({type:y[M],data:oa,position:Z,line:S,column:X})}function t(){Q=Q.length?[]:Q;if("/"===T&&"*"===N)return Z=P+H-1,M=n,T=N,H+1;if("/"===T&&"/"===N)return Z=P+H-1,M=p,T=N,H+1;if("#"===N)return M=c,Z=P+H,H;if(/\s/.test(N))return M=x,Z=P+H,H;aa=/\d/.test(N);fa=/[^\w_]/.test(N);Z=P+H;M=aa?f:fa?d:e;return H}function B(){if(("\r"===N||"\n"===N)&&"\\"!==T)return A(Q.join("")),
M=g,H;Q.push(N);T=N;return H+1}function F(){if("."===T&&/\d/.test(N))return M=k,H;if("/"===T&&"*"===N)return M=n,H;if("/"===T&&"/"===N)return M=p,H;if("."===N&&Q.length){for(;I(Q););M=k;return H}if(";"===N||")"===N||"("===N){if(Q.length)for(;I(Q););A(N);M=g;return H+1}var oa=2===Q.length&&"="!==N;if(/[\w_\d\s]/.test(N)||oa){for(;I(Q););M=g;return H}Q.push(N);T=N;return H+1}function I(oa){var na=0;do{var la=m.indexOf(oa.slice(0,oa.length+na).join(""));var ia=m[la];if(-1===la){if(0<na--+oa.length)continue;
ia=oa.slice(0,1).join("")}A(ia);Z+=ia.length;Q=Q.slice(ia.length);return Q.length}while(1)}function J(){if("."===N||/[eE]/.test(N))return Q.push(N),M=k,T=N,H+1;if("x"===N&&1===Q.length&&"0"===Q[0])return M=z,Q.push(N),T=N,H+1;if(/[^\d]/.test(N))return A(Q.join("")),M=g,H;Q.push(N);T=N;return H+1}function L(){"f"===N&&(Q.push(N),T=N,H+=1);if(/[eE]/.test(N)||("-"===N||"+"===N)&&/[eE]/.test(T))return Q.push(N),T=N,H+1;if(/[^\d]/.test(N))return A(Q.join("")),M=g,H;Q.push(N);T=N;return H+1}var H=0,P=0,
M=g,N,T,Q=[],U=[],S=1,X=0,Z=0,aa=!1,fa=!1,ha="",ja;D=D||{};var ba=l,ma=q;"300 es"===D.version&&(ba=a,ma=h);var qa={},ka={};for(H=0;H<ba.length;H++)qa[ba[H]]=!0;for(H=0;H<ma.length;H++)ka[ma[H]]=!0;return function(oa){U=[];if(null!==oa){H=0;oa.toString&&(oa=oa.toString());ha+=oa.replace(/\r\n/g,"\n");for(ja=ha.length;N=ha[H],H<ja;){oa=H;switch(M){case n:"/"===N&&"*"===T?(Q.push(N),A(Q.join("")),M=g):(Q.push(N),T=N);H+=1;break;case p:H=B();break;case c:H=B();break;case d:H=F();break;case f:H=J();break;
case z:/[^a-fA-F0-9]/.test(N)?(A(Q.join("")),M=g):(Q.push(N),T=N,H+=1);break;case k:H=L();break;case e:if(/[^\d\w_]/.test(N)){var na=Q.join("");M=ka[na]?v:qa[na]?u:r;A(Q.join(""));M=g}else Q.push(N),T=N,H+=1;break;case x:/[^\s]/g.test(N)?(A(Q.join("")),M=g):(Q.push(N),T=N,H+=1);break;case g:H=t()}if(oa!==H)switch(ha[oa]){case "\n":X=0;++S;break;default:++X}}P+=H;ha=ha.slice(H);return U}Q.length&&A(Q.join(""));M=C;A("(eof)");return U}};var q=b("./lib/literals"),m=b("./lib/operators"),l=b("./lib/builtins"),
h=b("./lib/literals-300es"),a=b("./lib/builtins-300es"),g=999,e=9999,n=0,p=1,c=2,d=3,f=4,k=5,r=6,u=7,v=8,x=9,C=10,z=11,y="block-comment line-comment preprocessor operator integer float ident builtin keyword whitespace eof integer".split(" ")},{"./lib/builtins":434,"./lib/builtins-300es":433,"./lib/literals":436,"./lib/literals-300es":435,"./lib/operators":437}],433:[function(b,K,G){b=b("./builtins");b=b.slice().filter(function(q){return!/^(gl_|texture)/.test(q)});K.exports=b.concat("gl_VertexID gl_InstanceID gl_Position gl_PointSize gl_FragCoord gl_FrontFacing gl_FragDepth gl_PointCoord gl_MaxVertexAttribs gl_MaxVertexUniformVectors gl_MaxVertexOutputVectors gl_MaxFragmentInputVectors gl_MaxVertexTextureImageUnits gl_MaxCombinedTextureImageUnits gl_MaxTextureImageUnits gl_MaxFragmentUniformVectors gl_MaxDrawBuffers gl_MinProgramTexelOffset gl_MaxProgramTexelOffset gl_DepthRangeParameters gl_DepthRange trunc round roundEven isnan isinf floatBitsToInt floatBitsToUint intBitsToFloat uintBitsToFloat packSnorm2x16 unpackSnorm2x16 packUnorm2x16 unpackUnorm2x16 packHalf2x16 unpackHalf2x16 outerProduct transpose determinant inverse texture textureSize textureProj textureLod textureOffset texelFetch texelFetchOffset textureProjOffset textureLodOffset textureProjLod textureProjLodOffset textureGrad textureGradOffset textureProjGrad textureProjGradOffset".split(" "))},
{"./builtins":434}],434:[function(b,K,G){K.exports="abs acos all any asin atan ceil clamp cos cross dFdx dFdy degrees distance dot equal exp exp2 faceforward floor fract gl_BackColor gl_BackLightModelProduct gl_BackLightProduct gl_BackMaterial gl_BackSecondaryColor gl_ClipPlane gl_ClipVertex gl_Color gl_DepthRange gl_DepthRangeParameters gl_EyePlaneQ gl_EyePlaneR gl_EyePlaneS gl_EyePlaneT gl_Fog gl_FogCoord gl_FogFragCoord gl_FogParameters gl_FragColor gl_FragCoord gl_FragData gl_FragDepth gl_FragDepthEXT gl_FrontColor gl_FrontFacing gl_FrontLightModelProduct gl_FrontLightProduct gl_FrontMaterial gl_FrontSecondaryColor gl_LightModel gl_LightModelParameters gl_LightModelProducts gl_LightProducts gl_LightSource gl_LightSourceParameters gl_MaterialParameters gl_MaxClipPlanes gl_MaxCombinedTextureImageUnits gl_MaxDrawBuffers gl_MaxFragmentUniformComponents gl_MaxLights gl_MaxTextureCoords gl_MaxTextureImageUnits gl_MaxTextureUnits gl_MaxVaryingFloats gl_MaxVertexAttribs gl_MaxVertexTextureImageUnits gl_MaxVertexUniformComponents gl_ModelViewMatrix gl_ModelViewMatrixInverse gl_ModelViewMatrixInverseTranspose gl_ModelViewMatrixTranspose gl_ModelViewProjectionMatrix gl_ModelViewProjectionMatrixInverse gl_ModelViewProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixTranspose gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_Normal gl_NormalMatrix gl_NormalScale gl_ObjectPlaneQ gl_ObjectPlaneR gl_ObjectPlaneS gl_ObjectPlaneT gl_Point gl_PointCoord gl_PointParameters gl_PointSize gl_Position gl_ProjectionMatrix gl_ProjectionMatrixInverse gl_ProjectionMatrixInverseTranspose gl_ProjectionMatrixTranspose gl_SecondaryColor gl_TexCoord gl_TextureEnvColor gl_TextureMatrix gl_TextureMatrixInverse gl_TextureMatrixInverseTranspose gl_TextureMatrixTranspose gl_Vertex greaterThan greaterThanEqual inversesqrt length lessThan lessThanEqual log log2 matrixCompMult max min mix mod normalize not notEqual pow radians reflect refract sign sin smoothstep sqrt step tan texture2D texture2DLod texture2DProj texture2DProjLod textureCube textureCubeLod texture2DLodEXT texture2DProjLodEXT textureCubeLodEXT texture2DGradEXT texture2DProjGradEXT textureCubeGradEXT".split(" ")},
{}],435:[function(b,K,G){b=b("./literals");K.exports=b.slice().concat("layout centroid smooth case mat2x2 mat2x3 mat2x4 mat3x2 mat3x3 mat3x4 mat4x2 mat4x3 mat4x4 uvec2 uvec3 uvec4 samplerCubeShadow sampler2DArray sampler2DArrayShadow isampler2D isampler3D isamplerCube isampler2DArray usampler2D usampler3D usamplerCube usampler2DArray coherent restrict readonly writeonly resource atomic_uint noperspective patch sample subroutine common partition active filter image1D image2D image3D imageCube iimage1D iimage2D iimage3D iimageCube uimage1D uimage2D uimage3D uimageCube image1DArray image2DArray iimage1DArray iimage2DArray uimage1DArray uimage2DArray image1DShadow image2DShadow image1DArrayShadow image2DArrayShadow imageBuffer iimageBuffer uimageBuffer sampler1DArray sampler1DArrayShadow isampler1D isampler1DArray usampler1D usampler1DArray isampler2DRect usampler2DRect samplerBuffer isamplerBuffer usamplerBuffer sampler2DMS isampler2DMS usampler2DMS sampler2DMSArray isampler2DMSArray usampler2DMSArray".split(" "))},
{"./literals":436}],436:[function(b,K,G){K.exports="precision highp mediump lowp attribute const uniform varying break continue do for while if else in out inout float int uint void bool true false discard return mat2 mat3 mat4 vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow struct asm class union enum typedef template this packed goto switch default inline noinline volatile public static extern external interface long short double half fixed unsigned input output hvec2 hvec3 hvec4 dvec2 dvec3 dvec4 fvec2 fvec3 fvec4 sampler2DRect sampler3DRect sampler2DRectShadow sizeof cast namespace using".split(" ")},
{}],437:[function(b,K,G){K.exports="<<= >>= ++ -- << >> <= >= == != && || += -= *= /= %= &= ^^ ^= |= ( ) [ ] . ! ~ * / % + - < > & ^ | ? : = , ; { }".split(" ")},{}],438:[function(b,K,G){var q=b("./index");K.exports=function(m,l){l=q(l);var h=[];h=h.concat(l(m));return h=h.concat(l(null))}},{"./index":432}],439:[function(b,K,G){arguments[4][257][0].apply(G,arguments)},{dup:257}],440:[function(b,K,G){G="undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:
{};b=b("is-browser");b="function"===typeof G.matchMedia?!G.matchMedia("(hover: none)").matches:b;K.exports=b},{"is-browser":464}],441:[function(b,K,G){function q(){var m=!1;try{var l=Object.defineProperty({},"passive",{get:function(){m=!0}});window.addEventListener("test",null,l);window.removeEventListener("test",null,l)}catch(h){m=!1}return m}b=b("is-browser");K.exports=b&&q()},{"is-browser":464}],442:[function(b,K,G){G.read=function(q,m,l,h,a){var g=8*a-h-1;var e=(1<<g)-1,n=e>>1,p=-7;a=l?a-1:0;
var c=l?-1:1,d=q[m+a];a+=c;l=d&(1<<-p)-1;d>>=-p;for(p+=g;0<p;l=256*l+q[m+a],a+=c,p-=8);g=l&(1<<-p)-1;l>>=-p;for(p+=h;0<p;g=256*g+q[m+a],a+=c,p-=8);if(0===l)l=1-n;else{if(l===e)return g?NaN:Infinity*(d?-1:1);g+=Math.pow(2,h);l-=n}return(d?-1:1)*g*Math.pow(2,l-h)};G.write=function(q,m,l,h,a,g){var e,n=8*g-a-1,p=(1<<n)-1,c=p>>1,d=23===a?Math.pow(2,-24)-Math.pow(2,-77):0;g=h?0:g-1;var f=h?1:-1,k=0>m||0===m&&0>1/m?1:0;m=Math.abs(m);isNaN(m)||Infinity===m?(m=isNaN(m)?1:0,h=p):(h=Math.floor(Math.log(m)/
Math.LN2),1>m*(e=Math.pow(2,-h))&&(h--,e*=2),m=1<=h+c?m+d/e:m+d*Math.pow(2,1-c),2<=m*e&&(h++,e/=2),h+c>=p?(m=0,h=p):1<=h+c?(m=(m*e-1)*Math.pow(2,a),h+=c):(m=m*Math.pow(2,c-1)*Math.pow(2,a),h=0));for(;8<=a;q[l+g]=m&255,g+=f,m/=256,a-=8);h=h<<a|m;for(n+=a;0<n;q[l+g]=h&255,g+=f,h/=256,n-=8);q[l+g-f]|=128*k}},{}],443:[function(b,K,G){var q=b("./types");K.exports=function(m,l){var h,a;for(h in q)if(a=q[h].detect(m,l))return h}},{"./types":446}],444:[function(b,K,G){(function(q){(function(){function m(p,
c){var d=n(p,c);if(d in e&&(p=e[d].calculate(p,c),!1!==p))return p.type=d,p;throw new TypeError("unsupported file type: "+d+" (file: "+c+")");}function l(p,c){a.open(p,"r",function(d,f){if(d)return c(d);a.fstat(f,function(k,r){if(k)return c(k);k=r.size;if(0>=k)return c(Error("File size is not greater than 0 \u2014\u2014 "+p));k=Math.min(k,524288);var u=q.alloc(k);a.read(f,u,0,k,0,function(v){if(v)return c(v);a.close(f,function(x){c(x,u)})})})})}function h(p){p=a.openSync(p,"r");var c=a.fstatSync(p).size;
c=Math.min(c,524288);var d=q.alloc(c);a.readSync(p,d,0,c,0);a.closeSync(p);return d}var a=b("fs"),g=b("path"),e=b("./types"),n=b("./detector");K.exports=function(p,c){if(q.isBuffer(p))return m(p);if("string"!==typeof p)throw new TypeError("invalid invocation");var d=g.resolve(p);if("function"===typeof c)l(d,function(f,k){if(f)return c(f);try{var r=m(k,d)}catch(u){f=u}c(f,r)});else return p=h(d),m(p,d)};K.exports.types=Object.keys(e)}).call(this)}).call(this,b("buffer").Buffer)},{"./detector":443,
"./types":446,buffer:111,fs:109,path:507}],445:[function(b,K,G){K.exports=function(q,m,l,h){return q["readUInt"+m+(h?"BE":"LE")].call(q,l||0)}},{}],446:[function(b,K,G){b={bmp:b("./types/bmp"),cur:b("./types/cur"),dds:b("./types/dds"),gif:b("./types/gif"),icns:b("./types/icns"),ico:b("./types/ico"),jpg:b("./types/jpg"),png:b("./types/png"),psd:b("./types/psd"),svg:b("./types/svg"),tiff:b("./types/tiff"),webp:b("./types/webp")};K.exports=b},{"./types/bmp":447,"./types/cur":448,"./types/dds":449,"./types/gif":450,
"./types/icns":451,"./types/ico":452,"./types/jpg":453,"./types/png":454,"./types/psd":455,"./types/svg":456,"./types/tiff":457,"./types/webp":458}],447:[function(b,K,G){K.exports={detect:function(q){return"BM"===q.toString("ascii",0,2)},calculate:function(q){return{width:q.readUInt32LE(18),height:Math.abs(q.readInt32LE(22))}}}},{}],448:[function(b,K,G){K.exports={detect:function(q){return 0!==q.readUInt16LE(0)?!1:2===q.readUInt16LE(2)},calculate:b("./ico").calculate}},{"./ico":452}],449:[function(b,
K,G){K.exports={detect:function(q){return 542327876===q.readUInt32LE(0)},calculate:function(q){return{height:q.readUInt32LE(12),width:q.readUInt32LE(16)}}}},{}],450:[function(b,K,G){var q=/^GIF8[79]a/;K.exports={detect:function(m){m=m.toString("ascii",0,6);return q.test(m)},calculate:function(m){return{width:m.readUInt16LE(6),height:m.readUInt16LE(8)}}}},{}],451:[function(b,K,G){function q(h,a){var g=a+4;return[h.toString("ascii",a,g),h.readUInt32BE(g)]}function m(h){var a=l[h];return{width:a,height:a,
type:h}}var l={ICON:32,"ICN#":32,"icm#":16,icm4:16,icm8:16,"ics#":16,ics4:16,ics8:16,is32:16,s8mk:16,icp4:16,icl4:32,icl8:32,il32:32,l8mk:32,icp5:32,ic11:32,ich4:48,ich8:48,ih32:48,h8mk:48,icp6:64,ic12:32,it32:128,t8mk:128,ic07:128,ic08:256,ic13:256,ic09:512,ic14:512,ic10:1024};K.exports={detect:function(h){return"icns"===h.toString("ascii",0,4)},calculate:function(h){var a=h.length,g=8,e=h.readUInt32BE(4),n;var p=q(h,g);var c=m(p[0]);g+=p[1];if(g===e)return c;for(n={width:c.width,height:c.height,
images:[c]};g<e&&g<a;)p=q(h,g),c=m(p[0]),g+=p[1],n.images.push(c);return n}}},{}],452:[function(b,K,G){function q(l,h){l=l.readUInt8(h);return 0===l?256:l}function m(l,h){h=6+16*h;return{width:q(l,h),height:q(l,h+1)}}K.exports={detect:function(l){return 0!==l.readUInt16LE(0)?!1:1===l.readUInt16LE(2)},calculate:function(l){var h=l.readUInt16LE(4),a=m(l,0),g;if(1===h)return a;a.images=[{width:a.width,height:a.height}];for(g=1;g<h;g+=1)a.images.push(m(l,g));return a}}},{}],453:[function(b,K,G){var q=
b("../readUInt");K.exports={detect:function(m){return"ffd8"===m.toString("hex",0,2)},calculate:function(m){m=m.slice(4);for(var l,h,a;m.length;){h=m.readUInt16BE(0);if("45786966"===m.toString("hex",2,6)){l=m.slice(2,h);var g=l.toString("hex",6,8);a="4d4d"===g;g="4949"===g;if(a||g)b:{g=q(l,16,14,a);for(var e=0;e<g;e++){var n=16+12*e;var p=n+12;if(n>l.length)break;p=l.slice(n,p);if(274===q(p,16,0,a)){if(3!==q(p,16,2,a))break;if(1!==q(p,32,4,a))break;l=q(p,16,8,a);break b}}l=void 0}else l=void 0}a=m;
g=h;if(g>a.length)throw new TypeError("Corrupt JPG, exceeded buffer limits");if(255!==a[g])throw new TypeError("Invalid JPG, marker table corrupted");a=m[h+1];if(192===a||193===a||194===a)return h+=5,h={height:m.readUInt16BE(h),width:m.readUInt16BE(h+2)},l?{width:h.width,height:h.height,orientation:l}:h;m=m.slice(h+2)}throw new TypeError("Invalid JPG, no size found");}}},{"../readUInt":445}],454:[function(b,K,G){K.exports={detect:function(q){if("PNG\r\n\u001a\n"===q.toString("ascii",1,8)){var m=q.toString("ascii",
12,16);"CgBI"===m&&(m=q.toString("ascii",28,32));if("IHDR"!==m)throw new TypeError("invalid png");return!0}},calculate:function(q){return"CgBI"===q.toString("ascii",12,16)?{width:q.readUInt32BE(32),height:q.readUInt32BE(36)}:{width:q.readUInt32BE(16),height:q.readUInt32BE(20)}}}},{}],455:[function(b,K,G){K.exports={detect:function(q){return"8BPS"===q.toString("ascii",0,4)},calculate:function(q){return{width:q.readUInt32BE(18),height:q.readUInt32BE(14)}}}},{}],456:[function(b,K,G){function q(e){if(e=
/([0-9.]+)([a-z]*)/.exec(e))return Math.round(parseFloat(e[1])*(g[e[2]]||1))}var m=/<svg\s([^>"']|"[^"]*"|'[^']*')*>/,l=/\swidth=(['"])([^%]+?)\1/,h=/\sheight=(['"])([^%]+?)\1/,a=/\sviewBox=(['"])(.+?)\1/,g={cm:96/2.54,mm:96/2.54/10,m:96/2.54*100,pt:96/72,pc:96/72/12,em:16,ex:8};K.exports={detect:function(e){return m.test(e)},calculate:function(e){if(e=e.toString("utf8").match(m)){var n=e[0];e=n.match(l);var p=n.match(h);n=n.match(a);e=e&&q(e[2]);p=p&&q(p[2]);var c;if(c=n)n=n[2].split(" "),c={width:q(n[2]),
height:q(n[3])};n=c;if(e&&p)return{width:e,height:p};if(n)return c=n.width/n.height,e=e?{width:e,height:Math.floor(e/c)}:p?{width:Math.floor(p*c),height:p}:{width:n.width,height:n.height},e}throw new TypeError("invalid svg");}}},{}],457:[function(b,K,G){(function(q){(function(){var m=b("fs"),l=b("../readUInt");K.exports={detect:function(h){h=h.toString("hex",0,4);return"49492a00"===h||"4d4d002a"===h},calculate:function(h,a){if(!a)throw new TypeError("Tiff doesn't support buffer");var g=h.toString("ascii",
0,2);g="BE"===("II"===g?"LE":"MM"===g?"BE":void 0);h=l(h,32,4,g);var e=1024,n=m.statSync(a).size;h+e>n&&(e=n-h-10);n=q.alloc(e);a=m.openSync(a,"r");m.readSync(a,n,0,e,h);h=n.slice(2);a={};for(var p;h&&h.length&&(e=l(h,16,0,g),n=l(h,16,2,g),p=l(h,32,4,g),0!==e);){if(1===p&&(3===n||4===n)){n=h;p=g;var c=l(n,16,8,p);n=(l(n,16,10,p)<<16)+c;a[e]=n}h=24<h.length?h.slice(12):void 0}g=a[256];a=a[257];if(!g||!a)throw new TypeError("Invalid Tiff, missing tags");return{width:g,height:a}}}}).call(this)}).call(this,
b("buffer").Buffer)},{"../readUInt":445,buffer:111,fs:109}],458:[function(b,K,G){K.exports={detect:function(q){var m="RIFF"===q.toString("ascii",0,4),l="WEBP"===q.toString("ascii",8,12);q="VP8"===q.toString("ascii",12,15);return m&&l&&q},calculate:function(q){var m=q.toString("ascii",12,16);q=q.slice(20,30);if("VP8X"===m)return m=q[0],0===(m&192)&&0===(m&1)?{width:1+q.readUIntLE(4,3),height:1+q.readUIntLE(7,3)}:!1;if("VP8 "===m&&47!==q[0])return{width:q.readInt16LE(6)&16383,height:q.readInt16LE(8)&
16383};var l=q.toString("hex",3,6);return"VP8L"===m&&"9d012a"!==l?{width:1+((q[2]&63)<<8|q[1]),height:1+((q[4]&15)<<10|q[3]<<2|(q[2]&192)>>6)}:!1}}},{}],459:[function(b,K,G){function q(p,c,d){this.vertices=p;this.adjacent=c;this.boundary=d;this.lastVisited=-1}function m(p,c,d){this.vertices=p;this.cell=c;this.index=d}function l(p,c){return e(p.vertices,c.vertices)}function h(p){for(var c=["function orient(){var tuple=this.tuple;return test("],d=0;d<=p;++d)0<d&&c.push(","),c.push("tuple[",d,"]");c.push(")}return orient");
c=new Function("test",c.join(""));(p=g[p+1])||(p=g);return c(p)}function a(p,c,d){this.dimension=p;this.vertices=c;this.simplices=d;this.interior=d.filter(function(f){return!f.boundary});this.tuple=Array(p+1);for(c=0;c<=p;++c)this.tuple[c]=this.vertices[c];(c=n[p])||(c=n[p]=h(p));this.orient=c}K.exports=function(p,c){var d=p.length;if(0===d)throw Error("Must have at least d+1 points");var f=p[0].length;if(d<=f)throw Error("Must input at least d+1 points");var k=p.slice(0,f+1),r=g.apply(void 0,k);
if(0===r)throw Error("Input not in general position");for(var u=Array(f+1),v=0;v<=f;++v)u[v]=v;0>r&&(u[0]=1,u[1]=0);r=new q(u,Array(f+1),!1);var x=r.adjacent,C=Array(f+2);for(v=0;v<=f;++v){for(var z=u.slice(),y=0;y<=f;++y)y===v&&(z[y]=-1);y=z[0];z[0]=z[1];z[1]=y;z=new q(z,Array(f+1),!0);x[v]=z;C[v]=z}C[f+1]=r;for(v=0;v<=f;++v)for(z=x[v].vertices,u=x[v].adjacent,y=0;y<=f;++y){var D=z[y];if(0>D)u[y]=r;else for(var A=0;A<=f;++A)0>x[A].vertices.indexOf(D)&&(u[y]=x[A])}k=new a(f,k,C);c=!!c;for(v=f+1;v<
d;++v)k.insert(p[v],c);return k.boundary()};var g=b("robust-orientation"),e=b("simplicial-complex").compareCells;q.prototype.flip=function(){var p=this.vertices[0];this.vertices[0]=this.vertices[1];this.vertices[1]=p;p=this.adjacent[0];this.adjacent[0]=this.adjacent[1];this.adjacent[1]=p};var n=[];b=a.prototype;b.handleBoundaryDegeneracy=function(p,c){var d=this.dimension,f=this.vertices.length-1,k=this.tuple,r=this.vertices,u=[p];for(p.lastVisited=-f;0<u.length;){p=u.pop();p=p.adjacent;for(var v=
0;v<=d;++v){var x=p[v];if(x.boundary&&!(x.lastVisited<=-f)){for(var C=x.vertices,z=0;z<=d;++z){var y=C[z];k[z]=0>y?c:r[y]}C=this.orient();if(0<C)return x;x.lastVisited=-f;0===C&&u.push(x)}}}return null};b.walk=function(p,c){var d=this.vertices.length-1,f=this.dimension,k=this.vertices,r=this.tuple,u=this.interior[c?this.interior.length*Math.random()|0:this.interior.length-1];a:for(;!u.boundary;){var v=u.vertices;c=u.adjacent;for(var x=0;x<=f;++x)r[x]=k[v[x]];u.lastVisited=d;for(x=0;x<=f;++x)if(u=
c[x],!(u.lastVisited>=d)){v=r[x];r[x]=p;var C=this.orient();r[x]=v;if(0>C)continue a;else u.lastVisited=u.boundary?-d:d}return}return u};b.addPeaks=function(p,c){var d=this.vertices.length-1,f=this.dimension,k=this.vertices,r=this.tuple,u=this.interior,v=this.simplices,x=[c];c.lastVisited=d;c.vertices[c.vertices.indexOf(-1)]=d;c.boundary=!1;u.push(c);for(var C=[];0<x.length;){c=x.pop();var z=c.vertices,y=c.adjacent,D=z.indexOf(d);if(!(0>D))for(var A=0;A<=f;++A)if(A!==D){var t=y[A];if(t.boundary&&
!(t.lastVisited>=d)){var B=t.vertices;if(t.lastVisited!==-d){for(var F=0,I=0;I<=f;++I)0>B[I]?(F=I,r[I]=p):r[I]=k[B[I]];if(0<this.orient()){B[F]=d;t.boundary=!1;u.push(t);x.push(t);t.lastVisited=d;continue}else t.lastVisited=-d}I=t.adjacent;B=z.slice();var J=y.slice();F=new q(B,J,!0);v.push(F);var L=I.indexOf(c);if(!(0>L))for(I[L]=F,J[D]=t,B[A]=-1,J[A]=c,y[A]=F,F.flip(),I=0;I<=f;++I)if(t=B[I],!(0>t||t===d)){t=Array(f-1);for(L=J=0;L<=f;++L){var H=B[L];0>H||L===I||(t[J++]=H)}C.push(new m(t,F,I))}}}}C.sort(l);
for(A=0;A+1<C.length;A+=2)p=C[A],c=C[A+1],d=c.index,0>p.index||0>d||(p.cell.adjacent[p.index]=c.cell,c.cell.adjacent[c.index]=p.cell)};b.insert=function(p,c){var d=this.vertices;d.push(p);if(c=this.walk(p,c)){for(var f=this.dimension,k=this.tuple,r=0;r<=f;++r){var u=c.vertices[r];k[r]=0>u?p:d[u]}d=this.orient(k);if(!(0>d)){if(0===d&&(c=this.handleBoundaryDegeneracy(c,p),!c))return;this.addPeaks(p,c)}}};b.boundary=function(){for(var p=this.dimension,c=[],d=this.simplices,f=d.length,k=0;k<f;++k){var r=
d[k];if(r.boundary){var u=Array(p);r=r.vertices;for(var v=0,x=0,C=0;C<=p;++C)0<=r[C]?u[v++]=r[C]:x=C&1;x===(p&1)&&(r=u[0],u[0]=u[1],u[1]=r);c.push(u)}}return c}},{"robust-orientation":548,"simplicial-complex":558}],460:[function(b,K,G){function q(r,u,v,x,C){this.mid=r;this.left=u;this.right=v;this.leftPoints=x;this.rightPoints=C;this.count=(u?u.count:0)+(v?v.count:0)+x.length}function m(r,u){r.mid=u.mid;r.left=u.left;r.right=u.right;r.leftPoints=u.leftPoints;r.rightPoints=u.rightPoints;r.count=u.count}
function l(r,u){u=d(u);r.mid=u.mid;r.left=u.left;r.right=u.right;r.leftPoints=u.leftPoints;r.rightPoints=u.rightPoints;r.count=u.count}function h(r,u){var v=r.intervals([]);u=v.indexOf(u);if(0>u)return 0;v.splice(u,1);l(r,v);return 1}function a(r,u,v){for(var x=0;x<r.length&&r[x][0]<=u;++x){var C=v(r[x]);if(C)return C}}function g(r,u,v){for(var x=r.length-1;0<=x&&r[x][1]>=u;--x){var C=v(r[x]);if(C)return C}}function e(r,u){for(var v=0;v<r.length;++v){var x=u(r[v]);if(x)return x}}function n(r,u){return r-
u}function p(r,u){var v=r[0]-u[0];return v?v:r[1]-u[1]}function c(r,u){var v=r[1]-u[1];return v?v:r[0]-u[0]}function d(r){if(0===r.length)return null;for(var u=[],v=0;v<r.length;++v)u.push(r[v][0],r[v][1]);u.sort(n);u=u[u.length>>1];var x=[],C=[],z=[];for(v=0;v<r.length;++v){var y=r[v];y[1]<u?x.push(y):u<y[0]?C.push(y):z.push(y)}r=z.slice();z.sort(p);r.sort(c);return new q(u,d(x),d(C),z,r)}function f(r){this.root=r}var k=b("binary-search-bounds");K.exports=function(r){return r&&0!==r.length?new f(d(r)):
new f(null)};b=q.prototype;b.intervals=function(r){r.push.apply(r,this.leftPoints);this.left&&this.left.intervals(r);this.right&&this.right.intervals(r);return r};b.insert=function(r){var u=this.count-this.leftPoints.length;this.count+=1;if(r[1]<this.mid)this.left?4*(this.left.count+1)>3*(u+1)?(u=this.intervals([]),u.push(r),l(this,u)):this.left.insert(r):this.left=d([r]);else if(r[0]>this.mid)this.right?4*(this.right.count+1)>3*(u+1)?(u=this.intervals([]),u.push(r),l(this,u)):this.right.insert(r):
this.right=d([r]);else{u=k.ge(this.leftPoints,r,p);var v=k.ge(this.rightPoints,r,c);this.leftPoints.splice(u,0,r);this.rightPoints.splice(v,0,r)}};b.remove=function(r){var u=this.count-this.leftPoints;if(r[1]<this.mid){if(!this.left)return 0;if(4*(this.right?this.right.count:0)>3*(u-1))return h(this,r);u=this.left.remove(r);if(2===u)return this.left=null,--this.count,1;1===u&&--this.count;return u}if(r[0]>this.mid){if(!this.right)return 0;if(4*(this.left?this.left.count:0)>3*(u-1))return h(this,r);
u=this.right.remove(r);if(2===u)return this.right=null,--this.count,1;1===u&&--this.count;return u}if(1===this.count)return this.leftPoints[0]===r?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===r){if(this.left&&this.right){r=this;for(var v=this.left;v.right;)r=v,v=v.right;if(r===this)v.right=this.right;else{var x=this.left;u=this.right;r.count-=v.count;r.right=v.left;v.left=x;v.right=u}m(this,v);this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?
m(this,this.left):m(this,this.right);return 1}for(x=k.ge(this.leftPoints,r,p);x<this.leftPoints.length&&this.leftPoints[x][0]===r[0];++x)if(this.leftPoints[x]===r)for(--this.count,this.leftPoints.splice(x,1),u=k.ge(this.rightPoints,r,c);u<this.rightPoints.length&&this.rightPoints[u][1]===r[1];++u)if(this.rightPoints[u]===r)return this.rightPoints.splice(u,1),1;return 0};b.queryPoint=function(r,u){if(r<this.mid){if(this.left){var v=this.left.queryPoint(r,u);if(v)return v}return a(this.leftPoints,r,
u)}return r>this.mid?this.right&&(v=this.right.queryPoint(r,u))?v:g(this.rightPoints,r,u):e(this.leftPoints,u)};b.queryInterval=function(r,u,v){if(r<this.mid&&this.left){var x=this.left.queryInterval(r,u,v);if(x)return x}return u>this.mid&&this.right&&(x=this.right.queryInterval(r,u,v))?x:u<this.mid?a(this.leftPoints,u,v):r>this.mid?g(this.rightPoints,r,v):e(this.leftPoints,v)};b=f.prototype;b.insert=function(r){this.root?this.root.insert(r):this.root=new q(r[0],null,null,[r],[r])};b.remove=function(r){return this.root?
(r=this.root.remove(r),2===r&&(this.root=null),0!==r):!1};b.queryPoint=function(r,u){if(this.root)return this.root.queryPoint(r,u)};b.queryInterval=function(r,u,v){if(r<=u&&this.root)return this.root.queryInterval(r,u,v)};Object.defineProperty(b,"count",{get:function(){return this.root?this.root.count:0}});Object.defineProperty(b,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},{"binary-search-bounds":461}],461:[function(b,K,G){arguments[4][243][0].apply(G,arguments)},{dup:243}],
462:[function(b,K,G){K.exports=function(q,m){m=m||Array(q.length);for(var l=0;l<q.length;++l)m[q[l]]=l;return m}},{}],463:[function(b,K,G){K.exports=function(q){for(var m=Array(q),l=0;l<q;++l)m[l]=l;return m}},{}],464:[function(b,K,G){K.exports=!0},{}],465:[function(b,K,G){function q(m){return!!m.constructor&&"function"===typeof m.constructor.isBuffer&&m.constructor.isBuffer(m)}K.exports=function(m){return null!=m&&(q(m)||"function"===typeof m.readFloatLE&&"function"===typeof m.slice&&q(m.slice(0,
0))||!!m._isBuffer)}},{}],466:[function(b,K,G){K.exports="undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},{}],467:[function(b,K,G){function q(h){h||(h={});var a=h.ua;a||"undefined"===typeof navigator||(a=navigator.userAgent);a&&a.headers&&"string"===typeof a.headers["user-agent"]&&(a=a.headers["user-agent"]);if("string"!==typeof a)return!1;var g=h.tablet?l.test(a):m.test(a);!g&&h.tablet&&h.featureDetect&&navigator&&1<navigator.maxTouchPoints&&
-1!==a.indexOf("Macintosh")&&-1!==a.indexOf("Safari")&&(g=!0);return g}K.exports=q;K.exports.isMobile=q;K.exports.default=q;var m=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,l=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i},
{}],468:[function(b,K,G){K.exports=function(q){var m=typeof q;return null!==q&&("object"===m||"function"===m)}},{}],469:[function(b,K,G){var q=Object.prototype.toString;K.exports=function(m){var l;return"[object Object]"===q.call(m)&&(l=Object.getPrototypeOf(m),null===l||l===Object.getPrototypeOf({}))}},{}],470:[function(b,K,G){K.exports=function(q){for(var m=q.length,l,h=0;h<m;h++)if(l=q.charCodeAt(h),(9>l||13<l)&&32!==l&&133!==l&&160!==l&&5760!==l&&6158!==l&&(8192>l||8205<l)&&8232!==l&&8233!==l&&
8239!==l&&8287!==l&&8288!==l&&12288!==l&&65279!==l)return!1;return!0}},{}],471:[function(b,K,G){K.exports=function(q){if("string"!==typeof q)return!1;q=q.trim();return/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(q)&&/[\dz]$/i.test(q)&&4<q.length?!0:!1}},{}],472:[function(b,K,G){K.exports=function(q,m,l){return q*(1-l)+m*l}},{}],473:[function(b,K,G){(function(q,m){"object"===typeof G&&"undefined"!==typeof K?K.exports=m():(q=q||self,q.mapboxgl=m())})(this,function(){function q(a,g){if(m)if(l){a="var sharedChunk = {}; ("+
m+")(sharedChunk); ("+l+")(sharedChunk);";var e={};m(e);h=g(e);h.workerUrl=window.URL.createObjectURL(new Blob([a],{type:"text/javascript"}))}else l=g;else m=g}var m,l,h;q(["exports"],function(a){function g(w,E){return w(E={exports:{}},E.exports),E.exports}function e(w,E,R,da){this.cx=3*w;this.bx=3*(R-w)-this.cx;this.ax=1-this.cx-this.bx;this.cy=3*E;this.by=3*(da-E)-this.cy;this.ay=1-this.cy-this.by;this.p1x=w;this.p1y=da;this.p2x=R;this.p2y=da}function n(w,E){this.x=w;this.y=E}function p(w,E,R,da){var pa=
new Vj(w,E,R,da);return function(wa){return pa.solve(wa)}}function c(w,E,R){return Math.min(R,Math.max(E,w))}function d(w,E,R){var da=R-E;w=((w-E)%da+da)%da+E;return w===E?R:w}function f(w){for(var E=[],R=arguments.length-1;0<R--;)E[R]=arguments[R+1];for(R=0;R<E.length;R+=1){var da=E[R],pa;for(pa in da)w[pa]=da[pa]}return w}function k(){return function R(E){return E?(E^16*Math.random()>>E/4).toString(16):"10000000-1000-4000-8000-100000000000".replace(/[018]/g,R)}()}function r(w){return!!w&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(w)}
function u(w,E){w.forEach(function(R){E[R]&&(E[R]=E[R].bind(E))})}function v(w,E){return-1!==w.indexOf(E,w.length-E.length)}function x(w,E,R){var da={},pa;for(pa in w)da[pa]=E.call(R||this,w[pa],pa,w);return da}function C(w,E,R){var da={},pa;for(pa in w)E.call(R||this,w[pa],pa,w)&&(da[pa]=w[pa]);return da}function z(w){return Array.isArray(w)?w.map(z):"object"==typeof w&&w?x(w,z):w}function y(w){Vg[w]||("undefined"!=typeof console&&console.warn(w),Vg[w]=!0)}function D(w,E,R){return(R.y-w.y)*(E.x-
w.x)>(E.y-w.y)*(R.x-w.x)}function A(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function t(w){var E={};if(w.replace(/(?:^|(?:\s*,\s*))([^\x00-\x20\(\)<>@,;:\\"\/\[\]\?=\{\}\x7F]+)(?:=(?:([^\x00-\x20\(\)<>@,;:\\"\/\[\]\?=\{\}\x7F]+)|(?:"((?:[^"\\]|\\.)*)")))?/g,function(R,da,pa,wa){R=pa||wa;return E[da]=!R||R.toLowerCase(),""}),E["max-age"])w=parseInt(E["max-age"],10),isNaN(w)?delete E["max-age"]:E["max-age"]=w;return E}function B(w){if(null==
ph){var E=w.navigator?w.navigator.userAgent:null;ph=!!w.safari||!(!E||!(/\b(iPad|iPhone|iPod)\b/.test(E)||E.match("Safari")&&!E.match("Chrome")))}return ph}function F(w){try{var E=self[w];return E.setItem("_mapbox_test_",1),E.removeItem("_mapbox_test_"),!0}catch(R){return!1}}function I(w){var E=w.createTexture();w.bindTexture(w.TEXTURE_2D,E);try{if(w.texImage2D(w.TEXTURE_2D,0,w.RGBA,w.RGBA,w.UNSIGNED_BYTE,lg),w.isContextLost())return;Wg.supported=!0}catch(R){}w.deleteTexture(E);Xg=!0}function J(w){return 0===
w.indexOf("mapbox:")}function L(w){w=w.match(Oh);if(!w)throw Error("Unable to parse URL object");return{protocol:w[1],authority:w[2],path:w[3]||"/",params:w[4]?w[4].split("&"):[]}}function H(w){var E=w.params.length?"?"+w.params.join("&"):"";return w.protocol+"://"+w.authority+w.path+E}function P(w){if(!w)return null;w=w.split(".");if(!w||3!==w.length)return null;try{return JSON.parse(decodeURIComponent(self.atob(w[1]).split("").map(function(E){return"%"+("00"+E.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch(E){return null}}
function M(){self.caches&&!wg&&(wg=self.caches.open("mapbox-tiles"))}function N(w){var E=w.indexOf("?");return 0>E?w:w.slice(0,E)}function T(){return null==W&&(W=self.OffscreenCanvas&&(new self.OffscreenCanvas(1,1)).getContext("2d")&&"function"==typeof self.createImageBitmap),W}function Q(w,E,R){R[w]&&-1!==R[w].indexOf(E)||(R[w]=R[w]||[],R[w].push(E))}function U(w,E,R){R&&R[w]&&(E=R[w].indexOf(E),-1!==E&&R[w].splice(E,1))}function S(w){var E=w.value;return E?[new bc(w.key,E,"constants have been deprecated as of v8")]:
[]}function X(w){for(var E=[],R=arguments.length-1;0<R--;)E[R]=arguments[R+1];for(R=0;R<E.length;R+=1){var da=E[R],pa;for(pa in da)w[pa]=da[pa]}return w}function Z(w){return w instanceof Number||w instanceof String||w instanceof Boolean?w.valueOf():w}function aa(w){if(Array.isArray(w))return w.map(aa);if(w instanceof Object&&!(w instanceof Number||w instanceof String||w instanceof Boolean)){var E={},R;for(R in w)E[R]=aa(w[R]);return E}return Z(w)}function fa(w,E){return{kind:"array",itemType:w,N:E}}
function ha(w){if("array"===w.kind){var E=ha(w.itemType);return"number"==typeof w.N?"array<"+E+", "+w.N+">":"value"===w.itemType.kind?"array":"array<"+E+">"}return w.kind}function ja(w,E){if("error"===E.kind)return null;if("array"===w.kind){if("array"===E.kind&&(0===E.N&&"value"===E.itemType.kind||!ja(w.itemType,E.itemType))&&("number"!=typeof w.N||w.N===E.N))return null}else{if(w.kind===E.kind)return null;if("value"===w.kind)for(var R=0,da=ye;R<da.length;R+=1)if(!ja(da[R],E))return null}return"Expected "+
ha(w)+" but found "+ha(E)+" instead."}function ba(w,E){return E.some(function(R){return R.kind===w.kind})}function ma(w,E){return E.some(function(R){return"null"===R?null===w:"array"===R?Array.isArray(w):"object"===R?w&&!Array.isArray(w)&&"object"==typeof w:R===typeof w})}function qa(w,E,R,da){return"number"==typeof w&&0<=w&&255>=w&&"number"==typeof E&&0<=E&&255>=E&&"number"==typeof R&&0<=R&&255>=R?void 0===da||"number"==typeof da&&0<=da&&1>=da?null:"Invalid rgba value ["+[w,E,R,da].join(", ")+"]: 'a' must be between 0 and 1.":
"Invalid rgba value ["+("number"==typeof da?[w,E,R,da]:[w,E,R]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function ka(w){if(null===w||"string"==typeof w||"boolean"==typeof w||"number"==typeof w||w instanceof Nd||w instanceof ie||w instanceof se||w instanceof Ne)return!0;if(Array.isArray(w)){for(var E=0;E<w.length;E+=1)if(!ka(w[E]))return!1;return!0}if("object"==typeof w){for(E in w)if(!ka(w[E]))return!1;return!0}return!1}function oa(w){if(null===w)return fd;if("string"==typeof w)return hd;
if("boolean"==typeof w)return dd;if("number"==typeof w)return Fc;if(w instanceof Nd)return sd;if(w instanceof ie)return $d;if(w instanceof se)return Xd;if(w instanceof Ne)return xe;if(Array.isArray(w)){for(var E,R=w.length,da=0;da<w.length;da+=1){var pa=oa(w[da]);if(E){if(E===pa)continue;E=od;break}E=pa}return fa(E||od,R)}return vd}function na(w){var E=typeof w;return null===w?"":"string"===E||"number"===E||"boolean"===E?String(w):w instanceof Nd||w instanceof se||w instanceof Ne?w.toString():JSON.stringify(w)}
function la(w,E){w[0]=Math.min(w[0],E[0]);w[1]=Math.min(w[1],E[1]);w[2]=Math.max(w[2],E[0]);w[3]=Math.max(w[3],E[1])}function ia(w,E){return!(w[0]<=E[0]||w[2]>=E[2]||w[1]<=E[1]||w[3]>=E[3])}function sa(w,E){for(var R,da,pa,wa,Ea,Ma,Wa,cb=!1,pb=0,yb=E.length;pb<yb;pb++)for(var Kb=E[pb],Hb=0,Tb=Kb.length;Hb<Tb-1;Hb++){if(0==(wa=(R=w)[0]-(da=Kb[Hb])[0])*(Wa=R[1]-(pa=Kb[Hb+1])[1])-(Ma=R[0]-pa[0])*(Ea=R[1]-da[1])&&0>=wa*Ma&&0>=Ea*Wa)return!1;var Sb=Kb[Hb],qc=Kb[Hb+1];Sb[1]>w[1]!=qc[1]>w[1]&&w[0]<(qc[0]-
Sb[0])*(w[1]-Sb[1])/(qc[1]-Sb[1])+Sb[0]&&(cb=!cb)}return cb}function ta(w,E,R,da){var pa=da[0]-R[0];da=da[1]-R[1];w=(w[0]-R[0])*da-pa*(w[1]-R[1]);E=(E[0]-R[0])*da-pa*(E[1]-R[1]);return 0<w&&0>E||0>w&&0<E}function Aa(w,E){for(var R=0;R<w.length;++R)if(!sa(w[R],E))return!1;for(R=0;R<w.length-1;++R){var da;a:{for(var pa=da=void 0,wa=void 0,Ea=void 0,Ma=void 0,Wa=void 0,cb=w[R],pb=w[R+1],yb=0,Kb=E;yb<Kb.length;yb+=1)for(var Hb=Kb[yb],Tb=0;Tb<Hb.length-1;++Tb)if(0!=(pa=[(wa=Hb[Tb+1])[0]-(Ea=Hb[Tb])[0],
wa[1]-Ea[1]])[0]*(da=[(Ma=pb)[0]-(Wa=cb)[0],Ma[1]-Wa[1]])[1]-pa[1]*da[0]&&ta(Wa,Ma,Ea,wa)&&ta(Ea,wa,Wa,Ma)){da=!0;break a}da=!1}if(da)return!1}return!0}function Ka(w,E,R){for(var da=[],pa=0;pa<w.length;pa++){for(var wa=[],Ea=0;Ea<w[pa].length;Ea++){var Ma=w[pa][Ea];var Wa=Math.pow(2,R.z);Ma=[Math.round((180+Ma[0])/360*Wa*8192),Math.round((180-180/Math.PI*Math.log(Math.tan(Math.PI/4+Ma[1]*Math.PI/360)))/360*Wa*8192)];la(E,Ma);wa.push(Ma)}da.push(wa)}return da}function Sa(w,E,R){for(var da=[],pa=0;pa<
w.length;pa++){var wa=Ka(w[pa],E,R);da.push(wa)}return da}function db(w,E,R,da){if(w[0]<R[0]||w[0]>R[2]){var pa=.5*da,wa=w[0]-R[0]>pa?-da:R[0]-w[0]>pa?da:0;0===wa&&(wa=w[0]-R[2]>pa?-da:R[2]-w[0]>pa?da:0);w[0]+=wa}la(E,w)}function eb(w,E,R,da){var pa=8192*Math.pow(2,da.z);da=[8192*da.x,8192*da.y];for(var wa=[],Ea=0;Ea<w.length;Ea+=1)for(var Ma=0,Wa=w[Ea];Ma<Wa.length;Ma+=1){var cb=Wa[Ma];cb=[cb.x+da[0],cb.y+da[1]];db(cb,E,R,pa);wa.push(cb)}return wa}function lb(w,E,R,da){var pa=8192*Math.pow(2,da.z),
wa=[8192*da.x,8192*da.y];da=[];for(var Ea=0;Ea<w.length;Ea+=1){for(var Ma=[],Wa=0,cb=w[Ea];Wa<cb.length;Wa+=1){var pb=cb[Wa];pb=[pb.x+wa[0],pb.y+wa[1]];la(E,pb);Ma.push(pb)}da.push(Ma)}if(E[2]-E[0]<=pa/2)for(E[0]=E[1]=1/0,E[2]=E[3]=-1/0,w=0;w<da.length;w+=1)for(wa=0,Ea=da[w];wa<Ea.length;wa+=1)db(Ea[wa],E,R,pa);return da}function ab(w){if(w instanceof Je&&("get"===w.name&&1===w.args.length||"feature-state"===w.name||"has"===w.name&&1===w.args.length||"properties"===w.name||"geometry-type"===w.name||
"id"===w.name||/^filter-/.test(w.name))||w instanceof Mf)return!1;var E=!0;return w.eachChild(function(R){E&&!ab(R)&&(E=!1)}),E}function Ya(w){if(w instanceof Je&&"feature-state"===w.name)return!1;var E=!0;return w.eachChild(function(R){E&&!Ya(R)&&(E=!1)}),E}function hb(w,E){if(w instanceof Je&&0<=E.indexOf(w.name))return!1;var R=!0;return w.eachChild(function(da){R&&!hb(da,E)&&(R=!1)}),R}function nb(w,E){for(var R,da=w.length-1,pa=0,wa=da,Ea;pa<=wa;)if((R=w[Ea=Math.floor((pa+wa)/2)])<=E){if(Ea===
da||E<w[Ea+1])return Ea;pa=Ea+1}else{if(!(R>E))throw new bf("Input is not a number.");wa=Ea-1}return 0}function va(w,E,R){return w*(1-R)+E*R}function Ba(w){return.008856451679035631<w?Math.pow(w,1/3):w/mi+4/29}function Ga(w){return w>6/29?w*w*w:mi*(w-4/29)}function Na(w){return 255*(.0031308>=w?12.92*w:1.055*Math.pow(w,1/2.4)-.055)}function $a(w){return.04045>=(w/=255)?w/12.92:Math.pow((w+.055)/1.055,2.4)}function Va(w){var E=$a(w.r),R=$a(w.g),da=$a(w.b),pa=Ba((.4124564*E+.3575761*R+.1804375*da)/
.95047),wa=Ba(.2126729*E+.7151522*R+.072175*da);return{l:116*wa-16,a:500*(pa-wa),b:200*(wa-Ba((.0193339*E+.119192*R+.9503041*da)/1.08883)),alpha:w.a}}function qb(w){var E=(w.l+16)/116,R=isNaN(w.a)?E:E+w.a/500,da=isNaN(w.b)?E:E-w.b/200;return E=1*Ga(E),R=.95047*Ga(R),da=1.08883*Ga(da),new Nd(Na(3.2404542*R-1.5371385*E-.4985314*da),Na(-.969266*R+1.8760108*E+.041556*da),Na(.0556434*R-.2040259*E+1.0572252*da),w.alpha)}function Ha(w,E,R,da){da-=R;w-=R;return 0===da?0:1===E?w/da:(Math.pow(E,w)-1)/(Math.pow(E,
da)-1)}function Ra(w,E){return"=="===w||"!="===w?"boolean"===E.kind||"string"===E.kind||"number"===E.kind||"null"===E.kind||"value"===E.kind:"string"===E.kind||"number"===E.kind||"value"===E.kind}function La(w,E,R,da){return 0===da.compare(E,R)}function gb(w,E,R){var da="=="!==w&&"!="!==w;return function(){function pa(wa,Ea,Ma){this.type=dd;this.lhs=wa;this.rhs=Ea;this.collator=Ma;this.hasUntypedArgument="value"===wa.type.kind||"value"===Ea.type.kind}return pa.parse=function(wa,Ea){if(3!==wa.length&&
4!==wa.length)return Ea.error("Expected two or three arguments.");var Ma=wa[0],Wa=Ea.parse(wa[1],1,od);if(!Wa)return null;if(!Ra(Ma,Wa.type))return Ea.concat(1).error('"'+Ma+"\" comparisons are not supported for type '"+ha(Wa.type)+"'.");var cb=Ea.parse(wa[2],2,od);if(!cb)return null;if(!Ra(Ma,cb.type))return Ea.concat(2).error('"'+Ma+"\" comparisons are not supported for type '"+ha(cb.type)+"'.");if(Wa.type.kind!==cb.type.kind&&"value"!==Wa.type.kind&&"value"!==cb.type.kind)return Ea.error("Cannot compare types '"+
ha(Wa.type)+"' and '"+ha(cb.type)+"'.");da&&("value"===Wa.type.kind&&"value"!==cb.type.kind?Wa=new We(cb.type,[Wa]):"value"!==Wa.type.kind&&"value"===cb.type.kind&&(cb=new We(Wa.type,[cb])));Ma=null;if(4===wa.length){if("string"!==Wa.type.kind&&"string"!==cb.type.kind&&"value"!==Wa.type.kind&&"value"!==cb.type.kind)return Ea.error("Cannot use collator to compare non-string types.");if(!(Ma=Ea.parse(wa[3],3,$d)))return null}return new pa(Wa,cb,Ma)},pa.prototype.evaluate=function(wa){var Ea=this.lhs.evaluate(wa),
Ma=this.rhs.evaluate(wa);if(da&&this.hasUntypedArgument){var Wa=oa(Ea),cb=oa(Ma);if(Wa.kind!==cb.kind||"string"!==Wa.kind&&"number"!==Wa.kind)throw new bf('Expected arguments for "'+w+'" to be (string, string) or (number, number), but found ('+Wa.kind+", "+cb.kind+") instead.");}return this.collator&&!da&&this.hasUntypedArgument&&(Wa=oa(Ea),cb=oa(Ma),"string"!==Wa.kind||"string"!==cb.kind)?E(wa,Ea,Ma):this.collator?R(wa,Ea,Ma,this.collator.evaluate(wa)):E(wa,Ea,Ma)},pa.prototype.eachChild=function(wa){wa(this.lhs);
wa(this.rhs);this.collator&&wa(this.collator)},pa.prototype.outputDefined=function(){return!0},pa.prototype.serialize=function(){var wa=[w];return this.eachChild(function(Ea){wa.push(Ea.serialize())}),wa},pa}()}function ob(w,E){var R=E[0],da=E[1],pa=E[2];E=E[3];R=R.evaluate(w);da=da.evaluate(w);pa=pa.evaluate(w);w=E?E.evaluate(w):1;if(E=qa(R,da,pa,w))throw new bf(E);return new Nd(R/255*w,da/255*w,pa/255*w,w)}function ub(w,E){w=E[w];return void 0===w?null:w}function za(w){return{result:"error",value:w}}
function Da(w){return"data-driven"===w["property-type"]||"cross-faded-data-driven"===w["property-type"]}function Ja(w){return!!w.expression&&-1<w.expression.parameters.indexOf("zoom")}function Ta(w){return!!w.expression&&w.expression.interpolated}function Xa(w){return w instanceof Number?"number":w instanceof String?"string":w instanceof Boolean?"boolean":Array.isArray(w)?"array":null===w?"null":typeof w}function kb(w){return"object"==typeof w&&null!==w&&!Array.isArray(w)}function rb(w){return w}
function Mb(w,E,R){return void 0!==w?w:void 0!==E?E:void 0!==R?R:void 0}function Fb(w,E,R,da,pa){return Mb(typeof R===pa?da[R]:void 0,w.default,E.default)}function Lb(w,E,R){if("number"!==Xa(R))return Mb(w.default,E.default);E=w.stops.length;if(1===E||R<=w.stops[0][0])return w.stops[0][1];if(R>=w.stops[E-1][0])return w.stops[E-1][1];R=nb(w.stops.map(function(da){return da[0]}),R);return w.stops[R][1]}function Vb(w,E,R){var da=void 0!==w.base?w.base:1;if("number"!==Xa(R))return Mb(w.default,E.default);
var pa=w.stops.length;if(1===pa||R<=w.stops[0][0])return w.stops[0][1];if(R>=w.stops[pa-1][0])return w.stops[pa-1][1];pa=nb(w.stops.map(function(pb){return pb[0]}),R);var wa=function(pb,yb,Kb,Hb){Hb-=Kb;pb-=Kb;return 0===Hb?0:1===yb?pb/Hb:(Math.pow(yb,pb)-1)/(Math.pow(yb,Hb)-1)}(R,da,w.stops[pa][0],w.stops[pa+1][0]),Ea=w.stops[pa][1],Ma=w.stops[pa+1][1],Wa=Ti[E.type]||rb;if(w.colorSpace&&"rgb"!==w.colorSpace){var cb=pj[w.colorSpace];Wa=function(pb,yb){return cb.reverse(cb.interpolate(cb.forward(pb),
cb.forward(yb),wa))}}return"function"==typeof Ea.evaluate?{evaluate:function(){for(var pb=[],yb=arguments.length;yb--;)pb[yb]=arguments[yb];yb=Ea.evaluate.apply(void 0,pb);pb=Ma.evaluate.apply(void 0,pb);if(void 0!==yb&&void 0!==pb)return Wa(yb,pb,wa)}}:Wa(Ea,Ma,wa)}function xc(w,E,R){return"color"===E.type?R=Nd.parse(R):"formatted"===E.type?R=se.fromString(R.toString()):"resolvedImage"===E.type?R=Ne.fromString(R.toString()):Xa(R)===E.type||"enum"===E.type&&E.values[R]||(R=void 0),Mb(R,w.default,
E.default)}function Gc(w){return Array.isArray(w)&&0<w.length&&"string"==typeof w[0]&&w[0]in Ei}function Hc(w,E){var R=yg;if(E){var da={color:sd,string:hd,number:Fc,enum:hd,boolean:dd,formatted:Xd,resolvedImage:xe};da="array"===E.type?fa(da[E.value]||od,E.length):da[E.type]}else da=void 0;R=new R(Ei,[],da);return(w=R.parse(w,void 0,void 0,void 0,E&&"string"===E.type?{typeAnnotation:"coerce"}:void 0))?{result:"success",value:new Zh(w,E)}:za(R.errors)}function Wc(w,E){if("error"===(w=Hc(w,E)).result)return w;
var R=w.value.expression,da=ab(R);if(!da&&!Da(E))return za([new Ec("","data expressions not supported")]);var pa=hb(R,["zoom"]);return pa||Ja(E)?(R=function Ma(Ea){var Wa=null;if(Ea instanceof sh)Wa=Ma(Ea.result);else if(Ea instanceof Rh)for(var cb=0,pb=Ea.args;cb<pb.length&&!(Wa=Ma(pb[cb]));cb+=1);else(Ea instanceof vf||Ea instanceof Bf)&&Ea.input instanceof Je&&"zoom"===Ea.input.name&&(Wa=Ea);return Wa instanceof Ec||Ea.eachChild(function(yb){yb=Ma(yb);yb instanceof Ec?Wa=yb:!Wa&&yb?Wa=new Ec("",
'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):Wa&&yb&&Wa!==yb&&(Wa=new Ec("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),Wa}(R))||pa?R instanceof Ec?za([R]):R instanceof Bf&&!Ta(E)?za([new Ec("",'"interpolate" expressions cannot be used with this property')]):{result:"success",value:R?new zf(da?"camera":"composite",w.value,R.labels,R instanceof Bf?R.interpolation:void 0):new Yd(da?"constant":"source",
w.value)}:za([new Ec("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]):za([new Ec("","zoom expressions not supported")])}function ib(w){var E=w.key,R=w.value,da=w.valueSpec||{},pa=w.objectElementValidators||{},wa=w.style;w=w.styleSpec;var Ea=[],Ma=Xa(R);if("object"!==Ma)return[new bc(E,R,"object expected, "+Ma+" found")];for(var Wa in R){var cb=Wa.split(".")[0];Ma=da[cb]||da["*"];if(pa[cb])cb=pa[cb];else if(da[cb])cb=ac;else if(pa["*"])cb=pa["*"];
else{if(!da["*"]){Ea.push(new bc(E,R[Wa],'unknown property "'+Wa+'"'));continue}cb=ac}Ea=Ea.concat(cb({key:(E?E+".":E)+Wa,value:R[Wa],valueSpec:Ma,style:wa,styleSpec:w,object:R,objectKey:Wa},R))}for(var pb in da)pa[pb]||da[pb].required&&void 0===da[pb].default&&void 0===R[pb]&&Ea.push(new bc(E,R,'missing required property "'+pb+'"'));return Ea}function Yb(w){var E=w.value,R=w.valueSpec,da=w.style,pa=w.styleSpec,wa=w.key;w=w.arrayElementValidator||ac;if("array"!==Xa(E))return[new bc(wa,E,"array expected, "+
Xa(E)+" found")];if(R.length&&E.length!==R.length)return[new bc(wa,E,"array length "+R.length+" expected, length "+E.length+" found")];if(R["min-length"]&&E.length<R["min-length"])return[new bc(wa,E,"array length at least "+R["min-length"]+" expected, length "+E.length+" found")];var Ea={type:R.value,values:R.values};7>pa.$version&&(Ea.function=R.function);"object"===Xa(R.value)&&(Ea=R.value);R=[];for(var Ma=0;Ma<E.length;Ma++)R=R.concat(w({array:E,arrayIndex:Ma,value:E[Ma],valueSpec:Ea,style:da,
styleSpec:pa,key:wa+"["+Ma+"]"}));return R}function dc(w){var E=w.key,R=w.value;w=w.valueSpec;var da=Xa(R);return"number"===da&&R!=R&&(da="NaN"),"number"!==da?[new bc(E,R,"number expected, "+da+" found")]:"minimum"in w&&R<w.minimum?[new bc(E,R,R+" is less than the minimum value "+w.minimum)]:"maximum"in w&&R>w.maximum?[new bc(E,R,R+" is greater than the maximum value "+w.maximum)]:[]}function oc(w){function E(Hb){var Tb=[],Sb=Hb.value,qc=Hb.key;if("array"!==Xa(Sb))return[new bc(qc,Sb,"array expected, "+
Xa(Sb)+" found")];if(2!==Sb.length)return[new bc(qc,Sb,"array length 2 expected, length "+Sb.length+" found")];if(yb){if("object"!==Xa(Sb[0]))return[new bc(qc,Sb,"object expected, "+Xa(Sb[0])+" found")];if(void 0===Sb[0].zoom)return[new bc(qc,Sb,"object stop key must have zoom")];if(void 0===Sb[0].value)return[new bc(qc,Sb,"object stop key must have value")];if(wa&&wa>Z(Sb[0].zoom))return[new bc(qc,Sb[0].zoom,"stop zoom values must appear in ascending order")];Z(Sb[0].zoom)!==wa&&(wa=Z(Sb[0].zoom),
pa=void 0,Wa={});Tb=Tb.concat(ib({key:qc+"[0]",value:Sb[0],valueSpec:{zoom:{}},style:Hb.style,styleSpec:Hb.styleSpec,objectElementValidators:{zoom:dc,value:R}}))}else Tb=Tb.concat(R({key:qc+"[0]",value:Sb[0],valueSpec:{},style:Hb.style,styleSpec:Hb.styleSpec},Sb));return Gc(aa(Sb[1]))?Tb.concat([new bc(qc+"[1]",Sb[1],"expressions are not allowed in function stops.")]):Tb.concat(ac({key:qc+"[1]",value:Sb[1],valueSpec:Ea,style:Hb.style,styleSpec:Hb.styleSpec}))}function R(Hb,Tb){var Sb=Xa(Hb.value),
qc=Z(Hb.value);Tb=null!==Hb.value?Hb.value:Tb;if(da){if(Sb!==da)return[new bc(Hb.key,Tb,Sb+" stop domain type must match previous stop domain type "+da)]}else da=Sb;return"number"!==Sb&&"string"!==Sb&&"boolean"!==Sb?[new bc(Hb.key,Tb,"stop domain value must be a number, string, or boolean")]:"number"!==Sb&&"categorical"!==Ma?(Sb="number expected, "+Sb+" found",Da(Ea)&&void 0===Ma&&(Sb+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new bc(Hb.key,Tb,Sb)]):"categorical"!==
Ma||"number"!==Sb||isFinite(qc)&&Math.floor(qc)===qc?"categorical"!==Ma&&"number"===Sb&&void 0!==pa&&qc<pa?[new bc(Hb.key,Tb,"stop domain values must appear in ascending order")]:(pa=qc,"categorical"===Ma&&qc in Wa?[new bc(Hb.key,Tb,"stop domain values must be unique")]:(Wa[qc]=!0,[])):[new bc(Hb.key,Tb,"integer expected, found "+qc)]}var da,pa,wa,Ea=w.valueSpec,Ma=Z(w.value.type),Wa={},cb="categorical"!==Ma&&void 0===w.value.property,pb=!cb,yb="array"===Xa(w.value.stops)&&"array"===Xa(w.value.stops[0])&&
"object"===Xa(w.value.stops[0][0]),Kb=ib({key:w.key,value:w.value,valueSpec:w.styleSpec.function,style:w.style,styleSpec:w.styleSpec,objectElementValidators:{stops:function(Hb){if("identity"===Ma)return[new bc(Hb.key,Hb.value,'identity function may not have a "stops" property')];var Tb=[],Sb=Hb.value;return Tb=Tb.concat(Yb({key:Hb.key,value:Sb,valueSpec:Hb.valueSpec,style:Hb.style,styleSpec:Hb.styleSpec,arrayElementValidator:E})),"array"===Xa(Sb)&&0===Sb.length&&Tb.push(new bc(Hb.key,Sb,"array must have at least one stop")),
Tb},default:function(Hb){return ac({key:Hb.key,value:Hb.value,valueSpec:Ea,style:Hb.style,styleSpec:Hb.styleSpec})}}});return"identity"===Ma&&cb&&Kb.push(new bc(w.key,w.value,'missing required property "property"')),"identity"===Ma||w.value.stops||Kb.push(new bc(w.key,w.value,'missing required property "stops"')),"exponential"===Ma&&w.valueSpec.expression&&!Ta(w.valueSpec)&&Kb.push(new bc(w.key,w.value,"exponential functions not supported")),8<=w.styleSpec.$version&&(pb&&!Da(w.valueSpec)?Kb.push(new bc(w.key,
w.value,"property functions not supported")):cb&&!Ja(w.valueSpec)&&Kb.push(new bc(w.key,w.value,"zoom functions not supported"))),"categorical"!==Ma&&!yb||void 0!==w.value.property||Kb.push(new bc(w.key,w.value,'"property" property is required')),Kb}function tc(w){var E=("property"===w.expressionContext?Wc:Hc)(aa(w.value),w.valueSpec);if("error"===E.result)return E.value.map(function(R){return new bc(""+w.key+R.key,w.value,R.message)});E=E.value.expression||E.value._styleExpression.expression;if("property"===
w.expressionContext&&"text-font"===w.propertyKey&&!E.outputDefined())return[new bc(w.key,w.value,'Invalid data expression for "'+w.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===w.expressionContext&&"layout"===w.propertyType&&!Ya(E))return[new bc(w.key,w.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===w.expressionContext&&!Ya(E))return[new bc(w.key,w.value,'"feature-state" data expressions are not supported with filters.')];
if(w.expressionContext&&0===w.expressionContext.indexOf("cluster")){if(!hb(E,["zoom","feature-state"]))return[new bc(w.key,w.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===w.expressionContext&&!ab(E))return[new bc(w.key,w.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Lc(w){var E=w.key,R=w.value;w=w.valueSpec;var da=[];return Array.isArray(w.values)?-1===
w.values.indexOf(Z(R))&&da.push(new bc(E,R,"expected one of ["+w.values.join(", ")+"], "+JSON.stringify(R)+" found")):-1===Object.keys(w.values).indexOf(Z(R))&&da.push(new bc(E,R,"expected one of ["+Object.keys(w.values).join(", ")+"], "+JSON.stringify(R)+" found")),da}function fb(w){if(!0===w||!1===w)return!0;if(!Array.isArray(w)||0===w.length)return!1;switch(w[0]){case "has":return 2<=w.length&&"$id"!==w[1]&&"$type"!==w[1];case "in":return 3<=w.length&&("string"!=typeof w[1]||Array.isArray(w[2]));
case "!in":case "!has":case "none":return!1;case "==":case "!=":case ">":case ">=":case "<":case "<=":return 3!==w.length||Array.isArray(w[1])||Array.isArray(w[2]);case "any":case "all":var E=0;for(w=w.slice(1);E<w.length;E+=1){var R=w[E];if(!fb(R)&&"boolean"!=typeof R)return!1}return!0;default:return!0}}function tb(w){if(null==w)return{filter:function(){return!0},needGeometry:!1};fb(w)||(w=ec(w));var E=Hc(w,Ye);if("error"===E.result)throw Error(E.value.map(function(R){return R.key+": "+R.message}).join(", "));
return{filter:function(R,da,pa){return E.value.evaluate(R,da,{},pa)},needGeometry:function pa(da){if(!Array.isArray(da))return!1;if("within"===da[0])return!0;for(var wa=1;wa<da.length;wa++)if(pa(da[wa]))return!0;return!1}(w)}}function Pb(w,E){return w<E?-1:w>E?1:0}function ec(w){if(!w)return!0;var E,R=w[0];return 1>=w.length?"any"!==R:"=="===R?cc(w[1],w[2],"=="):"!="===R?sb(cc(w[1],w[2],"==")):"<"===R||">"===R||"<="===R||">="===R?cc(w[1],w[2],R):"any"===R?(E=w.slice(1),["any"].concat(E.map(ec))):
"all"===R?["all"].concat(w.slice(1).map(ec)):"none"===R?["all"].concat(w.slice(1).map(ec).map(sb)):"in"===R?Zb(w[1],w.slice(2)):"!in"===R?sb(Zb(w[1],w.slice(2))):"has"===R?Qb(w[1]):"!has"===R?sb(Qb(w[1])):"within"!==R||w}function cc(w,E,R){switch(w){case "$type":return["filter-type-"+R,E];case "$id":return["filter-id-"+R,E];default:return["filter-"+R,w,E]}}function Zb(w,E){if(0===E.length)return!1;switch(w){case "$type":return["filter-type-in",["literal",E]];case "$id":return["filter-id-in",["literal",
E]];default:return 200<E.length&&!E.some(function(R){return typeof R!=typeof E[0]})?["filter-in-large",w,["literal",E.sort(Pb)]]:["filter-in-small",w,["literal",E]]}}function Qb(w){switch(w){case "$type":return!0;case "$id":return["filter-has-id"];default:return["filter-has",w]}}function sb(w){return["!",w]}function Gb(w){return fb(aa(w.value))?tc(X({},w,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function da(R){var pa=R.value,wa=R.key;if("array"!==Xa(pa))return[new bc(wa,pa,"array expected, "+
Xa(pa)+" found")];var Ea,Ma=R.styleSpec,Wa=[];if(1>pa.length)return[new bc(wa,pa,"filter array must have at least 1 element")];switch(Wa=Wa.concat(Lc({key:wa+"[0]",value:pa[0],valueSpec:Ma.filter_operator,style:R.style,styleSpec:R.styleSpec})),Z(pa[0])){case "<":case "<=":case ">":case ">=":2<=pa.length&&"$type"===Z(pa[1])&&Wa.push(new bc(wa,pa,'"$type" cannot be use with operator "'+pa[0]+'"'));case "==":case "!=":3!==pa.length&&Wa.push(new bc(wa,pa,'filter array for operator "'+pa[0]+'" must have 3 elements'));
case "in":case "!in":2<=pa.length&&"string"!==(Ea=Xa(pa[1]))&&Wa.push(new bc(wa+"[1]",pa[1],"string expected, "+Ea+" found"));for(var cb=2;cb<pa.length;cb++)Ea=Xa(pa[cb]),"$type"===Z(pa[1])?Wa=Wa.concat(Lc({key:wa+"["+cb+"]",value:pa[cb],valueSpec:Ma.geometry_type,style:R.style,styleSpec:R.styleSpec})):"string"!==Ea&&"number"!==Ea&&"boolean"!==Ea&&Wa.push(new bc(wa+"["+cb+"]",pa[cb],"string, number, or boolean expected, "+Ea+" found"));break;case "any":case "all":case "none":for(Ea=1;Ea<pa.length;Ea++)Wa=
Wa.concat(da({key:wa+"["+Ea+"]",value:pa[Ea],style:R.style,styleSpec:R.styleSpec}));break;case "has":case "!has":Ea=Xa(pa[1]);2!==pa.length?Wa.push(new bc(wa,pa,'filter array for "'+pa[0]+'" operator must have 2 elements')):"string"!==Ea&&Wa.push(new bc(wa+"[1]",pa[1],"string expected, "+Ea+" found"));break;case "within":Ea=Xa(pa[1]),2!==pa.length?Wa.push(new bc(wa,pa,'filter array for "'+pa[0]+'" operator must have 2 elements')):"object"!==Ea&&Wa.push(new bc(wa+"[1]",pa[1],"object expected, "+Ea+
" found"))}return Wa}(w)}function xb(w,E){var R=w.key,da=w.style,pa=w.styleSpec,wa=w.value,Ea=w.objectKey,Ma=pa[E+"_"+w.layerType];if(!Ma)return[];var Wa=Ea.match(/^(.*)-transition$/);if("paint"===E&&Wa&&Ma[Wa[1]]&&Ma[Wa[1]].transition)return ac({key:R,value:wa,valueSpec:pa.transition,style:da,styleSpec:pa});var cb;Ma=w.valueSpec||Ma[Ea];if(!Ma)return[new bc(R,wa,'unknown property "'+Ea+'"')];if("string"===Xa(wa)&&Da(Ma)&&!Ma.tokens&&(cb=/^{([^}]+)}$/.exec(wa)))return[new bc(R,wa,'"'+Ea+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+
JSON.stringify(cb[1])+" }`.")];cb=[];return"symbol"===w.layerType&&("text-field"===Ea&&da&&!da.glyphs&&cb.push(new bc(R,wa,'use of "text-field" requires a style "glyphs" property')),"text-font"===Ea&&kb(aa(wa))&&"identity"===Z(wa.type)&&cb.push(new bc(R,wa,'"text-font" does not support identity functions'))),cb.concat(ac({key:w.key,value:wa,valueSpec:Ma,style:da,styleSpec:pa,expressionContext:"property",propertyType:E,propertyKey:Ea}))}function Jb(w){return xb(w,"paint")}function Xb(w){return xb(w,
"layout")}function nc(w){var E=[],R=w.value,da=w.key,pa=w.style,wa=w.styleSpec;R.type||R.ref||E.push(new bc(da,R,'either "type" or "ref" is required'));var Ea,Ma=Z(R.type),Wa=Z(R.ref);if(R.id)for(var cb=Z(R.id),pb=0;pb<w.arrayIndex;pb++){var yb=pa.layers[pb];Z(yb.id)===cb&&E.push(new bc(da,R.id,'duplicate layer id "'+R.id+'", previously used at line '+yb.id.__line__))}"ref"in R?(["type","source","source-layer","filter","layout"].forEach(function(Kb){Kb in R&&E.push(new bc(da,R[Kb],'"'+Kb+'" is prohibited for ref layers'))}),
pa.layers.forEach(function(Kb){Z(Kb.id)===Wa&&(Ea=Kb)}),Ea?Ea.ref?E.push(new bc(da,R.ref,"ref cannot reference another ref layer")):Ma=Z(Ea.type):E.push(new bc(da,R.ref,'ref layer "'+Wa+'" not found'))):"background"!==Ma&&(R.source?(cb=(pa=pa.sources&&pa.sources[R.source])&&Z(pa.type),pa?"vector"===cb&&"raster"===Ma?E.push(new bc(da,R.source,'layer "'+R.id+'" requires a raster source')):"raster"===cb&&"raster"!==Ma?E.push(new bc(da,R.source,'layer "'+R.id+'" requires a vector source')):"vector"!==
cb||R["source-layer"]?"raster-dem"===cb&&"hillshade"!==Ma?E.push(new bc(da,R.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==Ma||!R.paint||!R.paint["line-gradient"]||"geojson"===cb&&pa.lineMetrics||E.push(new bc(da,R,'layer "'+R.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):E.push(new bc(da,R,'layer "'+R.id+'" must specify a "source-layer"')):E.push(new bc(da,R.source,'source "'+R.source+'" not found'))):E.push(new bc(da,
R,'missing required property "source"')));return E=E.concat(ib({key:da,value:R,valueSpec:wa.layer,style:w.style,styleSpec:w.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return ac({key:da+".type",value:R.type,valueSpec:wa.layer.type,style:w.style,styleSpec:w.styleSpec,object:R,objectKey:"type"})},filter:Gb,layout:function(Kb){return ib({layer:R,key:Kb.key,value:Kb.value,style:Kb.style,styleSpec:Kb.styleSpec,objectElementValidators:{"*":function(Hb){return Xb(X({layerType:Ma},
Hb))}}})},paint:function(Kb){return ib({layer:R,key:Kb.key,value:Kb.value,style:Kb.style,styleSpec:Kb.styleSpec,objectElementValidators:{"*":function(Hb){return Jb(X({layerType:Ma},Hb))}}})}}}))}function Qc(w){var E=w.value;w=w.key;var R=Xa(E);return"string"!==R?[new bc(w,E,"string expected, "+R+" found")]:[]}function $c(w){var E=w.value,R=w.key,da=w.styleSpec,pa=w.style;if(!E.type)return[new bc(R,E,'"type" is required')];var wa=Z(E.type);switch(wa){case "vector":case "raster":case "raster-dem":return ib({key:R,
value:E,valueSpec:da["source_"+wa.replace("-","_")],style:w.style,styleSpec:da,objectElementValidators:ce});case "geojson":if(w=ib({key:R,value:E,valueSpec:da.source_geojson,style:pa,styleSpec:da,objectElementValidators:ce}),E.cluster)for(var Ea in E.clusterProperties)da=E.clusterProperties[Ea],pa=da[0],pa="string"==typeof pa?[pa,["accumulated"],["get",Ea]]:pa,w.push.apply(w,tc({key:R+"."+Ea+".map",value:da[1],expressionContext:"cluster-map"})),w.push.apply(w,tc({key:R+"."+Ea+".reduce",value:pa,expressionContext:"cluster-reduce"}));
return w;case "video":return ib({key:R,value:E,valueSpec:da.source_video,style:pa,styleSpec:da});case "image":return ib({key:R,value:E,valueSpec:da.source_image,style:pa,styleSpec:da});case "canvas":return[new bc(R,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Lc({key:R+".type",value:E.type,valueSpec:{values:"vector raster raster-dem geojson video image".split(" ")},style:pa,styleSpec:da})}}function Uc(w){var E=w.value,
R=w.styleSpec,da=R.light;w=w.style;var pa=[],wa=Xa(E);if(void 0===E)return pa;if("object"!==wa)return pa.concat([new bc("light",E,"object expected, "+wa+" found")]);for(var Ea in E)wa=Ea.match(/^(.*)-transition$/),pa=pa.concat(wa&&da[wa[1]]&&da[wa[1]].transition?ac({key:Ea,value:E[Ea],valueSpec:R.transition,style:w,styleSpec:R}):da[Ea]?ac({key:Ea,value:E[Ea],valueSpec:da[Ea],style:w,styleSpec:R}):[new bc(Ea,E[Ea],'unknown property "'+Ea+'"')]);return pa}function ac(w){var E=w.value,R=w.valueSpec,
da=w.styleSpec;return R.expression&&kb(Z(E))?oc(w):R.expression&&Gc(aa(E))?tc(w):R.type&&Qe[R.type]?Qe[R.type](w):ib(X({},w,{valueSpec:R.type?da[R.type]:R}))}function Ac(w){var E=w.value,R=w.key;w=Qc(w);return w.length||(-1===E.indexOf("{fontstack}")&&w.push(new bc(R,E,'"glyphs" url must include a "{fontstack}" token')),-1===E.indexOf("{range}")&&w.push(new bc(R,E,'"glyphs" url must include a "{range}" token'))),w}function Zc(w,E){void 0===E&&(E=Cb);var R=[];return R=R.concat(ac({key:"",value:w,valueSpec:E.$root,
styleSpec:E,style:w,objectElementValidators:{glyphs:Ac,"*":function(){return[]}}})),w.constants&&(R=R.concat(S({key:"constants",value:w.constants,style:w,styleSpec:E}))),wc(R)}function wc(w){return[].concat(w).sort(function(E,R){return E.line-R.line})}function Dc(w){return function(){for(var E=[],R=arguments.length;R--;)E[R]=arguments[R];return wc(w.apply(this,E))}}function ad(w,E){var R=!1;if(E&&E.length)for(var da=0;da<E.length;da+=1)w.fire(new ic(Error(E[da].message))),R=!0;return R}function Rc(w,
E,R){var da=this.cells=[];if(w instanceof ArrayBuffer){this.arrayBuffer=w;var pa=new Int32Array(this.arrayBuffer);w=pa[0];this.d=(E=pa[1])+2*(R=pa[2]);for(var wa=0;wa<this.d*this.d;wa++){var Ea=pa[3+wa],Ma=pa[3+wa+1];da.push(Ea===Ma?null:pa.subarray(Ea,Ma))}wa=pa[3+da.length+1];this.keys=pa.subarray(pa[3+da.length],wa);this.bboxes=pa.subarray(wa);this.insert=this._insertReadonly}else{this.d=E+2*R;for(pa=0;pa<this.d*this.d;pa++)da.push([]);this.keys=[];this.bboxes=[]}this.n=E;this.extent=w;this.padding=
R;this.scale=E/w;this.uid=0;E=R/E*w;this.min=-E;this.max=w+E}function Bc(w,E,R){void 0===R&&(R={});Object.defineProperty(E,"_classRegistryKey",{value:w,writeable:!1});si[w]={klass:E,omit:R.omit||[],shallow:R.shallow||[]}}function id(w){return w&&"undefined"!=typeof ArrayBuffer&&(w instanceof ArrayBuffer||w.constructor&&"ArrayBuffer"===w.constructor.name)}function jd(w,E){if(null==w||"boolean"==typeof w||"number"==typeof w||"string"==typeof w||w instanceof Boolean||w instanceof Number||w instanceof
String||w instanceof Date||w instanceof RegExp)return w;if(id(w)||Vi&&w instanceof Vi)return E&&E.push(w),w;if(ArrayBuffer.isView(w))return E&&E.push(w.buffer),w;if(w instanceof Yj)return E&&E.push(w.data.buffer),w;if(Array.isArray(w)){for(var R=[],da=0;da<w.length;da+=1)R.push(jd(w[da],E));return R}if("object"==typeof w){var pa=w.constructor;R=pa._classRegistryKey;if(!R)throw Error("can't serialize object of unregistered class");da=pa.serialize?pa.serialize(w,E):{};if(!pa.serialize){for(var wa in w)!w.hasOwnProperty(wa)||
0<=si[R].omit.indexOf(wa)||(pa=w[wa],da[wa]=0<=si[R].shallow.indexOf(wa)?pa:jd(pa,E));w instanceof Error&&(da.message=w.message)}if(da.$name)throw Error("$name property is reserved for worker serialization logic.");return"Object"!==R&&(da.$name=R),da}throw Error("can't serialize object of type "+typeof w);}function ld(w){if(null==w||"boolean"==typeof w||"number"==typeof w||"string"==typeof w||w instanceof Boolean||w instanceof Number||w instanceof String||w instanceof Date||w instanceof RegExp||id(w)||
Vi&&w instanceof Vi||ArrayBuffer.isView(w)||w instanceof Yj)return w;if(Array.isArray(w))return w.map(ld);if("object"==typeof w){var E=w.$name||"Object",R=si[E].klass;if(!R)throw Error("can't deserialize unregistered class "+E);if(R.deserialize)return R.deserialize(w);R=Object.create(R.prototype);for(var da=0,pa=Object.keys(w);da<pa.length;da+=1){var wa=pa[da];if("$name"!==wa){var Ea=w[wa];R[wa]=0<=si[E].shallow.indexOf(wa)?Ea:ld(Ea)}}return R}throw Error("can't deserialize object of type "+typeof w);
}function ke(w){for(var E=0;E<w.length;E+=1)if(ud(w[E].charCodeAt(0)))return!0;return!1}function ud(w){return!(746!==w&&747!==w&&(4352>w||!(Bd["Bopomofo Extended"](w)||Bd.Bopomofo(w)||Bd["CJK Compatibility Forms"](w)&&!(65097<=w&&65103>=w)||Bd["CJK Compatibility Ideographs"](w)||Bd["CJK Compatibility"](w)||Bd["CJK Radicals Supplement"](w)||Bd["CJK Strokes"](w)||!(!Bd["CJK Symbols and Punctuation"](w)||12296<=w&&12305>=w||12308<=w&&12319>=w||12336===w)||Bd["CJK Unified Ideographs Extension A"](w)||
Bd["CJK Unified Ideographs"](w)||Bd["Enclosed CJK Letters and Months"](w)||Bd["Hangul Compatibility Jamo"](w)||Bd["Hangul Jamo Extended-A"](w)||Bd["Hangul Jamo Extended-B"](w)||Bd["Hangul Jamo"](w)||Bd["Hangul Syllables"](w)||Bd.Hiragana(w)||Bd["Ideographic Description Characters"](w)||Bd.Kanbun(w)||Bd["Kangxi Radicals"](w)||Bd["Katakana Phonetic Extensions"](w)||Bd.Katakana(w)&&12540!==w||!(!Bd["Halfwidth and Fullwidth Forms"](w)||65288===w||65289===w||65293===w||65306<=w&&65310>=w||65339===w||65341===
w||65343===w||65371<=w&&65503>=w||65507===w||65512<=w&&65519>=w)||!(!Bd["Small Form Variants"](w)||65112<=w&&65118>=w||65123<=w&&65126>=w)||Bd["Unified Canadian Aboriginal Syllabics"](w)||Bd["Unified Canadian Aboriginal Syllabics Extended"](w)||Bd["Vertical Forms"](w)||Bd["Yijing Hexagram Symbols"](w)||Bd["Yi Syllables"](w)||Bd["Yi Radicals"](w))))}function td(w){var E;(E=ud(w))||(E=!!(Bd["Latin-1 Supplement"](w)&&(167===w||169===w||174===w||177===w||188===w||189===w||190===w||215===w||247===w)||
Bd["General Punctuation"](w)&&(8214===w||8224===w||8225===w||8240===w||8241===w||8251===w||8252===w||8258===w||8263===w||8264===w||8265===w||8273===w)||Bd["Letterlike Symbols"](w)||Bd["Number Forms"](w)||Bd["Miscellaneous Technical"](w)&&(8960<=w&&8967>=w||8972<=w&&8991>=w||8996<=w&&9E3>=w||9003===w||9085<=w&&9114>=w||9150<=w&&9165>=w||9167===w||9169<=w&&9179>=w||9186<=w&&9215>=w)||Bd["Control Pictures"](w)&&9251!==w||Bd["Optical Character Recognition"](w)||Bd["Enclosed Alphanumerics"](w)||Bd["Geometric Shapes"](w)||
Bd["Miscellaneous Symbols"](w)&&!(9754<=w&&9759>=w)||Bd["Miscellaneous Symbols and Arrows"](w)&&(11026<=w&&11055>=w||11088<=w&&11097>=w||11192<=w&&11243>=w)||Bd["CJK Symbols and Punctuation"](w)||Bd.Katakana(w)||Bd["Private Use Area"](w)||Bd["CJK Compatibility Forms"](w)||Bd["Small Form Variants"](w)||Bd["Halfwidth and Fullwidth Forms"](w)||8734===w||8756===w||8757===w||9984<=w&&10087>=w||10102<=w&&10131>=w||65532===w||65533===w));return!E}function Sd(w){return 1424<=w&&2303>=w||Bd["Arabic Presentation Forms-A"](w)||
Bd["Arabic Presentation Forms-B"](w)}function be(){Fi.fire(new $b("pluginStateChange",{pluginStatus:Cf,pluginURL:Jg}))}function Ld(w,E){void 0===E&&(E=1);var R=0,da=0;return{members:w.map(function(pa){var wa=ai[pa.type].BYTES_PER_ELEMENT,Ea=R=te(R,Math.max(E,wa)),Ma=pa.components||1;return da=Math.max(da,wa),R+=wa*Ma,{name:pa.name,type:pa.type,components:Ma,offset:Ea}}),size:te(R,Math.max(da,E)),alignment:E}}function te(w,E){return Math.ceil(w/E)*E}function ze(w,E){return 256*c(Math.floor(w),0,255)+
c(Math.floor(E),0,255)}function Dd(w){var E=+w;return!isNaN(E)&&E<=Xk?E:ji(String(w))}function zd(w,E,R){var da=w[E];w[E]=w[R];w[R]=da}function oe(w){return[ze(255*w.r,255*w.g),ze(255*w.b,255*w.a)]}function me(w,E,R){var da={color:{source:ag,composite:uj},number:{source:ui,composite:ag}};return(w={"line-pattern":{source:Qf,composite:Qf},"fill-pattern":{source:Qf,composite:Qf},"fill-extrusion-pattern":{source:Qf,composite:Qf}}[w])&&w[R]||da[E][R]}function re(w){var E=8192/w.extent;w=w.loadGeometry();
for(var R=0;R<w.length;R++)for(var da=w[R],pa=0;pa<da.length;pa++){var wa=da[pa];wa.x=Math.round(wa.x*E);wa.y=Math.round(wa.y*E);(wa.x<Vh.min||wa.x>Vh.max||wa.y<Vh.min||wa.y>Vh.max)&&(y("Geometry exceeds allowed extent, reduce your vector tile buffer size"),wa.x=c(wa.x,Vh.min,Vh.max),wa.y=c(wa.y,Vh.min,Vh.max))}return w}function Te(w,E,R,da,pa){w.emplaceBack(2*E+(da+1)/2,2*R+(pa+1)/2)}function pf(w,E){for(var R=0;R<w.length;R++)if(gd(E,w[R]))return!0;for(R=0;R<E.length;R++)if(gd(w,E[R]))return!0;
return!!Ve(w,E)}function af(w,E,R){return!!gd(w,E)||!!Rb(E,w,R)}function gf(w,E){if(1===w.length)return uc(E,w[0]);for(var R=0;R<E.length;R++)for(var da=E[R],pa=0;pa<da.length;pa++)if(gd(w,da[pa]))return!0;for(R=0;R<w.length;R++)if(uc(E,w[R]))return!0;for(R=0;R<E.length;R++)if(Ve(w,E[R]))return!0;return!1}function Ve(w,E){if(0===w.length||0===E.length)return!1;for(var R=0;R<w.length-1;R++)for(var da=w[R],pa=w[R+1],wa=0;wa<E.length-1;wa++){var Ea=da,Ma=pa,Wa=E[wa],cb=E[wa+1];if(D(Ea,Wa,cb)!==D(Ma,
Wa,cb)&&D(Ea,Ma,Wa)!==D(Ea,Ma,cb))return!0}return!1}function Rb(w,E,R){R*=R;if(1===E.length)return w.distSqr(E[0])<R;for(var da=1;da<E.length;da++)if(Pc(w,E[da-1],E[da])<R)return!0;return!1}function Pc(w,E,R){var da=E.distSqr(R);if(0===da)return w.distSqr(E);da=((w.x-E.x)*(R.x-E.x)+(w.y-E.y)*(R.y-E.y))/da;return w.distSqr(0>da?E:1<da?R:R.sub(E)._mult(da)._add(E))}function uc(w,E){for(var R,da,pa,wa=!1,Ea=0;Ea<w.length;Ea++)for(var Ma=0,Wa=(R=w[Ea]).length-1;Ma<R.length;Wa=Ma++)(da=R[Ma]).y>E.y!=(pa=
R[Wa]).y>E.y&&E.x<(pa.x-da.x)*(E.y-da.y)/(pa.y-da.y)+da.x&&(wa=!wa);return wa}function gd(w,E){for(var R=!1,da=0,pa=w.length-1;da<w.length;pa=da++){var wa=w[da];pa=w[pa];wa.y>E.y!=pa.y>E.y&&E.x<(pa.x-wa.x)*(E.y-wa.y)/(pa.y-wa.y)+wa.x&&(R=!R)}return R}function Jd(w,E,R){var da=E.paint.get(w).value;return"constant"===da.kind?da.value:R.programConfigurations.get(E.id).getMaxValue(w)}function Td(w){return Math.sqrt(w[0]*w[0]+w[1]*w[1])}function Fd(w,E,R,da,pa){if(!E[0]&&!E[1])return w;E=Md.convert(E)._mult(pa);
"viewport"===R&&E._rotate(-da);R=[];for(da=0;da<w.length;da++)R.push(w[da].sub(E));return R}function Ed(w){return w[0]=1,w[1]=0,w[2]=0,w[3]=0,w[4]=0,w[5]=1,w[6]=0,w[7]=0,w[8]=0,w[9]=0,w[10]=1,w[11]=0,w[12]=0,w[13]=0,w[14]=0,w[15]=1,w}function ee(w,E,R){var da=E[0],pa=E[1],wa=E[2],Ea=E[3],Ma=E[4],Wa=E[5],cb=E[6],pb=E[7],yb=E[8],Kb=E[9],Hb=E[10],Tb=E[11],Sb=E[12],qc=E[13],bd=E[14];E=E[15];var ed=R[0],Oc=R[1],rd=R[2],pd=R[3];return w[0]=ed*da+Oc*Ma+rd*yb+pd*Sb,w[1]=ed*pa+Oc*Wa+rd*Kb+pd*qc,w[2]=ed*wa+
Oc*cb+rd*Hb+pd*bd,w[3]=ed*Ea+Oc*pb+rd*Tb+pd*E,w[4]=(ed=R[4])*da+(Oc=R[5])*Ma+(rd=R[6])*yb+(pd=R[7])*Sb,w[5]=ed*pa+Oc*Wa+rd*Kb+pd*qc,w[6]=ed*wa+Oc*cb+rd*Hb+pd*bd,w[7]=ed*Ea+Oc*pb+rd*Tb+pd*E,w[8]=(ed=R[8])*da+(Oc=R[9])*Ma+(rd=R[10])*yb+(pd=R[11])*Sb,w[9]=ed*pa+Oc*Wa+rd*Kb+pd*qc,w[10]=ed*wa+Oc*cb+rd*Hb+pd*bd,w[11]=ed*Ea+Oc*pb+rd*Tb+pd*E,w[12]=(ed=R[12])*da+(Oc=R[13])*Ma+(rd=R[14])*yb+(pd=R[15])*Sb,w[13]=ed*pa+Oc*Wa+rd*Kb+pd*qc,w[14]=ed*wa+Oc*cb+rd*Hb+pd*bd,w[15]=ed*Ea+Oc*pb+rd*Tb+pd*E,w}function ge(w,
E,R){var da=E[0],pa=E[1],wa=E[2];E=E[3];return w[0]=R[0]*da+R[4]*pa+R[8]*wa+R[12]*E,w[1]=R[1]*da+R[5]*pa+R[9]*wa+R[13]*E,w[2]=R[2]*da+R[6]*pa+R[10]*wa+R[14]*E,w[3]=R[3]*da+R[7]*pa+R[11]*wa+R[15]*E,w}function Ob(w,E){w=ge([],[w.x,w.y,0,1],E);return new Md(w[0]/w[3],w[1]/w[3])}function hc(w,E,R,da){var pa=E.width;E=E.height;if(da)if(da instanceof Uint8ClampedArray)da=new Uint8Array(da.buffer);else{if(da.length!==pa*E*R)throw new RangeError("mismatched image size");}else da=new Uint8Array(pa*E*R);return w.width=
pa,w.height=E,w.data=da,w}function Cc(w,E,R){var da=E.width;E=E.height;if(da!==w.width||E!==w.height){var pa=hc({},{width:da,height:E},R);Sc(w,pa,{x:0,y:0},{x:0,y:0},{width:Math.min(w.width,da),height:Math.min(w.height,E)},R);w.width=da;w.height=E;w.data=pa.data}}function Sc(w,E,R,da,pa,wa){if(0===pa.width||0===pa.height)return E;if(pa.width>w.width||pa.height>w.height||R.x>w.width-pa.width||R.y>w.height-pa.height)throw new RangeError("out of range source coordinates for image copy");if(pa.width>
E.width||pa.height>E.height||da.x>E.width-pa.width||da.y>E.height-pa.height)throw new RangeError("out of range destination coordinates for image copy");for(var Ea=w.data,Ma=E.data,Wa=0;Wa<pa.height;Wa++)for(var cb=((R.y+Wa)*w.width+R.x)*wa,pb=((da.y+Wa)*E.width+da.x)*wa,yb=0;yb<pa.width*wa;yb++)Ma[pb+yb]=Ea[cb+yb];return E}function Ic(w,E){for(var R=new Uint8Array(1024),da={},pa=0,wa=0;256>pa;pa++,wa+=4){da[E]=pa/255;var Ea=w.evaluate(da);R[wa+0]=Math.floor(255*Ea.r/Ea.a);R[wa+1]=Math.floor(255*Ea.g/
Ea.a);R[wa+2]=Math.floor(255*Ea.b/Ea.a);R[wa+3]=Math.floor(255*Ea.a)}return new wf({width:256,height:1},R)}function Mc(w,E,R){R=R||2;var da,pa,wa,Ea=E&&E.length,Ma=Ea?E[0]*R:w.length,Wa=Jc(w,0,Ma,R,!0),cb=[];if(!Wa||Wa.next===Wa.prev)return cb;if(Ea){Ea=R;var pb,yb=[];var Kb=0;for(pb=E.length;Kb<pb;Kb++){(da=Jc(w,E[Kb]*Ea,Kb<pb-1?E[Kb+1]*Ea:w.length,Ea,!1))===da.next&&(da.steiner=!0);var Hb=yb,Tb=Hb.push,Sb=da,qc=da;do(Sb.x<qc.x||Sb.x===qc.x&&Sb.y<qc.y)&&(qc=Sb),Sb=Sb.next;while(Sb!==da);Tb.call(Hb,
qc)}yb.sort(pc);for(Kb=0;Kb<yb.length;Kb++)mc(yb[Kb],Wa),Wa=yc(Wa,Wa.next)}if(w.length>80*R){var bd=E=w[0];var ed=da=w[1];for(Ea=R;Ea<Ma;Ea+=R)(pa=w[Ea])<bd&&(bd=pa),(wa=w[Ea+1])<ed&&(ed=wa),pa>E&&(E=pa),wa>da&&(da=wa);var Oc=0!==(Oc=Math.max(E-bd,da-ed))?1/Oc:0}return lc(Wa,cb,R,bd,ed,Oc),cb}function Jc(w,E,R,da,pa){if(pa===0<hj(w,E,R,da))for(pa=E;pa<R;pa+=da)var wa=Rf(pa,w[pa],w[pa+1],wa);else for(pa=R-da;pa>=E;pa-=da)wa=Rf(pa,w[pa],w[pa+1],wa);return wa&&md(wa,wa.next)&&(Fg(wa),wa=wa.next),wa}
function yc(w,E){if(!w)return w;E||(E=w);var R=w;do if(w=!1,R.steiner||!md(R,R.next)&&0!==qd(R.prev,R,R.next))R=R.next;else{if(Fg(R),(R=E=R.prev)===R.next)break;w=!0}while(w||R!==E);return E}function lc(w,E,R,da,pa,wa,Ea){if(w){if(!Ea&&wa){var Ma=w,Wa=Ma;do null===Wa.z&&(Wa.z=cd(Wa.x,Wa.y,da,pa,wa)),Wa.prevZ=Wa.prev,Wa=Wa.nextZ=Wa.next;while(Wa!==Ma);Wa.prevZ.nextZ=null;Wa.prevZ=null;Ma=Wa;var cb,pb,yb,Kb,Hb=1;do{Wa=Ma;var Tb=Ma=null;for(yb=0;Wa;){yb++;var Sb=Wa;for(cb=Kb=0;cb<Hb&&(Kb++,Sb=Sb.nextZ);cb++);
for(cb=Hb;0<Kb||0<cb&&Sb;)0!==Kb&&(0===cb||!Sb||Wa.z<=Sb.z)?(pb=Wa,Wa=Wa.nextZ,Kb--):(pb=Sb,Sb=Sb.nextZ,cb--),Tb?Tb.nextZ=pb:Ma=pb,pb.prevZ=Tb,Tb=pb;Wa=Sb}Tb.nextZ=null;Hb*=2}while(1<yb)}for(Wa=w;w.prev!==w.next;){pb=w.prev;Ma=w.next;if(wa)a:{Sb=w;Hb=da;cb=pa;var qc=wa;Tb=Sb.prev;yb=Sb.next;if(0<=qd(Tb,Sb,yb))Sb=!1;else{var bd=Tb.x>Sb.x?Tb.x>yb.x?Tb.x:yb.x:Sb.x>yb.x?Sb.x:yb.x,ed=Tb.y>Sb.y?Tb.y>yb.y?Tb.y:yb.y:Sb.y>yb.y?Sb.y:yb.y;Kb=cd(Tb.x<Sb.x?Tb.x<yb.x?Tb.x:yb.x:Sb.x<yb.x?Sb.x:yb.x,Tb.y<Sb.y?Tb.y<
yb.y?Tb.y:yb.y:Sb.y<yb.y?Sb.y:yb.y,Hb,cb,qc);Hb=cd(bd,ed,Hb,cb,qc);cb=Sb.prevZ;for(qc=Sb.nextZ;cb&&cb.z>=Kb&&qc&&qc.z<=Hb;){if(cb!==Sb.prev&&cb!==Sb.next&&kd(Tb.x,Tb.y,Sb.x,Sb.y,yb.x,yb.y,cb.x,cb.y)&&0<=qd(cb.prev,cb,cb.next)||(cb=cb.prevZ,qc!==Sb.prev&&qc!==Sb.next&&kd(Tb.x,Tb.y,Sb.x,Sb.y,yb.x,yb.y,qc.x,qc.y)&&0<=qd(qc.prev,qc,qc.next))){Sb=!1;break a}qc=qc.nextZ}for(;cb&&cb.z>=Kb;){if(cb!==Sb.prev&&cb!==Sb.next&&kd(Tb.x,Tb.y,Sb.x,Sb.y,yb.x,yb.y,cb.x,cb.y)&&0<=qd(cb.prev,cb,cb.next)){Sb=!1;break a}cb=
cb.prevZ}for(;qc&&qc.z<=Hb;){if(qc!==Sb.prev&&qc!==Sb.next&&kd(Tb.x,Tb.y,Sb.x,Sb.y,yb.x,yb.y,qc.x,qc.y)&&0<=qd(qc.prev,qc,qc.next)){Sb=!1;break a}qc=qc.nextZ}Sb=!0}}else a:if(Sb=w,Tb=Sb.prev,yb=Sb.next,0<=qd(Tb,Sb,yb))Sb=!1;else{for(Kb=Sb.next.next;Kb!==Sb.prev;){if(kd(Tb.x,Tb.y,Sb.x,Sb.y,yb.x,yb.y,Kb.x,Kb.y)&&0<=qd(Kb.prev,Kb,Kb.next)){Sb=!1;break a}Kb=Kb.next}Sb=!0}if(Sb)E.push(pb.i/R),E.push(w.i/R),E.push(Ma.i/R),Fg(w),Wa=w=Ma.next;else if((w=Ma)===Wa){if(Ea)if(1===Ea){w=yc(w);Ea=E;pb=R;Ma=w;do Wa=
Ma.prev,Sb=Ma.next.next,!md(Wa,Sb)&&pe(Wa,Ma,Ma.next,Sb)&&fe(Wa,Sb)&&fe(Sb,Wa)&&(Ea.push(Wa.i/pb),Ea.push(Ma.i/pb),Ea.push(Sb.i/pb),Fg(Ma),Fg(Ma.next),Ma=w=Sb),Ma=Ma.next;while(Ma!==w);w=yc(Ma);lc(w,E,R,da,pa,wa,2)}else{if(2===Ea)a:{Ea=w;do{for(pb=Ea.next.next;pb!==Ea.prev;){if(Ea.i!==pb.i&&nd(Ea,pb)){w=De(Ea,pb);Ea=yc(Ea,Ea.next);w=yc(w,w.next);lc(Ea,E,R,da,pa,wa);lc(w,E,R,da,pa,wa);break a}pb=pb.next}Ea=Ea.next}while(Ea!==w)}}else lc(yc(w),E,R,da,pa,wa,1);break}}}}function pc(w,E){return w.x-E.x}
function mc(w,E){if(E=function(R,da){var pa=da,wa=R.x,Ea=R.y,Ma=-1/0;do{if(Ea<=pa.y&&Ea>=pa.next.y&&pa.next.y!==pa.y){var Wa=pa.x+(Ea-pa.y)*(pa.next.x-pa.x)/(pa.next.y-pa.y);if(Wa<=wa&&Wa>Ma){if(Ma=Wa,Wa===wa){if(Ea===pa.y)return pa;if(Ea===pa.next.y)return pa.next}var cb=pa.x<pa.next.x?pa:pa.next}}pa=pa.next}while(pa!==da);if(!cb)return null;if(wa===Ma)return cb;Wa=cb;var pb=cb.x,yb=cb.y,Kb=1/0;pa=cb;do{if(wa>=pa.x&&pa.x>=pb&&wa!==pa.x&&kd(Ea<yb?wa:Ma,Ea,pb,yb,Ea<yb?Ma:wa,Ea,pa.x,pa.y)){da=Math.abs(Ea-
pa.y)/(wa-pa.x);var Hb;if((Hb=fe(pa,R))&&!(Hb=da<Kb)&&(Hb=da===Kb)&&!(Hb=pa.x>cb.x)&&(Hb=pa.x===cb.x)){Hb=cb;var Tb=pa;Hb=0>qd(Hb.prev,Hb,Tb.prev)&&0>qd(Tb.next,Hb,Hb.next)}Hb&&(cb=pa,Kb=da)}pa=pa.next}while(pa!==Wa);return cb}(w,E))w=De(E,w),yc(E,E.next),yc(w,w.next)}function cd(w,E,R,da,pa){return 1431655765&((w=858993459&((w=252645135&((w=16711935&((w=32767*(w-R)*pa)|w<<8))|w<<4))|w<<2))|w<<1)|(1431655765&((E=858993459&((E=252645135&((E=16711935&((E=32767*(E-da)*pa)|E<<8))|E<<4))|E<<2))|E<<1))<<
1}function kd(w,E,R,da,pa,wa,Ea,Ma){return 0<=(pa-Ea)*(E-Ma)-(w-Ea)*(wa-Ma)&&0<=(w-Ea)*(da-Ma)-(R-Ea)*(E-Ma)&&0<=(R-Ea)*(wa-Ma)-(pa-Ea)*(da-Ma)}function nd(w,E){return w.next.i!==E.i&&w.prev.i!==E.i&&!function(R,da){var pa=R;do{if(pa.i!==R.i&&pa.next.i!==R.i&&pa.i!==da.i&&pa.next.i!==da.i&&pe(pa,pa.next,R,da))return!0;pa=pa.next}while(pa!==R);return!1}(w,E)&&(fe(w,E)&&fe(E,w)&&function(R,da){var pa=R,wa=!1,Ea=(R.x+da.x)/2;da=(R.y+da.y)/2;do pa.y>da!=pa.next.y>da&&pa.next.y!==pa.y&&Ea<(pa.next.x-pa.x)*
(da-pa.y)/(pa.next.y-pa.y)+pa.x&&(wa=!wa),pa=pa.next;while(pa!==R);return wa}(w,E)&&(qd(w.prev,w,E.prev)||qd(w,E.prev,E))||md(w,E)&&0<qd(w.prev,w,w.next)&&0<qd(E.prev,E,E.next))}function qd(w,E,R){return(E.y-w.y)*(R.x-E.x)-(E.x-w.x)*(R.y-E.y)}function md(w,E){return w.x===E.x&&w.y===E.y}function pe(w,E,R,da){var pa=Be(qd(w,E,R)),wa=Be(qd(w,E,da)),Ea=Be(qd(R,da,w)),Ma=Be(qd(R,da,E));return pa!==wa&&Ea!==Ma||!(0!==pa||!qe(w,R,E))||!(0!==wa||!qe(w,da,E))||!(0!==Ea||!qe(R,w,da))||!(0!==Ma||!qe(R,E,da))}
function qe(w,E,R){return E.x<=Math.max(w.x,R.x)&&E.x>=Math.min(w.x,R.x)&&E.y<=Math.max(w.y,R.y)&&E.y>=Math.min(w.y,R.y)}function Be(w){return 0<w?1:0>w?-1:0}function fe(w,E){return 0>qd(w.prev,w,w.next)?0<=qd(w,E,w.next)&&0<=qd(w,w.prev,E):0>qd(w,E,w.prev)||0>qd(w,w.next,E)}function De(w,E){var R=new Hi(w.i,w.x,w.y),da=new Hi(E.i,E.x,E.y),pa=w.next,wa=E.prev;return w.next=E,E.prev=w,R.next=pa,pa.prev=R,da.next=R,R.prev=da,wa.next=da,da.prev=wa,da}function Rf(w,E,R,da){w=new Hi(w,E,R);return da?(w.next=
da.next,w.prev=da,da.next.prev=w,da.next=w):(w.prev=w,w.next=w),w}function Fg(w){w.next.prev=w.prev;w.prev.next=w.next;w.prevZ&&(w.prevZ.nextZ=w.nextZ);w.nextZ&&(w.nextZ.prevZ=w.prevZ)}function Hi(w,E,R){this.i=w;this.x=E;this.y=R;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function hj(w,E,R,da){for(var pa=0,wa=R-da;E<R;E+=da)pa+=(w[wa]-w[E])*(w[E+1]+w[wa+1]),wa=E;return pa}function ij(w,E,R,da,pa){!function yb(Ea,Ma,Wa,cb,pb){for(;cb>Wa;){if(600<cb-Wa){var Kb=cb-Wa+1,Hb=
Ma-Wa+1,Tb=Math.log(Kb),Sb=.5*Math.exp(2*Tb/3);Tb=.5*Math.sqrt(Tb*Sb*(Kb-Sb)/Kb)*(0>Hb-Kb/2?-1:1);yb(Ea,Ma,Math.max(Wa,Math.floor(Ma-Hb*Sb/Kb+Tb)),Math.min(cb,Math.floor(Ma+(Kb-Hb)*Sb/Kb+Tb)),pb)}Kb=Ea[Ma];Hb=Wa;Sb=cb;hh(Ea,Wa,Ma);for(0<pb(Ea[cb],Kb)&&hh(Ea,Wa,cb);Hb<Sb;){hh(Ea,Hb,Sb);Hb++;for(Sb--;0>pb(Ea[Hb],Kb);)Hb++;for(;0<pb(Ea[Sb],Kb);)Sb--}0===pb(Ea[Wa],Kb)?hh(Ea,Wa,Sb):hh(Ea,++Sb,cb);Sb<=Ma&&(Wa=Sb+1);Ma<=Sb&&(cb=Sb-1)}}(w,E,R||0,da||w.length-1,pa||Lj)}function hh(w,E,R){var da=w[E];w[E]=
w[R];w[R]=da}function Lj(w,E){return w<E?-1:w>E?1:0}function jj(w,E){var R=w.length;if(1>=R)return[w];for(var da,pa,wa=[],Ea=0;Ea<R;Ea++){var Ma=w[Ea];for(var Wa=0,cb=0,pb=Ma.length,yb=pb-1,Kb=void 0,Hb=void 0;cb<pb;yb=cb++)Wa+=((Hb=Ma[yb]).x-(Kb=Ma[cb]).x)*(Kb.y+Hb.y);Ma=Wa;0!==Ma&&(w[Ea].area=Math.abs(Ma),void 0===pa&&(pa=0>Ma),pa===0>Ma?(da&&wa.push(da),da=[w[Ea]]):da.push(w[Ea]))}if(da&&wa.push(da),1<E)for(w=0;w<wa.length;w++)wa[w].length<=E||(ij(wa[w],E,1,wa[w].length-1,Mj),wa[w]=wa[w].slice(0,
E));return wa}function Mj(w,E){return E.area-w.area}function ci(w,E,R){R=R.patternDependencies;for(var da=!1,pa=0;pa<E.length;pa+=1){var wa=E[pa].paint.get(w+"-pattern");wa.isConstant()||(da=!0);(wa=wa.constantOr(null))&&(da=!0,R[wa.to]=!0,R[wa.from]=!0)}return da}function Ii(w,E,R,da,pa){for(var wa=pa.patternDependencies,Ea=0;Ea<E.length;Ea+=1){var Ma=E[Ea],Wa=Ma.paint.get(w+"-pattern").value;if("constant"!==Wa.kind){var cb=Wa.evaluate({zoom:da-1},R,{},pa.availableImages),pb=Wa.evaluate({zoom:da},
R,{},pa.availableImages);Wa=Wa.evaluate({zoom:da+1},R,{},pa.availableImages);pb=pb&&pb.name?pb.name:pb;Wa=Wa&&Wa.name?Wa.name:Wa;wa[cb=cb&&cb.name?cb.name:cb]=!0;wa[pb]=!0;wa[Wa]=!0;R.patterns[Ma.id]={min:cb,mid:pb,max:Wa}}}return R}function Pg(w,E,R,da,pa){this.properties={};this.extent=R;this.type=0;this._pbf=w;this._geometry=-1;this._keys=da;this._values=pa;w.readFields(Nj,this,E)}function Nj(w,E,R){if(1==w)E.id=R.readVarint();else if(2==w)for(w=R.readVarint()+R.pos;R.pos<w;){var da=E._keys[R.readVarint()],
pa=E._values[R.readVarint()];E.properties[da]=pa}else 3==w?E.type=R.readVarint():4==w&&(E._geometry=R.pos)}function Oj(w,E){this.version=1;this.name=null;this.extent=4096;this.length=0;this._pbf=w;this._keys=[];this._values=[];this._features=[];w.readFields(Ah,this,E);this.length=this._features.length}function Ah(w,E,R){if(15===w)E.version=R.readVarint();else if(1===w)E.name=R.readString();else if(5===w)E.extent=R.readVarint();else if(2===w)E._features.push(R.pos);else if(3===w)E._keys.push(R.readString());
else if(4===w){w=E._values;E=w.push;for(var da=null,pa=R.readVarint()+R.pos;R.pos<pa;)da=R.readVarint()>>3,da=1===da?R.readString():2===da?R.readFloat():3===da?R.readDouble():4===da?R.readVarint64():5===da?R.readVarint():6===da?R.readSVarint():7===da?R.readBoolean():null;E.call(w,da)}}function zh(w,E,R){3===w&&(w=new Kk(R,R.readVarint()+R.pos),w.length&&(E[w.name]=w))}function ei(w,E,R,da,pa,wa,Ea,Ma){w.emplaceBack(E,R,2*Math.floor(da*Mk)+Ea,pa*Mk*2,wa*Mk*2,Math.round(Ma))}function Bh(w,E){return w.x*
E.x+w.y*E.y}function Ch(w,E){if(1===w.length){for(var R,da=0,pa=E[da++];!R||pa.equals(R);)if(!(R=E[da++]))return 1/0;for(;da<E.length;da++){var wa=E[da],Ea=w[0],Ma=R.sub(pa),Wa=wa.sub(pa),cb=Ea.sub(pa);Ea=Bh(Ma,Ma);var pb=Bh(Ma,Wa),yb=Bh(Wa,Wa);Ma=Bh(cb,Ma);Wa=Bh(cb,Wa);cb=Ea*yb-pb*pb;yb=(yb*Ma-pb*Wa)/cb;Ea=(Ea*Wa-pb*Ma)/cb;wa=pa.z*(1-yb-Ea)+R.z*yb+wa.z*Ea;if(isFinite(wa))return wa}return 1/0}w=1/0;for(R=0;R<E.length;R+=1)w=Math.min(w,E[R].z);return w}function gi(w,E){return 0<E?E+2*w:w}function ih(w,
E,R){return w.sections.forEach(function(da){var pa=da.text;var wa=E.layout.get("text-transform").evaluate(R,{});wa=("uppercase"===wa?pa=pa.toLocaleUpperCase():"lowercase"===wa&&(pa=pa.toLocaleLowerCase()),If.applyArabicShaping&&(pa=If.applyArabicShaping(pa)),pa);da.text=wa}),w}function Ae(w){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(w)?w:new Uint8Array(w||0);this.type=this.pos=0;this.length=this.buf.length}function Sf(w){return w.type===Ae.Bytes?w.readVarint()+w.pos:w.pos+1}function Eh(w,E,
R){E=16383>=E?1:2097151>=E?2:268435455>=E?3:Math.floor(Math.log(E)/(7*Math.LN2));R.realloc(E);for(var da=R.pos-1;da>=w;da--)R.buf[da+E]=R.buf[da]}function Fh(w,E){for(var R=0;R<w.length;R++)E.writeVarint(w[R])}function Pj(w,E){for(var R=0;R<w.length;R++)E.writeSVarint(w[R])}function hi(w,E){for(var R=0;R<w.length;R++)E.writeFloat(w[R])}function Ki(w,E){for(var R=0;R<w.length;R++)E.writeDouble(w[R])}function Qj(w,E){for(var R=0;R<w.length;R++)E.writeBoolean(w[R])}function Rj(w,E){for(var R=0;R<w.length;R++)E.writeFixed32(w[R])}
function Sj(w,E){for(var R=0;R<w.length;R++)E.writeSFixed32(w[R])}function ii(w,E){for(var R=0;R<w.length;R++)E.writeFixed64(w[R])}function sk(w,E){for(var R=0;R<w.length;R++)E.writeSFixed64(w[R])}function Gh(w,E){return(w[E]|w[E+1]<<8|w[E+2]<<16)+16777216*w[E+3]}function jh(w,E,R){w[R]=E;w[R+1]=E>>>8;w[R+2]=E>>>16;w[R+3]=E>>>24}function tg(w,E){return(w[E]|w[E+1]<<8|w[E+2]<<16)+(w[E+3]<<24)}function Tj(w,E,R){1===w&&R.readMessage(Qg,E)}function Qg(w,E,R){if(3===w){w=R.readMessage(ki,{});R=w.width;
var da=w.height,pa=w.left,wa=w.top,Ea=w.advance;E.push({id:w.id,bitmap:new Wh({width:R+6,height:da+6},w.bitmap),metrics:{width:R,height:da,left:pa,top:wa,advance:Ea}})}}function ki(w,E,R){1===w?E.id=R.readVarint():2===w?E.bitmap=R.readBytes():3===w?E.width=R.readVarint():4===w?E.height=R.readVarint():5===w?E.left=R.readSVarint():6===w?E.top=R.readSVarint():7===w&&(E.advance=R.readVarint())}function Pe(w){for(var E=0,R=0,da=0;da<w.length;da+=1){var pa=w[da];E+=pa.w*pa.h;R=Math.max(R,pa.w)}w.sort(function(cb,
pb){return pb.h-cb.h});R=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(E/.95)),R),h:1/0}];for(var wa=pa=da=0;wa<w.length;wa+=1)for(var Ea=w[wa],Ma=R.length-1;0<=Ma;Ma--){var Wa=R[Ma];if(!(Ea.w>Wa.w||Ea.h>Wa.h)){(Ea.x=Wa.x,Ea.y=Wa.y,pa=Math.max(pa,Ea.y+Ea.h),da=Math.max(da,Ea.x+Ea.w),Ea.w===Wa.w&&Ea.h===Wa.h)?(Ea=R.pop(),Ma<R.length&&(R[Ma]=Ea)):Ea.h===Wa.h?(Wa.x+=Ea.w,Wa.w-=Ea.w):Ea.w===Wa.w?(Wa.y+=Ea.h,Wa.h-=Ea.h):(R.push({x:Wa.x+Ea.w,y:Wa.y,w:Wa.w-Ea.w,h:Ea.h}),Wa.y+=Ea.h,Wa.h-=Ea.h);break}}return{w:da,
h:pa,fill:E/(da*pa)||0}}function lh(w,E,R,da,pa,wa,Ea,Ma,Wa,cb,pb,yb,Kb,Hb,Tb,Sb){pa=Wb.fromFeature(w,pa);yb===Kc.vertical&&pa.verticalizePunctuation();var qc=If.processBidirectionalText,bd=If.processStyledBidirectionalText;if(qc&&1===pa.sections.length){w=[];var ed=0;for(wa=qc(pa.toString(),Gg(pa,cb,wa,E,da,Hb,Tb));ed<wa.length;ed+=1){Hb=wa[ed];Tb=new Wb;Tb.text=Hb;Tb.sections=pa.sections;for(qc=0;qc<Hb.length;qc++)Tb.sectionIndex.push(0);w.push(Tb)}}else if(bd)for(w=[],ed=0,wa=bd(pa.text,pa.sectionIndex,
Gg(pa,cb,wa,E,da,Hb,Tb));ed<wa.length;ed+=1)Hb=wa[ed],Tb=new Wb,Tb.text=Hb[0],Tb.sectionIndex=Hb[1],Tb.sections=pa.sections,w.push(Tb);else w=function(Oc,rd){for(var pd=[],wd=Oc.text,Gd=0,Od=0;Od<rd.length;Od+=1){var Ud=rd[Od];pd.push(Oc.substring(Gd,Ud));Gd=Ud}return Gd<wd.length&&pd.push(Oc.substring(Gd,wd.length)),pd}(pa,Gg(pa,cb,wa,E,da,Hb,Tb));wa=[];pb={positionedLines:wa,text:pa.toString(),top:pb[1],bottom:pb[1],left:pb[0],right:pb[0],writingMode:yb,iconsInText:!1,verticalizable:!1};return function(Oc,
rd,pd,wd,Gd,Od,Ud,Vd,Kd,Qd,je,Hd){var Ad=0,Id=-17,we=0,Re=0;Vd="right"===Vd?1:"left"===Vd?0:.5;for(var Gf=0,mf=0;mf<Gd.length;mf+=1){var Se=Gd[mf];Se.trim();var le=Se.getMaxScale(),$e=24*(le-1),tf={positionedGlyphs:[],lineOffset:0};Oc.positionedLines[Gf]=tf;var Df=tf.positionedGlyphs,xj=0;if(Se.length()){for(var Lg=0;Lg<Se.length();Lg++){var Xe=Se.getSection(Lg),Nf=Se.getSectionIndex(Lg),xi=Se.getCharCode(Lg),Zi,yj=null,Hf=null,yi=24,cf=!(Kd===Kc.horizontal||!je&&!ud(xi)||je&&(sc[xi]||(Of=xi,Bd.Arabic(Of)||
Bd["Arabic Supplement"](Of)||Bd["Arabic Extended-A"](Of)||Bd["Arabic Presentation Forms-A"](Of)||Bd["Arabic Presentation Forms-B"](Of))));if(Xe.imageName){yi=wd[Xe.imageName];if(!yi)continue;Hf=Xe.imageName;Oc.iconsInText=Oc.iconsInText||!0;yj=yi.paddedRect;var rg=yi.displaySize;Xe.scale=24*Xe.scale/Hd;var Me=$e+(24-rg[1]*Xe.scale);yi=(Zi={width:rg[0],height:rg[1],left:1,top:-3,advance:cf?rg[1]:rg[0]}).advance;rg=cf?rg[0]*Xe.scale-24*le:rg[1]*Xe.scale-24*le;0<rg&&rg>xj&&(xj=rg)}else{if((Me=(Me=pd[Xe.fontStack])&&
Me[xi])&&Me.rect)yj=Me.rect,Zi=Me.metrics;else{Me=(Me=rd[Xe.fontStack])&&Me[xi];if(!Me)continue;Zi=Me.metrics}Me=24*(le-Xe.scale)}cf?(Oc.verticalizable=!0,Df.push({glyph:xi,imageName:Hf,x:Ad,y:Id+Me,vertical:cf,scale:Xe.scale,fontStack:Xe.fontStack,sectionIndex:Nf,metrics:Zi,rect:yj}),Ad+=yi*Xe.scale+Qd):(Df.push({glyph:xi,imageName:Hf,x:Ad,y:Id+Me,vertical:cf,scale:Xe.scale,fontStack:Xe.fontStack,sectionIndex:Nf,metrics:Zi,rect:yj}),Ad+=Zi.advance*Xe.scale+Qd)}if(0!==Df.length&&(we=Math.max(Ad-Qd,
we),Ad=Df,Df=Df.length-1,Se=xj,Vd||Se))for(Lg=Ad[Df],Lg=(Ad[Df].x+Lg.metrics.advance*Lg.scale)*Vd,Xe=0;Xe<=Df;Xe++)Ad[Xe].x-=Lg,Ad[Xe].y+=Se;Ad=0;le=Od*le+xj;tf.lineOffset=Math.max(xj,$e);Id+=le;Re=Math.max(le,Re)}else Id+=Od;++Gf}var Of;rd=Id- -17;pd=Hh(Ud);Ud=pd.horizontalAlign;pd=pd.verticalAlign;Vd=(Vd-Ud)*we;Gd=Re!==Od?-rd*pd- -17:(-pd*Gd.length+.5)*Od;Od=0;for(Re=Oc.positionedLines;Od<Re.length;Od+=1)for(wd=0,Kd=Re[Od].positionedGlyphs;wd<Kd.length;wd+=1)Qd=Kd[wd],Qd.x+=Vd,Qd.y+=Gd;Oc.top+=
-pd*rd;Oc.bottom=Oc.top+rd;Oc.left+=-Ud*we;Oc.right=Oc.left+we}(pb,E,R,da,w,Ea,Ma,Wa,yb,cb,Kb,Sb),!function(Oc){for(var rd=0;rd<Oc.length;rd+=1)if(0!==Oc[rd].positionedGlyphs.length)return!1;return!0}(wa)&&pb}function Rg(w,E,R,da,pa,wa){return E.imageName?(w=da[E.imageName])?w.displaySize[0]*E.scale*24/wa+pa:0:(w=(wa=R[E.fontStack])&&wa[w])?w.metrics.advance*E.scale+pa:0}function Sg(w,E,R,da){var pa=Math.pow(w-E,2);return da?w<E?pa/2:2*pa:pa+Math.abs(R)*R}function Fe(w,E,R){var da=0;return 10===w&&
(da-=1E4),R&&(da+=150),40!==w&&65288!==w||(da+=50),41!==E&&65289!==E||(da+=50),da}function Ie(w,E,R,da,pa,wa){for(var Ea=null,Ma=Sg(E,R,pa,wa),Wa=0;Wa<da.length;Wa+=1){var cb=da[Wa],pb=Sg(E-cb.x,R,pa,wa)+cb.badness;pb<=Ma&&(Ea=cb,Ma=pb)}return{index:w,x:E,priorBreak:Ea,badness:Ma}}function Gg(w,E,R,da,pa,wa,Ea){if("point"!==wa||!w)return[];var Ma;wa=[];R=function(Tb,Sb,qc,bd,ed,Oc){for(var rd=0,pd=0;pd<Tb.length();pd++){var wd=Tb.getSection(pd);rd+=Rg(Tb.getCharCode(pd),wd,bd,ed,Sb,Oc)}return rd/
Math.max(1,Math.ceil(rd/qc))}(w,E,R,da,pa,Ea);for(var Wa=0<=w.text.indexOf("\u200b"),cb=0,pb=0;pb<w.length();pb++){var yb=w.getSection(pb),Kb=w.getCharCode(pb);if(sc[Kb]||(cb+=Rg(Kb,yb,da,pa,E,Ea)),pb<w.length()-1){var Hb=!(11904>(Ma=Kb)||!(Bd["Bopomofo Extended"](Ma)||Bd.Bopomofo(Ma)||Bd["CJK Compatibility Forms"](Ma)||Bd["CJK Compatibility Ideographs"](Ma)||Bd["CJK Compatibility"](Ma)||Bd["CJK Radicals Supplement"](Ma)||Bd["CJK Strokes"](Ma)||Bd["CJK Symbols and Punctuation"](Ma)||Bd["CJK Unified Ideographs Extension A"](Ma)||
Bd["CJK Unified Ideographs"](Ma)||Bd["Enclosed CJK Letters and Months"](Ma)||Bd["Halfwidth and Fullwidth Forms"](Ma)||Bd.Hiragana(Ma)||Bd["Ideographic Description Characters"](Ma)||Bd["Kangxi Radicals"](Ma)||Bd["Katakana Phonetic Extensions"](Ma)||Bd.Katakana(Ma)||Bd["Vertical Forms"](Ma)||Bd["Yi Radicals"](Ma)||Bd["Yi Syllables"](Ma)));(Tc[Kb]||Hb||yb.imageName)&&wa.push(Ie(pb+1,cb,R,wa,Fe(Kb,w.getCharCode(pb+1),Hb&&Wa),!1))}}return function qc(Sb){return Sb?qc(Sb.priorBreak).concat(Sb.index):[]}(Ie(w.length(),
cb,R,wa,0,!0))}function Hh(w){var E=.5,R=.5;switch(w){case "right":case "top-right":case "bottom-right":E=1;break;case "left":case "top-left":case "bottom-left":E=0}switch(w){case "bottom":case "bottom-right":case "bottom-left":R=1;break;case "top":case "top-right":case "top-left":R=0}return{horizontalAlign:E,verticalAlign:R}}function Uj(w,E,R,da,pa,wa){w=w.image;if(w.content){var Ea=w.content;var Ma=w.pixelRatio||1;Ea=[Ea[0]/Ma,Ea[1]/Ma,w.displaySize[0]-Ea[2]/Ma,w.displaySize[1]-Ea[3]/Ma]}var Wa,
cb,pb,yb;Ma=E.left*wa;var Kb=E.right*wa;"width"===R||"both"===R?(yb=pa[0]+Ma-da[3],cb=pa[0]+Kb+da[1]):cb=(yb=pa[0]+(Ma+Kb-w.displaySize[0])/2)+w.displaySize[0];Ma=E.top*wa;E=E.bottom*wa;return"height"===R||"both"===R?(Wa=pa[1]+Ma-da[0],pb=pa[1]+E+da[2]):pb=(Wa=pa[1]+(Ma+E-w.displaySize[1])/2)+w.displaySize[1],{image:w,top:Wa,right:cb,bottom:pb,left:yb,collisionPadding:Ea}}function kj(w,E){E=E.expression;if("constant"===E.kind)return{kind:"constant",layoutSize:E.evaluate(new Ke(w+1))};if("source"===
E.kind)return{kind:"source"};for(var R=E.zoomStops,da=E.interpolationType,pa=0;pa<R.length&&R[pa]<=w;)pa++;for(var wa=pa=Math.max(0,pa-1);wa<R.length&&R[wa]<w+1;)wa++;wa=Math.min(R.length-1,wa);w=R[pa];R=R[wa];return"composite"===E.kind?{kind:"composite",minZoom:w,maxZoom:R,interpolationType:da}:{kind:"camera",minZoom:w,maxZoom:R,minSize:E.evaluate(new Ke(w)),maxSize:E.evaluate(new Ke(R)),interpolationType:da}}function lj(w,E,R){var da=E.uSize,pa=R.lowerSize;return"source"===w.kind?pa/128:"composite"===
w.kind?va(pa/128,R.upperSize/128,E.uSizeT):da}function mj(w,E){var R=0,da=0;if("constant"===w.kind)da=w.layoutSize;else if("source"!==w.kind){var pa=w.interpolationType;E=pa?c(Bf.interpolationFactor(pa,E,w.minZoom,w.maxZoom),0,1):0;"camera"===w.kind?da=va(w.minSize,w.maxSize,E):R=E}return{uSizeT:R,uSize:da}}function mh(w,E,R,da,pa){if(void 0===E.segment)return!0;var wa=E;E=E.segment+1;for(var Ea=0;Ea>-R/2;){if(0>--E)return!1;Ea-=w[E].dist(wa);wa=w[E]}Ea+=w[E].dist(w[E+1]);E++;wa=[];for(var Ma=0;Ea<
R/2;){var Wa=w[E],cb=w[E+1];if(!cb)return!1;var pb=w[E-1].angleTo(Wa)-Wa.angleTo(cb);pb=Math.abs((pb+3*Math.PI)%(2*Math.PI)-Math.PI);wa.push({distance:Ea,angleDelta:pb});for(Ma+=pb;Ea-wa[0].distance>da;)Ma-=wa.shift().angleDelta;if(Ma>pa)return!1;E++;Ea+=Wa.dist(cb)}return!0}function qf(w){for(var E=0,R=0;R<w.length-1;R++)E+=w[R].dist(w[R+1]);return E}function Li(w,E,R,da,pa,wa){pa=R?.6*pa*wa:0;R=Math.max(R?R.right-R.left:0,da?da.right-da.left:0)*wa;var Ea=0,Ma=qf(w)/2;for(da=0;da<w.length-1;da++){wa=
w[da];var Wa=w[da+1],cb=wa.dist(Wa);if(Ea+cb>Ma)return Ma=(Ma-Ea)/cb,Ea=va(wa.x,Wa.x,Ma),Ma=va(wa.y,Wa.y,Ma),da=new Vc(Ea,Ma,Wa.angleTo(wa),da),da._round(),!pa||mh(w,da,R,pa,E)?da:void 0;Ea+=cb}}function tk(w,E,R,da,pa,wa,Ea,Ma,Wa){pa=Math.max(da?da.right-da.left:0,pa?pa.right-pa.left:0);var cb=pa*Ea,pb=0===w[0].x||w[0].x===Wa||0===w[0].y||w[0].y===Wa;return E-cb<E/4&&(E=cb+E/4),function pd(Kb,Hb,Tb,Sb,qc,bd,ed,Oc,rd){var wd=bd/2,Gd=qf(Kb),Od=0;Hb-=Tb;for(var Ud=[],Vd=0;Vd<Kb.length-1;Vd++){for(var Kd=
Kb[Vd],Qd=Kb[Vd+1],je=Kd.dist(Qd),Hd=Qd.angleTo(Kd);Hb+Tb<Od+je;){var Ad=((Hb+=Tb)-Od)/je,Id=va(Kd.x,Qd.x,Ad);Ad=va(Kd.y,Qd.y,Ad);0<=Id&&Id<rd&&0<=Ad&&Ad<rd&&0<=Hb-wd&&Hb+wd<=Gd&&(Id=new Vc(Id,Ad,Hd,Vd),Id._round(),Sb&&!mh(Kb,Id,bd,Sb,qc)||Ud.push(Id))}Od+=je}return Oc||Ud.length||ed||(Ud=pd(Kb,Od/2,Tb,Sb,qc,bd,ed,!0,rd)),Ud}(w,pb?E/2*Ma%E:(pa/2+2*wa)*Ea*Ma%E,E,da?.6*wa*Ea:0,R,cb,pb,!1,Wa)}function hf(w,E,R,da,pa){for(var wa=[],Ea=0;Ea<w.length;Ea++)for(var Ma=w[Ea],Wa=void 0,cb=0;cb<Ma.length-1;cb++){var pb=
Ma[cb],yb=Ma[cb+1];pb.x<E&&yb.x<E||(pb.x<E?pb=(new Md(E,pb.y+(E-pb.x)/(yb.x-pb.x)*(yb.y-pb.y)))._round():yb.x<E&&(yb=(new Md(E,pb.y+(E-pb.x)/(yb.x-pb.x)*(yb.y-pb.y)))._round()),pb.y<R&&yb.y<R||(pb.y<R?pb=(new Md(pb.x+(R-pb.y)/(yb.y-pb.y)*(yb.x-pb.x),R))._round():yb.y<R&&(yb=(new Md(pb.x+(R-pb.y)/(yb.y-pb.y)*(yb.x-pb.x),R))._round()),pb.x>=da&&yb.x>=da||(pb.x>=da?pb=(new Md(da,pb.y+(da-pb.x)/(yb.x-pb.x)*(yb.y-pb.y)))._round():yb.x>=da&&(yb=(new Md(da,pb.y+(da-pb.x)/(yb.x-pb.x)*(yb.y-pb.y)))._round()),
pb.y>=pa&&yb.y>=pa||(pb.y>=pa?pb=(new Md(pb.x+(pa-pb.y)/(yb.y-pb.y)*(yb.x-pb.x),pa))._round():yb.y>=pa&&(yb=(new Md(pb.x+(pa-pb.y)/(yb.y-pb.y)*(yb.x-pb.x),pa))._round()),Wa&&pb.equals(Wa[Wa.length-1])||wa.push(Wa=[pb]),Wa.push(yb)))))}return wa}function ig(w,E,R,da){var pa=[],wa=w.image,Ea=wa.pixelRatio,Ma=wa.paddedRect.w-2,Wa=wa.paddedRect.h-2,cb=w.right-w.left,pb=w.bottom-w.top,yb=wa.stretchX||[[0,Ma]],Kb=wa.stretchY||[[0,Wa]],Hb=function(Vd,Kd){return Vd+Kd[1]-Kd[0]},Tb=yb.reduce(Hb,0),Sb=Kb.reduce(Hb,
0),qc=Ma-Tb,bd=Wa-Sb,ed=0,Oc=Tb,rd=0,pd=Sb,wd=0,Gd=qc,Od=0,Ud=bd;wa.content&&da&&(Hb=wa.content,ed=Ef(yb,0,Hb[0]),rd=Ef(Kb,0,Hb[1]),Oc=Ef(yb,Hb[0],Hb[2]),pd=Ef(Kb,Hb[1],Hb[3]),wd=Hb[0]-ed,Od=Hb[1]-rd,Gd=Hb[2]-Hb[0]-Oc,Ud=Hb[3]-Hb[1]-pd);Hb=function(Vd,Kd,Qd,je){var Hd=(Vd.stretch-ed)/Oc*cb+w.left,Ad=Vd.fixed-wd-Gd*Vd.stretch/Tb,Id=(Kd.stretch-rd)/pd*pb+w.top,we=Kd.fixed-Od-Ud*Kd.stretch/Sb,Re=(Qd.stretch-ed)/Oc*cb+w.left,Gf=Qd.fixed-wd-Gd*Qd.stretch/Tb,mf=(je.stretch-rd)/pd*pb+w.top,Se=je.fixed-Od-
Ud*je.stretch/Sb,le=new Md(Hd,Id);Id=new Md(Re,Id);Re=new Md(Re,mf);Hd=new Md(Hd,mf);Ad=new Md(Ad/Ea,we/Ea);Gf=new Md(Gf/Ea,Se/Ea);if(we=E*Math.PI/180)Se=Math.sin(we),we=Math.cos(we),Se=[we,-Se,Se,we],le._matMult(Se),Id._matMult(Se),Hd._matMult(Se),Re._matMult(Se);Vd=Vd.stretch+Vd.fixed;Kd=Kd.stretch+Kd.fixed;return{tl:le,tr:Id,bl:Hd,br:Re,tex:{x:wa.paddedRect.x+1+Vd,y:wa.paddedRect.y+1+Kd,w:Qd.stretch+Qd.fixed-Vd,h:je.stretch+je.fixed-Kd},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Ad,
pixelOffsetBR:Gf,minFontScaleX:Gd/Ea/cb,minFontScaleY:Ud/Ea/pb,isSDF:R}};if(da&&(wa.stretchX||wa.stretchY))for(da=Ih(yb,qc,Tb),Kb=Ih(Kb,bd,Sb),Ma=0;Ma<da.length-1;Ma++)for(Wa=da[Ma],yb=da[Ma+1],bd=0;bd<Kb.length-1;bd++)pa.push(Hb(Wa,Kb[bd],yb,Kb[bd+1]));else pa.push(Hb({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Ma+1},{fixed:0,stretch:Wa+1}));return pa}function Ef(w,E,R){for(var da=0,pa=0;pa<w.length;pa+=1){var wa=w[pa];da+=Math.max(E,Math.min(R,wa[1]))-Math.max(E,Math.min(R,wa[0]))}return da}
function Ih(w,E,R){for(var da=[{fixed:-1,stretch:0}],pa=0;pa<w.length;pa+=1){var wa=w[pa],Ea=wa[0];wa=wa[1];var Ma=da[da.length-1];da.push({fixed:Ea-Ma.stretch,stretch:Ma.stretch});da.push({fixed:Ea-Ma.stretch,stretch:Ma.stretch+(wa-Ea)})}return da.push({fixed:E+1,stretch:R}),da}function nh(w,E){return w<E?-1:w>E?1:0}function jg(w,E,R){void 0===E&&(E=1);void 0===R&&(R=!1);for(var da=1/0,pa=1/0,wa=-1/0,Ea=-1/0,Ma=w[0],Wa=0;Wa<Ma.length;Wa++){var cb=Ma[Wa];(!Wa||cb.x<da)&&(da=cb.x);(!Wa||cb.y<pa)&&
(pa=cb.y);(!Wa||cb.x>wa)&&(wa=cb.x);(!Wa||cb.y>Ea)&&(Ea=cb.y)}cb=Math.min(wa-da,Ea-pa);Ma=cb/2;Wa=new yd([],Tf);if(0===cb)return new Md(da,pa);for(;da<wa;da+=cb)for(var pb=pa;pb<Ea;pb+=cb)Wa.push(new Jh(da+Ma,pb+Ma,Ma,w));Ea=wa=pa=0;da=w[0];cb=0;pb=da.length;for(var yb=pb-1;cb<pb;yb=cb++){var Kb=da[cb];yb=da[yb];var Hb=Kb.x*yb.y-yb.x*Kb.y;wa+=(Kb.x+yb.x)*Hb;Ea+=(Kb.y+yb.y)*Hb;pa+=3*Hb}pa=new Jh(wa/pa,Ea/pa,0,w);for(wa=Wa.length;Wa.length;)Ea=Wa.pop(),(Ea.d>pa.d||!pa.d)&&(pa=Ea,R&&console.log("found best %d after %d probes",
Math.round(1E4*Ea.d)/1E4,wa)),Ea.max-pa.d<=E||(Wa.push(new Jh(Ea.p.x-(Ma=Ea.h/2),Ea.p.y-Ma,Ma,w)),Wa.push(new Jh(Ea.p.x+Ma,Ea.p.y-Ma,Ma,w)),Wa.push(new Jh(Ea.p.x-Ma,Ea.p.y+Ma,Ma,w)),Wa.push(new Jh(Ea.p.x+Ma,Ea.p.y+Ma,Ma,w)),wa+=4);return R&&(console.log("num probes: "+wa),console.log("best distance: "+pa.d)),pa.p}function Tf(w,E){return E.max-w.max}function Jh(w,E,R,da){this.p=new Md(w,E);this.h=R;w=this.p;E=!1;R=1/0;for(var pa=0;pa<da.length;pa++)for(var wa=da[pa],Ea=0,Ma=wa.length,Wa=Ma-1;Ea<Ma;Wa=
Ea++){var cb=wa[Ea];Wa=wa[Wa];cb.y>w.y!=Wa.y>w.y&&w.x<(Wa.x-cb.x)*(w.y-cb.y)/(Wa.y-cb.y)+cb.x&&(E=!E);R=Math.min(R,Pc(w,cb,Wa))}this.d=(E?1:-1)*Math.sqrt(R);this.max=this.d+this.h*Math.SQRT2}function nj(w,E){return E[1]!==Rd?function(R,da,pa){var wa=0,Ea=0;switch(da=Math.abs(da),pa=Math.abs(pa),R){case "top-right":case "top-left":case "top":Ea=pa-7;break;case "bottom-right":case "bottom-left":case "bottom":Ea=7-pa}switch(R){case "top-right":case "bottom-right":case "right":wa=-da;break;case "top-left":case "bottom-left":case "left":wa=
da}return[wa,Ea]}(w,E[0],E[1]):function(R,da){var pa=0,wa=0;0>da&&(da=0);var Ea=da/Math.sqrt(2);switch(R){case "top-right":case "top-left":wa=Ea-7;break;case "bottom-right":case "bottom-left":wa=7-Ea;break;case "bottom":wa=7-da;break;case "top":wa=da-7}switch(R){case "top-right":case "bottom-right":pa=-Ea;break;case "top-left":case "bottom-left":pa=Ea;break;case "left":pa=da;break;case "right":pa=-da}return[pa,wa]}(w,E[0])}function Mi(w){switch(w){case "right":case "top-right":case "bottom-right":return"right";
case "left":case "top-left":case "bottom-left":return"left"}return"center"}function Uf(w,E,R,da,pa,wa,Ea,Ma,Wa,cb,pb,yb,Kb,Hb,Tb){for(var Sb=w.allowVerticalPlacement,qc=pa.layout.get("text-rotate").evaluate(Ea,{})*Math.PI/180,bd=[],ed=0,Oc=R.positionedLines;ed<Oc.length;ed+=1)for(var rd=Oc[ed],pd=0,wd=rd.positionedGlyphs;pd<wd.length;pd+=1){var Gd=wd[pd];if(Gd.rect){var Od=Gd.rect||{},Ud=4,Vd=!0,Kd=1,Qd=0,je=(wa||Sb)&&Gd.vertical,Hd=Gd.metrics.advance*Gd.scale/2;if(Sb&&R.verticalizable&&(Qd=rd.lineOffset/
2-(Gd.imageName?-(24-Gd.metrics.width*Gd.scale)/2:24*(Gd.scale-1))),Gd.imageName){var Ad=da[Gd.imageName];Vd=Ad.sdf;Ud=1/(Kd=Ad.pixelRatio)}Ad=wa?[Gd.x+Hd,Gd.y]:[0,0];var Id=wa?[0,0]:[Gd.x+Hd+Ma[0],Gd.y+Ma[1]-Qd],we=[0,0];je&&(we=Id,Id=[0,0]);Qd=(Gd.metrics.left-Ud)*Gd.scale-Hd+Id[0];Ud=(-Gd.metrics.top-Ud)*Gd.scale+Id[1];Id=Qd+Od.w*Gd.scale/Kd;var Re=Ud+Od.h*Gd.scale/Kd;Kd=new Md(Qd,Ud);Ud=new Md(Id,Ud);Qd=new Md(Qd,Re);Id=new Md(Id,Re);je&&(je=new Md(-Hd,Hd- -17),Re=-Math.PI/2,Hd=12-Hd,Hd=new Md(22-
Hd,-(Gd.imageName?Hd:0)),we=new (Function.prototype.bind.apply(Md,[null].concat(we))),Kd._rotateAround(Re,je)._add(Hd)._add(we),Ud._rotateAround(Re,je)._add(Hd)._add(we),Qd._rotateAround(Re,je)._add(Hd)._add(we),Id._rotateAround(Re,je)._add(Hd)._add(we));qc&&(Hd=Math.sin(qc),we=Math.cos(qc),Hd=[we,-Hd,Hd,we],Kd._matMult(Hd),Ud._matMult(Hd),Qd._matMult(Hd),Id._matMult(Hd));Hd=new Md(0,0);we=new Md(0,0);bd.push({tl:Kd,tr:Ud,bl:Qd,br:Id,tex:Od,writingMode:R.writingMode,glyphOffset:Ad,sectionIndex:Gd.sectionIndex,
isSDF:Vd,pixelOffsetTL:Hd,pixelOffsetBR:we,minFontScaleX:0,minFontScaleY:0})}}R=w.textSizeData;da=null;"source"===R.kind?32640<(da=[128*pa.layout.get("text-size").evaluate(Ea,{})])[0]&&y(w.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):"composite"===R.kind&&(32640<(da=[128*Hb.compositeTextSizes[0].evaluate(Ea,{},Tb),128*Hb.compositeTextSizes[1].evaluate(Ea,{},Tb)])[0]||32640<da[1])&&y(w.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".');w.addSymbols(w.text,
bd,da,Ma,wa,Ea,cb,E,Wa.lineStartIndex,Wa.lineLength,Kb,Tb);for(E=0;E<pb.length;E+=1)yb[pb[E]]=w.text.placedSymbolArray.length-1;return 4*bd.length}function jf(w){for(var E in w)return w[E];return null}function li(w,E,R,da){w=w.compareText;if(E in w)for(var pa=w[E],wa=pa.length-1;0<=wa;wa--){if(da.dist(pa[wa])<R)return!0}else w[E]=[];return w[E].push(da),!1}function Vf(w,E,R,da,pa,wa,Ea,Ma,Wa,cb,pb,yb,Kb){w.emplaceBack(E,R,Math.round(32*da),Math.round(32*pa),wa,Ea,((Ma?Math.min(32640,Math.round(Ma[0])):
0)<<1)+(Wa?1:0),Ma?Math.min(32640,Math.round(Ma[1])):0,16*cb,16*pb,256*yb,256*Kb)}function oj(w,E,R){w.emplaceBack(E.x,E.y,R);w.emplaceBack(E.x,E.y,R);w.emplaceBack(E.x,E.y,R);w.emplaceBack(E.x,E.y,R)}function oh(w){var E=0;for(w=w.sections;E<w.length;E+=1){a:{var R=0;for(var da=w[E].text;R<da.length;R+=1)if(Sd(da[R].charCodeAt(0))){R=!0;break a}R=!1}if(R)return!0}return!1}function Af(w,E,R){R=12756274*Math.PI/256/Math.pow(2,R);return[w*R-12756274*Math.PI/2,E*R-12756274*Math.PI/2]}function Kh(w){return(180+
w)/360}function Tg(w){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+w*Math.PI/360)))/360}function bg(w){return 360/Math.PI*Math.atan(Math.exp((180-360*w)*Math.PI/180))-90}function Hg(w,E,R,da,pa){0>(w*=2)&&(w=-1*w-1);var wa=1<<R;return(wa*wa*w+wa*pa+da).toString(36)+R.toString(36)+E.toString(36)}function Ug(w,E,R,da,pa){return x(w,function(wa,Ea){return(wa=E instanceof Gi?E.get(Ea):null)&&wa.evaluate?wa.evaluate(R,da,pa):wa})}function ug(w){for(var E=1/0,R=1/0,da=-1/0,pa=-1/0,wa=0;wa<w.length;wa+=
1){var Ea=w[wa];E=Math.min(E,Ea.x);R=Math.min(R,Ea.y);da=Math.max(da,Ea.x);pa=Math.max(pa,Ea.y)}return{minX:E,minY:R,maxX:da,maxY:pa}}function Ni(w,E){return E-w}var Vj=e;e.prototype.sampleCurveX=function(w){return((this.ax*w+this.bx)*w+this.cx)*w};e.prototype.sampleCurveY=function(w){return((this.ay*w+this.by)*w+this.cy)*w};e.prototype.sampleCurveDerivativeX=function(w){return(3*this.ax*w+2*this.bx)*w+this.cx};e.prototype.solveCurveX=function(w,E){var R,da;void 0===E&&(E=1E-6);var pa=w;for(R=0;8>
R;R++){if(da=this.sampleCurveX(pa)-w,Math.abs(da)<E)return pa;var wa=this.sampleCurveDerivativeX(pa);if(1E-6>Math.abs(wa))break;pa-=da/wa}if((pa=w)<(R=0))return R;if(pa>(wa=1))return wa;for(;R<wa&&!(da=this.sampleCurveX(pa),Math.abs(da-w)<E);)w>da?R=pa:wa=pa,pa=.5*(wa-R)+R;return pa};e.prototype.solve=function(w,E){return this.sampleCurveY(this.solveCurveX(w,E))};var Md=n;n.prototype={clone:function(){return new n(this.x,this.y)},add:function(w){return this.clone()._add(w)},sub:function(w){return this.clone()._sub(w)},
multByPoint:function(w){return this.clone()._multByPoint(w)},divByPoint:function(w){return this.clone()._divByPoint(w)},mult:function(w){return this.clone()._mult(w)},div:function(w){return this.clone()._div(w)},rotate:function(w){return this.clone()._rotate(w)},rotateAround:function(w,E){return this.clone()._rotateAround(w,E)},matMult:function(w){return this.clone()._matMult(w)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},
mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(w){return this.x===w.x&&this.y===w.y},dist:function(w){return Math.sqrt(this.distSqr(w))},distSqr:function(w){var E=w.x-this.x;w=w.y-this.y;return E*E+w*w},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(w){return Math.atan2(this.y-w.y,this.x-w.x)},angleWith:function(w){return this.angleWithSep(w.x,w.y)},angleWithSep:function(w,E){return Math.atan2(this.x*E-this.y*w,this.x*w+this.y*E)},_matMult:function(w){var E=
w[2]*this.x+w[3]*this.y;return this.x=w[0]*this.x+w[1]*this.y,this.y=E,this},_add:function(w){return this.x+=w.x,this.y+=w.y,this},_sub:function(w){return this.x-=w.x,this.y-=w.y,this},_mult:function(w){return this.x*=w,this.y*=w,this},_div:function(w){return this.x/=w,this.y/=w,this},_multByPoint:function(w){return this.x*=w.x,this.y*=w.y,this},_divByPoint:function(w){return this.x/=w.x,this.y/=w.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var w=this.y;return this.y=
this.x,this.x=-w,this},_rotate:function(w){var E=Math.cos(w);w=Math.sin(w);var R=w*this.x+E*this.y;return this.x=E*this.x-w*this.y,this.y=R,this},_rotateAround:function(w,E){var R=Math.cos(w);w=Math.sin(w);var da=E.y+w*(this.x-E.x)+R*(this.y-E.y);return this.x=E.x+R*(this.x-E.x)-w*(this.y-E.y),this.y=da,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}};n.convert=function(w){return w instanceof n?w:Array.isArray(w)?new n(w[0],w[1]):w};var uk=p(.25,.1,.25,1),
kg=1,Vg={},ph=null,Lh,Mh,Nh,lg,vk=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),wk=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,Wj=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,Wf={now:vk,frame:function(w){var E=wk(w);return{cancel:function(){return Wj(E)}}},getImageData:function(w,E){void 0===
E&&(E=0);var R=self.document.createElement("canvas"),da=R.getContext("2d");if(!da)throw Error("failed to create canvas 2d context");return R.width=w.width,R.height=w.height,da.drawImage(w,0,0,w.width,w.height),da.getImageData(-E,-E,w.width+2*E,w.height+2*E)},resolveURL:function(w){return Lh||(Lh=self.document.createElement("a")),Lh.href=w,Lh.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return!!self.matchMedia&&
(null==Mh&&(Mh=self.matchMedia("(prefers-reduced-motion: reduce)")),Mh.matches)}},Ge={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Wg={supported:!1,testSupport:function(w){!Xg&&
lg&&(Oi?I(w):Nh=w)}},Xg=!1,Oi=!1;self.document&&((lg=self.document.createElement("img")).onload=function(){Nh&&I(Nh);Nh=null;Oi=!0},lg.onerror=function(){Xg=!0;Nh=null},lg.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var cg=function(w,E){this._transformRequestFn=w;this._customAccessToken=E;this._createSkuToken()};cg.prototype._createSkuToken=function(){var w;var E="";for(w=0;10>w;w++)E+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*
Math.random())];E=["101",E].join("");w=Date.now()+432E5;this._skuToken=E;this._skuTokenExpiresAt=w};cg.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt};cg.prototype.transformRequest=function(w,E){return this._transformRequestFn&&this._transformRequestFn(w,E)||{url:w}};cg.prototype.normalizeStyleURL=function(w,E){if(!J(w))return w;w=L(w);return w.path="/styles/v1"+w.path,this._makeAPIURL(w,this._customAccessToken||E)};cg.prototype.normalizeGlyphsURL=function(w,E){if(!J(w))return w;
w=L(w);return w.path="/fonts/v1"+w.path,this._makeAPIURL(w,this._customAccessToken||E)};cg.prototype.normalizeSourceURL=function(w,E){if(!J(w))return w;w=L(w);return w.path="/v4/"+w.authority+".json",w.params.push("secure"),this._makeAPIURL(w,this._customAccessToken||E)};cg.prototype.normalizeSpriteURL=function(w,E,R,da){var pa=L(w);return J(w)?(pa.path="/styles/v1"+pa.path+"/sprite"+E+R,this._makeAPIURL(pa,this._customAccessToken||da)):(pa.path+=""+E+R,H(pa))};cg.prototype.normalizeTileURL=function(w,
E){if(this._isSkuTokenExpired()&&this._createSkuToken(),w&&!J(w))return w;w=L(w);w.path=w.path.replace(/(\.(png|jpg)\d*)(?=$)/,(2<=Wf.devicePixelRatio||512===E?"@2x":"")+(Wg.supported?".webp":"$1"));w.path=w.path.replace(/^.+\/v4\//,"/");w.path="/v4"+w.path;if(!(E=this._customAccessToken))a:{E=0;for(var R=w.params;E<R.length;E+=1){var da=R[E].match(/^access_token=(.*)$/);if(da){E=da[1];break a}}E=null}E=E||Ge.ACCESS_TOKEN;return Ge.REQUIRE_ACCESS_TOKEN&&E&&this._skuToken&&w.params.push("sku="+this._skuToken),
this._makeAPIURL(w,E)};cg.prototype.canonicalizeTileURL=function(w,E){var R=L(w);if(!R.path.match(/(^\/v4\/)/)||!R.path.match(/\.[\w]+$/))return w;w="mapbox://tiles/"+R.path.replace("/v4/","");R=R.params;return E&&(R=R.filter(function(da){return!da.match(/^access_token=/)})),R.length&&(w+="?"+R.join("&")),w};cg.prototype.canonicalizeTileset=function(w,E){E=!!E&&J(E);var R=[],da=0;for(w=w.tiles||[];da<w.length;da+=1){var pa=w[da];Yg.test(pa)?R.push(this.canonicalizeTileURL(pa,E)):R.push(pa)}return R};
cg.prototype._makeAPIURL=function(w,E){var R=L(Ge.API_URL);if(w.protocol=R.protocol,w.authority=R.authority,"/"!==R.path&&(w.path=""+R.path+w.path),!Ge.REQUIRE_ACCESS_TOKEN)return H(w);if(!(E=E||Ge.ACCESS_TOKEN))throw Error("An API access token is required to use Mapbox GL. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes");if("s"===E[0])throw Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes");
return w.params=w.params.filter(function(da){return-1===da.indexOf("access_token")}),w.params.push("access_token="+E),H(w)};var Yg=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i,Oh=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/,vg=function(w){this.type=w;this.anonId=null;this.eventData={};this.queue=[];this.pendingRequest=null};vg.prototype.getStorageKey=function(w){var E,R=P(Ge.ACCESS_TOKEN);return E=R&&R.u?self.btoa(encodeURIComponent(R.u).replace(/%([0-9A-F]{2})/g,function(da,pa){return String.fromCharCode(Number("0x"+
pa))})):Ge.ACCESS_TOKEN||"",w?"mapbox.eventData."+w+":"+E:"mapbox.eventData:"+E};vg.prototype.fetchEventData=function(){var w=F("localStorage"),E=this.getStorageKey(),R=this.getStorageKey("uuid");if(w)try{var da=self.localStorage.getItem(E);da&&(this.eventData=JSON.parse(da));var pa=self.localStorage.getItem(R);pa&&(this.anonId=pa)}catch(wa){y("Unable to read from LocalStorage")}};vg.prototype.saveEventData=function(){var w=F("localStorage"),E=this.getStorageKey(),R=this.getStorageKey("uuid");if(w)try{self.localStorage.setItem(R,
this.anonId),1<=Object.keys(this.eventData).length&&self.localStorage.setItem(E,JSON.stringify(this.eventData))}catch(da){y("Unable to write to LocalStorage")}};vg.prototype.processRequests=function(w){};vg.prototype.postEvent=function(w,E,R,da){var pa=this;if(Ge.EVENTS_URL){var wa=L(Ge.EVENTS_URL);wa.params.push("access_token="+(da||Ge.ACCESS_TOKEN||""));w={event:this.type,created:(new Date(w)).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.10.1",skuId:"01",userId:this.anonId};E=E?f(w,
E):w;wa={url:H(wa),headers:{"Content-Type":"text/plain"},body:JSON.stringify([E])};this.pendingRequest=Db(wa,function(Ea){pa.pendingRequest=null;R(Ea);pa.saveEventData();pa.processRequests(da)})}};vg.prototype.queueRequest=function(w,E){this.queue.push(w);this.processRequests(E)};var wg,Kf,Xf=function(w){function E(){w.call(this,"map.load");this.success={};this.skuToken=""}return w&&(E.__proto__=w),(E.prototype=Object.create(w&&w.prototype)).constructor=E,E.prototype.postMapLoadEvent=function(R,da,
pa,wa){this.skuToken=pa;(Ge.EVENTS_URL&&wa||Ge.ACCESS_TOKEN&&Array.isArray(R)&&R.some(function(Ea){return J(Ea)||Yg.test(Ea)}))&&this.queueRequest({id:da,timestamp:Date.now()},wa)},E.prototype.processRequests=function(R){var da=this;if(!this.pendingRequest&&0!==this.queue.length){var pa=this.queue.shift(),wa=pa.id;pa=pa.timestamp;wa&&this.success[wa]||(this.anonId||this.fetchEventData(),r(this.anonId)||(this.anonId=k()),this.postEvent(pa,{skuToken:this.skuToken},function(Ea){Ea||wa&&(da.success[wa]=
!0)},R))}},E}(vg),Xj=new (function(w){function E(R){w.call(this,"appUserTurnstile");this._customAccessToken=R}return w&&(E.__proto__=w),(E.prototype=Object.create(w&&w.prototype)).constructor=E,E.prototype.postTurnstileEvent=function(R,da){Ge.EVENTS_URL&&Ge.ACCESS_TOKEN&&Array.isArray(R)&&R.some(function(pa){return J(pa)||Yg.test(pa)})&&this.queueRequest(Date.now(),da)},E.prototype.processRequests=function(R){var da=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&
this.eventData.tokenU||this.fetchEventData();var pa=P(Ge.ACCESS_TOKEN),wa=pa?pa.u:Ge.ACCESS_TOKEN;pa=wa!==this.eventData.tokenU;r(this.anonId)||(this.anonId=k(),pa=!0);var Ea=this.queue.shift();if(this.eventData.lastSuccess){var Ma=new Date(this.eventData.lastSuccess),Wa=new Date(Ea),cb=(Ea-this.eventData.lastSuccess)/864E5;pa=pa||1<=cb||-1>cb||Ma.getDate()!==Wa.getDate()}else pa=!0;if(!pa)return this.processRequests();this.postEvent(Ea,{"enabled.telemetry":!1},function(pb){pb||(da.eventData.lastSuccess=
Ea,da.eventData.tokenU=wa)},R)}},E}(vg)),Pi=Xj.postTurnstileEvent.bind(Xj),Qi=new Xf,jb=Qi.postMapLoadEvent.bind(Qi),V=500,Y=50,W,ca=1/0,ua={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(ua);var Fa=function(w){function E(R,da,pa){401===da&&Yg.test(pa)&&(R+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes");
w.call(this,R);this.status=da;this.url=pa;this.name=this.constructor.name;this.message=R}return w&&(E.__proto__=w),(E.prototype=Object.create(w&&w.prototype)).constructor=E,E.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},E}(Error),Qa=A()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===self.location.protocol?self.parent:self).location.href},Za=function(w,E){if(!(/^file:/.test(R=w.url)||/^file:/.test(Qa())&&!/^\w+:/.test(R))){if(self.fetch&&
self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return function(da,pa){var wa,Ea=new self.AbortController,Ma=new self.Request(da.url,{method:da.method||"GET",body:da.body,credentials:da.credentials,headers:da.headers,referrer:Qa(),signal:Ea.signal}),Wa=!1,cb=!1,pb=0<(wa=Ma.url).indexOf("sku=")&&Yg.test(wa);"json"===da.type&&Ma.headers.set("Accept","application/json");wa=function(Kb,Hb,Tb){if(!cb){if(Kb&&"SecurityError"!==Kb.message&&y(Kb),Hb&&Tb)return yb(Hb);var Sb=
Date.now();self.fetch(Ma).then(function(qc){if(qc.ok){var bd=pb?qc.clone():null;return yb(qc,bd,Sb)}return pa(new Fa(qc.statusText,qc.status,da.url))}).catch(function(qc){20!==qc.code&&pa(Error(qc.message))})}};var yb=function(Kb,Hb,Tb){("arrayBuffer"===da.type?Kb.arrayBuffer():"json"===da.type?Kb.json():Kb.text()).then(function(Sb){cb||(Hb&&Tb&&function(qc,bd,ed){if(M(),wg){var Oc={status:bd.status,statusText:bd.statusText,headers:new self.Headers};bd.headers.forEach(function(pd,wd){return Oc.headers.set(wd,
pd)});var rd=t(bd.headers.get("Cache-Control")||"");rd["no-store"]||(rd["max-age"]&&Oc.headers.set("Expires",(new Date(ed+1E3*rd["max-age"])).toUTCString()),42E4>(new Date(Oc.headers.get("Expires"))).getTime()-ed||function(pd,wd){if(void 0===Kf)try{new Response(new ReadableStream),Kf=!0}catch(Gd){Kf=!1}Kf?wd(pd.body):pd.blob().then(wd)}(bd,function(pd){var wd=new self.Response(pd,Oc);M();wg&&wg.then(function(Gd){return Gd.put(N(qc.url),wd)}).catch(function(Gd){return y(Gd.message)})}))}}(Ma,Hb,Tb),
Wa=!0,pa(null,Sb,Kb.headers.get("Cache-Control"),Kb.headers.get("Expires")))}).catch(function(Sb){cb||pa(Error(Sb.message))})};return pb?function(Kb,Hb){if(M(),!wg)return Hb(null);var Tb=N(Kb.url);wg.then(function(Sb){Sb.match(Tb).then(function(qc){if(qc){var bd=new Date(qc.headers.get("Expires")||0);var ed=t(qc.headers.get("Cache-Control")||"");bd=bd>Date.now()&&!ed["no-cache"]}else bd=!1;Sb.delete(Tb);bd&&Sb.put(Tb,qc.clone());Hb(null,qc,bd)}).catch(Hb)}).catch(Hb)}(Ma,wa):wa(null,null),{cancel:function(){cb=
!0;Wa||Ea.abort()}}}(w,E);if(A()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",w,E,void 0,!0)}var R;return function(da,pa){var wa=new self.XMLHttpRequest,Ea;for(Ea in wa.open(da.method||"GET",da.url,!0),"arrayBuffer"===da.type&&(wa.responseType="arraybuffer"),da.headers)wa.setRequestHeader(Ea,da.headers[Ea]);return"json"===da.type&&(wa.responseType="text",wa.setRequestHeader("Accept","application/json")),wa.withCredentials="include"===da.credentials,wa.onerror=function(){pa(Error(wa.statusText))},
wa.onload=function(){if((200<=wa.status&&300>wa.status||0===wa.status)&&null!==wa.response){var Ma=wa.response;if("json"===da.type)try{Ma=JSON.parse(wa.response)}catch(Wa){return pa(Wa)}pa(null,Ma,wa.getResponseHeader("Cache-Control"),wa.getResponseHeader("Expires"))}else pa(new Fa(wa.statusText,wa.status,da.url))},wa.send(da.body),{cancel:function(){return wa.abort()}}}(w,E)},wb=function(w,E){return Za(f(w,{type:"arrayBuffer"}),E)},Db=function(w,E){return Za(f(w,{method:"POST"}),E)};var Eb=[];var kc=
0;var jc=function(w,E){if(Wg.supported&&(w.headers||(w.headers={}),w.headers.accept="image/webp,*/*"),kc>=Ge.MAX_PARALLEL_IMAGE_REQUESTS)return w={requestParameters:w,callback:E,cancelled:!1,cancel:function(){this.cancelled=!0}},Eb.push(w),w;kc++;var R=!1,da=function(){if(!R)for(R=!0,kc--;Eb.length&&kc<Ge.MAX_PARALLEL_IMAGE_REQUESTS;){var wa=Eb.shift();wa.cancelled||(wa.cancel=jc(wa.requestParameters,wa.callback).cancel)}},pa=wb(w,function(wa,Ea,Ma,Wa){da();wa?E(wa):Ea&&(T()?function(cb,pb){cb=new self.Blob([new Uint8Array(cb)],
{type:"image/png"});self.createImageBitmap(cb).then(function(yb){pb(null,yb)}).catch(function(yb){pb(Error("Could not load image because of "+yb.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(Ea,E):function(cb,pb,yb,Kb){var Hb=new self.Image,Tb=self.URL;Hb.onload=function(){pb(null,Hb);Tb.revokeObjectURL(Hb.src)};Hb.onerror=function(){return pb(Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};
var Sb=new self.Blob([new Uint8Array(cb)],{type:"image/png"});Hb.cacheControl=yb;Hb.expires=Kb;Hb.src=cb.byteLength?Tb.createObjectURL(Sb):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}(Ea,E,Ma,Wa))});return{cancel:function(){pa.cancel();da()}}},$b=function(w,E){void 0===E&&(E={});f(this,E);this.type=w},ic=function(w){function E(R,da){void 0===da&&(da={});w.call(this,"error",f({error:R},da))}return w&&(E.__proto__=w),(E.prototype=
Object.create(w&&w.prototype)).constructor=E,E}($b),gc=function(){};gc.prototype.on=function(w,E){return this._listeners=this._listeners||{},Q(w,E,this._listeners),this};gc.prototype.off=function(w,E){return U(w,E,this._listeners),U(w,E,this._oneTimeListeners),this};gc.prototype.once=function(w,E){return this._oneTimeListeners=this._oneTimeListeners||{},Q(w,E,this._oneTimeListeners),this};gc.prototype.fire=function(w,E){"string"==typeof w&&(w=new $b(w,E||{}));E=w.type;if(this.listens(E)){w.target=
this;for(var R=0,da=this._listeners&&this._listeners[E]?this._listeners[E].slice():[];R<da.length;R+=1)da[R].call(this,w);R=0;for(da=this._oneTimeListeners&&this._oneTimeListeners[E]?this._oneTimeListeners[E].slice():[];R<da.length;R+=1){var pa=da[R];U(E,pa,this._oneTimeListeners);pa.call(this,w)}(E=this._eventedParent)&&(f(w,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),E.fire(w))}else w instanceof ic&&console.error(w.error);return this};gc.prototype.listens=
function(w){return this._listeners&&this._listeners[w]&&0<this._listeners[w].length||this._oneTimeListeners&&this._oneTimeListeners[w]&&0<this._oneTimeListeners[w].length||this._eventedParent&&this._eventedParent.listens(w)};gc.prototype.setEventedParent=function(w,E){return this._eventedParent=w,this._eventedParentData=E,this};var Cb={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",
default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:"source_vector source_raster source_raster_dem source_geojson source_video source_image".split(" "),source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",
value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},
minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},
tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},
clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",
length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:"layout_fill layout_line layout_circle layout_heatmap layout_fill-extrusion layout_symbol layout_raster layout_hillshade layout_background".split(" "),
layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",
values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",
values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,
parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},
"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,
requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",
requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},
"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,
parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",
length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],
expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",
default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",
default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",
values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},
requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",
{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},
"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],
expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",
default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",
values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",
values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},
"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},
format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},
"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},
distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",
transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},
paint:"paint_fill paint_line paint_circle paint_heatmap paint_fill-extrusion paint_symbol paint_raster paint_hillshade paint_background".split(" "),paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",
transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},
"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,
parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",
values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},
"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom",
"feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},
default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",
default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},
"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,
parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,
parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},
viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",
default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},
"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,
parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],
expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},
"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image",
"icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},
"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],
expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},
paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},
"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",
values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},
"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",
default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",
transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},
"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},bc=function(w,E,R,da){this.message=(w?w+": ":"")+R;da&&(this.identifier=da);null!=E&&E.__line__&&(this.line=E.__line__)},Ec=function(w){function E(R,da){w.call(this,da);this.message=da;this.key=R}return w&&(E.__proto__=w),(E.prototype=Object.create(w&&w.prototype)).constructor=E,E}(Error),Yc=function(w,E){void 0===E&&(E=[]);this.parent=w;this.bindings={};for(w=
0;w<E.length;w+=1){var R=E[w];this.bindings[R[0]]=R[1]}};Yc.prototype.concat=function(w){return new Yc(this,w)};Yc.prototype.get=function(w){if(this.bindings[w])return this.bindings[w];if(this.parent)return this.parent.get(w);throw Error(w+" not found in scope.");};Yc.prototype.has=function(w){return!!this.bindings[w]||!!this.parent&&this.parent.has(w)};var fd={kind:"null"},Fc={kind:"number"},hd={kind:"string"},dd={kind:"boolean"},sd={kind:"color"},vd={kind:"object"},od={kind:"value"},$d={kind:"collator"},
Xd={kind:"formatted"},xe={kind:"resolvedImage"},ye=[fd,Fc,hd,dd,sd,Xd,vd,fa(od),xe],ue=g(function(w,E){function R(Ma){return 0>(Ma=Math.round(Ma))?0:255<Ma?255:Ma}function da(Ma){return R("%"===Ma[Ma.length-1]?parseFloat(Ma)/100*255:parseInt(Ma))}function pa(Ma){return 0>(Wa="%"===Ma[Ma.length-1]?parseFloat(Ma)/100:parseFloat(Ma))?0:1<Wa?1:Wa;var Wa}function wa(Ma,Wa,cb){return 0>cb?cb+=1:1<cb&&--cb,1>6*cb?Ma+(Wa-Ma)*cb*6:1>2*cb?Wa:2>3*cb?Ma+(Wa-Ma)*(2/3-cb)*6:Ma}var Ea={transparent:[0,0,0,0],aliceblue:[240,
248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],
darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,
191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,
1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,
222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,
228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,
0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,
1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};try{E.parseCSSColor=function(Ma){var Wa;Ma=Ma.replace(/ /g,"").toLowerCase();if(Ma in Ea)return Ea[Ma].slice();if("#"===Ma[0])return 4===Ma.length?0<=(Wa=parseInt(Ma.substr(1),16))&&4095>=Wa?[(3840&Wa)>>4|(3840&Wa)>>8,240&Wa|(240&Wa)>>4,15&Wa|(15&Wa)<<4,1]:null:7===Ma.length&&0<=(Wa=parseInt(Ma.substr(1),16))&&16777215>=Wa?[(16711680&Wa)>>16,(65280&Wa)>>
8,255&Wa,1]:null;var cb=Ma.indexOf("("),pb=Ma.indexOf(")");if(-1!==cb&&pb+1===Ma.length)switch(Wa=Ma.substr(0,cb),cb=Ma.substr(cb+1,pb-(cb+1)).split(","),Ma=1,Wa){case "rgba":if(4!==cb.length)break;Ma=pa(cb.pop());case "rgb":return 3!==cb.length?null:[da(cb[0]),da(cb[1]),da(cb[2]),Ma];case "hsla":if(4!==cb.length)break;Ma=pa(cb.pop());case "hsl":if(3===cb.length)return Wa=(parseFloat(cb[0])%360+360)%360/360,pb=pa(cb[1]),cb=pa(cb[2]),pb=.5>=cb?cb*(pb+1):cb+pb-cb*pb,cb=2*cb-pb,[R(255*wa(cb,pb,Wa+1/
3)),R(255*wa(cb,pb,Wa)),R(255*wa(cb,pb,Wa-1/3)),Ma]}return null}}catch(Ma){}}).parseCSSColor,Nd=function(w,E,R,da){void 0===da&&(da=1);this.r=w;this.g=E;this.b=R;this.a=da};Nd.parse=function(w){if(w){if(w instanceof Nd)return w;if("string"==typeof w&&(w=ue(w)))return new Nd(w[0]/255*w[3],w[1]/255*w[3],w[2]/255*w[3],w[3])}};Nd.prototype.toString=function(){var w=this.toArray();return"rgba("+Math.round(w[0])+","+Math.round(w[1])+","+Math.round(w[2])+","+w[3]+")"};Nd.prototype.toArray=function(){var w=
this.a;return 0===w?[0,0,0,0]:[255*this.r/w,255*this.g/w,255*this.b/w,w]};Nd.black=new Nd(0,0,0,1);Nd.white=new Nd(1,1,1,1);Nd.transparent=new Nd(0,0,0,0);Nd.red=new Nd(1,0,0,1);var ie=function(w,E,R){this.sensitivity=w?E?"variant":"case":E?"accent":"base";this.locale=R;this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};ie.prototype.compare=function(w,E){return this.collator.compare(w,E)};ie.prototype.resolvedLocale=function(){return(new Intl.Collator(this.locale?
this.locale:[])).resolvedOptions().locale};var Le=function(w,E,R,da,pa){this.text=w;this.image=E;this.scale=R;this.fontStack=da;this.textColor=pa},se=function(w){this.sections=w};se.fromString=function(w){return new se([new Le(w,null,null,null,null)])};se.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(w){return 0!==w.text.length||w.image&&0!==w.image.name.length})};se.factory=function(w){return w instanceof se?w:se.fromString(w)};se.prototype.toString=function(){return 0===
this.sections.length?"":this.sections.map(function(w){return w.text}).join("")};se.prototype.serialize=function(){for(var w=["format"],E=0,R=this.sections;E<R.length;E+=1){var da=R[E];if(da.image)w.push(["image",da.image.name]);else{w.push(da.text);var pa={};da.fontStack&&(pa["text-font"]=["literal",da.fontStack.split(",")]);da.scale&&(pa["font-scale"]=da.scale);da.textColor&&(pa["text-color"]=["rgba"].concat(da.textColor.toArray()));w.push(pa)}}return w};var Ne=function(w){this.name=w.name;this.available=
w.available};Ne.prototype.toString=function(){return this.name};Ne.fromString=function(w){return w?new Ne({name:w,available:!1}):null};Ne.prototype.serialize=function(){return["image",this.name]};var rf=function(w,E){this.type=w;this.value=E};rf.parse=function(w,E){if(2!==w.length)return E.error("'literal' expression requires exactly one argument, but found "+(w.length-1)+" instead.");if(!ka(w[1]))return E.error("invalid value");w=w[1];var R=oa(w);E=E.expectedType;return"array"!==R.kind||0!==R.N||
!E||"array"!==E.kind||"number"==typeof E.N&&0!==E.N||(R=E),new rf(R,w)};rf.prototype.evaluate=function(){return this.value};rf.prototype.eachChild=function(){};rf.prototype.outputDefined=function(){return!0};rf.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Nd?["rgba"].concat(this.value.toArray()):this.value instanceof se?this.value.serialize():this.value};var bf=function(w){this.name="ExpressionEvaluationError";
this.message=w};bf.prototype.toJSON=function(){return this.message};var qh={string:hd,number:Fc,boolean:dd,object:vd},We=function(w,E){this.type=w;this.args=E};We.parse=function(w,E){if(2>w.length)return E.error("Expected at least one argument.");var R=1,da=w[0];if("array"===da){if(2<w.length){da=w[1];if("string"!=typeof da||!(da in qh)||"object"===da)return E.error('The item type argument of "array" must be one of string, number, boolean',1);da=qh[da];R++}else da=od;if(3<w.length){if(null!==w[2]&&
("number"!=typeof w[2]||0>w[2]||w[2]!==Math.floor(w[2])))return E.error('The length argument to "array" must be a positive integer literal',2);var pa=w[2];R++}pa=fa(da,pa)}else pa=qh[da];for(da=[];R<w.length;R++){var wa=E.parse(w[R],R,od);if(!wa)return null;da.push(wa)}return new We(pa,da)};We.prototype.evaluate=function(w){for(var E=0;E<this.args.length;E++){var R=this.args[E].evaluate(w);if(!ja(this.type,oa(R)))return R;if(E===this.args.length-1)throw new bf("Expected value to be of type "+ha(this.type)+
", but found "+ha(oa(R))+" instead.");}return null};We.prototype.eachChild=function(w){this.args.forEach(w)};We.prototype.outputDefined=function(){return this.args.every(function(w){return w.outputDefined()})};We.prototype.serialize=function(){var w=this.type,E=[w.kind];if("array"===w.kind){var R=w.itemType;if("string"===R.kind||"number"===R.kind||"boolean"===R.kind)E.push(R.kind),w=w.N,("number"==typeof w||1<this.args.length)&&E.push(w)}return E.concat(this.args.map(function(da){return da.serialize()}))};
var uf=function(w){this.type=Xd;this.sections=w};uf.parse=function(w,E){if(2>w.length)return E.error("Expected at least one argument.");var R=w[1];if(!Array.isArray(R)&&"object"==typeof R)return E.error("First argument must be an image or text section.");R=[];for(var da=!1,pa=1;pa<=w.length-1;++pa){var wa=w[pa];if(da&&"object"==typeof wa&&!Array.isArray(wa)){da=!1;var Ea=null;if(wa["font-scale"]&&!(Ea=E.parse(wa["font-scale"],1,Fc)))return null;var Ma=null;if(wa["text-font"]&&!(Ma=E.parse(wa["text-font"],
1,fa(hd))))return null;var Wa=null;if(wa["text-color"]&&!(Wa=E.parse(wa["text-color"],1,sd)))return null;wa=R[R.length-1];wa.scale=Ea;wa.font=Ma;wa.textColor=Wa}else{Ea=E.parse(w[pa],1,od);if(!Ea)return null;da=Ea.type.kind;if("string"!==da&&"value"!==da&&"null"!==da&&"resolvedImage"!==da)return E.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");da=!0;R.push({content:Ea,scale:null,font:null,textColor:null})}}return new uf(R)};uf.prototype.evaluate=function(w){return new se(this.sections.map(function(E){var R=
E.content.evaluate(w);return oa(R)===xe?new Le("",R,null,null,null):new Le(na(R),null,E.scale?E.scale.evaluate(w):null,E.font?E.font.evaluate(w).join(","):null,E.textColor?E.textColor.evaluate(w):null)}))};uf.prototype.eachChild=function(w){for(var E=0,R=this.sections;E<R.length;E+=1){var da=R[E];w(da.content);da.scale&&w(da.scale);da.font&&w(da.font);da.textColor&&w(da.textColor)}};uf.prototype.outputDefined=function(){return!1};uf.prototype.serialize=function(){for(var w=["format"],E=0,R=this.sections;E<
R.length;E+=1){var da=R[E];w.push(da.content.serialize());var pa={};da.scale&&(pa["font-scale"]=da.scale.serialize());da.font&&(pa["text-font"]=da.font.serialize());da.textColor&&(pa["text-color"]=da.textColor.serialize());w.push(pa)}return w};var mg=function(w){this.type=xe;this.input=w};mg.parse=function(w,E){return 2!==w.length?E.error("Expected two arguments."):(w=E.parse(w[1],1,hd))?new mg(w):E.error("No image name provided.")};mg.prototype.evaluate=function(w){var E=this.input.evaluate(w),R=
Ne.fromString(E);return R&&w.availableImages&&(R.available=-1<w.availableImages.indexOf(E)),R};mg.prototype.eachChild=function(w){w(this.input)};mg.prototype.outputDefined=function(){return!1};mg.prototype.serialize=function(){return["image",this.input.serialize()]};var Qh={"to-boolean":dd,"to-color":sd,"to-number":Fc,"to-string":hd},Ff=function(w,E){this.type=w;this.args=E};Ff.parse=function(w,E){if(2>w.length)return E.error("Expected at least one argument.");var R=w[0];if(("to-boolean"===R||"to-string"===
R)&&2!==w.length)return E.error("Expected one argument.");R=Qh[R];for(var da=[],pa=1;pa<w.length;pa++){var wa=E.parse(w[pa],pa,od);if(!wa)return null;da.push(wa)}return new Ff(R,da)};Ff.prototype.evaluate=function(w){if("boolean"===this.type.kind)return!!this.args[0].evaluate(w);if("color"===this.type.kind){for(var E,R,da=0,pa=this.args;da<pa.length;da+=1){if(R=null,(E=pa[da].evaluate(w))instanceof Nd)return E;if("string"==typeof E){var wa=w.parseColor(E);if(wa)return wa}else if(Array.isArray(E)&&
!(R=3>E.length||4<E.length?"Invalid rbga value "+JSON.stringify(E)+": expected an array containing either three or four numeric values.":qa(E[0],E[1],E[2],E[3])))return new Nd(E[0]/255,E[1]/255,E[2]/255,E[3])}throw new bf(R||"Could not parse color from value '"+("string"==typeof E?E:String(JSON.stringify(E)))+"'");}if("number"===this.type.kind){E=null;R=0;for(da=this.args;R<da.length;R+=1){if(null===(E=da[R].evaluate(w)))return 0;pa=Number(E);if(!isNaN(pa))return pa}throw new bf("Could not convert "+
JSON.stringify(E)+" to number.");}return"formatted"===this.type.kind?se.fromString(na(this.args[0].evaluate(w))):"resolvedImage"===this.type.kind?Ne.fromString(na(this.args[0].evaluate(w))):na(this.args[0].evaluate(w))};Ff.prototype.eachChild=function(w){this.args.forEach(w)};Ff.prototype.outputDefined=function(){return this.args.every(function(w){return w.outputDefined()})};Ff.prototype.serialize=function(){if("formatted"===this.type.kind)return(new uf([{content:this.args[0],scale:null,font:null,
textColor:null}])).serialize();if("resolvedImage"===this.type.kind)return(new mg(this.args[0])).serialize();var w=["to-"+this.type.kind];return this.eachChild(function(E){w.push(E.serialize())}),w};var Si=["Unknown","Point","LineString","Polygon"],ve=function(){this.formattedSection=this.featureState=this.feature=this.globals=null;this._parseColorCache={};this.canonical=this.availableImages=null};ve.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null};ve.prototype.geometryType=
function(){return this.feature?"number"==typeof this.feature.type?Si[this.feature.type]:this.feature.type:null};ve.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null};ve.prototype.canonicalID=function(){return this.canonical};ve.prototype.properties=function(){return this.feature&&this.feature.properties||{}};ve.prototype.parseColor=function(w){var E=this._parseColorCache[w];return E||(E=this._parseColorCache[w]=Nd.parse(w)),E};var Je=function(w,
E,R,da){this.name=w;this.type=E;this._evaluate=R;this.args=da};Je.prototype.evaluate=function(w){return this._evaluate(w,this.args)};Je.prototype.eachChild=function(w){this.args.forEach(w)};Je.prototype.outputDefined=function(){return!1};Je.prototype.serialize=function(){return[this.name].concat(this.args.map(function(w){return w.serialize()}))};Je.parse=function(w,E){var R,da=w[0],pa=Je.definitions[da];if(!pa)return E.error('Unknown expression "'+da+'". If you wanted a literal array, use ["literal", [...]].',
0);var wa=Array.isArray(pa)?pa[0]:pa.type;pa=Array.isArray(pa)?[[pa[1],pa[2]]]:pa.overloads;for(var Ea=pa.filter(function(qc){qc=qc[0];return!Array.isArray(qc)||qc.length===w.length-1}),Ma=null,Wa=0;Wa<Ea.length;Wa+=1){Ma=Ea[Wa];var cb=Ma[0],pb=Ma[1];Ma=new yg(E.registry,E.path,null,E.scope);for(var yb=[],Kb=!1,Hb=1;Hb<w.length;Hb++){var Tb=w[Hb],Sb=Array.isArray(cb)?cb[Hb-1]:cb.type;Tb=Ma.parse(Tb,1+yb.length,Sb);if(!Tb){Kb=!0;break}yb.push(Tb)}if(!Kb)if(Array.isArray(cb)&&cb.length!==yb.length)Ma.error("Expected "+
cb.length+" arguments, but found "+yb.length+" instead.");else{for(Kb=0;Kb<yb.length;Kb++)Hb=Array.isArray(cb)?cb[Kb]:cb.type,Tb=yb[Kb],Ma.concat(Kb+1).checkSubtype(Hb,Tb.type);if(0===Ma.errors.length)return new Je(da,wa,pb,yb)}}if(1===Ea.length)(R=E.errors).push.apply(R,Ma.errors);else{R=(Ea.length?Ea:pa).map(function(qc){var bd;return bd=qc[0],Array.isArray(bd)?"("+bd.map(ha).join(", ")+")":"("+ha(bd.type)+"...)"}).join(" | ");da=[];for(wa=1;wa<w.length;wa++){pa=E.parse(w[wa],1+da.length);if(!pa)return null;
da.push(ha(pa.type))}E.error("Expected arguments of type "+R+", but found ("+da.join(", ")+") instead.")}return null};Je.register=function(w,E){for(var R in Je.definitions=E,E)w[R]=Je};var eg=function(w,E,R){this.type=$d;this.locale=R;this.caseSensitive=w;this.diacriticSensitive=E};eg.parse=function(w,E){if(2!==w.length)return E.error("Expected one argument.");w=w[1];if("object"!=typeof w||Array.isArray(w))return E.error("Collator options argument must be an object.");var R=E.parse(void 0!==w["case-sensitive"]&&
w["case-sensitive"],1,dd);if(!R)return null;var da=E.parse(void 0!==w["diacritic-sensitive"]&&w["diacritic-sensitive"],1,dd);if(!da)return null;var pa=null;return w.locale&&!(pa=E.parse(w.locale,1,hd))?null:new eg(R,da,pa)};eg.prototype.evaluate=function(w){return new ie(this.caseSensitive.evaluate(w),this.diacriticSensitive.evaluate(w),this.locale?this.locale.evaluate(w):null)};eg.prototype.eachChild=function(w){w(this.caseSensitive);w(this.diacriticSensitive);this.locale&&w(this.locale)};eg.prototype.outputDefined=
function(){return!1};eg.prototype.serialize=function(){var w={};return w["case-sensitive"]=this.caseSensitive.serialize(),w["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(w.locale=this.locale.serialize()),["collator",w]};var Mf=function(w,E){this.type=dd;this.geojson=w;this.geometries=E};Mf.parse=function(w,E){if(2!==w.length)return E.error("'within' expression requires exactly one argument, but found "+(w.length-1)+" instead.");if(ka(w[1]))if(w=w[1],"FeatureCollection"===
w.type)for(var R=0;R<w.features.length;++R){var da=w.features[R].geometry.type;if("Polygon"===da||"MultiPolygon"===da)return new Mf(w,w.features[R].geometry)}else if("Feature"===w.type){if(R=w.geometry.type,"Polygon"===R||"MultiPolygon"===R)return new Mf(w,w.geometry)}else if("Polygon"===w.type||"MultiPolygon"===w.type)return new Mf(w,w);return E.error("'within' expression requires valid geojson object that contains polygon geometry type.")};Mf.prototype.evaluate=function(w){if(null!=w.geometry()&&
null!=w.canonicalID()){if("Point"===w.geometryType())return function(E,R){var da=[1/0,1/0,-1/0,-1/0],pa=[1/0,1/0,-1/0,-1/0],wa=E.canonicalID();if("Polygon"===R.type){var Ea=Ka(R.coordinates,pa,wa),Ma=eb(E.geometry(),da,pa,wa);if(!ia(da,pa))return!1;for(var Wa=0;Wa<Ma.length;Wa+=1)if(!sa(Ma[Wa],Ea))return!1}if("MultiPolygon"===R.type){R=Sa(R.coordinates,pa,wa);E=eb(E.geometry(),da,pa,wa);if(!ia(da,pa))return!1;for(da=0;da<E.length;da+=1){a:{pa=E[da];wa=R;for(Ea=0;Ea<wa.length;Ea++)if(sa(pa,wa[Ea])){pa=
!0;break a}pa=!1}if(!pa)return!1}}return!0}(w,this.geometries);if("LineString"===w.geometryType())return function(E,R){var da=[1/0,1/0,-1/0,-1/0],pa=[1/0,1/0,-1/0,-1/0],wa=E.canonicalID();if("Polygon"===R.type){var Ea=Ka(R.coordinates,pa,wa),Ma=lb(E.geometry(),da,pa,wa);if(!ia(da,pa))return!1;for(var Wa=0;Wa<Ma.length;Wa+=1)if(!Aa(Ma[Wa],Ea))return!1}if("MultiPolygon"===R.type){R=Sa(R.coordinates,pa,wa);E=lb(E.geometry(),da,pa,wa);if(!ia(da,pa))return!1;for(da=0;da<E.length;da+=1){a:{pa=E[da];wa=
R;for(Ea=0;Ea<wa.length;Ea++)if(Aa(pa,wa[Ea])){pa=!0;break a}pa=!1}if(!pa)return!1}}return!0}(w,this.geometries)}return!1};Mf.prototype.eachChild=function(){};Mf.prototype.outputDefined=function(){return!0};Mf.prototype.serialize=function(){return["within",this.geojson]};var xg=function(w,E){this.type=E.type;this.name=w;this.boundExpression=E};xg.parse=function(w,E){if(2!==w.length||"string"!=typeof w[1])return E.error("'var' expression requires exactly one string literal argument.");w=w[1];return E.scope.has(w)?
new xg(w,E.scope.get(w)):E.error('Unknown variable "'+w+'". Make sure "'+w+'" has been bound in an enclosing "let" expression before using it.',1)};xg.prototype.evaluate=function(w){return this.boundExpression.evaluate(w)};xg.prototype.eachChild=function(){};xg.prototype.outputDefined=function(){return!1};xg.prototype.serialize=function(){return["var",this.name]};var yg=function(w,E,R,da,pa){void 0===E&&(E=[]);void 0===da&&(da=new Yc);void 0===pa&&(pa=[]);this.registry=w;this.path=E;this.key=E.map(function(wa){return"["+
wa+"]"}).join("");this.scope=da;this.errors=pa;this.expectedType=R};yg.prototype.parse=function(w,E,R,da,pa){return void 0===pa&&(pa={}),E?this.concat(E,R,da)._parse(w,pa):this._parse(w,pa)};yg.prototype._parse=function(w,E){function R(wa,Ea,Ma){return"assert"===Ma?new We(Ea,[wa]):"coerce"===Ma?new Ff(Ea,[wa]):wa}if(null!==w&&"string"!=typeof w&&"boolean"!=typeof w&&"number"!=typeof w||(w=["literal",w]),Array.isArray(w)){if(0===w.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');
var da=w[0];if("string"!=typeof da)return this.error("Expression name must be a string, but found "+typeof da+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var pa=this.registry[da];if(pa){w=pa.parse(w,this);if(!w)return null;if(this.expectedType)if(da=this.expectedType,pa=w.type,"string"!==da.kind&&"number"!==da.kind&&"boolean"!==da.kind&&"object"!==da.kind&&"array"!==da.kind||"value"!==pa.kind)if("color"!==da.kind&&"formatted"!==da.kind&&"resolvedImage"!==da.kind||"value"!==
pa.kind&&"string"!==pa.kind){if(this.checkSubtype(da,pa))return null}else w=R(w,da,E.typeAnnotation||"coerce");else w=R(w,da,E.typeAnnotation||"assert");if(!(w instanceof rf)&&"resolvedImage"!==w.type.kind&&function Ma(Ea){if(Ea instanceof xg)return Ma(Ea.boundExpression);if(Ea instanceof Je&&"error"===Ea.name||Ea instanceof eg||Ea instanceof Mf)return!1;var Wa=Ea instanceof Ff||Ea instanceof We,cb=!0;return Ea.eachChild(function(pb){cb=Wa?cb&&Ma(pb):cb&&pb instanceof rf}),!!cb&&ab(Ea)&&hb(Ea,["zoom",
"heatmap-density","line-progress","accumulated","is-supported-script"])}(w)){E=new ve;try{w=new rf(w.type,w.evaluate(E))}catch(Ea){return this.error(Ea.message),null}}return w}return this.error('Unknown expression "'+da+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===w?"'undefined' value invalid. Use null instead.":"object"==typeof w?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof w+" instead.")};yg.prototype.concat=
function(w,E,R){w="number"==typeof w?this.path.concat(w):this.path;R=R?this.scope.concat(R):this.scope;return new yg(this.registry,w,E||null,R,this.errors)};yg.prototype.error=function(w){for(var E=[],R=arguments.length-1;0<R--;)E[R]=arguments[R+1];E=""+this.key+E.map(function(da){return"["+da+"]"}).join("");this.errors.push(new Ec(E,w))};yg.prototype.checkSubtype=function(w,E){w=ja(w,E);return w&&this.error(w),w};var vf=function(w,E,R){this.type=w;this.input=E;this.labels=[];this.outputs=[];for(w=
0;w<R.length;w+=1){E=R[w];var da=E[1];this.labels.push(E[0]);this.outputs.push(da)}};vf.parse=function(w,E){if(4>w.length-1)return E.error("Expected at least 4 arguments, but found only "+(w.length-1)+".");if(0!=(w.length-1)%2)return E.error("Expected an even number of arguments.");var R=E.parse(w[1],1,Fc);if(!R)return null;var da=[],pa=null;E.expectedType&&"value"!==E.expectedType.kind&&(pa=E.expectedType);for(var wa=1;wa<w.length;wa+=2){var Ea=1===wa?-1/0:w[wa],Ma=w[wa+1],Wa=wa,cb=wa+1;if("number"!=
typeof Ea)return E.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Wa);if(da.length&&da[da.length-1][0]>=Ea)return E.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',Wa);Ma=E.parse(Ma,cb,pa);if(!Ma)return null;pa=pa||Ma.type;da.push([Ea,Ma])}return new vf(pa,R,da)};vf.prototype.evaluate=function(w){var E=this.labels,R=this.outputs;if(1===
E.length)return R[0].evaluate(w);var da=this.input.evaluate(w);if(da<=E[0])return R[0].evaluate(w);var pa=E.length;return da>=E[pa-1]?R[pa-1].evaluate(w):R[nb(E,da)].evaluate(w)};vf.prototype.eachChild=function(w){w(this.input);for(var E=0,R=this.outputs;E<R.length;E+=1)w(R[E])};vf.prototype.outputDefined=function(){return this.outputs.every(function(w){return w.outputDefined()})};vf.prototype.serialize=function(){for(var w=["step",this.input.serialize()],E=0;E<this.labels.length;E++)0<E&&w.push(this.labels[E]),
w.push(this.outputs[E].serialize());return w};var Ti=Object.freeze({__proto__:null,number:va,color:function(w,E,R){return new Nd(va(w.r,E.r,R),va(w.g,E.g,R),va(w.b,E.b,R),va(w.a,E.a,R))},array:function(w,E,R){return w.map(function(da,pa){return va(da,E[pa],R)})}}),mi=6/29*3*(6/29),zb=Math.PI/180,Vk=180/Math.PI,$f={forward:Va,reverse:qb,interpolate:function(w,E,R){return{l:va(w.l,E.l,R),a:va(w.a,E.a,R),b:va(w.b,E.b,R),alpha:va(w.alpha,E.alpha,R)}}},sf={forward:function(w){var E=Va(w),R=E.a,da=E.b,
pa=Math.atan2(da,R)*Vk;return{h:0>pa?pa+360:pa,c:Math.sqrt(R*R+da*da),l:E.l,alpha:w.a}},reverse:function(w){var E=w.h*zb,R=w.c;return qb({l:w.l,a:Math.cos(E)*R,b:Math.sin(E)*R,alpha:w.alpha})},interpolate:function(w,E,R){var da=w.h,pa=E.h-da;return{h:da+R*(180<pa||-180>pa?pa-360*Math.round(pa/360):pa),c:va(w.c,E.c,R),l:va(w.l,E.l,R),alpha:va(w.alpha,E.alpha,R)}}},pj=Object.freeze({__proto__:null,lab:$f,hcl:sf}),Bf=function(w,E,R,da,pa){this.type=w;this.operator=E;this.interpolation=R;this.input=da;
this.labels=[];this.outputs=[];for(w=0;w<pa.length;w+=1)E=pa[w],R=E[1],this.labels.push(E[0]),this.outputs.push(R)};Bf.interpolationFactor=function(w,E,R,da){var pa=0;"exponential"===w.name?pa=Ha(E,w.base,R,da):"linear"===w.name?pa=Ha(E,1,R,da):"cubic-bezier"===w.name&&(w=w.controlPoints,pa=(new Vj(w[0],w[1],w[2],w[3])).solve(Ha(E,1,R,da)));return pa};Bf.parse=function(w,E){var R=w[0],da=w[1],pa=w[2],wa=w.slice(3);if(!Array.isArray(da)||0===da.length)return E.error("Expected an interpolation type expression.",
1);if("linear"===da[0])da={name:"linear"};else if("exponential"===da[0]){da=da[1];if("number"!=typeof da)return E.error("Exponential interpolation requires a numeric base.",1,1);da={name:"exponential",base:da}}else{if("cubic-bezier"!==da[0])return E.error("Unknown interpolation type "+String(da[0]),1,0);da=da.slice(1);if(4!==da.length||da.some(function(Kb){return"number"!=typeof Kb||0>Kb||1<Kb}))return E.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",
1);da={name:"cubic-bezier",controlPoints:da}}if(4>w.length-1)return E.error("Expected at least 4 arguments, but found only "+(w.length-1)+".");if(0!=(w.length-1)%2)return E.error("Expected an even number of arguments.");if(!(pa=E.parse(pa,2,Fc)))return null;w=[];var Ea=null;"interpolate-hcl"===R||"interpolate-lab"===R?Ea=sd:E.expectedType&&"value"!==E.expectedType.kind&&(Ea=E.expectedType);for(var Ma=0;Ma<wa.length;Ma+=2){var Wa=wa[Ma],cb=wa[Ma+1],pb=Ma+3,yb=Ma+4;if("number"!=typeof Wa)return E.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',
pb);if(w.length&&w[w.length-1][0]>=Wa)return E.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',pb);cb=E.parse(cb,yb,Ea);if(!cb)return null;Ea=Ea||cb.type;w.push([Wa,cb])}return"number"===Ea.kind||"color"===Ea.kind||"array"===Ea.kind&&"number"===Ea.itemType.kind&&"number"==typeof Ea.N?new Bf(Ea,R,da,pa,w):E.error("Type "+ha(Ea)+" is not interpolatable.")};Bf.prototype.evaluate=function(w){var E=this.labels,R=this.outputs;if(1===
E.length)return R[0].evaluate(w);var da=this.input.evaluate(w);if(da<=E[0])return R[0].evaluate(w);var pa=E.length;if(da>=E[pa-1])return R[pa-1].evaluate(w);pa=nb(E,da);E=Bf.interpolationFactor(this.interpolation,da,E[pa],E[pa+1]);da=R[pa].evaluate(w);w=R[pa+1].evaluate(w);return"interpolate"===this.operator?Ti[this.type.kind.toLowerCase()](da,w,E):"interpolate-hcl"===this.operator?sf.reverse(sf.interpolate(sf.forward(da),sf.forward(w),E)):$f.reverse($f.interpolate($f.forward(da),$f.forward(w),E))};
Bf.prototype.eachChild=function(w){w(this.input);for(var E=0,R=this.outputs;E<R.length;E+=1)w(R[E])};Bf.prototype.outputDefined=function(){return this.outputs.every(function(w){return w.outputDefined()})};Bf.prototype.serialize=function(){var w="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);w=[this.operator,w,this.input.serialize()];
for(var E=0;E<this.labels.length;E++)w.push(this.labels[E],this.outputs[E].serialize());return w};var Rh=function(w,E){this.type=w;this.args=E};Rh.parse=function(w,E){if(2>w.length)return E.error("Expectected at least one argument.");var R=null,da=E.expectedType;da&&"value"!==da.kind&&(R=da);var pa=[],wa=0;for(w=w.slice(1);wa<w.length;wa+=1){var Ea=E.parse(w[wa],1+pa.length,R,void 0,{typeAnnotation:"omit"});if(!Ea)return null;R=R||Ea.type;pa.push(Ea)}E=da&&pa.some(function(Ma){return ja(da,Ma.type)});
return new Rh(E?od:R,pa)};Rh.prototype.evaluate=function(w){for(var E,R=null,da=0,pa=0,wa=this.args;pa<wa.length&&(da++,(R=wa[pa].evaluate(w))&&R instanceof Ne&&!R.available&&(E||(E=R.name),R=null,da===this.args.length&&(R=E)),null===R);pa+=1);return R};Rh.prototype.eachChild=function(w){this.args.forEach(w)};Rh.prototype.outputDefined=function(){return this.args.every(function(w){return w.outputDefined()})};Rh.prototype.serialize=function(){var w=["coalesce"];return this.eachChild(function(E){w.push(E.serialize())}),
w};var sh=function(w,E){this.type=E.type;this.bindings=[].concat(w);this.result=E};sh.prototype.evaluate=function(w){return this.result.evaluate(w)};sh.prototype.eachChild=function(w){for(var E=0,R=this.bindings;E<R.length;E+=1)w(R[E][1]);w(this.result)};sh.parse=function(w,E){if(4>w.length)return E.error("Expected at least 3 arguments, but found "+(w.length-1)+" instead.");for(var R=[],da=1;da<w.length-1;da+=2){var pa=w[da];if("string"!=typeof pa)return E.error("Expected string, but found "+typeof pa+
" instead.",da);if(/[^a-zA-Z0-9_]/.test(pa))return E.error("Variable names must contain only alphanumeric characters or '_'.",da);var wa=E.parse(w[da+1],da+1);if(!wa)return null;R.push([pa,wa])}return(w=E.parse(w[w.length-1],w.length-1,E.expectedType,R))?new sh(R,w):null};sh.prototype.outputDefined=function(){return this.result.outputDefined()};sh.prototype.serialize=function(){for(var w=["let"],E=0,R=this.bindings;E<R.length;E+=1){var da=R[E];w.push(da[0],da[1].serialize())}return w.push(this.result.serialize()),
w};var ni=function(w,E,R){this.type=w;this.index=E;this.input=R};ni.parse=function(w,E){if(3!==w.length)return E.error("Expected 2 arguments, but found "+(w.length-1)+" instead.");var R=E.parse(w[1],1,Fc);w=E.parse(w[2],2,fa(E.expectedType||od));return R&&w?new ni(w.type.itemType,R,w):null};ni.prototype.evaluate=function(w){var E=this.index.evaluate(w);w=this.input.evaluate(w);if(0>E)throw new bf("Array index out of bounds: "+E+" < 0.");if(E>=w.length)throw new bf("Array index out of bounds: "+E+
" > "+(w.length-1)+".");if(E!==Math.floor(E))throw new bf("Array index must be an integer, but found "+E+" instead.");return w[E]};ni.prototype.eachChild=function(w){w(this.index);w(this.input)};ni.prototype.outputDefined=function(){return!1};ni.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Sh=function(w,E){this.type=dd;this.needle=w;this.haystack=E};Sh.parse=function(w,E){if(3!==w.length)return E.error("Expected 2 arguments, but found "+(w.length-
1)+" instead.");var R=E.parse(w[1],1,od);w=E.parse(w[2],2,od);return R&&w?ba(R.type,[dd,hd,Fc,fd,od])?new Sh(R,w):E.error("Expected first argument to be of type boolean, string, number or null, but found "+ha(R.type)+" instead"):null};Sh.prototype.evaluate=function(w){var E=this.needle.evaluate(w);w=this.haystack.evaluate(w);if(!w)return!1;if(!ma(E,["boolean","string","number","null"]))throw new bf("Expected first argument to be of type boolean, string, number or null, but found "+ha(oa(E))+" instead.");
if(!ma(w,["string","array"]))throw new bf("Expected second argument to be of type array or string, but found "+ha(oa(w))+" instead.");return 0<=w.indexOf(E)};Sh.prototype.eachChild=function(w){w(this.needle);w(this.haystack)};Sh.prototype.outputDefined=function(){return!0};Sh.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Wd=function(w,E,R){this.type=Fc;this.needle=w;this.haystack=E;this.fromIndex=R};Wd.parse=function(w,E){if(2>=w.length||5<=w.length)return E.error("Expected 3 or 4 arguments, but found "+
(w.length-1)+" instead.");var R=E.parse(w[1],1,od),da=E.parse(w[2],2,od);return R&&da?ba(R.type,[dd,hd,Fc,fd,od])?4===w.length?(w=E.parse(w[3],3,Fc))?new Wd(R,da,w):null:new Wd(R,da):E.error("Expected first argument to be of type boolean, string, number or null, but found "+ha(R.type)+" instead"):null};Wd.prototype.evaluate=function(w){var E=this.needle.evaluate(w),R=this.haystack.evaluate(w);if(!ma(E,["boolean","string","number","null"]))throw new bf("Expected first argument to be of type boolean, string, number or null, but found "+
ha(oa(E))+" instead.");if(!ma(R,["string","array"]))throw new bf("Expected second argument to be of type array or string, but found "+ha(oa(R))+" instead.");return this.fromIndex?(w=this.fromIndex.evaluate(w),R.indexOf(E,w)):R.indexOf(E)};Wd.prototype.eachChild=function(w){w(this.needle);w(this.haystack);this.fromIndex&&w(this.fromIndex)};Wd.prototype.outputDefined=function(){return!1};Wd.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var w=this.fromIndex.serialize();
return["index-of",this.needle.serialize(),this.haystack.serialize(),w]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var vh=function(w,E,R,da,pa,wa){this.inputType=w;this.type=E;this.input=R;this.cases=da;this.outputs=pa;this.otherwise=wa};vh.parse=function(w,E){if(5>w.length)return E.error("Expected at least 4 arguments, but found only "+(w.length-1)+".");if(1!=w.length%2)return E.error("Expected an even number of arguments.");var R;E.expectedType&&"value"!==E.expectedType.kind&&
(R=E.expectedType);for(var da={},pa=[],wa=2;wa<w.length-1;wa+=2){var Ea=w[wa],Ma=w[wa+1];Array.isArray(Ea)||(Ea=[Ea]);var Wa=E.concat(wa);if(0===Ea.length)return Wa.error("Expected at least one branch label.");for(var cb=0;cb<Ea.length;cb+=1){var pb=Ea[cb];if("number"!=typeof pb&&"string"!=typeof pb)return Wa.error("Branch labels must be numbers or strings.");if("number"==typeof pb&&Math.abs(pb)>Number.MAX_SAFE_INTEGER)return Wa.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+
".");if("number"==typeof pb&&Math.floor(pb)!==pb)return Wa.error("Numeric branch labels must be integer values.");if(yb){if(Wa.checkSubtype(yb,oa(pb)))return null}else var yb=oa(pb);if(void 0!==da[String(pb)])return Wa.error("Branch labels must be unique.");da[String(pb)]=pa.length}Ma=E.parse(Ma,wa,R);if(!Ma)return null;R=R||Ma.type;pa.push(Ma)}wa=E.parse(w[1],1,od);return wa?(w=E.parse(w[w.length-1],w.length-1,R))?"value"!==wa.type.kind&&E.concat(1).checkSubtype(yb,wa.type)?null:new vh(yb,R,wa,da,
pa,w):null:null};vh.prototype.evaluate=function(w){var E=this.input.evaluate(w);return(oa(E)===this.inputType&&this.outputs[this.cases[E]]||this.otherwise).evaluate(w)};vh.prototype.eachChild=function(w){w(this.input);this.outputs.forEach(w);w(this.otherwise)};vh.prototype.outputDefined=function(){return this.outputs.every(function(w){return w.outputDefined()})&&this.otherwise.outputDefined()};vh.prototype.serialize=function(){for(var w=this,E=["match",this.input.serialize()],R=[],da={},pa=0,wa=Object.keys(this.cases).sort();pa<
wa.length;pa+=1){var Ea=wa[pa];void 0===(Ma=da[this.cases[Ea]])?(da[this.cases[Ea]]=R.length,R.push([this.cases[Ea],[Ea]])):R[Ma][1].push(Ea)}da=function(Wa){return"number"===w.inputType.kind?Number(Wa):Wa};for(pa=0;pa<R.length;pa+=1){wa=R[pa];var Ma=wa[0];Ma=wa[1];E.push(1===Ma.length?da(Ma[0]):Ma.map(da));E.push(this.outputs[pa].serialize())}return E.push(this.otherwise.serialize()),E};var oi=function(w,E,R){this.type=w;this.branches=E;this.otherwise=R};oi.parse=function(w,E){if(4>w.length)return E.error("Expected at least 3 arguments, but found only "+
(w.length-1)+".");if(0!=w.length%2)return E.error("Expected an odd number of arguments.");var R;E.expectedType&&"value"!==E.expectedType.kind&&(R=E.expectedType);for(var da=[],pa=1;pa<w.length-1;pa+=2){var wa=E.parse(w[pa],pa,dd);if(!wa)return null;var Ea=E.parse(w[pa+1],pa+1,R);if(!Ea)return null;da.push([wa,Ea]);R=R||Ea.type}return(w=E.parse(w[w.length-1],w.length-1,R))?new oi(R,da,w):null};oi.prototype.evaluate=function(w){for(var E=0,R=this.branches;E<R.length;E+=1){var da=R[E],pa=da[1];if(da[0].evaluate(w))return pa.evaluate(w)}return this.otherwise.evaluate(w)};
oi.prototype.eachChild=function(w){for(var E=0,R=this.branches;E<R.length;E+=1){var da=R[E],pa=da[1];w(da[0]);w(pa)}w(this.otherwise)};oi.prototype.outputDefined=function(){return this.branches.every(function(w){return w[1].outputDefined()})&&this.otherwise.outputDefined()};oi.prototype.serialize=function(){var w=["case"];return this.eachChild(function(E){w.push(E.serialize())}),w};var Cg=function(w,E,R,da){this.type=w;this.input=E;this.beginIndex=R;this.endIndex=da};Cg.parse=function(w,E){if(2>=
w.length||5<=w.length)return E.error("Expected 3 or 4 arguments, but found "+(w.length-1)+" instead.");var R=E.parse(w[1],1,od),da=E.parse(w[2],2,Fc);return R&&da?ba(R.type,[fa(od),hd,od])?4===w.length?(w=E.parse(w[3],3,Fc))?new Cg(R.type,R,da,w):null:new Cg(R.type,R,da):E.error("Expected first argument to be of type array or string, but found "+ha(R.type)+" instead"):null};Cg.prototype.evaluate=function(w){var E=this.input.evaluate(w),R=this.beginIndex.evaluate(w);if(!ma(E,["string","array"]))throw new bf("Expected first argument to be of type array or string, but found "+
ha(oa(E))+" instead.");return this.endIndex?(w=this.endIndex.evaluate(w),E.slice(R,w)):E.slice(R)};Cg.prototype.eachChild=function(w){w(this.input);w(this.beginIndex);this.endIndex&&w(this.endIndex)};Cg.prototype.outputDefined=function(){return!1};Cg.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var w=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),w]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var nk=
gb("==",function(w,E,R){return E===R},La),ok=gb("!=",function(w,E,R){return E!==R},function(w,E,R,da){return!La(0,E,R,da)}),Hj=gb("<",function(w,E,R){return E<R},function(w,E,R,da){return 0>da.compare(E,R)}),Ce=gb(">",function(w,E,R){return E>R},function(w,E,R,da){return 0<da.compare(E,R)}),yk=gb("<=",function(w,E,R){return E<=R},function(w,E,R,da){return 0>=da.compare(E,R)}),ch=gb(">=",function(w,E,R){return E>=R},function(w,E,R,da){return 0<=da.compare(E,R)}),dh=function(w,E,R,da,pa){this.type=
hd;this.number=w;this.locale=E;this.currency=R;this.minFractionDigits=da;this.maxFractionDigits=pa};dh.parse=function(w,E){if(3!==w.length)return E.error("Expected two arguments.");var R=E.parse(w[1],1,Fc);if(!R)return null;w=w[2];if("object"!=typeof w||Array.isArray(w))return E.error("NumberFormat options argument must be an object.");var da=null;if(w.locale&&!(da=E.parse(w.locale,1,hd)))return null;var pa=null;if(w.currency&&!(pa=E.parse(w.currency,1,hd)))return null;var wa=null;if(w["min-fraction-digits"]&&
!(wa=E.parse(w["min-fraction-digits"],1,Fc)))return null;var Ea=null;return w["max-fraction-digits"]&&!(Ea=E.parse(w["max-fraction-digits"],1,Fc))?null:new dh(R,da,pa,wa,Ea)};dh.prototype.evaluate=function(w){return(new Intl.NumberFormat(this.locale?this.locale.evaluate(w):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(w):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(w):void 0,maximumFractionDigits:this.maxFractionDigits?
this.maxFractionDigits.evaluate(w):void 0})).format(this.number.evaluate(w))};dh.prototype.eachChild=function(w){w(this.number);this.locale&&w(this.locale);this.currency&&w(this.currency);this.minFractionDigits&&w(this.minFractionDigits);this.maxFractionDigits&&w(this.maxFractionDigits)};dh.prototype.outputDefined=function(){return!1};dh.prototype.serialize=function(){var w={};return this.locale&&(w.locale=this.locale.serialize()),this.currency&&(w.currency=this.currency.serialize()),this.minFractionDigits&&
(w["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(w["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),w]};var fg=function(w){this.type=Fc;this.input=w};fg.parse=function(w,E){return 2!==w.length?E.error("Expected 1 argument, but found "+(w.length-1)+" instead."):(w=E.parse(w[1],1))?"array"!==w.type.kind&&"string"!==w.type.kind&&"value"!==w.type.kind?E.error("Expected argument of type string or array, but found "+
ha(w.type)+" instead."):new fg(w):null};fg.prototype.evaluate=function(w){w=this.input.evaluate(w);if("string"==typeof w||Array.isArray(w))return w.length;throw new bf("Expected value to be of type string or array, but found "+ha(oa(w))+" instead.");};fg.prototype.eachChild=function(w){w(this.input)};fg.prototype.outputDefined=function(){return!1};fg.prototype.serialize=function(){var w=["length"];return this.eachChild(function(E){w.push(E.serialize())}),w};var Ei={"==":nk,"!=":ok,">":Ce,"<":Hj,">=":ch,
"<=":yk,array:We,at:ni,boolean:We,case:oi,coalesce:Rh,collator:eg,format:uf,image:mg,in:Sh,"index-of":Wd,interpolate:Bf,"interpolate-hcl":Bf,"interpolate-lab":Bf,length:fg,let:sh,literal:rf,match:vh,number:We,"number-format":dh,object:We,slice:Cg,step:vf,string:We,"to-boolean":Ff,"to-color":Ff,"to-number":Ff,"to-string":Ff,var:xg,within:Mf};Je.register(Ei,{error:[{kind:"error"},[hd],function(w,E){throw new bf(E[0].evaluate(w));}],typeof:[hd,[od],function(w,E){return ha(oa(E[0].evaluate(w)))}],"to-rgba":[fa(Fc,
4),[sd],function(w,E){return E[0].evaluate(w).toArray()}],rgb:[sd,[Fc,Fc,Fc],ob],rgba:[sd,[Fc,Fc,Fc,Fc],ob],has:{type:dd,overloads:[[[hd],function(w,E){E=E[0].evaluate(w);w=w.properties();return E in w}],[[hd,vd],function(w,E){var R=E[1];E=E[0].evaluate(w);w=R.evaluate(w);return E in w}]]},get:{type:od,overloads:[[[hd],function(w,E){return ub(E[0].evaluate(w),w.properties())}],[[hd,vd],function(w,E){var R=E[1];return ub(E[0].evaluate(w),R.evaluate(w))}]]},"feature-state":[od,[hd],function(w,E){return ub(E[0].evaluate(w),
w.featureState||{})}],properties:[vd,[],function(w){return w.properties()}],"geometry-type":[hd,[],function(w){return w.geometryType()}],id:[od,[],function(w){return w.id()}],zoom:[Fc,[],function(w){return w.globals.zoom}],"heatmap-density":[Fc,[],function(w){return w.globals.heatmapDensity||0}],"line-progress":[Fc,[],function(w){return w.globals.lineProgress||0}],accumulated:[od,[],function(w){return void 0===w.globals.accumulated?null:w.globals.accumulated}],"+":[Fc,{type:Fc},function(w,E){for(var R=
0,da=0;da<E.length;da+=1)R+=E[da].evaluate(w);return R}],"*":[Fc,{type:Fc},function(w,E){for(var R=1,da=0;da<E.length;da+=1)R*=E[da].evaluate(w);return R}],"-":{type:Fc,overloads:[[[Fc,Fc],function(w,E){var R=E[1];return E[0].evaluate(w)-R.evaluate(w)}],[[Fc],function(w,E){return-E[0].evaluate(w)}]]},"/":[Fc,[Fc,Fc],function(w,E){var R=E[1];return E[0].evaluate(w)/R.evaluate(w)}],"%":[Fc,[Fc,Fc],function(w,E){var R=E[1];return E[0].evaluate(w)%R.evaluate(w)}],ln2:[Fc,[],function(){return Math.LN2}],
pi:[Fc,[],function(){return Math.PI}],e:[Fc,[],function(){return Math.E}],"^":[Fc,[Fc,Fc],function(w,E){var R=E[1];return Math.pow(E[0].evaluate(w),R.evaluate(w))}],sqrt:[Fc,[Fc],function(w,E){return Math.sqrt(E[0].evaluate(w))}],log10:[Fc,[Fc],function(w,E){return Math.log(E[0].evaluate(w))/Math.LN10}],ln:[Fc,[Fc],function(w,E){return Math.log(E[0].evaluate(w))}],log2:[Fc,[Fc],function(w,E){return Math.log(E[0].evaluate(w))/Math.LN2}],sin:[Fc,[Fc],function(w,E){return Math.sin(E[0].evaluate(w))}],
cos:[Fc,[Fc],function(w,E){return Math.cos(E[0].evaluate(w))}],tan:[Fc,[Fc],function(w,E){return Math.tan(E[0].evaluate(w))}],asin:[Fc,[Fc],function(w,E){return Math.asin(E[0].evaluate(w))}],acos:[Fc,[Fc],function(w,E){return Math.acos(E[0].evaluate(w))}],atan:[Fc,[Fc],function(w,E){return Math.atan(E[0].evaluate(w))}],min:[Fc,{type:Fc},function(w,E){return Math.min.apply(Math,E.map(function(R){return R.evaluate(w)}))}],max:[Fc,{type:Fc},function(w,E){return Math.max.apply(Math,E.map(function(R){return R.evaluate(w)}))}],
abs:[Fc,[Fc],function(w,E){return Math.abs(E[0].evaluate(w))}],round:[Fc,[Fc],function(w,E){w=E[0].evaluate(w);return 0>w?-Math.round(-w):Math.round(w)}],floor:[Fc,[Fc],function(w,E){return Math.floor(E[0].evaluate(w))}],ceil:[Fc,[Fc],function(w,E){return Math.ceil(E[0].evaluate(w))}],"filter-==":[dd,[hd,od],function(w,E){var R=E[0];E=E[1];return w.properties()[R.value]===E.value}],"filter-id-==":[dd,[od],function(w,E){E=E[0];return w.id()===E.value}],"filter-type-==":[dd,[hd],function(w,E){E=E[0];
return w.geometryType()===E.value}],"filter-<":[dd,[hd,od],function(w,E){var R=E[0];E=E[1];w=w.properties()[R.value];R=E.value;return typeof w==typeof R&&w<R}],"filter-id-<":[dd,[od],function(w,E){E=E[0];w=w.id();E=E.value;return typeof w==typeof E&&w<E}],"filter->":[dd,[hd,od],function(w,E){var R=E[0];E=E[1];w=w.properties()[R.value];R=E.value;return typeof w==typeof R&&w>R}],"filter-id->":[dd,[od],function(w,E){E=E[0];w=w.id();E=E.value;return typeof w==typeof E&&w>E}],"filter-<=":[dd,[hd,od],function(w,
E){var R=E[0];E=E[1];w=w.properties()[R.value];R=E.value;return typeof w==typeof R&&w<=R}],"filter-id-<=":[dd,[od],function(w,E){E=E[0];w=w.id();E=E.value;return typeof w==typeof E&&w<=E}],"filter->=":[dd,[hd,od],function(w,E){var R=E[0];E=E[1];w=w.properties()[R.value];R=E.value;return typeof w==typeof R&&w>=R}],"filter-id->=":[dd,[od],function(w,E){E=E[0];w=w.id();E=E.value;return typeof w==typeof E&&w>=E}],"filter-has":[dd,[od],function(w,E){return E[0].value in w.properties()}],"filter-has-id":[dd,
[],function(w){return null!==w.id()&&void 0!==w.id()}],"filter-type-in":[dd,[fa(hd)],function(w,E){return 0<=E[0].value.indexOf(w.geometryType())}],"filter-id-in":[dd,[fa(od)],function(w,E){return 0<=E[0].value.indexOf(w.id())}],"filter-in-small":[dd,[hd,fa(od)],function(w,E){var R=E[0];return 0<=E[1].value.indexOf(w.properties()[R.value])}],"filter-in-large":[dd,[hd,fa(od)],function(w,E){var R=E[0];E=E[1];a:{w=w.properties()[R.value];R=E.value;var da=0;for(E=E.value.length-1;da<=E;){var pa=da+E>>
1;if(R[pa]===w){E=!0;break a}R[pa]>w?E=pa-1:da=pa+1}E=!1}return E}],all:{type:dd,overloads:[[[dd,dd],function(w,E){var R=E[1];return E[0].evaluate(w)&&R.evaluate(w)}],[{type:dd},function(w,E){for(var R=0;R<E.length;R+=1)if(!E[R].evaluate(w))return!1;return!0}]]},any:{type:dd,overloads:[[[dd,dd],function(w,E){var R=E[1];return E[0].evaluate(w)||R.evaluate(w)}],[{type:dd},function(w,E){for(var R=0;R<E.length;R+=1)if(E[R].evaluate(w))return!0;return!1}]]},"!":[dd,[dd],function(w,E){return!E[0].evaluate(w)}],
"is-supported-script":[dd,[hd],function(w,E){var R=w.globals&&w.globals.isSupportedScript;return!R||R(E[0].evaluate(w))}],upcase:[hd,[hd],function(w,E){return E[0].evaluate(w).toUpperCase()}],downcase:[hd,[hd],function(w,E){return E[0].evaluate(w).toLowerCase()}],concat:[hd,{type:od},function(w,E){return E.map(function(R){return na(R.evaluate(w))}).join("")}],"resolved-locale":[hd,[$d],function(w,E){return E[0].evaluate(w).resolvedLocale()}]});var Zh=function(w,E){this.expression=w;this._warningHistory=
{};this._evaluator=new ve;this._defaultValue=E?"color"===E.type&&kb(E.default)?new Nd(0,0,0,0):"color"===E.type?Nd.parse(E.default)||null:void 0===E.default?null:E.default:null;this._enumValues=E&&"enum"===E.type?E.values:null};Zh.prototype.evaluateWithoutErrorHandling=function(w,E,R,da,pa,wa){return this._evaluator.globals=w,this._evaluator.feature=E,this._evaluator.featureState=R,this._evaluator.canonical=da,this._evaluator.availableImages=pa||null,this._evaluator.formattedSection=wa,this.expression.evaluate(this._evaluator)};
Zh.prototype.evaluate=function(w,E,R,da,pa,wa){this._evaluator.globals=w;this._evaluator.feature=E||null;this._evaluator.featureState=R||null;this._evaluator.canonical=da;this._evaluator.availableImages=pa||null;this._evaluator.formattedSection=wa||null;try{var Ea=this.expression.evaluate(this._evaluator);if(null==Ea||"number"==typeof Ea&&Ea!=Ea)return this._defaultValue;if(this._enumValues&&!(Ea in this._enumValues))throw new bf("Expected value to be one of "+Object.keys(this._enumValues).map(function(Ma){return JSON.stringify(Ma)}).join(", ")+
", but found "+JSON.stringify(Ea)+" instead.");return Ea}catch(Ma){return this._warningHistory[Ma.message]||(this._warningHistory[Ma.message]=!0,"undefined"!=typeof console&&console.warn(Ma.message)),this._defaultValue}};var Yd=function(w,E){this.kind=w;this._styleExpression=E;this.isStateDependent="constant"!==w&&!Ya(E.expression)};Yd.prototype.evaluateWithoutErrorHandling=function(w,E,R,da,pa,wa){return this._styleExpression.evaluateWithoutErrorHandling(w,E,R,da,pa,wa)};Yd.prototype.evaluate=function(w,
E,R,da,pa,wa){return this._styleExpression.evaluate(w,E,R,da,pa,wa)};var zf=function(w,E,R,da){this.kind=w;this.zoomStops=R;this._styleExpression=E;this.isStateDependent="camera"!==w&&!Ya(E.expression);this.interpolationType=da};zf.prototype.evaluateWithoutErrorHandling=function(w,E,R,da,pa,wa){return this._styleExpression.evaluateWithoutErrorHandling(w,E,R,da,pa,wa)};zf.prototype.evaluate=function(w,E,R,da,pa,wa){return this._styleExpression.evaluate(w,E,R,da,pa,wa)};zf.prototype.interpolationFactor=
function(w,E,R){return this.interpolationType?Bf.interpolationFactor(this.interpolationType,w,E,R):0};var qj=function(w,E){this._parameters=w;this._specification=E;X(this,function wa(da,pa){var Ea="color"===pa.type,Ma=da.stops&&"object"==typeof da.stops[0][0],Wa=Ma||!(Ma||void 0!==da.property),cb=da.type||(Ta(pa)?"exponential":"interval");if(Ea&&((da=X({},da)).stops&&(da.stops=da.stops.map(function(qc){return[qc[0],Nd.parse(qc[1])]})),da.default=Nd.parse(da.default?da.default:pa.default)),da.colorSpace&&
"rgb"!==da.colorSpace&&!pj[da.colorSpace])throw Error("Unknown color space: "+da.colorSpace);if("exponential"===cb)var pb=Vb;else if("interval"===cb)pb=Lb;else if("categorical"===cb){pb=Fb;var yb=Object.create(null);Ea=0;for(var Kb=da.stops;Ea<Kb.length;Ea+=1){var Hb=Kb[Ea];yb[Hb[0]]=Hb[1]}var Tb=typeof da.stops[0][0]}else{if("identity"!==cb)throw Error('Unknown function type "'+cb+'"');pb=xc}if(Ma){Ma={};Wa=[];for(cb=0;cb<da.stops.length;cb++)Ea=da.stops[cb],Kb=Ea[0].zoom,void 0===Ma[Kb]&&(Ma[Kb]=
{zoom:Kb,type:da.type,property:da.property,default:da.default,stops:[]},Wa.push(Kb)),Ma[Kb].stops.push([Ea[0].value,Ea[1]]);var Sb=[];for(cb=0;cb<Wa.length;cb+=1)Ea=Wa[cb],Sb.push([Ma[Ea].zoom,wa(Ma[Ea],pa)]);Ma={name:"linear"};return{kind:"composite",interpolationType:Ma,interpolationFactor:Bf.interpolationFactor.bind(void 0,Ma),zoomStops:Sb.map(function(qc){return qc[0]}),evaluate:function(qc,bd){qc=qc.zoom;return Vb({stops:Sb,base:da.base},pa,qc).evaluate(qc,bd)}}}return Wa?(Ma="exponential"===
cb?{name:"exponential",base:void 0!==da.base?da.base:1}:null,{kind:"camera",interpolationType:Ma,interpolationFactor:Bf.interpolationFactor.bind(void 0,Ma),zoomStops:da.stops.map(function(qc){return qc[0]}),evaluate:function(qc){return pb(da,pa,qc.zoom,yb,Tb)}}):{kind:"source",evaluate:function(qc,bd){qc=bd&&bd.properties?bd.properties[da.property]:void 0;return void 0===qc?Mb(da.default,pa.default):pb(da,pa,qc,yb,Tb)}}}(this._parameters,this._specification))};qj.deserialize=function(w){return new qj(w._parameters,
w._specification)};qj.serialize=function(w){return{_parameters:w._parameters,_specification:w._specification}};var Ye={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},ce={promoteId:function(w){var E=w.key;w=w.value;if("string"===Xa(w))return Qc({key:E,value:w});var R=[],da;for(da in w)R.push.apply(R,Qc({key:E+"."+da,value:w[da]}));return R}},Qe={"*":function(){return[]},array:Yb,boolean:function(w){var E=w.value;w=w.key;
var R=Xa(E);return"boolean"!==R?[new bc(w,E,"boolean expected, "+R+" found")]:[]},number:dc,color:function(w){var E=w.key;w=w.value;var R=Xa(w);return"string"!==R?[new bc(E,w,"color expected, "+R+" found")]:null===ue(w)?[new bc(E,w,'color expected, "'+w+'" found')]:[]},constants:S,enum:Lc,filter:Gb,function:oc,layer:nc,object:ib,source:$c,light:Uc,string:Qc,formatted:function(w){return 0===Qc(w).length?[]:tc(w)},resolvedImage:function(w){return 0===Qc(w).length?[]:tc(w)}};Zc.source=Dc($c);Zc.light=
Dc(Uc);Zc.layer=Dc(nc);Zc.filter=Dc(Gb);Zc.paintProperty=Dc(Jb);Zc.layoutProperty=Dc(Xb);var rj=Zc.light,Wk=Zc.paintProperty,Zj=Zc.layoutProperty;Rc.prototype.insert=function(w,E,R,da,pa){this._forEachCell(E,R,da,pa,this._insertCell,this.uid++);this.keys.push(w);this.bboxes.push(E);this.bboxes.push(R);this.bboxes.push(da);this.bboxes.push(pa)};Rc.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer.";};Rc.prototype._insertCell=function(w,E,R,da,pa,
wa){this.cells[pa].push(wa)};Rc.prototype.query=function(w,E,R,da,pa){var wa=this.min,Ea=this.max;if(w<=wa&&E<=wa&&Ea<=R&&Ea<=da&&!pa)return Array.prototype.slice.call(this.keys);wa=[];return this._forEachCell(w,E,R,da,this._queryCell,wa,{},pa),wa};Rc.prototype._queryCell=function(w,E,R,da,pa,wa,Ea,Ma){pa=this.cells[pa];if(null!==pa)for(var Wa=this.keys,cb=this.bboxes,pb=0;pb<pa.length;pb++){var yb=pa[pb];if(void 0===Ea[yb]){var Kb=4*yb;(Ma?Ma(cb[Kb+0],cb[Kb+1],cb[Kb+2],cb[Kb+3]):w<=cb[Kb+2]&&E<=
cb[Kb+3]&&R>=cb[Kb+0]&&da>=cb[Kb+1])?(Ea[yb]=!0,wa.push(Wa[yb])):Ea[yb]=!1}}};Rc.prototype._forEachCell=function(w,E,R,da,pa,wa,Ea,Ma){for(var Wa=this._convertToCellCoord(w),cb=this._convertToCellCoord(E),pb=this._convertToCellCoord(R),yb=this._convertToCellCoord(da);Wa<=pb;Wa++)for(var Kb=cb;Kb<=yb;Kb++){var Hb=this.d*Kb+Wa;if((!Ma||Ma(this._convertFromCellCoord(Wa),this._convertFromCellCoord(Kb),this._convertFromCellCoord(Wa+1),this._convertFromCellCoord(Kb+1)))&&pa.call(this,w,E,R,da,Hb,wa,Ea,
Ma))return}};Rc.prototype._convertFromCellCoord=function(w){return(w-this.padding)/this.scale};Rc.prototype._convertToCellCoord=function(w){return Math.max(0,Math.min(this.d-1,Math.floor(w*this.scale)+this.padding))};Rc.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var w=this.cells,E=3+this.cells.length+1+1,R=0,da=0;da<this.cells.length;da++)R+=this.cells[da].length;R=new Int32Array(E+R+this.keys.length+this.bboxes.length);R[0]=this.extent;R[1]=this.n;R[2]=this.padding;
for(da=0;da<w.length;da++){var pa=w[da];R[3+da]=E;R.set(pa,E);E+=pa.length}return R[3+w.length]=E,R.set(this.keys,E),R[3+w.length+1]=E+=this.keys.length,R.set(this.bboxes,E),R.buffer};var Yj=self.ImageData,Vi=self.ImageBitmap,si={},ti;for(ti in Bc("Object",Object),Rc.serialize=function(w,E){w=w.toArrayBuffer();return E&&E.push(w),{buffer:w}},Rc.deserialize=function(w){return new Rc(w.buffer)},Bc("Grid",Rc),Bc("Color",Nd),Bc("Error",Error),Bc("ResolvedImage",Ne),Bc("StylePropertyFunction",qj),Bc("StyleExpression",
Zh,{omit:["_evaluator"]}),Bc("ZoomDependentExpression",zf),Bc("ZoomConstantExpression",Yd),Bc("CompoundExpression",Je,{omit:["_evaluate"]}),Ei)Ei[ti]._classRegistryKey||Bc("Expression_"+ti,Ei[ti]);var Ij=function(){this.first=!0};Ij.prototype.update=function(w,E){var R=Math.floor(w);return this.first?(this.first=!1,this.lastIntegerZoom=R,this.lastIntegerZoomTime=0,this.lastZoom=w,this.lastFloorZoom=R,!0):(this.lastFloorZoom>R?(this.lastIntegerZoom=R+1,this.lastIntegerZoomTime=E):this.lastFloorZoom<
R&&(this.lastIntegerZoom=R,this.lastIntegerZoomTime=E),w!==this.lastZoom&&(this.lastZoom=w,this.lastFloorZoom=R,!0))};var Bd={"Latin-1 Supplement":function(w){return 128<=w&&255>=w},Arabic:function(w){return 1536<=w&&1791>=w},"Arabic Supplement":function(w){return 1872<=w&&1919>=w},"Arabic Extended-A":function(w){return 2208<=w&&2303>=w},"Hangul Jamo":function(w){return 4352<=w&&4607>=w},"Unified Canadian Aboriginal Syllabics":function(w){return 5120<=w&&5759>=w},Khmer:function(w){return 6016<=w&&
6143>=w},"Unified Canadian Aboriginal Syllabics Extended":function(w){return 6320<=w&&6399>=w},"General Punctuation":function(w){return 8192<=w&&8303>=w},"Letterlike Symbols":function(w){return 8448<=w&&8527>=w},"Number Forms":function(w){return 8528<=w&&8591>=w},"Miscellaneous Technical":function(w){return 8960<=w&&9215>=w},"Control Pictures":function(w){return 9216<=w&&9279>=w},"Optical Character Recognition":function(w){return 9280<=w&&9311>=w},"Enclosed Alphanumerics":function(w){return 9312<=
w&&9471>=w},"Geometric Shapes":function(w){return 9632<=w&&9727>=w},"Miscellaneous Symbols":function(w){return 9728<=w&&9983>=w},"Miscellaneous Symbols and Arrows":function(w){return 11008<=w&&11263>=w},"CJK Radicals Supplement":function(w){return 11904<=w&&12031>=w},"Kangxi Radicals":function(w){return 12032<=w&&12255>=w},"Ideographic Description Characters":function(w){return 12272<=w&&12287>=w},"CJK Symbols and Punctuation":function(w){return 12288<=w&&12351>=w},Hiragana:function(w){return 12352<=
w&&12447>=w},Katakana:function(w){return 12448<=w&&12543>=w},Bopomofo:function(w){return 12544<=w&&12591>=w},"Hangul Compatibility Jamo":function(w){return 12592<=w&&12687>=w},Kanbun:function(w){return 12688<=w&&12703>=w},"Bopomofo Extended":function(w){return 12704<=w&&12735>=w},"CJK Strokes":function(w){return 12736<=w&&12783>=w},"Katakana Phonetic Extensions":function(w){return 12784<=w&&12799>=w},"Enclosed CJK Letters and Months":function(w){return 12800<=w&&13055>=w},"CJK Compatibility":function(w){return 13056<=
w&&13311>=w},"CJK Unified Ideographs Extension A":function(w){return 13312<=w&&19903>=w},"Yijing Hexagram Symbols":function(w){return 19904<=w&&19967>=w},"CJK Unified Ideographs":function(w){return 19968<=w&&40959>=w},"Yi Syllables":function(w){return 40960<=w&&42127>=w},"Yi Radicals":function(w){return 42128<=w&&42191>=w},"Hangul Jamo Extended-A":function(w){return 43360<=w&&43391>=w},"Hangul Syllables":function(w){return 44032<=w&&55215>=w},"Hangul Jamo Extended-B":function(w){return 55216<=w&&
55295>=w},"Private Use Area":function(w){return 57344<=w&&63743>=w},"CJK Compatibility Ideographs":function(w){return 63744<=w&&64255>=w},"Arabic Presentation Forms-A":function(w){return 64336<=w&&65023>=w},"Vertical Forms":function(w){return 65040<=w&&65055>=w},"CJK Compatibility Forms":function(w){return 65072<=w&&65103>=w},"Small Form Variants":function(w){return 65104<=w&&65135>=w},"Arabic Presentation Forms-B":function(w){return 65136<=w&&65279>=w},"Halfwidth and Fullwidth Forms":function(w){return 65280<=
w&&65519>=w}},Jj=null,Cf="unavailable",Jg=null,cj=function(w){w&&"string"==typeof w&&-1<w.indexOf("NetworkError")&&(Cf="error");Jj&&Jj(w)},Fi=new gc,dj=function(){if("deferred"!==Cf||!Jg)throw Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Cf="loading";be();Jg&&wb({url:Jg},function(w){w?cj(w):(Cf="loaded",be())})},If={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return"loaded"===Cf||null!=If.applyArabicShaping},
isLoading:function(){return"loading"===Cf},setState:function(w){Cf=w.pluginStatus;Jg=w.pluginURL},isParsed:function(){return null!=If.applyArabicShaping&&null!=If.processBidirectionalText&&null!=If.processStyledBidirectionalText},getPluginURL:function(){return Jg}},Ke=function(w,E){this.zoom=w;E?(this.now=E.now,this.fadeDuration=E.fadeDuration,this.zoomHistory=E.zoomHistory,this.transition=E.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ij,this.transition={})};Ke.prototype.isSupportedScript=
function(w){a:{for(var E=If.isLoaded(),R=0;R<w.length;R+=1){var da=w[R].charCodeAt(0);if(!E&&Sd(da)||2304<=da&&3583>=da||3840<=da&&4255>=da||Bd.Khmer(da)){w=!1;break a}}w=!0}return w};Ke.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)};Ke.prototype.getCrossfadeParameters=function(){var w=this.zoom,E=w-Math.floor(w),R=this.crossFadingFactor();return w>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,
t:E+(1-E)*R}:{fromScale:.5,toScale:1,t:1-(1-R)*E}};var $h=function(w,E){this.property=w;this.value=E;this.expression=function(R,da){if(kb(R))return new qj(R,da);if(Gc(R)){R=Wc(R,da);if("error"===R.result)throw Error(R.value.map(function(wa){return wa.key+": "+wa.message}).join(", "));return R.value}var pa=R;return"string"==typeof R&&"color"===da.type&&(pa=Nd.parse(R)),{kind:"constant",evaluate:function(){return pa}}}(void 0===E?w.specification.default:E,w.specification)};$h.prototype.isDataDriven=
function(){return"source"===this.expression.kind||"composite"===this.expression.kind};$h.prototype.possiblyEvaluate=function(w,E,R){return this.property.possiblyEvaluate(this,w,E,R)};var sj=function(w){this.property=w;this.value=new $h(w,void 0)};sj.prototype.transitioned=function(w,E){return new pk(this.property,this.value,E,f({},w.transition,this.transition),w.now)};sj.prototype.untransitioned=function(){return new pk(this.property,this.value,null,{},0)};var Mg=function(w){this._properties=w;this._values=
Object.create(w.defaultTransitionablePropertyValues)};Mg.prototype.getValue=function(w){return z(this._values[w].value.value)};Mg.prototype.setValue=function(w,E){this._values.hasOwnProperty(w)||(this._values[w]=new sj(this._values[w].property));this._values[w].value=new $h(this._values[w].property,null===E?void 0:z(E))};Mg.prototype.getTransition=function(w){return z(this._values[w].transition)};Mg.prototype.setTransition=function(w,E){this._values.hasOwnProperty(w)||(this._values[w]=new sj(this._values[w].property));
this._values[w].transition=z(E)||void 0};Mg.prototype.serialize=function(){for(var w={},E=0,R=Object.keys(this._values);E<R.length;E+=1){var da=R[E],pa=this.getValue(da);void 0!==pa&&(w[da]=pa);pa=this.getTransition(da);void 0!==pa&&(w[da+"-transition"]=pa)}return w};Mg.prototype.transitioned=function(w,E){for(var R=new Cd(this._properties),da=0,pa=Object.keys(this._values);da<pa.length;da+=1){var wa=pa[da];R._values[wa]=this._values[wa].transitioned(w,E._values[wa])}return R};Mg.prototype.untransitioned=
function(){for(var w=new Cd(this._properties),E=0,R=Object.keys(this._values);E<R.length;E+=1){var da=R[E];w._values[da]=this._values[da].untransitioned()}return w};var pk=function(w,E,R,da,pa){this.property=w;this.value=E;this.begin=pa+da.delay||0;this.end=this.begin+da.duration||0;w.specification.transition&&(da.delay||da.duration)&&(this.prior=R)};pk.prototype.possiblyEvaluate=function(w,E,R){var da=w.now||0,pa=this.value.possiblyEvaluate(w,E,R),wa=this.prior;if(wa){if(da>this.end||this.value.isDataDriven())return this.prior=
null,pa;if(da<this.begin)return wa.possiblyEvaluate(w,E,R);var Ea=(da-this.begin)/(this.end-this.begin);da=this.property;var Ma=da.interpolate;w=wa.possiblyEvaluate(w,E,R);0>=Ea?Ea=0:1<=Ea?Ea=1:(E=Ea*Ea,R=E*Ea,Ea=4*(.5>Ea?R:3*(Ea-E)+R-.75));return Ma.call(da,w,pa,Ea)}return pa};var Cd=function(w){this._properties=w;this._values=Object.create(w.defaultTransitioningPropertyValues)};Cd.prototype.possiblyEvaluate=function(w,E,R){for(var da=new Gi(this._properties),pa=0,wa=Object.keys(this._values);pa<
wa.length;pa+=1){var Ea=wa[pa];da._values[Ea]=this._values[Ea].possiblyEvaluate(w,E,R)}return da};Cd.prototype.hasTransition=function(){for(var w=0,E=Object.keys(this._values);w<E.length;w+=1)if(this._values[E[w]].prior)return!0;return!1};var ff=function(w){this._properties=w;this._values=Object.create(w.defaultPropertyValues)};ff.prototype.getValue=function(w){return z(this._values[w].value)};ff.prototype.setValue=function(w,E){this._values[w]=new $h(this._values[w].property,null===E?void 0:z(E))};
ff.prototype.serialize=function(){for(var w={},E=0,R=Object.keys(this._values);E<R.length;E+=1){var da=R[E],pa=this.getValue(da);void 0!==pa&&(w[da]=pa)}return w};ff.prototype.possiblyEvaluate=function(w,E,R){for(var da=new Gi(this._properties),pa=0,wa=Object.keys(this._values);pa<wa.length;pa+=1){var Ea=wa[pa];da._values[Ea]=this._values[Ea].possiblyEvaluate(w,E,R)}return da};var lf=function(w,E,R){this.property=w;this.value=E;this.parameters=R};lf.prototype.isConstant=function(){return"constant"===
this.value.kind};lf.prototype.constantOr=function(w){return"constant"===this.value.kind?this.value.value:w};lf.prototype.evaluate=function(w,E,R,da){return this.property.evaluate(this.value,this.parameters,w,E,R,da)};var Gi=function(w){this._properties=w;this._values=Object.create(w.defaultPossiblyEvaluatedValues)};Gi.prototype.get=function(w){return this._values[w]};var xd=function(w){this.specification=w};xd.prototype.possiblyEvaluate=function(w,E){return w.expression.evaluate(E)};xd.prototype.interpolate=
function(w,E,R){var da=Ti[this.specification.type];return da?da(w,E,R):w};var Zd=function(w,E){this.specification=w;this.overrides=E};Zd.prototype.possiblyEvaluate=function(w,E,R,da){return new lf(this,"constant"===w.expression.kind||"camera"===w.expression.kind?{kind:"constant",value:w.expression.evaluate(E,null,{},R,da)}:w.expression,E)};Zd.prototype.interpolate=function(w,E,R){if("constant"!==w.value.kind||"constant"!==E.value.kind)return w;if(void 0===w.value.value||void 0===E.value.value)return new lf(this,
{kind:"constant",value:void 0},w.parameters);var da=Ti[this.specification.type];return da?new lf(this,{kind:"constant",value:da(w.value.value,E.value.value,R)},w.parameters):w};Zd.prototype.evaluate=function(w,E,R,da,pa,wa){return"constant"===w.kind?w.value:w.evaluate(E,R,da,pa,wa)};var tj=function(w){function E(){w.apply(this,arguments)}return w&&(E.__proto__=w),(E.prototype=Object.create(w&&w.prototype)).constructor=E,E.prototype.possiblyEvaluate=function(R,da,pa,wa){return void 0===R.value?new lf(this,
{kind:"constant",value:void 0},da):"constant"===R.expression.kind?(pa=R.expression.evaluate(da,null,{},pa,wa),R="resolvedImage"===R.property.specification.type&&"string"!=typeof pa?pa.name:pa,R=this._calculate(R,R,R,da),new lf(this,{kind:"constant",value:R},da)):"camera"===R.expression.kind?(R=this._calculate(R.expression.evaluate({zoom:da.zoom-1}),R.expression.evaluate({zoom:da.zoom}),R.expression.evaluate({zoom:da.zoom+1}),da),new lf(this,{kind:"constant",value:R},da)):new lf(this,R.expression,
da)},E.prototype.evaluate=function(R,da,pa,wa,Ea,Ma){return"source"===R.kind?(R=R.evaluate(da,pa,wa,Ea,Ma),this._calculate(R,R,R,da)):"composite"===R.kind?this._calculate(R.evaluate({zoom:Math.floor(da.zoom)-1},pa,wa),R.evaluate({zoom:Math.floor(da.zoom)},pa,wa),R.evaluate({zoom:Math.floor(da.zoom)+1},pa,wa),da):R.value},E.prototype._calculate=function(R,da,pa,wa){return wa.zoom>wa.zoomHistory.lastIntegerZoom?{from:R,to:da}:{from:pa,to:da}},E.prototype.interpolate=function(R){return R},E}(Zd),th=
function(w){this.specification=w};th.prototype.possiblyEvaluate=function(w,E,R,da){if(void 0!==w.value)return"constant"===w.expression.kind?(w=w.expression.evaluate(E,null,{},R,da),this._calculate(w,w,w,E)):this._calculate(w.expression.evaluate(new Ke(Math.floor(E.zoom-1),E)),w.expression.evaluate(new Ke(Math.floor(E.zoom),E)),w.expression.evaluate(new Ke(Math.floor(E.zoom+1),E)),E)};th.prototype._calculate=function(w,E,R,da){return da.zoom>da.zoomHistory.lastIntegerZoom?{from:w,to:E}:{from:R,to:E}};
th.prototype.interpolate=function(w){return w};var Wi=function(w){this.specification=w};Wi.prototype.possiblyEvaluate=function(w,E,R,da){return!!w.expression.evaluate(E,null,{},R,da)};Wi.prototype.interpolate=function(){return!1};var Pf=function(w){for(var E in this.properties=w,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],w){var R=w[E];R.specification.overridable&&
this.overridableProperties.push(E);var da=this.defaultPropertyValues[E]=new $h(R,void 0);R=this.defaultTransitionablePropertyValues[E]=new sj(R);this.defaultTransitioningPropertyValues[E]=R.untransitioned();this.defaultPossiblyEvaluatedValues[E]=da.possiblyEvaluate({})}};Bc("DataDrivenProperty",Zd);Bc("DataConstantProperty",xd);Bc("CrossFadedDataDrivenProperty",tj);Bc("CrossFadedProperty",th);Bc("ColorRampProperty",Wi);var og=function(w){function E(R,da){if(w.call(this),this.id=R.id,this.type=R.type,
this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==R.type&&(this.metadata=R.metadata,this.minzoom=R.minzoom,this.maxzoom=R.maxzoom,"background"!==R.type&&(this.source=R.source,this.sourceLayer=R["source-layer"],this.filter=R.filter),da.layout&&(this._unevaluatedLayout=new ff(da.layout)),da.paint)){for(var pa in this._transitionablePaint=new Mg(da.paint),R.paint)this.setPaintProperty(pa,R.paint[pa],{validate:!1});for(var wa in R.layout)this.setLayoutProperty(wa,R.layout[wa],
{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned();this.paint=new Gi(da.paint)}}return w&&(E.__proto__=w),(E.prototype=Object.create(w&&w.prototype)).constructor=E,E.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},E.prototype.getLayoutProperty=function(R){return"visibility"===R?this.visibility:this._unevaluatedLayout.getValue(R)},E.prototype.setLayoutProperty=function(R,da,pa){void 0===pa&&(pa={});null!=da&&this._validate(Zj,"layers."+
this.id+".layout."+R,R,da,pa)||("visibility"!==R?this._unevaluatedLayout.setValue(R,da):this.visibility=da)},E.prototype.getPaintProperty=function(R){return v(R,"-transition")?this._transitionablePaint.getTransition(R.slice(0,-11)):this._transitionablePaint.getValue(R)},E.prototype.setPaintProperty=function(R,da,pa){if(void 0===pa&&(pa={}),null!=da&&this._validate(Wk,"layers."+this.id+".paint."+R,R,da,pa))return!1;if(v(R,"-transition"))return this._transitionablePaint.setTransition(R.slice(0,-11),
da||void 0),!1;var wa=this._transitionablePaint._values[R];pa="cross-faded-data-driven"===wa.property.specification["property-type"];var Ea=wa.value.isDataDriven();wa=wa.value;this._transitionablePaint.setValue(R,da);this._handleSpecialPaintPropertyUpdate(R);da=this._transitionablePaint._values[R].value;return da.isDataDriven()||Ea||pa||this._handleOverridablePaintPropertyUpdate(R,wa,da)},E.prototype._handleSpecialPaintPropertyUpdate=function(R){},E.prototype._handleOverridablePaintPropertyUpdate=
function(R,da,pa){return!1},E.prototype.isHidden=function(R){return!!(this.minzoom&&R<this.minzoom)||!!(this.maxzoom&&R>=this.maxzoom)||"none"===this.visibility},E.prototype.updateTransitions=function(R){this._transitioningPaint=this._transitionablePaint.transitioned(R,this._transitioningPaint)},E.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},E.prototype.recalculate=function(R,da){R.getCrossfadeParameters&&(this._crossfadeParameters=R.getCrossfadeParameters());
this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(R,void 0,da));this.paint=this._transitioningPaint.possiblyEvaluate(R,void 0,da)},E.prototype.serialize=function(){var R={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};
return this.visibility&&(R.layout=R.layout||{},R.layout.visibility=this.visibility),C(R,function(da,pa){return!(void 0===da||"layout"===pa&&!Object.keys(da).length||"paint"===pa&&!Object.keys(da).length)})},E.prototype._validate=function(R,da,pa,wa,Ea){return void 0===Ea&&(Ea={}),(!Ea||!1!==Ea.validate)&&ad(this,R.call(Zc,{key:da,layerType:this.type,objectKey:pa,value:wa,styleSpec:Cb,style:{glyphs:!0,sprite:!0}}))},E.prototype.is3D=function(){return!1},E.prototype.isTileClipped=function(){return!1},
E.prototype.hasOffscreenPass=function(){return!1},E.prototype.resize=function(){},E.prototype.isStateDependent=function(){for(var R in this.paint._values){var da=this.paint.get(R);if(da instanceof lf&&Da(da.property.specification)&&("source"===da.value.kind||"composite"===da.value.kind)&&da.value.isStateDependent)return!0}return!1},E}(gc),ai={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Jf=function(w,E){this._structArray=
w;this._pos1=E*this.size;this._pos2=this._pos1/2;this._pos4=this._pos1/4;this._pos8=this._pos1/8},Ee=function(){this.isTransferred=!1;this.capacity=-1;this.resize(0)};Ee.serialize=function(w,E){return w._trim(),E&&(w.isTransferred=!0,E.push(w.arrayBuffer)),{length:w.length,arrayBuffer:w.arrayBuffer}};Ee.deserialize=function(w){var E=Object.create(this.prototype);return E.arrayBuffer=w.arrayBuffer,E.length=w.length,E.capacity=w.arrayBuffer.byteLength/E.bytesPerElement,E._refreshViews(),E};Ee.prototype._trim=
function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())};Ee.prototype.clear=function(){this.length=0};Ee.prototype.resize=function(w){this.reserve(w);this.length=w};Ee.prototype.reserve=function(w){w>this.capacity&&(this.capacity=Math.max(w,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement),w=this.uint8,this._refreshViews(),w&&this.uint8.set(w))};
Ee.prototype._refreshViews=function(){throw Error("_refreshViews() must be implemented by each concrete StructArray layout");};var wh=function(w){function E(){w.apply(this,arguments)}return w&&(E.__proto__=w),(E.prototype=Object.create(w&&w.prototype)).constructor=E,E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},E.prototype.emplaceBack=function(R,da){var pa=this.length;return this.resize(pa+1),this.emplace(pa,R,da)},E.prototype.emplace=
function(R,da,pa){var wa=2*R;return this.int16[wa+0]=da,this.int16[wa+1]=pa,R},E}(Ee);wh.prototype.bytesPerElement=4;Bc("StructArrayLayout2i4",wh);var eh=function(w){function E(){w.apply(this,arguments)}return w&&(E.__proto__=w),(E.prototype=Object.create(w&&w.prototype)).constructor=E,E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},E.prototype.emplaceBack=function(R,da,pa,wa){var Ea=this.length;return this.resize(Ea+1),
this.emplace(Ea,R,da,pa,wa)},E.prototype.emplace=function(R,da,pa,wa,Ea){var Ma=4*R;return this.int16[Ma+0]=da,this.int16[Ma+1]=pa,this.int16[Ma+2]=wa,this.int16[Ma+3]=Ea,R},E}(Ee);eh.prototype.bytesPerElement=8;Bc("StructArrayLayout4i8",eh);var fh=function(w){function E(){w.apply(this,arguments)}return w&&(E.__proto__=w),(E.prototype=Object.create(w&&w.prototype)).constructor=E,E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},
E.prototype.emplaceBack=function(R,da,pa,wa,Ea,Ma){var Wa=this.length;return this.resize(Wa+1),this.emplace(Wa,R,da,pa,wa,Ea,Ma)},E.prototype.emplace=function(R,da,pa,wa,Ea,Ma,Wa){var cb=6*R;return this.int16[cb+0]=da,this.int16[cb+1]=pa,this.int16[cb+2]=wa,this.int16[cb+3]=Ea,this.int16[cb+4]=Ma,this.int16[cb+5]=Wa,R},E}(Ee);fh.prototype.bytesPerElement=12;Bc("StructArrayLayout2i4i12",fh);var Dg=function(w){function E(){w.apply(this,arguments)}return w&&(E.__proto__=w),(E.prototype=Object.create(w&&
w.prototype)).constructor=E,E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},E.prototype.emplaceBack=function(R,da,pa,wa,Ea,Ma){var Wa=this.length;return this.resize(Wa+1),this.emplace(Wa,R,da,pa,wa,Ea,Ma)},E.prototype.emplace=function(R,da,pa,wa,Ea,Ma,Wa){var cb=4*R,pb=8*R;return this.int16[cb+0]=da,this.int16[cb+1]=pa,this.uint8[pb+4]=wa,this.uint8[pb+5]=Ea,this.uint8[pb+6]=Ma,this.uint8[pb+7]=Wa,R},E}(Ee);Dg.prototype.bytesPerElement=
8;Bc("StructArrayLayout2i4ub8",Dg);var Qf=function(w){function E(){w.apply(this,arguments)}return w&&(E.__proto__=w),(E.prototype=Object.create(w&&w.prototype)).constructor=E,E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},E.prototype.emplaceBack=function(R,da,pa,wa,Ea,Ma,Wa,cb,pb,yb){var Kb=this.length;return this.resize(Kb+1),this.emplace(Kb,R,da,pa,wa,Ea,Ma,Wa,cb,pb,yb)},E.prototype.emplace=function(R,da,pa,wa,Ea,Ma,
Wa,cb,pb,yb,Kb){var Hb=9*R,Tb=18*R;return this.uint16[Hb+0]=da,this.uint16[Hb+1]=pa,this.uint16[Hb+2]=wa,this.uint16[Hb+3]=Ea,this.uint16[Hb+4]=Ma,this.uint16[Hb+5]=Wa,this.uint16[Hb+6]=cb,this.uint16[Hb+7]=pb,this.uint8[Tb+16]=yb,this.uint8[Tb+17]=Kb,R},E}(Ee);Qf.prototype.bytesPerElement=18;Bc("StructArrayLayout8ui2ub18",Qf);var Ng=function(w){function E(){w.apply(this,arguments)}return w&&(E.__proto__=w),(E.prototype=Object.create(w&&w.prototype)).constructor=E,E.prototype._refreshViews=function(){this.uint8=
new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},E.prototype.emplaceBack=function(R,da,pa,wa,Ea,Ma,Wa,cb,pb,yb,Kb,Hb){var Tb=this.length;return this.resize(Tb+1),this.emplace(Tb,R,da,pa,wa,Ea,Ma,Wa,cb,pb,yb,Kb,Hb)},E.prototype.emplace=function(R,da,pa,wa,Ea,Ma,Wa,cb,pb,yb,Kb,Hb,Tb){var Sb=12*R;return this.int16[Sb+0]=da,this.int16[Sb+1]=pa,this.int16[Sb+2]=wa,this.int16[Sb+3]=Ea,this.uint16[Sb+4]=Ma,this.uint16[Sb+5]=Wa,this.uint16[Sb+
6]=cb,this.uint16[Sb+7]=pb,this.int16[Sb+8]=yb,this.int16[Sb+9]=Kb,this.int16[Sb+10]=Hb,this.int16[Sb+11]=Tb,R},E}(Ee);Ng.prototype.bytesPerElement=24;Bc("StructArrayLayout4i4ui4i24",Ng);var sg=function(w){function E(){w.apply(this,arguments)}return w&&(E.__proto__=w),(E.prototype=Object.create(w&&w.prototype)).constructor=E,E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},E.prototype.emplaceBack=function(R,da,pa){var wa=
this.length;return this.resize(wa+1),this.emplace(wa,R,da,pa)},E.prototype.emplace=function(R,da,pa,wa){var Ea=3*R;return this.float32[Ea+0]=da,this.float32[Ea+1]=pa,this.float32[Ea+2]=wa,R},E}(Ee);sg.prototype.bytesPerElement=12;Bc("StructArrayLayout3f12",sg);var xh=function(w){function E(){w.apply(this,arguments)}return w&&(E.__proto__=w),(E.prototype=Object.create(w&&w.prototype)).constructor=E,E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint32=new Uint32Array(this.arrayBuffer)},
E.prototype.emplaceBack=function(R){var da=this.length;return this.resize(da+1),this.emplace(da,R)},E.prototype.emplace=function(R,da){return this.uint32[1*R]=da,R},E}(Ee);xh.prototype.bytesPerElement=4;Bc("StructArrayLayout1ul4",xh);var yh=function(w){function E(){w.apply(this,arguments)}return w&&(E.__proto__=w),(E.prototype=Object.create(w&&w.prototype)).constructor=E,E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer);this.uint32=
new Uint32Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},E.prototype.emplaceBack=function(R,da,pa,wa,Ea,Ma,Wa,cb,pb){var yb=this.length;return this.resize(yb+1),this.emplace(yb,R,da,pa,wa,Ea,Ma,Wa,cb,pb)},E.prototype.emplace=function(R,da,pa,wa,Ea,Ma,Wa,cb,pb,yb){var Kb=10*R;return this.int16[Kb+0]=da,this.int16[Kb+1]=pa,this.int16[Kb+2]=wa,this.int16[Kb+3]=Ea,this.int16[Kb+4]=Ma,this.int16[Kb+5]=Wa,this.uint32[5*R+3]=cb,this.uint16[Kb+8]=pb,this.uint16[Kb+9]=yb,R},E}(Ee);
yh.prototype.bytesPerElement=20;Bc("StructArrayLayout6i1ul2ui20",yh);var Eg=function(w){function E(){w.apply(this,arguments)}return w&&(E.__proto__=w),(E.prototype=Object.create(w&&w.prototype)).constructor=E,E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},E.prototype.emplaceBack=function(R,da,pa,wa,Ea,Ma){var Wa=this.length;return this.resize(Wa+1),this.emplace(Wa,R,da,pa,wa,Ea,Ma)},E.prototype.emplace=function(R,da,pa,
wa,Ea,Ma,Wa){var cb=6*R;return this.int16[cb+0]=da,this.int16[cb+1]=pa,this.int16[cb+2]=wa,this.int16[cb+3]=Ea,this.int16[cb+4]=Ma,this.int16[cb+5]=Wa,R},E}(Ee);Eg.prototype.bytesPerElement=12;Bc("StructArrayLayout2i2i2i12",Eg);var gg=function(w){function E(){w.apply(this,arguments)}return w&&(E.__proto__=w),(E.prototype=Object.create(w&&w.prototype)).constructor=E,E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer);this.int16=
new Int16Array(this.arrayBuffer)},E.prototype.emplaceBack=function(R,da,pa,wa,Ea){var Ma=this.length;return this.resize(Ma+1),this.emplace(Ma,R,da,pa,wa,Ea)},E.prototype.emplace=function(R,da,pa,wa,Ea,Ma){var Wa=4*R,cb=8*R;return this.float32[Wa+0]=da,this.float32[Wa+1]=pa,this.float32[Wa+2]=wa,this.int16[cb+6]=Ea,this.int16[cb+7]=Ma,R},E}(Ee);gg.prototype.bytesPerElement=16;Bc("StructArrayLayout2f1f2i16",gg);var Kj=function(w){function E(){w.apply(this,arguments)}return w&&(E.__proto__=w),(E.prototype=
Object.create(w&&w.prototype)).constructor=E,E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},E.prototype.emplaceBack=function(R,da,pa,wa){var Ea=this.length;return this.resize(Ea+1),this.emplace(Ea,R,da,pa,wa)},E.prototype.emplace=function(R,da,pa,wa,Ea){var Ma=12*R,Wa=3*R;return this.uint8[Ma+0]=da,this.uint8[Ma+1]=pa,this.float32[Wa+1]=wa,this.float32[Wa+2]=Ea,R},E}(Ee);Kj.prototype.bytesPerElement=12;Bc("StructArrayLayout2ub2f12",
Kj);var $g=function(w){function E(){w.apply(this,arguments)}return w&&(E.__proto__=w),(E.prototype=Object.create(w&&w.prototype)).constructor=E,E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},E.prototype.emplaceBack=function(R,da,pa){var wa=this.length;return this.resize(wa+1),this.emplace(wa,R,da,pa)},E.prototype.emplace=function(R,da,pa,wa){var Ea=3*R;return this.uint16[Ea+0]=da,this.uint16[Ea+1]=pa,this.uint16[Ea+2]=
wa,R},E}(Ee);$g.prototype.bytesPerElement=6;Bc("StructArrayLayout3ui6",$g);var gj=function(w){function E(){w.apply(this,arguments)}return w&&(E.__proto__=w),(E.prototype=Object.create(w&&w.prototype)).constructor=E,E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer);this.uint32=new Uint32Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},E.prototype.emplaceBack=
function(R,da,pa,wa,Ea,Ma,Wa,cb,pb,yb,Kb,Hb,Tb,Sb,qc,bd,ed){var Oc=this.length;return this.resize(Oc+1),this.emplace(Oc,R,da,pa,wa,Ea,Ma,Wa,cb,pb,yb,Kb,Hb,Tb,Sb,qc,bd,ed)},E.prototype.emplace=function(R,da,pa,wa,Ea,Ma,Wa,cb,pb,yb,Kb,Hb,Tb,Sb,qc,bd,ed,Oc){var rd=24*R,pd=12*R,wd=48*R;return this.int16[rd+0]=da,this.int16[rd+1]=pa,this.uint16[rd+2]=wa,this.uint16[rd+3]=Ea,this.uint32[pd+2]=Ma,this.uint32[pd+3]=Wa,this.uint32[pd+4]=cb,this.uint16[rd+10]=pb,this.uint16[rd+11]=yb,this.uint16[rd+12]=Kb,
this.float32[pd+7]=Hb,this.float32[pd+8]=Tb,this.uint8[wd+36]=Sb,this.uint8[wd+37]=qc,this.uint8[wd+38]=bd,this.uint32[pd+10]=ed,this.int16[rd+22]=Oc,R},E}(Ee);gj.prototype.bytesPerElement=48;Bc("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",gj);var Og=function(w){function E(){w.apply(this,arguments)}return w&&(E.__proto__=w),(E.prototype=Object.create(w&&w.prototype)).constructor=E,E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer);
this.uint16=new Uint16Array(this.arrayBuffer);this.uint32=new Uint32Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},E.prototype.emplaceBack=function(R,da,pa,wa,Ea,Ma,Wa,cb,pb,yb,Kb,Hb,Tb,Sb,qc,bd,ed,Oc,rd,pd,wd,Gd,Od,Ud,Vd,Kd,Qd,je){var Hd=this.length;return this.resize(Hd+1),this.emplace(Hd,R,da,pa,wa,Ea,Ma,Wa,cb,pb,yb,Kb,Hb,Tb,Sb,qc,bd,ed,Oc,rd,pd,wd,Gd,Od,Ud,Vd,Kd,Qd,je)},E.prototype.emplace=function(R,da,pa,wa,Ea,Ma,Wa,cb,pb,yb,Kb,Hb,Tb,Sb,qc,bd,ed,Oc,rd,pd,wd,Gd,Od,Ud,
Vd,Kd,Qd,je,Hd){var Ad=34*R,Id=17*R;return this.int16[Ad+0]=da,this.int16[Ad+1]=pa,this.int16[Ad+2]=wa,this.int16[Ad+3]=Ea,this.int16[Ad+4]=Ma,this.int16[Ad+5]=Wa,this.int16[Ad+6]=cb,this.int16[Ad+7]=pb,this.uint16[Ad+8]=yb,this.uint16[Ad+9]=Kb,this.uint16[Ad+10]=Hb,this.uint16[Ad+11]=Tb,this.uint16[Ad+12]=Sb,this.uint16[Ad+13]=qc,this.uint16[Ad+14]=bd,this.uint16[Ad+15]=ed,this.uint16[Ad+16]=Oc,this.uint16[Ad+17]=rd,this.uint16[Ad+18]=pd,this.uint16[Ad+19]=wd,this.uint16[Ad+20]=Gd,this.uint16[Ad+
21]=Od,this.uint16[Ad+22]=Ud,this.uint32[Id+12]=Vd,this.float32[Id+13]=Kd,this.float32[Id+14]=Qd,this.float32[Id+15]=je,this.float32[Id+16]=Hd,R},E}(Ee);Og.prototype.bytesPerElement=68;Bc("StructArrayLayout8i15ui1ul4f68",Og);var ui=function(w){function E(){w.apply(this,arguments)}return w&&(E.__proto__=w),(E.prototype=Object.create(w&&w.prototype)).constructor=E,E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},E.prototype.emplaceBack=
function(R){var da=this.length;return this.resize(da+1),this.emplace(da,R)},E.prototype.emplace=function(R,da){return this.float32[1*R]=da,R},E}(Ee);ui.prototype.bytesPerElement=4;Bc("StructArrayLayout1f4",ui);var Xi=function(w){function E(){w.apply(this,arguments)}return w&&(E.__proto__=w),(E.prototype=Object.create(w&&w.prototype)).constructor=E,E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},E.prototype.emplaceBack=function(R,
da,pa){var wa=this.length;return this.resize(wa+1),this.emplace(wa,R,da,pa)},E.prototype.emplace=function(R,da,pa,wa){var Ea=3*R;return this.int16[Ea+0]=da,this.int16[Ea+1]=pa,this.int16[Ea+2]=wa,R},E}(Ee);Xi.prototype.bytesPerElement=6;Bc("StructArrayLayout3i6",Xi);var Yi=function(w){function E(){w.apply(this,arguments)}return w&&(E.__proto__=w),(E.prototype=Object.create(w&&w.prototype)).constructor=E,E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint32=new Uint32Array(this.arrayBuffer);
this.uint16=new Uint16Array(this.arrayBuffer)},E.prototype.emplaceBack=function(R,da,pa){var wa=this.length;return this.resize(wa+1),this.emplace(wa,R,da,pa)},E.prototype.emplace=function(R,da,pa,wa){var Ea=4*R;return this.uint32[2*R]=da,this.uint16[Ea+2]=pa,this.uint16[Ea+3]=wa,R},E}(Ee);Yi.prototype.bytesPerElement=8;Bc("StructArrayLayout1ul2ui8",Yi);var Uh=function(w){function E(){w.apply(this,arguments)}return w&&(E.__proto__=w),(E.prototype=Object.create(w&&w.prototype)).constructor=E,E.prototype._refreshViews=
function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},E.prototype.emplaceBack=function(R,da){var pa=this.length;return this.resize(pa+1),this.emplace(pa,R,da)},E.prototype.emplace=function(R,da,pa){var wa=2*R;return this.uint16[wa+0]=da,this.uint16[wa+1]=pa,R},E}(Ee);Uh.prototype.bytesPerElement=4;Bc("StructArrayLayout2ui4",Uh);var Ak=function(w){function E(){w.apply(this,arguments)}return w&&(E.__proto__=w),(E.prototype=Object.create(w&&w.prototype)).constructor=
E,E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},E.prototype.emplaceBack=function(R){var da=this.length;return this.resize(da+1),this.emplace(da,R)},E.prototype.emplace=function(R,da){return this.uint16[1*R]=da,R},E}(Ee);Ak.prototype.bytesPerElement=2;Bc("StructArrayLayout1ui2",Ak);var ag=function(w){function E(){w.apply(this,arguments)}return w&&(E.__proto__=w),(E.prototype=Object.create(w&&w.prototype)).constructor=
E,E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},E.prototype.emplaceBack=function(R,da){var pa=this.length;return this.resize(pa+1),this.emplace(pa,R,da)},E.prototype.emplace=function(R,da,pa){var wa=2*R;return this.float32[wa+0]=da,this.float32[wa+1]=pa,R},E}(Ee);ag.prototype.bytesPerElement=8;Bc("StructArrayLayout2f8",ag);var uj=function(w){function E(){w.apply(this,arguments)}return w&&(E.__proto__=w),(E.prototype=
Object.create(w&&w.prototype)).constructor=E,E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},E.prototype.emplaceBack=function(R,da,pa,wa){var Ea=this.length;return this.resize(Ea+1),this.emplace(Ea,R,da,pa,wa)},E.prototype.emplace=function(R,da,pa,wa,Ea){var Ma=4*R;return this.float32[Ma+0]=da,this.float32[Ma+1]=pa,this.float32[Ma+2]=wa,this.float32[Ma+3]=Ea,R},E}(Ee);uj.prototype.bytesPerElement=16;Bc("StructArrayLayout4f16",
uj);var vi=function(w){function E(){w.apply(this,arguments)}w&&(E.__proto__=w);(E.prototype=Object.create(w&&w.prototype)).constructor=E;var R={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return R.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},R.anchorPointY.get=
function(){return this._structArray.int16[this._pos2+1]},R.x1.get=function(){return this._structArray.int16[this._pos2+2]},R.y1.get=function(){return this._structArray.int16[this._pos2+3]},R.x2.get=function(){return this._structArray.int16[this._pos2+4]},R.y2.get=function(){return this._structArray.int16[this._pos2+5]},R.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},R.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},R.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+
9]},R.anchorPoint.get=function(){return new Md(this.anchorPointX,this.anchorPointY)},Object.defineProperties(E.prototype,R),E}(Jf);vi.prototype.size=20;var ak=function(w){function E(){w.apply(this,arguments)}return w&&(E.__proto__=w),(E.prototype=Object.create(w&&w.prototype)).constructor=E,E.prototype.get=function(R){return new vi(this,R)},E}(yh);Bc("CollisionBoxArray",ak);var Bk=function(w){function E(){w.apply(this,arguments)}w&&(E.__proto__=w);(E.prototype=Object.create(w&&w.prototype)).constructor=
E;var R={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};
return R.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},R.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},R.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},R.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},R.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},R.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},R.lineLength.get=function(){return this._structArray.uint32[this._pos4+
4]},R.segment.get=function(){return this._structArray.uint16[this._pos2+10]},R.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},R.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},R.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},R.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},R.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},R.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+
37]},R.placedOrientation.set=function(da){this._structArray.uint8[this._pos1+37]=da},R.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},R.hidden.set=function(da){this._structArray.uint8[this._pos1+38]=da},R.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},R.crossTileID.set=function(da){this._structArray.uint32[this._pos4+10]=da},R.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(E.prototype,R),E}(Jf);
Bk.prototype.size=48;var Ck=function(w){function E(){w.apply(this,arguments)}return w&&(E.__proto__=w),(E.prototype=Object.create(w&&w.prototype)).constructor=E,E.prototype.get=function(R){return new Bk(this,R)},E}(gj);Bc("PlacedSymbolArray",Ck);var Dk=function(w){function E(){w.apply(this,arguments)}w&&(E.__proto__=w);(E.prototype=Object.create(w&&w.prototype)).constructor=E;var R={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},
leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},
featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return R.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},R.anchorY.get=function(){return this._structArray.int16[this._pos2+
1]},R.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},R.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},R.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},R.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},R.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},R.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+
7]},R.key.get=function(){return this._structArray.uint16[this._pos2+8]},R.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},R.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},R.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},R.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},R.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},R.iconBoxEndIndex.get=
function(){return this._structArray.uint16[this._pos2+14]},R.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},R.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},R.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},R.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},R.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},R.numIconVertices.get=
function(){return this._structArray.uint16[this._pos2+20]},R.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},R.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},R.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},R.crossTileID.set=function(da){this._structArray.uint32[this._pos4+12]=da},R.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},R.textOffset0.get=function(){return this._structArray.float32[this._pos4+
14]},R.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},R.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(E.prototype,R),E}(Jf);Dk.prototype.size=68;var Ek=function(w){function E(){w.apply(this,arguments)}return w&&(E.__proto__=w),(E.prototype=Object.create(w&&w.prototype)).constructor=E,E.prototype.get=function(R){return new Dk(this,R)},E}(Og);Bc("SymbolInstanceArray",Ek);var vj=function(w){function E(){w.apply(this,
arguments)}return w&&(E.__proto__=w),(E.prototype=Object.create(w&&w.prototype)).constructor=E,E.prototype.getoffsetX=function(R){return this.float32[1*R]},E}(ui);Bc("GlyphOffsetArray",vj);var fi=function(w){function E(){w.apply(this,arguments)}return w&&(E.__proto__=w),(E.prototype=Object.create(w&&w.prototype)).constructor=E,E.prototype.getx=function(R){return this.int16[3*R]},E.prototype.gety=function(R){return this.int16[3*R+1]},E.prototype.gettileUnitDistanceFromAnchor=function(R){return this.int16[3*
R+2]},E}(Xi);Bc("SymbolLineVertexArray",fi);var Dh=function(w){function E(){w.apply(this,arguments)}w&&(E.__proto__=w);(E.prototype=Object.create(w&&w.prototype)).constructor=E;var R={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return R.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},R.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},R.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+
3]},Object.defineProperties(E.prototype,R),E}(Jf);Dh.prototype.size=8;var di=function(w){function E(){w.apply(this,arguments)}return w&&(E.__proto__=w),(E.prototype=Object.create(w&&w.prototype)).constructor=E,E.prototype.get=function(R){return new Dh(this,R)},E}(Yi);Bc("FeatureIndexArray",di);var qk=Ld([{name:"a_pos",components:2,type:"Int16"}],4).members,ef=function(w){void 0===w&&(w=[]);this.segments=w};ef.prototype.prepareSegment=function(w,E,R,da){var pa=this.segments[this.segments.length-1];
return w>ef.MAX_VERTEX_ARRAY_LENGTH&&y("Max vertices per segment is "+ef.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+w),(!pa||pa.vertexLength+w>ef.MAX_VERTEX_ARRAY_LENGTH||pa.sortKey!==da)&&(pa={vertexOffset:E.length,primitiveOffset:R.length,vertexLength:0,primitiveLength:0},void 0!==da&&(pa.sortKey=da),this.segments.push(pa)),pa};ef.prototype.get=function(){return this.segments};ef.prototype.destroy=function(){for(var w=0,E=this.segments;w<E.length;w+=1){var R=E[w],da;for(da in R.vaos)R.vaos[da].destroy()}};
ef.simpleSegment=function(w,E,R,da){return new ef([{vertexOffset:w,primitiveOffset:E,vertexLength:R,primitiveLength:da,vaos:{},sortKey:0}])};ef.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1;Bc("SegmentVector",ef);var Ji=Ld([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]),rk=g(function(w){w.exports=function(E,R){var da,pa,wa;var Ea=E.length-(da=
3&E.length);for(wa=0;wa<Ea;){var Ma=255&E.charCodeAt(wa)|(255&E.charCodeAt(++wa))<<8|(255&E.charCodeAt(++wa))<<16|(255&E.charCodeAt(++wa))<<24;++wa;R=27492+(65535&(pa=5*(65535&(R=(R^=461845907*(65535&(Ma=(Ma=3432918353*(65535&Ma)+((3432918353*(Ma>>>16)&65535)<<16)&4294967295)<<15|Ma>>>17))+((461845907*(Ma>>>16)&65535)<<16)&4294967295)<<13|R>>>19))+((5*(R>>>16)&65535)<<16)&4294967295))+((58964+(pa>>>16)&65535)<<16)}switch(Ma=0,da){case 3:Ma^=(255&E.charCodeAt(wa+2))<<16;case 2:Ma^=(255&E.charCodeAt(wa+
1))<<8;case 1:R^=461845907*(65535&(Ma=(Ma=3432918353*(65535&(Ma^=255&E.charCodeAt(wa)))+((3432918353*(Ma>>>16)&65535)<<16)&4294967295)<<15|Ma>>>17))+((461845907*(Ma>>>16)&65535)<<16)&4294967295}return R^=E.length,R=2246822507*(65535&(R^=R>>>16))+((2246822507*(R>>>16)&65535)<<16)&4294967295,R=3266489909*(65535&(R^=R>>>13))+((3266489909*(R>>>16)&65535)<<16)&4294967295,(R^R>>>16)>>>0}}),bk=g(function(w){w.exports=function(E,R){var da=E.length;R^=da;for(var pa=0;4<=da;){var wa=1540483477*(65535&(wa=255&
E.charCodeAt(pa)|(255&E.charCodeAt(++pa))<<8|(255&E.charCodeAt(++pa))<<16|(255&E.charCodeAt(++pa))<<24))+((1540483477*(wa>>>16)&65535)<<16);R=1540483477*(65535&R)+((1540483477*(R>>>16)&65535)<<16)^(wa=1540483477*(65535&(wa^=wa>>>24))+((1540483477*(wa>>>16)&65535)<<16));da-=4;++pa}switch(da){case 3:R^=(255&E.charCodeAt(pa+2))<<16;case 2:R^=(255&E.charCodeAt(pa+1))<<8;case 1:R=1540483477*(65535&(R^=255&E.charCodeAt(pa)))+((1540483477*(R>>>16)&65535)<<16)}return R=1540483477*(65535&(R^=R>>>13))+((1540483477*
(R>>>16)&65535)<<16),(R^R>>>15)>>>0}}),ji=rk;ji.murmur3=rk;ji.murmur2=bk;var kh=function(){this.ids=[];this.positions=[];this.indexed=!1};kh.prototype.add=function(w,E,R,da){this.ids.push(Dd(w));this.positions.push(E,R,da)};kh.prototype.getPositions=function(w){w=Dd(w);for(var E=0,R=this.ids.length-1;E<R;){var da=E+R>>1;this.ids[da]>=w?R=da:E=da+1}for(R=[];this.ids[E]===w;)R.push({index:this.positions[3*E],start:this.positions[3*E+1],end:this.positions[3*E+2]}),E++;return R};kh.serialize=function(w,
E){var R=new Float64Array(w.ids);w=new Uint32Array(w.positions);return function Wa(pa,wa,Ea,Ma){for(;Ea<Ma;){for(var cb=pa[Ea+Ma>>1],pb=Ea-1,yb=Ma+1;;){do pb++;while(pa[pb]<cb);do yb--;while(pa[yb]>cb);if(pb>=yb)break;zd(pa,pb,yb);zd(wa,3*pb,3*yb);zd(wa,3*pb+1,3*yb+1);zd(wa,3*pb+2,3*yb+2)}yb-Ea<Ma-yb?(Wa(pa,wa,Ea,yb),Ea=yb+1):(Wa(pa,wa,yb+1,Ma),Ma=yb)}}(R,w,0,R.length-1),E&&E.push(R.buffer,w.buffer),{ids:R,positions:w}};kh.deserialize=function(w){var E=new kh;return E.ids=w.ids,E.positions=w.positions,
E.indexed=!0,E};var Xk=Math.pow(2,53)-1;Bc("FeaturePositionMap",kh);var wi=function(w,E){this.gl=w.gl;this.location=E},il=function(w){function E(R,da){w.call(this,R,da);this.current=0}return w&&(E.__proto__=w),(E.prototype=Object.create(w&&w.prototype)).constructor=E,E.prototype.set=function(R){this.current!==R&&(this.current=R,this.gl.uniform1i(this.location,R))},E}(wi),ck=function(w){function E(R,da){w.call(this,R,da);this.current=0}return w&&(E.__proto__=w),(E.prototype=Object.create(w&&w.prototype)).constructor=
E,E.prototype.set=function(R){this.current!==R&&(this.current=R,this.gl.uniform1f(this.location,R))},E}(wi),jl=function(w){function E(R,da){w.call(this,R,da);this.current=[0,0]}return w&&(E.__proto__=w),(E.prototype=Object.create(w&&w.prototype)).constructor=E,E.prototype.set=function(R){R[0]===this.current[0]&&R[1]===this.current[1]||(this.current=R,this.gl.uniform2f(this.location,R[0],R[1]))},E}(wi),kl=function(w){function E(R,da){w.call(this,R,da);this.current=[0,0,0]}return w&&(E.__proto__=w),
(E.prototype=Object.create(w&&w.prototype)).constructor=E,E.prototype.set=function(R){R[0]===this.current[0]&&R[1]===this.current[1]&&R[2]===this.current[2]||(this.current=R,this.gl.uniform3f(this.location,R[0],R[1],R[2]))},E}(wi),Yk=function(w){function E(R,da){w.call(this,R,da);this.current=[0,0,0,0]}return w&&(E.__proto__=w),(E.prototype=Object.create(w&&w.prototype)).constructor=E,E.prototype.set=function(R){R[0]===this.current[0]&&R[1]===this.current[1]&&R[2]===this.current[2]&&R[3]===this.current[3]||
(this.current=R,this.gl.uniform4f(this.location,R[0],R[1],R[2],R[3]))},E}(wi),Fk=function(w){function E(R,da){w.call(this,R,da);this.current=Nd.transparent}return w&&(E.__proto__=w),(E.prototype=Object.create(w&&w.prototype)).constructor=E,E.prototype.set=function(R){R.r===this.current.r&&R.g===this.current.g&&R.b===this.current.b&&R.a===this.current.a||(this.current=R,this.gl.uniform4f(this.location,R.r,R.g,R.b,R.a))},E}(wi),ll=new Float32Array(16),ml=function(w){function E(R,da){w.call(this,R,da);
this.current=ll}return w&&(E.__proto__=w),(E.prototype=Object.create(w&&w.prototype)).constructor=E,E.prototype.set=function(R){if(R[12]!==this.current[12]||R[0]!==this.current[0])return this.current=R,void this.gl.uniformMatrix4fv(this.location,!1,R);for(var da=1;16>da;da++)if(R[da]!==this.current[da]){this.current=R;this.gl.uniformMatrix4fv(this.location,!1,R);break}},E}(wi),Ri=function(w,E,R){this.value=w;this.uniformNames=E.map(function(da){return"u_"+da});this.type=R};Ri.prototype.setUniform=
function(w,E,R){w.set(R.constantOr(this.value))};Ri.prototype.getBinding=function(w,E,R){return"color"===this.type?new Fk(w,E):new ck(w,E)};var Ph=function(w,E){this.uniformNames=E.map(function(R){return"u_"+R});this.patternTo=this.patternFrom=null;this.pixelRatioTo=this.pixelRatioFrom=1};Ph.prototype.setConstantPatternPositions=function(w,E){this.pixelRatioFrom=E.pixelRatio;this.pixelRatioTo=w.pixelRatio;this.patternFrom=E.tlbr;this.patternTo=w.tlbr};Ph.prototype.setUniform=function(w,E,R,da){(E=
"u_pattern_to"===da?this.patternTo:"u_pattern_from"===da?this.patternFrom:"u_pixel_ratio_to"===da?this.pixelRatioTo:"u_pixel_ratio_from"===da?this.pixelRatioFrom:null)&&w.set(E)};Ph.prototype.getBinding=function(w,E,R){return"u_pattern"===R.substr(0,9)?new Yk(w,E):new ck(w,E)};var dg=function(w,E,R,da){this.expression=w;this.type=R;this.maxValue=0;this.paintVertexAttributes=E.map(function(pa){return{name:"a_"+pa,type:"Float32",components:"color"===R?2:1,offset:0}});this.paintVertexArray=new da};dg.prototype.populatePaintArray=
function(w,E,R,da,pa){R=this.paintVertexArray.length;E=this.expression.evaluate(new Ke(0),E,{},da,[],pa);this.paintVertexArray.resize(w);this._setPaintValue(R,w,E)};dg.prototype.updatePaintArray=function(w,E,R,da){R=this.expression.evaluate({zoom:0},R,da);this._setPaintValue(w,E,R)};dg.prototype._setPaintValue=function(w,E,R){if("color"===this.type)for(R=oe(R);w<E;w++)this.paintVertexArray.emplace(w,R[0],R[1]);else{for(;w<E;w++)this.paintVertexArray.emplace(w,R);this.maxValue=Math.max(this.maxValue,
Math.abs(R))}};dg.prototype.upload=function(w){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=w.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))};dg.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Lf=function(w,E,R,da,pa,wa){this.expression=w;this.uniformNames=
E.map(function(Ea){return"u_"+Ea+"_t"});this.type=R;this.useIntegerZoom=da;this.zoom=pa;this.maxValue=0;this.paintVertexAttributes=E.map(function(Ea){return{name:"a_"+Ea,type:"Float32",components:"color"===R?4:2,offset:0}});this.paintVertexArray=new wa};Lf.prototype.populatePaintArray=function(w,E,R,da,pa){R=this.expression.evaluate(new Ke(this.zoom),E,{},da,[],pa);E=this.expression.evaluate(new Ke(this.zoom+1),E,{},da,[],pa);da=this.paintVertexArray.length;this.paintVertexArray.resize(w);this._setPaintValue(da,
w,R,E)};Lf.prototype.updatePaintArray=function(w,E,R,da){var pa=this.expression.evaluate({zoom:this.zoom},R,da);R=this.expression.evaluate({zoom:this.zoom+1},R,da);this._setPaintValue(w,E,pa,R)};Lf.prototype._setPaintValue=function(w,E,R,da){if("color"===this.type)for(R=oe(R),da=oe(da);w<E;w++)this.paintVertexArray.emplace(w,R[0],R[1],da[0],da[1]);else{for(;w<E;w++)this.paintVertexArray.emplace(w,R,da);this.maxValue=Math.max(this.maxValue,Math.abs(R),Math.abs(da))}};Lf.prototype.upload=function(w){this.paintVertexArray&&
this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=w.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))};Lf.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};Lf.prototype.setUniform=function(w,E){E=c(this.expression.interpolationFactor(this.useIntegerZoom?Math.floor(E.zoom):E.zoom,this.zoom,this.zoom+
1),0,1);w.set(E)};Lf.prototype.getBinding=function(w,E,R){return new ck(w,E)};var zg=function(w,E,R,da,pa,wa){this.expression=w;this.type=E;this.useIntegerZoom=R;this.zoom=da;this.layerId=wa;this.zoomInPaintVertexArray=new pa;this.zoomOutPaintVertexArray=new pa};zg.prototype.populatePaintArray=function(w,E,R){var da=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(w);this.zoomOutPaintVertexArray.resize(w);this._setPaintValues(da,w,E.patterns&&E.patterns[this.layerId],R)};zg.prototype.updatePaintArray=
function(w,E,R,da,pa){this._setPaintValues(w,E,R.patterns&&R.patterns[this.layerId],pa)};zg.prototype._setPaintValues=function(w,E,R,da){if(da&&R){var pa=da[R.min],wa=da[R.mid];R=da[R.max];if(pa&&wa&&R)for(;w<E;w++)this.zoomInPaintVertexArray.emplace(w,wa.tl[0],wa.tl[1],wa.br[0],wa.br[1],pa.tl[0],pa.tl[1],pa.br[0],pa.br[1],wa.pixelRatio,pa.pixelRatio),this.zoomOutPaintVertexArray.emplace(w,wa.tl[0],wa.tl[1],wa.br[0],wa.br[1],R.tl[0],R.tl[1],R.br[0],R.br[1],wa.pixelRatio,R.pixelRatio)}};zg.prototype.upload=
function(w){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=w.createVertexBuffer(this.zoomInPaintVertexArray,Ji.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=w.createVertexBuffer(this.zoomOutPaintVertexArray,Ji.members,this.expression.isStateDependent))};zg.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy();
this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var pg=function(w,E,R,da){this.binders={};this.layoutAttributes=da;this._buffers=[];da=[];for(var pa in w.paint._values)if(R(pa)){var wa=w.paint.get(pa);if(wa instanceof lf&&Da(wa.property.specification)){var Ea={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],
"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[pa]||[pa.replace(w.type+"-","").replace(/-/g,"_")],Ma=wa.value,Wa=wa.property.specification.type,cb=wa.property.useIntegerZoom;wa=wa.property.specification["property-type"];
wa="cross-faded"===wa||"cross-faded-data-driven"===wa;if("constant"===Ma.kind)this.binders[pa]=wa?new Ph(Ma.value,Ea):new Ri(Ma.value,Ea,Wa),da.push("/u_"+pa);else if("source"===Ma.kind||wa){var pb=me(pa,Wa,"source");this.binders[pa]=wa?new zg(Ma,Wa,cb,E,pb,w.id):new dg(Ma,Ea,Wa,pb);da.push("/a_"+pa)}else wa=me(pa,Wa,"composite"),this.binders[pa]=new Lf(Ma,Ea,Wa,cb,E,wa),da.push("/z_"+pa)}}this.cacheKey=da.sort().join("")};pg.prototype.getMaxValue=function(w){w=this.binders[w];return w instanceof
dg||w instanceof Lf?w.maxValue:0};pg.prototype.populatePaintArrays=function(w,E,R,da,pa){for(var wa in this.binders){var Ea=this.binders[wa];(Ea instanceof dg||Ea instanceof Lf||Ea instanceof zg)&&Ea.populatePaintArray(w,E,R,da,pa)}};pg.prototype.setConstantPatternPositions=function(w,E){for(var R in this.binders){var da=this.binders[R];da instanceof Ph&&da.setConstantPatternPositions(w,E)}};pg.prototype.updatePaintArrays=function(w,E,R,da,pa){var wa=!1,Ea;for(Ea in w)for(var Ma=0,Wa=E.getPositions(Ea);Ma<
Wa.length;Ma+=1){var cb=Wa[Ma],pb=R.feature(cb.index),yb;for(yb in this.binders){var Kb=this.binders[yb];(Kb instanceof dg||Kb instanceof Lf||Kb instanceof zg)&&!0===Kb.expression.isStateDependent&&(wa=da.paint.get(yb),Kb.expression=wa.value,Kb.updatePaintArray(cb.start,cb.end,pb,w[Ea],pa),wa=!0)}}return wa};pg.prototype.defines=function(){var w=[],E;for(E in this.binders){var R=this.binders[E];(R instanceof Ri||R instanceof Ph)&&w.push.apply(w,R.uniformNames.map(function(da){return"#define HAS_UNIFORM_"+
da}))}return w};pg.prototype.getPaintVertexBuffers=function(){return this._buffers};pg.prototype.getUniforms=function(w,E){var R=[],da;for(da in this.binders){var pa=this.binders[da];if(pa instanceof Ri||pa instanceof Ph||pa instanceof Lf)for(var wa=0,Ea=pa.uniformNames;wa<Ea.length;wa+=1){var Ma=Ea[wa];if(E[Ma]){var Wa=pa.getBinding(w,E[Ma],Ma);R.push({name:Ma,property:da,binding:Wa})}}}return R};pg.prototype.setUniforms=function(w,E,R,da){for(w=0;w<E.length;w+=1){var pa=E[w],wa=pa.name,Ea=pa.property;
this.binders[Ea].setUniform(pa.binding,da,R.get(Ea),wa)}};pg.prototype.updatePaintBuffers=function(w){for(var E in this._buffers=[],this.binders){var R=this.binders[E];w&&R instanceof zg?(R=2===w.fromScale?R.zoomInPaintVertexBuffer:R.zoomOutPaintVertexBuffer)&&this._buffers.push(R):(R instanceof dg||R instanceof Lf)&&R.paintVertexBuffer&&this._buffers.push(R.paintVertexBuffer)}};pg.prototype.upload=function(w){for(var E in this.binders){var R=this.binders[E];(R instanceof dg||R instanceof Lf||R instanceof
zg)&&R.upload(w)}this.updatePaintBuffers()};pg.prototype.destroy=function(){for(var w in this.binders){var E=this.binders[w];(E instanceof dg||E instanceof Lf||E instanceof zg)&&E.destroy()}};var Ag=function(w,E,R,da){void 0===da&&(da=function(){return!0});this.programConfigurations={};for(var pa=0;pa<E.length;pa+=1){var wa=E[pa];this.programConfigurations[wa.id]=new pg(wa,R,da,w)}this.needsUpload=!1;this._featureMap=new kh;this._bufferOffset=0};Ag.prototype.populatePaintArrays=function(w,E,R,da,
pa,wa){for(var Ea in this.programConfigurations)this.programConfigurations[Ea].populatePaintArrays(w,E,da,pa,wa);void 0!==E.id&&this._featureMap.add(E.id,R,this._bufferOffset,w);this._bufferOffset=w;this.needsUpload=!0};Ag.prototype.updatePaintArrays=function(w,E,R,da){for(var pa=0;pa<R.length;pa+=1){var wa=R[pa];this.needsUpload=this.programConfigurations[wa.id].updatePaintArrays(w,this._featureMap,E,wa,da)||this.needsUpload}};Ag.prototype.get=function(w){return this.programConfigurations[w]};Ag.prototype.upload=
function(w){if(this.needsUpload){for(var E in this.programConfigurations)this.programConfigurations[E].upload(w);this.needsUpload=!1}};Ag.prototype.destroy=function(){for(var w in this.programConfigurations)this.programConfigurations[w].destroy()};Bc("ConstantBinder",Ri);Bc("CrossFadedConstantBinder",Ph);Bc("SourceExpressionBinder",dg);Bc("CrossFadedCompositeBinder",zg);Bc("CompositeExpressionBinder",Lf);Bc("ProgramConfiguration",pg,{omit:["_buffers"]});Bc("ProgramConfigurationSet",Ag);var Vh={min:-1*
Math.pow(2,14),max:Math.pow(2,14)-1},qg=function(w){this.zoom=w.zoom;this.overscaling=w.overscaling;this.layers=w.layers;this.layerIds=this.layers.map(function(E){return E.id});this.index=w.index;this.hasPattern=!1;this.layoutVertexArray=new wh;this.indexArray=new $g;this.segments=new ef;this.programConfigurations=new Ag(qk,w.layers,w.zoom);this.stateDependentLayerIds=this.layers.filter(function(E){return E.isStateDependent()}).map(function(E){return E.id})};qg.prototype.populate=function(w,E,R){var da=
this.layers[0],pa=[],wa=null;"circle"===da.type&&(wa=da.layout.get("circle-sort-key"));for(da=0;da<w.length;da+=1){var Ea=w[da],Ma=Ea.feature,Wa=Ea.id,cb=Ea.index;Ea=Ea.sourceLayerIndex;var pb=this.layers[0]._featureFilter.needGeometry,yb={type:Ma.type,id:Wa,properties:Ma.properties,geometry:pb?re(Ma):[]};this.layers[0]._featureFilter.filter(new Ke(this.zoom),yb,R)&&(pb||(yb.geometry=re(Ma)),pb=wa?wa.evaluate(yb,{},R):void 0,pa.push({id:Wa,properties:Ma.properties,type:Ma.type,sourceLayerIndex:Ea,
index:cb,geometry:yb.geometry,patterns:{},sortKey:pb}))}wa&&pa.sort(function(Kb,Hb){return Kb.sortKey-Hb.sortKey});for(wa=0;wa<pa.length;wa+=1)da=pa[wa],Ma=da.geometry,Wa=da.index,cb=da.sourceLayerIndex,Ea=w[Wa].feature,this.addFeature(da,Ma,Wa,R),E.featureIndex.insert(Ea,Ma,Wa,cb,this.index)};qg.prototype.update=function(w,E,R){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(w,E,this.stateDependentLayers,R)};qg.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length};
qg.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload};qg.prototype.upload=function(w){this.uploaded||(this.layoutVertexBuffer=w.createVertexBuffer(this.layoutVertexArray,qk),this.indexBuffer=w.createIndexBuffer(this.indexArray));this.programConfigurations.upload(w);this.uploaded=!0};qg.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())};
qg.prototype.addFeature=function(w,E,R,da){for(var pa=0;pa<E.length;pa+=1)for(var wa=0,Ea=E[pa];wa<Ea.length;wa+=1){var Ma=Ea[wa],Wa=Ma.x;Ma=Ma.y;if(!(0>Wa||8192<=Wa||0>Ma||8192<=Ma)){var cb=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,w.sortKey),pb=cb.vertexLength;Te(this.layoutVertexArray,Wa,Ma,-1,-1);Te(this.layoutVertexArray,Wa,Ma,1,-1);Te(this.layoutVertexArray,Wa,Ma,1,1);Te(this.layoutVertexArray,Wa,Ma,-1,1);this.indexArray.emplaceBack(pb,pb+1,pb+2);this.indexArray.emplaceBack(pb,
pb+3,pb+2);cb.vertexLength+=4;cb.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,w,R,{},da)};Bc("CircleBucket",qg,{omit:["layers"]});var xk=new Pf({"circle-sort-key":new Zd(Cb.layout_circle["circle-sort-key"])}),Uk={paint:new Pf({"circle-radius":new Zd(Cb.paint_circle["circle-radius"]),"circle-color":new Zd(Cb.paint_circle["circle-color"]),"circle-blur":new Zd(Cb.paint_circle["circle-blur"]),"circle-opacity":new Zd(Cb.paint_circle["circle-opacity"]),
"circle-translate":new xd(Cb.paint_circle["circle-translate"]),"circle-translate-anchor":new xd(Cb.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new xd(Cb.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new xd(Cb.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Zd(Cb.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Zd(Cb.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Zd(Cb.paint_circle["circle-stroke-opacity"])}),layout:xk},
Yf="undefined"!=typeof Float32Array?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var w=arguments,E=0,R=arguments.length;R--;)E+=w[R]*w[R];return Math.sqrt(E)});var Zg=new Yf(3);Yf!=Float32Array&&(Zg[0]=0,Zg[1]=0,Zg[2]=0);(function(){var w=new Yf(4);Yf!=Float32Array&&(w[0]=0,w[1]=0,w[2]=0,w[3]=0)})();var Zk=(function(){var w=new Yf(2);Yf!=Float32Array&&(w[0]=0,w[1]=0)}(),function(w){function E(R){w.call(this,R,Uk)}return w&&(E.__proto__=w),(E.prototype=Object.create(w&&w.prototype)).constructor=
E,E.prototype.createBucket=function(R){return new qg(R)},E.prototype.queryRadius=function(R){return Jd("circle-radius",this,R)+Jd("circle-stroke-width",this,R)+Td(this.paint.get("circle-translate"))},E.prototype.queryIntersectsFeature=function(R,da,pa,wa,Ea,Ma,Wa,cb){R=Fd(R,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),Ma.angle,Wa);Ea=this.paint.get("circle-radius").evaluate(da,pa)+this.paint.get("circle-stroke-width").evaluate(da,pa);pa=(da="map"===this.paint.get("circle-pitch-alignment"))?
R:function(Tb,Sb){return Tb.map(function(qc){return Ob(qc,Sb)})}(R,cb);Wa=da?Ea*Wa:Ea;for(R=0;R<wa.length;R+=1){Ea=0;for(var pb=wa[R];Ea<pb.length;Ea+=1){var yb=pb[Ea],Kb=da?yb:Ob(yb,cb),Hb=Wa;yb=ge([],[yb.x,yb.y,0,1],cb);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?Hb*=yb[3]/Ma.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(Hb*=Ma.cameraToCenterDistance/yb[3]),af(pa,
Kb,Hb))return!0}}return!1},E}(og)),wj=function(w){function E(){w.apply(this,arguments)}return w&&(E.__proto__=w),(E.prototype=Object.create(w&&w.prototype)).constructor=E,E}(qg);Bc("HeatmapBucket",wj,{omit:["layers"]});var Wh=function(w,E){hc(this,w,1,E)};Wh.prototype.resize=function(w){Cc(this,w,1)};Wh.prototype.clone=function(){return new Wh({width:this.width,height:this.height},new Uint8Array(this.data))};Wh.copy=function(w,E,R,da,pa){Sc(w,E,R,da,pa,1)};var wf=function(w,E){hc(this,w,4,E)};wf.prototype.resize=
function(w){Cc(this,w,4)};wf.prototype.replace=function(w,E){E?this.data.set(w):this.data=w instanceof Uint8ClampedArray?new Uint8Array(w.buffer):w};wf.prototype.clone=function(){return new wf({width:this.width,height:this.height},new Uint8Array(this.data))};wf.copy=function(w,E,R,da,pa){Sc(w,E,R,da,pa,4)};Bc("AlphaImage",Wh);Bc("RGBAImage",wf);var kf={paint:new Pf({"heatmap-radius":new Zd(Cb.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Zd(Cb.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new xd(Cb.paint_heatmap["heatmap-intensity"]),
"heatmap-color":new Wi(Cb.paint_heatmap["heatmap-color"]),"heatmap-opacity":new xd(Cb.paint_heatmap["heatmap-opacity"])})},$k=function(w){function E(R){w.call(this,R,kf);this._updateColorRamp()}return w&&(E.__proto__=w),(E.prototype=Object.create(w&&w.prototype)).constructor=E,E.prototype.createBucket=function(R){return new wj(R)},E.prototype._handleSpecialPaintPropertyUpdate=function(R){"heatmap-color"===R&&this._updateColorRamp()},E.prototype._updateColorRamp=function(){this.colorRamp=Ic(this._transitionablePaint._values["heatmap-color"].value.expression,
"heatmapDensity");this.colorRampTexture=null},E.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},E.prototype.queryRadius=function(){return 0},E.prototype.queryIntersectsFeature=function(){return!1},E.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},E}(og),ri={paint:new Pf({"hillshade-illumination-direction":new xd(Cb.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new xd(Cb.paint_hillshade["hillshade-illumination-anchor"]),
"hillshade-exaggeration":new xd(Cb.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new xd(Cb.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new xd(Cb.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new xd(Cb.paint_hillshade["hillshade-accent-color"])})},dk=function(w){function E(R){w.call(this,R,ri)}return w&&(E.__proto__=w),(E.prototype=Object.create(w&&w.prototype)).constructor=E,E.prototype.hasOffscreenPass=function(){return 0!==
this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},E}(og),Gk=Ld([{name:"a_pos",components:2,type:"Int16"}],4).members;Mc.deviation=function(w,E,R,da){var pa=E&&E.length,wa=Math.abs(hj(w,0,pa?E[0]*R:w.length,R));if(pa){pa=0;for(var Ea=E.length;pa<Ea;pa++)wa-=Math.abs(hj(w,E[pa]*R,pa<Ea-1?E[pa+1]*R:w.length,R))}for(pa=E=0;pa<da.length;pa+=3){Ea=da[pa]*R;var Ma=da[pa+1]*R,Wa=da[pa+2]*R;E+=Math.abs((w[Ea]-w[Wa])*(w[Ma+1]-w[Ea+1])-(w[Ea]-w[Ma])*(w[Wa+1]-w[Ea+1]))}return 0===wa&&0===E?
0:Math.abs((E-wa)/wa)};Mc.flatten=function(w){for(var E=w[0][0].length,R={vertices:[],holes:[],dimensions:E},da=0,pa=0;pa<w.length;pa++){for(var wa=0;wa<w[pa].length;wa++)for(var Ea=0;Ea<E;Ea++)R.vertices.push(w[pa][wa][Ea]);0<pa&&R.holes.push(da+=w[pa-1].length)}return R};Mc.default=Mc;var Kg=function(w){this.zoom=w.zoom;this.overscaling=w.overscaling;this.layers=w.layers;this.layerIds=this.layers.map(function(E){return E.id});this.index=w.index;this.hasPattern=!1;this.patternFeatures=[];this.layoutVertexArray=
new wh;this.indexArray=new $g;this.indexArray2=new Uh;this.programConfigurations=new Ag(Gk,w.layers,w.zoom);this.segments=new ef;this.segments2=new ef;this.stateDependentLayerIds=this.layers.filter(function(E){return E.isStateDependent()}).map(function(E){return E.id})};Kg.prototype.populate=function(w,E,R){this.hasPattern=ci("fill",this.layers,E);for(var da=this.layers[0].layout.get("fill-sort-key"),pa=[],wa=0;wa<w.length;wa+=1){var Ea=w[wa],Ma=Ea.feature,Wa=Ea.id,cb=Ea.index;Ea=Ea.sourceLayerIndex;
var pb=this.layers[0]._featureFilter.needGeometry,yb={type:Ma.type,id:Wa,properties:Ma.properties,geometry:pb?re(Ma):[]};this.layers[0]._featureFilter.filter(new Ke(this.zoom),yb,R)&&(pb||(yb.geometry=re(Ma)),pb=da?da.evaluate(yb,{},R,E.availableImages):void 0,pa.push({id:Wa,properties:Ma.properties,type:Ma.type,sourceLayerIndex:Ea,index:cb,geometry:yb.geometry,patterns:{},sortKey:pb}))}da&&pa.sort(function(Kb,Hb){return Kb.sortKey-Hb.sortKey});for(da=0;da<pa.length;da+=1)cb=pa[da],wa=cb.geometry,
Ma=cb.index,Wa=cb.sourceLayerIndex,this.hasPattern?(cb=Ii("fill",this.layers,cb,this.zoom,E),this.patternFeatures.push(cb)):this.addFeature(cb,wa,Ma,R,{}),E.featureIndex.insert(w[Ma].feature,wa,Ma,Wa,this.index)};Kg.prototype.update=function(w,E,R){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(w,E,this.stateDependentLayers,R)};Kg.prototype.addFeatures=function(w,E,R){w=0;for(var da=this.patternFeatures;w<da.length;w+=1){var pa=da[w];this.addFeature(pa,pa.geometry,
pa.index,E,R)}};Kg.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length};Kg.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload};Kg.prototype.upload=function(w){this.uploaded||(this.layoutVertexBuffer=w.createVertexBuffer(this.layoutVertexArray,Gk),this.indexBuffer=w.createIndexBuffer(this.indexArray),this.indexBuffer2=w.createIndexBuffer(this.indexArray2));this.programConfigurations.upload(w);this.uploaded=!0};Kg.prototype.destroy=function(){this.layoutVertexBuffer&&
(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())};Kg.prototype.addFeature=function(w,E,R,da,pa){var wa=0;for(E=jj(E,500);wa<E.length;wa+=1){for(var Ea=E[wa],Ma=0,Wa=0,cb=Ea;Wa<cb.length;Wa+=1)Ma+=cb[Wa].length;Wa=this.segments.prepareSegment(Ma,this.layoutVertexArray,this.indexArray);cb=Wa.vertexLength;for(var pb=[],yb=[],Kb=0,Hb=Ea;Kb<Hb.length;Kb+=1){var Tb=Hb[Kb];if(0!==
Tb.length){Tb!==Ea[0]&&yb.push(pb.length/2);var Sb=this.segments2.prepareSegment(Tb.length,this.layoutVertexArray,this.indexArray2),qc=Sb.vertexLength;this.layoutVertexArray.emplaceBack(Tb[0].x,Tb[0].y);this.indexArray2.emplaceBack(qc+Tb.length-1,qc);pb.push(Tb[0].x);pb.push(Tb[0].y);for(var bd=1;bd<Tb.length;bd++)this.layoutVertexArray.emplaceBack(Tb[bd].x,Tb[bd].y),this.indexArray2.emplaceBack(qc+bd-1,qc+bd),pb.push(Tb[bd].x),pb.push(Tb[bd].y);Sb.vertexLength+=Tb.length;Sb.primitiveLength+=Tb.length}}Ea=
Mc(pb,yb);for(pb=0;pb<Ea.length;pb+=3)this.indexArray.emplaceBack(cb+Ea[pb],cb+Ea[pb+1],cb+Ea[pb+2]);Wa.vertexLength+=Ma;Wa.primitiveLength+=Ea.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,w,R,pa,da)};Bc("FillBucket",Kg,{omit:["layers","patternFeatures"]});var nl=new Pf({"fill-sort-key":new Zd(Cb.layout_fill["fill-sort-key"])}),Hk={paint:new Pf({"fill-antialias":new xd(Cb.paint_fill["fill-antialias"]),"fill-opacity":new Zd(Cb.paint_fill["fill-opacity"]),"fill-color":new Zd(Cb.paint_fill["fill-color"]),
"fill-outline-color":new Zd(Cb.paint_fill["fill-outline-color"]),"fill-translate":new xd(Cb.paint_fill["fill-translate"]),"fill-translate-anchor":new xd(Cb.paint_fill["fill-translate-anchor"]),"fill-pattern":new tj(Cb.paint_fill["fill-pattern"])}),layout:nl},Ik=function(w){function E(R){w.call(this,R,Hk)}return w&&(E.__proto__=w),(E.prototype=Object.create(w&&w.prototype)).constructor=E,E.prototype.recalculate=function(R,da){w.prototype.recalculate.call(this,R,da);R=this.paint._values["fill-outline-color"];
"constant"===R.value.kind&&void 0===R.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},E.prototype.createBucket=function(R){return new Kg(R)},E.prototype.queryRadius=function(){return Td(this.paint.get("fill-translate"))},E.prototype.queryIntersectsFeature=function(R,da,pa,wa,Ea,Ma,Wa){return gf(Fd(R,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),Ma.angle,Wa),wa)},E.prototype.isTileClipped=function(){return!0},E}(og),Jk=Ld([{name:"a_pos",
components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members;Pg.types=["Unknown","Point","LineString","Polygon"];Pg.prototype.loadGeometry=function(){var w=this._pbf;w.pos=this._geometry;for(var E,R=w.readVarint()+w.pos,da=1,pa=0,wa=0,Ea=0,Ma=[];w.pos<R;)if(0>=pa&&(pa=w.readVarint(),da=7&pa,pa>>=3),pa--,1===da||2===da)wa+=w.readSVarint(),Ea+=w.readSVarint(),1===da&&(E&&Ma.push(E),E=[]),E.push(new Md(wa,Ea));else{if(7!==da)throw Error("unknown command "+da);E&&E.push(E[0].clone())}return E&&
Ma.push(E),Ma};Pg.prototype.bbox=function(){var w=this._pbf;w.pos=this._geometry;for(var E=w.readVarint()+w.pos,R=1,da=0,pa=0,wa=0,Ea=1/0,Ma=-1/0,Wa=1/0,cb=-1/0;w.pos<E;)if(0>=da&&(da=w.readVarint(),R=7&da,da>>=3),da--,1===R||2===R)(pa+=w.readSVarint())<Ea&&(Ea=pa),pa>Ma&&(Ma=pa),(wa+=w.readSVarint())<Wa&&(Wa=wa),wa>cb&&(cb=wa);else if(7!==R)throw Error("unknown command "+R);return[Ea,Wa,Ma,cb]};Pg.prototype.toGeoJSON=function(w,E,R){function da(Wa){for(var cb=0;cb<Wa.length;cb++){var pb=Wa[cb];Wa[cb]=
[360*(pb.x+wa)/pa-180,360/Math.PI*Math.atan(Math.exp((180-360*(pb.y+Ea)/pa)*Math.PI/180))-90]}}var pa=this.extent*Math.pow(2,R),wa=this.extent*w,Ea=this.extent*E;E=this.loadGeometry();R=Pg.types[this.type];switch(this.type){case 1:var Ma=[];for(w=0;w<E.length;w++)Ma[w]=E[w][0];da(E=Ma);break;case 2:for(w=0;w<E.length;w++)da(E[w]);break;case 3:for(E=function(Wa){var cb=Wa.length;if(1>=cb)return[Wa];for(var pb,yb,Kb=[],Hb=0;Hb<cb;Hb++){for(var Tb,Sb=Tb=void 0,qc=Wa[Hb],bd=0,ed=0,Oc=qc.length,rd=Oc-
1;ed<Oc;rd=ed++)bd+=((Tb=qc[rd]).x-(Sb=qc[ed]).x)*(Sb.y+Tb.y);Tb=bd;0!==Tb&&(void 0===yb&&(yb=0>Tb),yb===0>Tb?(pb&&Kb.push(pb),pb=[Wa[Hb]]):pb.push(Wa[Hb]))}return pb&&Kb.push(pb),Kb}(E),w=0;w<E.length;w++)for(Ma=0;Ma<E[w].length;Ma++)da(E[w][Ma])}1===E.length?E=E[0]:R="Multi"+R;w={type:"Feature",geometry:{type:R,coordinates:E},properties:this.properties};return"id"in this&&(w.id=this.id),w};var Kk=Oj;Oj.prototype.feature=function(w){if(0>w||w>=this._features.length)throw Error("feature index out of bounds");
this._pbf.pos=this._features[w];w=this._pbf.readVarint()+this._pbf.pos;return new Pg(this._pbf,w,this.extent,this._keys,this._values)};var rh={VectorTile:function(w,E){this.layers=w.readFields(zh,{},E)},VectorTileFeature:Pg,VectorTileLayer:Kk},Lk=rh.VectorTileFeature.types,Mk=Math.pow(2,13),Ig=function(w){this.zoom=w.zoom;this.overscaling=w.overscaling;this.layers=w.layers;this.layerIds=this.layers.map(function(E){return E.id});this.index=w.index;this.hasPattern=!1;this.layoutVertexArray=new fh;this.indexArray=
new $g;this.programConfigurations=new Ag(Jk,w.layers,w.zoom);this.segments=new ef;this.stateDependentLayerIds=this.layers.filter(function(E){return E.isStateDependent()}).map(function(E){return E.id})};Ig.prototype.populate=function(w,E,R){this.features=[];this.hasPattern=ci("fill-extrusion",this.layers,E);for(var da=0;da<w.length;da+=1){var pa=w[da],wa=pa.feature,Ea=pa.id,Ma=pa.index;pa=pa.sourceLayerIndex;var Wa=this.layers[0]._featureFilter.needGeometry,cb={type:wa.type,id:Ea,properties:wa.properties,
geometry:Wa?re(wa):[]};this.layers[0]._featureFilter.filter(new Ke(this.zoom),cb,R)&&(Ea={id:Ea,sourceLayerIndex:pa,index:Ma,geometry:Wa?cb.geometry:re(wa),properties:wa.properties,type:wa.type,patterns:{}},void 0!==wa.id&&(Ea.id=wa.id),this.hasPattern?this.features.push(Ii("fill-extrusion",this.layers,Ea,this.zoom,E)):this.addFeature(Ea,Ea.geometry,Ma,R,{}),E.featureIndex.insert(wa,Ea.geometry,Ma,pa,this.index,!0))}};Ig.prototype.addFeatures=function(w,E,R){w=0;for(var da=this.features;w<da.length;w+=
1){var pa=da[w];this.addFeature(pa,pa.geometry,pa.index,E,R)}};Ig.prototype.update=function(w,E,R){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(w,E,this.stateDependentLayers,R)};Ig.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length};Ig.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload};Ig.prototype.upload=function(w){this.uploaded||(this.layoutVertexBuffer=w.createVertexBuffer(this.layoutVertexArray,
Jk),this.indexBuffer=w.createIndexBuffer(this.indexArray));this.programConfigurations.upload(w);this.uploaded=!0};Ig.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())};Ig.prototype.addFeature=function(w,E,R,da,pa){var wa=0;for(E=jj(E,500);wa<E.length;wa+=1){for(var Ea=E[wa],Ma=0,Wa=0,cb=Ea;Wa<cb.length;Wa+=1)Ma+=cb[Wa].length;Wa=this.segments.prepareSegment(4,this.layoutVertexArray,
this.indexArray);cb=0;for(var pb=Ea;cb<pb.length;cb+=1){var yb=pb[cb];if(0!==yb.length&&!((ed=yb).every(function(Oc){return 0>Oc.x})||ed.every(function(Oc){return 8192<Oc.x})||ed.every(function(Oc){return 0>Oc.y})||ed.every(function(Oc){return 8192<Oc.y})))for(var Kb=0,Hb=0;Hb<yb.length;Hb++){var Tb=yb[Hb];if(1<=Hb){var Sb=yb[Hb-1];if(!(Tb.x===Sb.x&&(0>Tb.x||8192<Tb.x)||Tb.y===Sb.y&&(0>Tb.y||8192<Tb.y))){Wa.vertexLength+4>ef.MAX_VERTEX_ARRAY_LENGTH&&(Wa=this.segments.prepareSegment(4,this.layoutVertexArray,
this.indexArray));var qc=Tb.sub(Sb)._perp()._unit(),bd=Sb.dist(Tb);32768<Kb+bd&&(Kb=0);ei(this.layoutVertexArray,Tb.x,Tb.y,qc.x,qc.y,0,0,Kb);ei(this.layoutVertexArray,Tb.x,Tb.y,qc.x,qc.y,0,1,Kb);ei(this.layoutVertexArray,Sb.x,Sb.y,qc.x,qc.y,0,0,Kb+=bd);ei(this.layoutVertexArray,Sb.x,Sb.y,qc.x,qc.y,0,1,Kb);Tb=Wa.vertexLength;this.indexArray.emplaceBack(Tb,Tb+2,Tb+1);this.indexArray.emplaceBack(Tb+1,Tb+2,Tb+3);Wa.vertexLength+=4;Wa.primitiveLength+=2}}}}if(Wa.vertexLength+Ma>ef.MAX_VERTEX_ARRAY_LENGTH&&
(Wa=this.segments.prepareSegment(Ma,this.layoutVertexArray,this.indexArray)),"Polygon"===Lk[w.type]){pb=[];yb=[];cb=Wa.vertexLength;Kb=0;for(Hb=Ea;Kb<Hb.length;Kb+=1)if(Tb=Hb[Kb],0!==Tb.length)for(Tb!==Ea[0]&&yb.push(pb.length/2),Sb=0;Sb<Tb.length;Sb++)qc=Tb[Sb],ei(this.layoutVertexArray,qc.x,qc.y,0,0,1,1,0),pb.push(qc.x),pb.push(qc.y);Ea=Mc(pb,yb);for(pb=0;pb<Ea.length;pb+=3)this.indexArray.emplaceBack(cb+Ea[pb],cb+Ea[pb+2],cb+Ea[pb+1]);Wa.primitiveLength+=Ea.length/3;Wa.vertexLength+=Ma}}var ed;
this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,w,R,pa,da)};Bc("FillExtrusionBucket",Ig,{omit:["layers","features"]});var al={paint:new Pf({"fill-extrusion-opacity":new xd(Cb["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Zd(Cb["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new xd(Cb["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new xd(Cb["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),
"fill-extrusion-pattern":new tj(Cb["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Zd(Cb["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Zd(Cb["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new xd(Cb["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},ol=function(w){function E(R){w.call(this,R,al)}return w&&(E.__proto__=w),(E.prototype=Object.create(w&&w.prototype)).constructor=E,E.prototype.createBucket=
function(R){return new Ig(R)},E.prototype.queryRadius=function(){return Td(this.paint.get("fill-extrusion-translate"))},E.prototype.is3D=function(){return!0},E.prototype.queryIntersectsFeature=function(R,da,pa,wa,Ea,Ma,Wa,cb){Ea=Fd(R,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),Ma.angle,Wa);R=this.paint.get("fill-extrusion-height").evaluate(da,pa);da=this.paint.get("fill-extrusion-base").evaluate(da,pa);pa=function(pb,yb,Kb,Hb){Kb=[];for(Hb=0;Hb<pb.length;Hb+=
1){var Tb=pb[Hb];Tb=[Tb.x,Tb.y,0,1];ge(Tb,Tb,yb);Kb.push(new Md(Tb[0]/Tb[3],Tb[1]/Tb[3]))}return Kb}(Ea,cb);wa=function(pb,yb,Kb,Hb){var Tb=[],Sb=[],qc=Hb[8]*yb,bd=Hb[9]*yb,ed=Hb[10]*yb;yb*=Hb[11];var Oc=Hb[8]*Kb,rd=Hb[9]*Kb,pd=Hb[10]*Kb;Kb*=Hb[11];for(var wd=0;wd<pb.length;wd+=1){for(var Gd=[],Od=[],Ud=0,Vd=pb[wd];Ud<Vd.length;Ud+=1){var Kd=Vd[Ud],Qd=Kd.x,je=Kd.y;Kd=Hb[0]*Qd+Hb[4]*je+Hb[12];var Hd=Hb[1]*Qd+Hb[5]*je+Hb[13],Ad=Hb[2]*Qd+Hb[6]*je+Hb[14],Id=Hb[3]*Qd+Hb[7]*je+Hb[15];Qd=Ad+ed;je=Id+yb;
var we=Kd+Oc,Re=Hd+rd;Ad+=pd;Id+=Kb;Kd=new Md((Kd+qc)/je,(Hd+bd)/je);Kd.z=Qd/je;Gd.push(Kd);Kd=new Md(we/Id,Re/Id);Kd.z=Ad/Id;Od.push(Kd)}Tb.push(Gd);Sb.push(Od)}return[Tb,Sb]}(wa,da,R,cb);return function(pb,yb,Kb){var Hb=1/0;gf(Kb,yb)&&(Hb=Ch(Kb,yb[0]));for(var Tb=0;Tb<yb.length;Tb++)for(var Sb=yb[Tb],qc=pb[Tb],bd=0;bd<Sb.length-1;bd++){var ed=Sb[bd];ed=[ed,Sb[bd+1],qc[bd+1],qc[bd],ed];pf(Kb,ed)&&(Hb=Math.min(Hb,Ch(Kb,ed)))}return Hb!==1/0&&Hb}(wa[0],wa[1],pa)},E}(og),O=Ld([{name:"a_pos_normal",
components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,ea=rh.VectorTileFeature.types,ra=Math.cos(Math.PI/180*37.5),xa=Math.pow(2,14)/.5,ya=function(w){this.zoom=w.zoom;this.overscaling=w.overscaling;this.layers=w.layers;this.layerIds=this.layers.map(function(E){return E.id});this.index=w.index;this.hasPattern=!1;this.patternFeatures=[];this.layoutVertexArray=new Dg;this.indexArray=new $g;this.programConfigurations=new Ag(O,w.layers,w.zoom);this.segments=new ef;this.stateDependentLayerIds=
this.layers.filter(function(E){return E.isStateDependent()}).map(function(E){return E.id})};ya.prototype.populate=function(w,E,R){this.hasPattern=ci("line",this.layers,E);for(var da=this.layers[0].layout.get("line-sort-key"),pa=[],wa=0;wa<w.length;wa+=1){var Ea=w[wa],Ma=Ea.feature,Wa=Ea.id,cb=Ea.index;Ea=Ea.sourceLayerIndex;var pb=this.layers[0]._featureFilter.needGeometry,yb={type:Ma.type,id:Wa,properties:Ma.properties,geometry:pb?re(Ma):[]};this.layers[0]._featureFilter.filter(new Ke(this.zoom),
yb,R)&&(pb||(yb.geometry=re(Ma)),pb=da?da.evaluate(yb,{},R):void 0,pa.push({id:Wa,properties:Ma.properties,type:Ma.type,sourceLayerIndex:Ea,index:cb,geometry:yb.geometry,patterns:{},sortKey:pb}))}da&&pa.sort(function(Kb,Hb){return Kb.sortKey-Hb.sortKey});for(da=0;da<pa.length;da+=1)cb=pa[da],wa=cb.geometry,Ma=cb.index,Wa=cb.sourceLayerIndex,this.hasPattern?(cb=Ii("line",this.layers,cb,this.zoom,E),this.patternFeatures.push(cb)):this.addFeature(cb,wa,Ma,R,{}),E.featureIndex.insert(w[Ma].feature,wa,
Ma,Wa,this.index)};ya.prototype.update=function(w,E,R){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(w,E,this.stateDependentLayers,R)};ya.prototype.addFeatures=function(w,E,R){w=0;for(var da=this.patternFeatures;w<da.length;w+=1){var pa=da[w];this.addFeature(pa,pa.geometry,pa.index,E,R)}};ya.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length};ya.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload};ya.prototype.upload=
function(w){this.uploaded||(this.layoutVertexBuffer=w.createVertexBuffer(this.layoutVertexArray,O),this.indexBuffer=w.createIndexBuffer(this.indexArray));this.programConfigurations.upload(w);this.uploaded=!0};ya.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())};ya.prototype.addFeature=function(w,E,R,da,pa){var wa=this.layers[0].layout,Ea=wa.get("line-join").evaluate(w,{}),
Ma=wa.get("line-cap"),Wa=wa.get("line-miter-limit");wa=wa.get("line-round-limit");for(var cb=0;cb<E.length;cb+=1)this.addLine(E[cb],w,Ea,Ma,Wa,wa);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,w,R,pa,da)};ya.prototype.addLine=function(w,E,R,da,pa,wa){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,E.properties&&E.properties.hasOwnProperty("mapbox_clip_start")&&E.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+E.properties.mapbox_clip_start;
this.clipEnd=+E.properties.mapbox_clip_end;for(var Ea=0;Ea<w.length-1;Ea++)this.totalDistance+=w[Ea].dist(w[Ea+1]);this.updateScaledDistance()}E="Polygon"===ea[E.type];for(Ea=w.length;2<=Ea&&w[Ea-1].equals(w[Ea-2]);)Ea--;for(var Ma=0;Ma<Ea-1&&w[Ma].equals(w[Ma+1]);)Ma++;if(!(Ea<(E?3:2))){"bevel"===R&&(pa=1.05);var Wa,cb=16>=this.overscaling?122880/(512*this.overscaling):0,pb=this.segments.prepareSegment(10*Ea,this.layoutVertexArray,this.indexArray),yb=void 0,Kb=void 0,Hb=void 0,Tb=void 0;this.e1=
this.e2=-1;E&&(Tb=w[Ma].sub(Wa=w[Ea-2])._unit()._perp());for(var Sb=Ma;Sb<Ea;Sb++)if(!(Kb=Sb===Ea-1?E?w[Ma+1]:void 0:w[Sb+1])||!w[Sb].equals(Kb)){Tb&&(Hb=Tb);Wa&&(yb=Wa);Wa=w[Sb];Tb=Kb?Kb.sub(Wa)._unit()._perp():Hb;var qc=(Hb=Hb||Tb).add(Tb);0===qc.x&&0===qc.y||qc._unit();var bd=Hb.x*Tb.x+Hb.y*Tb.y,ed=qc.x*Tb.x+qc.y*Tb.y,Oc=0!==ed?1/ed:1/0,rd=2*Math.sqrt(2-2*ed);ed=ed<ra&&yb&&Kb;var pd=0<Hb.x*Tb.y-Hb.y*Tb.x;if(ed&&Sb>Ma){var wd=Wa.dist(yb);wd>2*cb&&(wd=Wa.sub(Wa.sub(yb)._mult(cb/wd)._round()),this.updateDistance(yb,
wd),this.addCurrentVertex(wd,Hb,0,0,pb),yb=wd)}var Gd=yb&&Kb;wd=Gd?R:E?"butt":da;if(Gd&&"round"===wd&&(Oc<wa?wd="miter":2>=Oc&&(wd="fakeround")),"miter"===wd&&Oc>pa&&(wd="bevel"),"bevel"===wd&&(2<Oc&&(wd="flipbevel"),Oc<pa&&(wd="miter")),yb&&this.updateDistance(yb,Wa),"miter"===wd)qc._mult(Oc),this.addCurrentVertex(Wa,qc,0,0,pb);else if("flipbevel"===wd)100<Oc?qc=Tb.mult(-1):(bd=Oc*Hb.add(Tb).mag()/Hb.sub(Tb).mag(),qc._perp()._mult(bd*(pd?-1:1))),this.addCurrentVertex(Wa,qc,0,0,pb),this.addCurrentVertex(Wa,
qc.mult(-1),0,0,pb);else if("bevel"===wd||"fakeround"===wd){Oc=-Math.sqrt(Oc*Oc-1);qc=pd?Oc:0;Oc=pd?0:Oc;if(yb&&this.addCurrentVertex(Wa,Hb,qc,Oc,pb),"fakeround"===wd)for(rd=Math.round(180*rd/Math.PI/20),wd=1;wd<rd;wd++){Gd=wd/rd;if(.5!==Gd){var Od=Gd-.5;Gd+=Gd*Od*(Gd-1)*((1.0904+bd*(bd*(3.55645-1.43519*bd)-3.2452))*Od*Od+(.848013+bd*(.215638*bd-1.06021)))}Gd=Tb.sub(Hb)._mult(Gd)._add(Hb)._unit()._mult(pd?-1:1);this.addHalfVertex(Wa,Gd.x,Gd.y,!1,pd,0,pb)}Kb&&this.addCurrentVertex(Wa,Tb,-qc,-Oc,pb)}else"butt"===
wd?this.addCurrentVertex(Wa,qc,0,0,pb):"square"===wd?(bd=yb?1:-1,this.addCurrentVertex(Wa,qc,bd,bd,pb)):"round"===wd&&(yb&&(this.addCurrentVertex(Wa,Hb,0,0,pb),this.addCurrentVertex(Wa,Hb,1,1,pb,!0)),Kb&&(this.addCurrentVertex(Wa,Tb,-1,-1,pb,!0),this.addCurrentVertex(Wa,Tb,0,0,pb)));ed&&Sb<Ea-1&&(ed=Wa.dist(Kb),ed>2*cb&&(ed=Wa.add(Kb.sub(Wa)._mult(cb/ed)._round()),this.updateDistance(Wa,ed),this.addCurrentVertex(ed,Tb,0,0,pb),Wa=ed))}}};ya.prototype.addCurrentVertex=function(w,E,R,da,pa,wa){void 0===
wa&&(wa=!1);var Ea=E.y*da-E.x,Ma=-E.y-E.x*da;this.addHalfVertex(w,E.x+E.y*R,E.y-E.x*R,wa,!1,R,pa);this.addHalfVertex(w,Ea,Ma,wa,!0,-da,pa);this.distance>xa/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(w,E,R,da,pa,wa))};ya.prototype.addHalfVertex=function(w,E,R,da,pa,wa,Ea){var Ma=.5*this.scaledDistance;this.layoutVertexArray.emplaceBack((w.x<<1)+(da?1:0),(w.y<<1)+(pa?1:0),Math.round(63*E)+128,Math.round(63*R)+128,1+(0===wa?0:0>wa?-1:1)|(63&Ma)<<2,Ma>>6);w=Ea.vertexLength++;0<=
this.e1&&0<=this.e2&&(this.indexArray.emplaceBack(this.e1,this.e2,w),Ea.primitiveLength++);pa?this.e2=w:this.e1=w};ya.prototype.updateScaledDistance=function(){this.scaledDistance=0<this.totalDistance?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(xa-1):this.distance};ya.prototype.updateDistance=function(w,E){this.distance+=w.dist(E);this.updateScaledDistance()};Bc("LineBucket",ya,{omit:["layers","patternFeatures"]});var Ca=new Pf({"line-cap":new xd(Cb.layout_line["line-cap"]),
"line-join":new Zd(Cb.layout_line["line-join"]),"line-miter-limit":new xd(Cb.layout_line["line-miter-limit"]),"line-round-limit":new xd(Cb.layout_line["line-round-limit"]),"line-sort-key":new Zd(Cb.layout_line["line-sort-key"])}),Pa={paint:new Pf({"line-opacity":new Zd(Cb.paint_line["line-opacity"]),"line-color":new Zd(Cb.paint_line["line-color"]),"line-translate":new xd(Cb.paint_line["line-translate"]),"line-translate-anchor":new xd(Cb.paint_line["line-translate-anchor"]),"line-width":new Zd(Cb.paint_line["line-width"]),
"line-gap-width":new Zd(Cb.paint_line["line-gap-width"]),"line-offset":new Zd(Cb.paint_line["line-offset"]),"line-blur":new Zd(Cb.paint_line["line-blur"]),"line-dasharray":new th(Cb.paint_line["line-dasharray"]),"line-pattern":new tj(Cb.paint_line["line-pattern"]),"line-gradient":new Wi(Cb.paint_line["line-gradient"])}),layout:Ca},Ia=new (function(w){function E(){w.apply(this,arguments)}return w&&(E.__proto__=w),(E.prototype=Object.create(w&&w.prototype)).constructor=E,E.prototype.possiblyEvaluate=
function(R,da){return da=new Ke(Math.floor(da.zoom),{now:da.now,fadeDuration:da.fadeDuration,zoomHistory:da.zoomHistory,transition:da.transition}),w.prototype.possiblyEvaluate.call(this,R,da)},E.prototype.evaluate=function(R,da,pa,wa){return da=f({},da,{zoom:Math.floor(da.zoom)}),w.prototype.evaluate.call(this,R,da,pa,wa)},E}(Zd))(Pa.paint.properties["line-width"].specification);Ia.useIntegerZoom=!0;var Oa=function(w){function E(R){w.call(this,R,Pa)}return w&&(E.__proto__=w),(E.prototype=Object.create(w&&
w.prototype)).constructor=E,E.prototype._handleSpecialPaintPropertyUpdate=function(R){"line-gradient"===R&&this._updateGradient()},E.prototype._updateGradient=function(){this.gradient=Ic(this._transitionablePaint._values["line-gradient"].value.expression,"lineProgress");this.gradientTexture=null},E.prototype.recalculate=function(R,da){w.prototype.recalculate.call(this,R,da);this.paint._values["line-floorwidth"]=Ia.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,R)},E.prototype.createBucket=
function(R){return new ya(R)},E.prototype.queryRadius=function(R){var da=gi(Jd("line-width",this,R),Jd("line-gap-width",this,R));R=Jd("line-offset",this,R);return da/2+Math.abs(R)+Td(this.paint.get("line-translate"))},E.prototype.queryIntersectsFeature=function(R,da,pa,wa,Ea,Ma,Wa){R=Fd(R,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),Ma.angle,Wa);Ea=Wa/2*gi(this.paint.get("line-width").evaluate(da,pa),this.paint.get("line-gap-width").evaluate(da,pa));da=this.paint.get("line-offset").evaluate(da,
pa);return da&&(wa=function(cb,pb){for(var yb=[],Kb=new Md(0,0),Hb=0;Hb<cb.length;Hb++){for(var Tb=cb[Hb],Sb=[],qc=0;qc<Tb.length;qc++){var bd=Tb[qc],ed=Tb[qc+1],Oc=0===qc?Kb:bd.sub(Tb[qc-1])._unit()._perp();ed=qc===Tb.length-1?Kb:ed.sub(bd)._unit()._perp();Oc=Oc._add(ed)._unit();Oc._mult(1/(Oc.x*ed.x+Oc.y*ed.y));Sb.push(Oc._mult(pb)._add(bd))}yb.push(Sb)}return yb}(wa,da*Wa)),function(cb,pb,yb){for(var Kb=0;Kb<pb.length;Kb++){var Hb=pb[Kb];if(3<=cb.length)for(var Tb=0;Tb<Hb.length;Tb++)if(gd(cb,
Hb[Tb]))return!0;a:{Tb=cb;var Sb=yb;if(1<Tb.length){if(Ve(Tb,Hb)){Tb=!0;break a}for(var qc=0;qc<Hb.length;qc++)if(Rb(Hb[qc],Tb,Sb)){Tb=!0;break a}}for(qc=0;qc<Tb.length;qc++)if(Rb(Tb[qc],Hb,Sb)){Tb=!0;break a}Tb=!1}if(Tb)return!0}return!1}(R,wa,Ea)},E.prototype.isTileClipped=function(){return!0},E}(og),Ua=Ld([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),bb=Ld([{name:"a_projected_pos",components:3,type:"Float32"}],
4),mb=(Ld([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Ld([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),vb=(Ld([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Ld([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",
components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Ab=Ld([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Ld([{name:"triangle",components:3,type:"Uint16"}]);Ld([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},
{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]);Ld([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},
{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},
{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]);Ld([{type:"Float32",
name:"offsetX"}]);Ld([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Bb={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38",
"~":"\uff5e","\u00a2":"\uffe0","\u00a3":"\uffe1","\u00a5":"\uffe5","\u00a6":"\uffe4","\u00ac":"\uffe2","\u00af":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39",
"\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"},Nb=function(w,E,R,da,pa){var wa=8*pa-da-1;var Ea=(1<<
wa)-1,Ma=Ea>>1,Wa=-7;pa=R?pa-1:0;var cb=R?-1:1,pb=w[E+pa];pa+=cb;R=pb&(1<<-Wa)-1;pb>>=-Wa;for(Wa+=wa;0<Wa;R=256*R+w[E+pa],pa+=cb,Wa-=8);wa=R&(1<<-Wa)-1;R>>=-Wa;for(Wa+=da;0<Wa;wa=256*wa+w[E+pa],pa+=cb,Wa-=8);if(0===R)R=1-Ma;else{if(R===Ea)return wa?NaN:1/0*(pb?-1:1);wa+=Math.pow(2,da);R-=Ma}return(pb?-1:1)*wa*Math.pow(2,R-da)},Ub=function(w,E,R,da,pa,wa){var Ea,Ma,Wa,cb=8*wa-pa-1,pb=(1<<cb)-1,yb=pb>>1,Kb=23===pa?Math.pow(2,-24)-Math.pow(2,-77):0;wa=da?0:wa-1;da=da?1:-1;var Hb=0>E||0===E&&0>1/E?1:
0;E=Math.abs(E);for(isNaN(E)||E===1/0?(Ma=isNaN(E)?1:0,Ea=pb):(Ea=Math.floor(Math.log(E)/Math.LN2),1>E*(Wa=Math.pow(2,-Ea))&&(Ea--,Wa*=2),2<=(E+=1<=Ea+yb?Kb/Wa:Kb*Math.pow(2,1-yb))*Wa&&(Ea++,Wa/=2),Ea+yb>=pb?(Ma=0,Ea=pb):1<=Ea+yb?(Ma=(E*Wa-1)*Math.pow(2,pa),Ea+=yb):(Ma=E*Math.pow(2,yb-1)*Math.pow(2,pa),Ea=0));8<=pa;w[R+wa]=255&Ma,wa+=da,Ma/=256,pa-=8);Ea=Ea<<pa|Ma;for(cb+=pa;0<cb;w[R+wa]=255&Ea,wa+=da,Ea/=256,cb-=8);w[R+wa-da]|=128*Hb};Ae.Varint=0;Ae.Fixed64=1;Ae.Bytes=2;Ae.Fixed32=5;var fc="undefined"==
typeof TextDecoder?null:new TextDecoder("utf8");Ae.prototype={destroy:function(){this.buf=null},readFields:function(w,E,R){for(R=R||this.length;this.pos<R;){var da=this.readVarint(),pa=da>>3,wa=this.pos;this.type=7&da;w(pa,E,this);this.pos===wa&&this.skip(da)}return E},readMessage:function(w,E){return this.readFields(w,E,this.readVarint()+this.pos)},readFixed32:function(){var w=Gh(this.buf,this.pos);return this.pos+=4,w},readSFixed32:function(){var w=tg(this.buf,this.pos);return this.pos+=4,w},readFixed64:function(){var w=
Gh(this.buf,this.pos)+4294967296*Gh(this.buf,this.pos+4);return this.pos+=8,w},readSFixed64:function(){var w=Gh(this.buf,this.pos)+4294967296*tg(this.buf,this.pos+4);return this.pos+=8,w},readFloat:function(){var w=Nb(this.buf,this.pos,!0,23,4);return this.pos+=4,w},readDouble:function(){var w=Nb(this.buf,this.pos,!0,52,8);return this.pos+=8,w},readVarint:function(w){var E,R=this.buf;var da=127&(E=R[this.pos++]);if(128>E)w=da;else if(da|=(127&(E=R[this.pos++]))<<7,128>E)w=da;else if(da|=(127&(E=R[this.pos++]))<<
14,128>E)w=da;else if(da|=(127&(E=R[this.pos++]))<<21,128>E)w=da;else{da|=(15&R[this.pos])<<28;var pa,wa;E=this.buf;if((pa=(112&(wa=E[this.pos++]))>>4,128>wa)||(pa|=(127&(wa=E[this.pos++]))<<3,128>wa)||(pa|=(127&(wa=E[this.pos++]))<<10,128>wa)||(pa|=(127&(wa=E[this.pos++]))<<17,128>wa)||(pa|=(127&(wa=E[this.pos++]))<<24,128>wa)||(pa|=(1&(wa=E[this.pos++]))<<31,128>wa))w=w?4294967296*pa+(da>>>0):4294967296*(pa>>>0)+(da>>>0);else throw Error("Expected varint not more than 10 bytes");}return w},readVarint64:function(){return this.readVarint(!0)},
readSVarint:function(){var w=this.readVarint();return 1==w%2?(w+1)/-2:w/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var w=this.readVarint()+this.pos,E=this.pos;this.pos=w;if(12<=w-E&&fc)w=fc.decode(this.buf.subarray(E,w));else{for(var R=this.buf,da="";E<w;){var pa,wa,Ea,Ma=R[E],Wa=null,cb=239<Ma?4:223<Ma?3:191<Ma?2:1;if(E+cb>w)break;1===cb?128>Ma&&(Wa=Ma):2===cb?128==(192&(pa=R[E+1]))&&127>=(Wa=(31&Ma)<<6|63&pa)&&(Wa=null):3===cb?(wa=R[E+2],128==(192&(pa=R[E+1]))&&128==
(192&wa)&&(2047>=(Wa=(15&Ma)<<12|(63&pa)<<6|63&wa)||55296<=Wa&&57343>=Wa)&&(Wa=null)):4===cb&&(wa=R[E+2],Ea=R[E+3],128==(192&(pa=R[E+1]))&&128==(192&wa)&&128==(192&Ea)&&(65535>=(Wa=(15&Ma)<<18|(63&pa)<<12|(63&wa)<<6|63&Ea)||1114112<=Wa)&&(Wa=null));null===Wa?(Wa=65533,cb=1):65535<Wa&&(Wa-=65536,da+=String.fromCharCode(Wa>>>10&1023|55296),Wa=56320|1023&Wa);da+=String.fromCharCode(Wa);E+=cb}w=da}return w},readBytes:function(){var w=this.readVarint()+this.pos,E=this.buf.subarray(this.pos,w);return this.pos=
w,E},readPackedVarint:function(w,E){if(this.type!==Ae.Bytes)return w.push(this.readVarint(E));var R=Sf(this);for(w=w||[];this.pos<R;)w.push(this.readVarint(E));return w},readPackedSVarint:function(w){if(this.type!==Ae.Bytes)return w.push(this.readSVarint());var E=Sf(this);for(w=w||[];this.pos<E;)w.push(this.readSVarint());return w},readPackedBoolean:function(w){if(this.type!==Ae.Bytes)return w.push(this.readBoolean());var E=Sf(this);for(w=w||[];this.pos<E;)w.push(this.readBoolean());return w},readPackedFloat:function(w){if(this.type!==
Ae.Bytes)return w.push(this.readFloat());var E=Sf(this);for(w=w||[];this.pos<E;)w.push(this.readFloat());return w},readPackedDouble:function(w){if(this.type!==Ae.Bytes)return w.push(this.readDouble());var E=Sf(this);for(w=w||[];this.pos<E;)w.push(this.readDouble());return w},readPackedFixed32:function(w){if(this.type!==Ae.Bytes)return w.push(this.readFixed32());var E=Sf(this);for(w=w||[];this.pos<E;)w.push(this.readFixed32());return w},readPackedSFixed32:function(w){if(this.type!==Ae.Bytes)return w.push(this.readSFixed32());
var E=Sf(this);for(w=w||[];this.pos<E;)w.push(this.readSFixed32());return w},readPackedFixed64:function(w){if(this.type!==Ae.Bytes)return w.push(this.readFixed64());var E=Sf(this);for(w=w||[];this.pos<E;)w.push(this.readFixed64());return w},readPackedSFixed64:function(w){if(this.type!==Ae.Bytes)return w.push(this.readSFixed64());var E=Sf(this);for(w=w||[];this.pos<E;)w.push(this.readSFixed64());return w},skip:function(w){w&=7;if(w===Ae.Varint)for(;127<this.buf[this.pos++];);else if(w===Ae.Bytes)this.pos=
this.readVarint()+this.pos;else if(w===Ae.Fixed32)this.pos+=4;else{if(w!==Ae.Fixed64)throw Error("Unimplemented type: "+w);this.pos+=8}},writeTag:function(w,E){this.writeVarint(w<<3|E)},realloc:function(w){for(var E=this.length||16;E<this.pos+w;)E*=2;E!==this.length&&(w=new Uint8Array(E),w.set(this.buf),this.buf=w,this.length=E)},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(w){this.realloc(4);jh(this.buf,w,this.pos);this.pos+=4},
writeSFixed32:function(w){this.realloc(4);jh(this.buf,w,this.pos);this.pos+=4},writeFixed64:function(w){this.realloc(8);jh(this.buf,-1&w,this.pos);jh(this.buf,Math.floor(1/4294967296*w),this.pos+4);this.pos+=8},writeSFixed64:function(w){this.realloc(8);jh(this.buf,-1&w,this.pos);jh(this.buf,Math.floor(1/4294967296*w),this.pos+4);this.pos+=8},writeVarint:function(w){268435455<(w=+w||0)||0>w?function(E,R){var da,pa;if(0<=E?(da=E%4294967296|0,pa=E/4294967296|0):(pa=~(-E/4294967296),4294967295^(da=~(-E%
4294967296))?da=da+1|0:(da=0,pa=pa+1|0)),1.8446744073709552E19<=E||-1.8446744073709552E19>E)throw Error("Given varint doesn't fit into 10 bytes");R.realloc(10);(function(wa,Ea,Ma){Ma.buf[Ma.pos++]=127&wa|128;wa>>>=7;Ma.buf[Ma.pos++]=127&wa|128;wa>>>=7;Ma.buf[Ma.pos++]=127&wa|128;wa>>>=7;Ma.buf[Ma.pos++]=127&wa|128;Ma.buf[Ma.pos]=127&wa>>>7})(da,0,R);(function(wa,Ea){Ea.buf[Ea.pos++]|=(7&wa)<<4|((wa>>>=3)?128:0);wa&&(Ea.buf[Ea.pos++]=127&wa|((wa>>>=7)?128:0),wa&&(Ea.buf[Ea.pos++]=127&wa|((wa>>>=7)?
128:0),wa&&(Ea.buf[Ea.pos++]=127&wa|((wa>>>=7)?128:0),wa&&(Ea.buf[Ea.pos++]=127&wa|((wa>>>=7)?128:0),wa&&(Ea.buf[Ea.pos++]=127&wa)))))})(pa,R)}(w,this):(this.realloc(4),this.buf[this.pos++]=127&w|(127<w?128:0),127>=w||(this.buf[this.pos++]=127&(w>>>=7)|(127<w?128:0),127>=w||(this.buf[this.pos++]=127&(w>>>=7)|(127<w?128:0),127>=w||(this.buf[this.pos++]=w>>>7&127))))},writeSVarint:function(w){this.writeVarint(0>w?2*-w-1:2*w)},writeBoolean:function(w){this.writeVarint(!!w)},writeString:function(w){w=
String(w);this.realloc(4*w.length);this.pos++;for(var E=this.pos,R=this.buf,da=this.pos,pa,wa,Ea=0;Ea<w.length;Ea++){if(55295<(pa=w.charCodeAt(Ea))&&57344>pa){if(!wa){56319<pa||Ea+1===w.length?(R[da++]=239,R[da++]=191,R[da++]=189):wa=pa;continue}if(56320>pa){R[da++]=239;R[da++]=191;R[da++]=189;wa=pa;continue}pa=wa-55296<<10|pa-56320|65536;wa=null}else wa&&(R[da++]=239,R[da++]=191,R[da++]=189,wa=null);128>pa?R[da++]=pa:(2048>pa?R[da++]=pa>>6|192:(65536>pa?R[da++]=pa>>12|224:(R[da++]=pa>>18|240,R[da++]=
pa>>12&63|128),R[da++]=pa>>6&63|128),R[da++]=63&pa|128)}this.pos=da;R=this.pos-E;128<=R&&Eh(E,R,this);this.pos=E-1;this.writeVarint(R);this.pos+=R},writeFloat:function(w){this.realloc(4);Ub(this.buf,w,this.pos,!0,23,4);this.pos+=4},writeDouble:function(w){this.realloc(8);Ub(this.buf,w,this.pos,!0,52,8);this.pos+=8},writeBytes:function(w){var E=w.length;this.writeVarint(E);this.realloc(E);for(var R=0;R<E;R++)this.buf[this.pos++]=w[R]},writeRawMessage:function(w,E){this.pos++;var R=this.pos;w(E,this);
w=this.pos-R;128<=w&&Eh(R,w,this);this.pos=R-1;this.writeVarint(w);this.pos+=w},writeMessage:function(w,E,R){this.writeTag(w,Ae.Bytes);this.writeRawMessage(E,R)},writePackedVarint:function(w,E){E.length&&this.writeMessage(w,Fh,E)},writePackedSVarint:function(w,E){E.length&&this.writeMessage(w,Pj,E)},writePackedBoolean:function(w,E){E.length&&this.writeMessage(w,Qj,E)},writePackedFloat:function(w,E){E.length&&this.writeMessage(w,hi,E)},writePackedDouble:function(w,E){E.length&&this.writeMessage(w,
Ki,E)},writePackedFixed32:function(w,E){E.length&&this.writeMessage(w,Rj,E)},writePackedSFixed32:function(w,E){E.length&&this.writeMessage(w,Sj,E)},writePackedFixed64:function(w,E){E.length&&this.writeMessage(w,ii,E)},writePackedSFixed64:function(w,E){E.length&&this.writeMessage(w,sk,E)},writeBytesField:function(w,E){this.writeTag(w,Ae.Bytes);this.writeBytes(E)},writeFixed32Field:function(w,E){this.writeTag(w,Ae.Fixed32);this.writeFixed32(E)},writeSFixed32Field:function(w,E){this.writeTag(w,Ae.Fixed32);
this.writeSFixed32(E)},writeFixed64Field:function(w,E){this.writeTag(w,Ae.Fixed64);this.writeFixed64(E)},writeSFixed64Field:function(w,E){this.writeTag(w,Ae.Fixed64);this.writeSFixed64(E)},writeVarintField:function(w,E){this.writeTag(w,Ae.Varint);this.writeVarint(E)},writeSVarintField:function(w,E){this.writeTag(w,Ae.Varint);this.writeSVarint(E)},writeStringField:function(w,E){this.writeTag(w,Ae.Bytes);this.writeString(E)},writeFloatField:function(w,E){this.writeTag(w,Ae.Fixed32);this.writeFloat(E)},
writeDoubleField:function(w,E){this.writeTag(w,Ae.Fixed64);this.writeDouble(E)},writeBooleanField:function(w,E){this.writeVarintField(w,!!E)}};var rc=function(w,E){var R=E.pixelRatio,da=E.version,pa=E.stretchX,wa=E.stretchY;E=E.content;this.paddedRect=w;this.pixelRatio=R;this.stretchX=pa;this.stretchY=wa;this.content=E;this.version=da},vc={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};vc.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+
1]};vc.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]};vc.tlbr.get=function(){return this.tl.concat(this.br)};vc.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]};Object.defineProperties(rc.prototype,vc);var zc=function(w,E){var R={},da={};this.haveRenderCallbacks=[];var pa=[];this.addImages(w,R,pa);this.addImages(E,da,pa);pa=Pe(pa);pa=new wf({width:pa.w||1,height:pa.h||1});for(var wa in w){var Ea=
w[wa],Ma=R[wa].paddedRect;wf.copy(Ea.data,pa,{x:0,y:0},{x:Ma.x+1,y:Ma.y+1},Ea.data)}for(var Wa in E){w=E[Wa];Ea=da[Wa].paddedRect;wa=Ea.x+1;Ea=Ea.y+1;Ma=w.data.width;var cb=w.data.height;wf.copy(w.data,pa,{x:0,y:0},{x:wa,y:Ea},w.data);wf.copy(w.data,pa,{x:0,y:cb-1},{x:wa,y:Ea-1},{width:Ma,height:1});wf.copy(w.data,pa,{x:0,y:0},{x:wa,y:Ea+cb},{width:Ma,height:1});wf.copy(w.data,pa,{x:Ma-1,y:0},{x:wa-1,y:Ea},{width:1,height:cb});wf.copy(w.data,pa,{x:0,y:0},{x:wa+Ma,y:Ea},{width:1,height:cb})}this.image=
pa;this.iconPositions=R;this.patternPositions=da};zc.prototype.addImages=function(w,E,R){for(var da in w){var pa=w[da],wa={x:0,y:0,w:pa.data.width+2,h:pa.data.height+2};R.push(wa);E[da]=new rc(wa,pa);pa.hasRenderCallback&&this.haveRenderCallbacks.push(da)}};zc.prototype.patchUpdatedImages=function(w,E){for(var R in w.dispatchRenderCallbacks(this.haveRenderCallbacks),w.updatedImages)this.patchUpdatedImage(this.iconPositions[R],w.getImage(R),E),this.patchUpdatedImage(this.patternPositions[R],w.getImage(R),
E)};zc.prototype.patchUpdatedImage=function(w,E,R){w&&E&&w.version!==E.version&&(w.version=E.version,w=w.tl,R.update(E.data,void 0,{x:w[0],y:w[1]}))};Bc("ImagePosition",rc);Bc("ImageAtlas",zc);var Kc={horizontal:1,vertical:2,horizontalOnly:3},Ib=function(){this.scale=1;this.fontStack="";this.imageName=null};Ib.forText=function(w,E){var R=new Ib;return R.scale=w||1,R.fontStack=E,R};Ib.forImage=function(w){var E=new Ib;return E.imageName=w,E};var Wb=function(){this.text="";this.sectionIndex=[];this.sections=
[];this.imageSectionID=null};Wb.fromFeature=function(w,E){for(var R=new Wb,da=0;da<w.sections.length;da++){var pa=w.sections[da];pa.image?R.addImageSection(pa):R.addTextSection(pa,E)}return R};Wb.prototype.length=function(){return this.text.length};Wb.prototype.getSection=function(w){return this.sections[this.sectionIndex[w]]};Wb.prototype.getSectionIndex=function(w){return this.sectionIndex[w]};Wb.prototype.getCharCode=function(w){return this.text.charCodeAt(w)};Wb.prototype.verticalizePunctuation=
function(){for(var w=this.text,E="",R=0;R<w.length;R++){var da=w.charCodeAt(R+1)||null,pa=w.charCodeAt(R-1)||null;E+=da&&td(da)&&!Bb[w[R+1]]||pa&&td(pa)&&!Bb[w[R-1]]||!Bb[w[R]]?w[R]:Bb[w[R]]}this.text=E};Wb.prototype.trim=function(){for(var w=0,E=0;E<this.text.length&&sc[this.text.charCodeAt(E)];E++)w++;E=this.text.length;for(var R=this.text.length-1;0<=R&&R>=w&&sc[this.text.charCodeAt(R)];R--)E--;this.text=this.text.substring(w,E);this.sectionIndex=this.sectionIndex.slice(w,E)};Wb.prototype.substring=
function(w,E){var R=new Wb;return R.text=this.text.substring(w,E),R.sectionIndex=this.sectionIndex.slice(w,E),R.sections=this.sections,R};Wb.prototype.toString=function(){return this.text};Wb.prototype.getMaxScale=function(){var w=this;return this.sectionIndex.reduce(function(E,R){return Math.max(E,w.sections[R].scale)},0)};Wb.prototype.addTextSection=function(w,E){this.text+=w.text;this.sections.push(Ib.forText(w.scale,w.fontStack||E));E=this.sections.length-1;for(var R=0;R<w.text.length;++R)this.sectionIndex.push(E)};
Wb.prototype.addImageSection=function(w){w=w.image?w.image.name:"";if(0!==w.length){var E=this.getNextImageSectionCharCode();E?(this.text+=String.fromCharCode(E),this.sections.push(Ib.forImage(w)),this.sectionIndex.push(this.sections.length-1)):y("Reached maximum number of images 6401")}else y("Can't add FormattedSection with an empty image.")};Wb.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?63743<=this.imageSectionID?null:++this.imageSectionID:(this.imageSectionID=
57344,this.imageSectionID)};var sc={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Tc={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},Vc=function(w){function E(R,da,pa,wa){w.call(this,R,da);this.angle=pa;void 0!==wa&&(this.segment=wa)}return w&&(E.__proto__=w),(E.prototype=Object.create(w&&w.prototype)).constructor=E,E.prototype.clone=function(){return new E(this.x,this.y,this.angle,this.segment)},E}(Md);Bc("Anchor",Vc);var Xc=Object.freeze({__proto__:null,getSizeData:kj,
evaluateSizeForFeature:lj,evaluateSizeForZoom:mj,SIZE_PACK_FACTOR:128}),Nc=function(w,E,R,da,pa,wa,Ea,Ma,Wa,cb){if(this.boxStartIndex=w.length,Wa)E=wa.top,R=wa.bottom,(da=wa.collisionPadding)&&(E-=da[1],R+=da[3]),E=R-E,0<E&&(E=Math.max(10,E),this.circleDiameter=E);else{Wa=wa.top*Ea-Ma;var pb=wa.bottom*Ea+Ma,yb=wa.left*Ea-Ma;Ma=wa.right*Ea+Ma;wa=wa.collisionPadding;if(wa&&(yb-=wa[0]*Ea,Wa-=wa[1]*Ea,Ma+=wa[2]*Ea,pb+=wa[3]*Ea),cb){wa=new Md(yb,Wa);Ea=new Md(Ma,Wa);var Kb=new Md(yb,pb);pb=new Md(Ma,pb);
cb=cb*Math.PI/180;wa._rotate(cb);Ea._rotate(cb);Kb._rotate(cb);pb._rotate(cb);yb=Math.min(wa.x,Ea.x,Kb.x,pb.x);Ma=Math.max(wa.x,Ea.x,Kb.x,pb.x);Wa=Math.min(wa.y,Ea.y,Kb.y,pb.y);pb=Math.max(wa.y,Ea.y,Kb.y,pb.y)}w.emplaceBack(E.x,E.y,yb,Wa,Ma,pb,R,da,pa)}this.boxEndIndex=w.length},yd=function(w,E){if(void 0===w&&(w=[]),void 0===E&&(E=nh),this.data=w,this.length=this.data.length,this.compare=E,0<this.length)for(w=(this.length>>1)-1;0<=w;w--)this._down(w)};yd.prototype.push=function(w){this.data.push(w);
this.length++;this._up(this.length-1)};yd.prototype.pop=function(){if(0!==this.length){var w=this.data[0],E=this.data.pop();return this.length--,0<this.length&&(this.data[0]=E,this._down(0)),w}};yd.prototype.peek=function(){return this.data[0]};yd.prototype._up=function(w){for(var E=this.data,R=this.compare,da=E[w];0<w;){var pa=w-1>>1,wa=E[pa];if(0<=R(da,wa))break;E[w]=wa;w=pa}E[w]=da};yd.prototype._down=function(w){for(var E=this.data,R=this.compare,da=this.length>>1,pa=E[w];w<da;){var wa=1+(w<<
1),Ea=E[wa],Ma=wa+1;if(Ma<this.length&&0>R(E[Ma],Ea)&&(wa=Ma,Ea=E[Ma]),0<=R(Ea,pa))break;E[w]=Ea;w=wa}E[w]=pa};var Rd=Number.POSITIVE_INFINITY,ae=rh.VectorTileFeature.types,he=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}],de=function(w){this.layoutVertexArray=new Ng;this.indexArray=new $g;this.programConfigurations=w;this.segments=new ef;this.dynamicLayoutVertexArray=new sg;this.opacityVertexArray=new xh;this.placedSymbolArray=new Ck};de.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&
0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length};de.prototype.upload=function(w,E,R,da){this.isEmpty()||(R&&(this.layoutVertexBuffer=w.createVertexBuffer(this.layoutVertexArray,Ua.members),this.indexBuffer=w.createIndexBuffer(this.indexArray,E),this.dynamicLayoutVertexBuffer=w.createVertexBuffer(this.dynamicLayoutVertexArray,bb.members,!0),this.opacityVertexBuffer=w.createVertexBuffer(this.opacityVertexArray,he,!0),this.opacityVertexBuffer.itemSize=
1),(R||da)&&this.programConfigurations.upload(w))};de.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())};Bc("SymbolBuffers",de);var ne=function(w,E,R){this.layoutVertexArray=new w;this.layoutAttributes=E;this.indexArray=new R;this.segments=new ef;this.collisionVertexArray=new Kj};ne.prototype.upload=
function(w){this.layoutVertexBuffer=w.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes);this.indexBuffer=w.createIndexBuffer(this.indexArray);this.collisionVertexBuffer=w.createVertexBuffer(this.collisionVertexArray,mb.members,!0)};ne.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())};Bc("CollisionBuffers",ne);var Pd=function(w){this.collisionBoxArray=w.collisionBoxArray;
this.zoom=w.zoom;this.overscaling=w.overscaling;this.layers=w.layers;this.layerIds=this.layers.map(function(pa){return pa.id});this.index=w.index;this.pixelRatio=w.pixelRatio;this.sourceLayerIndex=w.sourceLayerIndex;this.hasRTLText=this.hasPattern=!1;this.sortKeyRanges=[];this.collisionCircleArray=[];this.placementInvProjMatrix=Ed([]);this.placementViewportMatrix=Ed([]);var E=this.layers[0]._unevaluatedLayout._values;this.textSizeData=kj(this.zoom,E["text-size"]);this.iconSizeData=kj(this.zoom,E["icon-size"]);
E=this.layers[0].layout;var R=E.get("symbol-sort-key"),da=E.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==da&&void 0!==R.constantOr(1);this.sortFeaturesByY=("viewport-y"===da||"auto"===da&&!this.sortFeaturesByKey)&&(E.get("text-allow-overlap")||E.get("icon-allow-overlap")||E.get("text-ignore-placement")||E.get("icon-ignore-placement"));"point"===E.get("symbol-placement")&&(this.writingModes=E.get("text-writing-mode").map(function(pa){return Kc[pa]}));this.stateDependentLayerIds=this.layers.filter(function(pa){return pa.isStateDependent()}).map(function(pa){return pa.id});
this.sourceID=w.sourceID};Pd.prototype.createArrays=function(){this.text=new de(new Ag(Ua.members,this.layers,this.zoom,function(w){return/^text/.test(w)}));this.icon=new de(new Ag(Ua.members,this.layers,this.zoom,function(w){return/^icon/.test(w)}));this.glyphOffsetArray=new vj;this.lineVertexArray=new fi;this.symbolInstances=new Ek};Pd.prototype.calculateGlyphDependencies=function(w,E,R,da,pa){for(var wa=0;wa<w.length;wa++)if(E[w.charCodeAt(wa)]=!0,(R||da)&&pa){var Ea=Bb[w.charAt(wa)];Ea&&(E[Ea.charCodeAt(0)]=
!0)}};Pd.prototype.populate=function(w,E,R){var da=this.layers[0],pa=da.layout,wa=pa.get("text-font"),Ea=pa.get("text-field"),Ma=pa.get("icon-image");Ea=("constant"!==Ea.value.kind||Ea.value.value instanceof se&&!Ea.value.value.isEmpty()||0<Ea.value.value.toString().length)&&("constant"!==wa.value.kind||0<wa.value.value.length);Ma="constant"!==Ma.value.kind||!!Ma.value.value||0<Object.keys(Ma.parameters).length;var Wa=pa.get("symbol-sort-key");if(this.features=[],Ea||Ma){var cb=E.iconDependencies,
pb=E.glyphDependencies;E=E.availableImages;for(var yb=new Ke(this.zoom),Kb=0;Kb<w.length;Kb+=1){var Hb=w[Kb],Tb=Hb.feature,Sb=Hb.id,qc=Hb.index,bd=Hb.sourceLayerIndex;Hb=da._featureFilter.needGeometry;var ed={type:Tb.type,id:Sb,properties:Tb.properties,geometry:Hb?re(Tb):[]};if(da._featureFilter.filter(yb,ed,R)){Hb||(ed.geometry=re(Tb));Hb=void 0;if(Ea){var Oc=da.getValueAndResolveTokens("text-field",ed,R,E);Oc=se.factory(Oc);oh(Oc)&&(this.hasRTLText=!0);(!this.hasRTLText||"unavailable"===Cf||this.hasRTLText&&
If.isParsed())&&(Hb=ih(Oc,da,ed))}Oc=void 0;Ma&&(Oc=da.getValueAndResolveTokens("icon-image",ed,R,E),Oc=Oc instanceof Ne?Oc:Ne.fromString(Oc));if(Hb||Oc){var rd=this.sortFeaturesByKey?Wa.evaluate(ed,{},R):void 0;Tb={id:Sb,text:Hb,icon:Oc,index:qc,sourceLayerIndex:bd,geometry:re(Tb),properties:Tb.properties,type:ae[Tb.type],sortKey:rd};if(this.features.push(Tb),Oc&&(cb[Oc.name]=!0),Hb)for(Tb=wa.evaluate(ed,{},R).join(","),Sb="map"===pa.get("text-rotation-alignment")&&"point"!==pa.get("symbol-placement"),
this.allowVerticalPlacement=this.writingModes&&0<=this.writingModes.indexOf(Kc.vertical),qc=0,ed=Hb.sections;qc<ed.length;qc+=1)bd=ed[qc],bd.image?cb[bd.image.name]=!0:(Oc=ke(Hb.toString()),rd=bd.fontStack||Tb,rd=pb[rd]=pb[rd]||{},this.calculateGlyphDependencies(bd.text,rd,Sb,this.allowVerticalPlacement,Oc))}}}"line"===pa.get("symbol-placement")&&(this.features=function(pd){function wd(Gf,mf,Se){var le=Vd[Gf];return delete Vd[Gf],Vd[mf]=le,Kd[le].geometry[0].pop(),Kd[le].geometry[0]=Kd[le].geometry[0].concat(Se[0]),
le}function Gd(Gf,mf,Se){var le=Ud[mf];return delete Ud[mf],Ud[Gf]=le,Kd[le].geometry[0].shift(),Kd[le].geometry[0]=Se[0].concat(Kd[le].geometry[0]),le}function Od(Gf,mf,Se){mf=Se?mf[0][mf[0].length-1]:mf[0][0];return Gf+":"+mf.x+":"+mf.y}for(var Ud={},Vd={},Kd=[],Qd=0,je=0;je<pd.length;je++){var Hd=pd[je],Ad=Hd.geometry;if(Hd=Hd.text?Hd.text.toString():null){var Id=Od(Hd,Ad),we=Od(Hd,Ad,!0);if(Id in Vd&&we in Ud&&Vd[Id]!==Ud[we]){Ad=Gd(Id,we,Ad);var Re=wd(Id,we,Kd[Ad].geometry);delete Ud[Id];delete Vd[we];
Vd[Od(Hd,Kd[Re].geometry,!0)]=Re;Kd[Ad].geometry=null}else Id in Vd?wd(Id,we,Ad):we in Ud?Gd(Id,we,Ad):(Kd.push(pd[je]),Qd++,Ud[Id]=Qd-1,Vd[we]=Qd-1)}else Kd.push(pd[je]),Qd++}return Kd.filter(function(Gf){return Gf.geometry})}(this.features));this.sortFeaturesByKey&&this.features.sort(function(pd,wd){return pd.sortKey-wd.sortKey})}};Pd.prototype.update=function(w,E,R){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(w,E,this.layers,R),this.icon.programConfigurations.updatePaintArrays(w,
E,this.layers,R))};Pd.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText};Pd.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload};Pd.prototype.upload=function(w){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(w),this.iconCollisionBox.upload(w));this.text.upload(w,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload);this.icon.upload(w,
this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload);this.uploaded=!0};Pd.prototype.destroyDebugData=function(){this.textCollisionBox.destroy();this.iconCollisionBox.destroy()};Pd.prototype.destroy=function(){this.text.destroy();this.icon.destroy();this.hasDebugData()&&this.destroyDebugData()};Pd.prototype.addToLineVertexArray=function(w,E){var R=this.lineVertexArray.length;if(void 0!==w.segment){for(var da=w.dist(E[w.segment+1]),pa=w.dist(E[w.segment]),wa={},Ea=w.segment+
1;Ea<E.length;Ea++)wa[Ea]={x:E[Ea].x,y:E[Ea].y,tileUnitDistanceFromAnchor:da},Ea<E.length-1&&(da+=E[Ea+1].dist(E[Ea]));for(w=w.segment||0;0<=w;w--)wa[w]={x:E[w].x,y:E[w].y,tileUnitDistanceFromAnchor:pa},0<w&&(pa+=E[w-1].dist(E[w]));for(pa=0;pa<E.length;pa++)w=wa[pa],this.lineVertexArray.emplaceBack(w.x,w.y,w.tileUnitDistanceFromAnchor)}return{lineStartIndex:R,lineLength:this.lineVertexArray.length-R}};Pd.prototype.addSymbols=function(w,E,R,da,pa,wa,Ea,Ma,Wa,cb,pb,yb){pa=w.indexArray;for(var Kb=w.layoutVertexArray,
Hb=w.segments.prepareSegment(4*E.length,Kb,pa,wa.sortKey),Tb=this.glyphOffsetArray.length,Sb=Hb.vertexLength,qc=this.allowVerticalPlacement&&Ea===Kc.vertical?Math.PI/2:0,bd=wa.text&&wa.text.sections,ed=0;ed<E.length;ed++){var Oc=E[ed],rd=Oc.tl,pd=Oc.tr,wd=Oc.bl,Gd=Oc.br,Od=Oc.tex,Ud=Oc.pixelOffsetTL,Vd=Oc.pixelOffsetBR,Kd=Oc.minFontScaleX,Qd=Oc.minFontScaleY,je=Oc.glyphOffset,Hd=Oc.isSDF;Oc=Oc.sectionIndex;var Ad=Hb.vertexLength,Id=je[1];Vf(Kb,Ma.x,Ma.y,rd.x,Id+rd.y,Od.x,Od.y,R,Hd,Ud.x,Ud.y,Kd,Qd);
Vf(Kb,Ma.x,Ma.y,pd.x,Id+pd.y,Od.x+Od.w,Od.y,R,Hd,Vd.x,Ud.y,Kd,Qd);Vf(Kb,Ma.x,Ma.y,wd.x,Id+wd.y,Od.x,Od.y+Od.h,R,Hd,Ud.x,Vd.y,Kd,Qd);Vf(Kb,Ma.x,Ma.y,Gd.x,Id+Gd.y,Od.x+Od.w,Od.y+Od.h,R,Hd,Vd.x,Vd.y,Kd,Qd);oj(w.dynamicLayoutVertexArray,Ma,qc);pa.emplaceBack(Ad,Ad+1,Ad+2);pa.emplaceBack(Ad+1,Ad+2,Ad+3);Hb.vertexLength+=4;Hb.primitiveLength+=2;this.glyphOffsetArray.emplaceBack(je[0]);ed!==E.length-1&&Oc===E[ed+1].sectionIndex||w.programConfigurations.populatePaintArrays(Kb.length,wa,wa.index,{},yb,bd&&
bd[Oc])}w.placedSymbolArray.emplaceBack(Ma.x,Ma.y,Tb,this.glyphOffsetArray.length-Tb,Sb,Wa,cb,Ma.segment,R?R[0]:0,R?R[1]:0,da[0],da[1],Ea,0,!1,0,pb)};Pd.prototype._addCollisionDebugVertex=function(w,E,R,da,pa,wa){return E.emplaceBack(0,0),w.emplaceBack(R.x,R.y,da,pa,Math.round(wa.x),Math.round(wa.y))};Pd.prototype.addCollisionDebugVertices=function(w,E,R,da,pa,wa,Ea){var Ma=pa.segments.prepareSegment(4,pa.layoutVertexArray,pa.indexArray),Wa=Ma.vertexLength,cb=pa.layoutVertexArray,pb=pa.collisionVertexArray,
yb=Ea.anchorX;Ea=Ea.anchorY;this._addCollisionDebugVertex(cb,pb,wa,yb,Ea,new Md(w,E));this._addCollisionDebugVertex(cb,pb,wa,yb,Ea,new Md(R,E));this._addCollisionDebugVertex(cb,pb,wa,yb,Ea,new Md(R,da));this._addCollisionDebugVertex(cb,pb,wa,yb,Ea,new Md(w,da));Ma.vertexLength+=4;w=pa.indexArray;w.emplaceBack(Wa,Wa+1);w.emplaceBack(Wa+1,Wa+2);w.emplaceBack(Wa+2,Wa+3);w.emplaceBack(Wa+3,Wa);Ma.primitiveLength+=4};Pd.prototype.addDebugCollisionBoxes=function(w,E,R,da){for(;w<E;w++){var pa=this.collisionBoxArray.get(w);
this.addCollisionDebugVertices(pa.x1,pa.y1,pa.x2,pa.y2,da?this.textCollisionBox:this.iconCollisionBox,pa.anchorPoint,R)}};Pd.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData();this.textCollisionBox=new ne(Eg,vb.members,Uh);this.iconCollisionBox=new ne(Eg,vb.members,Uh);for(var w=0;w<this.symbolInstances.length;w++){var E=this.symbolInstances.get(w);this.addDebugCollisionBoxes(E.textBoxStartIndex,E.textBoxEndIndex,E,!0);this.addDebugCollisionBoxes(E.verticalTextBoxStartIndex,
E.verticalTextBoxEndIndex,E,!0);this.addDebugCollisionBoxes(E.iconBoxStartIndex,E.iconBoxEndIndex,E,!1);this.addDebugCollisionBoxes(E.verticalIconBoxStartIndex,E.verticalIconBoxEndIndex,E,!1)}};Pd.prototype._deserializeCollisionBoxesForSymbol=function(w,E,R,da,pa,wa,Ea,Ma,Wa){for(var cb={};E<R;){E=w.get(E);cb.textBox={x1:E.x1,y1:E.y1,x2:E.x2,y2:E.y2,anchorPointX:E.anchorPointX,anchorPointY:E.anchorPointY};cb.textFeatureIndex=E.featureIndex;break}for(;da<pa;){da=w.get(da);cb.verticalTextBox={x1:da.x1,
y1:da.y1,x2:da.x2,y2:da.y2,anchorPointX:da.anchorPointX,anchorPointY:da.anchorPointY};cb.verticalTextFeatureIndex=da.featureIndex;break}for(;wa<Ea;){wa=w.get(wa);cb.iconBox={x1:wa.x1,y1:wa.y1,x2:wa.x2,y2:wa.y2,anchorPointX:wa.anchorPointX,anchorPointY:wa.anchorPointY};cb.iconFeatureIndex=wa.featureIndex;break}for(;Ma<Wa;){w=w.get(Ma);cb.verticalIconBox={x1:w.x1,y1:w.y1,x2:w.x2,y2:w.y2,anchorPointX:w.anchorPointX,anchorPointY:w.anchorPointY};cb.verticalIconFeatureIndex=w.featureIndex;break}return cb};
Pd.prototype.deserializeCollisionBoxes=function(w){this.collisionArrays=[];for(var E=0;E<this.symbolInstances.length;E++){var R=this.symbolInstances.get(E);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(w,R.textBoxStartIndex,R.textBoxEndIndex,R.verticalTextBoxStartIndex,R.verticalTextBoxEndIndex,R.iconBoxStartIndex,R.iconBoxEndIndex,R.verticalIconBoxStartIndex,R.verticalIconBoxEndIndex))}};Pd.prototype.hasTextData=function(){return 0<this.text.segments.get().length};Pd.prototype.hasIconData=
function(){return 0<this.icon.segments.get().length};Pd.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox};Pd.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&0<this.textCollisionBox.segments.get().length};Pd.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&0<this.iconCollisionBox.segments.get().length};Pd.prototype.addIndicesForPlacedSymbol=function(w,E){var R=w.placedSymbolArray.get(E);E=R.vertexStartIndex+4*R.numGlyphs;
for(R=R.vertexStartIndex;R<E;R+=4)w.indexArray.emplaceBack(R,R+1,R+2),w.indexArray.emplaceBack(R+1,R+2,R+3)};Pd.prototype.getSortedSymbolIndexes=function(w){if(this.sortedAngle===w&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;var E=Math.sin(w);w=Math.cos(w);for(var R=[],da=[],pa=[],wa=0;wa<this.symbolInstances.length;++wa){pa.push(wa);var Ea=this.symbolInstances.get(wa);R.push(0|Math.round(E*Ea.anchorX+w*Ea.anchorY));da.push(Ea.featureIndex)}return pa.sort(function(Ma,Wa){return R[Ma]-
R[Wa]||da[Wa]-da[Ma]}),pa};Pd.prototype.addToSortKeyRanges=function(w,E){var R=this.sortKeyRanges[this.sortKeyRanges.length-1];R&&R.sortKey===E?R.symbolInstanceEnd=w+1:this.sortKeyRanges.push({sortKey:E,symbolInstanceStart:w,symbolInstanceEnd:w+1})};Pd.prototype.sortFeatures=function(w){var E=this;if(this.sortFeaturesByY&&this.sortedAngle!==w&&!(1<this.text.segments.get().length||1<this.icon.segments.get().length)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(w);this.sortedAngle=w;this.text.indexArray.clear();
this.icon.indexArray.clear();this.featureSortOrder=[];w=0;for(var R=this.symbolInstanceIndexes;w<R.length;w+=1){var da=this.symbolInstances.get(R[w]);this.featureSortOrder.push(da.featureIndex);[da.rightJustifiedTextSymbolIndex,da.centerJustifiedTextSymbolIndex,da.leftJustifiedTextSymbolIndex].forEach(function(pa,wa,Ea){0<=pa&&Ea.indexOf(pa)===wa&&E.addIndicesForPlacedSymbol(E.text,pa)});0<=da.verticalPlacedTextSymbolIndex&&this.addIndicesForPlacedSymbol(this.text,da.verticalPlacedTextSymbolIndex);
0<=da.placedIconSymbolIndex&&this.addIndicesForPlacedSymbol(this.icon,da.placedIconSymbolIndex);0<=da.verticalPlacedIconSymbolIndex&&this.addIndicesForPlacedSymbol(this.icon,da.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray);this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}};Bc("SymbolBucket",Pd,{omit:["layers","collisionBoxArray","features","compareText"]});Pd.MAX_GLYPHS=65535;Pd.addDynamicAttributes=oj;var yf=
new Pf({"symbol-placement":new xd(Cb.layout_symbol["symbol-placement"]),"symbol-spacing":new xd(Cb.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new xd(Cb.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Zd(Cb.layout_symbol["symbol-sort-key"]),"symbol-z-order":new xd(Cb.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new xd(Cb.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new xd(Cb.layout_symbol["icon-ignore-placement"]),"icon-optional":new xd(Cb.layout_symbol["icon-optional"]),
"icon-rotation-alignment":new xd(Cb.layout_symbol["icon-rotation-alignment"]),"icon-size":new Zd(Cb.layout_symbol["icon-size"]),"icon-text-fit":new xd(Cb.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new xd(Cb.layout_symbol["icon-text-fit-padding"]),"icon-image":new Zd(Cb.layout_symbol["icon-image"]),"icon-rotate":new Zd(Cb.layout_symbol["icon-rotate"]),"icon-padding":new xd(Cb.layout_symbol["icon-padding"]),"icon-keep-upright":new xd(Cb.layout_symbol["icon-keep-upright"]),"icon-offset":new Zd(Cb.layout_symbol["icon-offset"]),
"icon-anchor":new Zd(Cb.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new xd(Cb.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new xd(Cb.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new xd(Cb.layout_symbol["text-rotation-alignment"]),"text-field":new Zd(Cb.layout_symbol["text-field"]),"text-font":new Zd(Cb.layout_symbol["text-font"]),"text-size":new Zd(Cb.layout_symbol["text-size"]),"text-max-width":new Zd(Cb.layout_symbol["text-max-width"]),"text-line-height":new xd(Cb.layout_symbol["text-line-height"]),
"text-letter-spacing":new Zd(Cb.layout_symbol["text-letter-spacing"]),"text-justify":new Zd(Cb.layout_symbol["text-justify"]),"text-radial-offset":new Zd(Cb.layout_symbol["text-radial-offset"]),"text-variable-anchor":new xd(Cb.layout_symbol["text-variable-anchor"]),"text-anchor":new Zd(Cb.layout_symbol["text-anchor"]),"text-max-angle":new xd(Cb.layout_symbol["text-max-angle"]),"text-writing-mode":new xd(Cb.layout_symbol["text-writing-mode"]),"text-rotate":new Zd(Cb.layout_symbol["text-rotate"]),"text-padding":new xd(Cb.layout_symbol["text-padding"]),
"text-keep-upright":new xd(Cb.layout_symbol["text-keep-upright"]),"text-transform":new Zd(Cb.layout_symbol["text-transform"]),"text-offset":new Zd(Cb.layout_symbol["text-offset"]),"text-allow-overlap":new xd(Cb.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new xd(Cb.layout_symbol["text-ignore-placement"]),"text-optional":new xd(Cb.layout_symbol["text-optional"])}),Ze={paint:new Pf({"icon-opacity":new Zd(Cb.paint_symbol["icon-opacity"]),"icon-color":new Zd(Cb.paint_symbol["icon-color"]),
"icon-halo-color":new Zd(Cb.paint_symbol["icon-halo-color"]),"icon-halo-width":new Zd(Cb.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Zd(Cb.paint_symbol["icon-halo-blur"]),"icon-translate":new xd(Cb.paint_symbol["icon-translate"]),"icon-translate-anchor":new xd(Cb.paint_symbol["icon-translate-anchor"]),"text-opacity":new Zd(Cb.paint_symbol["text-opacity"]),"text-color":new Zd(Cb.paint_symbol["text-color"],{runtimeType:sd,getOverride:function(w){return w.textColor},hasOverride:function(w){return!!w.textColor}}),
"text-halo-color":new Zd(Cb.paint_symbol["text-halo-color"]),"text-halo-width":new Zd(Cb.paint_symbol["text-halo-width"]),"text-halo-blur":new Zd(Cb.paint_symbol["text-halo-blur"]),"text-translate":new xd(Cb.paint_symbol["text-translate"]),"text-translate-anchor":new xd(Cb.paint_symbol["text-translate-anchor"])}),layout:yf},hg=function(w){this.type=w.property.overrides?w.property.overrides.runtimeType:fd;this.defaultValue=w};hg.prototype.evaluate=function(w){if(w.formattedSection){var E=this.defaultValue.property.overrides;
if(E&&E.hasOverride(w.formattedSection))return E.getOverride(w.formattedSection)}return w.feature&&w.featureState?this.defaultValue.evaluate(w.feature,w.featureState):this.defaultValue.property.specification.default};hg.prototype.eachChild=function(w){this.defaultValue.isConstant()||w(this.defaultValue.value._styleExpression.expression)};hg.prototype.outputDefined=function(){return!1};hg.prototype.serialize=function(){return null};Bc("FormatSectionOverride",hg,{omit:["defaultValue"]});var bi=function(w){function E(R){w.call(this,
R,Ze)}return w&&(E.__proto__=w),(E.prototype=Object.create(w&&w.prototype)).constructor=E,E.prototype.recalculate=function(R,da){if(w.prototype.recalculate.call(this,R,da),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),
"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement"))if(R=this.layout.get("text-writing-mode")){da=[];for(var pa=0;pa<R.length;pa+=1){var wa=R[pa];0>da.indexOf(wa)&&da.push(wa)}this.layout._values["text-writing-mode"]=da}else this.layout._values["text-writing-mode"]=
["horizontal"];this._setPaintOverrides()},E.prototype.getValueAndResolveTokens=function(R,da,pa,wa){pa=this.layout.get(R).evaluate(da,{},pa,wa);R=this._unevaluatedLayout._values[R];return R.isDataDriven()||Gc(R.value)||!pa?pa:function(Ea,Ma){return Ma.replace(/{([^{}]+)}/g,function(Wa,cb){return cb in Ea?String(Ea[cb]):""})}(da.properties,pa)},E.prototype.createBucket=function(R){return new Pd(R)},E.prototype.queryRadius=function(){return 0},E.prototype.queryIntersectsFeature=function(){return!1},
E.prototype._setPaintOverrides=function(){for(var R=0,da=Ze.paint.overridableProperties;R<da.length;R+=1){var pa=da[R];if(E.hasPaintOverride(this.layout,pa)){var wa=this.paint.get(pa);var Ea=new hg(wa);Ea=new Zh(Ea,wa.property.specification);Ea="constant"===wa.value.kind||"source"===wa.value.kind?new Yd("source",Ea):new zf("composite",Ea,wa.value.zoomStops,wa.value._interpolationType);this.paint._values[pa]=new lf(wa.property,Ea,wa.parameters)}}},E.prototype._handleOverridablePaintPropertyUpdate=
function(R,da,pa){return!(!this.layout||da.isDataDriven()||pa.isDataDriven())&&E.hasPaintOverride(this.layout,R)},E.hasPaintOverride=function(R,da){R=R.get("text-field");var pa=Ze.paint.properties[da],wa=!1,Ea=function(Wa){for(var cb=0;cb<Wa.length;cb+=1)if(pa.overrides&&pa.overrides.hasOverride(Wa[cb]))return void(wa=!0)};if("constant"===R.value.kind&&R.value.value instanceof se)Ea(R.value.value.sections);else if("source"===R.value.kind){var Ma=function(Wa){wa||(Wa instanceof rf&&oa(Wa.value)===
Xd?Ea(Wa.value.sections):Wa instanceof uf?Ea(Wa.sections):Wa.eachChild(Ma))};da=R.value;da._styleExpression&&Ma(da._styleExpression.expression)}return wa},E}(og),ej={paint:new Pf({"background-color":new xd(Cb.paint_background["background-color"]),"background-pattern":new th(Cb.paint_background["background-pattern"]),"background-opacity":new xd(Cb.paint_background["background-opacity"])})},gh=function(w){function E(R){w.call(this,R,ej)}return w&&(E.__proto__=w),(E.prototype=Object.create(w&&w.prototype)).constructor=
E,E}(og),fj={paint:new Pf({"raster-opacity":new xd(Cb.paint_raster["raster-opacity"]),"raster-hue-rotate":new xd(Cb.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new xd(Cb.paint_raster["raster-brightness-min"]),"raster-brightness-max":new xd(Cb.paint_raster["raster-brightness-max"]),"raster-saturation":new xd(Cb.paint_raster["raster-saturation"]),"raster-contrast":new xd(Cb.paint_raster["raster-contrast"]),"raster-resampling":new xd(Cb.paint_raster["raster-resampling"]),"raster-fade-duration":new xd(Cb.paint_raster["raster-fade-duration"])})},
Oe=function(w){function E(R){w.call(this,R,fj)}return w&&(E.__proto__=w),(E.prototype=Object.create(w&&w.prototype)).constructor=E,E}(og),He=function(w){function E(R){w.call(this,R,{});this.implementation=R}return w&&(E.__proto__=w),(E.prototype=Object.create(w&&w.prototype)).constructor=E,E.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},E.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},E.prototype.recalculate=function(){},E.prototype.updateTransitions=
function(){},E.prototype.hasTransition=function(){},E.prototype.serialize=function(){},E.prototype.onAdd=function(R){this.implementation.onAdd&&this.implementation.onAdd(R,R.painter.context.gl)},E.prototype.onRemove=function(R){this.implementation.onRemove&&this.implementation.onRemove(R,R.painter.context.gl)},E}(og),ng={circle:Zk,heatmap:$k,hillshade:dk,fill:Ik,"fill-extrusion":ol,line:Oa,symbol:bi,background:gh,raster:Oe},zk=self.HTMLImageElement,pi=self.HTMLCanvasElement,qi=self.HTMLVideoElement,
Ui=self.ImageData,Th=self.ImageBitmap,zj=function(w,E,R,da){this.context=w;this.format=R;this.texture=w.gl.createTexture();this.update(E,da)};zj.prototype.update=function(w,E,R){var da=w.width,pa=w.height,wa=!(this.size&&this.size[0]===da&&this.size[1]===pa||R),Ea=this.context,Ma=Ea.gl;(this.useMipmap=!(!E||!E.useMipmap),Ma.bindTexture(Ma.TEXTURE_2D,this.texture),Ea.pixelStoreUnpackFlipY.set(!1),Ea.pixelStoreUnpack.set(1),Ea.pixelStoreUnpackPremultiplyAlpha.set(this.format===Ma.RGBA&&(!E||!1!==E.premultiply)),
wa)?(this.size=[da,pa],w instanceof zk||w instanceof pi||w instanceof qi||w instanceof Ui||Th&&w instanceof Th?Ma.texImage2D(Ma.TEXTURE_2D,0,this.format,this.format,Ma.UNSIGNED_BYTE,w):Ma.texImage2D(Ma.TEXTURE_2D,0,this.format,da,pa,0,this.format,Ma.UNSIGNED_BYTE,w.data)):(R=R||{x:0,y:0},E=R.x,R=R.y,w instanceof zk||w instanceof pi||w instanceof qi||w instanceof Ui||Th&&w instanceof Th?Ma.texSubImage2D(Ma.TEXTURE_2D,0,E,R,Ma.RGBA,Ma.UNSIGNED_BYTE,w):Ma.texSubImage2D(Ma.TEXTURE_2D,0,E,R,da,pa,Ma.RGBA,
Ma.UNSIGNED_BYTE,w.data));this.useMipmap&&this.isSizePowerOfTwo()&&Ma.generateMipmap(Ma.TEXTURE_2D)};zj.prototype.bind=function(w,E,R){var da=this.context.gl;da.bindTexture(da.TEXTURE_2D,this.texture);R!==da.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(R=da.LINEAR);w!==this.filter&&(da.texParameteri(da.TEXTURE_2D,da.TEXTURE_MAG_FILTER,w),da.texParameteri(da.TEXTURE_2D,da.TEXTURE_MIN_FILTER,R||w),this.filter=w);E!==this.wrap&&(da.texParameteri(da.TEXTURE_2D,da.TEXTURE_WRAP_S,E),da.texParameteri(da.TEXTURE_2D,
da.TEXTURE_WRAP_T,E),this.wrap=E)};zj.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&0==Math.log(this.size[0])/Math.LN2%1};zj.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture);this.texture=null};var pl=function(w){var E=this;this._callback=w;this._triggered=!1;"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){E._triggered=!1;E._callback()})};pl.prototype.trigger=function(){var w=this;this._triggered||
(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){w._triggered=!1;w._callback()},0))};pl.prototype.remove=function(){delete this._channel;this._callback=function(){}};var ek=function(w,E,R){this.target=w;this.parent=E;this.mapId=R;this.callbacks={};this.tasks={};this.taskQueue=[];this.cancelCallbacks={};u(["receive","process"],this);this.invoker=new pl(this.process);this.target.addEventListener("message",this.receive,!1);this.globalScope=A()?w:self};ek.prototype.send=
function(w,E,R,da,pa){var wa=this;void 0===pa&&(pa=!1);var Ea=Math.round(1E18*Math.random()).toString(36).substring(0,10);R&&(this.callbacks[Ea]=R);var Ma=B(this.globalScope)?void 0:[];return this.target.postMessage({id:Ea,type:w,hasCallback:!!R,targetMapId:da,mustQueue:pa,sourceMapId:this.mapId,data:jd(E,Ma)},Ma),{cancel:function(){R&&delete wa.callbacks[Ea];wa.target.postMessage({id:Ea,type:"<cancel>",targetMapId:da,sourceMapId:wa.mapId})}}};ek.prototype.receive=function(w){var E=w.data;!(w=E.id)||
E.targetMapId&&this.mapId!==E.targetMapId||("<cancel>"===E.type?(delete this.tasks[w],E=this.cancelCallbacks[w],delete this.cancelCallbacks[w],E&&E()):A()||E.mustQueue?(this.tasks[w]=E,this.taskQueue.push(w),this.invoker.trigger()):this.processTask(w,E))};ek.prototype.process=function(){if(this.taskQueue.length){var w=this.taskQueue.shift(),E=this.tasks[w];delete this.tasks[w];this.taskQueue.length&&this.invoker.trigger();E&&this.processTask(w,E)}};ek.prototype.processTask=function(w,E){var R=this;
if("<response>"===E.type){var da=this.callbacks[w];delete this.callbacks[w];da&&(E.error?da(ld(E.error)):da(null,ld(E.data)))}else{var pa=!1,wa=B(this.globalScope)?void 0:[];da=E.hasCallback?function(Wa,cb){pa=!0;delete R.cancelCallbacks[w];R.target.postMessage({id:w,type:"<response>",sourceMapId:R.mapId,error:Wa?jd(Wa):null,data:jd(cb,wa)},wa)}:function(Wa){pa=!0};var Ea=null,Ma=ld(E.data);this.parent[E.type]?Ea=this.parent[E.type](E.sourceMapId,Ma,da):this.parent.getWorkerSource?(Ea=E.type.split("."),
Ea=this.parent.getWorkerSource(E.sourceMapId,Ea[0],Ma.source)[Ea[1]](Ma,da)):da(Error("Could not find function "+E.type));!pa&&Ea&&Ea.cancel&&(this.cancelCallbacks[w]=Ea.cancel)}};ek.prototype.remove=function(){this.invoker.remove();this.target.removeEventListener("message",this.receive,!1)};var nf=function(w,E){w&&(E?this.setSouthWest(w).setNorthEast(E):4===w.length?this.setSouthWest([w[0],w[1]]).setNorthEast([w[2],w[3]]):this.setSouthWest(w[0]).setNorthEast(w[1]))};nf.prototype.setNorthEast=function(w){return this._ne=
w instanceof Ue?new Ue(w.lng,w.lat):Ue.convert(w),this};nf.prototype.setSouthWest=function(w){return this._sw=w instanceof Ue?new Ue(w.lng,w.lat):Ue.convert(w),this};nf.prototype.extend=function(w){var E,R=this._sw,da=this._ne;if(w instanceof Ue)var pa=E=w;else{if(!(w instanceof nf))return Array.isArray(w)?4===w.length||w.every(Array.isArray)?this.extend(nf.convert(w)):this.extend(Ue.convert(w)):this;if(pa=w._ne,!(E=w._sw)||!pa)return this}return R||da?(R.lng=Math.min(E.lng,R.lng),R.lat=Math.min(E.lat,
R.lat),da.lng=Math.max(pa.lng,da.lng),da.lat=Math.max(pa.lat,da.lat)):(this._sw=new Ue(E.lng,E.lat),this._ne=new Ue(pa.lng,pa.lat)),this};nf.prototype.getCenter=function(){return new Ue((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)};nf.prototype.getSouthWest=function(){return this._sw};nf.prototype.getNorthEast=function(){return this._ne};nf.prototype.getNorthWest=function(){return new Ue(this.getWest(),this.getNorth())};nf.prototype.getSouthEast=function(){return new Ue(this.getEast(),
this.getSouth())};nf.prototype.getWest=function(){return this._sw.lng};nf.prototype.getSouth=function(){return this._sw.lat};nf.prototype.getEast=function(){return this._ne.lng};nf.prototype.getNorth=function(){return this._ne.lat};nf.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]};nf.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"};nf.prototype.isEmpty=function(){return!(this._sw&&this._ne)};nf.prototype.contains=function(w){var E=
Ue.convert(w);w=E.lng;E=E.lat;var R=this._sw.lng<=w&&w<=this._ne.lng;return this._sw.lng>this._ne.lng&&(R=this._sw.lng>=w&&w>=this._ne.lng),this._sw.lat<=E&&E<=this._ne.lat&&R};nf.convert=function(w){return!w||w instanceof nf?w:new nf(w)};var Ue=function(w,E){if(isNaN(w)||isNaN(E))throw Error("Invalid LngLat object: ("+w+", "+E+")");if(this.lng=+w,this.lat=+E,90<this.lat||-90>this.lat)throw Error("Invalid LngLat latitude value: must be between -90 and 90");};Ue.prototype.wrap=function(){return new Ue(d(this.lng,
-180,180),this.lat)};Ue.prototype.toArray=function(){return[this.lng,this.lat]};Ue.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"};Ue.prototype.distanceTo=function(w){var E=Math.PI/180,R=this.lat*E,da=w.lat*E;return 6371008.8*Math.acos(Math.min(Math.sin(R)*Math.sin(da)+Math.cos(R)*Math.cos(da)*Math.cos((w.lng-this.lng)*E),1))};Ue.prototype.toBounds=function(w){void 0===w&&(w=0);w=360*w/40075017;var E=w/Math.cos(Math.PI/180*this.lat);return new nf(new Ue(this.lng-E,this.lat-
w),new Ue(this.lng+E,this.lat+w))};Ue.convert=function(w){if(w instanceof Ue)return w;if(Array.isArray(w)&&(2===w.length||3===w.length))return new Ue(Number(w[0]),Number(w[1]));if(!Array.isArray(w)&&"object"==typeof w&&null!==w)return new Ue(Number("lng"in w?w.lng:w.lon),Number(w.lat));throw Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]");};var bl=1.27420176E7*Math.PI,Aj=function(w,
E,R){void 0===R&&(R=0);this.x=+w;this.y=+E;this.z=+R};Aj.fromLngLat=function(w,E){void 0===E&&(E=0);w=Ue.convert(w);return new Aj(Kh(w.lng),Tg(w.lat),E/(bl*Math.cos(w.lat*Math.PI/180)))};Aj.prototype.toLngLat=function(){return new Ue(360*this.x-180,bg(this.y))};Aj.prototype.toAltitude=function(){return this.z*bl*Math.cos(bg(this.y)*Math.PI/180)};Aj.prototype.meterInMercatorCoordinateUnits=function(){return 1/bl*(w=bg(this.y),1/Math.cos(w*Math.PI/180));var w};var Bj=function(w,E,R){this.z=w;this.x=
E;this.y=R;this.key=Hg(0,w,w,E,R)};Bj.prototype.equals=function(w){return this.z===w.z&&this.x===w.x&&this.y===w.y};Bj.prototype.url=function(w,E){var R,da,pa,wa,Ea,Ma=(da=this.y,pa=this.z,wa=Af(256*(R=this.x),256*(da=Math.pow(2,pa)-da-1),pa),Ea=Af(256*(R+1),256*(da+1),pa),wa[0]+","+wa[1]+","+Ea[0]+","+Ea[1]),Wa;R="";for(da=this.z;0<da;da--)R+=(this.x&(Wa=1<<da-1)?1:0)+(this.y&Wa?2:0);Wa=R;return w[(this.x+this.y)%w.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",
String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===E?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",Wa).replace("{bbox-epsg-3857}",Ma)};Bj.prototype.getTilePoint=function(w){var E=Math.pow(2,this.z);return new Md(8192*(w.x*E-this.x),8192*(w.y*E-this.y))};Bj.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var wl=function(w,E){this.wrap=w;this.canonical=E;this.key=Hg(w,E.z,E.z,E.x,E.y)},of=function(w,E,R,da,pa){this.overscaledZ=w;this.wrap=E;this.canonical=
new Bj(R,+da,+pa);this.key=Hg(E,w,R,da,pa)};of.prototype.equals=function(w){return this.overscaledZ===w.overscaledZ&&this.wrap===w.wrap&&this.canonical.equals(w.canonical)};of.prototype.scaledTo=function(w){var E=this.canonical.z-w;return w>this.canonical.z?new of(w,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new of(w,this.wrap,w,this.canonical.x>>E,this.canonical.y>>E)};of.prototype.calculateScaledKey=function(w,E){var R=this.canonical.z-w;return w>this.canonical.z?Hg(this.wrap*
+E,w,this.canonical.z,this.canonical.x,this.canonical.y):Hg(this.wrap*+E,w,w,this.canonical.x>>R,this.canonical.y>>R)};of.prototype.isChildOf=function(w){if(w.wrap!==this.wrap)return!1;var E=this.canonical.z-w.canonical.z;return 0===w.overscaledZ||w.overscaledZ<this.overscaledZ&&w.canonical.x===this.canonical.x>>E&&w.canonical.y===this.canonical.y>>E};of.prototype.children=function(w){if(this.overscaledZ>=w)return[new of(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];
w=this.canonical.z+1;var E=2*this.canonical.x,R=2*this.canonical.y;return[new of(w,this.wrap,w,E,R),new of(w,this.wrap,w,E+1,R),new of(w,this.wrap,w,E,R+1),new of(w,this.wrap,w,E+1,R+1)]};of.prototype.isLessThan=function(w){return this.wrap<w.wrap||!(this.wrap>w.wrap)&&(this.overscaledZ<w.overscaledZ||!(this.overscaledZ>w.overscaledZ)&&(this.canonical.x<w.canonical.x||!(this.canonical.x>w.canonical.x)&&this.canonical.y<w.canonical.y))};of.prototype.wrapped=function(){return new of(this.overscaledZ,
0,this.canonical.z,this.canonical.x,this.canonical.y)};of.prototype.unwrapTo=function(w){return new of(this.overscaledZ,w,this.canonical.z,this.canonical.x,this.canonical.y)};of.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)};of.prototype.toUnwrapped=function(){return new wl(this.wrap,this.canonical)};of.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y};of.prototype.getTilePoint=function(w){return this.canonical.getTilePoint(new Aj(w.x-
this.wrap,w.y))};Bc("CanonicalTileID",Bj);Bc("OverscaledTileID",of,{omit:["posMatrix"]});var zi=function(w,E,R){if(this.uid=w,E.height!==E.width)throw new RangeError("DEM tiles must be square");if(R&&"mapbox"!==R&&"terrarium"!==R)return y('"'+R+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=E.height;w=this.dim=E.height-2;this.data=new Uint32Array(E.data.buffer);this.encoding=R||"mapbox";for(E=0;E<w;E++)this.data[this._idx(-1,E)]=this.data[this._idx(0,
E)],this.data[this._idx(w,E)]=this.data[this._idx(w-1,E)],this.data[this._idx(E,-1)]=this.data[this._idx(E,0)],this.data[this._idx(E,w)]=this.data[this._idx(E,w-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)];this.data[this._idx(w,-1)]=this.data[this._idx(w-1,0)];this.data[this._idx(-1,w)]=this.data[this._idx(0,w-1)];this.data[this._idx(w,w)]=this.data[this._idx(w-1,w-1)]};zi.prototype.get=function(w,E){var R=new Uint8Array(this.data.buffer);w=4*this._idx(w,E);return("terrarium"===this.encoding?
this._unpackTerrarium:this._unpackMapbox)(R[w],R[w+1],R[w+2])};zi.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1E4]};zi.prototype._idx=function(w,E){if(-1>w||w>=this.dim+1||-1>E||E>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(E+1)*this.stride+(w+1)};zi.prototype._unpackMapbox=function(w,E,R){return(65536*w+256*E+R)/10-1E4};zi.prototype._unpackTerrarium=function(w,E,R){return 256*w+E+R/256-32768};
zi.prototype.getPixels=function(){return new wf({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))};zi.prototype.backfillBorder=function(w,E,R){if(this.dim!==w.dim)throw Error("dem dimension mismatch");var da=E*this.dim,pa=E*this.dim+this.dim,wa=R*this.dim,Ea=R*this.dim+this.dim;switch(E){case -1:da=pa-1;break;case 1:pa=da+1}switch(R){case -1:wa=Ea-1;break;case 1:Ea=wa+1}E=-E*this.dim;for(R=-R*this.dim;wa<Ea;wa++)for(var Ma=da;Ma<pa;Ma++)this.data[this._idx(Ma,wa)]=w.data[this._idx(Ma+
E,wa+R)]};Bc("DEMData",zi);var cl=function(w){this._stringToNumber={};this._numberToString=[];for(var E=0;E<w.length;E++){var R=w[E];this._stringToNumber[R]=E;this._numberToString[E]=R}};cl.prototype.encode=function(w){return this._stringToNumber[w]};cl.prototype.decode=function(w){return this._numberToString[w]};var dl=function(w,E,R,da,pa){this.type="Feature";this._vectorTileFeature=w;w._z=E;w._x=R;w._y=da;this.properties=w.properties;this.id=pa},ql={geometry:{configurable:!0}};ql.geometry.get=
function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry};ql.geometry.set=function(w){this._geometry=w};dl.prototype.toJSON=function(){var w={geometry:this.geometry},E;for(E in this)"_geometry"!==E&&"_vectorTileFeature"!==E&&(w[E]=this[E]);return w};Object.defineProperties(dl.prototype,ql);var fk=function(){this.state={};this.stateChanges={};this.deletedStates=
{}};fk.prototype.updateState=function(w,E,R){E=String(E);if(this.stateChanges[w]=this.stateChanges[w]||{},this.stateChanges[w][E]=this.stateChanges[w][E]||{},f(this.stateChanges[w][E],R),null===this.deletedStates[w])for(var da in this.deletedStates[w]={},this.state[w])da!==E&&(this.deletedStates[w][da]=null);else if(this.deletedStates[w]&&null===this.deletedStates[w][E])for(var pa in this.deletedStates[w][E]={},this.state[w][E])R[pa]||(this.deletedStates[w][E][pa]=null);else for(var wa in R)this.deletedStates[w]&&
this.deletedStates[w][E]&&null===this.deletedStates[w][E][wa]&&delete this.deletedStates[w][E][wa]};fk.prototype.removeFeatureState=function(w,E,R){if(null!==this.deletedStates[w]){var da=String(E);if(this.deletedStates[w]=this.deletedStates[w]||{},R&&void 0!==E)null!==this.deletedStates[w][da]&&(this.deletedStates[w][da]=this.deletedStates[w][da]||{},this.deletedStates[w][da][R]=null);else if(void 0!==E)if(this.stateChanges[w]&&this.stateChanges[w][da])for(R in this.deletedStates[w][da]={},this.stateChanges[w][da])this.deletedStates[w][da][R]=
null;else this.deletedStates[w][da]=null;else this.deletedStates[w]=null}};fk.prototype.getState=function(w,E){var R=String(E);R=f({},(this.state[w]||{})[R],(this.stateChanges[w]||{})[R]);if(null===this.deletedStates[w])return{};if(this.deletedStates[w]){w=this.deletedStates[w][E];if(null===w)return{};for(var da in w)delete R[da]}return R};fk.prototype.initializeTileState=function(w,E){w.setFeatureState(this.state,E)};fk.prototype.coalesceChanges=function(w,E){var R={};for(Ea in this.stateChanges){this.state[Ea]=
this.state[Ea]||{};var da={},pa;for(pa in this.stateChanges[Ea])this.state[Ea][pa]||(this.state[Ea][pa]={}),f(this.state[Ea][pa],this.stateChanges[Ea][pa]),da[pa]=this.state[Ea][pa];R[Ea]=da}for(var wa in this.deletedStates){this.state[wa]=this.state[wa]||{};var Ea={};if(null===this.deletedStates[wa])for(var Ma in this.state[wa])Ea[Ma]={},this.state[wa][Ma]={};else for(var Wa in this.deletedStates[wa]){if(null===this.deletedStates[wa][Wa])this.state[wa][Wa]={};else for(da=0,pa=Object.keys(this.deletedStates[wa][Wa]);da<
pa.length;da+=1)delete this.state[wa][Wa][pa[da]];Ea[Wa]=this.state[wa][Wa]}R[wa]=R[wa]||{};f(R[wa],Ea)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(R).length)for(var cb in w)w[cb].setFeatureState(R,E)};var Ai=function(w,E){this.tileID=w;this.x=w.canonical.x;this.y=w.canonical.y;this.z=w.canonical.z;this.grid=new Rc(8192,16,0);this.grid3D=new Rc(8192,16,0);this.featureIndexArray=new di;this.promoteId=E};Ai.prototype.insert=function(w,E,R,da,pa,wa){w=this.featureIndexArray.length;
this.featureIndexArray.emplaceBack(R,da,pa);R=wa?this.grid3D:this.grid;for(da=0;da<E.length;da++){pa=E[da];wa=[1/0,1/0,-1/0,-1/0];for(var Ea=0;Ea<pa.length;Ea++){var Ma=pa[Ea];wa[0]=Math.min(wa[0],Ma.x);wa[1]=Math.min(wa[1],Ma.y);wa[2]=Math.max(wa[2],Ma.x);wa[3]=Math.max(wa[3],Ma.y)}8192>wa[0]&&8192>wa[1]&&0<=wa[2]&&0<=wa[3]&&R.insert(w,wa[0],wa[1],wa[2],wa[3])}};Ai.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=(new rh.VectorTile(new Ae(this.rawTileData))).layers,this.sourceLayerCoder=
new cl(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers};Ai.prototype.query=function(w,E,R,da){var pa=this;this.loadVTLayers();var wa=w.params||{},Ea=8192/w.tileSize/w.scale,Ma=tb(wa.filter),Wa=w.queryGeometry,cb=w.queryPadding*Ea,pb=ug(Wa),yb=this.grid.query(pb.minX-cb,pb.minY-cb,pb.maxX+cb,pb.maxY+cb),Kb=ug(w.cameraQueryGeometry);pb=0;for(Kb=this.grid3D.query(Kb.minX-cb,Kb.minY-cb,Kb.maxX+cb,Kb.maxY+cb,function(Sb,qc,bd,ed){a:{var Oc=w.cameraQueryGeometry;Sb-=
cb;qc-=cb;bd+=cb;ed+=cb;for(var rd=0;rd<Oc.length;rd+=1){var pd=Oc[rd];if(Sb<=pd.x&&qc<=pd.y&&bd>=pd.x&&ed>=pd.y){Oc=!0;break a}}Sb=[new Md(Sb,qc),new Md(Sb,ed),new Md(bd,ed),new Md(bd,qc)];if(2<Oc.length)for(qc=0;qc<Sb.length;qc+=1)if(gd(Oc,Sb[qc])){Oc=!0;break a}for(qc=0;qc<Oc.length-1;qc++){ed=Oc[qc];bd=Oc[qc+1];rd=Sb;pd=rd[0];var wd=rd[2];ed.x<pd.x&&bd.x<pd.x||ed.x>wd.x&&bd.x>wd.x||ed.y<pd.y&&bd.y<pd.y||ed.y>wd.y&&bd.y>wd.y?ed=!1:(pd=D(ed,bd,rd[0]),ed=pd!==D(ed,bd,rd[1])||pd!==D(ed,bd,rd[2])||
pd!==D(ed,bd,rd[3]));if(ed){Oc=!0;break a}}Oc=!1}return Oc});pb<Kb.length;pb+=1)yb.push(Kb[pb]);yb.sort(Ni);var Hb,Tb={};pb=function(Sb){Sb=yb[Sb];if(Sb!==Hb){Hb=Sb;Sb=pa.featureIndexArray.get(Sb);var qc=null;pa.loadMatchingFeature(Tb,Sb.bucketIndex,Sb.sourceLayerIndex,Sb.featureIndex,Ma,wa.layers,wa.availableImages,E,R,da,function(bd,ed,Oc){return qc||(qc=re(bd)),ed.queryIntersectsFeature(Wa,bd,Oc,qc,pa.z,w.transform,Ea,w.pixelPosMatrix)})}};for(Kb=0;Kb<yb.length;Kb++)pb(Kb);return Tb};Ai.prototype.loadMatchingFeature=
function(w,E,R,da,pa,wa,Ea,Ma,Wa,cb,pb){E=this.bucketLayerIDs[E];var yb;if(!(yb=!wa))a:{for(yb=0;yb<wa.length;yb++)if(0<=E.indexOf(wa[yb])){yb=!0;break a}yb=!1}if(yb&&(yb=this.sourceLayerCoder.decode(R),R=this.vtLayers[yb].feature(da),pa.filter(new Ke(this.tileID.overscaledZ),R)))for(pa=this.getId(R,yb),yb=0;yb<E.length;yb++){var Kb=E[yb];if(!(wa&&0>wa.indexOf(Kb))){var Hb=Ma[Kb];if(Hb){var Tb={};void 0!==pa&&cb&&(Tb=cb.getState(Hb.sourceLayer||"_geojsonTileLayer",pa));var Sb=Wa[Kb];Sb.paint=Ug(Sb.paint,
Hb.paint,R,Tb,Ea);Sb.layout=Ug(Sb.layout,Hb.layout,R,Tb,Ea);if(Hb=!pb||pb(R,Hb,Tb))Tb=new dl(R,this.z,this.x,this.y,pa),Tb.layer=Sb,Sb=w[Kb],void 0===Sb&&(Sb=w[Kb]=[]),Sb.push({featureIndex:da,feature:Tb,intersectionZ:Hb})}}}};Ai.prototype.lookupSymbolFeatures=function(w,E,R,da,pa,wa,Ea,Ma){var Wa={};this.loadVTLayers();pa=tb(pa);for(var cb=0;cb<w.length;cb+=1)this.loadMatchingFeature(Wa,R,da,w[cb],pa,wa,Ea,Ma,E);return Wa};Ai.prototype.hasLayer=function(w){for(var E=0,R=this.bucketLayerIDs;E<R.length;E+=
1)for(var da=0,pa=R[E];da<pa.length;da+=1)if(w===pa[da])return!0;return!1};Ai.prototype.getId=function(w,E){var R=w.id;return this.promoteId&&"boolean"==typeof(R=w.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[E]])&&(R=Number(R)),R};Bc("FeatureIndex",Ai,{omit:["rawTileData","sourceLayerCoder"]});var xf=function(w,E){this.tileID=w;this.uid=kg++;this.uses=0;this.tileSize=E;this.buckets={};this.expirationTime=null;this.queryPadding=0;this.hasRTLText=this.hasSymbolBuckets=!1;
this.dependencies={};this.expiredRequestCount=0;this.state="loading"};xf.prototype.registerFadeDuration=function(w){w+=this.timeAdded;w<Wf.now()||this.fadeEndTime&&w<this.fadeEndTime||(this.fadeEndTime=w)};xf.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state};xf.prototype.loadVectorData=function(w,E,R){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",w){for(var da in w.featureIndex&&(this.latestFeatureIndex=w.featureIndex,
w.rawTileData?(this.latestRawTileData=w.rawTileData,this.latestFeatureIndex.rawTileData=w.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=w.collisionBoxArray,this.buckets=function(Ma,Wa){var cb={};if(!Wa)return cb;for(var pb=function(){var Hb=Kb[yb],Tb=Hb.layerIds.map(function(qc){return Wa.getLayer(qc)}).filter(Boolean);if(0!==Tb.length){Hb.layers=Tb;Hb.stateDependentLayerIds&&(Hb.stateDependentLayers=Hb.stateDependentLayerIds.map(function(qc){return Tb.filter(function(bd){return bd.id===
qc})[0]}));for(var Sb=0;Sb<Tb.length;Sb+=1)cb[Tb[Sb].id]=Hb}},yb=0,Kb=Ma;yb<Kb.length;yb+=1)pb();return cb}(w.buckets,E.style),this.hasSymbolBuckets=!1,this.buckets){var pa=this.buckets[da];if(pa instanceof Pd){if(this.hasSymbolBuckets=!0,!R)break;pa.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var wa in this.buckets)if(R=this.buckets[wa],R instanceof Pd&&R.hasRTLText){this.hasRTLText=!0;If.isLoading()||If.isLoaded()||"deferred"!==Cf||dj();break}for(var Ea in this.queryPadding=
0,this.buckets)wa=this.buckets[Ea],this.queryPadding=Math.max(this.queryPadding,E.style.getLayer(Ea).queryRadius(wa));w.imageAtlas&&(this.imageAtlas=w.imageAtlas);w.glyphAtlasImage&&(this.glyphAtlasImage=w.glyphAtlasImage)}else this.collisionBoxArray=new ak};xf.prototype.unloadVectorData=function(){for(var w in this.buckets)this.buckets[w].destroy();this.buckets={};this.imageAtlasTexture&&this.imageAtlasTexture.destroy();this.imageAtlas&&(this.imageAtlas=null);this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy();
this.latestFeatureIndex=null;this.state="unloaded"};xf.prototype.getBucket=function(w){return this.buckets[w.id]};xf.prototype.upload=function(w){for(var E in this.buckets){var R=this.buckets[E];R.uploadPending()&&R.upload(w)}E=w.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new zj(w,this.imageAtlas.image,E.RGBA),this.imageAtlas.uploaded=!0);this.glyphAtlasImage&&(this.glyphAtlasTexture=new zj(w,this.glyphAtlasImage,E.ALPHA),this.glyphAtlasImage=null)};xf.prototype.prepare=
function(w){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(w,this.imageAtlasTexture)};xf.prototype.queryRenderedFeatures=function(w,E,R,da,pa,wa,Ea,Ma,Wa,cb){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:da,cameraQueryGeometry:pa,scale:wa,tileSize:this.tileSize,pixelPosMatrix:cb,transform:Ma,params:Ea,queryPadding:this.queryPadding*Wa},w,E,R):{}};xf.prototype.querySourceFeatures=function(w,E){var R=this.latestFeatureIndex;if(R&&
R.rawTileData){var da=R.loadVTLayers(),pa=E?E.sourceLayer:"";if(da=da._geojsonTileLayer||da[pa]){E=tb(E&&E.filter);var wa=this.tileID.canonical,Ea=wa.z,Ma=wa.x;wa=wa.y;for(var Wa={z:Ea,x:Ma,y:wa},cb=0;cb<da.length;cb++){var pb=da.feature(cb);if(E.filter(new Ke(this.tileID.overscaledZ),pb)){var yb=R.getId(pb,pa);pb=new dl(pb,Ea,Ma,wa,yb);pb.tile=Wa;w.push(pb)}}}}};xf.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state};xf.prototype.patternsLoaded=
function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length};xf.prototype.setExpiryData=function(w){var E=this.expirationTime;w.cacheControl?(w=t(w.cacheControl),w["max-age"]&&(this.expirationTime=Date.now()+1E3*w["max-age"])):w.expires&&(this.expirationTime=(new Date(w.expires)).getTime());if(this.expirationTime){w=Date.now();var R=!1;this.expirationTime>w?R=!1:E?this.expirationTime<E?R=!0:(E=this.expirationTime-E)?this.expirationTime=w+Math.max(E,3E4):R=!0:R=!0;R?(this.expiredRequestCount++,
this.state="expired"):this.expiredRequestCount=0}};xf.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1E3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)};xf.prototype.setFeatureState=function(w,E){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(w).length){var R=this.latestFeatureIndex.loadVTLayers(),da;for(da in this.buckets)if(E.style.hasLayer(da)){var pa=
this.buckets[da],wa=pa.layers[0].sourceLayer||"_geojsonTileLayer",Ea=R[wa];wa=w[wa];Ea&&wa&&0!==Object.keys(wa).length&&(pa.update(wa,Ea,this.imageAtlas&&this.imageAtlas.patternPositions||{}),(Ea=E&&E.style&&E.style.getLayer(da))&&(this.queryPadding=Math.max(this.queryPadding,Ea.queryRadius(pa))))}}};xf.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil};xf.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Wf.now()};xf.prototype.clearFadeHold=
function(){this.symbolFadeHoldUntil=void 0};xf.prototype.setHoldDuration=function(w){this.symbolFadeHoldUntil=Wf.now()+w};xf.prototype.setDependencies=function(w,E){for(var R={},da=0;da<E.length;da+=1)R[E[da]]=!0;this.dependencies[w]=R};xf.prototype.hasDependency=function(w,E){for(var R=0;R<w.length;R+=1){var da=this.dependencies[w[R]];if(da)for(var pa=0,wa=E;pa<wa.length;pa+=1)if(da[wa[pa]])return!0}return!1};var $i=self.performance,xl=function(w){this._marks={start:[w.url,"start"].join("#"),end:[w.url,
"end"].join("#"),measure:w.url.toString()};$i.mark(this._marks.start)};xl.prototype.finish=function(){$i.mark(this._marks.end);var w=$i.getEntriesByName(this._marks.measure);return 0===w.length&&($i.measure(this._marks.measure,this._marks.start,this._marks.end),w=$i.getEntriesByName(this._marks.measure),$i.clearMarks(this._marks.start),$i.clearMarks(this._marks.end),$i.clearMeasures(this._marks.measure)),w};a.Actor=ek;a.AlphaImage=Wh;a.CanonicalTileID=Bj;a.CollisionBoxArray=ak;a.Color=Nd;a.DEMData=
zi;a.DataConstantProperty=xd;a.DictionaryCoder=cl;a.EXTENT=8192;a.ErrorEvent=ic;a.EvaluationParameters=Ke;a.Event=$b;a.Evented=gc;a.FeatureIndex=Ai;a.FillBucket=Kg;a.FillExtrusionBucket=Ig;a.ImageAtlas=zc;a.ImagePosition=rc;a.LineBucket=ya;a.LngLat=Ue;a.LngLatBounds=nf;a.MercatorCoordinate=Aj;a.ONE_EM=24;a.OverscaledTileID=of;a.Point=Md;a.Point$1=Md;a.Properties=Pf;a.Protobuf=Ae;a.RGBAImage=wf;a.RequestManager=cg;a.RequestPerformance=xl;a.ResourceType=ua;a.SegmentVector=ef;a.SourceFeatureState=fk;
a.StructArrayLayout1ui2=Ak;a.StructArrayLayout2f1f2i16=gg;a.StructArrayLayout2i4=wh;a.StructArrayLayout3ui6=$g;a.StructArrayLayout4i8=eh;a.SymbolBucket=Pd;a.Texture=zj;a.Tile=xf;a.Transitionable=Mg;a.Uniform1f=ck;a.Uniform1i=il;a.Uniform2f=jl;a.Uniform3f=kl;a.Uniform4f=Yk;a.UniformColor=Fk;a.UniformMatrix4f=ml;a.UnwrappedTileID=wl;a.ValidationError=bc;a.WritingMode=Kc;a.ZoomHistory=Ij;a.add=function(w,E,R){return w[0]=E[0]+R[0],w[1]=E[1]+R[1],w[2]=E[2]+R[2],w};a.addDynamicAttributes=oj;a.asyncAll=
function(w,E,R){if(!w.length)return R(null,[]);var da=w.length,pa=Array(w.length),wa=null;w.forEach(function(Ea,Ma){E(Ea,function(Wa,cb){Wa&&(wa=Wa);pa[Ma]=cb;0==--da&&R(wa,pa)})})};a.bezier=p;a.bindAll=u;a.browser=Wf;a.cacheEntryPossiblyAdded=function(w){++ca>Y&&(w.getActor().send("enforceCacheSizeLimit",V),ca=0)};a.clamp=c;a.clearTileCache=function(w){var E=self.caches.delete("mapbox-tiles");w&&E.catch(w).then(function(){return w()})};a.clipLine=hf;a.clone=function(w){var E=new Yf(16);return E[0]=
w[0],E[1]=w[1],E[2]=w[2],E[3]=w[3],E[4]=w[4],E[5]=w[5],E[6]=w[6],E[7]=w[7],E[8]=w[8],E[9]=w[9],E[10]=w[10],E[11]=w[11],E[12]=w[12],E[13]=w[13],E[14]=w[14],E[15]=w[15],E};a.clone$1=z;a.clone$2=function(w){var E=new Yf(3);return E[0]=w[0],E[1]=w[1],E[2]=w[2],E};a.collisionCircleLayout=Ab;a.config=Ge;a.create=function(){var w=new Yf(16);return Yf!=Float32Array&&(w[1]=0,w[2]=0,w[3]=0,w[4]=0,w[6]=0,w[7]=0,w[8]=0,w[9]=0,w[11]=0,w[12]=0,w[13]=0,w[14]=0),w[0]=1,w[5]=1,w[10]=1,w[15]=1,w};a.create$1=function(){var w=
new Yf(9);return Yf!=Float32Array&&(w[1]=0,w[2]=0,w[3]=0,w[5]=0,w[6]=0,w[7]=0),w[0]=1,w[4]=1,w[8]=1,w};a.create$2=function(){var w=new Yf(4);return Yf!=Float32Array&&(w[1]=0,w[2]=0),w[0]=1,w[3]=1,w};a.createCommonjsModule=g;a.createExpression=Hc;a.createLayout=Ld;a.createStyleLayer=function(w){return"custom"===w.type?new He(w):new ng[w.type](w)};a.cross=function(w,E,R){var da=E[0],pa=E[1];E=E[2];var wa=R[0],Ea=R[1];R=R[2];return w[0]=pa*R-E*Ea,w[1]=E*wa-da*R,w[2]=da*Ea-pa*wa,w};a.deepEqual=function da(E,
R){if(Array.isArray(E)){if(!Array.isArray(R)||E.length!==R.length)return!1;for(var pa=0;pa<E.length;pa++)if(!da(E[pa],R[pa]))return!1;return!0}if("object"==typeof E&&null!==E&&null!==R){if("object"!=typeof R||Object.keys(E).length!==Object.keys(R).length)return!1;for(pa in E)if(!da(E[pa],R[pa]))return!1;return!0}return E===R};a.dot=function(E,R){return E[0]*R[0]+E[1]*R[1]+E[2]*R[2]};a.dot$1=function(E,R){return E[0]*R[0]+E[1]*R[1]+E[2]*R[2]+E[3]*R[3]};a.ease=uk;a.emitValidationErrors=ad;a.endsWith=
v;a.enforceCacheSizeLimit=function(E){M();wg&&wg.then(function(R){R.keys().then(function(da){for(var pa=0;pa<da.length-E;pa++)R.delete(da[pa])})})};a.evaluateSizeForFeature=lj;a.evaluateSizeForZoom=mj;a.evaluateVariableOffset=nj;a.evented=Fi;a.extend=f;a.featureFilter=tb;a.filterObject=C;a.fromRotation=function(E,R){var da=Math.sin(R);R=Math.cos(R);return E[0]=R,E[1]=da,E[2]=0,E[3]=-da,E[4]=R,E[5]=0,E[6]=0,E[7]=0,E[8]=1,E};a.getAnchorAlignment=Hh;a.getAnchorJustification=Mi;a.getArrayBuffer=wb;a.getImage=
jc;a.getJSON=function(E,R){return Za(f(E,{type:"json"}),R)};a.getRTLTextPluginStatus=function(){return Cf};a.getReferrer=Qa;a.getVideo=function(E,R){var da=self.document.createElement("video");da.muted=!0;da.onloadstart=function(){R(null,da)};for(var pa=0;pa<E.length;pa++){var wa=self.document.createElement("source");var Ea=E[pa];var Ma=void 0;(Ma=self.document.createElement("a")).href=Ea;Ma.protocol===self.document.location.protocol&&Ma.host===self.document.location.host||(da.crossOrigin="Anonymous");
wa.src=E[pa];da.appendChild(wa)}return{cancel:function(){}}};a.identity=Ed;a.invert=function(E,R){var da=R[0],pa=R[1],wa=R[2],Ea=R[3],Ma=R[4],Wa=R[5],cb=R[6],pb=R[7],yb=R[8],Kb=R[9],Hb=R[10],Tb=R[11],Sb=R[12],qc=R[13],bd=R[14];R=R[15];var ed=da*Wa-pa*Ma,Oc=da*cb-wa*Ma,rd=da*pb-Ea*Ma,pd=pa*cb-wa*Wa,wd=pa*pb-Ea*Wa,Gd=wa*pb-Ea*cb,Od=yb*qc-Kb*Sb,Ud=yb*bd-Hb*Sb,Vd=yb*R-Tb*Sb,Kd=Kb*bd-Hb*qc,Qd=Kb*R-Tb*qc,je=Hb*R-Tb*bd,Hd=ed*je-Oc*Qd+rd*Kd+pd*Vd-wd*Ud+Gd*Od;return Hd?(E[0]=(Wa*je-cb*Qd+pb*Kd)*(Hd=1/Hd),
E[1]=(wa*Qd-pa*je-Ea*Kd)*Hd,E[2]=(qc*Gd-bd*wd+R*pd)*Hd,E[3]=(Hb*wd-Kb*Gd-Tb*pd)*Hd,E[4]=(cb*Vd-Ma*je-pb*Ud)*Hd,E[5]=(da*je-wa*Vd+Ea*Ud)*Hd,E[6]=(bd*rd-Sb*Gd-R*Oc)*Hd,E[7]=(yb*Gd-Hb*rd+Tb*Oc)*Hd,E[8]=(Ma*Qd-Wa*Vd+pb*Od)*Hd,E[9]=(pa*Vd-da*Qd-Ea*Od)*Hd,E[10]=(Sb*wd-qc*rd+R*ed)*Hd,E[11]=(Kb*rd-yb*wd-Tb*ed)*Hd,E[12]=(Wa*Ud-Ma*Kd-cb*Od)*Hd,E[13]=(da*Kd-pa*Ud+wa*Od)*Hd,E[14]=(qc*Oc-Sb*pd-bd*ed)*Hd,E[15]=(yb*pd-Kb*Oc+Hb*ed)*Hd,E):null};a.isChar=Bd;a.isMapboxURL=J;a.keysDifference=function(E,R){var da=[],
pa;for(pa in E)pa in R||da.push(pa);return da};a.makeRequest=Za;a.mapObject=x;a.mercatorXfromLng=Kh;a.mercatorYfromLat=Tg;a.mercatorZfromAltitude=function(E,R){return E/(bl*Math.cos(R*Math.PI/180))};a.mul=ee;a.multiply=ee;a.mvt=rh;a.normalize=function(E,R){var da=R[0],pa=R[1],wa=R[2];da=da*da+pa*pa+wa*wa;return 0<da&&(da=1/Math.sqrt(da)),E[0]=R[0]*da,E[1]=R[1]*da,E[2]=R[2]*da,E};a.number=va;a.offscreenCanvasSupported=T;a.ortho=function(E,R,da,pa,wa,Ea,Ma){var Wa=1/(R-da),cb=1/(pa-wa),pb=1/(Ea-Ma);
return E[0]=-2*Wa,E[1]=0,E[2]=0,E[3]=0,E[4]=0,E[5]=-2*cb,E[6]=0,E[7]=0,E[8]=0,E[9]=0,E[10]=2*pb,E[11]=0,E[12]=(R+da)*Wa,E[13]=(wa+pa)*cb,E[14]=(Ma+Ea)*pb,E[15]=1,E};a.parseGlyphPBF=function(E){return(new Ae(E)).readFields(Tj,[])};a.pbf=Ae;a.performSymbolLayout=function(E,R,da,pa,wa,Ea,Ma){E.createArrays();E.tilePixelRatio=8192/(512*E.overscaling);E.compareText={};E.iconsNeedLinear=!1;var Wa=E.layers[0].layout,cb=E.layers[0]._unevaluatedLayout._values,pb={};if("composite"===E.textSizeData.kind){var yb=
E.textSizeData,Kb=yb.maxZoom;pb.compositeTextSizes=[cb["text-size"].possiblyEvaluate(new Ke(yb.minZoom),Ma),cb["text-size"].possiblyEvaluate(new Ke(Kb),Ma)]}"composite"===E.iconSizeData.kind&&(yb=E.iconSizeData,Kb=yb.maxZoom,pb.compositeIconSizes=[cb["icon-size"].possiblyEvaluate(new Ke(yb.minZoom),Ma),cb["icon-size"].possiblyEvaluate(new Ke(Kb),Ma)]);pb.layoutTextSize=cb["text-size"].possiblyEvaluate(new Ke(E.zoom+1),Ma);pb.layoutIconSize=cb["icon-size"].possiblyEvaluate(new Ke(E.zoom+1),Ma);pb.textMaxSize=
cb["text-size"].possiblyEvaluate(new Ke(18));var Hb=24*Wa.get("text-line-height"),Tb="map"===Wa.get("text-rotation-alignment")&&"point"!==Wa.get("symbol-placement"),Sb=Wa.get("text-keep-upright"),qc=Wa.get("text-size");cb=function(){var Oc=ed[bd],rd=Wa.get("text-font").evaluate(Oc,{},Ma).join(","),pd=qc.evaluate(Oc,{},Ma),wd=pb.layoutTextSize.evaluate(Oc,{},Ma),Gd=pb.layoutIconSize.evaluate(Oc,{},Ma),Od={horizontal:{},vertical:void 0},Ud=Oc.text,Vd=[0,0];if(Ud){var Kd=Ud.toString(),Qd=24*Wa.get("text-letter-spacing").evaluate(Oc,
{},Ma),je=function(le){for(var $e=0;$e<le.length;$e+=1)if(tf=le[$e].charCodeAt(0),Bd.Arabic(tf)||Bd["Arabic Supplement"](tf)||Bd["Arabic Extended-A"](tf)||Bd["Arabic Presentation Forms-A"](tf)||Bd["Arabic Presentation Forms-B"](tf))return!1;var tf;return!0}(Kd)?Qd:0,Hd=Wa.get("text-anchor").evaluate(Oc,{},Ma),Ad=Wa.get("text-variable-anchor");Ad||(Vd=(Qd=Wa.get("text-radial-offset").evaluate(Oc,{},Ma))?nj(Hd,[24*Qd,Rd]):Wa.get("text-offset").evaluate(Oc,{},Ma).map(function(le){return 24*le}));var Id=
Tb?"center":Wa.get("text-justify").evaluate(Oc,{},Ma),we=Wa.get("symbol-placement"),Re="point"===we?24*Wa.get("text-max-width").evaluate(Oc,{},Ma):0;Qd=function(){E.allowVerticalPlacement&&ke(Kd)&&(Od.vertical=lh(Ud,R,da,wa,rd,Re,Hb,Hd,"left",je,Vd,Kc.vertical,!0,we,wd,pd))};if(!Tb&&Ad){Ad="auto"===Id?Ad.map(function(le){return Mi(le)}):[Id];Id=!1;for(var Gf=0;Gf<Ad.length;Gf++){var mf=Ad[Gf];if(!Od.horizontal[mf])if(Id)Od.horizontal[mf]=Od.horizontal[0];else{var Se=lh(Ud,R,da,wa,rd,Re,Hb,"center",
mf,je,Vd,Kc.horizontal,!1,we,wd,pd);Se&&(Od.horizontal[mf]=Se,Id=1===Se.positionedLines.length)}}Qd()}else"auto"===Id&&(Id=Mi(Hd)),(Ad=lh(Ud,R,da,wa,rd,Re,Hb,Hd,Id,je,Vd,Kc.horizontal,!1,we,wd,pd))&&(Od.horizontal[Id]=Ad),Qd(),ke(Kd)&&Tb&&Sb&&(Od.vertical=lh(Ud,R,da,wa,rd,Re,Hb,Hd,Id,je,Vd,Kc.vertical,!1,we,wd,pd))}Qd=void 0;Ad=!1;Oc.icon&&Oc.icon.name&&(Id=pa[Oc.icon.name])&&(Qd=function(le,$e,tf){var Df=Hh(tf);tf=$e[0]-le.displaySize[0]*Df.horizontalAlign;$e=$e[1]-le.displaySize[1]*Df.verticalAlign;
return{image:le,top:$e,bottom:$e+le.displaySize[1],left:tf,right:tf+le.displaySize[0]}}(wa[Oc.icon.name],Wa.get("icon-offset").evaluate(Oc,{},Ma),Wa.get("icon-anchor").evaluate(Oc,{},Ma)),Ad=Id.sdf,void 0===E.sdfIcons?E.sdfIcons=Id.sdf:E.sdfIcons!==Id.sdf&&y("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Id.pixelRatio!==E.pixelRatio||0!==Wa.get("icon-rotate").constantOr(1))&&(E.iconsNeedLinear=!0));Id=jf(Od.horizontal)||Od.vertical;E.iconsInText=!!Id&&Id.iconsInText;(Id||
Qd)&&function(le,$e,tf,Df,xj,Lg,Xe,Nf,xi,Zi,yj){var Hf=Lg.textMaxSize.evaluate($e,{});void 0===Hf&&(Hf=Xe);var yi,cf=le.layers[0].layout,rg=cf.get("icon-offset").evaluate($e,{},yj),Me=jf(tf.horizontal),Of=Xe/24,Hl=le.tilePixelRatio*Of;Hf=le.tilePixelRatio*Hf/24;var Il=le.tilePixelRatio*Nf,ah=le.tilePixelRatio*cf.get("symbol-spacing"),Jl=cf.get("text-padding")*le.tilePixelRatio,Kl=cf.get("icon-padding")*le.tilePixelRatio;Nf=cf.get("text-max-angle")/180*Math.PI;var Ll="map"===cf.get("text-rotation-alignment")&&
"point"!==cf.get("symbol-placement"),Ml="map"===cf.get("icon-rotation-alignment")&&"point"!==cf.get("symbol-placement"),Cj=cf.get("symbol-placement"),aj=ah/2,gk=cf.get("icon-text-fit");Df&&"none"!==gk&&(le.allowVerticalPlacement&&tf.vertical&&(yi=Uj(Df,tf.vertical,gk,cf.get("icon-text-fit-padding"),rg,Of)),Me&&(Df=Uj(Df,Me,gk,cf.get("icon-text-fit-padding"),rg,Of)));cf=function(Nl,Nk){0>Nk.x||8192<=Nk.x||0>Nk.y||8192<=Nk.y||function(df,uh,el,Xh,Bi,fl,bj,bh,hk,Ok,ik,jk,rl,gl,Dj,Ej,Pk,yl,Fj,Qk,Bg,hl,
zl,Yh,Ol){var Rk,kk,lk=df.addToLineVertexArray(uh,el),Sk=0,Al=el=0,Bl=0,mk=-1,sl=-1,Ci={},Cl=ji(""),tl=0,ul=0;if(void 0===bh._unevaluatedLayout.getValue("text-radial-offset")?(tl=(Rk=bh.layout.get("text-offset").evaluate(Bg,{},Yh).map(function(Tk){return 24*Tk}))[0],ul=Rk[1]):(tl=24*bh.layout.get("text-radial-offset").evaluate(Bg,{},Yh),ul=Rd),df.allowVerticalPlacement&&Xh.vertical){Rk=bh.layout.get("text-rotate").evaluate(Bg,{},Yh)+90;var Gj=new Nc(hk,uh,Ok,ik,jk,Xh.vertical,rl,gl,Dj,Rk);bj&&(kk=
new Nc(hk,uh,Ok,ik,jk,bj,Pk,yl,Dj,Rk))}if(Bi){var Di=bh.layout.get("icon-rotate").evaluate(Bg,{});Sk="none"!==bh.layout.get("icon-text-fit");mk=ig(Bi,Di,zl,Sk);bj=bj?ig(bj,Di,zl,Sk):void 0;Di=new Nc(hk,uh,Ok,ik,jk,Bi,Pk,yl,!1,Di);Sk=4*mk.length;Pk=df.iconSizeData;Bi=null;"source"===Pk.kind?32640<(Bi=[128*bh.layout.get("icon-size").evaluate(Bg,{})])[0]&&y(df.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):"composite"===Pk.kind&&(32640<(Bi=[128*hl.compositeIconSizes[0].evaluate(Bg,
{},Yh),128*hl.compositeIconSizes[1].evaluate(Bg,{},Yh)])[0]||32640<Bi[1])&&y(df.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".');df.addSymbols(df.icon,mk,Bi,Qk,Fj,Bg,!1,uh,lk.lineStartIndex,lk.lineLength,-1,Yh);mk=df.icon.placedSymbolArray.length-1;bj&&(el=4*bj.length,df.addSymbols(df.icon,bj,Bi,Qk,Fj,Bg,Kc.vertical,uh,lk.lineStartIndex,lk.lineLength,-1,Yh),sl=df.icon.placedSymbolArray.length-1)}for(var Dl in Xh.horizontal){Fj=Xh.horizontal[Dl];if(!Zf){Cl=ji(Fj.text);var Zf=
bh.layout.get("text-rotate").evaluate(Bg,{},Yh);Zf=new Nc(hk,uh,Ok,ik,jk,Fj,rl,gl,Dj,Zf)}Qk=1===Fj.positionedLines.length;if(Al+=Uf(df,uh,Fj,fl,bh,Dj,Bg,Ej,lk,Xh.vertical?Kc.horizontal:Kc.horizontalOnly,Qk?Object.keys(Xh.horizontal):[Dl],Ci,mk,hl,Yh),Qk)break}Xh.vertical&&(Bl+=Uf(df,uh,Xh.vertical,fl,bh,Dj,Bg,Ej,lk,Kc.vertical,["vertical"],Ci,sl,hl,Yh));Xh=Zf?Zf.boxStartIndex:df.collisionBoxArray.length;fl=Zf?Zf.boxEndIndex:df.collisionBoxArray.length;bh=Gj?Gj.boxStartIndex:df.collisionBoxArray.length;
hk=Gj?Gj.boxEndIndex:df.collisionBoxArray.length;ik=Di?Di.boxStartIndex:df.collisionBoxArray.length;jk=Di?Di.boxEndIndex:df.collisionBoxArray.length;gl=kk?kk.boxStartIndex:df.collisionBoxArray.length;Dj=kk?kk.boxEndIndex:df.collisionBoxArray.length;Ej=function(Tk,El){return Tk&&Tk.circleDiameter?Math.max(Tk.circleDiameter,El):El};Zf=Ej(Zf,-1);Zf=Ej(Gj,Zf);Zf=Ej(Di,Zf);(Gj=-1<(Zf=Ej(kk,Zf))?1:0)&&(Zf*=Ol/24);df.glyphOffsetArray.length>=Pd.MAX_GLYPHS&&y("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907");
void 0!==Bg.sortKey&&df.addToSortKeyRanges(df.symbolInstances.length,Bg.sortKey);df.symbolInstances.emplaceBack(uh.x,uh.y,0<=Ci.right?Ci.right:-1,0<=Ci.center?Ci.center:-1,0<=Ci.left?Ci.left:-1,Ci.vertical||-1,mk,sl,Cl,Xh,fl,bh,hk,ik,jk,gl,Dj,Ok,Al,Bl,Sk,el,Gj,0,rl,tl,ul,Zf)}(le,Nk,Nl,tf,Df,xj,yi,le.layers[0],le.collisionBoxArray,$e.index,$e.sourceLayerIndex,le.index,Hl,Jl,Ll,xi,Il,Kl,Ml,rg,$e,Lg,Zi,yj,Xe)};if("line"===Cj)for(Of=0,Cj=hf($e.geometry,0,0,8192,8192);Of<Cj.length;Of+=1){gk=Cj[Of];for(var vl=
0,Fl=tk(gk,ah,Nf,tf.vertical||Me,Df,24,Hf,le.overscaling,8192);vl<Fl.length;vl+=1){var Gl=Fl[vl];Me&&li(le,Me.text,aj,Gl)||cf(gk,Gl)}}else if("line-center"===Cj)for(ah=0,aj=$e.geometry;ah<aj.length;ah+=1)Of=aj[ah],1<Of.length&&(Cj=Li(Of,Nf,tf.vertical||Me,Df,24,Hf))&&cf(Of,Cj);else if("Polygon"===$e.type)for(Me=0,Hf=jj($e.geometry,0);Me<Hf.length;Me+=1)Nf=Hf[Me],ah=jg(Nf,16),cf(Nf[0],new Vc(ah.x,ah.y,0));else if("LineString"===$e.type)for(Me=0,Hf=$e.geometry;Me<Hf.length;Me+=1)Nf=Hf[Me],cf(Nf,new Vc(Nf[0].x,
Nf[0].y,0));else if("Point"===$e.type)for(Me=0,Hf=$e.geometry;Me<Hf.length;Me+=1)for(Nf=0,ah=Hf[Me];Nf<ah.length;Nf+=1)aj=ah[Nf],cf([aj],new Vc(aj.x,aj.y,0))}(E,Oc,Od,Qd,pa,pb,wd,Gd,Vd,Ad,Ma)};for(var bd=0,ed=E.features;bd<ed.length;bd+=1)cb();Ea&&E.generateCollisionDebugBuffers()};a.perspective=function(E,R,da,pa,wa){var Ea;R=1/Math.tan(R/2);return E[0]=R/da,E[1]=0,E[2]=0,E[3]=0,E[4]=0,E[5]=R,E[6]=0,E[7]=0,E[8]=0,E[9]=0,E[11]=-1,E[12]=0,E[13]=0,E[15]=0,null!=wa&&wa!==1/0?(E[10]=(wa+pa)*(Ea=1/(pa-
wa)),E[14]=2*wa*pa*Ea):(E[10]=-1,E[14]=-2*pa),E};a.pick=function(E,R){for(var da={},pa=0;pa<R.length;pa++){var wa=R[pa];wa in E&&(da[wa]=E[wa])}return da};a.plugin=If;a.polygonIntersectsPolygon=pf;a.postMapLoadEvent=jb;a.postTurnstileEvent=Pi;a.potpack=Pe;a.refProperties="type source source-layer minzoom maxzoom filter layout".split(" ");a.register=Bc;a.registerForPluginStateChange=function(E){return E({pluginStatus:Cf,pluginURL:Jg}),Fi.on("pluginStateChange",E),E};a.rotate=function(E,R,da){var pa=
R[0],wa=R[1],Ea=R[2];R=R[3];var Ma=Math.sin(da);da=Math.cos(da);return E[0]=pa*da+Ea*Ma,E[1]=wa*da+R*Ma,E[2]=pa*-Ma+Ea*da,E[3]=wa*-Ma+R*da,E};a.rotateX=function(E,R,da){var pa=Math.sin(da);da=Math.cos(da);var wa=R[4],Ea=R[5],Ma=R[6],Wa=R[7],cb=R[8],pb=R[9],yb=R[10],Kb=R[11];return R!==E&&(E[0]=R[0],E[1]=R[1],E[2]=R[2],E[3]=R[3],E[12]=R[12],E[13]=R[13],E[14]=R[14],E[15]=R[15]),E[4]=wa*da+cb*pa,E[5]=Ea*da+pb*pa,E[6]=Ma*da+yb*pa,E[7]=Wa*da+Kb*pa,E[8]=cb*da-wa*pa,E[9]=pb*da-Ea*pa,E[10]=yb*da-Ma*pa,E[11]=
Kb*da-Wa*pa,E};a.rotateZ=function(E,R,da){var pa=Math.sin(da);da=Math.cos(da);var wa=R[0],Ea=R[1],Ma=R[2],Wa=R[3],cb=R[4],pb=R[5],yb=R[6],Kb=R[7];return R!==E&&(E[8]=R[8],E[9]=R[9],E[10]=R[10],E[11]=R[11],E[12]=R[12],E[13]=R[13],E[14]=R[14],E[15]=R[15]),E[0]=wa*da+cb*pa,E[1]=Ea*da+pb*pa,E[2]=Ma*da+yb*pa,E[3]=Wa*da+Kb*pa,E[4]=cb*da-wa*pa,E[5]=pb*da-Ea*pa,E[6]=yb*da-Ma*pa,E[7]=Kb*da-Wa*pa,E};a.scale=function(E,R,da){var pa=da[0],wa=da[1];da=da[2];return E[0]=R[0]*pa,E[1]=R[1]*pa,E[2]=R[2]*pa,E[3]=R[3]*
pa,E[4]=R[4]*wa,E[5]=R[5]*wa,E[6]=R[6]*wa,E[7]=R[7]*wa,E[8]=R[8]*da,E[9]=R[9]*da,E[10]=R[10]*da,E[11]=R[11]*da,E[12]=R[12],E[13]=R[13],E[14]=R[14],E[15]=R[15],E};a.scale$1=function(E,R,da){return E[0]=R[0]*da,E[1]=R[1]*da,E[2]=R[2]*da,E[3]=R[3]*da,E};a.scale$2=function(E,R,da){return E[0]=R[0]*da,E[1]=R[1]*da,E[2]=R[2]*da,E};a.setCacheLimits=function(E,R){V=E;Y=R};a.setRTLTextPlugin=function(E,R,da){if(void 0===da&&(da=!1),"deferred"===Cf||"loading"===Cf||"loaded"===Cf)throw Error("setRTLTextPlugin cannot be called multiple times.");
Jg=Wf.resolveURL(E);Cf="deferred";Jj=R;be();da||dj()};a.sphericalToCartesian=function(E){var R=E[0],da=E[1];E=E[2];return da+=90,da*=Math.PI/180,E*=Math.PI/180,{x:R*Math.cos(da)*Math.sin(E),y:R*Math.sin(da)*Math.sin(E),z:R*Math.cos(E)}};a.sqrLen=function(E){var R=E[0];E=E[1];return R*R+E*E};a.styleSpec=Cb;a.sub=function(E,R,da){return E[0]=R[0]-da[0],E[1]=R[1]-da[1],E[2]=R[2]-da[2],E};a.symbolSize=Xc;a.transformMat3=function(E,R,da){var pa=R[0],wa=R[1];R=R[2];return E[0]=pa*da[0]+wa*da[3]+R*da[6],
E[1]=pa*da[1]+wa*da[4]+R*da[7],E[2]=pa*da[2]+wa*da[5]+R*da[8],E};a.transformMat4=ge;a.translate=function(E,R,da){var pa,wa,Ea,Ma,Wa,cb,pb,yb,Kb,Hb,Tb,Sb,qc=da[0],bd=da[1];da=da[2];return R===E?(E[12]=R[0]*qc+R[4]*bd+R[8]*da+R[12],E[13]=R[1]*qc+R[5]*bd+R[9]*da+R[13],E[14]=R[2]*qc+R[6]*bd+R[10]*da+R[14],E[15]=R[3]*qc+R[7]*bd+R[11]*da+R[15]):(wa=R[1],Ea=R[2],Ma=R[3],Wa=R[4],cb=R[5],pb=R[6],yb=R[7],Kb=R[8],Hb=R[9],Tb=R[10],Sb=R[11],E[0]=pa=R[0],E[1]=wa,E[2]=Ea,E[3]=Ma,E[4]=Wa,E[5]=cb,E[6]=pb,E[7]=yb,
E[8]=Kb,E[9]=Hb,E[10]=Tb,E[11]=Sb,E[12]=pa*qc+Wa*bd+Kb*da+R[12],E[13]=wa*qc+cb*bd+Hb*da+R[13],E[14]=Ea*qc+pb*bd+Tb*da+R[14],E[15]=Ma*qc+yb*bd+Sb*da+R[15]),E};a.triggerPluginCompletionEvent=cj;a.uniqueId=function(){return kg++};a.validateCustomStyleLayer=function(E){var R=[],da=E.id;return void 0===da&&R.push({message:"layers."+da+': missing required property "id"'}),void 0===E.render&&R.push({message:"layers."+da+': missing required method "render"'}),E.renderingMode&&"2d"!==E.renderingMode&&"3d"!==
E.renderingMode&&R.push({message:"layers."+da+': property "renderingMode" must be either "2d" or "3d"'}),R};a.validateLight=rj;a.validateStyle=Zc;a.values=function(E){var R=[],da;for(da in E)R.push(E[da]);return R};a.vectorTile=rh;a.version="1.10.1";a.warnOnce=y;a.webpSupported=Wg;a.window=self;a.wrap=d});q(["./shared"],function(a){function g(va){var Ba=typeof va;if("number"===Ba||"boolean"===Ba||"string"===Ba||null==va)return JSON.stringify(va);if(Array.isArray(va)){Ba="[";for(var Ga=0;Ga<va.length;Ga+=
1)Ba+=g(va[Ga])+",";return Ba+"]"}Ba=Object.keys(va).sort();Ga="{";for(var Na=0;Na<Ba.length;Na++)Ga+=JSON.stringify(Ba[Na])+":"+g(va[Ba[Na]])+",";return Ga+"}"}function e(va,Ba,Ga){Ba=new a.EvaluationParameters(Ba);for(var Na=0;Na<va.length;Na+=1)va[Na].recalculate(Ba,Ga)}function n(va,Ba){var Ga=a.getArrayBuffer(va.request,function(Na,$a,Va,qb){Na?Ba(Na):$a&&Ba(null,{vectorTile:new a.vectorTile.VectorTile(new a.pbf($a)),rawData:$a,cacheControl:Va,expires:qb})});return function(){Ga.cancel();Ba()}}
function p(va,Ba){if(0!==va.length){c(va[0],Ba);for(var Ga=1;Ga<va.length;Ga++)c(va[Ga],!Ba)}}function c(va,Ba){for(var Ga=0,Na=0,$a=va.length,Va=$a-1;Na<$a;Va=Na++)Ga+=(va[Na][0]-va[Va][0])*(va[Va][1]+va[Na][1]);0<=Ga!=!!Ba&&va.reverse()}function d(va,Ba){this.options=Ba||{};this.features=va;this.length=va.length}function f(va,Ba){this.id="number"==typeof va.id?va.id:void 0;this.type=va.type;this.rawGeometry=1===va.type?[va.geometry]:va.geometry;this.properties=va.tags;this.extent=Ba||4096}function k(va){var Ba=
new a.pbf,Ga;for(Ga in va.layers)Ba.writeMessage(3,r,va.layers[Ga]);return Ba.finish()}function r(va,Ba){var Ga;Ba.writeVarintField(15,va.version||1);Ba.writeStringField(1,va.name||"");Ba.writeVarintField(5,va.extent||4096);var Na={keys:[],values:[],keycache:{},valuecache:{}};for(Ga=0;Ga<va.length;Ga++)Na.feature=va.feature(Ga),Ba.writeMessage(2,u,Na);va=Na.keys;for(Ga=0;Ga<va.length;Ga++)Ba.writeStringField(3,va[Ga]);Na=Na.values;for(Ga=0;Ga<Na.length;Ga++)Ba.writeMessage(4,C,Na[Ga])}function u(va,
Ba){var Ga=va.feature;void 0!==Ga.id&&Ba.writeVarintField(1,Ga.id);Ba.writeMessage(2,v,va);Ba.writeVarintField(3,Ga.type);Ba.writeMessage(4,x,Ga)}function v(va,Ba){var Ga=va.feature,Na=va.keys,$a=va.values,Va=va.keycache;va=va.valuecache;for(var qb in Ga.properties){var Ha=Va[qb];void 0===Ha&&(Na.push(qb),Va[qb]=Ha=Na.length-1);Ba.writeVarint(Ha);Ha=Ga.properties[qb];var Ra=typeof Ha;"string"!==Ra&&"boolean"!==Ra&&"number"!==Ra&&(Ha=JSON.stringify(Ha));Ra=Ra+":"+Ha;var La=va[Ra];void 0===La&&($a.push(Ha),
va[Ra]=La=$a.length-1);Ba.writeVarint(La)}}function x(va,Ba){var Ga=va.loadGeometry();va=va.type;for(var Na=0,$a=0,Va=Ga.length,qb=0;qb<Va;qb++){var Ha=Ga[qb],Ra=1;1===va&&(Ra=Ha.length);Ba.writeVarint((Ra<<3)+1);Ra=3===va?Ha.length-1:Ha.length;for(var La=0;La<Ra;La++){1===La&&1!==va&&Ba.writeVarint((Ra-1<<3)+2);var gb=Ha[La].x-Na,ob=Ha[La].y-$a;Ba.writeVarint(gb<<1^gb>>31);Ba.writeVarint(ob<<1^ob>>31);Na+=gb;$a+=ob}3===va&&Ba.writeVarint(15)}}function C(va,Ba){var Ga=typeof va;"string"===Ga?Ba.writeStringField(1,
va):"boolean"===Ga?Ba.writeBooleanField(7,va):"number"===Ga&&(0!=va%1?Ba.writeDoubleField(3,va):0>va?Ba.writeSVarintField(6,va):Ba.writeVarintField(5,va))}function z(va,Ba,Ga,Na){y(va,Ga,Na);y(Ba,2*Ga,2*Na);y(Ba,2*Ga+1,2*Na+1)}function y(va,Ba,Ga){var Na=va[Ba];va[Ba]=va[Ga];va[Ga]=Na}function D(va){return{type:"Feature",id:va.id,properties:A(va),geometry:{type:"Point",coordinates:[(Na=va.x,360*(Na-.5)),(Ba=va.y,Ga=(180-360*Ba)*Math.PI/180,360*Math.atan(Math.exp(Ga))/Math.PI-90)]}};var Ba,Ga,Na}function A(va){var Ba=
va.numPoints,Ga=1E4<=Ba?Math.round(Ba/1E3)+"k":1E3<=Ba?Math.round(Ba/100)/10+"k":Ba;return B(B({},va.properties),{cluster:!0,cluster_id:va.id,point_count:Ba,point_count_abbreviated:Ga})}function t(va){va=Math.sin(va*Math.PI/180);va=.5-.25*Math.log((1+va)/(1-va))/Math.PI;return 0>va?0:1<va?1:va}function B(va,Ba){for(var Ga in Ba)va[Ga]=Ba[Ga];return va}function F(va){return va.x}function I(va){return va.y}function J(va,Ba,Ga,Na){va={id:void 0===va?null:va,type:Ba,geometry:Ga,tags:Na,minX:1/0,minY:1/
0,maxX:-1/0,maxY:-1/0};Ba=va.geometry;Ga=va.type;if("Point"===Ga||"MultiPoint"===Ga||"LineString"===Ga)L(va,Ba);else if("Polygon"===Ga||"MultiLineString"===Ga)for(Ga=0;Ga<Ba.length;Ga++)L(va,Ba[Ga]);else if("MultiPolygon"===Ga)for(Ga=0;Ga<Ba.length;Ga++)for(Na=0;Na<Ba[Ga].length;Na++)L(va,Ba[Ga][Na]);return va}function L(va,Ba){for(var Ga=0;Ga<Ba.length;Ga+=3)va.minX=Math.min(va.minX,Ba[Ga]),va.minY=Math.min(va.minY,Ba[Ga+1]),va.maxX=Math.max(va.maxX,Ba[Ga]),va.maxY=Math.max(va.maxY,Ba[Ga+1])}function H(va,
Ba,Ga,Na){if(Ba.geometry){var $a=Ba.geometry.coordinates,Va=Ba.geometry.type,qb=Math.pow(Ga.tolerance/((1<<Ga.maxZoom)*Ga.extent),2),Ha=[],Ra=Ba.id;if(Ga.promoteId?Ra=Ba.properties[Ga.promoteId]:Ga.generateId&&(Ra=Na||0),"Point"===Va)P($a,Ha);else if("MultiPoint"===Va)for(var La=0;La<$a.length;La++)P($a[La],Ha);else if("LineString"===Va)M($a,Ha,qb,!1);else if("MultiLineString"===Va){if(Ga.lineMetrics){for(La=0;La<$a.length;La++)M($a[La],Ha=[],qb,!1),va.push(J(Ra,"LineString",Ha,Ba.properties));return}N($a,
Ha,qb,!1)}else if("Polygon"===Va)N($a,Ha,qb,!0);else{if("MultiPolygon"!==Va){if("GeometryCollection"===Va){for(La=0;La<Ba.geometry.geometries.length;La++)H(va,{id:Ra,geometry:Ba.geometry.geometries[La],properties:Ba.properties},Ga,Na);return}throw Error("Input data is not a valid GeoJSON object.");}for(La=0;La<$a.length;La++)Ga=[],N($a[La],Ga,qb,!0),Ha.push(Ga)}va.push(J(Ra,Va,Ha,Ba.properties))}}function P(va,Ba){Ba.push(va[0]/360+.5);Ba.push(T(va[1]));Ba.push(0)}function M(va,Ba,Ga,Na){for(var $a,
Va,qb=0,Ha=0;Ha<va.length;Ha++){var Ra=va[Ha][0]/360+.5,La=T(va[Ha][1]);Ba.push(Ra);Ba.push(La);Ba.push(0);0<Ha&&(qb+=Na?($a*La-Ra*Va)/2:Math.sqrt(Math.pow(Ra-$a,2)+Math.pow(La-Va,2)));$a=Ra;Va=La}va=Ba.length-3;Ba[2]=1;(function Ja(ob,ub,za,Da){for(var Ta,Xa=Da,kb=za-ub>>1,rb=za-ub,Mb=ob[ub],Fb=ob[ub+1],Lb=ob[za],Vb=ob[za+1],xc=ub+3;xc<za;xc+=3){var Gc=ob[xc];var Hc=ob[xc+1],Wc=Mb,ib=Fb,Yb=Lb-Wc,dc=Vb-ib;if(0!==Yb||0!==dc){var oc=((Gc-Wc)*Yb+(Hc-ib)*dc)/(Yb*Yb+dc*dc);1<oc?(Wc=Lb,ib=Vb):0<oc&&(Wc+=
Yb*oc,ib+=dc*oc)}Gc=(Yb=Gc-Wc)*Yb+(dc=Hc-ib)*dc;Gc>Xa?(Ta=xc,Xa=Gc):Gc===Xa&&(Yb=Math.abs(xc-kb),Yb<rb&&(Ta=xc,rb=Yb))}Xa>Da&&(3<Ta-ub&&Ja(ob,ub,Ta,Da),ob[Ta+2]=Xa,3<za-Ta&&Ja(ob,Ta,za,Da))})(Ba,0,va,Ga);Ba[va+2]=1;Ba.size=Math.abs(qb);Ba.start=0;Ba.end=Ba.size}function N(va,Ba,Ga,Na){for(var $a=0;$a<va.length;$a++){var Va=[];M(va[$a],Va,Ga,Na);Ba.push(Va)}}function T(va){va=Math.sin(va*Math.PI/180);va=.5-.25*Math.log((1+va)/(1-va))/Math.PI;return 0>va?0:1<va?1:va}function Q(va,Ba,Ga,Na,$a,Va,qb,
Ha){if(Na/=Ba,Va>=(Ga/=Ba)&&qb<Na)return va;if(qb<Ga||Va>=Na)return null;Ba=[];for(Va=0;Va<va.length;Va++){qb=va[Va];var Ra=qb.geometry,La=qb.type,gb=0===$a?qb.minX:qb.minY,ob=0===$a?qb.maxX:qb.maxY;if(gb>=Ga&&ob<Na)Ba.push(qb);else if(!(ob<Ga||gb>=Na)){gb=[];if("Point"===La||"MultiPoint"===La){ob=gb;for(var ub=Ga,za=Na,Da=$a,Ja=0;Ja<Ra.length;Ja+=3){var Ta=Ra[Ja+Da];Ta>=ub&&Ta<=za&&(ob.push(Ra[Ja]),ob.push(Ra[Ja+1]),ob.push(Ra[Ja+2]))}}else if("LineString"===La)U(Ra,gb,Ga,Na,$a,!1,Ha.lineMetrics);
else if("MultiLineString"===La)X(Ra,gb,Ga,Na,$a,!1);else if("Polygon"===La)X(Ra,gb,Ga,Na,$a,!0);else if("MultiPolygon"===La)for(ob=0;ob<Ra.length;ob++)ub=[],X(Ra[ob],ub,Ga,Na,$a,!0),ub.length&&gb.push(ub);if(gb.length)if(Ha.lineMetrics&&"LineString"===La)for(ob=0;ob<gb.length;ob++)Ba.push(J(qb.id,La,gb[ob],qb.tags));else"LineString"!==La&&"MultiLineString"!==La||(1===gb.length?(La="LineString",gb=gb[0]):La="MultiLineString"),"Point"!==La&&"MultiPoint"!==La||(La=3===gb.length?"Point":"MultiPoint"),
Ba.push(J(qb.id,La,gb,qb.tags))}}return Ba.length?Ba:null}function U(va,Ba,Ga,Na,$a,Va,qb){for(var Ha,Ra,La=S(va),gb=0===$a?Z:aa,ob=va.start,ub=0;ub<va.length-3;ub+=3){var za=va[ub],Da=va[ub+1],Ja=va[ub+2],Ta=va[ub+3],Xa=va[ub+4],kb=0===$a?za:Da,rb=0===$a?Ta:Xa,Mb=!1;qb&&(Ha=Math.sqrt(Math.pow(za-Ta,2)+Math.pow(Da-Xa,2)));if(kb<Ga)rb>Ga&&(Ra=gb(La,za,Da,Ta,Xa,Ga),qb&&(La.start=ob+Ha*Ra));else if(kb>Na)rb<Na&&(Ra=gb(La,za,Da,Ta,Xa,Na),qb&&(La.start=ob+Ha*Ra));else{var Fb=La,Lb=Da;Fb.push(za);Fb.push(Lb);
Fb.push(Ja)}rb<Ga&&kb>=Ga&&(Ra=gb(La,za,Da,Ta,Xa,Ga),Mb=!0);rb>Na&&kb<=Na&&(Ra=gb(La,za,Da,Ta,Xa,Na),Mb=!0);!Va&&Mb&&(qb&&(La.end=ob+Ha*Ra),Ba.push(La),La=S(va));qb&&(ob+=Ha)}Ja=va.length-3;za=va[Ja];Da=va[Ja+1];Ja=va[Ja+2];(kb=0===$a?za:Da)>=Ga&&kb<=Na&&(va=La,Ga=Ja,va.push(za),va.push(Da),va.push(Ga));Ja=La.length-3;Va&&3<=Ja&&(La[Ja]!==La[0]||La[Ja+1]!==La[1])&&(Va=La,za=La[1],Da=La[2],Va.push(La[0]),Va.push(za),Va.push(Da));La.length&&Ba.push(La)}function S(va){var Ba=[];return Ba.size=va.size,
Ba.start=va.start,Ba.end=va.end,Ba}function X(va,Ba,Ga,Na,$a,Va){for(var qb=0;qb<va.length;qb++)U(va[qb],Ba,Ga,Na,$a,Va,!1)}function Z(va,Ba,Ga,Na,$a,Va){Ba=(Va-Ba)/(Na-Ba);return va.push(Va),va.push(Ga+($a-Ga)*Ba),va.push(1),Ba}function aa(va,Ba,Ga,Na,$a,Va){Ga=(Va-Ga)/($a-Ga);return va.push(Ba+(Na-Ba)*Ga),va.push(Va),va.push(1),Ga}function fa(va,Ba){for(var Ga=[],Na=0;Na<va.length;Na++){var $a=va[Na],Va=$a.type;if("Point"===Va||"MultiPoint"===Va||"LineString"===Va)var qb=ha($a.geometry,Ba);else if("MultiLineString"===
Va||"Polygon"===Va){qb=[];for(var Ha=0;Ha<$a.geometry.length;Ha++)qb.push(ha($a.geometry[Ha],Ba))}else if("MultiPolygon"===Va)for(qb=[],Ha=0;Ha<$a.geometry.length;Ha++){for(var Ra=[],La=0;La<$a.geometry[Ha].length;La++)Ra.push(ha($a.geometry[Ha][La],Ba));qb.push(Ra)}Ga.push(J($a.id,Va,qb,$a.tags))}return Ga}function ha(va,Ba){var Ga=[];Ga.size=va.size;void 0!==va.start&&(Ga.start=va.start,Ga.end=va.end);for(var Na=0;Na<va.length;Na+=3)Ga.push(va[Na]+Ba,va[Na+1],va[Na+2]);return Ga}function ja(va,
Ba){if(va.transformed)return va;var Ga,Na,$a=1<<va.z,Va=va.x,qb=va.y;for(Ga=0;Ga<va.features.length;Ga++){var Ha=va.features[Ga],Ra=Ha.geometry;var La=Ha.type;if(Ha.geometry=[],1===La)for(La=0;La<Ra.length;La+=2)Ha.geometry.push([Math.round(Ba*(Ra[La]*$a-Va)),Math.round(Ba*(Ra[La+1]*$a-qb))]);else for(La=0;La<Ra.length;La++){var gb=[];for(Na=0;Na<Ra[La].length;Na+=2)gb.push([Math.round(Ba*(Ra[La][Na]*$a-Va)),Math.round(Ba*(Ra[La][Na+1]*$a-qb))]);Ha.geometry.push(gb)}}return va.transformed=!0,va}function ba(va,
Ba,Ga,Na,$a,Va){var qb=Na*Na;if(0<Na&&Ba.size<($a?qb:Na))Ga.numPoints+=Ba.length/3;else{for(var Ha=[],Ra=0;Ra<Ba.length;Ra+=3)(0===Na||Ba[Ra+2]>qb)&&(Ga.numSimplified++,Ha.push(Ba[Ra]),Ha.push(Ba[Ra+1])),Ga.numPoints++;if($a){Ba=Na=0;Ga=Ha.length;for($a=Ga-2;Ba<Ga;$a=Ba,Ba+=2)Na+=(Ha[Ba]-Ha[$a])*(Ha[Ba+1]+Ha[$a+1]);if(0<Na===Va)for(Ba=0,Ga=Ha.length;Ba<Ga/2;Ba+=2)Va=Ha[Ba],Na=Ha[Ba+1],Ha[Ba]=Ha[Ga-2-Ba],Ha[Ba+1]=Ha[Ga-1-Ba],Ha[Ga-2-Ba]=Va,Ha[Ga-1-Ba]=Na}va.push(Ha)}}function ma(va,Ba){var Ga=(Ba=
this.options=function(Na,$a){for(var Va in $a)Na[Va]=$a[Va];return Na}(Object.create(this.options),Ba)).debug;if(Ga&&console.time("preprocess data"),0>Ba.maxZoom||24<Ba.maxZoom)throw Error("maxZoom should be in the 0-24 range");if(Ba.promoteId&&Ba.generateId)throw Error("promoteId and generateId cannot be used together.");va=function(Na,$a){var Va=[];if("FeatureCollection"===Na.type)for(var qb=0;qb<Na.features.length;qb++)H(Va,Na.features[qb],$a,qb);else H(Va,"Feature"===Na.type?Na:{geometry:Na},
$a);return Va}(va,Ba);this.tiles={};this.tileCoords=[];Ga&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Ba.indexMaxZoom,Ba.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0);(va=function(Na,$a){var Va=$a.buffer/$a.extent,qb=Na,Ha=Q(Na,1,-1-Va,Va,0,-1,2,$a),Ra=Q(Na,1,1-Va,2+Va,0,-1,2,$a);return(Ha||Ra)&&(qb=Q(Na,1,-Va,1+Va,0,-1,2,$a)||[],Ha&&(qb=fa(Ha,1).concat(qb)),Ra&&(qb=qb.concat(fa(Ra,-1)))),qb}(va,Ba)).length&&this.splitTile(va,0,
0,0);Ga&&(va.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function qa(va,Ba){va=va.tileID.canonical;if(!this._geoJSONIndex)return Ba(null,null);va=this._geoJSONIndex.getTile(va.z,va.x,va.y);if(!va)return Ba(null,null);va=new Ka(va.features);var Ga=db(va);0===Ga.byteOffset&&Ga.byteLength===Ga.buffer.byteLength||(Ga=new Uint8Array(Ga));Ba(null,
{vectorTile:va,rawData:Ga.buffer})}var ka=function(va){this.keyCache={};va&&this.replace(va)};ka.prototype.replace=function(va){this._layerConfigs={};this._layers={};this.update(va,[])};ka.prototype.update=function(va,Ba){for(var Ga=this,Na=0;Na<va.length;Na+=1){var $a=va[Na];this._layerConfigs[$a.id]=$a;var Va=this._layers[$a.id]=a.createStyleLayer($a);Va._featureFilter=a.featureFilter(Va.filter);this.keyCache[$a.id]&&delete this.keyCache[$a.id]}for(va=0;va<Ba.length;va+=1)Na=Ba[va],delete this.keyCache[Na],
delete this._layerConfigs[Na],delete this._layers[Na];this.familiesBySource={};Ba=0;for(va=function(Ha,Ra){for(var La={},gb=0;gb<Ha.length;gb++){var ob;if(!(ob=Ra&&Ra[Ha[gb].id])){ob=Ha[gb];for(var ub="",za=0,Da=a.refProperties;za<Da.length;za+=1)ub+="/"+g(ob[Da[za]]);ob=ub}Ra&&(Ra[Ha[gb].id]=ob);(ub=La[ob])||(ub=La[ob]=[]);ub.push(Ha[gb])}Ha=[];for(var Ja in La)Ha.push(La[Ja]);return Ha}(a.values(this._layerConfigs),this.keyCache);Ba<va.length;Ba+=1)if(Na=va[Ba].map(function(Ha){return Ga._layers[Ha.id]}),
Va=Na[0],"none"!==Va.visibility){var qb=Va.source||"";($a=this.familiesBySource[qb])||($a=this.familiesBySource[qb]={});Va=Va.sourceLayer||"_geojsonTileLayer";(qb=$a[Va])||(qb=$a[Va]=[]);qb.push(Na)}};var oa=function(va){var Ba={},Ga=[];for(La in va){var Na=va[La],$a=Ba[La]={},Va;for(Va in Na){var qb=Na[+Va];if(qb&&0!==qb.bitmap.width&&0!==qb.bitmap.height){var Ha={x:0,y:0,w:qb.bitmap.width+2,h:qb.bitmap.height+2};Ga.push(Ha);$a[Va]={rect:Ha,metrics:qb.metrics}}}}Ga=a.potpack(Ga);Ga=new a.AlphaImage({width:Ga.w||
1,height:Ga.h||1});for(var Ra in va){var La=va[Ra];for(var gb in La)(Na=La[+gb])&&0!==Na.bitmap.width&&0!==Na.bitmap.height&&($a=Ba[Ra][gb].rect,a.AlphaImage.copy(Na.bitmap,Ga,{x:0,y:0},{x:$a.x+1,y:$a.y+1},Na.bitmap))}this.image=Ga;this.positions=Ba};a.register("GlyphAtlas",oa);var na=function(va){this.tileID=new a.OverscaledTileID(va.tileID.overscaledZ,va.tileID.wrap,va.tileID.canonical.z,va.tileID.canonical.x,va.tileID.canonical.y);this.uid=va.uid;this.zoom=va.zoom;this.pixelRatio=va.pixelRatio;
this.tileSize=va.tileSize;this.source=va.source;this.overscaling=this.tileID.overscaleFactor();this.showCollisionBoxes=va.showCollisionBoxes;this.collectResourceTiming=!!va.collectResourceTiming;this.returnDependencies=!!va.returnDependencies;this.promoteId=va.promoteId};na.prototype.parse=function(va,Ba,Ga,Na,$a){function Va(){if(La)return $a(La);if(gb&&ob&&ub){var Lb=new oa(gb),Vb=new a.ImageAtlas(ob,ub),xc;for(xc in za){var Gc=za[xc];Gc instanceof a.SymbolBucket?(e(Gc.layers,this.zoom,Ga),a.performSymbolLayout(Gc,
gb,Lb.positions,ob,Vb.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Gc.hasPattern&&(Gc instanceof a.LineBucket||Gc instanceof a.FillBucket||Gc instanceof a.FillExtrusionBucket)&&(e(Gc.layers,this.zoom,Ga),Gc.addFeatures(Da,this.tileID.canonical,Vb.patternPositions))}this.status="done";$a(null,{buckets:a.values(za).filter(function(Hc){return!Hc.isEmpty()}),featureIndex:Ra,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Lb.image,imageAtlas:Vb,glyphMap:this.returnDependencies?
gb:null,iconMap:this.returnDependencies?ob:null,glyphPositions:this.returnDependencies?Lb.positions:null})}}var qb=this;this.status="parsing";this.data=va;this.collisionBoxArray=new a.CollisionBoxArray;var Ha=new a.DictionaryCoder(Object.keys(va.layers).sort()),Ra=new a.FeatureIndex(this.tileID,this.promoteId);Ra.bucketLayerIDs=[];var La,gb,ob,ub,za={},Da={featureIndex:Ra,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Ga};Ba=Ba.familiesBySource[this.source];for(var Ja in Ba){var Ta=
va.layers[Ja];if(Ta){1===Ta.version&&a.warnOnce('Vector tile source "'+this.source+'" layer "'+Ja+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Xa=Ha.encode(Ja),kb=[],rb=0;rb<Ta.length;rb++){var Mb=Ta.feature(rb),Fb=Ra.getId(Mb,Ja);kb.push({feature:Mb,id:Fb,index:rb,sourceLayerIndex:Xa})}Ta=0;for(rb=Ba[Ja];Ta<rb.length;Ta+=1)Mb=rb[Ta],Fb=Mb[0],Fb.minzoom&&this.zoom<Math.floor(Fb.minzoom)||Fb.maxzoom&&this.zoom>=Fb.maxzoom||"none"!==Fb.visibility&&(e(Mb,
this.zoom,Ga),(za[Fb.id]=Fb.createBucket({index:Ra.bucketLayerIDs.length,layers:Mb,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Xa,sourceID:this.source})).populate(kb,Da,this.tileID.canonical),Ra.bucketLayerIDs.push(Mb.map(function(Lb){return Lb.id})))}}va=a.mapObject(Da.glyphDependencies,function(Lb){return Object.keys(Lb).map(Number)});Object.keys(va).length?Na.send("getGlyphs",{uid:this.uid,stacks:va},function(Lb,
Vb){La||(La=Lb,gb=Vb,Va.call(qb))}):gb={};va=Object.keys(Da.iconDependencies);va.length?Na.send("getImages",{icons:va,source:this.source,tileID:this.tileID,type:"icons"},function(Lb,Vb){La||(La=Lb,ob=Vb,Va.call(qb))}):ob={};va=Object.keys(Da.patternDependencies);va.length?Na.send("getImages",{icons:va,source:this.source,tileID:this.tileID,type:"patterns"},function(Lb,Vb){La||(La=Lb,ub=Vb,Va.call(qb))}):ub={};Va.call(this)};var la=function(va,Ba,Ga,Na){this.actor=va;this.layerIndex=Ba;this.availableImages=
Ga;this.loadVectorData=Na||n;this.loading={};this.loaded={}};la.prototype.loadTile=function(va,Ba){var Ga=this,Na=va.uid;this.loading||(this.loading={});var $a=!!(va&&va.request&&va.request.collectResourceTiming)&&new a.RequestPerformance(va.request),Va=this.loading[Na]=new na(va);Va.abort=this.loadVectorData(va,function(qb,Ha){if(delete Ga.loading[Na],qb||!Ha)return Va.status="done",Ga.loaded[Na]=Va,Ba(qb);var Ra=Ha.rawData,La={};Ha.expires&&(La.expires=Ha.expires);Ha.cacheControl&&(La.cacheControl=
Ha.cacheControl);var gb={};$a&&(qb=$a.finish())&&(gb.resourceTiming=JSON.parse(JSON.stringify(qb)));Va.vectorTile=Ha.vectorTile;Va.parse(Ha.vectorTile,Ga.layerIndex,Ga.availableImages,Ga.actor,function(ob,ub){if(ob||!ub)return Ba(ob);Ba(null,a.extend({rawTileData:Ra.slice(0)},ub,La,gb))});Ga.loaded=Ga.loaded||{};Ga.loaded[Na]=Va})};la.prototype.reloadTile=function(va,Ba){var Ga=this,Na=this.loaded,$a=va.uid,Va=this;if(Na&&Na[$a]){var qb=Na[$a];qb.showCollisionBoxes=va.showCollisionBoxes;va=function(Ha,
Ra){var La=qb.reloadCallback;La&&(delete qb.reloadCallback,qb.parse(qb.vectorTile,Va.layerIndex,Ga.availableImages,Va.actor,La));Ba(Ha,Ra)};"parsing"===qb.status?qb.reloadCallback=va:"done"===qb.status&&(qb.vectorTile?qb.parse(qb.vectorTile,this.layerIndex,this.availableImages,this.actor,va):va())}};la.prototype.abortTile=function(va,Ba){var Ga=this.loading;va=va.uid;Ga&&Ga[va]&&Ga[va].abort&&(Ga[va].abort(),delete Ga[va]);Ba()};la.prototype.removeTile=function(va,Ba){var Ga=this.loaded;va=va.uid;
Ga&&Ga[va]&&delete Ga[va];Ba()};var ia=a.window.ImageBitmap,sa=function(){this.loaded={}};sa.prototype.loadTile=function(va,Ba){var Ga=va.uid,Na=va.encoding;va=va.rawImageData;va=ia&&va instanceof ia?this.getImageData(va):va;Na=new a.DEMData(Ga,va,Na);this.loaded=this.loaded||{};this.loaded[Ga]=Na;Ba(null,Na)};sa.prototype.getImageData=function(va){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(va.width,va.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d"));
this.offscreenCanvas.width=va.width;this.offscreenCanvas.height=va.height;this.offscreenCanvasContext.drawImage(va,0,0,va.width,va.height);va=this.offscreenCanvasContext.getImageData(-1,-1,va.width+2,va.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new a.RGBAImage({width:va.width,height:va.height},va.data)};sa.prototype.removeTile=function(va){var Ba=this.loaded;va=va.uid;Ba&&Ba[va]&&delete Ba[va]};var ta=a.vectorTile.VectorTileFeature.prototype.toGeoJSON,
Aa=function(va){this._feature=va;this.extent=a.EXTENT;this.type=va.type;this.properties=va.tags;"id"in va&&!isNaN(va.id)&&(this.id=parseInt(va.id,10))};Aa.prototype.loadGeometry=function(){if(1===this._feature.type){for(var va=[],Ba=0,Ga=this._feature.geometry;Ba<Ga.length;Ba+=1){var Na=Ga[Ba];va.push([new a.Point$1(Na[0],Na[1])])}return va}va=[];Ba=0;for(Ga=this._feature.geometry;Ba<Ga.length;Ba+=1){Na=[];for(var $a=0,Va=Ga[Ba];$a<Va.length;$a+=1){var qb=Va[$a];Na.push(new a.Point$1(qb[0],qb[1]))}va.push(Na)}return va};
Aa.prototype.toGeoJSON=function(va,Ba,Ga){return ta.call(this,va,Ba,Ga)};var Ka=function(va){this.layers={_geojsonTileLayer:this};this.name="_geojsonTileLayer";this.extent=a.EXTENT;this.length=va.length;this._features=va};Ka.prototype.feature=function(va){return new Aa(this._features[va])};var Sa=a.vectorTile.VectorTileFeature;d.prototype.feature=function(va){return new f(this.features[va],this.options.extent)};f.prototype.loadGeometry=function(){var va=this.rawGeometry;this.geometry=[];for(var Ba=
0;Ba<va.length;Ba++){for(var Ga=va[Ba],Na=[],$a=0;$a<Ga.length;$a++)Na.push(new a.Point$1(Ga[$a][0],Ga[$a][1]));this.geometry.push(Na)}return this.geometry};f.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var va=this.geometry,Ba=1/0,Ga=-1/0,Na=1/0,$a=-1/0,Va=0;Va<va.length;Va++)for(var qb=va[Va],Ha=0;Ha<qb.length;Ha++){var Ra=qb[Ha];Ba=Math.min(Ba,Ra.x);Ga=Math.max(Ga,Ra.x);Na=Math.min(Na,Ra.y);$a=Math.max($a,Ra.y)}return[Ba,Na,Ga,$a]};f.prototype.toGeoJSON=Sa.prototype.toGeoJSON;
var db=k;db.fromVectorTileJs=k;db.fromGeojsonVt=function(va,Ba){Ba=Ba||{};var Ga={},Na;for(Na in va)Ga[Na]=new d(va[Na].features,Ba),Ga[Na].name=Na,Ga[Na].version=Ba.version,Ga[Na].extent=Ba.extent;return k({layers:Ga})};db.GeoJSONWrapper=d;var eb=function(va){return va[0]},lb=function(va){return va[1]},ab=function(va,Ba,Ga,Na,$a){void 0===Ba&&(Ba=eb);void 0===Ga&&(Ga=lb);void 0===Na&&(Na=64);void 0===$a&&($a=Float64Array);this.nodeSize=Na;this.points=va;var Va=this.ids=new (65536>va.length?Uint16Array:
Uint32Array)(va.length);$a=this.coords=new $a(2*va.length);for(var qb=0;qb<va.length;qb++)Va[qb]=qb,$a[2*qb]=Ba(va[qb]),$a[2*qb+1]=Ga(va[qb]);!function Da(Ra,La,gb,ob,ub,za){if(!(ub-ob<=gb)){var Ja=ob+ub>>1;!function Vb(Xa,kb,rb,Mb,Fb,Lb){for(;Fb>Mb;){if(600<Fb-Mb){var xc=Fb-Mb+1,Gc=rb-Mb+1,Hc=Math.log(xc),Wc=.5*Math.exp(2*Hc/3);Hc=.5*Math.sqrt(Hc*Wc*(xc-Wc)/xc)*(0>Gc-xc/2?-1:1);Vb(Xa,kb,rb,Math.max(Mb,Math.floor(rb-Gc*Wc/xc+Hc)),Math.min(Fb,Math.floor(rb+(xc-Gc)*Wc/xc+Hc)),Lb)}xc=kb[2*rb+Lb];Gc=
Mb;Wc=Fb;z(Xa,kb,Mb,rb);for(kb[2*Fb+Lb]>xc&&z(Xa,kb,Mb,Fb);Gc<Wc;){z(Xa,kb,Gc,Wc);Gc++;for(Wc--;kb[2*Gc+Lb]<xc;)Gc++;for(;kb[2*Wc+Lb]>xc;)Wc--}kb[2*Mb+Lb]===xc?z(Xa,kb,Mb,Wc):z(Xa,kb,++Wc,Fb);Wc<=rb&&(Mb=Wc+1);rb<=Wc&&(Fb=Wc-1)}}(Ra,La,Ja,ob,ub,za%2);Da(Ra,La,gb,ob,Ja-1,za+1);Da(Ra,La,gb,Ja+1,ub,za+1)}}(Va,$a,Na,0,Va.length-1,0)};ab.prototype.range=function(va,Ba,Ga,Na){for(var $a=this.ids,Va=this.coords,qb=this.nodeSize,Ha,Ra,La=[0,$a.length-1,0],gb=[];La.length;){var ob=La.pop(),ub=La.pop(),za=
La.pop();if(ub-za<=qb)for(ob=za;ob<=ub;ob++)Ra=Va[2*ob+1],(Ha=Va[2*ob])>=va&&Ha<=Ga&&Ra>=Ba&&Ra<=Na&&gb.push($a[ob]);else{var Da=Math.floor((za+ub)/2);Ra=Va[2*Da+1];(Ha=Va[2*Da])>=va&&Ha<=Ga&&Ra>=Ba&&Ra<=Na&&gb.push($a[Da]);var Ja=(ob+1)%2;(0===ob?va<=Ha:Ba<=Ra)&&(La.push(za),La.push(Da-1),La.push(Ja));(0===ob?Ga>=Ha:Na>=Ra)&&(La.push(Da+1),La.push(ub),La.push(Ja))}}return gb};ab.prototype.within=function(va,Ba,Ga){for(var Na=this.ids,$a=this.coords,Va=this.nodeSize,qb=[0,Na.length-1,0],Ha=[],Ra=
Ga*Ga;qb.length;){var La=qb.pop(),gb=qb.pop(),ob=qb.pop();if(gb-ob<=Va)for(La=ob;La<=gb;La++){ob=$a[2*La]-va;var ub=$a[2*La+1]-Ba;ob*ob+ub*ub<=Ra&&Ha.push(Na[La])}else{ub=Math.floor((ob+gb)/2);var za=$a[2*ub],Da=$a[2*ub+1],Ja=za-va,Ta=Da-Ba;Ja*Ja+Ta*Ta<=Ra&&Ha.push(Na[ub]);Ja=(La+1)%2;(0===La?va-Ga<=za:Ba-Ga<=Da)&&(qb.push(ob),qb.push(ub-1),qb.push(Ja));(0===La?va+Ga>=za:Ba+Ga>=Da)&&(qb.push(ub+1),qb.push(gb),qb.push(Ja))}}return Ha};var Ya={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,
generateId:!1,reduce:null,map:function(va){return va}},hb=function(va){this.options=B(Object.create(Ya),va);this.trees=Array(this.options.maxZoom+1)};hb.prototype.load=function(va){var Ba=this.options,Ga=Ba.log,Na=Ba.minZoom,$a=Ba.maxZoom;Ba=Ba.nodeSize;Ga&&console.time("total time");var Va="prepare "+va.length+" points";Ga&&console.time(Va);this.points=va;for(var qb=[],Ha=0;Ha<va.length;Ha++)if(va[Ha].geometry){var Ra=qb,La=Ra.push;var gb=Ha;var ob=va[Ha].geometry.coordinates;gb={x:ob[0]/360+.5,
y:t(ob[1]),zoom:1/0,index:gb,parentId:-1};La.call(Ra,gb)}this.trees[$a+1]=new ab(qb,F,I,Ba,Float32Array);Ga&&console.timeEnd(Va);for(va=$a;va>=Na;va--)$a=+Date.now(),qb=this._cluster(qb,va),this.trees[va]=new ab(qb,F,I,Ba,Float32Array),Ga&&console.log("z%d: %d clusters in %dms",va,qb.length,+Date.now()-$a);return Ga&&console.timeEnd("total time"),this};hb.prototype.getClusters=function(va,Ba){var Ga=((va[0]+180)%360+360)%360-180,Na=Math.max(-90,Math.min(90,va[1])),$a=180===va[2]?180:((va[2]+180)%
360+360)%360-180,Va=Math.max(-90,Math.min(90,va[3]));if(360<=va[2]-va[0])Ga=-180,$a=180;else if(Ga>$a)return Ga=this.getClusters([Ga,Na,180,Va],Ba),Na=this.getClusters([-180,Na,$a,Va],Ba),Ga.concat(Na);Ba=this.trees[this._limitZoom(Ba)];va=[];var qb=0;for(Na=Ba.range(Ga/360+.5,t(Va),$a/360+.5,t(Na));qb<Na.length;qb+=1)$a=Ba.points[Na[qb]],va.push($a.numPoints?D($a):this.points[$a.index]);return va};hb.prototype.getChildren=function(va){var Ba=this._getOriginId(va),Ga=this._getOriginZoom(va),Na=this.trees[Ga];
if(!Na)throw Error("No cluster with the specified id.");var $a=Na.points[Ba];if(!$a)throw Error("No cluster with the specified id.");Ba=[];var Va=0;for(Ga=Na.within($a.x,$a.y,this.options.radius/(this.options.extent*Math.pow(2,Ga-1)));Va<Ga.length;Va+=1)$a=Na.points[Ga[Va]],$a.parentId===va&&Ba.push($a.numPoints?D($a):this.points[$a.index]);if(0===Ba.length)throw Error("No cluster with the specified id.");return Ba};hb.prototype.getLeaves=function(va,Ba,Ga){var Na=[];return this._appendLeaves(Na,
va,Ba||10,Ga||0,0),Na};hb.prototype.getTile=function(va,Ba,Ga){var Na=this.trees[this._limitZoom(va)];va=Math.pow(2,va);var $a=this.options;$a=$a.radius/$a.extent;var Va=(Ga-$a)/va,qb=(Ga+1+$a)/va,Ha={features:[]};return this._addTileFeatures(Na.range((Ba-$a)/va,Va,(Ba+1+$a)/va,qb),Na.points,Ba,Ga,va,Ha),0===Ba&&this._addTileFeatures(Na.range(1-$a/va,Va,1,qb),Na.points,va,Ga,va,Ha),Ba===va-1&&this._addTileFeatures(Na.range(0,Va,$a/va,qb),Na.points,-1,Ga,va,Ha),Ha.features.length?Ha:null};hb.prototype.getClusterExpansionZoom=
function(va){for(var Ba=this._getOriginZoom(va)-1;Ba<=this.options.maxZoom;){va=this.getChildren(va);if(Ba++,1!==va.length)break;va=va[0].properties.cluster_id}return Ba};hb.prototype._appendLeaves=function(va,Ba,Ga,Na,$a){var Va=0;for(Ba=this.getChildren(Ba);Va<Ba.length;Va+=1){var qb=Ba[Va],Ha=qb.properties;if(Ha&&Ha.cluster?$a+Ha.point_count<=Na?$a+=Ha.point_count:$a=this._appendLeaves(va,Ha.cluster_id,Ga,Na,$a):$a<Na?$a++:va.push(qb),va.length===Ga)break}return $a};hb.prototype._addTileFeatures=
function(va,Ba,Ga,Na,$a,Va){for(var qb=0;qb<va.length;qb+=1){var Ha=Ba[va[qb]],Ra=Ha.numPoints,La={type:1,geometry:[[Math.round(this.options.extent*(Ha.x*$a-Ga)),Math.round(this.options.extent*(Ha.y*$a-Na))]],tags:Ra?A(Ha):this.points[Ha.index].properties},gb=void 0;Ra?gb=Ha.id:this.options.generateId?gb=Ha.index:this.points[Ha.index].id&&(gb=this.points[Ha.index].id);void 0!==gb&&(La.id=gb);Va.features.push(La)}};hb.prototype._limitZoom=function(va){return Math.max(this.options.minZoom,Math.min(va,
this.options.maxZoom+1))};hb.prototype._cluster=function(va,Ba){var Ga=[],Na=this.options,$a=Na.reduce;Na=Na.radius/(Na.extent*Math.pow(2,Ba));for(var Va=0;Va<va.length;Va++){var qb=va[Va];if(!(qb.zoom<=Ba)){qb.zoom=Ba;for(var Ha=this.trees[Ba+1],Ra=Ha.within(qb.x,qb.y,Na),La=qb.numPoints||1,gb=qb.x*La,ob=qb.y*La,ub=$a&&1<La?this._map(qb,!0):null,za=(Va<<5)+(Ba+1)+this.points.length,Da=0;Da<Ra.length;Da+=1){var Ja=Ha.points[Ra[Da]];if(!(Ja.zoom<=Ba)){Ja.zoom=Ba;var Ta=Ja.numPoints||1;gb+=Ja.x*Ta;
ob+=Ja.y*Ta;La+=Ta;Ja.parentId=za;$a&&(ub||(ub=this._map(qb,!0)),$a(ub,this._map(Ja)))}}1===La?Ga.push(qb):(qb.parentId=za,Ga.push({x:gb/La,y:ob/La,zoom:1/0,id:za,parentId:-1,numPoints:La,properties:ub}))}}return Ga};hb.prototype._getOriginId=function(va){return va-this.points.length>>5};hb.prototype._getOriginZoom=function(va){return(va-this.points.length)%32};hb.prototype._map=function(va,Ba){if(va.numPoints)return Ba?B({},va.properties):va.properties;va=this.points[va.index].properties;var Ga=
this.options.map(va);return Ba&&Ga===va?B({},Ga):Ga};ma.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1E5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};ma.prototype.splitTile=function(va,Ba,Ga,Na,$a,Va,qb){for(var Ha=[va,Ba,Ga,Na],Ra=this.options,La=Ra.debug;Ha.length;){Na=Ha.pop();Ga=Ha.pop();Ba=Ha.pop();va=Ha.pop();var gb=1<<Ba,ob=32*((1<<Ba)*Na+Ga)+Ba,ub=this.tiles[ob],za;if(za=!ub){1<La&&console.time("creation");ub=this.tiles;za=va;for(var Da=
Ra,Ja=Ba===Da.maxZoom?0:Da.tolerance/((1<<Ba)*Da.extent),Ta={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Ga,y:Na,z:Ba,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Xa=0;Xa<za.length;Xa++){Ta.numFeatures++;var kb=void 0,rb=Ta,Mb=za[Xa],Fb=Ja,Lb=Da,Vb=Mb.geometry,xc=Mb.type,Gc=[];if("Point"===xc||"MultiPoint"===xc)for(var Hc=0;Hc<Vb.length;Hc+=3)Gc.push(Vb[Hc]),Gc.push(Vb[Hc+1]),rb.numPoints++,rb.numSimplified++;else if("LineString"===xc)ba(Gc,Vb,rb,Fb,!1,!1);else if("MultiLineString"===
xc||"Polygon"===xc)for(Hc=0;Hc<Vb.length;Hc++)ba(Gc,Vb[Hc],rb,Fb,"Polygon"===xc,0===Hc);else if("MultiPolygon"===xc)for(var Wc=0;Wc<Vb.length;Wc++){var ib=Vb[Wc];for(Hc=0;Hc<ib.length;Hc++)ba(Gc,ib[Hc],rb,Fb,!0,0===Hc)}if(Gc.length){Fb=Mb.tags||null;if("LineString"===xc&&Lb.lineMetrics){for(kb in Fb={},Mb.tags)Fb[kb]=Mb.tags[kb];Fb.mapbox_clip_start=Vb.start/Vb.size;Fb.mapbox_clip_end=Vb.end/Vb.size}kb={geometry:Gc,type:"Polygon"===xc||"MultiPolygon"===xc?3:"LineString"===xc||"MultiLineString"===
xc?2:1,tags:Fb};null!==Mb.id&&(kb.id=Mb.id);rb.features.push(kb)}rb=za[Xa].minX;Mb=za[Xa].minY;kb=za[Xa].maxX;Lb=za[Xa].maxY;rb<Ta.minX&&(Ta.minX=rb);Mb<Ta.minY&&(Ta.minY=Mb);kb>Ta.maxX&&(Ta.maxX=kb);Lb>Ta.maxY&&(Ta.maxY=Lb)}za=(ub=ub[ob]=Ta,this.tileCoords.push({z:Ba,x:Ga,y:Na}),La)}za&&(1<La&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Ba,Ga,Na,ub.numFeatures,ub.numPoints,ub.numSimplified),console.timeEnd("creation")),ob="z"+Ba,this.stats[ob]=(this.stats[ob]||0)+1,this.total++);
if(ub.source=va,$a){if(Ba===Ra.maxZoom||Ba===$a)continue;ob=1<<$a-Ba;if(Ga!==Math.floor(Va/ob)||Na!==Math.floor(qb/ob))continue}else if(Ba===Ra.indexMaxZoom||ub.numPoints<=Ra.indexMaxPoints)continue;if(ub.source=null,0!==va.length)1<La&&console.time("clipping"),Xa=.5*Ra.buffer/Ra.extent,rb=.5-Xa,Mb=.5+Xa,kb=1+Xa,ob=za=Da=Ja=null,Ta=Q(va,gb,Ga-Xa,Ga+Mb,0,ub.minX,ub.maxX,Ra),va=Q(va,gb,Ga+rb,Ga+kb,0,ub.minX,ub.maxX,Ra),Ta&&(ob=Q(Ta,gb,Na-Xa,Na+Mb,1,ub.minY,ub.maxY,Ra),za=Q(Ta,gb,Na+rb,Na+kb,1,ub.minY,
ub.maxY,Ra)),va&&(Da=Q(va,gb,Na-Xa,Na+Mb,1,ub.minY,ub.maxY,Ra),Ja=Q(va,gb,Na+rb,Na+kb,1,ub.minY,ub.maxY,Ra)),1<La&&console.timeEnd("clipping"),Ha.push(ob||[],Ba+1,2*Ga,2*Na),Ha.push(za||[],Ba+1,2*Ga,2*Na+1),Ha.push(Da||[],Ba+1,2*Ga+1,2*Na),Ha.push(Ja||[],Ba+1,2*Ga+1,2*Na+1)}};ma.prototype.getTile=function(va,Ba,Ga){var Na=this.options,$a=Na.extent;Na=Na.debug;if(0>va||24<va)return null;var Va=1<<va;Va=Ba=(Ba%Va+Va)%Va;Va=32*((1<<va)*Ga+Va)+va;if(this.tiles[Va])return ja(this.tiles[Va],$a);1<Na&&console.log("drilling down to z%d-%d-%d",
va,Ba,Ga);for(var qb,Ha=va,Ra=Ba,La=Ga;!qb&&0<Ha;)Ha--,Ra=Math.floor(Ra/2),La=Math.floor(La/2),qb=this.tiles[32*((1<<Ha)*La+Ra)+Ha];return qb&&qb.source?(1<Na&&console.log("found parent tile z%d-%d-%d",Ha,Ra,La),1<Na&&console.time("drilling down"),this.splitTile(qb.source,Ha,Ra,La,va,Ba,Ga),1<Na&&console.timeEnd("drilling down"),this.tiles[Va]?ja(this.tiles[Va],$a):null):null};var nb=function(va){function Ba(Ga,Na,$a,Va){va.call(this,Ga,Na,$a,qa);Va&&(this.loadGeoJSON=Va)}return va&&(Ba.__proto__=
va),(Ba.prototype=Object.create(va&&va.prototype)).constructor=Ba,Ba.prototype.loadData=function(Ga,Na){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});this._pendingCallback=Na;this._pendingLoadDataParams=Ga;this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},Ba.prototype._loadData=function(){var Ga=this;if(this._pendingCallback&&this._pendingLoadDataParams){var Na=this._pendingCallback,$a=this._pendingLoadDataParams;delete this._pendingCallback;
delete this._pendingLoadDataParams;var Va=!!($a&&$a.request&&$a.request.collectResourceTiming)&&new a.RequestPerformance($a.request);this.loadGeoJSON($a,function(qb,Ha){if(qb||!Ha)return Na(qb);if("object"!=typeof Ha)return Na(Error("Input data given to '"+$a.source+"' is not a valid GeoJSON object."));!function ob(La,gb){var ub=La&&La.type;if("FeatureCollection"===ub)for(ub=0;ub<La.features.length;ub++)ob(La.features[ub],gb);else if("GeometryCollection"===ub)for(ub=0;ub<La.geometries.length;ub++)ob(La.geometries[ub],
gb);else if("Feature"===ub)ob(La.geometry,gb);else if("Polygon"===ub)p(La.coordinates,gb);else if("MultiPolygon"===ub)for(ub=0;ub<La.coordinates.length;ub++)p(La.coordinates[ub],gb);return La}(Ha,!0);try{Ga._geoJSONIndex=$a.cluster?(new hb(function(La){var gb=La.superclusterOptions;La=La.clusterProperties;if(!La||!gb)return gb;for(var ob={},ub={},za={accumulated:null,zoom:0},Da={properties:null},Ja=Object.keys(La),Ta=0;Ta<Ja.length;Ta+=1){var Xa=Ja[Ta],kb=La[Xa],rb=kb[0];kb=a.createExpression(kb[1]);
rb=a.createExpression("string"==typeof rb?[rb,["accumulated"],["get",Xa]]:rb);ob[Xa]=kb.value;ub[Xa]=rb.value}return gb.map=function(Mb){Da.properties=Mb;Mb={};for(var Fb=0;Fb<Ja.length;Fb+=1){var Lb=Ja[Fb];Mb[Lb]=ob[Lb].evaluate(za,Da)}return Mb},gb.reduce=function(Mb,Fb){Da.properties=Fb;for(Fb=0;Fb<Ja.length;Fb+=1){var Lb=Ja[Fb];za.accumulated=Mb[Lb];Mb[Lb]=ub[Lb].evaluate(za,Da)}},gb}($a))).load(Ha.features):new ma(Ha,$a.geojsonVtOptions)}catch(La){return Na(La)}Ga.loaded={};qb={};Va&&(Ha=Va.finish())&&
(qb.resourceTiming={},qb.resourceTiming[$a.source]=JSON.parse(JSON.stringify(Ha)));Na(null,qb)})}},Ba.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},Ba.prototype.reloadTile=function(Ga,Na){var $a=this.loaded;return $a&&$a[Ga.uid]?va.prototype.reloadTile.call(this,Ga,Na):this.loadTile(Ga,Na)},Ba.prototype.loadGeoJSON=function(Ga,Na){if(Ga.request)a.getJSON(Ga.request,Na);else{if("string"!=typeof Ga.data)return Na(Error("Input data given to '"+
Ga.source+"' is not a valid GeoJSON object."));try{return Na(null,JSON.parse(Ga.data))}catch($a){return Na(Error("Input data given to '"+Ga.source+"' is not a valid GeoJSON object."))}}},Ba.prototype.removeSource=function(Ga,Na){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});Na()},Ba.prototype.getClusterExpansionZoom=function(Ga,Na){try{Na(null,this._geoJSONIndex.getClusterExpansionZoom(Ga.clusterId))}catch($a){Na($a)}},Ba.prototype.getClusterChildren=function(Ga,Na){try{Na(null,
this._geoJSONIndex.getChildren(Ga.clusterId))}catch($a){Na($a)}},Ba.prototype.getClusterLeaves=function(Ga,Na){try{Na(null,this._geoJSONIndex.getLeaves(Ga.clusterId,Ga.limit,Ga.offset))}catch($a){Na($a)}},Ba}(la);Sa=function(va){var Ba=this;this.self=va;this.actor=new a.Actor(va,this);this.layerIndexes={};this.availableImages={};this.workerSourceTypes={vector:la,geojson:nb};this.workerSources={};this.demWorkerSources={};this.self.registerWorkerSource=function(Ga,Na){if(Ba.workerSourceTypes[Ga])throw Error('Worker source with name "'+
Ga+'" already registered.');Ba.workerSourceTypes[Ga]=Na};this.self.registerRTLTextPlugin=function(Ga){if(a.plugin.isParsed())throw Error("RTL text plugin already registered.");a.plugin.applyArabicShaping=Ga.applyArabicShaping;a.plugin.processBidirectionalText=Ga.processBidirectionalText;a.plugin.processStyledBidirectionalText=Ga.processStyledBidirectionalText}};return Sa.prototype.setReferrer=function(va,Ba){this.referrer=Ba},Sa.prototype.setImages=function(va,Ba,Ga){for(var Na in this.availableImages[va]=
Ba,this.workerSources[va]){var $a=this.workerSources[va][Na],Va;for(Va in $a)$a[Va].availableImages=Ba}Ga()},Sa.prototype.setLayers=function(va,Ba,Ga){this.getLayerIndex(va).replace(Ba);Ga()},Sa.prototype.updateLayers=function(va,Ba,Ga){this.getLayerIndex(va).update(Ba.layers,Ba.removedIds);Ga()},Sa.prototype.loadTile=function(va,Ba,Ga){this.getWorkerSource(va,Ba.type,Ba.source).loadTile(Ba,Ga)},Sa.prototype.loadDEMTile=function(va,Ba,Ga){this.getDEMWorkerSource(va,Ba.source).loadTile(Ba,Ga)},Sa.prototype.reloadTile=
function(va,Ba,Ga){this.getWorkerSource(va,Ba.type,Ba.source).reloadTile(Ba,Ga)},Sa.prototype.abortTile=function(va,Ba,Ga){this.getWorkerSource(va,Ba.type,Ba.source).abortTile(Ba,Ga)},Sa.prototype.removeTile=function(va,Ba,Ga){this.getWorkerSource(va,Ba.type,Ba.source).removeTile(Ba,Ga)},Sa.prototype.removeDEMTile=function(va,Ba){this.getDEMWorkerSource(va,Ba.source).removeTile(Ba)},Sa.prototype.removeSource=function(va,Ba,Ga){if(this.workerSources[va]&&this.workerSources[va][Ba.type]&&this.workerSources[va][Ba.type][Ba.source]){var Na=
this.workerSources[va][Ba.type][Ba.source];delete this.workerSources[va][Ba.type][Ba.source];void 0!==Na.removeSource?Na.removeSource(Ba,Ga):Ga()}},Sa.prototype.loadWorkerSource=function(va,Ba,Ga){try{this.self.importScripts(Ba.url),Ga()}catch(Na){Ga(Na.toString())}},Sa.prototype.syncRTLPluginState=function(va,Ba,Ga){try{a.plugin.setState(Ba);var Na=a.plugin.getPluginURL();if(a.plugin.isLoaded()&&!a.plugin.isParsed()&&null!=Na){this.self.importScripts(Na);var $a=a.plugin.isParsed();Ga($a?void 0:Error("RTL Text Plugin failed to import scripts from "+
Na),$a)}}catch(Va){Ga(Va.toString())}},Sa.prototype.getAvailableImages=function(va){va=this.availableImages[va];return va||(va=[]),va},Sa.prototype.getLayerIndex=function(va){var Ba=this.layerIndexes[va];return Ba||(Ba=this.layerIndexes[va]=new ka),Ba},Sa.prototype.getWorkerSource=function(va,Ba,Ga){var Na=this;return this.workerSources[va]||(this.workerSources[va]={}),this.workerSources[va][Ba]||(this.workerSources[va][Ba]={}),this.workerSources[va][Ba][Ga]||(this.workerSources[va][Ba][Ga]=new this.workerSourceTypes[Ba]({send:function($a,
Va,qb){Na.actor.send($a,Va,qb,va)}},this.getLayerIndex(va),this.getAvailableImages(va))),this.workerSources[va][Ba][Ga]},Sa.prototype.getDEMWorkerSource=function(va,Ba){return this.demWorkerSources[va]||(this.demWorkerSources[va]={}),this.demWorkerSources[va][Ba]||(this.demWorkerSources[va][Ba]=new sa),this.demWorkerSources[va][Ba]},Sa.prototype.enforceCacheSizeLimit=function(va,Ba){a.enforceCacheSizeLimit(Ba)},"undefined"!=typeof WorkerGlobalScope&&void 0!==a.window&&a.window instanceof WorkerGlobalScope&&
(a.window.worker=new Sa(a.window)),Sa});q(["./shared"],function(a){function g(jb){if(!hb)return jb[0];for(var V=0;V<jb.length;V++)if(jb[V]in hb)return jb[V];return jb[0]}function e(jb,V,Y,W,ca,ua){this.fontSize=jb||24;this.buffer=void 0===V?3:V;this.cutoff=W||.25;this.fontFamily=ca||"sans-serif";this.fontWeight=ua||"normal";this.radius=Y||8;jb=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas");this.canvas.width=this.canvas.height=jb;this.ctx=this.canvas.getContext("2d");
this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily;this.ctx.textBaseline="middle";this.ctx.fillStyle="black";this.gridOuter=new Float64Array(jb*jb);this.gridInner=new Float64Array(jb*jb);this.f=new Float64Array(jb);this.d=new Float64Array(jb);this.z=new Float64Array(jb+1);this.v=new Int16Array(jb);this.middle=Math.round(jb/2*(0<=navigator.userAgent.indexOf("Gecko/")?1.2:1))}function n(jb,V,Y,W,ca,ua,Fa){for(var Qa=0;Qa<V;Qa++){for(var Za=0;Za<Y;Za++)W[Za]=jb[Za*V+Qa];p(W,ca,ua,
Fa,Y);for(Za=0;Za<Y;Za++)jb[Za*V+Qa]=ca[Za]}for(Za=0;Za<Y;Za++){for(Qa=0;Qa<V;Qa++)W[Qa]=jb[Za*V+Qa];p(W,ca,ua,Fa,V);for(Qa=0;Qa<V;Qa++)jb[Za*V+Qa]=Math.sqrt(ca[Qa])}}function p(jb,V,Y,W,ca){Y[0]=0;W[0]=-1E20;W[1]=1E20;for(var ua=1,Fa=0;ua<ca;ua++){for(var Qa=(jb[ua]+ua*ua-(jb[Y[Fa]]+Y[Fa]*Y[Fa]))/(2*ua-2*Y[Fa]);Qa<=W[Fa];)Fa--,Qa=(jb[ua]+ua*ua-(jb[Y[Fa]]+Y[Fa]*Y[Fa]))/(2*ua-2*Y[Fa]);Y[++Fa]=ua;W[Fa]=Qa;W[Fa+1]=1E20}for(Fa=ua=0;ua<ca;ua++){for(;W[Fa+1]<ua;)Fa++;V[ua]=(ua-Y[Fa])*(ua-Y[Fa])+jb[Y[Fa]]}}
function c(jb,V,Y){var W=function(ca,ua){if(ca)return Y(ca);ua&&(ca=a.pick(a.extend(ua,jb),"tiles minzoom maxzoom attribution mapbox_logo bounds scheme tileSize encoding".split(" ")),ua.vector_layers&&(ca.vectorLayers=ua.vector_layers,ca.vectorLayerIds=ca.vectorLayers.map(function(Fa){return Fa.id})),ca.tiles=V.canonicalizeTileset(ca,jb.url),Y(null,ca))};return jb.url?a.getJSON(V.transformRequest(V.normalizeSourceURL(jb.url),a.ResourceType.Source),W):a.browser.frame(function(){return W(null,jb)})}
function d(jb,V){var Y=a.identity([]);return a.translate(Y,Y,[1,1,0]),a.scale(Y,Y,[.5*jb.width,.5*jb.height,1]),a.multiply(Y,Y,jb.calculatePosMatrix(V.toUnwrapped()))}function f(jb,V,Y,W,ca,ua){var Fa=function(Eb,kc,jc){if(Eb)for(var $b=0;$b<Eb.length;$b+=1){var ic=kc[Eb[$b]];if(ic&&ic.source===jc&&"fill-extrusion"===ic.type)return!0}else for($b in kc)if(Eb=kc[$b],Eb.source===jc&&"fill-extrusion"===Eb.type)return!0;return!1}(ca&&ca.layers,V,jb.id),Qa=ua.maxPitchScaleFactor();W=jb.tilesIn(W,Qa,Fa);
W.sort(k);Fa=[];for(var Za=0;Za<W.length;Za+=1){var wb=W[Za];Fa.push({wrappedTileID:wb.tileID.wrapped().key,queryResults:wb.tile.queryRenderedFeatures(V,Y,jb._state,wb.queryGeometry,wb.cameraQueryGeometry,wb.scale,ca,ua,Qa,d(jb.transform,wb.tileID))})}V=function(Eb){for(var kc={},jc={},$b=0;$b<Eb.length;$b+=1){var ic=Eb[$b],gc=ic.queryResults;ic=ic.wrappedTileID;ic=jc[ic]=jc[ic]||{};for(var Cb in gc)for(var bc=gc[Cb],Ec=ic[Cb]=ic[Cb]||{},Yc=kc[Cb]=kc[Cb]||[],fd=0;fd<bc.length;fd+=1){var Fc=bc[fd];
Ec[Fc.featureIndex]||(Ec[Fc.featureIndex]=!0,Yc.push(Fc))}}return kc}(Fa);for(var Db in V)V[Db].forEach(function(Eb){Eb=Eb.feature;var kc=jb.getFeatureState(Eb.layer["source-layer"],Eb.id);Eb.source=Eb.layer.source;Eb.layer["source-layer"]&&(Eb.sourceLayer=Eb.layer["source-layer"]);Eb.state=kc});return V}function k(jb,V){jb=jb.tileID;V=V.tileID;return jb.overscaledZ-V.overscaledZ||jb.canonical.y-V.canonical.y||jb.wrap-V.wrap||jb.canonical.x-V.canonical.x}function r(jb,V){var Y=Math.abs(2*jb.wrap)-
+(0>jb.wrap),W=Math.abs(2*V.wrap)-+(0>V.wrap);return jb.overscaledZ-V.overscaledZ||W-Y||V.canonical.y-jb.canonical.y||V.canonical.x-jb.canonical.x}function u(jb){return"raster"===jb||"image"===jb||"video"===jb}function v(){return new a.window.Worker(Qi.workerUrl)}function x(jb,V){var Y={},W;for(W in jb)"ref"!==W&&(Y[W]=jb[W]);return a.refProperties.forEach(function(ca){ca in V&&(Y[ca]=V[ca])}),Y}function C(jb){jb=jb.slice();for(var V=Object.create(null),Y=0;Y<jb.length;Y++)V[jb[Y].id]=jb[Y];for(Y=
0;Y<jb.length;Y++)"ref"in jb[Y]&&(jb[Y]=x(jb[Y],V[jb[Y].ref]));return jb}function z(jb,V,Y,W,ca,ua){for(var Fa in V=V||{},jb=jb||{})jb.hasOwnProperty(Fa)&&(a.deepEqual(jb[Fa],V[Fa])||Y.push({command:ua,args:[W,Fa,V[Fa],ca]}));for(Fa in V)V.hasOwnProperty(Fa)&&!jb.hasOwnProperty(Fa)&&(a.deepEqual(jb[Fa],V[Fa])||Y.push({command:ua,args:[W,Fa,V[Fa],ca]}))}function y(jb){return jb.id}function D(jb,V){return jb[V.id]=V,jb}function A(jb,V,Y,W,ca){var ua=a.create();return V?(a.scale(ua,ua,[1/ca,1/ca,1]),
Y||a.rotateZ(ua,ua,W.angle)):a.multiply(ua,W.labelPlaneMatrix,jb),ua}function t(jb,V,Y,W,ca){return V?(jb=a.clone(jb),a.scale(jb,jb,[ca,ca,1]),Y||a.rotateZ(jb,jb,-W.angle),jb):W.glCoordMatrix}function B(jb,V){jb=[jb.x,jb.y,0,1];N(jb,jb,V);V=jb[3];return{point:new a.Point(jb[0]/V,jb[1]/V),signedDistanceFromCamera:V}}function F(jb,V,Y,W,ca,ua,Fa,Qa){var Za=W?jb.textSizeData:jb.iconSizeData,wb=a.evaluateSizeForZoom(Za,Y.transform.zoom),Db=[256/Y.width*2+1,256/Y.height*2+1],Eb=W?jb.text.dynamicLayoutVertexArray:
jb.icon.dynamicLayoutVertexArray;Eb.clear();for(var kc=jb.lineVertexArray,jc=W?jb.text.placedSymbolArray:jb.icon.placedSymbolArray,$b=Y.transform.width/Y.transform.height,ic=!1,gc=0;gc<jc.length;gc++){var Cb=jc.get(gc);if(Cb.hidden||Cb.writingMode===a.WritingMode.vertical&&!ic)M(Cb.numGlyphs,Eb);else{ic=!1;var bc=[Cb.anchorX,Cb.anchorY,0,1];a.transformMat4(bc,bc,V);var Ec=bc[0]/bc[3],Yc=bc[1]/bc[3];if(Ec>=-Db[0]&&Ec<=Db[0]&&Yc>=-Db[1]&&Yc<=Db[1]){ic=.5+Y.transform.cameraToCenterDistance/bc[3]*.5;
bc=a.evaluateSizeForFeature(Za,wb,Cb);bc=Fa?bc/ic:bc*ic;Ec=new a.Point(Cb.anchorX,Cb.anchorY);Yc=B(Ec,ca).point;var fd={},Fc=L(Cb,bc,!1,Qa,V,ca,ua,jb.glyphOffsetArray,kc,Eb,Yc,Ec,fd,$b);ic=Fc.useVertical;(Fc.notEnoughRoom||ic||Fc.needsFlipping&&L(Cb,bc,!0,Qa,V,ca,ua,jb.glyphOffsetArray,kc,Eb,Yc,Ec,fd,$b).notEnoughRoom)&&M(Cb.numGlyphs,Eb)}else M(Cb.numGlyphs,Eb)}}W?jb.text.dynamicLayoutVertexBuffer.updateData(Eb):jb.icon.dynamicLayoutVertexBuffer.updateData(Eb)}function I(jb,V,Y,W,ca,ua,Fa,Qa,Za,
wb,Db){var Eb=Qa.glyphStartIndex+Qa.numGlyphs,kc=Qa.lineStartIndex,jc=Qa.lineStartIndex+Qa.lineLength,$b=V.getoffsetX(Qa.glyphStartIndex);V=V.getoffsetX(Eb-1);$b=P(jb*$b,Y,W,ca,ua,Fa,Qa.segment,kc,jc,Za,wb,Db);return $b?(jb=P(jb*V,Y,W,ca,ua,Fa,Qa.segment,kc,jc,Za,wb,Db))?{first:$b,last:jb}:null:null}function J(jb,V,Y,W){return jb===a.WritingMode.horizontal&&Math.abs(Y.y-V.y)>Math.abs(Y.x-V.x)*W?{useVertical:!0}:(jb===a.WritingMode.vertical?V.y<Y.y:V.x>Y.x)?{needsFlipping:!0}:null}function L(jb,V,
Y,W,ca,ua,Fa,Qa,Za,wb,Db,Eb,kc,jc){V/=24;var $b=jb.lineOffsetX*V,ic=jb.lineOffsetY*V;if(1<jb.numGlyphs){ca=jb.glyphStartIndex+jb.numGlyphs;var gc=jb.lineStartIndex,Cb=jb.lineStartIndex+jb.lineLength,bc=I(V,Qa,$b,ic,Y,Db,Eb,jb,Za,ua,kc);if(!bc)return{notEnoughRoom:!0};var Ec=B(bc.first.point,Fa).point;Fa=B(bc.last.point,Fa).point;if(W&&!Y&&(jc=J(jb.writingMode,Ec,Fa,jc)))return jc;jc=[bc.first];for(W=jb.glyphStartIndex+1;W<ca-1;W++)jc.push(P(V*Qa.getoffsetX(W),$b,ic,Y,Db,Eb,jb.segment,gc,Cb,Za,ua,
kc));jc.push(bc.last)}else{if(W&&!Y&&(gc=B(Eb,ca).point,Cb=jb.lineStartIndex+jb.segment+1,Cb=new a.Point(Za.getx(Cb),Za.gety(Cb)),bc=B(Cb,ca),ca=0<bc.signedDistanceFromCamera?bc.point:H(Eb,Cb,gc,1,ca),jc=J(jb.writingMode,gc,ca,jc)))return jc;jb=P(V*Qa.getoffsetX(jb.glyphStartIndex),$b,ic,Y,Db,Eb,jb.segment,jb.lineStartIndex,jb.lineStartIndex+jb.lineLength,Za,ua,kc);if(!jb)return{notEnoughRoom:!0};jc=[jb]}jb=0;for(Y=jc;jb<Y.length;jb+=1)ua=Y[jb],a.addDynamicAttributes(wb,ua.point,ua.angle);return{}}
function H(jb,V,Y,W,ca){jb=B(jb.add(jb.sub(V)._unit()),ca).point;jb=Y.sub(jb);return Y.add(jb._mult(W/jb.mag()))}function P(jb,V,Y,W,ca,ua,Fa,Qa,Za,wb,Db,Eb){var kc=W?jb-V:jb+V;jb=0<kc?1:-1;V=0;W&&(jb*=-1,V=Math.PI);0>jb&&(V+=Math.PI);W=0<jb?Qa+Fa:Qa+Fa+1;Fa=ca;var jc=0,$b=0,ic=Math.abs(kc);for(kc=[];jc+$b<=ic;){if((W+=jb)<Qa||W>=Za)return null;if(ca=Fa,kc.push(Fa),void 0===(Fa=Eb[W])){Fa=new a.Point(wb.getx(W),wb.gety(W));var gc=B(Fa,Db);0<gc.signedDistanceFromCamera?Fa=Eb[W]=gc.point:(gc=W-jb,Fa=
H(0===jc?ua:new a.Point(wb.getx(gc),wb.gety(gc)),Fa,ca,ic-jc+1,Db))}jc+=$b;$b=ca.dist(Fa)}Qa=(ic-jc)/$b;ua=Fa.sub(ca);Qa=ua.mult(Qa)._add(ca);Qa._add(ua._unit()._perp()._mult(Y*jb));Y=V+Math.atan2(Fa.y-ca.y,Fa.x-ca.x);return kc.push(Qa),{point:Qa,angle:Y,path:kc}}function M(jb,V){for(var Y=0;Y<jb;Y++){var W=V.length;V.resize(W+4);V.float32.set(re,3*W)}}function N(jb,V,Y){var W=V[0];V=V[1];return jb[0]=Y[0]*W+Y[4]*V+Y[12],jb[1]=Y[1]*W+Y[5]*V+Y[13],jb[3]=Y[3]*W+Y[7]*V+Y[15],jb}function T(jb,V,Y){return a.EXTENT/
(jb.tileSize*Math.pow(2,Y-jb.tileID.overscaledZ))*V}function Q(jb,V,Y,W,ca){var ua=a.getAnchorAlignment(jb);V*=-(ua.horizontalAlign-.5);Y*=-(ua.verticalAlign-.5);jb=a.evaluateVariableOffset(jb,W);return new a.Point(V+jb[0]*ca,Y+jb[1]*ca)}function U(jb,V,Y,W,ca,ua){var Fa=jb.x1,Qa=jb.x2,Za=jb.y1,wb=jb.y2,Db=jb.anchorPointX;jb=jb.anchorPointY;V=new a.Point(V,Y);return W&&V._rotate(ca?ua:-ua),{x1:Fa+V.x,y1:Za+V.y,x2:Qa+V.x,y2:wb+V.y,anchorPointX:Db,anchorPointY:jb}}function S(jb,V,Y,W,ca){jb.emplaceBack(V?
1:0,Y?1:0,W||0,ca||0);jb.emplaceBack(V?1:0,Y?1:0,W||0,ca||0);jb.emplaceBack(V?1:0,Y?1:0,W||0,ca||0);jb.emplaceBack(V?1:0,Y?1:0,W||0,ca||0)}function X(jb){if(0===jb.opacity&&!jb.placed)return 0;if(1===jb.opacity&&jb.placed)return 4294967295;var V=jb.placed?1:0;jb=Math.floor(127*jb.opacity);return jb*gd+V*Jd+jb*Td+V*Fd+jb*Ed+V*ee+jb*ge+V}function Z(jb,V){var Y=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,W={};return{fragmentSource:jb=jb.replace(Y,function(ca,ua,Fa,Qa,Za){return W[Za]=!0,"define"===
ua?"\n#ifndef HAS_UNIFORM_u_"+Za+"\nvarying "+Fa+" "+Qa+" "+Za+";\n#else\nuniform "+Fa+" "+Qa+" u_"+Za+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+Za+"\n    "+Fa+" "+Qa+" "+Za+" = u_"+Za+";\n#endif\n"}),vertexSource:V=V.replace(Y,function(ca,ua,Fa,Qa,Za){ca="float"===Qa?"vec2":"vec4";var wb=Za.match(/color/)?"color":ca;return W[Za]?"define"===ua?"\n#ifndef HAS_UNIFORM_u_"+Za+"\nuniform lowp float u_"+Za+"_t;\nattribute "+Fa+" "+ca+" a_"+Za+";\nvarying "+Fa+" "+Qa+" "+Za+";\n#else\nuniform "+Fa+" "+Qa+
" u_"+Za+";\n#endif\n":"vec4"===wb?"\n#ifndef HAS_UNIFORM_u_"+Za+"\n    "+Za+" = a_"+Za+";\n#else\n    "+Fa+" "+Qa+" "+Za+" = u_"+Za+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+Za+"\n    "+Za+" = unpack_mix_"+wb+"(a_"+Za+", u_"+Za+"_t);\n#else\n    "+Fa+" "+Qa+" "+Za+" = u_"+Za+";\n#endif\n":"define"===ua?"\n#ifndef HAS_UNIFORM_u_"+Za+"\nuniform lowp float u_"+Za+"_t;\nattribute "+Fa+" "+ca+" a_"+Za+";\n#else\nuniform "+Fa+" "+Qa+" u_"+Za+";\n#endif\n":"vec4"===wb?"\n#ifndef HAS_UNIFORM_u_"+Za+"\n    "+
Fa+" "+Qa+" "+Za+" = a_"+Za+";\n#else\n    "+Fa+" "+Qa+" "+Za+" = u_"+Za+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+Za+"\n    "+Fa+" "+Qa+" "+Za+" = unpack_mix_"+wb+"(a_"+Za+", u_"+Za+"_t);\n#else\n    "+Fa+" "+Qa+" "+Za+" = u_"+Za+";\n#endif\n"})}}function aa(jb,V,Y){var W=1/T(Y,1,V.transform.tileZoom),ca=Math.pow(2,Y.tileID.overscaledZ);V=Y.tileSize*Math.pow(2,V.transform.tileZoom)/ca;ca=V*(Y.tileID.canonical.x+Y.tileID.wrap*ca);V*=Y.tileID.canonical.y;return{u_image:0,u_texsize:Y.imageAtlasTexture.size,
u_scale:[W,jb.fromScale,jb.toScale],u_fade:jb.t,u_pixel_coord_upper:[ca>>16,V>>16],u_pixel_coord_lower:[65535&ca,65535&V]}}function fa(jb,V,Y){return jb.translatePosMatrix(V.tileID.posMatrix,V,Y.paint.get("line-translate"),Y.paint.get("line-translate-anchor"))}function ha(jb,V,Y,W,ca,ua,Fa){for(var Qa=jb.context,Za=Qa.gl,wb=jb.useProgram("collisionBox"),Db=[],Eb=0,kc=0,jc=0;jc<W.length;jc++){var $b=W[jc],ic=V.getTile($b),gc=ic.getBucket(Y);if(gc){var Cb=$b.posMatrix;0===ca[0]&&0===ca[1]||(Cb=jb.translatePosMatrix($b.posMatrix,
ic,ca,ua));$b=Fa?gc.textCollisionBox:gc.iconCollisionBox;var bc=gc.collisionCircleArray;if(0<bc.length){var Ec=a.create(),Yc=Cb;a.mul(Ec,gc.placementInvProjMatrix,jb.transform.glCoordMatrix);a.mul(Ec,Ec,gc.placementViewportMatrix);Db.push({circleArray:bc,circleOffset:kc,transform:Yc,invTransform:Ec});kc=Eb+=bc.length/4}if($b){gc=wb;bc=gc.draw;Ec=Za.LINES;Yc=ud.disabled;var fd=td.disabled,Fc=jb.colorModeForRenderPass(),hd=be.disabled,dd=jb.transform,sd=ic;ic=T(sd,1,dd.zoom);var vd=Math.pow(2,dd.zoom-
sd.tileID.overscaledZ);sd=sd.tileID.overscaleFactor();bc.call(gc,Qa,Ec,Yc,fd,Fc,hd,{u_matrix:Cb,u_camera_to_center_distance:dd.cameraToCenterDistance,u_pixels_to_tile_units:ic,u_extrude_scale:[dd.pixelsToGLUnits[0]/(ic*vd),dd.pixelsToGLUnits[1]/(ic*vd)],u_overscale_factor:sd},Y.id,$b.layoutVertexBuffer,$b.indexBuffer,$b.segments,null,jb.transform.zoom,null,null,$b.collisionVertexBuffer)}}}if(Fa&&Db.length){V=jb.useProgram("collisionCircle");W=new a.StructArrayLayout2f1f2i16;W.resize(4*Eb);W._trim();
for(ua=ca=0;ua<Db.length;ua+=1)for(Fa=Db[ua],wb=0;wb<Fa.circleArray.length/4;wb++)ic=4*wb,kc=Fa.circleArray[ic+0],jc=Fa.circleArray[ic+1],$b=Fa.circleArray[ic+2],ic=Fa.circleArray[ic+3],W.emplace(ca++,kc,jc,$b,ic,0),W.emplace(ca++,kc,jc,$b,ic,1),W.emplace(ca++,kc,jc,$b,ic,2),W.emplace(ca++,kc,jc,$b,ic,3);if(!Ki||Ki.length<2*Eb){Eb*=2;ca=new a.StructArrayLayout3ui6;ca.resize(Eb);ca._trim();for(ua=0;ua<Eb;ua++)Fa=6*ua,ca.uint16[Fa+0]=4*ua,ca.uint16[Fa+1]=4*ua+1,ca.uint16[Fa+2]=4*ua+2,ca.uint16[Fa+3]=
4*ua+2,ca.uint16[Fa+4]=4*ua+3,ca.uint16[Fa+5]=4*ua;Ki=ca}Eb=Qa.createIndexBuffer(Ki,!0);W=Qa.createVertexBuffer(W,a.collisionCircleLayout.members,!0);for(ca=0;ca<Db.length;ca+=1)ua=Db[ca],Fa=jb.transform,Fa={u_matrix:ua.transform,u_inv_matrix:ua.invTransform,u_camera_to_center_distance:Fa.cameraToCenterDistance,u_viewport_size:[Fa.width,Fa.height]},V.draw(Qa,Za.TRIANGLES,ud.disabled,td.disabled,jb.colorModeForRenderPass(),be.disabled,Fa,Y.id,W,Eb,a.SegmentVector.simpleSegment(0,2*ua.circleOffset,
ua.circleArray.length,ua.circleArray.length/2),null,jb.transform.zoom,null,null,null);W.destroy();Eb.destroy()}}function ja(jb,V,Y,W,ca,ua,Fa,Qa,Za,wb,Db,Eb){var kc=jb.context,jc=kc.gl,$b=jb.transform,ic="map"===Qa,gc="map"===Za,Cb=ic&&"point"!==Y.layout.get("symbol-placement"),bc=ic&&!gc&&!Cb,Ec=void 0!==Y.layout.get("symbol-sort-key").constantOr(1);Za=jb.depthModeForSublayer(0,ud.ReadOnly);var Yc=Y.layout.get("text-variable-anchor");Qa=[];for(var fd=0;fd<W.length;fd+=1){var Fc=W[fd],hd=V.getTile(Fc),
dd=hd.getBucket(Y);if(dd){var sd=ca?dd.text:dd.icon;if(sd&&sd.segments.get().length){var vd=sd.programConfigurations.get(Y.id),od=ca||dd.sdfIcons,$d=ca?dd.textSizeData:dd.iconSizeData,Xd=gc||0!==$b.pitch;vd=jb.useProgram(dd.iconsInText&&ca?"symbolTextAndIcon":od?"symbolSDF":"symbolIcon",vd);var xe=a.evaluateSizeForZoom($d,$b.zoom),ye=void 0,ue=[0,0],Nd=void 0,ie=void 0,Le=null,se=void 0;ca?(Nd=hd.glyphAtlasTexture,ie=jc.LINEAR,ye=hd.glyphAtlasTexture.size,dd.iconsInText&&(ue=hd.imageAtlasTexture.size,
Le=hd.imageAtlasTexture,se=Xd||jb.options.rotating||jb.options.zooming||"composite"===$d.kind||"camera"===$d.kind?jc.LINEAR:jc.NEAREST)):(ye=1!==Y.layout.get("icon-size").constantOr(0)||dd.iconsNeedLinear,Nd=hd.imageAtlasTexture,ie=od||jb.options.rotating||jb.options.zooming||ye||Xd?jc.LINEAR:jc.NEAREST,ye=hd.imageAtlasTexture.size);var Ne=T(hd,1,jb.transform.zoom);Xd=A(Fc.posMatrix,gc,ic,jb.transform,Ne);Ne=t(Fc.posMatrix,gc,ic,jb.transform,Ne);var rf=Yc&&dd.hasTextData();rf="none"!==Y.layout.get("icon-text-fit")&&
rf&&dd.hasIconData();Cb&&F(dd,Fc.posMatrix,jb,ca,Xd,Ne,gc,wb);Fc=jb.translatePosMatrix(Fc.posMatrix,hd,ua,Fa);Xd=Cb||ca&&Yc||rf?sk:Xd;hd=jb.translatePosMatrix(Ne,hd,ua,Fa,!0);Ne=od&&0!==Y.paint.get(ca?"text-halo-width":"icon-halo-width").constantOr(1);dd={program:vd,buffers:sd,uniformValues:od?dd.iconsInText?Sj($d.kind,xe,bc,gc,jb,Fc,Xd,hd,ye,ue):Rj($d.kind,xe,bc,gc,jb,Fc,Xd,hd,ca,ye,!0):Qj($d.kind,xe,bc,gc,jb,Fc,Xd,hd,ca,ye),atlasTexture:Nd,atlasTextureIcon:Le,atlasInterpolation:ie,atlasInterpolationIcon:se,
isSDF:od,hasHalo:Ne};if(Ec)for(od=0,sd=sd.segments.get();od<sd.length;od+=1)$d=sd[od],Qa.push({segments:new a.SegmentVector([$d]),sortKey:$d.sortKey,state:dd});else Qa.push({segments:sd.segments,sortKey:0,state:dd})}}}Ec&&Qa.sort(function(bf,qh){return bf.sortKey-qh.sortKey});for(V=0;V<Qa.length;V+=1){W=Qa[V];ca=W.state;if(kc.activeTexture.set(jc.TEXTURE0),ca.atlasTexture.bind(ca.atlasInterpolation,jc.CLAMP_TO_EDGE),ca.atlasTextureIcon&&(kc.activeTexture.set(jc.TEXTURE1),ca.atlasTextureIcon&&ca.atlasTextureIcon.bind(ca.atlasInterpolationIcon,
jc.CLAMP_TO_EDGE)),ca.isSDF)ua=ca.uniformValues,ca.hasHalo&&(ua.u_is_halo=1,ba(ca.buffers,W.segments,Y,jb,ca.program,Za,Db,Eb,ua)),ua.u_is_halo=0;ba(ca.buffers,W.segments,Y,jb,ca.program,Za,Db,Eb,ca.uniformValues)}}function ba(jb,V,Y,W,ca,ua,Fa,Qa,Za){var wb=W.context;ca.draw(wb,wb.gl.TRIANGLES,ua,Fa,Qa,be.disabled,Za,Y.id,jb.layoutVertexBuffer,jb.indexBuffer,V,Y.paint,W.transform.zoom,jb.programConfigurations.get(Y.id),jb.dynamicLayoutVertexBuffer,jb.opacityVertexBuffer)}function ma(jb,V,Y,W,ca,
ua,Fa){var Qa,Za,wb,Db=jb.context.gl,Eb=Y.paint.get("fill-pattern"),kc=Eb&&Eb.constantOr(1),jc=Y.getCrossfadeParameters();Fa?(Za=kc&&!Y.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Qa=Db.LINES):(Za=kc?"fillPattern":"fill",Qa=Db.TRIANGLES);for(var $b=0;$b<W.length;$b+=1){var ic=W[$b];var gc=V.getTile(ic);if(!kc||gc.patternsLoaded()){var Cb=gc.getBucket(Y);if(Cb){var bc=Cb.programConfigurations.get(Y.id),Ec=jb.useProgram(Za,bc);kc&&(jb.context.activeTexture.set(Db.TEXTURE0),
gc.imageAtlasTexture.bind(Db.LINEAR,Db.CLAMP_TO_EDGE),bc.updatePaintBuffers(jc));if((wb=Eb.constantOr(null))&&gc.imageAtlas){var Yc=gc.imageAtlas;var fd=Yc.patternPositions[wb.to.toString()];wb=Yc.patternPositions[wb.from.toString()];fd&&wb&&bc.setConstantPatternPositions(fd,wb)}Yc=jb.translatePosMatrix(ic.posMatrix,gc,Y.paint.get("fill-translate"),Y.paint.get("fill-translate-anchor"));if(Fa){fd=Cb.indexBuffer2;wb=Cb.segments2;var Fc=[Db.drawingBufferWidth,Db.drawingBufferHeight];if("fillOutlinePattern"===
Za&&kc){var hd=a,dd=hd.extend;gc=a.extend({u_matrix:Yc},aa(jc,jb,gc));gc=dd.call(hd,gc,{u_world:Fc})}else gc={u_matrix:Yc,u_world:Fc}}else fd=Cb.indexBuffer,wb=Cb.segments,gc=kc?a.extend({u_matrix:Yc},aa(jc,jb,gc)):{u_matrix:Yc};Ec.draw(jb.context,Qa,ca,jb.stencilModeForClipping(ic),ua,be.disabled,gc,Y.id,Cb.layoutVertexBuffer,fd,wb,Y.paint,jb.transform.zoom,bc)}}}}function qa(jb,V,Y,W,ca,ua,Fa){for(var Qa=jb.context,Za=Qa.gl,wb=Y.paint.get("fill-extrusion-pattern"),Db=wb.constantOr(1),Eb=Y.getCrossfadeParameters(),
kc=Y.paint.get("fill-extrusion-opacity"),jc=0;jc<W.length;jc+=1){var $b=W[jc],ic=V.getTile($b),gc=ic.getBucket(Y);if(gc){var Cb=gc.programConfigurations.get(Y.id),bc=jb.useProgram(Db?"fillExtrusionPattern":"fillExtrusion",Cb);Db&&(jb.context.activeTexture.set(Za.TEXTURE0),ic.imageAtlasTexture.bind(Za.LINEAR,Za.CLAMP_TO_EDGE),Cb.updatePaintBuffers(Eb));var Ec=wb.constantOr(null);if(Ec&&ic.imageAtlas){var Yc=ic.imageAtlas,fd=Yc.patternPositions[Ec.to.toString()];Ec=Yc.patternPositions[Ec.from.toString()];
fd&&Ec&&Cb.setConstantPatternPositions(fd,Ec)}fd=jb.translatePosMatrix($b.posMatrix,ic,Y.paint.get("fill-extrusion-translate"),Y.paint.get("fill-extrusion-translate-anchor"));Ec=Y.paint.get("fill-extrusion-vertical-gradient");if(Db){Yc=jb;var Fc=Eb;ic=a.extend(Sf(fd,Yc,Ec,kc),aa(Fc,Yc,ic),{u_height_factor:-Math.pow(2,$b.overscaledZ)/ic.tileSize/8})}else ic=Sf(fd,jb,Ec,kc);bc.draw(Qa,Qa.gl.TRIANGLES,ca,ua,Fa,be.backCCW,ic,Y.id,gc.layoutVertexBuffer,gc.indexBuffer,gc.segments,Y.paint,jb.transform.zoom,
Cb)}}}function ka(jb,V,Y,W,ca,ua){jb=jb.context;var Fa=jb.gl;Fa.enable(Fa.SCISSOR_TEST);Fa.scissor(V*a.browser.devicePixelRatio,Y*a.browser.devicePixelRatio,W*a.browser.devicePixelRatio,ca*a.browser.devicePixelRatio);jb.clear({color:ua});Fa.disable(Fa.SCISSOR_TEST)}function oa(jb,V){(!jb.duration||jb.duration<V.duration)&&(jb.duration=V.duration,jb.easing=V.easing)}function na(jb,V,Y){var W=Y.maxSpeed,ca=Y.linearity,ua=Y.deceleration;jb=a.clamp(jb*ca/(V/1E3),-W,W);ca=Math.abs(jb)/(ua*ca);return{easing:Y.easing,
duration:1E3*ca,amount:ca/2*jb}}function la(jb,V){for(var Y={},W=0;W<jb.length;W++)Y[jb[W].identifier]=V[W];return Y}function ia(jb,V,Y){for(var W=0;W<jb.length;W++)if(jb[W].identifier===Y)return V[W]}function sa(jb){return Math.abs(jb.y)>Math.abs(jb.x)}function ta(jb){return jb*(2-jb)}function Aa(jb){return jb.panDelta&&jb.panDelta.mag()||jb.zoomDelta||jb.bearingDelta||jb.pitchDelta}function Ka(jb){jb.parentNode&&jb.parentNode.removeChild(jb)}function Sa(jb,V,Y){if(jb=new a.LngLat(jb.lng,jb.lat),
V){var W=new a.LngLat(jb.lng-360,jb.lat),ca=new a.LngLat(jb.lng+360,jb.lat),ua=Y.locationPoint(jb).distSqr(V);Y.locationPoint(W).distSqr(V)<ua?jb=W:Y.locationPoint(ca).distSqr(V)<ua&&(jb=ca)}for(;180<Math.abs(jb.lng-Y.center.lng);){V=Y.locationPoint(jb);if(0<=V.x&&0<=V.y&&V.x<=Y.width&&V.y<=Y.height)break;jb.lng>Y.center.lng?jb.lng-=360:jb.lng+=360}return jb}function db(jb,V,Y){jb=jb.classList;for(var W in Wg)jb.remove("mapboxgl-"+Y+"-anchor-"+W);jb.add("mapboxgl-"+Y+"-anchor-"+V)}function eb(jb,
V,Y){var W=Y&&Y.maxWidth||100,ca=jb._container.clientHeight/2,ua=jb.unproject([0,ca]);ca=jb.unproject([W,ca]);ua=ua.distanceTo(ca);Y&&"imperial"===Y.unit?(Y=3.2808*ua,5280<Y?lb(V,W,Y/5280,jb._getUIString("ScaleControl.Miles")):lb(V,W,Y,jb._getUIString("ScaleControl.Feet"))):Y&&"nautical"===Y.unit?lb(V,W,ua/1852,jb._getUIString("ScaleControl.NauticalMiles")):1E3<=ua?lb(V,W,ua/1E3,jb._getUIString("ScaleControl.Kilometers")):lb(V,W,ua,jb._getUIString("ScaleControl.Meters"))}function lb(jb,V,Y,W){var ca,
ua=ca=Math.pow(10,(""+Math.floor(Y)).length-1);if(10<=(ca=Y/ca))ca=10;else if(5<=ca)ca=5;else if(3<=ca)ca=3;else if(2<=ca)ca=2;else if(1<=ca)ca=1;else{var Fa=Math.pow(10,Math.ceil(-Math.log(ca)/Math.LN10));ca=Math.round(ca*Fa)/Fa}ua*=ca;jb.style.width=ua/Y*V+"px";jb.innerHTML=ua+"&nbsp;"+W}var ab=a.createCommonjsModule(function(jb){function V(ca){return!Y(ca)}function Y(ca){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&
Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?
"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var Fa=new Blob([""],{type:"text/javascript"});Fa=URL.createObjectURL(Fa);try{var Qa=new Worker(Fa);var Za=!0}catch(wb){Za=!1}return Qa&&Qa.terminate(),URL.revokeObjectURL(Fa),Za}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var Fa=document.createElement("canvas");Fa.width=Fa.height=1;var Qa=Fa.getContext("2d");return Qa?(Qa=Qa.getImageData(0,0,1,1))&&Qa.width===
Fa.width:!1}()?(void 0===W[ua=ca&&ca.failIfMajorPerformanceCaveat]&&(W[ua]=function(Fa){var Qa=document.createElement("canvas"),Za=Object.create(V.webGLContextAttributes);Fa=(Za.failIfMajorPerformanceCaveat=Fa,Qa.probablySupportsContext?Qa.probablySupportsContext("webgl",Za)||Qa.probablySupportsContext("experimental-webgl",Za):Qa.supportsContext?Qa.supportsContext("webgl",Za)||Qa.supportsContext("experimental-webgl",Za):Qa.getContext("webgl",Za)||Qa.getContext("experimental-webgl",Za));if(!Fa)return!1;
Qa=Fa.createShader(Fa.VERTEX_SHADER);return!(!Qa||Fa.isContextLost())&&(Fa.shaderSource(Qa,"void main() {}"),Fa.compileShader(Qa),!0===Fa.getShaderParameter(Qa,Fa.COMPILE_STATUS))}(ua)),W[ua]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var ua}
jb.exports?jb.exports=V:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=V,window.mapboxgl.notSupportedReason=Y);var W={};V.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),Ya={create:function(jb,V,Y){jb=a.window.document.createElement(jb);return void 0!==V&&(jb.className=V),Y&&Y.appendChild(jb),jb},createNS:function(jb,V){return a.window.document.createElementNS(jb,V)}},hb=a.window.document.documentElement.style,nb,va=g(["userSelect","MozUserSelect","WebkitUserSelect",
"msUserSelect"]);Ya.disableDrag=function(){hb&&va&&(nb=hb[va],hb[va]="none")};Ya.enableDrag=function(){hb&&va&&(hb[va]=nb)};var Ba=g(["transform","WebkitTransform"]);Ya.setTransform=function(jb,V){jb.style[Ba]=V};var Ga=!1;try{var Na=Object.defineProperty({},"passive",{get:function(){Ga=!0}});a.window.addEventListener("test",Na,Na);a.window.removeEventListener("test",Na,Na)}catch(jb){Ga=!1}Ya.addEventListener=function(jb,V,Y,W){void 0===W&&(W={});jb.addEventListener(V,Y,"passive"in W&&Ga?W:W.capture)};
Ya.removeEventListener=function(jb,V,Y,W){void 0===W&&(W={});jb.removeEventListener(V,Y,"passive"in W&&Ga?W:W.capture)};var $a=function(jb){jb.preventDefault();jb.stopPropagation();a.window.removeEventListener("click",$a,!0)};Ya.suppressClick=function(){a.window.addEventListener("click",$a,!0);a.window.setTimeout(function(){a.window.removeEventListener("click",$a,!0)},0)};Ya.mousePos=function(jb,V){var Y=jb.getBoundingClientRect();return new a.Point(V.clientX-Y.left-jb.clientLeft,V.clientY-Y.top-
jb.clientTop)};Ya.touchPos=function(jb,V){for(var Y=jb.getBoundingClientRect(),W=[],ca=0;ca<V.length;ca++)W.push(new a.Point(V[ca].clientX-Y.left-jb.clientLeft,V[ca].clientY-Y.top-jb.clientTop));return W};Ya.mouseButton=function(jb){return void 0!==a.window.InstallTrigger&&2===jb.button&&jb.ctrlKey&&0<=a.window.navigator.platform.toUpperCase().indexOf("MAC")?0:jb.button};Ya.remove=function(jb){jb.parentNode&&jb.parentNode.removeChild(jb)};var Va=function(jb){function V(){jb.call(this);this.images=
{};this.updatedImages={};this.callbackDispatchedThisFrame={};this.loaded=!1;this.requestors=[];this.patterns={};this.atlasImage=new a.RGBAImage({width:1,height:1});this.dirty=!0}return jb&&(V.__proto__=jb),(V.prototype=Object.create(jb&&jb.prototype)).constructor=V,V.prototype.isLoaded=function(){return this.loaded},V.prototype.setLoaded=function(Y){if(this.loaded!==Y&&(this.loaded=Y,Y)){Y=0;for(var W=this.requestors;Y<W.length;Y+=1){var ca=W[Y];this._notify(ca.ids,ca.callback)}this.requestors=[]}},
V.prototype.getImage=function(Y){return this.images[Y]},V.prototype.addImage=function(Y,W){this._validate(Y,W)&&(this.images[Y]=W)},V.prototype._validate=function(Y,W){var ca=!0;return this._validateStretch(W.stretchX,W.data&&W.data.width)||(this.fire(new a.ErrorEvent(Error('Image "'+Y+'" has invalid "stretchX" value'))),ca=!1),this._validateStretch(W.stretchY,W.data&&W.data.height)||(this.fire(new a.ErrorEvent(Error('Image "'+Y+'" has invalid "stretchY" value'))),ca=!1),this._validateContent(W.content,
W)||(this.fire(new a.ErrorEvent(Error('Image "'+Y+'" has invalid "content" value'))),ca=!1),ca},V.prototype._validateStretch=function(Y,W){if(!Y)return!0;for(var ca=0,ua=0;ua<Y.length;ua+=1){var Fa=Y[ua];if(Fa[0]<ca||Fa[1]<Fa[0]||W<Fa[1])return!1;ca=Fa[1]}return!0},V.prototype._validateContent=function(Y,W){return!(Y&&(4!==Y.length||0>Y[0]||W.data.width<Y[0]||0>Y[1]||W.data.height<Y[1]||0>Y[2]||W.data.width<Y[2]||0>Y[3]||W.data.height<Y[3]||Y[2]<Y[0]||Y[3]<Y[1]))},V.prototype.updateImage=function(Y,
W){W.version=this.images[Y].version+1;this.images[Y]=W;this.updatedImages[Y]=!0},V.prototype.removeImage=function(Y){var W=this.images[Y];delete this.images[Y];delete this.patterns[Y];W.userImage&&W.userImage.onRemove&&W.userImage.onRemove()},V.prototype.listImages=function(){return Object.keys(this.images)},V.prototype.getImages=function(Y,W){var ca=!0;if(!this.isLoaded())for(var ua=0;ua<Y.length;ua+=1)this.images[Y[ua]]||(ca=!1);this.isLoaded()||ca?this._notify(Y,W):this.requestors.push({ids:Y,
callback:W})},V.prototype._notify=function(Y,W){for(var ca={},ua=0;ua<Y.length;ua+=1){var Fa=Y[ua];this.images[Fa]||this.fire(new a.Event("styleimagemissing",{id:Fa}));var Qa=this.images[Fa];Qa?ca[Fa]={data:Qa.data.clone(),pixelRatio:Qa.pixelRatio,sdf:Qa.sdf,version:Qa.version,stretchX:Qa.stretchX,stretchY:Qa.stretchY,content:Qa.content,hasRenderCallback:!(!Qa.userImage||!Qa.userImage.render)}:a.warnOnce('Image "'+Fa+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}W(null,
ca)},V.prototype.getPixelSize=function(){var Y=this.atlasImage;return{width:Y.width,height:Y.height}},V.prototype.getPattern=function(Y){var W=this.patterns[Y],ca=this.getImage(Y);if(!ca)return null;if(W&&W.position.version===ca.version)return W.position;W?W.position.version=ca.version:(W={w:ca.data.width+2,h:ca.data.height+2,x:0,y:0},ca=new a.ImagePosition(W,ca),this.patterns[Y]={bin:W,position:ca});return this._updatePatternAtlas(),this.patterns[Y].position},V.prototype.bind=function(Y){var W=Y.gl;
this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a.Texture(Y,this.atlasImage,W.RGBA);this.atlasTexture.bind(W.LINEAR,W.CLAMP_TO_EDGE)},V.prototype._updatePatternAtlas=function(){var Y=[];for(W in this.patterns)Y.push(this.patterns[W].bin);Y=a.potpack(Y);var W=Y.w;var ca=Y.h;Y=this.atlasImage;for(var ua in Y.resize({width:W||1,height:ca||1}),this.patterns){ca=this.patterns[ua].bin;W=ca.x+1;ca=ca.y+1;var Fa=this.images[ua].data,Qa=Fa.width,
Za=Fa.height;a.RGBAImage.copy(Fa,Y,{x:0,y:0},{x:W,y:ca},{width:Qa,height:Za});a.RGBAImage.copy(Fa,Y,{x:0,y:Za-1},{x:W,y:ca-1},{width:Qa,height:1});a.RGBAImage.copy(Fa,Y,{x:0,y:0},{x:W,y:ca+Za},{width:Qa,height:1});a.RGBAImage.copy(Fa,Y,{x:Qa-1,y:0},{x:W-1,y:ca},{width:1,height:Za});a.RGBAImage.copy(Fa,Y,{x:0,y:0},{x:W+Qa,y:ca},{width:1,height:Za})}this.dirty=!0},V.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},V.prototype.dispatchRenderCallbacks=function(Y){for(var W=0;W<Y.length;W+=
1){var ca=Y[W];if(!this.callbackDispatchedThisFrame[ca]){this.callbackDispatchedThisFrame[ca]=!0;var ua=this.images[ca],Fa=ua,Qa=Fa.userImage;Qa&&Qa.render&&Qa.render()&&(Fa.data.replace(new Uint8Array(Qa.data.buffer)),!0)&&this.updateImage(ca,ua)}}},V}(a.Evented);e.prototype.draw=function(jb){this.ctx.clearRect(0,0,this.size,this.size);this.ctx.fillText(jb,this.buffer,this.middle);jb=this.ctx.getImageData(0,0,this.size,this.size);for(var V=new Uint8ClampedArray(this.size*this.size),Y=0;Y<this.size*
this.size;Y++){var W=jb.data[4*Y+3]/255;this.gridOuter[Y]=1===W?0:0===W?1E20:Math.pow(Math.max(0,.5-W),2);this.gridInner[Y]=1===W?1E20:0===W?0:Math.pow(Math.max(0,W-.5),2)}n(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z);n(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z);for(Y=0;Y<this.size*this.size;Y++)V[Y]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[Y]-this.gridInner[Y])/this.radius+this.cutoff))));return V};e.default=e;var qb=function(jb,V){this.requestManager=
jb;this.localIdeographFontFamily=V;this.entries={}};qb.prototype.setURL=function(jb){this.url=jb};qb.prototype.getGlyphs=function(jb,V){var Y=this,W=[],ca;for(ca in jb)for(var ua=0,Fa=jb[ca];ua<Fa.length;ua+=1)W.push({stack:ca,id:Fa[ua]});a.asyncAll(W,function(Qa,Za){var wb=Qa.stack,Db=Qa.id,Eb=Y.entries[wb];Eb||(Eb=Y.entries[wb]={glyphs:{},requests:{},ranges:{}});Qa=Eb.glyphs[Db];if(void 0===Qa){if(Qa=Y._tinySDF(Eb,wb,Db))return Eb.glyphs[Db]=Qa,void Za(null,{stack:wb,id:Db,glyph:Qa});var kc=Math.floor(Db/
256);if(65535<256*kc)Za(Error("glyphs > 65535 not supported"));else if(Eb.ranges[kc])Za(null,{stack:wb,id:Db,glyph:Qa});else{var jc=Eb.requests[kc];jc||(jc=Eb.requests[kc]=[],qb.loadGlyphRange(wb,kc,Y.url,Y.requestManager,function($b,ic){if(ic){for(var gc in ic)Y._doesCharSupportLocalGlyph(+gc)||(Eb.glyphs[+gc]=ic[+gc]);Eb.ranges[kc]=!0}gc=0;for(var Cb=jc;gc<Cb.length;gc+=1)(0,Cb[gc])($b,ic);delete Eb.requests[kc]}));jc.push(function($b,ic){$b?Za($b):ic&&Za(null,{stack:wb,id:Db,glyph:ic[Db]||null})})}}else Za(null,
{stack:wb,id:Db,glyph:Qa})},function(Qa,Za){if(Qa)V(Qa);else if(Za){Qa={};for(var wb=0;wb<Za.length;wb+=1){var Db=Za[wb],Eb=Db.stack,kc=Db.id;Db=Db.glyph;(Qa[Eb]||(Qa[Eb]={}))[kc]=Db&&{id:Db.id,bitmap:Db.bitmap.clone(),metrics:Db.metrics}}V(null,Qa)}})};qb.prototype._doesCharSupportLocalGlyph=function(jb){return!!this.localIdeographFontFamily&&(a.isChar["CJK Unified Ideographs"](jb)||a.isChar["Hangul Syllables"](jb)||a.isChar.Hiragana(jb)||a.isChar.Katakana(jb))};qb.prototype._tinySDF=function(jb,
V,Y){var W=this.localIdeographFontFamily;if(W&&this._doesCharSupportLocalGlyph(Y)){var ca=jb.tinySDF;ca||(ca="400",/bold/i.test(V)?ca="900":/medium/i.test(V)?ca="500":/light/i.test(V)&&(ca="200"),ca=jb.tinySDF=new qb.TinySDF(24,3,8,.25,W,ca));return{id:Y,bitmap:new a.AlphaImage({width:30,height:30},ca.draw(String.fromCharCode(Y))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}};qb.loadGlyphRange=function(jb,V,Y,W,ca){V*=256;var ua=V+255;jb=W.transformRequest(W.normalizeGlyphsURL(Y).replace("{fontstack}",
jb).replace("{range}",V+"-"+ua),a.ResourceType.Glyphs);a.getArrayBuffer(jb,function(Fa,Qa){if(Fa)ca(Fa);else if(Qa){Fa={};var Za=0;for(Qa=a.parseGlyphPBF(Qa);Za<Qa.length;Za+=1){var wb=Qa[Za];Fa[wb.id]=wb}ca(null,Fa)}})};qb.TinySDF=e;var Ha=function(){this.specification=a.styleSpec.light.position};Ha.prototype.possiblyEvaluate=function(jb,V){return a.sphericalToCartesian(jb.expression.evaluate(V))};Ha.prototype.interpolate=function(jb,V,Y){return{x:a.number(jb.x,V.x,Y),y:a.number(jb.y,V.y,Y),z:a.number(jb.z,
V.z,Y)}};var Ra=new a.Properties({anchor:new a.DataConstantProperty(a.styleSpec.light.anchor),position:new Ha,color:new a.DataConstantProperty(a.styleSpec.light.color),intensity:new a.DataConstantProperty(a.styleSpec.light.intensity)}),La=function(jb){function V(Y){jb.call(this);this._transitionable=new a.Transitionable(Ra);this.setLight(Y);this._transitioning=this._transitionable.untransitioned()}return jb&&(V.__proto__=jb),(V.prototype=Object.create(jb&&jb.prototype)).constructor=V,V.prototype.getLight=
function(){return this._transitionable.serialize()},V.prototype.setLight=function(Y,W){if(void 0===W&&(W={}),!this._validate(a.validateLight,Y,W))for(var ca in Y)W=Y[ca],a.endsWith(ca,"-transition")?this._transitionable.setTransition(ca.slice(0,-11),W):this._transitionable.setValue(ca,W)},V.prototype.updateTransitions=function(Y){this._transitioning=this._transitionable.transitioned(Y,this._transitioning)},V.prototype.hasTransition=function(){return this._transitioning.hasTransition()},V.prototype.recalculate=
function(Y){this.properties=this._transitioning.possiblyEvaluate(Y)},V.prototype._validate=function(Y,W,ca){return(!ca||!1!==ca.validate)&&a.emitValidationErrors(this,Y.call(a.validateStyle,a.extend({value:W,style:{glyphs:!0,sprite:!0},styleSpec:a.styleSpec})))},V}(a.Evented),gb=function(jb,V){this.width=jb;this.height=V;this.nextRow=0;this.data=new Uint8Array(this.width*this.height);this.dashEntry={}};gb.prototype.getDash=function(jb,V){var Y=jb.join(",")+String(V);return this.dashEntry[Y]||(this.dashEntry[Y]=
this.addDash(jb,V)),this.dashEntry[Y]};gb.prototype.getDashRanges=function(jb,V,Y){V=[];var W=!0;V.push({left:1==jb.length%2?-jb[jb.length-1]*Y:0,right:jb[0]*Y,isDash:W,zeroLength:0===jb[0]});for(var ca=jb[0],ua=1;ua<jb.length;ua++){var Fa=jb[ua];V.push({left:ca*Y,right:(ca+=Fa)*Y,isDash:W=!W,zeroLength:0===Fa})}return V};gb.prototype.addRoundDash=function(jb,V,Y){V/=2;for(var W=-Y;W<=Y;W++)for(var ca=this.width*(this.nextRow+Y+W),ua=0,Fa=jb[ua],Qa=0;Qa<this.width;Qa++){1<Qa/Fa.right&&(Fa=jb[++ua]);
var Za=Math.min(Math.abs(Qa-Fa.left),Math.abs(Qa-Fa.right)),wb=W/Y*(V+1);Fa.isDash?(wb=V-Math.abs(wb),Za=Math.sqrt(Za*Za+wb*wb)):Za=V-Math.sqrt(Za*Za+wb*wb);this.data[ca+Qa]=Math.max(0,Math.min(255,Za+128))}};gb.prototype.addRegularDash=function(jb){for(var V=jb.length-1;0<=V;--V){var Y=jb[V],W=jb[V+1];Y.zeroLength?jb.splice(V,1):W&&W.isDash===Y.isDash&&(W.left=Y.left,jb.splice(V,1))}V=jb[0];Y=jb[jb.length-1];V.isDash===Y.isDash&&(V.left=Y.left-this.width,Y.right=V.right+this.width);V=this.width*
this.nextRow;Y=0;W=jb[Y];for(var ca=0;ca<this.width;ca++){1<ca/W.right&&(W=jb[++Y]);var ua=Math.min(Math.abs(ca-W.left),Math.abs(ca-W.right));this.data[V+ca]=Math.max(0,Math.min(255,(W.isDash?ua:-ua)+128))}};gb.prototype.addDash=function(jb,V){var Y=V?7:0,W=2*Y+1;if(this.nextRow+W>this.height)return a.warnOnce("LineAtlas out of space"),null;for(var ca=0,ua=0;ua<jb.length;ua++)ca+=jb[ua];0!==ca&&(ua=this.width/ca,jb=this.getDashRanges(jb,this.width,ua),V?this.addRoundDash(jb,ua,Y):this.addRegularDash(jb));
V={y:(this.nextRow+Y+.5)/this.height,height:2*Y/this.height,width:ca};return this.nextRow+=W,this.dirty=!0,V};gb.prototype.bind=function(jb){jb=jb.gl;this.texture?(jb.bindTexture(jb.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,jb.texSubImage2D(jb.TEXTURE_2D,0,0,0,this.width,this.height,jb.ALPHA,jb.UNSIGNED_BYTE,this.data))):(this.texture=jb.createTexture(),jb.bindTexture(jb.TEXTURE_2D,this.texture),jb.texParameteri(jb.TEXTURE_2D,jb.TEXTURE_WRAP_S,jb.REPEAT),jb.texParameteri(jb.TEXTURE_2D,jb.TEXTURE_WRAP_T,
jb.REPEAT),jb.texParameteri(jb.TEXTURE_2D,jb.TEXTURE_MIN_FILTER,jb.LINEAR),jb.texParameteri(jb.TEXTURE_2D,jb.TEXTURE_MAG_FILTER,jb.LINEAR),jb.texImage2D(jb.TEXTURE_2D,0,jb.ALPHA,this.width,this.height,0,jb.ALPHA,jb.UNSIGNED_BYTE,this.data))};var ob=function W(V,Y){this.workerPool=V;this.actors=[];this.currentActor=0;this.id=a.uniqueId();V=this.workerPool.acquire(this.id);for(var ca=0;ca<V.length;ca++){var ua=new W.Actor(V[ca],Y,this.id);ua.name="Worker "+ca;this.actors.push(ua)}};ob.prototype.broadcast=
function(V,Y,W){a.asyncAll(this.actors,function(ca,ua){ca.send(V,Y,ua)},W=W||function(){})};ob.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]};ob.prototype.remove=function(){this.actors.forEach(function(V){V.remove()});this.actors=[];this.workerPool.release(this.id)};ob.Actor=a.Actor;var ub=function(V,Y,W){this.bounds=a.LngLatBounds.convert(this.validateBounds(V));this.minzoom=Y||0;this.maxzoom=W||24};ub.prototype.validateBounds=
function(V){return Array.isArray(V)&&4===V.length?[Math.max(-180,V[0]),Math.max(-90,V[1]),Math.min(180,V[2]),Math.min(90,V[3])]:[-180,-90,180,90]};ub.prototype.contains=function(V){var Y=Math.pow(2,V.z),W=Math.floor(a.mercatorXfromLng(this.bounds.getWest())*Y),ca=Math.floor(a.mercatorYfromLat(this.bounds.getNorth())*Y),ua=Math.ceil(a.mercatorXfromLng(this.bounds.getEast())*Y);Y=Math.ceil(a.mercatorYfromLat(this.bounds.getSouth())*Y);return V.x>=W&&V.x<ua&&V.y>=ca&&V.y<Y};var za=function(V){function Y(W,
ca,ua,Fa){if(V.call(this),this.id=W,this.dispatcher=ua,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.extend(this,a.pick(ca,["url","scheme","tileSize","promoteId"])),this._options=a.extend({type:"vector"},ca),this._collectResourceTiming=ca.collectResourceTiming,512!==this.tileSize)throw Error("vector tile sources must have a tileSize of 512");this.setEventedParent(Fa)}return V&&(Y.__proto__=V),
(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.load=function(){var W=this;this._loaded=!1;this.fire(new a.Event("dataloading",{dataType:"source"}));this._tileJSONRequest=c(this._options,this.map._requestManager,function(ca,ua){W._tileJSONRequest=null;W._loaded=!0;ca?W.fire(new a.ErrorEvent(ca)):ua&&(a.extend(W,ua),ua.bounds&&(W.tileBounds=new ub(ua.bounds,W.minzoom,W.maxzoom)),a.postTurnstileEvent(ua.tiles,W.map._requestManager._customAccessToken),a.postMapLoadEvent(ua.tiles,
W.map._getMapId(),W.map._requestManager._skuToken,W.map._requestManager._customAccessToken),W.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),W.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})},Y.prototype.loaded=function(){return this._loaded},Y.prototype.hasTile=function(W){return!this.tileBounds||this.tileBounds.contains(W.canonical)},Y.prototype.onAdd=function(W){this.map=W;this.load()},Y.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),
this._tileJSONRequest=null)},Y.prototype.serialize=function(){return a.extend({},this._options)},Y.prototype.loadTile=function(W,ca){function ua(Qa,Za){return delete W.request,W.aborted?ca(null):Qa&&404!==Qa.status?ca(Qa):(Za&&Za.resourceTiming&&(W.resourceTiming=Za.resourceTiming),this.map._refreshExpiredTiles&&Za&&W.setExpiryData(Za),W.loadVectorData(Za,this.map.painter),a.cacheEntryPossiblyAdded(this.dispatcher),ca(null),void(W.reloadCallback&&(this.loadTile(W,W.reloadCallback),W.reloadCallback=
null)))}var Fa=this.map._requestManager.normalizeTileURL(W.tileID.canonical.url(this.tiles,this.scheme));Fa={request:this.map._requestManager.transformRequest(Fa,a.ResourceType.Tile),uid:W.uid,tileID:W.tileID,zoom:W.tileID.overscaledZ,tileSize:this.tileSize*W.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:a.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};Fa.request.collectResourceTiming=this._collectResourceTiming;W.actor&&"expired"!==
W.state?"loading"===W.state?W.reloadCallback=ca:W.request=W.actor.send("reloadTile",Fa,ua.bind(this)):(W.actor=this.dispatcher.getActor(),W.request=W.actor.send("loadTile",Fa,ua.bind(this)))},Y.prototype.abortTile=function(W){W.request&&(W.request.cancel(),delete W.request);W.actor&&W.actor.send("abortTile",{uid:W.uid,type:this.type,source:this.id},void 0)},Y.prototype.unloadTile=function(W){W.unloadVectorData();W.actor&&W.actor.send("removeTile",{uid:W.uid,type:this.type,source:this.id},void 0)},
Y.prototype.hasTransition=function(){return!1},Y}(a.Evented),Da=function(V){function Y(W,ca,ua,Fa){V.call(this);this.id=W;this.dispatcher=ua;this.setEventedParent(Fa);this.type="raster";this.minzoom=0;this.maxzoom=22;this.roundZoom=!0;this.scheme="xyz";this.tileSize=512;this._loaded=!1;this._options=a.extend({type:"raster"},ca);a.extend(this,a.pick(ca,["url","scheme","tileSize"]))}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.load=function(){var W=
this;this._loaded=!1;this.fire(new a.Event("dataloading",{dataType:"source"}));this._tileJSONRequest=c(this._options,this.map._requestManager,function(ca,ua){W._tileJSONRequest=null;W._loaded=!0;ca?W.fire(new a.ErrorEvent(ca)):ua&&(a.extend(W,ua),ua.bounds&&(W.tileBounds=new ub(ua.bounds,W.minzoom,W.maxzoom)),a.postTurnstileEvent(ua.tiles),a.postMapLoadEvent(ua.tiles,W.map._getMapId(),W.map._requestManager._skuToken),W.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),W.fire(new a.Event("data",
{dataType:"source",sourceDataType:"content"})))})},Y.prototype.loaded=function(){return this._loaded},Y.prototype.onAdd=function(W){this.map=W;this.load()},Y.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},Y.prototype.serialize=function(){return a.extend({},this._options)},Y.prototype.hasTile=function(W){return!this.tileBounds||this.tileBounds.contains(W.canonical)},Y.prototype.loadTile=function(W,ca){var ua=this,Fa=this.map._requestManager.normalizeTileURL(W.tileID.canonical.url(this.tiles,
this.scheme),this.tileSize);W.request=a.getImage(this.map._requestManager.transformRequest(Fa,a.ResourceType.Tile),function(Qa,Za){if(delete W.request,W.aborted)W.state="unloaded",ca(null);else if(Qa)W.state="errored",ca(Qa);else if(Za){ua.map._refreshExpiredTiles&&W.setExpiryData(Za);delete Za.cacheControl;delete Za.expires;Qa=ua.map.painter.context;var wb=Qa.gl;W.texture=ua.map.painter.getTileTexture(Za.width);W.texture?W.texture.update(Za,{useMipmap:!0}):(W.texture=new a.Texture(Qa,Za,wb.RGBA,
{useMipmap:!0}),W.texture.bind(wb.LINEAR,wb.CLAMP_TO_EDGE,wb.LINEAR_MIPMAP_NEAREST),Qa.extTextureFilterAnisotropic&&wb.texParameterf(wb.TEXTURE_2D,Qa.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Qa.extTextureFilterAnisotropicMax));W.state="loaded";a.cacheEntryPossiblyAdded(ua.dispatcher);ca(null)}})},Y.prototype.abortTile=function(W,ca){W.request&&(W.request.cancel(),delete W.request);ca()},Y.prototype.unloadTile=function(W,ca){W.texture&&this.map.painter.saveTileTexture(W.texture);ca()},
Y.prototype.hasTransition=function(){return!1},Y}(a.Evented),Ja=function(V){function Y(W,ca,ua,Fa){V.call(this,W,ca,ua,Fa);this.type="raster-dem";this.maxzoom=22;this._options=a.extend({type:"raster-dem"},ca);this.encoding=ca.encoding||"mapbox"}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},Y.prototype.loadTile=
function(W,ca){function ua(Qa,Za){Qa&&(W.state="errored",ca(Qa));Za&&(W.dem=Za,W.needsHillshadePrepare=!0,W.state="loaded",ca(null))}var Fa=this.map._requestManager.normalizeTileURL(W.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);W.request=a.getImage(this.map._requestManager.transformRequest(Fa,a.ResourceType.Tile),function(Qa,Za){(delete W.request,W.aborted)?(W.state="unloaded",ca(null)):Qa?(W.state="errored",ca(Qa)):Za&&(this.map._refreshExpiredTiles&&W.setExpiryData(Za),delete Za.cacheControl,
delete Za.expires,Qa=a.window.ImageBitmap&&Za instanceof a.window.ImageBitmap&&a.offscreenCanvasSupported()?Za:a.browser.getImageData(Za,1),Qa={uid:W.uid,coord:W.tileID,source:this.id,rawImageData:Qa,encoding:this.encoding},W.actor&&"expired"!==W.state||(W.actor=this.dispatcher.getActor(),W.actor.send("loadDEMTile",Qa,ua.bind(this))))}.bind(this));W.neighboringTiles=this._getNeighboringTiles(W.tileID)},Y.prototype._getNeighboringTiles=function(W){var ca=W.canonical,ua=Math.pow(2,ca.z),Fa=(ca.x-1+
ua)%ua,Qa=0===ca.x?W.wrap-1:W.wrap,Za=(ca.x+1+ua)%ua,wb=ca.x+1===ua?W.wrap+1:W.wrap,Db={};return Db[(new a.OverscaledTileID(W.overscaledZ,Qa,ca.z,Fa,ca.y)).key]={backfilled:!1},Db[(new a.OverscaledTileID(W.overscaledZ,wb,ca.z,Za,ca.y)).key]={backfilled:!1},0<ca.y&&(Db[(new a.OverscaledTileID(W.overscaledZ,Qa,ca.z,Fa,ca.y-1)).key]={backfilled:!1},Db[(new a.OverscaledTileID(W.overscaledZ,W.wrap,ca.z,ca.x,ca.y-1)).key]={backfilled:!1},Db[(new a.OverscaledTileID(W.overscaledZ,wb,ca.z,Za,ca.y-1)).key]=
{backfilled:!1}),ca.y+1<ua&&(Db[(new a.OverscaledTileID(W.overscaledZ,Qa,ca.z,Fa,ca.y+1)).key]={backfilled:!1},Db[(new a.OverscaledTileID(W.overscaledZ,W.wrap,ca.z,ca.x,ca.y+1)).key]={backfilled:!1},Db[(new a.OverscaledTileID(W.overscaledZ,wb,ca.z,Za,ca.y+1)).key]={backfilled:!1}),Db},Y.prototype.unloadTile=function(W){W.demTexture&&this.map.painter.saveTileTexture(W.demTexture);W.fbo&&(W.fbo.destroy(),delete W.fbo);W.dem&&delete W.dem;delete W.neighboringTiles;W.state="unloaded";W.actor&&W.actor.send("removeDEMTile",
{uid:W.uid,source:this.id})},Y}(Da),Ta=function(V){function Y(W,ca,ua,Fa){V.call(this);this.id=W;this.type="geojson";this.minzoom=0;this.maxzoom=18;this.tileSize=512;this.reparseOverscaled=this.isTileClipped=!0;this._loaded=this._removed=!1;this.actor=ua.getActor();this.setEventedParent(Fa);this._data=ca.data;this._options=a.extend({},ca);this._collectResourceTiming=ca.collectResourceTiming;this._resourceTiming=[];void 0!==ca.maxzoom&&(this.maxzoom=ca.maxzoom);ca.type&&(this.type=ca.type);ca.attribution&&
(this.attribution=ca.attribution);this.promoteId=ca.promoteId;W=a.EXTENT/this.tileSize;this.workerOptions=a.extend({source:this.id,cluster:ca.cluster||!1,geojsonVtOptions:{buffer:(void 0!==ca.buffer?ca.buffer:128)*W,tolerance:(void 0!==ca.tolerance?ca.tolerance:.375)*W,extent:a.EXTENT,maxZoom:this.maxzoom,lineMetrics:ca.lineMetrics||!1,generateId:ca.generateId||!1},superclusterOptions:{maxZoom:void 0!==ca.clusterMaxZoom?Math.min(ca.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:a.EXTENT,radius:(ca.clusterRadius||
50)*W,log:!1,generateId:ca.generateId||!1},clusterProperties:ca.clusterProperties},ca.workerOptions)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.load=function(){var W=this;this.fire(new a.Event("dataloading",{dataType:"source"}));this._updateWorkerData(function(ca){ca?W.fire(new a.ErrorEvent(ca)):(ca={dataType:"source",sourceDataType:"metadata"},W._collectResourceTiming&&W._resourceTiming&&0<W._resourceTiming.length&&(ca.resourceTiming=W._resourceTiming,
W._resourceTiming=[]),W.fire(new a.Event("data",ca)))})},Y.prototype.onAdd=function(W){this.map=W;this.load()},Y.prototype.setData=function(W){var ca=this;return this._data=W,this.fire(new a.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(ua){ua?ca.fire(new a.ErrorEvent(ua)):(ua={dataType:"source",sourceDataType:"content"},ca._collectResourceTiming&&ca._resourceTiming&&0<ca._resourceTiming.length&&(ua.resourceTiming=ca._resourceTiming,ca._resourceTiming=[]),ca.fire(new a.Event("data",
ua)))}),this},Y.prototype.getClusterExpansionZoom=function(W,ca){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:W,source:this.id},ca),this},Y.prototype.getClusterChildren=function(W,ca){return this.actor.send("geojson.getClusterChildren",{clusterId:W,source:this.id},ca),this},Y.prototype.getClusterLeaves=function(W,ca,ua,Fa){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:W,limit:ca,offset:ua},Fa),this},Y.prototype._updateWorkerData=function(W){var ca=
this;this._loaded=!1;var ua=a.extend({},this.workerOptions),Fa=this._data;"string"==typeof Fa?(ua.request=this.map._requestManager.transformRequest(a.browser.resolveURL(Fa),a.ResourceType.Source),ua.request.collectResourceTiming=this._collectResourceTiming):ua.data=JSON.stringify(Fa);this.actor.send(this.type+".loadData",ua,function(Qa,Za){ca._removed||Za&&Za.abandoned||(ca._loaded=!0,Za&&Za.resourceTiming&&Za.resourceTiming[ca.id]&&(ca._resourceTiming=Za.resourceTiming[ca.id].slice(0)),ca.actor.send(ca.type+
".coalesce",{source:ua.source},null),W(Qa))})},Y.prototype.loaded=function(){return this._loaded},Y.prototype.loadTile=function(W,ca){var ua=this,Fa=W.actor?"reloadTile":"loadTile";W.actor=this.actor;W.request=this.actor.send(Fa,{type:this.type,uid:W.uid,tileID:W.tileID,zoom:W.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:a.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(Qa,Za){return delete W.request,
W.unloadVectorData(),W.aborted?ca(null):Qa?ca(Qa):(W.loadVectorData(Za,ua.map.painter,"reloadTile"===Fa),ca(null))})},Y.prototype.abortTile=function(W){W.request&&(W.request.cancel(),delete W.request);W.aborted=!0},Y.prototype.unloadTile=function(W){W.unloadVectorData();this.actor.send("removeTile",{uid:W.uid,type:this.type,source:this.id})},Y.prototype.onRemove=function(){this._removed=!0;this.actor.send("removeSource",{type:this.type,source:this.id})},Y.prototype.serialize=function(){return a.extend({},
this._options,{type:this.type,data:this._data})},Y.prototype.hasTransition=function(){return!1},Y}(a.Evented),Xa=a.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),kb=function(V){function Y(W,ca,ua,Fa){V.call(this);this.id=W;this.dispatcher=ua;this.coordinates=ca.coordinates;this.type="image";this.minzoom=0;this.maxzoom=22;this.tileSize=512;this.tiles={};this._loaded=!1;this.setEventedParent(Fa);this.options=ca}return V&&(Y.__proto__=V),(Y.prototype=
Object.create(V&&V.prototype)).constructor=Y,Y.prototype.load=function(W,ca){var ua=this;this._loaded=!1;this.fire(new a.Event("dataloading",{dataType:"source"}));this.url=this.options.url;a.getImage(this.map._requestManager.transformRequest(this.url,a.ResourceType.Image),function(Fa,Qa){ua._loaded=!0;Fa?ua.fire(new a.ErrorEvent(Fa)):Qa&&(ua.image=Qa,W&&(ua.coordinates=W),ca&&ca(),ua._finishLoading())})},Y.prototype.loaded=function(){return this._loaded},Y.prototype.updateImage=function(W){var ca=
this;return this.image&&W.url?(this.options.url=W.url,this.load(W.coordinates,function(){ca.texture=null}),this):this},Y.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})))},Y.prototype.onAdd=function(W){this.map=W;this.load()},Y.prototype.setCoordinates=function(W){var ca=this;this.coordinates=W;W=W.map(a.MercatorCoordinate.fromLngLat);this.tileID=function(ua){for(var Fa=1/0,Qa=1/0,Za=-1/
0,wb=-1/0,Db=0;Db<ua.length;Db+=1){var Eb=ua[Db];Fa=Math.min(Fa,Eb.x);Qa=Math.min(Qa,Eb.y);Za=Math.max(Za,Eb.x);wb=Math.max(wb,Eb.y)}ua=Math.max(0,Math.floor(-Math.log(Math.max(Za-Fa,wb-Qa))/Math.LN2));Db=Math.pow(2,ua);return new a.CanonicalTileID(ua,Math.floor((Fa+Za)/2*Db),Math.floor((Qa+wb)/2*Db))}(W);this.minzoom=this.maxzoom=this.tileID.z;W=W.map(function(ua){return ca.tileID.getTilePoint(ua)._round()});return this._boundsArray=new a.StructArrayLayout4i8,this._boundsArray.emplaceBack(W[0].x,
W[0].y,0,0),this._boundsArray.emplaceBack(W[1].x,W[1].y,a.EXTENT,0),this._boundsArray.emplaceBack(W[3].x,W[3].y,0,a.EXTENT),this._boundsArray.emplaceBack(W[2].x,W[2].y,a.EXTENT,a.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})),this},Y.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var W=this.map.painter.context,ca=W.gl,ua;for(ua in this.boundsBuffer||(this.boundsBuffer=
W.createVertexBuffer(this._boundsArray,Xa.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new a.Texture(W,this.image,ca.RGBA),this.texture.bind(ca.LINEAR,ca.CLAMP_TO_EDGE)),this.tiles)W=this.tiles[ua],"loaded"!==W.state&&(W.state="loaded",W.texture=this.texture)}},Y.prototype.loadTile=function(W,ca){this.tileID&&this.tileID.equals(W.tileID.canonical)?(this.tiles[String(W.tileID.wrap)]=W,W.buckets={},ca(null)):(W.state="errored",
ca(null))},Y.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},Y.prototype.hasTransition=function(){return!1},Y}(a.Evented),rb=function(V){function Y(W,ca,ua,Fa){V.call(this,W,ca,ua,Fa);this.roundZoom=!0;this.type="video";this.options=ca}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.load=function(){var W=this;this._loaded=!1;var ca=this.options;this.urls=[];var ua=0;for(ca=ca.urls;ua<ca.length;ua+=
1)this.urls.push(this.map._requestManager.transformRequest(ca[ua],a.ResourceType.Source).url);a.getVideo(this.urls,function(Fa,Qa){W._loaded=!0;Fa?W.fire(new a.ErrorEvent(Fa)):Qa&&(W.video=Qa,W.video.loop=!0,W.video.addEventListener("playing",function(){W.map.triggerRepaint()}),W.map&&W.video.play(),W._finishLoading())})},Y.prototype.pause=function(){this.video&&this.video.pause()},Y.prototype.play=function(){this.video&&this.video.play()},Y.prototype.seek=function(W){if(this.video){var ca=this.video.seekable;
W<ca.start(0)||W>ca.end(0)?this.fire(new a.ErrorEvent(new a.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+ca.start(0)+" and "+ca.end(0)+"-second mark."))):this.video.currentTime=W}},Y.prototype.getVideo=function(){return this.video},Y.prototype.onAdd=function(W){this.map||(this.map=W,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},Y.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||2>this.video.readyState)){var W=
this.map.painter.context,ca=W.gl,ua;for(ua in this.boundsBuffer||(this.boundsBuffer=W.createVertexBuffer(this._boundsArray,Xa.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(ca.LINEAR,ca.CLAMP_TO_EDGE),ca.texSubImage2D(ca.TEXTURE_2D,0,0,0,ca.RGBA,ca.UNSIGNED_BYTE,this.video)):(this.texture=new a.Texture(W,this.video,ca.RGBA),this.texture.bind(ca.LINEAR,ca.CLAMP_TO_EDGE)),this.tiles)W=this.tiles[ua],"loaded"!==
W.state&&(W.state="loaded",W.texture=this.texture)}},Y.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},Y.prototype.hasTransition=function(){return this.video&&!this.video.paused},Y}(kb),Mb=function(V){function Y(W,ca,ua,Fa){V.call(this,W,ca,ua,Fa);ca.coordinates?Array.isArray(ca.coordinates)&&4===ca.coordinates.length&&!ca.coordinates.some(function(Qa){return!Array.isArray(Qa)||2!==Qa.length||Qa.some(function(Za){return"number"!=typeof Za})})||this.fire(new a.ErrorEvent(new a.ValidationError("sources."+
W,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.ErrorEvent(new a.ValidationError("sources."+W,null,'missing required property "coordinates"')));ca.animate&&"boolean"!=typeof ca.animate&&this.fire(new a.ErrorEvent(new a.ValidationError("sources."+W,null,'optional "animate" property must be a boolean value')));ca.canvas?"string"==typeof ca.canvas||ca.canvas instanceof a.window.HTMLCanvasElement||this.fire(new a.ErrorEvent(new a.ValidationError("sources."+
W,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.ErrorEvent(new a.ValidationError("sources."+W,null,'missing required property "canvas"')));this.options=ca;this.animate=void 0===ca.animate||ca.animate}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.load=function(){this._loaded=!0;this.canvas||(this.canvas=this.options.canvas instanceof a.window.HTMLCanvasElement?
this.options.canvas:a.window.document.getElementById(this.options.canvas));this.width=this.canvas.width;this.height=this.canvas.height;this._hasInvalidDimensions()?this.fire(new a.ErrorEvent(Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0;this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},Y.prototype.getCanvas=function(){return this.canvas},Y.prototype.onAdd=function(W){this.map=
W;this.load();this.canvas&&this.animate&&this.play()},Y.prototype.onRemove=function(){this.pause()},Y.prototype.prepare=function(){var W=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,W=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,W=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var ca=this.map.painter.context,ua=ca.gl,Fa;for(Fa in this.boundsBuffer||(this.boundsBuffer=ca.createVertexBuffer(this._boundsArray,Xa.members)),this.boundsSegments||
(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(W||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new a.Texture(ca,this.canvas,ua.RGBA,{premultiply:!0}),this.tiles)W=this.tiles[Fa],"loaded"!==W.state&&(W.state="loaded",W.texture=this.texture)}},Y.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},Y.prototype.hasTransition=function(){return this._playing},Y.prototype._hasInvalidDimensions=function(){for(var W=
0,ca=[this.canvas.width,this.canvas.height];W<ca.length;W+=1){var ua=ca[W];if(isNaN(ua)||0>=ua)return!0}return!1},Y}(kb),Fb={vector:za,raster:Da,"raster-dem":Ja,geojson:Ta,video:rb,image:kb,canvas:Mb},Lb=function(V,Y){this.max=V;this.onRemove=Y;this.reset()};Lb.prototype.reset=function(){for(var V in this.data)for(var Y=0,W=this.data[V];Y<W.length;Y+=1){var ca=W[Y];ca.timeout&&clearTimeout(ca.timeout);this.onRemove(ca.value)}return this.data={},this.order=[],this};Lb.prototype.add=function(V,Y,W){var ca=
this,ua=V.wrapped().key;void 0===this.data[ua]&&(this.data[ua]=[]);var Fa={value:Y,timeout:void 0};(void 0!==W&&(Fa.timeout=setTimeout(function(){ca.remove(V,Fa)},W)),this.data[ua].push(Fa),this.order.push(ua),this.order.length>this.max)&&(Y=this._getAndRemoveByKey(this.order[0]))&&this.onRemove(Y);return this};Lb.prototype.has=function(V){return V.wrapped().key in this.data};Lb.prototype.getAndRemove=function(V){return this.has(V)?this._getAndRemoveByKey(V.wrapped().key):null};Lb.prototype._getAndRemoveByKey=
function(V){var Y=this.data[V].shift();return Y.timeout&&clearTimeout(Y.timeout),0===this.data[V].length&&delete this.data[V],this.order.splice(this.order.indexOf(V),1),Y.value};Lb.prototype.getByKey=function(V){return(V=this.data[V])?V[0].value:null};Lb.prototype.get=function(V){return this.has(V)?this.data[V.wrapped().key][0].value:null};Lb.prototype.remove=function(V,Y){if(!this.has(V))return this;V=V.wrapped().key;Y=void 0===Y?0:this.data[V].indexOf(Y);var W=this.data[V][Y];return this.data[V].splice(Y,
1),W.timeout&&clearTimeout(W.timeout),0===this.data[V].length&&delete this.data[V],this.onRemove(W.value),this.order.splice(this.order.indexOf(V),1),this};Lb.prototype.setMaxSize=function(V){for(this.max=V;this.order.length>this.max;)(V=this._getAndRemoveByKey(this.order[0]))&&this.onRemove(V);return this};Lb.prototype.filter=function(V){var Y=[];for(Fa in this.data)for(var W=0,ca=this.data[Fa];W<ca.length;W+=1){var ua=ca[W];V(ua.value)||Y.push(ua)}for(V=0;V<Y.length;V+=1){var Fa=Y[V];this.remove(Fa.value.tileID,
Fa)}};var Vb=function(V,Y,W){this.context=V;var ca=V.gl;this.buffer=ca.createBuffer();this.dynamicDraw=!!W;this.context.unbindVAO();V.bindElementBuffer.set(this.buffer);ca.bufferData(ca.ELEMENT_ARRAY_BUFFER,Y.arrayBuffer,this.dynamicDraw?ca.DYNAMIC_DRAW:ca.STATIC_DRAW);this.dynamicDraw||delete Y.arrayBuffer};Vb.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)};Vb.prototype.updateData=function(V){var Y=this.context.gl;this.context.unbindVAO();this.bind();Y.bufferSubData(Y.ELEMENT_ARRAY_BUFFER,
0,V.arrayBuffer)};Vb.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var xc={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Gc=function(V,Y,W,ca){this.length=Y.length;this.attributes=W;this.itemSize=Y.bytesPerElement;this.dynamicDraw=ca;this.context=V;W=V.gl;this.buffer=W.createBuffer();V.bindVertexBuffer.set(this.buffer);W.bufferData(W.ARRAY_BUFFER,Y.arrayBuffer,this.dynamicDraw?
W.DYNAMIC_DRAW:W.STATIC_DRAW);this.dynamicDraw||delete Y.arrayBuffer};Gc.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)};Gc.prototype.updateData=function(V){var Y=this.context.gl;this.bind();Y.bufferSubData(Y.ARRAY_BUFFER,0,V.arrayBuffer)};Gc.prototype.enableAttributes=function(V,Y){for(var W=0;W<this.attributes.length;W++){var ca=Y.attributes[this.attributes[W].name];void 0!==ca&&V.enableVertexAttribArray(ca)}};Gc.prototype.setVertexAttribPointers=function(V,Y,W){for(var ca=
0;ca<this.attributes.length;ca++){var ua=this.attributes[ca],Fa=Y.attributes[ua.name];void 0!==Fa&&V.vertexAttribPointer(Fa,ua.components,V[xc[ua.type]],!1,this.itemSize,ua.offset+this.itemSize*(W||0))}};Gc.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Hc=function(V){this.gl=V.gl;this.current=this.default=this.getDefault();this.dirty=!1};Hc.prototype.get=function(){return this.current};Hc.prototype.set=function(V){};Hc.prototype.getDefault=
function(){return this.default};Hc.prototype.setDefault=function(){this.set(this.default)};var Wc=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.getDefault=function(){return a.Color.transparent},Y.prototype.set=function(W){var ca=this.current;(W.r!==ca.r||W.g!==ca.g||W.b!==ca.b||W.a!==ca.a||this.dirty)&&(this.gl.clearColor(W.r,W.g,W.b,W.a),this.current=W,this.dirty=!1)},Y}(Hc),ib=function(V){function Y(){V.apply(this,
arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.getDefault=function(){return 1},Y.prototype.set=function(W){(W!==this.current||this.dirty)&&(this.gl.clearDepth(W),this.current=W,this.dirty=!1)},Y}(Hc),Yb=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.getDefault=function(){return 0},Y.prototype.set=function(W){(W!==this.current||this.dirty)&&(this.gl.clearStencil(W),
this.current=W,this.dirty=!1)},Y}(Hc),dc=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.getDefault=function(){return[!0,!0,!0,!0]},Y.prototype.set=function(W){var ca=this.current;(W[0]!==ca[0]||W[1]!==ca[1]||W[2]!==ca[2]||W[3]!==ca[3]||this.dirty)&&(this.gl.colorMask(W[0],W[1],W[2],W[3]),this.current=W,this.dirty=!1)},Y}(Hc),oc=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),
(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.getDefault=function(){return!0},Y.prototype.set=function(W){(W!==this.current||this.dirty)&&(this.gl.depthMask(W),this.current=W,this.dirty=!1)},Y}(Hc),tc=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.getDefault=function(){return 255},Y.prototype.set=function(W){(W!==this.current||this.dirty)&&(this.gl.stencilMask(W),this.current=
W,this.dirty=!1)},Y}(Hc),Lc=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},Y.prototype.set=function(W){var ca=this.current;(W.func!==ca.func||W.ref!==ca.ref||W.mask!==ca.mask||this.dirty)&&(this.gl.stencilFunc(W.func,W.ref,W.mask),this.current=W,this.dirty=!1)},Y}(Hc),fb=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=
V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.getDefault=function(){var W=this.gl;return[W.KEEP,W.KEEP,W.KEEP]},Y.prototype.set=function(W){var ca=this.current;(W[0]!==ca[0]||W[1]!==ca[1]||W[2]!==ca[2]||this.dirty)&&(this.gl.stencilOp(W[0],W[1],W[2]),this.current=W,this.dirty=!1)},Y}(Hc),tb=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=
function(W){if(W!==this.current||this.dirty){var ca=this.gl;W?ca.enable(ca.STENCIL_TEST):ca.disable(ca.STENCIL_TEST);this.current=W;this.dirty=!1}},Y}(Hc),Pb=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.getDefault=function(){return[0,1]},Y.prototype.set=function(W){var ca=this.current;(W[0]!==ca[0]||W[1]!==ca[1]||this.dirty)&&(this.gl.depthRange(W[0],W[1]),this.current=W,this.dirty=!1)},Y}(Hc),ec=function(V){function Y(){V.apply(this,
arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function(W){if(W!==this.current||this.dirty){var ca=this.gl;W?ca.enable(ca.DEPTH_TEST):ca.disable(ca.DEPTH_TEST);this.current=W;this.dirty=!1}},Y}(Hc),cc=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.getDefault=function(){return this.gl.LESS},Y.prototype.set=
function(W){(W!==this.current||this.dirty)&&(this.gl.depthFunc(W),this.current=W,this.dirty=!1)},Y}(Hc),Zb=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function(W){if(W!==this.current||this.dirty){var ca=this.gl;W?ca.enable(ca.BLEND):ca.disable(ca.BLEND);this.current=W;this.dirty=!1}},Y}(Hc),Qb=function(V){function Y(){V.apply(this,arguments)}return V&&
(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.getDefault=function(){var W=this.gl;return[W.ONE,W.ZERO]},Y.prototype.set=function(W){var ca=this.current;(W[0]!==ca[0]||W[1]!==ca[1]||this.dirty)&&(this.gl.blendFunc(W[0],W[1]),this.current=W,this.dirty=!1)},Y}(Hc),sb=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.getDefault=function(){return a.Color.transparent},Y.prototype.set=
function(W){var ca=this.current;(W.r!==ca.r||W.g!==ca.g||W.b!==ca.b||W.a!==ca.a||this.dirty)&&(this.gl.blendColor(W.r,W.g,W.b,W.a),this.current=W,this.dirty=!1)},Y}(Hc),Gb=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.getDefault=function(){return this.gl.FUNC_ADD},Y.prototype.set=function(W){(W!==this.current||this.dirty)&&(this.gl.blendEquation(W),this.current=W,this.dirty=!1)},Y}(Hc),xb=function(V){function Y(){V.apply(this,
arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function(W){if(W!==this.current||this.dirty){var ca=this.gl;W?ca.enable(ca.CULL_FACE):ca.disable(ca.CULL_FACE);this.current=W;this.dirty=!1}},Y}(Hc),Jb=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.getDefault=function(){return this.gl.BACK},Y.prototype.set=
function(W){(W!==this.current||this.dirty)&&(this.gl.cullFace(W),this.current=W,this.dirty=!1)},Y}(Hc),Xb=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.getDefault=function(){return this.gl.CCW},Y.prototype.set=function(W){(W!==this.current||this.dirty)&&(this.gl.frontFace(W),this.current=W,this.dirty=!1)},Y}(Hc),nc=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=
Object.create(V&&V.prototype)).constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(W){(W!==this.current||this.dirty)&&(this.gl.useProgram(W),this.current=W,this.dirty=!1)},Y}(Hc),Qc=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.getDefault=function(){return this.gl.TEXTURE0},Y.prototype.set=function(W){(W!==this.current||this.dirty)&&(this.gl.activeTexture(W),this.current=
W,this.dirty=!1)},Y}(Hc),$c=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.getDefault=function(){var W=this.gl;return[0,0,W.drawingBufferWidth,W.drawingBufferHeight]},Y.prototype.set=function(W){var ca=this.current;(W[0]!==ca[0]||W[1]!==ca[1]||W[2]!==ca[2]||W[3]!==ca[3]||this.dirty)&&(this.gl.viewport(W[0],W[1],W[2],W[3]),this.current=W,this.dirty=!1)},Y}(Hc),Uc=function(V){function Y(){V.apply(this,
arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(W){if(W!==this.current||this.dirty){var ca=this.gl;ca.bindFramebuffer(ca.FRAMEBUFFER,W);this.current=W;this.dirty=!1}},Y}(Hc),ac=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(W){if(W!==
this.current||this.dirty){var ca=this.gl;ca.bindRenderbuffer(ca.RENDERBUFFER,W);this.current=W;this.dirty=!1}},Y}(Hc),Ac=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(W){if(W!==this.current||this.dirty){var ca=this.gl;ca.bindTexture(ca.TEXTURE_2D,W);this.current=W;this.dirty=!1}},Y}(Hc),Zc=function(V){function Y(){V.apply(this,arguments)}return V&&
(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(W){if(W!==this.current||this.dirty){var ca=this.gl;ca.bindBuffer(ca.ARRAY_BUFFER,W);this.current=W;this.dirty=!1}},Y}(Hc),wc=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(W){var ca=this.gl;ca.bindBuffer(ca.ELEMENT_ARRAY_BUFFER,
W);this.current=W;this.dirty=!1},Y}(Hc),Dc=function(V){function Y(W){V.call(this,W);this.vao=W.extVertexArrayObject}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(W){this.vao&&(W!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(W),this.current=W,this.dirty=!1)},Y}(Hc),ad=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=
Y,Y.prototype.getDefault=function(){return 4},Y.prototype.set=function(W){if(W!==this.current||this.dirty){var ca=this.gl;ca.pixelStorei(ca.UNPACK_ALIGNMENT,W);this.current=W;this.dirty=!1}},Y}(Hc),Rc=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function(W){if(W!==this.current||this.dirty){var ca=this.gl;ca.pixelStorei(ca.UNPACK_PREMULTIPLY_ALPHA_WEBGL,
W);this.current=W;this.dirty=!1}},Y}(Hc),Bc=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function(W){if(W!==this.current||this.dirty){var ca=this.gl;ca.pixelStorei(ca.UNPACK_FLIP_Y_WEBGL,W);this.current=W;this.dirty=!1}},Y}(Hc),id=function(V){function Y(W,ca){V.call(this,W);this.context=W;this.parent=ca}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&
V.prototype)).constructor=Y,Y.prototype.getDefault=function(){return null},Y}(Hc),jd=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.setDirty=function(){this.dirty=!0},Y.prototype.set=function(W){if(W!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var ca=this.gl;ca.framebufferTexture2D(ca.FRAMEBUFFER,ca.COLOR_ATTACHMENT0,ca.TEXTURE_2D,W,0);this.current=W;this.dirty=!1}},Y}(id),
ld=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.set=function(W){if(W!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var ca=this.gl;ca.framebufferRenderbuffer(ca.FRAMEBUFFER,ca.DEPTH_ATTACHMENT,ca.RENDERBUFFER,W);this.current=W;this.dirty=!1}},Y}(id),ke=function(V,Y,W,ca){this.context=V;this.width=Y;this.height=W;Y=this.framebuffer=V.gl.createFramebuffer();this.colorAttachment=
new jd(V,Y);ca&&(this.depthAttachment=new ld(V,Y))};ke.prototype.destroy=function(){var V=this.context.gl,Y=this.colorAttachment.get();(Y&&V.deleteTexture(Y),this.depthAttachment)&&(Y=this.depthAttachment.get())&&V.deleteRenderbuffer(Y);V.deleteFramebuffer(this.framebuffer)};var ud=function(V,Y,W){this.func=V;this.mask=Y;this.range=W};ud.ReadOnly=!1;ud.ReadWrite=!0;ud.disabled=new ud(519,ud.ReadOnly,[0,1]);var td=function(V,Y,W,ca,ua,Fa){this.test=V;this.ref=Y;this.mask=W;this.fail=ca;this.depthFail=
ua;this.pass=Fa};td.disabled=new td({func:519,mask:0},0,0,7680,7680,7680);var Sd=function(V,Y,W){this.blendFunction=V;this.blendColor=Y;this.mask=W};Sd.disabled=new Sd(Sd.Replace=[1,0],a.Color.transparent,[!1,!1,!1,!1]);Sd.unblended=new Sd(Sd.Replace,a.Color.transparent,[!0,!0,!0,!0]);Sd.alphaBlended=new Sd([1,771],a.Color.transparent,[!0,!0,!0,!0]);var be=function(V,Y,W){this.enable=V;this.mode=Y;this.frontFace=W};be.disabled=new be(!1,1029,2305);be.backCCW=new be(!0,1029,2305);var Ld=function(V){this.gl=
V;this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object");this.clearColor=new Wc(this);this.clearDepth=new ib(this);this.clearStencil=new Yb(this);this.colorMask=new dc(this);this.depthMask=new oc(this);this.stencilMask=new tc(this);this.stencilFunc=new Lc(this);this.stencilOp=new fb(this);this.stencilTest=new tb(this);this.depthRange=new Pb(this);this.depthTest=new ec(this);this.depthFunc=new cc(this);this.blend=new Zb(this);this.blendFunc=new Qb(this);this.blendColor=new sb(this);
this.blendEquation=new Gb(this);this.cullFace=new xb(this);this.cullFaceSide=new Jb(this);this.frontFace=new Xb(this);this.program=new nc(this);this.activeTexture=new Qc(this);this.viewport=new $c(this);this.bindFramebuffer=new Uc(this);this.bindRenderbuffer=new ac(this);this.bindTexture=new Ac(this);this.bindVertexBuffer=new Zc(this);this.bindElementBuffer=new wc(this);this.bindVertexArrayOES=this.extVertexArrayObject&&new Dc(this);this.pixelStoreUnpack=new ad(this);this.pixelStoreUnpackPremultiplyAlpha=
new Rc(this);this.pixelStoreUnpackFlipY=new Bc(this);(this.extTextureFilterAnisotropic=V.getExtension("EXT_texture_filter_anisotropic")||V.getExtension("MOZ_EXT_texture_filter_anisotropic")||V.getExtension("WEBKIT_EXT_texture_filter_anisotropic"))&&(this.extTextureFilterAnisotropicMax=V.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT));(this.extTextureHalfFloat=V.getExtension("OES_texture_half_float"))&&(V.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=
V.getExtension("EXT_color_buffer_half_float"));this.extTimerQuery=V.getExtension("EXT_disjoint_timer_query")};Ld.prototype.setDefault=function(){this.unbindVAO();this.clearColor.setDefault();this.clearDepth.setDefault();this.clearStencil.setDefault();this.colorMask.setDefault();this.depthMask.setDefault();this.stencilMask.setDefault();this.stencilFunc.setDefault();this.stencilOp.setDefault();this.stencilTest.setDefault();this.depthRange.setDefault();this.depthTest.setDefault();this.depthFunc.setDefault();
this.blend.setDefault();this.blendFunc.setDefault();this.blendColor.setDefault();this.blendEquation.setDefault();this.cullFace.setDefault();this.cullFaceSide.setDefault();this.frontFace.setDefault();this.program.setDefault();this.activeTexture.setDefault();this.bindFramebuffer.setDefault();this.pixelStoreUnpack.setDefault();this.pixelStoreUnpackPremultiplyAlpha.setDefault();this.pixelStoreUnpackFlipY.setDefault()};Ld.prototype.setDirty=function(){this.clearColor.dirty=!0;this.clearDepth.dirty=!0;
this.clearStencil.dirty=!0;this.colorMask.dirty=!0;this.depthMask.dirty=!0;this.stencilMask.dirty=!0;this.stencilFunc.dirty=!0;this.stencilOp.dirty=!0;this.stencilTest.dirty=!0;this.depthRange.dirty=!0;this.depthTest.dirty=!0;this.depthFunc.dirty=!0;this.blend.dirty=!0;this.blendFunc.dirty=!0;this.blendColor.dirty=!0;this.blendEquation.dirty=!0;this.cullFace.dirty=!0;this.cullFaceSide.dirty=!0;this.frontFace.dirty=!0;this.program.dirty=!0;this.activeTexture.dirty=!0;this.viewport.dirty=!0;this.bindFramebuffer.dirty=
!0;this.bindRenderbuffer.dirty=!0;this.bindTexture.dirty=!0;this.bindVertexBuffer.dirty=!0;this.bindElementBuffer.dirty=!0;this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0);this.pixelStoreUnpack.dirty=!0;this.pixelStoreUnpackPremultiplyAlpha.dirty=!0;this.pixelStoreUnpackFlipY.dirty=!0};Ld.prototype.createIndexBuffer=function(V,Y){return new Vb(this,V,Y)};Ld.prototype.createVertexBuffer=function(V,Y,W){return new Gc(this,V,Y,W)};Ld.prototype.createRenderbuffer=function(V,Y,W){var ca=this.gl,
ua=ca.createRenderbuffer();return this.bindRenderbuffer.set(ua),ca.renderbufferStorage(ca.RENDERBUFFER,V,Y,W),this.bindRenderbuffer.set(null),ua};Ld.prototype.createFramebuffer=function(V,Y,W){return new ke(this,V,Y,W)};Ld.prototype.clear=function(V){var Y=V.color;V=V.depth;var W=this.gl,ca=0;Y&&(ca|=W.COLOR_BUFFER_BIT,this.clearColor.set(Y),this.colorMask.set([!0,!0,!0,!0]));void 0!==V&&(ca|=W.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(V),this.depthMask.set(!0));W.clear(ca)};
Ld.prototype.setCullFace=function(V){!1===V.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(V.mode),this.frontFace.set(V.frontFace))};Ld.prototype.setDepthMode=function(V){V.func!==this.gl.ALWAYS||V.mask?(this.depthTest.set(!0),this.depthFunc.set(V.func),this.depthMask.set(V.mask),this.depthRange.set(V.range)):this.depthTest.set(!1)};Ld.prototype.setStencilMode=function(V){V.test.func!==this.gl.ALWAYS||V.mask?(this.stencilTest.set(!0),this.stencilMask.set(V.mask),this.stencilOp.set([V.fail,
V.depthFail,V.pass]),this.stencilFunc.set({func:V.test.func,ref:V.ref,mask:V.test.mask})):this.stencilTest.set(!1)};Ld.prototype.setColorMode=function(V){a.deepEqual(V.blendFunction,Sd.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(V.blendFunction),this.blendColor.set(V.blendColor));this.colorMask.set(V.mask)};Ld.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var te=function(V){function Y(W,ca,ua){var Fa=this;V.call(this);this.id=W;
this.dispatcher=ua;this.on("data",function(Qa){"source"===Qa.dataType&&"metadata"===Qa.sourceDataType&&(Fa._sourceLoaded=!0);Fa._sourceLoaded&&!Fa._paused&&"source"===Qa.dataType&&"content"===Qa.sourceDataType&&(Fa.reload(),Fa.transform&&Fa.update(Fa.transform))});this.on("error",function(){Fa._sourceErrored=!0});this._source=function(Qa,Za,wb,Db){Za=new Fb[Za.type](Qa,Za,wb,Db);if(Za.id!==Qa)throw Error("Expected Source id to be "+Qa+" instead of "+Za.id);return a.bindAll(["load","abort","unload",
"serialize","prepare"],Za),Za}(W,ca,ua,this);this._tiles={};this._cache=new Lb(0,this._unloadTile.bind(this));this._timers={};this._cacheTimers={};this._maxTileCacheSize=null;this._loadedParentTiles={};this._coveredTiles={};this._state=new a.SourceFeatureState}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.onAdd=function(W){this._maxTileCacheSize=(this.map=W)?W._maxTileCacheSize:null;this._source&&this._source.onAdd&&this._source.onAdd(W)},Y.prototype.onRemove=
function(W){this._source&&this._source.onRemove&&this._source.onRemove(W)},Y.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var W in this._tiles){var ca=this._tiles[W];if("loaded"!==ca.state&&"errored"!==ca.state)return!1}return!0},Y.prototype.getSource=function(){return this._source},Y.prototype.pause=function(){this._paused=!0},Y.prototype.resume=function(){if(this._paused){var W=this._shouldReloadOnResume;this._shouldReloadOnResume=
this._paused=!1;W&&this.reload();this.transform&&this.update(this.transform)}},Y.prototype._loadTile=function(W,ca){return this._source.loadTile(W,ca)},Y.prototype._unloadTile=function(W){if(this._source.unloadTile)return this._source.unloadTile(W,function(){})},Y.prototype._abortTile=function(W){if(this._source.abortTile)return this._source.abortTile(W,function(){})},Y.prototype.serialize=function(){return this._source.serialize()},Y.prototype.prepare=function(W){for(var ca in this._source.prepare&&
this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var ua=this._tiles[ca];ua.upload(W);ua.prepare(this.map.style.imageManager)}},Y.prototype.getIds=function(){return a.values(this._tiles).map(function(W){return W.tileID}).sort(r).map(function(W){return W.key})},Y.prototype.getRenderableIds=function(W){var ca=this,ua=[],Fa;for(Fa in this._tiles)this._isIdRenderable(Fa,W)&&ua.push(this._tiles[Fa]);return W?ua.sort(function(Qa,Za){Qa=Qa.tileID;
Za=Za.tileID;var wb=(new a.Point(Qa.canonical.x,Qa.canonical.y))._rotate(ca.transform.angle),Db=(new a.Point(Za.canonical.x,Za.canonical.y))._rotate(ca.transform.angle);return Qa.overscaledZ-Za.overscaledZ||Db.y-wb.y||Db.x-wb.x}).map(function(Qa){return Qa.tileID.key}):ua.map(function(Qa){return Qa.tileID}).sort(r).map(function(Qa){return Qa.key})},Y.prototype.hasRenderableParent=function(W){W=this.findLoadedParent(W,0);return!!W&&this._isIdRenderable(W.tileID.key)},Y.prototype._isIdRenderable=function(W,
ca){return this._tiles[W]&&this._tiles[W].hasData()&&!this._coveredTiles[W]&&(ca||!this._tiles[W].holdingForFade())},Y.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var W in this._cache.reset(),this._tiles)"errored"!==this._tiles[W].state&&this._reloadTile(W,"reloading")},Y.prototype._reloadTile=function(W,ca){var ua=this._tiles[W];ua&&("loading"!==ua.state&&(ua.state=ca),this._loadTile(ua,this._tileLoaded.bind(this,ua,W,ca)))},Y.prototype._tileLoaded=function(W,
ca,ua,Fa){if(Fa)return W.state="errored",void(404!==Fa.status?this._source.fire(new a.ErrorEvent(Fa,{tile:W})):this.update(this.transform));W.timeAdded=a.browser.now();"expired"===ua&&(W.refreshedUponExpiration=!0);this._setTileReloadTimer(ca,W);"raster-dem"===this.getSource().type&&W.dem&&this._backfillDEM(W);this._state.initializeTileState(W,this.map?this.map.painter:null);this._source.fire(new a.Event("data",{dataType:"source",tile:W,coord:W.tileID}))},Y.prototype._backfillDEM=function(W){function ca(Za,
wb){Za.needsHillshadePrepare=!0;var Db=wb.tileID.canonical.x-Za.tileID.canonical.x,Eb=wb.tileID.canonical.y-Za.tileID.canonical.y,kc=Math.pow(2,Za.tileID.canonical.z),jc=wb.tileID.key;0===Db&&0===Eb||1<Math.abs(Eb)||(1<Math.abs(Db)&&(1===Math.abs(Db+kc)?Db+=kc:1===Math.abs(Db-kc)&&(Db-=kc)),wb.dem&&Za.dem&&(Za.dem.backfillBorder(wb.dem,Db,Eb),Za.neighboringTiles&&Za.neighboringTiles[jc]&&(Za.neighboringTiles[jc].backfilled=!0)))}for(var ua=this.getRenderableIds(),Fa=0;Fa<ua.length;Fa++){var Qa=ua[Fa];
W.neighboringTiles&&W.neighboringTiles[Qa]&&(Qa=this.getTileByID(Qa),ca(W,Qa),ca(Qa,W))}},Y.prototype.getTile=function(W){return this.getTileByID(W.key)},Y.prototype.getTileByID=function(W){return this._tiles[W]},Y.prototype._retainLoadedChildren=function(W,ca,ua,Fa){for(var Qa in this._tiles){var Za=this._tiles[Qa];if(!(Fa[Qa]||!Za.hasData()||Za.tileID.overscaledZ<=ca||Za.tileID.overscaledZ>ua)){for(var wb=Za.tileID;Za&&Za.tileID.overscaledZ>ca+1;){var Db=Za.tileID.scaledTo(Za.tileID.overscaledZ-
1);(Za=this._tiles[Db.key])&&Za.hasData()&&(wb=Db)}for(Za=wb;Za.overscaledZ>ca;)if(W[(Za=Za.scaledTo(Za.overscaledZ-1)).key]){Fa[wb.key]=wb;break}}}},Y.prototype.findLoadedParent=function(W,ca){if(W.key in this._loadedParentTiles)return(W=this._loadedParentTiles[W.key])&&W.tileID.overscaledZ>=ca?W:null;for(var ua=W.overscaledZ-1;ua>=ca;ua--){var Fa=W.scaledTo(ua);if(Fa=this._getLoadedTile(Fa))return Fa}},Y.prototype._getLoadedTile=function(W){var ca=this._tiles[W.key];return ca&&ca.hasData()?ca:this._cache.getByKey(W.wrapped().key)},
Y.prototype.updateCacheSize=function(W){W=Math.floor((Math.ceil(W.width/this._source.tileSize)+1)*(Math.ceil(W.height/this._source.tileSize)+1)*5);this._cache.setMaxSize("number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,W):W)},Y.prototype.handleWrapJump=function(W){var ca=Math.round((W-(void 0===this._prevLng?W:this._prevLng))/360);if(this._prevLng=W,ca){W={};for(var ua in this._tiles){var Fa=this._tiles[ua];Fa.tileID=Fa.tileID.unwrapTo(Fa.tileID.wrap+ca);W[Fa.tileID.key]=Fa}for(var Qa in this._tiles=
W,this._timers)clearTimeout(this._timers[Qa]),delete this._timers[Qa];for(var Za in this._tiles)this._setTileReloadTimer(Za,this._tiles[Za])}},Y.prototype.update=function(W){var ca=this;if(this.transform=W,this._sourceLoaded&&!this._paused){var ua;this.updateCacheSize(W);this.handleWrapJump(this.transform.center.lng);this._coveredTiles={};this.used?this._source.tileID?ua=W.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Cb){return new a.OverscaledTileID(Cb.canonical.z,Cb.wrap,Cb.canonical.z,
Cb.canonical.x,Cb.canonical.y)}):(ua=W.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(ua=ua.filter(function(Cb){return ca._source.hasTile(Cb)}))):ua=[];W=W.coveringZoomLevel(this._source);var Fa=Math.max(W-Y.maxOverzooming,this._source.minzoom),Qa=Math.max(W+Y.maxUnderzooming,this._source.minzoom);ua=this._updateRetainedTiles(ua,W);if(u(this._source.type)){for(var Za=
{},wb={},Db=0,Eb=Object.keys(ua);Db<Eb.length;Db+=1){var kc=Eb[Db],jc=ua[kc],$b=this._tiles[kc];!$b||$b.fadeEndTime&&$b.fadeEndTime<=a.browser.now()||(($b=this.findLoadedParent(jc,Fa))&&(this._addTile($b.tileID),Za[$b.tileID.key]=$b.tileID),wb[kc]=jc)}for(var ic in this._retainLoadedChildren(wb,W,Qa,ua),Za)ua[ic]||(this._coveredTiles[ic]=!0,ua[ic]=Za[ic])}for(var gc in ua)this._tiles[gc].clearFadeHold();ic=0;for(gc=a.keysDifference(this._tiles,ua);ic<gc.length;ic+=1)W=gc[ic],Fa=this._tiles[W],Fa.hasSymbolBuckets&&
!Fa.holdingForFade()?Fa.setHoldDuration(this.map._fadeDuration):Fa.hasSymbolBuckets&&!Fa.symbolFadeFinished()||this._removeTile(W);this._updateLoadedParentTileCache()}},Y.prototype.releaseSymbolFadeTiles=function(){for(var W in this._tiles)this._tiles[W].holdingForFade()&&this._removeTile(W)},Y.prototype._updateRetainedTiles=function(W,ca){for(var ua={},Fa={},Qa=Math.max(ca-Y.maxOverzooming,this._source.minzoom),Za=Math.max(ca+Y.maxUnderzooming,this._source.minzoom),wb={},Db=0;Db<W.length;Db+=1){var Eb=
W[Db],kc=this._addTile(Eb);ua[Eb.key]=Eb;kc.hasData()||ca<this._source.maxzoom&&(wb[Eb.key]=Eb)}this._retainLoadedChildren(wb,ca,Za,ua);for(Za=0;Za<W.length;Za+=1)if(wb=W[Za],Db=this._tiles[wb.key],!Db.hasData()){if(ca+1>this._source.maxzoom){if(Eb=wb.children(this._source.maxzoom)[0],(kc=this.getTile(Eb))&&kc.hasData()){ua[Eb.key]=Eb;continue}}else if(Eb=wb.children(this._source.maxzoom),ua[Eb[0].key]&&ua[Eb[1].key]&&ua[Eb[2].key]&&ua[Eb[3].key])continue;Eb=Db.wasRequested();for(kc=wb.overscaledZ-
1;kc>=Qa;--kc){var jc=wb.scaledTo(kc);if(Fa[jc.key])break;if(Fa[jc.key]=!0,!(Db=this.getTile(jc))&&Eb&&(Db=this._addTile(jc)),Db&&(ua[jc.key]=jc,Eb=Db.wasRequested(),Db.hasData()))break}}return ua},Y.prototype._updateLoadedParentTileCache=function(){for(var W in this._loadedParentTiles={},this._tiles){for(var ca=[],ua=void 0,Fa=this._tiles[W].tileID;0<Fa.overscaledZ;){if(Fa.key in this._loadedParentTiles){ua=this._loadedParentTiles[Fa.key];break}ca.push(Fa.key);Fa=Fa.scaledTo(Fa.overscaledZ-1);if(ua=
this._getLoadedTile(Fa))break}for(Fa=0;Fa<ca.length;Fa+=1)this._loadedParentTiles[ca[Fa]]=ua}},Y.prototype._addTile=function(W){var ca=this._tiles[W.key];if(ca)return ca;(ca=this._cache.getAndRemove(W))&&(this._setTileReloadTimer(W.key,ca),ca.tileID=W,this._state.initializeTileState(ca,this.map?this.map.painter:null),this._cacheTimers[W.key]&&(clearTimeout(this._cacheTimers[W.key]),delete this._cacheTimers[W.key],this._setTileReloadTimer(W.key,ca)));var ua=!!ca;return ua||(ca=new a.Tile(W,this._source.tileSize*
W.overscaleFactor()),this._loadTile(ca,this._tileLoaded.bind(this,ca,W.key,ca.state))),ca?(ca.uses++,this._tiles[W.key]=ca,ua||this._source.fire(new a.Event("dataloading",{tile:ca,coord:ca.tileID,dataType:"source"})),ca):null},Y.prototype._setTileReloadTimer=function(W,ca){var ua=this;W in this._timers&&(clearTimeout(this._timers[W]),delete this._timers[W]);(ca=ca.getExpiryTimeout())&&(this._timers[W]=setTimeout(function(){ua._reloadTile(W,"expired");delete ua._timers[W]},ca))},Y.prototype._removeTile=
function(W){var ca=this._tiles[W];ca&&(ca.uses--,delete this._tiles[W],this._timers[W]&&(clearTimeout(this._timers[W]),delete this._timers[W]),0<ca.uses||(ca.hasData()&&"reloading"!==ca.state?this._cache.add(ca.tileID,ca,ca.getExpiryTimeout()):(ca.aborted=!0,this._abortTile(ca),this._unloadTile(ca))))},Y.prototype.clearTiles=function(){for(var W in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(W);this._cache.reset()},Y.prototype.tilesIn=function(W,ca,ua){var Fa=this,Qa=
[],Za=this.transform;if(!Za)return Qa;ua=ua?Za.getCameraQueryGeometry(W):W;var wb=W.map(function(gc){return Za.pointCoordinate(gc)}),Db=ua.map(function(gc){return Za.pointCoordinate(gc)}),Eb=this.getIds(),kc=1/0,jc=1/0,$b=-1/0,ic=-1/0;for(W=0;W<Db.length;W+=1)ua=Db[W],kc=Math.min(kc,ua.x),jc=Math.min(jc,ua.y),$b=Math.max($b,ua.x),ic=Math.max(ic,ua.y);W=function(gc){gc=Fa._tiles[Eb[gc]];if(!gc.holdingForFade()){var Cb=gc.tileID,bc=Math.pow(2,Za.zoom-gc.tileID.overscaledZ),Ec=ca*gc.queryPadding*a.EXTENT/
gc.tileSize/bc,Yc=[Cb.getTilePoint(new a.MercatorCoordinate(kc,jc)),Cb.getTilePoint(new a.MercatorCoordinate($b,ic))];Yc[0].x-Ec<a.EXTENT&&Yc[0].y-Ec<a.EXTENT&&0<=Yc[1].x+Ec&&0<=Yc[1].y+Ec&&(Ec=wb.map(function(fd){return Cb.getTilePoint(fd)}),Yc=Db.map(function(fd){return Cb.getTilePoint(fd)}),Qa.push({tile:gc,tileID:Cb,queryGeometry:Ec,cameraQueryGeometry:Yc,scale:bc}))}};for(ua=0;ua<Eb.length;ua++)W(ua);return Qa},Y.prototype.getVisibleCoordinates=function(W){var ca=this;W=this.getRenderableIds(W).map(function(Qa){return ca._tiles[Qa].tileID});
for(var ua=0;ua<W.length;ua+=1){var Fa=W[ua];Fa.posMatrix=this.transform.calculatePosMatrix(Fa.toUnwrapped())}return W},Y.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(u(this._source.type))for(var W in this._tiles){var ca=this._tiles[W];if(void 0!==ca.fadeEndTime&&ca.fadeEndTime>=a.browser.now())return!0}return!1},Y.prototype.setFeatureState=function(W,ca,ua){this._state.updateState(W||"_geojsonTileLayer",ca,ua)},Y.prototype.removeFeatureState=function(W,ca,ua){this._state.removeFeatureState(W||
"_geojsonTileLayer",ca,ua)},Y.prototype.getFeatureState=function(W,ca){return this._state.getState(W||"_geojsonTileLayer",ca)},Y.prototype.setDependencies=function(W,ca,ua){(W=this._tiles[W])&&W.setDependencies(ca,ua)},Y.prototype.reloadTilesForDependencies=function(W,ca){for(var ua in this._tiles)this._tiles[ua].hasDependency(W,ca)&&this._reloadTile(ua,"reloading");this._cache.filter(function(Fa){return!Fa.hasDependency(W,ca)})},Y}(a.Evented);te.maxOverzooming=10;te.maxUnderzooming=3;var ze=function(){this.active=
{}};ze.prototype.acquire=function(V){if(!this.workers)for(this.workers=[];this.workers.length<ze.workerCount;)this.workers.push(new v);return this.active[V]=!0,this.workers.slice()};ze.prototype.release=function(V){delete this.active[V];0===this.numActive()&&(this.workers.forEach(function(Y){Y.terminate()}),this.workers=null)};ze.prototype.isPreloaded=function(){return!!this.active.mapboxgl_preloaded_worker_pool};ze.prototype.numActive=function(){return Object.keys(this.active).length};var Dd;ze.workerCount=
Math.max(Math.min(Math.floor(a.browser.hardwareConcurrency/2),6),1);var zd={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",
setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"},oe=function(V,Y){this.reset(V,Y)};oe.prototype.reset=function(V,Y){this.points=V||[];this._distances=[0];for(V=1;V<this.points.length;V++)this._distances[V]=this._distances[V-1]+this.points[V].dist(this.points[V-1]);this.length=this._distances[this._distances.length-1];this.padding=Math.min(Y||0,.5*this.length);this.paddedLength=this.length-2*this.padding};oe.prototype.lerp=function(V){if(1===this.points.length)return this.points[0];
V=a.clamp(V,0,1);for(var Y=1,W=this._distances[Y],ca=V*this.paddedLength+this.padding;W<ca&&Y<this._distances.length;)W=this._distances[++Y];V=Y-1;var ua=this._distances[V];W-=ua;W=0<W?(ca-ua)/W:0;return this.points[V].mult(1-W).add(this.points[Y].mult(W))};var me=function(V,Y,W){var ca=this.boxCells=[],ua=this.circleCells=[];this.xCellCount=Math.ceil(V/W);this.yCellCount=Math.ceil(Y/W);for(W=0;W<this.xCellCount*this.yCellCount;W++)ca.push([]),ua.push([]);this.circleKeys=[];this.boxKeys=[];this.bboxes=
[];this.circles=[];this.width=V;this.height=Y;this.xScale=this.xCellCount/V;this.yScale=this.yCellCount/Y;this.circleUid=this.boxUid=0};me.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length};me.prototype.insert=function(V,Y,W,ca,ua){this._forEachCell(Y,W,ca,ua,this._insertBoxCell,this.boxUid++);this.boxKeys.push(V);this.bboxes.push(Y);this.bboxes.push(W);this.bboxes.push(ca);this.bboxes.push(ua)};me.prototype.insertCircle=function(V,Y,W,ca){this._forEachCell(Y-ca,W-
ca,Y+ca,W+ca,this._insertCircleCell,this.circleUid++);this.circleKeys.push(V);this.circles.push(Y);this.circles.push(W);this.circles.push(ca)};me.prototype._insertBoxCell=function(V,Y,W,ca,ua,Fa){this.boxCells[ua].push(Fa)};me.prototype._insertCircleCell=function(V,Y,W,ca,ua,Fa){this.circleCells[ua].push(Fa)};me.prototype._query=function(V,Y,W,ca,ua,Fa){if(0>W||V>this.width||0>ca||Y>this.height)return!ua&&[];var Qa=[];if(0>=V&&0>=Y&&this.width<=W&&this.height<=ca){if(ua)return!0;for(V=0;V<this.boxKeys.length;V++)Qa.push({key:this.boxKeys[V],
x1:this.bboxes[4*V],y1:this.bboxes[4*V+1],x2:this.bboxes[4*V+2],y2:this.bboxes[4*V+3]});for(V=0;V<this.circleKeys.length;V++)Y=this.circles[3*V],W=this.circles[3*V+1],ca=this.circles[3*V+2],Qa.push({key:this.circleKeys[V],x1:Y-ca,y1:W-ca,x2:Y+ca,y2:W+ca});return Fa?Qa.filter(Fa):Qa}return this._forEachCell(V,Y,W,ca,this._queryCell,Qa,{hitTest:ua,seenUids:{box:{},circle:{}}},Fa),ua?0<Qa.length:Qa};me.prototype._queryCircle=function(V,Y,W,ca,ua){var Fa=V-W,Qa=V+W,Za=Y-W,wb=Y+W;if(0>Qa||Fa>this.width||
0>wb||Za>this.height)return!ca&&[];var Db=[];return this._forEachCell(Fa,Za,Qa,wb,this._queryCellCircle,Db,{hitTest:ca,circle:{x:V,y:Y,radius:W},seenUids:{box:{},circle:{}}},ua),ca?0<Db.length:Db};me.prototype.query=function(V,Y,W,ca,ua){return this._query(V,Y,W,ca,!1,ua)};me.prototype.hitTest=function(V,Y,W,ca,ua){return this._query(V,Y,W,ca,!0,ua)};me.prototype.hitTestCircle=function(V,Y,W,ca){return this._queryCircle(V,Y,W,!0,ca)};me.prototype._queryCell=function(V,Y,W,ca,ua,Fa,Qa,Za){var wb=Qa.seenUids,
Db=this.boxCells[ua];if(null!==Db)for(var Eb=this.bboxes,kc=0;kc<Db.length;kc+=1){var jc=Db[kc];if(!wb.box[jc]){wb.box[jc]=!0;var $b=4*jc;if(V<=Eb[$b+2]&&Y<=Eb[$b+3]&&W>=Eb[$b+0]&&ca>=Eb[$b+1]&&(!Za||Za(this.boxKeys[jc]))){if(Qa.hitTest)return Fa.push(!0),!0;Fa.push({key:this.boxKeys[jc],x1:Eb[$b],y1:Eb[$b+1],x2:Eb[$b+2],y2:Eb[$b+3]})}}}ua=this.circleCells[ua];if(null!==ua)for(Db=this.circles,Eb=0;Eb<ua.length;Eb+=1)if(kc=ua[Eb],!wb.circle[kc]){wb.circle[kc]=!0;var ic=3*kc;if(this._circleAndRectCollide(Db[ic],
Db[ic+1],Db[ic+2],V,Y,W,ca)&&(!Za||Za(this.circleKeys[kc]))){if(Qa.hitTest)return Fa.push(!0),!0;jc=Db[ic];$b=Db[ic+1];ic=Db[ic+2];Fa.push({key:this.circleKeys[kc],x1:jc-ic,y1:$b-ic,x2:jc+ic,y2:$b+ic})}}};me.prototype._queryCellCircle=function(V,Y,W,ca,ua,Fa,Qa,Za){V=Qa.circle;Qa=Qa.seenUids;Y=this.boxCells[ua];if(null!==Y)for(W=this.bboxes,ca=0;ca<Y.length;ca+=1){var wb=Y[ca];if(!Qa.box[wb]){Qa.box[wb]=!0;var Db=4*wb;if(this._circleAndRectCollide(V.x,V.y,V.radius,W[Db+0],W[Db+1],W[Db+2],W[Db+3])&&
(!Za||Za(this.boxKeys[wb])))return Fa.push(!0),!0}}ua=this.circleCells[ua];if(null!==ua)for(Y=this.circles,W=0;W<ua.length;W+=1)if(ca=ua[W],!Qa.circle[ca]&&(Qa.circle[ca]=!0,wb=3*ca,this._circlesCollide(Y[wb],Y[wb+1],Y[wb+2],V.x,V.y,V.radius)&&(!Za||Za(this.circleKeys[ca]))))return Fa.push(!0),!0};me.prototype._forEachCell=function(V,Y,W,ca,ua,Fa,Qa,Za){for(var wb=this._convertToXCellCoord(V),Db=this._convertToYCellCoord(Y),Eb=this._convertToXCellCoord(W),kc=this._convertToYCellCoord(ca);wb<=Eb;wb++)for(var jc=
Db;jc<=kc;jc++)if(ua.call(this,V,Y,W,ca,this.xCellCount*jc+wb,Fa,Qa,Za))return};me.prototype._convertToXCellCoord=function(V){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(V*this.xScale)))};me.prototype._convertToYCellCoord=function(V){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(V*this.yScale)))};me.prototype._circlesCollide=function(V,Y,W,ca,ua,Fa){V=ca-V;Y=ua-Y;W+=Fa;return W*W>V*V+Y*Y};me.prototype._circleAndRectCollide=function(V,Y,W,ca,ua,Fa,Qa){Fa=(Fa-ca)/2;V=Math.abs(V-
(ca+Fa));if(V>Fa+W)return!1;Qa=(Qa-ua)/2;Y=Math.abs(Y-(ua+Qa));if(Y>Qa+W)return!1;if(V<=Fa||Y<=Qa)return!0;ua=V-Fa;Y-=Qa;return ua*ua+Y*Y<=W*W};var re=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]),Te=function(V,Y,W){void 0===Y&&(Y=new me(V.width+200,V.height+200,25));void 0===W&&(W=new me(V.width+200,V.height+200,25));this.transform=V;this.grid=Y;this.ignoredGrid=W;this.pitchfactor=Math.cos(V._pitch)*V.cameraToCenterDistance;this.screenRightBoundary=V.width+100;this.screenBottomBoundary=
V.height+100;this.gridRightBoundary=V.width+200;this.gridBottomBoundary=V.height+200};Te.prototype.placeCollisionBox=function(V,Y,W,ca,ua){ca=this.projectAndGetPerspectiveRatio(ca,V.anchorPointX,V.anchorPointY);var Fa=W*ca.perspectiveRatio;W=V.x1*Fa+ca.point.x;var Qa=V.y1*Fa+ca.point.y,Za=V.x2*Fa+ca.point.x;V=V.y2*Fa+ca.point.y;return!this.isInsideGrid(W,Qa,Za,V)||!Y&&this.grid.hitTest(W,Qa,Za,V,ua)?{box:[],offscreen:!1}:{box:[W,Qa,Za,V],offscreen:this.isOffscreen(W,Qa,Za,V)}};Te.prototype.placeCollisionCircles=
function(V,Y,W,ca,ua,Fa,Qa,Za,wb,Db,Eb,kc,jc){var $b=[],ic=new a.Point(Y.anchorX,Y.anchorY);Fa=B(ic,Fa);Fa=.5+this.transform.cameraToCenterDistance/Fa.signedDistanceFromCamera*.5;ua=(Db?ua/Fa:ua*Fa)/a.ONE_EM;Db=B(ic,Qa).point;ua=I(ua,ca,Y.lineOffsetX*ua,Y.lineOffsetY*ua,!1,Db,ic,Y,W,Qa,{});W=Y=!1;ca=!0;if(ua){kc=.5*kc*Fa+jc;Qa=new a.Point(-100,-100);ic=new a.Point(this.screenRightBoundary,this.screenBottomBoundary);jc=new oe;Fa=ua.first;Db=ua.last;ua=[];for(var gc=Fa.path.length-1;1<=gc;gc--)ua.push(Fa.path[gc]);
for(Fa=1;Fa<Db.path.length;Fa++)ua.push(Db.path[Fa]);Fa=2.5*kc;Za&&(ua=ua.map(function(Fc){return B(Fc,Za)}),ua=ua.some(function(Fc){return 0>=Fc.signedDistanceFromCamera})?[]:ua.map(function(Fc){return Fc.point}));Db=[];if(0<ua.length){Db=ua[0].clone();gc=ua[0].clone();for(var Cb=1;Cb<ua.length;Cb++)Db.x=Math.min(Db.x,ua[Cb].x),Db.y=Math.min(Db.y,ua[Cb].y),gc.x=Math.max(gc.x,ua[Cb].x),gc.y=Math.max(gc.y,ua[Cb].y);Db=Db.x>=Qa.x&&gc.x<=ic.x&&Db.y>=Qa.y&&gc.y<=ic.y?[ua]:gc.x<Qa.x||Db.x>ic.x||gc.y<Qa.y||
Db.y>ic.y?[]:a.clipLine([ua],Qa.x,Qa.y,ic.x,ic.y)}Qa=0;for(ic=Db;Qa<ic.length;Qa+=1)for(jc.reset(ic[Qa],.25*kc),ua=jc.length<=.5*kc?1:Math.ceil(jc.paddedLength/Fa)+1,Db=0;Db<ua;Db++){Cb=jc.lerp(Db/Math.max(ua-1,1));gc=Cb.x+100;Cb=Cb.y+100;$b.push(gc,Cb,kc,0);var bc=gc-kc,Ec=Cb-kc,Yc=gc+kc,fd=Cb+kc;if(ca=ca&&this.isOffscreen(bc,Ec,Yc,fd),W=W||this.isInsideGrid(bc,Ec,Yc,fd),!V&&this.grid.hitTestCircle(gc,Cb,kc,Eb)&&(Y=!0,!wb))return{circles:[],offscreen:!1,collisionDetected:Y}}}return{circles:!wb&&
Y||!W?[]:$b,offscreen:ca,collisionDetected:Y}};Te.prototype.queryRenderedSymbols=function(V){if(0===V.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var Y=[],W=1/0,ca=1/0,ua=-1/0,Fa=-1/0,Qa=0;Qa<V.length;Qa+=1){var Za=V[Qa];Za=new a.Point(Za.x+100,Za.y+100);W=Math.min(W,Za.x);ca=Math.min(ca,Za.y);ua=Math.max(ua,Za.x);Fa=Math.max(Fa,Za.y);Y.push(Za)}V={};Qa={};Za=0;for(W=this.grid.query(W,ca,ua,Fa).concat(this.ignoredGrid.query(W,ca,ua,Fa));Za<W.length;Za+=1)ua=
W[Za],ca=ua.key,(void 0===V[ca.bucketInstanceId]&&(V[ca.bucketInstanceId]={}),V[ca.bucketInstanceId][ca.featureIndex])||(ua=[new a.Point(ua.x1,ua.y1),new a.Point(ua.x2,ua.y1),new a.Point(ua.x2,ua.y2),new a.Point(ua.x1,ua.y2)],a.polygonIntersectsPolygon(Y,ua)&&(V[ca.bucketInstanceId][ca.featureIndex]=!0,void 0===Qa[ca.bucketInstanceId]&&(Qa[ca.bucketInstanceId]=[]),Qa[ca.bucketInstanceId].push(ca.featureIndex)));return Qa};Te.prototype.insertCollisionBox=function(V,Y,W,ca,ua){(Y?this.ignoredGrid:this.grid).insert({bucketInstanceId:W,
featureIndex:ca,collisionGroupID:ua},V[0],V[1],V[2],V[3])};Te.prototype.insertCollisionCircles=function(V,Y,W,ca,ua){Y=Y?this.ignoredGrid:this.grid;W={bucketInstanceId:W,featureIndex:ca,collisionGroupID:ua};for(ca=0;ca<V.length;ca+=4)Y.insertCircle(W,V[ca],V[ca+1],V[ca+2])};Te.prototype.projectAndGetPerspectiveRatio=function(V,Y,W){Y=[Y,W,0,1];return N(Y,Y,V),{point:new a.Point((Y[0]/Y[3]+1)/2*this.transform.width+100,(-Y[1]/Y[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/
Y[3]*.5}};Te.prototype.isOffscreen=function(V,Y,W,ca){return 100>W||V>=this.screenRightBoundary||100>ca||Y>this.screenBottomBoundary};Te.prototype.isInsideGrid=function(V,Y,W,ca){return 0<=W&&V<this.gridRightBoundary&&0<=ca&&Y<this.gridBottomBoundary};Te.prototype.getViewportMatrix=function(){var V=a.identity([]);return a.translate(V,V,[-100,-100,0]),V};var pf=function(V,Y,W,ca){this.opacity=V?Math.max(0,Math.min(1,V.opacity+(V.placed?Y:-Y))):ca&&W?1:0;this.placed=W};pf.prototype.isHidden=function(){return 0===
this.opacity&&!this.placed};var af=function(V,Y,W,ca,ua){this.text=new pf(V?V.text:null,Y,W,ua);this.icon=new pf(V?V.icon:null,Y,ca,ua)};af.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var gf=function(V,Y,W){this.text=V;this.icon=Y;this.skipFade=W},Ve=function(){this.invProjMatrix=a.create();this.viewportMatrix=a.create();this.circles=[]},Rb=function(V,Y,W,ca,ua){this.bucketInstanceId=V;this.featureIndex=Y;this.sourceLayerIndex=W;this.bucketIndex=ca;this.tileID=
ua},Pc=function(V){this.crossSourceCollisions=V;this.maxGroupID=0;this.collisionGroups={}};Pc.prototype.get=function(V){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[V]){var Y=++this.maxGroupID;this.collisionGroups[V]={ID:Y,predicate:function(W){return W.collisionGroupID===Y}}}return this.collisionGroups[V]};var uc=function(V,Y,W,ca){this.transform=V.clone();this.collisionIndex=new Te(this.transform);this.placements={};this.opacities={};this.variableOffsets={};
this.stale=!1;this.commitTime=0;this.fadeDuration=Y;this.retainedQueryData={};this.collisionGroups=new Pc(W);this.collisionCircleArrays={};(this.prevPlacement=ca)&&(ca.prevPlacement=void 0);this.placedOrientations={}};uc.prototype.getBucketParts=function(V,Y,W,ca){var ua=W.getBucket(Y),Fa=W.latestFeatureIndex;if(ua&&Fa&&Y.id===ua.layerIds[0]){Y=W.collisionBoxArray;var Qa=ua.layers[0].layout,Za=Math.pow(2,this.transform.zoom-W.tileID.overscaledZ),wb=W.tileSize/a.EXTENT,Db=this.transform.calculatePosMatrix(W.tileID.toUnwrapped()),
Eb="map"===Qa.get("text-pitch-alignment"),kc="map"===Qa.get("text-rotation-alignment"),jc=T(W,1,this.transform.zoom),$b=A(Db,Eb,kc,this.transform,jc),ic=null;Eb&&(Eb=t(Db,Eb,kc,this.transform,jc),ic=a.multiply([],this.transform.labelPlaneMatrix,Eb));this.retainedQueryData[ua.bucketInstanceId]=new Rb(ua.bucketInstanceId,Fa,ua.sourceLayerIndex,ua.index,W.tileID);W={bucket:ua,layout:Qa,posMatrix:Db,textLabelPlaneMatrix:$b,labelToScreenMatrix:ic,scale:Za,textPixelRatio:wb,holdingForFade:W.holdingForFade(),
collisionBoxArray:Y,partiallyEvaluatedTextSize:a.evaluateSizeForZoom(ua.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(ua.sourceID)};if(ca)for(ca=0,ua=ua.sortKeyRanges;ca<ua.length;ca+=1)Fa=ua[ca],V.push({sortKey:Fa.sortKey,symbolInstanceStart:Fa.symbolInstanceStart,symbolInstanceEnd:Fa.symbolInstanceEnd,parameters:W});else V.push({symbolInstanceStart:0,symbolInstanceEnd:ua.symbolInstances.length,parameters:W})}};uc.prototype.attemptAnchorPlacement=function(V,Y,W,ca,ua,
Fa,Qa,Za,wb,Db,Eb,kc,jc,$b,ic){var gc,Cb=[kc.textOffset0,kc.textOffset1],bc=Q(V,W,ca,Cb,ua);Y=this.collisionIndex.placeCollisionBox(U(Y,bc.x,bc.y,Fa,Qa,this.transform.angle),Eb,Za,wb,Db.predicate);if(!ic||0!==this.collisionIndex.placeCollisionBox(U(ic,bc.x,bc.y,Fa,Qa,this.transform.angle),Eb,Za,wb,Db.predicate).box.length)return 0<Y.box.length?(this.prevPlacement&&this.prevPlacement.variableOffsets[kc.crossTileID]&&this.prevPlacement.placements[kc.crossTileID]&&this.prevPlacement.placements[kc.crossTileID].text&&
(gc=this.prevPlacement.variableOffsets[kc.crossTileID].anchor),this.variableOffsets[kc.crossTileID]={textOffset:Cb,width:W,height:ca,anchor:V,textBoxScale:ua,prevAnchor:gc},this.markUsedJustification(jc,V,kc,$b),jc.allowVerticalPlacement&&(this.markUsedOrientation(jc,$b,kc),this.placedOrientations[kc.crossTileID]=$b),{shift:bc,placedGlyphBoxes:Y}):void 0};uc.prototype.placeLayerBucketPart=function(V,Y,W){var ca=this,ua=V.parameters,Fa=ua.bucket,Qa=ua.layout,Za=ua.posMatrix,wb=ua.textLabelPlaneMatrix,
Db=ua.labelToScreenMatrix,Eb=ua.textPixelRatio,kc=ua.holdingForFade,jc=ua.collisionBoxArray,$b=ua.partiallyEvaluatedTextSize,ic=ua.collisionGroup,gc=Qa.get("text-optional"),Cb=Qa.get("icon-optional"),bc=Qa.get("text-allow-overlap"),Ec=Qa.get("icon-allow-overlap"),Yc="map"===Qa.get("text-rotation-alignment"),fd="map"===Qa.get("text-pitch-alignment"),Fc="none"!==Qa.get("icon-text-fit");ua="viewport-y"===Qa.get("symbol-z-order");var hd=bc&&(Ec||!Fa.hasIconData()||Cb),dd=Ec&&(bc||!Fa.hasTextData()||gc);
!Fa.collisionArrays&&jc&&Fa.deserializeCollisionBoxes(jc);jc=function(vd,od){if(!Y[vd.crossTileID])if(kc)ca.placements[vd.crossTileID]=new gf(!1,!1,!1);else{var $d,Xd=!1,xe=!1,ye=!0,ue=null,Nd={box:null,offscreen:null},ie={box:null,offscreen:null},Le=null,se=null,Ne=0,rf=0,bf=0;od.textFeatureIndex?Ne=od.textFeatureIndex:vd.useRuntimeCollisionCircles&&(Ne=vd.featureIndex);od.verticalTextFeatureIndex&&(rf=od.verticalTextFeatureIndex);var qh=od.textBox;if(qh){var We=function(ve){var Je=a.WritingMode.horizontal;
Fa.allowVerticalPlacement&&!ve&&ca.prevPlacement&&(ve=ca.prevPlacement.placedOrientations[vd.crossTileID])&&(ca.placedOrientations[vd.crossTileID]=ve,ca.markUsedOrientation(Fa,Je=ve,vd));return Je};ye=function(ve,Je){if(Fa.allowVerticalPlacement&&0<vd.numVerticalGlyphVertices&&od.verticalTextBox)for(var eg=0,Mf=Fa.writingModes;eg<Mf.length&&(Mf[eg]===a.WritingMode.vertical?(Nd=Je(),ie=Nd):Nd=ve(),!(Nd&&Nd.box&&Nd.box.length));eg+=1);else Nd=ve()};if(Qa.get("text-variable-anchor")){var uf=Qa.get("text-variable-anchor");
if(ca.prevPlacement&&ca.prevPlacement.variableOffsets[vd.crossTileID]){var mg=ca.prevPlacement.variableOffsets[vd.crossTileID];0<uf.indexOf(mg.anchor)&&(uf=uf.filter(function(ve){return ve!==mg.anchor})).unshift(mg.anchor)}var Qh=function(ve,Je,eg){var Mf=ve.x2-ve.x1,xg=ve.y2-ve.y1,yg=vd.textBoxScale;Je=Fc&&!Ec?Je:null;for(var vf={box:[],offscreen:!1},Ti=bc?2*uf.length:uf.length,mi=0;mi<Ti;++mi){var zb=ca.attemptAnchorPlacement(uf[mi%uf.length],ve,Mf,xg,yg,Yc,fd,Eb,Za,ic,mi>=uf.length,vd,Fa,eg,Je);
if(zb&&(vf=zb.placedGlyphBoxes)&&vf.box&&vf.box.length){Xd=!0;ue=zb.shift;break}}return vf};ye(function(){return Qh(qh,od.iconBox,a.WritingMode.horizontal)},function(){var ve=od.verticalTextBox;return Fa.allowVerticalPlacement&&!(Nd&&Nd.box&&Nd.box.length)&&0<vd.numVerticalGlyphVertices&&ve?Qh(ve,od.verticalIconBox,a.WritingMode.vertical):{box:null,offscreen:null}});Nd&&(Xd=Nd.box,ye=Nd.offscreen);ye=We(Nd&&Nd.box);!Xd&&ca.prevPlacement&&(We=ca.prevPlacement.variableOffsets[vd.crossTileID])&&(ca.variableOffsets[vd.crossTileID]=
We,ca.markUsedJustification(Fa,We.anchor,vd,ye))}else{var Ff=function(ve,Je){ve=ca.collisionIndex.placeCollisionBox(ve,bc,Eb,Za,ic.predicate);return ve&&ve.box&&ve.box.length&&(ca.markUsedOrientation(Fa,Je,vd),ca.placedOrientations[vd.crossTileID]=Je),ve};ye(function(){return Ff(qh,a.WritingMode.horizontal)},function(){var ve=od.verticalTextBox;return Fa.allowVerticalPlacement&&0<vd.numVerticalGlyphVertices&&ve?Ff(ve,a.WritingMode.vertical):{box:null,offscreen:null}});We(Nd&&Nd.box&&Nd.box.length)}}if(Xd=
($d=Nd)&&$d.box&&0<$d.box.length,ye=$d&&$d.offscreen,vd.useRuntimeCollisionCircles){Le=Fa.text.placedSymbolArray.get(vd.centerJustifiedTextSymbolIndex);We=a.evaluateSizeForFeature(Fa.textSizeData,$b,Le);var Si=Qa.get("text-padding");Le=ca.collisionIndex.placeCollisionCircles(bc,Le,Fa.lineVertexArray,Fa.glyphOffsetArray,We,Za,wb,Db,W,fd,ic.predicate,vd.collisionCircleDiameter,Si);Xd=bc||0<Le.circles.length&&!Le.collisionDetected;ye=ye&&Le.offscreen}if(od.iconFeatureIndex&&(bf=od.iconFeatureIndex),
od.iconBox)xe=function(ve){ve=Fc&&ue?U(ve,ue.x,ue.y,Yc,fd,ca.transform.angle):ve;return ca.collisionIndex.placeCollisionBox(ve,Ec,Eb,Za,ic.predicate)},xe=ie&&ie.box&&ie.box.length&&od.verticalIconBox?0<(se=xe(od.verticalIconBox)).box.length:0<(se=xe(od.iconBox)).box.length,ye=ye&&se.offscreen;We=gc||0===vd.numHorizontalGlyphVertices&&0===vd.numVerticalGlyphVertices;Si=Cb||0===vd.numIconVertices;if(We||Si?Si?We||(xe=xe&&Xd):Xd=xe&&Xd:xe=Xd=xe&&Xd,Xd&&$d&&$d.box&&ca.collisionIndex.insertCollisionBox($d.box,
Qa.get("text-ignore-placement"),Fa.bucketInstanceId,ie&&ie.box&&rf?rf:Ne,ic.ID),xe&&se&&ca.collisionIndex.insertCollisionBox(se.box,Qa.get("icon-ignore-placement"),Fa.bucketInstanceId,bf,ic.ID),Le&&(Xd&&ca.collisionIndex.insertCollisionCircles(Le.circles,Qa.get("text-ignore-placement"),Fa.bucketInstanceId,Ne,ic.ID),W))for(se=Fa.bucketInstanceId,$d=ca.collisionCircleArrays[se],void 0===$d&&($d=ca.collisionCircleArrays[se]=new Ve),se=0;se<Le.circles.length;se+=4)$d.circles.push(Le.circles[se+0]),$d.circles.push(Le.circles[se+
1]),$d.circles.push(Le.circles[se+2]),$d.circles.push(Le.collisionDetected?1:0);ca.placements[vd.crossTileID]=new gf(Xd||hd,xe||dd,ye||Fa.justReloaded);Y[vd.crossTileID]=!0}};if(ua)for(V=Fa.getSortedSymbolIndexes(this.transform.angle),ua=V.length-1;0<=ua;--ua){var sd=V[ua];jc(Fa.symbolInstances.get(sd),Fa.collisionArrays[sd])}else for(ua=V.symbolInstanceStart;ua<V.symbolInstanceEnd;ua++)jc(Fa.symbolInstances.get(ua),Fa.collisionArrays[ua]);W&&Fa.bucketInstanceId in this.collisionCircleArrays&&(jc=
this.collisionCircleArrays[Fa.bucketInstanceId],a.invert(jc.invProjMatrix,Za),jc.viewportMatrix=this.collisionIndex.getViewportMatrix());Fa.justReloaded=!1};uc.prototype.markUsedJustification=function(V,Y,W,ca){Y=ca===a.WritingMode.vertical?W.verticalPlacedTextSymbolIndex:{left:W.leftJustifiedTextSymbolIndex,center:W.centerJustifiedTextSymbolIndex,right:W.rightJustifiedTextSymbolIndex}[a.getAnchorJustification(Y)];ca=0;for(var ua=[W.leftJustifiedTextSymbolIndex,W.centerJustifiedTextSymbolIndex,W.rightJustifiedTextSymbolIndex,
W.verticalPlacedTextSymbolIndex];ca<ua.length;ca+=1){var Fa=ua[ca];0<=Fa&&(V.text.placedSymbolArray.get(Fa).crossTileID=0<=Y&&Fa!==Y?0:W.crossTileID)}};uc.prototype.markUsedOrientation=function(V,Y,W){var ca=Y===a.WritingMode.horizontal||Y===a.WritingMode.horizontalOnly?Y:0;Y=Y===a.WritingMode.vertical?Y:0;for(var ua=0,Fa=[W.leftJustifiedTextSymbolIndex,W.centerJustifiedTextSymbolIndex,W.rightJustifiedTextSymbolIndex];ua<Fa.length;ua+=1)V.text.placedSymbolArray.get(Fa[ua]).placedOrientation=ca;W.verticalPlacedTextSymbolIndex&&
(V.text.placedSymbolArray.get(W.verticalPlacedTextSymbolIndex).placedOrientation=Y)};uc.prototype.commit=function(V){this.commitTime=V;this.zoomAtLastRecencyCheck=this.transform.zoom;var Y=this.prevPlacement,W=!1;this.prevZoomAdjustment=Y?Y.zoomAdjustment(this.transform.zoom):0;var ca=Y?Y.symbolFadeChange(V):1,ua=Y?Y.opacities:{},Fa=Y?Y.variableOffsets:{},Qa=Y?Y.placedOrientations:{};for(Eb in this.placements){var Za=this.placements[Eb],wb=ua[Eb];wb?(this.opacities[Eb]=new af(wb,ca,Za.text,Za.icon),
W=W||Za.text!==wb.text.placed||Za.icon!==wb.icon.placed):(this.opacities[Eb]=new af(null,ca,Za.text,Za.icon,Za.skipFade),W=W||Za.text||Za.icon)}for(var Db in ua){var Eb=ua[Db];this.opacities[Db]||(Za=new af(Eb,ca,!1,!1),Za.isHidden()||(this.opacities[Db]=Za,W=W||Eb.text.placed||Eb.icon.placed))}for(var kc in Fa)this.variableOffsets[kc]||!this.opacities[kc]||this.opacities[kc].isHidden()||(this.variableOffsets[kc]=Fa[kc]);for(var jc in Qa)this.placedOrientations[jc]||!this.opacities[jc]||this.opacities[jc].isHidden()||
(this.placedOrientations[jc]=Qa[jc]);W?this.lastPlacementChangeTime=V:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=Y?Y.lastPlacementChangeTime:V)};uc.prototype.updateLayerOpacities=function(V,Y){for(var W={},ca=0;ca<Y.length;ca+=1){var ua=Y[ca],Fa=ua.getBucket(V);Fa&&ua.latestFeatureIndex&&V.id===Fa.layerIds[0]&&this.updateBucketOpacities(Fa,W,ua.collisionBoxArray)}};uc.prototype.updateBucketOpacities=function(V,Y,W){var ca=this;V.hasTextData()&&V.text.opacityVertexArray.clear();
V.hasIconData()&&V.icon.opacityVertexArray.clear();V.hasIconCollisionBoxData()&&V.iconCollisionBox.collisionVertexArray.clear();V.hasTextCollisionBoxData()&&V.textCollisionBox.collisionVertexArray.clear();var ua=V.layers[0].layout,Fa=new af(null,0,!1,!1,!0),Qa=ua.get("text-allow-overlap"),Za=ua.get("icon-allow-overlap"),wb=ua.get("text-variable-anchor"),Db="map"===ua.get("text-rotation-alignment"),Eb="map"===ua.get("text-pitch-alignment"),kc="none"!==ua.get("icon-text-fit"),jc=new af(null,0,Qa&&(Za||
!V.hasIconData()||ua.get("icon-optional")),Za&&(Qa||!V.hasTextData()||ua.get("text-optional")),!0);!V.collisionArrays&&W&&(V.hasIconCollisionBoxData()||V.hasTextCollisionBoxData())&&V.deserializeCollisionBoxes(W);var $b=function(ic,gc,Cb){for(var bc=0;bc<gc/4;bc++)ic.opacityVertexArray.emplaceBack(Cb)};W=function(ic){var gc=V.symbolInstances.get(ic),Cb=gc.numHorizontalGlyphVertices,bc=gc.numVerticalGlyphVertices,Ec=gc.crossTileID,Yc=ca.opacities[Ec];Y[Ec]?Yc=Fa:Yc||(ca.opacities[Ec]=Yc=jc);Y[Ec]=
!0;var fd=0<gc.numIconVertices,Fc=ca.placedOrientations[gc.crossTileID],hd=Fc===a.WritingMode.vertical,dd=Fc===a.WritingMode.horizontal||Fc===a.WritingMode.horizontalOnly;if(0<Cb||0<bc){var sd=X(Yc.text);$b(V.text,Cb,hd?Ob:sd);$b(V.text,bc,dd?Ob:sd);var vd=Yc.text.isHidden();[gc.rightJustifiedTextSymbolIndex,gc.centerJustifiedTextSymbolIndex,gc.leftJustifiedTextSymbolIndex].forEach(function(od){0<=od&&(V.text.placedSymbolArray.get(od).hidden=vd||hd?1:0)});0<=gc.verticalPlacedTextSymbolIndex&&(V.text.placedSymbolArray.get(gc.verticalPlacedTextSymbolIndex).hidden=
vd||dd?1:0);(Cb=ca.variableOffsets[gc.crossTileID])&&ca.markUsedJustification(V,Cb.anchor,gc,Fc);(Fc=ca.placedOrientations[gc.crossTileID])&&(ca.markUsedJustification(V,"left",gc,Fc),ca.markUsedOrientation(V,Fc,gc))}fd&&(fd=X(Yc.icon),Fc=!(kc&&gc.verticalPlacedIconSymbolIndex&&hd),0<=gc.placedIconSymbolIndex&&($b(V.icon,gc.numIconVertices,Fc?fd:Ob),V.icon.placedSymbolArray.get(gc.placedIconSymbolIndex).hidden=Yc.icon.isHidden()),0<=gc.verticalPlacedIconSymbolIndex&&($b(V.icon,gc.numVerticalIconVertices,
Fc?Ob:fd),V.icon.placedSymbolArray.get(gc.verticalPlacedIconSymbolIndex).hidden=Yc.icon.isHidden()));if(V.hasIconCollisionBoxData()||V.hasTextCollisionBoxData())if(ic=V.collisionArrays[ic]){gc=new a.Point(0,0);if(ic.textBox||ic.verticalTextBox)fd=!0,wb&&((Ec=ca.variableOffsets[Ec])?(gc=Q(Ec.anchor,Ec.width,Ec.height,Ec.textOffset,Ec.textBoxScale),Db&&gc._rotate(Eb?ca.transform.angle:-ca.transform.angle)):fd=!1),ic.textBox&&S(V.textCollisionBox.collisionVertexArray,Yc.text.placed,!fd||hd,gc.x,gc.y),
ic.verticalTextBox&&S(V.textCollisionBox.collisionVertexArray,Yc.text.placed,!fd||dd,gc.x,gc.y);dd=!(dd||!ic.verticalIconBox);ic.iconBox&&S(V.iconCollisionBox.collisionVertexArray,Yc.icon.placed,dd,kc?gc.x:0,kc?gc.y:0);ic.verticalIconBox&&S(V.iconCollisionBox.collisionVertexArray,Yc.icon.placed,!dd,kc?gc.x:0,kc?gc.y:0)}};for(ua=0;ua<V.symbolInstances.length;ua++)W(ua);if(V.sortFeatures(this.transform.angle),this.retainedQueryData[V.bucketInstanceId]&&(this.retainedQueryData[V.bucketInstanceId].featureSortOrder=
V.featureSortOrder),V.hasTextData()&&V.text.opacityVertexBuffer&&V.text.opacityVertexBuffer.updateData(V.text.opacityVertexArray),V.hasIconData()&&V.icon.opacityVertexBuffer&&V.icon.opacityVertexBuffer.updateData(V.icon.opacityVertexArray),V.hasIconCollisionBoxData()&&V.iconCollisionBox.collisionVertexBuffer&&V.iconCollisionBox.collisionVertexBuffer.updateData(V.iconCollisionBox.collisionVertexArray),V.hasTextCollisionBoxData()&&V.textCollisionBox.collisionVertexBuffer&&V.textCollisionBox.collisionVertexBuffer.updateData(V.textCollisionBox.collisionVertexArray),
V.bucketInstanceId in this.collisionCircleArrays)W=this.collisionCircleArrays[V.bucketInstanceId],V.placementInvProjMatrix=W.invProjMatrix,V.placementViewportMatrix=W.viewportMatrix,V.collisionCircleArray=W.circles,delete this.collisionCircleArrays[V.bucketInstanceId]};uc.prototype.symbolFadeChange=function(V){return 0===this.fadeDuration?1:(V-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment};uc.prototype.zoomAdjustment=function(V){return Math.max(0,(this.transform.zoom-V)/1.5)};uc.prototype.hasTransitions=
function(V){return this.stale||V-this.lastPlacementChangeTime<this.fadeDuration};uc.prototype.stillRecent=function(V,Y){var W=this.zoomAtLastRecencyCheck===Y?1-this.zoomAdjustment(Y):1;return this.zoomAtLastRecencyCheck=Y,this.commitTime+this.fadeDuration*W>V};uc.prototype.setStale=function(){this.stale=!0};var gd=Math.pow(2,25),Jd=Math.pow(2,24),Td=Math.pow(2,17),Fd=Math.pow(2,16),Ed=Math.pow(2,9),ee=Math.pow(2,8),ge=Math.pow(2,1),Ob=0,hc=function(V){this._sortAcrossTiles="viewport-y"!==V.layout.get("symbol-z-order")&&
void 0!==V.layout.get("symbol-sort-key").constantOr(1);this._currentPartIndex=this._currentTileIndex=0;this._seenCrossTileIDs={};this._bucketParts=[]};hc.prototype.continuePlacement=function(V,Y,W,ca,ua){for(var Fa=this._bucketParts;this._currentTileIndex<V.length;)if(Y.getBucketParts(Fa,ca,V[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,ua())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Fa.sort(function(Qa,Za){return Qa.sortKey-Za.sortKey}));this._currentPartIndex<
Fa.length;)if(Y.placeLayerBucketPart(Fa[this._currentPartIndex],this._seenCrossTileIDs,W),this._currentPartIndex++,ua())return!0;return!1};var Cc=function(V,Y,W,ca,ua,Fa,Qa){this.placement=new uc(V,ua,Fa,Qa);this._currentPlacementIndex=Y.length-1;this._forceFullPlacement=W;this._showCollisionBoxes=ca;this._done=!1};Cc.prototype.isDone=function(){return this._done};Cc.prototype.continuePlacement=function(V,Y,W){for(var ca=this,ua=a.browser.now(),Fa=function(){var wb=a.browser.now()-ua;return!ca._forceFullPlacement&&
2<wb};0<=this._currentPlacementIndex;){var Qa=Y[V[this._currentPlacementIndex]],Za=this.placement.collisionIndex.transform.zoom;if("symbol"===Qa.type&&(!Qa.minzoom||Qa.minzoom<=Za)&&(!Qa.maxzoom||Qa.maxzoom>Za)){if(this._inProgressLayer||(this._inProgressLayer=new hc(Qa)),this._inProgressLayer.continuePlacement(W[Qa.source],this.placement,this._showCollisionBoxes,Qa,Fa))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0};Cc.prototype.commit=function(V){return this.placement.commit(V),
this.placement};var Sc=512/a.EXTENT/2,Ic=function(V,Y,W){this.tileID=V;this.indexedSymbolInstances={};this.bucketInstanceId=W;for(W=0;W<Y.length;W++){var ca=Y.get(W),ua=ca.key;this.indexedSymbolInstances[ua]||(this.indexedSymbolInstances[ua]=[]);this.indexedSymbolInstances[ua].push({crossTileID:ca.crossTileID,coord:this.getScaledCoordinates(ca,V)})}};Ic.prototype.getScaledCoordinates=function(V,Y){var W=Sc/Math.pow(2,Y.canonical.z-this.tileID.canonical.z);return{x:Math.floor((Y.canonical.x*a.EXTENT+
V.anchorX)*W),y:Math.floor((Y.canonical.y*a.EXTENT+V.anchorY)*W)}};Ic.prototype.findMatches=function(V,Y,W){for(var ca=this.tileID.canonical.z<Y.canonical.z?1:Math.pow(2,this.tileID.canonical.z-Y.canonical.z),ua=0;ua<V.length;ua++){var Fa=V.get(ua);if(!Fa.crossTileID){var Qa=this.indexedSymbolInstances[Fa.key];if(Qa)for(var Za=this.getScaledCoordinates(Fa,Y),wb=0;wb<Qa.length;wb+=1){var Db=Qa[wb];if(Math.abs(Db.coord.x-Za.x)<=ca&&Math.abs(Db.coord.y-Za.y)<=ca&&!W[Db.crossTileID]){W[Db.crossTileID]=
!0;Fa.crossTileID=Db.crossTileID;break}}}}};var Mc=function(){this.maxCrossTileID=0};Mc.prototype.generate=function(){return++this.maxCrossTileID};var Jc=function(){this.indexes={};this.usedCrossTileIDs={};this.lng=0};Jc.prototype.handleWrapJump=function(V){var Y=Math.round((V-this.lng)/360);if(0!==Y)for(var W in this.indexes){var ca=this.indexes[W],ua={},Fa;for(Fa in ca){var Qa=ca[Fa];Qa.tileID=Qa.tileID.unwrapTo(Qa.tileID.wrap+Y);ua[Qa.tileID.key]=Qa}this.indexes[W]=ua}this.lng=V};Jc.prototype.addBucket=
function(V,Y,W){if(this.indexes[V.overscaledZ]&&this.indexes[V.overscaledZ][V.key]){if(this.indexes[V.overscaledZ][V.key].bucketInstanceId===Y.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(V.overscaledZ,this.indexes[V.overscaledZ][V.key])}for(var ca=0;ca<Y.symbolInstances.length;ca++)Y.symbolInstances.get(ca).crossTileID=0;this.usedCrossTileIDs[V.overscaledZ]||(this.usedCrossTileIDs[V.overscaledZ]={});ca=this.usedCrossTileIDs[V.overscaledZ];for(var ua in this.indexes){var Fa=this.indexes[ua];
if(Number(ua)>V.overscaledZ)for(var Qa in Fa){var Za=Fa[Qa];Za.tileID.isChildOf(V)&&Za.findMatches(Y.symbolInstances,V,ca)}else(Fa=Fa[V.scaledTo(Number(ua)).key])&&Fa.findMatches(Y.symbolInstances,V,ca)}for(ua=0;ua<Y.symbolInstances.length;ua++)Qa=Y.symbolInstances.get(ua),Qa.crossTileID||(Qa.crossTileID=W.generate(),ca[Qa.crossTileID]=!0);return void 0===this.indexes[V.overscaledZ]&&(this.indexes[V.overscaledZ]={}),this.indexes[V.overscaledZ][V.key]=new Ic(V,Y.symbolInstances,Y.bucketInstanceId),
!0};Jc.prototype.removeBucketCrossTileIDs=function(V,Y){for(var W in Y.indexedSymbolInstances)for(var ca=0,ua=Y.indexedSymbolInstances[W];ca<ua.length;ca+=1)delete this.usedCrossTileIDs[V][ua[ca].crossTileID]};Jc.prototype.removeStaleBuckets=function(V){var Y=!1,W;for(W in this.indexes){var ca=this.indexes[W],ua;for(ua in ca)V[ca[ua].bucketInstanceId]||(this.removeBucketCrossTileIDs(W,ca[ua]),delete ca[ua],Y=!0)}return Y};var yc=function(){this.layerIndexes={};this.crossTileIDs=new Mc;this.maxBucketInstanceId=
0;this.bucketsInCurrentPlacement={}};yc.prototype.addLayer=function(V,Y,W){var ca=this.layerIndexes[V.id];void 0===ca&&(ca=this.layerIndexes[V.id]=new Jc);var ua=!1,Fa={};ca.handleWrapJump(W);for(W=0;W<Y.length;W+=1){var Qa=Y[W],Za=Qa.getBucket(V);Za&&V.id===Za.layerIds[0]&&(Za.bucketInstanceId||(Za.bucketInstanceId=++this.maxBucketInstanceId),ca.addBucket(Qa.tileID,Za,this.crossTileIDs)&&(ua=!0),Fa[Za.bucketInstanceId]=!0)}return ca.removeStaleBuckets(Fa)&&(ua=!0),ua};yc.prototype.pruneUnusedLayers=
function(V){var Y={},W;for(W in V.forEach(function(ca){Y[ca]=!0}),this.layerIndexes)Y[W]||delete this.layerIndexes[W]};var lc=function(V,Y){return a.emitValidationErrors(V,Y&&Y.filter(function(W){return"source.canvas"!==W.identifier}))},pc=a.pick(zd,"addLayer removeLayer setPaintProperty setLayoutProperty setFilter addSource removeSource setLayerZoomRange setLight setTransition setGeoJSONSourceData".split(" ")),mc=a.pick(zd,["setCenter","setZoom","setBearing","setPitch"]),cd=function(){var V={},Y=
a.styleSpec.$version,W;for(W in a.styleSpec.$root){var ca,ua=a.styleSpec.$root[W];ua.required&&null!=(ca="version"===W?Y:"array"===ua.type?[]:{})&&(V[W]=ca)}return V}(),kd=function(V){function Y(W,ca){var ua=this;void 0===ca&&(ca={});V.call(this);this.map=W;this.dispatcher=new ob((Dd||(Dd=new ze),Dd),this);this.imageManager=new Va;this.imageManager.setEventedParent(this);this.glyphManager=new qb(W._requestManager,ca.localIdeographFontFamily);this.lineAtlas=new gb(256,512);this.crossTileSymbolIndex=
new yc;this._layers={};this._serializedLayers={};this._order=[];this.sourceCaches={};this.zoomHistory=new a.ZoomHistory;this._loaded=!1;this._availableImages=[];this._resetUpdates();this.dispatcher.broadcast("setReferrer",a.getReferrer());var Fa=this;this._rtlTextPluginCallback=Y.registerForPluginStateChange(function(Qa){Fa.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:Qa.pluginStatus,pluginURL:Qa.pluginURL},function(Za,wb){if(a.triggerPluginCompletionEvent(Za),wb&&wb.every(function(Eb){return Eb}))for(var Db in Fa.sourceCaches)Fa.sourceCaches[Db].reload()})});
this.on("data",function(Qa){if("source"===Qa.dataType&&"metadata"===Qa.sourceDataType&&(Qa=ua.sourceCaches[Qa.sourceId])&&(Qa=Qa.getSource())&&Qa.vectorLayerIds)for(var Za in ua._layers){var wb=ua._layers[Za];wb.source===Qa.id&&ua._validateLayer(wb)}})}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.loadURL=function(W,ca){var ua=this;void 0===ca&&(ca={});this.fire(new a.Event("dataloading",{dataType:"style"}));var Fa="boolean"==typeof ca.validate?ca.validate:
!a.isMapboxURL(W);W=this.map._requestManager.normalizeStyleURL(W,ca.accessToken);W=this.map._requestManager.transformRequest(W,a.ResourceType.Style);this._request=a.getJSON(W,function(Qa,Za){ua._request=null;Qa?ua.fire(new a.ErrorEvent(Qa)):Za&&ua._load(Za,Fa)})},Y.prototype.loadJSON=function(W,ca){var ua=this;void 0===ca&&(ca={});this.fire(new a.Event("dataloading",{dataType:"style"}));this._request=a.browser.frame(function(){ua._request=null;ua._load(W,!1!==ca.validate)})},Y.prototype.loadEmpty=
function(){this.fire(new a.Event("dataloading",{dataType:"style"}));this._load(cd,!1)},Y.prototype._load=function(W,ca){if(!ca||!lc(this,a.validateStyle(W))){for(var ua in this._loaded=!0,this.stylesheet=W,W.sources)this.addSource(ua,W.sources[ua],{validate:!1});W.sprite?this._loadSprite(W.sprite):this.imageManager.setLoaded(!0);this.glyphManager.setURL(W.glyphs);W=C(this.stylesheet.layers);this._order=W.map(function(Fa){return Fa.id});this._layers={};this._serializedLayers={};for(ca=0;ca<W.length;ca+=
1)ua=W[ca],(ua=a.createStyleLayer(ua)).setEventedParent(this,{layer:{id:ua.id}}),this._layers[ua.id]=ua,this._serializedLayers[ua.id]=ua.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order));this.light=new La(this.stylesheet.light);this.fire(new a.Event("data",{dataType:"style"}));this.fire(new a.Event("style.load"))}},Y.prototype._loadSprite=function(W){var ca=this;this._spriteRequest=function(ua,Fa,Qa){function Za(){if(Eb)Qa(Eb);else if(wb&&Db){var ic=a.browser.getImageData(Db),
gc={},Cb;for(Cb in wb){var bc=wb[Cb],Ec=bc.width,Yc=bc.height,fd=bc.x,Fc=bc.y,hd=bc.sdf,dd=bc.pixelRatio,sd=bc.stretchX,vd=bc.stretchY;bc=bc.content;var od=new a.RGBAImage({width:Ec,height:Yc});a.RGBAImage.copy(ic,od,{x:fd,y:Fc},{x:0,y:0},{width:Ec,height:Yc});gc[Cb]={data:od,pixelRatio:dd,sdf:hd,stretchX:sd,stretchY:vd,content:bc}}Qa(null,gc)}}var wb,Db,Eb,kc=1<a.browser.devicePixelRatio?"@2x":"",jc=a.getJSON(Fa.transformRequest(Fa.normalizeSpriteURL(ua,kc,".json"),a.ResourceType.SpriteJSON),function(ic,
gc){jc=null;Eb||(Eb=ic,wb=gc,Za())}),$b=a.getImage(Fa.transformRequest(Fa.normalizeSpriteURL(ua,kc,".png"),a.ResourceType.SpriteImage),function(ic,gc){$b=null;Eb||(Eb=ic,Db=gc,Za())});return{cancel:function(){jc&&(jc.cancel(),jc=null);$b&&($b.cancel(),$b=null)}}}(W,this.map._requestManager,function(ua,Fa){if(ca._spriteRequest=null,ua)ca.fire(new a.ErrorEvent(ua));else if(Fa)for(var Qa in Fa)ca.imageManager.addImage(Qa,Fa[Qa]);ca.imageManager.setLoaded(!0);ca._availableImages=ca.imageManager.listImages();
ca.dispatcher.broadcast("setImages",ca._availableImages);ca.fire(new a.Event("data",{dataType:"style"}))})},Y.prototype._validateLayer=function(W){var ca=this.sourceCaches[W.source];if(ca){var ua=W.sourceLayer;ua&&(ca=ca.getSource(),("geojson"===ca.type||ca.vectorLayerIds&&-1===ca.vectorLayerIds.indexOf(ua))&&this.fire(new a.ErrorEvent(Error('Source layer "'+ua+'" does not exist on source "'+ca.id+'" as specified by style layer "'+W.id+'"'))))}},Y.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;
for(var W in this.sourceCaches)if(!this.sourceCaches[W].loaded())return!1;return!!this.imageManager.isLoaded()},Y.prototype._serializeLayers=function(W){for(var ca=[],ua=0;ua<W.length;ua+=1){var Fa=this._layers[W[ua]];"custom"!==Fa.type&&ca.push(Fa.serialize())}return ca},Y.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var W in this.sourceCaches)if(this.sourceCaches[W].hasTransition())return!0;for(var ca in this._layers)if(this._layers[ca].hasTransition())return!0;
return!1},Y.prototype._checkLoaded=function(){if(!this._loaded)throw Error("Style is not done loading");},Y.prototype.update=function(W){if(this._loaded){var ca=this._changed;if(this._changed){var ua=Object.keys(this._updatedLayers),Fa=Object.keys(this._removedLayers);for(wb in(ua.length||Fa.length)&&this._updateWorkerLayers(ua,Fa),this._updatedSources)ua=this._updatedSources[wb],"reload"===ua?this._reloadSource(wb):"clear"===ua&&this._clearSource(wb);for(var Qa in this._updateTilesForChangedImages(),
this._updatedPaintProps)this._layers[Qa].updateTransitions(W);this.light.updateTransitions(W);this._resetUpdates()}for(var Za in this.sourceCaches)this.sourceCaches[Za].used=!1;var wb=0;for(Qa=this._order;wb<Qa.length;wb+=1)Za=this._layers[Qa[wb]],Za.recalculate(W,this._availableImages),!Za.isHidden(W.zoom)&&Za.source&&(this.sourceCaches[Za.source].used=!0);this.light.recalculate(W);this.z=W.zoom;ca&&this.fire(new a.Event("data",{dataType:"style"}))}},Y.prototype._updateTilesForChangedImages=function(){var W=
Object.keys(this._changedImages);if(W.length){for(var ca in this.sourceCaches)this.sourceCaches[ca].reloadTilesForDependencies(["icons","patterns"],W);this._changedImages={}}},Y.prototype._updateWorkerLayers=function(W,ca){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(W),removedIds:ca})},Y.prototype._resetUpdates=function(){this._changed=!1;this._updatedLayers={};this._removedLayers={};this._updatedSources={};this._updatedPaintProps={};this._changedImages={}},Y.prototype.setState=
function(W){var ca=this;if(this._checkLoaded(),lc(this,a.validateStyle(W)))return!1;(W=a.clone$1(W)).layers=C(W.layers);var ua=function(Qa,Za){if(!Qa)return[{command:zd.setStyle,args:[Za]}];var wb=[];try{if(!a.deepEqual(Qa.version,Za.version))return[{command:zd.setStyle,args:[Za]}];a.deepEqual(Qa.center,Za.center)||wb.push({command:zd.setCenter,args:[Za.center]});a.deepEqual(Qa.zoom,Za.zoom)||wb.push({command:zd.setZoom,args:[Za.zoom]});a.deepEqual(Qa.bearing,Za.bearing)||wb.push({command:zd.setBearing,
args:[Za.bearing]});a.deepEqual(Qa.pitch,Za.pitch)||wb.push({command:zd.setPitch,args:[Za.pitch]});a.deepEqual(Qa.sprite,Za.sprite)||wb.push({command:zd.setSprite,args:[Za.sprite]});a.deepEqual(Qa.glyphs,Za.glyphs)||wb.push({command:zd.setGlyphs,args:[Za.glyphs]});a.deepEqual(Qa.transition,Za.transition)||wb.push({command:zd.setTransition,args:[Za.transition]});a.deepEqual(Qa.light,Za.light)||wb.push({command:zd.setLight,args:[Za.light]});var Db={},Eb=[];!function(jc,$b,ic,gc){for(var Cb in $b=$b||
{},jc=jc||{})if(jc.hasOwnProperty(Cb)&&!$b.hasOwnProperty(Cb)){var bc=Cb,Ec=gc;ic.push({command:zd.removeSource,args:[bc]});Ec[bc]=!0}for(Cb in $b)if($b.hasOwnProperty(Cb))if(jc.hasOwnProperty(Cb)){if(!a.deepEqual(jc[Cb],$b[Cb])){if(bc="geojson"===jc[Cb].type&&"geojson"===$b[Cb].type)a:{bc=void 0;Ec=jc;var Yc=$b,fd=Cb;for(bc in Ec[fd])if(Ec[fd].hasOwnProperty(bc)&&"data"!==bc&&!a.deepEqual(Ec[fd][bc],Yc[fd][bc])){bc=!1;break a}for(bc in Yc[fd])if(Yc[fd].hasOwnProperty(bc)&&"data"!==bc&&!a.deepEqual(Ec[fd][bc],
Yc[fd][bc])){bc=!1;break a}bc=!0}if(bc)ic.push({command:zd.setGeoJSONSourceData,args:[Cb,$b[Cb].data]});else{bc=Cb;Ec=$b;Yc=ic;fd=bc;var Fc=gc;Yc.push({command:zd.removeSource,args:[fd]});Fc[fd]=!0;Yc.push({command:zd.addSource,args:[bc,Ec[bc]]})}}}else ic.push({command:zd.addSource,args:[Cb,$b[Cb]]})}(Qa.sources,Za.sources,Eb,Db);var kc=[];Qa.layers&&Qa.layers.forEach(function(jc){Db[jc.source]?wb.push({command:zd.removeLayer,args:[jc.id]}):kc.push(jc)});wb=wb.concat(Eb);(function(jc,$b,ic){$b=$b||
[];var gc,Cb,bc,Ec,Yc;var fd=(jc=jc||[]).map(y);var Fc=$b.map(y);jc=jc.reduce(D,{});var hd=$b.reduce(D,{}),dd=fd.slice(),sd=Object.create(null);for(gc=$b=0;$b<fd.length;$b++)hd.hasOwnProperty(Cb=fd[$b])?gc++:(ic.push({command:zd.removeLayer,args:[Cb]}),dd.splice(dd.indexOf(Cb,gc),1));for(gc=$b=0;$b<Fc.length;$b++)dd[dd.length-1-$b]!==(Cb=Fc[Fc.length-1-$b])&&(jc.hasOwnProperty(Cb)?(ic.push({command:zd.removeLayer,args:[Cb]}),dd.splice(dd.lastIndexOf(Cb,dd.length-gc),1)):gc++,ic.push({command:zd.addLayer,
args:[hd[Cb],dd[dd.length-$b]]}),dd.splice(dd.length-$b,0,Cb),sd[Cb]=!0);for($b=0;$b<Fc.length;$b++)if(bc=jc[Cb=Fc[$b]],Ec=hd[Cb],!sd[Cb]&&!a.deepEqual(bc,Ec))if(a.deepEqual(bc.source,Ec.source)&&a.deepEqual(bc["source-layer"],Ec["source-layer"])&&a.deepEqual(bc.type,Ec.type)){for(Yc in z(bc.layout,Ec.layout,ic,Cb,null,zd.setLayoutProperty),z(bc.paint,Ec.paint,ic,Cb,null,zd.setPaintProperty),a.deepEqual(bc.filter,Ec.filter)||ic.push({command:zd.setFilter,args:[Cb,Ec.filter]}),a.deepEqual(bc.minzoom,
Ec.minzoom)&&a.deepEqual(bc.maxzoom,Ec.maxzoom)||ic.push({command:zd.setLayerZoomRange,args:[Cb,Ec.minzoom,Ec.maxzoom]}),bc)bc.hasOwnProperty(Yc)&&"layout"!==Yc&&"paint"!==Yc&&"filter"!==Yc&&"metadata"!==Yc&&"minzoom"!==Yc&&"maxzoom"!==Yc&&(0===Yc.indexOf("paint.")?z(bc[Yc],Ec[Yc],ic,Cb,Yc.slice(6),zd.setPaintProperty):a.deepEqual(bc[Yc],Ec[Yc])||ic.push({command:zd.setLayerProperty,args:[Cb,Yc,Ec[Yc]]}));for(Yc in Ec)Ec.hasOwnProperty(Yc)&&!bc.hasOwnProperty(Yc)&&"layout"!==Yc&&"paint"!==Yc&&"filter"!==
Yc&&"metadata"!==Yc&&"minzoom"!==Yc&&"maxzoom"!==Yc&&(0===Yc.indexOf("paint.")?z(bc[Yc],Ec[Yc],ic,Cb,Yc.slice(6),zd.setPaintProperty):a.deepEqual(bc[Yc],Ec[Yc])||ic.push({command:zd.setLayerProperty,args:[Cb,Yc,Ec[Yc]]}))}else ic.push({command:zd.removeLayer,args:[Cb]}),fd=dd[dd.lastIndexOf(Cb)+1],ic.push({command:zd.addLayer,args:[Ec,fd]})})(kc,Za.layers,wb)}catch(jc){console.warn("Unable to compute style diff:",jc),wb=[{command:zd.setStyle,args:[Za]}]}return wb}(this.serialize(),W).filter(function(Qa){return!(Qa.command in
mc)});if(0===ua.length)return!1;var Fa=ua.filter(function(Qa){return!(Qa.command in pc)});if(0<Fa.length)throw Error("Unimplemented: "+Fa.map(function(Qa){return Qa.command}).join(", ")+".");return ua.forEach(function(Qa){"setTransition"!==Qa.command&&ca[Qa.command].apply(ca,Qa.args)}),this.stylesheet=W,!0},Y.prototype.addImage=function(W,ca){if(this.getImage(W))return this.fire(new a.ErrorEvent(Error("An image with this name already exists.")));this.imageManager.addImage(W,ca);this._availableImages=
this.imageManager.listImages();this._changed=this._changedImages[W]=!0;this.fire(new a.Event("data",{dataType:"style"}))},Y.prototype.updateImage=function(W,ca){this.imageManager.updateImage(W,ca)},Y.prototype.getImage=function(W){return this.imageManager.getImage(W)},Y.prototype.removeImage=function(W){if(!this.getImage(W))return this.fire(new a.ErrorEvent(Error("No image with this name exists.")));this.imageManager.removeImage(W);this._availableImages=this.imageManager.listImages();this._changed=
this._changedImages[W]=!0;this.fire(new a.Event("data",{dataType:"style"}))},Y.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},Y.prototype.addSource=function(W,ca,ua){var Fa=this;if(void 0===ua&&(ua={}),this._checkLoaded(),void 0!==this.sourceCaches[W])throw Error("There is already a source with this ID");if(!ca.type)throw Error("The type property must be defined, but the only the following properties were given: "+Object.keys(ca).join(", ")+".");if(!(0<=
["vector","raster","geojson","video","image"].indexOf(ca.type)&&this._validate(a.validateStyle.source,"sources."+W,ca,null,ua))){this.map&&this.map._collectResourceTiming&&(ca.collectResourceTiming=!0);var Qa=this.sourceCaches[W]=new te(W,ca,this.dispatcher);Qa.style=this;Qa.setEventedParent(this,function(){return{isSourceLoaded:Fa.loaded(),source:Qa.serialize(),sourceId:W}});Qa.onAdd(this.map);this._changed=!0}},Y.prototype.removeSource=function(W){if(this._checkLoaded(),void 0===this.sourceCaches[W])throw Error("There is no source with this ID");
for(var ca in this._layers)if(this._layers[ca].source===W)return this.fire(new a.ErrorEvent(Error('Source "'+W+'" cannot be removed while layer "'+ca+'" is using it.')));ca=this.sourceCaches[W];delete this.sourceCaches[W];delete this._updatedSources[W];ca.fire(new a.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:W}));ca.setEventedParent(null);ca.clearTiles();ca.onRemove&&ca.onRemove(this.map);this._changed=!0},Y.prototype.setGeoJSONSourceData=function(W,ca){this._checkLoaded();
this.sourceCaches[W].getSource().setData(ca);this._changed=!0},Y.prototype.getSource=function(W){return this.sourceCaches[W]&&this.sourceCaches[W].getSource()},Y.prototype.addLayer=function(W,ca,ua){void 0===ua&&(ua={});this._checkLoaded();var Fa=W.id;if(this.getLayer(Fa))this.fire(new a.ErrorEvent(Error('Layer with id "'+Fa+'" already exists on this map')));else{if("custom"===W.type){if(lc(this,a.validateCustomStyleLayer(W)))return;W=a.createStyleLayer(W)}else{if("object"==typeof W.source&&(this.addSource(Fa,
W.source),W=a.clone$1(W),W=a.extend(W,{source:Fa})),this._validate(a.validateStyle.layer,"layers."+Fa,W,{arrayIndex:-1},ua))return;W=a.createStyleLayer(W);this._validateLayer(W);W.setEventedParent(this,{layer:{id:Fa}});this._serializedLayers[W.id]=W.serialize()}ua=ca?this._order.indexOf(ca):this._order.length;if(ca&&-1===ua)this.fire(new a.ErrorEvent(Error('Layer with id "'+ca+'" does not exist on this map.')));else{if(this._order.splice(ua,0,Fa),this._layerOrderChanged=!0,this._layers[Fa]=W,this._removedLayers[Fa]&&
W.source&&"custom"!==W.type)ca=this._removedLayers[Fa],delete this._removedLayers[Fa],ca.type!==W.type?this._updatedSources[W.source]="clear":(this._updatedSources[W.source]="reload",this.sourceCaches[W.source].pause());this._updateLayer(W);W.onAdd&&W.onAdd(this.map)}}},Y.prototype.moveLayer=function(W,ca){if(this._checkLoaded(),this._changed=!0,this._layers[W]){if(W!==ca){var ua=this._order.indexOf(W);this._order.splice(ua,1);ua=ca?this._order.indexOf(ca):this._order.length;ca&&-1===ua?this.fire(new a.ErrorEvent(Error('Layer with id "'+
ca+'" does not exist on this map.'))):(this._order.splice(ua,0,W),this._layerOrderChanged=!0)}}else this.fire(new a.ErrorEvent(Error("The layer '"+W+"' does not exist in the map's style and cannot be moved.")))},Y.prototype.removeLayer=function(W){this._checkLoaded();var ca=this._layers[W];if(ca){ca.setEventedParent(null);var ua=this._order.indexOf(W);this._order.splice(ua,1);this._changed=this._layerOrderChanged=!0;this._removedLayers[W]=ca;delete this._layers[W];delete this._serializedLayers[W];
delete this._updatedLayers[W];delete this._updatedPaintProps[W];ca.onRemove&&ca.onRemove(this.map)}else this.fire(new a.ErrorEvent(Error("The layer '"+W+"' does not exist in the map's style and cannot be removed.")))},Y.prototype.getLayer=function(W){return this._layers[W]},Y.prototype.hasLayer=function(W){return W in this._layers},Y.prototype.setLayerZoomRange=function(W,ca,ua){this._checkLoaded();var Fa=this.getLayer(W);Fa?Fa.minzoom===ca&&Fa.maxzoom===ua||(null!=ca&&(Fa.minzoom=ca),null!=ua&&(Fa.maxzoom=
ua),this._updateLayer(Fa)):this.fire(new a.ErrorEvent(Error("The layer '"+W+"' does not exist in the map's style and cannot have zoom extent.")))},Y.prototype.setFilter=function(W,ca,ua){void 0===ua&&(ua={});this._checkLoaded();var Fa=this.getLayer(W);if(Fa){if(!a.deepEqual(Fa.filter,ca))return null==ca?(Fa.filter=void 0,void this._updateLayer(Fa)):void(this._validate(a.validateStyle.filter,"layers."+Fa.id+".filter",ca,null,ua)||(Fa.filter=a.clone$1(ca),this._updateLayer(Fa)))}else this.fire(new a.ErrorEvent(Error("The layer '"+
W+"' does not exist in the map's style and cannot be filtered.")))},Y.prototype.getFilter=function(W){return a.clone$1(this.getLayer(W).filter)},Y.prototype.setLayoutProperty=function(W,ca,ua,Fa){void 0===Fa&&(Fa={});this._checkLoaded();var Qa=this.getLayer(W);Qa?a.deepEqual(Qa.getLayoutProperty(ca),ua)||(Qa.setLayoutProperty(ca,ua,Fa),this._updateLayer(Qa)):this.fire(new a.ErrorEvent(Error("The layer '"+W+"' does not exist in the map's style and cannot be styled.")))},Y.prototype.getLayoutProperty=
function(W,ca){var ua=this.getLayer(W);if(ua)return ua.getLayoutProperty(ca);this.fire(new a.ErrorEvent(Error("The layer '"+W+"' does not exist in the map's style.")))},Y.prototype.setPaintProperty=function(W,ca,ua,Fa){void 0===Fa&&(Fa={});this._checkLoaded();var Qa=this.getLayer(W);Qa?a.deepEqual(Qa.getPaintProperty(ca),ua)||(Qa.setPaintProperty(ca,ua,Fa)&&this._updateLayer(Qa),this._changed=!0,this._updatedPaintProps[W]=!0):this.fire(new a.ErrorEvent(Error("The layer '"+W+"' does not exist in the map's style and cannot be styled.")))},
Y.prototype.getPaintProperty=function(W,ca){return this.getLayer(W).getPaintProperty(ca)},Y.prototype.setFeatureState=function(W,ca){this._checkLoaded();var ua=W.source,Fa=W.sourceLayer,Qa=this.sourceCaches[ua];void 0!==Qa?(ua=Qa.getSource().type,"geojson"===ua&&Fa?this.fire(new a.ErrorEvent(Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==ua||Fa?(void 0===W.id&&this.fire(new a.ErrorEvent(Error("The feature id parameter must be provided."))),Qa.setFeatureState(Fa,W.id,ca)):
this.fire(new a.ErrorEvent(Error("The sourceLayer parameter must be provided for vector source types.")))):this.fire(new a.ErrorEvent(Error("The source '"+ua+"' does not exist in the map's style.")))},Y.prototype.removeFeatureState=function(W,ca){this._checkLoaded();var ua=W.source,Fa=this.sourceCaches[ua];if(void 0!==Fa){ua=Fa.getSource().type;var Qa="vector"===ua?W.sourceLayer:void 0;"vector"!==ua||Qa?ca&&"string"!=typeof W.id&&"number"!=typeof W.id?this.fire(new a.ErrorEvent(Error("A feature id is requred to remove its specific state property."))):
Fa.removeFeatureState(Qa,W.id,ca):this.fire(new a.ErrorEvent(Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new a.ErrorEvent(Error("The source '"+ua+"' does not exist in the map's style.")))},Y.prototype.getFeatureState=function(W){this._checkLoaded();var ca=W.source,ua=W.sourceLayer,Fa=this.sourceCaches[ca];if(void 0!==Fa){if("vector"!==Fa.getSource().type||ua)return void 0===W.id&&this.fire(new a.ErrorEvent(Error("The feature id parameter must be provided."))),
Fa.getFeatureState(ua,W.id);this.fire(new a.ErrorEvent(Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new a.ErrorEvent(Error("The source '"+ca+"' does not exist in the map's style.")))},Y.prototype.getTransition=function(){return a.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},Y.prototype.serialize=function(){return a.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,
light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:a.mapObject(this.sourceCaches,function(W){return W.serialize()}),layers:this._serializeLayers(this._order)},function(W){return void 0!==W})},Y.prototype._updateLayer=function(W){this._updatedLayers[W.id]=!0;W.source&&!this._updatedSources[W.source]&&"raster"!==
this.sourceCaches[W.source].getSource().type&&(this._updatedSources[W.source]="reload",this.sourceCaches[W.source].pause());this._changed=!0},Y.prototype._flattenAndSortRenderedFeatures=function(W){for(var ca={},ua=[],Fa=this._order.length-1;0<=Fa;Fa--){var Qa=this._order[Fa];if("fill-extrusion"===this._layers[Qa].type){ca[Qa]=Fa;for(var Za=0,wb=W;Za<wb.length;Za+=1){var Db=wb[Za][Qa];if(Db)for(var Eb=0;Eb<Db.length;Eb+=1)ua.push(Db[Eb])}}}ua.sort(function(jc,$b){return $b.intersectionZ-jc.intersectionZ});
Fa=[];for(Qa=this._order.length-1;0<=Qa;Qa--)if(Za=this._order[Qa],"fill-extrusion"===this._layers[Za].type)for(Za=ua.length-1;0<=Za;Za--){wb=ua[Za].feature;if(ca[wb.layer.id]<Qa)break;Fa.push(wb);ua.pop()}else for(wb=0,Eb=W;wb<Eb.length;wb+=1){var kc=Eb[wb][Za];if(kc)for(Db=0;Db<kc.length;Db+=1)Fa.push(kc[Db].feature)}return Fa},Y.prototype.queryRenderedFeatures=function(W,ca,ua){ca&&ca.filter&&this._validate(a.validateStyle.filter,"queryRenderedFeatures.filter",ca.filter,null,ca);var Fa={};if(ca&&
ca.layers){if(!Array.isArray(ca.layers))return this.fire(new a.ErrorEvent(Error("parameters.layers must be an Array."))),[];for(var Qa=0,Za=ca.layers;Qa<Za.length;Qa+=1){var wb=Za[Qa],Db=this._layers[wb];if(!Db)return this.fire(new a.ErrorEvent(Error("The layer '"+wb+"' does not exist in the map's style and cannot be queried for features."))),[];Fa[Db.source]=!0}}Qa=[];for(var Eb in ca.availableImages=this._availableImages,this.sourceCaches)ca.layers&&!Fa[Eb]||Qa.push(f(this.sourceCaches[Eb],this._layers,
this._serializedLayers,W,ca,ua));return this.placement&&Qa.push(function(kc,jc,$b,ic,gc,Cb,bc){var Ec={},Yc=Cb.queryRenderedSymbols(ic);ic=[];Cb=0;for(var fd=Object.keys(Yc).map(Number);Cb<fd.length;Cb+=1)ic.push(bc[fd[Cb]]);ic.sort(k);bc=function(){var sd=hd[Fc],vd=sd.featureIndex.lookupSymbolFeatures(Yc[sd.bucketInstanceId],jc,sd.bucketIndex,sd.sourceLayerIndex,gc.filter,gc.layers,gc.availableImages,kc),od;for(od in vd){var $d=Ec[od]=Ec[od]||[],Xd=vd[od];Xd.sort(function(ye,ue){var Nd=sd.featureSortOrder;
return Nd?(ye=Nd.indexOf(ye.featureIndex),Nd.indexOf(ue.featureIndex)-ye):ue.featureIndex-ye.featureIndex});for(var xe=0;xe<Xd.length;xe+=1)$d.push(Xd[xe])}};for(var Fc=0,hd=ic;Fc<hd.length;Fc+=1)bc();bc=function(sd){Ec[sd].forEach(function(vd){vd=vd.feature;var od=$b[kc[sd].source].getFeatureState(vd.layer["source-layer"],vd.id);vd.source=vd.layer.source;vd.layer["source-layer"]&&(vd.sourceLayer=vd.layer["source-layer"]);vd.state=od})};for(var dd in Ec)bc(dd);return Ec}(this._layers,this._serializedLayers,
this.sourceCaches,W,ca,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(Qa)},Y.prototype.querySourceFeatures=function(W,ca){ca&&ca.filter&&this._validate(a.validateStyle.filter,"querySourceFeatures.filter",ca.filter,null,ca);return(W=this.sourceCaches[W])?function(ua,Fa){for(var Qa=ua.getRenderableIds().map(function(jc){return ua.getTileByID(jc)}),Za=[],wb={},Db=0;Db<Qa.length;Db++){var Eb=Qa[Db],kc=Eb.tileID.canonical.key;wb[kc]||(wb[kc]=!0,Eb.querySourceFeatures(Za,
Fa))}return Za}(W,ca):[]},Y.prototype.addSourceType=function(W,ca,ua){return Y.getSourceType(W)?ua(Error('A source type called "'+W+'" already exists.')):(Y.setSourceType(W,ca),ca.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:W,url:ca.workerSourceURL},ua):ua(null,null))},Y.prototype.getLight=function(){return this.light.getLight()},Y.prototype.setLight=function(W,ca){void 0===ca&&(ca={});this._checkLoaded();var ua=this.light.getLight(),Fa=!1,Qa;for(Qa in W)if(!a.deepEqual(W[Qa],
ua[Qa])){Fa=!0;break}Fa&&(ua={now:a.browser.now(),transition:a.extend({duration:300,delay:0},this.stylesheet.transition)},this.light.setLight(W,ca),this.light.updateTransitions(ua))},Y.prototype._validate=function(W,ca,ua,Fa,Qa){return void 0===Qa&&(Qa={}),(!Qa||!1!==Qa.validate)&&lc(this,W.call(a.validateStyle,a.extend({key:ca,style:this.serialize(),value:ua,styleSpec:a.styleSpec},Fa)))},Y.prototype._remove=function(){for(var W in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&
(this._spriteRequest.cancel(),this._spriteRequest=null),a.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[W].setEventedParent(null);for(var ca in this.sourceCaches)this.sourceCaches[ca].clearTiles(),this.sourceCaches[ca].setEventedParent(null);this.imageManager.setEventedParent(null);this.setEventedParent(null);this.dispatcher.remove()},Y.prototype._clearSource=function(W){this.sourceCaches[W].clearTiles()},Y.prototype._reloadSource=function(W){this.sourceCaches[W].resume();
this.sourceCaches[W].reload()},Y.prototype._updateSources=function(W){for(var ca in this.sourceCaches)this.sourceCaches[ca].update(W)},Y.prototype._generateCollisionBoxes=function(){for(var W in this.sourceCaches)this._reloadSource(W)},Y.prototype._updatePlacement=function(W,ca,ua,Fa,Qa){void 0===Qa&&(Qa=!1);for(var Za=!1,wb=!1,Db={},Eb=0,kc=this._order;Eb<kc.length;Eb+=1){var jc=this._layers[kc[Eb]];if("symbol"===jc.type){if(!Db[jc.source]){var $b=this.sourceCaches[jc.source];Db[jc.source]=$b.getRenderableIds(!0).map(function(ic){return $b.getTileByID(ic)}).sort(function(ic,
gc){return gc.tileID.overscaledZ-ic.tileID.overscaledZ||(ic.tileID.isLessThan(gc.tileID)?-1:1)})}jc=this.crossTileSymbolIndex.addLayer(jc,Db[jc.source],W.center.lng);Za=Za||jc}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((Qa=Qa||this._layerOrderChanged||0===ua)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(a.browser.now(),W.zoom))&&(this.pauseablePlacement=new Cc(W,this._order,Qa,ca,ua,Fa,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?
this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Db),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(a.browser.now()),wb=!0),Za&&this.pauseablePlacement.placement.setStale()),wb||Za)for(W=0,ca=this._order;W<ca.length;W+=1)ua=this._layers[ca[W]],"symbol"===ua.type&&this.placement.updateLayerOpacities(ua,Db[ua.source]);return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(a.browser.now())},Y.prototype._releaseSymbolFadeTiles=
function(){for(var W in this.sourceCaches)this.sourceCaches[W].releaseSymbolFadeTiles()},Y.prototype.getImages=function(W,ca,ua){this.imageManager.getImages(ca.icons,ua);this._updateTilesForChangedImages();(W=this.sourceCaches[ca.source])&&W.setDependencies(ca.tileID.key,ca.type,ca.icons)},Y.prototype.getGlyphs=function(W,ca,ua){this.glyphManager.getGlyphs(ca.stacks,ua)},Y.prototype.getResource=function(W,ca,ua){return a.makeRequest(ca,ua)},Y}(a.Evented);kd.getSourceType=function(V){return Fb[V]};
kd.setSourceType=function(V,Y){Fb[V]=Y};kd.registerForPluginStateChange=a.registerForPluginStateChange;var nd=a.createLayout([{name:"a_pos",type:"Int16",components:2}]),qd=Z("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),
md=Z("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),pe=Z("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),
qe=Z("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),
Be=Z("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),fe=Z("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),
De=Z("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Rf=Z("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}",
"attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),
Fg=Z("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),
Hi=Z("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),hj=Z("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",
"attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),ij=Z("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",
"attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),hh=Z("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),
Lj=Z("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),
jj=Z("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),
Mj=Z("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),
ci=Z("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Ii=Z("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Pg=Z("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",
"\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),
Nj=Z("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",
"\n#define MAX_LINE_DISTANCE 32767.0\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),
Oj=Z("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",
"\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),
Ah=Z("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",
"\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),
zh=Z("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),ei=Z("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",
"const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),
Bh=Z("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",
"const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),
Ch=Z("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",
"const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),
gi=Object.freeze({__proto__:null,prelude:qd,background:md,backgroundPattern:pe,circle:qe,clippingMask:Be,heatmap:fe,heatmapTexture:De,collisionBox:Rf,collisionCircle:Fg,debug:Hi,fill:hj,fillOutline:ij,fillOutlinePattern:hh,fillPattern:Lj,fillExtrusion:jj,fillExtrusionPattern:Mj,hillshadePrepare:ci,hillshade:Ii,line:Pg,lineGradient:Nj,linePattern:Oj,lineSDF:Ah,raster:zh,symbolIcon:ei,symbolSDF:Bh,symbolTextAndIcon:Ch}),ih=function(){this.boundLayoutVertexBuffer=this.boundProgram=null;this.boundPaintVertexBuffers=
[];this.vao=this.boundDynamicVertexBuffer=this.boundVertexOffset=this.boundIndexBuffer=null};ih.prototype.bind=function(V,Y,W,ca,ua,Fa,Qa,Za){this.context=V;for(var wb=this.boundPaintVertexBuffers.length!==ca.length,Db=0;!wb&&Db<ca.length;Db++)this.boundPaintVertexBuffers[Db]!==ca[Db]&&(wb=!0);V.extVertexArrayObject&&this.vao&&this.boundProgram===Y&&this.boundLayoutVertexBuffer===W&&!wb&&this.boundIndexBuffer===ua&&this.boundVertexOffset===Fa&&this.boundDynamicVertexBuffer===Qa&&this.boundDynamicVertexBuffer2===
Za?(V.bindVertexArrayOES.set(this.vao),Qa&&Qa.bind(),ua&&ua.dynamicDraw&&ua.bind(),Za&&Za.bind()):this.freshBind(Y,W,ca,ua,Fa,Qa,Za)};ih.prototype.freshBind=function(V,Y,W,ca,ua,Fa,Qa){var Za=V.numAttributes,wb=this.context,Db=wb.gl;if(wb.extVertexArrayObject)this.vao&&this.destroy(),this.vao=wb.extVertexArrayObject.createVertexArrayOES(),wb.bindVertexArrayOES.set(this.vao),this.boundProgram=V,this.boundLayoutVertexBuffer=Y,this.boundPaintVertexBuffers=W,this.boundIndexBuffer=ca,this.boundVertexOffset=
ua,this.boundDynamicVertexBuffer=Fa,this.boundDynamicVertexBuffer2=Qa;else{var Eb=wb.currentNumAttributes||0;for(var kc=Za;kc<Eb;kc++)Db.disableVertexAttribArray(kc)}Y.enableAttributes(Db,V);for(Eb=0;Eb<W.length;Eb+=1)W[Eb].enableAttributes(Db,V);Fa&&Fa.enableAttributes(Db,V);Qa&&Qa.enableAttributes(Db,V);Y.bind();Y.setVertexAttribPointers(Db,V,ua);for(Y=0;Y<W.length;Y+=1)Eb=W[Y],Eb.bind(),Eb.setVertexAttribPointers(Db,V,ua);Fa&&(Fa.bind(),Fa.setVertexAttribPointers(Db,V,ua));ca&&ca.bind();Qa&&(Qa.bind(),
Qa.setVertexAttribPointers(Db,V,ua));wb.currentNumAttributes=Za};ih.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Ae=function(V,Y,W,ca,ua){var Fa=V.gl;this.program=Fa.createProgram();var Qa=W?W.defines():[];ua&&Qa.push("#define OVERDRAW_INSPECTOR;");ua=Qa.concat(qd.fragmentSource,Y.fragmentSource).join("\n");Qa=Qa.concat(qd.vertexSource,Y.vertexSource).join("\n");Y=Fa.createShader(Fa.FRAGMENT_SHADER);if(Fa.isContextLost())this.failedToCreate=
!0;else if(Fa.shaderSource(Y,ua),Fa.compileShader(Y),Fa.attachShader(this.program,Y),ua=Fa.createShader(Fa.VERTEX_SHADER),Fa.isContextLost())this.failedToCreate=!0;else{Fa.shaderSource(ua,Qa);Fa.compileShader(ua);Fa.attachShader(this.program,ua);Qa=W?W.layoutAttributes:[];for(var Za=0;Za<Qa.length;Za++)Fa.bindAttribLocation(this.program,Za,Qa[Za].name);Fa.linkProgram(this.program);Fa.deleteShader(ua);Fa.deleteShader(Y);this.numAttributes=Fa.getProgramParameter(this.program,Fa.ACTIVE_ATTRIBUTES);this.attributes=
{};Y={};for(ua=0;ua<this.numAttributes;ua++)(Qa=Fa.getActiveAttrib(this.program,ua))&&(this.attributes[Qa.name]=Fa.getAttribLocation(this.program,Qa.name));ua=Fa.getProgramParameter(this.program,Fa.ACTIVE_UNIFORMS);for(Qa=0;Qa<ua;Qa++)(Za=Fa.getActiveUniform(this.program,Qa))&&(Y[Za.name]=Fa.getUniformLocation(this.program,Za.name));this.fixedUniforms=ca(V,Y);this.binderUniforms=W?W.getUniforms(V,Y):[]}};Ae.prototype.draw=function(V,Y,W,ca,ua,Fa,Qa,Za,wb,Db,Eb,kc,jc,$b,ic,gc){var Cb,bc=V.gl;if(!this.failedToCreate){for(var Ec in V.program.set(this.program),
V.setDepthMode(W),V.setStencilMode(ca),V.setColorMode(ua),V.setCullFace(Fa),this.fixedUniforms)this.fixedUniforms[Ec].set(Qa[Ec]);$b&&$b.setUniforms(V,this.binderUniforms,kc,{zoom:jc});W=(Cb={},Cb[bc.LINES]=2,Cb[bc.TRIANGLES]=3,Cb[bc.LINE_STRIP]=1,Cb)[Y];Cb=0;for(Eb=Eb.get();Cb<Eb.length;Cb+=1)ca=Eb[Cb],ua=ca.vaos||(ca.vaos={}),(ua[Za]||(ua[Za]=new ih)).bind(V,this,wb,$b?$b.getPaintVertexBuffers():[],Db,ca.vertexOffset,ic,gc),bc.drawElements(Y,ca.primitiveLength*W,bc.UNSIGNED_SHORT,ca.primitiveOffset*
W*2)}};var Sf=function(V,Y,W,ca){var ua=Y.style.light,Fa=ua.properties.get("position");Fa=[Fa.x,Fa.y,Fa.z];var Qa=a.create$1();"viewport"===ua.properties.get("anchor")&&a.fromRotation(Qa,-Y.transform.angle);a.transformMat3(Fa,Fa,Qa);Y=ua.properties.get("color");return{u_matrix:V,u_lightpos:Fa,u_lightintensity:ua.properties.get("intensity"),u_lightcolor:[Y.r,Y.g,Y.b],u_vertical_gradient:+W,u_opacity:ca}},Eh=function(V,Y,W,ca){var ua=V.transform;if("map"===ca.paint.get("circle-pitch-alignment")){var Fa=
T(W,1,ua.zoom);var Qa=!0;Fa=[Fa,Fa]}else Qa=!1,Fa=ua.pixelsToGLUnits;return{u_camera_to_center_distance:ua.cameraToCenterDistance,u_scale_with_map:+("map"===ca.paint.get("circle-pitch-scale")),u_matrix:V.translatePosMatrix(Y.posMatrix,W,ca.paint.get("circle-translate"),ca.paint.get("circle-translate-anchor")),u_pitch_with_map:+Qa,u_device_pixel_ratio:a.browser.devicePixelRatio,u_extrude_scale:Fa}},Fh=function(V,Y,W){return void 0===W&&(W=1),{u_matrix:V,u_color:Y,u_overlay:0,u_overlay_scale:W}},Pj=
function(V,Y,W,ca){return{u_matrix:V,u_extrude_scale:T(Y,1,W),u_intensity:ca}},hi=function(V,Y,W){var ca=V.transform;return{u_matrix:fa(V,Y,W),u_ratio:1/T(Y,1,ca.zoom),u_device_pixel_ratio:a.browser.devicePixelRatio,u_units_to_pixels:[1/ca.pixelsToGLUnits[0],1/ca.pixelsToGLUnits[1]]}},Ki,Qj=function(V,Y,W,ca,ua,Fa,Qa,Za,wb,Db){var Eb=ua.transform;return{u_is_size_zoom_constant:+("constant"===V||"source"===V),u_is_size_feature_constant:+("constant"===V||"camera"===V),u_size_t:Y?Y.uSizeT:0,u_size:Y?
Y.uSize:0,u_camera_to_center_distance:Eb.cameraToCenterDistance,u_pitch:Eb.pitch/360*2*Math.PI,u_rotate_symbol:+W,u_aspect_ratio:Eb.width/Eb.height,u_fade_change:ua.options.fadeDuration?ua.symbolFadeChange:1,u_matrix:Fa,u_label_plane_matrix:Qa,u_coord_matrix:Za,u_is_text:+wb,u_pitch_with_map:+ca,u_texsize:Db,u_texture:0}},Rj=function(V,Y,W,ca,ua,Fa,Qa,Za,wb,Db,Eb){var kc=ua.transform;return a.extend(Qj(V,Y,W,ca,ua,Fa,Qa,Za,wb,Db),{u_gamma_scale:ca?Math.cos(kc._pitch)*kc.cameraToCenterDistance:1,u_device_pixel_ratio:a.browser.devicePixelRatio,
u_is_halo:+Eb})},Sj=function(V,Y,W,ca,ua,Fa,Qa,Za,wb,Db){return a.extend(Rj(V,Y,W,ca,ua,Fa,Qa,Za,!0,wb,!0),{u_texsize_icon:Db,u_texture_icon:1})},ii={fillExtrusion:function(V,Y){return{u_matrix:new a.UniformMatrix4f(V,Y.u_matrix),u_lightpos:new a.Uniform3f(V,Y.u_lightpos),u_lightintensity:new a.Uniform1f(V,Y.u_lightintensity),u_lightcolor:new a.Uniform3f(V,Y.u_lightcolor),u_vertical_gradient:new a.Uniform1f(V,Y.u_vertical_gradient),u_opacity:new a.Uniform1f(V,Y.u_opacity)}},fillExtrusionPattern:function(V,
Y){return{u_matrix:new a.UniformMatrix4f(V,Y.u_matrix),u_lightpos:new a.Uniform3f(V,Y.u_lightpos),u_lightintensity:new a.Uniform1f(V,Y.u_lightintensity),u_lightcolor:new a.Uniform3f(V,Y.u_lightcolor),u_vertical_gradient:new a.Uniform1f(V,Y.u_vertical_gradient),u_height_factor:new a.Uniform1f(V,Y.u_height_factor),u_image:new a.Uniform1i(V,Y.u_image),u_texsize:new a.Uniform2f(V,Y.u_texsize),u_pixel_coord_upper:new a.Uniform2f(V,Y.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(V,Y.u_pixel_coord_lower),
u_scale:new a.Uniform3f(V,Y.u_scale),u_fade:new a.Uniform1f(V,Y.u_fade),u_opacity:new a.Uniform1f(V,Y.u_opacity)}},fill:function(V,Y){return{u_matrix:new a.UniformMatrix4f(V,Y.u_matrix)}},fillPattern:function(V,Y){return{u_matrix:new a.UniformMatrix4f(V,Y.u_matrix),u_image:new a.Uniform1i(V,Y.u_image),u_texsize:new a.Uniform2f(V,Y.u_texsize),u_pixel_coord_upper:new a.Uniform2f(V,Y.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(V,Y.u_pixel_coord_lower),u_scale:new a.Uniform3f(V,Y.u_scale),
u_fade:new a.Uniform1f(V,Y.u_fade)}},fillOutline:function(V,Y){return{u_matrix:new a.UniformMatrix4f(V,Y.u_matrix),u_world:new a.Uniform2f(V,Y.u_world)}},fillOutlinePattern:function(V,Y){return{u_matrix:new a.UniformMatrix4f(V,Y.u_matrix),u_world:new a.Uniform2f(V,Y.u_world),u_image:new a.Uniform1i(V,Y.u_image),u_texsize:new a.Uniform2f(V,Y.u_texsize),u_pixel_coord_upper:new a.Uniform2f(V,Y.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(V,Y.u_pixel_coord_lower),u_scale:new a.Uniform3f(V,
Y.u_scale),u_fade:new a.Uniform1f(V,Y.u_fade)}},circle:function(V,Y){return{u_camera_to_center_distance:new a.Uniform1f(V,Y.u_camera_to_center_distance),u_scale_with_map:new a.Uniform1i(V,Y.u_scale_with_map),u_pitch_with_map:new a.Uniform1i(V,Y.u_pitch_with_map),u_extrude_scale:new a.Uniform2f(V,Y.u_extrude_scale),u_device_pixel_ratio:new a.Uniform1f(V,Y.u_device_pixel_ratio),u_matrix:new a.UniformMatrix4f(V,Y.u_matrix)}},collisionBox:function(V,Y){return{u_matrix:new a.UniformMatrix4f(V,Y.u_matrix),
u_camera_to_center_distance:new a.Uniform1f(V,Y.u_camera_to_center_distance),u_pixels_to_tile_units:new a.Uniform1f(V,Y.u_pixels_to_tile_units),u_extrude_scale:new a.Uniform2f(V,Y.u_extrude_scale),u_overscale_factor:new a.Uniform1f(V,Y.u_overscale_factor)}},collisionCircle:function(V,Y){return{u_matrix:new a.UniformMatrix4f(V,Y.u_matrix),u_inv_matrix:new a.UniformMatrix4f(V,Y.u_inv_matrix),u_camera_to_center_distance:new a.Uniform1f(V,Y.u_camera_to_center_distance),u_viewport_size:new a.Uniform2f(V,
Y.u_viewport_size)}},debug:function(V,Y){return{u_color:new a.UniformColor(V,Y.u_color),u_matrix:new a.UniformMatrix4f(V,Y.u_matrix),u_overlay:new a.Uniform1i(V,Y.u_overlay),u_overlay_scale:new a.Uniform1f(V,Y.u_overlay_scale)}},clippingMask:function(V,Y){return{u_matrix:new a.UniformMatrix4f(V,Y.u_matrix)}},heatmap:function(V,Y){return{u_extrude_scale:new a.Uniform1f(V,Y.u_extrude_scale),u_intensity:new a.Uniform1f(V,Y.u_intensity),u_matrix:new a.UniformMatrix4f(V,Y.u_matrix)}},heatmapTexture:function(V,
Y){return{u_matrix:new a.UniformMatrix4f(V,Y.u_matrix),u_world:new a.Uniform2f(V,Y.u_world),u_image:new a.Uniform1i(V,Y.u_image),u_color_ramp:new a.Uniform1i(V,Y.u_color_ramp),u_opacity:new a.Uniform1f(V,Y.u_opacity)}},hillshade:function(V,Y){return{u_matrix:new a.UniformMatrix4f(V,Y.u_matrix),u_image:new a.Uniform1i(V,Y.u_image),u_latrange:new a.Uniform2f(V,Y.u_latrange),u_light:new a.Uniform2f(V,Y.u_light),u_shadow:new a.UniformColor(V,Y.u_shadow),u_highlight:new a.UniformColor(V,Y.u_highlight),
u_accent:new a.UniformColor(V,Y.u_accent)}},hillshadePrepare:function(V,Y){return{u_matrix:new a.UniformMatrix4f(V,Y.u_matrix),u_image:new a.Uniform1i(V,Y.u_image),u_dimension:new a.Uniform2f(V,Y.u_dimension),u_zoom:new a.Uniform1f(V,Y.u_zoom),u_maxzoom:new a.Uniform1f(V,Y.u_maxzoom),u_unpack:new a.Uniform4f(V,Y.u_unpack)}},line:function(V,Y){return{u_matrix:new a.UniformMatrix4f(V,Y.u_matrix),u_ratio:new a.Uniform1f(V,Y.u_ratio),u_device_pixel_ratio:new a.Uniform1f(V,Y.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(V,
Y.u_units_to_pixels)}},lineGradient:function(V,Y){return{u_matrix:new a.UniformMatrix4f(V,Y.u_matrix),u_ratio:new a.Uniform1f(V,Y.u_ratio),u_device_pixel_ratio:new a.Uniform1f(V,Y.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(V,Y.u_units_to_pixels),u_image:new a.Uniform1i(V,Y.u_image)}},linePattern:function(V,Y){return{u_matrix:new a.UniformMatrix4f(V,Y.u_matrix),u_texsize:new a.Uniform2f(V,Y.u_texsize),u_ratio:new a.Uniform1f(V,Y.u_ratio),u_device_pixel_ratio:new a.Uniform1f(V,Y.u_device_pixel_ratio),
u_image:new a.Uniform1i(V,Y.u_image),u_units_to_pixels:new a.Uniform2f(V,Y.u_units_to_pixels),u_scale:new a.Uniform3f(V,Y.u_scale),u_fade:new a.Uniform1f(V,Y.u_fade)}},lineSDF:function(V,Y){return{u_matrix:new a.UniformMatrix4f(V,Y.u_matrix),u_ratio:new a.Uniform1f(V,Y.u_ratio),u_device_pixel_ratio:new a.Uniform1f(V,Y.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(V,Y.u_units_to_pixels),u_patternscale_a:new a.Uniform2f(V,Y.u_patternscale_a),u_patternscale_b:new a.Uniform2f(V,Y.u_patternscale_b),
u_sdfgamma:new a.Uniform1f(V,Y.u_sdfgamma),u_image:new a.Uniform1i(V,Y.u_image),u_tex_y_a:new a.Uniform1f(V,Y.u_tex_y_a),u_tex_y_b:new a.Uniform1f(V,Y.u_tex_y_b),u_mix:new a.Uniform1f(V,Y.u_mix)}},raster:function(V,Y){return{u_matrix:new a.UniformMatrix4f(V,Y.u_matrix),u_tl_parent:new a.Uniform2f(V,Y.u_tl_parent),u_scale_parent:new a.Uniform1f(V,Y.u_scale_parent),u_buffer_scale:new a.Uniform1f(V,Y.u_buffer_scale),u_fade_t:new a.Uniform1f(V,Y.u_fade_t),u_opacity:new a.Uniform1f(V,Y.u_opacity),u_image0:new a.Uniform1i(V,
Y.u_image0),u_image1:new a.Uniform1i(V,Y.u_image1),u_brightness_low:new a.Uniform1f(V,Y.u_brightness_low),u_brightness_high:new a.Uniform1f(V,Y.u_brightness_high),u_saturation_factor:new a.Uniform1f(V,Y.u_saturation_factor),u_contrast_factor:new a.Uniform1f(V,Y.u_contrast_factor),u_spin_weights:new a.Uniform3f(V,Y.u_spin_weights)}},symbolIcon:function(V,Y){return{u_is_size_zoom_constant:new a.Uniform1i(V,Y.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(V,Y.u_is_size_feature_constant),
u_size_t:new a.Uniform1f(V,Y.u_size_t),u_size:new a.Uniform1f(V,Y.u_size),u_camera_to_center_distance:new a.Uniform1f(V,Y.u_camera_to_center_distance),u_pitch:new a.Uniform1f(V,Y.u_pitch),u_rotate_symbol:new a.Uniform1i(V,Y.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(V,Y.u_aspect_ratio),u_fade_change:new a.Uniform1f(V,Y.u_fade_change),u_matrix:new a.UniformMatrix4f(V,Y.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(V,Y.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(V,Y.u_coord_matrix),
u_is_text:new a.Uniform1i(V,Y.u_is_text),u_pitch_with_map:new a.Uniform1i(V,Y.u_pitch_with_map),u_texsize:new a.Uniform2f(V,Y.u_texsize),u_texture:new a.Uniform1i(V,Y.u_texture)}},symbolSDF:function(V,Y){return{u_is_size_zoom_constant:new a.Uniform1i(V,Y.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(V,Y.u_is_size_feature_constant),u_size_t:new a.Uniform1f(V,Y.u_size_t),u_size:new a.Uniform1f(V,Y.u_size),u_camera_to_center_distance:new a.Uniform1f(V,Y.u_camera_to_center_distance),
u_pitch:new a.Uniform1f(V,Y.u_pitch),u_rotate_symbol:new a.Uniform1i(V,Y.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(V,Y.u_aspect_ratio),u_fade_change:new a.Uniform1f(V,Y.u_fade_change),u_matrix:new a.UniformMatrix4f(V,Y.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(V,Y.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(V,Y.u_coord_matrix),u_is_text:new a.Uniform1i(V,Y.u_is_text),u_pitch_with_map:new a.Uniform1i(V,Y.u_pitch_with_map),u_texsize:new a.Uniform2f(V,Y.u_texsize),u_texture:new a.Uniform1i(V,
Y.u_texture),u_gamma_scale:new a.Uniform1f(V,Y.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(V,Y.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(V,Y.u_is_halo)}},symbolTextAndIcon:function(V,Y){return{u_is_size_zoom_constant:new a.Uniform1i(V,Y.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(V,Y.u_is_size_feature_constant),u_size_t:new a.Uniform1f(V,Y.u_size_t),u_size:new a.Uniform1f(V,Y.u_size),u_camera_to_center_distance:new a.Uniform1f(V,Y.u_camera_to_center_distance),
u_pitch:new a.Uniform1f(V,Y.u_pitch),u_rotate_symbol:new a.Uniform1i(V,Y.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(V,Y.u_aspect_ratio),u_fade_change:new a.Uniform1f(V,Y.u_fade_change),u_matrix:new a.UniformMatrix4f(V,Y.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(V,Y.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(V,Y.u_coord_matrix),u_is_text:new a.Uniform1i(V,Y.u_is_text),u_pitch_with_map:new a.Uniform1i(V,Y.u_pitch_with_map),u_texsize:new a.Uniform2f(V,Y.u_texsize),u_texsize_icon:new a.Uniform2f(V,
Y.u_texsize_icon),u_texture:new a.Uniform1i(V,Y.u_texture),u_texture_icon:new a.Uniform1i(V,Y.u_texture_icon),u_gamma_scale:new a.Uniform1f(V,Y.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(V,Y.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(V,Y.u_is_halo)}},background:function(V,Y){return{u_matrix:new a.UniformMatrix4f(V,Y.u_matrix),u_opacity:new a.Uniform1f(V,Y.u_opacity),u_color:new a.UniformColor(V,Y.u_color)}},backgroundPattern:function(V,Y){return{u_matrix:new a.UniformMatrix4f(V,Y.u_matrix),
u_opacity:new a.Uniform1f(V,Y.u_opacity),u_image:new a.Uniform1i(V,Y.u_image),u_pattern_tl_a:new a.Uniform2f(V,Y.u_pattern_tl_a),u_pattern_br_a:new a.Uniform2f(V,Y.u_pattern_br_a),u_pattern_tl_b:new a.Uniform2f(V,Y.u_pattern_tl_b),u_pattern_br_b:new a.Uniform2f(V,Y.u_pattern_br_b),u_texsize:new a.Uniform2f(V,Y.u_texsize),u_mix:new a.Uniform1f(V,Y.u_mix),u_pattern_size_a:new a.Uniform2f(V,Y.u_pattern_size_a),u_pattern_size_b:new a.Uniform2f(V,Y.u_pattern_size_b),u_scale_a:new a.Uniform1f(V,Y.u_scale_a),
u_scale_b:new a.Uniform1f(V,Y.u_scale_b),u_pixel_coord_upper:new a.Uniform2f(V,Y.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(V,Y.u_pixel_coord_lower),u_tile_units_to_pixels:new a.Uniform1f(V,Y.u_tile_units_to_pixels)}}},sk=a.identity(new Float32Array(16)),Gh=new a.Color(1,0,0,1),jh=new a.Color(0,1,0,1),tg=new a.Color(0,0,1,1),Tj=new a.Color(1,0,1,1),Qg=new a.Color(0,1,1,1),ki={symbol:function(V,Y,W,ca,ua){if("translucent"===V.renderPass){var Fa=td.disabled,Qa=V.colorModeForRenderPass();
if(W.layout.get("text-variable-anchor")){var Za=W.layout.get("text-rotation-alignment"),wb=W.layout.get("text-pitch-alignment"),Db=V.transform;Za="map"===Za;wb="map"===wb;for(var Eb=0;Eb<ca.length;Eb+=1){var kc=ca[Eb],jc=Y.getTile(kc),$b=jc.getBucket(W);if($b&&$b.text&&$b.text.segments.get().length){var ic=a.evaluateSizeForZoom($b.textSizeData,Db.zoom),gc=T(jc,1,V.transform.zoom),Cb=A(kc.posMatrix,wb,Za,V.transform,gc),bc="none"!==W.layout.get("icon-text-fit")&&$b.hasIconData();if(ic){gc=Za;var Ec=
wb,Yc=ua,fd=a.symbolSize,Fc=Db;kc=kc.posMatrix;var hd=Math.pow(2,Db.zoom-jc.tileID.overscaledZ),dd=ic,sd=bc,vd=$b.text.placedSymbolArray;ic=$b.text.dynamicLayoutVertexArray;bc=$b.icon.dynamicLayoutVertexArray;jc={};ic.clear();for(var od=0;od<vd.length;od++){var $d=vd.get(od),Xd=$d.hidden||!$d.crossTileID||$b.allowVerticalPlacement&&!$d.placedOrientation?null:Yc[$d.crossTileID];if(Xd){var xe=new a.Point($d.anchorX,$d.anchorY),ye=B(xe,Ec?kc:Cb),ue=.5+Fc.cameraToCenterDistance/ye.signedDistanceFromCamera*
.5,Nd=fd.evaluateSizeForFeature($b.textSizeData,dd,$d)*ue/a.ONE_EM;Ec&&(Nd*=$b.tilePixelRatio/hd);ue=Xd.anchor;var ie=Xd.width,Le=Xd.height,se=Xd.textOffset;Xd=Xd.textBoxScale;var Ne=a.getAnchorAlignment(ue);ie*=-(Ne.horizontalAlign-.5);Le*=-(Ne.verticalAlign-.5);ue=a.evaluateVariableOffset(ue,se);ue=new a.Point((ie/Xd+ue[0])*Nd,(Le/Xd+ue[1])*Nd);xe=Ec?B(xe.add(ue),Cb).point:ye.point.add(gc?ue.rotate(-Fc.angle):ue);ye=$b.allowVerticalPlacement&&$d.placedOrientation===a.WritingMode.vertical?Math.PI/
2:0;for(ue=0;ue<$d.numGlyphs;ue++)a.addDynamicAttributes(ic,xe,ye);sd&&0<=$d.associatedIconIndex&&(jc[$d.associatedIconIndex]={shiftedAnchor:xe,angle:ye})}else M($d.numGlyphs,ic)}if(sd){bc.clear();gc=$b.icon.placedSymbolArray;for(Ec=0;Ec<gc.length;Ec++)if(Yc=gc.get(Ec),Yc.hidden)M(Yc.numGlyphs,bc);else if(fd=jc[Ec])for(Fc=0;Fc<Yc.numGlyphs;Fc++)a.addDynamicAttributes(bc,fd.shiftedAnchor,fd.angle);else M(Yc.numGlyphs,bc);$b.icon.dynamicLayoutVertexBuffer.updateData(bc)}$b.text.dynamicLayoutVertexBuffer.updateData(ic)}}}}0!==
W.paint.get("icon-opacity").constantOr(1)&&ja(V,Y,W,ca,!1,W.paint.get("icon-translate"),W.paint.get("icon-translate-anchor"),W.layout.get("icon-rotation-alignment"),W.layout.get("icon-pitch-alignment"),W.layout.get("icon-keep-upright"),Fa,Qa);0!==W.paint.get("text-opacity").constantOr(1)&&ja(V,Y,W,ca,!0,W.paint.get("text-translate"),W.paint.get("text-translate-anchor"),W.layout.get("text-rotation-alignment"),W.layout.get("text-pitch-alignment"),W.layout.get("text-keep-upright"),Fa,Qa);Y.map.showCollisionBoxes&&
(ha(V,Y,W,ca,W.paint.get("text-translate"),W.paint.get("text-translate-anchor"),!0),ha(V,Y,W,ca,W.paint.get("icon-translate"),W.paint.get("icon-translate-anchor"),!1))}},circle:function(V,Y,W,ca){if("translucent"===V.renderPass){var ua=W.paint.get("circle-opacity"),Fa=W.paint.get("circle-stroke-width"),Qa=W.paint.get("circle-stroke-opacity"),Za=void 0!==W.layout.get("circle-sort-key").constantOr(1);if(0!==ua.constantOr(1)||0!==Fa.constantOr(1)&&0!==Qa.constantOr(1)){ua=V.context;Fa=ua.gl;Qa=V.depthModeForSublayer(0,
ud.ReadOnly);for(var wb=td.disabled,Db=V.colorModeForRenderPass(),Eb=[],kc=0;kc<ca.length;kc++){var jc=ca[kc],$b=Y.getTile(jc),ic=$b.getBucket(W);if(ic){var gc=ic.programConfigurations.get(W.id);jc={programConfiguration:gc,program:V.useProgram("circle",gc),layoutVertexBuffer:ic.layoutVertexBuffer,indexBuffer:ic.indexBuffer,uniformValues:Eh(V,jc,$b,W)};if(Za)for($b=0,ic=ic.segments.get();$b<ic.length;$b+=1)gc=ic[$b],Eb.push({segments:new a.SegmentVector([gc]),sortKey:gc.sortKey,state:jc});else Eb.push({segments:ic.segments,
sortKey:0,state:jc})}}Za&&Eb.sort(function(Cb,bc){return Cb.sortKey-bc.sortKey});for(Y=0;Y<Eb.length;Y+=1)ca=Eb[Y],Za=ca.state,Za.program.draw(ua,Fa.TRIANGLES,Qa,wb,Db,be.disabled,Za.uniformValues,W.id,Za.layoutVertexBuffer,Za.indexBuffer,ca.segments,W.paint,V.transform.zoom,Za.programConfiguration)}}},heatmap:function(V,Y,W,ca){if(0!==W.paint.get("heatmap-opacity"))if("offscreen"===V.renderPass){var ua=V.context,Fa=ua.gl,Qa=td.disabled,Za=new Sd([Fa.ONE,Fa.ONE],a.Color.transparent,[!0,!0,!0,!0]);
!function($b,ic,gc){var Cb=$b.gl;$b.activeTexture.set(Cb.TEXTURE1);$b.viewport.set([0,0,ic.width/4,ic.height/4]);var bc=gc.heatmapFbo;if(bc)Cb.bindTexture(Cb.TEXTURE_2D,bc.colorAttachment.get()),$b.bindFramebuffer.set(bc.framebuffer);else{var Ec=Cb.createTexture();Cb.bindTexture(Cb.TEXTURE_2D,Ec);Cb.texParameteri(Cb.TEXTURE_2D,Cb.TEXTURE_WRAP_S,Cb.CLAMP_TO_EDGE);Cb.texParameteri(Cb.TEXTURE_2D,Cb.TEXTURE_WRAP_T,Cb.CLAMP_TO_EDGE);Cb.texParameteri(Cb.TEXTURE_2D,Cb.TEXTURE_MIN_FILTER,Cb.LINEAR);Cb.texParameteri(Cb.TEXTURE_2D,
Cb.TEXTURE_MAG_FILTER,Cb.LINEAR);gc=bc=gc.heatmapFbo=$b.createFramebuffer(ic.width/4,ic.height/4,!1);Cb=$b.gl;Cb.texImage2D(Cb.TEXTURE_2D,0,Cb.RGBA,ic.width/4,ic.height/4,0,Cb.RGBA,$b.extRenderToTextureHalfFloat?$b.extTextureHalfFloat.HALF_FLOAT_OES:Cb.UNSIGNED_BYTE,null);gc.colorAttachment.set(Ec)}}(ua,V,W);ua.clear({color:a.Color.transparent});for(var wb=0;wb<ca.length;wb++){var Db=ca[wb];if(!Y.hasRenderableParent(Db)){var Eb=Y.getTile(Db),kc=Eb.getBucket(W);if(kc){var jc=kc.programConfigurations.get(W.id);
V.useProgram("heatmap",jc).draw(ua,Fa.TRIANGLES,ud.disabled,Qa,Za,be.disabled,Pj(Db.posMatrix,Eb,V.transform.zoom,W.paint.get("heatmap-intensity")),W.id,kc.layoutVertexBuffer,kc.indexBuffer,kc.segments,W.paint,V.transform.zoom,jc)}}}ua.viewport.set([0,0,V.width,V.height])}else"translucent"===V.renderPass&&(V.context.setColorMode(V.colorModeForRenderPass()),function($b,ic){var gc=$b.context,Cb=gc.gl,bc=ic.heatmapFbo;if(bc){gc.activeTexture.set(Cb.TEXTURE0);Cb.bindTexture(Cb.TEXTURE_2D,bc.colorAttachment.get());
gc.activeTexture.set(Cb.TEXTURE1);(bc=ic.colorRampTexture)||(bc=ic.colorRampTexture=new a.Texture(gc,ic.colorRamp,Cb.RGBA));bc.bind(Cb.LINEAR,Cb.CLAMP_TO_EDGE);bc=$b.useProgram("heatmapTexture");var Ec=bc.draw;Cb=Cb.TRIANGLES;var Yc=ud.disabled,fd=td.disabled,Fc=$b.colorModeForRenderPass(),hd=be.disabled;var dd=a.create();a.ortho(dd,0,$b.width,$b.height,0,0,1);var sd=$b.context.gl;dd={u_matrix:dd,u_world:[sd.drawingBufferWidth,sd.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:ic.paint.get("heatmap-opacity")};
Ec.call(bc,gc,Cb,Yc,fd,Fc,hd,dd,ic.id,$b.viewportBuffer,$b.quadTriangleIndexBuffer,$b.viewportSegments,ic.paint,$b.transform.zoom)}}(V,W))},line:function(V,Y,W,ca){if("translucent"===V.renderPass){var ua=W.paint.get("line-opacity"),Fa=W.paint.get("line-width");if(0!==ua.constantOr(1)&&0!==Fa.constantOr(1)){ua=V.depthModeForSublayer(0,ud.ReadOnly);Fa=V.colorModeForRenderPass();var Qa=W.paint.get("line-dasharray"),Za=W.paint.get("line-pattern"),wb=Za.constantOr(1),Db=W.paint.get("line-gradient"),Eb=
W.getCrossfadeParameters(),kc=wb?"linePattern":Qa?"lineSDF":Db?"lineGradient":"line",jc=V.context,$b=jc.gl,ic=!0;if(Db){jc.activeTexture.set($b.TEXTURE0);var gc=W.gradientTexture;if(!W.gradient)return;gc||(gc=W.gradientTexture=new a.Texture(jc,W.gradient,$b.RGBA));gc.bind($b.LINEAR,$b.CLAMP_TO_EDGE)}for(gc=0;gc<ca.length;gc+=1){var Cb=ca[gc],bc=Y.getTile(Cb);if(!wb||bc.patternsLoaded()){var Ec=bc.getBucket(W);if(Ec){var Yc=Ec.programConfigurations.get(W.id),fd=V.context.program.get(),Fc=V.useProgram(kc,
Yc);ic=ic||Fc.program!==fd;var hd=Za.constantOr(null);if(hd&&bc.imageAtlas){var dd=bc.imageAtlas;fd=dd.patternPositions[hd.to.toString()];hd=dd.patternPositions[hd.from.toString()];fd&&hd&&Yc.setConstantPatternPositions(fd,hd)}if(wb){fd=V;hd=bc;dd=W;var sd=Eb,vd=fd.transform,od=1/T(hd,1,vd.tileZoom);fd={u_matrix:fa(fd,hd,dd),u_texsize:hd.imageAtlasTexture.size,u_ratio:1/T(hd,1,vd.zoom),u_device_pixel_ratio:a.browser.devicePixelRatio,u_image:0,u_scale:[od,sd.fromScale,sd.toScale],u_fade:sd.t,u_units_to_pixels:[1/
vd.pixelsToGLUnits[0],1/vd.pixelsToGLUnits[1]]}}else if(Qa){fd=V;hd=bc;dd=W;var $d=Qa;sd=Eb;vd=fd.lineAtlas;od=1/T(hd,1,fd.transform.tileZoom);var Xd="round"===dd.layout.get("line-cap"),xe=vd.getDash($d.from,Xd);$d=vd.getDash($d.to,Xd);Xd=xe.width*sd.fromScale;var ye=$d.width*sd.toScale;fd=a.extend(hi(fd,hd,dd),{u_patternscale_a:[od/Xd,-xe.height/2],u_patternscale_b:[od/ye,-$d.height/2],u_sdfgamma:vd.width/(256*Math.min(Xd,ye)*a.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:xe.y,u_tex_y_b:$d.y,
u_mix:sd.t})}else fd=Db?a.extend(hi(V,bc,W),{u_image:0}):hi(V,bc,W);wb?(jc.activeTexture.set($b.TEXTURE0),bc.imageAtlasTexture.bind($b.LINEAR,$b.CLAMP_TO_EDGE),Yc.updatePaintBuffers(Eb)):Qa&&(ic||V.lineAtlas.dirty)&&(jc.activeTexture.set($b.TEXTURE0),V.lineAtlas.bind(jc));Fc.draw(jc,$b.TRIANGLES,ua,V.stencilModeForClipping(Cb),Fa,be.disabled,fd,W.id,Ec.layoutVertexBuffer,Ec.indexBuffer,Ec.segments,W.paint,V.transform.zoom,Yc);ic=!1}}}}}},fill:function(V,Y,W,ca){var ua=W.paint.get("fill-color"),Fa=
W.paint.get("fill-opacity");if(0!==Fa.constantOr(1)){var Qa=V.colorModeForRenderPass(),Za=W.paint.get("fill-pattern");ua=V.opaquePassEnabledForLayer()&&!Za.constantOr(1)&&1===ua.constantOr(a.Color.transparent).a&&1===Fa.constantOr(0)?"opaque":"translucent";V.renderPass===ua&&(ua=V.depthModeForSublayer(1,"opaque"===V.renderPass?ud.ReadWrite:ud.ReadOnly),ma(V,Y,W,ca,ua,Qa,!1));"translucent"===V.renderPass&&W.paint.get("fill-antialias")&&(ua=V.depthModeForSublayer(W.getPaintProperty("fill-outline-color")?
2:0,ud.ReadOnly),ma(V,Y,W,ca,ua,Qa,!0))}},"fill-extrusion":function(V,Y,W,ca){var ua=W.paint.get("fill-extrusion-opacity");if(0!==ua&&"translucent"===V.renderPass){var Fa=new ud(V.context.gl.LEQUAL,ud.ReadWrite,V.depthRangeFor3D);1!==ua||W.paint.get("fill-extrusion-pattern").constantOr(1)?(qa(V,Y,W,ca,Fa,td.disabled,Sd.disabled),qa(V,Y,W,ca,Fa,V.stencilModeFor3D(),V.colorModeForRenderPass())):(ua=V.colorModeForRenderPass(),qa(V,Y,W,ca,Fa,td.disabled,ua))}},hillshade:function(V,Y,W,ca){if("offscreen"===
V.renderPass||"translucent"===V.renderPass){var ua=V.context,Fa=Y.getSource().maxzoom,Qa=V.depthModeForSublayer(0,ud.ReadOnly),Za=V.colorModeForRenderPass(),wb="translucent"===V.renderPass?V.stencilConfigForOverlap(ca):[{},ca];ca=wb[0];var Db=0;for(wb=wb[1];Db<wb.length;Db+=1){var Eb=wb[Db],kc=Y.getTile(Eb);if(kc.needsHillshadePrepare&&"offscreen"===V.renderPass){var jc=V,$b=kc,ic=W;Eb=Fa;var gc=Qa;kc=td.disabled;var Cb=Za,bc=jc.context,Ec=bc.gl,Yc=$b.dem;if(Yc&&Yc.data){var fd=Yc.dim,Fc=Yc.stride,
hd=Yc.getPixels();(bc.activeTexture.set(Ec.TEXTURE1),bc.pixelStoreUnpackPremultiplyAlpha.set(!1),$b.demTexture=$b.demTexture||jc.getTileTexture(Fc),$b.demTexture)?(Fc=$b.demTexture,Fc.update(hd,{premultiply:!1}),Fc.bind(Ec.NEAREST,Ec.CLAMP_TO_EDGE)):($b.demTexture=new a.Texture(bc,hd,Ec.RGBA,{premultiply:!1}),$b.demTexture.bind(Ec.NEAREST,Ec.CLAMP_TO_EDGE));bc.activeTexture.set(Ec.TEXTURE0);hd=$b.fbo;hd||(Fc=new a.Texture(bc,{width:fd,height:fd,data:null},Ec.RGBA),Fc.bind(Ec.LINEAR,Ec.CLAMP_TO_EDGE),
(hd=$b.fbo=bc.createFramebuffer(fd,fd,!0)).colorAttachment.set(Fc.texture));bc.bindFramebuffer.set(hd.framebuffer);bc.viewport.set([0,0,fd,fd]);fd=jc.useProgram("hillshadePrepare");hd=fd.draw;Ec=Ec.TRIANGLES;Fc=be.disabled;var dd=$b.tileID,sd=Yc.stride,vd=a.create();Eb=(a.ortho(vd,0,a.EXTENT,-a.EXTENT,0,0,1),a.translate(vd,vd,[0,-a.EXTENT,0]),{u_matrix:vd,u_image:1,u_dimension:[sd,sd],u_zoom:dd.overscaledZ,u_maxzoom:Eb,u_unpack:Yc.getUnpackVector()});hd.call(fd,bc,Ec,gc,kc,Cb,Fc,Eb,ic.id,jc.rasterBoundsBuffer,
jc.quadTriangleIndexBuffer,jc.rasterBoundsSegments);$b.needsHillshadePrepare=!1}}else if("translucent"===V.renderPass&&(ic=$b=jc=void 0,gc=V,bc=kc,kc=W,Cb=Qa,Eb=ca[Eb.overscaledZ],Yc=Za,Ec=gc.context,fd=Ec.gl,Fc=bc.fbo)){hd=gc.useProgram("hillshade");Ec.activeTexture.set(fd.TEXTURE0);fd.bindTexture(fd.TEXTURE_2D,Fc.colorAttachment.get());Fc=kc.paint.get("hillshade-shadow-color");dd=kc.paint.get("hillshade-highlight-color");sd=kc.paint.get("hillshade-accent-color");vd=kc.paint.get("hillshade-illumination-direction")*
(Math.PI/180);"viewport"===kc.paint.get("hillshade-illumination-anchor")&&(vd-=gc.transform.angle);var od=!gc.options.moving;bc={u_matrix:gc.transform.calculatePosMatrix(bc.tileID.toUnwrapped(),od),u_image:0,u_latrange:(ic=bc.tileID,$b=Math.pow(2,ic.canonical.z),jc=ic.canonical.y,[(new a.MercatorCoordinate(0,jc/$b)).toLngLat().lat,(new a.MercatorCoordinate(0,(jc+1)/$b)).toLngLat().lat]),u_light:[kc.paint.get("hillshade-exaggeration"),vd],u_shadow:Fc,u_highlight:dd,u_accent:sd};hd.draw(Ec,fd.TRIANGLES,
Cb,Eb,Yc,be.disabled,bc,kc.id,gc.rasterBoundsBuffer,gc.quadTriangleIndexBuffer,gc.rasterBoundsSegments)}}ua.viewport.set([0,0,V.width,V.height])}},raster:function(V,Y,W,ca){if("translucent"===V.renderPass&&0!==W.paint.get("raster-opacity")&&ca.length){var ua=V.context,Fa=ua.gl,Qa=Y.getSource(),Za=V.useProgram("raster"),wb=V.colorModeForRenderPass(),Db=Qa instanceof kb?[{},ca]:V.stencilConfigForOverlap(ca);ca=Db[0];Db=Db[1];for(var Eb=Db[Db.length-1].overscaledZ,kc=!V.options.moving,jc=0;jc<Db.length;jc+=
1){var $b=Db[jc],ic=V.depthModeForSublayer($b.overscaledZ-Eb,1===W.paint.get("raster-opacity")?ud.ReadWrite:ud.ReadOnly,Fa.LESS),gc=Y.getTile($b),Cb=V.transform.calculatePosMatrix($b.toUnwrapped(),kc);gc.registerFadeDuration(W.paint.get("raster-fade-duration"));var bc=Y.findLoadedParent($b,0);var Ec=gc,Yc=bc,fd=Y,Fc=V.transform;var hd=W.paint.get("raster-fade-duration");if(0<hd){var dd=a.browser.now(),sd=(dd-Ec.timeAdded)/hd;hd=Yc?(dd-Yc.timeAdded)/hd:-1;fd=fd.getSource();Fc=Fc.coveringZoomLevel({tileSize:fd.tileSize,
roundZoom:fd.roundZoom});Fc=(Fc=!Yc||Math.abs(Yc.tileID.overscaledZ-Fc)>Math.abs(Ec.tileID.overscaledZ-Fc))&&Ec.refreshedUponExpiration?1:a.clamp(Fc?sd:1-hd,0,1);hd=(Ec.refreshedUponExpiration&&1<=sd&&(Ec.refreshedUponExpiration=!1),Yc?{opacity:1,mix:1-Fc}:{opacity:Fc,mix:0})}else hd={opacity:1,mix:0};sd=Yc=void 0;Ec="nearest"===W.paint.get("raster-resampling")?Fa.NEAREST:Fa.LINEAR;ua.activeTexture.set(Fa.TEXTURE0);gc.texture.bind(Ec,Fa.CLAMP_TO_EDGE,Fa.LINEAR_MIPMAP_NEAREST);ua.activeTexture.set(Fa.TEXTURE1);
bc?(bc.texture.bind(Ec,Fa.CLAMP_TO_EDGE,Fa.LINEAR_MIPMAP_NEAREST),Yc=Math.pow(2,bc.tileID.overscaledZ-gc.tileID.overscaledZ),sd=[gc.tileID.canonical.x*Yc%1,gc.tileID.canonical.y*Yc%1]):gc.texture.bind(Ec,Fa.CLAMP_TO_EDGE,Fa.LINEAR_MIPMAP_NEAREST);bc=Fc=void 0;Ec=W;gc=sd||[0,0];Yc=Yc||1;sd=hd.mix;hd=hd.opacity*Ec.paint.get("raster-opacity");fd=Ec.paint.get("raster-brightness-min");dd=Ec.paint.get("raster-brightness-max");var vd=(Fc=Ec.paint.get("raster-saturation"),0<Fc?1-1/(1.001-Fc):-Fc);Fc=(bc=
Ec.paint.get("raster-contrast"),0<bc?1/(1-bc):1+bc);Ec=Ec.paint.get("raster-hue-rotate");Ec*=Math.PI/180;bc=Math.sin(Ec);Ec=Math.cos(Ec);Cb={u_matrix:Cb,u_tl_parent:gc,u_scale_parent:Yc,u_buffer_scale:1,u_fade_t:sd,u_opacity:hd,u_image0:0,u_image1:1,u_brightness_low:fd,u_brightness_high:dd,u_saturation_factor:vd,u_contrast_factor:Fc,u_spin_weights:[(2*Ec+1)/3,(-Math.sqrt(3)*bc-Ec+1)/3,(Math.sqrt(3)*bc-Ec+1)/3]};Qa instanceof kb?Za.draw(ua,Fa.TRIANGLES,ic,td.disabled,wb,be.disabled,Cb,W.id,Qa.boundsBuffer,
V.quadTriangleIndexBuffer,Qa.boundsSegments):Za.draw(ua,Fa.TRIANGLES,ic,ca[$b.overscaledZ],wb,be.disabled,Cb,W.id,V.rasterBoundsBuffer,V.quadTriangleIndexBuffer,V.rasterBoundsSegments)}}},background:function(V,Y,W){Y=W.paint.get("background-color");var ca=W.paint.get("background-opacity");if(0!==ca){var ua=V.context,Fa=ua.gl,Qa=V.transform,Za=Qa.tileSize,wb=W.paint.get("background-pattern");if(!V.isPatternMissing(wb)){var Db=!wb&&1===Y.a&&1===ca&&V.opaquePassEnabledForLayer()?"opaque":"translucent";
if(V.renderPass===Db){var Eb=td.disabled;Db=V.depthModeForSublayer(0,"opaque"===Db?ud.ReadWrite:ud.ReadOnly);var kc=V.colorModeForRenderPass(),jc=V.useProgram(wb?"backgroundPattern":"background");Qa=Qa.coveringTiles({tileSize:Za});wb&&(ua.activeTexture.set(Fa.TEXTURE0),V.imageManager.bind(V.context));for(var $b=W.getCrossfadeParameters(),ic=0;ic<Qa.length;ic+=1){var gc=Qa[ic],Cb=V.transform.calculatePosMatrix(gc.toUnwrapped());if(wb){var bc=ca;var Ec=V;var Yc=wb,fd={tileID:gc,tileSize:Za},Fc=$b;gc=
a;var hd=gc.extend,dd=Ec.imageManager.getPattern(Yc.from.toString());Yc=Ec.imageManager.getPattern(Yc.to.toString());var sd=Ec.imageManager.getPixelSize(),vd=Math.pow(2,fd.tileID.overscaledZ),od=fd.tileSize*Math.pow(2,Ec.transform.tileZoom)/vd;vd=od*(fd.tileID.canonical.x+fd.tileID.wrap*vd);od*=fd.tileID.canonical.y;Ec={u_image:0,u_pattern_tl_a:dd.tl,u_pattern_br_a:dd.br,u_pattern_tl_b:Yc.tl,u_pattern_br_b:Yc.br,u_texsize:[sd.width,sd.height],u_mix:Fc.t,u_pattern_size_a:dd.displaySize,u_pattern_size_b:Yc.displaySize,
u_scale_a:Fc.fromScale,u_scale_b:Fc.toScale,u_tile_units_to_pixels:1/T(fd,1,Ec.transform.tileZoom),u_pixel_coord_upper:[vd>>16,od>>16],u_pixel_coord_lower:[65535&vd,65535&od]};Cb=hd.call(gc,Ec,{u_matrix:Cb,u_opacity:bc})}else Cb={u_matrix:Cb,u_opacity:ca,u_color:Y};jc.draw(ua,Fa.TRIANGLES,Db,Eb,kc,be.disabled,Cb,W.id,V.tileExtentBuffer,V.quadTriangleIndexBuffer,V.tileExtentSegments)}}}}},debug:function(V,Y,W){for(var ca=0;ca<W.length;ca++){var ua=V,Fa=Y,Qa=W[ca],Za=ua.context,wb=Za.gl,Db=Qa.posMatrix,
Eb=ua.useProgram("debug"),kc=ud.disabled,jc=td.disabled,$b=ua.colorModeForRenderPass();Za.activeTexture.set(wb.TEXTURE0);ua.emptyTexture.bind(wb.LINEAR,wb.CLAMP_TO_EDGE);Eb.draw(Za,wb.LINE_STRIP,kc,jc,$b,be.disabled,Fh(Db,a.Color.red),"$debug",ua.debugBuffer,ua.tileBorderIndexBuffer,ua.debugSegments);$b=Fa.getTileByID(Qa.key).latestRawTileData;$b=Math.floor(($b&&$b.byteLength||0)/1024);Fa=Fa.getTile(Qa).tileSize;Fa=512/Math.min(Fa,512)*(Qa.overscaledZ/ua.transform.zoom)*.5;var ic=Qa.canonical.toString();
Qa.overscaledZ!==Qa.canonical.z&&(ic+=" => "+Qa.overscaledZ);Qa=ic+" "+$b+"kb";ua.initDebugOverlayCanvas();$b=ua.debugOverlayCanvas;ic=ua.context.gl;var gc=ua.debugOverlayCanvas.getContext("2d");gc.clearRect(0,0,$b.width,$b.height);gc.shadowColor="white";gc.shadowBlur=2;gc.lineWidth=1.5;gc.strokeStyle="white";gc.textBaseline="top";gc.font="bold 36px Open Sans, sans-serif";gc.fillText(Qa,5,5);gc.strokeText(Qa,5,5);ua.debugOverlayTexture.update($b);ua.debugOverlayTexture.bind(ic.LINEAR,ic.CLAMP_TO_EDGE);
Eb.draw(Za,wb.TRIANGLES,kc,jc,Sd.alphaBlended,be.disabled,Fh(Db,a.Color.transparent,Fa),"$debug",ua.debugBuffer,ua.quadTriangleIndexBuffer,ua.debugSegments)}},custom:function(V,Y,W){Y=V.context;W=W.implementation;if("offscreen"===V.renderPass){var ca=W.prerender;ca&&(V.setCustomLayerDefaults(),Y.setColorMode(V.colorModeForRenderPass()),ca.call(W,Y.gl,V.transform.customLayerMatrix()),Y.setDirty(),V.setBaseState())}else"translucent"===V.renderPass&&(V.setCustomLayerDefaults(),Y.setColorMode(V.colorModeForRenderPass()),
Y.setStencilMode(td.disabled),ca="3d"===W.renderingMode?new ud(V.context.gl.LEQUAL,ud.ReadWrite,V.depthRangeFor3D):V.depthModeForSublayer(0,ud.ReadOnly),Y.setDepthMode(ca),W.render(Y.gl,V.transform.customLayerMatrix()),Y.setDirty(),V.setBaseState(),Y.bindFramebuffer.set(null))}},Pe=function(V,Y){this.context=new Ld(V);this.transform=Y;this._tileTextures={};this.setup();this.numSublayers=te.maxUnderzooming+te.maxOverzooming+1;this.depthEpsilon=1/Math.pow(2,16);this.crossTileSymbolIndex=new yc;this.gpuTimers=
{}};Pe.prototype.resize=function(V,Y){if(this.width=V*a.browser.devicePixelRatio,this.height=Y*a.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(V=0,Y=this.style._order;V<Y.length;V+=1)this.style._layers[Y[V]].resize()};Pe.prototype.setup=function(){var V=this.context,Y=new a.StructArrayLayout2i4;Y.emplaceBack(0,0);Y.emplaceBack(a.EXTENT,0);Y.emplaceBack(0,a.EXTENT);Y.emplaceBack(a.EXTENT,a.EXTENT);this.tileExtentBuffer=V.createVertexBuffer(Y,nd.members);
this.tileExtentSegments=a.SegmentVector.simpleSegment(0,0,4,2);Y=new a.StructArrayLayout2i4;Y.emplaceBack(0,0);Y.emplaceBack(a.EXTENT,0);Y.emplaceBack(0,a.EXTENT);Y.emplaceBack(a.EXTENT,a.EXTENT);this.debugBuffer=V.createVertexBuffer(Y,nd.members);this.debugSegments=a.SegmentVector.simpleSegment(0,0,4,5);Y=new a.StructArrayLayout4i8;Y.emplaceBack(0,0,0,0);Y.emplaceBack(a.EXTENT,0,a.EXTENT,0);Y.emplaceBack(0,a.EXTENT,0,a.EXTENT);Y.emplaceBack(a.EXTENT,a.EXTENT,a.EXTENT,a.EXTENT);this.rasterBoundsBuffer=
V.createVertexBuffer(Y,Xa.members);this.rasterBoundsSegments=a.SegmentVector.simpleSegment(0,0,4,2);Y=new a.StructArrayLayout2i4;Y.emplaceBack(0,0);Y.emplaceBack(1,0);Y.emplaceBack(0,1);Y.emplaceBack(1,1);this.viewportBuffer=V.createVertexBuffer(Y,nd.members);this.viewportSegments=a.SegmentVector.simpleSegment(0,0,4,2);Y=new a.StructArrayLayout1ui2;Y.emplaceBack(0);Y.emplaceBack(1);Y.emplaceBack(3);Y.emplaceBack(2);Y.emplaceBack(0);this.tileBorderIndexBuffer=V.createIndexBuffer(Y);Y=new a.StructArrayLayout3ui6;
Y.emplaceBack(0,1,2);Y.emplaceBack(2,1,3);this.quadTriangleIndexBuffer=V.createIndexBuffer(Y);this.emptyTexture=new a.Texture(V,{width:1,height:1,data:new Uint8Array([0,0,0,0])},V.gl.RGBA);V=this.context.gl;this.stencilClearMode=new td({func:V.ALWAYS,mask:0},0,255,V.ZERO,V.ZERO,V.ZERO)};Pe.prototype.clearStencil=function(){var V=this.context,Y=V.gl;this.nextStencilID=1;this.currentStencilSource=void 0;var W=a.create();a.ortho(W,0,this.width,this.height,0,0,1);a.scale(W,W,[Y.drawingBufferWidth,Y.drawingBufferHeight,
0]);this.useProgram("clippingMask").draw(V,Y.TRIANGLES,ud.disabled,this.stencilClearMode,Sd.disabled,be.disabled,{u_matrix:W},"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)};Pe.prototype._renderTileClippingMasks=function(V,Y){if(this.currentStencilSource!==V.source&&V.isTileClipped()&&Y&&Y.length){this.currentStencilSource=V.source;V=this.context;var W=V.gl;256<this.nextStencilID+Y.length&&this.clearStencil();V.setColorMode(Sd.disabled);V.setDepthMode(ud.disabled);
var ca=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var ua=0;ua<Y.length;ua+=1){var Fa=Y[ua],Qa=this._tileClippingMaskIDs[Fa.key]=this.nextStencilID++;ca.draw(V,W.TRIANGLES,ud.disabled,new td({func:W.ALWAYS,mask:0},Qa,255,W.KEEP,W.KEEP,W.REPLACE),Sd.disabled,be.disabled,{u_matrix:Fa.posMatrix},"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}};Pe.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0;256<this.nextStencilID+
1&&this.clearStencil();var V=this.nextStencilID++,Y=this.context.gl;return new td({func:Y.NOTEQUAL,mask:255},V,255,Y.KEEP,Y.KEEP,Y.REPLACE)};Pe.prototype.stencilModeForClipping=function(V){var Y=this.context.gl;return new td({func:Y.EQUAL,mask:255},this._tileClippingMaskIDs[V.key],0,Y.KEEP,Y.KEEP,Y.REPLACE)};Pe.prototype.stencilConfigForOverlap=function(V){var Y=this.context.gl;V=V.sort(function(Qa,Za){return Za.overscaledZ-Qa.overscaledZ});var W=V[V.length-1].overscaledZ,ca=V[0].overscaledZ-W+1;
if(1<ca){this.currentStencilSource=void 0;256<this.nextStencilID+ca&&this.clearStencil();var ua={};for(var Fa=0;Fa<ca;Fa++)ua[Fa+W]=new td({func:Y.GEQUAL,mask:255},Fa+this.nextStencilID,255,Y.KEEP,Y.KEEP,Y.REPLACE);return this.nextStencilID+=ca,[ua,V]}return[(ua={},ua[W]=td.disabled,ua),V]};Pe.prototype.colorModeForRenderPass=function(){var V=this.context.gl;return this._showOverdrawInspector?new Sd([V.CONSTANT_COLOR,V.ONE],new a.Color(.125,.125,.125,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?Sd.unblended:
Sd.alphaBlended};Pe.prototype.depthModeForSublayer=function(V,Y,W){if(!this.opaquePassEnabledForLayer())return ud.disabled;V=1-((1+this.currentLayer)*this.numSublayers+V)*this.depthEpsilon;return new ud(W||this.context.gl.LEQUAL,Y,[V,V])};Pe.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff};Pe.prototype.render=function(V,Y){var W=this;this.style=V;this.options=Y;this.lineAtlas=V.lineAtlas;this.imageManager=V.imageManager;this.glyphManager=V.glyphManager;
this.symbolFadeChange=V.placement.symbolFadeChange(a.browser.now());this.imageManager.beginFrame();var ca=this.style._order,ua=this.style.sourceCaches;for(wb in ua){var Fa=ua[wb];Fa.used&&Fa.prepare(this.context)}var Qa,Za;var wb={};Fa={};var Db={},Eb;for(Eb in ua){var kc=ua[Eb];wb[Eb]=kc.getVisibleCoordinates();Fa[Eb]=wb[Eb].slice().reverse();Db[Eb]=kc.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(Eb=0;Eb<ca.length;Eb++)if(this.style._layers[ca[Eb]].is3D()){this.opaquePassCutoff=
Eb;break}this.renderPass="offscreen";for(Eb=0;Eb<ca.length;Eb+=1)if(kc=this.style._layers[ca[Eb]],kc.hasOffscreenPass()&&!kc.isHidden(this.transform.zoom)){var jc=Fa[kc.source];("custom"===kc.type||jc.length)&&this.renderLayer(this,ua[kc.source],kc,jc)}this.context.bindFramebuffer.set(null);this.context.clear({color:Y.showOverdrawInspector?a.Color.black:a.Color.transparent,depth:1});this.clearStencil();this._showOverdrawInspector=Y.showOverdrawInspector;this.depthRangeFor3D=[0,1-(V._order.length+
2)*this.numSublayers*this.depthEpsilon];this.renderPass="opaque";for(this.currentLayer=ca.length-1;0<=this.currentLayer;this.currentLayer--)V=this.style._layers[ca[this.currentLayer]],Y=ua[V.source],Eb=wb[V.source],this._renderTileClippingMasks(V,Eb),this.renderLayer(this,Y,V,Eb);this.renderPass="translucent";for(this.currentLayer=0;this.currentLayer<ca.length;this.currentLayer++)V=this.style._layers[ca[this.currentLayer]],Y=ua[V.source],Eb=("symbol"===V.type?Db:Fa)[V.source],this._renderTileClippingMasks(V,
wb[V.source]),this.renderLayer(this,Y,V,Eb);this.options.showTileBoundaries&&(a.values(this.style._layers).forEach(function($b){$b.source&&!$b.isHidden(W.transform.zoom)&&($b.source!==(Za&&Za.id)&&(Za=W.style.sourceCaches[$b.source]),(!Qa||Qa.getSource().maxzoom<Za.getSource().maxzoom)&&(Qa=Za))}),Qa&&ki.debug(this,Qa,Qa.getVisibleCoordinates()));this.options.showPadding&&function($b){var ic=$b.transform.padding;ka($b,0,$b.transform.height-(ic.top||0)+1.5,$b.transform.width,3,Gh);ka($b,0,(ic.bottom||
0)+1.5,$b.transform.width,3,jh);ka($b,(ic.left||0)-1.5,0,3,$b.transform.height,tg);ka($b,$b.transform.width-(ic.right||0)-1.5,0,3,$b.transform.height,Tj);var gc=$b.transform.centerPoint;ic=gc.x;gc=$b.transform.height-gc.y;ka($b,ic-1,gc-10,2,20,Qg);ka($b,ic-10,gc-1,20,2,Qg);!0}(this);this.context.setDefault()};Pe.prototype.renderLayer=function(V,Y,W,ca){W.isHidden(this.transform.zoom)||("background"===W.type||"custom"===W.type||ca.length)&&(this.id=W.id,this.gpuTimingStart(W),ki[W.type](V,Y,W,ca,this.style.placement.variableOffsets),
this.gpuTimingEnd())};Pe.prototype.gpuTimingStart=function(V){if(this.options.gpuTiming){var Y=this.context.extTimerQuery,W=this.gpuTimers[V.id];W||(W=this.gpuTimers[V.id]={calls:0,cpuTime:0,query:Y.createQueryEXT()});W.calls++;Y.beginQueryEXT(Y.TIME_ELAPSED_EXT,W.query)}};Pe.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var V=this.context.extTimerQuery;V.endQueryEXT(V.TIME_ELAPSED_EXT)}};Pe.prototype.collectGpuTimers=function(){var V=this.gpuTimers;return this.gpuTimers={},V};Pe.prototype.queryGpuTimers=
function(V){var Y={},W;for(W in V){var ca=V[W],ua=this.context.extTimerQuery,Fa=ua.getQueryObjectEXT(ca.query,ua.QUERY_RESULT_EXT)/1E6;ua.deleteQueryEXT(ca.query);Y[W]=Fa}return Y};Pe.prototype.translatePosMatrix=function(V,Y,W,ca,ua){if(!W[0]&&!W[1])return V;var Fa=ua?"map"===ca?this.transform.angle:0:"viewport"===ca?-this.transform.angle:0;Fa&&(ca=Math.sin(Fa),Fa=Math.cos(Fa),W=[W[0]*Fa-W[1]*ca,W[0]*ca+W[1]*Fa]);Y=[ua?W[0]:T(Y,W[0],this.transform.zoom),ua?W[1]:T(Y,W[1],this.transform.zoom),0];W=
new Float32Array(16);return a.translate(W,V,Y),W};Pe.prototype.saveTileTexture=function(V){var Y=this._tileTextures[V.size[0]];Y?Y.push(V):this._tileTextures[V.size[0]]=[V]};Pe.prototype.getTileTexture=function(V){return(V=this._tileTextures[V])&&0<V.length?V.pop():null};Pe.prototype.isPatternMissing=function(V){if(!V)return!1;if(!V.from||!V.to)return!0;var Y=this.imageManager.getPattern(V.from.toString());V=this.imageManager.getPattern(V.to.toString());return!Y||!V};Pe.prototype.useProgram=function(V,
Y){this.cache=this.cache||{};var W=""+V+(Y?Y.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[W]||(this.cache[W]=new Ae(this.context,gi[V],Y,ii[V],this._showOverdrawInspector)),this.cache[W]};Pe.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO();this.context.cullFace.setDefault();this.context.activeTexture.setDefault();this.context.pixelStoreUnpack.setDefault();this.context.pixelStoreUnpackPremultiplyAlpha.setDefault();this.context.pixelStoreUnpackFlipY.setDefault()};
Pe.prototype.setBaseState=function(){var V=this.context.gl;this.context.cullFace.set(!1);this.context.viewport.set([0,0,this.width,this.height]);this.context.blendEquation.set(V.FUNC_ADD)};Pe.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=a.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new a.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))};
Pe.prototype.destroy=function(){this.emptyTexture.destroy();this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var lh=function(V,Y){this.points=V;this.planes=Y};lh.fromInvProjectionMatrix=function(V,Y,W){var ca=Math.pow(2,W),ua=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(Fa){return a.transformMat4([],Fa,V)}).map(function(Fa){return a.scale$1([],Fa,1/Fa[3]/Y*ca)});W=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(Fa){var Qa=
a.sub([],ua[Fa[0]],ua[Fa[1]]),Za=a.sub([],ua[Fa[2]],ua[Fa[1]]);Qa=a.normalize([],a.cross([],Qa,Za));Fa=-a.dot(Qa,ua[Fa[1]]);return Qa.concat(Fa)});return new lh(ua,W)};var Rg=function(V,Y){this.min=V;this.max=Y;this.center=a.scale$2([],a.add([],this.min,this.max),.5)};Rg.prototype.quadrant=function(V){V=[0==V%2,2>V];for(var Y=a.clone$2(this.min),W=a.clone$2(this.max),ca=0;ca<V.length;ca++)Y[ca]=V[ca]?this.min[ca]:this.center[ca],W[ca]=V[ca]?this.center[ca]:this.max[ca];return W[2]=this.max[2],new Rg(Y,
W)};Rg.prototype.distanceX=function(V){return Math.max(Math.min(this.max[0],V[0]),this.min[0])-V[0]};Rg.prototype.distanceY=function(V){return Math.max(Math.min(this.max[1],V[1]),this.min[1])-V[1]};Rg.prototype.intersects=function(V){for(var Y=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],W=!0,ca=0;ca<V.planes.length;ca++){for(var ua=V.planes[ca],Fa=0,Qa=0;Qa<Y.length;Qa++)Fa+=0<=a.dot$1(ua,Y[Qa]);if(0===Fa)return 0;Fa!==
Y.length&&(W=!1)}if(W)return 2;for(Y=0;3>Y;Y++){W=Number.MAX_VALUE;ca=-Number.MAX_VALUE;for(ua=0;ua<V.points.length;ua++)Fa=V.points[ua][Y]-this.min[Y],W=Math.min(W,Fa),ca=Math.max(ca,Fa);if(0>ca||W>this.max[Y]-this.min[Y])return 0}return 1};var Sg=function(V,Y,W,ca){if(void 0===V&&(V=0),void 0===Y&&(Y=0),void 0===W&&(W=0),void 0===ca&&(ca=0),isNaN(V)||0>V||isNaN(Y)||0>Y||isNaN(W)||0>W||isNaN(ca)||0>ca)throw Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=
V;this.bottom=Y;this.left=W;this.right=ca};Sg.prototype.interpolate=function(V,Y,W){return null!=Y.top&&null!=V.top&&(this.top=a.number(V.top,Y.top,W)),null!=Y.bottom&&null!=V.bottom&&(this.bottom=a.number(V.bottom,Y.bottom,W)),null!=Y.left&&null!=V.left&&(this.left=a.number(V.left,Y.left,W)),null!=Y.right&&null!=V.right&&(this.right=a.number(V.right,Y.right,W)),this};Sg.prototype.getCenter=function(V,Y){V=a.clamp((this.left+V-this.right)/2,0,V);Y=a.clamp((this.top+Y-this.bottom)/2,0,Y);return new a.Point(V,
Y)};Sg.prototype.equals=function(V){return this.top===V.top&&this.bottom===V.bottom&&this.left===V.left&&this.right===V.right};Sg.prototype.clone=function(){return new Sg(this.top,this.bottom,this.left,this.right)};Sg.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Fe=function(V,Y,W,ca,ua){this.tileSize=512;this.maxValidLatitude=85.051129;this._renderWorldCopies=void 0===ua||ua;this._minZoom=V||0;this._maxZoom=Y||22;this._minPitch=null==W?0:
W;this._maxPitch=null==ca?60:ca;this.setMaxBounds();this.height=this.width=0;this._center=new a.LngLat(0,0);this.angle=this.zoom=0;this._fov=.6435011087932844;this._pitch=0;this._unmodified=!0;this._edgeInsets=new Sg;this._posMatrixCache={};this._alignedPosMatrixCache={}},Ie={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},
bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Fe.prototype.clone=function(){var V=new Fe(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return V.tileSize=this.tileSize,V.latRange=this.latRange,V.width=this.width,V.height=this.height,V._center=this._center,V.zoom=this.zoom,V.angle=this.angle,
V._fov=this._fov,V._pitch=this._pitch,V._unmodified=this._unmodified,V._edgeInsets=this._edgeInsets.clone(),V._calcMatrices(),V};Ie.minZoom.get=function(){return this._minZoom};Ie.minZoom.set=function(V){this._minZoom!==V&&(this._minZoom=V,this.zoom=Math.max(this.zoom,V))};Ie.maxZoom.get=function(){return this._maxZoom};Ie.maxZoom.set=function(V){this._maxZoom!==V&&(this._maxZoom=V,this.zoom=Math.min(this.zoom,V))};Ie.minPitch.get=function(){return this._minPitch};Ie.minPitch.set=function(V){this._minPitch!==
V&&(this._minPitch=V,this.pitch=Math.max(this.pitch,V))};Ie.maxPitch.get=function(){return this._maxPitch};Ie.maxPitch.set=function(V){this._maxPitch!==V&&(this._maxPitch=V,this.pitch=Math.min(this.pitch,V))};Ie.renderWorldCopies.get=function(){return this._renderWorldCopies};Ie.renderWorldCopies.set=function(V){void 0===V?V=!0:null===V&&(V=!1);this._renderWorldCopies=V};Ie.worldSize.get=function(){return this.tileSize*this.scale};Ie.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))};
Ie.size.get=function(){return new a.Point(this.width,this.height)};Ie.bearing.get=function(){return-this.angle/Math.PI*180};Ie.bearing.set=function(V){V=-a.wrap(V,-180,180)*Math.PI/180;this.angle!==V&&(this._unmodified=!1,this.angle=V,this._calcMatrices(),this.rotationMatrix=a.create$2(),a.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))};Ie.pitch.get=function(){return this._pitch/Math.PI*180};Ie.pitch.set=function(V){V=a.clamp(V,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==V&&
(this._unmodified=!1,this._pitch=V,this._calcMatrices())};Ie.fov.get=function(){return this._fov/Math.PI*180};Ie.fov.set=function(V){V=Math.max(.01,Math.min(60,V));this._fov!==V&&(this._unmodified=!1,this._fov=V/180*Math.PI,this._calcMatrices())};Ie.zoom.get=function(){return this._zoom};Ie.zoom.set=function(V){V=Math.min(Math.max(V,this.minZoom),this.maxZoom);this._zoom!==V&&(this._unmodified=!1,this._zoom=V,this.scale=this.zoomScale(V),this.tileZoom=Math.floor(V),this.zoomFraction=V-this.tileZoom,
this._constrain(),this._calcMatrices())};Ie.center.get=function(){return this._center};Ie.center.set=function(V){V.lat===this._center.lat&&V.lng===this._center.lng||(this._unmodified=!1,this._center=V,this._constrain(),this._calcMatrices())};Ie.padding.get=function(){return this._edgeInsets.toJSON()};Ie.padding.set=function(V){this._edgeInsets.equals(V)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,V,1),this._calcMatrices())};Ie.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,
this.height)};Fe.prototype.isPaddingEqual=function(V){return this._edgeInsets.equals(V)};Fe.prototype.interpolatePadding=function(V,Y,W){this._unmodified=!1;this._edgeInsets.interpolate(V,Y,W);this._constrain();this._calcMatrices()};Fe.prototype.coveringZoomLevel=function(V){V=(V.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/V.tileSize));return Math.max(0,V)};Fe.prototype.getVisibleUnwrappedCoordinates=function(V){var Y=[new a.UnwrappedTileID(0,V)];if(this._renderWorldCopies){var W=
this.pointCoordinate(new a.Point(0,0)),ca=this.pointCoordinate(new a.Point(this.width,0)),ua=this.pointCoordinate(new a.Point(this.width,this.height)),Fa=this.pointCoordinate(new a.Point(0,this.height)),Qa=Math.floor(Math.max(W.x,ca.x,ua.x,Fa.x));for(W=Math.floor(Math.min(W.x,ca.x,ua.x,Fa.x))-1;W<=Qa+1;W++)0!==W&&Y.push(new a.UnwrappedTileID(W,V))}return Y};Fe.prototype.coveringTiles=function(V){var Y=this.coveringZoomLevel(V),W=Y;if(void 0!==V.minzoom&&Y<V.minzoom)return[];void 0!==V.maxzoom&&Y>
V.maxzoom&&(Y=V.maxzoom);var ca=a.MercatorCoordinate.fromLngLat(this.center),ua=Math.pow(2,Y);ca=[ua*ca.x,ua*ca.y,0];var Fa=lh.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,Y),Qa=V.minzoom||0;60>=this.pitch&&.1>this._edgeInsets.top&&(Qa=Y);var Za=function(gc){return{aabb:new Rg([gc*ua,0,0],[(gc+1)*ua,ua,0]),zoom:0,x:0,y:0,wrap:gc,fullyVisible:!1}},wb=[],Db=[],Eb=Y;V=V.reparseOverscaled?W:Y;if(this._renderWorldCopies)for(Y=1;3>=Y;Y++)wb.push(Za(-Y)),wb.push(Za(Y));for(wb.push(Za(0));0<
wb.length;){Za=wb.pop();Y=Za.x;W=Za.y;var kc=Za.fullyVisible;if(!kc){kc=Za.aabb.intersects(Fa);if(0===kc)continue;kc=2===kc}var jc=Za.aabb.distanceX(ca),$b=Za.aabb.distanceY(ca);jc=Math.max(Math.abs(jc),Math.abs($b));if(Za.zoom===Eb||jc>3+(1<<Eb-Za.zoom)-2&&Za.zoom>=Qa)Db.push({tileID:new a.OverscaledTileID(Za.zoom===Eb?V:Za.zoom,Za.wrap,Za.zoom,Y,W),distanceSq:a.sqrLen([ca[0]-.5-Y,ca[1]-.5-W])});else for(jc=0;4>jc;jc++){$b=(Y<<1)+jc%2;var ic=(W<<1)+(jc>>1);wb.push({aabb:Za.aabb.quadrant(jc),zoom:Za.zoom+
1,x:$b,y:ic,wrap:Za.wrap,fullyVisible:kc})}}return Db.sort(function(gc,Cb){return gc.distanceSq-Cb.distanceSq}).map(function(gc){return gc.tileID})};Fe.prototype.resize=function(V,Y){this.width=V;this.height=Y;this.pixelsToGLUnits=[2/V,-2/Y];this._constrain();this._calcMatrices()};Ie.unmodified.get=function(){return this._unmodified};Fe.prototype.zoomScale=function(V){return Math.pow(2,V)};Fe.prototype.scaleZoom=function(V){return Math.log(V)/Math.LN2};Fe.prototype.project=function(V){var Y=a.clamp(V.lat,
-this.maxValidLatitude,this.maxValidLatitude);return new a.Point(a.mercatorXfromLng(V.lng)*this.worldSize,a.mercatorYfromLat(Y)*this.worldSize)};Fe.prototype.unproject=function(V){return(new a.MercatorCoordinate(V.x/this.worldSize,V.y/this.worldSize)).toLngLat()};Ie.point.get=function(){return this.project(this.center)};Fe.prototype.setLocationAtPoint=function(V,Y){Y=this.pointCoordinate(Y);var W=this.pointCoordinate(this.centerPoint);V=this.locationCoordinate(V);V=new a.MercatorCoordinate(V.x-(Y.x-
W.x),V.y-(Y.y-W.y));this.center=this.coordinateLocation(V);this._renderWorldCopies&&(this.center=this.center.wrap())};Fe.prototype.locationPoint=function(V){return this.coordinatePoint(this.locationCoordinate(V))};Fe.prototype.pointLocation=function(V){return this.coordinateLocation(this.pointCoordinate(V))};Fe.prototype.locationCoordinate=function(V){return a.MercatorCoordinate.fromLngLat(V)};Fe.prototype.coordinateLocation=function(V){return V.toLngLat()};Fe.prototype.pointCoordinate=function(V){var Y=
[V.x,V.y,0,1];V=[V.x,V.y,1,1];a.transformMat4(Y,Y,this.pixelMatrixInverse);a.transformMat4(V,V,this.pixelMatrixInverse);var W=Y[3],ca=V[3],ua=Y[1]/W,Fa=V[1]/ca,Qa=Y[2]/W,Za=V[2]/ca;Qa=Qa===Za?0:(0-Qa)/(Za-Qa);return new a.MercatorCoordinate(a.number(Y[0]/W,V[0]/ca,Qa)/this.worldSize,a.number(ua,Fa,Qa)/this.worldSize)};Fe.prototype.coordinatePoint=function(V){V=[V.x*this.worldSize,V.y*this.worldSize,0,1];return a.transformMat4(V,V,this.pixelMatrix),new a.Point(V[0]/V[3],V[1]/V[3])};Fe.prototype.getBounds=
function(){return(new a.LngLatBounds).extend(this.pointLocation(new a.Point(0,0))).extend(this.pointLocation(new a.Point(this.width,0))).extend(this.pointLocation(new a.Point(this.width,this.height))).extend(this.pointLocation(new a.Point(0,this.height)))};Fe.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new a.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null};Fe.prototype.setMaxBounds=
function(V){V?(this.lngRange=[V.getWest(),V.getEast()],this.latRange=[V.getSouth(),V.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])};Fe.prototype.calculatePosMatrix=function(V,Y){void 0===Y&&(Y=!1);var W=V.key,ca=Y?this._alignedPosMatrixCache:this._posMatrixCache;if(ca[W])return ca[W];var ua=V.canonical,Fa=this.worldSize/this.zoomScale(ua.z);V=ua.x+Math.pow(2,ua.z)*V.wrap;var Qa=a.identity(new Float64Array(16));return a.translate(Qa,
Qa,[V*Fa,ua.y*Fa,0]),a.scale(Qa,Qa,[Fa/a.EXTENT,Fa/a.EXTENT,1]),a.multiply(Qa,Y?this.alignedProjMatrix:this.projMatrix,Qa),ca[W]=new Float32Array(Qa),ca[W]};Fe.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()};Fe.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var V,Y,W=-90,ca=90,ua=-180,Fa=180,Qa=this.size,Za=this._unmodified;if(this.latRange){var wb=this.latRange;W=a.mercatorYfromLat(wb[1])*this.worldSize;
var Db=(ca=a.mercatorYfromLat(wb[0])*this.worldSize)-W<Qa.y?Qa.y/(ca-W):0}if(this.lngRange){wb=this.lngRange;ua=a.mercatorXfromLng(wb[0])*this.worldSize;var Eb=(Fa=a.mercatorXfromLng(wb[1])*this.worldSize)-ua<Qa.x?Qa.x/(Fa-ua):0}wb=this.point;var kc=Math.max(Eb||0,Db||0);if(kc)return this.center=this.unproject(new a.Point(Eb?(Fa+ua)/2:wb.x,Db?(ca+W)/2:wb.y)),this.zoom+=this.scaleZoom(kc),this._unmodified=Za,void(this._constraining=!1);this.latRange&&(Db=wb.y,Eb=Qa.y/2,Db-Eb<W&&(Y=W+Eb),Db+Eb>ca&&
(Y=ca-Eb));this.lngRange&&(W=wb.x,Qa=Qa.x/2,W-Qa<ua&&(V=ua+Qa),W+Qa>Fa&&(V=Fa-Qa));void 0===V&&void 0===Y||(this.center=this.unproject(new a.Point(void 0!==V?V:wb.x,void 0!==Y?Y:wb.y)));this._unmodified=Za;this._constraining=!1}};Fe.prototype._calcMatrices=function(){if(this.height){var V=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var Y=this._fov*(.5+V.y/this.height);Y=Math.sin(Y)*this.cameraToCenterDistance/Math.sin(a.clamp(Math.PI-(Math.PI/2+this._pitch)-
Y,.01,Math.PI-.01));var W=this.point,ca=W.x;W=W.y;var ua=1.01*(Math.cos(Math.PI/2-this._pitch)*Y+this.cameraToCenterDistance),Fa=this.height/50;Y=new Float64Array(16);a.perspective(Y,this._fov,this.width/this.height,Fa,ua);Y[8]=2*-V.x/this.width;Y[9]=2*V.y/this.height;a.scale(Y,Y,[1,-1,1]);a.translate(Y,Y,[0,0,-this.cameraToCenterDistance]);a.rotateX(Y,Y,this._pitch);a.rotateZ(Y,Y,this.angle);a.translate(Y,Y,[-ca,-W,0]);this.mercatorMatrix=a.scale([],Y,[this.worldSize,this.worldSize,this.worldSize]);
a.scale(Y,Y,[1,1,a.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]);this.projMatrix=Y;this.invProjMatrix=a.invert([],this.projMatrix);V=this.width%2/2;ua=this.height%2/2;Fa=Math.cos(this.angle);var Qa=Math.sin(this.angle);ca=ca-Math.round(ca)+Fa*V+Qa*ua;W=W-Math.round(W)+Fa*ua+Qa*V;V=new Float64Array(Y);if(a.translate(V,V,[.5<ca?ca-1:ca,.5<W?W-1:W,0]),this.alignedProjMatrix=V,Y=a.create(),a.scale(Y,Y,[this.width/2,-this.height/2,1]),a.translate(Y,Y,[1,-1,0]),this.labelPlaneMatrix=Y,Y=a.create(),
a.scale(Y,Y,[1,-1,1]),a.translate(Y,Y,[-1,-1,0]),a.scale(Y,Y,[2/this.width,2/this.height,1]),this.glCoordMatrix=Y,this.pixelMatrix=a.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(Y=a.invert(new Float64Array(16),this.pixelMatrix)))throw Error("failed to invert matrix");this.pixelMatrixInverse=Y;this._posMatrixCache={};this._alignedPosMatrixCache={}}};Fe.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var V=this.pointCoordinate(new a.Point(0,0));
V=[V.x*this.worldSize,V.y*this.worldSize,0,1];return a.transformMat4(V,V,this.pixelMatrix)[3]/this.cameraToCenterDistance};Fe.prototype.getCameraPoint=function(){return this.centerPoint.add(new a.Point(0,Math.tan(this._pitch)*(this.cameraToCenterDistance||1)))};Fe.prototype.getCameraQueryGeometry=function(V){var Y=this.getCameraPoint();if(1===V.length)return[V[0],Y];var W=Y.x,ca=Y.y,ua=Y.x;Y=Y.y;for(var Fa=0;Fa<V.length;Fa+=1){var Qa=V[Fa];W=Math.min(W,Qa.x);ca=Math.min(ca,Qa.y);ua=Math.max(ua,Qa.x);
Y=Math.max(Y,Qa.y)}return[new a.Point(W,ca),new a.Point(ua,ca),new a.Point(ua,Y),new a.Point(W,Y),new a.Point(W,ca)]};Object.defineProperties(Fe.prototype,Ie);var Gg=function(V){var Y,W,ca,ua;this._hashName=V&&encodeURIComponent(V);a.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this);this._updateHash=(Y=this._updateHashUnthrottled.bind(this),W=!1,ca=null,ua=function(){ca=null;W&&(Y(),ca=setTimeout(ua,300),W=!1)},function(){return W=!0,ca||ua(),ca})};Gg.prototype.addTo=function(V){return this._map=
V,a.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this};Gg.prototype.remove=function(){return a.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this};Gg.prototype.getHashString=function(V){var Y=this._map.getCenter(),W=Math.round(100*this._map.getZoom())/100,ca=Math.pow(10,Math.ceil((W*Math.LN2+Math.log(512/360/.5))/Math.LN10)),ua=Math.round(Y.lng*
ca)/ca;Y=Math.round(Y.lat*ca)/ca;ca=this._map.getBearing();var Fa=this._map.getPitch(),Qa="";if(Qa+=V?"/"+ua+"/"+Y+"/"+W:W+"/"+Y+"/"+ua,(ca||Fa)&&(Qa+="/"+Math.round(10*ca)/10),Fa&&(Qa+="/"+Math.round(Fa)),this._hashName){var Za=this._hashName,wb=!1;V=a.window.location.hash.slice(1).split("&").map(function(Db){var Eb=Db.split("=")[0];return Eb===Za?(wb=!0,Eb+"="+Qa):Db}).filter(function(Db){return Db});return wb||V.push(Za+"="+Qa),"#"+V.join("&")}return"#"+Qa};Gg.prototype._getCurrentHash=function(){var V,
Y=this,W=a.window.location.hash.replace("#","");return this._hashName?(W.split("&").map(function(ca){return ca.split("=")}).forEach(function(ca){ca[0]===Y._hashName&&(V=ca)}),(V&&V[1]||"").split("/")):W.split("/")};Gg.prototype._onHashChange=function(){var V=this._getCurrentHash();if(3<=V.length&&!V.some(function(W){return isNaN(W)})){var Y=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(V[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+V[2],+V[1]],zoom:+V[0],
bearing:Y,pitch:+(V[4]||0)}),!0}return!1};Gg.prototype._updateHashUnthrottled=function(){var V=this.getHashString();try{a.window.history.replaceState(a.window.history.state,"",V)}catch(Y){}};var Hh={linearity:.3,easing:a.bezier(0,0,.3,1)},Uj=a.extend({deceleration:2500,maxSpeed:1400},Hh),kj=a.extend({deceleration:20,maxSpeed:1400},Hh),lj=a.extend({deceleration:1E3,maxSpeed:360},Hh),mj=a.extend({deceleration:1E3,maxSpeed:90},Hh),mh=function(V){this._map=V;this.clear()};mh.prototype.clear=function(){this._inertiaBuffer=
[]};mh.prototype.record=function(V){this._drainInertiaBuffer();this._inertiaBuffer.push({time:a.browser.now(),settings:V})};mh.prototype._drainInertiaBuffer=function(){for(var V=this._inertiaBuffer,Y=a.browser.now();0<V.length&&160<Y-V[0].time;)V.shift()};mh.prototype._onMoveEnd=function(V){if(this._drainInertiaBuffer(),!(2>this._inertiaBuffer.length)){for(var Y=0,W=0,ca=0,ua=new a.Point(0,0),Fa=void 0,Qa=void 0,Za=0,wb=this._inertiaBuffer;Za<wb.length;Za+=1){var Db=wb[Za].settings;Y+=Db.zoomDelta||
0;W+=Db.bearingDelta||0;ca+=Db.pitchDelta||0;Db.panDelta&&ua._add(Db.panDelta);Db.around&&(Qa=Db.around);Db.pinchAround&&(Fa=Db.pinchAround)}wb=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time;Za={};ua.mag()&&(V=na(ua.mag(),wb,a.extend({},Uj,V||{})),Za.offset=ua.mult(V.amount/ua.mag()),Za.center=this._map.transform.center,oa(Za,V));Y&&(Y=na(Y,wb,kj),Za.zoom=this._map.transform.zoom+Y.amount,oa(Za,Y));W&&(W=na(W,wb,lj),Za.bearing=this._map.transform.bearing+a.clamp(W.amount,
-179,179),oa(Za,W));ca&&(ca=na(ca,wb,mj),Za.pitch=this._map.transform.pitch+ca.amount,oa(Za,ca));if(Za.zoom||Za.bearing)Fa=void 0===Fa?Qa:Fa,Za.around=Fa?this._map.unproject(Fa):this._map.getCenter();return this.clear(),a.extend(Za,{noMoveStart:!0})}};var qf=function(V){function Y(ca,ua,Fa,Qa){void 0===Qa&&(Qa={});var Za=Ya.mousePos(ua.getCanvasContainer(),Fa),wb=ua.unproject(Za);V.call(this,ca,a.extend({point:Za,lngLat:wb,originalEvent:Fa},Qa));this._defaultPrevented=!1;this.target=ua}V&&(Y.__proto__=
V);(Y.prototype=Object.create(V&&V.prototype)).constructor=Y;var W={defaultPrevented:{configurable:!0}};return Y.prototype.preventDefault=function(){this._defaultPrevented=!0},W.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(Y.prototype,W),Y}(a.Event),Li=function(V){function Y(ca,ua,Fa){var Qa="touchend"===ca?Fa.changedTouches:Fa.touches;Qa=Ya.touchPos(ua.getCanvasContainer(),Qa);var Za=Qa.map(function(Eb){return ua.unproject(Eb)}),wb=Qa.reduce(function(Eb,
kc,jc,$b){return Eb.add(kc.div($b.length))},new a.Point(0,0)),Db=ua.unproject(wb);V.call(this,ca,{points:Qa,point:wb,lngLats:Za,lngLat:Db,originalEvent:Fa});this._defaultPrevented=!1}V&&(Y.__proto__=V);(Y.prototype=Object.create(V&&V.prototype)).constructor=Y;var W={defaultPrevented:{configurable:!0}};return Y.prototype.preventDefault=function(){this._defaultPrevented=!0},W.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(Y.prototype,W),Y}(a.Event),tk=function(V){function Y(ca,
ua,Fa){V.call(this,ca,{originalEvent:Fa});this._defaultPrevented=!1}V&&(Y.__proto__=V);(Y.prototype=Object.create(V&&V.prototype)).constructor=Y;var W={defaultPrevented:{configurable:!0}};return Y.prototype.preventDefault=function(){this._defaultPrevented=!0},W.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(Y.prototype,W),Y}(a.Event),hf=function(V,Y){this._map=V;this._clickTolerance=Y.clickTolerance};hf.prototype.reset=function(){delete this._mousedownPos};
hf.prototype.wheel=function(V){return this._firePreventable(new tk(V.type,this._map,V))};hf.prototype.mousedown=function(V,Y){return this._mousedownPos=Y,this._firePreventable(new qf(V.type,this._map,V))};hf.prototype.mouseup=function(V){this._map.fire(new qf(V.type,this._map,V))};hf.prototype.click=function(V,Y){this._mousedownPos&&this._mousedownPos.dist(Y)>=this._clickTolerance||this._map.fire(new qf(V.type,this._map,V))};hf.prototype.dblclick=function(V){return this._firePreventable(new qf(V.type,
this._map,V))};hf.prototype.mouseover=function(V){this._map.fire(new qf(V.type,this._map,V))};hf.prototype.mouseout=function(V){this._map.fire(new qf(V.type,this._map,V))};hf.prototype.touchstart=function(V){return this._firePreventable(new Li(V.type,this._map,V))};hf.prototype.touchmove=function(V){this._map.fire(new Li(V.type,this._map,V))};hf.prototype.touchend=function(V){this._map.fire(new Li(V.type,this._map,V))};hf.prototype.touchcancel=function(V){this._map.fire(new Li(V.type,this._map,V))};
hf.prototype._firePreventable=function(V){if(this._map.fire(V),V.defaultPrevented)return{}};hf.prototype.isEnabled=function(){return!0};hf.prototype.isActive=function(){return!1};hf.prototype.enable=function(){};hf.prototype.disable=function(){};var ig=function(V){this._map=V};ig.prototype.reset=function(){this._delayContextMenu=!1;delete this._contextMenuEvent};ig.prototype.mousemove=function(V){this._map.fire(new qf(V.type,this._map,V))};ig.prototype.mousedown=function(){this._delayContextMenu=
!0};ig.prototype.mouseup=function(){this._delayContextMenu=!1;this._contextMenuEvent&&(this._map.fire(new qf("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)};ig.prototype.contextmenu=function(V){this._delayContextMenu?this._contextMenuEvent=V:this._map.fire(new qf(V.type,this._map,V));this._map.listens("contextmenu")&&V.preventDefault()};ig.prototype.isEnabled=function(){return!0};ig.prototype.isActive=function(){return!1};ig.prototype.enable=function(){};ig.prototype.disable=
function(){};var Ef=function(V,Y){this._map=V;this._el=V.getCanvasContainer();this._container=V.getContainer();this._clickTolerance=Y.clickTolerance||1};Ef.prototype.isEnabled=function(){return!!this._enabled};Ef.prototype.isActive=function(){return!!this._active};Ef.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)};Ef.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)};Ef.prototype.mousedown=function(V,Y){this.isEnabled()&&V.shiftKey&&0===V.button&&(Ya.disableDrag(),
this._startPos=this._lastPos=Y,this._active=!0)};Ef.prototype.mousemoveWindow=function(V,Y){if(this._active&&!(this._lastPos.equals(Y)||!this._box&&Y.dist(this._startPos)<this._clickTolerance)){var W=this._startPos;this._lastPos=Y;this._box||(this._box=Ya.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",V));V=Math.min(W.x,Y.x);var ca=Math.max(W.x,Y.x),ua=Math.min(W.y,Y.y);Y=Math.max(W.y,Y.y);Ya.setTransform(this._box,
"translate("+V+"px,"+ua+"px)");this._box.style.width=ca-V+"px";this._box.style.height=Y-ua+"px"}};Ef.prototype.mouseupWindow=function(V,Y){var W=this;if(this._active&&0===V.button){var ca=this._startPos;if(this.reset(),Ya.suppressClick(),ca.x!==Y.x||ca.y!==Y.y)return this._map.fire(new a.Event("boxzoomend",{originalEvent:V})),{cameraAnimation:function(ua){return ua.fitScreenCoordinates(ca,Y,W._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",V)}};Ef.prototype.keydown=function(V){this._active&&
27===V.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",V))};Ef.prototype.reset=function(){this._active=!1;this._container.classList.remove("mapboxgl-crosshair");this._box&&(Ya.remove(this._box),this._box=null);Ya.enableDrag();delete this._startPos;delete this._lastPos};Ef.prototype._fireEvent=function(V,Y){return this._map.fire(new a.Event(V,{originalEvent:Y}))};var Ih=function(V){this.reset();this.numTouches=V.numTouches};Ih.prototype.reset=function(){delete this.centroid;delete this.startTime;
delete this.touches;this.aborted=!1};Ih.prototype.touchstart=function(V,Y,W){(this.centroid||W.length>this.numTouches)&&(this.aborted=!0);if(!this.aborted&&(void 0===this.startTime&&(this.startTime=V.timeStamp),W.length===this.numTouches)){V=new a.Point(0,0);for(var ca=0;ca<Y.length;ca+=1)V._add(Y[ca]);this.centroid=V.div(Y.length);this.touches=la(W,Y)}};Ih.prototype.touchmove=function(V,Y,W){if(!this.aborted&&this.centroid){V=la(W,Y);for(var ca in this.touches)Y=V[ca],(!Y||30<Y.dist(this.touches[ca]))&&
(this.aborted=!0)}};Ih.prototype.touchend=function(V,Y,W){if((!this.centroid||500<V.timeStamp-this.startTime)&&(this.aborted=!0),0===W.length)if(V=!this.aborted&&this.centroid,this.reset(),V)return V};var nh=function(V){this.singleTap=new Ih(V);this.numTaps=V.numTaps;this.reset()};nh.prototype.reset=function(){this.lastTime=1/0;delete this.lastTap;this.count=0;this.singleTap.reset()};nh.prototype.touchstart=function(V,Y,W){this.singleTap.touchstart(V,Y,W)};nh.prototype.touchmove=function(V,Y,W){this.singleTap.touchmove(V,
Y,W)};nh.prototype.touchend=function(V,Y,W){if(Y=this.singleTap.touchend(V,Y,W)){W=500>V.timeStamp-this.lastTime;var ca=!this.lastTap||30>this.lastTap.dist(Y);if(W&&ca||this.reset(),this.count++,this.lastTime=V.timeStamp,this.lastTap=Y,this.count===this.numTaps)return this.reset(),Y}};var jg=function(){this._zoomIn=new nh({numTouches:1,numTaps:2});this._zoomOut=new nh({numTouches:2,numTaps:1});this.reset()};jg.prototype.reset=function(){this._active=!1;this._zoomIn.reset();this._zoomOut.reset()};
jg.prototype.touchstart=function(V,Y,W){this._zoomIn.touchstart(V,Y,W);this._zoomOut.touchstart(V,Y,W)};jg.prototype.touchmove=function(V,Y,W){this._zoomIn.touchmove(V,Y,W);this._zoomOut.touchmove(V,Y,W)};jg.prototype.touchend=function(V,Y,W){var ca=this,ua=this._zoomIn.touchend(V,Y,W),Fa=this._zoomOut.touchend(V,Y,W);return ua?(this._active=!0,V.preventDefault(),setTimeout(function(){return ca.reset()},0),{cameraAnimation:function(Qa){return Qa.easeTo({duration:300,zoom:Qa.getZoom()+1,around:Qa.unproject(ua)},
{originalEvent:V})}}):Fa?(this._active=!0,V.preventDefault(),setTimeout(function(){return ca.reset()},0),{cameraAnimation:function(Qa){return Qa.easeTo({duration:300,zoom:Qa.getZoom()-1,around:Qa.unproject(Fa)},{originalEvent:V})}}):void 0};jg.prototype.touchcancel=function(){this.reset()};jg.prototype.enable=function(){this._enabled=!0};jg.prototype.disable=function(){this._enabled=!1;this.reset()};jg.prototype.isEnabled=function(){return this._enabled};jg.prototype.isActive=function(){return this._active};
var Tf=function(V){this.reset();this._clickTolerance=V.clickTolerance||1};Tf.prototype.reset=function(){this._moved=this._active=!1;delete this._lastPoint;delete this._eventButton};Tf.prototype._correctButton=function(V,Y){return!1};Tf.prototype._move=function(V,Y){return{}};Tf.prototype.mousedown=function(V,Y){if(!this._lastPoint){var W=Ya.mouseButton(V);this._correctButton(V,W)&&(this._lastPoint=Y,this._eventButton=W)}};Tf.prototype.mousemoveWindow=function(V,Y){var W=this._lastPoint;if(W&&(V.preventDefault(),
this._moved||!(Y.dist(W)<this._clickTolerance)))return this._moved=!0,this._lastPoint=Y,this._move(W,Y)};Tf.prototype.mouseupWindow=function(V){Ya.mouseButton(V)===this._eventButton&&(this._moved&&Ya.suppressClick(),this.reset())};Tf.prototype.enable=function(){this._enabled=!0};Tf.prototype.disable=function(){this._enabled=!1;this.reset()};Tf.prototype.isEnabled=function(){return this._enabled};Tf.prototype.isActive=function(){return this._active};var Jh=function(V){function Y(){V.apply(this,arguments)}
return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.mousedown=function(W,ca){V.prototype.mousedown.call(this,W,ca);this._lastPoint&&(this._active=!0)},Y.prototype._correctButton=function(W,ca){return 0===ca&&!W.ctrlKey},Y.prototype._move=function(W,ca){return{around:ca,panDelta:ca.sub(W)}},Y}(Tf),nj=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype._correctButton=
function(W,ca){return 0===ca&&W.ctrlKey||2===ca},Y.prototype._move=function(W,ca){if(W=.8*(ca.x-W.x))return this._active=!0,{bearingDelta:W}},Y.prototype.contextmenu=function(W){W.preventDefault()},Y}(Tf),Mi=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype._correctButton=function(W,ca){return 0===ca&&W.ctrlKey||2===ca},Y.prototype._move=function(W,ca){if(W=-.5*(ca.y-W.y))return this._active=!0,{pitchDelta:W}},
Y.prototype.contextmenu=function(W){W.preventDefault()},Y}(Tf),Uf=function(V){this._minTouches=1;this._clickTolerance=V.clickTolerance||1;this.reset()};Uf.prototype.reset=function(){this._active=!1;this._touches={};this._sum=new a.Point(0,0)};Uf.prototype.touchstart=function(V,Y,W){return this._calculateTransform(V,Y,W)};Uf.prototype.touchmove=function(V,Y,W){if(this._active)return V.preventDefault(),this._calculateTransform(V,Y,W)};Uf.prototype.touchend=function(V,Y,W){this._calculateTransform(V,
Y,W);this._active&&W.length<this._minTouches&&this.reset()};Uf.prototype.touchcancel=function(){this.reset()};Uf.prototype._calculateTransform=function(V,Y,W){0<W.length&&(this._active=!0);W=la(W,Y);V=new a.Point(0,0);var ca=new a.Point(0,0);Y=0;for(var ua in W){var Fa=W[ua],Qa=this._touches[ua];Qa&&(V._add(Fa),ca._add(Fa.sub(Qa)),Y++,W[ua]=Fa)}if(this._touches=W,!(Y<this._minTouches)&&ca.mag())if(ua=ca.div(Y),this._sum._add(ua),!(this._sum.mag()<this._clickTolerance))return{around:V.div(Y),panDelta:ua}};
Uf.prototype.enable=function(){this._enabled=!0};Uf.prototype.disable=function(){this._enabled=!1;this.reset()};Uf.prototype.isEnabled=function(){return this._enabled};Uf.prototype.isActive=function(){return this._active};var jf=function(){this.reset()};jf.prototype.reset=function(){this._active=!1;delete this._firstTwoTouches};jf.prototype._start=function(V){};jf.prototype._move=function(V,Y,W){return{}};jf.prototype.touchstart=function(V,Y,W){this._firstTwoTouches||2>W.length||(this._firstTwoTouches=
[W[0].identifier,W[1].identifier],this._start([Y[0],Y[1]]))};jf.prototype.touchmove=function(V,Y,W){if(this._firstTwoTouches){V.preventDefault();var ca=this._firstTwoTouches,ua=ca[1];ca=ia(W,Y,ca[0]);Y=ia(W,Y,ua);if(ca&&Y)return W=this._aroundCenter?null:ca.add(Y).div(2),this._move([ca,Y],W,V)}};jf.prototype.touchend=function(V,Y,W){if(this._firstTwoTouches){var ca=this._firstTwoTouches;V=ca[1];ca=ia(W,Y,ca[0]);Y=ia(W,Y,V);ca&&Y||(this._active&&Ya.suppressClick(),this.reset())}};jf.prototype.touchcancel=
function(){this.reset()};jf.prototype.enable=function(V){this._enabled=!0;this._aroundCenter=!!V&&"center"===V.around};jf.prototype.disable=function(){this._enabled=!1;this.reset()};jf.prototype.isEnabled=function(){return this._enabled};jf.prototype.isActive=function(){return this._active};var li=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.reset=function(){V.prototype.reset.call(this);delete this._distance;
delete this._startDistance},Y.prototype._start=function(W){this._startDistance=this._distance=W[0].dist(W[1])},Y.prototype._move=function(W,ca){var ua=this._distance;if(this._distance=W[0].dist(W[1]),this._active||!(.1>Math.abs(Math.log(this._distance/this._startDistance)/Math.LN2)))return this._active=!0,{zoomDelta:Math.log(this._distance/ua)/Math.LN2,pinchAround:ca}},Y}(jf),Vf=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=
Y,Y.prototype.reset=function(){V.prototype.reset.call(this);delete this._minDiameter;delete this._startVector;delete this._vector},Y.prototype._start=function(W){this._startVector=this._vector=W[0].sub(W[1]);this._minDiameter=W[0].dist(W[1])},Y.prototype._move=function(W,ca){var ua=this._vector;if(this._vector=W[0].sub(W[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:180*this._vector.angleWith(ua)/Math.PI,pinchAround:ca}},Y.prototype._isBelowThreshold=
function(W){this._minDiameter=Math.min(this._minDiameter,W.mag());var ca=25/(Math.PI*this._minDiameter)*360;W=180*W.angleWith(this._startVector)/Math.PI;return Math.abs(W)<ca},Y}(jf),oj=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.reset=function(){V.prototype.reset.call(this);this._valid=void 0;delete this._firstMove;delete this._lastPoints},Y.prototype._start=function(W){this._lastPoints=W;sa(W[0].sub(W[1]))&&
(this._valid=!1)},Y.prototype._move=function(W,ca,ua){ca=W[0].sub(this._lastPoints[0]);var Fa=W[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(ca,Fa,ua.timeStamp),this._valid)return this._lastPoints=W,this._active=!0,{pitchDelta:(ca.y+Fa.y)/2*-.5}},Y.prototype.gestureBeginsVertically=function(W,ca,ua){if(void 0!==this._valid)return this._valid;var Fa=2<=W.mag(),Qa=2<=ca.mag();if(Fa||Qa){if(!Fa||!Qa)return void 0===this._firstMove&&(this._firstMove=ua),100>ua-this._firstMove&&
void 0;ua=0<W.y==0<ca.y;return sa(W)&&sa(ca)&&ua}},Y}(jf),oh=function(){this._panStep=100;this._bearingStep=15;this._pitchStep=10};oh.prototype.reset=function(){this._active=!1};oh.prototype.keydown=function(V){var Y=this;if(!(V.altKey||V.ctrlKey||V.metaKey)){var W=0,ca=0,ua=0,Fa=0,Qa=0;switch(V.keyCode){case 61:case 107:case 171:case 187:W=1;break;case 189:case 109:case 173:W=-1;break;case 37:V.shiftKey?ca=-1:(V.preventDefault(),Fa=-1);break;case 39:V.shiftKey?ca=1:(V.preventDefault(),Fa=1);break;
case 38:V.shiftKey?ua=1:(V.preventDefault(),Qa=-1);break;case 40:V.shiftKey?ua=-1:(V.preventDefault(),Qa=1);break;default:return}return{cameraAnimation:function(Za){var wb=Za.getZoom();Za.easeTo({duration:300,easeId:"keyboardHandler",easing:ta,zoom:W?Math.round(wb)+W*(V.shiftKey?2:1):wb,bearing:Za.getBearing()+ca*Y._bearingStep,pitch:Za.getPitch()+ua*Y._pitchStep,offset:[-Fa*Y._panStep,-Qa*Y._panStep],center:Za.getCenter()},{originalEvent:V})}}}};oh.prototype.enable=function(){this._enabled=!0};oh.prototype.disable=
function(){this._enabled=!1;this.reset()};oh.prototype.isEnabled=function(){return this._enabled};oh.prototype.isActive=function(){return this._active};var Af=function(V,Y){this._map=V;this._el=V.getCanvasContainer();this._handler=Y;this._delta=0;this._defaultZoomRate=.01;this._wheelZoomRate=1/450;a.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};Af.prototype.setZoomRate=function(V){this._defaultZoomRate=V};Af.prototype.setWheelZoomRate=function(V){this._wheelZoomRate=
V};Af.prototype.isEnabled=function(){return!!this._enabled};Af.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout};Af.prototype.isZooming=function(){return!!this._zooming};Af.prototype.enable=function(V){this.isEnabled()||(this._enabled=!0,this._aroundCenter=V&&"center"===V.around)};Af.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)};Af.prototype.wheel=function(V){if(this.isEnabled()){var Y=V.deltaMode===a.window.WheelEvent.DOM_DELTA_LINE?40*V.deltaY:
V.deltaY,W=a.browser.now(),ca=W-(this._lastWheelEventTime||0);this._lastWheelEventTime=W;0!==Y&&0==Y%4.000244140625?this._type="wheel":0!==Y&&4>Math.abs(Y)?this._type="trackpad":400<ca?(this._type=null,this._lastValue=Y,this._timeout=setTimeout(this._onTimeout,40,V)):this._type||(this._type=200>Math.abs(ca*Y)?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,Y+=this._lastValue));V.shiftKey&&Y&&(Y/=4);this._type&&(this._lastWheelEvent=V,this._delta-=Y,this._active||
this._start(V));V.preventDefault()}};Af.prototype._onTimeout=function(V){this._type="wheel";this._delta-=this._lastValue;this._active||this._start(V)};Af.prototype._start=function(V){this._delta&&(this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout),V=Ya.mousePos(this._el,V),this._around=a.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(V)),this._aroundPoint=
this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame()))};Af.prototype.renderFrame=function(){return this._onScrollFrame()};Af.prototype._onScrollFrame=function(){var V=this;if(this._frameId&&(this._frameId=null,this.isActive())){var Y=this._map.transform;if(0!==this._delta){var W=2/(1+Math.exp(-Math.abs(this._delta*("wheel"===this._type&&4.000244140625<Math.abs(this._delta)?this._wheelZoomRate:this._defaultZoomRate))));0>this._delta&&
0!==W&&(W=1/W);var ca="number"==typeof this._targetZoom?Y.zoomScale(this._targetZoom):Y.scale;this._targetZoom=Math.min(Y.maxZoom,Math.max(Y.minZoom,Y.scaleZoom(ca*W)));"wheel"===this._type&&(this._startZoom=Y.zoom,this._easing=this._smoothOutEasing(200));this._delta=0}var ua="number"==typeof this._targetZoom?this._targetZoom:Y.zoom;var Fa=this._startZoom,Qa=this._easing;W=!1;"wheel"===this._type&&Fa&&Qa?(ca=Math.min((a.browser.now()-this._lastWheelEventTime)/200,1),Qa=Qa(ca),ua=a.number(Fa,ua,Qa),
1>ca?this._frameId||(this._frameId=!0):W=!0):W=!0;return this._active=!0,W&&(this._active=!1,this._finishTimeout=setTimeout(function(){V._zooming=!1;V._handler._triggerRenderFrame();delete V._targetZoom;delete V._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!W,zoomDelta:ua-Y.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}};Af.prototype._smoothOutEasing=function(V){var Y=a.ease;if(this._prevEase){Y=this._prevEase;var W=(a.browser.now()-Y.start)/Y.duration;Y=Y.easing(W+.01)-
Y.easing(W);Y=.27/Math.sqrt(Y*Y+1E-4)*.01;Y=a.bezier(Y,Math.sqrt(.0729-Y*Y),.25,1)}return this._prevEase={start:a.browser.now(),duration:V,easing:Y},Y};Af.prototype.reset=function(){this._active=!1};var Kh=function(V,Y){this._clickZoom=V;this._tapZoom=Y};Kh.prototype.enable=function(){this._clickZoom.enable();this._tapZoom.enable()};Kh.prototype.disable=function(){this._clickZoom.disable();this._tapZoom.disable()};Kh.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()};
Kh.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Tg=function(){this.reset()};Tg.prototype.reset=function(){this._active=!1};Tg.prototype.dblclick=function(V,Y){return V.preventDefault(),{cameraAnimation:function(W){W.easeTo({duration:300,zoom:W.getZoom()+(V.shiftKey?-1:1),around:W.unproject(Y)},{originalEvent:V})}}};Tg.prototype.enable=function(){this._enabled=!0};Tg.prototype.disable=function(){this._enabled=!1;this.reset()};Tg.prototype.isEnabled=
function(){return this._enabled};Tg.prototype.isActive=function(){return this._active};var bg=function(){this._tap=new nh({numTouches:1,numTaps:1});this.reset()};bg.prototype.reset=function(){this._active=!1;delete this._swipePoint;delete this._swipeTouch;delete this._tapTime;this._tap.reset()};bg.prototype.touchstart=function(V,Y,W){this._swipePoint||(this._tapTime&&500<V.timeStamp-this._tapTime&&this.reset(),this._tapTime?0<W.length&&(this._swipePoint=Y[0],this._swipeTouch=W[0].identifier):this._tap.touchstart(V,
Y,W))};bg.prototype.touchmove=function(V,Y,W){if(this._tapTime){if(this._swipePoint&&W[0].identifier===this._swipeTouch)return Y=Y[0],W=Y.y-this._swipePoint.y,this._swipePoint=Y,V.preventDefault(),this._active=!0,{zoomDelta:W/128}}else this._tap.touchmove(V,Y,W)};bg.prototype.touchend=function(V,Y,W){this._tapTime?this._swipePoint&&0===W.length&&this.reset():this._tap.touchend(V,Y,W)&&(this._tapTime=V.timeStamp)};bg.prototype.touchcancel=function(){this.reset()};bg.prototype.enable=function(){this._enabled=
!0};bg.prototype.disable=function(){this._enabled=!1;this.reset()};bg.prototype.isEnabled=function(){return this._enabled};bg.prototype.isActive=function(){return this._active};var Hg=function(V,Y,W){this._el=V;this._mousePan=Y;this._touchPan=W};Hg.prototype.enable=function(V){this._inertiaOptions=V||{};this._mousePan.enable();this._touchPan.enable();this._el.classList.add("mapboxgl-touch-drag-pan")};Hg.prototype.disable=function(){this._mousePan.disable();this._touchPan.disable();this._el.classList.remove("mapboxgl-touch-drag-pan")};
Hg.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()};Hg.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Ug=function(V,Y,W){this._pitchWithRotate=V.pitchWithRotate;this._mouseRotate=Y;this._mousePitch=W};Ug.prototype.enable=function(){this._mouseRotate.enable();this._pitchWithRotate&&this._mousePitch.enable()};Ug.prototype.disable=function(){this._mouseRotate.disable();this._mousePitch.disable()};Ug.prototype.isEnabled=
function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())};Ug.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var ug=function(V,Y,W,ca){this._el=V;this._touchZoom=Y;this._touchRotate=W;this._tapDragZoom=ca;this._rotationDisabled=!1;this._enabled=!0};ug.prototype.enable=function(V){this._touchZoom.enable(V);this._rotationDisabled||this._touchRotate.enable(V);this._tapDragZoom.enable();this._el.classList.add("mapboxgl-touch-zoom-rotate")};
ug.prototype.disable=function(){this._touchZoom.disable();this._touchRotate.disable();this._tapDragZoom.disable();this._el.classList.remove("mapboxgl-touch-zoom-rotate")};ug.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()};ug.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()};ug.prototype.disableRotation=function(){this._rotationDisabled=
!0;this._touchRotate.disable()};ug.prototype.enableRotation=function(){this._rotationDisabled=!1;this._touchZoom.isEnabled()&&this._touchRotate.enable()};var Ni=function(V){return V.zoom||V.drag||V.pitch||V.rotate},Vj=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y}(a.Event),Md=function(V,Y){this._map=V;this._el=this._map.getCanvasContainer();this._handlers=[];this._handlersById={};this._changes=[];this._inertia=
new mh(V);this._bearingSnap=Y.bearingSnap;this._previousActiveHandlers={};this._eventsInProgress={};this._addDefaultHandlers(Y);a.bindAll(["handleEvent","handleWindowEvent"],this);V=this._el;this._listeners=[[V,"touchstart",{passive:!1}],[V,"touchmove",{passive:!1}],[V,"touchend",void 0],[V,"touchcancel",void 0],[V,"mousedown",void 0],[V,"mousemove",void 0],[V,"mouseup",void 0],[a.window.document,"mousemove",{capture:!0}],[a.window.document,"mouseup",void 0],[V,"mouseover",void 0],[V,"mouseout",void 0],
[V,"dblclick",void 0],[V,"click",void 0],[V,"keydown",{capture:!1}],[V,"keyup",void 0],[V,"wheel",{passive:!1}],[V,"contextmenu",void 0],[a.window,"blur",void 0]];V=0;for(Y=this._listeners;V<Y.length;V+=1){var W=Y[V],ca=W[0];Ya.addEventListener(ca,W[1],ca===a.window.document?this.handleWindowEvent:this.handleEvent,W[2])}};Md.prototype.destroy=function(){for(var V=0,Y=this._listeners;V<Y.length;V+=1){var W=Y[V],ca=W[0];Ya.removeEventListener(ca,W[1],ca===a.window.document?this.handleWindowEvent:this.handleEvent,
W[2])}};Md.prototype._addDefaultHandlers=function(V){var Y=this._map,W=Y.getCanvasContainer();this._add("mapEvent",new hf(Y,V));var ca=Y.boxZoom=new Ef(Y,V);this._add("boxZoom",ca);ca=new jg;var ua=new Tg;Y.doubleClickZoom=new Kh(ua,ca);this._add("tapZoom",ca);this._add("clickZoom",ua);ca=new bg;this._add("tapDragZoom",ca);ua=Y.touchPitch=new oj;this._add("touchPitch",ua);ua=new nj(V);var Fa=new Mi(V);Y.dragRotate=new Ug(V,ua,Fa);this._add("mouseRotate",ua,["mousePitch"]);this._add("mousePitch",Fa,
["mouseRotate"]);ua=new Jh(V);Fa=new Uf(V);Y.dragPan=new Hg(W,ua,Fa);this._add("mousePan",ua);this._add("touchPan",Fa,["touchZoom","touchRotate"]);ua=new Vf;Fa=new li;Y.touchZoomRotate=new ug(W,Fa,ua,ca);this._add("touchRotate",ua,["touchPan","touchZoom"]);this._add("touchZoom",Fa,["touchPan","touchRotate"]);W=Y.scrollZoom=new Af(Y,this);this._add("scrollZoom",W,["mousePan"]);W=Y.keyboard=new oh;this._add("keyboard",W);this._add("blockableMapEvent",new ig(Y));W=0;for(ca="boxZoom doubleClickZoom tapDragZoom touchPitch dragRotate dragPan touchZoomRotate scrollZoom keyboard".split(" ");W<
ca.length;W+=1)ua=ca[W],V.interactive&&V[ua]&&Y[ua].enable(V[ua])};Md.prototype._add=function(V,Y,W){this._handlers.push({handlerName:V,handler:Y,allowed:W});this._handlersById[V]=Y};Md.prototype.stop=function(){if(!this._updatingCamera){for(var V=0,Y=this._handlers;V<Y.length;V+=1)Y[V].handler.reset();this._inertia.clear();this._fireEvents({},{});this._changes=[]}};Md.prototype.isActive=function(){for(var V=0,Y=this._handlers;V<Y.length;V+=1)if(Y[V].handler.isActive())return!0;return!1};Md.prototype.isZooming=
function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()};Md.prototype.isRotating=function(){return!!this._eventsInProgress.rotate};Md.prototype.isMoving=function(){return!!Ni(this._eventsInProgress)||this.isZooming()};Md.prototype._blockedByActive=function(V,Y,W){for(var ca in V)if(ca!==W&&(!Y||0>Y.indexOf(ca)))return!0;return!1};Md.prototype.handleWindowEvent=function(V){this.handleEvent(V,V.type+"Window")};Md.prototype._getMapTouches=function(V){for(var Y=[],W=0;W<V.length;W+=
1){var ca=V[W];this._el.contains(ca.target)&&Y.push(ca)}return Y};Md.prototype.handleEvent=function(V,Y){if("blur"!==V.type){this._updatingCamera=!0;for(var W="renderFrame"===V.type?void 0:V,ca={needsRenderFrame:!1},ua={},Fa={},Qa=V.touches?this._getMapTouches(V.touches):void 0,Za=Qa?Ya.touchPos(this._el,Qa):Ya.mousePos(this._el,V),wb=0,Db=this._handlers;wb<Db.length;wb+=1){var Eb=Db[wb],kc=Eb.handlerName,jc=Eb.handler;Eb=Eb.allowed;if(jc.isEnabled()){var $b=void 0;this._blockedByActive(Fa,Eb,kc)?
jc.reset():jc[Y||V.type]&&($b=jc[Y||V.type](V,Za,Qa),this.mergeHandlerResult(ca,ua,$b,kc,W),$b&&$b.needsRenderFrame&&this._triggerRenderFrame());($b||jc.isActive())&&(Fa[kc]=jc)}}V={};for(var ic in this._previousActiveHandlers)Fa[ic]||(V[ic]=W);this._previousActiveHandlers=Fa;(Object.keys(V).length||Aa(ca))&&(this._changes.push([ca,ua,V]),this._triggerRenderFrame());(Object.keys(Fa).length||Aa(ca))&&this._map._stop(!0);this._updatingCamera=!1;(W=ca.cameraAnimation)&&(this._inertia.clear(),this._fireEvents({},
{}),this._changes=[],W(this._map))}else this.stop()};Md.prototype.mergeHandlerResult=function(V,Y,W,ca,ua){W&&(a.extend(V,W),V={handlerName:ca,originalEvent:W.originalEvent||ua},void 0!==W.zoomDelta&&(Y.zoom=V),void 0!==W.panDelta&&(Y.drag=V),void 0!==W.pitchDelta&&(Y.pitch=V),void 0!==W.bearingDelta&&(Y.rotate=V))};Md.prototype._applyChanges=function(){for(var V={},Y={},W={},ca=0,ua=this._changes;ca<ua.length;ca+=1){var Fa=ua[ca],Qa=Fa[0],Za=Fa[1];Fa=Fa[2];Qa.panDelta&&(V.panDelta=(V.panDelta||new a.Point(0,
0))._add(Qa.panDelta));Qa.zoomDelta&&(V.zoomDelta=(V.zoomDelta||0)+Qa.zoomDelta);Qa.bearingDelta&&(V.bearingDelta=(V.bearingDelta||0)+Qa.bearingDelta);Qa.pitchDelta&&(V.pitchDelta=(V.pitchDelta||0)+Qa.pitchDelta);void 0!==Qa.around&&(V.around=Qa.around);void 0!==Qa.pinchAround&&(V.pinchAround=Qa.pinchAround);Qa.noInertia&&(V.noInertia=Qa.noInertia);a.extend(Y,Za);a.extend(W,Fa)}this._updateMapTransform(V,Y,W);this._changes=[]};Md.prototype._updateMapTransform=function(V,Y,W){var ca=this._map,ua=ca.transform;
if(!Aa(V))return this._fireEvents(Y,W);var Fa=V.panDelta,Qa=V.zoomDelta,Za=V.bearingDelta,wb=V.pitchDelta,Db=V.around,Eb=V.pinchAround;void 0!==Eb&&(Db=Eb);ca._stop(!0);Db=Db||ca.transform.centerPoint;ca=ua.pointLocation(Fa?Db.sub(Fa):Db);Za&&(ua.bearing+=Za);wb&&(ua.pitch+=wb);Qa&&(ua.zoom+=Qa);ua.setLocationAtPoint(ca,Db);this._map._update();V.noInertia||this._inertia.record(V);this._fireEvents(Y,W)};Md.prototype._fireEvents=function(V,Y){var W=this,ca=Ni(this._eventsInProgress),ua=Ni(V),Fa={};
for(Eb in V)this._eventsInProgress[Eb]||(Fa[Eb+"start"]=V[Eb].originalEvent),this._eventsInProgress[Eb]=V[Eb];for(var Qa in!ca&&ua&&this._fireEvent("movestart",ua.originalEvent),Fa)this._fireEvent(Qa,Fa[Qa]);for(var Za in V.rotate&&(this._bearingChanged=!0),ua&&this._fireEvent("move",ua.originalEvent),V)this._fireEvent(Za,V[Za].originalEvent);var wb;V={};for(var Db in this._eventsInProgress){var Eb=this._eventsInProgress[Db];Fa=Eb.handlerName;Eb=Eb.originalEvent;this._handlersById[Fa].isActive()||
(delete this._eventsInProgress[Db],V[Db+"end"]=wb=Y[Fa]||Eb)}for(var kc in V)this._fireEvent(kc,V[kc]);Y=Ni(this._eventsInProgress);!ca&&!ua||Y||(this._updatingCamera=!0,ca=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ua=function(jc){return 0!==jc&&-W._bearingSnap<jc&&jc<W._bearingSnap},ca?(ua(ca.bearing||this._map.getBearing())&&(ca.bearing=0),this._map.easeTo(ca,{originalEvent:wb})):(this._map.fire(new a.Event("moveend",{originalEvent:wb})),ua(this._map.getBearing())&&this._map.resetNorth()),
this._updatingCamera=this._bearingChanged=!1)};Md.prototype._fireEvent=function(V,Y){this._map.fire(new a.Event(V,Y?{originalEvent:Y}:{}))};Md.prototype._triggerRenderFrame=function(){var V=this;void 0===this._frameId&&(this._frameId=this._map._requestRenderFrame(function(Y){delete V._frameId;V.handleEvent(new Vj("renderFrame",{timeStamp:Y}));V._applyChanges()}))};var uk=function(V){function Y(W,ca){V.call(this);this._zooming=this._moving=!1;this.transform=W;this._bearingSnap=ca.bearingSnap;a.bindAll(["_renderFrameCallback"],
this)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.getCenter=function(){return new a.LngLat(this.transform.center.lng,this.transform.center.lat)},Y.prototype.setCenter=function(W,ca){return this.jumpTo({center:W},ca)},Y.prototype.panBy=function(W,ca,ua){return W=a.Point.convert(W).mult(-1),this.panTo(this.transform.center,a.extend({offset:W},ca),ua)},Y.prototype.panTo=function(W,ca,ua){return this.easeTo(a.extend({center:W},ca),ua)},Y.prototype.getZoom=
function(){return this.transform.zoom},Y.prototype.setZoom=function(W,ca){return this.jumpTo({zoom:W},ca),this},Y.prototype.zoomTo=function(W,ca,ua){return this.easeTo(a.extend({zoom:W},ca),ua)},Y.prototype.zoomIn=function(W,ca){return this.zoomTo(this.getZoom()+1,W,ca),this},Y.prototype.zoomOut=function(W,ca){return this.zoomTo(this.getZoom()-1,W,ca),this},Y.prototype.getBearing=function(){return this.transform.bearing},Y.prototype.setBearing=function(W,ca){return this.jumpTo({bearing:W},ca),this},
Y.prototype.getPadding=function(){return this.transform.padding},Y.prototype.setPadding=function(W,ca){return this.jumpTo({padding:W},ca),this},Y.prototype.rotateTo=function(W,ca,ua){return this.easeTo(a.extend({bearing:W},ca),ua)},Y.prototype.resetNorth=function(W,ca){return this.rotateTo(0,a.extend({duration:1E3},W),ca),this},Y.prototype.resetNorthPitch=function(W,ca){return this.easeTo(a.extend({bearing:0,pitch:0,duration:1E3},W),ca),this},Y.prototype.snapToNorth=function(W,ca){return Math.abs(this.getBearing())<
this._bearingSnap?this.resetNorth(W,ca):this},Y.prototype.getPitch=function(){return this.transform.pitch},Y.prototype.setPitch=function(W,ca){return this.jumpTo({pitch:W},ca),this},Y.prototype.cameraForBounds=function(W,ca){return W=a.LngLatBounds.convert(W),this._cameraForBoxAndBearing(W.getNorthWest(),W.getSouthEast(),0,ca)},Y.prototype._cameraForBoxAndBearing=function(W,ca,ua,Fa){var Qa={top:0,bottom:0,right:0,left:0};if("number"==typeof(Fa=a.extend({padding:Qa,offset:[0,0],maxZoom:this.transform.maxZoom},
Fa)).padding){var Za=Fa.padding;Fa.padding={top:Za,bottom:Za,right:Za,left:Za}}Fa.padding=a.extend(Qa,Fa.padding);Qa=this.transform;Za=Qa.padding;W=Qa.project(a.LngLat.convert(W));ca=Qa.project(a.LngLat.convert(ca));var wb=W.rotate(-ua*Math.PI/180),Db=ca.rotate(-ua*Math.PI/180),Eb=new a.Point(Math.max(wb.x,Db.x),Math.max(wb.y,Db.y));wb=new a.Point(Math.min(wb.x,Db.x),Math.min(wb.y,Db.y));wb=Eb.sub(wb);Eb=(Qa.width-(Za.left+Za.right+Fa.padding.left+Fa.padding.right))/wb.x;Za=(Qa.height-(Za.top+Za.bottom+
Fa.padding.top+Fa.padding.bottom))/wb.y;if(!(0>Za||0>Eb))return Za=Math.min(Qa.scaleZoom(Qa.scale*Math.min(Eb,Za)),Fa.maxZoom),Eb=a.Point.convert(Fa.offset),Fa=(new a.Point(Eb.x+(Fa.padding.left-Fa.padding.right)/2,Eb.y+(Fa.padding.top-Fa.padding.bottom)/2)).mult(Qa.scale/Qa.zoomScale(Za)),{center:Qa.unproject(W.add(ca).div(2).sub(Fa)),zoom:Za,bearing:ua};a.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},Y.prototype.fitBounds=function(W,ca,ua){return this._fitInternal(this.cameraForBounds(W,
ca),ca,ua)},Y.prototype.fitScreenCoordinates=function(W,ca,ua,Fa,Qa){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(a.Point.convert(W)),this.transform.pointLocation(a.Point.convert(ca)),ua,Fa),Fa,Qa)},Y.prototype._fitInternal=function(W,ca,ua){return W?(delete (ca=a.extend(W,ca)).padding,ca.linear?this.easeTo(ca,ua):this.flyTo(ca,ua)):this},Y.prototype.jumpTo=function(W,ca){this.stop();var ua=this.transform,Fa=!1,Qa=!1,Za=!1;return"zoom"in W&&ua.zoom!==+W.zoom&&
(Fa=!0,ua.zoom=+W.zoom),void 0!==W.center&&(ua.center=a.LngLat.convert(W.center)),"bearing"in W&&ua.bearing!==+W.bearing&&(Qa=!0,ua.bearing=+W.bearing),"pitch"in W&&ua.pitch!==+W.pitch&&(Za=!0,ua.pitch=+W.pitch),null==W.padding||ua.isPaddingEqual(W.padding)||(ua.padding=W.padding),this.fire(new a.Event("movestart",ca)).fire(new a.Event("move",ca)),Fa&&this.fire(new a.Event("zoomstart",ca)).fire(new a.Event("zoom",ca)).fire(new a.Event("zoomend",ca)),Qa&&this.fire(new a.Event("rotatestart",ca)).fire(new a.Event("rotate",
ca)).fire(new a.Event("rotateend",ca)),Za&&this.fire(new a.Event("pitchstart",ca)).fire(new a.Event("pitch",ca)).fire(new a.Event("pitchend",ca)),this.fire(new a.Event("moveend",ca))},Y.prototype.easeTo=function(W,ca){var ua=this;this._stop(!1,W.easeId);(!1===(W=a.extend({offset:[0,0],duration:500,easing:a.ease},W)).animate||!W.essential&&a.browser.prefersReducedMotion)&&(W.duration=0);var Fa=this.transform,Qa=this.getZoom(),Za=this.getBearing(),wb=this.getPitch(),Db=this.getPadding(),Eb="zoom"in
W?+W.zoom:Qa,kc="bearing"in W?this._normalizeBearing(W.bearing,Za):Za,jc="pitch"in W?+W.pitch:wb,$b="padding"in W?W.padding:Fa.padding,ic=a.Point.convert(W.offset),gc=Fa.centerPoint.add(ic),Cb=Fa.pointLocation(gc),bc=a.LngLat.convert(W.center||Cb);this._normalizeCenter(bc);var Ec,Yc,fd=Fa.project(Cb),Fc=Fa.project(bc).sub(fd),hd=Fa.zoomScale(Eb-Qa);W.around&&(Ec=a.LngLat.convert(W.around),Yc=Fa.locationPoint(Ec));Cb={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};
return this._zooming=this._zooming||Eb!==Qa,this._rotating=this._rotating||Za!==kc,this._pitching=this._pitching||jc!==wb,this._padding=!Fa.isPaddingEqual($b),this._easeId=W.easeId,this._prepareEase(ca,W.noMoveStart,Cb),clearTimeout(this._easeEndTimeoutID),this._ease(function(dd){if(ua._zooming&&(Fa.zoom=a.number(Qa,Eb,dd)),ua._rotating&&(Fa.bearing=a.number(Za,kc,dd)),ua._pitching&&(Fa.pitch=a.number(wb,jc,dd)),ua._padding&&(Fa.interpolatePadding(Db,$b,dd),gc=Fa.centerPoint.add(ic)),Ec)Fa.setLocationAtPoint(Ec,
Yc);else{var sd=Fa.zoomScale(Fa.zoom-Qa);dd=Fa.unproject(fd.add(Fc.mult(dd*Math.pow(Eb>Qa?Math.min(2,hd):Math.max(.5,hd),1-dd))).mult(sd));Fa.setLocationAtPoint(Fa.renderWorldCopies?dd.wrap():dd,gc)}ua._fireMoveEvents(ca)},function(dd){ua._afterEase(ca,dd)},W),this},Y.prototype._prepareEase=function(W,ca,ua){void 0===ua&&(ua={});this._moving=!0;ca||ua.moving||this.fire(new a.Event("movestart",W));this._zooming&&!ua.zooming&&this.fire(new a.Event("zoomstart",W));this._rotating&&!ua.rotating&&this.fire(new a.Event("rotatestart",
W));this._pitching&&!ua.pitching&&this.fire(new a.Event("pitchstart",W))},Y.prototype._fireMoveEvents=function(W){this.fire(new a.Event("move",W));this._zooming&&this.fire(new a.Event("zoom",W));this._rotating&&this.fire(new a.Event("rotate",W));this._pitching&&this.fire(new a.Event("pitch",W))},Y.prototype._afterEase=function(W,ca){if(!this._easeId||!ca||this._easeId!==ca){delete this._easeId;ca=this._zooming;var ua=this._rotating,Fa=this._pitching;this._padding=this._pitching=this._rotating=this._zooming=
this._moving=!1;ca&&this.fire(new a.Event("zoomend",W));ua&&this.fire(new a.Event("rotateend",W));Fa&&this.fire(new a.Event("pitchend",W));this.fire(new a.Event("moveend",W))}},Y.prototype.flyTo=function(W,ca){function ua(ie){ie=(vd*vd-sd*sd+(ie?-1:1)*$d*$d*od*od)/(2*(ie?vd:sd)*$d*od);return Math.log(Math.sqrt(ie*ie+1)-ie)}function Fa(ie){return(Math.exp(ie)+Math.exp(-ie))/2}var Qa=this;if(!W.essential&&a.browser.prefersReducedMotion)return W=a.pick(W,["center","zoom","bearing","pitch","around"]),
this.jumpTo(W,ca);this.stop();W=a.extend({offset:[0,0],speed:1.2,curve:1.42,easing:a.ease},W);var Za=this.transform,wb=this.getZoom(),Db=this.getBearing(),Eb=this.getPitch(),kc=this.getPadding(),jc="zoom"in W?a.clamp(+W.zoom,Za.minZoom,Za.maxZoom):wb,$b="bearing"in W?this._normalizeBearing(W.bearing,Db):Db,ic="pitch"in W?+W.pitch:Eb,gc="padding"in W?W.padding:Za.padding,Cb=Za.zoomScale(jc-wb),bc=a.Point.convert(W.offset),Ec=Za.centerPoint.add(bc),Yc=Za.pointLocation(Ec),fd=a.LngLat.convert(W.center||
Yc);this._normalizeCenter(fd);var Fc=Za.project(Yc),hd=Za.project(fd).sub(Fc),dd=W.curve,sd=Math.max(Za.width,Za.height),vd=sd/Cb,od=hd.mag();"minZoom"in W&&(Cb=a.clamp(Math.min(W.minZoom,wb,jc),Za.minZoom,Za.maxZoom),Cb=sd/Za.zoomScale(Cb-wb),dd=Math.sqrt(Cb/od*2));var $d=dd*dd,Xd=ua(0),xe=function(ie){return Fa(Xd)/Fa(Xd+dd*ie)},ye=function(ie){var Le=Fa(Xd);ie=se=Xd+dd*ie;return sd*((Le*((Math.exp(ie)-Math.exp(-ie))/2/Fa(se))-(Math.exp(Xd)-Math.exp(-Xd))/2)/$d)/od;var se},ue=(ua(1)-Xd)/dd;if(1E-6>
Math.abs(od)||!isFinite(ue)){if(1E-6>Math.abs(sd-vd))return this.easeTo(W,ca);var Nd=vd<sd?-1:1;ue=Math.abs(Math.log(vd/sd))/dd;ye=function(){return 0};xe=function(ie){return Math.exp(Nd*dd*ie)}}return W.duration="duration"in W?+W.duration:1E3*ue/("screenSpeed"in W?+W.screenSpeed/dd:+W.speed),W.maxDuration&&W.duration>W.maxDuration&&(W.duration=0),this._zooming=!0,this._rotating=Db!==$b,this._pitching=ic!==Eb,this._padding=!Za.isPaddingEqual(gc),this._prepareEase(ca,!1),this._ease(function(ie){var Le=
ie*ue,se=1/xe(Le);Za.zoom=1===ie?jc:wb+Za.scaleZoom(se);Qa._rotating&&(Za.bearing=a.number(Db,$b,ie));Qa._pitching&&(Za.pitch=a.number(Eb,ic,ie));Qa._padding&&(Za.interpolatePadding(kc,gc,ie),Ec=Za.centerPoint.add(bc));ie=1===ie?fd:Za.unproject(Fc.add(hd.mult(ye(Le))).mult(se));Za.setLocationAtPoint(Za.renderWorldCopies?ie.wrap():ie,Ec);Qa._fireMoveEvents(ca)},function(){return Qa._afterEase(ca)},W),this},Y.prototype.isEasing=function(){return!!this._easeFrameId},Y.prototype.stop=function(){return this._stop()},
Y.prototype._stop=function(W,ca){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var ua=this._onEaseEnd;delete this._onEaseEnd;ua.call(this,ca)}W||(W=this.handlers)&&W.stop();return this},Y.prototype._ease=function(W,ca,ua){!1===ua.animate||0===ua.duration?(W(1),ca()):(this._easeStart=a.browser.now(),this._easeOptions=ua,this._onEaseFrame=W,this._onEaseEnd=ca,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},
Y.prototype._renderFrameCallback=function(){var W=Math.min((a.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(W));1>W?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},Y.prototype._normalizeBearing=function(W,ca){W=a.wrap(W,-180,180);var ua=Math.abs(W-ca);return Math.abs(W-360-ca)<ua&&(W-=360),Math.abs(W+360-ca)<ua&&(W+=360),W},Y.prototype._normalizeCenter=function(W){var ca=this.transform;ca.renderWorldCopies&&
!ca.lngRange&&(ca=W.lng-ca.center.lng,W.lng+=180<ca?-360:-180>ca?360:0)},Y}(a.Evented),kg=function(V){void 0===V&&(V={});this.options=V;a.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};kg.prototype.getDefaultPosition=function(){return"bottom-right"};kg.prototype.onAdd=function(V){var Y=this.options&&this.options.compact;return this._map=V,this._container=Ya.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=Ya.create("div","mapboxgl-ctrl-attrib-inner",this._container),
Y&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===Y&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container};kg.prototype.onRemove=function(){Ya.remove(this._container);this._map.off("styledata",this._updateData);this._map.off("sourcedata",this._updateData);this._map.off("moveend",
this._updateEditLink);this._map.off("resize",this._updateCompact);this._attribHTML=this._map=void 0};kg.prototype._updateEditLink=function(){var V=this._editLink;V||(V=this._editLink=this._container.querySelector(".mapbox-improve-map"));var Y=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||a.config.ACCESS_TOKEN}];if(V){var W=Y.reduce(function(ca,ua,Fa){return ua.value&&(ca+=ua.key+"="+ua.value+(Fa<Y.length-
1?"&":"")),ca},"?");V.href=a.config.FEEDBACK_URL+"/"+W+(this._map._hash?this._map._hash.getHashString(!0):"");V.rel="noopener nofollow"}};kg.prototype._updateData=function(V){!V||"metadata"!==V.sourceDataType&&"style"!==V.dataType||(this._updateAttributions(),this._updateEditLink())};kg.prototype._updateAttributions=function(){if(this._map.style){var V=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?V=V.concat(this.options.customAttribution.map(function(ua){return"string"!=
typeof ua?"":ua})):"string"==typeof this.options.customAttribution&&V.push(this.options.customAttribution)),this._map.style.stylesheet){var Y=this._map.style.stylesheet;this.styleOwner=Y.owner;this.styleId=Y.id}Y=this._map.style.sourceCaches;for(var W in Y){var ca=Y[W];ca.used&&(ca=ca.getSource(),ca.attribution&&0>V.indexOf(ca.attribution)&&V.push(ca.attribution))}V.sort(function(ua,Fa){return ua.length-Fa.length});W=(V=V.filter(function(ua,Fa){for(Fa+=1;Fa<V.length;Fa++)if(0<=V[Fa].indexOf(ua))return!1;
return!0})).join(" | ");W!==this._attribHTML&&(this._attribHTML=W,V.length?(this._innerContainer.innerHTML=W,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}};kg.prototype._updateCompact=function(){640>=this._map.getCanvasContainer().offsetWidth?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var Vg=function(){a.bindAll(["_updateLogo"],this);a.bindAll(["_updateCompact"],
this)};Vg.prototype.onAdd=function(V){this._map=V;this._container=Ya.create("div","mapboxgl-ctrl");V=Ya.create("a","mapboxgl-ctrl-logo");return V.target="_blank",V.rel="noopener nofollow",V.href="https://www.mapbox.com/",V.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),V.setAttribute("rel","noopener nofollow"),this._container.appendChild(V),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),
this._updateCompact(),this._container};Vg.prototype.onRemove=function(){Ya.remove(this._container);this._map.off("sourcedata",this._updateLogo);this._map.off("resize",this._updateCompact)};Vg.prototype.getDefaultPosition=function(){return"bottom-left"};Vg.prototype._updateLogo=function(V){V&&"metadata"!==V.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")};Vg.prototype._logoRequired=function(){if(this._map.style){var V=this._map.style.sourceCaches,Y;for(Y in V)if(V[Y].getSource().mapbox_logo)return!0;
return!1}};Vg.prototype._updateCompact=function(){var V=this._container.children;V.length&&(V=V[0],250>this._map.getCanvasContainer().offsetWidth?V.classList.add("mapboxgl-compact"):V.classList.remove("mapboxgl-compact"))};var ph=function(){this._queue=[];this._id=0;this._currentlyRunning=this._cleared=!1};ph.prototype.add=function(V){var Y=++this._id;return this._queue.push({callback:V,id:Y,cancelled:!1}),Y};ph.prototype.remove=function(V){var Y=this._currentlyRunning,W=0;for(Y=Y?this._queue.concat(Y):
this._queue;W<Y.length;W+=1){var ca=Y[W];if(ca.id===V)return void(ca.cancelled=!0)}};ph.prototype.run=function(V){void 0===V&&(V=0);var Y=this._currentlyRunning=this._queue;this._queue=[];for(var W=0;W<Y.length;W+=1){var ca=Y[W];if(!ca.cancelled&&(ca.callback(V),this._cleared))break}this._currentlyRunning=this._cleared=!1};ph.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0);this._queue=[]};var Lh={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen",
"GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Mh=a.window.HTMLImageElement,Nh=a.window.HTMLElement,lg=a.window.ImageBitmap,
vk={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,
fadeDuration:300,crossSourceCollisions:!0},wk=function(V){function Y(ca){var ua=this;if(null!=(ca=a.extend({},vk,ca)).minZoom&&null!=ca.maxZoom&&ca.minZoom>ca.maxZoom)throw Error("maxZoom must be greater than or equal to minZoom");if(null!=ca.minPitch&&null!=ca.maxPitch&&ca.minPitch>ca.maxPitch)throw Error("maxPitch must be greater than or equal to minPitch");if(null!=ca.minPitch&&0>ca.minPitch)throw Error("minPitch must be greater than or equal to 0");if(null!=ca.maxPitch&&60<ca.maxPitch)throw Error("maxPitch must be less than or equal to 60");
var Fa=new Fe(ca.minZoom,ca.maxZoom,ca.minPitch,ca.maxPitch,ca.renderWorldCopies);if(V.call(this,Fa,ca),this._interactive=ca.interactive,this._maxTileCacheSize=ca.maxTileCacheSize,this._failIfMajorPerformanceCaveat=ca.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=ca.preserveDrawingBuffer,this._antialias=ca.antialias,this._trackResize=ca.trackResize,this._bearingSnap=ca.bearingSnap,this._refreshExpiredTiles=ca.refreshExpiredTiles,this._fadeDuration=ca.fadeDuration,this._crossSourceCollisions=
ca.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=ca.collectResourceTiming,this._renderTaskQueue=new ph,this._controls=[],this._mapId=a.uniqueId(),this._locale=a.extend({},Lh,ca.locale),this._requestManager=new a.RequestManager(ca.transformRequest,ca.accessToken),"string"==typeof ca.container){if(this._container=a.window.document.getElementById(ca.container),!this._container)throw Error("Container '"+ca.container+"' not found.");}else{if(!(ca.container instanceof Nh))throw Error("Invalid type: 'container' must be a String or HTMLElement.");
this._container=ca.container}if(ca.maxBounds&&this.setMaxBounds(ca.maxBounds),a.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw Error("Failed to initialize WebGL.");this.on("move",function(){return ua._update(!1)});this.on("moveend",function(){return ua._update(!1)});this.on("zoom",function(){return ua._update(!0)});void 0!==a.window&&(a.window.addEventListener("online",this._onWindowOnline,
!1),a.window.addEventListener("resize",this._onWindowResize,!1));this.handlers=new Md(this,ca);(this._hash=ca.hash&&(new Gg("string"==typeof ca.hash&&ca.hash||void 0)).addTo(this))&&this._hash._onHashChange()||(this.jumpTo({center:ca.center,zoom:ca.zoom,bearing:ca.bearing,pitch:ca.pitch}),ca.bounds&&(this.resize(),this.fitBounds(ca.bounds,a.extend({},ca.fitBoundsOptions,{duration:0}))));this.resize();this._localIdeographFontFamily=ca.localIdeographFontFamily;ca.style&&this.setStyle(ca.style,{localIdeographFontFamily:ca.localIdeographFontFamily});
ca.attributionControl&&this.addControl(new kg({customAttribution:ca.customAttribution}));this.addControl(new Vg,ca.logoPosition);this.on("style.load",function(){ua.transform.unmodified&&ua.jumpTo(ua.style.stylesheet)});this.on("data",function(Qa){ua._update("style"===Qa.dataType);ua.fire(new a.Event(Qa.dataType+"data",Qa))});this.on("dataloading",function(Qa){ua.fire(new a.Event(Qa.dataType+"dataloading",Qa))})}V&&(Y.__proto__=V);(Y.prototype=Object.create(V&&V.prototype)).constructor=Y;var W={showTileBoundaries:{configurable:!0},
showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return Y.prototype._getMapId=function(){return this._mapId},Y.prototype.addControl=function(ca,ua){if(void 0===ua&&ca.getDefaultPosition&&(ua=ca.getDefaultPosition()),void 0===ua&&(ua="top-right"),!ca||!ca.onAdd)return this.fire(new a.ErrorEvent(Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));
var Fa=ca.onAdd(this);this._controls.push(ca);ca=this._controlPositions[ua];return-1!==ua.indexOf("bottom")?ca.insertBefore(Fa,ca.firstChild):ca.appendChild(Fa),this},Y.prototype.removeControl=function(ca){if(!ca||!ca.onRemove)return this.fire(new a.ErrorEvent(Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var ua=this._controls.indexOf(ca);return-1<ua&&this._controls.splice(ua,1),ca.onRemove(this),this},Y.prototype.resize=function(ca){var ua=
this._containerDimensions(),Fa=ua[0];ua=ua[1];this._resizeCanvas(Fa,ua);this.transform.resize(Fa,ua);this.painter.resize(Fa,ua);Fa=!this._moving;return Fa&&(this.stop(),this.fire(new a.Event("movestart",ca)).fire(new a.Event("move",ca))),this.fire(new a.Event("resize",ca)),Fa&&this.fire(new a.Event("moveend",ca)),this},Y.prototype.getBounds=function(){return this.transform.getBounds()},Y.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},Y.prototype.setMaxBounds=function(ca){return this.transform.setMaxBounds(a.LngLatBounds.convert(ca)),
this._update()},Y.prototype.setMinZoom=function(ca){if(-2<=(ca=null==ca?-2:ca)&&ca<=this.transform.maxZoom)return this.transform.minZoom=ca,this._update(),this.getZoom()<ca&&this.setZoom(ca),this;throw Error("minZoom must be between -2 and the current maxZoom, inclusive");},Y.prototype.getMinZoom=function(){return this.transform.minZoom},Y.prototype.setMaxZoom=function(ca){if((ca=null==ca?22:ca)>=this.transform.minZoom)return this.transform.maxZoom=ca,this._update(),this.getZoom()>ca&&this.setZoom(ca),
this;throw Error("maxZoom must be greater than the current minZoom");},Y.prototype.getMaxZoom=function(){return this.transform.maxZoom},Y.prototype.setMinPitch=function(ca){if(0>(ca=null==ca?0:ca))throw Error("minPitch must be greater than or equal to 0");if(0<=ca&&ca<=this.transform.maxPitch)return this.transform.minPitch=ca,this._update(),this.getPitch()<ca&&this.setPitch(ca),this;throw Error("minPitch must be between 0 and the current maxPitch, inclusive");},Y.prototype.getMinPitch=function(){return this.transform.minPitch},
Y.prototype.setMaxPitch=function(ca){if(60<(ca=null==ca?60:ca))throw Error("maxPitch must be less than or equal to 60");if(ca>=this.transform.minPitch)return this.transform.maxPitch=ca,this._update(),this.getPitch()>ca&&this.setPitch(ca),this;throw Error("maxPitch must be greater than the current minPitch");},Y.prototype.getMaxPitch=function(){return this.transform.maxPitch},Y.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},Y.prototype.setRenderWorldCopies=function(ca){return this.transform.renderWorldCopies=
ca,this._update()},Y.prototype.project=function(ca){return this.transform.locationPoint(a.LngLat.convert(ca))},Y.prototype.unproject=function(ca){return this.transform.pointLocation(a.Point.convert(ca))},Y.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},Y.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},Y.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},Y.prototype._createDelegatedListener=function(ca,ua,
Fa){var Qa,Za=this;if("mouseenter"===ca||"mouseover"===ca){var wb=!1;return{layer:ua,listener:Fa,delegates:{mousemove:function(Eb){var kc=Za.getLayer(ua)?Za.queryRenderedFeatures(Eb.point,{layers:[ua]}):[];kc.length?wb||(wb=!0,Fa.call(Za,new qf(ca,Za,Eb.originalEvent,{features:kc}))):wb=!1},mouseout:function(){wb=!1}}}}if("mouseleave"===ca||"mouseout"===ca){var Db=!1;return{layer:ua,listener:Fa,delegates:{mousemove:function(Eb){(Za.getLayer(ua)?Za.queryRenderedFeatures(Eb.point,{layers:[ua]}):[]).length?
Db=!0:Db&&(Db=!1,Fa.call(Za,new qf(ca,Za,Eb.originalEvent)))},mouseout:function(Eb){Db&&(Db=!1,Fa.call(Za,new qf(ca,Za,Eb.originalEvent)))}}}}return{layer:ua,listener:Fa,delegates:(Qa={},Qa[ca]=function(Eb){var kc=Za.getLayer(ua)?Za.queryRenderedFeatures(Eb.point,{layers:[ua]}):[];kc.length&&(Eb.features=kc,Fa.call(Za,Eb),delete Eb.features)},Qa)}},Y.prototype.on=function(ca,ua,Fa){if(void 0===Fa)return V.prototype.on.call(this,ca,ua);ua=this._createDelegatedListener(ca,ua,Fa);for(var Qa in this._delegatedListeners=
this._delegatedListeners||{},this._delegatedListeners[ca]=this._delegatedListeners[ca]||[],this._delegatedListeners[ca].push(ua),ua.delegates)this.on(Qa,ua.delegates[Qa]);return this},Y.prototype.once=function(ca,ua,Fa){if(void 0===Fa)return V.prototype.once.call(this,ca,ua);ca=this._createDelegatedListener(ca,ua,Fa);for(var Qa in ca.delegates)this.once(Qa,ca.delegates[Qa]);return this},Y.prototype.off=function(ca,ua,Fa){if(void 0===Fa)ua=V.prototype.off.call(this,ca,ua);else{if(this._delegatedListeners&&
this._delegatedListeners[ca])a:{ca=this._delegatedListeners[ca];for(var Qa=0;Qa<ca.length;Qa++){var Za=ca[Qa];if(Za.layer===ua&&Za.listener===Fa){for(var wb in Za.delegates)this.off(wb,Za.delegates[wb]);ca.splice(Qa,1);break a}}}ua=this}return ua},Y.prototype.queryRenderedFeatures=function(ca,ua){if(!this.style)return[];if(void 0!==ua||void 0===ca||ca instanceof a.Point||Array.isArray(ca)||(ua=ca,ca=void 0),ua=ua||{},(ca=ca||[[0,0],[this.transform.width,this.transform.height]])instanceof a.Point||
"number"==typeof ca[0])var Fa=[a.Point.convert(ca)];else Fa=a.Point.convert(ca[0]),ca=a.Point.convert(ca[1]),Fa=[Fa,new a.Point(ca.x,Fa.y),ca,new a.Point(Fa.x,ca.y),Fa];return this.style.queryRenderedFeatures(Fa,ua,this.transform)},Y.prototype.querySourceFeatures=function(ca,ua){return this.style.querySourceFeatures(ca,ua)},Y.prototype.setStyle=function(ca,ua){return!1!==(ua=a.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},ua)).diff&&ua.localIdeographFontFamily===this._localIdeographFontFamily&&
this.style&&ca?(this._diffStyle(ca,ua),this):(this._localIdeographFontFamily=ua.localIdeographFontFamily,this._updateStyle(ca,ua))},Y.prototype._getUIString=function(ca){var ua=this._locale[ca];if(null==ua)throw Error("Missing UI string '"+ca+"'");return ua},Y.prototype._updateStyle=function(ca,ua){return this.style&&(this.style.setEventedParent(null),this.style._remove()),ca?(this.style=new kd(this,ua||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof ca?this.style.loadURL(ca):
this.style.loadJSON(ca),this):(delete this.style,this)},Y.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new kd(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},Y.prototype._diffStyle=function(ca,ua){var Fa=this;"string"==typeof ca?(ca=this._requestManager.normalizeStyleURL(ca),ca=this._requestManager.transformRequest(ca,a.ResourceType.Style),a.getJSON(ca,function(Qa,Za){Qa?Fa.fire(new a.ErrorEvent(Qa)):Za&&Fa._updateDiff(Za,ua)})):"object"==
typeof ca&&this._updateDiff(ca,ua)},Y.prototype._updateDiff=function(ca,ua){try{this.style.setState(ca)&&this._update(!0)}catch(Fa){a.warnOnce("Unable to perform style diff: "+(Fa.message||Fa.error||Fa)+".  Rebuilding the style from scratch."),this._updateStyle(ca,ua)}},Y.prototype.getStyle=function(){if(this.style)return this.style.serialize()},Y.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():a.warnOnce("There is no style added to the map.")},Y.prototype.addSource=function(ca,
ua){return this._lazyInitEmptyStyle(),this.style.addSource(ca,ua),this._update(!0)},Y.prototype.isSourceLoaded=function(ca){var ua=this.style&&this.style.sourceCaches[ca];if(void 0!==ua)return ua.loaded();this.fire(new a.ErrorEvent(Error("There is no source with ID '"+ca+"'")))},Y.prototype.areTilesLoaded=function(){var ca=this.style&&this.style.sourceCaches,ua;for(ua in ca){var Fa=ca[ua]._tiles,Qa;for(Qa in Fa){var Za=Fa[Qa];if("loaded"!==Za.state&&"errored"!==Za.state)return!1}}return!0},Y.prototype.addSourceType=
function(ca,ua,Fa){return this._lazyInitEmptyStyle(),this.style.addSourceType(ca,ua,Fa)},Y.prototype.removeSource=function(ca){return this.style.removeSource(ca),this._update(!0)},Y.prototype.getSource=function(ca){return this.style.getSource(ca)},Y.prototype.addImage=function(ca,ua,Fa){void 0===Fa&&(Fa={});var Qa=Fa.pixelRatio;void 0===Qa&&(Qa=1);var Za=Fa.sdf;void 0===Za&&(Za=!1);var wb=Fa.stretchX,Db=Fa.stretchY;Fa=Fa.content;if(this._lazyInitEmptyStyle(),ua instanceof Mh||lg&&ua instanceof lg)ua=
a.browser.getImageData(ua),this.style.addImage(ca,{data:new a.RGBAImage({width:ua.width,height:ua.height},ua.data),pixelRatio:Qa,stretchX:wb,stretchY:Db,content:Fa,sdf:Za,version:0});else{if(void 0===ua.width||void 0===ua.height)return this.fire(new a.ErrorEvent(Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));this.style.addImage(ca,
{data:new a.RGBAImage({width:ua.width,height:ua.height},new Uint8Array(ua.data)),pixelRatio:Qa,stretchX:wb,stretchY:Db,content:Fa,sdf:Za,version:0,userImage:ua});ua.onAdd&&ua.onAdd(this,ca)}},Y.prototype.updateImage=function(ca,ua){var Fa=this.style.getImage(ca);if(!Fa)return this.fire(new a.ErrorEvent(Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var Qa=ua instanceof Mh||lg&&ua instanceof lg?a.browser.getImageData(ua):ua,Za=Qa.width,
wb=Qa.height;Qa=Qa.data;return void 0===Za||void 0===wb?this.fire(new a.ErrorEvent(Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):Za!==Fa.data.width||wb!==Fa.data.height?this.fire(new a.ErrorEvent(Error("The width and height of the updated image must be that same as the previous version of the image"))):(Fa.data.replace(Qa,!(ua instanceof
Mh||lg&&ua instanceof lg)),void this.style.updateImage(ca,Fa))},Y.prototype.hasImage=function(ca){return ca?!!this.style.getImage(ca):(this.fire(new a.ErrorEvent(Error("Missing required image id"))),!1)},Y.prototype.removeImage=function(ca){this.style.removeImage(ca)},Y.prototype.loadImage=function(ca,ua){a.getImage(this._requestManager.transformRequest(ca,a.ResourceType.Image),ua)},Y.prototype.listImages=function(){return this.style.listImages()},Y.prototype.addLayer=function(ca,ua){return this._lazyInitEmptyStyle(),
this.style.addLayer(ca,ua),this._update(!0)},Y.prototype.moveLayer=function(ca,ua){return this.style.moveLayer(ca,ua),this._update(!0)},Y.prototype.removeLayer=function(ca){return this.style.removeLayer(ca),this._update(!0)},Y.prototype.getLayer=function(ca){return this.style.getLayer(ca)},Y.prototype.setLayerZoomRange=function(ca,ua,Fa){return this.style.setLayerZoomRange(ca,ua,Fa),this._update(!0)},Y.prototype.setFilter=function(ca,ua,Fa){return void 0===Fa&&(Fa={}),this.style.setFilter(ca,ua,Fa),
this._update(!0)},Y.prototype.getFilter=function(ca){return this.style.getFilter(ca)},Y.prototype.setPaintProperty=function(ca,ua,Fa,Qa){return void 0===Qa&&(Qa={}),this.style.setPaintProperty(ca,ua,Fa,Qa),this._update(!0)},Y.prototype.getPaintProperty=function(ca,ua){return this.style.getPaintProperty(ca,ua)},Y.prototype.setLayoutProperty=function(ca,ua,Fa,Qa){return void 0===Qa&&(Qa={}),this.style.setLayoutProperty(ca,ua,Fa,Qa),this._update(!0)},Y.prototype.getLayoutProperty=function(ca,ua){return this.style.getLayoutProperty(ca,
ua)},Y.prototype.setLight=function(ca,ua){return void 0===ua&&(ua={}),this._lazyInitEmptyStyle(),this.style.setLight(ca,ua),this._update(!0)},Y.prototype.getLight=function(){return this.style.getLight()},Y.prototype.setFeatureState=function(ca,ua){return this.style.setFeatureState(ca,ua),this._update()},Y.prototype.removeFeatureState=function(ca,ua){return this.style.removeFeatureState(ca,ua),this._update()},Y.prototype.getFeatureState=function(ca){return this.style.getFeatureState(ca)},Y.prototype.getContainer=
function(){return this._container},Y.prototype.getCanvasContainer=function(){return this._canvasContainer},Y.prototype.getCanvas=function(){return this._canvas},Y.prototype._containerDimensions=function(){var ca=0,ua=0;return this._container&&(ca=this._container.clientWidth||400,ua=this._container.clientHeight||300),[ca,ua]},Y.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==a.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&a.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},
Y.prototype._setupContainer=function(){var ca=this._container;ca.classList.add("mapboxgl-map");(this._missingCSSCanary=Ya.create("div","mapboxgl-canary",ca)).style.visibility="hidden";this._detectMissingCSS();var ua=this._canvasContainer=Ya.create("div","mapboxgl-canvas-container",ca);this._interactive&&ua.classList.add("mapboxgl-interactive");this._canvas=Ya.create("canvas","mapboxgl-canvas",ua);this._canvas.addEventListener("webglcontextlost",this._contextLost,!1);this._canvas.addEventListener("webglcontextrestored",
this._contextRestored,!1);this._canvas.setAttribute("tabindex","0");this._canvas.setAttribute("aria-label","Map");ua=this._containerDimensions();this._resizeCanvas(ua[0],ua[1]);var Fa=this._controlContainer=Ya.create("div","mapboxgl-control-container",ca),Qa=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(Za){Qa[Za]=Ya.create("div","mapboxgl-ctrl-"+Za,Fa)})},Y.prototype._resizeCanvas=function(ca,ua){var Fa=a.browser.devicePixelRatio||1;this._canvas.width=
Fa*ca;this._canvas.height=Fa*ua;this._canvas.style.width=ca+"px";this._canvas.style.height=ua+"px"},Y.prototype._setupPainter=function(){var ca=a.extend({},ab.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1});(ca=this._canvas.getContext("webgl",ca)||this._canvas.getContext("experimental-webgl",ca))?(this.painter=new Pe(ca,this.transform),a.webpSupported.testSupport(ca)):this.fire(new a.ErrorEvent(Error("Failed to initialize WebGL")))},
Y.prototype._contextLost=function(ca){ca.preventDefault();this._frame&&(this._frame.cancel(),this._frame=null);this.fire(new a.Event("webglcontextlost",{originalEvent:ca}))},Y.prototype._contextRestored=function(ca){this._setupPainter();this.resize();this._update();this.fire(new a.Event("webglcontextrestored",{originalEvent:ca}))},Y.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},Y.prototype._update=function(ca){return this.style?(this._styleDirty=
this._styleDirty||ca,this._sourcesDirty=!0,this.triggerRepaint(),this):this},Y.prototype._requestRenderFrame=function(ca){return this._update(),this._renderTaskQueue.add(ca)},Y.prototype._cancelRenderFrame=function(ca){this._renderTaskQueue.remove(ca)},Y.prototype._render=function(ca){var ua,Fa=this,Qa=0,Za=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(ua=Za.createQueryEXT(),Za.beginQueryEXT(Za.TIME_ELAPSED_EXT,ua),Qa=a.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),
this._renderTaskQueue.run(ca),!this._removed){ca=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var wb=this.transform.zoom,Db=a.browser.now();this.style.zoomHistory.update(wb,Db);wb=new a.EvaluationParameters(wb,{now:Db,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()});Db=wb.crossFadingFactor();1===Db&&Db===this._crossFadingFactor||(ca=!0,this._crossFadingFactor=Db);this.style.update(wb)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=
!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),
this.fire(new a.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new a.Event("load"))),this.style&&(this.style.hasTransitions()||ca)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var Eb=a.browser.now()-Qa;Za.endQueryEXT(Za.TIME_ELAPSED_EXT,ua);setTimeout(function(){var jc=Za.getQueryObjectEXT(ua,Za.QUERY_RESULT_EXT)/1E6;Za.deleteQueryEXT(ua);Fa.fire(new a.Event("gpu-timing-frame",{cpuTime:Eb,
gpuTime:jc}))},50)}if(this.listens("gpu-timing-layer")){var kc=this.painter.collectGpuTimers();setTimeout(function(){var jc=Fa.painter.queryGpuTimers(kc);Fa.fire(new a.Event("gpu-timing-layer",{layerTimes:jc}))},50)}return this._sourcesDirty||this._styleDirty||this._placementDirty||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new a.Event("idle"))),this}},Y.prototype.remove=function(){this._hash&&this._hash.remove();for(var ca=
0,ua=this._controls;ca<ua.length;ca+=1)ua[ca].onRemove(this);this._controls=[];this._frame&&(this._frame.cancel(),this._frame=null);this._renderTaskQueue.clear();this.painter.destroy();this.handlers.destroy();delete this.handlers;this.setStyle(null);void 0!==a.window&&(a.window.removeEventListener("resize",this._onWindowResize,!1),a.window.removeEventListener("online",this._onWindowOnline,!1));(ca=this.painter.context.gl.getExtension("WEBGL_lose_context"))&&ca.loseContext();Ka(this._canvasContainer);
Ka(this._controlContainer);Ka(this._missingCSSCanary);this._container.classList.remove("mapboxgl-map");this._removed=!0;this.fire(new a.Event("remove"))},Y.prototype.triggerRepaint=function(){var ca=this;this.style&&!this._frame&&(this._frame=a.browser.frame(function(ua){ca._frame=null;ca._render(ua)}))},Y.prototype._onWindowOnline=function(){this._update()},Y.prototype._onWindowResize=function(ca){this._trackResize&&this.resize({originalEvent:ca})._update()},W.showTileBoundaries.get=function(){return!!this._showTileBoundaries},
W.showTileBoundaries.set=function(ca){this._showTileBoundaries!==ca&&(this._showTileBoundaries=ca,this._update())},W.showPadding.get=function(){return!!this._showPadding},W.showPadding.set=function(ca){this._showPadding!==ca&&(this._showPadding=ca,this._update())},W.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},W.showCollisionBoxes.set=function(ca){this._showCollisionBoxes!==ca&&(this._showCollisionBoxes=ca,ca?this.style._generateCollisionBoxes():this._update())},W.showOverdrawInspector.get=
function(){return!!this._showOverdrawInspector},W.showOverdrawInspector.set=function(ca){this._showOverdrawInspector!==ca&&(this._showOverdrawInspector=ca,this._update())},W.repaint.get=function(){return!!this._repaint},W.repaint.set=function(ca){this._repaint!==ca&&(this._repaint=ca,this.triggerRepaint())},W.vertices.get=function(){return!!this._vertices},W.vertices.set=function(ca){this._vertices=ca;this._update()},Y.prototype._setCacheLimits=function(ca,ua){a.setCacheLimits(ca,ua)},W.version.get=
function(){return a.version},Object.defineProperties(Y.prototype,W),Y}(uk),Wj={showCompass:!0,showZoom:!0,visualizePitch:!1},Wf=function(V){var Y=this;this.options=a.extend({},Wj,V);this._container=Ya.create("div","mapboxgl-ctrl mapboxgl-ctrl-group");this._container.addEventListener("contextmenu",function(W){return W.preventDefault()});this.options.showZoom&&(a.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(W){return Y._map.zoomIn({},
{originalEvent:W})}),Ya.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(W){return Y._map.zoomOut({},{originalEvent:W})}),Ya.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0));this.options.showCompass&&(a.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(W){Y.options.visualizePitch?Y._map.resetNorthPitch({},
{originalEvent:W}):Y._map.resetNorth({},{originalEvent:W})}),this._compassIcon=Ya.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Wf.prototype._updateZoomButtons=function(){var V=this._map.getZoom();this._zoomInButton.disabled=V===this._map.getMaxZoom();this._zoomOutButton.disabled=V===this._map.getMinZoom()};Wf.prototype._rotateCompassArrow=function(){this._compassIcon.style.transform=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(Math.PI/
180*this._map.transform.pitch),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+180/Math.PI*this._map.transform.angle+"deg)":"rotate("+180/Math.PI*this._map.transform.angle+"deg)"};Wf.prototype.onAdd=function(V){return this._map=V,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,
"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ge(this._map,this._compass,this.options.visualizePitch)),this._container};Wf.prototype.onRemove=function(){Ya.remove(this._container);this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons);this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",
this._rotateCompassArrow),this._handler.off(),delete this._handler);delete this._map};Wf.prototype._createButton=function(V,Y){V=Ya.create("button",V,this._container);return V.type="button",V.addEventListener("click",Y),V};Wf.prototype._setButtonTitle=function(V,Y){Y=this._map._getUIString("NavigationControl."+Y);V.title=Y;V.setAttribute("aria-label",Y)};var Ge=function(V,Y,W){void 0===W&&(W=!1);this._clickTolerance=10;this.element=Y;this.mouseRotate=new nj({clickTolerance:V.dragRotate._mouseRotate._clickTolerance});
this.map=V;W&&(this.mousePitch=new Mi({clickTolerance:V.dragRotate._mousePitch._clickTolerance}));a.bindAll("mousedown mousemove mouseup touchstart touchmove touchend reset".split(" "),this);Ya.addEventListener(Y,"mousedown",this.mousedown);Ya.addEventListener(Y,"touchstart",this.touchstart,{passive:!1});Ya.addEventListener(Y,"touchmove",this.touchmove);Ya.addEventListener(Y,"touchend",this.touchend);Ya.addEventListener(Y,"touchcancel",this.reset)};Ge.prototype.down=function(V,Y){this.mouseRotate.mousedown(V,
Y);this.mousePitch&&this.mousePitch.mousedown(V,Y);Ya.disableDrag()};Ge.prototype.move=function(V,Y){var W=this.map,ca=this.mouseRotate.mousemoveWindow(V,Y);(ca&&ca.bearingDelta&&W.setBearing(W.getBearing()+ca.bearingDelta),this.mousePitch)&&(V=this.mousePitch.mousemoveWindow(V,Y))&&V.pitchDelta&&W.setPitch(W.getPitch()+V.pitchDelta)};Ge.prototype.off=function(){var V=this.element;Ya.removeEventListener(V,"mousedown",this.mousedown);Ya.removeEventListener(V,"touchstart",this.touchstart,{passive:!1});
Ya.removeEventListener(V,"touchmove",this.touchmove);Ya.removeEventListener(V,"touchend",this.touchend);Ya.removeEventListener(V,"touchcancel",this.reset);this.offTemp()};Ge.prototype.offTemp=function(){Ya.enableDrag();Ya.removeEventListener(a.window,"mousemove",this.mousemove);Ya.removeEventListener(a.window,"mouseup",this.mouseup)};Ge.prototype.mousedown=function(V){this.down(a.extend({},V,{ctrlKey:!0,preventDefault:function(){return V.preventDefault()}}),Ya.mousePos(this.element,V));Ya.addEventListener(a.window,
"mousemove",this.mousemove);Ya.addEventListener(a.window,"mouseup",this.mouseup)};Ge.prototype.mousemove=function(V){this.move(V,Ya.mousePos(this.element,V))};Ge.prototype.mouseup=function(V){this.mouseRotate.mouseupWindow(V);this.mousePitch&&this.mousePitch.mouseupWindow(V);this.offTemp()};Ge.prototype.touchstart=function(V){1!==V.targetTouches.length?this.reset():(this._startPos=this._lastPos=Ya.touchPos(this.element,V.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return V.preventDefault()}},
this._startPos))};Ge.prototype.touchmove=function(V){1!==V.targetTouches.length?this.reset():(this._lastPos=Ya.touchPos(this.element,V.targetTouches)[0],this.move({preventDefault:function(){return V.preventDefault()}},this._lastPos))};Ge.prototype.touchend=function(V){0===V.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click();this.reset()};Ge.prototype.reset=function(){this.mouseRotate.reset();this.mousePitch&&this.mousePitch.reset();
delete this._startPos;delete this._lastPos;this.offTemp()};var Wg={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},Xg,Oi=function(V){function Y(W,ca){var ua=this;if(V.call(this),(W instanceof a.window.HTMLElement||ca)&&(W=a.extend({element:W},ca)),a.bindAll("_update _onMove _onUp _addDragHandler _onMapClick _onKeyPress".split(" "),
this),this._anchor=W&&W.anchor||"center",this._color=W&&W.color||"#3FB1CE",this._draggable=W&&W.draggable||!1,this._state="inactive",this._rotation=W&&W.rotation||0,this._rotationAlignment=W&&W.rotationAlignment||"auto",this._pitchAlignment=W&&W.pitchAlignment&&"auto"!==W.pitchAlignment?W.pitchAlignment:this._rotationAlignment,W&&W.element)this._element=W.element,this._offset=a.Point.convert(W&&W.offset||[0,0]);else{this._defaultMarker=!0;this._element=Ya.create("div");this._element.setAttribute("aria-label",
"Map marker");ca=Ya.createNS("http://www.w3.org/2000/svg","svg");ca.setAttributeNS(null,"display","block");ca.setAttributeNS(null,"height","41px");ca.setAttributeNS(null,"width","27px");ca.setAttributeNS(null,"viewBox","0 0 27 41");var Fa=Ya.createNS("http://www.w3.org/2000/svg","g");Fa.setAttributeNS(null,"stroke","none");Fa.setAttributeNS(null,"stroke-width","1");Fa.setAttributeNS(null,"fill","none");Fa.setAttributeNS(null,"fill-rule","evenodd");Fa=Ya.createNS("http://www.w3.org/2000/svg","g");
Fa.setAttributeNS(null,"fill-rule","nonzero");var Qa=Ya.createNS("http://www.w3.org/2000/svg","g");Qa.setAttributeNS(null,"transform","translate(3.0, 29.0)");Qa.setAttributeNS(null,"fill","#000000");for(var Za=0,wb=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];Za<wb.length;Za+=1){var Db=wb[Za],Eb=Ya.createNS("http://www.w3.org/2000/svg",
"ellipse");Eb.setAttributeNS(null,"opacity","0.04");Eb.setAttributeNS(null,"cx","10.5");Eb.setAttributeNS(null,"cy","5.80029008");Eb.setAttributeNS(null,"rx",Db.rx);Eb.setAttributeNS(null,"ry",Db.ry);Qa.appendChild(Eb)}Za=Ya.createNS("http://www.w3.org/2000/svg","g");Za.setAttributeNS(null,"fill",this._color);wb=Ya.createNS("http://www.w3.org/2000/svg","path");wb.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z");
Za.appendChild(wb);wb=Ya.createNS("http://www.w3.org/2000/svg","g");wb.setAttributeNS(null,"opacity","0.25");wb.setAttributeNS(null,"fill","#000000");Db=Ya.createNS("http://www.w3.org/2000/svg","path");Db.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z");
wb.appendChild(Db);Db=Ya.createNS("http://www.w3.org/2000/svg","g");Db.setAttributeNS(null,"transform","translate(6.0, 7.0)");Db.setAttributeNS(null,"fill","#FFFFFF");Eb=Ya.createNS("http://www.w3.org/2000/svg","g");Eb.setAttributeNS(null,"transform","translate(8.0, 8.0)");var kc=Ya.createNS("http://www.w3.org/2000/svg","circle");kc.setAttributeNS(null,"fill","#000000");kc.setAttributeNS(null,"opacity","0.25");kc.setAttributeNS(null,"cx","5.5");kc.setAttributeNS(null,"cy","5.5");kc.setAttributeNS(null,
"r","5.4999962");var jc=Ya.createNS("http://www.w3.org/2000/svg","circle");jc.setAttributeNS(null,"fill","#FFFFFF");jc.setAttributeNS(null,"cx","5.5");jc.setAttributeNS(null,"cy","5.5");jc.setAttributeNS(null,"r","5.4999962");Eb.appendChild(kc);Eb.appendChild(jc);Fa.appendChild(Qa);Fa.appendChild(Za);Fa.appendChild(wb);Fa.appendChild(Db);Fa.appendChild(Eb);ca.appendChild(Fa);this._element.appendChild(ca);this._offset=a.Point.convert(W&&W.offset||[0,-14])}this._element.classList.add("mapboxgl-marker");
this._element.addEventListener("dragstart",function($b){$b.preventDefault()});this._element.addEventListener("mousedown",function($b){$b.preventDefault()});this._element.addEventListener("focus",function(){var $b=ua._map.getContainer();$b.scrollTop=0;$b.scrollLeft=0});db(this._element,this._anchor,"marker");this._popup=null}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.addTo=function(W){return this.remove(),this._map=W,W.getCanvasContainer().appendChild(this._element),
W.on("move",this._update),W.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},Y.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",
this._onMove),this._map.off("touchmove",this._onMove),delete this._map),Ya.remove(this._element),this._popup&&this._popup.remove(),this},Y.prototype.getLngLat=function(){return this._lngLat},Y.prototype.setLngLat=function(W){return this._lngLat=a.LngLat.convert(W),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},Y.prototype.getElement=function(){return this._element},Y.prototype.setPopup=function(W){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",
this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),W){if(!("offset"in W.options)){var ca=Math.sqrt(Math.pow(13.5,2)/2);W.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[ca,-1*(24.6+ca)],"bottom-right":[-ca,-1*(24.6+ca)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=W;this._lngLat&&this._popup.setLngLat(this._lngLat);(this._originalTabIndex=this._element.getAttribute("tabindex"))||this._element.setAttribute("tabindex",
"0");this._element.addEventListener("keypress",this._onKeyPress)}return this},Y.prototype._onKeyPress=function(W){var ca=W.code;W=W.charCode||W.keyCode;"Space"!==ca&&"Enter"!==ca&&32!==W&&13!==W||this.togglePopup()},Y.prototype._onMapClick=function(W){W=W.originalEvent.target;var ca=this._element;this._popup&&(W===ca||ca.contains(W))&&this.togglePopup()},Y.prototype.getPopup=function(){return this._popup},Y.prototype.togglePopup=function(){var W=this._popup;return W?(W.isOpen()?W.remove():W.addTo(this._map),
this):this},Y.prototype._update=function(W){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Sa(this._lngLat,this._pos,this._map.transform));this._pos=this._map.project(this._lngLat)._add(this._offset);var ca="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?ca="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(ca="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var ua="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?
ua="rotateX(0deg)":"map"===this._pitchAlignment&&(ua="rotateX("+this._map.getPitch()+"deg)");W&&"moveend"!==W.type||(this._pos=this._pos.round());Ya.setTransform(this._element,Wg[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+ua+" "+ca)}},Y.prototype.getOffset=function(){return this._offset},Y.prototype.setOffset=function(W){return this._offset=a.Point.convert(W),this._update(),this},Y.prototype._onMove=function(W){this._pos=W.point.sub(this._positionDelta);this._lngLat=this._map.unproject(this._pos);
this.setLngLat(this._lngLat);this._element.style.pointerEvents="none";"pending"===this._state&&(this._state="active",this.fire(new a.Event("dragstart")));this.fire(new a.Event("drag"))},Y.prototype._onUp=function(){this._element.style.pointerEvents="auto";this._positionDelta=null;this._map.off("mousemove",this._onMove);this._map.off("touchmove",this._onMove);"active"===this._state&&this.fire(new a.Event("dragend"));this._state="inactive"},Y.prototype._addDragHandler=function(W){this._element.contains(W.originalEvent.target)&&
(W.preventDefault(),this._positionDelta=W.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},Y.prototype.setDraggable=function(W){return this._draggable=!!W,this._map&&(W?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",
this._addDragHandler))),this},Y.prototype.isDraggable=function(){return this._draggable},Y.prototype.setRotation=function(W){return this._rotation=W||0,this._update(),this},Y.prototype.getRotation=function(){return this._rotation},Y.prototype.setRotationAlignment=function(W){return this._rotationAlignment=W||"auto",this._update(),this},Y.prototype.getRotationAlignment=function(){return this._rotationAlignment},Y.prototype.setPitchAlignment=function(W){return this._pitchAlignment=W&&"auto"!==W?W:this._rotationAlignment,
this._update(),this},Y.prototype.getPitchAlignment=function(){return this._pitchAlignment},Y}(a.Evented),cg={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6E3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Yg=0,Oh=!1,vg=function(V){function Y(W){V.call(this);this.options=a.extend({},cg,W);a.bindAll("_onSuccess _onError _onZoom _finish _setupUI _updateCamera _updateMarker".split(" "),this)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&
V.prototype)).constructor=Y,Y.prototype.onAdd=function(W){var ca;return this._map=W,this._container=Ya.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),ca=this._setupUI,void 0!==Xg?ca(Xg):void 0!==a.window.navigator.permissions?a.window.navigator.permissions.query({name:"geolocation"}).then(function(ua){ca(Xg="denied"!==ua.state)}):ca(Xg=!!a.window.navigator.geolocation),this._container},Y.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(a.window.navigator.geolocation.clearWatch(this._geolocationWatchID),
this._geolocationWatchID=void 0);this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove();this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove();Ya.remove(this._container);this._map.off("zoom",this._onZoom);this._map=void 0;Yg=0;Oh=!1},Y.prototype._isOutOfMapMaxBounds=function(W){var ca=this._map.getMaxBounds();W=W.coords;return ca&&(W.longitude<ca.getWest()||W.longitude>ca.getEast()||W.latitude<ca.getSouth()||W.latitude>
ca.getNorth())},Y.prototype._setErrorState=function(){switch(this._watchState){case "WAITING_ACTIVE":this._watchState="ACTIVE_ERROR";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case "ACTIVE_LOCK":this._watchState="ACTIVE_ERROR";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");
break;case "BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},Y.prototype._onSuccess=function(W){if(this._map){if(this._isOutOfMapMaxBounds(W))return this._setErrorState(),this.fire(new a.Event("outofmaxbounds",W)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=
W,this._watchState){case "WAITING_ACTIVE":case "ACTIVE_LOCK":case "ACTIVE_ERROR":this._watchState="ACTIVE_LOCK";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case "BACKGROUND":case "BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),
this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(W);this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(W);this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale");this.fire(new a.Event("geolocate",W));this._finish()}},Y.prototype._updateCamera=function(W){var ca=new a.LngLat(W.coords.longitude,W.coords.latitude);W=W.coords.accuracy;
var ua=this._map.getBearing();ua=a.extend({bearing:ua},this.options.fitBoundsOptions);this._map.fitBounds(ca.toBounds(W),ua,{geolocateSource:!0})},Y.prototype._updateMarker=function(W){if(W){var ca=new a.LngLat(W.coords.longitude,W.coords.latitude);this._accuracyCircleMarker.setLngLat(ca).addTo(this._map);this._userLocationDotMarker.setLngLat(ca).addTo(this._map);this._accuracy=W.coords.accuracy;this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),
this._accuracyCircleMarker.remove()},Y.prototype._updateCircleRadius=function(){var W=this._map._container.clientHeight/2,ca=this._map.unproject([0,W]);W=this._map.unproject([1,W]);ca=ca.distanceTo(W);ca=Math.ceil(2*this._accuracy/ca);this._circleElement.style.width=ca+"px";this._circleElement.style.height=ca+"px"},Y.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},Y.prototype._onError=function(W){if(this._map){if(this.options.trackUserLocation)if(1===
W.code){this._watchState="OFF";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error");this._geolocateButton.disabled=!0;var ca=this._map._getUIString("GeolocateControl.LocationNotAvailable");
this._geolocateButton.title=ca;this._geolocateButton.setAttribute("aria-label",ca);void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===W.code&&Oh)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale");this.fire(new a.Event("error",W));this._finish()}},Y.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId);this._timeoutId=void 0},Y.prototype._setupUI=function(W){var ca=
this;(this._container.addEventListener("contextmenu",function(ua){return ua.preventDefault()}),this._geolocateButton=Ya.create("button","mapboxgl-ctrl-geolocate",this._container),Ya.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===W)?(a.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled."),W=this._map._getUIString("GeolocateControl.LocationNotAvailable"),this._geolocateButton.disabled=
!0,this._geolocateButton.title=W,this._geolocateButton.setAttribute("aria-label",W)):(W=this._map._getUIString("GeolocateControl.FindMyLocation"),this._geolocateButton.title=W,this._geolocateButton.setAttribute("aria-label",W));this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF");this.options.showUserLocation&&(this._dotElement=Ya.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Oi(this._dotElement),this._circleElement=
Ya.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Oi({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom));this._geolocateButton.addEventListener("click",this.trigger.bind(this));this._setup=!0;this.options.trackUserLocation&&this._map.on("movestart",function(ua){ua.geolocateSource||"ACTIVE_LOCK"!==ca._watchState||ua.originalEvent&&"resize"===ua.originalEvent.type||(ca._watchState=
"BACKGROUND",ca._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),ca._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),ca.fire(new a.Event("trackuserlocationend")))})},Y.prototype.trigger=function(){if(!this._setup)return a.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case "OFF":this._watchState="WAITING_ACTIVE";this.fire(new a.Event("trackuserlocationstart"));break;case "WAITING_ACTIVE":case "ACTIVE_LOCK":case "ACTIVE_ERROR":case "BACKGROUND_ERROR":Yg--;
Oh=!1;this._watchState="OFF";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error");this.fire(new a.Event("trackuserlocationend"));break;case "BACKGROUND":this._watchState=
"ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.Event("trackuserlocationstart"))}switch(this._watchState){case "WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case "ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case "ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");
this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case "BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case "BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var W;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");
this._geolocateButton.setAttribute("aria-pressed","true");1<++Yg?(W={maximumAge:6E5,timeout:0},Oh=!0):(W=this.options.positionOptions,Oh=!1);this._geolocationWatchID=a.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,W)}}else a.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1E4);return!0},Y.prototype._clearWatch=function(){a.window.navigator.geolocation.clearWatch(this._geolocationWatchID);
this._geolocationWatchID=void 0;this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.setAttribute("aria-pressed","false");this.options.showUserLocation&&this._updateMarker(null)},Y}(a.Evented),wg={maxWidth:100,unit:"metric"},Kf=function(V){this.options=a.extend({},wg,V);a.bindAll(["_onMove","setUnit"],this)};Kf.prototype.getDefaultPosition=function(){return"bottom-left"};Kf.prototype._onMove=function(){eb(this._map,this._container,this.options)};Kf.prototype.onAdd=
function(V){return this._map=V,this._container=Ya.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",V.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container};Kf.prototype.onRemove=function(){Ya.remove(this._container);this._map.off("move",this._onMove);this._map=void 0};Kf.prototype.setUnit=function(V){this.options.unit=V;eb(this._map,this._container,this.options)};var Xf=function(V){this._fullscreen=!1;V&&V.container&&(V.container instanceof a.window.HTMLElement?this._container=
V.container:a.warnOnce("Full screen control 'container' must be a DOM element."));a.bindAll(["_onClickFullscreen","_changeIcon"],this);"onfullscreenchange"in a.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in a.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in a.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in a.window.document&&(this._fullscreenchange="MSFullscreenChange")};Xf.prototype.onAdd=
function(V){return this._map=V,this._container||(this._container=this._map.getContainer()),this._controlContainer=Ya.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",a.warnOnce("This device does not support fullscreen mode.")),this._controlContainer};Xf.prototype.onRemove=function(){Ya.remove(this._controlContainer);this._map=null;a.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)};
Xf.prototype._checkFullscreenSupport=function(){return!!(a.window.document.fullscreenEnabled||a.window.document.mozFullScreenEnabled||a.window.document.msFullscreenEnabled||a.window.document.webkitFullscreenEnabled)};Xf.prototype._setupUI=function(){var V=this._fullscreenButton=Ya.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);Ya.create("span","mapboxgl-ctrl-icon",V).setAttribute("aria-hidden",!0);V.type="button";this._updateTitle();this._fullscreenButton.addEventListener("click",
this._onClickFullscreen);a.window.document.addEventListener(this._fullscreenchange,this._changeIcon)};Xf.prototype._updateTitle=function(){var V=this._getTitle();this._fullscreenButton.setAttribute("aria-label",V);this._fullscreenButton.title=V};Xf.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")};Xf.prototype._isFullscreen=function(){return this._fullscreen};Xf.prototype._changeIcon=function(){(a.window.document.fullscreenElement||
a.window.document.mozFullScreenElement||a.window.document.webkitFullscreenElement||a.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())};Xf.prototype._onClickFullscreen=function(){this._isFullscreen()?a.window.document.exitFullscreen?a.window.document.exitFullscreen():a.window.document.mozCancelFullScreen?
a.window.document.mozCancelFullScreen():a.window.document.msExitFullscreen?a.window.document.msExitFullscreen():a.window.document.webkitCancelFullScreen&&a.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};
var Xj={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},Pi=function(V){function Y(W){V.call(this);this.options=a.extend(Object.create(Xj),W);a.bindAll("_update _onClose remove _onMouseMove _onMouseUp _onDrag".split(" "),this)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.addTo=function(W){return this._map&&this.remove(),this._map=W,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",
this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new a.Event("open")),this},Y.prototype.isOpen=function(){return!!this._map},Y.prototype.remove=function(){return this._content&&Ya.remove(this._content),
this._container&&(Ya.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new a.Event("close")),this},Y.prototype.getLngLat=function(){return this._lngLat},Y.prototype.setLngLat=function(W){return this._lngLat=
a.LngLat.convert(W),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},Y.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),
this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},Y.prototype.getElement=function(){return this._container},Y.prototype.setText=function(W){return this.setDOMContent(a.window.document.createTextNode(W))},Y.prototype.setHTML=function(W){var ca=a.window.document.createDocumentFragment(),ua=a.window.document.createElement("body");for(ua.innerHTML=W;W=ua.firstChild;)ca.appendChild(W);
return this.setDOMContent(ca)},Y.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},Y.prototype.setMaxWidth=function(W){return this.options.maxWidth=W,this._update(),this},Y.prototype.setDOMContent=function(W){return this._createContent(),this._content.appendChild(W),this._update(),this},Y.prototype.addClassName=function(W){this._container&&this._container.classList.add(W)},Y.prototype.removeClassName=function(W){this._container&&this._container.classList.remove(W)},
Y.prototype.toggleClassName=function(W){if(this._container)return this._container.classList.toggle(W)},Y.prototype._createContent=function(){this._content&&Ya.remove(this._content);this._content=Ya.create("div","mapboxgl-popup-content",this._container);this.options.closeButton&&(this._closeButton=Ya.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",
this._onClose))},Y.prototype._onMouseUp=function(W){this._update(W.point)},Y.prototype._onMouseMove=function(W){this._update(W.point)},Y.prototype._onDrag=function(W){this._update(W.point)},Y.prototype._update=function(W){var ca=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=Ya.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=Ya.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&
this.options.className.split(" ").forEach(function(Za){return ca._container.classList.add(Za)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Sa(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||W)){W=this._pos=this._trackPointer&&W?W:this._map.project(this._lngLat);
var ua=this.options.anchor,Fa=function Db(wb){if(wb){if("number"==typeof wb){var Eb=Math.round(Math.sqrt(.5*Math.pow(wb,2)));return{center:new a.Point(0,0),top:new a.Point(0,wb),"top-left":new a.Point(Eb,Eb),"top-right":new a.Point(-Eb,Eb),bottom:new a.Point(0,-wb),"bottom-left":new a.Point(Eb,-Eb),"bottom-right":new a.Point(-Eb,-Eb),left:new a.Point(wb,0),right:new a.Point(-wb,0)}}return wb instanceof a.Point||Array.isArray(wb)?(wb=a.Point.convert(wb),{center:wb,top:wb,"top-left":wb,"top-right":wb,
bottom:wb,"bottom-left":wb,"bottom-right":wb,left:wb,right:wb}):{center:a.Point.convert(wb.center||[0,0]),top:a.Point.convert(wb.top||[0,0]),"top-left":a.Point.convert(wb["top-left"]||[0,0]),"top-right":a.Point.convert(wb["top-right"]||[0,0]),bottom:a.Point.convert(wb.bottom||[0,0]),"bottom-left":a.Point.convert(wb["bottom-left"]||[0,0]),"bottom-right":a.Point.convert(wb["bottom-right"]||[0,0]),left:a.Point.convert(wb.left||[0,0]),right:a.Point.convert(wb.right||[0,0])}}return Db(new a.Point(0,0))}(this.options.offset);
if(!ua){ua=this._container.offsetWidth;var Qa=this._container.offsetHeight;Qa=W.y+Fa.bottom.y<Qa?["top"]:W.y>this._map.transform.height-Qa?["bottom"]:[];W.x<ua/2?Qa.push("left"):W.x>this._map.transform.width-ua/2&&Qa.push("right");ua=0===Qa.length?"bottom":Qa.join("-")}W=W.add(Fa[ua]).round();Ya.setTransform(this._container,Wg[ua]+" translate("+W.x+"px,"+W.y+"px)");db(this._container,ua,"popup")}},Y.prototype._onClose=function(){this.remove()},Y}(a.Evented),Qi={version:a.version,supported:ab,setRTLTextPlugin:a.setRTLTextPlugin,
getRTLTextPluginStatus:a.getRTLTextPluginStatus,Map:wk,NavigationControl:Wf,GeolocateControl:vg,AttributionControl:kg,ScaleControl:Kf,FullscreenControl:Xf,Popup:Pi,Marker:Oi,Style:kd,LngLat:a.LngLat,LngLatBounds:a.LngLatBounds,Point:a.Point,MercatorCoordinate:a.MercatorCoordinate,Evented:a.Evented,config:a.config,prewarm:function(){(Dd||(Dd=new ze),Dd).acquire("mapboxgl_preloaded_worker_pool")},clearPrewarmedResources:function(){var V=Dd;V&&(V.isPreloaded()&&1===V.numActive()?(V.release("mapboxgl_preloaded_worker_pool"),
Dd=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return a.config.ACCESS_TOKEN},set accessToken(V){a.config.ACCESS_TOKEN=V},get baseApiUrl(){return a.config.API_URL},set baseApiUrl(V){a.config.API_URL=V},get workerCount(){return ze.workerCount},set workerCount(V){ze.workerCount=V},get maxParallelImageRequests(){return a.config.MAX_PARALLEL_IMAGE_REQUESTS},
set maxParallelImageRequests(V){a.config.MAX_PARALLEL_IMAGE_REQUESTS=V},clearStorage:function(V){a.clearTileCache(V)},workerUrl:""};return Qi});return h})},{}],474:[function(b,K,G){function q(l,h,a){for(var g=Array(l),e=0;e<l;++e)g[e]=0,e===h&&(g[e]+=.5),e===a&&(g[e]+=.5);return g}K.exports=function(l){for(var h=1<<l+1,a=Array(h),g=0;g<h;++g){var e=g;var n=l,p=g;if(0===p||p===(1<<n+1)-1)var c=[];else{var d=[];c=[];for(var f=0;f<=n;++f)if(p&1<<f){d.push(q(n,f-1,f-1));c.push(null);for(var k=0;k<=n;++k)~p&
1<<k&&(d.push(q(n,f-1,k-1)),c.push([f,k]))}n=m(d);p=[];f=0;b:for(;f<n.length;++f){d=n[f];var r=[];for(k=0;k<d.length;++k){if(!c[d[k]])continue b;r.push(c[d[k]].slice())}p.push(r)}c=p}a[e]=c}return a};var m=b("convex-hull")},{"convex-hull":135}],475:[function(b,K,G){function q(k,r,u,v,x){k[0]=r[0]*v+u[0]*x;k[1]=r[1]*v+u[1]*x;k[2]=r[2]*v+u[2]*x}var m=b("./normalize");G=b("gl-mat4/create");var l=b("gl-mat4/clone"),h=b("gl-mat4/determinant"),a=b("gl-mat4/invert"),g=b("gl-mat4/transpose"),e={length:b("gl-vec3/length"),
normalize:b("gl-vec3/normalize"),dot:b("gl-vec3/dot"),cross:b("gl-vec3/cross")},n=G(),p=G(),c=[0,0,0,0],d=[[0,0,0],[0,0,0],[0,0,0]],f=[0,0,0];K.exports=function(k,r,u,v,x,C){r||(r=[0,0,0]);u||(u=[0,0,0]);v||(v=[0,0,0]);x||(x=[0,0,0,1]);C||(C=[0,0,0,1]);if(!m(n,k))return!1;l(p,n);p[3]=0;p[7]=0;p[11]=0;p[15]=1;if(Math.abs(1E-8>h(p)))return!1;var z=n[3],y=n[7],D=n[11];k=n[12];var A=n[13],t=n[14],B=n[15];if(0!==z||0!==y||0!==D){c[0]=z;c[1]=y;c[2]=D;c[3]=B;if(!a(p,p))return!1;g(p,p);z=c[0];y=c[1];D=c[2];
B=c[3];x[0]=p[0]*z+p[4]*y+p[8]*D+p[12]*B;x[1]=p[1]*z+p[5]*y+p[9]*D+p[13]*B;x[2]=p[2]*z+p[6]*y+p[10]*D+p[14]*B;x[3]=p[3]*z+p[7]*y+p[11]*D+p[15]*B}else x[0]=x[1]=x[2]=0,x[3]=1;r[0]=k;r[1]=A;r[2]=t;d[0][0]=n[0];d[0][1]=n[1];d[0][2]=n[2];d[1][0]=n[4];d[1][1]=n[5];d[1][2]=n[6];d[2][0]=n[8];d[2][1]=n[9];d[2][2]=n[10];u[0]=e.length(d[0]);e.normalize(d[0],d[0]);v[0]=e.dot(d[0],d[1]);q(d[1],d[1],d[0],1,-v[0]);u[1]=e.length(d[1]);e.normalize(d[1],d[1]);v[0]/=u[1];v[1]=e.dot(d[0],d[2]);q(d[2],d[2],d[0],1,-v[1]);
v[2]=e.dot(d[1],d[2]);q(d[2],d[2],d[1],1,-v[2]);u[2]=e.length(d[2]);e.normalize(d[2],d[2]);v[1]/=u[2];v[2]/=u[2];e.cross(f,d[1],d[2]);if(0>e.dot(d[0],f))for(r=0;3>r;r++)u[r]*=-1,d[r][0]*=-1,d[r][1]*=-1,d[r][2]*=-1;C[0]=.5*Math.sqrt(Math.max(1+d[0][0]-d[1][1]-d[2][2],0));C[1]=.5*Math.sqrt(Math.max(1-d[0][0]+d[1][1]-d[2][2],0));C[2]=.5*Math.sqrt(Math.max(1-d[0][0]-d[1][1]+d[2][2],0));C[3]=.5*Math.sqrt(Math.max(1+d[0][0]+d[1][1]+d[2][2],0));d[2][1]>d[1][2]&&(C[0]=-C[0]);d[0][2]>d[2][0]&&(C[1]=-C[1]);
d[1][0]>d[0][1]&&(C[2]=-C[2]);return!0}},{"./normalize":476,"gl-mat4/clone":278,"gl-mat4/create":280,"gl-mat4/determinant":281,"gl-mat4/invert":293,"gl-mat4/transpose":306,"gl-vec3/cross":365,"gl-vec3/dot":370,"gl-vec3/length":380,"gl-vec3/normalize":387}],476:[function(b,K,G){K.exports=function(q,m){var l=m[15];if(0===l)return!1;l=1/l;for(var h=0;16>h;h++)q[h]=m[h]*l;return!0}},{}],477:[function(b,K,G){function q(){return{translate:[0,0,0],scale:[1,1,1],skew:[0,0,0],perspective:[0,0,0,1],quaternion:[0,
0,0,1]}}var m=b("gl-vec3/lerp"),l=b("mat4-recompose"),h=b("mat4-decompose"),a=b("gl-mat4/determinant"),g=b("quat-slerp"),e=q(),n=q(),p=q();K.exports=function(c,d,f,k){if(0===a(d)||0===a(f))return!1;d=h(d,e.translate,e.scale,e.skew,e.perspective,e.quaternion);f=h(f,n.translate,n.scale,n.skew,n.perspective,n.quaternion);if(!d||!f)return!1;m(p.translate,e.translate,n.translate,k);m(p.skew,e.skew,n.skew,k);m(p.scale,e.scale,n.scale,k);m(p.perspective,e.perspective,n.perspective,k);g(p.quaternion,e.quaternion,
n.quaternion,k);l(c,p.translate,p.scale,p.skew,p.perspective,p.quaternion);return!0}},{"gl-mat4/determinant":281,"gl-vec3/lerp":381,"mat4-decompose":475,"mat4-recompose":478,"quat-slerp":527}],478:[function(b,K,G){var q={identity:b("gl-mat4/identity"),translate:b("gl-mat4/translate"),multiply:b("gl-mat4/multiply"),create:b("gl-mat4/create"),scale:b("gl-mat4/scale"),fromRotationTranslation:b("gl-mat4/fromRotationTranslation")};q.create();var m=q.create();K.exports=function(l,h,a,g,e,n){q.identity(l);
q.fromRotationTranslation(l,n,h);l[3]=e[0];l[7]=e[1];l[11]=e[2];l[15]=e[3];q.identity(m);0!==g[2]&&(m[9]=g[2],q.multiply(l,l,m));0!==g[1]&&(m[9]=0,m[8]=g[1],q.multiply(l,l,m));0!==g[0]&&(m[8]=0,m[4]=g[0],q.multiply(l,l,m));q.scale(l,l,a);return l}},{"gl-mat4/create":280,"gl-mat4/fromRotationTranslation":284,"gl-mat4/identity":291,"gl-mat4/multiply":295,"gl-mat4/scale":303,"gl-mat4/translate":305}],479:[function(b,K,G){K.exports=Math.log2||function(q){return Math.log(q)*Math.LOG2E}},{}],480:[function(b,
K,G){function q(k){this._components=k.slice();this._time=[0];this.prevMatrix=k.slice();this.nextMatrix=k.slice();this.computedMatrix=k.slice();this.computedInverse=k.slice();this.computedEye=[0,0,0];this.computedUp=[0,0,0];this.computedCenter=[0,0,0];this.computedRadius=[0];this._limits=[-Infinity,Infinity]}var m=b("binary-search-bounds"),l=b("mat4-interpolate"),h=b("gl-mat4/invert"),a=b("gl-mat4/rotateX"),g=b("gl-mat4/rotateY"),e=b("gl-mat4/rotateZ"),n=b("gl-mat4/lookAt"),p=b("gl-mat4/translate");
b("gl-mat4/scale");var c=b("gl-vec3/normalize"),d=[0,0,0];K.exports=function(k){k=k||{};return new q(k.matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};b=q.prototype;b.recalcMatrix=function(k){var r=this._time,u=m.le(r,k),v=this.computedMatrix;if(!(0>u)){var x=this._components;if(u===r.length-1)for(var C=16*u,z=0;16>z;++z)v[z]=x[C++];else{var y=r[u+1]-r[u];C=16*u;var D=this.prevMatrix,A=!0;for(z=0;16>z;++z)D[z]=x[C++];var t=this.nextMatrix;for(z=0;16>z;++z)t[z]=x[C++],A=A&&D[z]===t[z];if(1E-6>y||A)for(z=
0;16>z;++z)v[z]=D[z];else l(v,D,t,(k-r[u])/y)}z=this.computedUp;z[0]=v[1];z[1]=v[5];z[2]=v[9];c(z,z);z=this.computedInverse;h(z,v);k=this.computedEye;r=z[15];k[0]=z[12]/r;k[1]=z[13]/r;k[2]=z[14]/r;r=this.computedCenter;u=Math.exp(this.computedRadius[0]);for(z=0;3>z;++z)r[z]=k[z]-v[2+4*z]*u}};b.idle=function(k){if(!(k<this.lastT())){for(var r=this._components,u=r.length-16,v=0;16>v;++v)r.push(r[u++]);this._time.push(k)}};b.flush=function(k){k=m.gt(this._time,k)-2;0>k||(this._time.splice(0,k),this._components.splice(0,
16*k))};b.lastT=function(){return this._time[this._time.length-1]};b.lookAt=function(k,r,u,v){this.recalcMatrix(k);r=r||this.computedEye;u=u||d;v=v||this.computedUp;this.setMatrix(k,n(this.computedMatrix,r,u,v));for(v=k=0;3>v;++v)k+=Math.pow(u[v]-r[v],2);k=Math.log(Math.sqrt(k));this.computedRadius[0]=k};b.rotate=function(k,r,u,v){this.recalcMatrix(k);var x=this.computedInverse;r&&g(x,x,r);u&&a(x,x,u);v&&e(x,x,v);this.setMatrix(k,h(this.computedMatrix,x))};var f=[0,0,0];b.pan=function(k,r,u,v){f[0]=
-(r||0);f[1]=-(u||0);f[2]=-(v||0);this.recalcMatrix(k);r=this.computedInverse;p(r,r,f);this.setMatrix(k,h(r,r))};b.translate=function(k,r,u,v){f[0]=r||0;f[1]=u||0;f[2]=v||0;this.recalcMatrix(k);r=this.computedMatrix;p(r,r,f);this.setMatrix(k,r)};b.setMatrix=function(k,r){if(!(k<this.lastT()))for(this._time.push(k),k=0;16>k;++k)this._components.push(r[k])};b.setDistance=function(k,r){this.computedRadius[0]=r};b.setDistanceLimits=function(k,r){var u=this._limits;u[0]=k;u[1]=r};b.getDistanceLimits=function(k){var r=
this._limits;return k?(k[0]=r[0],k[1]=r[1],k):r}},{"binary-search-bounds":481,"gl-mat4/invert":293,"gl-mat4/lookAt":294,"gl-mat4/rotateX":300,"gl-mat4/rotateY":301,"gl-mat4/rotateZ":302,"gl-mat4/scale":303,"gl-mat4/translate":305,"gl-vec3/normalize":387,"mat4-interpolate":477}],481:[function(b,K,G){arguments[4][243][0].apply(G,arguments)},{dup:243}],482:[function(b,K,G){K.exports=function(m){var l=m.length;if(3>l){for(var h=Array(l),a=0;a<l;++a)h[a]=a;return 2===l&&m[0][0]===m[1][0]&&m[0][1]===m[1][1]?
[0]:h}h=Array(l);for(a=0;a<l;++a)h[a]=a;h.sort(function(d,f){var k=m[d][0]-m[f][0];return k?k:m[d][1]-m[f][1]});var g=[h[0],h[1]],e=[h[0],h[1]];for(a=2;a<l;++a){for(var n=h[a],p=m[n],c=g.length;1<c&&0>=q(m[g[c-2]],m[g[c-1]],p);)--c,g.pop();g.push(n);for(c=e.length;1<c&&0<=q(m[e[c-2]],m[e[c-1]],p);)--c,e.pop();e.push(n)}h=Array(e.length+g.length-2);a=l=0;for(n=g.length;a<n;++a)h[l++]=g[a];for(a=e.length-2;0<a;--a)h[l++]=e[a];return h};var q=b("robust-orientation")[3]},{"robust-orientation":548}],483:[function(b,
K,G){K.exports=function(m,l){function h(z){var y=!1;"altKey"in z&&(y=y||z.altKey!==v.alt,v.alt=!!z.altKey);"shiftKey"in z&&(y=y||z.shiftKey!==v.shift,v.shift=!!z.shiftKey);"ctrlKey"in z&&(y=y||z.ctrlKey!==v.control,v.control=!!z.ctrlKey);"metaKey"in z&&(y=y||z.metaKey!==v.meta,v.meta=!!z.metaKey);return y}function a(z,y){var D=q.x(y),A=q.y(y);"buttons"in y&&(z=y.buttons|0);if(z!==k||D!==r||A!==u||h(y))k=z|0,r=D||0,u=A||0,l&&l(k,r,u,v)}function g(z){a(0,z)}function e(){if(k||r||u||v.shift||v.alt||
v.meta||v.control)k=r=u=0,v.shift=v.alt=v.control=v.meta=!1,l&&l(0,0,0,v)}function n(z){h(z)&&l&&l(k,r,u,v)}function p(z){0===q.buttons(z)?a(0,z):a(k,z)}function c(z){a(k|q.buttons(z),z)}function d(z){a(k&~q.buttons(z),z)}function f(){x||(x=!0,m.addEventListener("mousemove",p),m.addEventListener("mousedown",c),m.addEventListener("mouseup",d),m.addEventListener("mouseleave",g),m.addEventListener("mouseenter",g),m.addEventListener("mouseout",g),m.addEventListener("mouseover",g),m.addEventListener("blur",
e),m.addEventListener("keyup",n),m.addEventListener("keydown",n),m.addEventListener("keypress",n),m!==window&&(window.addEventListener("blur",e),window.addEventListener("keyup",n),window.addEventListener("keydown",n),window.addEventListener("keypress",n)))}l||(l=m,m=window);var k=0,r=0,u=0,v={shift:!1,alt:!1,control:!1,meta:!1},x=!1;f();var C={element:m};Object.defineProperties(C,{enabled:{get:function(){return x},set:function(z){z?f():x&&(x=!1,m.removeEventListener("mousemove",p),m.removeEventListener("mousedown",
c),m.removeEventListener("mouseup",d),m.removeEventListener("mouseleave",g),m.removeEventListener("mouseenter",g),m.removeEventListener("mouseout",g),m.removeEventListener("mouseover",g),m.removeEventListener("blur",e),m.removeEventListener("keyup",n),m.removeEventListener("keydown",n),m.removeEventListener("keypress",n),m!==window&&(window.removeEventListener("blur",e),window.removeEventListener("keyup",n),window.removeEventListener("keydown",n),window.removeEventListener("keypress",n)))},enumerable:!0},
buttons:{get:function(){return k},enumerable:!0},x:{get:function(){return r},enumerable:!0},y:{get:function(){return u},enumerable:!0},mods:{get:function(){return v},enumerable:!0}});return C};var q=b("mouse-event")},{"mouse-event":485}],484:[function(b,K,G){var q={left:0,top:0};K.exports=function(m,l,h){l=l||m.currentTarget||m.srcElement;Array.isArray(h)||(h=[0,0]);var a=m.clientX||0;m=m.clientY||0;l=l===window||l===document||l===document.body?q:l.getBoundingClientRect();h[0]=a-l.left;h[1]=m-l.top;
return h}},{}],485:[function(b,K,G){function q(m){return m.target||m.srcElement||window}G.buttons=function(m){if("object"===typeof m){if("buttons"in m)return m.buttons;if("which"in m){m=m.which;if(2===m)return 4;if(3===m)return 2;if(0<m)return 1<<m-1}else if("button"in m){m=m.button;if(1===m)return 4;if(2===m)return 2;if(0<=m)return 1<<m}}return 0};G.element=q;G.x=function(m){if("object"===typeof m){if("offsetX"in m)return m.offsetX;var l=q(m).getBoundingClientRect();return m.clientX-l.left}return 0};
G.y=function(m){if("object"===typeof m){if("offsetY"in m)return m.offsetY;var l=q(m).getBoundingClientRect();return m.clientY-l.top}return 0}},{}],486:[function(b,K,G){var q=b("to-px");K.exports=function(m,l,h){"function"===typeof m&&(h=!!l,l=m,m=window);var a=q("ex",m),g=function(e){h&&e.preventDefault();var n=e.deltaX||0,p=e.deltaY||0,c=e.deltaZ||0,d=1;switch(e.deltaMode){case 1:d=a;break;case 2:d=window.innerHeight}n*=d;p*=d;c*=d;if(n||p||c)return l(n,p,c,e)};m.addEventListener("wheel",g);return g}},
{"to-px":578}],487:[function(b,K,G){function q(c,d,f){for(var k=0,r=0;r<c;++r)d&1<<r&&(k|=1<<f[r]);return k}function m(c,d,f,k,r,u){function v(P,M){t.push("for(","i"+r[P],"=",M,";","i"+r[P],"<","s"+r[P],";","++","i"+r[P],"){")}function x(P){for(var M=0;M<y;++M)t.push("p"+M,"+=","u"+M+"_"+r[P],";");t.push("}")}function C(){for(var P=1;P<1<<D;++P)t.push(p,"=","e"+P,";","e"+P,"=","y"+P,";","y"+P,"=",p,";")}function z(P,M){if(0>P){for(var N=0;N<y;++N)u[N]?t.push("c"+N+"_0","=","d"+N,".get(","p"+N,");"):
t.push("c"+N+"_0","=","d"+N,"[","p"+N,"];");P=[];for(N=0;N<y;++N)P.push("c"+N+"_0");for(N=0;N<k;++N)P.push("x"+N);t.push("b0","=",a,"[",n,"]=phase(",P.join(),");");for(P=1;P<1<<D;++P)t.push("b"+P,"=",a,"[",n,"+","e"+P,"];");N=[];for(P=1;P<1<<D;++P)N.push("(b0!==b"+P+")");t.push("if(",N.join("||"),"){");var T=[];for(N=0;N<D;++N)T.push("i"+N);for(N=0;N<y;++N)for(T.push("c"+N+"_0"),P=1;P<1<<D;++P)u[N]?t.push("c"+N+"_"+P,"=","d"+N,".get(","p"+N,"+","d"+N+"_"+P,");"):t.push("c"+N+"_"+P,"=","d"+N,"[","p"+
N,"+","d"+N+"_"+P,"];"),T.push("c"+N+"_"+P);for(N=0;N<1<<D;++N)T.push("b"+N);for(N=0;N<k;++N)T.push("x"+N);t.push("vertex(",T.join(),");","v0","=",h,"[",n,"]=",g,"++;");N=(1<<D)-1;T="b"+N;for(P=0;P<D;++P)if(0===(M&~(1<<P))){for(var Q=N^1<<P,U="b"+Q,S=[],X=Q;0<X;X=X-1&Q)S.push(h+"["+n+"+e"+X+"]");S.push("v0");for(X=0;X<y;++X)P&1?S.push("c"+X+"_"+N,"c"+X+"_"+Q):S.push("c"+X+"_"+Q,"c"+X+"_"+N);P&1?S.push(T,U):S.push(U,T);for(X=0;X<k;++X)S.push("x"+X);t.push("if(",T,"!==",U,"){","face(",S.join(),")}")}t.push("}",
n,"+=1;")}else{for(N=P-1;0<=N;--N)v(N,0);T=[];for(N=0;N<y;++N)u[N]?T.push("d"+N+".get(p"+N+")"):T.push("d"+N+"[p"+N+"]");for(N=0;N<k;++N)T.push("x"+N);t.push(a,"[",n,"++]=phase(",T.join(),");");for(N=0;N<P;++N)x(N);for(N=0;N<y;++N)t.push("p"+N,"+=","u"+N+"_"+r[P],";");t.push("if(","s"+r[P],">0){","i"+r[P],"=1;");z(P-1,M|1<<r[P]);for(N=0;N<y;++N)t.push("p"+N,"+=","u"+N+"_"+r[P],";");P===D-1&&(t.push(n,"=0;"),C());v(P,2);z(P-1,M);P===D-1&&(t.push("if(","i"+r[D-1],"&1){",n,"=0;}"),C());x(P);t.push("}")}}
var y=u.length,D=r.length;if(2>D)throw Error("ndarray-extract-contour: Dimension must be at least 2");for(var A="extractContour"+r.join("_"),t=[],B=[],F=[],I=0;I<y;++I)F.push("a"+I);for(I=0;I<k;++I)F.push("x"+I);for(I=0;I<D;++I)B.push("s"+I+"=a0.shape["+I+"]|0");for(I=0;I<y;++I){B.push("d"+I+"=a"+I+".data","o"+I+"=a"+I+".offset|0");for(var J=0;J<D;++J)B.push("t"+I+"_"+J+"=a"+I+".stride["+J+"]|0")}for(I=0;I<y;++I)for(B.push("p"+I+"=o"+I),B.push("c"+I+"_0"),J=1;J<1<<D;++J){for(var L=[],H=0;H<D;++H)J&
1<<H&&L.push("-t"+(I+"_"+H));B.push("d"+I+"_"+J+"=("+L.join("")+")|0");B.push("c"+I+"_"+J+"=0")}for(I=0;I<y;++I)for(J=0;J<D;++J)H=["t"+I+"_"+r[J]],0<J&&H.push("t"+I+"_"+r[J-1]+"*s"+r[J-1]),B.push("u"+I+"_"+r[J]+"=("+H.join("-")+")|0");for(I=0;I<D;++I)B.push("i"+I+"=0");B.push(g+"=0");J=["2"];for(I=D-2;0<=I;--I)J.push("s"+r[I]);B.push(e+"=("+J.join("*")+")|0",a+"=mallocUint32("+e+")",h+"=mallocUint32("+e+")",n+"=0");B.push("b0=0");for(J=1;J<1<<D;++J){I=[];L=[];for(H=0;H<D;++H)J&1<<H&&(0===L.length?
I.push("1"):I.unshift(L.join("*"))),L.push("s"+r[H]);H="";0>I[0].indexOf("s"+r[D-2])&&(H="-");L=q(D,J,r);B.push("e"+L+"=(-"+I.join("-")+")|0","y"+L+"=("+H+I.join("-")+")|0","b"+L+"=0")}B.push("v0=0",p+"=0");z(D-1,0);t.push("freeUint32(",h,");freeUint32(",a,");");A=["'use strict';function ",A,"(",F.join(),"){var ",B.join(),";",t.join(""),"}return ",A].join("");return(new Function("vertex","face","phase","mallocUint32","freeUint32",A))(c,d,f,l.mallocUint32,l.freeUint32)}var l=b("typedarray-pool");K.exports=
function(c){function d(C){throw Error("ndarray-extract-contour: "+C);}"object"!==typeof c&&d("Must specify arguments");var f=c.order;Array.isArray(f)||d("Must specify order");var k=c.arrayArguments||1;1>k&&d("Must have at least one array argument");var r=c.scalarArguments||0;0>r&&d("Scalar arg count must be > 0");"function"!==typeof c.vertex&&d("Must specify vertex creation function");"function"!==typeof c.cell&&d("Must specify cell creation function");"function"!==typeof c.phase&&d("Must specify phase function");
for(var u=c.getters||[],v=Array(k),x=0;x<k;++x)0<=u.indexOf(x)?v[x]=!0:v[x]=!1;return m(c.vertex,c.cell,c.phase,r,f,v)};var h="V",a="P",g="N",e="Q",n="X",p="T"},{"typedarray-pool":595}],488:[function(b,K,G){function q(p){if(p in h)return h[p];for(var c=[],d=0;d<p;++d)c.push("out",d,"s=0.5*(inp",d,"l-inp",d,"r);");var f=["array"],k=["junk"];for(d=0;d<p;++d){f.push("array");k.push("out"+d+"s");var r=m(p);r[d]=-1;f.push({array:0,offset:r.slice()});r[d]=1;f.push({array:0,offset:r.slice()});k.push("inp"+
d+"l","inp"+d+"r")}return h[p]=l({args:f,pre:g,post:g,body:{body:c.join(""),args:k.map(function(u){return{name:u,lvalue:0===u.indexOf("out"),rvalue:0===u.indexOf("inp"),count:"junk"!==u|0}}),thisVars:[],localVars:[]},funcName:"fdTemplate"+p})}K.exports=function(p,c,d){if(Array.isArray(d)){if(d.length!==c.dimension)throw Error("ndarray-gradient: invalid boundary conditions");}else d="string"===typeof d?m(c.dimension,d):m(c.dimension,"clamp");if(p.dimension!==c.dimension+1)throw Error("ndarray-gradient: output dimension must be +1 input dimension");
if(p.shape[c.dimension]!==c.dimension)throw Error("ndarray-gradient: output shape must match input shape");for(var f=0;f<c.dimension;++f)if(p.shape[f]!==c.shape[f])throw Error("ndarray-gradient: shape mismatch");if(0===c.size)return p;if(0>=c.dimension)return p.set(0),p;var k=d;d=k.join();f=a[d];if(!f){f=k.length;for(var r=["function gradient(dst,src){var s=src.shape.slice();"],u=0;u<1<<f;++u){for(var v=[],x=0;x<f;++x)u&1<<x&&v.push(x+1);for(var C=0;C<1<<v.length;++C){var z=v.slice();for(x=0;x<v.length;++x)C&
1<<x&&(z[x]=-z[x]);x=z;z=f-x.length;for(var y=[],D=[],A=[],t=0;t<f;++t)0<=x.indexOf(t+1)?A.push("0"):0<=x.indexOf(-(t+1))?A.push("s["+t+"]-1"):(A.push("-1"),y.push("1"),D.push("s["+t+"]-2"));D=".lo("+y.join()+").hi("+D.join()+")";0===y.length&&(D="");if(0<z){r.push("if(1");for(t=0;t<f;++t)0<=x.indexOf(t+1)||0<=x.indexOf(-(t+1))||r.push("&&s[",t,"]>2");r.push("){grad",z,"(src.pick(",A.join(),")",D);for(t=0;t<f;++t)0<=x.indexOf(t+1)||0<=x.indexOf(-(t+1))||r.push(",dst.pick(",A.join(),",",t,")",D);r.push(");")}for(t=
0;t<x.length;++t){y=Math.abs(x[t])-1;var B="dst.pick("+A.join()+","+y+")"+D;switch(k[y]){case "clamp":var F=A.slice(),I=A.slice();0>x[t]?F[y]="s["+y+"]-2":I[y]="1";0===z?r.push("if(s[",y,"]>1){dst.set(",A.join(),",",y,",0.5*(src.get(",F.join(),")-src.get(",I.join(),")))}else{dst.set(",A.join(),",",y,",0)};"):r.push("if(s[",y,"]>1){diff(",B,",src.pick(",F.join(),")",D,",src.pick(",I.join(),")",D,");}else{zero(",B,");};");break;case "mirror":0===z?r.push("dst.set(",A.join(),",",y,",0);"):r.push("zero(",
B,");");break;case "wrap":F=A.slice();I=A.slice();0>x[t]?(F[y]="s["+y+"]-2",I[y]="0"):(F[y]="s["+y+"]-1",I[y]="1");0===z?r.push("if(s[",y,"]>2){dst.set(",A.join(),",",y,",0.5*(src.get(",F.join(),")-src.get(",I.join(),")))}else{dst.set(",A.join(),",",y,",0)};"):r.push("if(s[",y,"]>2){diff(",B,",src.pick(",F.join(),")",D,",src.pick(",I.join(),")",D,");}else{zero(",B,");};");break;default:throw Error("ndarray-gradient: Invalid boundary condition");}}0<z&&r.push("};")}}r.push("return dst;};return gradient");
k=["diff","zero"];v=[e,n];for(u=1;u<=f;++u)k.push("grad"+u),v.push(q(u));k.push(r.join(""));f=Function.apply(void 0,k).apply(void 0,v);h[d]=f}return f(p,c)};var m=b("dup"),l=b("cwise-compiler"),h={},a={},g={body:"",args:[],thisVars:[],localVars:[]},e=l({args:["array","array","array"],pre:g,post:g,body:{args:[{name:"out",lvalue:!0,rvalue:!1,count:1},{name:"left",lvalue:!1,rvalue:!0,count:1},{name:"right",lvalue:!1,rvalue:!0,count:1}],body:"out=0.5*(left-right)",thisVars:[],localVars:[]},funcName:"cdiff"}),
n=l({args:["array"],pre:g,post:g,body:{args:[{name:"out",lvalue:!0,rvalue:!1,count:1}],body:"out=0",thisVars:[],localVars:[]},funcName:"zero"})},{"cwise-compiler":151,dup:176}],489:[function(b,K,G){function q(a,g){var e=Math.floor(g);g-=e;var n=0<=e+1&&e+1<a.shape[0],p=0<=e&&e<a.shape[0]?+a.get(e):0;a=n?+a.get(e+1):0;return(1-g)*p+g*a}function m(a,g,e){var n=Math.floor(g);g-=n;var p=0<=n&&n<a.shape[0],c=0<=n+1&&n+1<a.shape[0],d=Math.floor(e);e-=d;var f=0<=d&&d<a.shape[1],k=0<=d+1&&d+1<a.shape[1],
r=p&&f?a.get(n,d):0;p=p&&k?a.get(n,d+1):0;f=c&&f?a.get(n+1,d):0;a=c&&k?a.get(n+1,d+1):0;return(1-e)*((1-g)*r+g*f)+e*((1-g)*p+g*a)}function l(a,g,e,n){var p=Math.floor(g);g-=p;var c=0<=p&&p<a.shape[0],d=0<=p+1&&p+1<a.shape[0],f=Math.floor(e);e-=f;var k=0<=f&&f<a.shape[1],r=0<=f+1&&f+1<a.shape[1],u=Math.floor(n);n-=u;var v=0<=u&&u<a.shape[2],x=0<=u+1&&u+1<a.shape[2],C=c&&k&&v?a.get(p,f,u):0,z=c&&r&&v?a.get(p,f+1,u):0,y=d&&k&&v?a.get(p+1,f,u):0;v=d&&r&&v?a.get(p+1,f+1,u):0;var D=c&&k&&x?a.get(p,f,u+
1):0;c=c&&r&&x?a.get(p,f+1,u+1):0;k=d&&k&&x?a.get(p+1,f,u+1):0;a=d&&r&&x?a.get(p+1,f+1,u+1):0;return(1-n)*((1-e)*((1-g)*C+g*y)+e*((1-g)*z+g*v))+n*((1-e)*((1-g)*D+g*k)+e*((1-g)*c+g*a))}function h(a){var g=a.shape.length|0,e=Array(g),n=Array(g),p=Array(g),c=Array(g),d;for(d=0;d<g;++d){var f=+arguments[d+1];e[d]=Math.floor(f);n[d]=f-e[d];p[d]=0<=e[d]&&e[d]<a.shape[d];c[d]=0<=e[d]+1&&e[d]+1<a.shape[d]}f=0;var k;d=0;a:for(;d<1<<g;++d){var r=1;var u=a.offset;for(k=0;k<g;++k)if(d&1<<k){if(!c[k])continue a;
r*=n[k];u+=a.stride[k]*(e[k]+1)}else{if(!p[k])continue a;r*=1-n[k];u+=a.stride[k]*e[k]}f+=r*a.data[u]}return f}K.exports=function(a,g,e,n){switch(a.shape.length){case 0:return 0;case 1:return q(a,g);case 2:return m(a,g,e);case 3:return l(a,g,e,n);default:return h.apply(void 0,arguments)}};K.exports.d1=q;K.exports.d2=m;K.exports.d3=l},{}],490:[function(b,K,G){function q(d){if(!d)return h;for(var f=0;f<d.args.length;++f){var k=d.args[f];d.args[f]=0===f?{name:k,lvalue:!0,rvalue:!!d.rvalue,count:d.count||
1}:{name:k,lvalue:!1,rvalue:!0,count:1}}d.thisVars||(d.thisVars=[]);d.localVars||(d.localVars=[]);return d}function m(d){for(var f=[],k=0;k<d.args.length;++k)f.push("a"+k);f=new Function("P",["return function ",d.funcName,"_ndarrayops(",f.join(","),") {P(",f.join(","),");return a0}"].join(""));d=l({args:d.args,pre:q(d.pre),body:q(d.body),post:q(d.proc),funcName:d.funcName});return f(d)}var l=b("cwise-compiler"),h={body:"",args:[],thisVars:[],localVars:[]},a={add:"+",sub:"-",mul:"*",div:"/",mod:"%",
band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};(function(){for(var d in a){var f=a[d];G[d]=m({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+f+"c"},funcName:d});G[d+"eq"]=m({args:["array","array"],body:{args:["a","b"],body:"a"+f+"=b"},rvalue:!0,funcName:d+"eq"});G[d+"s"]=m({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+f+"s"},funcName:d+"s"});G[d+"seq"]=m({args:["array","scalar"],body:{args:["a","s"],body:"a"+f+"=s"},rvalue:!0,funcName:d+
"seq"})}})();var g={not:"!",bnot:"~",neg:"-",recip:"1.0/"};(function(){for(var d in g){var f=g[d];G[d]=m({args:["array","array"],body:{args:["a","b"],body:"a="+f+"b"},funcName:d});G[d+"eq"]=m({args:["array"],body:{args:["a"],body:"a="+f+"a"},rvalue:!0,count:2,funcName:d+"eq"})}})();var e={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};(function(){for(var d in e){var f=e[d];G[d]=m({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+f+"c"},funcName:d});G[d+"s"]=
m({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+f+"s"},funcName:d+"s"});G[d+"eq"]=m({args:["array","array"],body:{args:["a","b"],body:"a=a"+f+"b"},rvalue:!0,count:2,funcName:d+"eq"});G[d+"seq"]=m({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+f+"s"},rvalue:!0,count:2,funcName:d+"seq"})}})();var n="abs acos asin atan ceil cos exp floor log round sin sqrt tan".split(" ");(function(){for(var d=0;d<n.length;++d){var f=n[d];G[f]=m({args:["array","array"],pre:{args:[],body:"this_f=Math."+
f,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:f});G[f+"eq"]=m({args:["array"],pre:{args:[],body:"this_f=Math."+f,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:f+"eq"})}})();var p=["max","min","atan2","pow"];(function(){for(var d=0;d<p.length;++d){var f=p[d];G[f]=m({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+f,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",
thisVars:["this_f"]},funcName:f});G[f+"s"]=m({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+f,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:f+"s"});G[f+"eq"]=m({args:["array","array"],pre:{args:[],body:"this_f=Math."+f,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:f+"eq"});G[f+"seq"]=m({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+f,thisVars:["this_f"]},
body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:f+"seq"})}})();var c=["atan2","pow"];(function(){for(var d=0;d<c.length;++d){var f=c[d];G[f+"op"]=m({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+f,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:f+"op"});G[f+"ops"]=m({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+f,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",
thisVars:["this_f"]},funcName:f+"ops"});G[f+"opeq"]=m({args:["array","array"],pre:{args:[],body:"this_f=Math."+f,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:f+"opeq"});G[f+"opseq"]=m({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+f,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:f+"opseq"})}})();G.any=l({args:["array"],pre:h,body:{args:[{name:"a",lvalue:!1,rvalue:!0,
count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"});G.all=l({args:["array"],pre:h,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"});G.sum=l({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",
localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"});G.prod=l({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"});G.norm2squared=l({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",
lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"});G.norm2=l({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"});G.norminf=l({args:["array"],pre:{args:[],
localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"});G.norm1=l({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],
thisVars:["this_s"],body:"return this_s"},funcName:"norm1"});G.sup=l({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}});G.inf=l({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",
args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}});G.argmin=l({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",
args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}});G.argmax=l({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,
count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}});G.random=m({args:["array"],
pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"});G.assign=m({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"});G.assigns=m({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"});G.equals=l({args:["array","array"],pre:h,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},
post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},{"cwise-compiler":151}],491:[function(b,K,G){var q=b("ndarray"),m=b("./doConvert.js");K.exports=function(l,h){for(var a=[],g=l,e=1;Array.isArray(g);)a.push(g.length),e*=g.length,g=g[0];if(0===a.length)return q();h||(h=q(new Float64Array(e),a));m(h,l);return h}},{"./doConvert.js":492,ndarray:495}],492:[function(b,K,G){K.exports=b("cwise-compiler")({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},
body:{body:"{\nvar _inline_1_v=_inline_1_arg1_,_inline_1_i\nfor(_inline_1_i=0;_inline_1_i<_inline_1_arg2_.length-1;++_inline_1_i) {\n_inline_1_v=_inline_1_v[_inline_1_arg2_[_inline_1_i]]\n}\n_inline_1_arg0_=_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]\n}",args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",
args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64})},{"cwise-compiler":151}],493:[function(b,K,G){function q(g){switch(g){case "uint8":return[a.mallocUint8,a.freeUint8];case "uint16":return[a.mallocUint16,a.freeUint16];case "uint32":return[a.mallocUint32,a.freeUint32];case "int8":return[a.mallocInt8,a.freeInt8];case "int16":return[a.mallocInt16,a.freeInt16];case "int32":return[a.mallocInt32,a.freeInt32];case "float32":return[a.mallocFloat,a.freeFloat];case "float64":return[a.mallocDouble,
a.freeDouble];default:return null}}function m(g){for(var e=[],n=0;n<g;++n)e.push("s"+n);for(n=0;n<g;++n)e.push("n"+n);for(n=1;n<g;++n)e.push("d"+n);for(n=1;n<g;++n)e.push("e"+n);for(n=1;n<g;++n)e.push("f"+n);return e}function l(g,e){function n(x){return"generic"===e?["data.get(",x,")"].join(""):["data[",x,"]"].join("")}function p(x,C){return"generic"===e?["data.set(",x,",",C,")"].join(""):["data[",x,"]=",C].join("")}var c=["'use strict'"],d=["ndarrayInsertionSort",g.join("d"),e].join(""),f=["left",
"right","data","offset"].concat(m(g.length)),k=q(e),r=["i,j,cptr,ptr=left*s0+offset"];if(1<g.length){for(var u=[],v=1;v<g.length;++v)r.push("i"+v),u.push("n"+v);k?r.push("scratch=malloc("+u.join("*")+")"):r.push("scratch=new Array("+u.join("*")+")");r.push("dptr","sptr","a","b")}else r.push("scratch");c.push(["function ",d,"(",f.join(","),"){var ",r.join(",")].join(""),"for(i=left+1;i<=right;++i){","j=i;ptr+=s0","cptr=ptr");if(1<g.length){c.push("dptr=0;sptr=ptr");for(v=g.length-1;0<=v;--v)f=g[v],
0!==f&&c.push(["for(i",f,"=0;i",f,"<n",f,";++i",f,"){"].join(""));c.push("scratch[dptr++]=",n("sptr"));for(v=0;v<g.length;++v)f=g[v],0!==f&&c.push("sptr+=d"+f,"}");c.push("__g:while(j--\x3eleft){","dptr=0","sptr=cptr-s0");for(v=1;v<g.length;++v)1===v&&c.push("__l:"),c.push(["for(i",v,"=0;i",v,"<n",v,";++i",v,"){"].join(""));c.push(["a=",n("sptr"),"\nb=scratch[dptr]\nif(a<b){break __g}\nif(a>b){break __l}"].join(""));for(v=g.length-1;1<=v;--v)c.push("sptr+=e"+v,"dptr+=f"+v,"}");c.push("dptr=cptr;sptr=cptr-s0");
for(v=g.length-1;0<=v;--v)f=g[v],0!==f&&c.push(["for(i",f,"=0;i",f,"<n",f,";++i",f,"){"].join(""));c.push(p("dptr",n("sptr")));for(v=0;v<g.length;++v)f=g[v],0!==f&&c.push(["dptr+=d",f,";sptr+=d",f].join(""),"}");c.push("cptr-=s0\n}");c.push("dptr=cptr;sptr=0");for(v=g.length-1;0<=v;--v)f=g[v],0!==f&&c.push(["for(i",f,"=0;i",f,"<n",f,";++i",f,"){"].join(""));c.push(p("dptr","scratch[sptr++]"));for(v=0;v<g.length;++v)f=g[v],0!==f&&c.push("dptr+=d"+f,"}")}else c.push("scratch="+n("ptr"),"while((j--\x3eleft)&&("+
n("cptr-s0")+">scratch)){",p("cptr",n("cptr-s0")),"cptr-=s0","}",p("cptr","scratch"));c.push("}");1<g.length&&k&&c.push("free(scratch)");c.push("} return "+d);if(k)return g=new Function("malloc","free",c.join("\n")),g(k[0],k[1]);g=new Function(c.join("\n"));return g()}function h(g,e,n){function p(M){return["(offset+",M,"*s0)"].join("")}function c(M){return"generic"===e?["data.get(",M,")"].join(""):["data[",M,"]"].join("")}function d(M,N){return"generic"===e?["data.set(",M,",",N,")"].join(""):["data[",
M,"]=",N].join("")}function f(M,N,T){if(1===M.length)B.push("ptr0="+p(M[0]));else for(var Q=0;Q<M.length;++Q)B.push(["b_ptr",Q,"=s0*",M[Q]].join(""));N&&B.push("pivot_ptr=0");B.push("ptr_shift=offset");for(Q=g.length-1;0<=Q;--Q){var U=g[Q];0!==U&&B.push(["for(i",U,"=0;i",U,"<n",U,";++i",U,"){"].join(""))}if(1<M.length)for(Q=0;Q<M.length;++Q)B.push(["ptr",Q,"=b_ptr",Q,"+ptr_shift"].join(""));B.push(T);N&&B.push("++pivot_ptr");for(Q=0;Q<g.length;++Q)U=g[Q],0!==U&&(1<M.length?B.push("ptr_shift+=d"+U):
B.push("ptr0+=d"+U),B.push("}"))}function k(M,N,T,Q){if(1===N.length)B.push("ptr0="+p(N[0]));else{for(var U=0;U<N.length;++U)B.push(["b_ptr",U,"=s0*",N[U]].join(""));B.push("ptr_shift=offset")}T&&B.push("pivot_ptr=0");M&&B.push(M+":");for(U=1;U<g.length;++U)B.push(["for(i",U,"=0;i",U,"<n",U,";++i",U,"){"].join(""));if(1<N.length)for(U=0;U<N.length;++U)B.push(["ptr",U,"=b_ptr",U,"+ptr_shift"].join(""));B.push(Q);for(U=g.length-1;1<=U;--U)T&&B.push("pivot_ptr+=f"+U),1<N.length?B.push("ptr_shift+=e"+
U):B.push("ptr0+=e"+U),B.push("}")}function r(){1<g.length&&J&&B.push("free(pivot1)","free(pivot2)")}function u(M,N){M="el"+M;N="el"+N;if(1<g.length){var T="__l"+ ++L;k(T,[M,N],!1,["comp=",c("ptr0"),"-",c("ptr1"),"\nif(comp>0){tmp0=",M,";",M,"=",N,";",N,"=tmp0;break ",T,"}\nif(comp<0){break ",T,"}"].join(""))}else B.push(["if(",c(p(M)),">",c(p(N)),"){tmp0=",M,";",M,"=",N,";",N,"=tmp0}"].join(""))}function v(M,N){1<g.length?f([M,N],!1,d("ptr0",c("ptr1"))):B.push(d(p(M),c(p(N))))}function x(M,N,T){if(1<
g.length){var Q="__l"+ ++L;k(Q,[N],!0,[M,"=",c("ptr0"),"-pivot",T,"[pivot_ptr]\nif(",M,"!==0){break ",Q,"}"].join(""))}else B.push([M,"=",c(p(N)),"-pivot",T].join(""))}function C(M,N){1<g.length?f([M,N],!1,["tmp=",c("ptr0"),"\n",d("ptr0",c("ptr1")),"\n",d("ptr1","tmp")].join("")):B.push(["ptr0=",p(M),"\nptr1=",p(N),"\ntmp=",c("ptr0"),"\n",d("ptr0",c("ptr1")),"\n",d("ptr1","tmp")].join(""))}function z(M,N,T){1<g.length?(f([M,N,T],!1,["tmp=",c("ptr0"),"\n",d("ptr0",c("ptr1")),"\n",d("ptr1",c("ptr2")),
"\n",d("ptr2","tmp")].join("")),B.push("++"+N,"--"+T)):B.push(["ptr0=",p(M),"\nptr1=",p(N),"\nptr2=",p(T),"\n++",N,"\n--",T,"\ntmp=",c("ptr0"),"\n",d("ptr0",c("ptr1")),"\n",d("ptr1",c("ptr2")),"\n",d("ptr2","tmp")].join(""))}function y(M,N){C(M,N);B.push("--"+N)}function D(M,N,T){1<g.length?f([M,N],!0,[d("ptr0",c("ptr1")),"\n",d("ptr1",["pivot",T,"[pivot_ptr]"].join(""))].join("")):B.push(d(p(M),c(p(N))),d(p(N),"pivot"+T))}function A(M,N){B.push(["if((",N,"-",M,")<=32){\ninsertionSort(",M,",",N,",data,offset,",
m(g.length).join(","),")\n}else{\n",F,"(",M,",",N,",data,offset,",m(g.length).join(","),")\n}"].join(""))}function t(M,N,T){1<g.length?(B.push(["__l",++L,":while(true){"].join("")),f([M],!0,["if(",c("ptr0"),"!==pivot",N,"[pivot_ptr]){break __l",L,"}"].join("")),B.push(T,"}")):B.push(["while(",c(p(M)),"===pivot",N,"){",T,"}"].join(""))}var B=["'use strict'"],F=["ndarrayQuickSort",g.join("d"),e].join(""),I=["left","right","data","offset"].concat(m(g.length)),J=q(e),L=0;B.push(["function ",F,"(",I.join(","),
"){"].join(""));I="sixth=((right-left+1)/6)|0 index1=left+sixth index5=right-sixth index3=(left+right)>>1 index2=index3-sixth index4=index3+sixth el1=index1 el2=index2 el3=index3 el4=index4 el5=index5 less=left+1 great=right-1 pivots_are_equal=true tmp tmp0 x y z k ptr0 ptr1 ptr2 comp_pivot1=0 comp_pivot2=0 comp=0".split(" ");if(1<g.length){for(var H=[],P=1;P<g.length;++P)H.push("n"+P),I.push("i"+P);for(P=0;8>P;++P)I.push("b_ptr"+P);I.push("ptr3","ptr4","ptr5","ptr6","ptr7","pivot_ptr","ptr_shift",
"elementSize="+H.join("*"));J?I.push("pivot1=malloc(elementSize)","pivot2=malloc(elementSize)"):I.push("pivot1=new Array(elementSize),pivot2=new Array(elementSize)")}else I.push("pivot1","pivot2");B.push("var "+I.join(","));u(1,2);u(4,5);u(1,3);u(2,3);u(1,4);u(3,4);u(2,5);u(2,3);u(4,5);1<g.length?f("el1 el2 el3 el4 el5 index1 index3 index5".split(" "),!0,["pivot1[pivot_ptr]=",c("ptr1"),"\npivot2[pivot_ptr]=",c("ptr3"),"\npivots_are_equal=pivots_are_equal&&(pivot1[pivot_ptr]===pivot2[pivot_ptr])\nx=",
c("ptr0"),"\ny=",c("ptr2"),"\nz=",c("ptr4"),"\n",d("ptr5","x"),"\n",d("ptr6","y"),"\n",d("ptr7","z")].join("")):B.push(["pivot1=",c(p("el2")),"\npivot2=",c(p("el4")),"\npivots_are_equal=pivot1===pivot2\nx=",c(p("el1")),"\ny=",c(p("el3")),"\nz=",c(p("el5")),"\n",d(p("index1"),"x"),"\n",d(p("index3"),"y"),"\n",d(p("index5"),"z")].join(""));v("index2","left");v("index4","right");B.push("if(pivots_are_equal){");B.push("for(k=less;k<=great;++k){");x("comp","k",1);B.push("if(comp===0){continue}");B.push("if(comp<0){");
B.push("if(k!==less){");C("k","less");B.push("}");B.push("++less");B.push("}else{");B.push("while(true){");x("comp","great",1);B.push("if(comp>0){");B.push("great--");B.push("}else if(comp<0){");z("k","less","great");B.push("break");B.push("}else{");y("k","great");B.push("break");B.push("}");B.push("}");B.push("}");B.push("}");B.push("}else{");B.push("for(k=less;k<=great;++k){");x("comp_pivot1","k",1);B.push("if(comp_pivot1<0){");B.push("if(k!==less){");C("k","less");B.push("}");B.push("++less");
B.push("}else{");x("comp_pivot2","k",2);B.push("if(comp_pivot2>0){");B.push("while(true){");x("comp","great",2);B.push("if(comp>0){");B.push("if(--great<k){break}");B.push("continue");B.push("}else{");x("comp","great",1);B.push("if(comp<0){");z("k","less","great");B.push("}else{");y("k","great");B.push("}");B.push("break");B.push("}");B.push("}");B.push("}");B.push("}");B.push("}");B.push("}");D("left","(less-1)",1);D("right","(great+1)",2);A("left","(less-2)");A("(great+2)","right");B.push("if(pivots_are_equal){");
r();B.push("return");B.push("}");B.push("if(less<index1&&great>index5){");t("less",1,"++less");t("great",2,"--great");B.push("for(k=less;k<=great;++k){");x("comp_pivot1","k",1);B.push("if(comp_pivot1===0){");B.push("if(k!==less){");C("k","less");B.push("}");B.push("++less");B.push("}else{");x("comp_pivot2","k",2);B.push("if(comp_pivot2===0){");B.push("while(true){");x("comp","great",2);B.push("if(comp===0){");B.push("if(--great<k){break}");B.push("continue");B.push("}else{");x("comp","great",1);B.push("if(comp<0){");
z("k","less","great");B.push("}else{");y("k","great");B.push("}");B.push("break");B.push("}");B.push("}");B.push("}");B.push("}");B.push("}");B.push("}");r();A("less","great");B.push("}return "+F);if(1<g.length&&J)return I=new Function("insertionSort","malloc","free",B.join("\n")),I(n,J[0],J[1]);I=new Function("insertionSort",B.join("\n"));return I(n)}var a=b("typedarray-pool");K.exports=function(g,e){var n=["'use strict'"],p=["ndarraySortWrapper",g.join("d"),e].join("");n.push(["function ",p,"(array){"].join(""));
for(var c=["data=array.data,offset=array.offset|0,shape=array.shape,stride=array.stride"],d=0;d<g.length;++d)c.push(["s",d,"=stride[",d,"]|0,n",d,"=shape[",d,"]|0"].join(""));var f=Array(g.length),k=[];for(d=0;d<g.length;++d){var r=g[d];0!==r&&(f[r]=0===k.length?"1":k.join("*"),k.push("n"+r))}var u=k=-1;for(d=0;d<g.length;++d)r=g[d],0!==r&&(0<k?c.push(["d",r,"=s",r,"-d",k,"*n",k].join("")):c.push(["d",r,"=s",r].join("")),k=r),r=g.length-1-d,0!==r&&(0<u?c.push(["e",r,"=s",r,"-e",u,"*n",u,",f",r,"=",
f[r],"-f",u,"*n",u].join("")):c.push(["e",r,"=s",r,",f",r,"=",f[r]].join("")),u=r);n.push("var "+c.join(","));c=["0","n0-1","data","offset"].concat(m(g.length));n.push(["if(n0<=32){insertionSort(",c.join(","),")}else{quickSort(",c.join(","),")}"].join(""));n.push("}return "+p);n=new Function("insertionSort","quickSort",n.join("\n"));p=l(g,e);g=h(g,e,p);return n(p,g)}},{"typedarray-pool":595}],494:[function(b,K,G){var q=b("./lib/compile_sort.js"),m={};K.exports=function(l){var h=l.order,a=l.dtype,
g=[h,a].join(":"),e=m[g];e||(m[g]=e=q(h,a));e(l);return l}},{"./lib/compile_sort.js":493}],495:[function(b,K,G){function q(p,c){return p[0]-c[0]}function m(){var p=this.stride,c=Array(p.length),d;for(d=0;d<c.length;++d)c[d]=[Math.abs(p[d]),d];c.sort(q);p=Array(c.length);for(d=0;d<p.length;++d)p[d]=c[d][1];return p}function l(p,c){var d=["View",c,"d",p].join("");0>c&&(d="View_Nil"+p);var f="generic"===p;if(-1===c)return c=new Function("function "+d+"(a){this.data=a;};var proto="+d+".prototype;proto.dtype='"+
p+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+d+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+d+"(a){return new "+d+"(a);}"),c();if(0===c)return c=new Function("TrivialArray","function "+d+"(a,d) {this.data = a;this.offset = d};var proto="+d+".prototype;proto.dtype='"+p+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+
d+"_copy() {return new "+d+"(this.data,this.offset)};proto.pick=function "+d+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+d+"_get(){return "+(f?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+d+"_set(v){return "+(f?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+d+"(a,b,c,d){return new "+d+"(a,d)}"),c(n[p][0]);var k=["'use strict'"];var r=a(c),u=r.map(function(z){return"i"+z}),v="this.offset+"+
r.map(function(z){return"this.stride["+z+"]*i"+z}).join("+"),x=r.map(function(z){return"b"+z}).join(","),C=r.map(function(z){return"c"+z}).join(",");k.push("function "+d+"(a,"+x+","+C+",d){this.data=a","this.shape=["+x+"]","this.stride=["+C+"]","this.offset=d|0}","var proto="+d+".prototype","proto.dtype='"+p+"'","proto.dimension="+c);k.push("Object.defineProperty(proto,'size',{get:function "+d+"_size(){return "+r.map(function(z){return"this.shape["+z+"]"}).join("*"),"}})");1===c?k.push("proto.order=[0]"):
(k.push("Object.defineProperty(proto,'order',{get:"),4>c?(k.push("function "+d+"_order(){"),2===c?k.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===c&&k.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):k.push("ORDER})"));k.push("proto.set=function "+
d+"_set("+u.join(",")+",v){");f?k.push("return this.data.set("+v+",v)}"):k.push("return this.data["+v+"]=v}");k.push("proto.get=function "+d+"_get("+u.join(",")+"){");f?k.push("return this.data.get("+v+")}"):k.push("return this.data["+v+"]}");k.push("proto.index=function "+d+"_index(",u.join(),"){return "+v+"}");k.push("proto.hi=function "+d+"_hi("+u.join(",")+"){return new "+d+"(this.data,"+r.map(function(z){return["(typeof i",z,"!=='number'||i",z,"<0)?this.shape[",z,"]:i",z,"|0"].join("")}).join(",")+
","+r.map(function(z){return"this.stride["+z+"]"}).join(",")+",this.offset)}");f=r.map(function(z){return"a"+z+"=this.shape["+z+"]"});v=r.map(function(z){return"c"+z+"=this.stride["+z+"]"});k.push("proto.lo=function "+d+"_lo("+u.join(",")+"){var b=this.offset,d=0,"+f.join(",")+","+v.join(","));for(f=0;f<c;++f)k.push("if(typeof i"+f+"==='number'&&i"+f+">=0){d=i"+f+"|0;b+=c"+f+"*d;a"+f+"-=d}");k.push("return new "+d+"(this.data,"+r.map(function(z){return"a"+z}).join(",")+","+r.map(function(z){return"c"+
z}).join(",")+",b)}");k.push("proto.step=function "+d+"_step("+u.join(",")+"){var "+r.map(function(z){return"a"+z+"=this.shape["+z+"]"}).join(",")+","+r.map(function(z){return"b"+z+"=this.stride["+z+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(f=0;f<c;++f)k.push("if(typeof i"+f+"==='number'){d=i"+f+"|0;if(d<0){c+=b"+f+"*(a"+f+"-1);a"+f+"=ceil(-a"+f+"/d)}else{a"+f+"=ceil(a"+f+"/d)}b"+f+"*=d}");k.push("return new "+d+"(this.data,"+r.map(function(z){return"a"+z}).join(",")+","+r.map(function(z){return"b"+
z}).join(",")+",c)}");v=Array(c);x=Array(c);for(f=0;f<c;++f)v[f]="a[i"+f+"]",x[f]="b[i"+f+"]";k.push("proto.transpose=function "+d+"_transpose("+u+"){"+u.map(function(z,y){return z+"=("+z+"===undefined?"+y+":"+z+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+d+"(this.data,"+v.join(",")+","+x.join(",")+",this.offset)}");k.push("proto.pick=function "+d+"_pick("+u+"){var a=[],b=[],c=this.offset");for(f=0;f<c;++f)k.push("if(typeof i"+f+"==='number'&&i"+f+">=0){c=(c+this.stride["+f+"]*i"+
f+")|0}else{a.push(this.shape["+f+"]);b.push(this.stride["+f+"])}");k.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}");k.push("return function construct_"+d+"(data,shape,stride,offset){return new "+d+"(data,"+r.map(function(z){return"shape["+z+"]"}).join(",")+","+r.map(function(z){return"stride["+z+"]"}).join(",")+",offset)}");c=new Function("CTOR_LIST","ORDER",k.join("\n"));return c(n[p],m)}function h(p){if(g(p))return"buffer";if(e)switch(Object.prototype.toString.call(p)){case "[object Float64Array]":return"float64";
case "[object Float32Array]":return"float32";case "[object Int8Array]":return"int8";case "[object Int16Array]":return"int16";case "[object Int32Array]":return"int32";case "[object Uint8Array]":return"uint8";case "[object Uint16Array]":return"uint16";case "[object Uint32Array]":return"uint32";case "[object Uint8ClampedArray]":return"uint8_clamped";case "[object BigInt64Array]":return"bigint64";case "[object BigUint64Array]":return"biguint64"}return Array.isArray(p)?"array":"generic"}var a=b("iota-array"),
g=b("is-buffer"),e="undefined"!==typeof Float64Array,n={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};(function(){for(var p in n)n[p].push(l(p,-1))});K.exports=function(p,c,d,f){if(void 0===p){var k=n.array[0];return k([])}"number"===typeof p&&(p=[p]);void 0===c&&(c=[p.length]);k=c.length;if(void 0===d){d=Array(k);for(var r=k-1,u=1;0<=r;--r)d[r]=u,u*=c[r]}if(void 0===f)for(r=f=0;r<k;++r)0>d[r]&&
(f-=(c[r]-1)*d[r]);r=h(p);for(u=n[r];u.length<=k+1;)u.push(l(r,u.length-1));k=u[k+1];return k(p,c,d,f)}},{"iota-array":463,"is-buffer":465}],496:[function(b,K,G){var q=b("double-bits"),m=Math.pow(2,-1074);K.exports=function(l,h){if(isNaN(l)||isNaN(h))return NaN;if(l===h)return l;if(0===l)return 0>h?-m:m;var a=q.hi(l),g=q.lo(l);h>l===0<l?4294967295===g?(a+=1,g=0):g+=1:0===g?(g=4294967295,--a):--g;return q.pack(g,a)}},{"double-bits":173}],497:[function(b,K,G){function q(e,n,p,c){return["C",e,n,p,c,
p,c]}function m(e,n,p,c,d,f){return["C",e/3+2/3*p,n/3+2/3*c,d/3+2/3*p,f/3+2/3*c,d,f]}function l(e,n,p,c,d,f,k,r,u,v){if(v)y=v[0],f=v[1],C=v[2],z=v[3];else{y=h(e,n,-d);e=y.x;n=y.y;y=h(r,u,-d);r=y.x;u=y.y;y=(e-r)/2;C=(n-u)/2;z=y*y/(p*p)+C*C/(c*c);1<z&&(z=Math.sqrt(z),p*=z,c*=z);z=p*p;var x=c*c;f=(f==k?-1:1)*Math.sqrt(Math.abs((z*x-z*C*C-x*y*y)/(z*C*C+x*y*y)));Infinity==f&&(f=1);var C=f*p*C/c+(e+r)/2,z=f*-c*y/p+(n+u)/2,y=Math.asin(((n-z)/c).toFixed(9));f=Math.asin(((u-z)/c).toFixed(9));y=e<C?a-y:y;f=
r<C?a-f:f;0>y&&(y=2*a+y);0>f&&(f=2*a+f);k&&y>f&&(y-=2*a);!k&&f>y&&(f-=2*a)}if(Math.abs(f-y)>g){var D=f;x=r;var A=u;f=y+g*(k&&f>y?1:-1);r=C+p*Math.cos(f);u=z+c*Math.sin(f);D=l(r,u,p,c,d,0,k,x,A,[f,D,C,z])}k=Math.tan((f-y)/4);p=4/3*p*k;c=4/3*c*k;e=[2*e-(e+p*Math.sin(y)),2*n-(n-c*Math.cos(y)),r+p*Math.sin(f),u-c*Math.cos(f),r,u];if(v)return e;D&&(e=e.concat(D));for(v=0;v<e.length;)n=h(e[v],e[v+1],d),e[v++]=n.x,e[v++]=n.y;return e}function h(e,n,p){return{x:e*Math.cos(p)-n*Math.sin(p),y:e*Math.sin(p)+
n*Math.cos(p)}}var a=Math.PI,g=a/180*120;K.exports=function(e){for(var n,p=[],c=0,d=0,f=0,k=0,r=null,u=null,v=0,x=0,C=0,z=e.length;C<z;C++){var y=e[C],D=y[0];switch(D){case "M":f=y[1];k=y[2];break;case "A":y=l(v,x,y[1],y[2],a/180*y[3],y[4],y[5],y[6],y[7]);y.unshift("C");7<y.length&&(p.push(y.splice(0,7)),y.unshift("C"));break;case "S":if("C"==n||"S"==n)v+=v-c,x+=x-d;y=["C",v,x,y[1],y[2],y[3],y[4]];break;case "T":"Q"==n||"T"==n?(r=2*v-r,u=2*x-u):(r=v,u=x);y=m(v,x,r,u,y[1],y[2]);break;case "Q":r=y[1];
u=y[2];y=m(v,x,y[1],y[2],y[3],y[4]);break;case "L":y=q(v,x,y[1],y[2]);break;case "H":y=q(v,x,y[1],x);break;case "V":y=q(v,x,v,y[1]);break;case "Z":y=q(v,x,f,k)}n=D;v=y[y.length-2];x=y[y.length-1];4<y.length?(c=y[y.length-4],d=y[y.length-3]):(c=v,d=x);p.push(y)}return p}},{}],498:[function(b,K,G){G.vertexNormals=function(q,m,l){var h=m.length,a=Array(h);l=void 0===l?1E-6:l;for(var g=0;g<h;++g)a[g]=[0,0,0];for(g=0;g<q.length;++g)for(var e=q[g],n,p=e[e.length-1],c=e[0],d=0;d<e.length;++d){n=p;p=c;c=
e[(d+1)%e.length];var f=m[n],k=m[p],r=m[c],u=Array(3),v=0,x=Array(3),C=0;for(n=0;3>n;++n)u[n]=f[n]-k[n],v+=u[n]*u[n],x[n]=r[n]-k[n],C+=x[n]*x[n];if(v*C>l)for(f=a[p],v=1/Math.sqrt(v*C),n=0;3>n;++n)C=(n+1)%3,k=(n+2)%3,f[n]+=v*(x[C]*u[k]-x[k]*u[C])}for(g=0;g<h;++g){f=a[g];for(n=q=0;3>n;++n)q+=f[n]*f[n];if(q>l)for(v=1/Math.sqrt(q),n=0;3>n;++n)f[n]*=v;else for(n=0;3>n;++n)f[n]=0}return a};G.faceNormals=function(q,m,l){var h=q.length,a=Array(h);l=void 0===l?1E-6:l;for(var g=0;g<h;++g){for(var e=q[g],n=
Array(3),p=0;3>p;++p)n[p]=m[e[p]];e=Array(3);var c=Array(3);for(p=0;3>p;++p)e[p]=n[1][p]-n[0][p],c[p]=n[2][p]-n[0][p];n=Array(3);var d=0;for(p=0;3>p;++p){var f=(p+1)%3,k=(p+2)%3;n[p]=e[f]*c[k]-e[k]*c[f];d+=n[p]*n[p]}d=d>l?1/Math.sqrt(d):0;for(p=0;3>p;++p)n[p]*=d;a[g]=n}return a}},{}],499:[function(b,K,G){var q=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable;K.exports=function(){try{if(!Object.assign)return!1;var h=new String("abc");h[5]="de";
if("5"===Object.getOwnPropertyNames(h)[0])return!1;var a={};for(h=0;10>h;h++)a["_"+String.fromCharCode(h)]=h;if("0123456789"!==Object.getOwnPropertyNames(a).map(function(e){return a[e]}).join(""))return!1;var g={};"abcdefghijklmnopqrst".split("").forEach(function(e){g[e]=e});return"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},g)).join("")?!1:!0}catch(e){return!1}}()?Object.assign:function(h,a){if(null===h||void 0===h)throw new TypeError("Object.assign cannot be called with null or undefined");
var g=Object(h);for(var e,n=1;n<arguments.length;n++){var p=Object(arguments[n]);for(var c in p)m.call(p,c)&&(g[c]=p[c]);if(q){e=q(p);for(var d=0;d<e.length;d++)l.call(p,e[d])&&(g[e[d]]=p[e[d]])}}return g}},{}],500:[function(b,K,G){K.exports=function(q,m,l,h,a,g,e,n,p,c){var d=m+g+c;if(0<f){var f=Math.sqrt(d+1);q[0]=.5*(e-p)/f;q[1]=.5*(n-h)/f;q[2]=.5*(l-g)/f;q[3]=.5*f}else c=Math.max(m,g,c),f=Math.sqrt(2*c-d+1),m>=c?(q[0]=.5*f,q[1]=.5*(a+l)/f,q[2]=.5*(n+h)/f,q[3]=.5*(e-p)/f):g>=c?(q[0]=.5*(l+a)/f,
q[1]=.5*f,q[2]=.5*(p+e)/f,q[3]=.5*(n-h)/f):(q[0]=.5*(h+n)/f,q[1]=.5*(e+p)/f,q[2]=.5*f,q[3]=.5*(l-a)/f);return q}},{}],501:[function(b,K,G){function q(c,d,f){return Math.sqrt(Math.pow(c,2)+Math.pow(d,2)+Math.pow(f,2))}function m(c,d,f,k){return Math.sqrt(Math.pow(c,2)+Math.pow(d,2)+Math.pow(f,2)+Math.pow(k,2))}function l(c,d){var f=d[0],k=d[1],r=d[2];d=d[3];var u=m(f,k,r,d);1E-6<u?(c[0]=f/u,c[1]=k/u,c[2]=r/u,c[3]=d/u):(c[0]=c[1]=c[2]=0,c[3]=1)}function h(c,d,f){this.radius=a([f]);this.center=a(d);
this.rotation=a(c);this.computedRadius=this.radius.curve(0);this.computedCenter=this.center.curve(0);this.computedRotation=this.rotation.curve(0);this.computedUp=[.1,0,0];this.computedEye=[.1,0,0];this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.recalcMatrix(0)}K.exports=function(c){c=c||{};var d=c.center||[0,0,0],f=c.rotation||[0,0,0,1],k=c.radius||1;d=[].slice.call(d,0,3);f=[].slice.call(f,0,4);l(f,f);d=new h(f,d,Math.log(k));d.setDistanceLimits(c.zoomMin,c.zoomMax);("eye"in c||"up"in
c)&&d.lookAt(0,c.eye,c.center,c.up);return d};var a=b("filtered-vector"),g=b("gl-mat4/lookAt"),e=b("gl-mat4/fromQuat"),n=b("gl-mat4/invert"),p=b("./lib/quatFromFrame");b=h.prototype;b.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())};b.recalcMatrix=function(c){this.radius.curve(c);this.center.curve(c);this.rotation.curve(c);var d=this.computedRotation;l(d,d);c=this.computedMatrix;e(c,d);var f=this.computedCenter;d=this.computedEye;var k=this.computedUp,
r=Math.exp(this.computedRadius[0]);d[0]=f[0]+r*c[2];d[1]=f[1]+r*c[6];d[2]=f[2]+r*c[10];k[0]=c[1];k[1]=c[5];k[2]=c[9];for(f=0;3>f;++f){for(r=k=0;3>r;++r)k+=c[f+4*r]*d[r];c[12+f]=-k}};b.getMatrix=function(c,d){this.recalcMatrix(c);c=this.computedMatrix;if(d){for(var f=0;16>f;++f)d[f]=c[f];return d}return c};b.idle=function(c){this.center.idle(c);this.radius.idle(c);this.rotation.idle(c)};b.flush=function(c){this.center.flush(c);this.radius.flush(c);this.rotation.flush(c)};b.pan=function(c,d,f,k){d=
d||0;f=f||0;k=k||0;this.recalcMatrix(c);var r=this.computedMatrix,u=r[1],v=r[5],x=r[9],C=q(u,v,x);u/=C;v/=C;x/=C;C=r[0];var z=r[4],y=r[8],D=C*u+z*v+y*x;C-=u*D;z-=v*D;y-=x*D;D=q(C,z,y);C/=D;z/=D;y/=D;D=r[2];var A=r[6];r=r[10];var t=D*u+A*v+r*x,B=D*C+A*z+r*y;q(D-(t*u+B*C),A-(t*v+B*z),r-(t*x+B*y));this.center.move(c,C*d+u*f,z*d+v*f,y*d+x*f);d=Math.exp(this.computedRadius[0]);d=Math.max(1E-4,d+k);this.radius.set(c,Math.log(d))};b.rotate=function(c,d,f,k){this.recalcMatrix(c);d=d||0;f=f||0;var r=this.computedMatrix,
u=r[2],v=r[6],x=r[10],C=d*r[0]+f*r[1],z=d*r[4]+f*r[5];r=d*r[8]+f*r[9];f=-(v*r-x*z);r=-(x*C-u*r);C=-(u*z-v*C);z=Math.sqrt(Math.max(0,1-Math.pow(f,2)-Math.pow(r,2)-Math.pow(C,2)));var y=m(f,r,C,z);1E-6<y?(f/=y,r/=y,C/=y,z/=y):(f=r=C=0,z=1);y=this.computedRotation;var D=y[0],A=y[1],t=y[2],B=y[3];y=D*z+B*f+A*C-t*r;var F=A*z+B*r+t*f-D*C,I=t*z+B*C+D*r-A*f;D=B*z-D*f-A*r-t*C;k&&(f=u,r=v,C=x,k=Math.sin(k)/q(f,r,C),f*=k,r*=k,C*=k,z=Math.cos(d),y=y*z+D*f+F*C-I*r,F=F*z+D*r+I*f-y*C,I=I*z+D*C+y*r-F*f,D=D*z-y*f-
F*r-I*C);d=m(y,F,I,D);1E-6<d?(y/=d,F/=d,I/=d,D/=d):(y=F=I=0,D=1);this.rotation.set(c,y,F,I,D)};b.lookAt=function(c,d,f,k){this.recalcMatrix(c);f=f||this.computedCenter;d=d||this.computedEye;k=k||this.computedUp;var r=this.computedMatrix;g(r,d,f,k);k=this.computedRotation;p(k,r[0],r[1],r[2],r[4],r[5],r[6],r[8],r[9],r[10]);l(k,k);this.rotation.set(c,k[0],k[1],k[2],k[3]);for(k=r=0;3>k;++k)r+=Math.pow(f[k]-d[k],2);this.radius.set(c,.5*Math.log(Math.max(r,1E-6)));this.center.set(c,f[0],f[1],f[2])};b.translate=
function(c,d,f,k){this.center.move(c,d||0,f||0,k||0)};b.setMatrix=function(c,d){var f=this.computedRotation;p(f,d[0],d[1],d[2],d[4],d[5],d[6],d[8],d[9],d[10]);l(f,f);this.rotation.set(c,f[0],f[1],f[2],f[3]);f=this.computedMatrix;n(f,d);var k=f[15];if(1E-6<Math.abs(k)){d=f[12]/k;var r=f[13]/k;k=f[14]/k;this.recalcMatrix(c);var u=Math.exp(this.computedRadius[0]);this.center.set(c,d-f[2]*u,r-f[6]*u,k-f[10]*u)}else this.center.idle(c);this.radius.idle(c)};b.setDistance=function(c,d){0<d&&this.radius.set(c,
Math.log(d))};b.setDistanceLimits=function(c,d){c=0<c?Math.log(c):-Infinity;d=0<d?Math.log(d):Infinity;d=Math.max(d,c);this.radius.bounds[0][0]=c;this.radius.bounds[1][0]=d};b.getDistanceLimits=function(c){var d=this.radius.bounds;return c?(c[0]=Math.exp(d[0][0]),c[1]=Math.exp(d[1][0]),c):[Math.exp(d[0][0]),Math.exp(d[1][0])]};b.toJSON=function(){this.recalcMatrix(this.lastT());return{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),
zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}};b.fromJSON=function(c){var d=this.lastT(),f=c.center;f&&this.center.set(d,f[0],f[1],f[2]);(f=c.rotation)&&this.rotation.set(d,f[0],f[1],f[2],f[3]);(f=c.distance)&&0<f&&this.radius.set(d,Math.log(f));this.setDistanceLimits(c.zoomMin,c.zoomMax)}},{"./lib/quatFromFrame":500,"filtered-vector":242,"gl-mat4/fromQuat":282,"gl-mat4/invert":293,"gl-mat4/lookAt":294}],502:[function(b,K,G){var q=b("repeat-string");K.exports=function(m,l,h){return q("undefined"!==
typeof h?h+"":" ",l)+m}},{"repeat-string":541}],503:[function(b,K,G){function q(h,a){function g(c,d,f){f=[];for(var k,r=0;k=p.exec(c);){if(1E4<r++)throw Error("Circular references in parenthesis");f.push(c.slice(0,k.index));f.push(g(d[k[1]],d));c=c.slice(k.index+k[0].length)}f.push(c);return f}if("string"!==typeof h)return[h];var e=[h];"string"===typeof a||Array.isArray(a)?a={brackets:a}:a||(a={});h=a.brackets?Array.isArray(a.brackets)?a.brackets:[a.brackets]:["{}","[]","()"];var n=a.escape||"___";
a=!!a.flat;h.forEach(function(c){function d(r,u,v){r=e.push(r.slice(c[0].length,-c[1].length))-1;k.push(r);return n+r+n}var f=new RegExp(["\\",c[0],"[^\\",c[0],"\\",c[1],"]*\\",c[1]].join("")),k=[];e.forEach(function(r,u){for(var v,x=0;r!=v;)if(v=r,r=r.replace(f,d),1E4<x++)throw Error("References have circular dependency. Please, check them.");e[u]=r});k=k.reverse();e=e.map(function(r){k.forEach(function(u){r=r.replace(new RegExp("(\\"+n+u+"\\"+n+")","g"),c[0]+"$1"+c[1])});return r})});var p=new RegExp("\\"+
n+"([0-9]+)\\"+n);return a?e:g(e[0],e)}function m(h,a){function g(c,d){if(null==h[d])throw Error("Reference "+d+"is undefined");return h[d]}if(a&&a.flat){var e=a&&a.escape||"___";a=h[0];if(!a)return"";e=new RegExp("\\"+e+"([0-9]+)\\"+e);for(var n=0;a!=p;){if(1E4<n++)throw Error("Circular references in "+h);var p=a;a=a.replace(e,g)}return a}return h.reduce(function k(d,f){Array.isArray(f)&&(f=f.reduce(k,""));return d+f},"")}function l(h,a){return Array.isArray(h)?m(h,a):q(h,a)}l.parse=q;l.stringify=
m;K.exports=l},{}],504:[function(b,K,G){var q=b("pick-by-alias");K.exports=function(m){1<arguments.length&&(m=arguments);"string"===typeof m?m=m.split(/\s/).map(parseFloat):"number"===typeof m&&(m=[m]);if(m.length&&"number"===typeof m[0])var l=1===m.length?{width:m[0],height:m[0],x:0,y:0}:2===m.length?{width:m[0],height:m[1],x:0,y:0}:{x:m[0],y:m[1],width:m[2]-m[0]||0,height:m[3]-m[1]||0};else m&&(m=q(m,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",
right:"r right Right"}),l={x:m.left||0,y:m.top||0},l.width=null==m.width?m.right?m.right-l.x:0:m.width,l.height=null==m.height?m.bottom?m.bottom-l.y:0:m.height);return l}},{"pick-by-alias":511}],505:[function(b,K,G){K.exports=function(h){var a=[];h.replace(m,function(g,e,n){g=e.toLowerCase();n=(n=n.match(l))?n.map(Number):[];"m"==g&&2<n.length&&(a.push([e].concat(n.splice(0,2))),g="l",e="m"==e?"l":"L");for(;;){if(n.length==q[g])return n.unshift(e),a.push(n);if(n.length<q[g])throw Error("malformed path data");
a.push([e].concat(n.splice(0,q[g])))}});return a};var q={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},m=/([astvzqmhlc])([^astvzqmhlc]*)/ig,l=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig},{}],506:[function(b,K,G){K.exports=function(q,m){m||(m=[0,""]);q=String(q);var l=parseFloat(q,10);m[0]=l;m[1]=q.match(/[\d.\-\+]*\s*(.*)/)[1]||"";return m}},{}],507:[function(b,K,G){(function(q){(function(){function m(a){if("string"!==typeof a)throw new TypeError("Path must be a string. Received "+JSON.stringify(a));}function l(a,
g){for(var e="",n=0,p=-1,c=0,d,f=0;f<=a.length;++f){if(f<a.length)d=a.charCodeAt(f);else if(47===d)break;else d=47;if(47===d){if(p!==f-1&&1!==c)if(p!==f-1&&2===c){if(2>e.length||2!==n||46!==e.charCodeAt(e.length-1)||46!==e.charCodeAt(e.length-2))if(2<e.length){if(p=e.lastIndexOf("/"),p!==e.length-1){-1===p?(e="",n=0):(e=e.slice(0,p),n=e.length-1-e.lastIndexOf("/"));p=f;c=0;continue}}else if(2===e.length||1===e.length){e="";n=0;p=f;c=0;continue}g&&(e=0<e.length?e+"/..":"..",n=2)}else e=0<e.length?
e+("/"+a.slice(p+1,f)):a.slice(p+1,f),n=f-p-1;p=f;c=0}else 46===d&&-1!==c?++c:c=-1}return e}var h={resolve:function(){for(var a="",g=!1,e,n=arguments.length-1;-1<=n&&!g;n--){if(0<=n)var p=arguments[n];else void 0===e&&(e=q.cwd()),p=e;m(p);0!==p.length&&(a=p+"/"+a,g=47===p.charCodeAt(0))}a=l(a,!g);return g?0<a.length?"/"+a:"/":0<a.length?a:"."},normalize:function(a){m(a);if(0===a.length)return".";var g=47===a.charCodeAt(0),e=47===a.charCodeAt(a.length-1);a=l(a,!g);0!==a.length||g||(a=".");0<a.length&&
e&&(a+="/");return g?"/"+a:a},isAbsolute:function(a){m(a);return 0<a.length&&47===a.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var a,g=0;g<arguments.length;++g){var e=arguments[g];m(e);0<e.length&&(a=void 0===a?e:a+("/"+e))}return void 0===a?".":h.normalize(a)},relative:function(a,g){m(a);m(g);if(a===g)return"";a=h.resolve(a);g=h.resolve(g);if(a===g)return"";for(var e=1;e<a.length&&47===a.charCodeAt(e);++e);for(var n=a.length,p=n-e,c=1;c<g.length&&47===g.charCodeAt(c);++c);
for(var d=g.length-c,f=p<d?p:d,k=-1,r=0;r<=f;++r){if(r===f){if(d>f){if(47===g.charCodeAt(c+r))return g.slice(c+r+1);if(0===r)return g.slice(c+r)}else p>f&&(47===a.charCodeAt(e+r)?k=r:0===r&&(k=0));break}var u=a.charCodeAt(e+r),v=g.charCodeAt(c+r);if(u!==v)break;else 47===u&&(k=r)}p="";for(r=e+k+1;r<=n;++r)if(r===n||47===a.charCodeAt(r))p=0===p.length?p+"..":p+"/..";if(0<p.length)return p+g.slice(c+k);c+=k;47===g.charCodeAt(c)&&++c;return g.slice(c)},_makeLong:function(a){return a},dirname:function(a){m(a);
if(0===a.length)return".";for(var g=a.charCodeAt(0),e=47===g,n=-1,p=!0,c=a.length-1;1<=c;--c)if(g=a.charCodeAt(c),47===g){if(!p){n=c;break}}else p=!1;return-1===n?e?"/":".":e&&1===n?"//":a.slice(0,n)},basename:function(a,g){if(void 0!==g&&"string"!==typeof g)throw new TypeError('"ext" argument must be a string');m(a);var e=0,n=-1,p=!0,c;if(void 0!==g&&0<g.length&&g.length<=a.length){if(g.length===a.length&&g===a)return"";var d=g.length-1,f=-1;for(c=a.length-1;0<=c;--c){var k=a.charCodeAt(c);if(47===
k){if(!p){e=c+1;break}}else-1===f&&(p=!1,f=c+1),0<=d&&(k===g.charCodeAt(d)?-1===--d&&(n=c):(d=-1,n=f))}e===n?n=f:-1===n&&(n=a.length);return a.slice(e,n)}for(c=a.length-1;0<=c;--c)if(47===a.charCodeAt(c)){if(!p){e=c+1;break}}else-1===n&&(p=!1,n=c+1);return-1===n?"":a.slice(e,n)},extname:function(a){m(a);for(var g=-1,e=0,n=-1,p=!0,c=0,d=a.length-1;0<=d;--d){var f=a.charCodeAt(d);if(47===f){if(!p){e=d+1;break}}else-1===n&&(p=!1,n=d+1),46===f?-1===g?g=d:1!==c&&(c=1):-1!==g&&(c=-1)}return-1===g||-1===
n||0===c||1===c&&g===n-1&&g===e+1?"":a.slice(g,n)},format:function(a){if(null===a||"object"!==typeof a)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof a);var g=a.dir||a.root,e=a.base||(a.name||"")+(a.ext||"");a=g?g===a.root?g+e:g+"/"+e:e;return a},parse:function(a){m(a);var g={root:"",dir:"",base:"",ext:"",name:""};if(0===a.length)return g;var e=a.charCodeAt(0),n=47===e;if(n){g.root="/";var p=1}else p=0;for(var c=-1,d=0,f=-1,k=!0,r=a.length-1,u=0;r>=p;--r)if(e=
a.charCodeAt(r),47===e){if(!k){d=r+1;break}}else-1===f&&(k=!1,f=r+1),46===e?-1===c?c=r:1!==u&&(u=1):-1!==c&&(u=-1);-1===c||-1===f||0===u||1===u&&c===f-1&&c===d+1?-1!==f&&(g.base=0===d&&n?g.name=a.slice(1,f):g.name=a.slice(d,f)):(0===d&&n?(g.name=a.slice(1,c),g.base=a.slice(1,f)):(g.name=a.slice(d,c),g.base=a.slice(d,f)),g.ext=a.slice(c,f));0<d?g.dir=a.slice(0,d-1):n&&(g.dir="/");return g},sep:"/",delimiter:":",win32:null,posix:null};h.posix=h;K.exports=h}).call(this)}).call(this,b("_process"))},{_process:526}],
508:[function(b,K,G){(function(q){(function(){(function(){if("undefined"!==typeof performance&&null!==performance&&performance.now)K.exports=function(){return performance.now()};else if("undefined"!==typeof q&&null!==q&&q.hrtime){K.exports=function(){return(l()-g)/1E6};var m=q.hrtime;var l=function(){var n=m();return 1E9*n[0]+n[1]};var h=l();var a=1E9*q.uptime();var g=h-a}else if(Date.now){K.exports=function(){return Date.now()-e};var e=Date.now()}else K.exports=function(){return(new Date).getTime()-
e},e=(new Date).getTime()}).call(this)}).call(this)}).call(this,b("_process"))},{_process:526}],509:[function(b,K,G){K.exports=function(l){var h=l.length;if(h<q)for(var a=1,g=0;g<h;++g)for(var e=0;e<g;++e)if(l[g]<l[e])a=-a;else{if(l[g]===l[e])return 0}else{var n=m.mallocUint8(h);for(g=0;g<h;++g)n[g]=0;a=1;for(g=0;g<h;++g)if(!n[g]){var p=1;n[g]=1;for(e=l[g];e!==g;e=l[e]){if(n[e])return m.freeUint8(n),0;p+=1;n[e]=1}p&1||(a=-a)}m.freeUint8(n)}return a};var q=32,m=b("typedarray-pool")},{"typedarray-pool":595}],
510:[function(b,K,G){var q=b("typedarray-pool"),m=b("invert-permutation");G.rank=function(l){var h=l.length;switch(h){case 0:case 1:return 0;case 2:return l[1]}var a=q.mallocUint32(h),g=q.mallocUint32(h),e=0,n;m(l,g);for(n=0;n<h;++n)a[n]=l[n];for(n=h-1;0<n;--n)h=g[n],l=a[n],a[n]=a[h],a[h]=l,g[n]=g[l],g[l]=h,e=(e+l)*n;q.freeUint32(g);q.freeUint32(a);return e};G.unrank=function(l,h,a){switch(l){case 0:return a?a:[];case 1:return a?(a[0]=0,a):[0];case 2:return a?(h?(a[0]=0,a[1]=1):(a[0]=1,a[1]=0),a):
h?[0,1]:[1,0]}a=a||Array(l);var g,e=1;a[0]=0;for(g=1;g<l;++g)a[g]=g,e=e*g|0;for(g=l-1;0<g;--g){l=h/e|0;h=h-l*e|0;e=e/g|0;var n=a[g]|0;a[g]=a[l]|0;a[l]=n|0}return a}},{"invert-permutation":462,"typedarray-pool":595}],511:[function(b,K,G){function q(l){if(m[l])return m[l];"string"===typeof l&&(l=m[l]=l.split(/\s*,\s*|\s+/));return l}K.exports=function(l,h,a){var g={},e,n;"string"===typeof h&&(h=q(h));if(Array.isArray(h)){var p={};for(n=0;n<h.length;n++)p[h[n]]=!0;h=p}for(e in h)h[e]=q(h[e]);p={};for(e in h){var c=
h[e];if(Array.isArray(c))for(n=0;n<c.length;n++){var d=c[n];a&&(p[d]=!0);if(d in l){g[e]=l[d];if(a)for(;n<c.length;n++)p[c[n]]=!0;break}}else e in l&&(h[e]&&(g[e]=l[e]),a&&(p[e]=!0))}if(a)for(e in l)p[e]||(g[e]=l[e]);return g};var m={}},{}],512:[function(b,K,G){K.exports=function(m,l){function h(k,r){r=p[r][k[r]];r.splice(r.indexOf(k),1)}function a(k,r,u){var v;for(v=0;2>v;++v)if(0<p[v][r].length){var x=p[v][r][0];var C=v;break}v=x[C^1];for(var z=0;2>z;++z)for(var y=p[z][r],D=0;D<y.length;++D){var A=
y[D],t=A[z^1];0<q(l[k],l[r],l[v],l[t])&&(x=A,v=t,C=z)}if(u)return v;x&&h(x,C);return v}function g(k,r){var u=p[r][k][0],v=[k];h(u,r);for(r=u[r^1];;){for(;r!==k;)v.push(r),r=a(v[v.length-2],r,!1);if(0===p[0][k].length+p[1][k].length)break;r=v[v.length-1];u=k;var x=v[1],C=a(r,u,!0);if(0>q(l[r],l[u],l[x],l[C]))break;v.push(k);r=a(r,u)}return v}for(var e=l.length|0,n=m.length,p=[Array(e),Array(e)],c=0;c<e;++c)p[0][c]=[],p[1][c]=[];for(c=0;c<n;++c){var d=m[c];p[0][d[0]].push(d);p[1][d[1]].push(d)}m=[];
for(c=0;c<e;++c)0===p[0][c].length+p[1][c].length&&m.push([c]);for(c=0;c<e;++c)for(n=0;2>n;++n){for(d=[];0<p[n][c].length;){var f=g(c,n);f[1]===f[f.length-1]?d.push.apply(d,f):(0<d.length&&m.push(d),d=f)}0<d.length&&m.push(d)}return m};var q=b("compare-angle")},{"compare-angle":132}],513:[function(b,K,G){K.exports=function(m,l){for(var h=q(m,l.length),a=Array(l.length),g=Array(l.length),e=[],n=0;n<l.length;++n){var p=h[n].length;g[n]=p;a[n]=!0;1>=p&&e.push(n)}for(;0<e.length;)for(p=e.pop(),a[p]=!1,
p=h[p],n=0;n<p.length;++n){var c=p[n];0===--g[c]&&e.push(c)}h=Array(l.length);g=[];for(n=0;n<l.length;++n)a[n]?(p=g.length,h[n]=p,g.push(l[n])):h[n]=-1;l=[];for(n=0;n<m.length;++n)e=m[n],a[e[0]]&&a[e[1]]&&l.push([h[e[0]],h[e[1]]]);return[l,g]};var q=b("edges-to-adjacency-list")},{"edges-to-adjacency-list":178}],514:[function(b,K,G){function q(c,d){for(var f=Array(c),k=0;k<c;++k)f[k]=d;return f}function m(c){for(var d=Array(c),f=0;f<c;++f)d[f]=[];return d}K.exports=function(c,d){function f(L){for(var H=
L.length,P=0;P<H;++P)if(!I[L[P]])return!1;return!0}var k=p(c,d);c=k[0];d=k[1];for(var r=d.length,u=l(c,d.length),v=0;v<r;++v)if(1===u[v].length%2)throw Error("planar-graph-to-polyline: graph must be manifold");c=h(c,d);c=c.filter(function(L){for(var H=L.length,P=[0],M=0;M<H;++M){var N=d[L[M]],T=d[L[(M+1)%H]],Q=g(-N[0],N[1]),U=g(-N[0],T[1]);N=g(T[0],N[1]);T=g(T[0],T[1]);P=e(P,e(e(Q,U),e(N,T)))}return 0<P[P.length-1]});k=c.length;var x=Array(k),C=Array(k);for(v=0;v<k;++v){x[v]=v;var z=Array(k);u=c[v].map(function(L){return d[L]});
var y=a([u]),D=0,A=0;a:for(;A<k;++A)if(z[A]=0,v!==A){u=c[A];for(var t=u.length,B=0;B<t;++B){var F=y(d[u[B]]);if(0!==F){0>F&&(z[A]=1,D+=1);continue a}}z[A]=1;D+=1}C[v]=[D,v,z]}C.sort(function(L,H){return H[0]-L[0]});for(v=0;v<k;++v)for(z=C[v],u=z[1],t=z[2],A=0;A<k;++A)t[A]&&(x[A]=u);C=m(k);for(v=0;v<k;++v)C[v].push(x[v]),C[x[v]].push(v);z={};var I=q(r,!1);for(v=0;v<k;++v)for(u=c[v],t=u.length,A=0;A<t;++A)r=u[A],y=u[(A+1)%t],D=Math.min(r,y)+":"+Math.max(r,y),D in z?(D=z[D],C[D].push(v),C[v].push(D),
I[r]=I[y]=!0):z[D]=v;A=[];r=q(k,-1);for(v=0;v<k;++v)x[v]!==v||f(c[v])?r[v]=-1:(A.push(v),r[v]=0);for(k=[];0<A.length;){v=A.pop();x=C[v];n(x,function(L,H){return L-H});t=x.length;z=r[v];if(0===z){u=c[v];var J=[u]}for(v=0;v<t;++v)u=x[v],0<=r[u]||(r[u]=z^1,A.push(u),0===z&&(u=c[u],f(u)||(u.reverse(),J.push(u))));0===z&&k.push(J)}return k};var l=b("edges-to-adjacency-list"),h=b("planar-dual"),a=b("point-in-big-polygon"),g=b("two-product"),e=b("robust-sum"),n=b("uniq"),p=b("./lib/trim-leaves")},{"./lib/trim-leaves":513,
"edges-to-adjacency-list":178,"planar-dual":512,"point-in-big-polygon":516,"robust-sum":553,"two-product":582,uniq:597}],515:[function(b,K,G){arguments[4][243][0].apply(G,arguments)},{dup:243}],516:[function(b,K,G){function q(){return!0}function m(f){return function(k,r){return(k=f[k])?!!k.queryPoint(r,q):!1}}function l(f){for(var k={},r=0;r<f.length;++r){var u=f[r],v=u[0][0],x=u[0][1];u=u[1][1];x=[Math.min(x,u),Math.max(x,u)];v in k?k[v].push(x):k[v]=[x]}f={};v=Object.keys(k);for(r=0;r<v.length;++r)f[v[r]]=
c(k[v[r]]);return m(f)}function h(f,k){return function(r){var u=d.le(k,r[0]);if(0>u)return 1;var v=f[u];if(!v)if(0<u&&k[u]===r[0])v=f[u-1];else return 1;for(u=1;v;){var x=v.key,C=n(r,x[0],x[1]);if(x[0][0]<x[1][0])if(0>C)v=v.left;else if(0<C)u=-1,v=v.right;else return 0;else if(0<C)v=v.left;else if(0>C)u=1,v=v.right;else return 0}return u}}function a(f){return 1}function g(f){return function(k){return f(k[0],k[1])?0:1}}function e(f,k){return function(r){return f(r[0],r[1])?0:k(r)}}K.exports=function(f){for(var k=
f.length,r=[],u=[],v=0;v<k;++v)for(var x=f[v],C=x.length,z=C-1,y=0;y<C;z=y++){z=x[z];var D=x[y];z[0]===D[0]?u.push([z,D]):r.push([z,D])}if(0===r.length)return 0===u.length?a:g(l(u));f=p(r);f=h(f.slabs,f.coordinates);return 0===u.length?f:e(l(u),f)};var n=b("robust-orientation")[3],p=b("slab-decomposition"),c=b("interval-tree-1d"),d=b("binary-search-bounds")},{"binary-search-bounds":515,"interval-tree-1d":460,"robust-orientation":548,"slab-decomposition":565}],517:[function(b,K,G){function q(c,d,f){c=
p.segments(c);d=p.segments(d);d=p.combine(c,d);f=f(d);return p.polygon(f)}var m=b("./lib/build-log");G=b("./lib/epsilon");var l=b("./lib/intersecter"),h=b("./lib/segment-chainer"),a=b("./lib/segment-selector"),g=b("./lib/geojson"),e=!1,n=G();var p={buildLog:function(c){!0===c?e=m():!1===c&&(e=!1);return!1===e?!1:e.list},epsilon:function(c){return n.epsilon(c)},segments:function(c){var d=l(!0,n,e);c.regions.forEach(d.addRegion);return{segments:d.calculate(c.inverted),inverted:c.inverted}},combine:function(c,
d){return{combined:l(!1,n,e).calculate(c.segments,c.inverted,d.segments,d.inverted),inverted1:c.inverted,inverted2:d.inverted}},selectUnion:function(c){return{segments:a.union(c.combined,e),inverted:c.inverted1||c.inverted2}},selectIntersect:function(c){return{segments:a.intersect(c.combined,e),inverted:c.inverted1&&c.inverted2}},selectDifference:function(c){return{segments:a.difference(c.combined,e),inverted:c.inverted1&&!c.inverted2}},selectDifferenceRev:function(c){return{segments:a.differenceRev(c.combined,
e),inverted:!c.inverted1&&c.inverted2}},selectXor:function(c){return{segments:a.xor(c.combined,e),inverted:c.inverted1!==c.inverted2}},polygon:function(c){return{regions:h(c.segments,n,e),inverted:c.inverted}},polygonFromGeoJSON:function(c){return g.toPolygon(p,c)},polygonToGeoJSON:function(c){return g.fromPolygon(p,n,c)},union:function(c,d){return q(c,d,p.selectUnion)},intersect:function(c,d){return q(c,d,p.selectIntersect)},difference:function(c,d){return q(c,d,p.selectDifference)},differenceRev:function(c,
d){return q(c,d,p.selectDifferenceRev)},xor:function(c,d){return q(c,d,p.selectXor)}};"object"===typeof window&&(window.PolyBool=p);K.exports=p},{"./lib/build-log":518,"./lib/epsilon":519,"./lib/geojson":520,"./lib/intersecter":521,"./lib/segment-chainer":523,"./lib/segment-selector":524}],518:[function(b,K,G){K.exports=function(){function q(a,g){m.list.push({type:a,data:g?JSON.parse(JSON.stringify(g)):void 0});return m}var m,l=0,h=!1;return m={list:[],segmentId:function(){return l++},checkIntersection:function(a,
g){return q("check",{seg1:a,seg2:g})},segmentChop:function(a,g){q("div_seg",{seg:a,pt:g});return q("chop",{seg:a,pt:g})},statusRemove:function(a){return q("pop_seg",{seg:a})},segmentUpdate:function(a){return q("seg_update",{seg:a})},segmentNew:function(a,g){return q("new_seg",{seg:a,primary:g})},segmentRemove:function(a){return q("rem_seg",{seg:a})},tempStatus:function(a,g,e){return q("temp_status",{seg:a,above:g,below:e})},rewind:function(a){return q("rewind",{seg:a})},status:function(a,g,e){return q("status",
{seg:a,above:g,below:e})},vert:function(a){if(a===h)return m;h=a;return q("vert",{x:a})},log:function(a){"string"!==typeof a&&(a=JSON.stringify(a,!1,"  "));return q("log",{txt:a})},reset:function(){return q("reset")},selected:function(a){return q("selected",{segs:a})},chainStart:function(a){return q("chain_start",{seg:a})},chainRemoveHead:function(a,g){return q("chain_rem_head",{index:a,pt:g})},chainRemoveTail:function(a,g){return q("chain_rem_tail",{index:a,pt:g})},chainNew:function(a,g){return q("chain_new",
{pt1:a,pt2:g})},chainMatch:function(a){return q("chain_match",{index:a})},chainClose:function(a){return q("chain_close",{index:a})},chainAddHead:function(a,g){return q("chain_add_head",{index:a,pt:g})},chainAddTail:function(a,g){return q("chain_add_tail",{index:a,pt:g})},chainConnect:function(a,g){return q("chain_con",{index1:a,index2:g})},chainReverse:function(a){return q("chain_rev",{index:a})},chainJoin:function(a,g){return q("chain_join",{index1:a,index2:g})},done:function(){return q("done")}}}},
{}],519:[function(b,K,G){K.exports=function(q){"number"!==typeof q&&(q=1E-10);var m={epsilon:function(l){"number"===typeof l&&(q=l);return q},pointAboveOrOnLine:function(l,h,a){var g=h[0];h=h[1];return(a[0]-g)*(l[1]-h)-(a[1]-h)*(l[0]-g)>=-q},pointBetween:function(l,h,a){var g=a[0]-h[0];a=a[1]-h[1];l=(l[0]-h[0])*g+(l[1]-h[1])*a;return l<q||l-(g*g+a*a)>-q?!1:!0},pointsSameX:function(l,h){return Math.abs(l[0]-h[0])<q},pointsSameY:function(l,h){return Math.abs(l[1]-h[1])<q},pointsSame:function(l,h){return m.pointsSameX(l,
h)&&m.pointsSameY(l,h)},pointsCompare:function(l,h){return m.pointsSameX(l,h)?m.pointsSameY(l,h)?0:l[1]<h[1]?-1:1:l[0]<h[0]?-1:1},pointsCollinear:function(l,h,a){return Math.abs((l[0]-h[0])*(h[1]-a[1])-(h[0]-a[0])*(l[1]-h[1]))<q},linesIntersect:function(l,h,a,g){var e=h[0]-l[0];h=h[1]-l[1];var n=g[0]-a[0],p=g[1]-a[1];g=e*p-h*n;if(Math.abs(g)<q)return!1;var c=l[0]-a[0];a=l[1]-a[1];n=(n*a-p*c)/g;a=(e*a-h*c)/g;l={alongA:0,alongB:0,pt:[l[0]+n*e,l[1]+n*h]};l.alongA=n<=-q?-2:n<q?-1:n-1<=-q?0:n-1<q?1:2;
l.alongB=a<=-q?-2:a<q?-1:a-1<=-q?0:a-1<q?1:2;return l},pointInsideRegion:function(l,h){var a=l[0];l=l[1];for(var g=h[h.length-1][0],e=h[h.length-1][1],n=!1,p=0;p<h.length;p++){var c=h[p][0],d=h[p][1];d-l>q!=e-l>q&&(g-c)*(l-d)/(e-d)+c-a>q&&(n=!n);g=c;e=d}return n}};return m}},{}],520:[function(b,K,G){K.exports={toPolygon:function(q,m){function l(g){function e(c){c=c.slice(0,c.length-1);return q.segments({inverted:!1,regions:[c]})}if(0>=g.length)return q.segments({inverted:!1,regions:[]});for(var n=
e(g[0]),p=1;p<g.length;p++)n=q.selectDifference(q.combine(n,e(g[p])));return n}if("Polygon"===m.type)return q.polygon(l(m.coordinates));if("MultiPolygon"===m.type){for(var h=q.segments({inverted:!1,regions:[]}),a=0;a<m.coordinates.length;a++)h=q.selectUnion(q.combine(h,l(m.coordinates[a])));return q.polygon(h)}throw Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon");},fromPolygon:function(q,m,l){function h(d,f){return m.pointInsideRegion([.5*(d[0][0]+d[1][0]),.5*(d[0][1]+d[1][1])],
f)}function a(d,f){for(var k=0;k<d.children.length;k++){var r=d.children[k];if(h(f,r.region)){a(r,f);return}}var u={region:f,children:[]};for(k=0;k<d.children.length;k++)r=d.children[k],h(r.region,f)&&(u.children.push(r),d.children.splice(k,1),k--);d.children.push(u)}function g(d,f){for(var k=0,r=d[d.length-1][0],u=d[d.length-1][1],v=[],x=0;x<d.length;x++){var C=d[x][0],z=d[x][1];v.push([C,z]);k+=z*r-C*u;r=C;u=z}0>k!==f&&v.reverse();v.push([v[0][0],v[0][1]]);return v}function e(d){var f=[g(d.region,
!1)];c.push(f);for(var k=0;k<d.children.length;k++){var r=f,u=r.push;var v=d.children[k];for(var x=0;x<v.children.length;x++)e(v.children[x]);v=g(v.region,!0);u.call(r,v)}}l=q.polygon(q.segments(l));q={region:null,children:[]};for(var n=0;n<l.regions.length;n++){var p=l.regions[n];3>p.length||a(q,p)}var c=[];for(n=0;n<q.children.length;n++)e(q.children[n]);return 0>=c.length?{type:"Polygon",coordinates:[]}:1==c.length?{type:"Polygon",coordinates:c[0]}:{type:"MultiPolygon",coordinates:c}}}},{}],521:[function(b,
K,G){var q=b("./linked-list");K.exports=function(m,l,h){function a(d,f,k){return{id:h?h.segmentId():-1,start:d,end:f,myFill:{above:k.myFill.above,below:k.myFill.below},otherFill:null}}function g(d,f){c.insertBefore(d,function(k){var r=d.isStart;var u=k.isStart,v=k.pt;k=k.other.pt;var x=l.pointsCompare(d.pt,v);r=0!==x?x:l.pointsSame(f,k)?0:r!==u?r?1:-1:l.pointAboveOrOnLine(f,u?v:k,u?k:v)?1:-1;return 0>r})}function e(d,f){var k=q.node({isStart:!0,pt:d.start,seg:d,primary:f,other:null,status:null});
g(k,d.end);d=q.node({isStart:!1,pt:d.end,seg:d,primary:f,other:k,status:null});k.other=d;g(d,k.pt);return k}function n(d,f){var k=a(f,d.seg.end,d.seg);h&&h.segmentChop(d.seg,f);d.other.remove();d.seg.end=f;d.other.pt=f;g(d.other,d.pt);return e(k,d.primary)}function p(d,f){function k(t){return u.findTransition(function(B){var F=B.ev;B=t.seg.start;var I=t.seg.end,J=F.seg.start;F=F.seg.end;B=l.pointsCollinear(B,J,F)?l.pointsCollinear(I,J,F)?1:l.pointAboveOrOnLine(I,J,F)?1:-1:l.pointAboveOrOnLine(B,J,
F)?1:-1;return 0<B})}function r(t,B){var F=t.seg,I=B.seg,J=F.start,L=F.end,H=I.start,P=I.end;h&&h.checkIntersection(F,I);F=l.linesIntersect(J,L,H,P);if(!1===F){if(!l.pointsCollinear(J,L,H)||l.pointsSame(J,P)||l.pointsSame(L,H))return!1;F=l.pointsSame(J,H);I=l.pointsSame(L,P);if(F&&I)return B;var M=!F&&l.pointBetween(J,H,P);H=!I&&l.pointBetween(L,H,P);if(F)return H?n(B,L):n(t,P),B;M&&(I||(H?n(B,L):n(t,P)),n(B,J))}else 0===F.alongA&&(-1===F.alongB?n(t,H):0===F.alongB?n(t,F.pt):1===F.alongB&&n(t,P)),
0===F.alongB&&(-1===F.alongA?n(B,J):0===F.alongA?n(B,F.pt):1===F.alongA&&n(B,L));return!1}for(var u=q.create(),v=[];!c.isEmpty();){var x=c.getHead();h&&h.vert(x.pt[0]);if(x.isStart){h&&h.segmentNew(x.seg,x.primary);var C=k(x),z=C.before?C.before.ev:null,y=C.after?C.after.ev:null;h&&h.tempStatus(x.seg,z?z.seg:!1,y?y.seg:!1);var D=function(){if(z){var t=r(x,z);if(t)return t}return y?r(x,y):!1}();if(D){if(m){var A;if(A=null===x.seg.myFill.below?!0:x.seg.myFill.above!==x.seg.myFill.below)D.seg.myFill.above=
!D.seg.myFill.above}else D.seg.otherFill=x.seg.myFill;h&&h.segmentUpdate(D.seg);x.other.remove();x.remove()}if(c.getHead()!==x){h&&h.rewind(x.seg);continue}m?(A=null===x.seg.myFill.below?!0:x.seg.myFill.above!==x.seg.myFill.below,x.seg.myFill.below=y?y.seg.myFill.above:d,x.seg.myFill.above=A?!x.seg.myFill.below:x.seg.myFill.below):null===x.seg.otherFill&&(D=y?x.primary===y.primary?y.seg.otherFill.above:y.seg.myFill.above:x.primary?f:d,x.seg.otherFill={above:D,below:D});h&&h.status(x.seg,z?z.seg:!1,
y?y.seg:!1);x.other.status=C.insert(q.node({ev:x}))}else{C=x.status;if(null===C)throw Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");u.exists(C.prev)&&u.exists(C.next)&&r(C.prev.ev,C.next.ev);h&&h.statusRemove(C.ev.seg);C.remove();x.primary||(C=x.seg.myFill,x.seg.myFill=x.seg.otherFill,x.seg.otherFill=C);v.push(x.seg)}c.getHead().remove()}h&&h.done();return v}var c=q.create();return m?{addRegion:function(d){for(var f,k=d[d.length-1],r=0;r<d.length;r++){f=
k;k=d[r];var u=l.pointsCompare(f,k);if(0!==u){var v=0>u?f:k;f=0>u?k:f;v={id:h?h.segmentId():-1,start:v,end:f,myFill:{above:null,below:null},otherFill:null};e(v,!0)}}},calculate:function(d){return p(d,!1)}}:{calculate:function(d,f,k,r){d.forEach(function(u){e(a(u.start,u.end,u),!0)});k.forEach(function(u){e(a(u.start,u.end,u),!1)});return p(f,r)}}}},{"./linked-list":522}],522:[function(b,K,G){K.exports={create:function(){var q={root:{root:!0,next:null},exists:function(m){return null===m||m===q.root?
!1:!0},isEmpty:function(){return null===q.root.next},getHead:function(){return q.root.next},insertBefore:function(m,l){for(var h=q.root,a=q.root.next;null!==a;){if(l(a)){m.prev=a.prev;m.next=a;a.prev.next=m;a.prev=m;return}h=a;a=a.next}h.next=m;m.prev=h;m.next=null},findTransition:function(m){for(var l=q.root,h=q.root.next;null!==h&&!m(h);)l=h,h=h.next;return{before:l===q.root?null:l,after:h,insert:function(a){a.prev=l;a.next=h;l.next=a;null!==h&&(h.prev=a);return a}}}};return q},node:function(q){q.prev=
null;q.next=null;q.remove=function(){if(q.prev.next=q.next)q.next.prev=q.prev;q.prev=null;q.next=null};return q}}},{}],523:[function(b,K,G){K.exports=function(q,m,l){var h=[],a=[];q.forEach(function(g){function e(y,D,A){r.index=y;r.matches_head=D;r.matches_pt1=A;if(r===f)return r=k,!1;r=null;return!0}function n(y){l&&l.chainReverse(y);h[y].reverse()}function p(y,D){var A=h[y],t=h[D],B=A[A.length-1],F=A[A.length-2],I=t[0],J=t[1];m.pointsCollinear(F,B,I)&&(l&&l.chainRemoveTail(y,B),A.pop(),B=F);m.pointsCollinear(B,
I,J)&&(l&&l.chainRemoveHead(D,I),t.shift());l&&l.chainJoin(y,D);h[y]=A.concat(t);h.splice(D,1)}var c=g.start,d=g.end;if(m.pointsSame(c,d))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{l&&l.chainStart(g);for(var f={index:0,matches_head:!1,matches_pt1:!1},k={index:0,matches_head:!1,matches_pt1:!1},r=f,u=0;u<h.length;u++){g=h[u];var v=g[0];g=g[g.length-1];if(m.pointsSame(v,c)){if(e(u,!0,!0))break}else if(m.pointsSame(v,d)){if(e(u,
!0,!1))break}else if(m.pointsSame(g,c)){if(e(u,!1,!0))break}else if(m.pointsSame(g,d)&&e(u,!1,!1))break}if(r===f)h.push([c,d]),l&&l.chainNew(c,d);else if(r===k){l&&l.chainMatch(f.index);u=f.index;c=f.matches_pt1?d:c;d=f.matches_head;g=h[u];v=d?g[0]:g[g.length-1];var x=d?g[1]:g[g.length-2],C=d?g[g.length-1]:g[0],z=d?g[g.length-2]:g[1];m.pointsCollinear(x,v,c)&&(d?(l&&l.chainRemoveHead(f.index,c),g.shift()):(l&&l.chainRemoveTail(f.index,c),g.pop()),v=x);m.pointsSame(C,c)?(h.splice(u,1),m.pointsCollinear(z,
C,v)&&(d?(l&&l.chainRemoveTail(f.index,v),g.pop()):(l&&l.chainRemoveHead(f.index,v),g.shift())),l&&l.chainClose(f.index),a.push(g)):d?(l&&l.chainAddHead(f.index,c),g.unshift(c)):(l&&l.chainAddTail(f.index,c),g.push(c))}else g=f.index,u=k.index,l&&l.chainConnect(g,u),c=h[g].length<h[u].length,f.matches_head?k.matches_head?c?(n(g),p(g,u)):(n(u),p(u,g)):p(u,g):k.matches_head?p(g,u):c?(n(g),p(u,g)):(n(u),p(g,u))}});return a}},{}],524:[function(b,K,G){function q(m,l,h){var a=[];m.forEach(function(g){var e=
(g.myFill.above?8:0)+(g.myFill.below?4:0)+(g.otherFill&&g.otherFill.above?2:0)+(g.otherFill&&g.otherFill.below?1:0);0!==l[e]&&a.push({id:h?h.segmentId():-1,start:g.start,end:g.end,myFill:{above:1===l[e],below:2===l[e]},otherFill:null})});h&&h.selected(a);return a}K.exports={union:function(m,l){return q(m,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],l)},intersect:function(m,l){return q(m,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],l)},difference:function(m,l){return q(m,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],l)},differenceRev:function(m,
l){return q(m,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],l)},xor:function(m,l){return q(m,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],l)}}},{}],525:[function(b,K,G){var q=new Float64Array(4),m=new Float64Array(4),l=new Float64Array(4);K.exports=function(h,a,g,e,n){q.length<e.length&&(q=new Float64Array(e.length),m=new Float64Array(e.length),l=new Float64Array(e.length));for(var p=0;p<e.length;++p)q[p]=h[p]-e[p],m[p]=a[p]-h[p],l[p]=g[p]-h[p];var c=0,d=0,f=0,k=0,r=0,u=0;for(p=0;p<e.length;++p){var v=m[p],x=l[p],C=q[p];
c+=v*v;d+=v*x;f+=x*x;k+=C*v;r+=C*x;u+=C*C}p=Math.abs(c*f-d*d);v=d*r-f*k;x=d*k-c*r;v+x<=p?0>v?0>x?0>k?(x=0,-k>=c?(v=1,c=c+2*k+u):(v=-k/c,c=k*v+u)):(v=0,0<=r?(x=0,c=u):-r>=f?(x=1,c=f+2*r+u):(x=-r/f,c=r*x+u)):(v=0,0<=r?(x=0,c=u):-r>=f?(x=1,c=f+2*r+u):(x=-r/f,c=r*x+u)):0>x?(x=0,0<=k?(v=0,c=u):-k>=c?(v=1,c=c+2*k+u):(v=-k/c,c=k*v+u)):(p=1/p,v*=p,x*=p,c=v*(c*v+d*x+2*k)+x*(d*v+f*x+2*r)+u):0>v?(v=d+k,p=f+r,p>v?(p-=v,v=c-2*d+f,p>=v?(v=1,x=0,c=c+2*k+u):(v=p/v,x=1-v,c=v*(c*v+d*x+2*k)+x*(d*v+f*x+2*r)+u)):(v=0,
0>=p?(x=1,c=f+2*r+u):0<=r?(x=0,c=u):(x=-r/f,c=r*x+u))):0>x?(v=d+r,p=c+k,p>v?(p-=v,v=c-2*d+f,p>=v?(x=1,v=0,c=f+2*r+u):(x=p/v,v=1-x,c=v*(c*v+d*x+2*k)+x*(d*v+f*x+2*r)+u)):(x=0,0>=p?(v=1,c=c+2*k+u):0<=k?(v=0,c=u):(v=-k/c,c=k*v+u))):(p=f+r-d-k,0>=p?(v=0,x=1,c=f+2*r+u):(v=c-2*d+f,p>=v?(v=1,x=0,c=c+2*k+u):(v=p/v,x=1-v,c=v*(c*v+d*x+2*k)+x*(d*v+f*x+2*r)+u)));d=1-v-x;for(p=0;p<e.length;++p)n[p]=d*h[p]+v*a[p]+x*g[p];return 0>c?0:c}},{}],526:[function(b,K,G){function q(){throw Error("setTimeout has not been defined");
}function m(){throw Error("clearTimeout has not been defined");}function l(u){if(p===setTimeout)return setTimeout(u,0);if((p===q||!p)&&setTimeout)return p=setTimeout,setTimeout(u,0);try{return p(u,0)}catch(v){try{return p.call(null,u,0)}catch(x){return p.call(this,u,0)}}}function h(u){if(c===clearTimeout)return clearTimeout(u);if((c===m||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(u);try{return c(u)}catch(v){try{return c.call(null,u)}catch(x){return c.call(this,u)}}}function a(){f&&k&&(f=
!1,k.length?d=k.concat(d):r=-1,d.length&&g())}function g(){if(!f){var u=l(a);f=!0;for(var v=d.length;v;){k=d;for(d=[];++r<v;)k&&k[r].run();r=-1;v=d.length}k=null;f=!1;h(u)}}function e(u,v){this.fun=u;this.array=v}function n(){}b=K.exports={};try{var p="function"===typeof setTimeout?setTimeout:q}catch(u){p=q}try{var c="function"===typeof clearTimeout?clearTimeout:m}catch(u){c=m}var d=[],f=!1,k,r=-1;b.nextTick=function(u){var v=Array(arguments.length-1);if(1<arguments.length)for(var x=1;x<arguments.length;x++)v[x-
1]=arguments[x];d.push(new e(u,v));1!==d.length||f||l(g)};e.prototype.run=function(){this.fun.apply(null,this.array)};b.title="browser";b.browser=!0;b.env={};b.argv=[];b.version="";b.versions={};b.on=n;b.addListener=n;b.once=n;b.off=n;b.removeListener=n;b.removeAllListeners=n;b.emit=n;b.prependListener=n;b.prependOnceListener=n;b.listeners=function(u){return[]};b.binding=function(u){throw Error("process.binding is not supported");};b.cwd=function(){return"/"};b.chdir=function(u){throw Error("process.chdir is not supported");
};b.umask=function(){return 0}},{}],527:[function(b,K,G){K.exports=b("gl-quat/slerp")},{"gl-quat/slerp":325}],528:[function(b,K,G){(function(q){(function(){for(var m=b("performance-now"),l="undefined"===typeof window?q:window,h=["moz","webkit"],a=l.requestAnimationFrame,g=l.cancelAnimationFrame||l.cancelRequestAnimationFrame,e=0;!a&&e<h.length;e++)a=l[h[e]+"RequestAnimationFrame"],g=l[h[e]+"CancelAnimationFrame"]||l[h[e]+"CancelRequestAnimationFrame"];if(!a||!g){var n=0,p=0,c=[],d=1E3/60;a=function(f){if(0===
c.length){var k=m(),r=Math.max(0,d-(k-n));n=r+k;setTimeout(function(){for(var u=c.slice(0),v=c.length=0;v<u.length;v++)if(!u[v].cancelled)try{u[v].callback(n)}catch(x){setTimeout(function(){throw x;},0)}},Math.round(r))}c.push({handle:++p,callback:f,cancelled:!1});return p};g=function(f){for(var k=0;k<c.length;k++)c[k].handle===f&&(c[k].cancelled=!0)}}K.exports=function(f){return a.call(l,f)};K.exports.cancel=function(){g.apply(l,arguments)};K.exports.polyfill=function(f){f||(f=l);f.requestAnimationFrame=
a;f.cancelAnimationFrame=g}}).call(this)}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"performance-now":508}],529:[function(b,K,G){var q=b("big-rat/add");K.exports=function(m,l){for(var h=m.length,a=Array(h),g=0;g<h;++g)a[g]=q(m[g],l[g]);return a}},{"big-rat/add":80}],530:[function(b,K,G){K.exports=function(m){for(var l=Array(m.length),h=0;h<m.length;++h)l[h]=q(m[h]);return l};var q=b("big-rat")},{"big-rat":83}],531:[function(b,
K,G){var q=b("big-rat"),m=b("big-rat/mul");K.exports=function(l,h){h=q(h);for(var a=l.length,g=Array(a),e=0;e<a;++e)g[e]=m(l[e],h);return g}},{"big-rat":83,"big-rat/mul":92}],532:[function(b,K,G){var q=b("big-rat/sub");K.exports=function(m,l){for(var h=m.length,a=Array(h),g=0;g<h;++g)a[g]=q(m[g],l[g]);return a}},{"big-rat/sub":94}],533:[function(b,K,G){var q=b("compare-cell"),m=b("compare-oriented-cell"),l=b("cell-orientation");K.exports=function(h){h.sort(m);for(var a=h.length,g=0,e=0;e<a;++e){var n=
h[e],p=l(n);if(0!==p){if(0<g){var c=h[g-1];if(0===q(n,c)&&l(c)!==p){--g;continue}}h[g++]=n}}h.length=g;return h}},{"cell-orientation":117,"compare-cell":133,"compare-oriented-cell":134}],534:[function(b,K,G){var q=b("array-bounds"),m=b("color-normalize"),l=b("update-diff"),h=b("pick-by-alias"),a=b("object-assign"),g=b("flatten-vertex-data");b=b("to-float32");var e=b.float32,n=b.fract32;K.exports=function(c,d){function f(I){I?u(I):null===I&&v();k()}function k(I){if("number"===typeof I)return r(I);
I&&!Array.isArray(I)&&(I=[I]);c._refresh();z.forEach(function(J,L){J&&(I&&(J.draw=I[L]?!0:!1),J.draw?r(L):J.draw=!0)})}function r(I){"number"===typeof I&&(I=z[I]);null!=I&&I&&I.count&&I.color&&I.opacity&&I.positions&&1<I.positions.length&&(I.scaleRatio=[I.scale[0]*I.viewport.width,I.scale[1]*I.viewport.height],F(I),I.after&&I.after(I))}function u(I){if(I){null!=I.length?"number"===typeof I[0]&&(I=[{positions:I}]):Array.isArray(I)||(I=[I]);var J=0,L=0;f.groups=z=I.map(function(N,T){var Q=z[T];if(N)"function"===
typeof N?N={after:N}:"number"===typeof N[0]&&(N={positions:N});else return Q;N=h(N,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"});Q||(z[T]=Q={id:T,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},N=a({},C,N));l(Q,N,[{lineWidth:function(U){return.5*+U},capSize:function(U){return.5*
+U},opacity:parseFloat,errors:function(U){U=g(U);L+=U.length;return U},positions:function(U,S){U=g(U,"float64");S.count=Math.floor(U.length/2);S.bounds=q(U,2);S.offset=J;J+=S.count;return U}},{color:function(U,S){S=S.count;U||(U="transparent");if(!Array.isArray(U)||"number"===typeof U[0]){var X=U;U=Array(S);for(var Z=0;Z<S;Z++)U[Z]=X}if(U.length<S)throw Error("Not enough colors");X=new Uint8Array(4*S);for(Z=0;Z<S;Z++){var aa=m(U[Z],"uint8");X.set(aa,4*Z)}return X},range:function(U,S,X){X=S.bounds;
U||(U=X);S.scale=[1/(U[2]-U[0]),1/(U[3]-U[1])];S.translate=[-U[0],-U[1]];S.scaleFract=n(S.scale);S.translateFract=n(S.translate);return U},viewport:function(U){if(Array.isArray(U))var S={x:U[0],y:U[1],width:U[2]-U[0],height:U[3]-U[1]};else U?(S={x:U.x||U.left||0,y:U.y||U.top||0},S.width=U.right?U.right-S.x:U.w||U.width||0,S.height=U.bottom?U.bottom-S.y:U.h||U.height||0):S={x:0,y:0,width:x.drawingBufferWidth,height:x.drawingBufferHeight};return S}}]);return Q});if(J||L){I=z.reduce(function(N,T,Q){return N+
(T?T.count:0)},0);var H=new Float64Array(2*I),P=new Uint8Array(4*I),M=new Float32Array(4*I);z.forEach(function(N,T){if(N){T=N.positions;var Q=N.offset,U=N.errors;N.count&&(P.set(N.color,4*Q),M.set(U,4*Q),H.set(T,2*Q))}});D(e(H));A(n(H));y(P);t(M)}}}function v(){D.destroy();A.destroy();y.destroy();t.destroy();B.destroy()}"function"===typeof c?(d||(d={}),d.regl=c):d=c;d.length&&(d.positions=d);c=d.regl;if(!c.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");
var x=c._gl,C={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},z=[];var y=c.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)});var D=c.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});var A=c.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});var t=c.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});var B=c.buffer({usage:"static",type:"float",data:p});u(d);var F=c({vert:"\n\t\tprecision highp float;\n\n\t\tattribute vec2 position, positionFract;\n\t\tattribute vec4 error;\n\t\tattribute vec4 color;\n\n\t\tattribute vec2 direction, lineOffset, capOffset;\n\n\t\tuniform vec4 viewport;\n\t\tuniform float lineWidth, capSize;\n\t\tuniform vec2 scale, scaleFract, translate, translateFract;\n\n\t\tvarying vec4 fragColor;\n\n\t\tvoid main() {\n\t\t\tfragColor = color / 255.;\n\n\t\t\tvec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;\n\n\t\t\tvec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;\n\n\t\t\tvec2 position = position + dxy;\n\n\t\t\tvec2 pos = (position + translate) * scale\n\t\t\t\t+ (positionFract + translateFract) * scale\n\t\t\t\t+ (position + translate) * scaleFract\n\t\t\t\t+ (positionFract + translateFract) * scaleFract;\n\n\t\t\tpos += pixelOffset / viewport.zw;\n\n\t\t\tgl_Position = vec4(pos * 2. - 1., 0, 1);\n\t\t}\n\t\t",
frag:"\n\t\tprecision highp float;\n\n\t\tvarying vec4 fragColor;\n\n\t\tuniform float opacity;\n\n\t\tvoid main() {\n\t\t\tgl_FragColor = fragColor;\n\t\t\tgl_FragColor.a *= opacity;\n\t\t}\n\t\t",uniforms:{range:c.prop("range"),lineWidth:c.prop("lineWidth"),capSize:c.prop("capSize"),opacity:c.prop("opacity"),scale:c.prop("scale"),translate:c.prop("translate"),scaleFract:c.prop("scaleFract"),translateFract:c.prop("translateFract"),viewport:function(I,J){return[J.viewport.x,J.viewport.y,I.viewportWidth,
I.viewportHeight]}},attributes:{color:{buffer:y,offset:function(I,J){return 4*J.offset},divisor:1},position:{buffer:D,offset:function(I,J){return 8*J.offset},divisor:1},positionFract:{buffer:A,offset:function(I,J){return 8*J.offset},divisor:1},error:{buffer:t,offset:function(I,J){return 16*J.offset},divisor:1},direction:{buffer:B,stride:24,offset:0},lineOffset:{buffer:B,stride:24,offset:8},capOffset:{buffer:B,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",
alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:c.prop("viewport")},viewport:c.prop("viewport"),stencil:!1,instances:c.prop("count"),count:p.length});a(f,{update:u,draw:k,destroy:v,regl:c,gl:x,canvas:x.canvas,groups:z});return f};var p=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,
1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]]},{"array-bounds":70,"color-normalize":125,"flatten-vertex-data":244,"object-assign":499,"pick-by-alias":511,
"to-float32":577,"update-diff":599}],535:[function(b,K,G){function q(k,r){if(!(this instanceof q))return new q(k,r);"function"===typeof k?(r||(r={}),r.regl=k):r=k;r.length&&(r.positions=r);k=r.regl;if(!k.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=k._gl;this.regl=k;this.passes=[];this.shaders=q.shaders.has(k)?q.shaders.get(k):q.shaders.set(k,q.createShaders(k)).get(k);this.update(r)}var m=b("color-normalize"),l=b("array-bounds"),
h=b("object-assign"),a=b("glslify"),g=b("pick-by-alias"),e=b("flatten-vertex-data"),n=b("earcut"),p=b("array-normalize");G=b("to-float32");var c=G.float32,d=G.fract32;G=b("es6-weak-map");var f=b("parse-rect");K.exports=q;q.dashMult=2;q.maxPatternLength=256;q.precisionThreshold=3E6;q.maxPoints=1E4;q.maxLines=2048;q.shaders=new G;q.createShaders=function(k){var r=k.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),u={primitive:"triangle strip",instances:k.prop("count"),count:4,offset:0,uniforms:{miterMode:function(C,
z){return"round"===z.join?2:1},miterLimit:k.prop("miterLimit"),scale:k.prop("scale"),scaleFract:k.prop("scaleFract"),translateFract:k.prop("translateFract"),translate:k.prop("translate"),thickness:k.prop("thickness"),dashPattern:k.prop("dashTexture"),opacity:k.prop("opacity"),pixelRatio:k.context("pixelRatio"),id:k.prop("id"),dashSize:k.prop("dashLength"),viewport:function(C,z){return[z.viewport.x,z.viewport.y,C.viewportWidth,C.viewportHeight]},depth:k.prop("depth")},blend:{enable:!0,color:[0,0,0,
0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(C,z){return!z.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:k.prop("viewport")},viewport:k.prop("viewport")},v=k(h({vert:a(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;\nattribute vec4 color;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {\n\t// the order is important\n\treturn position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n}\n\nvoid main() {\n\tfloat lineStart = 1. - lineEnd;\n\tfloat lineOffset = lineTop * 2. - 1.;\n\n\tvec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);\n\ttangent = normalize(diff * scale * viewport.zw);\n\tvec2 normal = vec2(-tangent.y, tangent.x);\n\n\tvec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart\n\t\t+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd\n\n\t\t+ thickness * normal * .5 * lineOffset / viewport.zw;\n\n\tgl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor = color / 255.;\n}\n"]),
frag:a(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D dashPattern;\n\nuniform float dashSize, pixelRatio, thickness, opacity, id;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvoid main() {\n\tfloat alpha = 1.;\n\n\tfloat t = fract(dot(tangent, gl_FragCoord.xy) / dashSize) * .5 + .25;\n\tfloat dash = texture2D(dashPattern, vec2(t, .5)).r;\n\n\tgl_FragColor = fragColor;\n\tgl_FragColor.a *= alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:r,divisor:0,stride:8,offset:0},
lineTop:{buffer:r,divisor:0,stride:8,offset:4},aCoord:{buffer:k.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:k.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:k.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:k.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:k.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},u));try{var x=k(h({cull:{enable:!0,face:"back"},vert:a(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, nextCoord, prevCoord;\nattribute vec4 aColor, bColor;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, translate;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\nuniform float miterLimit, miterMode;\n\nvarying vec4 fragColor;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 tangent;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nconst float REVERSE_THRESHOLD = -.875;\nconst float MIN_DIFF = 1e-6;\n\n// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead\n// TODO: precalculate dot products, normalize things beforehead etc.\n// TODO: refactor to rectangular algorithm\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff = b - a;\n\tvec2 perp = normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nbool isNaN( float val ){\n  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;\n}\n\nvoid main() {\n\tvec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;\n\n  vec2 adjustedScale;\n  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;\n  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;\n\n  vec2 scaleRatio = adjustedScale * viewport.zw;\n\tvec2 normalWidth = thickness / scaleRatio;\n\n\tfloat lineStart = 1. - lineEnd;\n\tfloat lineBot = 1. - lineTop;\n\n\tfragColor = (lineStart * aColor + lineEnd * bColor) / 255.;\n\n\tif (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;\n\n\tif (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);\n\tif (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);\n\n\tvec2 prevDiff = aCoord - prevCoord;\n\tvec2 currDiff = bCoord - aCoord;\n\tvec2 nextDiff = nextCoord - bCoord;\n\n\tvec2 prevTangent = normalize(prevDiff * scaleRatio);\n\tvec2 currTangent = normalize(currDiff * scaleRatio);\n\tvec2 nextTangent = normalize(nextDiff * scaleRatio);\n\n\tvec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);\n\tvec2 currNormal = vec2(-currTangent.y, currTangent.x);\n\tvec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);\n\n\tvec2 startJoinDirection = normalize(prevTangent - currTangent);\n\tvec2 endJoinDirection = normalize(currTangent - nextTangent);\n\n\t// collapsed/unidirectional segment cases\n\t// FIXME: there should be more elegant solution\n\tvec2 prevTanDiff = abs(prevTangent - currTangent);\n\tvec2 nextTanDiff = abs(nextTangent - currTangent);\n\tif (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {\n\t\tstartJoinDirection = currNormal;\n\t}\n\tif (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {\n\t\tendJoinDirection = currNormal;\n\t}\n\tif (aCoord == bCoord) {\n\t\tendJoinDirection = startJoinDirection;\n\t\tcurrNormal = prevNormal;\n\t\tcurrTangent = prevTangent;\n\t}\n\n\ttangent = currTangent;\n\n\t//calculate join shifts relative to normals\n\tfloat startJoinShift = dot(currNormal, startJoinDirection);\n\tfloat endJoinShift = dot(currNormal, endJoinDirection);\n\n\tfloat startMiterRatio = abs(1. / startJoinShift);\n\tfloat endMiterRatio = abs(1. / endJoinShift);\n\n\tvec2 startJoin = startJoinDirection * startMiterRatio;\n\tvec2 endJoin = endJoinDirection * endMiterRatio;\n\n\tvec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;\n\tstartTopJoin = sign(startJoinShift) * startJoin * .5;\n\tstartBotJoin = -startTopJoin;\n\n\tendTopJoin = sign(endJoinShift) * endJoin * .5;\n\tendBotJoin = -endTopJoin;\n\n\tvec2 aTopCoord = aCoord + normalWidth * startTopJoin;\n\tvec2 bTopCoord = bCoord + normalWidth * endTopJoin;\n\tvec2 aBotCoord = aCoord + normalWidth * startBotJoin;\n\tvec2 bBotCoord = bCoord + normalWidth * endBotJoin;\n\n\t//miter anti-clipping\n\tfloat baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));\n\tfloat abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));\n\n\t//prevent close to reverse direction switch\n\tbool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\tbool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\n\tif (prevReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);\n\t\taBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\taTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {\n\t\t//handle miter clipping\n\t\tbTopCoord -= normalWidth * endTopJoin;\n\t\tbTopCoord += normalize(endTopJoin * normalWidth) * baClipping;\n\t}\n\n\tif (nextReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);\n\t\tbBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\tbTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {\n\t\t//handle miter clipping\n\t\taBotCoord -= normalWidth * startBotJoin;\n\t\taBotCoord += normalize(startBotJoin * normalWidth) * abClipping;\n\t}\n\n\tvec2 aTopPosition = (aTopCoord) * adjustedScale + translate;\n\tvec2 aBotPosition = (aBotCoord) * adjustedScale + translate;\n\n\tvec2 bTopPosition = (bTopCoord) * adjustedScale + translate;\n\tvec2 bBotPosition = (bBotCoord) * adjustedScale + translate;\n\n\t//position is normalized 0..1 coord on the screen\n\tvec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;\n\n\tstartCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\tendCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\n\tgl_Position = vec4(position  * 2.0 - 1.0, depth, 1);\n\n\tenableStartMiter = step(dot(currTangent, prevTangent), .5);\n\tenableEndMiter = step(dot(currTangent, nextTangent), .5);\n\n\t//bevel miter cutoffs\n\tif (miterMode == 1.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tvec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;\n\t\t\tstartCutoff = vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff += viewport.xyxy;\n\t\t\tstartCutoff += startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tvec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;\n\t\t\tendCutoff = vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff += viewport.xyxy;\n\t\t\tendCutoff += endMiterWidth.xyxy;\n\t\t}\n\t}\n\n\t//round miter cutoffs\n\telse if (miterMode == 2.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tvec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;\n\t\t\tstartCutoff = vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff += viewport.xyxy;\n\t\t\tstartCutoff += startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tvec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;\n\t\t\tendCutoff = vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff += viewport.xyxy;\n\t\t\tendCutoff += endMiterWidth.xyxy;\n\t\t}\n\t}\n}\n"]),
frag:a(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D dashPattern;\nuniform float dashSize, pixelRatio, thickness, opacity, id, miterMode;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff = b - a;\n\tvec2 perp = normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nvoid main() {\n\tfloat alpha = 1., distToStart, distToEnd;\n\tfloat cutoff = thickness * .5;\n\n\t//bevel miter\n\tif (miterMode == 1.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tdistToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart < -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *= min(max(distToStart + 1., 0.), 1.);\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tdistToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd < -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *= min(max(distToEnd + 1., 0.), 1.);\n\t\t}\n\t}\n\n\t// round miter\n\telse if (miterMode == 2.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tdistToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart < 0.) {\n\t\t\t\tfloat radius = length(gl_FragCoord.xy - startCoord);\n\n\t\t\t\tif(radius > cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tdistToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd < 0.) {\n\t\t\t\tfloat radius = length(gl_FragCoord.xy - endCoord);\n\n\t\t\t\tif(radius > cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\t}\n\n\tfloat t = fract(dot(tangent, gl_FragCoord.xy) / dashSize) * .5 + .25;\n\tfloat dash = texture2D(dashPattern, vec2(t, .5)).r;\n\n\tgl_FragColor = fragColor;\n\tgl_FragColor.a *= alpha * opacity * dash;\n}\n"]),
attributes:{lineEnd:{buffer:r,divisor:0,stride:8,offset:0},lineTop:{buffer:r,divisor:0,stride:8,offset:4},aColor:{buffer:k.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:k.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:k.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:k.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:k.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:k.prop("positionBuffer"),stride:8,
offset:24,divisor:1}}},u))}catch(C){x=v}return{fill:k({primitive:"triangle",elements:function(C,z){return z.triangles},offset:0,vert:a(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 position, positionFract;\n\nuniform vec4 color;\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio, id;\nuniform vec4 viewport;\nuniform float opacity;\n\nvarying vec4 fragColor;\n\nconst float MAX_LINES = 256.;\n\nvoid main() {\n\tfloat depth = (MAX_LINES - 4. - id) / (MAX_LINES);\n\n\tvec2 position = position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n\n\tgl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor = color / 255.;\n\tfragColor.a *= opacity;\n}\n"]),
frag:a(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n\tgl_FragColor = fragColor;\n}\n"]),uniforms:{scale:k.prop("scale"),color:k.prop("fill"),scaleFract:k.prop("scaleFract"),translateFract:k.prop("translateFract"),translate:k.prop("translate"),opacity:k.prop("opacity"),pixelRatio:k.context("pixelRatio"),id:k.prop("id"),viewport:function(C,z){return[z.viewport.x,z.viewport.y,C.viewportWidth,C.viewportHeight]}},attributes:{position:{buffer:k.prop("positionBuffer"),
stride:8,offset:8},positionFract:{buffer:k.prop("positionFractBuffer"),stride:8,offset:8}},blend:u.blend,depth:{enable:!1},scissor:u.scissor,stencil:u.stencil,viewport:u.viewport}),rect:v,miter:x}};q.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null};q.prototype.render=function(){for(var k=[],r=arguments.length;r--;)k[r]=arguments[r];k.length&&this.update.apply(this,k);this.draw()};q.prototype.draw=
function(){for(var k=this,r=[],u=arguments.length;u--;)r[u]=arguments[u];(r.length?r:this.passes).forEach(function(v,x){if(v&&Array.isArray(v))return k.draw.apply(k,v);"number"===typeof v&&(v=k.passes[v]);v&&1<v.count&&v.opacity&&(k.regl._refresh(),v.fill&&v.triangles&&2<v.triangles.length&&k.shaders.fill(v),v.thickness&&(v.scale[0]*v.viewport.width>q.precisionThreshold||v.scale[1]*v.viewport.height>q.precisionThreshold?k.shaders.rect(v):"rect"===v.join||!v.join&&(2>=v.thickness||v.count>=q.maxPoints)?
k.shaders.rect(v):k.shaders.miter(v)))});return this};q.prototype.update=function(k){var r=this;if(k){null!=k.length?"number"===typeof k[0]&&(k=[{positions:k}]):Array.isArray(k)||(k=[k]);var u=this.regl,v=this.gl;k.forEach(function(z,y){var D=r.passes[y];if(void 0!==z)if(null===z)r.passes[y]=null;else{"number"===typeof z[0]&&(z={positions:z});z=g(z,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",
miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow"});D||(r.passes[y]=D={id:y,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:u.texture({channels:1,
data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:u.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:u.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:u.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},z=h({},q.defaults,z));null!=z.thickness&&(D.thickness=parseFloat(z.thickness));null!=z.opacity&&(D.opacity=parseFloat(z.opacity));null!=z.miterLimit&&(D.miterLimit=parseFloat(z.miterLimit));null!=z.overlay&&
(D.overlay=!!z.overlay,y<q.maxLines&&(D.depth=2*(q.maxLines-1-y%q.maxLines)/q.maxLines-1));null!=z.join&&(D.join=z.join);null!=z.hole&&(D.hole=z.hole);null!=z.fill&&(D.fill=z.fill?m(z.fill,"uint8"):null);null!=z.viewport&&(D.viewport=f(z.viewport));D.viewport||(D.viewport=f([v.drawingBufferWidth,v.drawingBufferHeight]));null!=z.close&&(D.close=z.close);null===z.positions&&(z.positions=[]);if(z.positions){if(z.positions.x&&z.positions.y){var A=z.positions.x,t=z.positions.y;var B=D.count=Math.max(A.length,
t.length);y=new Float64Array(2*B);for(var F=0;F<B;F++)y[2*F]=A[F],y[2*F+1]=t[F]}else y=e(z.positions,"float64"),B=D.count=Math.floor(y.length/2);A=D.bounds=l(y,2);if(D.fill){F=[];t={};for(var I=0,J=0,L=0,H=D.count;J<H;J++){var P=y[2*J],M=y[2*J+1];isNaN(P)||isNaN(M)||null==P||null==M?(P=y[2*I],M=y[2*I+1],t[J]=I):I=J;F[L++]=P;F[L++]=M}F=n(F,D.hole||[]);I=0;for(J=F.length;I<J;I++)null!=t[F[I]]&&(F[I]=t[F[I]]);D.triangles=F}t=new Float64Array(y);p(t,2,A);A=new Float64Array(2*B+6);D.close?y[0]===y[2*B-
2]&&y[1]===y[2*B-1]?(A[0]=t[2*B-4],A[1]=t[2*B-3]):(A[0]=t[2*B-2],A[1]=t[2*B-1]):(A[0]=t[0],A[1]=t[1]);A.set(t,2);D.close?y[0]===y[2*B-2]&&y[1]===y[2*B-1]?(A[2*B+2]=t[2],A[2*B+3]=t[3],--D.count):(A[2*B+2]=t[0],A[2*B+3]=t[1],A[2*B+4]=t[2],A[2*B+5]=t[3]):(A[2*B+2]=t[2*B-2],A[2*B+3]=t[2*B-1],A[2*B+4]=t[2*B-2],A[2*B+5]=t[2*B-1]);D.positionBuffer(c(A));D.positionFractBuffer(d(A))}z.range?D.range=z.range:D.range||(D.range=D.bounds);(z.range||z.positions)&&D.count&&(y=D.bounds,B=D.range[2]-D.range[0],A=D.range[3]-
D.range[1],D.scale=[(y[2]-y[0])/B,(y[3]-y[1])/A],D.translate=[-D.range[0]/B+y[0]/B||0,-D.range[1]/A+y[1]/A||0],D.scaleFract=d(D.scale),D.translateFract=d(D.translate));if(z.dashes){if(!z.dashes||2>z.dashes.length)y=1,B=new Uint8Array([255,255,255,255,255,255,255,255]);else{for(B=y=0;B<z.dashes.length;++B)y+=z.dashes[B];B=new Uint8Array(y*q.dashMult);A=0;t=255;for(F=0;2>F;F++)for(I=0;I<z.dashes.length;++I){J=0;for(L=z.dashes[I]*q.dashMult*.5;J<L;++J)B[A++]=t;t^=255}}D.dashLength=y;D.dashTexture({channels:1,
data:B,width:B.length,height:1,mag:"linear",min:"linear"},0,0)}if(z.color){y=D.count;(B=z.color)||(B="transparent");z=new Uint8Array(4*y+4);if(Array.isArray(B)&&"number"!==typeof B[0]){for(A=0;A<y;A++)t=m(B[A],"uint8"),z.set(t,4*A);z.set(m(B[0],"uint8"),4*y)}else for(B=m(B,"uint8"),A=0;A<y+1;A++)z.set(B,4*A);D.colorBuffer({usage:"dynamic",type:"uint8",data:z})}}});if(k.length<this.passes.length){for(var x=k.length;x<this.passes.length;x++){var C=this.passes[x];C&&(C.colorBuffer.destroy(),C.positionBuffer.destroy(),
C.dashTexture.destroy())}this.passes.length=k.length}k=[];for(x=0;x<this.passes.length;x++)null!==this.passes[x]&&k.push(this.passes[x]);this.passes=k;return this}};q.prototype.destroy=function(){this.passes.forEach(function(k){k.colorBuffer.destroy();k.positionBuffer.destroy();k.dashTexture.destroy()});this.passes.length=0;return this}},{"array-bounds":70,"array-normalize":71,"color-normalize":125,earcut:177,"es6-weak-map":233,"flatten-vertex-data":244,glslify:536,"object-assign":499,"parse-rect":504,
"pick-by-alias":511,"to-float32":577}],536:[function(b,K,G){arguments[4][257][0].apply(G,arguments)},{dup:257}],537:[function(b,K,G){function q(x,C){if(x){if("string"===typeof x)return m(x,C);var z=Object.prototype.toString.call(x).slice(8,-1);"Object"===z&&x.constructor&&(z=x.constructor.name);if("Map"===z||"Set"===z)return Array.from(x);if("Arguments"===z||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(z))return m(x,C)}}function m(x,C){if(null==C||C>x.length)C=x.length;for(var z=0,y=Array(C);z<
C;z++)y[z]=x[z];return y}function l(x,C){var z=this;if(!(this instanceof l))return new l(x,C);"function"===typeof x?(C||(C={}),C.regl=x):(C=x,x=null);C&&C.length&&(C.positions=C);x=C.regl;var y=x._gl,D=[];this.tooManyColors=k;var A=x.texture({data:new Uint8Array(1020),width:255,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"});n(this,{regl:x,gl:y,groups:[],markerCache:[null],markerTextures:[null],palette:D,paletteIds:{},paletteTexture:A,maxColors:255,maxSize:100,
canvas:y.canvas});this.update(C);y={uniforms:{constPointSize:!!C.constPointSize,pixelRatio:x.context("pixelRatio"),palette:A,paletteSize:function(t,B){return[z.tooManyColors?0:255,A.height]},scale:x.prop("scale"),scaleFract:x.prop("scaleFract"),translate:x.prop("translate"),translateFract:x.prop("translateFract"),opacity:x.prop("opacity"),marker:x.prop("markerTexture")},attributes:{x:function(t,B){return B.xAttr||{buffer:B.positionBuffer,stride:8,offset:0}},y:function(t,B){return B.yAttr||{buffer:B.positionBuffer,
stride:8,offset:4}},xFract:function(t,B){return B.xAttr?{constant:[0,0]}:{buffer:B.positionFractBuffer,stride:8,offset:0}},yFract:function(t,B){return B.yAttr?{constant:[0,0]}:{buffer:B.positionFractBuffer,stride:8,offset:4}},size:function(t,B){return B.size.length?{buffer:B.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(255*B.size/z.maxSize)]}},borderSize:function(t,B){return B.borderSize.length?{buffer:B.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(255*B.borderSize/z.maxSize)]}},colorId:function(t,
B){return B.color.length?{buffer:B.colorBuffer,stride:z.tooManyColors?8:4,offset:0}:{constant:z.tooManyColors?D.slice(4*B.color,4*B.color+4):[B.color]}},borderColorId:function(t,B){return B.borderColor.length?{buffer:B.colorBuffer,stride:z.tooManyColors?8:4,offset:z.tooManyColors?4:2}:{constant:z.tooManyColors?D.slice(4*B.borderColor,4*B.borderColor+4):[B.borderColor]}},isActive:function(t,B){return!0===B.activation?{constant:[1]}:B.activation?B.activation:{constant:[0]}}},blend:{enable:!0,color:[0,
0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:x.prop("viewport")},viewport:x.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:x.prop("elements"),count:x.prop("count"),offset:x.prop("offset"),primitive:"points"};C=n({},y);C.frag=p(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragWidth, fragBorderColorLevel, fragColorLevel;\n\nuniform sampler2D marker;\nuniform float opacity;\n\nfloat smoothStep(float x, float y) {\n  return 1.0 / (1.0 + exp(50.0*(x - y)));\n}\n\nvoid main() {\n  float dist = texture2D(marker, gl_PointCoord).r, delta = fragWidth;\n\n  // max-distance alpha\n  if (dist < 0.003) discard;\n\n  // null-border case\n  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {\n    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);\n    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);\n  }\n  else {\n    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);\n    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);\n\n    vec4 color = fragBorderColor;\n    color.a *= borderColorAmt;\n    color = mix(color, fragColor, colorAmt);\n    color.a *= opacity;\n\n    gl_FragColor = color;\n  }\n\n}\n"]);
C.vert=p(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform vec2 scale, scaleFract, translate, translateFract, paletteSize;\nuniform float pixelRatio;\nuniform bool constPointSize;\nuniform sampler2D palette;\n\nconst float maxSize = 100.;\nconst float borderLevel = .5;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat pointSizeScale = (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect = (paletteSize.x < 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(palette,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = 2. * size * pointSizeScale;\n  fragPointSize = size * pixelRatio;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0., 1.);\n\n  fragColor = color;\n  fragBorderColor = borderColor;\n  fragWidth = 1. / gl_PointSize;\n\n  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);\n  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);\n}"]);
this.drawMarker=x(C);y=n({},y);y.frag=p(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\n\nuniform float opacity;\nvarying float fragBorderRadius, fragWidth;\n\nfloat smoothStep(float edge0, float edge1, float x) {\n\tfloat t;\n\tt = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n\treturn t * t * (3.0 - 2.0 * t);\n}\n\nvoid main() {\n\tfloat radius, alpha = 1.0, delta = fragWidth;\n\n\tradius = length(2.0 * gl_PointCoord.xy - 1.0);\n\n\tif (radius > 1.0 + delta) {\n\t\tdiscard;\n\t}\n\n\talpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);\n\n\tfloat borderRadius = fragBorderRadius;\n\tfloat ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);\n\tvec4 color = mix(fragColor, fragBorderColor, ratio);\n\tcolor.a *= alpha * opacity;\n\tgl_FragColor = color;\n}\n"]);
y.vert=p(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio;\nuniform bool constPointSize;\nuniform sampler2D palette;\nuniform vec2 paletteSize;\n\nconst float maxSize = 100.;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nfloat pointSizeScale = (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect = (paletteSize.x < 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(palette,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = (size + borderSize) * pointSizeScale;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0., 1.);\n\n  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);\n  fragColor = color;\n  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;\n  fragWidth = 1. / gl_PointSize;\n}\n"]);
k&&(y.frag=y.frag.replace("smoothstep","smoothStep"),C.frag=C.frag.replace("smoothstep","smoothStep"));this.drawCircle=x(y)}var h=b("color-normalize"),a=b("array-bounds"),g=b("color-id"),e=b("@plotly/point-cluster"),n=b("object-assign"),p=b("glslify"),c=b("pick-by-alias"),d=b("update-diff"),f=b("flatten-vertex-data"),k=b("is-iexplorer"),r=b("to-float32"),u=b("parse-rect");l.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,
count:0,offset:0,bounds:null,positions:[],snap:1E4};l.prototype.render=function(){arguments.length&&this.update.apply(this,arguments);this.draw();return this};l.prototype.draw=function(){for(var x=this,C=arguments.length,z=Array(C),y=0;y<C;y++)z[y]=arguments[y];C=this.groups;1===z.length&&Array.isArray(z[0])&&(null===z[0][0]||Array.isArray(z[0][0]))&&(z=z[0]);this.regl._refresh();if(z.length)for(C=0;C<z.length;C++)this.drawItem(C,z[C]);else C.forEach(function(D,A){x.drawItem(A)});return this};l.prototype.drawItem=
function(x,C){var z=this.groups;x=z[x];"number"===typeof C&&(x=z[C],C=null);if(x&&x.count&&x.opacity){x.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,x,C));z=[];for(var y=1;y<x.activation.length;y++)if(x.activation[y]&&(!0===x.activation[y]||x.activation[y].data.length)){var D=z.push,A=D.apply,t=this.getMarkerDrawOptions(y,x,C);var B=t;B=Array.isArray(B)?m(B):void 0;B||(B="undefined"!==typeof Symbol&&Symbol.iterator in Object(t)?Array.from(t):void 0);if(!(t=B||q(t)))throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
A.call(D,z,t)}z.length&&this.drawMarker(z)}};l.prototype.getMarkerDrawOptions=function(x,C,z){var y=C.range,D=C.tree,A=C.viewport,t=C.activation,B=C.selectionBuffer,F=C.count;if(!D)return z?[n({},C,{markerTexture:this.markerTextures[x],activation:t[x],count:z.length,elements:z,offset:0})]:[n({},C,{markerTexture:this.markerTextures[x],activation:t[x],offset:0})];var I=[];y=D.range(y,{lod:!0,px:[(y[2]-y[0])/A.width,(y[3]-y[1])/A.height]});if(z){D=t[x].data;F=new Uint8Array(F);for(A=0;A<z.length;A++){var J=
z[A];F[J]=D?D[J]:1}B.subdata(F)}for(F=y.length;F--;){D=y[F];A=D;A=Array.isArray(A)?A:void 0;if(!A)if(A=void 0,"undefined"!==typeof Symbol&&Symbol.iterator in Object(D)){J=[];var L=!0,H=!1,P=void 0;try{for(var M=D[Symbol.iterator]();!(L=(A=M.next()).done)&&(J.push(A.value),2!==J.length);L=!0);}catch(N){H=!0,P=N}finally{try{if(!L&&null!=M["return"])M["return"]()}finally{if(H)throw P;}}A=J}else A=void 0;if(!(D=A||q(D,2)))throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
A=D[0];I.push(n({},C,{markerTexture:this.markerTextures[x],activation:z?B:t[x],offset:A,count:D[1]-A}))}return I};l.prototype.update=function(){for(var x=this,C=arguments.length,z=Array(C),y=0;y<C;y++)z[y]=arguments[y];if(z.length){1===z.length&&Array.isArray(z[0])&&(z=z[0]);var D=this.groups,A=this.gl,t=this.regl,B=this.maxSize,F=this.maxColors,I=this.palette;this.groups=D=z.map(function(J,L){var H=D[L];if(void 0===J)return H;null===J?J={positions:null}:"function"===typeof J?J={ondraw:J}:"number"===
typeof J[0]&&(J={positions:J});J=c(J,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",
opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"});null===J.positions&&(J.positions=[]);null!=J.tooManyColors&&(x.tooManyColors=J.tooManyColors);H||(D[L]=H={id:L,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:t.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:t.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:t.buffer({data:new Uint8Array(0),
usage:"dynamic",type:"uint8"}),positionBuffer:t.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:t.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},J=n({},l.defaults,J));!J.positions||"marker"in J||(J.marker=H.marker,delete H.marker);!J.marker||"positions"in J||(J.positions=H.positions,delete H.positions);var P=0,M=0;d(H,J,[{snap:!0,size:function(X,Z){null==X&&(X=l.defaults.size);P+=X&&X.length?1:0;return X},borderSize:function(X,Z){null==X&&(X=l.defaults.borderSize);
P+=X&&X.length?1:0;return X},opacity:parseFloat,color:function(X,Z){null==X&&(X=l.defaults.color);X=x.updateColor(X);M++;return X},borderColor:function(X,Z){null==X&&(X=l.defaults.borderColor);X=x.updateColor(X);M++;return X},bounds:function(X,Z,aa){"range"in aa||(aa.range=null);return X},positions:function(X,Z,aa){var fa=Z.snap,ha=Z.positionBuffer,ja=Z.positionFractBuffer,ba=Z.selectionBuffer;if(X.x||X.y)return Z.xAttr=X.x.length?{buffer:t.buffer(X.x),offset:0,stride:4,count:X.x.length}:{buffer:X.x.buffer,
offset:4*X.x.offset||0,stride:4*(X.x.stride||1),count:X.x.count},Z.yAttr=X.y.length?{buffer:t.buffer(X.y),offset:0,stride:4,count:X.y.length}:{buffer:X.y.buffer,offset:4*X.y.offset||0,stride:4*(X.y.stride||1),count:X.y.count},Z.count=Math.max(Z.xAttr.count,Z.yAttr.count),X;X=f(X,"float64");var ma=Z.count=Math.floor(X.length/2),qa=Z.bounds=ma?a(X,2):null;aa.range||Z.range||(delete Z.range,aa.range=qa);aa.marker||Z.marker||(delete Z.marker,aa.marker=null);fa&&(!0===fa||ma>fa)?Z.tree=e(X,{bounds:qa}):
fa&&fa.length&&(Z.tree=fa);Z.tree&&(aa={primitive:"points",usage:"static",data:Z.tree,type:"uint32"},Z.elements?Z.elements(aa):Z.elements=t.elements(aa));ha({data:r.float(X),usage:"dynamic"});ja({data:r.fract(X),usage:"dynamic"});ba({data:new Uint8Array(ma),type:"uint8",usage:"stream"});return X}},{marker:function(X,Z,aa){aa=Z.activation;aa.forEach(function(ma){return ma&&ma.destroy&&ma.destroy()});aa.length=0;if(X&&"number"!==typeof X[0]){for(var fa=[],ha=0,ja=Math.min(X.length,Z.count);ha<ja;ha++){var ba=
x.addMarker(X[ha]);fa[ba]||(fa[ba]=new Uint8Array(Z.count));fa[ba][ha]=1}for(Z=0;Z<fa.length;Z++)if(fa[Z]){ha={data:fa[Z],type:"uint8",usage:"static"};if(aa[Z])aa[Z](ha);else aa[Z]=t.buffer(ha);aa[Z].data=fa[Z]}}else fa=x.addMarker(X),aa[fa]=!0;return X},range:function(X,Z,aa){if(aa=Z.bounds)return X||(X=aa),Z.scale=[1/(X[2]-X[0]),1/(X[3]-X[1])],Z.translate=[-X[0],-X[1]],Z.scaleFract=r.fract(Z.scale),Z.translateFract=r.fract(Z.translate),X},viewport:function(X){return u(X||[A.drawingBufferWidth,A.drawingBufferHeight])}}]);
if(P){var N=H;J=N.count;L=N.size;var T=N.borderSize;N=N.sizeBuffer;var Q=new Uint8Array(2*J);if(L.length||T.length)for(var U=0;U<J;U++)Q[2*U]=Math.round(255*(null==L[U]?L:L[U])/B),Q[2*U+1]=Math.round(255*(null==T[U]?T:T[U])/B);N({data:Q,usage:"dynamic"})}if(M){N=H;J=N.count;L=N.color;T=N.borderColor;N=N.colorBuffer;if(x.tooManyColors){if(L.length||T.length){var S=new Uint8Array(8*J);for(Q=0;Q<J;Q++)U=L[Q],S[8*Q]=I[4*U],S[8*Q+1]=I[4*U+1],S[8*Q+2]=I[4*U+2],S[8*Q+3]=I[4*U+3],U=T[Q],S[8*Q+4]=I[4*U],S[8*
Q+5]=I[4*U+1],S[8*Q+6]=I[4*U+2],S[8*Q+7]=I[4*U+3]}}else if(L.length||T.length)for(S=new Uint8Array(4*J+2),Q=0;Q<J;Q++)null!=L[Q]&&(S[4*Q]=L[Q]%F,S[4*Q+1]=Math.floor(L[Q]/F)),null!=T[Q]&&(S[4*Q+2]=T[Q]%F,S[4*Q+3]=Math.floor(T[Q]/F));N({data:S||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return H})}};l.prototype.addMarker=function(x){var C=this.markerTextures,z=this.regl,y=this.markerCache,D=null==x?0:y.indexOf(x);if(0<=D)return D;if(x instanceof Uint8Array||x instanceof Uint8ClampedArray)var A=
x;else{A=new Uint8Array(x.length);D=0;for(var t=x.length;D<t;D++)A[D]=255*x[D]}t=Math.floor(Math.sqrt(A.length));D=C.length;y.push(x);C.push(z.texture({channels:1,data:A,radius:t,mag:"linear",min:"linear"}));return D};l.prototype.updateColor=function(x){var C=this.paletteIds,z=this.palette,y=this.maxColors;Array.isArray(x)||(x=[x]);var D=[];if("number"===typeof x[0]){var A=[];if(Array.isArray(x))for(var t=0;t<x.length;t+=4)A.push(x.slice(t,t+4));else for(t=0;t<x.length;t+=4)A.push(x.subarray(t,t+
4));x=A}for(A=0;A<x.length;A++){t=x[A];t=h(t,"uint8");var B=g(t,!1);if(null==C[B]){var F=z.length;C[B]=Math.floor(F/4);z[F]=t[0];z[F+1]=t[1];z[F+2]=t[2];z[F+3]=t[3]}D[A]=C[B]}!this.tooManyColors&&z.length>4*y&&(this.tooManyColors=!0);this.updatePalette(z);return 1===D.length?D[0]:D};l.prototype.updatePalette=function(x){if(!this.tooManyColors){var C=this.maxColors,z=this.paletteTexture,y=Math.ceil(.25*x.length/C);if(1<y){x=x.slice();for(var D=.25*x.length%C;D<y*C;D++)x.push(0,0,0,0)}z.height<y&&z.resize(C,
y);z.subimage({width:Math.min(.25*x.length,C),height:y,data:x},0,0)}};l.prototype.destroy=function(){this.groups.forEach(function(x){x.sizeBuffer.destroy();x.positionBuffer.destroy();x.positionFractBuffer.destroy();x.colorBuffer.destroy();x.activation.forEach(function(C){return C&&C.destroy&&C.destroy()});x.selectionBuffer.destroy();x.elements&&x.elements.destroy()});this.groups.length=0;this.paletteTexture.destroy();this.markerTextures.forEach(function(x){return x&&x.destroy&&x.destroy()});return this};
var v=b("object-assign");K.exports=function(x,C){x=new l(x,C);C=x.render.bind(x);v(C,{render:C,update:x.update.bind(x),draw:x.draw.bind(x),destroy:x.destroy.bind(x),regl:x.regl,gl:x.gl,canvas:x.gl.canvas,groups:x.groups,markers:x.markerCache,palette:x.palette});return C}},{"@plotly/point-cluster":57,"array-bounds":70,"color-id":123,"color-normalize":125,"flatten-vertex-data":244,glslify:538,"is-iexplorer":466,"object-assign":499,"parse-rect":504,"pick-by-alias":511,"to-float32":577,"update-diff":599}],
538:[function(b,K,G){arguments[4][257][0].apply(G,arguments)},{dup:257}],539:[function(b,K,G){function q(d,f){if(!(this instanceof q))return new q(d,f);this.traces=[];this.passes={};this.regl=d;this.scatter=h(d);this.canvas=this.scatter.canvas}function m(d,f,k){f=d[f];var r=d[k];2<f.length?(d=f[1],f=f[3]):f.length?(d=f[0],f=f[1]):(d=f.y,f=f.y+f.height);2<r.length?(k=r[0],r=r[2]):r.length?(k=r[0],r=r[1]):(k=r.x,r=r.x+r.width);return[k,d,r,f]}function l(d){if("number"===typeof d)return[d,d,d,d];if(2===
d.length)return[d[0],d[1],d[0],d[1]];d=p(d);return[d.x,d.y,d.x+d.width,d.y+d.height]}var h=b("regl-scatter2d"),a=b("pick-by-alias"),g=b("array-bounds"),e=b("raf"),n=b("array-range"),p=b("parse-rect"),c=b("flatten-vertex-data");K.exports=q;q.prototype.render=function(){for(var d=this,f=[],k=arguments.length;k--;)f[k]=arguments[k];f.length&&this.update.apply(this,f);if(this.regl.attributes.preserveDrawingBuffer)return this.draw();this.dirty?null==this.planned&&(this.planned=e(function(){d.draw();d.dirty=
!0;d.planned=null})):(this.draw(),this.dirty=!0,e(function(){d.dirty=!1}));return this};q.prototype.update=function(){for(var d,f=[],k=arguments.length;k--;)f[k]=arguments[k];if(f.length){for(k=0;k<f.length;k++)this.updateItem(k,f[k]);this.traces=this.traces.filter(Boolean);f=[];for(var r=k=0;r<this.traces.length;r++){for(var u=this.traces[r],v=this.traces[r].passes,x=0;x<v.length;x++)f.push(this.passes[v[x]]);u.passOffset=k;k+=u.passes.length}(d=this.scatter).update.apply(d,f);return this}};q.prototype.updateItem=
function(d,f){var k=this.regl;if(null===f)return this.traces[d]=null,this;if(!f)return this;f=a(f,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",
marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"});d=this.traces[d]||(this.traces[d]={id:d,buffer:k.buffer({usage:"dynamic",type:"float",
data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:p([k._gl.drawingBufferWidth,k._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});null!=f.color&&(d.color=f.color);null!=f.size&&(d.size=f.size);null!=f.marker&&(d.marker=f.marker);null!=f.borderColor&&(d.borderColor=f.borderColor);null!=f.borderSize&&(d.borderSize=f.borderSize);null!=f.opacity&&(d.opacity=f.opacity);f.viewport&&(d.viewport=p(f.viewport));null!=
f.diagonal&&(d.diagonal=f.diagonal);null!=f.upper&&(d.upper=f.upper);null!=f.lower&&(d.lower=f.lower);if(f.data)for(d.buffer(c(f.data)),d.columns=f.data.length,d.count=f.data[0].length,d.bounds=[],k=0;k<d.columns;k++)d.bounds[k]=g(f.data[k],1);if(f.range){d.range=f.range;var r=d.range&&"number"!==typeof d.range[0]}f.domain&&(d.domain=f.domain);k=!1;null!=f.padding&&(Array.isArray(f.padding)&&f.padding.length===d.columns&&"number"===typeof f.padding[f.padding.length-1]?(d.padding=f.padding.map(l),
k=!0):d.padding=l(f.padding));var u=d.columns,v=d.count,x=d.viewport.width,C=d.viewport.height,z=d.viewport.x,y=d.viewport.y,D=x/u,A=C/u;d.passes=[];for(var t=0;t<u;t++)for(var B=0;B<u;B++)if(d.diagonal||B!==t)if(d.upper||!(t>B))if(d.lower||!(t<B)){var F=d.id;F=(null!=F.id?F.id:F)<<16|(t&255)<<8|B&255;var I=this.passes[F]||(this.passes[F]={});f.data&&(I.positions=f.transpose?{x:{buffer:d.buffer,offset:B,count:v,stride:u},y:{buffer:d.buffer,offset:t,count:v,stride:u}}:{x:{buffer:d.buffer,offset:B*
v,count:v},y:{buffer:d.buffer,offset:t*v,count:v}},I.bounds=m(d.bounds,t,B));if(f.domain||f.viewport||f.data){var J=k?m(d.padding,t,B):d.padding;if(d.domain){var L=m(d.domain,t,B);I.viewport=[z+L[0]*x+J[0],y+L[1]*C+J[1],z+L[2]*x-J[2],y+L[3]*C-J[3]]}else I.viewport=[z+B*D+D*J[0],y+t*A+A*J[1],z+(B+1)*D-D*J[2],y+(t+1)*A-A*J[3]]}f.color&&(I.color=d.color);f.size&&(I.size=d.size);f.marker&&(I.marker=d.marker);f.borderSize&&(I.borderSize=d.borderSize);f.borderColor&&(I.borderColor=d.borderColor);f.opacity&&
(I.opacity=d.opacity);f.range&&(I.range=r?m(d.range,t,B):d.range||I.bounds);d.passes.push(F)}return this};q.prototype.draw=function(){for(var d,f=[],k=arguments.length;k--;)f[k]=arguments[k];if(f.length){var r=[];for(k=0;k<f.length;k++)if("number"===typeof f[k]){var u=this.traces[f[k]],v=u.passOffset;r.push.apply(r,n(v,v+u.passes.length))}else if(f[k].length){var x=f[k];u=this.traces[k];v=u.passes;var C=u.passOffset;v=v.map(function(z,y){r[C+y]=x})}(d=this.scatter).draw.apply(d,r)}else this.scatter.draw();
return this};q.prototype.destroy=function(){this.traces.forEach(function(d){d.buffer&&d.buffer.destroy&&d.buffer.destroy()});this.passes=this.traces=null;this.scatter.destroy();return this}},{"array-bounds":70,"array-range":72,"flatten-vertex-data":244,"parse-rect":504,"pick-by-alias":511,raf:528,"regl-scatter2d":537}],540:[function(b,K,G){(function(q,m){"object"===typeof G&&"undefined"!==typeof K?K.exports=m():q.createREGL=m()})(this,function(){function q(ib,Yb){this.id=la++;this.type=ib;this.data=
Yb}function m(ib){if(0===ib.length)return[];var Yb=ib.charAt(0),dc=ib.charAt(ib.length-1);if(1<ib.length&&Yb===dc&&('"'===Yb||"'"===Yb))return['"'+ib.substr(1,ib.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(Yb=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(ib))return m(ib.substr(0,Yb.index)).concat(m(Yb[1])).concat(m(ib.substr(Yb.index+Yb[0].length)));Yb=ib.split(".");if(1===Yb.length)return['"'+ib.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];ib=[];for(dc=0;dc<Yb.length;++dc)ib=
ib.concat(m(Yb[dc]));return ib}function l(ib){return"["+m(ib).join("][")+"]"}function h(){var ib={"":0},Yb=[""];return{id:function(dc){var oc=ib[dc];if(oc)return oc;oc=ib[dc]=Yb.length;Yb.push(dc);return oc},str:function(dc){return Yb[dc]}}}function a(ib,Yb,dc){function oc(){var fb=window.innerWidth,tb=window.innerHeight;ib!==document.body&&(tb=ib.getBoundingClientRect(),fb=tb.right-tb.left,tb=tb.bottom-tb.top);tc.width=dc*fb;tc.height=dc*tb;na(tc.style,{width:fb+"px",height:tb+"px"})}var tc=document.createElement("canvas");
na(tc.style,{border:0,margin:0,padding:0,top:0,left:0});ib.appendChild(tc);ib===document.body&&(tc.style.position="absolute",na(ib.style,{margin:0,padding:0}));var Lc;ib!==document.body&&"function"===typeof ResizeObserver?(Lc=new ResizeObserver(function(){setTimeout(oc)}),Lc.observe(ib)):window.addEventListener("resize",oc,!1);oc();return{canvas:tc,onDestroy:function(){Lc?Lc.disconnect():window.removeEventListener("resize",oc);ib.removeChild(tc)}}}function g(ib,Yb){function dc(oc){try{return ib.getContext(oc,
Yb)}catch(tc){return null}}return dc("webgl")||dc("experimental-webgl")||dc("webgl-experimental")}function e(ib){return"string"===typeof ib?ib.split():ib}function n(ib){return"string"===typeof ib?document.querySelector(ib):ib}function p(ib){var Yb=ib||{},dc,oc,tc,Lc;ib={};var fb=[],tb=[],Pb="undefined"===typeof window?1:window.devicePixelRatio,ec=!1,cc=function(Qb){},Zb=function(){};"string"===typeof Yb?dc=document.querySelector(Yb):"object"===typeof Yb&&("string"===typeof Yb.nodeName&&"function"===
typeof Yb.appendChild&&"function"===typeof Yb.getBoundingClientRect?dc=Yb:"function"===typeof Yb.drawArrays||"function"===typeof Yb.drawElements?(Lc=Yb,tc=Lc.canvas):("gl"in Yb?Lc=Yb.gl:"canvas"in Yb?tc=n(Yb.canvas):"container"in Yb&&(oc=n(Yb.container)),"attributes"in Yb&&(ib=Yb.attributes),"extensions"in Yb&&(fb=e(Yb.extensions)),"optionalExtensions"in Yb&&(tb=e(Yb.optionalExtensions)),"onDone"in Yb&&(cc=Yb.onDone),"profile"in Yb&&(ec=!!Yb.profile),"pixelRatio"in Yb&&(Pb=+Yb.pixelRatio)));dc&&("canvas"===
dc.nodeName.toLowerCase()?tc=dc:oc=dc);if(!Lc){if(!tc){dc=a(oc||document.body,cc,Pb);if(!dc)return null;tc=dc.canvas;Zb=dc.onDestroy}void 0===ib.premultipliedAlpha&&(ib.premultipliedAlpha=!0);Lc=g(tc,ib)}return Lc?{gl:Lc,canvas:tc,container:oc,extensions:fb,optionalExtensions:tb,pixelRatio:Pb,profile:ec,onDone:cc,onDestroy:Zb}:(Zb(),cc("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function c(ib,Yb){function dc(fb){fb=fb.toLowerCase();try{var tb=
oc[fb]=ib.getExtension(fb)}catch(Pb){}return!!tb}for(var oc={},tc=0;tc<Yb.extensions.length;++tc){var Lc=Yb.extensions[tc];if(!dc(Lc))return Yb.onDestroy(),Yb.onDone('"'+Lc+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}Yb.optionalExtensions.forEach(dc);return{extensions:oc,restore:function(){Object.keys(oc).forEach(function(fb){if(oc[fb]&&!dc(fb))throw Error("(regl): error restoring extension "+fb);})}}}function d(ib,Yb){for(var dc=
Array(ib),oc=0;oc<ib;++oc)dc[oc]=Yb(oc);return dc}function f(ib){var Yb=(65535<ib)<<4;ib>>>=Yb;var dc=(255<ib)<<3;ib>>>=dc;Yb|=dc;dc=(15<ib)<<2;ib>>>=dc;Yb|=dc;dc=(3<ib)<<1;return Yb|dc|ib>>>dc>>1}function k(){function ib(oc){a:{for(var tc=16;268435456>=tc;tc*=16)if(oc<=tc){oc=tc;break a}oc=0}tc=dc[f(oc)>>2];return 0<tc.length?tc.pop():new ArrayBuffer(oc)}function Yb(oc){dc[f(oc.byteLength)>>2].push(oc)}var dc=d(8,function(){return[]});return{alloc:ib,free:Yb,allocType:function(oc,tc){switch(oc){case 5120:oc=
new Int8Array(ib(tc),0,tc);break;case 5121:oc=new Uint8Array(ib(tc),0,tc);break;case 5122:oc=new Int16Array(ib(2*tc),0,tc);break;case 5123:oc=new Uint16Array(ib(2*tc),0,tc);break;case 5124:oc=new Int32Array(ib(4*tc),0,tc);break;case 5125:oc=new Uint32Array(ib(4*tc),0,tc);break;case 5126:oc=new Float32Array(ib(4*tc),0,tc);break;default:return null}return oc.length!==tc?oc.subarray(0,tc):oc},freeType:function(oc){Yb(oc.buffer)}}}function r(ib){return!!ib&&"object"===typeof ib&&Array.isArray(ib.shape)&&
Array.isArray(ib.stride)&&"number"===typeof ib.offset&&ib.shape.length===ib.stride.length&&(Array.isArray(ib.data)||Sa(ib.data))}function u(ib,Yb,dc,oc,tc,Lc){for(var fb=0;fb<Yb;++fb)for(var tb=ib[fb],Pb=0;Pb<dc;++Pb)for(var ec=tb[Pb],cc=0;cc<oc;++cc)tc[Lc++]=ec[cc]}function v(ib,Yb,dc,oc,tc){for(var Lc=1,fb=dc+1;fb<Yb.length;++fb)Lc*=Yb[fb];var tb=Yb[dc];if(4===Yb.length-dc){var Pb=Yb[dc+1],ec=Yb[dc+2];Yb=Yb[dc+3];for(fb=0;fb<tb;++fb)u(ib[fb],Pb,ec,Yb,oc,tc),tc+=Lc}else for(fb=0;fb<tb;++fb)v(ib[fb],
Yb,dc+1,oc,tc),tc+=Lc}function x(ib){return lb[Object.prototype.toString.call(ib)]|0}function C(ib,Yb){for(var dc=0;dc<Yb.length;++dc)ib[dc]=Yb[dc]}function z(ib,Yb,dc,oc,tc,Lc,fb){for(var tb=0,Pb=0;Pb<dc;++Pb)for(var ec=0;ec<oc;++ec)ib[tb++]=Yb[tc*Pb+Lc*ec+fb]}function y(ib,Yb,dc,oc){function tc(Zb){this.id=Pb++;this.buffer=ib.createBuffer();this.type=Zb;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;dc.profile&&(this.stats={size:0})}function Lc(Zb,Qb,
sb){Zb.byteLength=Qb.byteLength;ib.bufferData(Zb.type,Qb,sb)}function fb(Zb,Qb,sb,Gb,xb,Jb){Zb.usage=sb;if(Array.isArray(Qb)){if(Zb.dtype=Gb||5126,0<Qb.length)if(Array.isArray(Qb[0])){xb=nb(Qb);for(var Xb=Gb=1;Xb<xb.length;++Xb)Gb*=xb[Xb];Zb.dimension=Gb;Qb=hb(Qb,xb,Zb.dtype);Lc(Zb,Qb,sb);Jb?Zb.persistentData=Qb:Aa.freeType(Qb)}else"number"===typeof Qb[0]?(Zb.dimension=xb,xb=Aa.allocType(Zb.dtype,Qb.length),C(xb,Qb),Lc(Zb,xb,sb),Jb?Zb.persistentData=xb:Aa.freeType(xb)):Sa(Qb[0])&&(Zb.dimension=Qb[0].length,
Zb.dtype=Gb||x(Qb[0])||5126,Qb=hb(Qb,[Qb.length,Qb[0].length],Zb.dtype),Lc(Zb,Qb,sb),Jb?Zb.persistentData=Qb:Aa.freeType(Qb))}else if(Sa(Qb))Zb.dtype=Gb||x(Qb),Zb.dimension=xb,Lc(Zb,Qb,sb),Jb&&(Zb.persistentData=new Uint8Array(new Uint8Array(Qb.buffer)));else if(r(Qb)){xb=Qb.shape;var nc=Qb.stride;Xb=Qb.offset;var Qc=0,$c=0,Uc=0,ac=0;1===xb.length?(Qc=xb[0],$c=1,Uc=nc[0],ac=0):2===xb.length&&(Qc=xb[0],$c=xb[1],Uc=nc[0],ac=nc[1]);Zb.dtype=Gb||x(Qb.data)||5126;Zb.dimension=$c;xb=Aa.allocType(Zb.dtype,
Qc*$c);z(xb,Qb.data,Qc,$c,Uc,ac,Xb);Lc(Zb,xb,sb);Jb?Zb.persistentData=xb:Aa.freeType(xb)}else Qb instanceof ArrayBuffer&&(Zb.dtype=5121,Zb.dimension=xb,Lc(Zb,Qb,sb),Jb&&(Zb.persistentData=new Uint8Array(new Uint8Array(Qb))))}function tb(Zb){Yb.bufferCount--;oc(Zb);ib.deleteBuffer(Zb.buffer);Zb.buffer=null;delete ec[Zb.id]}var Pb=0,ec={};tc.prototype.bind=function(){ib.bindBuffer(this.type,this.buffer)};tc.prototype.destroy=function(){tb(this)};var cc=[];dc.profile&&(Yb.getTotalBufferSize=function(){var Zb=
0;Object.keys(ec).forEach(function(Qb){Zb+=ec[Qb].stats.size});return Zb});return{create:function(Zb,Qb,sb,Gb){function xb(Xb){var nc=35044,Qc=null,$c=0,Uc=0,ac=1;Array.isArray(Xb)||Sa(Xb)||r(Xb)||Xb instanceof ArrayBuffer?Qc=Xb:"number"===typeof Xb?$c=Xb|0:Xb&&("data"in Xb&&(Qc=Xb.data),"usage"in Xb&&(nc=Ya[Xb.usage]),"type"in Xb&&(Uc=ab[Xb.type]),"dimension"in Xb&&(ac=Xb.dimension|0),"length"in Xb&&($c=Xb.length|0));Jb.bind();Qc?fb(Jb,Qc,nc,Uc,ac,Gb):($c&&ib.bufferData(Jb.type,$c,nc),Jb.dtype=Uc||
5121,Jb.usage=nc,Jb.dimension=ac,Jb.byteLength=$c);dc.profile&&(Jb.stats.size=Jb.byteLength*va[Jb.dtype]);return xb}Yb.bufferCount++;var Jb=new tc(Qb);ec[Jb.id]=Jb;sb||xb(Zb);xb._reglType="buffer";xb._buffer=Jb;xb.subdata=function(Xb,nc){nc=(nc||0)|0;Jb.bind();if(Sa(Xb)||Xb instanceof ArrayBuffer)ib.bufferSubData(Jb.type,nc,Xb);else if(Array.isArray(Xb)){if(0<Xb.length)if("number"===typeof Xb[0]){var Qc=Aa.allocType(Jb.dtype,Xb.length);C(Qc,Xb);ib.bufferSubData(Jb.type,nc,Qc);Aa.freeType(Qc)}else if(Array.isArray(Xb[0])||
Sa(Xb[0])){var $c=nb(Xb);Qc=hb(Xb,$c,Jb.dtype);ib.bufferSubData(Jb.type,nc,Qc);Aa.freeType(Qc)}}else if(r(Xb)){$c=Xb.shape;var Uc=Xb.stride,ac=Qc=0,Ac=0,Zc=0;1===$c.length?(Qc=$c[0],ac=1,Ac=Uc[0],Zc=0):2===$c.length&&(Qc=$c[0],ac=$c[1],Ac=Uc[0],Zc=Uc[1]);$c=Array.isArray(Xb.data)?Jb.dtype:x(Xb.data);$c=Aa.allocType($c,Qc*ac);z($c,Xb.data,Qc,ac,Ac,Zc,Xb.offset);ib.bufferSubData(Jb.type,nc,$c);Aa.freeType($c)}return xb};dc.profile&&(xb.stats=Jb.stats);xb.destroy=function(){tb(Jb)};return xb},createStream:function(Zb,
Qb){var sb=cc.pop();sb||(sb=new tc(Zb));sb.bind();fb(sb,Qb,35040,0,1,!1);return sb},destroyStream:function(Zb){cc.push(Zb)},clear:function(){db(ec).forEach(tb);cc.forEach(tb)},getBuffer:function(Zb){return Zb&&Zb._buffer instanceof tc?Zb._buffer:null},restore:function(){db(ec).forEach(function(Zb){Zb.buffer=ib.createBuffer();ib.bindBuffer(Zb.type,Zb.buffer);ib.bufferData(Zb.type,Zb.persistentData||Zb.byteLength,Zb.usage)})},_initBuffer:fb}}function D(ib,Yb,dc,oc){function tc(Zb){this.id=Pb++;tb[this.id]=
this;this.buffer=Zb;this.primType=4;this.type=this.vertCount=0}function Lc(Zb,Qb,sb,Gb,xb,Jb,Xb){Zb.buffer.bind();var nc;Qb?((nc=Xb)||Sa(Qb)&&(!r(Qb)||Sa(Qb.data))||(nc=Yb.oes_element_index_uint?5125:5123),dc._initBuffer(Zb.buffer,Qb,sb,nc,3)):(ib.bufferData(34963,Jb,sb),Zb.buffer.dtype=nc||5121,Zb.buffer.usage=sb,Zb.buffer.dimension=3,Zb.buffer.byteLength=Jb);nc=Xb;if(!Xb){switch(Zb.buffer.dtype){case 5121:case 5120:nc=5121;break;case 5123:case 5122:nc=5123;break;case 5125:case 5124:nc=5125}Zb.buffer.dtype=
nc}Zb.type=nc;Qb=xb;0>Qb&&(Qb=Zb.buffer.byteLength,5123===nc?Qb>>=1:5125===nc&&(Qb>>=2));Zb.vertCount=Qb;Qb=Gb;0>Gb&&(Qb=4,Gb=Zb.buffer.dimension,1===Gb&&(Qb=0),2===Gb&&(Qb=1),3===Gb&&(Qb=4));Zb.primType=Qb}function fb(Zb){oc.elementsCount--;delete tb[Zb.id];Zb.buffer.destroy();Zb.buffer=null}var tb={},Pb=0,ec={uint8:5121,uint16:5123};Yb.oes_element_index_uint&&(ec.uint32=5125);tc.prototype.bind=function(){this.buffer.bind()};var cc=[];return{create:function(Zb,Qb){function sb(Jb){if(Jb)if("number"===
typeof Jb)Gb(Jb),xb.primType=4,xb.vertCount=Jb|0,xb.type=5121;else{var Xb=null,nc=35044,Qc=-1,$c=-1,Uc=0,ac=0;if(Array.isArray(Jb)||Sa(Jb)||r(Jb))Xb=Jb;else if("data"in Jb&&(Xb=Jb.data),"usage"in Jb&&(nc=Ya[Jb.usage]),"primitive"in Jb&&(Qc=Ba[Jb.primitive]),"count"in Jb&&($c=Jb.count|0),"type"in Jb&&(ac=ec[Jb.type]),"length"in Jb)Uc=Jb.length|0;else if(Uc=$c,5123===ac||5122===ac)Uc*=2;else if(5125===ac||5124===ac)Uc*=4;Lc(xb,Xb,nc,Qc,$c,Uc,ac)}else Gb(),xb.primType=4,xb.vertCount=0,xb.type=5121;return sb}
var Gb=dc.create(null,34963,!0),xb=new tc(Gb._buffer);oc.elementsCount++;sb(Zb);sb._reglType="elements";sb._elements=xb;sb.subdata=function(Jb,Xb){Gb.subdata(Jb,Xb);return sb};sb.destroy=function(){fb(xb)};return sb},createStream:function(Zb){var Qb=cc.pop();Qb||(Qb=new tc(dc.create(null,34963,!0,!1)._buffer));Lc(Qb,Zb,35040,-1,-1,0,0);return Qb},destroyStream:function(Zb){cc.push(Zb)},getElements:function(Zb){return"function"===typeof Zb&&Zb._elements instanceof tc?Zb._elements:null},clear:function(){db(tb).forEach(fb)}}}
function A(ib){for(var Yb=Aa.allocType(5123,ib.length),dc=0;dc<ib.length;++dc)if(isNaN(ib[dc]))Yb[dc]=65535;else if(Infinity===ib[dc])Yb[dc]=31744;else if(-Infinity===ib[dc])Yb[dc]=64512;else{Ga[0]=ib[dc];var oc=Na[0],tc=oc>>>31<<15,Lc=(oc<<1>>>24)-127;oc=oc>>13&1023;Yb[dc]=-24>Lc?tc:-14>Lc?tc+(oc+1024>>-14-Lc):15<Lc?tc+31744:tc+(Lc+15<<10)+oc}return Yb}function t(ib){return Array.isArray(ib)||Sa(ib)}function B(ib){return"[object "+ib+"]"}function F(ib){return Array.isArray(ib)&&(0===ib.length||"number"===
typeof ib[0])}function I(ib){return Array.isArray(ib)&&0!==ib.length&&t(ib[0])?!0:!1}function J(ib){return Object.prototype.toString.call(ib)}function L(ib){if(!ib)return!1;var Yb=J(ib);return 0<=za.indexOf(Yb)?!0:F(ib)||I(ib)||r(ib)}function H(ib,Yb){36193===ib.type?(ib.data=A(Yb),Aa.freeType(Yb)):ib.data=Yb}function P(ib,Yb,dc,oc,tc,Lc){ib="undefined"!==typeof Ja[ib]?Ja[ib]:qb[ib]*Da[Yb];Lc&&(ib*=6);if(tc){for(oc=0;1<=dc;)oc+=ib*dc*dc,dc/=2;return oc}return ib*dc*oc}function M(ib,Yb,dc,oc,tc,Lc,
fb){function tb(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.colorSpace=37444;this.channels=this.height=this.width=0}function Pb(Rb,Pc){Rb.internalformat=Pc.internalformat;Rb.format=Pc.format;Rb.type=Pc.type;Rb.compressed=Pc.compressed;Rb.premultiplyAlpha=Pc.premultiplyAlpha;Rb.flipY=Pc.flipY;Rb.unpackAlignment=Pc.unpackAlignment;Rb.colorSpace=Pc.colorSpace;Rb.width=Pc.width;Rb.height=Pc.height;Rb.channels=Pc.channels}
function ec(Rb,Pc){if("object"===typeof Pc&&Pc){"premultiplyAlpha"in Pc&&(Rb.premultiplyAlpha=Pc.premultiplyAlpha);"flipY"in Pc&&(Rb.flipY=Pc.flipY);"alignment"in Pc&&(Rb.unpackAlignment=Pc.alignment);"colorSpace"in Pc&&(Rb.colorSpace=ke[Pc.colorSpace]);"type"in Pc&&(Rb.type=ud[Pc.type]);var uc=Rb.width,gd=Rb.height,Jd=Rb.channels,Td=!1;"shape"in Pc?(uc=Pc.shape[0],gd=Pc.shape[1],3===Pc.shape.length&&(Jd=Pc.shape[2],Td=!0)):("radius"in Pc&&(uc=gd=Pc.radius),"width"in Pc&&(uc=Pc.width),"height"in Pc&&
(gd=Pc.height),"channels"in Pc&&(Jd=Pc.channels,Td=!0));Rb.width=uc|0;Rb.height=gd|0;Rb.channels=Jd|0;uc=!1;"format"in Pc&&(uc=Pc.format,gd=Rb.internalformat=td[uc],Rb.format=me[gd],uc in ud&&!("type"in Pc)&&(Rb.type=ud[uc]),uc in Sd&&(Rb.compressed=!0),uc=!0);!Td&&uc?Rb.channels=qb[Rb.format]:Td&&!uc&&Rb.channels!==Va[Rb.format]&&(Rb.format=Rb.internalformat=Va[Rb.channels])}}function cc(Rb){ib.pixelStorei(37440,Rb.flipY);ib.pixelStorei(37441,Rb.premultiplyAlpha);ib.pixelStorei(37443,Rb.colorSpace);
ib.pixelStorei(3317,Rb.unpackAlignment)}function Zb(){tb.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=!1}function Qb(Rb,Pc){var uc=null;L(Pc)?uc=Pc:Pc&&(ec(Rb,Pc),"x"in Pc&&(Rb.xOffset=Pc.x|0),"y"in Pc&&(Rb.yOffset=Pc.y|0),L(Pc.data)&&(uc=Pc.data));if(Pc.copy){Pc=tc.viewportWidth;var gd=tc.viewportHeight;Rb.width=Rb.width||Pc-Rb.xOffset;Rb.height=Rb.height||gd-Rb.yOffset;Rb.needsCopy=!0}else if(!uc)Rb.width=Rb.width||1,Rb.height=Rb.height||
1,Rb.channels=Rb.channels||4;else if(Sa(uc))Rb.channels=Rb.channels||4,Rb.data=uc,"type"in Pc||5121!==Rb.type||(Rb.type=lb[Object.prototype.toString.call(uc)]|0);else if(F(uc)){Rb.channels=Rb.channels||4;Pc=uc;gd=Pc.length;switch(Rb.type){case 5121:case 5123:case 5125:case 5126:gd=Aa.allocType(Rb.type,gd);gd.set(Pc);Rb.data=gd;break;case 36193:Rb.data=A(Pc)}Rb.alignment=1;Rb.needsFree=!0}else if(r(uc)){Pc=uc.data;Array.isArray(Pc)||5121!==Rb.type||(Rb.type=lb[Object.prototype.toString.call(Pc)]|0);
gd=uc.shape;var Jd=uc.stride,Td,Fd;3===gd.length?(Td=gd[2],Fd=Jd[2]):Fd=Td=1;var Ed=gd[0];var ee=gd[1];gd=Jd[0];Jd=Jd[1];Rb.alignment=1;Rb.width=Ed;Rb.height=ee;Rb.channels=Td;Rb.format=Rb.internalformat=Va[Td];Rb.needsFree=!0;Ed=Fd;uc=uc.offset;Td=Rb.width;Fd=Rb.height;ee=Rb.channels;for(var ge=Aa.allocType(36193===Rb.type?5126:Rb.type,Td*Fd*ee),Ob=0,hc=0;hc<Fd;++hc)for(var Cc=0;Cc<Td;++Cc)for(var Sc=0;Sc<ee;++Sc)ge[Ob++]=Pc[gd*Cc+Jd*hc+Ed*Sc+uc];H(Rb,ge)}else if(J(uc)===Ha||J(uc)===Ra||J(uc)===
La)J(uc)===Ha||J(uc)===Ra?Rb.element=uc:Rb.element=uc.canvas,Rb.width=Rb.element.width,Rb.height=Rb.element.height,Rb.channels=4;else if(J(uc)===gb)Rb.element=uc,Rb.width=uc.width,Rb.height=uc.height,Rb.channels=4;else if(J(uc)===ob)Rb.element=uc,Rb.width=uc.naturalWidth,Rb.height=uc.naturalHeight,Rb.channels=4;else if(J(uc)===ub)Rb.element=uc,Rb.width=uc.videoWidth,Rb.height=uc.videoHeight,Rb.channels=4;else if(I(uc)){Pc=Rb.width||uc[0].length;gd=Rb.height||uc.length;Jd=Rb.channels;Jd=t(uc[0][0])?
Jd||uc[0][0].length:Jd||1;Ed=eb.shape(uc);Td=1;for(Fd=0;Fd<Ed.length;++Fd)Td*=Ed[Fd];Td=Aa.allocType(36193===Rb.type?5126:Rb.type,Td);eb.flatten(uc,Ed,"",Td);H(Rb,Td);Rb.alignment=1;Rb.width=Pc;Rb.height=gd;Rb.channels=Jd;Rb.format=Rb.internalformat=Va[Jd];Rb.needsFree=!0}}function sb(Rb,Pc,uc,gd,Jd){var Td=Rb.element,Fd=Rb.data,Ed=Rb.internalformat,ee=Rb.format,ge=Rb.type,Ob=Rb.width,hc=Rb.height;cc(Rb);Td?ib.texSubImage2D(Pc,Jd,uc,gd,ee,ge,Td):Rb.compressed?ib.compressedTexSubImage2D(Pc,Jd,uc,gd,
Ed,Ob,hc,Fd):Rb.needsCopy?(oc(),ib.copyTexSubImage2D(Pc,Jd,uc,gd,Rb.xOffset,Rb.yOffset,Ob,hc)):ib.texSubImage2D(Pc,Jd,uc,gd,Ob,hc,ee,ge,Fd)}function Gb(){return re.pop()||new Zb}function xb(Rb){Rb.needsFree&&Aa.freeType(Rb.data);Zb.call(Rb);re.push(Rb)}function Jb(){tb.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=Array(16)}function Xb(Rb,Pc,uc){var gd=Rb.images[0]=Gb();Rb.mipmask=1;gd.width=Rb.width=Pc;gd.height=Rb.height=uc;gd.channels=Rb.channels=4}function nc(Rb,
Pc){if(L(Pc)){var uc=Rb.images[0]=Gb();Pb(uc,Rb);Qb(uc,Pc);Rb.mipmask=1}else if(ec(Rb,Pc),Array.isArray(Pc.mipmap)){Pc=Pc.mipmap;for(var gd=0;gd<Pc.length;++gd)uc=Rb.images[gd]=Gb(),Pb(uc,Rb),uc.width>>=gd,uc.height>>=gd,Qb(uc,Pc[gd]),Rb.mipmask|=1<<gd}else uc=Rb.images[0]=Gb(),Pb(uc,Rb),Qb(uc,Pc),Rb.mipmask=1;Pb(Rb,Rb.images[0])}function Qc(Rb,Pc){Rb=Rb.images;for(var uc=0;uc<Rb.length&&Rb[uc];++uc){var gd=Rb[uc],Jd=Pc,Td=uc,Fd=gd.element,Ed=gd.data,ee=gd.internalformat,ge=gd.format,Ob=gd.type,hc=
gd.width,Cc=gd.height;cc(gd);Fd?ib.texImage2D(Jd,Td,ge,ge,Ob,Fd):gd.compressed?ib.compressedTexImage2D(Jd,Td,ee,hc,Cc,0,Ed):gd.needsCopy?(oc(),ib.copyTexImage2D(Jd,Td,ge,gd.xOffset,gd.yOffset,hc,Cc,0)):ib.texImage2D(Jd,Td,ge,hc,Cc,0,ge,Ob,Ed||null)}}function $c(){var Rb=Te.pop()||new Jb;tb.call(Rb);for(var Pc=Rb.mipmask=0;16>Pc;++Pc)Rb.images[Pc]=null;return Rb}function Uc(Rb){for(var Pc=Rb.images,uc=0;uc<Pc.length;++uc)Pc[uc]&&xb(Pc[uc]),Pc[uc]=null;Te.push(Rb)}function ac(){this.magFilter=this.minFilter=
9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function Ac(Rb,Pc){"min"in Pc&&(Rb.minFilter=ld[Pc.min],0<=$a.indexOf(Rb.minFilter)&&!("faces"in Pc)&&(Rb.genMipmaps=!0));"mag"in Pc&&(Rb.magFilter=jd[Pc.mag]);var uc=Rb.wrapS,gd=Rb.wrapT;if("wrap"in Pc){var Jd=Pc.wrap;"string"===typeof Jd?uc=gd=id[Jd]:Array.isArray(Jd)&&(uc=id[Jd[0]],gd=id[Jd[1]])}else"wrapS"in Pc&&(uc=id[Pc.wrapS]),"wrapT"in Pc&&(gd=id[Pc.wrapT]);Rb.wrapS=uc;Rb.wrapT=gd;"anisotropic"in Pc&&
(Rb.anisotropic=Pc.anisotropic);if("mipmap"in Pc){uc=!1;switch(typeof Pc.mipmap){case "string":Rb.mipmapHint=Bc[Pc.mipmap];uc=Rb.genMipmaps=!0;break;case "boolean":uc=Rb.genMipmaps=Pc.mipmap;break;case "object":Rb.genMipmaps=!1,uc=!0}!uc||"min"in Pc||(Rb.minFilter=9984)}}function Zc(Rb,Pc){ib.texParameteri(Pc,10241,Rb.minFilter);ib.texParameteri(Pc,10240,Rb.magFilter);ib.texParameteri(Pc,10242,Rb.wrapS);ib.texParameteri(Pc,10243,Rb.wrapT);Yb.ext_texture_filter_anisotropic&&ib.texParameteri(Pc,34046,
Rb.anisotropic);Rb.genMipmaps&&(ib.hint(33170,Rb.mipmapHint),ib.generateMipmap(Pc))}function wc(Rb){tb.call(this);this.mipmask=0;this.internalformat=6408;this.id=pf++;this.refCount=1;this.target=Rb;this.texture=ib.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new ac;fb.profile&&(this.stats={size:0})}function Dc(Rb){ib.activeTexture(33984);ib.bindTexture(Rb.target,Rb.texture)}function ad(){var Rb=Ve[0];Rb?ib.bindTexture(Rb.target,Rb.texture):ib.bindTexture(3553,null)}function Rc(Rb){var Pc=
Rb.texture,uc=Rb.unit,gd=Rb.target;0<=uc&&(ib.activeTexture(33984+uc),ib.bindTexture(gd,null),Ve[uc]=null);ib.deleteTexture(Pc);Rb.texture=null;Rb.params=null;Rb.pixels=null;Rb.refCount=0;delete af[Rb.id];Lc.textureCount--}var Bc={"don't care":4352,"dont care":4352,nice:4354,fast:4353},id={repeat:10497,clamp:33071,mirror:33648},jd={nearest:9728,linear:9729},ld=na({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},jd),ke=
{none:0,browser:37444},ud={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},td={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},Sd={};Yb.ext_srgb&&(td.srgb=35904,td.srgba=35906);Yb.oes_texture_float&&(ud.float32=ud["float"]=5126);Yb.oes_texture_half_float&&(ud.float16=ud["half float"]=36193);Yb.webgl_depth_texture&&(na(td,{depth:6402,"depth stencil":34041}),na(ud,{uint16:5123,uint32:5125,"depth stencil":34042}));Yb.webgl_compressed_texture_s3tc&&
na(Sd,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});Yb.webgl_compressed_texture_atc&&na(Sd,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});Yb.webgl_compressed_texture_pvrtc&&na(Sd,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});Yb.webgl_compressed_texture_etc1&&(Sd["rgb etc1"]=36196);var be=Array.prototype.slice.call(ib.getParameter(34467));Object.keys(Sd).forEach(function(Rb){var Pc=
Sd[Rb];0<=be.indexOf(Pc)&&(td[Rb]=Pc)});var Ld=Object.keys(td);dc.textureFormats=Ld;var te=[];Object.keys(td).forEach(function(Rb){te[td[Rb]]=Rb});var ze=[];Object.keys(ud).forEach(function(Rb){ze[ud[Rb]]=Rb});var Dd=[];Object.keys(jd).forEach(function(Rb){Dd[jd[Rb]]=Rb});var zd=[];Object.keys(ld).forEach(function(Rb){zd[ld[Rb]]=Rb});var oe=[];Object.keys(id).forEach(function(Rb){oe[id[Rb]]=Rb});var me=Ld.reduce(function(Rb,Pc){var uc=td[Pc];6409===uc||6406===uc||6409===uc||6410===uc||6402===uc||
34041===uc||Yb.ext_srgb&&(35904===uc||35906===uc)?Rb[uc]=uc:32855===uc||0<=Pc.indexOf("rgba")?Rb[uc]=6408:Rb[uc]=6407;return Rb},{}),re=[],Te=[],pf=0,af={},gf=dc.maxTextureUnits,Ve=Array(gf).map(function(){return null});na(wc.prototype,{bind:function(){this.bindCount+=1;var Rb=this.unit;if(0>Rb){for(var Pc=0;Pc<gf;++Pc){var uc=Ve[Pc];if(uc){if(0<uc.bindCount)continue;uc.unit=-1}Ve[Pc]=this;Rb=Pc;break}fb.profile&&Lc.maxTextureUnits<Rb+1&&(Lc.maxTextureUnits=Rb+1);this.unit=Rb;ib.activeTexture(33984+
Rb);ib.bindTexture(this.target,this.texture)}return Rb},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&Rc(this)}});fb.profile&&(Lc.getTotalTextureSize=function(){var Rb=0;Object.keys(af).forEach(function(Pc){Rb+=af[Pc].stats.size});return Rb});return{create2D:function(Rb,Pc){function uc(Jd,Td){var Fd=gd.texInfo;ac.call(Fd);var Ed=$c();"number"===typeof Jd?"number"===typeof Td?Xb(Ed,Jd|0,Td|0):Xb(Ed,Jd|0,Jd|0):Jd?(Ac(Fd,Jd),nc(Ed,Jd)):Xb(Ed,1,1);Fd.genMipmaps&&(Ed.mipmask=
(Ed.width<<1)-1);gd.mipmask=Ed.mipmask;Pb(gd,Ed);gd.internalformat=Ed.internalformat;uc.width=Ed.width;uc.height=Ed.height;Dc(gd);Qc(Ed,3553);Zc(Fd,3553);ad();Uc(Ed);fb.profile&&(gd.stats.size=P(gd.internalformat,gd.type,Ed.width,Ed.height,Fd.genMipmaps,!1));uc.format=te[gd.internalformat];uc.type=ze[gd.type];uc.mag=Dd[Fd.magFilter];uc.min=zd[Fd.minFilter];uc.wrapS=oe[Fd.wrapS];uc.wrapT=oe[Fd.wrapT];return uc}var gd=new wc(3553);af[gd.id]=gd;Lc.textureCount++;uc(Rb,Pc);uc.subimage=function(Jd,Td,
Fd,Ed){Td|=0;Fd|=0;Ed|=0;var ee=Gb();Pb(ee,gd);ee.width=0;ee.height=0;Qb(ee,Jd);ee.width=ee.width||(gd.width>>Ed)-Td;ee.height=ee.height||(gd.height>>Ed)-Fd;Dc(gd);sb(ee,3553,Td,Fd,Ed);ad();xb(ee);return uc};uc.resize=function(Jd,Td){Jd|=0;Td=Td|0||Jd;if(Jd===gd.width&&Td===gd.height)return uc;uc.width=gd.width=Jd;uc.height=gd.height=Td;Dc(gd);for(var Fd=0;gd.mipmask>>Fd;++Fd){var Ed=Jd>>Fd,ee=Td>>Fd;if(!Ed||!ee)break;ib.texImage2D(3553,Fd,gd.format,Ed,ee,0,gd.format,gd.type,null)}ad();fb.profile&&
(gd.stats.size=P(gd.internalformat,gd.type,Jd,Td,!1,!1));return uc};uc._reglType="texture2d";uc._texture=gd;fb.profile&&(uc.stats=gd.stats);uc.destroy=function(){gd.decRef()};return uc},createCube:function(Rb,Pc,uc,gd,Jd,Td){function Fd(ge,Ob,hc,Cc,Sc,Ic){var Mc,Jc=Ed.texInfo;ac.call(Jc);for(Mc=0;6>Mc;++Mc)ee[Mc]=$c();if("number"===typeof ge||!ge)for(ge=ge|0||1,Mc=0;6>Mc;++Mc)Xb(ee[Mc],ge,ge);else if("object"===typeof ge)if(Ob)nc(ee[0],ge),nc(ee[1],Ob),nc(ee[2],hc),nc(ee[3],Cc),nc(ee[4],Sc),nc(ee[5],
Ic);else if(Ac(Jc,ge),ec(Ed,ge),"faces"in ge)for(ge=ge.faces,Mc=0;6>Mc;++Mc)Pb(ee[Mc],Ed),nc(ee[Mc],ge[Mc]);else for(Mc=0;6>Mc;++Mc)nc(ee[Mc],ge);Pb(Ed,ee[0]);Ed.mipmask=Jc.genMipmaps?(ee[0].width<<1)-1:ee[0].mipmask;Ed.internalformat=ee[0].internalformat;Fd.width=ee[0].width;Fd.height=ee[0].height;Dc(Ed);for(Mc=0;6>Mc;++Mc)Qc(ee[Mc],34069+Mc);Zc(Jc,34067);ad();fb.profile&&(Ed.stats.size=P(Ed.internalformat,Ed.type,Fd.width,Fd.height,Jc.genMipmaps,!0));Fd.format=te[Ed.internalformat];Fd.type=ze[Ed.type];
Fd.mag=Dd[Jc.magFilter];Fd.min=zd[Jc.minFilter];Fd.wrapS=oe[Jc.wrapS];Fd.wrapT=oe[Jc.wrapT];for(Mc=0;6>Mc;++Mc)Uc(ee[Mc]);return Fd}var Ed=new wc(34067);af[Ed.id]=Ed;Lc.cubeCount++;var ee=Array(6);Fd(Rb,Pc,uc,gd,Jd,Td);Fd.subimage=function(ge,Ob,hc,Cc,Sc){hc|=0;Cc|=0;Sc|=0;var Ic=Gb();Pb(Ic,Ed);Ic.width=0;Ic.height=0;Qb(Ic,Ob);Ic.width=Ic.width||(Ed.width>>Sc)-hc;Ic.height=Ic.height||(Ed.height>>Sc)-Cc;Dc(Ed);sb(Ic,34069+ge,hc,Cc,Sc);ad();xb(Ic);return Fd};Fd.resize=function(ge){ge|=0;if(ge!==Ed.width){Fd.width=
Ed.width=ge;Fd.height=Ed.height=ge;Dc(Ed);for(var Ob=0;6>Ob;++Ob)for(var hc=0;Ed.mipmask>>hc;++hc)ib.texImage2D(34069+Ob,hc,Ed.format,ge>>hc,ge>>hc,0,Ed.format,Ed.type,null);ad();fb.profile&&(Ed.stats.size=P(Ed.internalformat,Ed.type,Fd.width,Fd.height,!1,!0));return Fd}};Fd._reglType="textureCube";Fd._texture=Ed;fb.profile&&(Fd.stats=Ed.stats);Fd.destroy=function(){Ed.decRef()};return Fd},clear:function(){for(var Rb=0;Rb<gf;++Rb)ib.activeTexture(33984+Rb),ib.bindTexture(3553,null),Ve[Rb]=null;db(af).forEach(Rc);
Lc.cubeCount=0;Lc.textureCount=0},getTexture:function(Rb){return null},restore:function(){for(var Rb=0;Rb<gf;++Rb){var Pc=Ve[Rb];Pc&&(Pc.bindCount=0,Pc.unit=-1,Ve[Rb]=null)}db(af).forEach(function(uc){uc.texture=ib.createTexture();ib.bindTexture(uc.target,uc.texture);for(var gd=0;32>gd;++gd)if(0!==(uc.mipmask&1<<gd))if(3553===uc.target)ib.texImage2D(3553,gd,uc.internalformat,uc.width>>gd,uc.height>>gd,0,uc.internalformat,uc.type,null);else for(var Jd=0;6>Jd;++Jd)ib.texImage2D(34069+Jd,gd,uc.internalformat,
uc.width>>gd,uc.height>>gd,0,uc.internalformat,uc.type,null);Zc(uc.texInfo,uc.target)})}}}function N(ib,Yb,dc,oc,tc,Lc){function fb(wc,Dc,ad){this.target=wc;this.texture=Dc;this.renderbuffer=ad;var Rc=wc=0;Dc?(wc=Dc.width,Rc=Dc.height):ad&&(wc=ad.width,Rc=ad.height);this.width=wc;this.height=Rc}function tb(wc){wc&&(wc.texture&&wc.texture._texture.decRef(),wc.renderbuffer&&wc.renderbuffer._renderbuffer.decRef())}function Pb(wc,Dc,ad){wc&&(wc.texture?wc.texture._texture.refCount+=1:wc.renderbuffer._renderbuffer.refCount+=
1)}function ec(wc,Dc){Dc&&(Dc.texture?ib.framebufferTexture2D(36160,wc,Dc.target,Dc.texture._texture.texture,0):ib.framebufferRenderbuffer(36160,wc,36161,Dc.renderbuffer._renderbuffer.renderbuffer))}function cc(wc){var Dc=3553,ad=null,Rc=null,Bc=wc;"object"===typeof wc&&(Bc=wc.data,"target"in wc&&(Dc=wc.target|0));wc=Bc._reglType;"texture2d"===wc?ad=Bc:"textureCube"===wc?ad=Bc:"renderbuffer"===wc&&(Rc=Bc,Dc=36161);return new fb(Dc,ad,Rc)}function Zb(wc,Dc,ad,Rc,Bc){if(ad)return wc=oc.create2D({width:wc,
height:Dc,format:Rc,type:Bc}),wc._texture.refCount=0,new fb(3553,wc,null);wc=tc.create({width:wc,height:Dc,format:Rc});wc._renderbuffer.refCount=0;return new fb(36161,null,wc)}function Qb(wc){return wc&&(wc.texture||wc.renderbuffer)}function sb(wc,Dc,ad){wc&&(wc.texture?wc.texture.resize(Dc,ad):wc.renderbuffer&&wc.renderbuffer.resize(Dc,ad),wc.width=Dc,wc.height=ad)}function Gb(){this.id=Ac++;Zc[this.id]=this;this.framebuffer=ib.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];
this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function xb(wc){wc.colorAttachments.forEach(tb);tb(wc.depthAttachment);tb(wc.stencilAttachment);tb(wc.depthStencilAttachment)}function Jb(wc){ib.deleteFramebuffer(wc.framebuffer);wc.framebuffer=null;Lc.framebufferCount--;delete Zc[wc.id]}function Xb(wc){var Dc;ib.bindFramebuffer(36160,wc.framebuffer);var ad=wc.colorAttachments;for(Dc=0;Dc<ad.length;++Dc)ec(36064+Dc,ad[Dc]);for(Dc=ad.length;Dc<dc.maxColorAttachments;++Dc)ib.framebufferTexture2D(36160,
36064+Dc,3553,null,0);ib.framebufferTexture2D(36160,33306,3553,null,0);ib.framebufferTexture2D(36160,36096,3553,null,0);ib.framebufferTexture2D(36160,36128,3553,null,0);ec(36096,wc.depthAttachment);ec(36128,wc.stencilAttachment);ec(33306,wc.depthStencilAttachment);ib.checkFramebufferStatus(36160);ib.isContextLost();ib.bindFramebuffer(36160,Qc.next?Qc.next.framebuffer:null);Qc.cur=Qc.next;ib.getError()}function nc(wc,Dc){function ad(Bc,id){var jd=0,ld=0,ke=!0,ud=!0;var td=null;var Sd=!0,be="rgba",
Ld="uint8",te=1,ze=null,Dd=null,zd=null,oe=!1;if("number"===typeof Bc)jd=Bc|0,ld=id|0||jd;else if(Bc){"shape"in Bc?(ld=Bc.shape,jd=ld[0],ld=ld[1]):("radius"in Bc&&(jd=ld=Bc.radius),"width"in Bc&&(jd=Bc.width),"height"in Bc&&(ld=Bc.height));if("color"in Bc||"colors"in Bc)td=Bc.color||Bc.colors,Array.isArray(td);if(!td){"colorCount"in Bc&&(te=Bc.colorCount|0);"colorTexture"in Bc&&(Sd=!!Bc.colorTexture,be="rgba4");if("colorType"in Bc&&(Ld=Bc.colorType,!Sd))if("half float"===Ld||"float16"===Ld)be="rgba16f";
else if("float"===Ld||"float32"===Ld)be="rgba32f";"colorFormat"in Bc&&(be=Bc.colorFormat,0<=$c.indexOf(be)?Sd=!0:0<=Uc.indexOf(be)&&(Sd=!1))}if("depthTexture"in Bc||"depthStencilTexture"in Bc)oe=!(!Bc.depthTexture&&!Bc.depthStencilTexture);"depth"in Bc&&("boolean"===typeof Bc.depth?ke=Bc.depth:(ze=Bc.depth,ud=!1));"stencil"in Bc&&("boolean"===typeof Bc.stencil?ud=Bc.stencil:(Dd=Bc.stencil,ke=!1));"depthStencil"in Bc&&("boolean"===typeof Bc.depthStencil?ke=ud=Bc.depthStencil:(zd=Bc.depthStencil,ud=
ke=!1))}else jd=ld=1;var me=id=null,re=null;if(Array.isArray(td))Bc=td.map(cc);else if(td)Bc=[cc(td)];else for(Bc=Array(te),td=0;td<te;++td)Bc[td]=Zb(jd,ld,Sd,be,Ld);jd=jd||Bc[0].width;ld=ld||Bc[0].height;ze?id=cc(ze):ke&&!ud&&(id=Zb(jd,ld,oe,"depth","uint32"));Dd?me=cc(Dd):ud&&!ke&&(me=Zb(jd,ld,!1,"stencil","uint8"));zd?re=cc(zd):!ze&&!Dd&&ud&&ke&&(re=Zb(jd,ld,oe,"depth stencil","depth stencil"));ke=null;for(td=0;td<Bc.length;++td)Pb(Bc[td],jd,ld),Bc[td]&&Bc[td].texture&&(ud=kb[Bc[td].texture._texture.format]*
rb[Bc[td].texture._texture.type],null===ke&&(ke=ud));Pb(id,jd,ld);Pb(me,jd,ld);Pb(re,jd,ld);xb(Rc);Rc.width=jd;Rc.height=ld;Rc.colorAttachments=Bc;Rc.depthAttachment=id;Rc.stencilAttachment=me;Rc.depthStencilAttachment=re;ad.color=Bc.map(Qb);ad.depth=Qb(id);ad.stencil=Qb(me);ad.depthStencil=Qb(re);ad.width=Rc.width;ad.height=Rc.height;Xb(Rc);return ad}var Rc=new Gb;Lc.framebufferCount++;ad(wc,Dc);return na(ad,{resize:function(Bc,id){Bc=Math.max(Bc|0,1);id=Math.max(id|0||Bc,1);if(Bc===Rc.width&&id===
Rc.height)return ad;for(var jd=Rc.colorAttachments,ld=0;ld<jd.length;++ld)sb(jd[ld],Bc,id);sb(Rc.depthAttachment,Bc,id);sb(Rc.stencilAttachment,Bc,id);sb(Rc.depthStencilAttachment,Bc,id);Rc.width=ad.width=Bc;Rc.height=ad.height=id;Xb(Rc);return ad},_reglType:"framebuffer",_framebuffer:Rc,destroy:function(){Jb(Rc);xb(Rc)},use:function(Bc){Qc.setFBO({framebuffer:ad},Bc)}})}var Qc={cur:null,next:null,dirty:!1,setFBO:null},$c=["rgba"],Uc=["rgba4","rgb565","rgb5 a1"];Yb.ext_srgb&&Uc.push("srgba");Yb.ext_color_buffer_half_float&&
Uc.push("rgba16f","rgb16f");Yb.webgl_color_buffer_float&&Uc.push("rgba32f");var ac=["uint8"];Yb.oes_texture_half_float&&ac.push("half float","float16");Yb.oes_texture_float&&ac.push("float","float32");var Ac=0,Zc={};return na(Qc,{getFramebuffer:function(wc){return"function"===typeof wc&&"framebuffer"===wc._reglType&&(wc=wc._framebuffer,wc instanceof Gb)?wc:null},create:nc,createCube:function(wc){function Dc(Rc){var Bc={color:null},id=0,jd=null;var ld="rgba";var ke="uint8",ud=1;if("number"===typeof Rc)id=
Rc|0;else if(Rc){"shape"in Rc?id=Rc.shape[0]:("radius"in Rc&&(id=Rc.radius|0),"width"in Rc?id=Rc.width|0:"height"in Rc&&(id=Rc.height|0));if("color"in Rc||"colors"in Rc)jd=Rc.color||Rc.colors,Array.isArray(jd);jd||("colorCount"in Rc&&(ud=Rc.colorCount|0),"colorType"in Rc&&(ke=Rc.colorType),"colorFormat"in Rc&&(ld=Rc.colorFormat));"depth"in Rc&&(Bc.depth=Rc.depth);"stencil"in Rc&&(Bc.stencil=Rc.stencil);"depthStencil"in Rc&&(Bc.depthStencil=Rc.depthStencil)}else id=1;if(jd)if(Array.isArray(jd))for(Rc=
[],ld=0;ld<jd.length;++ld)Rc[ld]=jd[ld];else Rc=[jd];else for(Rc=Array(ud),jd={radius:id,format:ld,type:ke},ld=0;ld<ud;++ld)Rc[ld]=oc.createCube(jd);Bc.color=Array(Rc.length);for(ld=0;ld<Rc.length;++ld)ud=Rc[ld],id=id||ud.width,Bc.color[ld]={target:34069,data:Rc[ld]};for(ld=0;6>ld;++ld){for(ud=0;ud<Rc.length;++ud)Bc.color[ud].target=34069+ld;0<ld&&(Bc.depth=ad[0].depth,Bc.stencil=ad[0].stencil,Bc.depthStencil=ad[0].depthStencil);if(ad[ld])ad[ld](Bc);else ad[ld]=nc(Bc)}return na(Dc,{width:id,height:id,
color:Rc})}var ad=Array(6);Dc(wc);return na(Dc,{faces:ad,resize:function(Rc){var Bc=Rc|0;if(Bc===Dc.width)return Dc;var id=Dc.color;for(Rc=0;Rc<id.length;++Rc)id[Rc].resize(Bc);for(Rc=0;6>Rc;++Rc)ad[Rc].resize(Bc);Dc.width=Dc.height=Bc;return Dc},_reglType:"framebufferCube",destroy:function(){ad.forEach(function(Rc){Rc.destroy()})}})},clear:function(){db(Zc).forEach(Jb)},restore:function(){Qc.cur=null;Qc.next=null;Qc.dirty=!0;db(Zc).forEach(function(wc){wc.framebuffer=ib.createFramebuffer();Xb(wc)})}})}
function T(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}function Q(ib,Yb,dc,oc,tc){function Lc(xb){if(xb!==Gb.currentVAO){var Jb=Yb.oes_vertex_array_object;xb?Jb.bindVertexArrayOES(xb.vao):Jb.bindVertexArrayOES(null);Gb.currentVAO=xb}}function fb(xb){if(xb!==Gb.currentVAO){if(xb)xb.bindAttrs();else for(var Jb=Yb.angle_instanced_arrays,Xb=0;Xb<Zb.length;++Xb){var nc=Zb[Xb];nc.buffer?(ib.enableVertexAttribArray(Xb),
ib.vertexAttribPointer(Xb,nc.size,nc.type,nc.normalized,nc.stride,nc.offfset),Jb&&Jb.vertexAttribDivisorANGLE(Xb,nc.divisor)):(ib.disableVertexAttribArray(Xb),ib.vertexAttrib4f(Xb,nc.x,nc.y,nc.z,nc.w))}Gb.currentVAO=xb}}function tb(){db(sb).forEach(function(xb){xb.destroy()})}function Pb(){this.id=++Qb;this.attributes=[];var xb=Yb.oes_vertex_array_object;this.vao=xb?xb.createVertexArrayOES():null;sb[this.id]=this;this.buffers=[]}function ec(){Yb.oes_vertex_array_object&&db(sb).forEach(function(xb){xb.refresh()})}
var cc=dc.maxAttributes,Zb=Array(cc);for(dc=0;dc<cc;++dc)Zb[dc]=new T;var Qb=0,sb={},Gb={Record:T,scope:{},state:Zb,currentVAO:null,targetVAO:null,restore:Yb.oes_vertex_array_object?ec:function(){},createVAO:function(xb){function Jb(nc){for(var Qc=0;Qc<Xb.buffers.length;++Qc)Xb.buffers[Qc].destroy();Xb.buffers.length=0;Qc=Xb.attributes;Qc.length=nc.length;for(var $c=0;$c<nc.length;++$c){var Uc=nc[$c],ac=Qc[$c]=new T;Array.isArray(Uc)||Sa(Uc)||r(Uc)?(Uc=tc.create(Uc,34962,!1,!0),ac.buffer=tc.getBuffer(Uc),
ac.size=ac.buffer.dimension|0,ac.normalized=!1,ac.type=ac.buffer.dtype,ac.offset=0,ac.stride=0,ac.divisor=0,ac.state=1,Xb.buffers.push(Uc)):tc.getBuffer(Uc)?(ac.buffer=tc.getBuffer(Uc),ac.size=ac.buffer.dimension|0,ac.normalized=!1,ac.type=ac.buffer.dtype,ac.offset=0,ac.stride=0,ac.divisor=0,ac.state=1):tc.getBuffer(Uc.buffer)?(ac.buffer=tc.getBuffer(Uc.buffer),ac.size=(+Uc.size||ac.buffer.dimension)|0,ac.normalized=!!Uc.normalized||!1,ac.type="type"in Uc?ab[Uc.type]:ac.buffer.dtype,ac.offset=(Uc.offset||
0)|0,ac.stride=(Uc.stride||0)|0,ac.divisor=(Uc.divisor||0)|0,ac.state=1):"x"in Uc&&(ac.x=+Uc.x||0,ac.y=+Uc.y||0,ac.z=+Uc.z||0,ac.w=+Uc.w||0,ac.state=2)}Xb.refresh();return Jb}var Xb=new Pb;oc.vaoCount+=1;Jb.destroy=function(){Xb.destroy()};Jb._vao=Xb;Jb._reglType="vao";return Jb(xb)},getVAO:function(xb){return"function"===typeof xb&&xb._vao?xb._vao:null},destroyBuffer:function(xb){for(var Jb=0;Jb<Zb.length;++Jb){var Xb=Zb[Jb];Xb.buffer===xb&&(ib.disableVertexAttribArray(Jb),Xb.buffer=null)}},setVAO:Yb.oes_vertex_array_object?
Lc:fb,clear:Yb.oes_vertex_array_object?tb:function(){}};Pb.prototype.bindAttrs=function(){for(var xb=Yb.angle_instanced_arrays,Jb=this.attributes,Xb=0;Xb<Jb.length;++Xb){var nc=Jb[Xb];nc.buffer?(ib.enableVertexAttribArray(Xb),ib.bindBuffer(34962,nc.buffer.buffer),ib.vertexAttribPointer(Xb,nc.size,nc.type,nc.normalized,nc.stride,nc.offset),xb&&xb.vertexAttribDivisorANGLE(Xb,nc.divisor)):(ib.disableVertexAttribArray(Xb),ib.vertexAttrib4f(Xb,nc.x,nc.y,nc.z,nc.w))}for(xb=Jb.length;xb<cc;++xb)ib.disableVertexAttribArray(xb)};
Pb.prototype.refresh=function(){var xb=Yb.oes_vertex_array_object;xb&&(xb.bindVertexArrayOES(this.vao),this.bindAttrs(),Gb.currentVAO=this)};Pb.prototype.destroy=function(){if(this.vao){var xb=Yb.oes_vertex_array_object;this===Gb.currentVAO&&(Gb.currentVAO=null,xb.bindVertexArrayOES(null));xb.deleteVertexArrayOES(this.vao);this.vao=null}sb[this.id]&&(delete sb[this.id],--oc.vaoCount)};return Gb}function U(ib,Yb,dc,oc){function tc(Gb,xb,Jb,Xb){this.name=Gb;this.id=xb;this.location=Jb;this.info=Xb}
function Lc(Gb,xb){for(var Jb=0;Jb<Gb.length;++Jb)if(Gb[Jb].id===xb.id){Gb[Jb].location=xb.location;return}Gb.push(xb)}function fb(Gb,xb,Jb){Jb=35632===Gb?ec:cc;var Xb=Jb[xb];if(!Xb){var nc=Yb.str(xb);Xb=ib.createShader(Gb);ib.shaderSource(Xb,nc);ib.compileShader(Xb);Jb[xb]=Xb}return Xb}function tb(Gb,xb){this.id=sb++;this.fragId=Gb;this.vertId=xb;this.program=null;this.uniforms=[];this.attributes=[];oc.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function Pb(Gb,xb,Jb){var Xb=fb(35632,
Gb.fragId);var nc=fb(35633,Gb.vertId);xb=Gb.program=ib.createProgram();ib.attachShader(xb,Xb);ib.attachShader(xb,nc);if(Jb)for(Xb=0;Xb<Jb.length;++Xb)nc=Jb[Xb],ib.bindAttribLocation(xb,nc[0],nc[1]);ib.linkProgram(xb);nc=ib.getProgramParameter(xb,35718);oc.profile&&(Gb.stats.uniformsCount=nc);var Qc=Gb.uniforms;for(Xb=0;Xb<nc;++Xb)if(Jb=ib.getActiveUniform(xb,Xb))if(1<Jb.size)for(var $c=0;$c<Jb.size;++$c){var Uc=Jb.name.replace("[0]","["+$c+"]");Lc(Qc,new tc(Uc,Yb.id(Uc),ib.getUniformLocation(xb,Uc),
Jb))}else Lc(Qc,new tc(Jb.name,Yb.id(Jb.name),ib.getUniformLocation(xb,Jb.name),Jb));nc=ib.getProgramParameter(xb,35721);oc.profile&&(Gb.stats.attributesCount=nc);Gb=Gb.attributes;for(Xb=0;Xb<nc;++Xb)(Jb=ib.getActiveAttrib(xb,Xb))&&Lc(Gb,new tc(Jb.name,Yb.id(Jb.name),ib.getAttribLocation(xb,Jb.name),Jb))}var ec={},cc={},Zb={},Qb=[],sb=0;oc.profile&&(dc.getMaxUniformsCount=function(){var Gb=0;Qb.forEach(function(xb){xb.stats.uniformsCount>Gb&&(Gb=xb.stats.uniformsCount)});return Gb},dc.getMaxAttributesCount=
function(){var Gb=0;Qb.forEach(function(xb){xb.stats.attributesCount>Gb&&(Gb=xb.stats.attributesCount)});return Gb});return{clear:function(){var Gb=ib.deleteShader.bind(ib);db(ec).forEach(Gb);ec={};db(cc).forEach(Gb);cc={};Qb.forEach(function(xb){ib.deleteProgram(xb.program)});Qb.length=0;Zb={};dc.shaderCount=0},program:function(Gb,xb,Jb,Xb){var nc=Zb[xb];nc||(nc=Zb[xb]={});var Qc=nc[Gb];if(Qc&&!Xb)return Qc;xb=new tb(xb,Gb);dc.shaderCount++;Pb(xb,Jb,Xb);Qc||(nc[Gb]=xb);Qb.push(xb);return xb},restore:function(){ec=
{};cc={};for(var Gb=0;Gb<Qb.length;++Gb)Pb(Qb[Gb],null,Qb[Gb].attributes.map(function(xb){return[xb.location,xb.name]}))},shader:fb,frag:-1,vert:-1}}function S(ib,Yb,dc,oc,tc,Lc,fb){function tb(ec){var cc=null===Yb.next?5121:Yb.next.colorAttachments[0].texture._texture.type;var Zb=0,Qb=0,sb=oc.framebufferWidth,Gb=oc.framebufferHeight,xb=null;Sa(ec)?xb=ec:ec&&(Zb=ec.x|0,Qb=ec.y|0,sb=(ec.width||oc.framebufferWidth-Zb)|0,Gb=(ec.height||oc.framebufferHeight-Qb)|0,xb=ec.data||null);dc();ec=sb*Gb*4;xb||
(5121===cc?xb=new Uint8Array(ec):5126===cc&&(xb=xb||new Float32Array(ec)));ib.pixelStorei(3333,4);ib.readPixels(Zb,Qb,sb,Gb,6408,cc,xb);return xb}function Pb(ec){var cc;Yb.setFBO({framebuffer:ec.framebuffer},function(){cc=tb(ec)});return cc}return function(ec){return ec&&"framebuffer"in ec?Pb(ec):tb(ec)}}function X(ib){return Array.prototype.slice.call(ib)}function Z(ib){return X(ib).join("")}function aa(){function ib(){var tb=[],Pb=[];return na(function(){tb.push.apply(tb,X(arguments))},{def:function(){var ec=
"v"+dc++;Pb.push(ec);0<arguments.length&&(tb.push(ec,"="),tb.push.apply(tb,X(arguments)),tb.push(";"));return ec},toString:function(){return Z([0<Pb.length?"var "+Pb.join(",")+";":"",Z(tb)])}})}function Yb(){function tb(Qb,sb){ec(Qb,sb,"=",Pb.def(Qb,sb),";")}var Pb=ib(),ec=ib(),cc=Pb.toString,Zb=ec.toString;return na(function(){Pb.apply(Pb,X(arguments))},{def:Pb.def,entry:Pb,exit:ec,save:tb,set:function(Qb,sb,Gb){tb(Qb,sb);Pb(Qb,sb,"=",Gb,";")},toString:function(){return cc()+Zb()}})}var dc=0,oc=
[],tc=[],Lc=ib(),fb={};return{global:Lc,link:function(tb){for(var Pb=0;Pb<tc.length;++Pb)if(tc[Pb]===tb)return oc[Pb];Pb="g"+dc++;oc.push(Pb);tc.push(tb);return Pb},block:ib,proc:function(tb,Pb){function ec(){var sb="a"+cc.length;cc.push(sb);return sb}var cc=[];Pb=Pb||0;for(var Zb=0;Zb<Pb;++Zb)ec();Zb=Yb();var Qb=Zb.toString;return fb[tb]=na(Zb,{arg:ec,toString:function(){return Z(["function(",cc.join(),"){",Qb(),"}"])}})},scope:Yb,cond:function(){var tb=Z(arguments),Pb=Yb(),ec=Yb(),cc=Pb.toString,
Zb=ec.toString;return na(Pb,{then:function(){Pb.apply(Pb,X(arguments));return this},"else":function(){ec.apply(ec,X(arguments));return this},toString:function(){var Qb=Zb();Qb&&(Qb="else{"+Qb+"}");return Z(["if(",tb,"){",cc(),"}",Qb])}})},compile:function(){var tb=['"use strict";',Lc,"return {"];Object.keys(fb).forEach(function(ec){tb.push('"',ec,'":',fb[ec].toString(),",")});tb.push("}");var Pb=Z(tb).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,oc.concat(Pb)).apply(null,
tc)}}}function fa(ib){return Array.isArray(ib)||Sa(ib)||r(ib)}function ha(ib){return ib.sort(function(Yb,dc){return"viewport"===Yb?-1:"viewport"===dc?1:Yb<dc?-1:1})}function ja(ib,Yb,dc,oc){this.thisDep=ib;this.contextDep=Yb;this.propDep=dc;this.append=oc}function ba(ib){return ib&&!(ib.thisDep||ib.contextDep||ib.propDep)}function ma(ib){return new ja(!1,!1,!1,ib)}function qa(ib,Yb){var dc=ib.type;return 0===dc?(dc=ib.data.length,new ja(!0,1<=dc,2<=dc,Yb)):4===dc?(dc=ib.data,new ja(dc.thisDep,dc.contextDep,
dc.propDep,Yb)):new ja(3===dc,2===dc,1===dc,Yb)}function ka(ib,Yb,dc,oc,tc,Lc,fb,tb,Pb,ec,cc,Zb,Qb,sb,Gb){function xb(Ob){return Ob.replace(".","_")}function Jb(Ob,hc,Cc){var Sc=xb(Ob);Jd.push(Ob);gd[Sc]=uc[Sc]=!!Cc;Td[Sc]=hc}function Xb(Ob,hc,Cc){var Sc=xb(Ob);Jd.push(Ob);Array.isArray(Cc)?(uc[Sc]=Cc.slice(),gd[Sc]=Cc.slice()):uc[Sc]=gd[Sc]=Cc;Fd[Sc]=hc}function nc(){var Ob=aa(),hc=Ob.link,Cc=Ob.global;Ob.id=ge++;Ob.batchId="0";var Sc=hc(Ed),Ic=Ob.shared={props:"a0"};Object.keys(Ed).forEach(function(pc){Ic[pc]=
Cc.def(Sc,".",pc)});var Mc=Ob.next={},Jc=Ob.current={};Object.keys(Fd).forEach(function(pc){Array.isArray(uc[pc])&&(Mc[pc]=Cc.def(Ic.next,".",pc),Jc[pc]=Cc.def(Ic.current,".",pc))});var yc=Ob.constants={};Object.keys(ee).forEach(function(pc){yc[pc]=Cc.def(JSON.stringify(ee[pc]))});Ob.invoke=function(pc,mc){switch(mc.type){case 0:var cd=["this",Ic.context,Ic.props,Ob.batchId];return pc.def(hc(mc.data),".call(",cd.slice(0,Math.max(mc.data.length+1,4)),")");case 1:return pc.def(Ic.props,mc.data);case 2:return pc.def(Ic.context,
mc.data);case 3:return pc.def("this",mc.data);case 4:return mc.data.append(Ob,pc),mc.data.ref}};Ob.attribCache={};var lc={};Ob.scopeAttrib=function(pc){pc=Yb.id(pc);if(pc in lc)return lc[pc];var mc=ec.scope[pc];mc||(mc=ec.scope[pc]=new gf);return lc[pc]=hc(mc)};return Ob}function Qc(Ob){var hc=Ob["static"];Ob=Ob.dynamic;if("profile"in hc){var Cc=!!hc.profile;var Sc=ma(function(Mc,Jc){return Cc});Sc.enable=Cc}else if("profile"in Ob){var Ic=Ob.profile;Sc=qa(Ic,function(Mc,Jc){return Mc.invoke(Jc,Ic)})}return Sc}
function $c(Ob,hc){hc=Ob["static"];Ob=Ob.dynamic;if("framebuffer"in hc){var Cc=hc.framebuffer;return Cc?(Cc=tb.getFramebuffer(Cc),ma(function(Ic,Mc){var Jc=Ic.link(Cc);Ic=Ic.shared;Mc.set(Ic.framebuffer,".next",Jc);Ic=Ic.context;Mc.set(Ic,".framebufferWidth",Jc+".width");Mc.set(Ic,".framebufferHeight",Jc+".height");return Jc})):ma(function(Ic,Mc){Ic=Ic.shared;Mc.set(Ic.framebuffer,".next","null");Ic=Ic.context;Mc.set(Ic,".framebufferWidth",Ic+".drawingBufferWidth");Mc.set(Ic,".framebufferHeight",
Ic+".drawingBufferHeight");return"null"})}if("framebuffer"in Ob){var Sc=Ob.framebuffer;return qa(Sc,function(Ic,Mc){var Jc=Ic.invoke(Mc,Sc);Ic=Ic.shared;var yc=Ic.framebuffer;Jc=Mc.def(yc,".getFramebuffer(",Jc,")");Mc.set(yc,".next",Jc);Ic=Ic.context;Mc.set(Ic,".framebufferWidth",Jc+"?"+Jc+".width:"+Ic+".drawingBufferWidth");Mc.set(Ic,".framebufferHeight",Jc+"?"+Jc+".height:"+Ic+".drawingBufferHeight");return Jc})}return null}function Uc(Ob,hc,Cc){function Sc(yc){if(yc in Ic){var lc=Ic[yc];yc=!0;
var pc=lc.x|0,mc=lc.y|0,cd,kd;"width"in lc?cd=lc.width|0:yc=!1;"height"in lc?kd=lc.height|0:yc=!1;return new ja(!yc&&hc&&hc.thisDep,!yc&&hc&&hc.contextDep,!yc&&hc&&hc.propDep,function(qd,md){qd=qd.shared.context;var pe=cd;"width"in lc||(pe=md.def(qd,".","framebufferWidth","-",pc));var qe=kd;"height"in lc||(qe=md.def(qd,".","framebufferHeight","-",mc));return[pc,mc,pe,qe]})}if(yc in Mc){var nd=Mc[yc];yc=qa(nd,function(qd,md){var pe=qd.invoke(md,nd);qd=qd.shared.context;var qe=md.def(pe,".x|0"),Be=
md.def(pe,".y|0"),fe=md.def('"width" in ',pe,"?",pe,".width|0:","(",qd,".","framebufferWidth","-",qe,")");pe=md.def('"height" in ',pe,"?",pe,".height|0:","(",qd,".","framebufferHeight","-",Be,")");return[qe,Be,fe,pe]});hc&&(yc.thisDep=yc.thisDep||hc.thisDep,yc.contextDep=yc.contextDep||hc.contextDep,yc.propDep=yc.propDep||hc.propDep);return yc}return hc?new ja(hc.thisDep,hc.contextDep,hc.propDep,function(qd,md){qd=qd.shared.context;return[0,0,md.def(qd,".","framebufferWidth"),md.def(qd,".","framebufferHeight")]}):
null}var Ic=Ob["static"],Mc=Ob.dynamic;if(Ob=Sc("viewport")){var Jc=Ob;Ob=new ja(Ob.thisDep,Ob.contextDep,Ob.propDep,function(yc,lc){var pc=Jc.append(yc,lc);yc=yc.shared.context;lc.set(yc,".viewportWidth",pc[2]);lc.set(yc,".viewportHeight",pc[3]);return pc})}return{viewport:Ob,scissor_box:Sc("scissor.box")}}function ac(Ob,hc){Ob=Ob["static"];if("string"===typeof Ob.frag&&"string"===typeof Ob.vert){if(0<Object.keys(hc.dynamic).length)return null;Ob=hc["static"];hc=Object.keys(Ob);if(0<hc.length&&"number"===
typeof Ob[hc[0]]){for(var Cc=[],Sc=0;Sc<hc.length;++Sc)Cc.push([Ob[hc[Sc]]|0,hc[Sc]]);return Cc}}return null}function Ac(Ob,hc,Cc){function Sc(pc){if(pc in Ic){var mc=Yb.id(Ic[pc]);pc=ma(function(){return mc});pc.id=mc;return pc}if(pc in Mc){var cd=Mc[pc];return qa(cd,function(kd,nd){var qd=kd.invoke(nd,cd);return nd.def(kd.shared.strings,".id(",qd,")")})}return null}var Ic=Ob["static"],Mc=Ob.dynamic,Jc=Sc("frag"),yc=Sc("vert"),lc=null;ba(Jc)&&ba(yc)?(lc=cc.program(yc.id,Jc.id,null,Cc),Ob=ma(function(pc,
mc){return pc.link(lc)})):Ob=new ja(Jc&&Jc.thisDep||yc&&yc.thisDep,Jc&&Jc.contextDep||yc&&yc.contextDep,Jc&&Jc.propDep||yc&&yc.propDep,function(pc,mc){var cd=pc.shared.shader;var kd=Jc?Jc.append(pc,mc):mc.def(cd,".","frag");pc=yc?yc.append(pc,mc):mc.def(cd,".","vert");return mc.def(cd+".program("+pc+","+kd+")")});return{frag:Jc,vert:yc,progVar:Ob,program:lc}}function Zc(Ob,hc){function Cc(yc,lc){if(yc in Sc){var pc=Sc[yc]|0;return ma(function(cd,kd){lc&&(cd.OFFSET=pc);return pc})}if(yc in Ic){var mc=
Ic[yc];return qa(mc,function(cd,kd){kd=cd.invoke(kd,mc);lc&&(cd.OFFSET=kd);return kd})}return lc&&Mc?ma(function(cd,kd){cd.OFFSET="0";return 0}):null}var Sc=Ob["static"],Ic=Ob.dynamic,Mc=function(){if("elements"in Sc){var yc=Sc.elements;fa(yc)?yc=Lc.getElements(Lc.create(yc,!0)):yc&&(yc=Lc.getElements(yc));var lc=ma(function(mc,cd){return yc?(cd=mc.link(yc),mc.ELEMENTS=cd):mc.ELEMENTS=null});lc.value=yc;return lc}if("elements"in Ic){var pc=Ic.elements;return qa(pc,function(mc,cd){var kd=mc.shared,
nd=kd.isBufferArgs;kd=kd.elements;var qd=mc.invoke(cd,pc),md=cd.def("null");nd=cd.def(nd,"(",qd,")");qd=mc.cond(nd).then(md,"=",kd,".createStream(",qd,");")["else"](md,"=",kd,".getElements(",qd,");");cd.entry(qd);cd.exit(mc.cond(nd).then(kd,".destroyStream(",md,");"));return mc.ELEMENTS=md})}return null}(),Jc=Cc("offset",!0);return{elements:Mc,primitive:function(){if("primitive"in Sc){var yc=Sc.primitive;return ma(function(pc,mc){return Ba[yc]})}if("primitive"in Ic){var lc=Ic.primitive;return qa(lc,
function(pc,mc){var cd=pc.constants.primTypes;pc=pc.invoke(mc,lc);return mc.def(cd,"[",pc,"]")})}return Mc?ba(Mc)?Mc.value?ma(function(pc,mc){return mc.def(pc.ELEMENTS,".primType")}):ma(function(){return 4}):new ja(Mc.thisDep,Mc.contextDep,Mc.propDep,function(pc,mc){pc=pc.ELEMENTS;return mc.def(pc,"?",pc,".primType:",4)}):null}(),count:function(){if("count"in Sc){var yc=Sc.count|0;return ma(function(){return yc})}if("count"in Ic){var lc=Ic.count;return qa(lc,function(pc,mc){return pc.invoke(mc,lc)})}return Mc?
ba(Mc)?Mc?Jc?new ja(Jc.thisDep,Jc.contextDep,Jc.propDep,function(pc,mc){return mc.def(pc.ELEMENTS,".vertCount-",pc.OFFSET)}):ma(function(pc,mc){return mc.def(pc.ELEMENTS,".vertCount")}):ma(function(){return-1}):new ja(Mc.thisDep||Jc.thisDep,Mc.contextDep||Jc.contextDep,Mc.propDep||Jc.propDep,function(pc,mc){var cd=pc.ELEMENTS;return pc.OFFSET?mc.def(cd,"?",cd,".vertCount-",pc.OFFSET,":-1"):mc.def(cd,"?",cd,".vertCount:-1")}):null}(),instances:Cc("instances",!1),offset:Jc}}function wc(Ob,hc){var Cc=
Ob["static"],Sc=Ob.dynamic,Ic={};Jd.forEach(function(Mc){function Jc(lc,pc){if(Mc in Cc){var mc=lc(Cc[Mc]);Ic[yc]=ma(function(){return mc})}else if(Mc in Sc){var cd=Sc[Mc];Ic[yc]=qa(cd,function(kd,nd){return pc(kd,nd,kd.invoke(nd,cd))})}}var yc=xb(Mc);switch(Mc){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return Jc(function(lc){return lc},
function(lc,pc,mc){return mc});case "depth.func":return Jc(function(lc){return Vb[lc]},function(lc,pc,mc){return pc.def(lc.constants.compareFuncs,"[",mc,"]")});case "depth.range":return Jc(function(lc){return lc},function(lc,pc,mc){lc=pc.def("+",mc,"[0]");pc=pc.def("+",mc,"[1]");return[lc,pc]});case "blend.func":return Jc(function(lc){return[Lb["srcRGB"in lc?lc.srcRGB:lc.src],Lb["dstRGB"in lc?lc.dstRGB:lc.dst],Lb["srcAlpha"in lc?lc.srcAlpha:lc.src],Lb["dstAlpha"in lc?lc.dstAlpha:lc.dst]]},function(lc,
pc,mc){function cd(md,pe){return pc.def('"',md,pe,'" in ',mc,"?",mc,".",md,pe,":",mc,".",md)}lc=lc.constants.blendFuncs;var kd=cd("src","RGB"),nd=cd("dst","RGB");kd=pc.def(lc,"[",kd,"]");var qd=pc.def(lc,"[",cd("src","Alpha"),"]");nd=pc.def(lc,"[",nd,"]");lc=pc.def(lc,"[",cd("dst","Alpha"),"]");return[kd,nd,qd,lc]});case "blend.equation":return Jc(function(lc){if("string"===typeof lc)return[Ve[lc],Ve[lc]];if("object"===typeof lc)return[Ve[lc.rgb],Ve[lc.alpha]]},function(lc,pc,mc){var cd=lc.constants.blendEquations,
kd=pc.def(),nd=pc.def();lc=lc.cond("typeof ",mc,'==="string"');lc.then(kd,"=",nd,"=",cd,"[",mc,"];");lc["else"](kd,"=",cd,"[",mc,".rgb];",nd,"=",cd,"[",mc,".alpha];");pc(lc);return[kd,nd]});case "blend.color":return Jc(function(lc){return d(4,function(pc){return+lc[pc]})},function(lc,pc,mc){return d(4,function(cd){return pc.def("+",mc,"[",cd,"]")})});case "stencil.mask":return Jc(function(lc){return lc|0},function(lc,pc,mc){return pc.def(mc,"|0")});case "stencil.func":return Jc(function(lc){return[Vb[lc.cmp||
"keep"],lc.ref||0,"mask"in lc?lc.mask:-1]},function(lc,pc,mc){lc=pc.def('"cmp" in ',mc,"?",lc.constants.compareFuncs,"[",mc,".cmp]",":",7680);var cd=pc.def(mc,".ref|0");pc=pc.def('"mask" in ',mc,"?",mc,".mask|0:-1");return[lc,cd,pc]});case "stencil.opFront":case "stencil.opBack":return Jc(function(lc){return["stencil.opBack"===Mc?1029:1028,xc[lc.fail||"keep"],xc[lc.zfail||"keep"],xc[lc.zpass||"keep"]]},function(lc,pc,mc){function cd(nd){return pc.def('"',nd,'" in ',mc,"?",kd,"[",mc,".",nd,"]:",7680)}
var kd=lc.constants.stencilOps;return["stencil.opBack"===Mc?1029:1028,cd("fail"),cd("zfail"),cd("zpass")]});case "polygonOffset.offset":return Jc(function(lc){return[lc.factor|0,lc.units|0]},function(lc,pc,mc){lc=pc.def(mc,".factor|0");pc=pc.def(mc,".units|0");return[lc,pc]});case "cull.face":return Jc(function(lc){var pc=0;"front"===lc?pc=1028:"back"===lc&&(pc=1029);return pc},function(lc,pc,mc){return pc.def(mc,'==="front"?',1028,":",1029)});case "lineWidth":return Jc(function(lc){return lc},function(lc,
pc,mc){return mc});case "frontFace":return Jc(function(lc){return Gc[lc]},function(lc,pc,mc){return pc.def(mc+'==="cw"?2304:2305')});case "colorMask":return Jc(function(lc){return lc.map(function(pc){return!!pc})},function(lc,pc,mc){return d(4,function(cd){return"!!"+mc+"["+cd+"]"})});case "sample.coverage":return Jc(function(lc){return["value"in lc?lc.value:1,!!lc.invert]},function(lc,pc,mc){lc=pc.def('"value" in ',mc,"?+",mc,".value:1");pc=pc.def("!!",mc,".invert");return[lc,pc]})}});return Ic}
function Dc(Ob,hc){var Cc=Ob["static"],Sc=Ob.dynamic,Ic={};Object.keys(Cc).forEach(function(Mc){var Jc=Cc[Mc];if("number"===typeof Jc||"boolean"===typeof Jc)var yc=ma(function(){return Jc});else if("function"===typeof Jc){var lc=Jc._reglType;if("texture2d"===lc||"textureCube"===lc)yc=ma(function(pc){return pc.link(Jc)});else if("framebuffer"===lc||"framebufferCube"===lc)yc=ma(function(pc){return pc.link(Jc.color[0])})}else t(Jc)&&(yc=ma(function(pc){return pc.global.def("[",d(Jc.length,function(mc){return Jc[mc]}),
"]")}));yc.value=Jc;Ic[Mc]=yc});Object.keys(Sc).forEach(function(Mc){var Jc=Sc[Mc];Ic[Mc]=qa(Jc,function(yc,lc){return yc.invoke(lc,Jc)})});return Ic}function ad(Ob,hc){var Cc=Ob["static"],Sc=Ob.dynamic,Ic={};Object.keys(Cc).forEach(function(Mc){var Jc=Cc[Mc],yc=Yb.id(Mc),lc=new gf;if(fa(Jc))lc.state=1,lc.buffer=tc.getBuffer(tc.create(Jc,34962,!1,!0)),lc.type=0;else{var pc=tc.getBuffer(Jc);if(pc)lc.state=1,lc.buffer=pc,lc.type=0;else if("constant"in Jc){var mc=Jc.constant;lc.buffer="null";lc.state=
2;"number"===typeof mc?lc.x=mc:Mb.forEach(function(pe,qe){qe<mc.length&&(lc[pe]=mc[qe])})}else{pc=fa(Jc.buffer)?tc.getBuffer(tc.create(Jc.buffer,34962,!1,!0)):tc.getBuffer(Jc.buffer);var cd=Jc.offset|0,kd=Jc.stride|0,nd=Jc.size|0,qd=!!Jc.normalized,md=0;"type"in Jc&&(md=ab[Jc.type]);Jc=Jc.divisor|0;lc.buffer=pc;lc.state=1;lc.size=nd;lc.normalized=qd;lc.type=md||pc.dtype;lc.offset=cd;lc.stride=kd;lc.divisor=Jc}}Ic[Mc]=ma(function(pe,qe){qe=pe.attribCache;if(yc in qe)return qe[yc];var Be={isStream:!1};
Object.keys(lc).forEach(function(fe){Be[fe]=lc[fe]});lc.buffer&&(Be.buffer=pe.link(lc.buffer),Be.type=Be.type||Be.buffer+".dtype");return qe[yc]=Be})});Object.keys(Sc).forEach(function(Mc){var Jc=Sc[Mc];Ic[Mc]=qa(Jc,function(yc,lc){function pc(qe){lc(nd[qe],"=",mc,".",qe,"|0;")}var mc=yc.invoke(lc,Jc),cd=yc.shared;yc=yc.constants;var kd=cd.isBufferArgs;cd=cd.buffer;var nd={isStream:lc.def(!1)},qd=new gf;qd.state=1;Object.keys(qd).forEach(function(qe){nd[qe]=lc.def(""+qd[qe])});var md=nd.buffer,pe=
nd.type;lc("if(",kd,"(",mc,")){",nd.isStream,"=true;",md,"=",cd,".createStream(",34962,",",mc,");",pe,"=",md,".dtype;","}else{",md,"=",cd,".getBuffer(",mc,");","if(",md,"){",pe,"=",md,".dtype;",'}else if("constant" in ',mc,"){",nd.state,"=",2,";","if(typeof "+mc+'.constant === "number"){',nd[Mb[0]],"=",mc,".constant;",Mb.slice(1).map(function(qe){return nd[qe]}).join("="),"=0;","}else{",Mb.map(function(qe,Be){return nd[qe]+"="+mc+".constant.length>"+Be+"?"+mc+".constant["+Be+"]:0;"}).join(""),"}}else{",
"if(",kd,"(",mc,".buffer)){",md,"=",cd,".createStream(",34962,",",mc,".buffer);","}else{",md,"=",cd,".getBuffer(",mc,".buffer);","}",pe,'="type" in ',mc,"?",yc.glTypes,"[",mc,".type]:",md,".dtype;",nd.normalized,"=!!",mc,".normalized;");pc("size");pc("offset");pc("stride");pc("divisor");lc("}}");lc.exit("if(",nd.isStream,"){",cd,".destroyStream(",md,");","}");return nd})});return Ic}function Rc(Ob,hc){hc=Ob["static"];Ob=Ob.dynamic;if("vao"in hc){var Cc=hc.vao;null!==Cc&&null===ec.getVAO(Cc)&&(Cc=
ec.createVAO(Cc));return ma(function(Ic){return Ic.link(ec.getVAO(Cc))})}if("vao"in Ob){var Sc=Ob.vao;return qa(Sc,function(Ic,Mc){var Jc=Ic.invoke(Mc,Sc);return Mc.def(Ic.shared.vao+".getVAO("+Jc+")")})}return null}function Bc(Ob){var hc=Ob["static"],Cc=Ob.dynamic,Sc={};Object.keys(hc).forEach(function(Ic){var Mc=hc[Ic];Sc[Ic]=ma(function(Jc,yc){return"number"===typeof Mc||"boolean"===typeof Mc?""+Mc:Jc.link(Mc)})});Object.keys(Cc).forEach(function(Ic){var Mc=Cc[Ic];Sc[Ic]=qa(Mc,function(Jc,yc){return Jc.invoke(yc,
Mc)})});return Sc}function id(Ob,hc,Cc,Sc,Ic){function Mc(md){var pe=lc[md];pe&&(mc[md]=pe)}var Jc=ac(Ob,hc),yc=$c(Ob,Ic),lc=Uc(Ob,yc,Ic),pc=Zc(Ob,Ic),mc=wc(Ob,Ic),cd=Ac(Ob,Ic,Jc);Mc("viewport");Mc(xb("scissor.box"));var kd=0<Object.keys(mc).length;yc={framebuffer:yc,draw:pc,shader:cd,state:mc,dirty:kd,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};yc.profile=Qc(Ob,Ic);yc.uniforms=Dc(Cc,Ic);yc.drawVAO=yc.scopeVAO=Rc(Ob,Ic);if(!yc.drawVAO&&cd.program&&!Jc&&dc.angle_instanced_arrays){var nd=!0;
Ob=cd.program.attributes.map(function(md){md=hc["static"][md];nd=nd&&!!md;return md});if(nd&&0<Ob.length){var qd=ec.getVAO(ec.createVAO(Ob));yc.drawVAO=new ja(null,null,null,function(md,pe){return md.link(qd)});yc.useVAO=!0}}Jc?yc.useVAO=!0:yc.attributes=ad(hc,Ic);yc.context=Bc(Sc,Ic);return yc}function jd(Ob,hc,Cc){var Sc=Ob.shared.context,Ic=Ob.scope();Object.keys(Cc).forEach(function(Mc){hc.save(Sc,"."+Mc);Ic(Sc,".",Mc,"=",Cc[Mc].append(Ob,hc),";")});hc(Ic)}function ld(Ob,hc,Cc,Sc){var Ic=Ob.shared,
Mc=Ic.gl,Jc=Ic.framebuffer,yc;Pc&&(yc=hc.def(Ic.extensions,".webgl_draw_buffers"));var lc=Ob.constants;Ic=lc.drawBuffer;lc=lc.backBuffer;Ob=Cc?Cc.append(Ob,hc):hc.def(Jc,".next");Sc||hc("if(",Ob,"!==",Jc,".cur){");hc("if(",Ob,"){",Mc,".bindFramebuffer(",36160,",",Ob,".framebuffer);");Pc&&hc(yc,".drawBuffersWEBGL(",Ic,"[",Ob,".colorAttachments.length]);");hc("}else{",Mc,".bindFramebuffer(",36160,",null);");Pc&&hc(yc,".drawBuffersWEBGL(",lc,");");hc("}",Jc,".cur=",Ob,";");Sc||hc("}")}function ke(Ob,
hc,Cc){var Sc=Ob.shared,Ic=Sc.gl,Mc=Ob.current,Jc=Ob.next,yc=Sc.current,lc=Sc.next,pc=Ob.cond(yc,".dirty");Jd.forEach(function(mc){mc=xb(mc);if(!(mc in Cc.state))if(mc in Jc){var cd=Jc[mc];var kd=Mc[mc];var nd=d(uc[mc].length,function(qd){return pc.def(cd,"[",qd,"]")});pc(Ob.cond(nd.map(function(qd,md){return qd+"!=="+kd+"["+md+"]"}).join("||")).then(Ic,".",Fd[mc],"(",nd,");",nd.map(function(qd,md){return kd+"["+md+"]="+qd}).join(";"),";"))}else cd=pc.def(lc,".",mc),nd=Ob.cond(cd,"!==",yc,".",mc),
pc(nd),mc in Td?nd(Ob.cond(cd).then(Ic,".enable(",Td[mc],");")["else"](Ic,".disable(",Td[mc],");"),yc,".",mc,"=",cd,";"):nd(Ic,".",Fd[mc],"(",cd,");",yc,".",mc,"=",cd,";")});0===Object.keys(Cc.state).length&&pc(yc,".dirty=false;");hc(pc)}function ud(Ob,hc,Cc,Sc){var Ic=Ob.shared,Mc=Ob.current,Jc=Ic.current,yc=Ic.gl;ha(Object.keys(Cc)).forEach(function(lc){var pc=Cc[lc];if(!Sc||Sc(pc)){var mc=pc.append(Ob,hc);if(Td[lc]){var cd=Td[lc];ba(pc)?mc?hc(yc,".enable(",cd,");"):hc(yc,".disable(",cd,");"):hc(Ob.cond(mc).then(yc,
".enable(",cd,");")["else"](yc,".disable(",cd,");"));hc(Jc,".",lc,"=",mc,";")}else if(t(mc)){var kd=Mc[lc];hc(yc,".",Fd[lc],"(",mc,");",mc.map(function(nd,qd){return kd+"["+qd+"]="+nd}).join(";"),";")}else hc(yc,".",Fd[lc],"(",mc,");",Jc,".",lc,"=",mc,";")}})}function td(Ob,hc){Rb&&(Ob.instancing=hc.def(Ob.shared.extensions,".angle_instanced_arrays"))}function Sd(Ob,hc,Cc,Sc,Ic){function Mc(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}function Jc(md){nd=hc.def();md(nd,
"=",Mc(),";");"string"===typeof Ic?md(mc,".count+=",Ic,";"):md(mc,".count++;");sb&&(Sc?(qd=hc.def(),md(qd,"=",kd,".getNumPendingQueries();")):md(kd,".beginQuery(",mc,");"))}function yc(md){md(mc,".cpuTime+=",Mc(),"-",nd,";");sb&&(Sc?md(kd,".pushScopeStats(",qd,",",kd,".getNumPendingQueries(),",mc,");"):md(kd,".endQuery();"))}function lc(md){var pe=hc.def(cd,".profile");hc(cd,".profile=",md,";");hc.exit(cd,".profile=",pe,";")}var pc=Ob.shared,mc=Ob.stats,cd=pc.current,kd=pc.timer;Cc=Cc.profile;var nd,
qd;if(Cc){if(ba(Cc)){Cc.enable?(Jc(hc),yc(hc.exit),lc("true")):lc("false");return}Cc=Cc.append(Ob,hc);lc(Cc)}else Cc=hc.def(cd,".profile");pc=Ob.block();Jc(pc);hc("if(",Cc,"){",pc,"}");Ob=Ob.block();yc(Ob);hc.exit("if(",Cc,"){",Ob,"}")}function be(Ob,hc,Cc,Sc,Ic){function Mc(lc){switch(lc){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function Jc(lc,pc,mc){function cd(){hc("if(!",md,".buffer){",nd,".enableVertexAttribArray(",
qd,");}");var fe=mc.type;var De=mc.size?hc.def(mc.size,"||",pc):pc;hc("if(",md,".type!==",fe,"||",md,".size!==",De,"||",Be.map(function(Rf){return md+"."+Rf+"!=="+mc[Rf]}).join("||"),"){",nd,".bindBuffer(",34962,",",pe,".buffer);",nd,".vertexAttribPointer(",[qd,De,fe,mc.normalized,mc.stride,mc.offset],");",md,".type=",fe,";",md,".size=",De,";",Be.map(function(Rf){return md+"."+Rf+"="+mc[Rf]+";"}).join(""),"}");Rb&&(fe=mc.divisor,hc("if(",md,".divisor!==",fe,"){",Ob.instancing,".vertexAttribDivisorANGLE(",
[qd,fe],");",md,".divisor=",fe,";}"))}function kd(){hc("if(",md,".buffer){",nd,".disableVertexAttribArray(",qd,");",md,".buffer=null;","}if(",Mb.map(function(fe,De){return md+"."+fe+"!=="+qe[De]}).join("||"),"){",nd,".vertexAttrib4f(",qd,",",qe,");",Mb.map(function(fe,De){return md+"."+fe+"="+qe[De]+";"}).join(""),"}")}var nd=yc.gl,qd=hc.def(lc,".location"),md=hc.def(yc.attributes,"[",qd,"]");lc=mc.state;var pe=mc.buffer,qe=[mc.x,mc.y,mc.z,mc.w],Be=["buffer","normalized","offset","stride"];1===lc?
cd():2===lc?kd():(hc("if(",lc,"===",1,"){"),cd(),hc("}else{"),kd(),hc("}"))}var yc=Ob.shared;Sc.forEach(function(lc){var pc=lc.name,mc=Cc.attributes[pc];if(mc){if(!Ic(mc))return;var cd=mc.append(Ob,hc)}else{if(!Ic(Hc))return;var kd=Ob.scopeAttrib(pc);cd={};Object.keys(new gf).forEach(function(nd){cd[nd]=hc.def(kd,".",nd)})}Jc(Ob.link(lc),Mc(lc.info.type),cd)})}function Ld(Ob,hc,Cc,Sc,Ic){for(var Mc=Ob.shared,Jc=Mc.gl,yc,lc=0;lc<Sc.length;++lc){var pc=Sc[lc],mc=pc.name,cd=pc.info.type,kd=Cc.uniforms[mc];
pc=Ob.link(pc)+".location";if(kd){if(!Ic(kd))continue;if(ba(kd)){mc=kd.value;if(35678===cd||35680===cd)cd=Ob.link(mc._texture||mc.color[0]._texture),hc(Jc,".uniform1i(",pc,",",cd+".bind());"),hc.exit(cd,".unbind();");else if(35674===cd||35675===cd||35676===cd)mc=Ob.global.def("new Float32Array(["+Array.prototype.slice.call(mc)+"])"),kd=2,35675===cd?kd=3:35676===cd&&(kd=4),hc(Jc,".uniformMatrix",kd,"fv(",pc,",false,",mc,");");else{switch(cd){case 5126:yc="1f";break;case 35664:yc="2f";break;case 35665:yc=
"3f";break;case 35666:yc="4f";break;case 35670:yc="1i";break;case 5124:yc="1i";break;case 35671:yc="2i";break;case 35667:yc="2i";break;case 35672:yc="3i";break;case 35668:yc="3i";break;case 35673:yc="4i";break;case 35669:yc="4i"}hc(Jc,".uniform",yc,"(",pc,",",t(mc)?Array.prototype.slice.call(mc):mc,");")}continue}else var nd=kd.append(Ob,hc)}else{if(!Ic(Hc))continue;nd=hc.def(Mc.uniforms,"[",Yb.id(mc),"]")}35678===cd?hc("if(",nd,"&&",nd,'._reglType==="framebuffer"){',nd,"=",nd,".color[0];","}"):35680===
cd&&hc("if(",nd,"&&",nd,'._reglType==="framebufferCube"){',nd,"=",nd,".color[0];","}");mc=1;switch(cd){case 35678:case 35680:cd=hc.def(nd,"._texture");hc(Jc,".uniform1i(",pc,",",cd,".bind());");hc.exit(cd,".unbind();");continue;case 5124:case 35670:yc="1i";break;case 35667:case 35671:yc="2i";mc=2;break;case 35668:case 35672:yc="3i";mc=3;break;case 35669:case 35673:yc="4i";mc=4;break;case 5126:yc="1f";break;case 35664:yc="2f";mc=2;break;case 35665:yc="3f";mc=3;break;case 35666:yc="4f";mc=4;break;case 35674:yc=
"Matrix2fv";break;case 35675:yc="Matrix3fv";break;case 35676:yc="Matrix4fv"}hc(Jc,".uniform",yc,"(",pc,",");if("M"===yc.charAt(0)){pc=Math.pow(cd-35674+2,2);var qd=Ob.global.def("new Float32Array(",pc,")");hc("false,(Array.isArray(",nd,")||",nd," instanceof Float32Array)?",nd,":(",d(pc,function(md){return qd+"["+md+"]="+nd+"["+md+"]"}),",",qd,")")}else 1<mc?hc(d(mc,function(md){return nd+"["+md+"]"})):hc(nd);hc(");")}}function te(Ob,hc,Cc,Sc){function Ic(fe){var De=mc[fe];return De?De.contextDep&&
Sc.contextDynamic||De.propDep?De.append(Ob,Cc):De.append(Ob,hc):hc.def(pc,".",fe)}function Mc(){function fe(){Cc(pe,".drawElementsInstancedANGLE(",[kd,qd,qe,nd+"<<(("+qe+"-5121)>>1)",md],");")}function De(){Cc(pe,".drawArraysInstancedANGLE(",[kd,nd,qd,md],");")}cd?Be?fe():(Cc("if(",cd,"){"),fe(),Cc("}else{"),De(),Cc("}")):De()}function Jc(){function fe(){Cc(lc+".drawElements("+[kd,qd,qe,nd+"<<(("+qe+"-5121)>>1)"]+");")}function De(){Cc(lc+".drawArrays("+[kd,nd,qd]+");")}cd?Be?fe():(Cc("if(",cd,"){"),
fe(),Cc("}else{"),De(),Cc("}")):De()}var yc=Ob.shared,lc=yc.gl,pc=yc.draw,mc=Sc.draw,cd=function(){var fe=mc.elements,De=hc;if(fe){if(fe.contextDep&&Sc.contextDynamic||fe.propDep)De=Cc;fe=fe.append(Ob,De)}else fe=De.def(pc,".","elements");fe&&De("if("+fe+")"+lc+".bindBuffer(34963,"+fe+".buffer.buffer);");return fe}(),kd=Ic("primitive"),nd=Ic("offset"),qd=function(){var fe=mc.count,De=hc;if(fe){if(fe.contextDep&&Sc.contextDynamic||fe.propDep)De=Cc;fe=fe.append(Ob,De)}else fe=De.def(pc,".","count");
return fe}();if("number"===typeof qd){if(0===qd)return}else Cc("if(",qd,"){"),Cc.exit("}");var md,pe;Rb&&(md=Ic("instances"),pe=Ob.instancing);var qe=cd+".type",Be=mc.elements&&ba(mc.elements);Rb&&("number"!==typeof md||0<=md)?"string"===typeof md?(Cc("if(",md,">0){"),Mc(),Cc("}else if(",md,"<0){"),Jc(),Cc("}")):Mc():Jc()}function ze(Ob,hc,Cc,Sc,Ic){hc=nc();Ic=hc.proc("body",Ic);Rb&&(hc.instancing=Ic.def(hc.shared.extensions,".angle_instanced_arrays"));Ob(hc,Ic,Cc,Sc);return hc.compile().body}function Dd(Ob,
hc,Cc,Sc){td(Ob,hc);Cc.useVAO?Cc.drawVAO?hc(Ob.shared.vao,".setVAO(",Cc.drawVAO.append(Ob,hc),");"):hc(Ob.shared.vao,".setVAO(",Ob.shared.vao,".targetVAO);"):(hc(Ob.shared.vao,".setVAO(null);"),be(Ob,hc,Cc,Sc.attributes,function(){return!0}));Ld(Ob,hc,Cc,Sc.uniforms,function(){return!0});te(Ob,hc,hc,Cc)}function zd(Ob,hc){var Cc=Ob.proc("draw",1);td(Ob,Cc);jd(Ob,Cc,hc.context);ld(Ob,Cc,hc.framebuffer);ke(Ob,Cc,hc);ud(Ob,Cc,hc.state);Sd(Ob,Cc,hc,!1,!0);var Sc=hc.shader.progVar.append(Ob,Cc);Cc(Ob.shared.gl,
".useProgram(",Sc,".program);");if(hc.shader.program)Dd(Ob,Cc,hc,hc.shader.program);else{Cc(Ob.shared.vao,".setVAO(null);");var Ic=Ob.global.def("{}"),Mc=Cc.def(Sc,".id"),Jc=Cc.def(Ic,"[",Mc,"]");Cc(Ob.cond(Jc).then(Jc,".call(this,a0);")["else"](Jc,"=",Ic,"[",Mc,"]=",Ob.link(function(yc){return ze(Dd,Ob,hc,yc,1)}),"(",Sc,");",Jc,".call(this,a0);"))}0<Object.keys(hc.state).length&&Cc(Ob.shared.current,".dirty=true;")}function oe(Ob,hc,Cc,Sc){function Ic(){return!0}Ob.batchId="a1";td(Ob,hc);be(Ob,hc,
Cc,Sc.attributes,Ic);Ld(Ob,hc,Cc,Sc.uniforms,Ic);te(Ob,hc,hc,Cc)}function me(Ob,hc,Cc,Sc){function Ic(cd){return cd.contextDep&&Jc||cd.propDep}function Mc(cd){return!Ic(cd)}td(Ob,hc);var Jc=Cc.contextDep,yc=hc.def(),lc=hc.def();Ob.shared.props=lc;Ob.batchId=yc;var pc=Ob.scope(),mc=Ob.scope();hc(pc.entry,"for(",yc,"=0;",yc,"<","a1",";++",yc,"){",lc,"=","a0","[",yc,"];",mc,"}",pc.exit);Cc.needsContext&&jd(Ob,mc,Cc.context);Cc.needsFramebuffer&&ld(Ob,mc,Cc.framebuffer);ud(Ob,mc,Cc.state,Ic);Cc.profile&&
Ic(Cc.profile)&&Sd(Ob,mc,Cc,!1,!0);Sc?(Cc.useVAO?Cc.drawVAO?Ic(Cc.drawVAO)?mc(Ob.shared.vao,".setVAO(",Cc.drawVAO.append(Ob,mc),");"):pc(Ob.shared.vao,".setVAO(",Cc.drawVAO.append(Ob,pc),");"):pc(Ob.shared.vao,".setVAO(",Ob.shared.vao,".targetVAO);"):(pc(Ob.shared.vao,".setVAO(null);"),be(Ob,pc,Cc,Sc.attributes,Mc),be(Ob,mc,Cc,Sc.attributes,Ic)),Ld(Ob,pc,Cc,Sc.uniforms,Mc),Ld(Ob,mc,Cc,Sc.uniforms,Ic),te(Ob,pc,mc,Cc)):(hc=Ob.global.def("{}"),Sc=Cc.shader.progVar.append(Ob,mc),lc=mc.def(Sc,".id"),pc=
mc.def(hc,"[",lc,"]"),mc(Ob.shared.gl,".useProgram(",Sc,".program);","if(!",pc,"){",pc,"=",hc,"[",lc,"]=",Ob.link(function(cd){return ze(oe,Ob,Cc,cd,2)}),"(",Sc,");}",pc,".call(this,a0[",yc,"],",yc,");"))}function re(Ob,hc){function Cc(pc){return pc.contextDep&&Ic||pc.propDep}var Sc=Ob.proc("batch",2);Ob.batchId="0";td(Ob,Sc);var Ic=!1,Mc=!0;Object.keys(hc.context).forEach(function(pc){Ic=Ic||hc.context[pc].propDep});Ic||(jd(Ob,Sc,hc.context),Mc=!1);var Jc=hc.framebuffer,yc=!1;Jc?(Jc.propDep?Ic=yc=
!0:Jc.contextDep&&Ic&&(yc=!0),yc||ld(Ob,Sc,Jc)):ld(Ob,Sc,null);hc.state.viewport&&hc.state.viewport.propDep&&(Ic=!0);ke(Ob,Sc,hc);ud(Ob,Sc,hc.state,function(pc){return!Cc(pc)});hc.profile&&Cc(hc.profile)||Sd(Ob,Sc,hc,!1,"a1");hc.contextDep=Ic;hc.needsContext=Mc;hc.needsFramebuffer=yc;Mc=hc.shader.progVar;if(Mc.contextDep&&Ic||Mc.propDep)me(Ob,Sc,hc,null);else if(Mc=Mc.append(Ob,Sc),Sc(Ob.shared.gl,".useProgram(",Mc,".program);"),hc.shader.program)me(Ob,Sc,hc,hc.shader.program);else{Sc(Ob.shared.vao,
".setVAO(null);");Jc=Ob.global.def("{}");yc=Sc.def(Mc,".id");var lc=Sc.def(Jc,"[",yc,"]");Sc(Ob.cond(lc).then(lc,".call(this,a0,a1);")["else"](lc,"=",Jc,"[",yc,"]=",Ob.link(function(pc){return ze(me,Ob,hc,pc,2)}),"(",Mc,");",lc,".call(this,a0,a1);"))}0<Object.keys(hc.state).length&&Sc(Ob.shared.current,".dirty=true;")}function Te(Ob,hc){function Cc(Jc){var yc=hc.shader[Jc];yc&&Sc.set(Ic.shader,"."+Jc,yc.append(Ob,Sc))}var Sc=Ob.proc("scope",3);Ob.batchId="a2";var Ic=Ob.shared,Mc=Ic.current;jd(Ob,
Sc,hc.context);hc.framebuffer&&hc.framebuffer.append(Ob,Sc);ha(Object.keys(hc.state)).forEach(function(Jc){var yc=hc.state[Jc].append(Ob,Sc);t(yc)?yc.forEach(function(lc,pc){Sc.set(Ob.next[Jc],"["+pc+"]",lc)}):Sc.set(Ic.next,"."+Jc,yc)});Sd(Ob,Sc,hc,!0,!0);["elements","offset","count","instances","primitive"].forEach(function(Jc){var yc=hc.draw[Jc];yc&&Sc.set(Ic.draw,"."+Jc,""+yc.append(Ob,Sc))});Object.keys(hc.uniforms).forEach(function(Jc){Sc.set(Ic.uniforms,"["+Yb.id(Jc)+"]",hc.uniforms[Jc].append(Ob,
Sc))});Object.keys(hc.attributes).forEach(function(Jc){var yc=hc.attributes[Jc].append(Ob,Sc),lc=Ob.scopeAttrib(Jc);Object.keys(new gf).forEach(function(pc){Sc.set(lc,"."+pc,yc[pc])})});hc.scopeVAO&&Sc.set(Ic.vao,".targetVAO",hc.scopeVAO.append(Ob,Sc));Cc("vert");Cc("frag");0<Object.keys(hc.state).length&&(Sc(Mc,".dirty=true;"),Sc.exit(Mc,".dirty=true;"));Sc("a1(",Ob.shared.context,",a0,",Ob.batchId,");")}function pf(Ob){if("object"===typeof Ob&&!t(Ob)){for(var hc=Object.keys(Ob),Cc=0;Cc<hc.length;++Cc)if(ia.isDynamic(Ob[hc[Cc]]))return!0;
return!1}}function af(Ob,hc,Cc){function Sc(cd,kd){Jc.forEach(function(nd){var qd=Ic[nd];ia.isDynamic(qd)&&(qd=cd.invoke(kd,qd),kd(mc,".",nd,"=",qd,";"))})}var Ic=hc["static"][Cc];if(Ic&&pf(Ic)){var Mc=Ob.global,Jc=Object.keys(Ic),yc=!1,lc=!1,pc=!1,mc=Ob.global.def("{}");Jc.forEach(function(cd){var kd=Ic[cd];if(ia.isDynamic(kd))"function"===typeof kd&&(kd=Ic[cd]=ia.unbox(kd)),cd=qa(kd,null),yc=yc||cd.thisDep,pc=pc||cd.propDep,lc=lc||cd.contextDep;else{Mc(mc,".",cd,"=");switch(typeof kd){case "number":Mc(kd);
break;case "string":Mc('"',kd,'"');break;case "object":Array.isArray(kd)&&Mc("[",kd.join(),"]");break;default:Mc(Ob.link(kd))}Mc(";")}});hc.dynamic[Cc]=new ia.DynamicVariable(4,{thisDep:yc,contextDep:lc,propDep:pc,ref:mc,append:Sc});delete hc["static"][Cc]}}var gf=ec.Record,Ve={add:32774,subtract:32778,"reverse subtract":32779};dc.ext_blend_minmax&&(Ve.min=32775,Ve.max=32776);var Rb=dc.angle_instanced_arrays,Pc=dc.webgl_draw_buffers,uc={dirty:!0,profile:Gb.profile},gd={},Jd=[],Td={},Fd={};Jb("dither",
3024);Jb("blend.enable",3042);Xb("blend.color","blendColor",[0,0,0,0]);Xb("blend.equation","blendEquationSeparate",[32774,32774]);Xb("blend.func","blendFuncSeparate",[1,0,1,0]);Jb("depth.enable",2929,!0);Xb("depth.func","depthFunc",513);Xb("depth.range","depthRange",[0,1]);Xb("depth.mask","depthMask",!0);Xb("colorMask","colorMask",[!0,!0,!0,!0]);Jb("cull.enable",2884);Xb("cull.face","cullFace",1029);Xb("frontFace","frontFace",2305);Xb("lineWidth","lineWidth",1);Jb("polygonOffset.enable",32823);Xb("polygonOffset.offset",
"polygonOffset",[0,0]);Jb("sample.alpha",32926);Jb("sample.enable",32928);Xb("sample.coverage","sampleCoverage",[1,!1]);Jb("stencil.enable",2960);Xb("stencil.mask","stencilMask",-1);Xb("stencil.func","stencilFunc",[519,0,-1]);Xb("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);Xb("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);Jb("scissor.enable",3089);Xb("scissor.box","scissor",[0,0,ib.drawingBufferWidth,ib.drawingBufferHeight]);Xb("viewport","viewport",[0,0,ib.drawingBufferWidth,
ib.drawingBufferHeight]);var Ed={gl:ib,context:Qb,strings:Yb,next:gd,current:uc,draw:Zb,elements:Lc,buffer:tc,shader:cc,attributes:ec.state,vao:ec,uniforms:Pb,framebuffer:tb,extensions:dc,timer:sb,isBufferArgs:fa},ee={primTypes:Ba,compareFuncs:Vb,blendFuncs:Lb,blendEquations:Ve,stencilOps:xc,glTypes:ab,orientationType:Gc};Pc&&(ee.backBuffer=[1029],ee.drawBuffer=d(oc.maxDrawbuffers,function(Ob){return 0===Ob?[0]:d(Ob,function(hc){return 36064+hc})}));var ge=0;return{next:gd,current:uc,procs:function(){var Ob=
nc(),hc=Ob.proc("poll"),Cc=Ob.proc("refresh"),Sc=Ob.block();hc(Sc);Cc(Sc);var Ic=Ob.shared,Mc=Ic.gl,Jc=Ic.next,yc=Ic.current;Sc(yc,".dirty=false;");ld(Ob,hc);ld(Ob,Cc,null,!0);var lc;Rb&&(lc=Ob.link(Rb));dc.oes_vertex_array_object&&Cc(Ob.link(dc.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var pc=0;pc<oc.maxAttributes;++pc){var mc=Cc.def(Ic.attributes,"[",pc,"]"),cd=Ob.cond(mc,".buffer");cd.then(Mc,".enableVertexAttribArray(",pc,");",Mc,".bindBuffer(",34962,",",mc,".buffer.buffer);",
Mc,".vertexAttribPointer(",pc,",",mc,".size,",mc,".type,",mc,".normalized,",mc,".stride,",mc,".offset);")["else"](Mc,".disableVertexAttribArray(",pc,");",Mc,".vertexAttrib4f(",pc,",",mc,".x,",mc,".y,",mc,".z,",mc,".w);",mc,".buffer=null;");Cc(cd);Rb&&Cc(lc,".vertexAttribDivisorANGLE(",pc,",",mc,".divisor);")}Cc(Ob.shared.vao,".currentVAO=null;",Ob.shared.vao,".setVAO(",Ob.shared.vao,".targetVAO);");Object.keys(Td).forEach(function(kd){var nd=Td[kd],qd=Sc.def(Jc,".",kd),md=Ob.block();md("if(",qd,"){",
Mc,".enable(",nd,")}else{",Mc,".disable(",nd,")}",yc,".",kd,"=",qd,";");Cc(md);hc("if(",qd,"!==",yc,".",kd,"){",md,"}")});Object.keys(Fd).forEach(function(kd){var nd=Fd[kd],qd=uc[kd],md,pe,qe=Ob.block();qe(Mc,".",nd,"(");t(qd)?(nd=qd.length,md=Ob.global.def(Jc,".",kd),pe=Ob.global.def(yc,".",kd),qe(d(nd,function(Be){return md+"["+Be+"]"}),");",d(nd,function(Be){return pe+"["+Be+"]="+md+"["+Be+"];"}).join("")),hc("if(",d(nd,function(Be){return md+"["+Be+"]!=="+pe+"["+Be+"]"}).join("||"),"){",qe,"}")):
(md=Sc.def(Jc,".",kd),pe=Sc.def(yc,".",kd),qe(md,");",yc,".",kd,"=",md,";"),hc("if(",md,"!==",pe,"){",qe,"}"));Cc(qe)});return Ob.compile()}(),compile:function(Ob,hc,Cc,Sc,Ic){var Mc=nc();Mc.stats=Mc.link(Ic);Object.keys(hc["static"]).forEach(function(Jc){af(Mc,hc,Jc)});Fb.forEach(function(Jc){af(Mc,Ob,Jc)});Cc=id(Ob,hc,Cc,Sc,Mc);zd(Mc,Cc);Te(Mc,Cc);re(Mc,Cc);return Mc.compile()}}}function oa(ib,Yb){for(var dc=0;dc<ib.length;++dc)if(ib[dc]===Yb)return dc;return-1}var na=function(ib,Yb){for(var dc=
Object.keys(Yb),oc=0;oc<dc.length;++oc)ib[dc[oc]]=Yb[dc[oc]];return ib},la=0,ia={DynamicVariable:q,define:function(ib,Yb){return new q(ib,l(Yb+""))},isDynamic:function(ib){return"function"===typeof ib&&!ib._reglType||ib instanceof q},unbox:function(ib,Yb){return"function"===typeof ib?new q(0,ib):ib},accessor:l},sa={next:"function"===typeof requestAnimationFrame?function(ib){return requestAnimationFrame(ib)}:function(ib){return setTimeout(ib,16)},cancel:"function"===typeof cancelAnimationFrame?function(ib){return cancelAnimationFrame(ib)}:
clearTimeout},ta="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date},Aa=k();Aa.zero=k();var Ka=function(ib,Yb){var dc=1;Yb.ext_texture_filter_anisotropic&&(dc=ib.getParameter(34047));var oc=1,tc=1;Yb.webgl_draw_buffers&&(oc=ib.getParameter(34852),tc=ib.getParameter(36063));var Lc=!!Yb.oes_texture_float;if(Lc){Lc=ib.createTexture();ib.bindTexture(3553,Lc);ib.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var fb=ib.createFramebuffer();ib.bindFramebuffer(36160,
fb);ib.framebufferTexture2D(36160,36064,3553,Lc,0);ib.bindTexture(3553,null);if(36053!==ib.checkFramebufferStatus(36160))Lc=!1;else{ib.viewport(0,0,1,1);ib.clearColor(1,0,0,1);ib.clear(16384);var tb=Aa.allocType(5126,4);ib.readPixels(0,0,1,1,6408,5126,tb);ib.getError()?Lc=!1:(ib.deleteFramebuffer(fb),ib.deleteTexture(Lc),Lc=1===tb[0]);Aa.freeType(tb)}}tb=!0;"undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||
(tb=ib.createTexture(),fb=Aa.allocType(5121,36),ib.activeTexture(33984),ib.bindTexture(34067,tb),ib.texImage2D(34069,0,6408,3,3,0,6408,5121,fb),Aa.freeType(fb),ib.bindTexture(34067,null),ib.deleteTexture(tb),tb=!ib.getError());return{colorBits:[ib.getParameter(3410),ib.getParameter(3411),ib.getParameter(3412),ib.getParameter(3413)],depthBits:ib.getParameter(3414),stencilBits:ib.getParameter(3415),subpixelBits:ib.getParameter(3408),extensions:Object.keys(Yb).filter(function(Pb){return!!Yb[Pb]}),maxAnisotropic:dc,
maxDrawbuffers:oc,maxColorAttachments:tc,pointSizeDims:ib.getParameter(33901),lineWidthDims:ib.getParameter(33902),maxViewportDims:ib.getParameter(3386),maxCombinedTextureUnits:ib.getParameter(35661),maxCubeMapSize:ib.getParameter(34076),maxRenderbufferSize:ib.getParameter(34024),maxTextureUnits:ib.getParameter(34930),maxTextureSize:ib.getParameter(3379),maxAttributes:ib.getParameter(34921),maxVertexUniforms:ib.getParameter(36347),maxVertexTextureUnits:ib.getParameter(35660),maxVaryingVectors:ib.getParameter(36348),
maxFragmentUniforms:ib.getParameter(36349),glsl:ib.getParameter(35724),renderer:ib.getParameter(7937),vendor:ib.getParameter(7936),version:ib.getParameter(7938),readFloat:Lc,npotTextureCube:tb}},Sa=function(ib){return ib instanceof Uint8Array||ib instanceof Uint16Array||ib instanceof Uint32Array||ib instanceof Int8Array||ib instanceof Int16Array||ib instanceof Int32Array||ib instanceof Float32Array||ib instanceof Float64Array||ib instanceof Uint8ClampedArray},db=function(ib){return Object.keys(ib).map(function(Yb){return ib[Yb]})},
eb={shape:function(ib){for(var Yb=[];ib.length;ib=ib[0])Yb.push(ib.length);return Yb},flatten:function(ib,Yb,dc,oc){var tc=1;if(Yb.length)for(var Lc=0;Lc<Yb.length;++Lc)tc*=Yb[Lc];else tc=0;dc=oc||Aa.allocType(dc,tc);switch(Yb.length){case 0:break;case 1:oc=Yb[0];for(Yb=0;Yb<oc;++Yb)dc[Yb]=ib[Yb];break;case 2:oc=Yb[0];Yb=Yb[1];for(Lc=tc=0;Lc<oc;++Lc)for(var fb=ib[Lc],tb=0;tb<Yb;++tb)dc[tc++]=fb[tb];break;case 3:u(ib,Yb[0],Yb[1],Yb[2],dc,0);break;default:v(ib,Yb,0,dc,0)}return dc}},lb={"[object Int8Array]":5120,
"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},ab={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126},Ya={dynamic:35048,stream:35040,"static":35044},hb=eb.flatten,nb=eb.shape,va=[];va[5120]=1;va[5122]=2;va[5124]=4;va[5121]=1;va[5123]=2;va[5125]=4;
va[5126]=4;var Ba={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Ga=new Float32Array(1),Na=new Uint32Array(Ga.buffer),$a=[9984,9986,9985,9987],Va=[0,6409,6410,6407,6408],qb={};qb[6409]=qb[6406]=qb[6402]=1;qb[34041]=qb[6410]=2;qb[6407]=qb[35904]=3;qb[6408]=qb[35906]=4;var Ha=B("HTMLCanvasElement"),Ra=B("OffscreenCanvas"),La=B("CanvasRenderingContext2D"),gb=B("ImageBitmap"),ob=B("HTMLImageElement"),ub=B("HTMLVideoElement"),za=
Object.keys(lb).concat([Ha,Ra,La,gb,ob,ub]),Da=[];Da[5121]=1;Da[5126]=4;Da[36193]=2;Da[5123]=2;Da[5125]=4;var Ja=[];Ja[32854]=2;Ja[32855]=2;Ja[36194]=2;Ja[34041]=4;Ja[33776]=.5;Ja[33777]=.5;Ja[33778]=1;Ja[33779]=1;Ja[35986]=.5;Ja[35987]=1;Ja[34798]=1;Ja[35840]=.5;Ja[35841]=.25;Ja[35842]=.5;Ja[35843]=.25;Ja[36196]=.5;var Ta=[];Ta[32854]=2;Ta[32855]=2;Ta[36194]=2;Ta[33189]=2;Ta[36168]=1;Ta[34041]=4;Ta[35907]=4;Ta[34836]=16;Ta[34842]=8;Ta[34843]=6;var Xa=function(ib,Yb,dc,oc,tc){function Lc(Zb){this.id=
ec++;this.refCount=1;this.renderbuffer=Zb;this.format=32854;this.height=this.width=0;tc.profile&&(this.stats={size:0})}function fb(Zb){var Qb=Zb.renderbuffer;ib.bindRenderbuffer(36161,null);ib.deleteRenderbuffer(Qb);Zb.renderbuffer=null;Zb.refCount=0;delete cc[Zb.id];oc.renderbufferCount--}var tb={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};Yb.ext_srgb&&(tb.srgba=35907);Yb.ext_color_buffer_half_float&&(tb.rgba16f=34842,tb.rgb16f=34843);Yb.webgl_color_buffer_float&&
(tb.rgba32f=34836);var Pb=[];Object.keys(tb).forEach(function(Zb){Pb[tb[Zb]]=Zb});var ec=0,cc={};Lc.prototype.decRef=function(){0>=--this.refCount&&fb(this)};tc.profile&&(oc.getTotalRenderbufferSize=function(){var Zb=0;Object.keys(cc).forEach(function(Qb){Zb+=cc[Qb].stats.size});return Zb});return{create:function(Zb,Qb){function sb(xb,Jb){var Xb=0,nc=0,Qc=32854;"object"===typeof xb&&xb?("shape"in xb?(nc=xb.shape,Xb=nc[0]|0,nc=nc[1]|0):("radius"in xb&&(Xb=nc=xb.radius|0),"width"in xb&&(Xb=xb.width|
0),"height"in xb&&(nc=xb.height|0)),"format"in xb&&(Qc=tb[xb.format])):"number"===typeof xb?(Xb=xb|0,nc="number"===typeof Jb?Jb|0:Xb):xb||(Xb=nc=1);if(Xb!==Gb.width||nc!==Gb.height||Qc!==Gb.format)return sb.width=Gb.width=Xb,sb.height=Gb.height=nc,Gb.format=Qc,ib.bindRenderbuffer(36161,Gb.renderbuffer),ib.renderbufferStorage(36161,Qc,Xb,nc),tc.profile&&(Gb.stats.size=Ta[Gb.format]*Gb.width*Gb.height),sb.format=Pb[Gb.format],sb}var Gb=new Lc(ib.createRenderbuffer());cc[Gb.id]=Gb;oc.renderbufferCount++;
sb(Zb,Qb);sb.resize=function(xb,Jb){xb|=0;Jb=Jb|0||xb;if(xb===Gb.width&&Jb===Gb.height)return sb;sb.width=Gb.width=xb;sb.height=Gb.height=Jb;ib.bindRenderbuffer(36161,Gb.renderbuffer);ib.renderbufferStorage(36161,Gb.format,xb,Jb);tc.profile&&(Gb.stats.size=Ta[Gb.format]*Gb.width*Gb.height);return sb};sb._reglType="renderbuffer";sb._renderbuffer=Gb;tc.profile&&(sb.stats=Gb.stats);sb.destroy=function(){Gb.decRef()};return sb},clear:function(){db(cc).forEach(fb)},restore:function(){db(cc).forEach(function(Zb){Zb.renderbuffer=
ib.createRenderbuffer();ib.bindRenderbuffer(36161,Zb.renderbuffer);ib.renderbufferStorage(36161,Zb.format,Zb.width,Zb.height)});ib.bindRenderbuffer(36161,null)}}},kb=[];kb[6408]=4;kb[6407]=3;var rb=[];rb[5121]=1;rb[5126]=4;rb[36193]=2;var Mb=["x","y","z","w"],Fb="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),Lb={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,
"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Vb={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},xc={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,
invert:5386},Gc={cw:2304,ccw:2305},Hc=new ja(!1,!1,!1,function(){}),Wc=function(ib,Yb){function dc(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function oc(cc,Zb,Qb){var sb=fb.pop()||new dc;sb.startQueryIndex=cc;sb.endQueryIndex=Zb;sb.sum=0;sb.stats=Qb;tb.push(sb)}if(!Yb.ext_disjoint_timer_query)return null;var tc=[],Lc=[],fb=[],tb=[],Pb=[],ec=[];return{beginQuery:function(cc){var Zb=tc.pop()||Yb.ext_disjoint_timer_query.createQueryEXT();Yb.ext_disjoint_timer_query.beginQueryEXT(35007,
Zb);Lc.push(Zb);oc(Lc.length-1,Lc.length,cc)},endQuery:function(){Yb.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:oc,update:function(){var cc;var Zb=Lc.length;if(0!==Zb){ec.length=Math.max(ec.length,Zb+1);Pb.length=Math.max(Pb.length,Zb+1);Pb[0]=0;var Qb=ec[0]=0;for(cc=Zb=0;cc<Lc.length;++cc){var sb=Lc[cc];Yb.ext_disjoint_timer_query.getQueryObjectEXT(sb,34919)?(Qb+=Yb.ext_disjoint_timer_query.getQueryObjectEXT(sb,34918),tc.push(sb)):Lc[Zb++]=sb;Pb[cc+1]=Qb;ec[cc+1]=Zb}Lc.length=Zb;
for(cc=Zb=0;cc<tb.length;++cc){Qb=tb[cc];var Gb=Qb.startQueryIndex;sb=Qb.endQueryIndex;Qb.sum+=Pb[sb]-Pb[Gb];Gb=ec[Gb];sb=ec[sb];sb===Gb?(Qb.stats.gpuTime+=Qb.sum/1E6,fb.push(Qb)):(Qb.startQueryIndex=Gb,Qb.endQueryIndex=sb,tb[Zb++]=Qb)}tb.length=Zb}},getNumPendingQueries:function(){return Lc.length},clear:function(){tc.push.apply(tc,Lc);for(var cc=0;cc<tc.length;cc++)Yb.ext_disjoint_timer_query.deleteQueryEXT(tc[cc]);Lc.length=0;tc.length=0},restore:function(){Lc.length=0;tc.length=0}}};return function(ib){function Yb(){if(0===
td.length)Qc&&Qc.update(),te=null;else{te=sa.next(Yb);cc();for(var Dd=td.length-1;0<=Dd;--Dd){var zd=td[Dd];zd&&zd(Ac,null,0)}sb.flush();Qc&&Qc.update()}}function dc(){!te&&0<td.length&&(te=sa.next(Yb))}function oc(){te&&(sa.cancel(Yb),te=null)}function tc(Dd){Dd.preventDefault();oc();Sd.forEach(function(zd){zd()})}function Lc(Dd){sb.getError();xb.restore();Rc.restore();wc.restore();Bc.restore();id.restore();jd.restore();Dc.restore();Qc&&Qc.restore();ld.procs.refresh();dc();be.forEach(function(zd){zd()})}
function fb(Dd){function zd(Rb){var Pc={},uc={};Object.keys(Rb).forEach(function(gd){var Jd=Rb[gd];ia.isDynamic(Jd)?uc[gd]=ia.unbox(Jd,gd):Pc[gd]=Jd});return{dynamic:uc,"static":Pc}}var oe=zd(Dd.context||{}),me=zd(Dd.uniforms||{}),re=zd(Dd.attributes||{}),Te=zd(function(Rb){function Pc(gd){if(gd in uc){var Jd=uc[gd];delete uc[gd];Object.keys(Jd).forEach(function(Td){uc[gd+"."+Td]=Jd[Td]})}}var uc=na({},Rb);delete uc.uniforms;delete uc.attributes;delete uc.context;delete uc.vao;"stencil"in uc&&uc.stencil.op&&
(uc.stencil.opBack=uc.stencil.opFront=uc.stencil.op,delete uc.stencil.op);Pc("blend");Pc("depth");Pc("cull");Pc("stencil");Pc("polygonOffset");Pc("scissor");Pc("sample");"vao"in Rb&&(uc.vao=Rb.vao);return uc}(Dd));Dd={gpuTime:0,cpuTime:0,count:0};oe=ld.compile(Te,re,me,oe,Dd);var pf=oe.draw,af=oe.batch,gf=oe.scope,Ve=[];return na(function(Rb,Pc){var uc;if("function"===typeof Rb)return gf.call(this,null,Rb,0);if("function"===typeof Pc)if("number"===typeof Rb)for(uc=0;uc<Rb;++uc)gf.call(this,null,Pc,
uc);else if(Array.isArray(Rb))for(uc=0;uc<Rb.length;++uc)gf.call(this,Rb[uc],Pc,uc);else return gf.call(this,Rb,Pc,0);else if("number"===typeof Rb){if(0<Rb){Pc=af.call;for(uc=Rb|0;Ve.length<uc;)Ve.push(null);return Pc.call(af,this,Ve,Rb|0)}}else if(Array.isArray(Rb)){if(Rb.length)return af.call(this,Rb,Rb.length)}else return pf.call(this,Rb)},{stats:Dd})}function tb(Dd,zd){Dd=0;ld.procs.poll();var oe=zd.color;oe&&(sb.clearColor(+oe[0]||0,+oe[1]||0,+oe[2]||0,+oe[3]||0),Dd|=16384);"depth"in zd&&(sb.clearDepth(+zd.depth),
Dd|=256);"stencil"in zd&&(sb.clearStencil(zd.stencil|0),Dd|=1024);sb.clear(Dd)}function Pb(Dd){td.push(Dd);dc();return{cancel:function(){function zd(){var me=oa(td,zd);td[me]=td[td.length-1];--td.length;0>=td.length&&oc()}var oe=oa(td,Dd);td[oe]=zd}}}function ec(){var Dd=ke.viewport,zd=ke.scissor_box;Dd[0]=Dd[1]=zd[0]=zd[1]=0;Ac.viewportWidth=Ac.framebufferWidth=Ac.drawingBufferWidth=Dd[2]=zd[2]=sb.drawingBufferWidth;Ac.viewportHeight=Ac.framebufferHeight=Ac.drawingBufferHeight=Dd[3]=zd[3]=sb.drawingBufferHeight}
function cc(){Ac.tick+=1;Ac.time=Qb();ec();ld.procs.poll()}function Zb(){ec();ld.procs.refresh();Qc&&Qc.update()}function Qb(){return(ta()-$c)/1E3}ib=p(ib);if(!ib)return null;var sb=ib.gl,Gb=sb.getContextAttributes();sb.isContextLost();var xb=c(sb,ib);if(!xb)return null;var Jb=h(),Xb={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},nc=xb.extensions,Qc=Wc(sb,nc),$c=ta(),Uc=sb.drawingBufferWidth,ac=sb.drawingBufferHeight,
Ac={tick:0,time:0,viewportWidth:Uc,viewportHeight:ac,framebufferWidth:Uc,framebufferHeight:ac,drawingBufferWidth:Uc,drawingBufferHeight:ac,pixelRatio:ib.pixelRatio},Zc=Ka(sb,nc),wc=y(sb,Xb,ib,function(Dd){return Dc.destroyBuffer(Dd)}),Dc=Q(sb,nc,Zc,Xb,wc),ad=D(sb,nc,wc,Xb),Rc=U(sb,Jb,Xb,ib),Bc=M(sb,nc,Zc,function(){ld.procs.poll()},Ac,Xb,ib),id=Xa(sb,nc,Zc,Xb,ib),jd=N(sb,nc,Zc,Bc,id,Xb),ld=ka(sb,Jb,nc,Zc,wc,ad,Bc,jd,{},Dc,Rc,{elements:null,primitive:4,count:-1,offset:0,instances:-1},Ac,Qc,ib);Jb=
S(sb,jd,ld.procs.poll,Ac,Gb,nc,Zc);var ke=ld.next,ud=sb.canvas,td=[],Sd=[],be=[],Ld=[ib.onDestroy],te=null;ud&&(ud.addEventListener("webglcontextlost",tc,!1),ud.addEventListener("webglcontextrestored",Lc,!1));var ze=jd.setFBO=fb({framebuffer:ia.define.call(null,1,"framebuffer")});Zb();Gb=na(fb,{clear:function(Dd){if("framebuffer"in Dd)if(Dd.framebuffer&&"framebufferCube"===Dd.framebuffer_reglType)for(var zd=0;6>zd;++zd)ze(na({framebuffer:Dd.framebuffer.faces[zd]},Dd),tb);else ze(Dd,tb);else tb(null,
Dd)},prop:ia.define.bind(null,1),context:ia.define.bind(null,2),"this":ia.define.bind(null,3),draw:fb({}),buffer:function(Dd){return wc.create(Dd,34962,!1,!1)},elements:function(Dd){return ad.create(Dd,!1)},texture:Bc.create2D,cube:Bc.createCube,renderbuffer:id.create,framebuffer:jd.create,framebufferCube:jd.createCube,vao:Dc.createVAO,attributes:Gb,frame:Pb,on:function(Dd,zd){switch(Dd){case "frame":return Pb(zd);case "lost":var oe=Sd;break;case "restore":oe=be;break;case "destroy":oe=Ld}oe.push(zd);
return{cancel:function(){for(var me=0;me<oe.length;++me)if(oe[me]===zd){oe[me]=oe[oe.length-1];oe.pop();break}}}},limits:Zc,hasExtension:function(Dd){return 0<=Zc.extensions.indexOf(Dd.toLowerCase())},read:Jb,destroy:function(){td.length=0;oc();ud&&(ud.removeEventListener("webglcontextlost",tc),ud.removeEventListener("webglcontextrestored",Lc));Rc.clear();jd.clear();id.clear();Bc.clear();ad.clear();wc.clear();Dc.clear();Qc&&Qc.clear();Ld.forEach(function(Dd){Dd()})},_gl:sb,_refresh:Zb,poll:function(){cc();
Qc&&Qc.update()},now:Qb,stats:Xb});ib.onDone(null,Gb);return Gb}})},{}],541:[function(b,K,G){var q="",m;K.exports=function(l,h){if("string"!==typeof l)throw new TypeError("expected a string");if(1===h)return l;if(2===h)return l+l;var a=l.length*h;if(m!==l||"undefined"===typeof m)m=l,q="";else if(q.length>=a)return q.substr(0,a);for(;a>q.length&&1<h;)h&1&&(q+=l),h>>=1,l+=l;q+=l;return q=q.substr(0,a)}},{}],542:[function(b,K,G){(function(q){(function(){K.exports=q.performance&&q.performance.now?function(){return performance.now()}:
Date.now||function(){return+new Date}}).call(this)}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],543:[function(b,K,G){K.exports=function(q){for(var m=q.length,l=q[q.length-1],h=m,a=m-2;0<=a;--a){var g=l,e=q[a];l=g+e;g=l-g;if(e-=g)q[--h]=l,l=e}var n=0;for(a=h;a<m;++a)g=q[a],e=l,l=g+e,g=l-g,(e-=g)&&(q[n++]=e);q[n++]=l;q.length=n;return q}},{}],544:[function(b,K,G){function q(p){if(1===p.length)return p[0];if(2===p.length)return["sum(",
p[0],",",p[1],")"].join("");var c=p.length>>1;return["sum(",q(p.slice(0,c)),",",q(p.slice(c)),")"].join("")}function m(p){if(2===p.length)return["sum(prod(",p[0][0],",",p[1][1],"),prod(-",p[0][1],",",p[1][0],"))"].join("");for(var c=[],d=0;d<p.length;++d){for(var f=c,k=f.push,r=p,u=d,v=Array(r.length-1),x=1;x<r.length;++x)for(var C=v[x-1]=Array(r.length-1),z=0,y=0;z<r.length;++z)z!==u&&(C[y++]=r[x][z]);r=m(v);u=d&1?"-":"";k.call(f,["scale(",r,",",u,p[0][d],")"].join(""))}return q(c)}function l(p){for(var c=
Function,d=Array(p),f=0;f<p;++f){d[f]=Array(p);for(var k=0;k<p;++k)d[f][k]=["m[",f,"][",k,"]"].join("")}return(new c("sum","scale","prod","compress",["function robustDeterminant",p,"(m){return compress(",m(d),")};return robustDeterminant",p].join("")))(a,g,h,e)}var h=b("two-product"),a=b("robust-sum"),g=b("robust-scale"),e=b("robust-compress"),n=[function(){return[0]},function(p){return[p[0][0]]}];(function(){for(;6>n.length;)n.push(l(n.length));for(var p=[],c=["function robustDeterminant(m){switch(m.length){"],
d=0;6>d;++d)p.push("det"+d),c.push("case ",d,":return det",d,"(m);");c.push("}var det=CACHE[m.length];if(!det)det=CACHE[m.length]=gen(m.length);return det(m);}return robustDeterminant");p.push("CACHE","gen",c.join(""));p=Function.apply(void 0,p);K.exports=p.apply(void 0,n.concat([n,l]));for(d=0;d<n.length;++d)K.exports[d]=n[d]})()},{"robust-compress":543,"robust-scale":550,"robust-sum":553,"two-product":582}],545:[function(b,K,G){var q=b("two-product"),m=b("robust-sum");K.exports=function(l,h){for(var a=
q(l[0],h[0]),g=1;g<l.length;++g)a=m(a,q(l[g],h[g]));return a}},{"robust-sum":553,"two-product":582}],546:[function(b,K,G){function q(f,k){for(var r=Array(f.length-1),u=1;u<f.length;++u)for(var v=r[u-1]=Array(f.length-1),x=0,C=0;x<f.length;++x)x!==k&&(v[C++]=f[u][x]);return r}function m(f){if(1===f.length)return f[0];if(2===f.length)return["sum(",f[0],",",f[1],")"].join("");var k=f.length>>1;return["sum(",m(f.slice(0,k)),",",m(f.slice(k)),")"].join("")}function l(f,k){return"m"===f.charAt(0)?"w"===
k.charAt(0)?(f=f.split("["),["w",k.substr(1),"m",f[0].substr(1)].join("")):["prod(",f,",",k,")"].join(""):l(k,f)}function h(f){if(2===f.length)return[["diff(",l(f[0][0],f[1][1]),",",l(f[1][0],f[0][1]),")"].join("")];for(var k=[],r=0;r<f.length;++r){var u=k,v=u.push,x=m(h(q(f,r)));var C=r&1?"-":"";v.call(u,["scale(",x,",",C,f[0][r],")"].join(""))}return k}function a(f){for(var k=[],r=[],u=Array(f),v=0;v<f;++v){u[v]=Array(f);for(var x=0;x<f;++x)u[v][x]=["m",x,"[",f-v-2,"]"].join("")}for(v=0;v<f;++v)u[0][v]=
"1",u[f-1][v]="w"+v;for(v=0;v<f;++v)0===(v&1)?k.push.apply(k,h(q(u,v))):r.push.apply(r,h(q(u,v)));k=m(k);r=m(r);u="exactInSphere"+f;x=[];for(v=0;v<f;++v)x.push("m"+v);x=["function ",u,"(",x.join(),"){"];for(v=0;v<f;++v){var C=x,z=C.push,y=v;var D=v;for(var A=f,t=[],B=0;B<A-2;++B)t.push(["prod(m",D,"[",B,"],m",D,"[",B,"])"].join(""));D=m(t);z.call(C,"var w",y,"=",D,";");for(C=0;C<f;++C)C!==v&&x.push("var w",v,"m",C,"=scale(w",v,",m",C,"[0]);")}x.push("var p=",k,",n=",r,",d=diff(p,n);return d[d.length-1];}return ",
u);return(new Function("sum","diff","prod","scale",x.join("")))(n,p,e,c)}function g(f){var k=d[f.length];k||(k=d[f.length]=a(f.length));return k.apply(void 0,f)}var e=b("two-product"),n=b("robust-sum"),p=b("robust-subtract"),c=b("robust-scale"),d=[function(){return 0},function(){return 0},function(){return 0}];(function(){for(;6>=d.length;)d.push(a(d.length));for(var f=[],k=["slow"],r=0;6>=r;++r)f.push("a"+r),k.push("o"+r);var u=["function testInSphere(",f.join(),"){switch(arguments.length){case 0:case 1:return 0;"];
for(r=2;6>=r;++r)u.push("case ",r,":return o",r,"(",f.slice(0,r).join(),");");u.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return testInSphere");k.push(u.join(""));f=Function.apply(void 0,k);K.exports=f.apply(void 0,[g].concat(d));for(r=0;6>=r;++r)K.exports[r]=d[r]})()},{"robust-scale":550,"robust-subtract":552,"robust-sum":553,"two-product":582}],547:[function(b,K,G){function q(h){for(var a="robustLinearSolve"+h+"d",g=["function ",
a,"(A,b){return ["],e=0;e<h;++e){g.push("det([");for(var n=0;n<h;++n){0<n&&g.push(",");g.push("[");for(var p=0;p<h;++p)0<p&&g.push(","),p===e?g.push("+b[",n,"]"):g.push("+A[",n,"][",p,"]");g.push("]")}g.push("]),")}g.push("det(A)]}return ",a);a=new Function("det",g.join(""));return 6>h?a(m[h]):a(m)}var m=b("robust-determinant"),l=[function(){return[0]},function(h,a){return[[a[0]],[h[0][0]]]}];(function(){for(;6>l.length;)l.push(q(l.length));for(var h=[],a=["function dispatchLinearSolve(A,b){switch(A.length){"],
g=0;6>g;++g)h.push("s"+g),a.push("case ",g,":return s",g,"(A,b);");a.push("}var s=CACHE[A.length];if(!s)s=CACHE[A.length]=g(A.length);return s(A,b)}return dispatchLinearSolve");h.push("CACHE","g",a.join(""));h=Function.apply(void 0,h);K.exports=h.apply(void 0,l.concat([l,q]));for(g=0;6>g;++g)K.exports[g]=l[g]})()},{"robust-determinant":544}],548:[function(b,K,G){function q(k,r){for(var u=Array(k.length-1),v=1;v<k.length;++v)for(var x=u[v-1]=Array(k.length-1),C=0,z=0;C<k.length;++C)C!==r&&(x[z++]=
k[v][C]);return u}function m(k){if(1===k.length)return k[0];if(2===k.length)return["sum(",k[0],",",k[1],")"].join("");var r=k.length>>1;return["sum(",m(k.slice(0,r)),",",m(k.slice(r)),")"].join("")}function l(k){if(2===k.length)return[["sum(prod(",k[0][0],",",k[1][1],"),prod(-",k[0][1],",",k[1][0],"))"].join("")];for(var r=[],u=0;u<k.length;++u){var v=r,x=v.push,C=m(l(q(k,u)));var z=u&1?"-":"";x.call(v,["scale(",C,",",z,k[0][u],")"].join(""))}return r}function h(k){for(var r=[],u=[],v=Array(k),x=
0;x<k;++x){v[x]=Array(k);for(var C=0;C<k;++C)v[x][C]=["m",C,"[",k-x-1,"]"].join("")}x=[];for(C=0;C<k;++C)0===(C&1)?r.push.apply(r,l(q(v,C))):u.push.apply(u,l(q(v,C))),x.push("m"+C);r=m(r);u=m(u);k="orientation"+k+"Exact";k=["function ",k,"(",x.join(),"){var p=",r,",n=",u,",d=sub(p,n);return d[d.length-1];};return ",k].join("");return(new Function("sum","prod","scale","sub",k))(e,g,n,p)}function a(k){var r=f[k.length];r||(r=f[k.length]=h(k.length));return r.apply(void 0,k)}var g=b("two-product"),e=
b("robust-sum"),n=b("robust-scale"),p=b("robust-subtract"),c=h(3),d=h(4),f=[function(){return 0},function(){return 0},function(k,r){return r[0]-k[0]},function(k,r,u){var v=(k[1]-u[1])*(r[0]-u[0]),x=(k[0]-u[0])*(r[1]-u[1]),C=v-x;if(0<v){if(0>=x)return C;v+=x}else if(0>v){if(0<=x)return C;v=-(v+x)}else return C;v*=3.3306690738754716E-16;return C>=v||C<=-v?C:c(k,r,u)},function(k,r,u,v){var x=k[0]-v[0],C=r[0]-v[0],z=u[0]-v[0],y=k[1]-v[1],D=r[1]-v[1],A=u[1]-v[1],t=k[2]-v[2],B=r[2]-v[2],F=u[2]-v[2],I=C*
A,J=z*D;z*=y;A*=x;x*=D;y*=C;C=t*(I-J)+B*(z-A)+F*(x-y);t=7.771561172376103E-16*((Math.abs(I)+Math.abs(J))*Math.abs(t)+(Math.abs(z)+Math.abs(A))*Math.abs(B)+(Math.abs(x)+Math.abs(y))*Math.abs(F));return C>t||-C>t?C:d(k,r,u,v)}];(function(){for(;5>=f.length;)f.push(h(f.length));for(var k=[],r=["slow"],u=0;5>=u;++u)k.push("a"+u),r.push("o"+u);var v=["function getOrientation(",k.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(u=2;5>=u;++u)v.push("case ",u,":return o",u,"(",k.slice(0,u).join(),
");");v.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation");r.push(v.join(""));k=Function.apply(void 0,r);K.exports=k.apply(void 0,[a].concat(f));for(u=0;5>=u;++u)K.exports[u]=f[u]})()},{"robust-scale":550,"robust-subtract":552,"robust-sum":553,"two-product":582}],549:[function(b,K,G){var q=b("robust-sum"),m=b("robust-scale");K.exports=function(l,h){if(1===l.length)return m(h,l[0]);if(1===h.length)return m(l,h[0]);
if(0===l.length||0===h.length)return[0];var a=[0];if(l.length<h.length)for(var g=0;g<l.length;++g)a=q(a,m(h,l[g]));else for(g=0;g<h.length;++g)a=q(a,m(l,h[g]));return a}},{"robust-scale":550,"robust-sum":553}],550:[function(b,K,G){var q=b("two-product"),m=b("two-sum");K.exports=function(l,h){var a=l.length;if(1===a)return l=q(l[0],h),l[0]?l:[l[1]];var g=Array(2*a),e=[.1,.1],n=[.1,.1],p=0;q(l[0],h,e);e[0]&&(g[p++]=e[0]);for(var c=1;c<a;++c){q(l[c],h,n);m(e[1],n[0],e);e[0]&&(g[p++]=e[0]);var d=n[1],
f=e[1],k=d+f;d=f-(k-d);e[1]=k;d&&(g[p++]=d)}e[1]&&(g[p++]=e[1]);0===p&&(g[p++]=0);g.length=p;return g}},{"two-product":582,"two-sum":583}],551:[function(b,K,G){K.exports=function(m,l,h,a){var g=q(m,h,a),e=q(l,h,a);if(0<g&&0<e||0>g&&0>e)return!1;var n=q(h,m,l),p=q(a,m,l);if(0<n&&0<p||0>n&&0>p)return!1;if(0===g&&0===e&&0===n&&0===p){a:{for(g=0;2>g;++g){e=m[g];n=l[g];p=Math.max(e,n);var c=h[g],d=a[g],f=Math.min(c,d);if(Math.max(c,d)<Math.min(e,n)||p<f){m=!1;break a}}m=!0}return m}return!0};var q=b("robust-orientation")[3]},
{"robust-orientation":548}],552:[function(b,K,G){K.exports=function(q,m){var l=q.length|0,h=m.length|0;if(1===l&&1===h)return q=q[0],l=-m[0],m=q+l,h=m-q,m=(q=q-(m-h)+(l-h))?[q,m]:[m],m;var a=Array(l+h),g=0,e=0,n=0,p=Math.abs,c=q[e],d=p(c),f=-m[n],k=p(f);if(d<k){var r=c;e+=1;e<l&&(c=q[e],d=p(c))}else r=f,n+=1,n<h&&(f=-m[n],k=p(f));if(e<l&&d<k||n>=h){var u=c;e+=1;e<l&&(c=q[e],d=p(c))}else u=f,n+=1,n<h&&(f=-m[n],k=p(f));var v=u+r;r-=v-u;for(var x=v,C;e<l&&n<h;)d<k?(u=c,e+=1,e<l&&(c=q[e],d=p(c))):(u=
f,n+=1,n<h&&(f=-m[n],k=p(f))),v=u+r,u=v-u,(u=r-u)&&(a[g++]=u),u=x+v,C=u-x,r=u-C,v-=C,x-=r,r=x+v,x=u;for(;e<l;)u=c,v=u+r,u=v-u,(u=r-u)&&(a[g++]=u),u=x+v,C=u-x,r=u-C,v-=C,x-=r,r=x+v,x=u,e+=1,e<l&&(c=q[e]);for(;n<h;)u=f,v=u+r,u=v-u,(u=r-u)&&(a[g++]=u),u=x+v,C=u-x,r=u-C,v-=C,x-=r,r=x+v,x=u,n+=1,n<h&&(f=-m[n]);r&&(a[g++]=r);x&&(a[g++]=x);g||(a[g++]=0);a.length=g;return a}},{}],553:[function(b,K,G){K.exports=function(q,m){var l=q.length|0,h=m.length|0;if(1===l&&1===h)return q=q[0],l=m[0],m=q+l,h=m-q,m=
(q=q-(m-h)+(l-h))?[q,m]:[m],m;var a=Array(l+h),g=0,e=0,n=0,p=Math.abs,c=q[e],d=p(c),f=m[n],k=p(f);if(d<k){var r=c;e+=1;e<l&&(c=q[e],d=p(c))}else r=f,n+=1,n<h&&(f=m[n],k=p(f));if(e<l&&d<k||n>=h){var u=c;e+=1;e<l&&(c=q[e],d=p(c))}else u=f,n+=1,n<h&&(f=m[n],k=p(f));var v=u+r;r-=v-u;for(var x=v,C;e<l&&n<h;)d<k?(u=c,e+=1,e<l&&(c=q[e],d=p(c))):(u=f,n+=1,n<h&&(f=m[n],k=p(f))),v=u+r,u=v-u,(u=r-u)&&(a[g++]=u),u=x+v,C=u-x,r=u-C,v-=C,x-=r,r=x+v,x=u;for(;e<l;)u=c,v=u+r,u=v-u,(u=r-u)&&(a[g++]=u),u=x+v,C=u-x,r=
u-C,v-=C,x-=r,r=x+v,x=u,e+=1,e<l&&(c=q[e]);for(;n<h;)u=f,v=u+r,u=v-u,(u=r-u)&&(a[g++]=u),u=x+v,C=u-x,r=u-C,v-=C,x-=r,r=x+v,x=u,n+=1,n<h&&(f=m[n]);r&&(a[g++]=r);x&&(a[g++]=x);g||(a[g++]=0);a.length=g;return a}},{}],554:[function(b,K,G){K.exports=function(q){return 0>q?-1:0<q?1:0}},{}],555:[function(b,K,G){K.exports=function(l){return m(q(l))};var q=b("boundary-cells"),m=b("reduce-simplicial-complex")},{"boundary-cells":100,"reduce-simplicial-complex":533}],556:[function(b,K,G){K.exports=function(a,
g,e,n){e=e||0;if("undefined"===typeof n){for(var p=a.length,c=n=0;c<p;++c)n=Math.max(n,a[c].length)|0;--n}if(0===a.length||1>n)return{cells:[],vertexIds:[],vertexWeights:[]};c=+e;var d=g.length;p=m.mallocUint8(d);for(var f=0;f<d;++f)p[f]=g[f]<c|0;var k=n,r=a.length;c=m.mallocUint32(2*(k*(k+1)/2*r|0));for(f=d=0;f<r;++f){var u=a[f];k=u.length;for(var v=0;v<k;++v)for(var x=0;x<v;++x){var C=u[x],z=u[v];c[d++]=Math.min(C,z)|0;c[d++]=Math.max(C,z)|0}}l(q(c,[d/2|0,2]));for(f=k=2;f<d;f+=2)if(c[f-2]!==c[f]||
c[f-1]!==c[f+1])c[k++]=c[f],c[k++]=c[f+1];c=q(c,[k/2|0,2]);e=+e;d=c.data;f=c.shape[0];k=m.mallocDouble(f);for(u=r=0;u<f;++u)v=d[2*u],x=d[2*u+1],p[v]!==p[x]&&(C=g[v],z=g[x],d[2*r]=v,d[2*r+1]=x,k[r++]=(z-e)/(z-C));c.shape[0]=r;e=q(k,[r]);d=g.length|0;g=m.mallocInt32(2*d);f=c.shape[0];k=c.data;for(u=r=g[0]=0;u<f;++u)if(v=k[2*u],v!==r){for(g[2*r+1]=u;++r<v;)g[2*r]=u,g[2*r+1]=u;g[2*r]=u}for(g[2*r+1]=f;++r<d;)g[2*r]=g[2*r+1]=f;a=h(n)(a,c.data,g,p);d=c.shape[0]|0;f=c.data;n=Array(d);for(k=0;k<d;++k)n[k]=
[f[2*k],f[2*k+1]];d=[].slice.call(e.data,0,e.shape[0]);m.free(p);m.free(c.data);m.free(e.data);m.free(g);return{cells:a,vertexIds:n,vertexWeights:d}};var q=b("ndarray"),m=b("typedarray-pool"),l=b("ndarray-sort"),h=b("./lib/codegen")},{"./lib/codegen":557,ndarray:495,"ndarray-sort":494,"typedarray-pool":595}],557:[function(b,K,G){K.exports=function(h){var a=l[h];if(!a){a=l;var g=Array(h+1);g[0]=[[]];for(var e=1;e<=h;++e)for(var n=g[e]=m(e),p=0;p<n.length;++p);var c=["function B(C,E,i,j){","var a=Math.min(i,j)|0,b=Math.max(i,j)|0,l=C[2*a],h=C[2*a+1];",
"while(l<h){","var m=(l+h)>>1,v=E[2*m+1];","if(v===b){return m}","if(b<v){h=m}else{l=m+1}","}","return l;","};","function getContour",h,"d(F,E,C,S){","var n=F.length,R=[];","for(var i=0;i<n;++i){var c=F[i],l=c.length;"];for(e=h+1;1<e;--e){e<h+1&&c.push("else ");c.push("if(l===",e,"){");n=[];for(p=0;p<e;++p)n.push("(S[c["+p+"]]<<"+p+")");c.push("var M=",n.join("+"),";if(M===0||M===",(1<<e)-1,"){continue}switch(M){");n=g[e-1];for(p=0;p<n.length;++p){c.push("case ",p,":");var d=n[p];if(!(0>=d.length)){c.push("R.push(");
for(var f=0;f<d.length;++f){var k=d[f];0<f&&c.push(",");c.push("[");for(var r=0;r<k.length;++r){var u=k[r];0<r&&c.push(",");c.push("B(C,E,c[",u[0],"],c[",u[1],"])")}c.push("]")}c.push(");")}c.push("break;")}c.push("}}")}c.push("}return R;};return getContour",h,"d");g=(new Function("pool",c.join("")))(q);a=a[h]=g}return a};var q=b("typedarray-pool"),m=b("marching-simplex-table"),l={}},{"marching-simplex-table":474,"typedarray-pool":595}],558:[function(b,K,G){function q(c,d){var f=c.length,k=c.length-
d.length,r=Math.min;if(k)return k;switch(f){case 0:return 0;case 1:return c[0]-d[0];case 2:return(f=c[0]+c[1]-d[0]-d[1])?f:r(c[0],c[1])-r(d[0],d[1]);case 3:k=c[0]+c[1];var u=d[0]+d[1];if(f=k+c[2]-(u+d[2]))return f;var v=r(c[0],c[1]),x=r(d[0],d[1]);return(f=r(v,c[2])-r(x,d[2]))?f:r(v+c[2],k)-r(x+d[2],u);default:c=c.slice(0);c.sort();d=d.slice(0);d.sort();for(r=0;r<f;++r)if(k=c[r]-d[r])return k;return 0}}function m(c,d){return q(c[0],d[0])}function l(c,d){if(d){for(var f=c.length,k=Array(f),r=0;r<f;++r)k[r]=
[c[r],d[r]];k.sort(m);for(r=0;r<f;++r)c[r]=k[r][0],d[r]=k[r][1]}else c.sort(q);return c}function h(c){if(0===c.length)return[];for(var d=1,f=c.length,k=1;k<f;++k){var r=c[k];q(r,c[k-1])&&(k===d?d++:c[d++]=r)}c.length=d;return c}function a(c,d){for(var f=0,k=c.length-1,r=-1;f<=k;){var u=f+k>>1,v=q(c[u],d);0>=v?(0===v&&(r=u),f=u+1):0<v&&(k=u-1)}return r}function g(c,d){for(var f=Array(c.length),k=0,r=f.length;k<r;++k)f[k]=[];r=[];k=0;for(var u=d.length;k<u;++k)for(var v=d[k],x=v.length,C=1,z=1<<x;C<
z;++C){r.length=n.popCount(C);for(var y=0,D=0;D<x;++D)C&1<<D&&(r[y++]=v[D]);y=a(c,r);if(!(0>y))for(;!(f[y++].push(k),y>=c.length||0!==q(c[y],r)););}return f}function e(c,d){if(0>d)return[];for(var f=[],k=(1<<d+1)-1,r=0;r<c.length;++r)for(var u=c[r],v=k;v<1<<u.length;v=n.nextCombination(v)){for(var x=Array(d+1),C=0,z=0;z<u.length;++z)v&1<<z&&(x[C++]=u[z]);f.push(x)}return l(f)}"use restrict";var n=b("bit-twiddle"),p=b("union-find");G.dimension=function(c){for(var d=0,f=Math.max,k=0,r=c.length;k<r;++k)d=
f(d,c[k].length);return d-1};G.countVertices=function(c){for(var d=-1,f=Math.max,k=0,r=c.length;k<r;++k)for(var u=c[k],v=0,x=u.length;v<x;++v)d=f(d,u[v]);return d+1};G.cloneCells=function(c){for(var d=Array(c.length),f=0,k=c.length;f<k;++f)d[f]=c[f].slice(0);return d};G.compareCells=q;G.normalize=l;G.unique=h;G.findCell=a;G.incidence=g;G.dual=function(c,d){if(!d)return g(h(e(c,0)),c,0);for(var f=Array(d),k=0;k<d;++k)f[k]=[];k=0;for(d=c.length;k<d;++k)for(var r=c[k],u=0,v=r.length;u<v;++u)f[r[u]].push(k);
return f};G.explode=function(c){for(var d=[],f=0,k=c.length;f<k;++f)for(var r=c[f],u=r.length|0,v=1,x=1<<u;v<x;++v){for(var C=[],z=0;z<u;++z)v>>>z&1&&C.push(r[z]);d.push(C)}return l(d)};G.skeleton=e;G.boundary=function(c){for(var d=[],f=0,k=c.length;f<k;++f)for(var r=c[f],u=0,v=r.length;u<v;++u){for(var x=Array(r.length-1),C=0,z=0;C<v;++C)C!==u&&(x[z++]=r[C]);d.push(x)}return l(d)};G.connectedComponents=function(c,d){if(d){d=new p(d);for(var f=0;f<c.length;++f)for(var k=c[f],r=0;r<k.length;++r)for(var u=
r+1;u<k.length;++u)d.link(k[r],k[u]);k=[];r=d.ranks;for(f=0;f<r.length;++f)r[f]=-1;for(f=0;f<c.length;++f)u=d.find(c[f][0]),0>r[u]?(r[u]=k.length,k.push([c[f].slice(0)])):k[r[u]].push(c[f].slice(0));return k}d=h(l(e(c,0)));f=new p(d.length);for(k=0;k<c.length;++k)for(r=c[k],u=0;u<r.length;++u)for(var v=a(d,[r[u]]),x=u+1;x<r.length;++x)f.link(v,a(d,[r[x]]));r=[];u=f.ranks;for(k=0;k<u.length;++k)u[k]=-1;for(k=0;k<c.length;++k)v=f.find(a(d,[c[k][0]])),0>u[v]?(u[v]=r.length,r.push([c[k].slice(0)])):r[u[v]].push(c[k].slice(0));
return r}},{"bit-twiddle":97,"union-find":596}],559:[function(b,K,G){arguments[4][97][0].apply(G,arguments)},{dup:97}],560:[function(b,K,G){arguments[4][558][0].apply(G,arguments)},{"bit-twiddle":559,dup:558,"union-find":561}],561:[function(b,K,G){function q(m){this.roots=Array(m);this.ranks=Array(m);for(var l=0;l<m;++l)this.roots[l]=l,this.ranks[l]=0}"use restrict";K.exports=q;q.prototype.length=function(){return this.roots.length};q.prototype.makeSet=function(){var m=this.roots.length;this.roots.push(m);
this.ranks.push(0);return m};q.prototype.find=function(m){for(var l=this.roots;l[m]!==m;){var h=l[m];l[m]=l[h];m=h}return m};q.prototype.link=function(m,l){m=this.find(m);l=this.find(l);if(m!==l){var h=this.ranks,a=this.roots,g=h[m],e=h[l];g<e?a[m]=l:e<g?a[l]=m:(a[l]=m,++h[m])}}},{}],562:[function(b,K,G){K.exports=function(l,h,a){function g(J){if(z[J])return Infinity;var L=v[J],H=x[J];if(0>L||0>H)return Infinity;L=h[L];H=h[H];return Math.abs(q(h[J],L,H))/Math.sqrt(Math.pow(L[0]-H[0],2)+Math.pow(L[1]-
H[1],2))}function e(J,L){var H=t[J],P=t[L];t[J]=P;t[L]=H;B[H]=L;B[P]=J}function n(J){for(var L=C[t[J]];;){var H=L,P=2*J+1,M=2*(J+1),N=J;if(P<F){var T=C[t[P]];T<H&&(N=P,H=T)}M<F&&C[t[M]]<H&&(N=M);if(N===J)return J;e(J,N);J=N}}function p(J){for(var L=C[t[J]];0<J;){var H=J&1?J-1>>1:(J>>1)-1;if(0<=H&&L<C[t[H]])e(J,H),J=H;else return J}}function c(){if(0<F){var J=t[0];e(0,F-1);--F;n(0);return J}return-1}function d(J,L){var H=t[J];if(C[H]===L)return J;C[H]=-Infinity;p(J);c();C[H]=L;F+=1;return p(F-1)}function f(J){if(!z[J]){z[J]=
!0;var L=v[J];J=x[J];0<=v[J]&&(v[J]=L);0<=x[L]&&(x[L]=J);0<=B[L]&&d(B[L],g(L));0<=B[J]&&d(B[J],g(J))}}function k(J,L){if(0>J[L])return L;var H=L,P=L;do{var M=J[P];if(!z[P]||0>M||M===P)break;P=M;M=J[P];if(!z[P]||0>M||M===P)break;P=M;H=J[H]}while(H!==P);for(;L!==P;L=J[L])J[L]=P;return P}for(var r=h.length,u=l.length,v=Array(r),x=Array(r),C=Array(r),z=Array(r),y=0;y<r;++y)v[y]=x[y]=-1,C[y]=Infinity,z[y]=!1;for(y=0;y<u;++y){var D=l[y];if(2!==D.length)throw Error("Input must be a graph");var A=D[1];D=
D[0];x[D]=-1!==x[D]?-2:A;v[A]=-1!==v[A]?-2:D}var t=[],B=Array(r);for(y=0;y<r;++y)Infinity>(C[y]=g(y))?(B[y]=t.length,t.push(y)):B[y]=-1;var F=t.length;for(y=F>>1;0<=y;--y)n(y);for(;;){y=c();if(0>y||C[y]>a)break;f(y)}a=[];for(y=0;y<r;++y)z[y]||(B[y]=a.length,a.push(h[y].slice()));var I=[];l.forEach(function(J){var L=k(v,J[0]);J=k(x,J[1]);0<=L&&0<=J&&L!==J&&(L=B[L],J=B[J],L!==J&&I.push([L,J]))});m.unique(m.normalize(I));return{positions:a,edges:I}};var q=b("robust-orientation"),m=b("simplicial-complex")},
{"robust-orientation":548,"simplicial-complex":560}],563:[function(b,K,G){function q(l,h){if(h[0][0]<h[1][0]){var a=h[0];h=h[1]}else if(h[0][0]>h[1][0])a=h[1],h=h[0];else{a=Math.min(l[0][1],l[1][1]);l=Math.max(l[0][1],l[1][1]);var g=Math.min(h[0][1],h[1][1]);h=Math.max(h[0][1],h[1][1]);return l<g?l-g:a>h?a-h:l-h}l[0][1]<l[1][1]?(g=l[0],l=l[1]):(g=l[1],l=l[0]);return(g=m(h,a,g))?g:(g=m(h,a,l))?g:l-h}K.exports=function(l,h){if(h[0][0]<h[1][0]){var a=h[0];var g=h[1]}else if(h[0][0]>h[1][0])a=h[1],g=
h[0];else return q(h,l);if(l[0][0]<l[1][0])h=l[0],l=l[1];else if(l[0][0]>l[1][0])h=l[1],l=l[0];else return-q(l,h);var e=m(a,g,l),n=m(a,g,h);if(0>e){if(0>=n)return e}else if(0<e){if(0<=n)return e}else if(n)return n;e=m(l,h,g);n=m(l,h,a);if(0>e){if(0>=n)return e}else if(0<e){if(0<=n)return e}else if(n)return n;return g[0]-l[0]};var m=b("robust-orientation")},{"robust-orientation":548}],564:[function(b,K,G){arguments[4][243][0].apply(G,arguments)},{dup:243}],565:[function(b,K,G){function q(c,d,f){this.slabs=
c;this.coordinates=d;this.horizontal=f}function m(c,d){return c.y-d}function l(c,d){for(var f=null;c;){var k=c.key;if(k[0][0]<k[1][0]){var r=k[0];var u=k[1]}else r=k[1],u=k[0];r=n(r,u,d);if(0>r)c=c.left;else if(0<r)if(d[0]!==k[1][0])f=c,c=c.right;else{if(k=l(c.right,d))return k;c=c.left}else{if(d[0]!==k[1][0])return c;if(k=l(c.right,d))return k;c=c.left}}return f}function h(c,d,f,k){this.y=c;this.index=d;this.start=f;this.closed=k}function a(c,d,f,k){this.x=c;this.segment=d;this.create=f;this.index=
k}K.exports=function(c){for(var d=c.length,f=2*d,k=Array(f),r=0;r<d;++r){var u=c[r],v=u[0][0]<u[1][0];k[2*r]=new a(u[0][0],u,v,r);k[2*r+1]=new a(u[1][0],u,!v,r)}k.sort(function(y,D){var A=y.x-D.x;return A?A:(A=y.create-D.create)?A:Math.min(y.segment[0][1],y.segment[1][1])-Math.min(D.segment[0][1],D.segment[1][1])});c=e(p);d=[];u=[];v=[];for(r=0;r<f;){for(var x=k[r].x,C=[];r<f;){var z=k[r];if(z.x!==x)break;r+=1;z.segment[0][0]===z.x&&z.segment[1][0]===z.x?z.create&&(z.segment[0][1]<z.segment[1][1]?
(C.push(new h(z.segment[0][1],z.index,!0,!0)),C.push(new h(z.segment[1][1],z.index,!1,!1))):(C.push(new h(z.segment[1][1],z.index,!0,!1)),C.push(new h(z.segment[0][1],z.index,!1,!0)))):c=z.create?c.insert(z.segment,z.index):c.remove(z.segment)}d.push(c.root);u.push(x);v.push(C)}return new q(d,u,v)};var g=b("binary-search-bounds"),e=b("functional-red-black-tree"),n=b("robust-orientation"),p=b("./lib/order-segments");q.prototype.castUp=function(c){var d=g.le(this.coordinates,c[0]);if(0>d)return-1;var f=
l(this.slabs[d],c),k=-1;f&&(k=f.value);if(this.coordinates[d]===c[0]){var r=null;f&&(r=f.key);0<d&&(f=l(this.slabs[d-1],c))&&(r?0<p(f.key,r)&&(r=f.key,k=f.value):(k=f.value,r=f.key));f=this.horizontal[d];if(0<f.length){var u=g.ge(f,c[1],m);if(u<f.length){d=f[u];if(c[1]===d.y){if(d.closed)return d.index;for(;u<f.length-1&&f[u+1].y===c[1];)if(u+=1,d=f[u],d.closed)return d.index;if(d.y===c[1]&&!d.start){u+=1;if(u>=f.length)return k;d=f[u]}}d.start?r?(c=n(r[0],r[1],[c[0],d.y]),r[0][0]>r[1][0]&&(c=-c),
0<c&&(k=d.index)):k=d.index:d.y!==c[1]&&(k=d.index)}}}return k}},{"./lib/order-segments":563,"binary-search-bounds":564,"functional-red-black-tree":247,"robust-orientation":548}],566:[function(b,K,G){function q(a,g){a=h(l(a,g),[g[g.length-1]]);return a[a.length-1]}function m(a,g,e,n){g=-g/(n-g);0>g?g=0:1<g&&(g=1);n=1-g;for(var p=a.length,c=Array(p),d=0;d<p;++d)c[d]=g*a[d]+n*e[d];return c}var l=b("robust-dot-product"),h=b("robust-sum");K.exports=function(a,g){for(var e=[],n=[],p=q(a[a.length-1],g),
c=a[a.length-1],d,f=0;f<a.length;++f,c=d){d=a[f];var k=q(d,g);if(0>p&&0<k||0<p&&0>k)p=m(c,k,d,p),e.push(p),n.push(p.slice());0>k?n.push(d.slice()):0<k?e.push(d.slice()):(e.push(d.slice()),n.push(d.slice()));p=k}return{positive:e,negative:n}};K.exports.positive=function(a,g){for(var e=[],n=q(a[a.length-1],g),p=a[a.length-1],c,d=0;d<a.length;++d,p=c){c=a[d];var f=q(c,g);(0>n&&0<f||0<n&&0>f)&&e.push(m(p,f,c,n));0<=f&&e.push(c.slice());n=f}return e};K.exports.negative=function(a,g){for(var e=[],n=q(a[a.length-
1],g),p=a[a.length-1],c,d=0;d<a.length;++d,p=c){c=a[d];var f=q(c,g);(0>n&&0<f||0<n&&0>f)&&e.push(m(p,f,c,n));0>=f&&e.push(c.slice());n=f}return e}},{"robust-dot-product":545,"robust-sum":553}],567:[function(b,K,G){!function(){function q(a){var g=a;if(h[g])g=h[g];else{for(var e=g,n,p=[],c=0;e;){if(null!==(n=l.text.exec(e)))p.push(n[0]);else if(null!==(n=l.modulo.exec(e)))p.push("%");else if(null!==(n=l.placeholder.exec(e))){if(n[2]){c|=1;var d=[],f=n[2],k;if(null!==(k=l.key.exec(f)))for(d.push(k[1]);""!==
(f=f.substring(k[0].length));)if(null!==(k=l.key_access.exec(f)))d.push(k[1]);else if(null!==(k=l.index_access.exec(f)))d.push(k[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");n[2]=d}else c|=2;if(3===c)throw Error("[sprintf] mixing positional and named placeholders is not (yet) supported");p.push({placeholder:n[0],param_no:n[1],keys:n[2],sign:n[3],pad_char:n[4],align:n[5],width:n[6],precision:n[7],
type:n[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");e=e.substring(n[0].length)}g=h[g]=p}e=arguments;n=1;p=g.length;d="";var r,u;for(f=0;f<p;f++)if("string"===typeof g[f])d+=g[f];else if("object"===typeof g[f]){k=g[f];if(k.keys)for(c=e[n],r=0;r<k.keys.length;r++){if(void 0==c)throw Error(q('[sprintf] Cannot access property "%s" of undefined value "%s"',k.keys[r],k.keys[r-1]));c=c[k.keys[r]]}else c=k.param_no?e[k.param_no]:e[n++];l.not_type.test(k.type)&&l.not_primitive.test(k.type)&&
c instanceof Function&&(c=c());if(l.numeric_arg.test(k.type)&&"number"!==typeof c&&isNaN(c))throw new TypeError(q("[sprintf] expecting number but found %T",c));l.number.test(k.type)&&(u=0<=c);switch(k.type){case "b":c=parseInt(c,10).toString(2);break;case "c":c=String.fromCharCode(parseInt(c,10));break;case "d":case "i":c=parseInt(c,10);break;case "j":c=JSON.stringify(c,null,k.width?parseInt(k.width):0);break;case "e":c=k.precision?parseFloat(c).toExponential(k.precision):parseFloat(c).toExponential();
break;case "f":c=k.precision?parseFloat(c).toFixed(k.precision):parseFloat(c);break;case "g":c=k.precision?String(Number(c.toPrecision(k.precision))):parseFloat(c);break;case "o":c=(parseInt(c,10)>>>0).toString(8);break;case "s":c=String(c);c=k.precision?c.substring(0,k.precision):c;break;case "t":c=String(!!c);c=k.precision?c.substring(0,k.precision):c;break;case "T":c=Object.prototype.toString.call(c).slice(8,-1).toLowerCase();c=k.precision?c.substring(0,k.precision):c;break;case "u":c=parseInt(c,
10)>>>0;break;case "v":c=c.valueOf();c=k.precision?c.substring(0,k.precision):c;break;case "x":c=(parseInt(c,10)>>>0).toString(16);break;case "X":c=(parseInt(c,10)>>>0).toString(16).toUpperCase()}if(l.json.test(k.type))d+=c;else{if(!l.number.test(k.type)||u&&!k.sign)var v="";else v=u?"+":"-",c=c.toString().replace(l.sign,"");r=k.pad_char?"0"===k.pad_char?"0":k.pad_char.charAt(1):" ";var x=k.width-(v+c).length;x=k.width?0<x?r.repeat(x):"":"";d+=k.align?v+c+x:"0"===r?v+x+c:x+v+c}}return d}function m(a,
g){return q.apply(null,[a].concat(g||[]))}var l={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/},h=Object.create(null);"undefined"!==typeof G&&(G.sprintf=q,G.vsprintf=m);
"undefined"!==typeof window&&(window.sprintf=q,window.vsprintf=m)}()},{}],568:[function(b,K,G){var q=b("parenthesis");K.exports=function(m,l,h){if(null==m)throw Error("First argument should be a string");if(null==l)throw Error("Separator should be a string or a RegExp");if(!h)h={};else if("string"===typeof h||Array.isArray(h))h={ignore:h};null==h.escape&&(h.escape=!0);null==h.ignore?h.ignore="[] () {} <> \"\" '' `` \u201c\u201d \u00ab\u00bb".split(" "):("string"===typeof h.ignore&&(h.ignore=[h.ignore]),
h.ignore=h.ignore.map(function(p){1===p.length&&(p+=p);return p}));m=q.parse(m,{flat:!0,brackets:h.ignore});var a=m[0].split(l);if(h.escape){h=[];for(var g=0;g<a.length;g++){var e=a[g],n=a[g+1];"\\"===e[e.length-1]&&"\\"!==e[e.length-2]?(h.push(e+l+n),g++):h.push(e)}a=h}for(g=0;g<a.length;g++)m[0]=a[g],a[g]=q.stringify(m,{flat:!0});return a}},{parenthesis:503}],569:[function(b,K,G){K.exports=function(q){function m(v){var x=[v],C=[v];h[v]=a[v]=d;g[v]=!0;for(d+=1;0<C.length;){v=C[C.length-1];var z=
q[v];if(e[v]<z.length){for(var y=e[v];y<z.length;++y){var D=z[y];if(0>h[D]){h[D]=a[D]=d;g[D]=!0;d+=1;x.push(D);C.push(D);break}else g[D]&&(a[v]=Math.min(a[v],a[D])|0);0<=n[D]&&p[v].push(n[D])}e[v]=y}else{if(a[v]===h[v]){var A=[];z=[];D=0;for(y=x.length-1;0<=y;--y){var t=x[y];g[t]=!1;A.push(t);z.push(p[t]);D+=p[t].length;n[t]=f.length;if(t===v){x.length=y;break}}f.push(A);v=Array(D);for(y=0;y<z.length;y++)for(A=0;A<z[y].length;A++)v[--D]=z[y][A];k.push(v)}C.pop()}}}for(var l=q.length,h=Array(l),a=
Array(l),g=Array(l),e=Array(l),n=Array(l),p=Array(l),c=0;c<l;++c)h[c]=-1,a[c]=0,g[c]=!1,e[c]=0,n[c]=-1,p[c]=[];var d=0,f=[],k=[];for(c=0;c<l;++c)0>h[c]&&m(c);for(c=0;c<k.length;c++){var r=k[c];if(0!==r.length){r.sort(function(v,x){return v-x});l=[r[0]];for(var u=1;u<r.length;u++)r[u]!==r[u-1]&&l.push(r[u]);k[c]=l}}return{components:f,adjacencyList:k}}},{}],570:[function(b,K,G){function q(g,e){var n=g.length,p=["'use strict';"],c="surfaceNets"+g.join("_")+"d"+e;p.push("var contour=genContour({","order:[",
g.join(),"],","scalarArguments: 3,","phase:function phaseFunc(p,a,b,c) { return (p > c)|0 },");"generic"===e&&p.push("getters:[0],");var d=[];e=[];for(g=0;g<n;++g)d.push("d"+g),e.push("d"+g);for(g=0;g<1<<n;++g)d.push("v"+g),e.push("v"+g);for(g=0;g<1<<n;++g)d.push("p"+g),e.push("p"+g);d.push("a","b","c");e.push("a","c");p.push("vertex:function vertexFunc(",d.join(),"){");d=[];for(g=0;g<1<<n;++g)d.push("(p"+g+"<<"+g+")");p.push("var m=(",d.join("+"),")|0;if(m===0||m===",(1<<(1<<n))-1,"){return}");d=
[];var f=[];128>=1<<(1<<n)?(p.push("switch(m){"),f=p):p.push("switch(m>>>7){");for(g=0;g<1<<(1<<n);++g){128<1<<(1<<n)&&0===g%128&&(0<d.length&&f.push("}}"),f="vExtra"+d.length,p.push("case ",g>>>7,":",f,"(m&0x7f,",e.join(),");break;"),f=["function ",f,"(m,",e.join(),"){switch(m){"],d.push(f));f.push("case ",g&127,":");for(var k=Array(n),r=Array(n),u=Array(n),v=Array(n),x=0,C=0;C<n;++C)k[C]=[],r[C]=[],u[C]=0,v[C]=0;for(C=0;C<1<<n;++C)for(var z=0;z<n;++z){var y=C^1<<z;if(!(y>C)&&!(g&1<<y)!==!(g&1<<
C)){var D=1;g&1<<y?r[z].push("v"+y+"-v"+C):(r[z].push("v"+C+"-v"+y),D=-D);0>D?(k[z].push("-v"+C+"-v"+y),u[z]+=2):(k[z].push("v"+C+"+v"+y),u[z]-=2);x+=1;for(D=0;D<n;++D)D!==z&&(y&1<<D?v[D]+=1:--v[D])}}C=[];for(z=0;z<n;++z)0===k[z].length?C.push("d"+z+"-0.5"):(y="",0>u[z]?y=u[z]+"*c":0<u[z]&&(y="+"+u[z]+"*c"),C.push("d"+z+"-"+(.5+v[z]/x*.5)+"-"+k[z].length/x*.5+"*("+k[z].join("+")+y+")/("+r[z].join("+")+")"));f.push("a.push([",C.join(),"]);","break;")}p.push("}},");0<d.length&&f.push("}}");e=[];for(g=
0;g<1<<n-1;++g)e.push("v"+g);e.push("c0","c1","p0","p1","a","b","c");p.push("cell:function cellFunc(",e.join(),"){");n=l(n-1);p.push("if(p0){b.push(",n.map(function(A){return"["+A.map(function(t){return"v"+t})+"]"}).join(),")}else{b.push(",n.map(function(A){A=A.slice();A.reverse();return"["+A.map(function(t){return"v"+t})+"]"}).join(),")}}});function ",c,"(array,level){var verts=[],cells=[];contour(array,verts,cells,level);return {positions:verts,cells:cells};} return ",c,";");for(g=0;g<d.length;++g)p.push(d[g].join(""));
return(new Function("genContour",p.join("")))(m)}K.exports=function(g,e){if(0>=g.dimension)return{positions:[],cells:[]};if(1===g.dimension){g=h(g,e);e=g.length;for(var n=Array(e),p=Array(e),c=0;c<e;++c)n[c]=[g[c]],p[c]=[c];return{positions:n,cells:p}}n=g.order.join()+"-"+g.dtype;p=a[n];e=+e||0;p||(p=a[n]=q(g.order,g.dtype));return p(g,e)};var m=b("ndarray-extract-contour"),l=b("triangulate-hypercube"),h=b("zero-crossings"),a={}},{"ndarray-extract-contour":487,"triangulate-hypercube":580,"zero-crossings":624}],
571:[function(b,K,G){Object.defineProperty(G,"__esModule",{value:!0});var q=function(){return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){var p=[],c=!0,d=!1,f=void 0;try{for(var k=e[Symbol.iterator](),r;!(c=(r=k.next()).done)&&(p.push(r.value),!n||p.length!==n);c=!0);}catch(u){d=!0,f=u}finally{try{if(!c&&k["return"])k["return"]()}finally{if(d)throw f;}}return p}throw new TypeError("Invalid attempt to destructure non-iterable instance");}}(),m=2*Math.PI,l=function(e,
n,p,c,d,f,k){var r=e.x;e=e.y;r*=n;e*=p;return{x:c*r-d*e+f,y:d*r+c*e+k}},h=function(e,n){var p=1.5707963267948966===n?.551915024494:-1.5707963267948966===n?-.551915024494:4/3*Math.tan(n/4),c=Math.cos(e),d=Math.sin(e),f=Math.cos(e+n);e=Math.sin(e+n);return[{x:c-d*p,y:d+c*p},{x:f+e*p,y:e-f*p},{x:f,y:e}]},a=function(e,n,p,c){var d=e*p+n*c;1<d&&(d=1);-1>d&&(d=-1);return(0>e*c-n*p?-1:1)*Math.acos(d)},g=function(e,n,p,c,d,f,k,r,u,v,x,C){var z=Math.pow(d,2),y=Math.pow(f,2),D=Math.pow(x,2),A=Math.pow(C,2),
t=z*y-z*A-y*D;0>t&&(t=0);t=Math.sqrt(t/(z*A+y*D))*(k===r?-1:1);k=t*d/f*C;t=t*-f/d*x;e=v*k-u*t+(e+p)/2;n=u*k+v*t+(n+c)/2;c=(x-k)/d;u=(C-t)/f;d=(-x-k)/d;C=(-C-t)/f;f=a(1,0,c,u);C=a(c,u,d,C);0===r&&0<C&&(C-=m);1===r&&0>C&&(C+=m);return[e,n,f,C]};G.default=function(e){var n=e.px,p=e.py,c=e.cx,d=e.cy,f=e.rx,k=e.ry,r=e.xAxisRotation,u=void 0===r?0:r;r=e.largeArcFlag;var v=e.sweepFlag;e=[];if(0===f||0===k)return[];var x=Math.sin(u*m/360),C=Math.cos(u*m/360);u=C*(n-c)/2+x*(p-d)/2;var z=-x*(n-c)/2+C*(p-d)/
2;if(0===u&&0===z)return[];f=Math.abs(f);k=Math.abs(k);var y=Math.pow(u,2)/Math.pow(f,2)+Math.pow(z,2)/Math.pow(k,2);1<y&&(f*=Math.sqrt(y),k*=Math.sqrt(y));n=g(n,p,c,d,f,k,void 0===r?0:r,void 0===v?0:v,x,C,u,z);p=q(n,4);var D=p[0],A=p[1];n=p[2];p=p[3];c=Math.abs(p)/(m/4);1E-7>Math.abs(1-c)&&(c=1);c=Math.max(Math.ceil(c),1);p/=c;for(d=0;d<c;d++)e.push(h(n,p)),n+=p;return e.map(function(t){var B=l(t[0],f,k,C,x,D,A),F=B.x;B=B.y;var I=l(t[1],f,k,C,x,D,A),J=I.x;I=I.y;t=l(t[2],f,k,C,x,D,A);return{x1:F,
y1:B,x2:J,y2:I,x:t.x,y:t.y}})};K.exports=G.default},{}],572:[function(b,K,G){var q=b("parse-svg-path"),m=b("abs-svg-path"),l=b("normalize-svg-path"),h=b("is-svg-path"),a=b("assert");K.exports=function(g){Array.isArray(g)&&1===g.length&&"string"===typeof g[0]&&(g=g[0]);"string"===typeof g&&(a(h(g),"String is not an SVG path."),g=q(g));a(Array.isArray(g),"Argument should be a string or an array of path segments.");g=m(g);g=l(g);if(!g.length)return[0,0,0,0];for(var e=[Infinity,Infinity,-Infinity,-Infinity],
n=0,p=g.length;n<p;n++)for(var c=g[n].slice(1),d=0;d<c.length;d+=2)c[d+0]<e[0]&&(e[0]=c[d+0]),c[d+1]<e[1]&&(e[1]=c[d+1]),c[d+0]>e[2]&&(e[2]=c[d+0]),c[d+1]>e[3]&&(e[3]=c[d+1]);return e}},{"abs-svg-path":65,assert:73,"is-svg-path":471,"normalize-svg-path":573,"parse-svg-path":505}],573:[function(b,K,G){function q(h,a,g,e){return["C",h,a,g,e,g,e]}function m(h,a,g,e,n,p){return["C",h/3+2/3*g,a/3+2/3*e,n/3+2/3*g,p/3+2/3*e,n,p]}K.exports=function(h){for(var a,g=[],e=0,n=0,p=0,c=0,d=null,f=null,k=0,r=0,
u=0,v=h.length;u<v;u++){var x=h[u],C=x[0];switch(C){case "M":p=x[1];c=x[2];break;case "A":var z=l({px:k,py:r,cx:x[6],cy:x[7],rx:x[1],ry:x[2],xAxisRotation:x[3],largeArcFlag:x[4],sweepFlag:x[5]});if(!z.length)continue;for(a=0;a<z.length;a++)x=z[a],x=["C",x.x1,x.y1,x.x2,x.y2,x.x,x.y],a<z.length-1&&g.push(x);break;case "S":z=k;if("C"==a||"S"==a)z+=z-e,r+=r-n;x=["C",z,r,x[1],x[2],x[3],x[4]];break;case "T":"Q"==a||"T"==a?(d=2*k-d,f=2*r-f):(d=k,f=r);x=m(k,r,d,f,x[1],x[2]);break;case "Q":d=x[1];f=x[2];x=
m(k,r,x[1],x[2],x[3],x[4]);break;case "L":x=q(k,r,x[1],x[2]);break;case "H":x=q(k,r,x[1],r);break;case "V":x=q(k,r,k,x[1]);break;case "Z":x=q(k,r,p,c)}a=C;k=x[x.length-2];r=x[x.length-1];4<x.length?(e=x[x.length-4],n=x[x.length-3]):(e=k,n=r);g.push(x)}return g};var l=b("svg-arc-to-cubic-bezier")},{"svg-arc-to-cubic-bezier":571}],574:[function(b,K,G){function q(){if(null!=p)return p;var c=document.createElement("canvas").getContext("2d");c.canvas.width=c.canvas.height=1;if(!window.Path2D)return p=
!1;var d=new Path2D("M0,0h1v1h-1v-1Z");c.fillStyle="black";c.fill(d);return p=(c=c.getImageData(0,0,1,1))&&c.data&&255===c.data[3]}var m=b("svg-path-bounds"),l=b("parse-svg-path"),h=b("draw-svg-path"),a=b("is-svg-path"),g=b("bitmap-sdf"),e=document.createElement("canvas"),n=e.getContext("2d");K.exports=function(c,d){if(!a(c))throw Error("Argument should be valid svg path string");d||(d={});if(d.shape){var f=d.shape[0];var k=d.shape[1]}else f=e.width=d.w||d.width||200,k=e.height=d.h||d.height||200;
var r=Math.min(f,k),u=d.stroke||0,v=d.viewbox||d.viewBox||m(c);v=[f/(v[2]-v[0]),k/(v[3]-v[1])];v=Math.min(v[0]||0,v[1]||0)/2;n.fillStyle="black";n.fillRect(0,0,f,k);n.fillStyle="white";u&&("number"!=typeof u&&(u=1),n.strokeStyle=0<u?"white":"black",n.lineWidth=Math.abs(u));n.translate(.5*f,.5*k);n.scale(v,v);q()?(c=new Path2D(c),n.fill(c),u&&n.stroke(c)):(c=l(c),h(n,c),n.fill(),u&&n.stroke());n.setTransform(1,0,0,1,0,0);return g(n,{cutoff:null!=d.cutoff?d.cutoff:.5,radius:null!=d.radius?d.radius:
.5*r})};var p},{"bitmap-sdf":98,"draw-svg-path":174,"is-svg-path":471,"parse-svg-path":505,"svg-path-bounds":572}],575:[function(b,K,G){(function(q){(function(){function m(g,e,n){n=n||{};var p=a[g];p||(p=a[g]={" ":{data:new Float32Array(0),shape:.2}});var c=p[e];if(!c)if(1>=e.length||!/\d/.test(e)){c=l(e,{triangles:!0,font:g,textAlign:n.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}});n=c.cells;c=c.positions;for(var d=new Float32Array(6*
n.length),f=g=0,k=0;k<n.length;++k)for(var r=n[k],u=0;3>u;++u){var v=c[r[u]];d[g++]=v[0];d[g++]=v[1]+1.4;f=Math.max(v[0],f)}c=p[e]={data:d,shape:f}}else{f=e.split(/(\d|\s)/);n=Array(f.length);for(d=c=k=0;d<f.length;++d)n[d]=m(g,f[d]),k+=n[d].data.length,c+=n[d].shape,0<d&&(c+=.02);g=new Float32Array(k);f=0;k=-.5*c;for(d=0;d<n.length;++d){r=n[d].data;for(u=0;u<r.length;u+=2)g[f++]=r[u]+k,g[f++]=r[u+1];k+=n[d].shape+.02}c=p[e]={data:g,shape:c}}return c}K.exports=m;var l=b("vectorize-text"),h=window||
q.global||{},a=h.__TEXT_CACHE||{};h.__TEXT_CACHE={}}).call(this)}).call(this,b("_process"))},{_process:526,"vectorize-text":600}],576:[function(b,K,G){(function(q){function m(S,X){var Z,aa;S=S?S:"";X=X||{};if(S instanceof m)return S;if(!(this instanceof m))return new m(S,X);var fa=S;var ha={r:0,g:0,b:0};var ja=1;var ba=Z=!1;if("string"==typeof fa)a:{fa=fa.replace(I,"").replace(J,"").toLowerCase();var ma=!1;if(T[fa])fa=T[fa],ma=!0;else if("transparent"==fa){fa={r:0,g:0,b:0,a:0,format:"name"};break a}fa=
(aa=U.rgb.exec(fa))?{r:aa[1],g:aa[2],b:aa[3]}:(aa=U.rgba.exec(fa))?{r:aa[1],g:aa[2],b:aa[3],a:aa[4]}:(aa=U.hsl.exec(fa))?{h:aa[1],s:aa[2],l:aa[3]}:(aa=U.hsla.exec(fa))?{h:aa[1],s:aa[2],l:aa[3],a:aa[4]}:(aa=U.hsv.exec(fa))?{h:aa[1],s:aa[2],v:aa[3]}:(aa=U.hsva.exec(fa))?{h:aa[1],s:aa[2],v:aa[3],a:aa[4]}:(aa=U.hex8.exec(fa))?{r:parseInt(aa[1],16),g:parseInt(aa[2],16),b:parseInt(aa[3],16),a:parseInt(aa[4],16)/255,format:ma?"name":"hex8"}:(aa=U.hex6.exec(fa))?{r:parseInt(aa[1],16),g:parseInt(aa[2],16),
b:parseInt(aa[3],16),format:ma?"name":"hex"}:(aa=U.hex4.exec(fa))?{r:parseInt(aa[1]+""+aa[1],16),g:parseInt(aa[2]+""+aa[2],16),b:parseInt(aa[3]+""+aa[3],16),a:parseInt(aa[4]+""+aa[4],16)/255,format:ma?"name":"hex8"}:(aa=U.hex3.exec(fa))?{r:parseInt(aa[1]+""+aa[1],16),g:parseInt(aa[2]+""+aa[2],16),b:parseInt(aa[3]+""+aa[3],16),format:ma?"name":"hex"}:!1}if("object"==typeof fa){if(F(fa.r)&&F(fa.g)&&F(fa.b))ha=fa.g,Z=fa.b,ha={r:255*A(fa.r,255),g:255*A(ha,255),b:255*A(Z,255)},Z=!0,ba="%"===String(fa.r).substr(-1)?
"prgb":"rgb";else if(F(fa.h)&&F(fa.s)&&F(fa.v)){ha=B(fa.s);ba=B(fa.v);aa=fa.h;Z=ha;ha=ba;aa=6*A(aa,360);Z=A(Z,100);ha=A(ha,100);ba=q.floor(aa);var qa=aa-ba;aa=ha*(1-Z);ma=ha*(1-qa*Z);Z=ha*(1-(1-qa)*Z);ba%=6;ha={r:255*[ha,ma,aa,aa,Z,ha][ba],g:255*[Z,ha,ha,ma,aa,aa][ba],b:255*[aa,aa,Z,ha,ha,ma][ba]};Z=!0;ba="hsv"}else F(fa.h)&&F(fa.s)&&F(fa.l)&&(ha=B(fa.s),Z=B(fa.l),ha=h(fa.h,ha,Z),Z=!0,ba="hsl");fa.hasOwnProperty("a")&&(ja=fa.a)}ja=D(ja);fa=fa.format||ba;ba=P(255,M(ha.r,0));aa=P(255,M(ha.g,0));ha=
P(255,M(ha.b,0));this._originalInput=S;this._r=ba;this._g=aa;this._b=ha;this._a=ja;this._roundA=H(100*this._a)/100;this._format=X.format||fa;this._gradientType=X.gradientType;1>this._r&&(this._r=H(this._r));1>this._g&&(this._g=H(this._g));1>this._b&&(this._b=H(this._b));this._ok=Z;this._tc_id=L++}function l(S,X,Z){S=A(S,255);X=A(X,255);Z=A(Z,255);var aa=M(S,X,Z),fa=P(S,X,Z),ha=(aa+fa)/2;if(aa==fa)var ja=fa=0;else{var ba=aa-fa;fa=.5<ha?ba/(2-aa-fa):ba/(aa+fa);switch(aa){case S:ja=(X-Z)/ba+(X<Z?6:0);
break;case X:ja=(Z-S)/ba+2;break;case Z:ja=(S-X)/ba+4}ja/=6}return{h:ja,s:fa,l:ha}}function h(S,X,Z){function aa(ja,ba,ma){0>ma&&(ma+=1);1<ma&&--ma;return ma<1/6?ja+6*(ba-ja)*ma:.5>ma?ba:ma<2/3?ja+(ba-ja)*(2/3-ma)*6:ja}S=A(S,360);X=A(X,100);Z=A(Z,100);if(0===X)Z=X=S=Z;else{var fa=.5>Z?Z*(1+X):Z+X-Z*X,ha=2*Z-fa;Z=aa(ha,fa,S+1/3);X=aa(ha,fa,S);S=aa(ha,fa,S-1/3)}return{r:255*Z,g:255*X,b:255*S}}function a(S,X,Z){S=A(S,255);X=A(X,255);Z=A(Z,255);var aa=M(S,X,Z),fa=P(S,X,Z),ha=aa-fa;if(aa==fa)var ja=0;
else{switch(aa){case S:ja=(X-Z)/ha+(X<Z?6:0);break;case X:ja=(Z-S)/ha+2;break;case Z:ja=(S-X)/ha+4}ja/=6}return{h:ja,s:0===aa?0:ha/aa,v:aa}}function g(S,X,Z,aa){S=[t(H(S).toString(16)),t(H(X).toString(16)),t(H(Z).toString(16))];return aa&&S[0].charAt(0)==S[0].charAt(1)&&S[1].charAt(0)==S[1].charAt(1)&&S[2].charAt(0)==S[2].charAt(1)?S[0].charAt(0)+S[1].charAt(0)+S[2].charAt(0):S.join("")}function e(S,X,Z,aa){return[t(q.round(255*parseFloat(aa)).toString(16)),t(H(S).toString(16)),t(H(X).toString(16)),
t(H(Z).toString(16))].join("")}function n(S,X){X=0===X?0:X||10;S=m(S).toHsl();S.s-=X/100;S.s=P(1,M(0,S.s));return m(S)}function p(S,X){X=0===X?0:X||10;S=m(S).toHsl();S.s+=X/100;S.s=P(1,M(0,S.s));return m(S)}function c(S){return m(S).desaturate(100)}function d(S,X){X=0===X?0:X||10;S=m(S).toHsl();S.l+=X/100;S.l=P(1,M(0,S.l));return m(S)}function f(S,X){X=0===X?0:X||10;S=m(S).toRgb();S.r=M(0,P(255,S.r-H(255*-(X/100))));S.g=M(0,P(255,S.g-H(255*-(X/100))));S.b=M(0,P(255,S.b-H(255*-(X/100))));return m(S)}
function k(S,X){X=0===X?0:X||10;S=m(S).toHsl();S.l-=X/100;S.l=P(1,M(0,S.l));return m(S)}function r(S,X){S=m(S).toHsl();X=(S.h+X)%360;S.h=0>X?360+X:X;return m(S)}function u(S){S=m(S).toHsl();S.h=(S.h+180)%360;return m(S)}function v(S){var X=m(S).toHsl(),Z=X.h;return[m(S),m({h:(Z+120)%360,s:X.s,l:X.l}),m({h:(Z+240)%360,s:X.s,l:X.l})]}function x(S){var X=m(S).toHsl(),Z=X.h;return[m(S),m({h:(Z+90)%360,s:X.s,l:X.l}),m({h:(Z+180)%360,s:X.s,l:X.l}),m({h:(Z+270)%360,s:X.s,l:X.l})]}function C(S){var X=m(S).toHsl(),
Z=X.h;return[m(S),m({h:(Z+72)%360,s:X.s,l:X.l}),m({h:(Z+216)%360,s:X.s,l:X.l})]}function z(S,X,Z){X=X||6;Z=Z||30;var aa=m(S).toHsl();Z=360/Z;S=[m(S)];for(aa.h=(aa.h-(Z*X>>1)+720)%360;--X;)aa.h=(aa.h+Z)%360,S.push(m(aa));return S}function y(S,X){X=X||6;var Z=m(S).toHsv();S=Z.h;var aa=Z.s;Z=Z.v;for(var fa=[],ha=1/X;X--;)fa.push(m({h:S,s:aa,v:Z})),Z=(Z+ha)%1;return fa}function D(S){S=parseFloat(S);if(isNaN(S)||0>S||1<S)S=1;return S}function A(S,X){var Z=S;"string"==typeof Z&&-1!=Z.indexOf(".")&&1===
parseFloat(Z)&&(S="100%");Z="string"===typeof S&&-1!=S.indexOf("%");S=P(X,M(0,parseFloat(S)));Z&&(S=parseInt(S*X,10)/100);return 1E-6>q.abs(S-X)?1:S%X/parseFloat(X)}function t(S){return 1==S.length?"0"+S:""+S}function B(S){1>=S&&(S=100*S+"%");return S}function F(S){return!!U.CSS_UNIT.exec(S)}var I=/^\s+/,J=/\s+$/,L=0,H=q.round,P=q.min,M=q.max,N=q.random;m.prototype={isDark:function(){return 128>this.getBrightness()},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},
getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var S=this.toRgb();return(299*S.r+587*S.g+114*S.b)/1E3},getLuminance:function(){var S=this.toRgb();var X=S.r/255;var Z=S.g/255;S=S.b/255;X=.03928>=X?X/12.92:q.pow((X+.055)/1.055,2.4);Z=.03928>=Z?Z/12.92:q.pow((Z+.055)/1.055,2.4);S=.03928>=S?S/12.92:q.pow((S+.055)/1.055,2.4);return.2126*X+.7152*Z+.0722*S},setAlpha:function(S){this._a=D(S);this._roundA=H(100*this._a)/100;return this},toHsv:function(){var S=
a(this._r,this._g,this._b);return{h:360*S.h,s:S.s,v:S.v,a:this._a}},toHsvString:function(){var S=a(this._r,this._g,this._b),X=H(360*S.h),Z=H(100*S.s);S=H(100*S.v);return 1==this._a?"hsv("+X+", "+Z+"%, "+S+"%)":"hsva("+X+", "+Z+"%, "+S+"%, "+this._roundA+")"},toHsl:function(){var S=l(this._r,this._g,this._b);return{h:360*S.h,s:S.s,l:S.l,a:this._a}},toHslString:function(){var S=l(this._r,this._g,this._b),X=H(360*S.h),Z=H(100*S.s);S=H(100*S.l);return 1==this._a?"hsl("+X+", "+Z+"%, "+S+"%)":"hsla("+X+
", "+Z+"%, "+S+"%, "+this._roundA+")"},toHex:function(S){return g(this._r,this._g,this._b,S)},toHexString:function(S){return"#"+this.toHex(S)},toHex8:function(S){var X=this._g,Z=this._b,aa=this._a;X=[t(H(this._r).toString(16)),t(H(X).toString(16)),t(H(Z).toString(16)),t(q.round(255*parseFloat(aa)).toString(16))];S=S&&X[0].charAt(0)==X[0].charAt(1)&&X[1].charAt(0)==X[1].charAt(1)&&X[2].charAt(0)==X[2].charAt(1)&&X[3].charAt(0)==X[3].charAt(1)?X[0].charAt(0)+X[1].charAt(0)+X[2].charAt(0)+X[3].charAt(0):
X.join("");return S},toHex8String:function(S){return"#"+this.toHex8(S)},toRgb:function(){return{r:H(this._r),g:H(this._g),b:H(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+H(this._r)+", "+H(this._g)+", "+H(this._b)+")":"rgba("+H(this._r)+", "+H(this._g)+", "+H(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:H(100*A(this._r,255))+"%",g:H(100*A(this._g,255))+"%",b:H(100*A(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+
H(100*A(this._r,255))+"%, "+H(100*A(this._g,255))+"%, "+H(100*A(this._b,255))+"%)":"rgba("+H(100*A(this._r,255))+"%, "+H(100*A(this._g,255))+"%, "+H(100*A(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":1>this._a?!1:Q[g(this._r,this._g,this._b,!0)]||!1},toFilter:function(S){var X="#"+e(this._r,this._g,this._b,this._a),Z=X,aa=this._gradientType?"GradientType = 1, ":"";S&&(S=m(S),Z="#"+e(S._r,S._g,S._b,S._a));return"progid:DXImageTransform.Microsoft.gradient("+
aa+"startColorstr="+X+",endColorstr="+Z+")"},toString:function(S){var X=!!S;S=S||this._format;var Z=!1,aa=1>this._a&&0<=this._a;if(!X&&aa&&("hex"===S||"hex6"===S||"hex3"===S||"hex4"===S||"hex8"===S||"name"===S))return"name"===S&&0===this._a?this.toName():this.toRgbString();"rgb"===S&&(Z=this.toRgbString());"prgb"===S&&(Z=this.toPercentageRgbString());if("hex"===S||"hex6"===S)Z=this.toHexString();"hex3"===S&&(Z=this.toHexString(!0));"hex4"===S&&(Z=this.toHex8String(!0));"hex8"===S&&(Z=this.toHex8String());
"name"===S&&(Z=this.toName());"hsl"===S&&(Z=this.toHslString());"hsv"===S&&(Z=this.toHsvString());return Z||this.toHexString()},clone:function(){return m(this.toString())},_applyModification:function(S,X){S=S.apply(null,[this].concat([].slice.call(X)));this._r=S._r;this._g=S._g;this._b=S._b;this.setAlpha(S._a);return this},lighten:function(){return this._applyModification(d,arguments)},brighten:function(){return this._applyModification(f,arguments)},darken:function(){return this._applyModification(k,
arguments)},desaturate:function(){return this._applyModification(n,arguments)},saturate:function(){return this._applyModification(p,arguments)},greyscale:function(){return this._applyModification(c,arguments)},spin:function(){return this._applyModification(r,arguments)},_applyCombination:function(S,X){return S.apply(null,[this].concat([].slice.call(X)))},analogous:function(){return this._applyCombination(z,arguments)},complement:function(){return this._applyCombination(u,arguments)},monochromatic:function(){return this._applyCombination(y,
arguments)},splitcomplement:function(){return this._applyCombination(C,arguments)},triad:function(){return this._applyCombination(v,arguments)},tetrad:function(){return this._applyCombination(x,arguments)}};m.fromRatio=function(S,X){if("object"==typeof S){var Z={},aa;for(aa in S)S.hasOwnProperty(aa)&&(Z[aa]="a"===aa?S[aa]:B(S[aa]));S=Z}return m(S,X)};m.equals=function(S,X){return S&&X?m(S).toRgbString()==m(X).toRgbString():!1};m.random=function(){return m.fromRatio({r:N(),g:N(),b:N()})};m.mix=function(S,
X,Z){Z=0===Z?0:Z||50;S=m(S).toRgb();X=m(X).toRgb();Z/=100;return m({r:(X.r-S.r)*Z+S.r,g:(X.g-S.g)*Z+S.g,b:(X.b-S.b)*Z+S.b,a:(X.a-S.a)*Z+S.a})};m.readability=function(S,X){S=m(S);X=m(X);return(q.max(S.getLuminance(),X.getLuminance())+.05)/(q.min(S.getLuminance(),X.getLuminance())+.05)};m.isReadable=function(S,X,Z){S=m.readability(S,X);X=!1;var aa=Z||{level:"AA",size:"small"};Z=(aa.level||"AA").toUpperCase();aa=(aa.size||"small").toLowerCase();"AA"!==Z&&"AAA"!==Z&&(Z="AA");"small"!==aa&&"large"!==aa&&
(aa="small");switch(Z+aa){case "AAsmall":case "AAAlarge":X=4.5<=S;break;case "AAlarge":X=3<=S;break;case "AAAsmall":X=7<=S}return X};m.mostReadable=function(S,X,Z){var aa=null,fa=0;Z=Z||{};var ha=Z.includeFallbackColors;var ja=Z.level;var ba=Z.size;for(var ma=0;ma<X.length;ma++){var qa=m.readability(S,X[ma]);qa>fa&&(fa=qa,aa=m(X[ma]))}if(m.isReadable(S,aa,{level:ja,size:ba})||!ha)return aa;Z.includeFallbackColors=!1;return m.mostReadable(S,["#fff","#000"],Z)};var T=m.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",
aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",
darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",
grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",
lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",
palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",
steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Q=m.hexNames=function(S){var X={},Z;for(Z in S)S.hasOwnProperty(Z)&&(X[S[Z]]=Z);return X}(T),U={CSS_UNIT:/(?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?)/,rgb:/rgb[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,rgba:/rgba[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,
hsl:/hsl[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,hsla:/hsla[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,hsv:/hsv[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,
hsva:/hsva[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};"undefined"!==typeof K&&K.exports?
K.exports=m:window.tinycolor=m})(Math)},{}],577:[function(b,K,G){function q(l){if(l.length){if(l instanceof Float32Array)return l;var h=new Float32Array(l);h.set(l);return h}m[0]=l;return m[0]}K.exports=q;K.exports.float32=K.exports.float=q;K.exports.fract32=K.exports.fract=function(l){if(l.length){for(var h=q(l),a=0,g=h.length;a<g;a++)h[a]=l[a]-h[a];return h}return q(l-q(l))};var m=new Float32Array(1)},{}],578:[function(b,K,G){function q(a,g){g=l(getComputedStyle(a).getPropertyValue(g));return g[0]*
m(g[1],a)}function m(a,g){g=g||document.body;a=(a||"px").trim().toLowerCase();if(g===window||g===document)g=document.body;switch(a){case "%":return g.clientHeight/100;case "ch":case "ex":var e=document.createElement("div");e.style["font-size"]="128"+a;g.appendChild(e);a=q(e,"font-size")/128;g.removeChild(e);return a;case "em":return q(g,"font-size");case "rem":return q(document.body,"font-size");case "vw":return window.innerWidth/100;case "vh":return window.innerHeight/100;case "vmin":return Math.min(window.innerWidth,
window.innerHeight)/100;case "vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case "in":return h;case "cm":return h/2.54;case "mm":return h/25.4;case "pt":return h/72;case "pc":return h/6}return 1}var l=b("parse-unit");K.exports=m;var h=96},{"parse-unit":506}],579:[function(b,K,G){(function(q,m){"object"===typeof G&&"undefined"!==typeof K?m(G):(q=q||self,m(q.topojson=q.topojson||{}))})(this,function(q){function m(k){return k}function l(k){if(null==k)return m;var r,u,v=k.scale[0],x=
k.scale[1],C=k.translate[0],z=k.translate[1];return function(y,D){D||(r=u=0);D=2;var A=y.length,t=Array(A);t[0]=(r+=y[0])*v+C;for(t[1]=(u+=y[1])*x+z;D<A;)t[D]=y[D],++D;return t}}function h(k){function r(A){A=v(A);A[0]<C&&(C=A[0]);A[0]>y&&(y=A[0]);A[1]<z&&(z=A[1]);A[1]>D&&(D=A[1])}function u(A){switch(A.type){case "GeometryCollection":A.geometries.forEach(u);break;case "Point":r(A.coordinates);break;case "MultiPoint":A.coordinates.forEach(r)}}var v=l(k.transform),x,C=Infinity,z=C,y=-C,D=-C;k.arcs.forEach(function(A){for(var t=
-1,B=A.length,F;++t<B;)F=v(A[t],t),F[0]<C&&(C=F[0]),F[0]>y&&(y=F[0]),F[1]<z&&(z=F[1]),F[1]>D&&(D=F[1])});for(x in k.objects)u(k.objects[x]);return[C,z,y,D]}function a(k,r){var u=r.id,v=r.bbox,x=null==r.properties?{}:r.properties;k=g(k,r);return null==u&&null==v?{type:"Feature",properties:x,geometry:k}:null==v?{type:"Feature",id:u,properties:x,geometry:k}:{type:"Feature",id:u,bbox:v,properties:x,geometry:k}}function g(k,r){function u(A){return y(A)}function v(A){for(var t=[],B=0,F=A.length;B<F;++B){var I=
A[B],J=t;J.length&&J.pop();for(var L=D[0>I?~I:I],H=0,P=L.length;H<P;++H)J.push(y(L[H],H));if(0>I)for(I=J,J=I.length,L=J-P;L<--J;)P=I[L],I[L++]=I[J],I[J]=P}2>t.length&&t.push(t[0]);return t}function x(A){for(A=v(A);4>A.length;)A.push(A[0]);return A}function C(A){return A.map(x)}function z(A){var t=A.type;switch(t){case "GeometryCollection":return{type:t,geometries:A.geometries.map(z)};case "Point":A=y(A.coordinates);break;case "MultiPoint":A=A.coordinates.map(u);break;case "LineString":A=v(A.arcs);
break;case "MultiLineString":A=A.arcs.map(v);break;case "Polygon":A=C(A.arcs);break;case "MultiPolygon":A=A.arcs.map(C);break;default:return null}return{type:t,coordinates:A}}var y=l(k.transform),D=k.arcs;return z(r)}function e(k,r){function u(A){var t=k.arcs[0>A?~A:A],B=t[0];if(k.transform){var F=[0,0];t.forEach(function(I){F[0]+=I[0];F[1]+=I[1]})}else F=t[t.length-1];return 0>A?[F,B]:[B,F]}function v(A,t){for(var B in A){var F=A[B];delete t[F.start];delete F.start;delete F.end;F.forEach(function(I){x[0>
I?~I:I]=1});y.push(F)}}var x={},C={},z={},y=[],D=-1;r.forEach(function(A,t){var B=k.arcs[0>A?~A:A];3>B.length&&!B[1][0]&&!B[1][1]&&(B=r[++D],r[D]=A,r[t]=B)});r.forEach(function(A){var t=u(A),B=t[0],F=t[1];(t=z[B])?(delete z[t.end],t.push(A),t.end=F,(A=C[F])?(delete C[A.start],B=A===t?t:t.concat(A),C[B.start=t.start]=z[B.end=A.end]=B):C[t.start]=z[t.end]=t):(t=C[F])?(delete C[t.start],t.unshift(A),t.start=B,(A=z[B])?(delete z[A.end],B=A===t?t:A.concat(t),C[B.start=A.start]=z[B.end=t.end]=B):C[t.start]=
z[t.end]=t):(t=[A],C[t.start=B]=z[t.end=F]=t)});v(z,C);v(C,z);r.forEach(function(A){x[0>A?~A:A]||y.push([A])});return y}function n(k,r,u){var v;if(1<arguments.length)var x=p(k,r,u);else{var C=0;for(x=Array(v=k.arcs.length);C<v;++C)x[C]=C}return{type:"MultiLineString",arcs:e(k,x)}}function p(k,r,u){function v(t){var B=0>t?~t:t;(D[B]||(D[B]=[])).push({i:t,g:A})}function x(t){t.forEach(v)}function C(t){t.forEach(x)}function z(t){switch(A=t,t.type){case "GeometryCollection":t.geometries.forEach(z);break;
case "LineString":x(t.arcs);break;case "MultiLineString":case "Polygon":C(t.arcs);break;case "MultiPolygon":t.arcs.forEach(C)}}var y=[],D=[],A;z(r);D.forEach(null==u?function(t){y.push(t[0].i)}:function(t){u(t[0].g,t[t.length-1].g)&&y.push(t[0].i)});return y}function c(k,r){function u(D){switch(D.type){case "GeometryCollection":D.geometries.forEach(u);break;case "Polygon":v(D.arcs);break;case "MultiPolygon":D.arcs.forEach(v)}}function v(D){D.forEach(function(A){A.forEach(function(t){(C[t=0>t?~t:t]||
(C[t]=[])).push(D)})});z.push(D)}function x(D){D=g(k,{type:"Polygon",arcs:[D]}).coordinates[0];for(var A=-1,t=D.length,B,F=D[t-1],I=0;++A<t;)B=F,F=D[A],I+=B[0]*F[1]-B[1]*F[0];return Math.abs(I)}var C={},z=[],y=[];r.forEach(u);z.forEach(function(D){if(!D._){var A=[],t=[D];D._=1;for(y.push(A);D=t.pop();)A.push(D),D.forEach(function(B){B.forEach(function(F){C[0>F?~F:F].forEach(function(I){I._||(I._=1,t.push(I))})})})}});z.forEach(function(D){delete D._});return{type:"MultiPolygon",arcs:y.map(function(D){var A=
[];D.forEach(function(I){I.forEach(function(J){J.forEach(function(L){2>C[0>L?~L:L].length&&A.push(L)})})});A=e(k,A);if(1<(D=A.length))for(var t=1,B=x(A[0]),F;t<D;++t)(F=x(A[t]))>B&&(B=A[0],A[0]=A[t],A[t]=B,B=F);return A}).filter(function(D){return 0<D.length})}}function d(k,r){for(var u=0,v=k.length;u<v;){var x=u+v>>>1;k[x]<r?u=x+1:v=x}return u}function f(k){if(null==k)return m;var r,u,v=k.scale[0],x=k.scale[1],C=k.translate[0],z=k.translate[1];return function(y,D){D||(r=u=0);D=2;var A=y.length,t=
Array(A),B=Math.round((y[0]-C)/v),F=Math.round((y[1]-z)/x);t[0]=B-r;r=B;t[1]=F-u;for(u=F;D<A;)t[D]=y[D],++D;return t}}q.bbox=h;q.feature=function(k,r){"string"===typeof r&&(r=k.objects[r]);return"GeometryCollection"===r.type?{type:"FeatureCollection",features:r.geometries.map(function(u){return a(k,u)})}:a(k,r)};q.merge=function(k){return g(k,c.apply(this,arguments))};q.mergeArcs=c;q.mesh=function(k){return g(k,n.apply(this,arguments))};q.meshArcs=n;q.neighbors=function(k){function r(J,L){J.forEach(function(H){0>
H&&(H=~H);var P=x[H];P?P.push(L):x[H]=[L]})}function u(J,L){J.forEach(function(H){r(H,L)})}function v(J,L){if("GeometryCollection"===J.type)J.geometries.forEach(function(H){v(H,L)});else if(J.type in z)z[J.type](J.arcs,L)}var x={},C=k.map(function(){return[]}),z={LineString:r,MultiLineString:u,Polygon:u,MultiPolygon:function(J,L){J.forEach(function(H){u(H,L)})}};k.forEach(v);for(var y in x){k=x[y];for(var D=k.length,A=0;A<D;++A)for(var t=A+1;t<D;++t){var B=k[A],F=k[t],I;(I=C[B])[y=d(I,F)]!==F&&I.splice(y,
0,F);(I=C[F])[y=d(I,B)]!==B&&I.splice(y,0,B)}}return C};q.quantize=function(k,r){function u(B){return A(B)}function v(B){switch(B.type){case "GeometryCollection":var F={type:"GeometryCollection",geometries:B.geometries.map(v)};break;case "Point":F={type:"Point",coordinates:A(B.coordinates)};break;case "MultiPoint":F={type:"MultiPoint",coordinates:B.coordinates.map(u)};break;default:return B}null!=B.id&&(F.id=B.id);null!=B.bbox&&(F.bbox=B.bbox);null!=B.properties&&(F.properties=B.properties);return F}
if(k.transform)throw Error("already quantized");if(r&&r.scale)var x=k.bbox;else{if(!(2<=(D=Math.floor(r))))throw Error("n must be \u22652");x=k.bbox||h(k);r=x[0];var C=x[1],z=x[2],y=x[3],D;r={scale:[z-r?(z-r)/(D-1):1,y-C?(y-C)/(D-1):1],translate:[r,C]}}var A=f(r),t;C=k.objects;z={};for(t in C)z[t]=v(C[t]);return{type:"Topology",bbox:x,transform:r,objects:z,arcs:k.arcs.map(function(B){var F=0,I=1,J=B.length,L,H=Array(J);for(H[0]=A(B[0],0);++F<J;)if((L=A(B[F],F))[0]||L[1])H[I++]=L;1===I&&(H[I++]=[0,
0]);H.length=I;return H})}};q.transform=l;q.untransform=f;Object.defineProperty(q,"__esModule",{value:!0})})},{}],580:[function(b,K,G){K.exports=function(h){if(0>h)return[];if(0===h)return[[0]];for(var a=Math.round(l(h+1))|0,g=[],e=0;e<a;++e){for(var n=q.unrank(h,e),p=[0],c=0,d=0;d<n.length;++d)c+=1<<n[d],p.push(c);1>m(n)&&(p[0]=c,p[h]=0);g.push(p)}return g};var q=b("permutation-rank"),m=b("permutation-parity"),l=b("gamma")},{gamma:248,"permutation-parity":509,"permutation-rank":510}],581:[function(b,
K,G){function q(d,f,k){return Math.sqrt(Math.pow(d,2)+Math.pow(f,2)+Math.pow(k,2))}function m(d){var f=Math.abs(d[0]),k=Math.abs(d[1]),r=Math.abs(d[2]),u=[0,0,0];f>Math.max(k,r)?u[2]=1:k>Math.max(f,r)?u[0]=1:u[1]=1;for(r=k=f=0;3>r;++r)f+=d[r]*d[r],k+=u[r]*d[r];for(r=0;3>r;++r)u[r]-=k/f*d[r];n(u,u);return u}function l(d,f,k,r,u,v,x,C){this.center=h(k);this.up=h(r);this.right=h(u);this.radius=h([v]);this.angle=h([x,C]);this.angle.bounds=[[-Infinity,-Math.PI/2],[Infinity,Math.PI/2]];this.setDistanceLimits(d,
f);this.computedCenter=this.center.curve(0);this.computedUp=this.up.curve(0);this.computedRight=this.right.curve(0);this.computedRadius=this.radius.curve(0);this.computedAngle=this.angle.curve(0);this.computedToward=[0,0,0];this.computedEye=[0,0,0];this.computedMatrix=Array(16);for(d=0;16>d;++d)this.computedMatrix[d]=.5;this.recalcMatrix(0)}K.exports=function(d){d=d||{};var f=d.center||[0,0,0],k=d.up||[0,1,0],r=d.right||m(k),u=d.radius||1,v=d.theta||0,x=d.phi||0;f=[].slice.call(f,0,3);k=[].slice.call(k,
0,3);n(k,k);r=[].slice.call(r,0,3);n(r,r);"eye"in d&&(u=d.eye,v=[u[0]-f[0],u[1]-f[1],u[2]-f[2]],e(r,v,k),1E-6>q(r[0],r[1],r[2])?r=m(k):n(r,r),u=q(v[0],v[1],v[2]),x=p(k,v)/u,v=p(r,v)/u,x=Math.acos(x),v=Math.acos(v));u=Math.log(u);return new l(d.zoomMin,d.zoomMax,f,k,r,u,v,x)};var h=b("filtered-vector"),a=b("gl-mat4/invert"),g=b("gl-mat4/rotate"),e=b("gl-vec3/cross"),n=b("gl-vec3/normalize"),p=b("gl-vec3/dot");b=l.prototype;b.setDistanceLimits=function(d,f){d=0<d?Math.log(d):-Infinity;f=0<f?Math.log(f):
Infinity;f=Math.max(f,d);this.radius.bounds[0][0]=d;this.radius.bounds[1][0]=f};b.getDistanceLimits=function(d){var f=this.radius.bounds[0];return d?(d[0]=Math.exp(f[0][0]),d[1]=Math.exp(f[1][0]),d):[Math.exp(f[0][0]),Math.exp(f[1][0])]};b.recalcMatrix=function(d){this.center.curve(d);this.up.curve(d);this.right.curve(d);this.radius.curve(d);this.angle.curve(d);for(var f=this.computedUp,k=this.computedRight,r=0,u=0,v=0;3>v;++v)u+=f[v]*k[v],r+=f[v]*f[v];var x=Math.sqrt(r);for(v=d=0;3>v;++v)k[v]-=f[v]*
u/r,d+=k[v]*k[v],f[v]/=x;d=Math.sqrt(d);for(v=0;3>v;++v)k[v]/=d;var C=this.computedToward;e(C,f,k);n(C,C);d=Math.exp(this.computedRadius[0]);x=this.computedAngle[0];r=this.computedAngle[1];u=Math.cos(x);x=Math.sin(x);var z=Math.cos(r),y=Math.sin(r);r=this.computedCenter;var D=u*z,A=x*z,t=-u*y,B=-x*y;u=this.computedEye;x=this.computedMatrix;for(v=0;3>v;++v){var F=D*k[v]+A*C[v]+y*f[v];x[4*v+1]=t*k[v]+B*C[v]+z*f[v];x[4*v+2]=F;x[4*v+3]=0}k=x[1];v=x[5];y=x[9];C=x[2];z=x[6];D=x[10];f=v*D-y*z;y=y*C-k*D;
k=k*z-v*C;v=q(f,y,k);x[0]=f/v;x[4]=y/v;x[8]=k/v;for(v=0;3>v;++v)u[v]=r[v]+x[2+4*v]*d;for(v=0;3>v;++v){for(r=d=0;3>r;++r)d+=x[v+4*r]*u[r];x[12+v]=-d}x[15]=1};b.getMatrix=function(d,f){this.recalcMatrix(d);d=this.computedMatrix;if(f){for(var k=0;16>k;++k)f[k]=d[k];return f}return d};var c=[0,0,0];b.rotate=function(d,f,k,r){this.angle.move(d,f,k);if(r){this.recalcMatrix(d);f=this.computedMatrix;c[0]=f[2];c[1]=f[6];c[2]=f[10];k=this.computedUp;for(var u=this.computedRight,v=this.computedToward,x=0;3>
x;++x)f[4*x]=k[x],f[4*x+1]=u[x],f[4*x+2]=v[x];g(f,f,r,c);for(x=0;3>x;++x)k[x]=f[4*x],u[x]=f[4*x+1];this.up.set(d,k[0],k[1],k[2]);this.right.set(d,u[0],u[1],u[2])}};b.pan=function(d,f,k,r){f=f||0;k=k||0;r=r||0;this.recalcMatrix(d);var u=this.computedMatrix,v=u[1],x=u[5],C=u[9],z=q(v,x,C);v/=z;x/=z;C/=z;z=u[0];var y=u[4];u=u[8];var D=z*v+y*x+u*C;z-=v*D;y-=x*D;u-=C*D;D=q(z,y,u);this.center.move(d,z/D*f+v*k,y/D*f+x*k,u/D*f+C*k);f=Math.exp(this.computedRadius[0]);f=Math.max(1E-4,f+r);this.radius.set(d,
Math.log(f))};b.translate=function(d,f,k,r){this.center.move(d,f||0,k||0,r||0)};b.setMatrix=function(d,f,k,r){var u=1;"number"===typeof k&&(u=k|0);if(0>u||3<u)u=1;var v=(u+2)%3;f||(this.recalcMatrix(d),f=this.computedMatrix);k=f[u];var x=f[u+4],C=f[u+8];if(r){r=Math.abs(k);var z=Math.abs(C),y=Math.max(r,Math.abs(x),z);r===y?(k=0>k?-1:1,x=C=0):z===y?(C=0>C?-1:1,k=x=0):(x=0>x?-1:1,k=C=0)}else r=q(k,x,C),k/=r,x/=r,C/=r;r=f[v];z=f[v+4];v=f[v+8];y=r*k+z*x+v*C;r-=k*y;z-=x*y;v-=C*y;y=q(r,z,v);r/=y;z/=y;
v/=y;y=x*v-C*z;var D=C*r-k*v,A=k*z-x*r,t=q(y,D,A);y/=t;D/=t;A/=t;this.center.jump(d,F,I,J);this.radius.idle(d);this.up.jump(d,k,x,C);this.right.jump(d,r,z,v);if(2===u)I=f[1],J=f[5],k=f[9],F=0>B?-Math.PI/2:Math.PI/2,I=Math.atan2(I*y+J*D+k*A,I*r+J*z+k*v);else{I=f[2];J=f[6];var B=f[10];F=Math.asin(Math.min(1,Math.max(-1,I*k+J*x+B*C)));I=Math.atan2(I*y+J*D+B*A,I*r+J*z+B*v)}this.angle.jump(d,I,F);this.recalcMatrix(d);B=f[2];k=f[6];x=f[10];J=this.computedMatrix;a(J,f);f=J[15];var F=J[12]/f,I=J[13]/f,J=
J[14]/f;f=Math.exp(this.computedRadius[0]);this.center.jump(d,F-B*f,I-k*f,J-x*f)};b.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())};b.idle=function(d){this.center.idle(d);this.up.idle(d);this.right.idle(d);this.radius.idle(d);this.angle.idle(d)};b.flush=function(d){this.center.flush(d);this.up.flush(d);this.right.flush(d);this.radius.flush(d);this.angle.flush(d)};b.setDistance=function(d,f){0<f&&this.radius.set(d,Math.log(f))};
b.lookAt=function(d,f,k,r){this.recalcMatrix(d);f=f||this.computedEye;k=k||this.computedCenter;r=r||this.computedUp;var u=r[0],v=r[1];r=r[2];var x=q(u,v,r);if(!(1E-6>x)){u/=x;v/=x;r/=x;x=f[0]-k[0];var C=f[1]-k[1];f=f[2]-k[2];var z=q(x,C,f);if(!(1E-6>z)){x/=z;C/=z;f/=z;var y=this.computedRight,D=y[0],A=y[1];y=y[2];var t=u*D+v*A+r*y;D-=t*u;A-=t*v;y-=t*r;t=q(D,A,y);if(.01>t&&(D=v*f-r*C,A=r*x-u*f,y=u*C-v*x,t=q(D,A,y),1E-6>t))return;D/=t;A/=t;y/=t;this.up.set(d,u,v,r);this.right.set(d,D,A,y);this.center.set(d,
k[0],k[1],k[2]);this.radius.set(d,Math.log(z));k=v*y-r*A;z=r*D-u*y;t=u*A-v*D;var B=q(k,z,t);u=Math.asin(Math.min(1,Math.max(-1,u*x+v*C+r*f)));v=Math.atan2(k/B*x+z/B*C+t/B*f,D*x+A*C+y*f);x=this.angle._state;r=x[x.length-1];x=x[x.length-2];r%=2*Math.PI;C=Math.abs(r-v);f=Math.abs(r-2*Math.PI-v);Math.abs(r+2*Math.PI-v)<C&&(r+=2*Math.PI);f<C&&(r-=2*Math.PI);this.angle.jump(this.angle.lastT(),r,x);this.angle.set(d,v,u)}}}},{"filtered-vector":242,"gl-mat4/invert":293,"gl-mat4/rotate":299,"gl-vec3/cross":365,
"gl-vec3/dot":370,"gl-vec3/normalize":387}],582:[function(b,K,G){K.exports=function(m,l,h){var a=m*l,g=q*m;g-=g-m;m-=g;var e=q*l;e-=e-l;l-=e;l=m*l-(a-g*e-m*e-g*l);return h?(h[0]=l,h[1]=a,h):[l,a]};var q=+(Math.pow(2,27)+1)},{}],583:[function(b,K,G){K.exports=function(q,m,l){var h=q+m,a=h-q;m-=a;q-=h-a;return l?(l[0]=q+m,l[1]=h,l):[q+m,h]}},{}],584:[function(b,K,G){var q=b("../prototype/is");K.exports=function(m){if("function"!==typeof m||!hasOwnProperty.call(m,"length"))return!1;try{if("number"!==
typeof m.length||"function"!==typeof m.call||"function"!==typeof m.apply)return!1}catch(l){return!1}return!q(m)}},{"../prototype/is":591}],585:[function(b,K,G){var q=b("../value/is"),m=b("../object/is"),l=b("../string/coerce"),h=b("./to-short-string");K.exports=function(a,g,e){if(!m(e))throw new TypeError(g.replace("%v",h(a)));if(!q(a)){if("default"in e)return e["default"];if(e.isOptional)return null}e=l(e.errorMessage);q(e)||(e=g);throw new TypeError(e.replace("%v",h(a)));}},{"../object/is":588,
"../string/coerce":592,"../value/is":594,"./to-short-string":587}],586:[function(b,K,G){K.exports=function(q){try{return q.toString()}catch(m){try{return String(q)}catch(l){return null}}}},{}],587:[function(b,K,G){var q=b("./safe-to-string"),m=/[\n\r\u2028\u2029]/g;K.exports=function(l){l=q(l);if(null===l)return"<Non-coercible to string value>";100<l.length&&(l=l.slice(0,99)+"\u2026");return l=l.replace(m,function(h){switch(h){case "\n":return"\\n";case "\r":return"\\r";case "\u2028":return"\\u2028";
case "\u2029":return"\\u2029";default:throw Error("Unexpected character");}})}},{"./safe-to-string":586}],588:[function(b,K,G){var q=b("../value/is"),m={object:!0,"function":!0,undefined:!0};K.exports=function(l){return q(l)?hasOwnProperty.call(m,typeof l):!1}},{"../value/is":594}],589:[function(b,K,G){var q=b("../lib/resolve-exception"),m=b("./is");K.exports=function(l,h){return m(l)?l:q(l,"%v is not a plain function",h)}},{"../lib/resolve-exception":585,"./is":590}],590:[function(b,K,G){var q=b("../function/is"),
m=/^\s*class[\s{/}]/,l=Function.prototype.toString;K.exports=function(h){return!q(h)||m.test(l.call(h))?!1:!0}},{"../function/is":584}],591:[function(b,K,G){var q=b("../object/is");K.exports=function(m){if(!q(m))return!1;try{return m.constructor?m.constructor.prototype===m:!1}catch(l){return!1}}},{"../object/is":588}],592:[function(b,K,G){var q=b("../value/is"),m=b("../object/is"),l=Object.prototype.toString;K.exports=function(h){if(!q(h))return null;if(m(h)){var a=h.toString;if("function"!==typeof a||
a===l)return null}return""+h}},{"../object/is":588,"../value/is":594}],593:[function(b,K,G){var q=b("../lib/resolve-exception"),m=b("./is");K.exports=function(l,h){return m(l)?l:q(l,"Cannot use %v",h)}},{"../lib/resolve-exception":585,"./is":594}],594:[function(b,K,G){K.exports=function(q){return void 0!==q&&null!==q}},{}],595:[function(b,K,G){(function(q){(function(){function m(I){if(I){var J=x.log2(I.length||I.byteLength);B[J].push(I)}}function l(I){I=x.nextPow2(I);var J=x.log2(I);J=B[J];return 0<
J.length?J.pop():new ArrayBuffer(I)}function h(I){return new Uint8Array(l(I),0,I)}function a(I){return new Uint16Array(l(2*I),0,I)}function g(I){return new Uint32Array(l(4*I),0,I)}function e(I){return new Int8Array(l(I),0,I)}function n(I){return new Int16Array(l(2*I),0,I)}function p(I){return new Int32Array(l(4*I),0,I)}function c(I){return new Float32Array(l(4*I),0,I)}function d(I){return new Float64Array(l(8*I),0,I)}function f(I){return y?new Uint8ClampedArray(l(I),0,I):h(I)}function k(I){return D?
new BigUint64Array(l(8*I),0,I):null}function r(I){return A?new BigInt64Array(l(8*I),0,I):null}function u(I){return new DataView(l(I),0,I)}function v(I){I=x.nextPow2(I);var J=x.log2(I);J=F[J];return 0<J.length?J.pop():new z(I)}var x=b("bit-twiddle"),C=b("dup"),z=b("buffer").Buffer;q.__TYPEDARRAY_POOL||(q.__TYPEDARRAY_POOL={UINT8:C([32,0]),UINT16:C([32,0]),UINT32:C([32,0]),BIGUINT64:C([32,0]),INT8:C([32,0]),INT16:C([32,0]),INT32:C([32,0]),BIGINT64:C([32,0]),FLOAT:C([32,0]),DOUBLE:C([32,0]),DATA:C([32,
0]),UINT8C:C([32,0]),BUFFER:C([32,0])});var y="undefined"!==typeof Uint8ClampedArray,D="undefined"!==typeof BigUint64Array,A="undefined"!==typeof BigInt64Array,t=q.__TYPEDARRAY_POOL;t.UINT8C||(t.UINT8C=C([32,0]));t.BIGUINT64||(t.BIGUINT64=C([32,0]));t.BIGINT64||(t.BIGINT64=C([32,0]));t.BUFFER||(t.BUFFER=C([32,0]));var B=t.DATA,F=t.BUFFER;G.free=function(I){if(z.isBuffer(I))F[x.log2(I.length)].push(I);else if("[object ArrayBuffer]"!==Object.prototype.toString.call(I)&&(I=I.buffer),I){var J=x.log2(I.length||
I.byteLength)|0;B[J].push(I)}};G.freeUint8=G.freeUint16=G.freeUint32=G.freeBigUint64=G.freeInt8=G.freeInt16=G.freeInt32=G.freeBigInt64=G.freeFloat32=G.freeFloat=G.freeFloat64=G.freeDouble=G.freeUint8Clamped=G.freeDataView=function(I){m(I.buffer)};G.freeArrayBuffer=m;G.freeBuffer=function(I){F[x.log2(I.length)].push(I)};G.malloc=function(I,J){if(void 0===J||"arraybuffer"===J)return l(I);switch(J){case "uint8":return h(I);case "uint16":return a(I);case "uint32":return g(I);case "int8":return e(I);case "int16":return n(I);
case "int32":return p(I);case "float":case "float32":return c(I);case "double":case "float64":return d(I);case "uint8_clamped":return f(I);case "bigint64":return r(I);case "biguint64":return k(I);case "buffer":return v(I);case "data":case "dataview":return u(I)}return null};G.mallocArrayBuffer=l;G.mallocUint8=h;G.mallocUint16=a;G.mallocUint32=g;G.mallocInt8=e;G.mallocInt16=n;G.mallocInt32=p;G.mallocFloat32=G.mallocFloat=c;G.mallocFloat64=G.mallocDouble=d;G.mallocUint8Clamped=f;G.mallocBigUint64=k;
G.mallocBigInt64=r;G.mallocDataView=u;G.mallocBuffer=v;G.clearCache=function(){for(var I=0;32>I;++I)t.UINT8[I].length=0,t.UINT16[I].length=0,t.UINT32[I].length=0,t.INT8[I].length=0,t.INT16[I].length=0,t.INT32[I].length=0,t.FLOAT[I].length=0,t.DOUBLE[I].length=0,t.BIGUINT64[I].length=0,t.BIGINT64[I].length=0,t.UINT8C[I].length=0,B[I].length=0,F[I].length=0}}).call(this)}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"bit-twiddle":97,
buffer:111,dup:176}],596:[function(b,K,G){function q(m){this.roots=Array(m);this.ranks=Array(m);for(var l=0;l<m;++l)this.roots[l]=l,this.ranks[l]=0}"use restrict";K.exports=q;b=q.prototype;Object.defineProperty(b,"length",{get:function(){return this.roots.length}});b.makeSet=function(){var m=this.roots.length;this.roots.push(m);this.ranks.push(0);return m};b.find=function(m){for(var l=m,h=this.roots;h[m]!==m;)m=h[m];for(;h[l]!==m;){var a=h[l];h[l]=m;l=a}return m};b.link=function(m,l){m=this.find(m);
l=this.find(l);if(m!==l){var h=this.ranks,a=this.roots,g=h[m],e=h[l];g<e?a[m]=l:e<g?a[l]=m:(a[l]=m,++h[m])}}},{}],597:[function(b,K,G){K.exports=function(q,m,l){if(0===q.length)return q;if(m){l||q.sort(m);l=1;for(var h=q.length,a=q[0],g,e=1;e<h;++e)g=a,a=q[e],m(a,g)&&(e===l?l++:q[l++]=a);q.length=l;return q}l||q.sort();m=1;l=q.length;h=q[0];for(g=1;g<l;++g)a=h,h=q[g],h!==a&&(g===m?m++:q[m++]=h);q.length=m;return q}},{}],598:[function(b,K,G){var q=/['"]/;K.exports=function(m){if(!m)return"";q.test(m.charAt(0))&&
(m=m.substr(1));q.test(m.charAt(m.length-1))&&(m=m.substr(0,m.length-1));return m}},{}],599:[function(b,K,G){K.exports=function(q,m,l){Array.isArray(l)||(l=[].slice.call(arguments,2));for(var h=0,a=l.length;h<a;h++){var g=l[h],e;for(e in g)if((void 0===m[e]||Array.isArray(m[e])||q[e]!==m[e])&&e in m){if(!0===g[e])var n=m[e];else if(!1===g[e])continue;else if("function"===typeof g[e]&&(n=g[e](m[e],q,m),void 0===n))continue;q[e]=n}}return q}},{}],600:[function(b,K,G){K.exports=function(h,a){if("object"!==
typeof a||null===a)a={};return q(h,a.canvas||m,a.context||l,a)};var q=b("./lib/vtext"),m=null,l=null;"undefined"!==typeof document&&(m=document.createElement("canvas"),m.width=8192,m.height=1024,l=m.getContext("2d"))},{"./lib/vtext":601}],601:[function(b,K,G){function q(A,t,B,F){var I="<"+A+">";A="</"+A+">";for(var J=I.length,L=A.length,H=t[0]===x||t[0]===y,P=0,M;-1<P;){P=B.indexOf(I,P);if(-1===P)break;M=B.indexOf(A,P+J);if(-1===M)break;if(M<=P)break;for(var N=P;N<M+L;++N)if(N<P+J||N>=M)F[N]=null,
B=B.substr(0,N)+" "+B.substr(N+1);else if(null!==F[N]){var T=F[N].indexOf(t[0]);-1===T?F[N]+=t:H&&(F[N]=F[N].substr(0,T+1)+(1+parseInt(F[N][T+1]))+F[N].substr(T+2))}P+=J;P=B.substr(P,M-P).indexOf(I);P=-1!==P?P:M+L}return F}function m(A,t,B){for(var F=t.textAlign||"start",I=t.textBaseline||"alphabetic",J=[1073741824,1073741824],L=[0,0],H=A.length,P=0;P<H;++P)for(var M=A[P],N=0;2>N;++N)J[N]=Math.min(J[N],M[N])|0,L[N]=Math.max(L[N],M[N])|0;var T=0;switch(F){case "center":T=-.5*(J[0]+L[0]);break;case "right":case "end":T=
-L[0];break;case "left":case "start":T=-J[0];break;default:throw Error("vectorize-text: Unrecognized textAlign: '"+F+"'");}var Q=0;switch(I){case "hanging":case "top":Q=-J[1];break;case "middle":Q=-.5*(J[1]+L[1]);break;case "alphabetic":case "ideographic":Q=-3*B;break;case "bottom":Q=-L[1];break;default:throw Error("vectorize-text: Unrecoginized textBaseline: '"+I+"'");}var U=1/B;"lineHeight"in t?U*=+t.lineHeight:"width"in t?U=t.width/(L[0]-J[0]):"height"in t&&(U=t.height/(L[1]-J[1]));return A.map(function(S){return[U*
(S[0]+T),U*(S[1]+Q)]})}function l(A,t,B,F,I,J){function L(){if(""!==aa){var qa=t.measureText(aa).width;t.fillText(aa,S+ha,X+ja);ha+=qa}}function H(){return""+Math.round(ba)+"px "}function P(qa,ka){var oa=""+t.font;if(!0===J.subscripts){var na=qa.indexOf(y),la=ka.indexOf(y);na=-1<na?parseInt(qa[1+na]):0;la=-1<la?parseInt(ka[1+la]):0;na!==la&&(oa=oa.replace(H(),"?px "),ba*=Math.pow(.75,la-na),oa=oa.replace("?px ",H()));ja+=.25*U*(la-na)}!0===J.superscripts&&(na=qa.indexOf(x),la=ka.indexOf(x),na=-1<
na?parseInt(qa[1+na]):0,la=-1<la?parseInt(ka[1+la]):0,na!==la&&(oa=oa.replace(H(),"?px "),ba*=Math.pow(.75,la-na),oa=oa.replace("?px ",H())),ja-=.25*U*(la-na));!0===J.bolds&&(la=-1<qa.indexOf(k),na=-1<ka.indexOf(k),!la&&na&&(oa=ia?oa.replace("italic ","italic bold "):"bold "+oa),la&&!na&&(oa=oa.replace("bold ","")));if(!0===J.italics){var ia=-1<qa.indexOf(u);qa=-1<ka.indexOf(u);!ia&&qa&&(oa="italic "+oa);ia&&!qa&&(oa=oa.replace("italic ",""))}t.font=oa}B=B.replace(/\n/g,"");B=!0===J.breaklines?B.replace(/<br>/g,
"\n"):B.replace(/<br>/g," ");var M="",N=[];for(Z=0;Z<B.length;++Z)N[Z]=M;!0===J.bolds&&(N=q(f,k,B,N));!0===J.italics&&(N=q(r,u,B,N));!0===J.superscripts&&(N=q(v,C,B,N));!0===J.subscripts&&(N=q(z,D,B,N));var T=[],Q="";for(Z=0;Z<B.length;++Z)null!==N[Z]&&(Q+=B[Z],T.push(N[Z]));N=Q.split("\n");B=N.length;var U=Math.round(I*F),S=F,X=2*F;I=0;Z=B*U+X;A.height<Z&&(A.height=Z);t.fillStyle="#000";t.fillRect(0,0,A.width,A.height);t.fillStyle="#fff";var Z;Q=0;var aa="";for(A=0;A<B;++A){var fa=N[A]+"\n";var ha=
0;var ja=A*U;var ba=F;aa="";for(Z=0;Z<fa.length;++Z){var ma=Z+Q<T.length?T[Z+Q]:T[T.length-1];M===ma?aa+=fa[Z]:(L(),aa=fa[Z],void 0!==ma&&(P(M,ma),M=ma))}L();Q+=fa.length;Z=Math.round(ha+2*S)|0;I<Z&&(I=Z)}F=I;M=X+U*B;return e(t.getImageData(0,0,F,M).data,[M,F,4]).pick(-1,-1,0).transpose(1,0)}function h(A,t,B,F){A=g(A,128);F=F?n(A.cells,A.positions,.25):{edges:A.cells,positions:A.positions};B=m(F.positions,t,B);A=F.edges;F="ccw"===t.orientation;p(B,A);if(t.polygons||t.polygon||t.polyline){t=d(A,B);
A=Array(t.length);for(var I=0;I<t.length;++I){for(var J=t[I],L=Array(J.length),H=0;H<J.length;++H){for(var P=J[H],M=Array(P.length),N=0;N<P.length;++N)M[N]=B[P[N]].slice();F&&M.reverse();L[H]=M}A[I]=L}return A}return t.triangles||t.triangulate||t.triangle?{cells:c(B,A,{delaunay:!1,exterior:!1,interior:!0}),positions:B}:{edges:A,positions:B}}function a(A,t,B){try{return h(A,t,B,!0)}catch(F){}try{return h(A,t,B,!1)}catch(F){}return t.polygons||t.polyline||t.polygon?[]:t.triangles||t.triangulate||t.triangle?
{cells:[],positions:[]}:{edges:[],positions:[]}}K.exports=function(A,t,B,F){var I=64,J=1.25,L={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};F&&(F.size&&0<F.size&&(I=F.size),F.lineSpacing&&0<F.lineSpacing&&(J=F.lineSpacing),F.styletags&&F.styletags.breaklines&&(L.breaklines=F.styletags.breaklines?!0:!1),F.styletags&&F.styletags.bolds&&(L.bolds=F.styletags.bolds?!0:!1),F.styletags&&F.styletags.italics&&(L.italics=F.styletags.italics?!0:!1),F.styletags&&F.styletags.subscripts&&(L.subscripts=
F.styletags.subscripts?!0:!1),F.styletags&&F.styletags.superscripts&&(L.superscripts=F.styletags.superscripts?!0:!1));B.font=[F.fontStyle,F.fontVariant,F.fontWeight,I+"px",F.font].filter(function(H){return H}).join(" ");B.textAlign="start";B.textBaseline="alphabetic";B.direction="ltr";A=l(t,B,A,I,J,L);return a(A,F,I)};K.exports.processPixels=a;var g=b("surface-nets"),e=b("ndarray"),n=b("simplify-planar-graph"),p=b("clean-pslg"),c=b("cdt2d"),d=b("planar-graph-to-polyline"),f="b",k="b|",r="i",u="i|",
v="sup",x="+",C="+1",z="sub",y="-",D="-1"},{cdt2d:112,"clean-pslg":121,ndarray:495,"planar-graph-to-polyline":514,"simplify-planar-graph":562,"surface-nets":570}],602:[function(b,K,G){(function(){function q(C){C.permitHostObjects___&&C.permitHostObjects___(q)}function m(C){return!("weakmap:"==C.substr(0,8)&&"___"===C.substr(C.length-3))}function l(C){if(C!==Object(C))throw new TypeError("Not an object: "+C);var z=C[k];if(z&&z.key===C)return z;if(f(C)){z={key:C};try{return d(C,k,{value:z,writable:!1,
enumerable:!1,configurable:!1}),z}catch(y){}}}function h(C){C.prototype=null;return Object.freeze(C)}function a(){u||"undefined"===typeof console||(u=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}if("undefined"===typeof ses||!ses.ok||ses.ok()){"undefined"!==typeof ses&&(ses.weakMapPermitHostObjects=q);var g=!1;if("function"===typeof WeakMap){var e=WeakMap;if("undefined"===typeof navigator||!/Firefox/.test(navigator.userAgent)){var n=
new e,p=Object.freeze({});n.set(p,1);if(1!==n.get(p))g=!0;else{K.exports=WeakMap;return}}}var c=Object.getOwnPropertyNames,d=Object.defineProperty,f=Object.isExtensible,k="weakmap:ident:"+Math.random()+"___";"undefined"!==typeof crypto&&"function"===typeof crypto.getRandomValues&&"function"===typeof ArrayBuffer&&"function"===typeof Uint8Array&&(n=new ArrayBuffer(25),n=new Uint8Array(n),crypto.getRandomValues(n),k="weakmap:rand:"+Array.prototype.map.call(n,function(C){return(C%36).toString(36)}).join("")+
"___");d(Object,"getOwnPropertyNames",{value:function(C){return c(C).filter(m)}});if("getPropertyNames"in Object){var r=Object.getPropertyNames;d(Object,"getPropertyNames",{value:function(C){return r(C).filter(m)}})}(function(){var C=Object.freeze;d(Object,"freeze",{value:function(D){l(D);return C(D)}});var z=Object.seal;d(Object,"seal",{value:function(D){l(D);return z(D)}});var y=Object.preventExtensions;d(Object,"preventExtensions",{value:function(D){l(D);return y(D)}})})();var u=!1,v=0,x=function(){this instanceof
x||a();var C=[],z=[],y=v++;return Object.create(x.prototype,{get___:{value:h(function(D,A){var t=l(D);if(t)return y in t?t[y]:A;D=C.indexOf(D);return 0<=D?z[D]:A})},has___:{value:h(function(D){var A=l(D);return A?y in A:0<=C.indexOf(D)})},set___:{value:h(function(D,A){var t;(t=l(D))?t[y]=A:(t=C.indexOf(D),0<=t?z[t]=A:(t=C.length,z[t]=A,C[t]=D));return this})},delete___:{value:h(function(D){var A=l(D);if(A)return y in A&&delete A[y];D=C.indexOf(D);if(0>D)return!1;A=C.length-1;C[D]=void 0;z[D]=z[A];
C[D]=C[A];C.length=A;z.length=A;return!0})}})};x.prototype=Object.create(Object.prototype,{get:{value:function(C,z){return this.get___(C,z)},writable:!0,configurable:!0},has:{value:function(C){return this.has___(C)},writable:!0,configurable:!0},set:{value:function(C,z){return this.set___(C,z)},writable:!0,configurable:!0},"delete":{value:function(C){return this.delete___(C)},writable:!0,configurable:!0}});"function"===typeof e?function(){function C(){this instanceof x||a();var z=new e,y=void 0,D=
!1;var A=g?function(t,B){z.set(t,B);z.has(t)||(y||(y=new x),y.set(t,B));return this}:function(t,B){if(D)try{z.set(t,B)}catch(F){y||(y=new x),y.set___(t,B)}else z.set(t,B);return this};return Object.create(x.prototype,{get___:{value:h(function(t,B){return y?z.has(t)?z.get(t):y.get___(t,B):z.get(t,B)})},has___:{value:h(function(t){return z.has(t)||(y?y.has___(t):!1)})},set___:{value:h(A)},delete___:{value:h(function(t){var B=!!z["delete"](t);return y?y.delete___(t)||B:B})},permitHostObjects___:{value:h(function(t){if(t===
q)D=!0;else throw Error("bogus call to permitHostObjects___");})}})}g&&"undefined"!==typeof Proxy&&(Proxy=void 0);C.prototype=x.prototype;K.exports=C;Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():("undefined"!==typeof Proxy&&(Proxy=void 0),K.exports=x)}})()},{}],603:[function(b,K,G){var q=b("./hidden-store.js");K.exports=function(){var m={};return function(l){if(("object"!==typeof l||null===l)&&"function"!==typeof l)throw Error("Weakmap-shim: Key must be object");
var h=l.valueOf(m);return h&&h.identity===m?h:q(l,m)}}},{"./hidden-store.js":604}],604:[function(b,K,G){K.exports=function(q,m){var l={identity:m},h=q.valueOf;Object.defineProperty(q,"valueOf",{value:function(a){return a!==m?h.apply(this,arguments):l},writable:!0});return l}},{}],605:[function(b,K,G){var q=b("./create-store.js");K.exports=function(){var m=q();return{get:function(l,h){l=m(l);return l.hasOwnProperty("value")?l.value:h},set:function(l,h){m(l).value=h;return this},has:function(l){return"value"in
m(l)},"delete":function(l){return delete m(l).value}}}},{"./create-store.js":603}],606:[function(b,K,G){var q=b("get-canvas-context");K.exports=function(m){return q("webgl",m)}},{"get-canvas-context":249}],607:[function(b,K,G){function q(c){this.local=this.regionalOptions[c||""]||this.regionalOptions[""]}var m=b("../main");b=b("object-assign");var l=m.instance();q.prototype=new m.baseCalendar;b(q.prototype,{name:"Chinese",jdEpoch:1721425.5,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",
epochs:["BEC","EC"],monthNumbers:function(c,d){if("string"===typeof c)return(d=c.match(a))?d[0]:"";var f=this._validateYear(c);c=c.month();var k=""+this.toChineseMonth(f,c);d&&2>k.length&&(k="0"+k);this.isIntercalaryMonth(f,c)&&(k+="i");return k},monthNames:function(c){if("string"===typeof c){var d=c.match(g);return d?d[0]:""}d=this._validateYear(c);c=c.month();var f="\u4e00\u6708 \u4e8c\u6708 \u4e09\u6708 \u56db\u6708 \u4e94\u6708 \u516d\u6708 \u4e03\u6708 \u516b\u6708 \u4e5d\u6708 \u5341\u6708 \u5341\u4e00\u6708 \u5341\u4e8c\u6708".split(" ")[this.toChineseMonth(d,
c)-1];this.isIntercalaryMonth(d,c)&&(f="\u95f0"+f);return f},monthNamesShort:function(c){if("string"===typeof c){var d=c.match(e);return d?d[0]:""}d=this._validateYear(c);c=c.month();var f="\u4e00 \u4e8c \u4e09 \u56db \u4e94 \u516d \u4e03 \u516b \u4e5d \u5341 \u5341\u4e00 \u5341\u4e8c".split(" ")[this.toChineseMonth(d,c)-1];this.isIntercalaryMonth(d,c)&&(f="\u95f0"+f);return f},parseMonth:function(c,d){c=this._validateYear(c);var f=parseInt(d);if(isNaN(f)){if("\u95f0"===d[0]){var k=!0;d=d.substring(1)}"\u6708"===
d[d.length-1]&&(d=d.substring(0,d.length-1));f=1+"\u4e00 \u4e8c \u4e09 \u56db \u4e94 \u516d \u4e03 \u516b \u4e5d \u5341 \u5341\u4e00 \u5341\u4e8c".split(" ").indexOf(d)}else d=d[d.length-1],k="i"===d||"I"===d;return this.toMonthIndex(c,f,k)},dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(c,
d){c.year&&(c=c.year());if("number"!==typeof c||1888>c||2111<c)throw d.replace(/\{0\}/,this.local.name);return c},toMonthIndex:function(c,d,f){c=this.intercalaryMonth(c);if(f&&d!==c||1>d||12<d)throw m.local.invalidMonth.replace(/\{0\}/,this.local.name);return c?!f&&d<=c?d-1:d:d-1},toChineseMonth:function(c,d){c.year&&(c=c.year(),d=c.month());c=this.intercalaryMonth(c);if(0>d||d>(c?12:11))throw m.local.invalidMonth.replace(/\{0\}/,this.local.name);return c?d<c?d+1:d:d+1},intercalaryMonth:function(c){c=
this._validateYear(c);return n[c-n[0]]>>13},isIntercalaryMonth:function(c,d){c.year&&(c=c.year(),d=c.month());c=this.intercalaryMonth(c);return!!c&&c===d},leapYear:function(c){return 0!==this.intercalaryMonth(c)},weekOfYear:function(c,d,f){var k=this._validateYear(c,m.local.invalidyear);k=p[k-p[0]];k=l.newDate(k>>9&4095,k>>5&15,k&31);k.add(4-(k.dayOfWeek()||7),"d");c=this.toJD(c,d,f)-k.toJD();return 1+Math.floor(c/7)},monthsInYear:function(c){return this.leapYear(c)?13:12},daysInMonth:function(c,
d){c.year&&(d=c.month(),c=c.year());c=this._validateYear(c);c=n[c-n[0]];if(d>(c>>13?12:11))throw m.local.invalidMonth.replace(/\{0\}/,this.local.name);return c&1<<12-d?30:29},weekDay:function(c,d,f){return 6>(this.dayOfWeek(c,d,f)||7)},toJD:function(c,d,f){r=this._validate(c,r,f,m.local.invalidDate);c=this._validateYear(r.year());d=r.month();f=r.day();var k=this.isIntercalaryMonth(c,d),r=this.toChineseMonth(c,d);if("object"===typeof c)d=r||{};else{if(!("number"===typeof c&&1888<=c&&2111>=c))throw Error("Lunar year outside range 1888-2111");
if(!("number"===typeof r&&1<=r&&12>=r))throw Error("Lunar month outside range 1 - 12");if(!("number"===typeof f&&1<=f&&30>=f))throw Error("Lunar day outside range 1 - 30");if("object"===typeof k){var u=!1;d=k}else u=!!k,d={};c={year:c,month:r,day:f,isIntercalary:u}}r=c.day-1;f=n[c.year-n[0]];k=(k=f>>13)?c.month>k?c.month:c.isIntercalary?c.month:c.month-1:c.month-1;for(u=0;u<k;u++)r+=f&1<<12-u?30:29;c=p[c.year-p[0]];c=new Date(c>>9&4095,(c>>5&15)-1,(c&31)+r);d.year=c.getFullYear();d.month=1+c.getMonth();
d.day=c.getDate();return l.toJD(d.year,d.month,d.day)},fromJD:function(c){var d=l.fromJD(c),f=d.year();c=d.month();d=d.day();if("object"===typeof f)c=c||{};else{if(!("number"===typeof f&&1888<=f&&2111>=f))throw Error("Solar year outside range 1888-2111");if(!("number"===typeof c&&1<=c&&12>=c))throw Error("Solar month outside range 1 - 12");if(!("number"===typeof d&&1<=d&&31>=d))throw Error("Solar day outside range 1 - 31");f={year:f,month:c,day:d};c={}}d=p[f.year-p[0]];c.year=(f.year<<9|f.month<<
5|f.day)>=d?f.year:f.year-1;d=p[c.year-p[0]];f=Math.round((new Date(f.year,f.month-1,f.day)-new Date(d>>9&4095,(d>>5&15)-1,d&31))/864E5);var k=n[c.year-n[0]];for(d=0;13>d;d++){var r=k&1<<12-d?30:29;if(f<r)break;f-=r}k>>=13;!k||d<k?(c.isIntercalary=!1,c.month=1+d):(c.isIntercalary=d===k?!0:!1,c.month=d);c.day=1+f;f=this.toMonthIndex(c.year,c.month,c.isIntercalary);return this.newDate(c.year,f,c.day)},fromString:function(c){c=c.match(h);var d=this._validateYear(+c[1]),f=this.toMonthIndex(d,+c[2],!!c[3]);
return this.newDate(d,f,+c[4])},add:function(c,d,f){var k=c.year(),r=c.month(),u=this.isIntercalaryMonth(k,r);k=this.toChineseMonth(k,r);c=Object.getPrototypeOf(q.prototype).add.call(this,c,d,f);"y"===f&&(d=c.year(),f=c.month(),r=this.isIntercalaryMonth(d,k),u=u&&r?this.toMonthIndex(d,k,!0):this.toMonthIndex(d,k,!1),u!==f&&c.month(u));return c}});var h=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,a=/^\d?\d[iI]?/m,g=/^\u95f0?\u5341?[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]?\u6708/m,
e=/^\u95f0?\u5341?[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]?/m;m.calendars.chinese=q;var n=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,
5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,
52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],p=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,
980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,
1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,
1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,
1079871,1080403,1080904]},{"../main":621,"object-assign":499}],608:[function(b,K,G){function q(l){this.local=this.regionalOptions[l||""]||this.regionalOptions[""]}var m=b("../main");b=b("object-assign");q.prototype=new m.baseCalendar;b(q.prototype,{name:"Coptic",jdEpoch:1825029.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:"Thout;Paopi;Hathor;Koiak;Tobi;Meshir;Paremhat;Paremoude;Pashons;Paoni;Epip;Mesori;Pi Kogi Enavot".split(";"),
monthNamesShort:"Tho Pao Hath Koi Tob Mesh Pat Pad Pash Pao Epi Meso PiK".split(" "),dayNames:"Tkyriaka Pesnau Pshoment Peftoou Ptiou Psoou Psabbaton".split(" "),dayNamesShort:"Tky Pes Psh Pef Pti Pso Psa".split(" "),dayNamesMin:"Tk Pes Psh Pef Pt Pso Psa".split(" "),digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(l){l=this._validate(l,this.minMonth,this.minDay,m.local.invalidYear);l=l.year()+(0>l.year()?1:0);return 3===l%4||-1===l%4},monthsInYear:function(l){this._validate(l,
this.minMonth,this.minDay,m.local.invalidYear||m.regionalOptions[""].invalidYear);return 13},weekOfYear:function(l,h,a){l=this.newDate(l,h,a);l.add(-l.dayOfWeek(),"d");return Math.floor((l.dayOfYear()-1)/7)+1},daysInMonth:function(l,h){l=this._validate(l,h,this.minDay,m.local.invalidMonth);return this.daysPerMonth[l.month()-1]+(13===l.month()&&this.leapYear(l.year())?1:0)},weekDay:function(l,h,a){return 6>(this.dayOfWeek(l,h,a)||7)},toJD:function(l,h,a){h=this._validate(l,h,a,m.local.invalidDate);
l=h.year();0>l&&l++;return h.day()+30*(h.month()-1)+365*(l-1)+Math.floor(l/4)+this.jdEpoch-1},fromJD:function(l){var h=Math.floor(l)+.5-this.jdEpoch,a=Math.floor((h-Math.floor((h+366)/1461))/365)+1;0>=a&&a--;h=Math.floor(l)+.5-this.newDate(a,1,1).toJD();l=Math.floor(h/30)+1;return this.newDate(a,l,h-30*(l-1)+1)}});m.calendars.coptic=q},{"../main":621,"object-assign":499}],609:[function(b,K,G){function q(h){this.local=this.regionalOptions[h||""]||this.regionalOptions[""]}var m=b("../main");b=b("object-assign");
q.prototype=new m.baseCalendar;b(q.prototype,{name:"Discworld",jdEpoch:1721425.5,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:"Ick Offle February March April May June Grune August Spune Sektober Ember December".split(" "),monthNamesShort:"Ick Off Feb Mar Apr May Jun Gru Aug Spu Sek Emb Dec".split(" "),dayNames:"Sunday Octeday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
dayNamesShort:"Sun Oct Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Oc Mo Tu We Th Fr Sa".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(h){this._validate(h,this.minMonth,this.minDay,m.local.invalidYear);return!1},monthsInYear:function(h){this._validate(h,this.minMonth,this.minDay,m.local.invalidYear);return 13},daysInYear:function(h){this._validate(h,this.minMonth,this.minDay,m.local.invalidYear);return 400},weekOfYear:function(h,a,g){h=this.newDate(h,
a,g);h.add(-h.dayOfWeek(),"d");return Math.floor((h.dayOfYear()-1)/8)+1},daysInMonth:function(h,a){h=this._validate(h,a,this.minDay,m.local.invalidMonth);return this.daysPerMonth[h.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(h,a,g){return(this._validate(h,a,g,m.local.invalidDate).day()+1)%8},weekDay:function(h,a,g){h=this.dayOfWeek(h,a,g);return 2<=h&&6>=h},extraInfo:function(h,a,g){h=this._validate(h,a,g,m.local.invalidDate);return{century:l[Math.floor((h.year()-1)/100)+1]||""}},
toJD:function(h,a,g){g=this._validate(h,a,g,m.local.invalidDate);h=g.year()+(0>g.year()?1:0);a=g.month();g=g.day();return g+(1<a?16:0)+(2<a?32*(a-2):0)+400*(h-1)+this.jdEpoch-1},fromJD:function(h){h=Math.floor(h+.5)-Math.floor(this.jdEpoch)-1;var a=Math.floor(h/400)+1;h-=400*(a-1);h+=15<h?16:0;var g=Math.floor(h/32)+1;return this.newDate(0>=a?a-1:a,g,h-32*(g-1)+1)}});var l={20:"Fruitbat",21:"Anchovy"};m.calendars.discworld=q},{"../main":621,"object-assign":499}],610:[function(b,K,G){function q(l){this.local=
this.regionalOptions[l||""]||this.regionalOptions[""]}var m=b("../main");b=b("object-assign");q.prototype=new m.baseCalendar;b(q.prototype,{name:"Ethiopian",jdEpoch:1724220.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:"Meskerem Tikemet Hidar Tahesas Tir Yekatit Megabit Miazia Genbot Sene Hamle Nehase Pagume".split(" "),monthNamesShort:"Mes Tik Hid Tah Tir Yek Meg Mia Gen Sen Ham Neh Pag".split(" "),
dayNames:"Ehud Segno Maksegno Irob Hamus Arb Kidame".split(" "),dayNamesShort:"Ehu Seg Mak Iro Ham Arb Kid".split(" "),dayNamesMin:"Eh Se Ma Ir Ha Ar Ki".split(" "),digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(l){l=this._validate(l,this.minMonth,this.minDay,m.local.invalidYear);l=l.year()+(0>l.year()?1:0);return 3===l%4||-1===l%4},monthsInYear:function(l){this._validate(l,this.minMonth,this.minDay,m.local.invalidYear||m.regionalOptions[""].invalidYear);return 13},weekOfYear:function(l,
h,a){l=this.newDate(l,h,a);l.add(-l.dayOfWeek(),"d");return Math.floor((l.dayOfYear()-1)/7)+1},daysInMonth:function(l,h){l=this._validate(l,h,this.minDay,m.local.invalidMonth);return this.daysPerMonth[l.month()-1]+(13===l.month()&&this.leapYear(l.year())?1:0)},weekDay:function(l,h,a){return 6>(this.dayOfWeek(l,h,a)||7)},toJD:function(l,h,a){h=this._validate(l,h,a,m.local.invalidDate);l=h.year();0>l&&l++;return h.day()+30*(h.month()-1)+365*(l-1)+Math.floor(l/4)+this.jdEpoch-1},fromJD:function(l){var h=
Math.floor(l)+.5-this.jdEpoch,a=Math.floor((h-Math.floor((h+366)/1461))/365)+1;0>=a&&a--;h=Math.floor(l)+.5-this.newDate(a,1,1).toJD();l=Math.floor(h/30)+1;return this.newDate(a,l,h-30*(l-1)+1)}});m.calendars.ethiopian=q},{"../main":621,"object-assign":499}],611:[function(b,K,G){function q(h){this.local=this.regionalOptions[h||""]||this.regionalOptions[""]}function m(h,a){return h-a*Math.floor(h/a)}var l=b("../main");b=b("object-assign");q.prototype=new l.baseCalendar;b(q.prototype,{name:"Hebrew",
jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:"Nisan;Iyar;Sivan;Tammuz;Av;Elul;Tishrei;Cheshvan;Kislev;Tevet;Shevat;Adar;Adar II".split(";"),monthNamesShort:"Nis Iya Siv Tam Av Elu Tis Che Kis Tev She Ada Ad2".split(" "),dayNames:"Yom Rishon;Yom Sheni;Yom Shlishi;Yom Revi'i;Yom Chamishi;Yom Shishi;Yom Shabbat".split(";"),dayNamesShort:"Ris She Shl Rev Cha Shi Sha".split(" "),
dayNamesMin:"Ri She Shl Re Ch Shi Sha".split(" "),digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(h){h=this._validate(h,this.minMonth,this.minDay,l.local.invalidYear);return this._leapYear(h.year())},_leapYear:function(h){return 7>m(7*(0>h?h+1:h)+1,19)},monthsInYear:function(h){this._validate(h,this.minMonth,this.minDay,l.local.invalidYear);return this._leapYear(h.year?h.year():h)?13:12},weekOfYear:function(h,a,g){h=this.newDate(h,a,g);h.add(-h.dayOfWeek(),"d");return Math.floor((h.dayOfYear()-
1)/7)+1},daysInYear:function(h){h=this._validate(h,this.minMonth,this.minDay,l.local.invalidYear).year();return this.toJD(-1===h?1:h+1,7,1)-this.toJD(h,7,1)},daysInMonth:function(h,a){h.year&&(a=h.month(),h=h.year());this._validate(h,a,this.minDay,l.local.invalidMonth);return 12===a&&this.leapYear(h)?30:8===a&&5===m(this.daysInYear(h),10)?30:9===a&&3===m(this.daysInYear(h),10)?29:this.daysPerMonth[a-1]},weekDay:function(h,a,g){return 6!==this.dayOfWeek(h,a,g)},extraInfo:function(h,a,g){h=this._validate(h,
a,g,l.local.invalidDate);return{yearType:(this.leapYear(h)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(h)%10-3]}},toJD:function(h,a,g){g=this._validate(h,a,g,l.local.invalidDate);h=g.year();a=g.month();g=g.day();var e=0>=h?h+1:h;g=this.jdEpoch+this._delay1(e)+this._delay2(e)+g+1;if(7>a){for(e=7;e<=this.monthsInYear(h);e++)g+=this.daysInMonth(h,e);e=1}else e=7;for(;e<a;e++)g+=this.daysInMonth(h,e);return g},_delay1:function(h){h=Math.floor((235*h-234)/19);h=29*h+Math.floor((12084+
13753*h)/25920);3>m(3*(h+1),7)&&h++;return h},_delay2:function(h){var a=this._delay1(h-1),g=this._delay1(h);return 356===this._delay1(h+1)-g?2:382===g-a?1:0},fromJD:function(h){h=Math.floor(h)+.5;for(var a=Math.floor(98496*(h-this.jdEpoch)/35975351)-1;h>=this.toJD(-1===a?1:a+1,7,1);)a++;for(var g=h<this.toJD(a,1,1)?7:1;h>this.toJD(a,g,this.daysInMonth(a,g));)g++;h=h-this.toJD(a,g,1)+1;return this.newDate(a,g,h)}});l.calendars.hebrew=q},{"../main":621,"object-assign":499}],612:[function(b,K,G){function q(l){this.local=
this.regionalOptions[l||""]||this.regionalOptions[""]}var m=b("../main");b=b("object-assign");q.prototype=new m.baseCalendar;b(q.prototype,{name:"Islamic",jdEpoch:1948439.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:"Muharram;Safar;Rabi' al-awwal;Rabi' al-thani;Jumada al-awwal;Jumada al-thani;Rajab;Sha'aban;Ramadan;Shawwal;Dhu al-Qi'dah;Dhu al-Hijjah".split(";"),monthNamesShort:"Muh Saf Rab1 Rab2 Jum1 Jum2 Raj Sha' Ram Shaw DhuQ DhuH".split(" "),
dayNames:"Yawm al-ahad;Yawm al-ithnayn;Yawm ath-thulaathaa';Yawm al-arbi'aa';Yawm al-kham\u012bs;Yawm al-jum'a;Yawm as-sabt".split(";"),dayNamesShort:"Aha Ith Thu Arb Kha Jum Sab".split(" "),dayNamesMin:"Ah It Th Ar Kh Ju Sa".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(l){return 11>(11*this._validate(l,this.minMonth,this.minDay,m.local.invalidYear).year()+14)%30},weekOfYear:function(l,h,a){l=this.newDate(l,h,a);l.add(-l.dayOfWeek(),"d");return Math.floor((l.dayOfYear()-
1)/7)+1},daysInYear:function(l){return this.leapYear(l)?355:354},daysInMonth:function(l,h){l=this._validate(l,h,this.minDay,m.local.invalidMonth);return this.daysPerMonth[l.month()-1]+(12===l.month()&&this.leapYear(l.year())?1:0)},weekDay:function(l,h,a){return 5!==this.dayOfWeek(l,h,a)},toJD:function(l,h,a){a=this._validate(l,h,a,m.local.invalidDate);l=a.year();h=a.month();a=a.day();l=0>=l?l+1:l;return a+Math.ceil(29.5*(h-1))+354*(l-1)+Math.floor((3+11*l)/30)+this.jdEpoch-1},fromJD:function(l){l=
Math.floor(l)+.5;var h=Math.floor((30*(l-this.jdEpoch)+10646)/10631);h=0>=h?h-1:h;var a=Math.min(12,Math.ceil((l-29-this.toJD(h,1,1))/29.5)+1);l=l-this.toJD(h,a,1)+1;return this.newDate(h,a,l)}});m.calendars.islamic=q},{"../main":621,"object-assign":499}],613:[function(b,K,G){function q(l){this.local=this.regionalOptions[l||""]||this.regionalOptions[""]}var m=b("../main");b=b("object-assign");q.prototype=new m.baseCalendar;b(q.prototype,{name:"Julian",jdEpoch:1721423.5,daysPerMonth:[31,28,31,30,31,
30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),digits:null,
dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(l){l=this._validate(l,this.minMonth,this.minDay,m.local.invalidYear);l=0>l.year()?l.year()+1:l.year();return 0===l%4},weekOfYear:function(l,h,a){l=this.newDate(l,h,a);l.add(4-(l.dayOfWeek()||7),"d");return Math.floor((l.dayOfYear()-1)/7)+1},daysInMonth:function(l,h){l=this._validate(l,h,this.minDay,m.local.invalidMonth);return this.daysPerMonth[l.month()-1]+(2===l.month()&&this.leapYear(l.year())?1:0)},weekDay:function(l,h,a){return 6>
(this.dayOfWeek(l,h,a)||7)},toJD:function(l,h,a){a=this._validate(l,h,a,m.local.invalidDate);l=a.year();h=a.month();a=a.day();0>l&&l++;2>=h&&(l--,h+=12);return Math.floor(365.25*(l+4716))+Math.floor(30.6001*(h+1))+a-1524.5},fromJD:function(l){var h=Math.floor(l+.5)+1524,a=Math.floor((h-122.1)/365.25),g=Math.floor(365.25*a),e=Math.floor((h-g)/30.6001);l=e-Math.floor(14>e?1:13);a-=Math.floor(2<l?4716:4715);h=h-g-Math.floor(30.6001*e);0>=a&&a--;return this.newDate(a,l,h)}});m.calendars.julian=q},{"../main":621,
"object-assign":499}],614:[function(b,K,G){function q(h){this.local=this.regionalOptions[h||""]||this.regionalOptions[""]}function m(h,a){return h-a*Math.floor(h/a)}var l=b("../main");b=b("object-assign");q.prototype=new l.baseCalendar;b(q.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:"0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17".split(" "),monthNamesShort:"0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17".split(" "),
dayNames:"0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19".split(" "),dayNamesShort:"0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19".split(" "),dayNamesMin:"0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19".split(" "),digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:"Pop Uo Zip Zotz Tzec Xul Yaxkin Mol Chen Yax Zac Ceh Mac Kankin Muan Pax Kayab Cumku Uayeb".split(" "),tzolkinMonths:"Imix Ik Akbal Kan Chicchan Cimi Manik Lamat Muluc Oc Chuen Eb Ben Ix Men Cib Caban Etznab Cauac Ahau".split(" ")}},
leapYear:function(h){this._validate(h,this.minMonth,this.minDay,l.local.invalidYear);return!1},formatYear:function(h){h=this._validate(h,this.minMonth,this.minDay,l.local.invalidYear).year();var a=Math.floor(h/400);h%=400;h+=0>h?400:0;return a+"."+Math.floor(h/20)+"."+h%20},forYear:function(h){h=h.split(".");if(3>h.length)throw"Invalid Mayan year";for(var a=0,g=0;g<h.length;g++){var e=parseInt(h[g],10);if(19<Math.abs(e)||0<g&&0>e)throw"Invalid Mayan year";a=20*a+e}return a},monthsInYear:function(h){this._validate(h,
this.minMonth,this.minDay,l.local.invalidYear);return 18},weekOfYear:function(h,a,g){this._validate(h,a,g,l.local.invalidDate);return 0},daysInYear:function(h){this._validate(h,this.minMonth,this.minDay,l.local.invalidYear);return 360},daysInMonth:function(h,a){this._validate(h,a,this.minDay,l.local.invalidMonth);return 20},daysInWeek:function(){return 5},dayOfWeek:function(h,a,g){return this._validate(h,a,g,l.local.invalidDate).day()},weekDay:function(h,a,g){this._validate(h,a,g,l.local.invalidDate);
return!0},extraInfo:function(h,a,g){a=this._validate(h,a,g,l.local.invalidDate).toJD();h=this._toHaab(a);a=this._toTzolkin(a);return{haabMonthName:this.local.haabMonths[h[0]-1],haabMonth:h[0],haabDay:h[1],tzolkinDayName:this.local.tzolkinMonths[a[0]-1],tzolkinDay:a[0],tzolkinTrecena:a[1]}},_toHaab:function(h){h-=this.jdEpoch;h=m(h+8+340,365);return[Math.floor(h/20)+1,m(h,20)]},_toTzolkin:function(h){h-=this.jdEpoch;return[m(h+20-1,20)+1,m(h+4-1,13)+1]},toJD:function(h,a,g){h=this._validate(h,a,g,
l.local.invalidDate);return h.day()+20*h.month()+360*h.year()+this.jdEpoch},fromJD:function(h){h=Math.floor(h)+.5-this.jdEpoch;var a=Math.floor(h/360);h%=360;h+=0>h?360:0;return this.newDate(a,Math.floor(h/20),h%20)}});l.calendars.mayan=q},{"../main":621,"object-assign":499}],615:[function(b,K,G){function q(h){this.local=this.regionalOptions[h||""]||this.regionalOptions[""]}var m=b("../main");b=b("object-assign");q.prototype=new m.baseCalendar;var l=m.instance("gregorian");b(q.prototype,{name:"Nanakshahi",
jdEpoch:2257673.5,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:"Chet Vaisakh Jeth Harh Sawan Bhadon Assu Katak Maghar Poh Magh Phagun".split(" "),monthNamesShort:"Che Vai Jet Har Saw Bha Ass Kat Mgr Poh Mgh Pha".split(" "),dayNames:"Somvaar Mangalvar Budhvaar Veervaar Shukarvaar Sanicharvaar Etvaar".split(" "),dayNamesShort:"Som Mangal Budh Veer Shukar Sanichar Et".split(" "),
dayNamesMin:"So Ma Bu Ve Sh Sa Et".split(" "),digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(h){h=this._validate(h,this.minMonth,this.minDay,m.local.invalidYear||m.regionalOptions[""].invalidYear);return l.leapYear(h.year()+(1>h.year()?1:0)+1469)},weekOfYear:function(h,a,g){h=this.newDate(h,a,g);h.add(1-(h.dayOfWeek()||7),"d");return Math.floor((h.dayOfYear()-1)/7)+1},daysInMonth:function(h,a){h=this._validate(h,a,this.minDay,m.local.invalidMonth);return this.daysPerMonth[h.month()-
1]+(12===h.month()&&this.leapYear(h.year())?1:0)},weekDay:function(h,a,g){return 6>(this.dayOfWeek(h,a,g)||7)},toJD:function(h,a,g){a=this._validate(h,a,g,m.local.invalidMonth);h=a.year();0>h&&h++;g=a.day();for(var e=1;e<a.month();e++)g+=this.daysPerMonth[e-1];return g+l.toJD(h+1468,3,13)},fromJD:function(h){h=Math.floor(h+.5);for(var a=Math.floor((h-(this.jdEpoch-1))/366);h>=this.toJD(a+1,1,1);)a++;h=h-Math.floor(this.toJD(a,1,1)+.5)+1;for(var g=1;h>this.daysInMonth(a,g);)h-=this.daysInMonth(a,g),
g++;return this.newDate(a,g,h)}});m.calendars.nanakshahi=q},{"../main":621,"object-assign":499}],616:[function(b,K,G){function q(l){this.local=this.regionalOptions[l||""]||this.regionalOptions[""]}var m=b("../main");b=b("object-assign");q.prototype=new m.baseCalendar;b(q.prototype,{name:"Nepali",jdEpoch:1700709.5,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:"Baisakh Jestha Ashadh Shrawan Bhadra Ashwin Kartik Mangsir Paush Mangh Falgun Chaitra".split(" "),
monthNamesShort:"Bai Je As Shra Bha Ash Kar Mang Pau Ma Fal Chai".split(" "),dayNames:"Aaitabaar Sombaar Manglbaar Budhabaar Bihibaar Shukrabaar Shanibaar".split(" "),dayNamesShort:"Aaita Som Mangl Budha Bihi Shukra Shani".split(" "),dayNamesMin:"Aai So Man Bu Bi Shu Sha".split(" "),digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(l){return this.daysInYear(l)!==this.daysPerYear},weekOfYear:function(l,h,a){l=this.newDate(l,h,a);l.add(-l.dayOfWeek(),"d");return Math.floor((l.dayOfYear()-
1)/7)+1},daysInYear:function(l){l=this._validate(l,this.minMonth,this.minDay,m.local.invalidYear).year();if("undefined"===typeof this.NEPALI_CALENDAR_DATA[l])return this.daysPerYear;for(var h=0,a=this.minMonth;12>=a;a++)h+=this.NEPALI_CALENDAR_DATA[l][a];return h},daysInMonth:function(l,h){l.year&&(h=l.month(),l=l.year());this._validate(l,h,this.minDay,m.local.invalidMonth);return"undefined"===typeof this.NEPALI_CALENDAR_DATA[l]?this.daysPerMonth[h-1]:this.NEPALI_CALENDAR_DATA[l][h]},weekDay:function(l,
h,a){return 6!==this.dayOfWeek(l,h,a)},toJD:function(l,h,a){a=this._validate(l,h,a,m.local.invalidDate);l=a.year();h=a.month();a=a.day();var g=m.instance(),e=0,n=h,p=l;this._createMissingCalendarData(l);l-=9<n||9===n&&a>=this.NEPALI_CALENDAR_DATA[p][0]?56:57;9!==h&&(e=a,n--);for(;9!==n;)0>=n&&(n=12,p--),e+=this.NEPALI_CALENDAR_DATA[p][n],n--;9===h?(e+=a-this.NEPALI_CALENDAR_DATA[p][0],0>e&&(e+=g.daysInYear(l))):e+=this.NEPALI_CALENDAR_DATA[p][9]-this.NEPALI_CALENDAR_DATA[p][0];return g.newDate(l,
1,1).add(e,"d").toJD()},fromJD:function(l){l=m.instance().fromJD(l);var h=l.year();l=l.dayOfYear();h+=56;this._createMissingCalendarData(h);for(var a=9,g=this.NEPALI_CALENDAR_DATA[h][a]-this.NEPALI_CALENDAR_DATA[h][0]+1;l>g;)a++,12<a&&(a=1,h++),g+=this.NEPALI_CALENDAR_DATA[h][a];return this.newDate(h,a,this.NEPALI_CALENDAR_DATA[h][a]-(g-l))},_createMissingCalendarData:function(l){var h=this.daysPerMonth.slice(0);h.unshift(17);for(var a=l-1;a<l+2;a++)"undefined"===typeof this.NEPALI_CALENDAR_DATA[a]&&
(this.NEPALI_CALENDAR_DATA[a]=h)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,
30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,
29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2E3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,
30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,
31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,
31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,
32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,
31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,
31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,
31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,
31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,
31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,
31,32,31,32,30,31,30,29,30,29,30,30]}});m.calendars.nepali=q},{"../main":621,"object-assign":499}],617:[function(b,K,G){function q(l){this.local=this.regionalOptions[l||""]||this.regionalOptions[""]}var m=b("../main");b=b("object-assign");q.prototype=new m.baseCalendar;b(q.prototype,{name:"Persian",jdEpoch:1948320.5,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:"Farvardin Ordibehesht Khordad Tir Mordad Shahrivar Mehr Aban Azar Day Bahman Esfand".split(" "),
monthNamesShort:"Far Ord Kho Tir Mor Sha Meh Aba Aza Day Bah Esf".split(" "),dayNames:"Yekshambe Doshambe Seshambe Ch\u00e6harshambe Panjshambe Jom'e Shambe".split(" "),dayNamesShort:"Yek Do Se Ch\u00e6 Panj Jom Sha".split(" "),dayNamesMin:"Ye Do Se Ch Pa Jo Sh".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(l){l=this._validate(l,this.minMonth,this.minDay,m.local.invalidYear);return 682>682*((l.year()-(0<l.year()?474:473))%2820+512)%2816},weekOfYear:function(l,
h,a){l=this.newDate(l,h,a);l.add(-((l.dayOfWeek()+1)%7),"d");return Math.floor((l.dayOfYear()-1)/7)+1},daysInMonth:function(l,h){l=this._validate(l,h,this.minDay,m.local.invalidMonth);return this.daysPerMonth[l.month()-1]+(12===l.month()&&this.leapYear(l.year())?1:0)},weekDay:function(l,h,a){return 5!==this.dayOfWeek(l,h,a)},toJD:function(l,h,a){a=this._validate(l,h,a,m.local.invalidDate);l=a.year();h=a.month();a=a.day();l-=0<=l?474:473;var g=474+(l-2820*Math.floor(l/2820));return a+(7>=h?31*(h-1):
30*(h-1)+6)+Math.floor((682*g-110)/2816)+365*(g-1)+1029983*Math.floor(l/2820)+this.jdEpoch-1},fromJD:function(l){l=Math.floor(l)+.5;var h=l-this.toJD(475,1,1),a=Math.floor(h/1029983);h-=1029983*Math.floor(h/1029983);var g=2820;1029982!==h&&(g=Math.floor(h/366),g=Math.floor((2134*g+2816*(h-366*Math.floor(h/366))+2815)/1028522)+g+1);a=g+2820*a+474;a=0>=a?a-1:a;h=l-this.toJD(a,1,1)+1;h=186>=h?Math.ceil(h/31):Math.ceil((h-6)/30);l=l-this.toJD(a,h,1)+1;return this.newDate(a,h,l)}});m.calendars.persian=
q;m.calendars.jalali=q},{"../main":621,"object-assign":499}],618:[function(b,K,G){function q(h){this.local=this.regionalOptions[h||""]||this.regionalOptions[""]}var m=b("../main");b=b("object-assign");var l=m.instance();q.prototype=new m.baseCalendar;b(q.prototype,{name:"Taiwan",jdEpoch:2419402.5,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:"January February March April May June July August September October November December".split(" "),
monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(h){h=this._validate(h,this.minMonth,this.minDay,m.local.invalidYear);h=this._t2gYear(h.year());return l.leapYear(h)},weekOfYear:function(h,a,g){a=this._validate(h,this.minMonth,
this.minDay,m.local.invalidYear);h=this._t2gYear(a.year());return l.weekOfYear(h,a.month(),a.day())},daysInMonth:function(h,a){h=this._validate(h,a,this.minDay,m.local.invalidMonth);return this.daysPerMonth[h.month()-1]+(2===h.month()&&this.leapYear(h.year())?1:0)},weekDay:function(h,a,g){return 6>(this.dayOfWeek(h,a,g)||7)},toJD:function(h,a,g){a=this._validate(h,a,g,m.local.invalidDate);h=this._t2gYear(a.year());return l.toJD(h,a.month(),a.day())},fromJD:function(h){h=l.fromJD(h);var a=this._g2tYear(h.year());
return this.newDate(a,h.month(),h.day())},_t2gYear:function(h){return h+this.yearsOffset+(h>=-this.yearsOffset&&-1>=h?1:0)},_g2tYear:function(h){return h-this.yearsOffset-(1<=h&&h<=this.yearsOffset?1:0)}});m.calendars.taiwan=q},{"../main":621,"object-assign":499}],619:[function(b,K,G){function q(h){this.local=this.regionalOptions[h||""]||this.regionalOptions[""]}var m=b("../main");b=b("object-assign");var l=m.instance();q.prototype=new m.baseCalendar;b(q.prototype,{name:"Thai",jdEpoch:1523098.5,yearsOffset:543,
daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),
digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(h){h=this._validate(h,this.minMonth,this.minDay,m.local.invalidYear);h=this._t2gYear(h.year());return l.leapYear(h)},weekOfYear:function(h,a,g){a=this._validate(h,this.minMonth,this.minDay,m.local.invalidYear);h=this._t2gYear(a.year());return l.weekOfYear(h,a.month(),a.day())},daysInMonth:function(h,a){h=this._validate(h,a,this.minDay,m.local.invalidMonth);return this.daysPerMonth[h.month()-1]+(2===h.month()&&this.leapYear(h.year())?
1:0)},weekDay:function(h,a,g){return 6>(this.dayOfWeek(h,a,g)||7)},toJD:function(h,a,g){a=this._validate(h,a,g,m.local.invalidDate);h=this._t2gYear(a.year());return l.toJD(h,a.month(),a.day())},fromJD:function(h){h=l.fromJD(h);var a=this._g2tYear(h.year());return this.newDate(a,h.month(),h.day())},_t2gYear:function(h){return h-this.yearsOffset-(1<=h&&h<=this.yearsOffset?1:0)},_g2tYear:function(h){return h+this.yearsOffset+(h>=-this.yearsOffset&&-1>=h?1:0)}});m.calendars.thai=q},{"../main":621,"object-assign":499}],
620:[function(b,K,G){function q(h){this.local=this.regionalOptions[h||""]||this.regionalOptions[""]}var m=b("../main");b=b("object-assign");q.prototype=new m.baseCalendar;b(q.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:"Al-Muharram;Safar;Rabi' al-awwal;Rabi' Al-Thani;Jumada Al-Awwal;Jumada Al-Thani;Rajab;Sha'aban;Ramadan;Shawwal;Dhu al-Qi'dah;Dhu al-Hijjah".split(";"),monthNamesShort:"Muh Saf Rab1 Rab2 Jum1 Jum2 Raj Sha' Ram Shaw DhuQ DhuH".split(" "),
dayNames:"Yawm al-Ahad;Yawm al-Ithnain;Yawm al-Thal\u0101th\u0101\u2019;Yawm al-Arba\u2018\u0101\u2019;Yawm al-Kham\u012bs;Yawm al-Jum\u2018a;Yawm al-Sabt".split(";"),dayNamesMin:"Ah Ith Th Ar Kh Ju Sa".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(h){h=this._validate(h,this.minMonth,this.minDay,m.local.invalidYear);return 355===this.daysInYear(h.year())},weekOfYear:function(h,a,g){h=this.newDate(h,a,g);h.add(-h.dayOfWeek(),"d");return Math.floor((h.dayOfYear()-
1)/7)+1},daysInYear:function(h){for(var a=0,g=1;12>=g;g++)a+=this.daysInMonth(h,g);return a},daysInMonth:function(h,a){h=this._validate(h,a,this.minDay,m.local.invalidMonth).toJD()-24E5+.5;for(var g=a=0;g<l.length;g++){if(l[g]>h)return l[a]-l[a-1];a++}return 30},weekDay:function(h,a,g){return 5!==this.dayOfWeek(h,a,g)},toJD:function(h,a,g){h=this._validate(h,a,g,m.local.invalidDate);a=12*(h.year()-1)+h.month()-15292;return h.day()+l[a-1]-1+24E5-.5},fromJD:function(h){h=h-24E5+.5;for(var a=0,g=0;g<
l.length&&!(l[g]>h);g++)a++;g=a+15292;var e=Math.floor((g-1)/12);return this.newDate(e+1,g-12*e,h-l[a-1]+1)},isValid:function(h,a,g){var e=m.baseCalendar.prototype.isValid.apply(this,arguments);e&&(h=null!=h.year?h.year:h,e=1276<=h&&1500>=h);return e},_validate:function(h,a,g,e){var n=m.baseCalendar.prototype._validate.apply(this,arguments);if(1276>n.year||1500<n.year)throw e.replace(/\{0\}/,this.local.name);return n}});m.calendars.ummalqura=q;var l=[20,50,79,109,138,168,197,227,256,286,315,345,374,
404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,
3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,
6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,
9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,
12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,
14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,
17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,
19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,
21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,
24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,
26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,
29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,
31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,
34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,
36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,
39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,
41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,
44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,
46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,
49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,
51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,
54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,
56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,
59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,
61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,
64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,
66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68E3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,
69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,
71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,
74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,
76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,
79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},{"../main":621,"object-assign":499}],621:[function(b,K,G){function q(){this.regionalOptions=[];this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"};
this.local=this.regionalOptions[""];this.calendars={};this._localCals={}}function m(e,n,p,c){this._calendar=e;this._year=n;this._month=p;this._day=c;if(0===this._calendar._validateLevel&&!this._calendar.isValid(this._year,this._month,this._day))throw(g.local.invalidDate||g.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);}function l(e,n){e=""+e;return"000000".substring(0,n-e.length)+e}function h(){this.shortYearCutoff="+10"}function a(e){this.local=this.regionalOptions[e]||
this.regionalOptions[""]}b=b("object-assign");b(q.prototype,{instance:function(e,n){e=(e||"gregorian").toLowerCase();n=n||"";var p=this._localCals[e+"-"+n];!p&&this.calendars[e]&&(p=new this.calendars[e](n),this._localCals[e+"-"+n]=p);if(!p)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,e);return p},newDate:function(e,n,p,c,d){c=(null!=e&&e.year?e.calendar():"string"===typeof c?this.instance(c,d):c)||this.instance();return c.newDate(e,n,p)},substituteDigits:function(e){return function(n){return(n+
"").replace(/[0-9]/g,function(p){return e[p]})}},substituteChineseDigits:function(e,n){return function(p){for(var c="",d=0;0<p;){var f=p%10;c=(0===f?"":e[f]+n[d])+c;d++;p=Math.floor(p/10)}0===c.indexOf(e[1]+n[1])&&(c=c.substr(1));return c||e[0]}}});b(m.prototype,{newDate:function(e,n,p){return this._calendar.newDate(null==e?this:e,n,p)},year:function(e){return 0===arguments.length?this._year:this.set(e,"y")},month:function(e){return 0===arguments.length?this._month:this.set(e,"m")},day:function(e){return 0===
arguments.length?this._day:this.set(e,"d")},date:function(e,n,p){if(!this._calendar.isValid(e,n,p))throw(g.local.invalidDate||g.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);this._year=e;this._month=n;this._day=p;return this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},
daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(e,n){return this._calendar.add(this,e,n)},set:function(e,n){return this._calendar.set(this,e,n)},compareTo:function(e){if(this._calendar.name!==
e._calendar.name)throw(g.local.differentCalendars||g.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,e._calendar.local.name);e=this._year!==e._year?this._year-e._year:this._month!==e._month?this.monthOfYear()-e.monthOfYear():this._day-e._day;return 0===e?0:0>e?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(e){return this._calendar.fromJD(e)},toJSDate:function(){return this._calendar.toJSDate(this)},
fromJSDate:function(e){return this._calendar.fromJSDate(e)},toString:function(){return(0>this.year()?"-":"")+l(Math.abs(this.year()),4)+"-"+l(this.month(),2)+"-"+l(this.day(),2)}});b(h.prototype,{_validateLevel:0,newDate:function(e,n,p){if(null==e)return this.today();e.year&&(this._validate(e,n,p,g.local.invalidDate||g.regionalOptions[""].invalidDate),p=e.day(),n=e.month(),e=e.year());return new m(this,e,n,p)},today:function(){return this.fromJSDate(new Date)},epoch:function(e){return 0>this._validate(e,
this.minMonth,this.minDay,g.local.invalidYear||g.regionalOptions[""].invalidYear).year()?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(e){e=this._validate(e,this.minMonth,this.minDay,g.local.invalidYear||g.regionalOptions[""].invalidYear);return(0>e.year()?"-":"")+l(Math.abs(e.year()),4)},monthsInYear:function(e){this._validate(e,this.minMonth,this.minDay,g.local.invalidYear||g.regionalOptions[""].invalidYear);return 12},monthOfYear:function(e,n){e=this._validate(e,n,this.minDay,
g.local.invalidMonth||g.regionalOptions[""].invalidMonth);return(e.month()+this.monthsInYear(e)-this.firstMonth)%this.monthsInYear(e)+this.minMonth},fromMonthOfYear:function(e,n){n=(n+this.firstMonth-2*this.minMonth)%this.monthsInYear(e)+this.minMonth;this._validate(e,n,this.minDay,g.local.invalidMonth||g.regionalOptions[""].invalidMonth);return n},daysInYear:function(e){e=this._validate(e,this.minMonth,this.minDay,g.local.invalidYear||g.regionalOptions[""].invalidYear);return this.leapYear(e)?366:
365},dayOfYear:function(e,n,p){e=this._validate(e,n,p,g.local.invalidDate||g.regionalOptions[""].invalidDate);return e.toJD()-this.newDate(e.year(),this.fromMonthOfYear(e.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(e,n,p){e=this._validate(e,n,p,g.local.invalidDate||g.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(e))+2)%this.daysInWeek()},extraInfo:function(e,n,p){this._validate(e,n,p,g.local.invalidDate||g.regionalOptions[""].invalidDate);
return{}},add:function(e,n,p){this._validate(e,this.minMonth,this.minDay,g.local.invalidDate||g.regionalOptions[""].invalidDate);return this._correctAdd(e,this._add(e,n,p),n,p)},_add:function(e,n,p){this._validateLevel++;if("d"===p||"w"===p){n=e.toJD()+n*("w"===p?this.daysInWeek():1);var c=e.calendar().fromJD(n);this._validateLevel--;return[c.year(),c.month(),c.day()]}try{var d=e.year()+("y"===p?n:0),f=e.monthOfYear()+("m"===p?n:0);c=e.day();if("y"===p)e.month()!==this.fromMonthOfYear(d,f)&&(f=this.newDate(d,
e.month(),this.minDay).monthOfYear()),f=Math.min(f,this.monthsInYear(d)),c=Math.min(c,this.daysInMonth(d,this.fromMonthOfYear(d,f)));else if("m"===p){for(;f<this.minMonth;)d--,f+=this.monthsInYear(d);for(var k=this.monthsInYear(d);f>k-1+this.minMonth;)d++,f-=k,k=this.monthsInYear(d);c=Math.min(c,this.daysInMonth(d,this.fromMonthOfYear(d,f)))}var r=[d,this.fromMonthOfYear(d,f),c];this._validateLevel--;return r}catch(u){throw this._validateLevel--,u;}},_correctAdd:function(e,n,p,c){this.hasYearZero||
"y"!==c&&"m"!==c||0!==n[0]&&0<e.year()===0<n[0]||(n={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[c],n=this._add(e,p*n[0]+(0>p?-1:1)*n[1],n[2]));return e.date(n[0],n[1],n[2])},set:function(e,n,p){this._validate(e,this.minMonth,this.minDay,g.local.invalidDate||g.regionalOptions[""].invalidDate);var c="y"===p?n:e.year(),d="m"===p?n:e.month();n="d"===p?n:e.day();if("y"===p||"m"===p)n=Math.min(n,this.daysInMonth(c,d));return e.date(c,
d,n)},isValid:function(e,n,p){this._validateLevel++;var c=this.hasYearZero||0!==e;c&&(e=this.newDate(e,n,this.minDay),c=n>=this.minMonth&&n-this.minMonth<this.monthsInYear(e)&&p>=this.minDay&&p-this.minDay<this.daysInMonth(e));this._validateLevel--;return c},toJSDate:function(e,n,p){e=this._validate(e,n,p,g.local.invalidDate||g.regionalOptions[""].invalidDate);return g.instance().fromJD(this.toJD(e)).toJSDate()},fromJSDate:function(e){return this.fromJD(g.instance().fromJSDate(e).toJD())},_validate:function(e,
n,p,c){if(e.year){if(0===this._validateLevel&&this.name!==e.calendar().name)throw(g.local.differentCalendars||g.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,e.calendar().local.name);return e}try{this._validateLevel++;if(1===this._validateLevel&&!this.isValid(e,n,p))throw c.replace(/\{0\}/,this.local.name);var d=this.newDate(e,n,p);this._validateLevel--;return d}catch(f){throw this._validateLevel--,f;}}});a.prototype=new h;b(a.prototype,{name:"Gregorian",
jdEpoch:1721425.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),
digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){e=this._validate(e,this.minMonth,this.minDay,g.local.invalidYear||g.regionalOptions[""].invalidYear);e=e.year()+(0>e.year()?1:0);return 0===e%4&&(0!==e%100||0===e%400)},weekOfYear:function(e,n,p){e=this.newDate(e,n,p);e.add(4-(e.dayOfWeek()||7),"d");return Math.floor((e.dayOfYear()-1)/7)+1},daysInMonth:function(e,n){e=this._validate(e,n,this.minDay,g.local.invalidMonth||g.regionalOptions[""].invalidMonth);return this.daysPerMonth[e.month()-
1]+(2===e.month()&&this.leapYear(e.year())?1:0)},weekDay:function(e,n,p){return 6>(this.dayOfWeek(e,n,p)||7)},toJD:function(e,n,p){p=this._validate(e,n,p,g.local.invalidDate||g.regionalOptions[""].invalidDate);e=p.year();n=p.month();p=p.day();0>e&&e++;3>n&&(n+=12,e--);var c=Math.floor(e/100);return Math.floor(365.25*(e+4716))+Math.floor(30.6001*(n+1))+p+(2-c+Math.floor(c/4))-1524.5},fromJD:function(e){e=Math.floor(e+.5);var n=Math.floor((e-1867216.25)/36524.25);n=e+1+n-Math.floor(n/4);var p=n+1524;
e=Math.floor((p-122.1)/365.25);var c=Math.floor(365.25*e);n=Math.floor((p-c)/30.6001);p=p-c-Math.floor(30.6001*n);n-=13.5<n?13:1;e-=2.5<n?4716:4715;0>=e&&e--;return this.newDate(e,n,p)},toJSDate:function(e,n,p){e=this._validate(e,n,p,g.local.invalidDate||g.regionalOptions[""].invalidDate);e=new Date(e.year(),e.month()-1,e.day());e.setHours(0);e.setMinutes(0);e.setSeconds(0);e.setMilliseconds(0);e.setHours(12<e.getHours()?e.getHours()+2:0);return e},fromJSDate:function(e){return this.newDate(e.getFullYear(),
e.getMonth()+1,e.getDate())}});var g=K.exports=new q;g.cdate=m;g.baseCalendar=h;g.calendars.gregorian=a},{"object-assign":499}],622:[function(b,K,G){K=b("object-assign");var q=b("./main");K(q.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"});
q.local=q.regionalOptions[""];K(q.cdate.prototype,{formatDate:function(m,l){"string"!==typeof m&&(l=m,m="");return this._calendar.formatDate(m||"",this,l)}});K(q.baseCalendar.prototype,{UNIX_EPOCH:q.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:q.instance().jdEpoch,TICKS_PER_DAY:864E9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",
RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(m,l,h){"string"!==typeof m&&(h=l,l=m,m="");if(!l)return"";if(l.calendar()!==this)throw q.local.invalidFormat||q.regionalOptions[""].invalidFormat;m=m||this.local.dateFormat;h=h||{};for(var a=h.dayNamesShort||this.local.dayNamesShort,g=h.dayNames||this.local.dayNames,e=h.monthNumbers||this.local.monthNumbers,n=h.monthNamesShort||this.local.monthNamesShort,p=h.monthNames||this.local.monthNames,c=function(D,A){for(var t=1;y+
t<m.length&&m.charAt(y+t)===D;)t++;y+=t-1;return 1<Math.floor(t/(A||1))},d=function(D,A,t,B){A=""+A;if(c(D,B))for(;A.length<t;)A="0"+A;return A},f=function(D,A,t,B){return c(D)?B[A]:t[A]},k=this,r=function(D){return"function"===typeof e?e.call(k,D,c("m")):x(d("m",D.month(),2))},u=function(D,A){return A?"function"===typeof p?p.call(k,D):p[D.month()-k.minMonth]:"function"===typeof n?n.call(k,D):n[D.month()-k.minMonth]},v=this.local.digits,x=function(D){return h.localNumbers&&v?v(D):D},C="",z=!1,y=0;y<
m.length;y++)if(z)"'"!==m.charAt(y)||c("'")?C+=m.charAt(y):z=!1;else switch(m.charAt(y)){case "d":C+=x(d("d",l.day(),2));break;case "D":C+=f("D",l.dayOfWeek(),a,g);break;case "o":C+=d("o",l.dayOfYear(),3);break;case "w":C+=d("w",l.weekOfYear(),2);break;case "m":C+=r(l);break;case "M":C+=u(l,c("M"));break;case "y":C+=c("y",2)?l.year():(10>l.year()%100?"0":"")+l.year()%100;break;case "Y":c("Y",2);C+=l.formatYear();break;case "J":C+=l.toJD();break;case "@":C+=(l.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;
break;case "!":C+=(l.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case "'":c("'")?C+="'":z=!0;break;default:C+=m.charAt(y)}return C},parseDate:function(m,l,h){if(null==l)throw q.local.invalidArguments||q.regionalOptions[""].invalidArguments;l="object"===typeof l?l.toString():l+"";if(""===l)return null;m=m||this.local.dateFormat;h=h||{};var a=h.shortYearCutoff||this.shortYearCutoff;a="string"!==typeof a?a:this.today().year()%100+parseInt(a,10);for(var g=h.dayNamesShort||this.local.dayNamesShort,
e=h.dayNames||this.local.dayNames,n=h.parseMonth||this.local.parseMonth,p=h.monthNumbers||this.local.monthNumbers,c=h.monthNamesShort||this.local.monthNamesShort,d=h.monthNames||this.local.monthNames,f=h=-1,k=-1,r=-1,u=-1,v=!1,x=!1,C=function(J,L){for(var H=1;I+H<m.length&&m.charAt(I+H)===J;)H++;I+=H-1;return 1<Math.floor(H/(L||1))},z=function(J,L){L=C(J,L);J=[2,3,L?4:2,L?4:2,10,11,20]["oyYJ@!".indexOf(J)+1];J=new RegExp("^-?\\d{1,"+J+"}");J=l.substring(F).match(J);if(!J)throw(q.local.missingNumberAt||
q.regionalOptions[""].missingNumberAt).replace(/\{0\}/,F);F+=J[0].length;return parseInt(J[0],10)},y=this,D=function(){if("function"===typeof p){C("m");var J=p.call(y,l.substring(F));F+=J.length;return J}return z("m")},A=function(J,L,H,P){J=C(J,P)?H:L;for(L=0;L<J.length;L++)if(l.substr(F,J[L].length).toLowerCase()===J[L].toLowerCase())return F+=J[L].length,L+y.minMonth;throw(q.local.unknownNameAt||q.regionalOptions[""].unknownNameAt).replace(/\{0\}/,F);},t=function(){if("function"===typeof d){var J=
C("M")?d.call(y,l.substring(F)):c.call(y,l.substring(F));F+=J.length;return J}return A("M",c,d)},B=function(){if(l.charAt(F)!==m.charAt(I))throw(q.local.unexpectedLiteralAt||q.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,F);F++},F=0,I=0;I<m.length;I++)if(x)"'"!==m.charAt(I)||C("'")?B():x=!1;else switch(m.charAt(I)){case "d":r=z("d");break;case "D":A("D",g,e);break;case "o":u=z("o");break;case "w":z("w");break;case "m":k=D();break;case "M":k=t();break;case "y":f=I;v=!C("y",2);I=f;f=z("y",
2);break;case "Y":f=z("Y",2);break;case "J":h=z("J")+.5;"."===l.charAt(F)&&(F++,z("J"));break;case "@":h=z("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case "!":h=z("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case "*":F=l.length;break;case "'":C("'")?B():x=!0;break;default:B()}if(F<l.length)throw q.local.unexpectedText||q.regionalOptions[""].unexpectedText;-1===f?f=this.today().year():100>f&&v&&(f+=-1===a?1900:this.today().year()-this.today().year()%100-(f<=a?0:100));"string"===typeof k&&(k=n.call(this,
f,k));if(-1<u)for(k=1,r=u,a=this.daysInMonth(f,k);r>a;a=this.daysInMonth(f,k))k++,r-=a;return-1<h?this.fromJD(h):this.newDate(f,k,r)},determineDate:function(m,l,h,a,g){h&&"object"!==typeof h&&(g=a,a=h,h=null);"string"!==typeof a&&(g=a,a="");l=l?l.newDate():null;if(null==m)m=l;else{if("string"===typeof m)a:{try{var e=this.parseDate(a,m,g);break a}catch(n){}m=m.toLowerCase();h=(m.match(/^c/)&&h?h.newDate():null)||this.today();a=/([+-]?[0-9]+)\s*(d|w|m|y)?/g;for(g=a.exec(m);g;)h.add(parseInt(g[1],10),
g[2]||"d"),g=a.exec(m);e=h}else e="number"===typeof m?isNaN(m)||Infinity===m||-Infinity===m?l:this.today().add(m,"d"):this.newDate(m);m=e}return m}})},{"./main":621,"object-assign":499}],623:[function(b,K,G){K.exports=b("cwise-compiler")({args:["array",{offset:[1],array:0},"scalar","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\n        var _inline_1_da = _inline_1_arg0_ - _inline_1_arg3_\n        var _inline_1_db = _inline_1_arg1_ - _inline_1_arg3_\n        if((_inline_1_da >= 0) !== (_inline_1_db >= 0)) {\n          _inline_1_arg2_.push(_inline_1_arg4_[0] + 0.5 + 0.5 * (_inline_1_da + _inline_1_db) / (_inline_1_da - _inline_1_db))\n        }\n      }",
args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg3_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:["_inline_1_da","_inline_1_db"]},funcName:"zeroCrossings"})},{"cwise-compiler":151}],624:[function(b,K,G){K.exports=function(m,l){var h=[];l=+l||0;q(m.hi(m.shape[0]-1),h,l);return h};var q=b("./lib/zc-core")},
{"./lib/zc-core":623}],625:[function(b,K,G){K.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],626:[function(b,K,G){G=
b("./arrow_paths");var q=b("../../plots/font_attributes"),m=b("../../plots/cartesian/constants"),l=b("../../plot_api/plot_template").templatedArray;b("../../constants/axis_placeable_objects");K.exports=l("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:q({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},
height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,
dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:G.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:G.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",
min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",m.idRegex.x.toString()],editType:"calc"},
ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",m.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",m.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",m.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},
yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},
font:q({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../constants/axis_placeable_objects":746,"../../plot_api/plot_template":817,"../../plots/cartesian/constants":834,"../../plots/font_attributes":856,"./arrow_paths":625}],627:[function(b,K,G){function q(g){l.filterVisible(g._fullLayout.annotations).forEach(function(e){var n=h.getFromId(g,e.xref),p=h.getFromId(g,e.yref),
c=h.getRefType(e.xref),d=h.getRefType(e.yref);e._extremes={};"range"===c&&m(e,n);"range"===d&&m(e,p)})}function m(g,e){var n=e._id,p=n.charAt(0),c=g[p],d=g["a"+p],f=g["_"+p+"padplus"],k=g["_"+p+"padminus"],r={x:1,y:-1}[p]*g[p+"shift"],u=3*g.arrowsize*g.arrowwidth||0,v=u+r,x=u-r,C=3*g.startarrowsize*g.arrowwidth||0;u=C+r;r=C-r;g["a"+p+"ref"]===g[p+"ref"]?(p=h.findExtremes(e,[e.r2c(c)],{ppadplus:v,ppadminus:x}),e=h.findExtremes(e,[e.r2c(d)],{ppadplus:Math.max(f,u),ppadminus:Math.max(k,r)}),e={min:[p.min[0],
e.min[0]],max:[p.max[0],e.max[0]]}):(u=d?u+d:u,r=d?r-d:r,e=h.findExtremes(e,[e.r2c(c)],{ppadplus:Math.max(f,v,u),ppadminus:Math.max(k,x,r)}));g._extremes[n]=e}var l=b("../../lib"),h=b("../../plots/cartesian/axes"),a=b("./draw").draw;K.exports=function(g){if(l.filterVisible(g._fullLayout.annotations).length&&g._fullData.length)return l.syncOrAsync([a,q],g)}},{"../../lib":778,"../../plots/cartesian/axes":828,"./draw":632}],628:[function(b,K,G){function q(g,e){g=g._fullLayout.annotations;var n=[],p=
[],c=[],d=(e||[]).length,f,k,r;for(f=0;f<g.length;f++){var u=g[f];if(r=u.clicktoshow){for(k=0;k<d;k++){var v=e[k];var x=v.xaxis;var C=v.yaxis;if(x._id===u.xref&&C._id===u.yref&&x.d2r(v.x)===m(u._xclick,x)&&C.d2r(v.y)===m(u._yclick,C)){v=u.visible?"onout"===r?p:c:n;v.push(f);break}}k===d&&u.visible&&"onout"===r&&p.push(f)}}return{on:n,off:p,explicitOff:c}}function m(g,e){return"log"===e.type?e.l2r(g):e.d2r(g)}var l=b("../../lib"),h=b("../../registry"),a=b("../../plot_api/plot_template").arrayEditor;
K.exports={hasClickToShow:function(g,e){g=q(g,e);return 0<g.on.length||0<g.explicitOff.length},onClick:function(g,e){var n=q(g,e);e=n.on;n=n.off.concat(n.explicitOff);var p={},c=g._fullLayout.annotations,d;if(e.length||n.length){for(d=0;d<e.length;d++){var f=a(g.layout,"annotations",c[e[d]]);f.modifyItem("visible",!0);l.extendFlat(p,f.getUpdateObj())}for(d=0;d<n.length;d++)f=a(g.layout,"annotations",c[n[d]]),f.modifyItem("visible",!1),l.extendFlat(p,f.getUpdateObj());return h.call("update",g,{},p)}}}},
{"../../lib":778,"../../plot_api/plot_template":817,"../../registry":911}],629:[function(b,K,G){var q=b("../../lib"),m=b("../color");K.exports=function(l,h,a,g){g("opacity");l=g("bgcolor");var e=g("bordercolor");e=m.opacity(e);g("borderpad");var n=g("borderwidth"),p=g("showarrow");g("text",p?" ":a._dfltTitle.annotation);g("textangle");q.coerceFont(g,"font",a.font);g("width");g("align");g("height")&&g("valign");if(p){p=g("arrowside");if(-1!==p.indexOf("end")){var c=g("arrowhead");var d=g("arrowsize")}-1!==
p.indexOf("start")&&(g("startarrowhead",c),g("startarrowsize",d));g("arrowcolor",e?h.bordercolor:m.defaultLine);g("arrowwidth",2*(e&&n||1));g("standoff");g("startstandoff")}h=g("hovertext");a=a.hoverlabel||{};h&&(l=g("hoverlabel.bgcolor",a.bgcolor||(m.opacity(l)?m.rgb(l):m.defaultLine)),l=g("hoverlabel.bordercolor",a.bordercolor||m.contrast(l)),q.coerceFont(g,"hoverlabel.font",{family:a.font.family,size:a.font.size,color:a.font.color||l}));g("captureevents",!!h)}},{"../../lib":778,"../color":643}],
630:[function(b,K,G){var q=b("fast-isnumeric"),m=b("../../lib/to_log_range");K.exports=function(l,h,a,g){function e(f){var k=p[f];k=n?m(k,h.range):Math.pow(10,k);q(k)||(k=null);g(c+f,k)}h=h||{};var n="log"===a&&"linear"===h.type;a="linear"===a&&"log"===h.type;if(n||a){l=l._fullLayout.annotations;a=h._id.charAt(0);for(var p,c,d=0;d<l.length;d++)p=l[d],c="annotations["+d+"].",p[a+"ref"]===h._id&&e(a),p["a"+a+"ref"]===h._id&&e("a"+a)}}},{"../../lib/to_log_range":805,"fast-isnumeric":241}],631:[function(b,
K,G){function q(e,n,p){function c(y,D){return m.coerce(e,n,g,y,D)}var d=c("visible"),f=c("clicktoshow");if(d||f){a(e,n,p,c);d=n.showarrow;var k=["x","y"],r=[-10,-30];p={_fullLayout:p};for(var u=0;2>u;u++){var v=k[u],x=l.coerceRef(e,n,p,v,"","paper");"paper"!==x&&l.getFromId(p,x)._annIndices.push(n._index);l.coercePosition(n,p,c,x,v,.5);if(d){var C="a"+v,z=l.coerceRef(e,n,p,C,"pixel",["pixel","paper"]);"pixel"!==z&&z!==x&&(z=n[C]="pixel");l.coercePosition(n,p,c,z,C,"pixel"===z?r[u]:.4)}c(v+"anchor");
c(v+"shift")}m.noneOrAll(e,n,["x","y"]);d&&m.noneOrAll(e,n,["ax","ay"]);f&&(f=c("xclick"),d=c("yclick"),n._xclick=void 0===f?n.x:l.cleanPosition(f,p,n.xref),n._yclick=void 0===d?n.y:l.cleanPosition(d,p,n.yref))}}var m=b("../../lib"),l=b("../../plots/cartesian/axes"),h=b("../../plots/array_container_defaults"),a=b("./common_defaults"),g=b("./attributes");K.exports=function(e,n){h(e,n,{name:"annotations",handleItemDefaults:q})}},{"../../lib":778,"../../plots/array_container_defaults":823,"../../plots/cartesian/axes":828,
"./attributes":626,"./common_defaults":629}],632:[function(b,K,G){function q(C,z){var y=C._fullLayout.annotations[z]||{},D=p.getFromId(C,y.xref),A=p.getFromId(C,y.yref);D&&D.setScale();A&&A.setScale();l(C,y,z,!1,D,A)}function m(C,z,y,D,A){var t=A[y];A=A[y+"ref"];y=-1!==y.indexOf("y");A="domain"===p.getRefType(A);D=y?D.h:D.w;return C?A?t+(y?-z:z)/C._length:C.p2r(C.r2p(t)+z):t+(y?-z:z)/D}function l(C,z,y,D,A,t){function B(la){la={index:y,annotation:z._input,fullAnnotation:z,event:la};D&&(la.subplotId=
D);return la}function F(la){la.call(d.font,oa).attr({"text-anchor":{left:"start",right:"end"}[z.align]||"middle"});k.convertToTspans(la,C,I);return la}function I(){function la(za,Da){"auto"===Da&&(Da=za<1/3?"left":za>2/3?"right":"center");return{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[Da]}var ia=na.selectAll("a");1===ia.size()&&ia.text()===na.text()&&ha.insert("a",":first-child").attr({"xlink:xlink:href":ia.attr("xlink:href"),"xlink:xlink:show":ia.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(ma.node());
ia=ha.select(".annotation-text-math-group");for(var sa=!ia.empty(),ta=d.bBox((sa?ia:na).node()),Aa=ta.width,Ka=ta.height,Sa=z.width||Aa,db=z.height||Ka,eb=Math.round(Sa+2*ba),lb=Math.round(db+2*ba),ab=!1,Ya=["x","y"],hb=0;hb<Ya.length;hb++){var nb=Ya[hb],va=z[nb+"ref"]||nb,Ba=z["a"+nb+"ref"],Ga={x:A,y:t}[nb],Na=(X+("x"===nb?0:-90))*Math.PI/180,$a=eb*Math.cos(Na),Va=lb*Math.sin(Na);Na=Math.abs($a)+Math.abs(Va);var qb=z[nb+"anchor"],Ha=z[nb+"shift"]*("x"===nb?1:-1),Ra=S[nb];var La=p.getRefType(va);
if(Ga&&"domain"!==La){La=Ga.r2fraction(z[nb]);if(0>La||1<La)if(Ba===va){if(La=Ga.r2fraction(z["a"+nb]),0>La||1<La)ab=!0}else ab=!0;La=Ga._offset+Ga.r2p(z[nb]);var gb=.5}else La="domain"===La,"x"===nb?(gb=z[nb],La=La?Ga._offset+Ga._length*gb:La=L.l+L.w*gb):(gb=1-z[nb],La=La?Ga._offset+Ga._length*gb:La=L.t+L.h*gb),gb=z.showarrow?.5:gb;z.showarrow?(Ra.head=La,qb=z["a"+nb],$a=$a*la(.5,z.xanchor)-Va*la(.5,z.yanchor),Ba===va?(Va=p.getRefType(Ba),"domain"===Va?("y"===nb&&(qb=1-qb),Ra.tail=Ga._offset+Ga._length*
qb):"paper"===Va?"y"===nb?(qb=1-qb,Ra.tail=L.t+L.h*qb):Ra.tail=L.l+L.w*qb:Ra.tail=Ga._offset+Ga.r2p(qb),Ga=$a):(Ra.tail=La+qb,Ga=$a+qb),Ra.text=Ra.tail+$a,Va=J["x"===nb?"width":"height"],"paper"===va&&(Ra.head=e.constrain(Ra.head,1,Va-1)),"pixel"===Ba&&(va=-Math.max(Ra.tail-3,Ra.text),Ba=Math.min(Ra.tail+3,Ra.text)-Va,0<va?(Ra.tail+=va,Ra.text+=va):0<Ba&&(Ra.tail-=Ba,Ra.text-=Ba)),Ra.tail+=Ha,Ra.head+=Ha):(Ga=$a=Na*la(gb,qb),Ra.text=La+$a);Ra.text+=Ha;$a+=Ha;Ga+=Ha;z["_"+nb+"padplus"]=Na/2+Ga;z["_"+
nb+"padminus"]=Na/2-Ga;z["_"+nb+"size"]=Na;z["_"+nb+"shift"]=$a}if(ab)ha.remove();else{Ya=ab=0;"left"!==z.align&&(ab=(Sa-Aa)*("center"===z.align?.5:1));"top"!==z.valign&&(Ya=(db-Ka)*("middle"===z.valign?.5:1));sa?ia.select("svg").attr({x:ba+ab-1,y:ba+Ya}).call(d.setClipUrl,qa?U:null,C):na.call(k.positionText,ba+ab-ta.left,ba+Ya-ta.top).call(d.setClipUrl,qa?U:null,C);ka.select("rect").call(d.setRect,ba,ba,Sa,db);ma.call(d.setRect,ja/2,ja/2,eb-ja,lb-ja);ha.call(d.setTranslate,Math.round(S.x.text-eb/
2),Math.round(S.y.text-lb/2));aa.attr({transform:"rotate("+X+","+S.x.text+","+S.y.text+")"});var ob=function(za,Da){Z.selectAll(".annotation-arrow-g").remove();var Ja=S.x.head,Ta=S.y.head,Xa=S.x.tail+za,kb=S.y.tail+Da,rb=S.x.text+za;za=S.y.text+Da;Da=e.rotationXYMatrix(X,rb,za);var Mb=e.apply2DTransform(Da);Da=e.apply2DTransform2(Da);var Fb=+ma.attr("width"),Lb=+ma.attr("height");rb-=.5*Fb;Fb=rb+Fb;za-=.5*Lb;Lb=za+Lb;Da=[[rb,za,rb,Lb],[rb,Lb,Fb,Lb],[Fb,Lb,Fb,za],[Fb,za,rb,za]].map(Da);if(!Da.reduce(function(Hc,
Wc){return Hc^!!e.segmentsIntersect(Ja,Ta,Ja+1E6,Ta+1E6,Wc[0],Wc[1],Wc[2],Wc[3])},!1)){Da.forEach(function(Hc){if(Hc=e.segmentsIntersect(Xa,kb,Ja,Ta,Hc[0],Hc[1],Hc[2],Hc[3]))Xa=Hc.x,kb=Hc.y});Da=z.arrowwidth;Lb=z.arrowcolor;za=z.arrowside;var Vb=Z.append("g").style({opacity:c.opacity(Lb)}).classed("annotation-arrow-g",!0);Lb=Vb.append("path").attr("d","M"+Xa+","+kb+"L"+Ja+","+Ta).style("stroke-width",Da+"px").call(c.stroke,c.rgb(Lb));x(Lb,za,z);if(H.annotationPosition&&Lb.node().parentNode&&!D){za=
Ja;Lb=Ta;z.standoff&&(rb=Math.sqrt(Math.pow(Ja-Xa,2)+Math.pow(Ta-kb,2)),za+=z.standoff*(Xa-Ja)/rb,Lb+=z.standoff*(kb-Ta)/rb);Da=Vb.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(Xa-za)+","+(kb-Lb),transform:n(za,Lb)}).style("stroke-width",Da+6+"px").call(c.stroke,"rgba(0,0,0,0)").call(c.fill,"rgba(0,0,0,0)");var xc,Gc;u.init({element:Da.node(),gd:C,prepFn:function(){var Hc=d.getTranslate(ha);xc=Hc.x;Gc=Hc.y;A&&A.autorange&&
N(A._name+".autorange",!0);t&&t.autorange&&N(t._name+".autorange",!0)},moveFn:function(Hc,Wc){var ib=Mb(xc,Gc),Yb=ib[0]+Hc;ib=ib[1]+Wc;ha.call(d.setTranslate,Yb,ib);T("x",m(A,Hc,"x",L,z));T("y",m(t,Wc,"y",L,z));z.axref===z.xref&&T("ax",m(A,Hc,"ax",L,z));z.ayref===z.yref&&T("ay",m(t,Wc,"ay",L,z));Vb.attr("transform",n(Hc,Wc));aa.attr({transform:"rotate("+X+","+Yb+","+ib+")"})},doneFn:function(){a.call("_guiRelayout",C,Q());var Hc=document.querySelector(".js-notes-box-panel");Hc&&Hc.redraw(Hc.selectedObj)}})}}};
z.showarrow&&ob(0,0);if(fa){var ub;u.init({element:ha.node(),gd:C,prepFn:function(){ub=aa.attr("transform")},moveFn:function(za,Da){var Ja="pointer";if(z.showarrow)z.axref===z.xref?T("ax",m(A,za,"ax",L,z)):T("ax",z.ax+za),z.ayref===z.yref?T("ay",m(t,Da,"ay",L.w,z)):T("ay",z.ay+Da),ob(za,Da);else{if(D)return;if(A)var Ta=m(A,za,"x",L,z);else Ta=z._xsize/L.w,Ta=u.align(z.x+(z._xshift-z.xshift)/L.w-Ta/2+za/L.w,Ta,0,1,z.xanchor);if(t)var Xa=m(t,Da,"y",L,z);else Xa=z._ysize/L.h,Xa=u.align(z.y-(z._yshift+
z.yshift)/L.h-Xa/2-Da/L.h,Xa,0,1,z.yanchor);T("x",Ta);T("y",Xa);A&&t||(Ja=u.getCursor(A?.5:Ta,t?.5:Xa,z.xanchor,z.yanchor))}aa.attr({transform:n(za,Da)+ub});r(ha,Ja)},clickFn:function(za,Da){z.captureevents&&C.emit("plotly_clickannotation",B(Da))},doneFn:function(){r(ha);a.call("_guiRelayout",C,Q());var za=document.querySelector(".js-notes-box-panel");za&&za.redraw(za.selectedObj)}})}}}var J=C._fullLayout,L=C._fullLayout._size,H=C._context.edits;if(D){var P="annotation-"+D;var M=D+".annotations"}else P=
"annotation",M="annotations";M=v(C.layout,M,z);var N=M.modifyBase,T=M.modifyItem,Q=M.getUpdateObj;J._infolayer.selectAll("."+P+'[data-index="'+y+'"]').remove();var U="clip"+J._uid+"_ann"+y;if(z._input&&!1!==z.visible){var S={x:{},y:{}},X=+z.textangle||0,Z=J._infolayer.append("g").classed(P,!0).attr("data-index",String(y)).style("opacity",z.opacity),aa=Z.append("g").classed("annotation-text-g",!0),fa=H[z.showarrow?"annotationTail":"annotationPosition"];P=z.captureevents||H.annotationText||fa;var ha=
aa.append("g").style("pointer-events",P?"all":null).call(r,"pointer").on("click",function(){C._dragging=!1;C.emit("plotly_clickannotation",B(h.event))});if(z.hovertext)ha.on("mouseover",function(){var la=z.hoverlabel,ia=la.font,sa=this.getBoundingClientRect(),ta=C.getBoundingClientRect();f.loneHover({x0:sa.left-ta.left,x1:sa.right-ta.left,y:(sa.top+sa.bottom)/2-ta.top,text:z.hovertext,color:la.bgcolor,borderColor:la.bordercolor,fontFamily:ia.family,fontSize:ia.size,fontColor:ia.color},{container:J._hoverlayer.node(),
outerContainer:J._paper.node(),gd:C})}).on("mouseout",function(){f.loneUnhover(J._hoverlayer.node())});var ja=z.borderwidth,ba=ja+z.borderpad,ma=ha.append("rect").attr("class","bg").style("stroke-width",ja+"px").call(c.stroke,z.bordercolor).call(c.fill,z.bgcolor),qa=z.width||z.height,ka=J._topclips.selectAll("#"+U).data(qa?[0]:[]);ka.enter().append("clipPath").classed("annclip",!0).attr("id",U).append("rect");ka.exit().remove();var oa=z.font;P=J._meta?e.templateString(z.text,J._meta):z.text;var na=
ha.append("text").classed("annotation-text",!0).text(P);if(H.annotationText)na.call(k.makeEditable,{delegate:ha,gd:C}).call(F).on("edit",function(la){z.text=la;this.call(F);T("text",la);A&&A.autorange&&N(A._name+".autorange",!0);t&&t.autorange&&N(t._name+".autorange",!0);a.call("_guiRelayout",C,Q())});else na.call(F)}else h.selectAll("#"+U).remove()}var h=b("d3"),a=b("../../registry"),g=b("../../plots/plots"),e=b("../../lib"),n=e.strTranslate,p=b("../../plots/cartesian/axes"),c=b("../color"),d=b("../drawing"),
f=b("../fx"),k=b("../../lib/svg_text_utils"),r=b("../../lib/setcursor"),u=b("../dragelement"),v=b("../../plot_api/plot_template").arrayEditor,x=b("./draw_arrow_head");K.exports={draw:function(C){var z=C._fullLayout;z._infolayer.selectAll(".annotation").remove();for(var y=0;y<z.annotations.length;y++)z.annotations[y].visible&&q(C,y);return g.previousPromises(C)},drawOne:q,drawRaw:l}},{"../../lib":778,"../../lib/setcursor":799,"../../lib/svg_text_utils":803,"../../plot_api/plot_template":817,"../../plots/cartesian/axes":828,
"../../plots/plots":891,"../../registry":911,"../color":643,"../dragelement":662,"../drawing":665,"../fx":683,"./draw_arrow_head":633,d3:169}],633:[function(b,K,G){var q=b("d3"),m=b("../color"),l=b("./arrow_paths");b=b("../../lib");var h=b.strScale,a=b.strRotate,g=b.strTranslate;K.exports=function(e,n,p){function c(){e.style("stroke-dasharray","0px,100px")}function d(J,L,H,P){J.path&&(J.noRotate&&(H=0),q.select(f.parentNode).append("path").attr({"class":e.attr("class"),d:J.path,transform:g(L.x,L.y)+
a(180*H/Math.PI)+h(P)}).style({fill:m.rgb(p.arrowcolor),"stroke-width":0}))}var f=e.node(),k=l[p.arrowhead||0],r=l[p.startarrowhead||0],u=(p.arrowwidth||1)*(p.arrowsize||1),v=(p.arrowwidth||1)*(p.startarrowsize||1),x=0<=n.indexOf("start");n=0<=n.indexOf("end");var C=k.backoff*u+p.standoff,z=r.backoff*v+p.startstandoff;if("line"===f.nodeName){var y={x:+e.attr("x1"),y:+e.attr("y1")};var D={x:+e.attr("x2"),y:+e.attr("y2")};var A=y.x-D.x,t=y.y-D.y;var B=Math.atan2(t,A);var F=B+Math.PI;if(C&&z&&C+z>Math.sqrt(A*
A+t*t)){c();return}if(C){if(C*C>A*A+t*t){c();return}var I=C*Math.sin(B);D.x+=C*Math.cos(B);D.y+=I;e.attr({x2:D.x,y2:D.y})}if(z){if(z*z>A*A+t*t){c();return}C=z*Math.sin(B);y.x-=z*Math.cos(B);y.y-=C;e.attr({x1:y.x,y1:y.y})}}else if("path"===f.nodeName){A=f.getTotalLength();t="";if(A<C+z){c();return}y=f.getPointAtLength(0);B=f.getPointAtLength(.1);B=Math.atan2(y.y-B.y,y.x-B.x);y=f.getPointAtLength(Math.min(z,A));t="0px,"+z+"px,";D=f.getPointAtLength(A);F=f.getPointAtLength(A-.1);F=Math.atan2(D.y-F.y,
D.x-F.x);D=f.getPointAtLength(Math.max(0,A-C));e.style("stroke-dasharray",t+(A-(t?z+C:C)+"px,"+A+"px"))}x&&d(r,y,B,v);n&&d(k,D,F,u)}},{"../../lib":778,"../color":643,"./arrow_paths":625,d3:169}],634:[function(b,K,G){G=b("./draw");var q=b("./click");K.exports={moduleType:"component",name:"annotations",layoutAttributes:b("./attributes"),supplyLayoutDefaults:b("./defaults"),includeBasePlot:b("../../plots/cartesian/include_components")("annotations"),calcAutorange:b("./calc_autorange"),draw:G.draw,drawOne:G.drawOne,
drawRaw:G.drawRaw,hasClickToShow:q.hasClickToShow,onClick:q.onClick,convertCoords:b("./convert_coords")}},{"../../plots/cartesian/include_components":840,"./attributes":626,"./calc_autorange":627,"./click":628,"./convert_coords":630,"./defaults":631,"./draw":632}],635:[function(b,K,G){G=b("../annotations/attributes");var q=b("../../plot_api/edit_types").overrideAll;b=b("../../plot_api/plot_template").templatedArray;K.exports=q(b("annotation",{visible:G.visible,x:{valType:"any"},y:{valType:"any"},
z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:G.xanchor,xshift:G.xshift,yanchor:G.yanchor,yshift:G.yshift,text:G.text,textangle:G.textangle,font:G.font,width:G.width,height:G.height,opacity:G.opacity,align:G.align,valign:G.valign,bgcolor:G.bgcolor,bordercolor:G.bordercolor,borderpad:G.borderpad,borderwidth:G.borderwidth,showarrow:G.showarrow,arrowcolor:G.arrowcolor,arrowhead:G.arrowhead,startarrowhead:G.startarrowhead,arrowside:G.arrowside,arrowsize:G.arrowsize,startarrowsize:G.startarrowsize,
arrowwidth:G.arrowwidth,standoff:G.standoff,startstandoff:G.startstandoff,hovertext:G.hovertext,hoverlabel:G.hoverlabel,captureevents:G.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":810,"../../plot_api/plot_template":817,"../annotations/attributes":626}],636:[function(b,K,G){function q(h,a){var g=a.fullSceneLayout.domain,e=a.fullLayout._size;a={pdata:null,type:"linear",autorange:!1,range:[-Infinity,Infinity]};h._xa={};m.extendFlat(h._xa,a);l.setConvert(h._xa);h._xa._offset=e.l+
g.x[0]*e.w;h._xa.l2p=function(){return.5*(1+h._pdata[0]/h._pdata[3])*e.w*(g.x[1]-g.x[0])};h._ya={};m.extendFlat(h._ya,a);l.setConvert(h._ya);h._ya._offset=e.t+(1-g.y[1])*e.h;h._ya.l2p=function(){return.5*(1-h._pdata[1]/h._pdata[3])*e.h*(g.y[1]-g.y[0])}}var m=b("../../lib"),l=b("../../plots/cartesian/axes");K.exports=function(h){for(var a=h.fullSceneLayout.annotations,g=0;g<a.length;g++)q(a[g],h);h.fullLayout._infolayer.selectAll(".annotation-"+h.id).remove()}},{"../../lib":778,"../../plots/cartesian/axes":828}],
637:[function(b,K,G){function q(e,n,p,c){function d(k,r){return m.coerce(e,n,g,k,r)}function f(k){var r=k+"axis",u={_fullLayout:{}};u._fullLayout[r]=p[r];return l.coercePosition(n,u,d,k,k,.5)}d("visible")&&(a(e,n,c.fullLayout,d),f("x"),f("y"),f("z"),m.noneOrAll(e,n,["x","y","z"]),n.xref="x",n.yref="y",n.zref="z",d("xanchor"),d("yanchor"),d("xshift"),d("yshift"),n.showarrow&&(n.axref="pixel",n.ayref="pixel",d("ax",-10),d("ay",-30),m.noneOrAll(e,n,["ax","ay"])))}var m=b("../../lib"),l=b("../../plots/cartesian/axes"),
h=b("../../plots/array_container_defaults"),a=b("../annotations/common_defaults"),g=b("./attributes");K.exports=function(e,n,p){h(e,n,{name:"annotations",handleItemDefaults:q,fullLayout:p.fullLayout})}},{"../../lib":778,"../../plots/array_container_defaults":823,"../../plots/cartesian/axes":828,"../annotations/common_defaults":629,"./attributes":635}],638:[function(b,K,G){var q=b("../annotations/draw").drawRaw,m=b("../../plots/gl3d/project"),l=["x","y","z"];K.exports=function(h){for(var a=h.fullSceneLayout,
g=h.dataScale,e=a.annotations,n=0;n<e.length;n++){for(var p=e[n],c=!1,d=0;3>d;d++){var f=l[d];f=a[f+"axis"].r2fraction(p[f]);if(0>f||1<f){c=!0;break}}c?h.fullLayout._infolayer.select(".annotation-"+h.id+'[data-index="'+n+'"]').remove():(p._pdata=m(h.glplot.cameraParams,[a.xaxis.r2l(p.x)*g[0],a.yaxis.r2l(p.y)*g[1],a.zaxis.r2l(p.z)*g[2]]),q(h.graphDiv,p,n,h.id,p._xa,p._ya))}}},{"../../plots/gl3d/project":879,"../annotations/draw":632}],639:[function(b,K,G){var q=b("../../registry"),m=b("../../lib");
K.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:b("./attributes")}}},layoutAttributes:b("./attributes"),handleDefaults:b("./defaults"),includeBasePlot:function(l,h){var a=q.subplotsRegistry.gl3d;if(a)for(var g=a.attrRegex,e=Object.keys(l),n=0;n<e.length;n++){var p=e[n];g.test(p)&&(l[p].annotations||[]).length&&(m.pushUnique(h._basePlotModules,a),m.pushUnique(h._subplots.gl3d,p))}},convert:b("./convert"),draw:b("./draw")}},{"../../lib":778,"../../registry":911,
"./attributes":635,"./convert":636,"./defaults":637,"./draw":638}],640:[function(b,K,G){K.exports=b("world-calendars/dist/main");b("world-calendars/dist/plus");b("world-calendars/dist/calendars/chinese");b("world-calendars/dist/calendars/coptic");b("world-calendars/dist/calendars/discworld");b("world-calendars/dist/calendars/ethiopian");b("world-calendars/dist/calendars/hebrew");b("world-calendars/dist/calendars/islamic");b("world-calendars/dist/calendars/julian");b("world-calendars/dist/calendars/mayan");
b("world-calendars/dist/calendars/nanakshahi");b("world-calendars/dist/calendars/nepali");b("world-calendars/dist/calendars/persian");b("world-calendars/dist/calendars/taiwan");b("world-calendars/dist/calendars/thai");b("world-calendars/dist/calendars/ummalqura")},{"world-calendars/dist/calendars/chinese":607,"world-calendars/dist/calendars/coptic":608,"world-calendars/dist/calendars/discworld":609,"world-calendars/dist/calendars/ethiopian":610,"world-calendars/dist/calendars/hebrew":611,"world-calendars/dist/calendars/islamic":612,
"world-calendars/dist/calendars/julian":613,"world-calendars/dist/calendars/mayan":614,"world-calendars/dist/calendars/nanakshahi":615,"world-calendars/dist/calendars/nepali":616,"world-calendars/dist/calendars/persian":617,"world-calendars/dist/calendars/taiwan":618,"world-calendars/dist/calendars/thai":619,"world-calendars/dist/calendars/ummalqura":620,"world-calendars/dist/main":621,"world-calendars/dist/plus":622}],641:[function(b,K,G){function q(r){var u=d[r];return u?u:u=d[r]=h.instance(r)}
function m(r){return a.extendFlat({},n,{description:r})}function l(r){return"Sets the calendar system to use with `"+r+"` date data."}var h=b("./calendars"),a=b("../../lib");b=b("../../constants/numerical");var g=b.EPOCHJD,e=b.ONEDAY,n={valType:"enumerated",values:Object.keys(h.calendars),editType:"calc",dflt:"gregorian"},p=function(r,u,v,x){var C={};C[v]=n;return a.coerce(r,u,C,v,x)},c={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},
m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:"##",w:"##",c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}},d={};b={xcalendar:m(l("x"))};G=a.extendFlat({},b,{ycalendar:m(l("y"))});var f=a.extendFlat({},G,{zcalendar:m(l("z"))}),k=m("Sets the calendar system to use for `range` and `tick0` if this is a date axis. This does not set the calendar for interpreting data on this axis, that's specified in the trace or via the global `layout.calendar`");
K.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:G,bar:G,box:G,heatmap:G,contour:G,histogram:G,histogram2d:G,histogram2dcontour:G,scatter3d:f,surface:f,mesh3d:f,scattergl:G,ohlc:b,candlestick:b},layout:{calendar:m("Sets the default calendar system to use for interpreting and displaying dates throughout the plot.")},subplots:{xaxis:{calendar:k},yaxis:{calendar:k},scene:{xaxis:{calendar:k},yaxis:{calendar:k},zaxis:{calendar:k}},polar:{radialaxis:{calendar:k}}},transforms:{filter:{valuecalendar:m("Sets the calendar system to use for `value`, if it is a date."),
targetcalendar:m("Sets the calendar system to use for `target`, if it is an array of dates. If `target` is a string (eg *x*) we use the corresponding trace attribute (eg `xcalendar`) if it exists, even if `targetcalendar` is provided.")}}},layoutAttributes:n,handleDefaults:p,handleTraceDefaults:function(r,u,v,x){for(var C=0;C<v.length;C++)p(r,u,v[C]+"calendar",x.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",
islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",
ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],
thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:q,worldCalFmt:function(r,u,v){u=Math.floor((u+.05)/e)+g;v=q(v).fromJD(u);u=0;for(var x,C,z;-1!==(u=r.indexOf("%",u));)x=r.charAt(u+1),"0"===x||"-"===x||"_"===x?(z=3,C=r.charAt(u+2),"_"===x&&(x="-")):(C=x,x="0",z=2),(C=c[C])?(x="##"===C?"##":v.formatDate(C[x]),r=r.substr(0,u)+x+r.substr(u+z),u+=x.length):u+=z;return r}}},{"../../constants/numerical":753,"../../lib":778,"./calendars":640}],642:[function(b,K,G){G.defaults=
"#1f77b4 #ff7f0e #2ca02c #d62728 #9467bd #8c564b #e377c2 #7f7f7f #bcbd22 #17becf".split(" ");G.defaultLine="#444";G.lightLine="#eee";G.background="#fff";G.borderLine="#BEC8D9";G.lightFraction=1E3/11},{}],643:[function(b,K,G){function q(e){if(l(e)||"string"!==typeof e)return e;var n=e.trim();if("rgb"!==n.substr(0,3))return e;var p=n.match(/^rgba?\s*\(([^()]*)\)$/);if(!p)return e;p=p[1].trim().split(/\s*[\s,]\s*/);n="a"===n.charAt(3)&&4===p.length;if(!n&&3!==p.length)return e;for(var c=0;c<p.length;c++){if(!p[c].length)return e;
p[c]=Number(p[c]);if(!(0<=p[c]))return e;if(3===c)1<p[c]&&(p[c]=1);else if(1<=p[c])return e}e=Math.round(255*p[0])+", "+Math.round(255*p[1])+", "+Math.round(255*p[2]);return n?"rgba("+e+", "+p[3]+")":"rgb("+e+")"}var m=b("tinycolor2"),l=b("fast-isnumeric"),h=K.exports={};b=b("./attributes");h.defaults=b.defaults;var a=h.defaultLine=b.defaultLine;h.lightLine=b.lightLine;var g=h.background=b.background;h.tinyRGB=function(e){e=e.toRgb();return"rgb("+Math.round(e.r)+", "+Math.round(e.g)+", "+Math.round(e.b)+
")"};h.rgb=function(e){return h.tinyRGB(m(e))};h.opacity=function(e){return e?m(e).getAlpha():0};h.addOpacity=function(e,n){e=m(e).toRgb();return"rgba("+Math.round(e.r)+", "+Math.round(e.g)+", "+Math.round(e.b)+", "+n+")"};h.combine=function(e,n){var p=m(e).toRgb();if(1===p.a)return m(e).toRgbString();e=m(n||g).toRgb();e=1===e.a?e:{r:255*(1-e.a)+e.r*e.a,g:255*(1-e.a)+e.g*e.a,b:255*(1-e.a)+e.b*e.a};return m({r:e.r*(1-p.a)+p.r*p.a,g:e.g*(1-p.a)+p.g*p.a,b:e.b*(1-p.a)+p.b*p.a}).toRgbString()};h.contrast=
function(e,n,p){var c=m(e);1!==c.getAlpha()&&(c=m(h.combine(e,g)));return(c.isDark()?n?c.lighten(n):g:p?c.darken(p):a).toString()};h.stroke=function(e,n){n=m(n);e.style({stroke:h.tinyRGB(n),"stroke-opacity":n.getAlpha()})};h.fill=function(e,n){n=m(n);e.style({fill:h.tinyRGB(n),"fill-opacity":n.getAlpha()})};h.clean=function(e){if(e&&"object"===typeof e){var n=Object.keys(e),p;for(p=0;p<n.length;p++){var c=n[p];var d=e[c];if("color"===c.substr(c.length-5))if(Array.isArray(d))for(c=0;c<d.length;c++)d[c]=
q(d[c]);else e[c]=q(d);else if("colorscale"===c.substr(c.length-10)&&Array.isArray(d))for(c=0;c<d.length;c++)Array.isArray(d[c])&&(d[c][1]=q(d[c][1]));else if(Array.isArray(d)){if(c=d[0],!Array.isArray(c)&&c&&"object"===typeof c)for(c=0;c<d.length;c++)h.clean(d[c])}else d&&"object"===typeof d&&h.clean(d)}}}},{"./attributes":642,"fast-isnumeric":241,tinycolor2:576}],644:[function(b,K,G){G=b("../../plots/cartesian/layout_attributes");var q=b("../../plots/font_attributes"),m=b("../../lib/extend").extendFlat;
b=b("../../plot_api/edit_types").overrideAll;K.exports=b({thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",dflt:1.02,min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",dflt:.5,min:-2,max:3},yanchor:{valType:"enumerated",
values:["top","middle","bottom"],dflt:"middle"},ypad:{valType:"number",min:0,dflt:10},outlinecolor:G.linecolor,outlinewidth:G.linewidth,bordercolor:G.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:G.tickmode,nticks:G.nticks,tick0:G.tick0,dtick:G.dtick,tickvals:G.tickvals,ticktext:G.ticktext,ticks:m({},G.ticks,{dflt:""}),ticklabelposition:{valType:"enumerated",values:"outside;inside;outside top;inside top;outside bottom;inside bottom".split(";"),
dflt:"outside"},ticklen:G.ticklen,tickwidth:G.tickwidth,tickcolor:G.tickcolor,showticklabels:G.showticklabels,tickfont:q({}),tickangle:G.tickangle,tickformat:G.tickformat,tickformatstops:G.tickformatstops,tickprefix:G.tickprefix,showtickprefix:G.showtickprefix,ticksuffix:G.ticksuffix,showticksuffix:G.showticksuffix,separatethousands:G.separatethousands,exponentformat:G.exponentformat,minexponent:G.minexponent,showexponent:G.showexponent,title:{text:{valType:"string"},font:q({}),side:{valType:"enumerated",
values:["right","top","bottom"],dflt:"top"}},_deprecated:{title:{valType:"string"},titlefont:q({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},{"../../lib/extend":768,"../../plot_api/edit_types":810,"../../plots/cartesian/layout_attributes":842,"../../plots/font_attributes":856}],645:[function(b,K,G){K.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",
cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],646:[function(b,K,G){var q=b("../../lib"),m=b("../../plot_api/plot_template"),l=b("../../plots/cartesian/tick_value_defaults"),h=b("../../plots/cartesian/tick_mark_defaults"),a=b("../../plots/cartesian/tick_label_defaults"),g=b("./attributes");K.exports=function(e,n,p){function c(k,r){return q.coerce(f,d,g,k,r)}var d=m.newContainer(n,"colorbar"),f=e.colorbar||{};e=c("thicknessmode");c("thickness","fraction"===
e?30/(p.width-p.margin.l-p.margin.r):30);e=c("lenmode");c("len","fraction"===e?1:p.height-p.margin.t-p.margin.b);c("x");c("xanchor");c("xpad");c("y");c("yanchor");c("ypad");q.noneOrAll(f,d,["x","y"]);c("outlinecolor");c("outlinewidth");c("bordercolor");c("borderwidth");c("bgcolor");e=c("ticklabelposition");l(f,d,c,"linear");n={outerTicks:!1,font:p.font};-1!==e.indexOf("inside")&&(n.bgColor="black");a(f,d,c,"linear",n);h(f,d,c,"linear",n);c("title.text",p._dfltTitle.colorbar);q.coerceFont(c,"title.font",
p.font);c("title.side")}},{"../../lib":778,"../../plot_api/plot_template":817,"../../plots/cartesian/tick_label_defaults":849,"../../plots/cartesian/tick_mark_defaults":850,"../../plots/cartesian/tick_value_defaults":851,"./attributes":644}],647:[function(b,K,G){function q(L){function H(ma){return r(ma,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function P(){"function"===typeof X.calc?X.calc(L,
S,Q):(Q._fillgradient=U.reversescale?y(U.colorscale):U.colorscale,Q._zrange=[U[X.min],U[X.max]])}for(var M=L._fullLayout,N=L.calcdata,T=[],Q,U,S,X,Z=0;Z<N.length;Z++){S=N[Z][0].trace;var aa=S._module.colorbar;if(!0===S.visible&&aa){var fa=Array.isArray(aa);aa=fa?aa:[aa];for(var ha=0;ha<aa.length;ha++){X=aa[ha];var ja=X.container;(U=ja?S[ja]:S)&&U.showscale&&(Q=H(U.colorbar),Q._id="cb"+S.uid+(fa&&ja?"-"+ja:""),Q._traceIndex=S.index,Q._propPrefix=(ja?ja+".":"")+"colorbar.",Q._meta=S._meta,P(),T.push(Q))}}}for(var ba in M._colorAxes)U=
M[ba],U.showscale&&(N=M._colorAxes[ba],Q=H(U.colorbar),Q._id="cb"+ba,Q._propPrefix=ba+".colorbar.",Q._meta=M._meta,X={min:"cmin",max:"cmax"},"heatmap"!==N[0]&&(S=N[1],X.calc=S._module.colorbar.calc),P(),T.push(Q));return T}function m(L,H,P){function M(hb,nb){var va={propContainer:db,propName:H._propPrefix+"title",traceIndex:H._traceIndex,_meta:H._meta,placeholder:N._dfltTitle.colorbar,containerGroup:L.select("."+J.cbtitle)},Ba="h"===hb.charAt(0)?hb.substr(1):"h"+hb;L.selectAll("."+Ba+",."+Ba+"-math-group").remove();
C.draw(P,hb,r(va,nb||{}))}var N=P._fullLayout,T=N._size,Q=H._fillcolor,U=H._line,S=H.title,X=S.side,Z=H._zrange||g.extent(("function"===typeof Q?Q:U.color).domain()),aa="function"===typeof U.color?U.color:function(){return U.color},fa="function"===typeof Q?Q:function(){return Q},ha=H._levels,ja=h(P,H,Z),ba=ja.fill,ma=ja.line,qa=Math.round(H.thickness*("fraction"===H.thicknessmode?T.w:1));ja=qa/T.w;var ka=Math.round(H.len*("fraction"===H.lenmode?T.h:1)),oa=ka/T.h,na=H.xpad/T.w,la=(H.borderwidth+H.outlinewidth)/
2,ia=H.ypad/T.h,sa=Math.round(H.x*T.w+H.xpad),ta=H.x-ja*({middle:.5,right:1}[H.xanchor]||0),Aa=H.y+oa*(({top:-.5,bottom:.5}[H.yanchor]||0)-.5),Ka=Math.round(T.h*(1-Aa)),Sa=Ka-ka;H._lenFrac=oa;H._thickFrac=ja;H._xLeftFrac=ta;H._yBottomFrac=Aa;var db=H._axis=a(P,H,Z);db.position=H.x+na+ja;-1!==["top","bottom"].indexOf(X)&&(db.title.side=X,db.titlex=H.x+na,db.titley=Aa+("top"===S.side?oa-ia:ia));U.color&&"auto"===H.tickmode&&(db.tickmode="linear",db.tick0=ha.start,S=ha.size,ja=f.constrain((Ka-Sa)/50,
4,15)+1,ja=(Z[1]-Z[0])/((H.nticks||ja)*S),1<ja&&(ka=Math.pow(10,Math.floor(Math.log(ja)/Math.LN10)),S*=ka*f.roundUp(ja/ka,[2,5,10]),2E-6>(Math.abs(ha.start)/ha.size+1E-6)%1&&(db.tick0=0)),db.dtick=S);db.domain=[Aa+ia,Aa+oa-ia];db.setScale();L.attr("transform",k(Math.round(T.l),Math.round(T.t)));var eb=L.select("."+J.cbtitleunshift).attr("transform",k(-Math.round(T.l),-Math.round(T.t))),lb=L.select("."+J.cbaxis),ab,Ya=0;return f.syncOrAsync([n.previousPromises,function(){if(-1!==["top","bottom"].indexOf(X)){var hb=
db.title.font.size;M(db._id+"title",{attributes:{x:T.l+(H.x+na)*T.w,y:"top"===X?(1-(Aa+oa-ia))*T.h+T.t+3+.75*hb:(1-(Aa+ia))*T.h+T.t-3-.25*hb,"text-anchor":"start"}})}},function(){if(-1!==["top","bottom"].indexOf(X)){var hb=L.select("."+J.cbtitle),nb=hb.select("text"),va=[-H.outlinewidth/2,H.outlinewidth/2],Ba=hb.select(".h"+db._id+"title-math-group").node(),Ga=15.6;nb.node()&&(Ga=parseInt(nb.node().style.fontSize,10)*B);Ba?(Ya=v.bBox(Ba).height,Ya>Ga&&(va[1]-=(Ya-Ga)/2)):nb.node()&&!nb.classed(J.jsPlaceholder)&&
(Ya=v.bBox(nb.node()).height);Ya&&(Ya+=5,"top"===X?(db.domain[1]-=Ya/T.h,va[1]*=-1):(db.domain[0]+=Ya/T.h,nb=z.lineCount(nb),va[1]+=(1-nb)*Ga),hb.attr("transform",k(va[0],va[1])),db.setScale())}L.selectAll("."+J.cbfills+",."+J.cblines).attr("transform",k(0,Math.round(T.h*(1-db.domain[1]))));lb.attr("transform",k(0,Math.round(-T.t)));hb=L.select("."+J.cbfills).selectAll("rect."+J.cbfill).attr("style","").data(ba);hb.enter().append("rect").classed(J.cbfill,!0).style("stroke","none");hb.exit().remove();
var Na=Z.map(db.c2p).map(Math.round).sort(function($a,Va){return $a-Va});hb.each(function($a,Va){Va=[0===Va?Z[0]:(ba[Va]+ba[Va-1])/2,Va===ba.length-1?Z[1]:(ba[Va]+ba[Va+1])/2].map(db.c2p).map(Math.round);Va[1]=f.constrain(Va[1]+(Va[1]>Va[0])?1:-1,Na[0],Na[1]);Va=g.select(this).attr({x:sa,width:Math.max(qa,2),y:g.min(Va),height:Math.max(g.max(Va)-g.min(Va),2)});H._fillgradient?v.gradient(Va,P,H._id,"vertical",H._fillgradient,"fill"):($a=fa($a).replace("e-",""),Va.attr("fill",e($a).toHexString()))});
hb=L.select("."+J.cblines).selectAll("path."+J.cbline).data(U.color&&U.width?ma:[]);hb.enter().append("path").classed(J.cbline,!0);hb.exit().remove();hb.each(function($a){g.select(this).attr("d","M"+sa+","+(Math.round(db.c2p($a))+U.width/2%1)+"h"+qa).call(v.lineGroupStyle,U.width,aa($a),U.dash)});lb.selectAll("g."+db._id+"tick,path").remove();hb=sa+qa+(H.outlinewidth||0)/2-("outside"===H.ticks?1:0);va=c.calcTicks(db);Ga=c.getTickSigns(db)[2];c.drawTicks(P,db,{vals:"inside"===db.ticks?c.clipEnds(db,
va):va,layer:lb,path:c.makeTickPath(db,hb,Ga),transFn:c.makeTransTickFn(db)});return c.drawLabels(P,db,{vals:va,layer:lb,transFn:c.makeTransTickLabelFn(db),labelFns:c.makeLabelFns(db,hb)})},function(){if(-1===["top","bottom"].indexOf(X)){var hb=db.title.font.size,nb=db._offset+db._length/2;hb=T.l+(db.position||0)*T.w+("right"===db.side?10+hb*(db.showticklabels?1:.5):-10-hb*(db.showticklabels?.5:0));M("h"+db._id+"title",{avoid:{selection:g.select(P).selectAll("g."+db._id+"tick"),side:X,offsetLeft:T.l,
offsetTop:0,maxShift:N.width},attributes:{x:hb,y:nb,"text-anchor":"middle"},transform:{rotate:"-90",offset:0}})}},n.previousPromises,function(){var hb=qa+H.outlinewidth/2;-1===db.ticklabelposition.indexOf("inside")&&(hb+=v.bBox(lb.node()).width);ab=eb.select("text");if(ab.node()&&!ab.classed(J.jsPlaceholder)){var nb=eb.select(".h"+db._id+"title-math-group").node();nb=nb&&-1!==["top","bottom"].indexOf(X)?v.bBox(nb).width:v.bBox(eb.node()).right-sa-T.l;hb=Math.max(hb,nb)}nb=2*H.xpad+hb+H.borderwidth+
H.outlinewidth/2;var va=Ka-Sa;L.select("."+J.cbbg).attr({x:sa-H.xpad-(H.borderwidth+H.outlinewidth)/2,y:Sa-la,width:Math.max(nb,2),height:Math.max(va+2*la,2)}).call(x.fill,H.bgcolor).call(x.stroke,H.bordercolor).style("stroke-width",H.borderwidth);L.selectAll("."+J.cboutline).attr({x:sa,y:Sa+H.ypad+("top"===X?Ya:0),width:Math.max(qa,2),height:Math.max(va-2*H.ypad-Ya,2)}).call(x.stroke,H.outlinecolor).style({fill:"none","stroke-width":H.outlinewidth});L.attr("transform",k(T.l-({center:.5,right:1}[H.xanchor]||
0)*nb,T.t));hb={};var Ba=F[H.yanchor],Ga=I[H.yanchor];"pixels"===H.lenmode?(hb.y=H.y,hb.t=va*Ba,hb.b=va*Ga):(hb.t=hb.b=0,hb.yt=H.y+H.len*Ba,hb.yb=H.y-H.len*Ga);va=F[H.xanchor];Ba=I[H.xanchor];"pixels"===H.thicknessmode?(hb.x=H.x,hb.l=nb*va,hb.r=nb*Ba):(nb-=qa,hb.l=nb*va,hb.r=nb*Ba,hb.xl=H.x-H.thickness*va,hb.xr=H.x+H.thickness*Ba);n.autoMargin(P,H._id,hb)}],P)}function l(L,H,P){var M=P._fullLayout._size,N,T,Q;d.init({element:L.node(),gd:P,prepFn:function(){N=L.attr("transform");u(L)},moveFn:function(U,
S){L.attr("transform",N+k(U,S));T=d.align(H._xLeftFrac+U/M.w,H._thickFrac,0,1,H.xanchor);Q=d.align(H._yBottomFrac-S/M.h,H._lenFrac,0,1,H.yanchor);U=d.getCursor(T,Q,H.xanchor,H.yanchor);u(L,U)},doneFn:function(){u(L);if(void 0!==T&&void 0!==Q){var U={};U[H._propPrefix+"x"]=T;U[H._propPrefix+"y"]=Q;void 0!==H._traceIndex?p.call("_guiRestyle",P,U,H._traceIndex):p.call("_guiRelayout",P,U)}}})}function h(L,H,P){var M=H._levels;L=[];var N=[],T,Q=M.end+M.size/100,U=M.size,S=1.001*P[0]-.001*P[1],X=1.001*
P[1]-.001*P[0];for(T=0;1E5>T;T++){var Z=M.start+T*U;if(0<U?Z>=Q:Z<=Q)break;Z>S&&Z<X&&L.push(Z)}if(H._fillgradient)N=[0];else if("function"===typeof H._fillcolor)if(H=H._filllevels)for(Q=H.end+H.size/100,U=H.size,T=0;1E5>T;T++){Z=H.start+T*U;if(0<U?Z>=Q:Z<=Q)break;Z>P[0]&&Z<P[1]&&N.push(Z)}else N=L.map(function(aa){return aa-M.size/2}),N.push(N[N.length-1]+M.size);else H._fillcolor&&"string"===typeof H._fillcolor&&(N=[0]);0>M.size&&(L.reverse(),N.reverse());return{line:L,fill:N}}function a(L,H,P){function M(Q,
U){return f.coerce(N,T,t,Q,U)}L=L._fullLayout;var N={type:"linear",range:P,tickmode:H.tickmode,nticks:H.nticks,tick0:H.tick0,dtick:H.dtick,tickvals:H.tickvals,ticktext:H.ticktext,ticks:H.ticks,ticklen:H.ticklen,tickwidth:H.tickwidth,tickcolor:H.tickcolor,showticklabels:H.showticklabels,ticklabelposition:H.ticklabelposition,tickfont:H.tickfont,tickangle:H.tickangle,tickformat:H.tickformat,exponentformat:H.exponentformat,minexponent:H.minexponent,separatethousands:H.separatethousands,showexponent:H.showexponent,
showtickprefix:H.showtickprefix,tickprefix:H.tickprefix,showticksuffix:H.showticksuffix,ticksuffix:H.ticksuffix,title:H.title,showline:!0,anchor:"free",side:"right",position:1},T={type:"linear",_id:"y"+H._id};H={letter:"y",font:L.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:L.calendar};D(N,T,M,H,L);A(N,T,M,H);return T}var g=b("d3"),e=b("tinycolor2"),n=b("../../plots/plots"),p=b("../../registry"),c=b("../../plots/cartesian/axes"),d=b("../dragelement"),f=b("../../lib"),k=f.strTranslate,
r=b("../../lib/extend").extendFlat,u=b("../../lib/setcursor"),v=b("../drawing"),x=b("../color"),C=b("../titles"),z=b("../../lib/svg_text_utils"),y=b("../colorscale/helpers").flipScale,D=b("../../plots/cartesian/axis_defaults"),A=b("../../plots/cartesian/position_defaults"),t=b("../../plots/cartesian/layout_attributes");G=b("../../constants/alignment");var B=G.LINE_SPACING,F=G.FROM_TL,I=G.FROM_BR,J=b("./constants").cn;K.exports={draw:function(L){var H=L._fullLayout._infolayer.selectAll("g."+J.colorbar).data(q(L),
function(P){return P._id});H.enter().append("g").attr("class",function(P){return P._id}).classed(J.colorbar,!0);H.each(function(P){var M=g.select(this);f.ensureSingle(M,"rect",J.cbbg);f.ensureSingle(M,"g",J.cbfills);f.ensureSingle(M,"g",J.cblines);f.ensureSingle(M,"g",J.cbaxis,function(T){T.classed(J.crisp,!0)});f.ensureSingle(M,"g",J.cbtitleunshift,function(T){T.append("g").classed(J.cbtitle,!0)});f.ensureSingle(M,"rect",J.cboutline);var N=m(M,P,L);N&&N.then&&(L._promises||[]).push(N);L._context.edits.colorbarPosition&&
l(M,P,L)});H.exit().each(function(P){n.autoMargin(L,P._id)}).remove();H.order()}}},{"../../constants/alignment":745,"../../lib":778,"../../lib/extend":768,"../../lib/setcursor":799,"../../lib/svg_text_utils":803,"../../plots/cartesian/axes":828,"../../plots/cartesian/axis_defaults":830,"../../plots/cartesian/layout_attributes":842,"../../plots/cartesian/position_defaults":845,"../../plots/plots":891,"../../registry":911,"../color":643,"../colorscale/helpers":654,"../dragelement":662,"../drawing":665,
"../titles":738,"./constants":645,d3:169,tinycolor2:576}],648:[function(b,K,G){var q=b("../../lib");K.exports=function(m){return q.isPlainObject(m.colorbar)}},{"../../lib":778}],649:[function(b,K,G){K.exports={moduleType:"component",name:"colorbar",attributes:b("./attributes"),supplyDefaults:b("./defaults"),draw:b("./draw").draw,hasColorbar:b("./has_colorbar")}},{"./attributes":644,"./defaults":646,"./draw":647,"./has_colorbar":648}],650:[function(b,K,G){var q=b("../colorbar/attributes"),m=b("../../lib/regex").counter,
l=b("./scales.js").scales;Object.keys(l);K.exports=function(h,a){a=a||{};var g=a.cLetter||"c";h="noScale"in a?a.noScale:"marker.line"===(h||"");var e="showScaleDflt"in a?a.showScaleDflt:"z"===g,n="string"===typeof a.colorscaleDflt?l[a.colorscaleDflt]:null,p=a.editTypeOverride||"";var c="colorAttr"in a?a.colorAttr:{z:"z",c:"color"}[g];var d=g+"auto",f=g+"min",k=g+"max",r={};r[f]=r[k]=void 0;var u={};u[d]=!1;var v={};"color"===c&&(v.color={valType:"color",arrayOk:!0,editType:p||"style"},a.anim&&(v.color.anim=
!0));v[d]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:r};v[f]={valType:"number",dflt:null,editType:p||"plot",impliedEdits:u};v[k]={valType:"number",dflt:null,editType:p||"plot",impliedEdits:u};v[g+"mid"]={valType:"number",dflt:null,editType:"calc",impliedEdits:r};v.colorscale={valType:"colorscale",editType:"calc",dflt:n,impliedEdits:{autocolorscale:!1}};v.autocolorscale={valType:"boolean",dflt:!1===a.autoColorDflt?!1:!0,editType:"calc",impliedEdits:{colorscale:void 0}};v.reversescale=
{valType:"boolean",dflt:!1,editType:"plot"};h||(v.showscale={valType:"boolean",dflt:e,editType:"calc"},v.colorbar=q);a.noColorAxis||(v.coloraxis={valType:"subplotid",regex:m("coloraxis"),dflt:null,editType:"calc"});return v}},{"../../lib/regex":795,"../colorbar/attributes":644,"./scales.js":658}],651:[function(b,K,G){var q=b("fast-isnumeric"),m=b("../../lib"),l=b("./helpers").extractOpts;K.exports=function(h,a,g){h=h._fullLayout;var e=g.vals;a=(g=g.containerStr)?m.nestedProperty(a,g).get():a;g=l(a);
var n=!1!==g.auto,p=g.min,c=g.max,d=g.mid;void 0===p?p=m.aggNums(Math.min,null,e):n&&(p=a._colorAx&&q(p)?Math.min(p,m.aggNums(Math.min,null,e)):m.aggNums(Math.min,null,e));void 0===c?c=m.aggNums(Math.max,null,e):n&&(c=a._colorAx&&q(c)?Math.max(c,m.aggNums(Math.max,null,e)):m.aggNums(Math.max,null,e));n&&void 0!==d&&(c-d>d-p?p=d-(c-d):c-d<d-p&&(c=d+(d-p)));p===c&&(p-=.5,c+=.5);g._sync("min",p);g._sync("max",c);g.autocolorscale&&g._sync("colorscale",0>p*c?h.colorscale.diverging:0<=p?h.colorscale.sequential:
h.colorscale.sequentialminus)}},{"../../lib":778,"./helpers":654,"fast-isnumeric":241}],652:[function(b,K,G){var q=b("../../lib"),m=b("./helpers").hasColorscale,l=b("./helpers").extractOpts;K.exports=function(h,a){function g(k,r){var u=k["_"+r];void 0!==u&&(k[r]=u)}function e(k,r){if(k=r.container?q.nestedProperty(k,r.container).get():k)if(k.coloraxis)k._colorAx=a[k.coloraxis];else{var u=l(k),v=u.auto;(v||void 0===u.min)&&g(k,r.min);(v||void 0===u.max)&&g(k,r.max);u.autocolorscale&&g(k,"colorscale")}}
for(var n=0;n<h.length;n++){var p=h[n],c=p._module.colorbar;if(c)if(Array.isArray(c))for(var d=0;d<c.length;d++)e(p,c[d]);else e(p,c);m(p,"marker.line")&&e(p,{container:"marker.line",min:"cmin",max:"cmax"})}for(var f in a._colorAxes)e(a[f],{min:"cmin",max:"cmax"})}},{"../../lib":778,"./helpers":654}],653:[function(b,K,G){function q(n,p){var c=p.slice(0,p.length-1);return p?l.nestedProperty(n,c).get()||{}:n}var m=b("fast-isnumeric"),l=b("../../lib"),h=b("../colorbar/has_colorbar"),a=b("../colorbar/defaults"),
g=b("./scales").isValid,e=b("../../registry").traceIs;K.exports=function r(p,c,d,f,k){var u=k.prefix,v=k.cLetter,x="_module"in c,C=q(p,u),z=q(c,u),y=q(c._template||{},u)||{},D=function(){delete p.coloraxis;delete c.coloraxis;return r(p,c,d,f,k)};if(x){var A=d._colorAxes||{},t=f(u+"coloraxis");if(t){u=e(c,"contour")&&l.nestedProperty(c,"contours.coloring").get()||"heatmap";(x=A[t])?(x[2].push(D),x[0]!==u&&(x[0]=!1,l.warn(["Ignoring coloraxis:",t,"setting as it is linked to incompatible colorscales."].join(" ")))):
A[t]=[u,c,[D]];return}}D=C[v+"min"];A=C[v+"max"];D=m(D)&&m(A)&&D<A;f(u+v+"auto",!D)?f(u+v+"mid"):(f(u+v+"min"),f(u+v+"max"));v=C.colorscale;D=y.colorscale;var B;void 0!==v&&(B=!g(v));void 0!==D&&(B=!g(D));f(u+"autocolorscale",B);f(u+"colorscale");f(u+"reversescale");if("marker.line."!==u){var F;u&&x&&(F=h(C));f(u+"showscale",F)&&(u&&y&&(z._template=y),a(C,z,d))}}},{"../../lib":778,"../../registry":911,"../colorbar/defaults":646,"../colorbar/has_colorbar":648,"./scales":658,"fast-isnumeric":241}],
654:[function(b,K,G){function q(r){var u=r._colorAx,v=u?u:r;r={};var x;for(x=0;x<f.length;x++){var C=f[x];r[C]=v[C]}if(u){var z="c";for(x=0;x<k.length;x++)C=k[x],r[C]=v["c"+C]}else{for(x=0;x<k.length;x++){C=k[x];var y="c"+C;y in v?r[C]=v[y]:(y="z"+C,y in v&&(r[C]=v[y]))}z=y.charAt(0)}r._sync=function(D,A){D=-1!==k.indexOf(D)?z+D:D;v[D]=v["_"+D]=A};return r}function m(r){var u=q(r);r=u.min;var v=u.max;u=u.reversescale?l(u.colorscale):u.colorscale;for(var x=u.length,C=Array(x),z=Array(x),y=0;y<x;y++){var D=
u[y];C[y]=r+D[0]*(v-r);z[y]=D[1]}return{domain:C,range:z}}function l(r){var u=r.length,v=Array(u);--u;for(var x=0;0<=u;u--,x++){var C=r[u];v[x]=[1-C[0],C[1]]}return v}function h(r,u){u=u||{};var v=r.domain,x=r.range;r=x.length;for(var C=Array(r),z=0;z<r;z++){var y=e(x[z]).toRgb();C[z]=[y.r,y.g,y.b,y.a]}var D=g.scale.linear().domain(v).range(C).clamp(!0);v=u.noNumericCheck;u=u.returnArray;u=v&&u?D:v?function(A){return a(D(A))}:u?function(A){return n(A)?D(A):e(A).isValid()?A:c.defaultLine}:function(A){return n(A)?
a(D(A)):e(A).isValid()?A:c.defaultLine};u.domain=D.domain;u.range=function(){return x};return u}function a(r){return e({r:r[0],g:r[1],b:r[2],a:r[3]}).toRgbString()}var g=b("d3"),e=b("tinycolor2"),n=b("fast-isnumeric"),p=b("../../lib"),c=b("../color"),d=b("./scales").isValid,f=["showscale","autocolorscale","colorscale","reversescale","colorbar"],k=["min","max","mid","auto"];K.exports={hasColorscale:function(r,u,v){r=u?p.nestedProperty(r,u).get()||{}:r;v=r[v||"color"];u=!1;if(p.isArrayOrTypedArray(v))for(var x=
0;x<v.length;x++)if(n(v[x])){u=!0;break}return p.isPlainObject(r)&&(u||!0===r.showscale||n(r.cmin)&&n(r.cmax)||d(r.colorscale)||p.isPlainObject(r.colorbar))},extractOpts:q,extractScale:m,flipScale:l,makeColorScaleFunc:h,makeColorScaleFuncFromTrace:function(r,u){return h(m(r),u)}}},{"../../lib":778,"../color":643,"./scales":658,d3:169,"fast-isnumeric":241,tinycolor2:576}],655:[function(b,K,G){G=b("./scales");var q=b("./helpers");K.exports={moduleType:"component",name:"colorscale",attributes:b("./attributes"),
layoutAttributes:b("./layout_attributes"),supplyLayoutDefaults:b("./layout_defaults"),handleDefaults:b("./defaults"),crossTraceDefaults:b("./cross_trace_defaults"),calc:b("./calc"),scales:G.scales,defaultScale:G.defaultScale,getScale:G.get,isValidScale:G.isValid,hasColorscale:q.hasColorscale,extractOpts:q.extractOpts,extractScale:q.extractScale,flipScale:q.flipScale,makeColorScaleFunc:q.makeColorScaleFunc,makeColorScaleFuncFromTrace:q.makeColorScaleFuncFromTrace}},{"./attributes":650,"./calc":651,
"./cross_trace_defaults":652,"./defaults":653,"./helpers":654,"./layout_attributes":656,"./layout_defaults":657,"./scales":658}],656:[function(b,K,G){G=b("../../lib/extend").extendFlat;var q=b("./attributes");b=b("./scales").scales;K.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:b.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:b.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:b.RdBu,editType:"calc"}},coloraxis:G({_isSubplotObj:!0,
editType:"calc"},q("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},{"../../lib/extend":768,"./attributes":650,"./scales":658}],657:[function(b,K,G){var q=b("../../lib"),m=b("../../plot_api/plot_template"),l=b("./layout_attributes"),h=b("./defaults");K.exports=function(a,g){function e(r,u){return q.coerce(d,f,l.coloraxis,r,u)}q.coerce(a,g,l,"colorscale.sequential",void 0);q.coerce(a,g,l,"colorscale.sequentialminus",void 0);q.coerce(a,g,l,"colorscale.diverging",
void 0);var n=g._colorAxes,p;for(p in n){var c=n[p];if(c[0]){var d=a[p]||{};var f=m.newContainer(g,p,"coloraxis");f._name=p;h(d,f,g,e,{prefix:"",cLetter:"c"})}else{for(var k=0;k<c[2].length;k++)c[2][k]();delete g._colorAxes[p]}}}},{"../../lib":778,"../../plot_api/plot_template":817,"./defaults":653,"./layout_attributes":656}],658:[function(b,K,G){function q(a){var g=0;if(!Array.isArray(a)||2>a.length||!a[0]||!a[a.length-1]||0!==+a[0][0]||1!==+a[a.length-1][0])return!1;for(var e=0;e<a.length;e++){var n=
a[e];if(2!==n.length||+n[0]<g||!m(n[1]).isValid())return!1;g=+n[0]}return!0}var m=b("tinycolor2"),l={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],
[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],
[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],
[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],
[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],
[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],
[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},h=l.RdBu;K.exports={scales:l,defaultScale:h,get:function(a,g){function e(){try{a=l[a]||JSON.parse(a)}catch(n){a=
g}}g||(g=h);if(!a)return g;"string"===typeof a&&(e(),"string"===typeof a&&e());return q(a)?a:g},isValid:function(a){return void 0!==l[a]?!0:q(a)}}},{tinycolor2:576}],659:[function(b,K,G){K.exports=function(q,m,l,h,a){q=(q-l)/(h-l);m=q+m/(h-l);l=(q+m)/2;return"left"===a||"bottom"===a?q:"center"===a||"middle"===a?l:"right"===a||"top"===a?m:q<2/3-l?q:m>4/3-l?m:l}},{}],660:[function(b,K,G){var q=b("../../lib"),m=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize",
"ne-resize"]];K.exports=function(l,h,a,g){l="left"===a?0:"center"===a?1:"right"===a?2:q.constrain(Math.floor(3*l),0,2);h="bottom"===g?0:"middle"===g?1:"top"===g?2:q.constrain(Math.floor(3*h),0,2);return m[h][l]}},{"../../lib":778}],661:[function(b,K,G){G.selectMode=function(q){return"lasso"===q||"select"===q};G.drawMode=function(q){return"drawclosedpath"===q||"drawopenpath"===q||"drawline"===q||"drawrect"===q||"drawcircle"===q};G.openMode=function(q){return"drawline"===q||"drawopenpath"===q};G.rectMode=
function(q){return"select"===q||"drawline"===q||"drawrect"===q||"drawcircle"===q};G.freeMode=function(q){return"lasso"===q||"drawclosedpath"===q||"drawopenpath"===q};G.selectingOrDrawing=function(q){return G.freeMode(q)||G.rectMode(q)}},{}],662:[function(b,K,G){function q(){var p=document.createElement("div");p.className="dragcover";var c=p.style;c.position="fixed";c.left=0;c.right=0;c.top=0;c.bottom=0;c.zIndex=999999999;c.background="none";document.body.appendChild(p);return p}function m(p){return l(p.changedTouches?
p.changedTouches[0]:p,document.body)}var l=b("mouse-event-offset"),h=b("has-hover"),a=b("has-passive-events"),g=b("../../lib").removeElement,e=b("../../plots/cartesian/constants"),n=K.exports={};n.align=b("./align");n.getCursor=b("./cursor");b=b("./unhover");n.unhover=b.wrapped;n.unhoverRaw=b.raw;n.init=function(p){function c(J,L,H){Math.abs(J)<H&&(J=0);Math.abs(L)<H&&(L=0);return[J,L]}function d(J){r._dragged=!1;r._dragging=!0;var L=m(J);C=L[0];z=L[1];B=J.target;t=J;F=2===J.buttons||J.ctrlKey;"undefined"===
typeof J.clientX&&"undefined"===typeof J.clientY&&(J.clientX=C,J.clientY=z);y=(new Date).getTime();y-r._mouseDownTime<v?u+=1:(u=1,r._mouseDownTime=y);p.prepFn&&p.prepFn(J,C,z);h&&!F?(A=q(),A.style.cursor=window.getComputedStyle(x).cursor):h||(A=document,D=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(x).cursor);document.addEventListener("mouseup",k);document.addEventListener("touchend",k);!1!==p.dragmode&&(J.preventDefault(),
document.addEventListener("mousemove",f),document.addEventListener("touchmove",f,{passive:!1}))}function f(J){J.preventDefault();J=m(J);var L=I(J[0]-C,J[1]-z,p.minDrag||e.MINDRAG);J=L[0];L=L[1];if(J||L)r._dragged=!0,n.unhover(r);r._dragged&&p.moveFn&&!F&&(r._dragdata={element:x,dx:J,dy:L},p.moveFn(J,L))}function k(J){delete r._dragdata;!1!==p.dragmode&&(J.preventDefault(),document.removeEventListener("mousemove",f),document.removeEventListener("touchmove",f));document.removeEventListener("mouseup",
k);document.removeEventListener("touchend",k);h?g(A):D&&(A.documentElement.style.cursor=D,D=null);if(r._dragging){r._dragging=!1;(new Date).getTime()-r._mouseDownTime>v&&(u=Math.max(u-1,1));if(r._dragged)p.doneFn&&p.doneFn();else if(p.clickFn&&p.clickFn(u,t),!F){try{var L=new MouseEvent("click",J)}catch(P){var H=m(J);L=document.createEvent("MouseEvents");L.initMouseEvent("click",J.bubbles,J.cancelable,J.view,J.detail,J.screenX,J.screenY,H[0],H[1],J.ctrlKey,J.altKey,J.shiftKey,J.metaKey,J.button,J.relatedTarget)}B.dispatchEvent(L)}r._dragging=
!1}r._dragged=!1}var r=p.gd,u=1,v=r._context.doubleClickDelay,x=p.element,C,z,y,D,A,t,B,F;r._mouseDownTime||(r._mouseDownTime=0);x.style.pointerEvents="all";x.onmousedown=d;a?(x._ontouchstart&&x.removeEventListener("touchstart",x._ontouchstart),x._ontouchstart=d,x.addEventListener("touchstart",d,{passive:!1})):x.ontouchstart=d;var I=p.clampFn||c};n.coverSlip=q},{"../../lib":778,"../../plots/cartesian/constants":834,"./align":659,"./cursor":660,"./unhover":663,"has-hover":440,"has-passive-events":441,
"mouse-event-offset":484}],663:[function(b,K,G){var q=b("../../lib/events"),m=b("../../lib/throttle"),l=b("../../lib/dom").getGraphDiv,h=b("../fx/constants"),a=K.exports={};a.wrapped=function(g,e,n){g=l(g);g._fullLayout&&m.clear(g._fullLayout._uid+h.HOVERID);a.raw(g,e,n)};a.raw=function(g,e){var n=g._fullLayout,p=g._hoverdata;e||(e={});e.target&&!1===q.triggerHandler(g,"plotly_beforehover",e)||(n._hoverlayer.selectAll("g").remove(),n._hoverlayer.selectAll("line").remove(),n._hoverlayer.selectAll("circle").remove(),
g._hoverdata=void 0,e.target&&p&&g.emit("plotly_unhover",{event:e,points:p}))}},{"../../lib/dom":766,"../../lib/events":767,"../../lib/throttle":804,"../fx/constants":677}],664:[function(b,K,G){G.dash={valType:"string",values:"solid dot dash longdash dashdot longdashdot".split(" "),dflt:"solid",editType:"style"}},{}],665:[function(b,K,G){function q(T,Q){return A.symbolFuncs[T%100](Q)+(200<=T?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}function m(T,Q,U,S){var X=e.select(T.node().parentNode),Z=-1!==Q.indexOf("top")?
"top":-1!==Q.indexOf("bottom")?"bottom":"middle";Q=-1!==Q.indexOf("left")?"end":-1!==Q.indexOf("right")?"start":"middle";var aa=S?S/.8+1:0,fa=(u.lineCount(T)-1)*x+1;S=J[Q]*aa;U=.75*U+J[Z]*aa+(J[Z]-1)*fa*U/2;T.attr("text-anchor",Q);X.attr("transform",r(S,U))}function l(T,Q){T=T.ts||Q.textfont.size;return n(T)&&0<T?T:0}function h(T,Q,U,S){var X=T[0]-Q[0],Z=T[1]-Q[1],aa=U[0]-Q[0],fa=U[1]-Q[1];U=Math.pow(X*X+Z*Z,.25);T=Math.pow(aa*aa+fa*fa,.25);X=(T*T*X-U*U*aa)*S;S*=T*T*Z-U*U*fa;Z=3*T*(U+T);U=3*U*(U+
T);return[[e.round(Q[0]+(Z&&X/Z),2),e.round(Q[1]+(Z&&S/Z),2)],[e.round(Q[0]-(U&&X/U),2),e.round(Q[1]-(U&&S/U),2)]]}function a(T){var Q=T.getAttribute("data-unformatted");if(null!==Q)return Q+T.getAttribute("data-math")+T.getAttribute("text-anchor")+T.getAttribute("style")}function g(T,Q){if(!T)return null;Q=Q._context;return"url('"+(Q._exportedPlot?"":Q._baseUrl||"")+"#"+T+"')"}var e=b("d3"),n=b("fast-isnumeric"),p=b("tinycolor2"),c=b("../../registry"),d=b("../color"),f=b("../colorscale"),k=b("../../lib"),
r=k.strTranslate,u=b("../../lib/svg_text_utils"),v=b("../../constants/xmlns_namespaces"),x=b("../../constants/alignment").LINE_SPACING,C=b("../../constants/interactions").DESELECTDIM,z=b("../../traces/scatter/subtypes"),y=b("../../traces/scatter/make_bubble_size_func"),D=b("../../components/fx/helpers").appendArrayPointValue,A=K.exports={};A.font=function(T,Q,U,S){k.isPlainObject(Q)&&(S=Q.color,U=Q.size,Q=Q.family);Q&&T.style("font-family",Q);U+1&&T.style("font-size",U+"px");S&&T.call(d.fill,S)};
A.setPosition=function(T,Q,U){T.attr("x",Q).attr("y",U)};A.setSize=function(T,Q,U){T.attr("width",Q).attr("height",U)};A.setRect=function(T,Q,U,S,X){T.call(A.setPosition,Q,U).call(A.setSize,S,X)};A.translatePoint=function(T,Q,U,S){U=U.c2p(T.x);T=S.c2p(T.y);if(n(U)&&n(T)&&Q.node())"text"===Q.node().nodeName?Q.attr("x",U).attr("y",T):Q.attr("transform",r(U,T));else return!1;return!0};A.translatePoints=function(T,Q,U){T.each(function(S){var X=e.select(this);A.translatePoint(S,X,Q,U)})};A.hideOutsideRangePoint=
function(T,Q,U,S,X,Z){Q.attr("display",U.isPtWithinRange(T,X)&&S.isPtWithinRange(T,Z)?null:"none")};A.hideOutsideRangePoints=function(T,Q){if(Q._hasClipOnAxisFalse){var U=Q.xaxis,S=Q.yaxis;T.each(function(X){X=X[0].trace;var Z=X.xcalendar,aa=X.ycalendar;X=c.traceIs(X,"bar-like")?".bartext":".point,.textpoint";T.selectAll(X).each(function(fa){A.hideOutsideRangePoint(fa,e.select(this),U,S,Z,aa)})})}};A.crispRound=function(T,Q,U){return Q&&n(Q)?T._context.staticPlot?Q:1>Q?1:Math.round(Q):U||0};A.singleLineStyle=
function(T,Q,U,S,X){Q.style("fill","none");T=(((T||[])[0]||{}).trace||{}).line||{};U=U||T.width||0;X=X||T.dash||"";d.stroke(Q,S||T.color);A.dashLine(Q,X,U)};A.lineGroupStyle=function(T,Q,U,S){T.style("fill","none").each(function(X){X=(((X||[])[0]||{}).trace||{}).line||{};var Z=Q||X.width||0,aa=S||X.dash||"";e.select(this).call(d.stroke,U||X.color).call(A.dashLine,aa,Z)})};A.dashLine=function(T,Q,U){U=+U||0;Q=A.dashStyle(Q,U);T.style({"stroke-dasharray":Q,"stroke-width":U+"px"})};A.dashStyle=function(T,
Q){Q=Math.max(+Q||1,3);"solid"===T?T="":"dot"===T?T=Q+"px,"+Q+"px":"dash"===T?T=3*Q+"px,"+3*Q+"px":"longdash"===T?T=5*Q+"px,"+5*Q+"px":"dashdot"===T?T=3*Q+"px,"+Q+"px,"+Q+"px,"+Q+"px":"longdashdot"===T&&(T=5*Q+"px,"+2*Q+"px,"+Q+"px,"+2*Q+"px");return T};A.singleFillStyle=function(T){var Q=(((e.select(T.node()).data()[0]||[])[0]||{}).trace||{}).fillcolor;Q&&T.call(d.fill,Q)};A.fillGroupStyle=function(T){T.style("stroke-width",0).each(function(Q){var U=e.select(this);Q[0].trace&&U.call(d.fill,Q[0].trace.fillcolor)})};
var t=b("./symbol_defs");A.symbolNames=[];A.symbolFuncs=[];A.symbolNeedLines={};A.symbolNoDot={};A.symbolNoFill={};A.symbolList=[];Object.keys(t).forEach(function(T){var Q=t[T],U=Q.n;A.symbolList.push(U,String(U),T,U+100,String(U+100),T+"-open");A.symbolNames[U]=T;A.symbolFuncs[U]=Q.f;Q.needLine&&(A.symbolNeedLines[U]=!0);Q.noDot?A.symbolNoDot[U]=!0:A.symbolList.push(U+200,String(U+200),T+"-dot",U+300,String(U+300),T+"-open-dot");Q.noFill&&(A.symbolNoFill[U]=!0)});var B=A.symbolNames.length;A.symbolNumber=
function(T){if(n(T))T=+T;else if("string"===typeof T){var Q=0;0<T.indexOf("-open")&&(Q=100,T=T.replace("-open",""));0<T.indexOf("-dot")&&(Q+=200,T=T.replace("-dot",""));T=A.symbolNames.indexOf(T);0<=T&&(T+=Q)}return T%100>=B||400<=T?0:Math.floor(Math.max(T,0))};b={x1:1,x2:0,y1:0,y2:0};K={x1:0,x2:0,y1:1,y2:0};var F=e.format("~.1f"),I={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:b},horizontalreversed:{node:"linearGradient",
attrs:b,reversed:!0},vertical:{node:"linearGradient",attrs:K},verticalreversed:{node:"linearGradient",attrs:K,reversed:!0}};A.gradient=function(T,Q,U,S,X,Z){for(var aa=X.length,fa=I[S],ha=Array(aa),ja=0;ja<aa;ja++)fa.reversed?ha[aa-1-ja]=[F(100*(1-X[ja][0])),X[ja][1]]:ha[ja]=[F(100*X[ja][0]),X[ja][1]];X=Q._fullLayout;var ba="g"+X._uid+"-"+U;U=X._defs.select(".gradients").selectAll("#"+ba).data([S+ha.join(";")],k.identity);U.exit().remove();U.enter().append(fa.node).each(function(){var ma=e.select(this);
fa.attrs&&ma.attr(fa.attrs);ma.attr("id",ba);ma=ma.selectAll("stop").data(ha);ma.exit().remove();ma.enter().append("stop");ma.each(function(qa){var ka=p(qa[1]);e.select(this).attr({offset:qa[0]+"%","stop-color":d.tinyRGB(ka),"stop-opacity":ka.getAlpha()})})});T.style(Z,g(ba,Q)).style(Z+"-opacity",null);T="."+e.select(T.node().parentNode).attr("class").replace(/\s/g,".")+">."+T.attr("class").replace(/\s/g,".");X._gradientUrlQueryParts[T]=1};A.initGradients=function(T){T=T._fullLayout;k.ensureSingle(T._defs,
"g","gradients").selectAll("linearGradient,radialGradient").remove();T._gradientUrlQueryParts={}};A.pointStyle=function(T,Q,U){if(T.size()){var S=A.makePointStyleFns(Q);T.each(function(X){A.singlePointStyle(X,e.select(this),Q,S,U)})}};A.singlePointStyle=function(T,Q,U,S,X){var Z=U.marker,aa=Z.line;Q.style("opacity",S.selectedOpacityFn?S.selectedOpacityFn(T):void 0===T.mo?Z.opacity:T.mo);if(S.ms2mrc){var fa="various"===T.ms||"various"===Z.size?3:S.ms2mrc(T.ms);T.mrc=fa;S.selectedSizeFn&&(fa=T.mrc=
S.selectedSizeFn(T));var ha=A.symbolNumber(T.mx||Z.symbol)||0;T.om=100<=ha%200;Q.attr("d",q(ha,fa))}fa=!1;if(T.so){ha=aa.outlierwidth;var ja=aa.outliercolor;aa=Z.outliercolor}else ha=(aa||{}).width,ha=(T.mlw+1||ha+1||(T.trace?(T.trace.marker.line||{}).width:0)+1)-1||0,ja="mlc"in T?T.mlcc=S.lineScale(T.mlc):k.isArrayOrTypedArray(aa.color)?d.defaultLine:aa.color,k.isArrayOrTypedArray(Z.color)&&(fa=!0),aa="mc"in T?T.mcc=S.markerScale(T.mc):Z.color||"rgba(0,0,0,0)",S.selectedColorFn&&(aa=S.selectedColorFn(T));
if(T.om)Q.call(d.stroke,aa).style({"stroke-width":(ha||1)+"px",fill:"none"});else{Q.style("stroke-width",(T.isBlank?0:ha)+"px");var ba=Z.gradient;(S=T.mgt)?fa=!0:S=ba&&ba.type;Array.isArray(S)&&(S=S[0],I[S]||(S=0));S&&"none"!==S?((Z=T.mgc)?fa=!0:Z=ba.color,U=U.uid,fa&&(U+="-"+T.i),A.gradient(Q,X,U,S,[[0,Z],[1,aa]],"fill")):d.fill(Q,aa);ha&&d.stroke(Q,ja)}};A.makePointStyleFns=function(T){var Q={},U=T.marker;Q.markerScale=A.tryColorscale(U,"");Q.lineScale=A.tryColorscale(U,"line");c.traceIs(T,"symbols")&&
(Q.ms2mrc=z.isBubble(T)?y(T):function(){return(U.size||6)/2});T.selectedpoints&&k.extendFlat(Q,A.makeSelectedPointStyleFns(T));return Q};A.makeSelectedPointStyleFns=function(T){var Q={},U=T.marker||{},S=(T.selected||{}).marker||{},X=(T.unselected||{}).marker||{},Z=S.opacity,aa=X.opacity,fa=void 0!==Z,ha=void 0!==aa;if(k.isArrayOrTypedArray(U.opacity)||fa||ha)Q.selectedOpacityFn=function(ia){var sa=void 0===ia.mo?U.opacity:ia.mo;return ia.selected?fa?Z:sa:ha?aa:C*sa};var ja=U.color,ba=S.color,ma=X.color;
if(ba||ma)Q.selectedColorFn=function(ia){var sa=ia.mcc||ja;return ia.selected?ba||sa:ma||sa};var qa=U.size,ka=S.size,oa=X.size,na=void 0!==ka,la=void 0!==oa;c.traceIs(T,"symbols")&&(na||la)&&(Q.selectedSizeFn=function(ia){var sa=ia.mrc||qa/2;return ia.selected?na?ka/2:sa:la?oa/2:sa});return Q};A.makeSelectedTextStyleFns=function(T){var Q={},U=(T.textfont||{}).color,S=((T.selected||{}).textfont||{}).color,X=((T.unselected||{}).textfont||{}).color;Q.selectedTextColorFn=function(Z){var aa=Z.tc||U;return Z.selected?
S||aa:X?X:S?aa:d.addOpacity(aa,C)};return Q};A.selectedPointStyle=function(T,Q){if(T.size()&&Q.selectedpoints){var U=A.makeSelectedPointStyleFns(Q),S=Q.marker||{},X=[];U.selectedOpacityFn&&X.push(function(Z,aa){Z.style("opacity",U.selectedOpacityFn(aa))});U.selectedColorFn&&X.push(function(Z,aa){d.fill(Z,U.selectedColorFn(aa))});U.selectedSizeFn&&X.push(function(Z,aa){var fa=aa.mx||S.symbol||0,ha=U.selectedSizeFn(aa);Z.attr("d",q(A.symbolNumber(fa),ha));aa.mrc2=ha});X.length&&T.each(function(Z){for(var aa=
e.select(this),fa=0;fa<X.length;fa++)X[fa](aa,Z)})}};A.tryColorscale=function(T,Q){if(T=Q?k.nestedProperty(T,Q).get():T)if(Q=T.color,(T.colorscale||T._colorAx)&&k.isArrayOrTypedArray(Q))return f.makeColorScaleFuncFromTrace(T);return k.identity};var J={start:1,end:-1,middle:0,bottom:1,top:-1};A.textPointStyle=function(T,Q,U){if(T.size()){if(Q.selectedpoints)var S=A.makeSelectedTextStyleFns(Q).selectedTextColorFn;var X=Q.texttemplate,Z=U._fullLayout;T.each(function(aa){var fa=e.select(this),ha=X?k.extractOption(aa,
Q,"txt","texttemplate"):k.extractOption(aa,Q,"tx","text");if(ha||0===ha){if(X){var ja=Q._module.formatLabels?Q._module.formatLabels(aa,Q,Z):{},ba={};D(ba,Q,aa.i);ha=k.texttemplateString(ha,ja,Z._d3locale,ba,aa,Q._meta||{})}ja=aa.tp||Q.textposition;ba=l(aa,Q);var ma=S?S(aa):aa.tc||Q.textfont.color;fa.call(A.font,aa.tf||Q.textfont.family,ba,ma).text(ha).call(u.convertToTspans,U).call(m,ja,ba,aa.mrc)}else fa.remove()})}};A.selectedTextStyle=function(T,Q){if(T.size()&&Q.selectedpoints){var U=A.makeSelectedTextStyleFns(Q);
T.each(function(S){var X=e.select(this),Z=U.selectedTextColorFn(S),aa=S.tp||Q.textposition,fa=l(S,Q);d.fill(X,Z);m(X,aa,fa,S.mrc2||S.mrc)})}};A.smoothopen=function(T,Q){if(3>T.length)return"M"+T.join("L");var U="M"+T[0],S=[],X;for(X=1;X<T.length-1;X++)S.push(h(T[X-1],T[X],T[X+1],Q));U+="Q"+S[0][0]+" "+T[1];for(X=2;X<T.length-1;X++)U+="C"+S[X-2][1]+" "+S[X-1][0]+" "+T[X];return U+="Q"+S[T.length-3][1]+" "+T[T.length-1]};A.smoothclosed=function(T,Q){if(3>T.length)return"M"+T.join("L")+"Z";var U="M"+
T[0],S=T.length-1,X=[h(T[S],T[0],T[1],Q)],Z;for(Z=1;Z<S;Z++)X.push(h(T[Z-1],T[Z],T[Z+1],Q));X.push(h(T[S-1],T[S],T[0],Q));for(Z=1;Z<=S;Z++)U+="C"+X[Z-1][1]+" "+X[Z][0]+" "+T[Z];return U+="C"+X[S][1]+" "+X[0][0]+" "+T[0]+"Z"};var L={hv:function(T,Q){return"H"+e.round(Q[0],2)+"V"+e.round(Q[1],2)},vh:function(T,Q){return"V"+e.round(Q[1],2)+"H"+e.round(Q[0],2)},hvh:function(T,Q){return"H"+e.round((T[0]+Q[0])/2,2)+"V"+e.round(Q[1],2)+"H"+e.round(Q[0],2)},vhv:function(T,Q){return"V"+e.round((T[1]+Q[1])/
2,2)+"H"+e.round(Q[0],2)+"V"+e.round(Q[1],2)}},H=function(T,Q){return"L"+e.round(Q[0],2)+","+e.round(Q[1],2)};A.steps=function(T){var Q=L[T]||H;return function(U){for(var S="M"+e.round(U[0][0],2)+","+e.round(U[0][1],2),X=1;X<U.length;X++)S+=Q(U[X-1],U[X]);return S}};A.makeTester=function(){var T=k.ensureSingleById(e.select("body"),"svg","js-plotly-tester",function(U){U.attr(v.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),Q=k.ensureSingle(T,
"path","js-reference-point",function(U){U.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});A.tester=T;A.testref=Q};A.savedBBoxes={};var P=0;A.bBox=function(T,Q,U){U||(U=a(T));var S;if(U){if(S=A.savedBBoxes[U])return k.extendFlat({},S)}else if(1===T.childNodes.length){var X=T.childNodes[0];if(U=a(X)){S=+X.getAttribute("x")||0;var Z=+X.getAttribute("y")||0,aa=X.getAttribute("transform");if(!aa)return U=A.bBox(X,!1,U),S&&(U.left+=S,U.right+=S),Z&&(U.top+=Z,U.bottom+=Z),U;U+="~"+S+"~"+
Z+"~"+aa;if(S=A.savedBBoxes[U])return k.extendFlat({},S)}}if(!Q){var fa=A.tester.node();T=T.cloneNode(!0);fa.appendChild(T)}e.select(T).attr("transform",null).call(u.positionText,0,0);S=T.getBoundingClientRect();Z=A.testref.node().getBoundingClientRect();Q||fa.removeChild(T);Q={height:S.height,width:S.width,left:S.left-Z.left,top:S.top-Z.top,right:S.right-Z.left,bottom:S.bottom-Z.top};1E4<=P&&(A.savedBBoxes={},P=0);U&&(A.savedBBoxes[U]=Q);P++;return k.extendFlat({},Q)};A.setClipUrl=function(T,Q,U){T.attr("clip-path",
g(Q,U))};A.getTranslate=function(T){T=(T[T.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(Q,U,S){return[U,S].join(" ")}).split(" ");return{x:+T[0]||0,y:+T[1]||0}};A.setTranslate=function(T,Q,U){var S=T.attr?"attr":"setAttribute",X=T[T.attr?"attr":"getAttribute"]("transform")||"";Q=Q||0;U=U||0;X=X.replace(/(\btranslate\(.*?\);?)/,"").trim();X+=r(Q,U);X=X.trim();T[S]("transform",X);return X};A.getScale=function(T){T=(T[T.attr?
"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(Q,U,S){return[U,S].join(" ")}).split(" ");return{x:+T[0]||1,y:+T[1]||1}};A.setScale=function(T,Q,U){var S=T.attr?"attr":"setAttribute",X=T[T.attr?"attr":"getAttribute"]("transform")||"";Q=Q||1;U=U||1;X=X.replace(/(\bscale\(.*?\);?)/,"").trim();X=(X+("scale("+Q+","+U+")")).trim();T[S]("transform",X);return X};var M=/\s*sc.*/;A.setPointGroupScale=function(T,Q,U){Q=Q||1;U=U||1;if(T){var S=1===Q&&
1===U?"":"scale("+Q+","+U+")";T.each(function(){var X=(this.getAttribute("transform")||"").replace(M,"");X+=S;X=X.trim();this.setAttribute("transform",X)})}};var N=/translate\([^)]*\)\s*$/;A.setTextPointsScale=function(T,Q,U){T&&T.each(function(){var S=e.select(this),X=S.select("text");if(X.node()){var Z=parseFloat(X.attr("x")||0);var aa=parseFloat(X.attr("y")||0);X=(S.attr("transform")||"").match(N);Z=1===Q&&1===U?[]:[r(Z,aa),"scale("+Q+","+U+")",r(-Z,-aa)];X&&Z.push(X);S.attr("transform",Z.join(""))}})}},
{"../../components/fx/helpers":679,"../../constants/alignment":745,"../../constants/interactions":752,"../../constants/xmlns_namespaces":754,"../../lib":778,"../../lib/svg_text_utils":803,"../../registry":911,"../../traces/scatter/make_bubble_size_func":1204,"../../traces/scatter/subtypes":1212,"../color":643,"../colorscale":655,"./symbol_defs":666,d3:169,"fast-isnumeric":241,tinycolor2:576}],666:[function(b,K,G){var q=b("d3");K.exports={circle:{n:0,f:function(m){m=q.round(m,2);return"M"+m+",0A"+
m+","+m+" 0 1,1 0,-"+m+"A"+m+","+m+" 0 0,1 "+m+",0Z"}},square:{n:1,f:function(m){m=q.round(m,2);return"M"+m+","+m+"H-"+m+"V-"+m+"H"+m+"Z"}},diamond:{n:2,f:function(m){m=q.round(1.3*m,2);return"M"+m+",0L0,"+m+"L-"+m+",0L0,-"+m+"Z"}},cross:{n:3,f:function(m){var l=q.round(.4*m,2);m=q.round(1.2*m,2);return"M"+m+","+l+"H"+l+"V"+m+"H-"+l+"V"+l+"H-"+m+"V-"+l+"H-"+l+"V-"+m+"H"+l+"V-"+l+"H"+m+"Z"}},x:{n:4,f:function(m){m=q.round(.8*m/Math.sqrt(2),2);var l="l"+m+","+m,h="l"+m+",-"+m,a="l-"+m+",-"+m,g="l-"+
m+","+m;return"M0,"+m+l+h+a+h+a+g+a+g+l+g+l+"Z"}},"triangle-up":{n:5,f:function(m){var l=q.round(2*m/Math.sqrt(3),2),h=q.round(m/2,2);m=q.round(m,2);return"M-"+l+","+h+"H"+l+"L0,-"+m+"Z"}},"triangle-down":{n:6,f:function(m){var l=q.round(2*m/Math.sqrt(3),2),h=q.round(m/2,2);m=q.round(m,2);return"M-"+l+",-"+h+"H"+l+"L0,"+m+"Z"}},"triangle-left":{n:7,f:function(m){var l=q.round(2*m/Math.sqrt(3),2),h=q.round(m/2,2);m=q.round(m,2);return"M"+h+",-"+l+"V"+l+"L-"+m+",0Z"}},"triangle-right":{n:8,f:function(m){var l=
q.round(2*m/Math.sqrt(3),2),h=q.round(m/2,2);m=q.round(m,2);return"M-"+h+",-"+l+"V"+l+"L"+m+",0Z"}},"triangle-ne":{n:9,f:function(m){var l=q.round(.6*m,2);m=q.round(1.2*m,2);return"M-"+m+",-"+l+"H"+l+"V"+m+"Z"}},"triangle-se":{n:10,f:function(m){var l=q.round(.6*m,2);m=q.round(1.2*m,2);return"M"+l+",-"+m+"V"+l+"H-"+m+"Z"}},"triangle-sw":{n:11,f:function(m){var l=q.round(.6*m,2);m=q.round(1.2*m,2);return"M"+m+","+l+"H-"+l+"V-"+m+"Z"}},"triangle-nw":{n:12,f:function(m){var l=q.round(.6*m,2);m=q.round(1.2*
m,2);return"M-"+l+","+m+"V-"+l+"H"+m+"Z"}},pentagon:{n:13,f:function(m){var l=q.round(.951*m,2),h=q.round(.588*m,2),a=q.round(-m,2),g=q.round(-.309*m,2);m=q.round(.809*m,2);return"M"+l+","+g+"L"+h+","+m+"H-"+h+"L-"+l+","+g+"L0,"+a+"Z"}},hexagon:{n:14,f:function(m){var l=q.round(m,2),h=q.round(m/2,2);m=q.round(m*Math.sqrt(3)/2,2);return"M"+m+",-"+h+"V"+h+"L0,"+l+"L-"+m+","+h+"V-"+h+"L0,-"+l+"Z"}},hexagon2:{n:15,f:function(m){var l=q.round(m,2),h=q.round(m/2,2);m=q.round(m*Math.sqrt(3)/2,2);return"M-"+
h+","+m+"H"+h+"L"+l+",0L"+h+",-"+m+"H-"+h+"L-"+l+",0Z"}},octagon:{n:16,f:function(m){var l=q.round(.924*m,2);m=q.round(.383*m,2);return"M-"+m+",-"+l+"H"+m+"L"+l+",-"+m+"V"+m+"L"+m+","+l+"H-"+m+"L-"+l+","+m+"V-"+m+"Z"}},star:{n:17,f:function(m){var l=1.4*m;m=q.round(.225*l,2);var h=q.round(.951*l,2),a=q.round(.363*l,2),g=q.round(.588*l,2),e=q.round(-l,2),n=q.round(-.309*l,2),p=q.round(.118*l,2),c=q.round(.809*l,2);l=q.round(.382*l,2);return"M"+m+","+n+"H"+h+"L"+a+","+p+"L"+g+","+c+"L0,"+l+"L-"+g+","+
c+"L-"+a+","+p+"L-"+h+","+n+"H-"+m+"L0,"+e+"Z"}},hexagram:{n:18,f:function(m){var l=q.round(.66*m,2),h=q.round(.38*m,2);m=q.round(.76*m,2);return"M-"+m+",0l-"+h+",-"+l+"h"+m+"l"+h+",-"+l+"l"+h+","+l+"h"+m+"l-"+h+","+l+"l"+h+","+l+"h-"+m+"l-"+h+","+l+"l-"+h+",-"+l+"h-"+m+"Z"}},"star-triangle-up":{n:19,f:function(m){var l=q.round(m*Math.sqrt(3)*.8,2),h=q.round(.8*m,2),a=q.round(1.6*m,2);m=q.round(4*m,2);m="A "+m+","+m+" 0 0 1 ";return"M-"+l+","+h+m+l+","+h+m+"0,-"+a+m+"-"+l+","+h+"Z"}},"star-triangle-down":{n:20,
f:function(m){var l=q.round(m*Math.sqrt(3)*.8,2),h=q.round(.8*m,2),a=q.round(1.6*m,2);m=q.round(4*m,2);m="A "+m+","+m+" 0 0 1 ";return"M"+l+",-"+h+m+"-"+l+",-"+h+m+"0,"+a+m+l+",-"+h+"Z"}},"star-square":{n:21,f:function(m){var l=q.round(1.1*m,2);m=q.round(2*m,2);m="A "+m+","+m+" 0 0 1 ";return"M-"+l+",-"+l+m+"-"+l+","+l+m+l+","+l+m+l+",-"+l+m+"-"+l+",-"+l+"Z"}},"star-diamond":{n:22,f:function(m){var l=q.round(1.4*m,2);m=q.round(1.9*m,2);m="A "+m+","+m+" 0 0 1 ";return"M-"+l+",0"+m+"0,"+l+m+l+",0"+
m+"0,-"+l+m+"-"+l+",0Z"}},"diamond-tall":{n:23,f:function(m){var l=q.round(.7*m,2);m=q.round(1.4*m,2);return"M0,"+m+"L"+l+",0L0,-"+m+"L-"+l+",0Z"}},"diamond-wide":{n:24,f:function(m){var l=q.round(1.4*m,2);m=q.round(.7*m,2);return"M0,"+m+"L"+l+",0L0,-"+m+"L-"+l+",0Z"}},hourglass:{n:25,f:function(m){m=q.round(m,2);return"M"+m+","+m+"H-"+m+"L"+m+",-"+m+"H-"+m+"Z"},noDot:!0},bowtie:{n:26,f:function(m){m=q.round(m,2);return"M"+m+","+m+"V-"+m+"L-"+m+","+m+"V-"+m+"Z"},noDot:!0},"circle-cross":{n:27,f:function(m){m=
q.round(m,2);return"M0,"+m+"V-"+m+"M"+m+",0H-"+m+"M"+m+",0A"+m+","+m+" 0 1,1 0,-"+m+"A"+m+","+m+" 0 0,1 "+m+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(m){var l=q.round(m,2);m=q.round(m/Math.sqrt(2),2);return"M"+m+","+m+"L-"+m+",-"+m+"M"+m+",-"+m+"L-"+m+","+m+"M"+l+",0A"+l+","+l+" 0 1,1 0,-"+l+"A"+l+","+l+" 0 0,1 "+l+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(m){m=q.round(m,2);return"M0,"+m+"V-"+m+"M"+m+",0H-"+m+"M"+m+","+m+"H-"+m+"V-"+m+"H"+m+"Z"},needLine:!0,noDot:!0},
"square-x":{n:30,f:function(m){m=q.round(m,2);return"M"+m+","+m+"L-"+m+",-"+m+"M"+m+",-"+m+"L-"+m+","+m+"M"+m+","+m+"H-"+m+"V-"+m+"H"+m+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(m){m=q.round(1.3*m,2);return"M"+m+",0L0,"+m+"L-"+m+",0L0,-"+m+"ZM0,-"+m+"V"+m+"M-"+m+",0H"+m},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(m){var l=q.round(1.3*m,2);m=q.round(.65*m,2);return"M"+l+",0L0,"+l+"L-"+l+",0L0,-"+l+"ZM-"+m+",-"+m+"L"+m+","+m+"M-"+m+","+m+"L"+m+",-"+m},needLine:!0,noDot:!0},
"cross-thin":{n:33,f:function(m){m=q.round(1.4*m,2);return"M0,"+m+"V-"+m+"M"+m+",0H-"+m},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(m){m=q.round(m,2);return"M"+m+","+m+"L-"+m+",-"+m+"M"+m+",-"+m+"L-"+m+","+m},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(m){var l=q.round(1.2*m,2);m=q.round(.85*m,2);return"M0,"+l+"V-"+l+"M"+l+",0H-"+l+"M"+m+","+m+"L-"+m+",-"+m+"M"+m+",-"+m+"L-"+m+","+m},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(m){var l=q.round(m/2,2);m=q.round(m,
2);return"M"+l+","+m+"V-"+m+"m-"+m+",0V"+m+"M"+m+","+l+"H-"+m+"m0,-"+m+"H"+m},needLine:!0,noFill:!0},"y-up":{n:37,f:function(m){var l=q.round(1.2*m,2),h=q.round(1.6*m,2);m=q.round(.8*m,2);return"M-"+l+","+m+"L0,0M"+l+","+m+"L0,0M0,-"+h+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(m){var l=q.round(1.2*m,2),h=q.round(1.6*m,2);m=q.round(.8*m,2);return"M-"+l+",-"+m+"L0,0M"+l+",-"+m+"L0,0M0,"+h+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(m){var l=q.round(1.2*
m,2),h=q.round(1.6*m,2);m=q.round(.8*m,2);return"M"+m+","+l+"L0,0M"+m+",-"+l+"L0,0M-"+h+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(m){var l=q.round(1.2*m,2),h=q.round(1.6*m,2);m=q.round(.8*m,2);return"M-"+m+","+l+"L0,0M-"+m+",-"+l+"L0,0M"+h+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(m){m=q.round(1.4*m,2);return"M"+m+",0H-"+m},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(m){m=q.round(1.4*m,2);return"M0,"+m+"V-"+m},needLine:!0,noDot:!0,
noFill:!0},"line-ne":{n:43,f:function(m){m=q.round(m,2);return"M"+m+",-"+m+"L-"+m+","+m},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(m){m=q.round(m,2);return"M"+m+","+m+"L-"+m+",-"+m},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(m){var l=q.round(m,2);m=q.round(2*m,2);return"M0,0L-"+l+","+m+"H"+l+"Z"},noDot:!0},"arrow-down":{n:46,f:function(m){var l=q.round(m,2);m=q.round(2*m,2);return"M0,0L-"+l+",-"+m+"H"+l+"Z"},noDot:!0},"arrow-left":{n:47,f:function(m){var l=q.round(2*
m,2);m=q.round(m,2);return"M0,0L"+l+",-"+m+"V"+m+"Z"},noDot:!0},"arrow-right":{n:48,f:function(m){var l=q.round(2*m,2);m=q.round(m,2);return"M0,0L-"+l+",-"+m+"V"+m+"Z"},noDot:!0},"arrow-bar-up":{n:49,f:function(m){var l=q.round(m,2);m=q.round(2*m,2);return"M-"+l+",0H"+l+"M0,0L-"+l+","+m+"H"+l+"Z"},needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(m){var l=q.round(m,2);m=q.round(2*m,2);return"M-"+l+",0H"+l+"M0,0L-"+l+",-"+m+"H"+l+"Z"},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(m){var l=
q.round(2*m,2);m=q.round(m,2);return"M0,-"+m+"V"+m+"M0,0L"+l+",-"+m+"V"+m+"Z"},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(m){var l=q.round(2*m,2);m=q.round(m,2);return"M0,-"+m+"V"+m+"M0,0L-"+l+",-"+m+"V"+m+"Z"},needLine:!0,noDot:!0}}},{d3:169}],667:[function(b,K,G){K.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},
arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",
min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],668:[function(b,K,G){function q(e,n,p,c){var d=n["error_"+c]||{},f=[];if(d.visible&&-1!==["linear","log"].indexOf(p.type)){d=g(d);for(var k=0;k<e.length;k++){var r=e[k],u=r.i;if(void 0===u)u=k;else if(null===u)continue;var v=r[c];if(m(p.c2l(v))){var x=d(v,u);m(x[0])&&m(x[1])&&(u=r[c+"s"]=v-x[0],r=r[c+"h"]=v+x[1],f.push(u,r))}}e=n._extremes[p._id];p=h.findExtremes(p,f,a.extendFlat({tozero:e.opts.tozero},
{padded:!0}));e.min=e.min.concat(p.min);e.max=e.max.concat(p.max)}}var m=b("fast-isnumeric"),l=b("../../registry"),h=b("../../plots/cartesian/axes"),a=b("../../lib"),g=b("./compute_error");K.exports=function(e){for(var n=e.calcdata,p=0;p<n.length;p++){var c=n[p],d=c[0].trace;if(!0===d.visible&&l.traceIs(d,"errorBarsOK")){var f=h.getFromId(e,d.xaxis),k=h.getFromId(e,d.yaxis);q(c,d,f,"x");q(c,d,k,"y")}}}},{"../../lib":778,"../../plots/cartesian/axes":828,"../../registry":911,"./compute_error":669,"fast-isnumeric":241}],
669:[function(b,K,G){function q(m,l){if("percent"===m)return function(h){return Math.abs(h*l/100)};if("constant"===m)return function(){return Math.abs(l)};if("sqrt"===m)return function(h){return Math.sqrt(Math.abs(h))}}K.exports=function(m){var l=m.type,h=m.symmetric;if("data"===l){var a=m.array||[];if(h)return function(p,c){p=+a[c];return[p,p]};var g=m.arrayminus||[];return function(p,c){p=+a[c];c=+g[c];return isNaN(p)&&isNaN(c)?[NaN,NaN]:[c||0,p||0]}}var e=q(l,m.value),n=q(l,m.valueminus);return h||
void 0===m.valueminus?function(p){p=e(p);return[p,p]}:function(p){return[n(p),e(p)]}}},{}],670:[function(b,K,G){var q=b("fast-isnumeric"),m=b("../../registry"),l=b("../../lib"),h=b("../../plot_api/plot_template"),a=b("./attributes");K.exports=function(g,e,n,p){function c(r,u){return l.coerce(k,f,a,r,u)}var d="error_"+p.axis,f=h.newContainer(e,d),k=g[d]||{};if(!1!==c("visible",void 0!==k.array||void 0!==k.value||"sqrt"===k.type)){g=c("type","array"in k?"data":"percent");d=!0;"sqrt"!==g&&(d=c("symmetric",
!(("data"===g?"arrayminus":"valueminus")in k)));if("data"===g)c("array"),c("traceref"),d||(c("arrayminus"),c("tracerefminus"));else if("percent"===g||"constant"===g)c("value"),d||c("valueminus");g="copy_"+p.inherit+"style";p.inherit&&(e["error_"+p.inherit]||{}).visible&&c(g,!(k.color||q(k.thickness)||q(k.width)));p.inherit&&f[g]||(c("color",n),c("thickness"),c("width",m.traceIs(e,"gl3d")?0:4))}}},{"../../lib":778,"../../plot_api/plot_template":817,"../../registry":911,"./attributes":667,"fast-isnumeric":241}],
671:[function(b,K,G){var q=b("../../lib");G=b("../../plot_api/edit_types").overrideAll;var m=b("./attributes"),l={error_x:q.extendFlat({},m),error_y:q.extendFlat({},m)};delete l.error_x.copy_zstyle;delete l.error_y.copy_zstyle;delete l.error_y.copy_ystyle;q={error_x:q.extendFlat({},m),error_y:q.extendFlat({},m),error_z:q.extendFlat({},m)};delete q.error_x.copy_ystyle;delete q.error_y.copy_ystyle;delete q.error_z.copy_ystyle;delete q.error_z.copy_zstyle;K.exports={moduleType:"component",name:"errorbars",
schema:{traces:{scatter:l,bar:l,histogram:l,scatter3d:G(q,"calc","nested"),scattergl:G(l,"calc","nested")}},supplyDefaults:b("./defaults"),calc:b("./calc"),makeComputeError:b("./compute_error"),plot:b("./plot"),style:b("./style"),hoverInfo:function(h,a,g){(a.error_y||{}).visible&&(g.yerr=h.yh-h.y,a.error_y.symmetric||(g.yerrneg=h.y-h.ys));(a.error_x||{}).visible&&(g.xerr=h.xh-h.x,a.error_x.symmetric||(g.xerrneg=h.x-h.xs))}}},{"../../lib":778,"../../plot_api/edit_types":810,"./attributes":667,"./calc":668,
"./compute_error":669,"./defaults":670,"./plot":672,"./style":673}],672:[function(b,K,G){var q=b("d3"),m=b("fast-isnumeric"),l=b("../drawing"),h=b("../../traces/scatter/subtypes");K.exports=function(a,g,e,n){var p,c=e.xaxis,d=e.yaxis,f=n&&0<n.duration;g.each(function(k){var r=k[0].trace,u=r.error_x||{},v=r.error_y||{},x;r.ids&&(x=function(z){return z.id});var C=h.hasMarkers(r)&&0<r.marker.maxdisplayed;v.visible||u.visible||(k=[]);r=q.select(this).selectAll("g.errorbar").data(k,x);r.exit().remove();
k.length&&(u.visible||r.selectAll("path.xerror").remove(),v.visible||r.selectAll("path.yerror").remove(),r.style("opacity",1),k=r.enter().append("g").classed("errorbar",!0),f&&k.style("opacity",0).transition().duration(n.duration).style("opacity",1),l.setClipUrl(r,e.layerClipId,a),r.each(function(z){var y=q.select(this),D=c.c2p(z.x),A=d.c2p(z.y);if(void 0!==z.yh){var t=d.c2p(z.yh);var B=d.c2p(z.ys);if(!m(B)){var F=!0;B=d.c2p(z.ys,!0)}}if(void 0!==z.xh){var I=c.c2p(z.xh);var J=c.c2p(z.xs);if(!m(J)){var L=
!0;J=c.c2p(z.xs,!0)}}if(!C||z.vis){z=y.select("path.yerror");if(v.visible&&m(D)&&m(t)&&m(B)){var H=v.width;D="M"+(D-H)+","+t+"h"+2*H+"m-"+H+",0V"+B;F||(D+="m-"+H+",0h"+2*H);(p=!z.size())?z=y.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0):f&&(z=z.transition().duration(n.duration).ease(n.easing));z.attr("d",D)}else z.remove();F=y.select("path.xerror");u.visible&&m(A)&&m(I)&&m(J)?(t=(u.copy_ystyle?v:u).width,D="M"+I+","+(A-t)+"v"+2*t+"m0,-"+t+"H"+J,L||(D+="m0,-"+t+"v"+
2*t),(p=!F.size())?F=y.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0):f&&(F=F.transition().duration(n.duration).ease(n.easing)),F.attr("d",D)):F.remove()}}))})}},{"../../traces/scatter/subtypes":1212,"../drawing":665,d3:169,"fast-isnumeric":241}],673:[function(b,K,G){var q=b("d3"),m=b("../color");K.exports=function(l){l.each(function(h){var a=h[0].trace;h=a.error_y||{};a=a.error_x||{};var g=q.select(this);g.selectAll("path.yerror").style("stroke-width",h.thickness+
"px").call(m.stroke,h.color);a.copy_ystyle&&(a=h);g.selectAll("path.xerror").style("stroke-width",a.thickness+"px").call(m.stroke,a.color)})}},{"../color":643,d3:169}],674:[function(b,K,G){G=b("../../plots/font_attributes");var q=b("./layout_attributes").hoverlabel;b=b("../../lib/extend").extendFlat;K.exports={hoverlabel:{bgcolor:b({},q.bgcolor,{arrayOk:!0}),bordercolor:b({},q.bordercolor,{arrayOk:!0}),font:G({arrayOk:!0,editType:"none"}),align:b({},q.align,{arrayOk:!0}),namelength:b({},q.namelength,
{arrayOk:!0}),editType:"none"}}},{"../../lib/extend":768,"../../plots/font_attributes":856,"./layout_attributes":684}],675:[function(b,K,G){function q(h,a,g,e){e=e||m.identity;Array.isArray(h)&&(a[0][g]=e(h))}var m=b("../../lib"),l=b("../../registry");K.exports=function(h){function a(d){return function(f){return m.coerceHoverinfo({hoverinfo:f},{_module:d._module},e)}}var g=h.calcdata,e=h._fullLayout;for(h=0;h<g.length;h++){var n=g[h],p=n[0].trace;if(!l.traceIs(p,"pie-like")){var c=l.traceIs(p,"2dMap")?
q:m.fillArray;c(p.hoverinfo,n,"hi",a(p));p.hovertemplate&&c(p.hovertemplate,n,"ht");p.hoverlabel&&(c(p.hoverlabel.bgcolor,n,"hbg"),c(p.hoverlabel.bordercolor,n,"hbc"),c(p.hoverlabel.font.size,n,"hts"),c(p.hoverlabel.font.color,n,"htc"),c(p.hoverlabel.font.family,n,"htf"),c(p.hoverlabel.namelength,n,"hnl"),c(p.hoverlabel.align,n,"hta"))}}}},{"../../lib":778,"../../registry":911}],676:[function(b,K,G){var q=b("../../registry"),m=b("./hover").hover;K.exports=function(l,h,a){function g(){l.emit("plotly_click",
{points:l._hoverdata,event:h})}var e=q.getComponentMethod("annotations","onClick")(l,l._hoverdata);void 0!==a&&m(l,h,a,!0);l._hoverdata&&h&&h.target&&(e&&e.then?e.then(g):g(),h.stopImmediatePropagation&&h.stopImmediatePropagation())}},{"../../registry":911,"./hover":680}],677:[function(b,K,G){K.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],678:[function(b,K,G){var q=b("../../lib"),m=b("./attributes"),l=b("./hoverlabel_defaults");
K.exports=function(h,a,g,e){g=q.extendFlat({},e.hoverlabel);a.hovertemplate&&(g.namelength=-1);l(h,a,function(n,p){return q.coerce(h,a,m,n,p)},g)}},{"../../lib":778,"./attributes":674,"./hoverlabel_defaults":681}],679:[function(b,K,G){function q(g,e){if(Array.isArray(e)){if(Array.isArray(g)&&Array.isArray(g[e[0]]))return g[e[0]][e[1]]}else return g[e]}var m=b("../../lib");G.getSubplot=function(g){return g.subplot||g.xaxis+g.yaxis||g.geo};G.isTraceInSubplots=function(g,e){if("splom"===g.type){var n=
g.xaxes||[];g=g.yaxes||[];for(var p=0;p<n.length;p++)for(var c=0;c<g.length;c++)if(-1!==e.indexOf(n[p]+g[c]))return!0;return!1}return-1!==e.indexOf(G.getSubplot(g))};G.flat=function(g,e){for(var n=Array(g.length),p=0;p<g.length;p++)n[p]=e;return n};G.p2c=function(g,e){for(var n=Array(g.length),p=0;p<g.length;p++)n[p]=g[p].p2c(e);return n};G.getDistanceFunction=function(g,e,n,p){return"closest"===g?p||G.quadrature(e,n):"x"===g.charAt(0)?e:n};G.getClosest=function(g,e,n){if(!1!==n.index)0<=n.index&&
n.index<g.length?n.distance=0:n.index=!1;else for(var p=0;p<g.length;p++){var c=e(g[p]);c<=n.distance&&(n.index=p,n.distance=c)}return n};G.inbox=function(g,e,n){return 0>g*e||0===g?n:Infinity};G.quadrature=function(g,e){return function(n){var p=g(n);n=e(n);return Math.sqrt(p*p+n*n)}};G.makeEventData=function(g,e,n){var p="index"in g?g.index:g.pointNumber,c={data:e._input,fullData:e,curveNumber:e.index,pointNumber:p};if(e._indexToPoints){var d=e._indexToPoints[p];1===d.length?c.pointIndex=d[0]:c.pointIndices=
d}else c.pointIndex=p;e._module.eventData?c=e._module.eventData(c,g,e,n,p):("xVal"in g?c.x=g.xVal:"x"in g&&(c.x=g.x),"yVal"in g?c.y=g.yVal:"y"in g&&(c.y=g.y),g.xa&&(c.xaxis=g.xa),g.ya&&(c.yaxis=g.ya),void 0!==g.zLabelVal&&(c.z=g.zLabelVal));G.appendArrayPointValue(c,e,p);return c};G.appendArrayPointValue=function(g,e,n){var p=e._arrayAttrs;if(p)for(var c=0;c<p.length;c++){var d=p[c],f=l[d]||d;void 0===g[f]&&(d=m.nestedProperty(e,d).get(),d=q(d,n),void 0!==d&&(g[f]=d))}};G.appendArrayMultiPointValues=
function(g,e,n){var p=e._arrayAttrs;if(p)for(var c=0;c<p.length;c++){var d=p[c],f=l[d]||d;if(void 0===g[f]){d=m.nestedProperty(e,d).get();for(var k=Array(n.length),r=0;r<n.length;r++)k[r]=q(d,n[r]);g[f]=k}}};var l={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"},h={x:!0,y:!0},a={"x unified":!0,"y unified":!0};G.isUnifiedHover=function(g){return"string"!==typeof g?!1:!!a[g]};G.isXYhover=function(g){return"string"!==typeof g?!1:!!h[g]}},{"../../lib":778}],
680:[function(b,K,G){function q(S,X,Z,aa){function fa(ob,ub){for(eb=0;eb<db.length;eb++)if((lb=db[eb])&&lb[0]&&lb[0].trace&&($a=lb[0].trace,!0===$a.visible&&0!==$a._length&&-1===["carpet","contourcarpet"].indexOf($a._module.name))){"splom"===$a.type?(Ya=0,ab=ba[Ya]):(ab=F.getSubplot($a),Ya=ba.indexOf(ab));hb=ta;F.isUnifiedHover(hb)&&(hb=hb.charAt(0));Ba={cd:lb,trace:$a,xa:oa[Ya],ya:na[Ya],maxHoverDistance:Aa,maxSpikeDistance:Ka,index:!1,distance:Math.min(Ha,Aa),spikeDistance:Infinity,xSpike:void 0,
ySpike:void 0,color:D.defaultLine,name:$a.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0};ma[ab]&&(Ba.subplot=ma[ab]._subplot);ma._splomScenes&&ma._splomScenes[$a.uid]&&(Ba.scene=ma._splomScenes[$a.uid]);Ga=Sa.length;if("array"===hb){var za=X[eb];"pointNumber"in za?(Ba.index=za.pointNumber,hb="closest"):(hb="","xval"in za&&(nb=za.xval,hb="x"),"yval"in za&&(va=za.yval,hb=hb?"closest":"y"))}else void 0!==ob&&void 0!==ub?(nb=ob,va=ub):(nb=
Va[Ya],va=qb[Ya]);if(0!==Aa)if($a._module&&$a._module.hoverPoints){if(za=$a._module.hoverPoints(Ba,nb,va,hb,ma._hoverlayer))for(var Da,Ja=0;Ja<za.length;Ja++)Da=za[Ja],f(Da.x0)&&f(Da.y0)&&Sa.push(e(Da,ta))}else r.log("Unrecognized trace type in hover:",$a);"closest"===ta&&Sa.length>Ga&&(Sa.splice(0,Ga),Ha=Sa[0].distance);ka&&0!==Ka&&0===Sa.length&&(Ba.distance=Ka,Ba.index=!1,(za=$a._module.hoverPoints(Ba,nb,va,"closest",ma._hoverlayer))&&(za=za.filter(function(Ta){return Ta.spikeDistance<=Ka})),za&&
za.length)&&(Da=za.filter(function(Ta){return Ta.xa.showspikes&&"hovered data"!==Ta.xa.spikesnap}),Da.length&&(Da=Da[0],f(Da.x0)&&f(Da.y0)&&(Da=ja(Da),!Na.vLinePoint||Na.vLinePoint.spikeDistance>Da.spikeDistance))&&(Na.vLinePoint=Da),za=za.filter(function(Ta){return Ta.ya.showspikes&&"hovered data"!==Ta.ya.spikesnap}),za.length&&(za=za[0],f(za.x0)&&f(za.y0)&&(Da=ja(za),!Na.hLinePoint||Na.hLinePoint.spikeDistance>Da.spikeDistance))&&(Na.hLinePoint=Da))}}function ha(ob,ub){for(var za=null,Da=Infinity,
Ja,Ta=0;Ta<ob.length;Ta++)Ja=ob[Ta].spikeDistance,Ja<=Da&&Ja<=ub&&(za=ob[Ta],Da=Ja);return za}function ja(ob){return ob?{xa:ob.xa,ya:ob.ya,x:void 0!==ob.xSpike?ob.xSpike:(ob.x0+ob.x1)/2,y:void 0!==ob.ySpike?ob.ySpike:(ob.y0+ob.y1)/2,distance:ob.distance,spikeDistance:ob.spikeDistance,curveNumber:ob.trace.index,color:ob.color,pointNumber:ob.index}:null}Z||(Z="xy");var ba=Array.isArray(Z)?Z:[Z],ma=S._fullLayout,qa=ma._plots||[];Z=qa[Z];var ka=ma._has("cartesian");Z&&(Z=Z.overlays.map(function(ob){return ob.id}),
ba=ba.concat(Z));Z=ba.length;for(var oa=Array(Z),na=Array(Z),la=!1,ia=0;ia<Z;ia++){var sa=ba[ia];if(qa[sa])la=!0,oa[ia]=qa[sa].xaxis,na[ia]=qa[sa].yaxis;else if(ma[sa]&&ma[sa]._subplot)sa=ma[sa]._subplot,oa[ia]=sa.xaxis,na[ia]=sa.yaxis;else{r.warn("Unrecognized subplot: "+sa);return}}var ta=X.hovermode||ma.hovermode;ta&&!la&&(ta="closest");if(-1===["x","y","closest","x unified","y unified"].indexOf(ta)||!S.calcdata||S.querySelector(".zoombox")||S._dragging)return A.unhoverRaw(S,X);var Aa=-1===ma.hoverdistance?
Infinity:ma.hoverdistance,Ka=-1===ma.spikedistance?Infinity:ma.spikedistance,Sa=[],db=[],eb,lb,ab,Ya,hb,nb,va,Ba,Ga,Na={hLinePoint:null,vLinePoint:null};qa=!1;if(Array.isArray(X))for(ta="array",ia=0;ia<X.length;ia++){if(lb=S.calcdata[X[ia].curveNumber||0]){var $a=lb[0].trace;"skip"!==lb[0].trace.hoverinfo&&(db.push(lb),"h"===$a.orientation&&(qa=!0))}}else{for(eb=0;eb<S.calcdata.length;eb++)lb=S.calcdata[eb],$a=lb[0].trace,"skip"!==$a.hoverinfo&&F.isTraceInSubplots($a,ba)&&(db.push(lb),"h"===$a.orientation&&
(qa=!0));if(X.target){if(!1===x.triggerHandler(S,"plotly_beforehover",X))return;la=X.target.getBoundingClientRect();Z=X.clientX-la.left;la=X.clientY-la.top;ma._calcInverseTransform(S);la=r.apply3DTransform(ma._invTransform)(Z,la);Z=la[0];la=la[1];if(0>Z||Z>oa[0]._length||0>la||la>na[0]._length)return A.unhoverRaw(S,X)}else Z="xpx"in X?X.xpx:oa[0]._length/2,la="ypx"in X?X.ypx:na[0]._length/2;X.pointerX=Z+oa[0]._offset;X.pointerY=la+na[0]._offset;var Va="xval"in X?F.flat(ba,X.xval):F.p2c(oa,Z);var qb=
"yval"in X?F.flat(ba,X.yval):F.p2c(na,la);if(!f(Va[0])||!f(qb[0]))return r.warn("Fx.hover failed",X,S),A.unhoverRaw(S,X)}var Ha=Infinity;fa();Z={fullLayout:ma,container:ma._hoverlayer,outerContainer:ma._paperdiv,event:X};S._spikepoints={vLinePoint:Na.vLinePoint,hLinePoint:Na.hLinePoint};ka&&0!==Ka&&0!==Sa.length&&(la=Sa.filter(function(ob){return ob.ya.showspikes}),la=ha(la,Ka),Na.hLinePoint=ja(la),la=Sa.filter(function(ob){return ob.xa.showspikes}),la=ha(la,Ka),Na.vLinePoint=ja(la));if(0===Sa.length)return aa=
A.unhoverRaw(S,X),!ka||null===Na.hLinePoint&&null===Na.vLinePoint||n(S,Na,Z),aa;ka&&n(S,Na,Z);Sa.sort(function(ob,ub){return ob.distance-ub.distance});if(F.isXYhover(hb)&&0!==Sa[0].length&&"splom"!==Sa[0].trace.type){Z=Sa[0];la=Z.cd[Z.index];ia="group"===ma.boxmode||"group"===ma.violinmode;sa=Z.xVal;var Ra=Z.xa;"category"===Ra.type&&(sa=Ra._categoriesMap[sa]);"date"===Ra.type&&(sa=Ra.d2c(sa));la&&la.t&&la.t.posLetter===Ra._id&&ia&&(sa+=la.t.dPos);var La=Z.yVal;Ra=Z.ya;"category"===Ra.type&&(La=Ra._categoriesMap[La]);
"date"===Ra.type&&(La=Ra.d2c(La));la&&la.t&&la.t.posLetter===Ra._id&&ia&&(La+=la.t.dPos);fa(sa,La);var gb={};Sa=Sa.filter(function(ob){ob=m(ob);if(!gb[ob])return gb[ob]=!0,gb[ob]})}Z=S._hoverdata;la=[];for(ia=0;ia<Sa.length;ia++)sa=Sa[ia],Ra=F.makeEventData(sa,sa.trace,sa.cd),!1!==sa.hovertemplate&&(La=!1,sa.cd[sa.index]&&sa.cd[sa.index].ht&&(La=sa.cd[sa.index].ht),sa.hovertemplate=La||sa.trace.hovertemplate||!1),sa.eventData=[Ra],la.push(Ra);S._hoverdata=la;qa="y"===ta&&(1<db.length||1<Sa.length)||
"closest"===ta&&qa&&1<Sa.length;ia=D.combine(ma.plot_bgcolor||D.background,ma.paper_bgcolor);ia=l(Sa,{hovermode:ta,rotateLabels:qa,bgColor:ia,container:ma._hoverlayer,outerContainer:ma._paperdiv,commonLabelOpts:ma.hoverlabel,hoverdistance:ma.hoverdistance},S);F.isUnifiedHover(ta)||(a(ia,qa?"xa":"ya",ma),g(ia,qa,ma._invScaleX,ma._invScaleY));X.target&&X.target.tagName&&(qa=B.getComponentMethod("annotations","hasClickToShow")(S,la),z(d.select(X.target),qa?"pointer":""));X.target&&!aa&&p(S,X,Z)&&(Z&&
S.emit("plotly_unhover",{event:X,points:Z}),S.emit("plotly_hover",{event:X,points:S._hoverdata,xaxes:oa,yaxes:na,xvals:Va,yvals:qb}))}function m(S){return[S.trace.index,S.index,S.x0,S.y0,S.name,S.attr,S.xa,S.ya||""].join()}function l(S,X,Z){function aa(nb){return nb.filter(function(va){return void 0!==va.zLabelVal||(va[ta]||"").split(" ")[0]===Ka})}var fa=Z._fullLayout,ha=X.hovermode,ja=X.rotateLabels,ba=X.bgColor,ma=X.container,qa=X.outerContainer,ka=X.commonLabelOpts||{},oa=X.fontFamily||I.HOVERFONT,
na=X.fontSize||I.HOVERFONTSIZE,la=S[0],ia=la.xa,sa=la.ya,ta="y"===ha.charAt(0)?"yLabel":"xLabel",Aa=la[ta],Ka=(String(Aa)||"").split(" ")[0];qa=qa.node().getBoundingClientRect();var Sa=qa.top,db=qa.width,eb=qa.height,lb=void 0!==Aa&&la.distance<=X.hoverdistance&&("x"===ha||"y"===ha);if(lb){qa=!0;var ab,Ya;for(ab=0;ab<S.length;ab++)if(qa&&void 0===S[ab].zLabel&&(qa=!1),Ya=S[ab].hoverinfo||S[ab].trace.hoverinfo)if(Ya=Array.isArray(Ya)?Ya:Ya.split("+"),-1===Ya.indexOf("all")&&-1===Ya.indexOf(ha)){lb=
!1;break}qa&&(lb=!1)}qa=ma.selectAll("g.axistext").data(lb?[0]:[]);qa.enter().append("g").classed("axistext",!0);qa.exit().remove();qa.each(function(){var nb=d.select(this),va=r.ensureSingle(nb,"path","",function(ob){ob.style({"stroke-width":"1px"})}),Ba=r.ensureSingle(nb,"text","",function(ob){ob.attr("data-notex",1)}),Ga=ka.bgcolor||D.defaultLine,Na=ka.bordercolor||D.contrast(Ga),$a=D.contrast(Ga),Va={family:ka.font.family||oa,size:ka.font.size||na,color:ka.font.color||$a};va.style({fill:Ga,stroke:Na});
Ba.text(Aa).call(y.font,Va).call(C.positionText,0,0).call(C.convertToTspans,Z);nb.attr("transform","");var qb=Ba.node().getBoundingClientRect();if("x"===ha)$a="top"===ia.side?"-":"",Ba.attr("text-anchor","middle").call(C.positionText,0,"top"===ia.side?Sa-qb.bottom-T-Q:Sa-qb.top+T+Q),Ga=ia._offset+(la.x0+la.x1)/2,Na=sa._offset+("top"===ia.side?0:sa._length),Ba=qb.width/2+Q,Ga<Ba?(Ga=Ba,va.attr("d","M-"+(Ba-T)+",0L-"+(Ba-2*T)+","+$a+T+"H"+(Q+qb.width/2)+"v"+$a+(2*Q+qb.height)+"H-"+Ba+"V"+$a+T+"Z")):
Ga>fa.width-Ba?(Ga=fa.width-Ba,va.attr("d","M"+(Ba-T)+",0L"+Ba+","+$a+T+"v"+$a+(2*Q+qb.height)+"H-"+Ba+"V"+$a+T+"H"+(Ba-2*T)+"Z")):va.attr("d","M0,0L"+T+","+$a+T+"H"+(Q+qb.width/2)+"v"+$a+(2*Q+qb.height)+"H-"+(Q+qb.width/2)+"V"+$a+T+"H-"+T+"Z");else{if("right"===sa.side){$a="start";var Ha=1;var Ra="";Ga=ia._offset+ia._length}else $a="end",Ha=-1,Ra="-",Ga=ia._offset;Na=sa._offset+(la.y0+la.y1)/2;Ba.attr("text-anchor",$a);va.attr("d","M0,0L"+Ra+T+","+T+"V"+(Q+qb.height/2)+"h"+Ra+(2*Q+qb.width)+"V-"+
(Q+qb.height/2)+"H"+Ra+T+"V-"+T+"Z");var La=qb.height/2;Ra=Sa-qb.top-La;va="clip"+fa._uid+"commonlabel"+sa._id;if(Ga<qb.width+2*Q+T){Ha="M-"+(T+Q)+"-"+La+"h-"+(qb.width-Q)+"V"+La+"h"+(qb.width-Q)+"Z";var gb=qb.width-Ga+Q;C.positionText(Ba,gb,Ra);"end"===$a&&Ba.selectAll("tspan").each(function(){var ob=d.select(this),ub=y.tester.append("text").text(ob.text()).call(y.font,Va),za=ub.node().getBoundingClientRect();Math.round(za.width)<Math.round(qb.width)&&ob.attr("x",gb-za.width);ub.remove()})}else C.positionText(Ba,
Ha*(Q+T),Ra),Ha=null;$a=fa._topclips.selectAll("#"+va).data(Ha?[0]:[]);$a.enter().append("clipPath").attr("id",va).append("path");$a.exit().remove();$a.select("path").attr("d",Ha);y.setClipUrl(Ba,Ha?va:null,Z)}nb.attr("transform",u(Ga,Na));S=aa(S)});if(F.isUnifiedHover(ha)){ma.selectAll("g.hovertext").remove();void 0!==Aa&&la.distance<=X.hoverdistance&&(S=aa(S));if(0===S.length)return;X={};J({showlegend:!0,legend:{title:{text:Aa,font:fa.hoverlabel.font},font:fa.hoverlabel.font,bgcolor:fa.hoverlabel.bgcolor,
bordercolor:fa.hoverlabel.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:fa.legend?fa.legend.traceorder:void 0,orientation:"v"}},X,Z._fullData);X=X.legend;X.entries=[];for(qa=0;qa<S.length;qa++){Ya=h(S[qa],!0,ha,fa,Aa);ab=Ya[0];var hb=Ya[1];Ya=S[qa];Ya.name=hb;Ya.text=""!==hb?hb+" : "+ab:ab;if(ab=Ya.cd[Ya.index])ab.mc&&(Ya.mc=ab.mc),ab.mcc&&(Ya.mc=ab.mcc),ab.mlc&&(Ya.mlc=ab.mlc),ab.mlcc&&(Ya.mlc=ab.mlcc),ab.mlw&&(Ya.mlw=ab.mlw),ab.mrc&&(Ya.mrc=ab.mrc),ab.dir&&(Ya.dir=ab.dir);Ya._distinct=!0;
X.entries.push([Ya])}X.entries.sort(function(nb,va){return nb[0].trace.index-va[0].trace.index});X.layer=ma;L(Z,X);X=r.mean(S.map(function(nb){return(nb.y0+nb.y1)/2}));qa=r.mean(S.map(function(nb){return(nb.x0+nb.x1)/2}));ma=ma.select("g.legend");ab=ma.node().getBoundingClientRect();qa+=ia._offset;X+=sa._offset-ab.height/2;Ya=ab.width+2*Q;qa=!(qa+Ya<=db)&&0<=qa-Ya?qa-Ya:qa+2*Q;ab=ab.height+2*Q;Ya=X+ab>=eb;ab<=eb&&(X<=Sa?X=sa._offset+2*Q:Ya&&(X=eb-ab));ma.attr("transform",u(qa,X));return ma}ma=ma.selectAll("g.hovertext").data(S,
function(nb){return m(nb)});ma.enter().append("g").classed("hovertext",!0).each(function(){var nb=d.select(this);nb.append("rect").call(D.fill,D.addOpacity(ba,.8));nb.append("text").classed("name",!0);nb.append("path").style("stroke-width","1px");nb.append("text").classed("nums",!0).call(y.font,oa,na)});ma.exit().remove();ma.each(function(nb){var va=d.select(this).attr("transform",""),Ba=nb.color;Array.isArray(Ba)&&(Ba=Ba[nb.eventData[0].pointNumber]);var Ga=nb.bgcolor||Ba,Na=D.combine(D.opacity(Ga)?
Ga:D.defaultLine,ba),$a=D.combine(D.opacity(Ba)?Ba:D.defaultLine,ba),Va=nb.borderColor||D.contrast(Na);Ba=h(nb,lb,ha,fa,Aa,va);var qb=Ba[0],Ha=Ba[1];Ba=va.select("text.nums").call(y.font,nb.fontFamily||oa,nb.fontSize||na,nb.fontColor||Va).text(qb).attr("data-notex",1).call(C.positionText,0,0).call(C.convertToTspans,Z);Ga=va.select("text.name");var Ra=0,La=0;Ha&&Ha!==qb?(Ga.call(y.font,nb.fontFamily||oa,nb.fontSize||na,$a).text(Ha).attr("data-notex",1).call(C.positionText,0,0).call(C.convertToTspans,
Z),La=Ga.node().getBoundingClientRect(),Ra=La.width+2*Q,La=La.height+2*Q):(Ga.remove(),va.select("rect").remove());va.select("path").style({fill:Na,stroke:Va});var gb=Ba.node().getBoundingClientRect();Na=nb.xa._offset+(nb.x0+nb.x1)/2;Va=nb.ya._offset+(nb.y0+nb.y1)/2;$a=Math.abs(nb.x1-nb.x0);qb=Math.abs(nb.y1-nb.y0);Ha=gb.width+T+Q+Ra;nb.ty0=Sa-gb.top;nb.bx=gb.width+2*Q;nb.by=Math.max(gb.height+2*Q,La);nb.anchor="start";nb.txwidth=gb.width;nb.tx2width=Ra;nb.offset=0;ja?(nb.pos=Na,La=Va+qb/2+Ha<=eb,
("top"===nb.idealAlign||!La)&&0<=Va-qb/2-Ha?(Va-=qb/2,nb.anchor="end"):La?(Va+=qb/2,nb.anchor="start"):nb.anchor="middle"):(nb.pos=Va,La=Na+$a/2+Ha<=db,("left"===nb.idealAlign||!La)&&0<=Na-$a/2-Ha?(Na-=$a/2,nb.anchor="end"):La?(Na+=$a/2,nb.anchor="start"):(nb.anchor="middle",$a=Ha/2,La=Na+$a-db,$a=Na-$a,0<La&&(Na-=La),0>$a&&(Na+=-$a)));Ba.attr("text-anchor",nb.anchor);Ra&&Ga.attr("text-anchor",nb.anchor);va.attr("transform",u(Na,Va)+(ja?v(H):""))});return ma}function h(S,X,Z,aa,fa,ha){var ja="",ba=
"";void 0!==S.nameOverride&&(S.name=S.nameOverride);S.name&&(S.trace._meta&&(S.name=r.templateString(S.name,S.trace._meta)),ja=c(S.name,S.nameLength));void 0!==S.zLabel?(void 0!==S.xLabel&&(ba+="x: "+S.xLabel+"<br>"),void 0!==S.yLabel&&(ba+="y: "+S.yLabel+"<br>"),"choropleth"!==S.trace.type&&"choroplethmapbox"!==S.trace.type&&(ba+=(ba?"z: ":"")+S.zLabel)):X&&S[Z.charAt(0)+"Label"]===fa?ba=S[("x"===Z.charAt(0)?"y":"x")+"Label"]||"":void 0===S.xLabel?void 0!==S.yLabel&&"scattercarpet"!==S.trace.type&&
(ba=S.yLabel):ba=void 0===S.yLabel?S.xLabel:"("+S.xLabel+", "+S.yLabel+")";!S.text&&0!==S.text||Array.isArray(S.text)||(ba+=(ba?"<br>":"")+S.text);void 0!==S.extraText&&(ba+=(ba?"<br>":"")+S.extraText);ha&&""===ba&&!S.hovertemplate&&(""===ja&&ha.remove(),ba=ja);X=aa._d3locale;Z=S.hovertemplate||!1;aa=S.hovertemplateLabels||S;fa=S.eventData[0]||{};Z&&(ba=r.hovertemplateString(Z,aa,X,fa,S.trace._meta),ba=ba.replace(U,function(ma,qa){ja=c(qa,S.nameLength);return""}));return[ba,ja]}function a(S,X,Z){function aa(Ka){var Sa=
Ka[0],db=Ka[Ka.length-1];ka=Sa.pmin-Sa.pos-Sa.dp+Sa.size;oa=db.pos+db.dp+db.size-Sa.pmax;if(.01<ka){for(la=Ka.length-1;0<=la;la--)Ka[la].dp+=ka;qa=!1}if(!(.01>oa)){if(-.01>ka){for(la=Ka.length-1;0<=la;la--)Ka[la].dp-=oa;qa=!1}if(qa){for(na=db=0;na<Ka.length;na++)ia=Ka[na],ia.pos+ia.dp+ia.size>Sa.pmax&&db++;for(na=Ka.length-1;0<=na&&!(0>=db);na--)ia=Ka[na],ia.pos>Sa.pmax-1&&(ia.del=!0,db--);for(na=0;na<Ka.length&&!(0>=db);na++)if(ia=Ka[na],ia.pos<Sa.pmin+1)for(ia.del=!0,db--,oa=2*ia.size,la=Ka.length-
1;0<=la;la--)Ka[la].dp-=oa;for(na=Ka.length-1;0<=na&&!(0>=db);na--)ia=Ka[na],ia.pos+ia.dp+ia.size>Sa.pmax&&(ia.del=!0,db--)}}}var fa=0,ha=1,ja=S.size(),ba=Array(ja),ma=0;S.each(function(Ka){var Sa=Ka[X],db="x"===Sa._id.charAt(0);Sa=Sa.range;0===ma&&Sa&&Sa[0]>Sa[1]!==db&&(ha=-1);ba[ma++]=[{datum:Ka,traceIndex:Ka.trace.index,dp:0,pos:Ka.pos,posref:Ka.posref,size:Ka.by*(db?P:1)/2,pmin:0,pmax:db?Z.width:Z.height}]});ba.sort(function(Ka,Sa){return Ka[0].posref-Sa[0].posref||ha*(Sa[0].traceIndex-Ka[0].traceIndex)});
for(var qa,ka,oa,na,la,ia,sa;!qa&&fa<=ja;){fa++;qa=!0;for(na=0;na<ba.length-1;){S=ba[na];sa=ba[na+1];var ta=S[S.length-1],Aa=sa[0];ka=ta.pos+ta.dp+ta.size-Aa.pos-Aa.dp+Aa.size;if(.01<ka&&ta.pmin===Aa.pmin&&ta.pmax===Aa.pmax){for(la=sa.length-1;0<=la;la--)sa[la].dp+=ka;S.push.apply(S,sa);ba.splice(na+1,1);sa=0;for(la=S.length-1;0<=la;la--)sa+=S[la].dp;oa=sa/S.length;for(la=S.length-1;0<=la;la--)S[la].dp-=oa;qa=!1}else na++}ba.forEach(aa)}for(na=ba.length-1;0<=na;na--)for(fa=ba[na],la=fa.length-1;0<=
la;la--)ja=fa[la],S=ja.datum,S.offset=ja.dp,S.del=ja.del}function g(S,X,Z,aa){S.each(function(fa){var ha=d.select(this);if(fa.del)return ha.remove();var ja=ha.select("text.nums"),ba=fa.anchor,ma="end"===ba?-1:1,qa={start:1,end:-1,middle:0}[ba],ka=qa*(T+Q),oa=ka+qa*(fa.txwidth+Q),na=0,la=fa.offset,ia="middle"===ba;ia&&(ka-=fa.tx2width/2,oa+=fa.txwidth/2+Q);X&&(la*=-N,na=fa.offset*M);ha.select("path").attr("d",ia?"M-"+(fa.bx/2+fa.tx2width/2)*Z+","+(la-fa.by/2)*aa+"h"+fa.bx*Z+"v"+fa.by*aa+"h-"+fa.bx*
Z+"Z":"M0,0L"+(ma*T+na)*Z+","+(T+la)*aa+"v"+(fa.by/2-T)*aa+"h"+ma*fa.bx*Z+"v-"+fa.by*aa+"H"+(ma*T+na)*Z+"V"+(la-T)*aa+"Z");ma=na+ka;ka=la+fa.ty0-fa.by/2+Q;var sa=fa.textAlign||"auto";"auto"!==sa&&("left"===sa&&"start"!==ba?(ja.attr("text-anchor","start"),ma=ia?-fa.bx/2-fa.tx2width/2+Q:-fa.bx-Q):"right"===sa&&"end"!==ba&&(ja.attr("text-anchor","end"),ma=ia?fa.bx/2-fa.tx2width/2-Q:fa.bx+Q));ja.call(C.positionText,ma*Z,ka*aa);fa.tx2width&&(ha.select("text.name").call(C.positionText,(oa+qa*Q+na)*Z,(la+
fa.ty0-fa.by/2+Q)*aa),ha.select("rect").call(y.setRect,(oa+(qa-1)*fa.tx2width/2+na)*Z,(la-fa.by/2-1)*aa,fa.tx2width*Z,(fa.by+2)*aa))})}function e(S,X){function Z(ka){return ka||f(ka)&&0===ka}function aa(ka,oa,na){oa=ma(oa,na);Z(oa)&&(S[ka]=oa)}var fa=S.index,ha=S.trace||{},ja=S.cd[0],ba=S.cd[fa]||{},ma=Array.isArray(fa)?function(ka,oa){ka=r.castOption(ja,fa,ka);return Z(ka)?ka:r.extractOption({},ha,"",oa)}:function(ka,oa){return r.extractOption(ba,ha,ka,oa)};aa("hoverinfo","hi","hoverinfo");aa("bgcolor",
"hbg","hoverlabel.bgcolor");aa("borderColor","hbc","hoverlabel.bordercolor");aa("fontFamily","htf","hoverlabel.font.family");aa("fontSize","hts","hoverlabel.font.size");aa("fontColor","htc","hoverlabel.font.color");aa("nameLength","hnl","hoverlabel.namelength");aa("textAlign","hta","hoverlabel.align");S.posref="y"===X||"closest"===X&&"h"===ha.orientation?S.xa._offset+(S.x0+S.x1)/2:S.ya._offset+(S.y0+S.y1)/2;S.x0=r.constrain(S.x0,0,S.xa._length);S.x1=r.constrain(S.x1,0,S.xa._length);S.y0=r.constrain(S.y0,
0,S.ya._length);S.y1=r.constrain(S.y1,0,S.ya._length);void 0!==S.xLabelVal&&(S.xLabel="xLabel"in S?S.xLabel:t.hoverLabelText(S.xa,S.xLabelVal),S.xVal=S.xa.c2d(S.xLabelVal));void 0!==S.yLabelVal&&(S.yLabel="yLabel"in S?S.yLabel:t.hoverLabelText(S.ya,S.yLabelVal),S.yVal=S.ya.c2d(S.yLabelVal));void 0!==S.zLabelVal&&void 0===S.zLabel&&(S.zLabel=String(S.zLabelVal));if(!(isNaN(S.xerr)||"log"===S.xa.type&&0>=S.xerr)){var qa=t.tickText(S.xa,S.xa.c2l(S.xerr),"hover").text;S.xLabel=void 0!==S.xerrneg?S.xLabel+
(" +"+qa+" / -"+t.tickText(S.xa,S.xa.c2l(S.xerrneg),"hover").text):S.xLabel+(" \u00b1 "+qa);"x"===X&&(S.distance+=1)}isNaN(S.yerr)||"log"===S.ya.type&&0>=S.yerr||(qa=t.tickText(S.ya,S.ya.c2l(S.yerr),"hover").text,S.yLabel=void 0!==S.yerrneg?S.yLabel+(" +"+qa+" / -"+t.tickText(S.ya,S.ya.c2l(S.yerrneg),"hover").text):S.yLabel+(" \u00b1 "+qa),"y"===X&&(S.distance+=1));(X=S.hoverinfo||S.trace.hoverinfo)&&"all"!==X&&(X=Array.isArray(X)?X:X.split("+"),-1===X.indexOf("x")&&(S.xLabel=void 0),-1===X.indexOf("y")&&
(S.yLabel=void 0),-1===X.indexOf("z")&&(S.zLabel=void 0),-1===X.indexOf("text")&&(S.text=void 0),-1===X.indexOf("name")&&(S.name=void 0));return S}function n(S,X,Z){var aa=Z.container,fa=Z.fullLayout,ha=fa._size;Z=Z.event;var ja=!!X.hLinePoint,ba=!!X.vLinePoint;aa.selectAll(".spikeline").remove();if(ba||ja){fa=D.combine(fa.plot_bgcolor,fa.paper_bgcolor);if(ja){var ma=X.hLinePoint;var qa=ma&&ma.xa;ja=ma&&ma.ya;if("cursor"===ja.spikesnap){var ka=Z.pointerX;qa=Z.pointerY}else ka=qa._offset+ma.x,qa=ja._offset+
ma.y;var oa=1.5>k.readability(ma.color,fa)?D.contrast(fa):ma.color;ma=ja.spikemode;var na=ja.spikethickness;oa=ja.spikecolor||oa;var la=t.getPxPosition(S,ja);if(-1!==ma.indexOf("toaxis")||-1!==ma.indexOf("across")){if(-1!==ma.indexOf("toaxis")){var ia=la;var sa=ka}-1!==ma.indexOf("across")&&(ia=ja._counterDomainMin,sa=ja._counterDomainMax,"free"===ja.anchor&&(ia=Math.min(ia,ja.position),sa=Math.max(sa,ja.position)),ia=ha.l+ia*ha.w,sa=ha.l+sa*ha.w);aa.insert("line",":first-child").attr({x1:ia,x2:sa,
y1:qa,y2:qa,"stroke-width":na,stroke:oa,"stroke-dasharray":y.dashStyle(ja.spikedash,na)}).classed("spikeline",!0).classed("crisp",!0);aa.insert("line",":first-child").attr({x1:ia,x2:sa,y1:qa,y2:qa,"stroke-width":na+2,stroke:fa}).classed("spikeline",!0).classed("crisp",!0)}-1!==ma.indexOf("marker")&&aa.insert("circle",":first-child").attr({cx:la+("right"!==ja.side?na:-na),cy:qa,r:na,fill:oa}).classed("spikeline",!0)}if(ba){qa=(ba=X.vLinePoint)&&ba.xa;ja=ba&&ba.ya;"cursor"===qa.spikesnap?(X=Z.pointerX,
ja=Z.pointerY):(X=qa._offset+ba.x,ja=ja._offset+ba.y);ia=1.5>k.readability(ba.color,fa)?D.contrast(fa):ba.color;Z=qa.spikemode;ba=qa.spikethickness;ia=qa.spikecolor||ia;S=t.getPxPosition(S,qa);if(-1!==Z.indexOf("toaxis")||-1!==Z.indexOf("across")){if(-1!==Z.indexOf("toaxis")){var ta=S;var Aa=ja}-1!==Z.indexOf("across")&&(Aa=qa._counterDomainMin,ta=qa._counterDomainMax,"free"===qa.anchor&&(Aa=Math.min(Aa,qa.position),ta=Math.max(ta,qa.position)),ta=ha.t+(1-ta)*ha.h,Aa=ha.t+(1-Aa)*ha.h);aa.insert("line",
":first-child").attr({x1:X,x2:X,y1:ta,y2:Aa,"stroke-width":ba,stroke:ia,"stroke-dasharray":y.dashStyle(qa.spikedash,ba)}).classed("spikeline",!0).classed("crisp",!0);aa.insert("line",":first-child").attr({x1:X,x2:X,y1:ta,y2:Aa,"stroke-width":ba+2,stroke:fa}).classed("spikeline",!0).classed("crisp",!0)}-1!==Z.indexOf("marker")&&aa.insert("circle",":first-child").attr({cx:X,cy:S-("top"!==qa.side?ba:-ba),r:ba,fill:ia}).classed("spikeline",!0)}}}function p(S,X,Z){if(!Z||Z.length!==S._hoverdata.length)return!0;
for(X=Z.length-1;0<=X;X--){var aa=Z[X],fa=S._hoverdata[X];if(aa.curveNumber!==fa.curveNumber||String(aa.pointNumber)!==String(fa.pointNumber)||String(aa.pointNumbers)!==String(fa.pointNumbers))return!0}return!1}function c(S,X){return C.plainText(S||"",{len:X,allowedTags:"br sub sup b i em".split(" ")})}var d=b("d3"),f=b("fast-isnumeric"),k=b("tinycolor2"),r=b("../../lib"),u=r.strTranslate,v=r.strRotate,x=b("../../lib/events"),C=b("../../lib/svg_text_utils"),z=b("../../lib/override_cursor"),y=b("../drawing"),
D=b("../color"),A=b("../dragelement"),t=b("../../plots/cartesian/axes"),B=b("../../registry"),F=b("./helpers"),I=b("./constants"),J=b("../legend/defaults"),L=b("../legend/draw"),H=I.YANGLE;b=Math.PI*H/180;var P=1/Math.sin(b),M=Math.cos(b),N=Math.sin(b),T=I.HOVERARROWSIZE,Q=I.HOVERTEXTPAD;G.hover=function(S,X,Z,aa){S=r.getGraphDiv(S);r.throttle(S._fullLayout._uid+I.HOVERID,I.HOVERMINTIME,function(){q(S,X,Z,aa)})};G.loneHover=function(S,X){var Z=!0;Array.isArray(S)||(Z=!1,S=[S]);S=S.map(function(ba){return{color:ba.color||
D.defaultLine,x0:ba.x0||ba.x||0,x1:ba.x1||ba.x||0,y0:ba.y0||ba.y||0,y1:ba.y1||ba.y||0,xLabel:ba.xLabel,yLabel:ba.yLabel,zLabel:ba.zLabel,text:ba.text,name:ba.name,idealAlign:ba.idealAlign,borderColor:ba.borderColor,fontFamily:ba.fontFamily,fontSize:ba.fontSize,fontColor:ba.fontColor,nameLength:ba.nameLength,textAlign:ba.textAlign,trace:ba.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:ba.hovertemplate||!1,eventData:ba.eventData||!1,hovertemplateLabels:ba.hovertemplateLabels||
!1}});var aa=d.select(X.container),fa=X.outerContainer?d.select(X.outerContainer):aa;aa={hovermode:"closest",rotateLabels:!1,bgColor:X.bgColor||D.background,container:aa,outerContainer:fa};S=l(S,aa,X.gd);var ha=0,ja=0;S.sort(function(ba,ma){return ba.y0-ma.y0}).each(function(ba,ma){var qa=ba.y0-ba.by/2;ba.offset=qa-5<ha?ha-qa+5:0;ha=qa+ba.by+ba.offset;ma===X.anchorIndex&&(ja=ba.offset)}).each(function(ba){ba.offset-=ja});g(S,aa.rotateLabels,X.gd._fullLayout._invScaleX,X.gd._fullLayout._invScaleY);
return Z?S:S.node()};var U=/<extra>([\s\S]*)<\/extra>/},{"../../lib":778,"../../lib/events":767,"../../lib/override_cursor":789,"../../lib/svg_text_utils":803,"../../plots/cartesian/axes":828,"../../registry":911,"../color":643,"../dragelement":662,"../drawing":665,"../legend/defaults":695,"../legend/draw":696,"./constants":677,"./helpers":679,d3:169,"fast-isnumeric":241,tinycolor2:576}],681:[function(b,K,G){var q=b("../../lib"),m=b("../color"),l=b("./helpers").isUnifiedHover;K.exports=function(h,
a,g,e){function n(p){e.font[p]||(e.font[p]=a.legend?a.legend.font[p]:a.font[p])}e=e||{};a&&l(a.hovermode)&&(e.font||(e.font={}),n("size"),n("family"),n("color"),a.legend?(e.bgcolor||(e.bgcolor=m.combine(a.legend.bgcolor,a.paper_bgcolor)),e.bordercolor||(e.bordercolor=a.legend.bordercolor)):e.bgcolor||(e.bgcolor=a.paper_bgcolor));g("hoverlabel.bgcolor",e.bgcolor);g("hoverlabel.bordercolor",e.bordercolor);g("hoverlabel.namelength",e.namelength);q.coerceFont(g,"hoverlabel.font",e.font);g("hoverlabel.align",
e.align)}},{"../../lib":778,"../color":643,"./helpers":679}],682:[function(b,K,G){function q(h,a){a=a._scatterStackOpts||{};for(var g=0;g<h.length;g++){var e=h[g],n=(a[e.xaxis+e.yaxis]||{})[e.stackgroup]||{};if("h"!==e.orientation&&"h"!==n.orientation)return!1}return!0}var m=b("../../lib"),l=b("./layout_attributes");K.exports=function(h,a,g){function e(p,c){return void 0!==a[p]?a[p]:m.coerce(h,a,l,p,c)}var n=e("clickmode");a._has("cartesian")?-1<n.indexOf("select")?g="closest":(a._isHoriz=q(g,a),
g=a._isHoriz?"y":"x"):g="closest";return e("hovermode",g)}},{"../../lib":778,"./layout_attributes":684}],683:[function(b,K,G){var q=b("d3"),m=b("../../lib");G=b("../dragelement");var l=b("./helpers"),h=b("./layout_attributes"),a=b("./hover");K.exports={moduleType:"component",name:"fx",constants:b("./constants"),schema:{layout:h},attributes:b("./attributes"),layoutAttributes:h,supplyLayoutGlobalDefaults:b("./layout_global_defaults"),supplyDefaults:b("./defaults"),supplyLayoutDefaults:b("./layout_defaults"),
calc:b("./calc"),getDistanceFunction:l.getDistanceFunction,getClosest:l.getClosest,inbox:l.inbox,quadrature:l.quadrature,appendArrayPointValue:l.appendArrayPointValue,castHoverOption:function(g,e,n){return m.castOption(g,e,"hoverlabel."+n)},castHoverinfo:function(g,e,n){return m.castOption(g,n,"hoverinfo",function(p){return m.coerceHoverinfo({hoverinfo:p},{_module:g._module},e)})},hover:a.hover,unhover:G.unhover,loneHover:a.loneHover,loneUnhover:function(g){g=m.isD3Selection(g)?g:q.select(g);g.selectAll("g.hovertext").remove();
g.selectAll(".spikeline").remove()},click:b("./click")}},{"../../lib":778,"../dragelement":662,"./attributes":674,"./calc":675,"./click":676,"./constants":677,"./defaults":678,"./helpers":679,"./hover":680,"./layout_attributes":684,"./layout_defaults":685,"./layout_global_defaults":686,d3:169}],684:[function(b,K,G){G=b("./constants");b=b("../../plots/font_attributes")({editType:"none"});b.family.dflt=G.HOVERFONT;b.size.dflt=G.HOVERFONTSIZE;K.exports={clickmode:{valType:"flaglist",flags:["event","select"],
dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:20,editType:"none"},hoverlabel:{bgcolor:{valType:"color",
editType:"none"},bordercolor:{valType:"color",editType:"none"},font:b,align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":856,"./constants":677}],685:[function(b,K,G){var q=b("../../lib"),m=b("./helpers").isUnifiedHover,l=b("./layout_attributes"),h=b("./hovermode_defaults"),
a=b("./hoverlabel_defaults");K.exports=function(g,e,n){function p(f,k){return q.coerce(g,e,l,f,k)}if(n=h(g,e,n))p("hoverdistance"),p("spikedistance",m(n)?-1:void 0);"select"===p("dragmode")&&p("selectdirection");n=e._has("mapbox");var c=e._has("geo"),d=e._basePlotModules.length;"zoom"===e.dragmode&&((n||c)&&1===d||n&&c&&2===d)&&(e.dragmode="pan");a(g,e,p)}},{"../../lib":778,"./helpers":679,"./hoverlabel_defaults":681,"./hovermode_defaults":682,"./layout_attributes":684}],686:[function(b,K,G){var q=
b("../../lib"),m=b("./hoverlabel_defaults"),l=b("./layout_attributes");K.exports=function(h,a){m(h,a,function(g,e){return q.coerce(h,a,l,g,e)})}},{"../../lib":778,"./hoverlabel_defaults":681,"./layout_attributes":684}],687:[function(b,K,G){function q(p,c,d){c=c[d+"axes"];p=Object.keys((p._splomAxes||{})[d]||{});if(Array.isArray(c))return c;if(p.length)return p}function m(p,c,d,f,k,r){d=c(p+"gap",d);var u=c("domain."+p);c(p+"side",f);p=Array(k);c=u[0];u=(u[1]-c)/(k-d);d=u*(1-d);for(f=0;f<k;f++){var v=
c+u*f;p[r?k-1-f:f]=[v,v+d]}return p}function l(p,c,d,f,k){function r(x,C){-1!==c.indexOf(C)&&void 0===f[C]?(u[x]=C,f[C]=x):u[x]=""}var u=Array(d),v;if(Array.isArray(p))for(v=0;v<d;v++)r(v,p[v]);else for(r(0,k),v=1;v<d;v++)r(v,k+(v+1));return u}var h=b("../../lib");G=b("../../lib/regex").counter;var a=b("../../plots/domain").attributes,g=b("../../plots/cartesian/constants").idRegex,e=b("../../plot_api/plot_template"),n={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",
values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[G("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[g.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[g.y.toString(),
""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:a({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",
editType:"plot"},editType:"plot"};K.exports={moduleType:"component",name:"grid",schema:{layout:{grid:n}},layoutAttributes:n,sizeDefaults:function(p,c){function d(t,B){return h.coerce(f,y,n,t,B)}var f=p.grid||{},k=q(c,f,"x"),r=q(c,f,"y");if(p.grid||k||r){p=Array.isArray(f.subplots)&&Array.isArray(f.subplots[0]);var u=Array.isArray(k),v=Array.isArray(r),x=u&&k!==f.xaxes&&v&&r!==f.yaxes;if(p){var C=f.subplots.length;var z=f.subplots[0].length}else v&&(C=r.length),u&&(z=k.length);var y=e.newContainer(c,
"grid");k=d("rows",C);z=d("columns",z);if(1<k*z){p||u||v||"independent"===d("pattern")&&(p=!0);y._hasSubplotGrid=p;u="top to bottom"===d("roworder");v=p?.3:.1;if(x&&c._splomGridDflt){var D=c._splomGridDflt.xside;var A=c._splomGridDflt.yside}y._domains={x:m("x",d,p?.2:.1,D,z),y:m("y",d,v,A,k,u)}}else delete c.grid}},contentDefaults:function(p,c){var d=c.grid;if(d&&d._domains){var f=p.grid||{};p=c._subplots;var k=d._hasSubplotGrid,r=d.rows,u=d.columns,v="independent"===d.pattern,x,C=d._axisMap={};if(k){var z=
f.subplots||[];var y=d.subplots=Array(r);var D=1;for(c=0;c<r;c++){var A=y[c]=Array(u),t=z[c]||[];for(x=0;x<u;x++)if(v?(f=1===D?"xy":"x"+D+"y"+D,D++):f=t[x],A[x]="",-1!==p.cartesian.indexOf(f)){var B=f.indexOf("y");var F=f.slice(0,B);B=f.slice(B);void 0!==C[F]&&C[F]!==x||void 0!==C[B]&&C[B]!==c||(A[x]=f,C[F]=x,C[B]=c)}}}else B=q(c,f,"x"),c=q(c,f,"y"),d.xaxes=l(B,p.xaxis,u,C,"x"),d.yaxes=l(c,p.yaxis,r,C,"y");v=d._anchors={};x="top to bottom"===d.roworder;for(var I in C)if(c=I.charAt(0),f=d[c+"side"],
8>f.length)v[I]="free";else if("x"===c)if("t"===f.charAt(0)===x?(c=0,z=1,D=r):(c=r-1,D=z=-1),k)for(F=C[I];c!==D;c+=z){if(f=y[c][F])if(B=f.indexOf("y"),f.slice(0,B)===I){v[I]=f.slice(B);break}}else for(;c!==D;c+=z){if(B=d.yaxes[c],-1!==p.cartesian.indexOf(I+B)){v[I]=B;break}}else if("l"===f.charAt(0)?(c=0,z=1,D=u):(c=u-1,D=z=-1),k)for(F=C[I];c!==D;c+=z){if(f=y[F][c])if(B=f.indexOf("y"),f.slice(B)===I){v[I]=f.slice(0,B);break}}else for(;c!==D;c+=z)if(F=d.xaxes[c],-1!==p.cartesian.indexOf(F+I)){v[I]=
F;break}}}}},{"../../lib":778,"../../lib/regex":795,"../../plot_api/plot_template":817,"../../plots/cartesian/constants":834,"../../plots/domain":855}],688:[function(b,K,G){G=b("../../plots/cartesian/constants");var q=b("../../plot_api/plot_template").templatedArray;b("../../constants/axis_placeable_objects");K.exports=q("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",
editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",
values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",G.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",G.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":746,"../../plot_api/plot_template":817,"../../plots/cartesian/constants":834}],689:[function(b,K,G){var q=b("fast-isnumeric"),m=b("../../lib/to_log_range");K.exports=
function(l,h,a,g){h=h||{};var e="log"===a&&"linear"===h.type;a="linear"===a&&"log"===h.type;if(e||a){l=l._fullLayout.images;a=h._id.charAt(0);for(var n,p,c=0;c<l.length;c++)if(n=l[c],p="images["+c+"].",n[a+"ref"]===h._id){var d=n[a];n=n["size"+a];e?(d=m(d,h.range),n=n/Math.pow(10,d)/2,n=2*Math.log(n+Math.sqrt(1+n*n))/Math.LN10):(d=Math.pow(10,d),n=d*(Math.pow(10,n/2)-Math.pow(10,-n/2)));q(d)?q(n)||(n=null):n=d=null;g(p+a,d);g(p+"size"+a,n)}}}},{"../../lib/to_log_range":805,"fast-isnumeric":241}],
690:[function(b,K,G){function q(g,e,n){function p(r,u){return m.coerce(g,e,a,r,u)}var c=p("source");if(!p("visible",!!c))return e;p("layer");p("xanchor");p("yanchor");p("sizex");p("sizey");p("sizing");p("opacity");n={_fullLayout:n};c=["x","y"];for(var d=0;2>d;d++){var f=c[d],k=l.coerceRef(g,e,n,f,"paper",void 0);"paper"!==k&&l.getFromId(n,k)._imgIndices.push(e._index);l.coercePosition(e,n,p,k,f,0)}return e}var m=b("../../lib"),l=b("../../plots/cartesian/axes"),h=b("../../plots/array_container_defaults"),
a=b("./attributes");K.exports=function(g,e){h(g,e,{name:"images",handleItemDefaults:q})}},{"../../lib":778,"../../plots/array_container_defaults":823,"../../plots/cartesian/axes":828,"./attributes":688}],691:[function(b,K,G){var q=b("d3"),m=b("../drawing"),l=b("../../plots/cartesian/axes"),h=b("../../plots/cartesian/axis_ids"),a=b("../../constants/xmlns_namespaces");K.exports=function(g){function e(C){var z=q.select(this);if(this._imgSrc!==C.source)if(z.attr("xmlns",a.svg),C.source&&"data:"===C.source.slice(0,
5))z.attr("xlink:href",C.source),this._imgSrc=C.source;else{var y=new Promise(function(D){function A(){z.remove();D()}var t=new Image;this.img=t;t.setAttribute("crossOrigin","anonymous");t.onerror=A;t.onload=function(){var B=document.createElement("canvas");B.width=this.width;B.height=this.height;B.getContext("2d").drawImage(this,0,0);B=B.toDataURL("image/png");z.attr("xlink:href",B);D()};z.on("error",A);this._imgSrc=t.src=C.source}.bind(this));g._promises.push(y)}}function n(C){var z=q.select(this),
y=l.getFromId(g,C.xref),D=l.getFromId(g,C.yref),A="domain"===l.getRefType(C.xref),t="domain"===l.getRefType(C.yref),B=p._size;var F=void 0!==y?"string"===typeof C.xref&&A?y._length*C.sizex:Math.abs(y.l2p(C.sizex)-y.l2p(0)):C.sizex*B.w;var I=void 0!==D?"string"===typeof C.yref&&t?D._length*C.sizey:Math.abs(D.l2p(C.sizey)-D.l2p(0)):C.sizey*B.h;var J=F*x.x[C.xanchor].offset,L=I*x.y[C.yanchor].offset,H=x.x[C.xanchor].sizing+x.y[C.yanchor].sizing;A=void 0!==y?"string"===typeof C.xref&&A?y._length*C.x+
y._offset:y.r2p(C.x)+y._offset:C.x*B.w+B.l;A+=J;t=void 0!==D?"string"===typeof C.yref&&t?D._length*(1-C.y)+D._offset:D.r2p(C.y)+D._offset:B.h-C.y*B.h+B.t;switch(C.sizing){case "fill":H+=" slice";break;case "stretch":H="none"}z.attr({x:A,y:t+L,width:F,height:I,preserveAspectRatio:H,opacity:C.opacity});y=y&&"domain"!==l.getRefType(C.xref)?y._id:"";C=D&&"domain"!==l.getRefType(C.yref)?D._id:"";C=y+C;m.setClipUrl(z,C?"clip"+p._uid+C:null,g)}var p=g._fullLayout,c=[],d={},f=[],k;for(k=0;k<p.images.length;k++){var r=
p.images[k];if(r.visible)if("below"===r.layer&&"paper"!==r.xref&&"paper"!==r.yref){var u=h.ref2id(r.xref)+h.ref2id(r.yref);var v=p._plots[u];v?(v.mainplot&&(u=v.mainplot.id),d[u]||(d[u]=[]),d[u].push(r)):f.push(r)}else"above"===r.layer?c.push(r):f.push(r)}var x={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}}};k=p._imageLowerLayer.selectAll("image").data(f);
u=p._imageUpperLayer.selectAll("image").data(c);k.enter().append("image");u.enter().append("image");k.exit().remove();u.exit().remove();k.each(function(C){e.bind(this)(C);n.bind(this)(C)});u.each(function(C){e.bind(this)(C);n.bind(this)(C)});c=Object.keys(p._plots);for(k=0;k<c.length;k++)u=c[k],f=p._plots[u],f.imagelayer&&(u=f.imagelayer.selectAll("image").data(d[u]||[]),u.enter().append("image"),u.exit().remove(),u.each(function(C){e.bind(this)(C);n.bind(this)(C)}))}},{"../../constants/xmlns_namespaces":754,
"../../plots/cartesian/axes":828,"../../plots/cartesian/axis_ids":831,"../drawing":665,d3:169}],692:[function(b,K,G){K.exports={moduleType:"component",name:"images",layoutAttributes:b("./attributes"),supplyLayoutDefaults:b("./defaults"),includeBasePlot:b("../../plots/cartesian/include_components")("images"),draw:b("./draw"),convertCoords:b("./convert_coords")}},{"../../plots/cartesian/include_components":840,"./attributes":688,"./convert_coords":689,"./defaults":690,"./draw":691}],693:[function(b,
K,G){G=b("../../plots/font_attributes");b=b("../color/attributes");K.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:b.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:G({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,
editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},x:{valType:"number",min:-2,max:3,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center",
"right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:G({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},
editType:"legend"}},{"../../plots/font_attributes":856,"../color/attributes":642}],694:[function(b,K,G){K.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},{}],695:[function(b,K,G){var q=b("../../registry"),m=b("../../lib"),l=b("../../plot_api/plot_template"),h=b("./attributes"),a=b("../../plots/layout_attributes"),g=b("./helpers");K.exports=function(e,n,p){function c(C,z){return m.coerce(d,
x,h,C,z)}for(var d=e.legend||{},f=0,k=!1,r="normal",u=0;u<p.length;u++){var v=p[u];if(v.visible){if(v.showlegend||v._dfltShowLegend&&!(v._module&&v._module.attributes&&v._module.attributes.showlegend&&!1===v._module.attributes.showlegend.dflt))f++,v.showlegend&&(k=!0,(q.traceIs(v,"pie-like")||!0===v._input.showlegend)&&f++);if(q.traceIs(v,"bar")&&"stack"===n.barmode||-1!==["tonextx","tonexty"].indexOf(v.fill))r=g.isGrouped({traceorder:r})?"grouped+reversed":"reversed";void 0!==v.legendgroup&&""!==
v.legendgroup&&(r=g.isReversed({traceorder:r})?"reversed+grouped":"grouped")}}p=m.coerce(e,n,a,"showlegend",k&&1<f);if(!1!==p||d.uirevision){var x=l.newContainer(n,"legend");c("uirevision",n.uirevision);!1!==p&&(c("bgcolor",n.paper_bgcolor),c("bordercolor"),c("borderwidth"),m.coerceFont(c,"font",n.font),p=c("orientation"),"h"===p?(f=0,q.getComponentMethod("rangeslider","isVisible")(e.xaxis)?(e=1.1,k="bottom"):(e=-.1,k="top")):(f=1.02,e=1,k="auto"),c("traceorder",r),g.isGrouped(n.legend)&&c("tracegroupgap"),
c("itemsizing"),c("itemwidth"),c("itemclick"),c("itemdoubleclick"),c("x",f),c("xanchor"),c("y",e),c("yanchor",k),c("valign"),m.noneOrAll(d,x,["x","y"]),c("title.text")&&(c("title.side","h"===p?"left":"top"),m.coerceFont(c,"title.font",n.font)))}}},{"../../lib":778,"../../plot_api/plot_template":817,"../../plots/layout_attributes":882,"../../registry":911,"./attributes":693,"./helpers":699}],696:[function(b,K,G){function q(L,H,P,M,N){var T=P.data()[0][0].trace;N={event:N,node:P.node(),curveNumber:T.index,
expandedIndex:T._expandedIndex,data:L.data,layout:L.layout,frames:L._transitionData._frames,config:L._context,fullData:L._fullData,fullLayout:L._fullLayout};T._group&&(N.group=T._group);r.traceIs(T,"pie-like")&&(N.label=P.datum()[0].label);!1!==u.triggerHandler(L,"plotly_legendclick",N)&&(1===M?H._clickTimeout=setTimeout(function(){y(P,L,M)},L._context.doubleClickDelay):2===M&&(H._clickTimeout&&clearTimeout(H._clickTimeout),L._legendMouseDownTime=0,!1!==u.triggerHandler(L,"plotly_legenddoubleclick",
N)&&y(P,L,M)))}function m(L,H,P){var M=L.data()[0][0],N=M.trace,T=r.traceIs(N,"pie-like"),Q=N.index,U=P._main&&H._context.edits.legendText&&!T,S=P._maxNameLength;P.entries?T=M.text:(T=T?M.label:N.name,N._meta&&(T=f.templateString(T,N._meta)));N=f.ensureSingle(L,"text","legendtext");N.attr("text-anchor","start").call(x.font,P.font).text(U?l(T,S):T);z.positionText(N,P.itemwidth+2*D.itemGap,0);if(U)N.call(z.makeEditable,{gd:H,text:T}).call(a,L,H,P).on("edit",function(X){this.text(l(X,S)).call(a,L,H,
P);var Z=M.trace._fullInput||{},aa={};r.hasTransform(Z,"groupby")?(aa=r.getTransformIndices(Z,"groupby"),Z=f.keyedContainer(Z,"transforms["+aa[aa.length-1]+"].styles","target","value.name"),Z.set(M.trace._group,X),aa=Z.constructUpdate()):aa.name=X;return r.call("_guiRestyle",H,aa,Q)});else a(N,L,H,P)}function l(L,H){H=Math.max(4,H);if(L&&L.trim().length>=H/2)return L;L=L||"";for(H-=L.length;0<H;H--)L+=" ";return L}function h(L,H){var P=H._context.doubleClickDelay,M,N=1,T=f.ensureSingle(L,"rect","legendtoggle",
function(Q){H._context.staticPlot||Q.style("cursor","pointer").attr("pointer-events","all");Q.call(C.fill,"rgba(0,0,0,0)")});H._context.staticPlot||(T.on("mousedown",function(){M=(new Date).getTime();M-H._legendMouseDownTime<P?N+=1:(N=1,H._legendMouseDownTime=M)}),T.on("mouseup",function(){if(!H._dragged&&!H._editing){var Q=H._fullLayout.legend;(new Date).getTime()-H._legendMouseDownTime>P&&(N=Math.max(N-1,1));q(H,Q,L,N,d.event)}}))}function a(L,H,P,M){M._main||L.attr("data-notex",!0);z.convertToTspans(L,
P,function(){var N=M,T=H.data()[0][0];if(N._main&&T&&!T.trace.showlegend)H.remove();else{var Q=H.select("g[class*=math-group]"),U=Q.node();N||(N=P._fullLayout.legend);var S=N.borderwidth,X=(T?N:N.title).font.size*A;if(U){var Z=x.bBox(U);U=Z.height;Z=Z.width;T?x.setTranslate(Q,0,.25*U):x.setTranslate(Q,S,.75*U+S)}else{Q=H.select(T?".legendtext":".legendtitletext");var aa=z.lineCount(Q);Z=Q.node();U=X*aa;Z=Z?x.bBox(Z).width:0;T?z.positionText(Q,N.itemwidth+2*D.itemGap,-(X*((aa-1)/2-.3))):z.positionText(Q,
D.titlePad+S,X+S)}T?(T.lineHeight=X,T.height=Math.max(U,16)+3,T.width=Z):(N._titleWidth=Z,N._titleHeight=U)}})}function g(L){var H=0,P=0,M=L.title.side;M&&(-1!==M.indexOf("left")&&(H=L._titleWidth),-1!==M.indexOf("top")&&(P=L._titleHeight));return[H,P]}function e(L,H,P,M){var N=L._fullLayout;M||(M=N.legend);var T=N._size,Q=J.isVertical(M),U=J.isGrouped(M),S=M.borderwidth,X=2*S,Z=D.itemGap,aa=M.itemwidth+2*Z,fa=2*(S+Z),ha=c(M),ja=0>M.y||0===M.y&&"top"===ha,ba=1<M.y||1===M.y&&"bottom"===ha;M._maxHeight=
Math.max(ja||ba?N.height/2:T.h,30);var ma=0;M._width=0;M._height=0;var qa=g(M);if(Q)P.each(function(ab){var Ya=ab[0].height;x.setTranslate(this,S+qa[0],S+qa[1]+M._height+Ya/2+Z);M._height+=Ya;M._width=Math.max(M._width,ab[0].width)}),ma=aa+M._width,M._width+=Z+aa+X,M._height+=fa,U&&(H.each(function(ab,Ya){x.setTranslate(this,0,Ya*M.tracegroupgap)}),M._height+=(M._lgroupsLength-1)*M.tracegroupgap);else{ha=p(M);var ka=1<M.x||1===M.x&&"left"===ha;ja=ba||ja;N=N.width/2;M._maxWidth=Math.max(0>M.x||0===
M.x&&"right"===ha?ja&&"left"===ha?T.l+T.w:N:ka?ja&&"right"===ha?T.r+T.w:N:T.w,2*aa);var oa=0,na=0;P.each(function(ab){ab=ab[0].width+aa;oa=Math.max(oa,ab);na+=ab});ma=null;var la=0;if(U){var ia=0,sa=0,ta=0;H.each(function(){var ab=0,Ya=0;d.select(this).selectAll("g.traces").each(function(nb){var va=nb[0].height;x.setTranslate(this,qa[0],qa[1]+S+Z+va/2+Ya);Ya+=va;ab=Math.max(ab,aa+nb[0].width)});ia=Math.max(ia,Ya);var hb=ab+Z;hb+S+sa>M._maxWidth&&(la=Math.max(la,sa),sa=0,ta+=ia+M.tracegroupgap,ia=
Ya);x.setTranslate(this,sa,ta);sa+=hb});M._width=Math.max(la,sa)+S;M._height=ta+ia+fa}else{H=P.size();var Aa=na+X+(H-1)*Z<M._maxWidth,Ka=0,Sa=0,db=0,eb=0;P.each(function(ab){var Ya=ab[0].height;ab=aa+ab[0].width;var hb=(Aa?ab:oa)+Z;hb+S+Sa-Z>=M._maxWidth&&(la=Math.max(la,eb),Sa=0,db+=Ka,M._height+=Ka,Ka=0);x.setTranslate(this,qa[0]+S+Sa,qa[1]+S+db+Ya/2+Z);eb=Sa+ab+Z;Sa+=hb;Ka=Math.max(Ka,Ya)});Aa?(M._width=Sa+X,M._height=Ka+fa):(M._width=Math.max(la,eb)+X,M._height+=Ka+fa)}}M._width=Math.ceil(Math.max(M._width+
qa[0],M._titleWidth+2*(S+D.titlePad)));M._height=Math.ceil(Math.max(M._height+qa[1],M._titleHeight+2*(S+D.itemGap)));M._effHeight=Math.min(M._height,M._maxHeight);L=L._context.edits;var lb=L.legendText||L.legendPosition;P.each(function(ab){var Ya=d.select(this).select(".legendtoggle"),hb=ab[0].height;ab=lb?aa:ma||aa+ab[0].width;Q||(ab+=Z/2);x.setRect(Ya,0,-hb/2,ab,hb)})}function n(L){var H=L._fullLayout.legend,P=p(H),M=c(H);return k.autoMargin(L,"legend",{x:H.x,y:H.y,l:H._width*t[P],r:H._width*B[P],
b:H._effHeight*B[M],t:H._effHeight*t[M]})}function p(L){return f.isRightAnchor(L)?"right":f.isCenterAnchor(L)?"center":"left"}function c(L){return f.isBottomAnchor(L)?"bottom":f.isMiddleAnchor(L)?"middle":"top"}var d=b("d3"),f=b("../../lib"),k=b("../../plots/plots"),r=b("../../registry"),u=b("../../lib/events"),v=b("../dragelement"),x=b("../drawing"),C=b("../color"),z=b("../../lib/svg_text_utils"),y=b("./handle_click"),D=b("./constants");G=b("../../constants/alignment");var A=G.LINE_SPACING,t=G.FROM_TL,
B=G.FROM_BR,F=b("./get_legend_data"),I=b("./style"),J=b("./helpers");K.exports=function(L,H){var P=L._fullLayout,M="legend"+P._uid;if(H){var N=H.layer;M+="-hover"}else H=P.legend||{},H._main=!0,N=P._infolayer;if(N){L._legendMouseDownTime||(L._legendMouseDownTime=0);if(H._main){if(!L.calcdata)return;var T=P.showlegend&&F(L.calcdata,H)}else{if(!H.entries)return;T=F(H.entries,H)}var Q=P.hiddenlabels||[];if(H._main&&(!P.showlegend||!T.length))return N.selectAll(".legend").remove(),P._topdefs.select("#"+
M).remove(),k.autoMargin(L,"legend");var U=f.ensureSingle(N,"g","legend",function(ma){H._main&&ma.attr("pointer-events","all")}),S=f.ensureSingleById(P._topdefs,"clipPath",M,function(ma){ma.append("rect")}),X=f.ensureSingle(U,"rect","bg",function(ma){ma.attr("shape-rendering","crispEdges")});X.call(C.stroke,H.bordercolor).call(C.fill,H.bgcolor).style("stroke-width",H.borderwidth+"px");var Z=f.ensureSingle(U,"g","scrollbox"),aa=H.title;H._titleWidth=0;H._titleHeight=0;if(aa.text){var fa=f.ensureSingle(Z,
"text","legendtitletext");fa.attr("text-anchor","start").call(x.font,aa.font).text(aa.text);a(fa,Z,L,H)}else Z.selectAll(".legendtitletext").remove();var ha=f.ensureSingle(U,"rect","scrollbar",function(ma){ma.attr(D.scrollBarEnterAttrs).call(C.fill,D.scrollBarColor)}),ja=Z.selectAll("g.groups").data(T);ja.enter().append("g").attr("class","groups");ja.exit().remove();var ba=ja.selectAll("g.traces").data(f.identity);ba.enter().append("g").attr("class","traces");ba.exit().remove();ba.style("opacity",
function(ma){var qa=ma[0].trace;return r.traceIs(qa,"pie-like")?-1!==Q.indexOf(ma[0].label)?.5:1:"legendonly"===qa.visible?.5:1}).each(function(){d.select(this).call(m,L,H)}).call(I,L,H).each(function(){H._main&&d.select(this).call(h,L)});f.syncOrAsync([k.previousPromises,function(){return e(L,ja,ba,H)},function(){function ma(va,Ba,Ga){H._scrollY=L._fullLayout.legend._scrollY=va;x.setTranslate(Z,0,-va);x.setRect(ha,H._width,D.scrollBarMargin+va*Ga,D.scrollBarWidth,Ba);S.select("rect").attr("y",ka+
va)}if(!H._main||!n(L)){var qa=P._size,ka=H.borderwidth,oa=qa.l+qa.w*H.x-t[p(H)]*H._width,na=qa.t+qa.h*(1-H.y)-t[c(H)]*H._effHeight;if(H._main&&P.margin.autoexpand){var la=oa,ia=na;oa=f.constrain(oa,0,P.width-H._width);na=f.constrain(na,0,P.height-H._effHeight);oa!==la&&f.log("Constrain legend.x to make legend fit inside graph");na!==ia&&f.log("Constrain legend.y to make legend fit inside graph")}H._main&&x.setTranslate(U,oa,na);ha.on(".drag",null);U.on("wheel",null);if(!H._main||H._height<=H._maxHeight||
L._context.staticPlot)oa=H._effHeight,H._main||(oa=H._height),X.attr({width:H._width-ka,height:oa-ka,x:ka/2,y:ka/2}),x.setTranslate(Z,0,0),S.select("rect").attr({width:H._width-2*ka,height:oa-2*ka,x:ka,y:ka}),x.setClipUrl(Z,M,L),x.setRect(ha,0,0,0,0),delete H._scrollY;else{var sa=Math.max(D.scrollBarMinHeight,H._effHeight*H._effHeight/H._height),ta=H._effHeight-sa-2*D.scrollBarMargin,Aa=H._height-H._effHeight,Ka=ta/Aa,Sa=Math.min(H._scrollY||0,Aa);X.attr({width:H._width-2*ka+D.scrollBarWidth+D.scrollBarMargin,
height:H._effHeight-ka,x:ka/2,y:ka/2});S.select("rect").attr({width:H._width-2*ka+D.scrollBarWidth+D.scrollBarMargin,height:H._effHeight-2*ka,x:ka,y:ka+Sa});x.setClipUrl(Z,M,L);ma(Sa,sa,Ka);U.on("wheel",function(){Sa=f.constrain(H._scrollY+d.event.deltaY/ta*Aa,0,Aa);ma(Sa,sa,Ka);0!==Sa&&Sa!==Aa&&d.event.preventDefault()});var db,eb,lb;oa=d.behavior.drag().on("dragstart",function(){var va=d.event.sourceEvent;db="touchstart"===va.type?va.changedTouches[0].clientY:va.clientY;lb=Sa}).on("drag",function(){var va=
d.event.sourceEvent;2===va.buttons||va.ctrlKey||(eb="touchmove"===va.type?va.changedTouches[0].clientY:va.clientY,Sa=f.constrain((eb-db)/Ka+lb,0,Aa),ma(Sa,sa,Ka))});ha.call(oa);oa=d.behavior.drag().on("dragstart",function(){var va=d.event.sourceEvent;"touchstart"===va.type&&(db=va.changedTouches[0].clientY,lb=Sa)}).on("drag",function(){var va=d.event.sourceEvent;"touchmove"===va.type&&(eb=va.changedTouches[0].clientY,Sa=f.constrain((db-eb)/Ka+lb,0,Aa),ma(Sa,sa,Ka))});Z.call(oa)}if(L._context.edits.legendPosition){var ab,
Ya,hb,nb;U.classed("cursor-move",!0);v.init({element:U.node(),gd:L,prepFn:function(){var va=x.getTranslate(U);hb=va.x;nb=va.y},moveFn:function(va,Ba){va=hb+va;Ba=nb+Ba;x.setTranslate(U,va,Ba);ab=v.align(va,0,qa.l,qa.l+qa.w,H.xanchor);Ya=v.align(Ba,0,qa.t+qa.h,qa.t,H.yanchor)},doneFn:function(){void 0!==ab&&void 0!==Ya&&r.call("_guiRelayout",L,{"legend.x":ab,"legend.y":Ya})},clickFn:function(va,Ba){var Ga=N.selectAll("g.traces").filter(function(){var Na=this.getBoundingClientRect();return Ba.clientX>=
Na.left&&Ba.clientX<=Na.right&&Ba.clientY>=Na.top&&Ba.clientY<=Na.bottom});0<Ga.size()&&q(L,U,Ga,va,Ba)}})}}}],L)}}},{"../../constants/alignment":745,"../../lib":778,"../../lib/events":767,"../../lib/svg_text_utils":803,"../../plots/plots":891,"../../registry":911,"../color":643,"../dragelement":662,"../drawing":665,"./constants":694,"./get_legend_data":697,"./handle_click":698,"./helpers":699,"./style":701,d3:169}],697:[function(b,K,G){var q=b("../../registry"),m=b("./helpers");K.exports=function(l,
h){function a(z,y){""!==z&&m.isGrouped(h)?-1===e.indexOf(z)?(e.push(z),n=!0,g[z]=[[y]]):g[z].push([y]):(z="~~i"+c,e.push(z),g[z]=[[y]],c++)}var g={},e=[],n=!1,p={},c=0,d=0,f,k=h._main;for(f=0;f<l.length;f++){var r=l[f];var u=r[0];var v=u.trace,x=v.legendgroup;if(!k||v.visible&&v.showlegend)if(q.traceIs(v,"pie-like"))for(p[x]||(p[x]={}),u=0;u<r.length;u++){var C=r[u].label;p[x][C]||(a(x,{label:C,color:r[u].color,i:r[u].i,trace:v,pts:r[u].pts}),p[x][C]=!0,d=Math.max(d,(C||"").length))}else a(x,u),d=
Math.max(d,(v.name||"").length)}if(!e.length)return[];l=e.length;if(n&&m.isGrouped(h))for(k=Array(l),f=0;f<l;f++)p=g[e[f]],k[f]=m.isReversed(h)?p.reverse():p;else{k=[Array(l)];for(f=0;f<l;f++)p=g[e[f]][0],k[0][m.isReversed(h)?l-f-1:f]=p;l=1}h._lgroupsLength=l;h._maxNameLength=d;return k}},{"../../registry":911,"./helpers":699}],698:[function(b,K,G){var q=b("../../lib"),m=b("../../registry"),l=!0;K.exports=function(h,a,g){function e(A,t,B){var F=u.indexOf(A),I=r[t];I||(I=r[t]=[]);-1===u.indexOf(A)&&
(u.push(A),F=u.length-1);I[F]=B;return F}function n(A,t){var B=A._fullInput;if(m.hasTransform(B,"groupby")){var F=v[B.index];F||(F=m.getTransformIndices(B,"groupby"),F=q.keyedContainer(B,"transforms["+F[F.length-1]+"].styles","target","value.visible"),v[B.index]=F);var I=F.get(A._group);void 0===I&&(I=!0);!1!==I&&F.set(A._group,t);x[B.index]=e(B.index,"visible",!1===B.visible?!1:!0)}else e(B.index,"visible",!1===B.visible?!1:t)}var p=a._fullLayout;if(!a._dragged&&!a._editing){var c=p.legend.itemclick,
d=p.legend.itemdoubleclick;1===g&&"toggle"===c&&"toggleothers"===d&&l&&a.data&&a._context.showTips&&q.notifier(q._(a,"Double-click on legend to isolate one trace"),"long");l=!1;var f;1===g?f=c:2===g&&(f=d);if(f){var k=p.hiddenlabels?p.hiddenlabels.slice():[];h=h.data()[0][0];g=a._fullData;p=h.trace;c=p.legendgroup;var r={},u=[],v=[],x=[];if(m.traceIs(p,"pie-like")){var C=h.label;h=k.indexOf(C);"toggle"===f?-1===h?k.push(C):k.splice(h,1):"toggleothers"===f&&(k=[],a.calcdata[0].forEach(function(A){C!==
A.label&&k.push(A.label)}),a._fullLayout.hiddenlabels&&a._fullLayout.hiddenlabels.length===k.length&&-1===h&&(k=[]));m.call("_guiRelayout",a,"hiddenlabels",k)}else{d=c&&c.length;var z=[];if(d)for(h=0;h<g.length;h++){var y=g[h];y.visible&&y.legendgroup===c&&z.push(h)}if("toggle"===f){switch(p.visible){case !0:var D="legendonly";break;case !1:D=!1;break;case "legendonly":D=!0}if(d)for(h=0;h<g.length;h++)!1!==g[h].visible&&g[h].legendgroup===c&&n(g[h],D);else n(p,D)}else if("toggleothers"===f){z=!0;
for(h=0;h<g.length;h++)if(y=g[h]===p,f=!0!==g[h].showlegend,!(y||f||(y=d&&g[h].legendgroup===c,y||!0!==g[h].visible||m.traceIs(g[h],"notLegendIsolatable")))){z=!1;break}for(h=0;h<g.length;h++)if(!1!==g[h].visible&&!m.traceIs(g[h],"notLegendIsolatable"))switch(p.visible){case "legendonly":n(g[h],!0);break;case !0:D=z?!0:"legendonly",y=g[h]===p,f=!0!==g[h].showlegend&&!g[h].legendgroup,y=y||d&&g[h].legendgroup===c,n(g[h],y||f?!0:D)}}for(h=0;h<v.length;h++)if(f=v[h])for(c=f.constructUpdate(),D=Object.keys(c),
f=0;f<D.length;f++)g=D[f],p=r[g]=r[g]||[],p[x[h]]=c[g];p=Object.keys(r);for(h=0;h<p.length;h++)for(g=p[h],f=0;f<u.length;f++)r[g].hasOwnProperty(f)||(r[g][f]=void 0);m.call("_guiRestyle",a,r,u)}}}}},{"../../lib":778,"../../registry":911}],699:[function(b,K,G){G.isGrouped=function(q){return-1!==(q.traceorder||"").indexOf("grouped")};G.isVertical=function(q){return"h"!==q.orientation};G.isReversed=function(q){return-1!==(q.traceorder||"").indexOf("reversed")}},{}],700:[function(b,K,G){K.exports={moduleType:"component",
name:"legend",layoutAttributes:b("./attributes"),supplyLayoutDefaults:b("./defaults"),draw:b("./draw"),style:b("./style")}},{"./attributes":693,"./defaults":695,"./draw":696,"./style":701}],701:[function(b,K,G){function q(k,r){return(r?"radial":"horizontal")+(k?"":"reversed")}var m=b("d3"),l=b("../../registry"),h=b("../../lib"),a=h.strTranslate,g=b("../drawing"),e=b("../color"),n=b("../colorscale/helpers").extractOpts,p=b("../../traces/scatter/subtypes"),c=b("../../traces/pie/style_one"),d=b("../../traces/pie/helpers").castOption,
f=b("./constants");K.exports=function(k,r,u){function v(t,B,F){var I=t[0].trace,J=I.marker||{},L=J.line||{};I=F?I.visible&&I.type===F:l.traceIs(I,"bar");t=m.select(B).select("g.legendpoints").selectAll("path.legend"+F).data(I?[t]:[]);t.enter().append("path").classed("legend"+F,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",D);t.exit().remove();t.each(function(H){var P=m.select(this);H=H[0];var M=A(H.mlw,J.line,5,2);P.style("stroke-width",M+"px").call(e.fill,H.mc||J.color);M&&e.stroke(P,H.mlc||L.color)})}
function x(t,B,F){var I=t[0],J=I.trace,L=F?J.visible&&J.type===F:l.traceIs(J,F);t=m.select(B).select("g.legendpoints").selectAll("path.legend"+F).data(L?[t]:[]);t.enter().append("path").classed("legend"+F,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",D);t.exit().remove();t.size()&&(F=(J.marker||{}).line,B=A(d(F.width,I.pts),F,5,2),J=h.minExtend(J,{marker:{line:{width:B}}}),J.marker.line.color=F.color,I=h.minExtend(I,{trace:J}),c(t,I,J))}var C=r._fullLayout;u||(u=C.legend);var z="constant"===u.itemsizing,
y=u.itemwidth,D=a((y+2*f.itemGap)/2,0),A=function(t,B,F,I){if(!(t+1))if(B&&0<B.width)t=B.width;else return 0;return z?I:Math.min(t,F)};k.each(function(t){var B=m.select(this);B=h.ensureSingle(B,"g","layers");B.style("opacity",t[0].trace.opacity);var F=u.valign,I=t[0].lineHeight,J=t[0].height;"middle"!==F&&I&&J?B.attr("transform",a(0,.5*{top:1,bottom:-1}[F]*(I-J+3))):B.attr("transform",null);B.selectAll("g.legendfill").data([t]).enter().append("g").classed("legendfill",!0);B.selectAll("g.legendlines").data([t]).enter().append("g").classed("legendlines",
!0);B=B.selectAll("g.legendsymbols").data([t]);B.enter().append("g").classed("legendsymbols",!0);B.selectAll("g.legendpoints").data([t]).enter().append("g").classed("legendpoints",!0)}).each(function(t){var B=t[0].trace;t=[];if(B.visible)switch(B.type){case "histogram2d":case "heatmap":t=[["M-15,-2V4H15V-2Z"]];var F=!0;break;case "choropleth":case "choroplethmapbox":t=[["M-6,-6V6H6V-6Z"]];F=!0;break;case "densitymapbox":t=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]];F="radial";break;case "cone":t=
[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]];F=!1;break;case "streamtube":t=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]];F=!1;break;case "surface":t=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]];F=!0;break;case "mesh3d":t=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]];F=!1;break;case "volume":t=
[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]];F=!0;break;case "isosurface":t=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],F=!1}t=m.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(t);t.enter().append("path").classed("legend3dandfriends",!0).attr("transform",D).style("stroke-miterlimit",1);t.exit().remove();t.each(function(I,J){var L=m.select(this),H=n(B),P=H.colorscale,M=H.reversescale;H=function(T){T.size()&&g.gradient(T,r,"legendfill-"+
B.uid,q(M,"radial"===F),P,"fill")};if(P)F||(N=P.length,N=0===J?P[M?N-1:0][1]:1===J?P[M?0:N-1][1]:P[Math.floor((N-1)/2)][1]);else{var N=B.vertexcolor||B.facecolor||B.color;N=h.isArrayOrTypedArray(N)?N[J]||N[0]:N}L.attr("d",I[0]);N?L.call(e.fill,N):L.call(H)})}).each(function(t){var B=t[0].trace,F="waterfall"===B.type;if(t[0]._distinct&&F)return F=t[0].trace[t[0].dir].marker,t[0].mc=F.color,t[0].mlw=F.line.width,t[0].mlc=F.line.color,v(t,this,"waterfall");var I=[];B.visible&&F&&(I=t[0].hasTotals?[["increasing",
"M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);t=m.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(I);t.enter().append("path").classed("legendwaterfall",!0).attr("transform",D).style("stroke-miterlimit",1);t.exit().remove();t.each(function(J){var L=m.select(this),H=B[J[0]].marker,P=A(void 0,H.line,5,2);L.attr("d",J[1]).style("stroke-width",P+"px").call(e.fill,H.color);P&&L.call(e.stroke,
H.line.color)})}).each(function(t){v(t,this,"funnel")}).each(function(t){v(t,this)}).each(function(t){var B=t[0].trace,F=m.select(this).select("g.legendpoints").selectAll("path.legendbox").data(B.visible&&l.traceIs(B,"box-violin")?[t]:[]);F.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",D);F.exit().remove();F.each(function(){var I=m.select(this);if("all"!==B.boxpoints&&"all"!==B.points||0!==e.opacity(B.fillcolor)||0!==e.opacity((B.line||{}).color)){var J=
A(void 0,B.line,5,2);I.style("stroke-width",J+"px").call(e.fill,B.fillcolor);J&&e.stroke(I,B.line.color)}else I=h.minExtend(B,{marker:{size:z?12:h.constrain(B.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}}),F.call(g.pointStyle,I,r)})}).each(function(t){x(t,this,"funnelarea")}).each(function(t){x(t,this,"pie")}).each(function(t){var B=t[0],F=B.trace,I=F.visible&&F.fill&&"none"!==F.fill,J=p.hasLines(F),L=F.contours,H=!1,P=!1,M=n(F),N=M.colorscale,T=M.reversescale,Q=function(X){X.size()&&
g.gradient(X,r,"legendfill-"+F.uid,q(T),N,"fill")};M=function(X){if(X.size()){var Z="legendline-"+F.uid;g.lineGroupStyle(X);g.gradient(X,r,Z,q(T),N,"stroke")}};if(L){var U=L.coloring;"lines"===U?H=!0:J="none"===U||"heatmap"===U||L.showlines;if("constraint"===L.type)I="="!==L._operation;else if("fill"===U||"heatmap"===U)P=!0}L=p.hasMarkers(F)||p.hasText(F)||!I&&!P?"M5,0":J||H?"M5,-2":"M5,-3";U=m.select(this);t=U.select(".legendfill").selectAll("path").data(I||P?[t]:[]);t.enter().append("path").classed("js-fill",
!0);t.exit().remove();t.attr("d",L+"h"+y+"v6h-"+y+"z").call(I?g.fillGroupStyle:Q);if(J||H){I=A(void 0,F.line,10,5);I=h.minExtend(F,{line:{width:I}});var S=[h.minExtend(B,{trace:I})]}B=U.select(".legendlines").selectAll("path").data(J||H?[S]:[]);B.enter().append("path").classed("js-line",!0);B.exit().remove();B.attr("d",L+(H?"l"+y+",0.0001":"h"+y)).call(J?g.lineGroupStyle:M)}).each(function(t){function B(T,Q,U,S){T=h.nestedProperty(J,T).get();Q=h.isArrayOrTypedArray(T)&&Q?Q(T):T;z&&Q&&void 0!==S&&
(Q=S);if(U){if(Q<U[0])return U[0];if(Q>U[1])return U[1]}return Q}function F(T){return I._distinct&&I.index&&T[I.index]?T[I.index]:T[0]}var I=t[0],J=I.trace;t=p.hasMarkers(J);var L=p.hasText(J),H=p.hasLines(J);if(t||L||H){var P={};var M={};if(t){P.mc=B("marker.color",F);P.mx=B("marker.symbol",F);P.mo=B("marker.opacity",h.mean,[.2,1]);P.mlc=B("marker.line.color",F);P.mlw=B("marker.line.width",h.mean,[0,5],2);M.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var N=B("marker.size",h.mean,[2,16],12);
P.ms=N;M.marker.size=N}H&&(M.line={width:B("line.width",F,[0,10],5)});L&&(P.tx="Aa",P.tp=B("textposition",F),P.ts=10,P.tc=B("textfont.color",F),P.tf=B("textfont.family",F));P=[h.minExtend(I,P)];M=h.minExtend(J,M);M.selectedpoints=null;M.texttemplate=null}H=m.select(this).select("g.legendpoints");N=H.selectAll("path.scatterpts").data(t?P:[]);N.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",D);N.exit().remove();N.call(g.pointStyle,M,r);t&&(P[0].mrc=3);t=H.selectAll("g.pointtext").data(L?
P:[]);t.enter().append("g").classed("pointtext",!0).append("text").attr("transform",D);t.exit().remove();t.selectAll("text").call(g.textPointStyle,M,r)}).each(function(t){var B=t[0].trace;t=m.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(B.visible&&"candlestick"===B.type?[t,t]:[]);t.enter().append("path").classed("legendcandle",!0).attr("d",function(F,I){return I?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",D).style("stroke-miterlimit",1);t.exit().remove();
t.each(function(F,I){F=m.select(this);I=B[I?"increasing":"decreasing"];var J=A(void 0,I.line,5,2);F.style("stroke-width",J+"px").call(e.fill,I.fillcolor);J&&e.stroke(F,I.line.color)})}).each(function(t){var B=t[0].trace;t=m.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(B.visible&&"ohlc"===B.type?[t,t]:[]);t.enter().append("path").classed("legendohlc",!0).attr("d",function(F,I){return I?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",D).style("stroke-miterlimit",1);
t.exit().remove();t.each(function(F,I){F=m.select(this);I=B[I?"increasing":"decreasing"];var J=A(void 0,I.line,5,2);F.style("fill","none").call(g.dashLine,I.line.dash,J);J&&e.stroke(F,I.line.color)})})}},{"../../lib":778,"../../registry":911,"../../traces/pie/helpers":1166,"../../traces/pie/style_one":1172,"../../traces/scatter/subtypes":1212,"../color":643,"../colorscale/helpers":654,"../drawing":665,"./constants":694,d3:169}],702:[function(b,K,G){function q(v,x){var C=x.currentTarget,z=C.getAttribute("data-attr");
x=C.getAttribute("data-val")||!0;var y=v._fullLayout,D={},A=f.list(v,null,!0),t=y._cartesianSpikesEnabled,B;if("zoom"===z){z="in"===x?.5:2;C=(1+z)/2;var F=(1-z)/2;for(B=0;B<A.length;B++)if(z=A[B],!z.fixedrange){var I=z._name;if("auto"===x)D[I+".autorange"]=!0;else if("reset"===x){if(void 0===z._rangeInitial)D[I+".autorange"]=!0;else{var J=z._rangeInitial.slice();D[I+".range[0]"]=J[0];D[I+".range[1]"]=J[1]}void 0!==z._showSpikeInitial&&(D[I+".showspikes"]=z._showSpikeInitial,"on"!==t||z._showSpikeInitial||
(t="off"))}else J=[z.r2l(z.range[0]),z.r2l(z.range[1])],J=[C*J[0]+F*J[1],C*J[1]+F*J[0]],D[I+".range[0]"]=z.l2r(J[0]),D[I+".range[1]"]=z.l2r(J[1])}}else"hovermode"!==z||"x"!==x&&"y"!==x||(x=y._isHoriz?"y":"x",C.setAttribute("data-val",x)),D[z]=x;y._cartesianSpikesEnabled=t;c.call("_guiRelayout",v,D)}function m(v,x){x=x.currentTarget;var C=x.getAttribute("data-attr");x=x.getAttribute("data-val")||!0;var z=v._fullLayout._subplots.gl3d||[],y={};C=C.split(".");for(var D=0;D<z.length;D++)y[z[D]+"."+C[1]]=
x;y.dragmode="pan"===x?x:"zoom";c.call("_guiRelayout",v,y)}function l(v,x){var C=x.currentTarget.getAttribute("data-attr");x="resetLastSave"===C;C="resetDefault"===C;for(var z=v._fullLayout,y=z._subplots.gl3d||[],D={},A=0;A<y.length;A++){var t=y[A],B=t+".camera",F=t+".aspectratio",I=t+".aspectmode";t=z[t]._scene;if(x){D[B+".up"]=t.viewInitial.up;D[B+".eye"]=t.viewInitial.eye;D[B+".center"]=t.viewInitial.center;var J=!0}else C&&(D[B+".up"]=null,D[B+".eye"]=null,D[B+".center"]=null,J=!0);J&&(D[F+".x"]=
t.viewInitial.aspectratio.x,D[F+".y"]=t.viewInitial.aspectratio.y,D[F+".z"]=t.viewInitial.aspectratio.z,D[I]=t.viewInitial.aspectmode)}c.call("_guiRelayout",v,D)}function h(v,x){x=x.currentTarget;var C=x._previousVal;v=v._fullLayout;var z=v._subplots.gl3d||[],y=["xaxis","yaxis","zaxis"],D={},A={};if(C)A=C,x._previousVal=null;else{for(C=0;C<z.length;C++){var t=z[C],B=v[t],F=t+".hovermode";D[F]=B.hovermode;A[F]=!1;for(F=0;3>F;F++){var I=y[F],J=t+"."+I+".showspikes";A[J]=!1;D[J]=B[I].showspikes}}x._previousVal=
D}return A}function a(v,x){var C=x.currentTarget;x=C.getAttribute("data-attr");C=C.getAttribute("data-val")||!0;for(var z=v._fullLayout,y=z._subplots.geo||[],D=0;D<y.length;D++){var A=y[D],t=z[A];"zoom"===x&&(t=t.projection.scale,c.call("_guiRelayout",v,A+".projection.scale","in"===C?2*t:.5*t))}"reset"===x&&p(v,"geo")}function g(v){v=v._fullLayout;return v.hovermode?!1:v._has("cartesian")?v._isHoriz?"y":"x":"closest"}function e(v){var x=g(v);c.call("_guiRelayout",v,"hovermode",x)}function n(v,x){x=
x.currentTarget.getAttribute("data-val");for(var C=v._fullLayout,z=C._subplots.mapbox||[],y={},D=0;D<z.length;D++){var A=z[D],t=C[A].zoom;y[A+".zoom"]="in"===x?1.05*t:t/1.05}c.call("_guiRelayout",v,y)}function p(v,x){var C=v._fullLayout;x=C._subplots[x]||[];for(var z={},y=0;y<x.length;y++)for(var D=x[y],A=C[D]._subplot.viewInitial,t=Object.keys(A),B=0;B<t.length;B++){var F=t[B];z[D+"."+F]=A[F]}c.call("_guiRelayout",v,z)}var c=b("../../registry"),d=b("../../plots/plots"),f=b("../../plots/cartesian/axis_ids");
G=b("../../fonts/ploticon");var k=b("../shapes/draw").eraseActiveShape,r=b("../../lib"),u=r._;b=K.exports={};b.toImage={name:"toImage",title:function(v){return"png"===((v._context.toImageButtonOptions||{}).format||"png")?u(v,"Download plot as a png"):u(v,"Download plot")},icon:G.camera,click:function(v){var x=v._context.toImageButtonOptions,C={format:x.format||"png"};r.notifier(u(v,"Taking snapshot - this may take a few seconds"),"long");"svg"!==C.format&&r.isIE()&&(r.notifier(u(v,"IE only supports svg.  Changing format to svg."),
"long"),C.format="svg");["filename","width","height","scale"].forEach(function(z){z in x&&(C[z]=x[z])});c.call("downloadImage",v,C).then(function(z){r.notifier(u(v,"Snapshot succeeded")+" - "+z,"long")}).catch(function(){r.notifier(u(v,"Sorry, there was a problem downloading your snapshot!"),"long")})}};b.sendDataToCloud={name:"sendDataToCloud",title:function(v){return u(v,"Edit in Chart Studio")},icon:G.disk,click:function(v){d.sendDataToCloud(v)}};b.editInChartStudio={name:"editInChartStudio",title:function(v){return u(v,
"Edit in Chart Studio")},icon:G.pencil,click:function(v){d.sendDataToCloud(v)}};b.zoom2d={name:"zoom2d",title:function(v){return u(v,"Zoom")},attr:"dragmode",val:"zoom",icon:G.zoombox,click:q};b.pan2d={name:"pan2d",title:function(v){return u(v,"Pan")},attr:"dragmode",val:"pan",icon:G.pan,click:q};b.select2d={name:"select2d",title:function(v){return u(v,"Box Select")},attr:"dragmode",val:"select",icon:G.selectbox,click:q};b.lasso2d={name:"lasso2d",title:function(v){return u(v,"Lasso Select")},attr:"dragmode",
val:"lasso",icon:G.lasso,click:q};b.drawclosedpath={name:"drawclosedpath",title:function(v){return u(v,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:G.drawclosedpath,click:q};b.drawopenpath={name:"drawopenpath",title:function(v){return u(v,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:G.drawopenpath,click:q};b.drawline={name:"drawline",title:function(v){return u(v,"Draw line")},attr:"dragmode",val:"drawline",icon:G.drawline,click:q};b.drawrect={name:"drawrect",
title:function(v){return u(v,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:G.drawrect,click:q};b.drawcircle={name:"drawcircle",title:function(v){return u(v,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:G.drawcircle,click:q};b.eraseshape={name:"eraseshape",title:function(v){return u(v,"Erase active shape")},icon:G.eraseshape,click:k};b.zoomIn2d={name:"zoomIn2d",title:function(v){return u(v,"Zoom in")},attr:"zoom",val:"in",icon:G.zoom_plus,click:q};b.zoomOut2d={name:"zoomOut2d",title:function(v){return u(v,
"Zoom out")},attr:"zoom",val:"out",icon:G.zoom_minus,click:q};b.autoScale2d={name:"autoScale2d",title:function(v){return u(v,"Autoscale")},attr:"zoom",val:"auto",icon:G.autoscale,click:q};b.resetScale2d={name:"resetScale2d",title:function(v){return u(v,"Reset axes")},attr:"zoom",val:"reset",icon:G.home,click:q};b.hoverClosestCartesian={name:"hoverClosestCartesian",title:function(v){return u(v,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:G.tooltip_basic,gravity:"ne",click:q};
b.hoverCompareCartesian={name:"hoverCompareCartesian",title:function(v){return u(v,"Compare data on hover")},attr:"hovermode",val:function(v){return v._fullLayout._isHoriz?"y":"x"},icon:G.tooltip_compare,gravity:"ne",click:q};b.zoom3d={name:"zoom3d",title:function(v){return u(v,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:G.zoombox,click:m};b.pan3d={name:"pan3d",title:function(v){return u(v,"Pan")},attr:"scene.dragmode",val:"pan",icon:G.pan,click:m};b.orbitRotation={name:"orbitRotation",title:function(v){return u(v,
"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:G["3d_rotate"],click:m};b.tableRotation={name:"tableRotation",title:function(v){return u(v,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:G["z-axis"],click:m};b.resetCameraDefault3d={name:"resetCameraDefault3d",title:function(v){return u(v,"Reset camera to default")},attr:"resetDefault",icon:G.home,click:l};b.resetCameraLastSave3d={name:"resetCameraLastSave3d",title:function(v){return u(v,"Reset camera to last save")},
attr:"resetLastSave",icon:G.movie,click:l};b.hoverClosest3d={name:"hoverClosest3d",title:function(v){return u(v,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:G.tooltip_basic,gravity:"ne",click:function(v,x){x=h(v,x);c.call("_guiRelayout",v,x)}};b.zoomInGeo={name:"zoomInGeo",title:function(v){return u(v,"Zoom in")},attr:"zoom",val:"in",icon:G.zoom_plus,click:a};b.zoomOutGeo={name:"zoomOutGeo",title:function(v){return u(v,"Zoom out")},attr:"zoom",val:"out",icon:G.zoom_minus,
click:a};b.resetGeo={name:"resetGeo",title:function(v){return u(v,"Reset")},attr:"reset",val:null,icon:G.autoscale,click:a};b.hoverClosestGeo={name:"hoverClosestGeo",title:function(v){return u(v,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:G.tooltip_basic,gravity:"ne",click:e};b.hoverClosestGl2d={name:"hoverClosestGl2d",title:function(v){return u(v,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:G.tooltip_basic,gravity:"ne",click:e};
b.hoverClosestPie={name:"hoverClosestPie",title:function(v){return u(v,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:G.tooltip_basic,gravity:"ne",click:e};b.resetViewSankey={name:"resetSankeyGroup",title:function(v){return u(v,"Reset view")},icon:G.home,click:function(v){for(var x={"node.groups":[],"node.x":[],"node.y":[]},C=0;C<v._fullData.length;C++){var z=v._fullData[C]._viewInitial;x["node.groups"].push(z.node.groups.slice());x["node.x"].push(z.node.x.slice());x["node.y"].push(z.node.y.slice())}c.call("restyle",
v,x)}};b.toggleHover={name:"toggleHover",title:function(v){return u(v,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:G.tooltip_basic,gravity:"ne",click:function(v,x){x=h(v,x);x.hovermode=g(v);c.call("_guiRelayout",v,x)}};b.resetViews={name:"resetViews",title:function(v){return u(v,"Reset views")},icon:G.home,click:function(v,x){var C=x.currentTarget;C.setAttribute("data-attr","zoom");C.setAttribute("data-val","reset");q(v,x);C.setAttribute("data-attr","resetLastSave");
l(v,x);p(v,"geo");p(v,"mapbox")}};b.toggleSpikelines={name:"toggleSpikelines",title:function(v){return u(v,"Toggle Spike Lines")},icon:G.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(v){var x=v._fullLayout;x._cartesianSpikesEnabled="on"===x._cartesianSpikesEnabled?"off":"on";x=c;for(var C=x.call,z="on"===v._fullLayout._cartesianSpikesEnabled,y=f.list(v,null,!0),D={},A=0;A<y.length;A++){var t=y[A];D[t._name+".showspikes"]=z?!0:t._showSpikeInitial}C.call(x,"_guiRelayout",v,D)}};b.resetViewMapbox=
{name:"resetViewMapbox",title:function(v){return u(v,"Reset view")},attr:"reset",icon:G.home,click:function(v){p(v,"mapbox")}};b.zoomInMapbox={name:"zoomInMapbox",title:function(v){return u(v,"Zoom in")},attr:"zoom",val:"in",icon:G.zoom_plus,click:n};b.zoomOutMapbox={name:"zoomOutMapbox",title:function(v){return u(v,"Zoom out")},attr:"zoom",val:"out",icon:G.zoom_minus,click:n}},{"../../fonts/ploticon":757,"../../lib":778,"../../plots/cartesian/axis_ids":831,"../../plots/plots":891,"../../registry":911,
"../shapes/draw":724}],703:[function(b,K,G){G.manage=b("./manage")},{"./manage":704}],704:[function(b,K,G){function q(k){function r(U){if(U.length){for(var S=[],X=0;X<U.length;X++){var Z=U[X];-1===C.indexOf(Z)&&S.push(d[Z])}M.push(S)}}var u=k._fullLayout,v=k._fullData,x=k._context,C=x.modeBarButtonsToRemove;k=x.modeBarButtonsToAdd;var z=u._has("cartesian"),y=u._has("gl3d"),D=u._has("geo"),A=u._has("pie"),t=u._has("funnelarea"),B=u._has("gl2d"),F=u._has("ternary"),I=u._has("mapbox"),J=u._has("polar"),
L=u._has("sankey"),H=m(u),P=p(u.hovermode),M=[],N=["toImage"];x.showEditInChartStudio?N.push("editInChartStudio"):x.showSendToCloud&&N.push("sendDataToCloud");r(N);x=[];N=[];var T=[],Q=[];1<(z||B||A||t||F)+D+y+I+J?(N=["toggleHover"],T=["resetViews"]):D?(x=["zoomInGeo","zoomOutGeo"],N=["hoverClosestGeo"],T=["resetGeo"]):y?(N=["hoverClosest3d"],T=["resetCameraDefault3d","resetCameraLastSave3d"]):I?(x=["zoomInMapbox","zoomOutMapbox"],N=["toggleHover"],T=["resetViewMapbox"]):B?N=["hoverClosestGl2d"]:
A?N=["hoverClosestPie"]:L?(N=["hoverClosestCartesian","hoverCompareCartesian"],T=["resetViewSankey"]):N=["toggleHover"];z&&(N=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]);if(h(v)||P)N=[];!z&&!B||H||(x=["zoomIn2d","zoomOut2d","autoScale2d"],"resetViews"!==T[0]&&(T=["resetScale2d"]));y?Q=["zoom3d","pan3d","orbitRotation","tableRotation"]:(z||B)&&!H||F?Q=["zoom2d","pan2d"]:I||D?Q=["pan2d"]:J&&(Q=["zoom2d"]);l(v)&&Q.push("select2d","lasso2d");if(Array.isArray(k)){v=[];for(z=0;z<
k.length;z++)y=k[z],"string"===typeof y?-1!==f.indexOf(y)&&(u._has("mapbox")||u._has("cartesian"))&&Q.push(y):v.push(y);k=v}r(Q);r(x.concat(T));r(N);return a(M,k)}function m(k){k=g.list({_fullLayout:k},null,!0);for(var r=0;r<k.length;r++)if(!k[r].fixedrange)return!1;return!0}function l(k){for(var r=!1,u=0;u<k.length&&!r;u++){var v=k[u];if(v._module&&v._module.selectPoints)if(n.traceIs(v,"scatter-like")){if(e.hasMarkers(v)||e.hasText(v))r=!0}else if(n.traceIs(v,"box-violin")){if("all"===v.boxpoints||
"all"===v.points)r=!0}else r=!0}return r}function h(k){for(var r=0;r<k.length;r++)if(!n.traceIs(k[r],"noHover"))return!1;return!0}function a(k,r){if(r.length)if(Array.isArray(r[0]))for(var u=0;u<r.length;u++)k.push(r[u]);else k.push(r);return k}var g=b("../../plots/cartesian/axis_ids"),e=b("../../traces/scatter/subtypes"),n=b("../../registry"),p=b("../fx/helpers").isUnifiedHover,c=b("./modebar"),d=b("./buttons");K.exports=function(k){var r=k._fullLayout,u=k._context,v=r._modeBar;if(u.displayModeBar||
u.watermark){if(!Array.isArray(u.modeBarButtonsToRemove))throw Error("*modeBarButtonsToRemove* configuration options must be an array.");if(!Array.isArray(u.modeBarButtonsToAdd))throw Error("*modeBarButtonsToAdd* configuration options must be an array.");var x=u.modeBarButtons;if(Array.isArray(x)&&x.length)for(u=0;u<x.length;u++)for(var C=x[u],z=0;z<C.length;z++){var y=C[z];if("string"===typeof y)if(void 0!==d[y])x[u][z]=d[y];else throw Error("*modeBarButtons* configuration options invalid button name");
}else x=!u.displayModeBar&&u.watermark?[]:q(k);v?v.update(k,x):r._modeBar=c(k,x)}else v&&(v.destroy(),delete r._modeBar)};var f="drawline drawopenpath drawclosedpath drawcircle drawrect eraseshape".split(" ")},{"../../plots/cartesian/axis_ids":831,"../../registry":911,"../../traces/scatter/subtypes":1212,"../fx/helpers":679,"./buttons":702,"./modebar":705}],705:[function(b,K,G){function q(e){this.container=e.container;this.element=document.createElement("div");this.update(e.graphInfo,e.buttons);this.container.appendChild(this.element)}
var m=b("d3"),l=b("fast-isnumeric"),h=b("../../lib"),a=b("../../fonts/ploticon"),g=new DOMParser;b=q.prototype;b.update=function(e,n){this.graphInfo=e;e=this.graphInfo._context;var p=this.graphInfo._fullLayout,c="modebar-"+p._uid;this.element.setAttribute("id",c);this._uid=c;this.element.className="modebar";"hover"===e.displayModeBar&&(this.element.className+=" modebar--hover ease-bg");"v"===p.modebar.orientation&&(this.element.className+=" vertical",n=n.reverse());var d=p.modebar,f="hover"===e.displayModeBar?
".js-plotly-plot .plotly:hover ":"";h.deleteRelatedStyleRule(c);h.addRelatedStyleRule(c,f+"#"+c+" .modebar-group","background-color: "+d.bgcolor);h.addRelatedStyleRule(c,"#"+c+" .modebar-btn .icon path","fill: "+d.color);h.addRelatedStyleRule(c,"#"+c+" .modebar-btn:hover .icon path","fill: "+d.activecolor);h.addRelatedStyleRule(c,"#"+c+" .modebar-btn.active .icon path","fill: "+d.activecolor);c=!this.hasButtons(n);d=this.hasLogo!==e.displaylogo;f=this.locale!==e.locale;this.locale=e.locale;if(c||
d||f)if(this.removeAllButtons(),this.updateButtons(n),e.watermark||e.displaylogo)n=this.getLogo(),e.watermark&&(n.className+=" watermark"),"v"===p.modebar.orientation?this.element.insertBefore(n,this.element.childNodes[0]):this.element.appendChild(n),this.hasLogo=!0;this.updateActiveButton()};b.updateButtons=function(e){var n=this;this.buttons=e;this.buttonElements=[];this.buttonsNames=[];this.buttons.forEach(function(p){var c=n.createGroup();p.forEach(function(d){var f=d.name;if(!f)throw Error("must provide button 'name' in button config");
if(-1!==n.buttonsNames.indexOf(f))throw Error("button name '"+f+"' is taken");n.buttonsNames.push(f);d=n.createButton(d);n.buttonElements.push(d);c.appendChild(d)});n.element.appendChild(c)})};b.createGroup=function(){var e=document.createElement("div");e.className="modebar-group";return e};b.createButton=function(e){var n=this,p=document.createElement("a");p.setAttribute("rel","tooltip");p.className="modebar-btn";var c=e.title;void 0===c?c=e.name:"function"===typeof c&&(c=c(this.graphInfo));(c||
0===c)&&p.setAttribute("data-title",c);void 0!==e.attr&&p.setAttribute("data-attr",e.attr);c=e.val;void 0!==c&&("function"===typeof c&&(c=c(this.graphInfo)),p.setAttribute("data-val",c));if("function"!==typeof e.click)throw Error("must provide button 'click' function in button config");p.addEventListener("click",function(d){e.click(n.graphInfo,d);n.updateActiveButton(d.currentTarget)});p.setAttribute("data-toggle",e.toggle||!1);e.toggle&&m.select(p).classed("active",!0);c=e.icon;"function"===typeof c?
p.appendChild(c()):p.appendChild(this.createIcon(c||a.question));p.setAttribute("data-gravity",e.gravity||"n");return p};b.createIcon=function(e){var n=l(e.height)?Number(e.height):e.ascent-e.descent;if(e.path){var p=document.createElementNS("http://www.w3.org/2000/svg","svg");p.setAttribute("viewBox",[0,0,e.width,n].join(" "));p.setAttribute("class","icon");n=document.createElementNS("http://www.w3.org/2000/svg","path");n.setAttribute("d",e.path);e.transform?n.setAttribute("transform",e.transform):
void 0!==e.ascent&&n.setAttribute("transform","matrix(1 0 0 -1 0 "+e.ascent+")");p.appendChild(n)}e.svg&&(p=g.parseFromString(e.svg,"application/xml").childNodes[0]);p.setAttribute("height","1em");p.setAttribute("width","1em");return p};b.updateActiveButton=function(e){var n=this.graphInfo._fullLayout,p=void 0!==e?e.getAttribute("data-attr"):null;this.buttonElements.forEach(function(c){var d=c.getAttribute("data-val")||!0,f=c.getAttribute("data-attr"),k="true"===c.getAttribute("data-toggle");c=m.select(c);
k?f===p&&c.classed("active",!c.classed("active")):(f=null===f?f:h.nestedProperty(n,f).get(),c.classed("active",f===d))})};b.hasButtons=function(e){var n=this.buttons;if(!n||e.length!==n.length)return!1;for(var p=0;p<e.length;++p){if(e[p].length!==n[p].length)return!1;for(var c=0;c<e[p].length;c++)if(e[p][c].name!==n[p][c].name)return!1}return!0};b.getLogo=function(){var e=this.createGroup(),n=document.createElement("a");n.href="https://plotly.com/";n.target="_blank";n.setAttribute("data-title",h._(this.graphInfo,
"Produced with Plotly"));n.className="modebar-btn plotlyjsicon modebar-btn--logo";n.appendChild(this.createIcon(a.newplotlylogo));e.appendChild(n);return e};b.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1};b.destroy=function(){h.removeElement(this.container.querySelector(".modebar"));h.deleteRelatedStyleRule(this._uid)};K.exports=function(e,n){var p=e._fullLayout;e=new q({graphInfo:e,container:p._modebardiv.node(),buttons:n});
p._privateplot&&m.select(e.element).append("span").classed("badge-private float--left",!0).text("PRIVATE");return e}},{"../../fonts/ploticon":757,"../../lib":778,d3:169,"fast-isnumeric":241}],706:[function(b,K,G){G=b("../../plots/font_attributes");var q=b("../color/attributes");b=b("../../plot_api/plot_template").templatedArray;b=b("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:"month year day hour minute second all".split(" "),dflt:"month",editType:"plot"},
stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});K.exports={visible:{valType:"boolean",editType:"plot"},buttons:b,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto",
"top","middle","bottom"],dflt:"bottom",editType:"plot"},font:G({editType:"plot"}),bgcolor:{valType:"color",dflt:q.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:q.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":817,"../../plots/font_attributes":856,"../color/attributes":642}],707:[function(b,K,G){K.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,
darkAmount:10}},{}],708:[function(b,K,G){function q(p,c,d,f){function k(r,u){return l.coerce(p,c,e.buttons,r,u)}d=f.calendar;k("visible")&&(f=k("step"),"all"!==f&&(!d||"gregorian"===d||"month"!==f&&"year"!==f?k("stepmode"):c.stepmode="backward",k("count")),k("label"))}function m(p,c,d){d=d.filter(function(u){return c[u].anchor===p._id});for(var f=0,k=0;k<d.length;k++){var r=c[d[k]].domain;r&&(f=Math.max(r[1],f))}return[p.domain[0],f+n.yPad]}var l=b("../../lib"),h=b("../color"),a=b("../../plot_api/plot_template"),
g=b("../../plots/array_container_defaults"),e=b("./attributes"),n=b("./constants");K.exports=function(p,c,d,f,k){function r(x,C){return l.coerce(u,v,e,x,C)}var u=p.rangeselector||{},v=a.newContainer(c,"rangeselector");k=g(u,v,{name:"buttons",handleItemDefaults:q,calendar:k});r("visible",0<k.length)&&(f=m(c,d,f),r("x",f[0]),r("y",f[1]),l.noneOrAll(p,c,["x","y"]),r("xanchor"),r("yanchor"),l.coerceFont(r,"font",d.font),p=r("bgcolor"),r("activecolor",h.contrast(p,n.lightAmount,n.darkAmount)),r("bordercolor"),
r("borderwidth"))}},{"../../lib":778,"../../plot_api/plot_template":817,"../../plots/array_container_defaults":823,"../color":643,"./attributes":706,"./constants":707}],709:[function(b,K,G){function q(A){A=v.list(A,"x",!0);for(var t=[],B=0;B<A.length;B++){var F=A[B];F.rangeselector&&F.rangeselector.visible&&t.push(F)}return t}function m(A){return A._id}function l(A,t,B){if("all"===t.step)return!0===A.autorange;t=Object.keys(B);return A.range[0]===B[t[0]]&&A.range[1]===B[t[1]]}function h(A,t,B){A=
k.ensureSingle(A,"rect","selector-rect",function(F){F.attr("shape-rendering","crispEdges")});A.attr({rx:y.rx,ry:y.ry});A.call(d.stroke,t.bordercolor).call(d.fill,B._isActive||B._isHovered?t.activecolor:t.bgcolor).style("stroke-width",t.borderwidth+"px")}function a(A,t,B,F){k.ensureSingle(A,"text","selector-text",function(I){I.attr("text-anchor","middle")}).call(f.font,t.font).text(g(B,F._fullLayout._meta)).call(function(I){u.convertToTspans(I,F)})}function g(A,t){return A.label?t?k.templateString(A.label,
t):A.label:"all"===A.step?"all":A.count+A.step.charAt(0)}function e(A,t,B,F,I){var J=0,L=0,H=B.borderwidth;t.each(function(){var T=n.select(this).select(".selector-text");T=Math.max(B.font.size*x*u.lineCount(T),16)+3;L=Math.max(L,T)});t.each(function(){var T=n.select(this),Q=T.select(".selector-rect"),U=T.select(".selector-text"),S=U.node()&&f.bBox(U.node()).width,X=B.font.size*x,Z=u.lineCount(U);S=Math.max(S+10,y.minButtonWidth);T.attr("transform",r(H+J,H));Q.attr({x:0,y:0,width:S,height:L});u.positionText(U,
S/2,L/2-(Z-1)*X/2+3);J+=S+5});var P=A._fullLayout._size;t=P.l+P.w*B.x;P=P.t+P.h*(1-B.y);var M="left";k.isRightAnchor(B)&&(t-=J,M="right");k.isCenterAnchor(B)&&(t-=J/2,M="center");var N="top";k.isBottomAnchor(B)&&(P-=L,N="bottom");k.isMiddleAnchor(B)&&(P-=L/2,N="middle");J=Math.ceil(J);L=Math.ceil(L);t=Math.round(t);P=Math.round(P);c.autoMargin(A,F+"-range-selector",{x:B.x,y:B.y,l:J*C[M],r:J*z[M],b:L*z[N],t:L*C[N]});I.attr("transform",r(t,P))}var n=b("d3"),p=b("../../registry"),c=b("../../plots/plots"),
d=b("../color"),f=b("../drawing"),k=b("../../lib"),r=k.strTranslate,u=b("../../lib/svg_text_utils"),v=b("../../plots/cartesian/axis_ids");G=b("../../constants/alignment");var x=G.LINE_SPACING,C=G.FROM_TL,z=G.FROM_BR,y=b("./constants"),D=b("./get_update_object");K.exports=function(A){var t=A._fullLayout._infolayer.selectAll(".rangeselector").data(q(A),m);t.enter().append("g").classed("rangeselector",!0);t.exit().remove();t.style({cursor:"pointer","pointer-events":"all"});t.each(function(B){var F=n.select(this),
I=B.rangeselector,J=F.selectAll("g.button").data(k.filterVisible(I.buttons));J.enter().append("g").classed("button",!0);J.exit().remove();J.each(function(L){var H=n.select(this),P=D(B,L);L._isActive=l(B,L,P);H.call(h,I,L);H.call(a,I,L,A);H.on("click",function(){A._dragged||p.call("_guiRelayout",A,P)});H.on("mouseover",function(){L._isHovered=!0;H.call(h,I,L)});H.on("mouseout",function(){L._isHovered=!1;H.call(h,I,L)})});e(A,J,I,B._name,F)})}},{"../../constants/alignment":745,"../../lib":778,"../../lib/svg_text_utils":803,
"../../plots/cartesian/axis_ids":831,"../../plots/plots":891,"../../registry":911,"../color":643,"../drawing":665,"./constants":707,"./get_update_object":710,d3:169}],710:[function(b,K,G){var q=b("d3");K.exports=function(m,l){var h=m._name,a={};if("all"===l.step)a[h+".autorange"]=!0;else{var g=m.range,e=new Date(m.r2l(g[1])),n=l.step,p=l.count;switch(l.stepmode){case "backward":var c=m.l2r(+q.time[n].utc.offset(e,-p));break;case "todate":l=q.time[n].utc.offset(e,-p),c=m.l2r(+q.time[n].utc.ceil(l))}m=
[c,g[1]];a[h+".range[0]"]=m[0];a[h+".range[1]"]=m[1]}return a}},{d3:169}],711:[function(b,K,G){K.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:b("./attributes")}}},layoutAttributes:b("./attributes"),handleDefaults:b("./defaults"),draw:b("./draw")}},{"./attributes":706,"./defaults":708,"./draw":709}],712:[function(b,K,G){b=b("../color/attributes");K.exports={bgcolor:{valType:"color",dflt:b.background,editType:"plot"},bordercolor:{valType:"color",dflt:b.defaultLine,
editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},
editType:"calc"}},{"../color/attributes":642}],713:[function(b,K,G){var q=b("../../plots/cartesian/axis_ids").list,m=b("../../plots/cartesian/autorange").getAutoRange,l=b("./constants");K.exports=function(h){for(var a=q(h,"x",!0),g=0;g<a.length;g++){var e=a[g],n=e[l.name];n&&n.visible&&n.autorange&&(n._input.autorange=!0,n._input.range=n.range=m(h,e))}}},{"../../plots/cartesian/autorange":827,"../../plots/cartesian/axis_ids":831,"./constants":714}],714:[function(b,K,G){K.exports={name:"rangeslider",
containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",
maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],715:[function(b,K,G){var q=b("../../lib"),m=b("../../plot_api/plot_template"),l=b("../../plots/cartesian/axis_ids"),h=b("./attributes"),
a=b("./oppaxis_attributes");K.exports=function(g,e,n){function p(C,z){return q.coerce(f,k,h,C,z)}function c(C,z){return q.coerce(u,v,a,C,z)}g=g[n];var d=e[n];if(g.rangeslider||e._requestRangeslider[d._id]){q.isPlainObject(g.rangeslider)||(g.rangeslider={});var f=g.rangeslider,k=m.newContainer(d,"rangeslider");if(p("visible")){p("bgcolor",e.plot_bgcolor);p("bordercolor");p("borderwidth");p("thickness");p("autorange",!d.isValidRange(f.range));p("range");if(g=e._subplots)for(g=g.cartesian.filter(function(C){return C.substr(0,
C.indexOf("y"))===l.name2id(n)}).map(function(C){return C.substr(C.indexOf("y"),C.length)}),g=q.simpleMap(g,l.id2name),d=0;d<g.length;d++){var r=g[d];var u=f[r]||{};var v=m.newContainer(k,r,"yaxis");r=e[r];var x;u.range&&r.isValidRange(u.range)&&(x="fixed");"match"!==c("rangemode",x)&&c("range",r.range.slice())}k._input=f}}}},{"../../lib":778,"../../plot_api/plot_template":817,"../../plots/cartesian/axis_ids":831,"./attributes":712,"./oppaxis_attributes":719}],716:[function(b,K,G){function q(t,B,
F,I){function J(){function M(fa){var ha=+(fa.clientX||fa.touches[0].clientX)-U;switch(Q){case L:var ja="ew-resize";fa=X+ha;ha=Z+ha;break;case H:ja="col-resize";fa=X+ha;ha=Z;break;case P:ja="col-resize";fa=X;ha=Z+ha;break;default:ja="ew-resize",fa=S,ha=S+ha}if(ha<fa){var ba=ha;ha=fa;fa=ba}I._pixelMin=fa;I._pixelMax=ha;D(c.select(aa),ja);m(t,B,F,I)}function N(){aa.removeEventListener("mousemove",M);aa.removeEventListener("mouseup",N);this.removeEventListener("touchmove",M);this.removeEventListener("touchend",
N);k.removeElement(aa)}var T=c.event,Q=T.target,U=T.clientX||T.touches[0].clientX,S=U-t.node().getBoundingClientRect().left,X=I.d2p(F._rl[0]),Z=I.d2p(F._rl[1]),aa=y.coverSlip();this.addEventListener("touchmove",M);this.addEventListener("touchend",N);aa.addEventListener("mousemove",M);aa.addEventListener("mouseup",N)}if(!B._context.staticPlot){var L=t.select("rect."+A.slideBoxClassName).node(),H=t.select("rect."+A.grabAreaMinClassName).node(),P=t.select("rect."+A.grabAreaMaxClassName).node();t.on("mousedown",
J);t.on("touchstart",J)}}function m(t,B,F,I){var J=F.l2r(k.constrain(I.p2d(I._pixelMin),I._rl[0],I._rl[1])),L=F.l2r(k.constrain(I.p2d(I._pixelMax),I._rl[0],I._rl[1]));window.requestAnimationFrame(function(){d.call("_guiRelayout",B,F._name+".range",[J,L])})}function l(t,B,F,I,J,L){B=A.handleWidth/2;var H=k.constrain(I.d2p(F._rl[0]),0,I._width);F=k.constrain(I.d2p(F._rl[1]),0,I._width);t.select("rect."+A.slideBoxClassName).attr("x",H).attr("width",F-H);t.select("rect."+A.maskMinClassName).attr("width",
H);t.select("rect."+A.maskMaxClassName).attr("x",F).attr("width",I._width-F);"match"!==L.rangemode&&(L=I._height-k.constrain(I.d2pOppAxis(J._rl[1]),0,I._height),J=I._height-k.constrain(I.d2pOppAxis(J._rl[0]),0,I._height),t.select("rect."+A.maskMinOppAxisClassName).attr("x",H).attr("height",L).attr("width",F-H),t.select("rect."+A.maskMaxOppAxisClassName).attr("x",H).attr("y",J).attr("height",I._height-J).attr("width",F-H),t.select("rect."+A.slideBoxClassName).attr("y",L).attr("height",J-L));J=Math.round(k.constrain(H-
B,-B,I._width+B))-.5;I=Math.round(k.constrain(F-B,-B,I._width+B))+.5;t.select("g."+A.grabberMinClassName).attr("transform",r(J,.5));t.select("g."+A.grabberMaxClassName).attr("transform",r(I,.5))}function h(t,B,F,I){t=k.ensureSingle(t,"rect",A.bgClassName,function(L){L.attr({x:0,y:0,"shape-rendering":"crispEdges"})});F=0===I.borderwidth%2?I.borderwidth:I.borderwidth-1;var J=-I._offsetShift;B=u.crispRound(B,I.borderwidth);t.attr({width:I._width+F,height:I._height+F,transform:r(J,J),fill:I.bgcolor,stroke:I.bordercolor,
"stroke-width":B})}function a(t,B,F,I){k.ensureSingleById(B._fullLayout._topdefs,"clipPath",I._clipId,function(J){J.append("rect").attr({x:0,y:0})}).select("rect").attr({width:I._width,height:I._height})}function g(t,B,F,I){var J=B.calcdata;t=t.selectAll("g."+A.rangePlotClassName).data(F._subplotsWith,k.identity);t.enter().append("g").attr("class",function(H){return A.rangePlotClassName+" "+H}).call(u.setClipUrl,I._clipId,B);t.order();t.exit().remove();var L;t.each(function(H,P){var M=c.select(this);
P=0===P;var N=z.getFromId(B,H,"y"),T=N._name,Q=I[T],U={data:[],layout:{xaxis:{type:F.type,domain:[0,1],range:I.range.slice(),calendar:F.calendar},width:I._width,height:I._height,margin:{t:0,b:0,l:0,r:0}},_context:B._context};F.rangebreaks&&(U.layout.xaxis.rangebreaks=F.rangebreaks);U.layout[T]={type:N.type,domain:[0,1],range:"match"!==Q.rangemode?Q.range.slice():N.range.slice(),calendar:N.calendar};N.rangebreaks&&(U.layout[T].rangebreaks=N.rangebreaks);f.supplyDefaults(U);N=U._fullLayout.xaxis;T=
U._fullLayout[T];N.clearCalc();N.setScale();T.clearCalc();T.setScale();M={id:H,plotgroup:M,xaxis:N,yaxis:T,isRangePlot:!0};P?L=M:(M.mainplot="xy",M.mainplotinfo=L);P=C;T=P.rangePlot;U=[];for(N=0;N<J.length;N++){Q=J[N];var S=Q[0].trace;S.xaxis+S.yaxis===H&&U.push(Q)}T.call(P,B,M,U)})}function e(t,B,F,I,J){k.ensureSingle(t,"rect",A.maskMinClassName,function(L){L.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",I._height).call(v.fill,A.maskColor);k.ensureSingle(t,"rect",A.maskMaxClassName,
function(L){L.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",I._height).call(v.fill,A.maskColor);"match"!==J.rangemode&&(k.ensureSingle(t,"rect",A.maskMinOppAxisClassName,function(L){L.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",I._width).call(v.fill,A.maskOppAxisColor),k.ensureSingle(t,"rect",A.maskMaxOppAxisClassName,function(L){L.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",I._width).style("border-top",A.maskOppBorder).call(v.fill,A.maskOppAxisColor))}function n(t,
B,F,I){B._context.staticPlot||k.ensureSingle(t,"rect",A.slideBoxClassName,function(J){J.attr({y:0,cursor:A.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:I._height,fill:A.slideBoxFill})}function p(t,B,F,I){F=k.ensureSingle(t,"g",A.grabberMinClassName);t=k.ensureSingle(t,"g",A.grabberMaxClassName);var J={x:0,width:A.handleWidth,rx:A.handleRadius,fill:v.background,stroke:v.defaultLine,"stroke-width":A.handleStrokeWidth,"shape-rendering":"crispEdges"},L={y:Math.round(I._height/4),height:Math.round(I._height/
2)};k.ensureSingle(F,"rect",A.handleMinClassName,function(P){P.attr(J)}).attr(L);k.ensureSingle(t,"rect",A.handleMaxClassName,function(P){P.attr(J)}).attr(L);var H={width:A.grabAreaWidth,x:0,y:0,fill:A.grabAreaFill,cursor:B._context.staticPlot?void 0:A.grabAreaCursor};k.ensureSingle(F,"rect",A.grabAreaMinClassName,function(P){P.attr(H)}).attr("height",I._height);k.ensureSingle(t,"rect",A.grabAreaMaxClassName,function(P){P.attr(H)}).attr("height",I._height)}var c=b("d3"),d=b("../../registry"),f=b("../../plots/plots"),
k=b("../../lib"),r=k.strTranslate,u=b("../drawing"),v=b("../color"),x=b("../titles"),C=b("../../plots/cartesian"),z=b("../../plots/cartesian/axis_ids"),y=b("../dragelement"),D=b("../../lib/setcursor"),A=b("./constants");K.exports=function(t){for(var B=t._fullLayout,F=B._rangeSliderData,I=0;I<F.length;I++){var J=F[I][A.name];J._clipId=J._id+"-"+B._uid}I=B._infolayer.selectAll("g."+A.containerClassName).data(F,function(L){return L._name});I.exit().each(function(L){B._topdefs.select("#"+L[A.name]._clipId).remove()}).remove();
0!==F.length&&(I.enter().append("g").classed(A.containerClassName,!0).attr("pointer-events","all"),I.each(function(L){var H=c.select(this),P=L[A.name],M=B[z.id2name(L.anchor)],N=P[z.id2name(L.anchor)];if(P.range){var T=k.simpleMap(P.range,L.r2l),Q=k.simpleMap(L.range,L.r2l);P.range=P._input.range=k.simpleMap(Q[0]<Q[1]?[Math.min(T[0],Q[0]),Math.max(T[1],Q[1])]:[Math.max(T[0],Q[0]),Math.min(T[1],Q[1])],L.l2r)}L.cleanRange("rangeslider.range");Q=B._size;var U=L.domain;P._width=Q.w*(U[1]-U[0]);T=Math.round(Q.t+
Q.h*(1-L._counterDomainMin)+("bottom"===L.side?L._depth:0)+P._offsetShift+A.extraPad);H.attr("transform",r(Math.round(Q.l+Q.w*U[0]),T));P._rl=k.simpleMap(P.range,L.r2l);var S=P._rl[0];Q=P._rl[1];var X=Q-S;P.p2d=function(qa){return qa/P._width*X+S};P.d2p=function(qa){return(qa-S)/X*P._width};if(L.rangebreaks){var Z=L.locateBreaks(S,Q);if(Z.length){var aa=0;for(U=0;U<Z.length;U++){var fa=Z[U];aa+=fa.max-fa.min}var ha=P._width/(Q-S-aa),ja=[-ha*S];for(U=0;U<Z.length;U++)fa=Z[U],ja.push(ja[ja.length-1]-
ha*(fa.max-fa.min));P.d2p=function(qa){for(var ka=ja[0],oa=0;oa<Z.length;oa++){var na=Z[oa];if(qa>=na.max)ka=ja[oa+1];else if(qa<na.min)break}return ka+ha*qa};for(U=0;U<Z.length;U++)fa=Z[U],fa.pmin=P.d2p(fa.min),fa.pmax=P.d2p(fa.max);P.p2d=function(qa){for(var ka=ja[0],oa=0;oa<Z.length;oa++){var na=Z[oa];if(qa>=na.pmax)ka=ja[oa+1];else if(qa<na.pmin)break}return(qa-ka)/ha}}}if("match"!==N.rangemode){var ba=M.r2l(N.range[0]),ma=M.r2l(N.range[1])-ba;P.d2pOppAxis=function(qa){return(qa-ba)/ma*P._height}}H.call(h,
t,L,P).call(a,t,L,P).call(g,t,L,P).call(e,t,L,P,N).call(n,t,L,P).call(p,t,L,P);q(H,t,L,P);l(H,t,L,P,M,N);"bottom"===L.side&&x.draw(t,L._id+"title",{propContainer:L,propName:L._name+".title",placeholder:B._dfltTitle.x,attributes:{x:L._offset+L._length/2,y:T+P._height+P._offsetShift+10+1.5*L.title.font.size,"text-anchor":"middle"}})}))}},{"../../lib":778,"../../lib/setcursor":799,"../../plots/cartesian":841,"../../plots/cartesian/axis_ids":831,"../../plots/plots":891,"../../registry":911,"../color":643,
"../dragelement":662,"../drawing":665,"../titles":738,"./constants":714,d3:169}],717:[function(b,K,G){function q(e){return(e=e&&e[g])&&e.visible}var m=b("../../plots/cartesian/axis_ids"),l=b("../../lib/svg_text_utils"),h=b("./constants"),a=b("../../constants/alignment").LINE_SPACING,g=h.name;G.isVisible=q;G.makeData=function(e){var n=m.list({_fullLayout:e},"x",!0),p=e.margin,c=[];if(!e._has("gl2d"))for(var d=0;d<n.length;d++){var f=n[d];if(q(f)){c.push(f);var k=f[g];k._id=g+f._id;k._height=(e.height-
p.b-p.t)*k.thickness;k._offsetShift=Math.floor(k.borderwidth/2)}}e._rangeSliderData=c};G.autoMarginOpts=function(e,n){e=e._fullLayout;var p=n[g],c=n._id.charAt(0),d=0,f=0;"bottom"===n.side&&(d=n._depth,n.title.text!==e._dfltTitle[c]&&(f=1.5*n.title.font.size+10+p._offsetShift,c=(n.title.text.match(l.BR_TAG_ALL)||[]).length,f+=c*n.title.font.size*a));return{x:0,y:n._counterDomainMin,l:0,r:0,t:0,b:p._height+d+Math.max(e.margin.b,f),pad:h.extraPad+2*p._offsetShift}}},{"../../constants/alignment":745,
"../../lib/svg_text_utils":803,"../../plots/cartesian/axis_ids":831,"./constants":714}],718:[function(b,K,G){G=b("../../lib");var q=b("./attributes"),m=b("./oppaxis_attributes"),l=b("./helpers");K.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:G.extendFlat({},q,{yaxis:m})}}},layoutAttributes:b("./attributes"),handleDefaults:b("./defaults"),calcAutorange:b("./calc_autorange"),draw:b("./draw"),isVisible:l.isVisible,makeData:l.makeData,autoMarginOpts:l.autoMarginOpts}},
{"../../lib":778,"./attributes":712,"./calc_autorange":713,"./defaults":715,"./draw":716,"./helpers":717,"./oppaxis_attributes":719}],719:[function(b,K,G){K.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],720:[function(b,K,G){G=b("../annotations/attributes");var q=b("../../traces/scatter/attributes").line,
m=b("../drawing/attributes").dash,l=b("../../lib/extend").extendFlat,h=b("../../plot_api/plot_template").templatedArray;b("../../constants/axis_placeable_objects");K.exports=h("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:l({},G.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],
dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:l({},G.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",
min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:l({},q.color,{editType:"arraydraw"}),width:l({},q.width,{editType:"calc+arraydraw"}),dash:l({},m,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":746,
"../../lib/extend":768,"../../plot_api/plot_template":817,"../../traces/scatter/attributes":1187,"../annotations/attributes":626,"../drawing/attributes":664}],721:[function(b,K,G){function q(e,n,p,c,d,f){e/=2;return"pixel"===n?(p=d?g.extractPathCoords(d,f?a.paramIsY:a.paramIsX):[p,c],n=l.aggNums(Math.max,null,p),p=l.aggNums(Math.min,null,p),p=0>p?Math.abs(p)+e:e,n=0<n?n+e:e,{ppad:e,ppadplus:f?p:n,ppadminus:f?n:p}):{ppad:e}}function m(e,n,p,c,d){var f="category"===e.type||"multicategory"===e.type?
e.r2c:e.d2c;if(void 0!==n)return[f(n),f(p)];if(c){n=Infinity;p=-Infinity;c=c.match(a.segmentRE);var k;"date"===e.type&&(f=g.decodeDate(f));for(e=0;e<c.length;e++){var r=c[e];r=d[r.charAt(0)].drawn;void 0!==r&&(!(k=c[e].substr(1).match(a.paramRE))||k.length<r||(r=f(k[r]),r<n&&(n=r),r>p&&(p=r)))}if(p>=n)return[n,p]}}var l=b("../../lib"),h=b("../../plots/cartesian/axes"),a=b("./constants"),g=b("./helpers");K.exports=function(e){var n=l.filterVisible(e._fullLayout.shapes);if(n.length&&e._fullData.length)for(var p=
0;p<n.length;p++){var c=n[p];c._extremes={};var d=h.getRefType(c.xref);var f=h.getRefType(c.yref);if("paper"!==c.xref&&"domain"!==d){var k="pixel"===c.xsizemode?c.xanchor:c.x0;var r="pixel"===c.xsizemode?c.xanchor:c.x1;d=h.getFromId(e,c.xref);(k=m(d,k,r,c.path,a.paramIsX))&&(c._extremes[d._id]=h.findExtremes(d,k,q(c.line.width,c.xsizemode,c.x0,c.x1,c.path,!1)))}"paper"!==c.yref&&"domain"!==f&&(f="pixel"===c.ysizemode?c.yanchor:c.y0,k="pixel"===c.ysizemode?c.yanchor:c.y1,d=h.getFromId(e,c.yref),(k=
m(d,f,k,c.path,a.paramIsY))&&(c._extremes[d._id]=h.findExtremes(d,k,q(c.line.width,c.ysizemode,c.y0,c.y1,c.path,!0))))}}},{"../../lib":778,"../../plots/cartesian/axes":828,"./constants":722,"./helpers":731}],722:[function(b,K,G){K.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},
H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],723:[function(b,K,G){function q(e,n,p){function c(I,J){return m.coerce(e,n,a,I,J)}if(c("visible")){var d=c("path");d=c("type",d?"path":"rect");"path"!==n.type&&delete n.path;c("editable");c("layer");c("opacity");c("fillcolor");c("fillrule");c("line.width")&&(c("line.color"),c("line.dash"));for(var f=c("xsizemode"),k=c("ysizemode"),
r=["x","y"],u=0;2>u;u++){var v=r[u],x=v+"anchor",C="x"===v?f:k,z={_fullLayout:p},y=l.coerceRef(e,n,z,v,void 0,"paper");if("range"===l.getRefType(y)){var D=l.getFromId(z,y);D._shapeIndices.push(n._index);var A=g.rangeToShapePosition(D);D=g.shapePositionToRange(D)}else D=A=m.identity;if("path"!==d){var t=v+"0";v+="1";var B=e[t],F=e[v];e[t]=D(e[t],!0);e[v]=D(e[v],!0);"pixel"===C?(c(t,0),c(v,10)):(l.coercePosition(n,z,c,y,t,.25),l.coercePosition(n,z,c,y,v,.75));n[t]=A(n[t]);n[v]=A(n[v]);e[t]=B;e[v]=F}"pixel"===
C&&(C=e[x],e[x]=D(e[x],!0),l.coercePosition(n,z,c,y,x,.25),n[x]=A(n[x]),e[x]=C)}"path"===d?c("path"):m.noneOrAll(e,n,["x0","x1","y0","y1"])}}var m=b("../../lib"),l=b("../../plots/cartesian/axes"),h=b("../../plots/array_container_defaults"),a=b("./attributes"),g=b("./helpers");K.exports=function(e,n){h(e,n,{name:"shapes",handleItemDefaults:q})}},{"../../lib":778,"../../plots/array_container_defaults":823,"../../plots/cartesian/axes":828,"./attributes":720,"./helpers":731}],724:[function(b,K,G){function q(A){var t=
A._fullLayout;t._shapeUpperLayer.selectAll("path").remove();t._shapeLowerLayer.selectAll("path").remove();for(var B in t._plots){var F=t._plots[B].shapelayer;F&&F.selectAll("path").remove()}for(B=0;B<t.shapes.length;B++)t.shapes[B].visible&&m(A,B)}function m(A,t){function B(L){var H=a(A,I),P={"data-index":t,"fill-rule":I.fillrule,d:H},M=I.opacity,N=I.fillcolor,T=I.line.width?I.line.color:"rgba(0,0,0,0)",Q=I.line.width,U=I.line.dash;Q||!0!==I.editable||(Q=5,U="solid");var S="Z"!==H[H.length-1],X=!A._context.edits.shapePosition&&
I.editable&&A._fullLayout._activeShapeIndex===t;X&&(N=S?"rgba(0,0,0,0)":A._fullLayout.activeshape.fillcolor,M=A._fullLayout.activeshape.opacity);var Z=L.append("path").attr(P).style("opacity",M).call(u.stroke,T).call(u.fill,N).call(v.dashLine,U,Q);l(Z,A,I);if(X||A._context.edits.shapePosition)var aa=x(A.layout,"shapes",I);X?(Z.style({cursor:"move"}),L={element:Z.node(),plotinfo:J,gd:A,editHelpers:aa,isActiveShape:!0},H=f(H,A),k(H,Z,L)):A._context.edits.shapePosition?h(A,Z,I,t,L,aa):!0===I.editable&&
Z.style("pointer-events",S||.5>=u.opacity(N)*M?"stroke":"all");Z.node().addEventListener("click",function(){a:{if(!A._context.edits.shapePosition){var fa=+Z.node().getAttribute("data-index");if(0<=fa){if(fa===A._fullLayout._activeShapeIndex){n(A);fa=void 0;break a}A._fullLayout._activeShapeIndex=fa;A._fullLayout._deactivateShape=n;q(A)}}fa=void 0}return fa})}A._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+t+'"]').remove();var F=D.makeOptionsAndPlotinfo(A,t),I=F.options,J=F.plotinfo;
I._input&&!1!==I.visible&&("below"!==I.layer?B(A._fullLayout._shapeUpperLayer):"paper"===I.xref||"paper"===I.yref?B(A._fullLayout._shapeLowerLayer):J._hadPlotinfo?B((J.mainplotinfo||J).shapelayer):B(A._fullLayout._shapeLowerLayer))}function l(A,t,B){B=(B.xref+B.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");v.setClipUrl(A,B?"clip"+t._fullLayout._uid+B:null,t)}function h(A,t,B,F,I,J){function L(){var va=Math.max(B.line.width,10),Ba=I.append("g").attr("data-index",F);Ba.append("path").attr("d",
t.attr("d")).style({cursor:"move","stroke-width":va,"stroke-opacity":"0"});var Ga={"fill-opacity":"0"};va=Math.max(va/2,10);Ba.append("circle").attr({"data-line-point":"start-point",cx:T?eb(B.xanchor)+B.x0:eb(B.x0),cy:Q?lb(B.yanchor)-B.y0:lb(B.y0),r:va}).style(Ga).classed("cursor-grab",!0);Ba.append("circle").attr({"data-line-point":"end-point",cx:T?eb(B.xanchor)+B.x1:eb(B.x1),cy:Q?lb(B.yanchor)-B.y1:lb(B.y1),r:va}).style(Ga).classed("cursor-grab",!0);return Ba}function H(va){if(A._fullLayout._drawing)nb=
null;else if(U)nb="path"===va.target.tagName?"move":"start-point"===va.target.attributes["data-line-point"].value?"resize-over-start-point":"resize-over-end-point";else{var Ba=hb.element.getBoundingClientRect(),Ga=Ba.right-Ba.left,Na=Ba.bottom-Ba.top,$a=va.clientX-Ba.left;Ba=va.clientY-Ba.top;va=!S&&10<Ga&&10<Na&&!va.shiftKey?C.getCursor($a/Ga,1-Ba/Na):"move";z(t,va);nb=va.split("-")[0]}}function P(va,Ba){if("path"===B.type){var Ga=function($a){return $a},Na=Ga;T?X("xanchor",B.xanchor=ab(ja+va)):
(Na=function($a){return ab(eb($a)+va)},Aa&&"date"===Aa.type&&(Na=D.encodeDate(Na)));Q?X("yanchor",B.yanchor=Ya(ba+Ba)):(Ga=function($a){return Ya(lb($a)+Ba)},Sa&&"date"===Sa.type&&(Ga=D.encodeDate(Ga)));X("path",B.path=e(ta,Na,Ga))}else T?X("xanchor",B.xanchor=ab(ja+va)):(X("x0",B.x0=ab(Z+va)),X("x1",B.x1=ab(fa+va))),Q?X("yanchor",B.yanchor=Ya(ba+Ba)):(X("y0",B.y0=Ya(aa+Ba)),X("y1",B.y1=Ya(ha+Ba)));t.attr("d",a(A,B));N(I,B)}function M(va,Ba){if(S){var Ga=function(Ra){return Ra},Na=Ga;T?X("xanchor",
B.xanchor=ab(ja+va)):(Na=function(Ra){return ab(eb(Ra)+va)},Aa&&"date"===Aa.type&&(Na=D.encodeDate(Na)));Q?X("yanchor",B.yanchor=Ya(ba+Ba)):(Ga=function(Ra){return Ya(lb(Ra)+Ba)},Sa&&"date"===Sa.type&&(Ga=D.encodeDate(Ga)));X("path",B.path=e(ta,Na,Ga))}else if(U)"resize-over-start-point"===nb?(Na=Z+va,Ga=Q?aa-Ba:aa+Ba,X("x0",B.x0=T?Na:ab(Na)),X("y0",B.y0=Q?Ga:Ya(Ga))):"resize-over-end-point"===nb&&(Na=fa+va,Ga=Q?ha-Ba:ha+Ba,X("x1",B.x1=T?Na:ab(Na)),X("y1",B.y1=Q?Ga:Ya(Ga)));else{Na=-1!==nb.indexOf("n");
Ga=-1!==nb.indexOf("s");var $a=-1!==nb.indexOf("w"),Va=-1!==nb.indexOf("e"),qb=Na?ma+Ba:ma,Ha=Ga?qa+Ba:qa;$a=$a?ka+va:ka;Va=Va?oa+va:oa;Q&&(Na&&(qb=ma-Ba),Ga&&(Ha=qa-Ba));if(!Q&&10<Ha-qb||Q&&10<qb-Ha)X(na,B[na]=Q?qb:Ya(qb)),X(la,B[la]=Q?Ha:Ya(Ha));10<Va-$a&&(X(ia,B[ia]=T?$a:ab($a)),X(sa,B[sa]=T?Va:ab(Va)))}t.attr("d",a(A,B));N(I,B)}function N(va,Ba){if(T||Q){var Ga="path"!==Ba.type;va=va.selectAll(".visual-cue").data([0]);va.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000",
"stroke-width":1}).classed("visual-cue",!0);var Na=eb(T?Ba.xanchor:c.midRange(Ga?[Ba.x0,Ba.x1]:D.extractPathCoords(Ba.path,y.paramIsX)));Ba=lb(Q?Ba.yanchor:c.midRange(Ga?[Ba.y0,Ba.y1]:D.extractPathCoords(Ba.path,y.paramIsY)));Na=D.roundPositionForSharpStrokeRendering(Na,1);Ba=D.roundPositionForSharpStrokeRendering(Ba,1);T&&Q?va.attr("d","M"+(Na-1-1)+","+(Ba-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z"):T?va.attr("d","M"+(Na-1-1)+","+(Ba-9-1)+"v18 h2 v-18 Z"):va.attr("d","M"+(Na-9-1)+","+(Ba-1-1)+"h18 v2 h-18 Z")}}
var T="pixel"===B.xsizemode,Q="pixel"===B.ysizemode,U="line"===B.type,S="path"===B.type,X=J.modifyItem,Z,aa,fa,ha,ja,ba,ma,qa,ka,oa,na,la,ia,sa,ta,Aa=d.getFromId(A,B.xref),Ka=d.getRefType(B.xref),Sa=d.getFromId(A,B.yref),db=d.getRefType(B.yref),eb=D.getDataToPixel(A,Aa,!1,Ka),lb=D.getDataToPixel(A,Sa,!0,db),ab=D.getPixelToData(A,Aa,!1,Ka),Ya=D.getPixelToData(A,Sa,!0,db);Ka=U?L():t;var hb={element:Ka.node(),gd:A,prepFn:function(va){if(!A._fullLayout._drawing){T&&(ja=eb(B.xanchor));Q&&(ba=lb(B.yanchor));
"path"===B.type?ta=B.path:(Z=T?B.x0:eb(B.x0),aa=Q?B.y0:lb(B.y0),fa=T?B.x1:eb(B.x1),ha=Q?B.y1:lb(B.y1));Z<fa?(ka=Z,ia="x0",oa=fa,sa="x1"):(ka=fa,ia="x1",oa=Z,sa="x0");!Q&&aa<ha||Q&&aa>ha?(ma=aa,na="y0",qa=ha,la="y1"):(ma=ha,na="y1",qa=aa,la="y0");H(va);N(I,B);var Ba=B.xref,Ga=B.yref,Na=d.getFromId(A,Ba),$a=d.getFromId(A,Ga),Va="";"paper"===Ba||Na.autorange||(Va+=Ba);"paper"===Ga||$a.autorange||(Va+=Ga);v.setClipUrl(t,Va?"clip"+A._fullLayout._uid+Va:null,A);hb.moveFn="move"===nb?P:M;hb.altKey=va.altKey}},
doneFn:function(){A._fullLayout._drawing||(z(t),I.selectAll(".visual-cue").remove(),l(t,A,B),p.call("_guiRelayout",A,J.getUpdateObj()))},clickFn:function(){A._fullLayout._drawing||I.selectAll(".visual-cue").remove()}},nb;C.init(hb);Ka.node().onmousemove=H}function a(A,t){var B=t.type,F=d.getRefType(t.xref),I=d.getRefType(t.yref),J=d.getFromId(A,t.xref),L=d.getFromId(A,t.yref),H=A._fullLayout._size;if(J)if("domain"===F)A=function(T){return J._offset+J._length*T};else{var P=D.shapePositionToRange(J);
A=function(T){return J._offset+J.r2p(P(T,!0))}}else A=function(T){return H.l+H.w*T};if(L)if("domain"===I)F=function(T){return L._offset+L._length*(1-T)};else{var M=D.shapePositionToRange(L);F=function(T){return L._offset+L.r2p(M(T,!0))}}else F=function(T){return H.t+H.h*(1-T)};if("path"===B)return J&&"date"===J.type&&(A=D.decodeDate(A)),L&&"date"===L.type&&(F=D.decodeDate(F)),g(t,A,F);if("pixel"===t.xsizemode){A=A(t.xanchor);I=A+t.x0;var N=A+t.x1}else I=A(t.x0),N=A(t.x1);"pixel"===t.ysizemode?(F=
F(t.yanchor),A=F-t.y0,t=F-t.y1):(A=F(t.y0),t=F(t.y1));if("line"===B)return"M"+I+","+A+"L"+N+","+t;if("rect"===B)return"M"+I+","+A+"H"+N+"V"+t+"H"+I+"Z";B=(I+N)/2;t=(A+t)/2;I=Math.abs(B-I);A=Math.abs(t-A);F="A"+I+","+A;I=B+I+","+t;return"M"+I+F+" 0 1,1 "+(B+","+(t-A))+F+" 0 0,1 "+I+"Z"}function g(A,t,B){var F=A.xsizemode,I=A.ysizemode,J=A.xanchor,L=A.yanchor;return A.path.replace(y.segmentRE,function(H){var P=0,M=H.charAt(0),N=y.paramIsX[M],T=y.paramIsY[M],Q=y.numParams[M],U=H.substr(1).replace(y.paramRE,
function(S){N[P]?S="pixel"===F?t(J)+Number(S):t(S):T[P]&&(S="pixel"===I?B(L)-Number(S):B(S));P++;P>Q&&(S="X");return S});P>Q&&(U=U.replace(/[\s,]*X.*/,""),c.log("Ignoring extra params in segment "+H));return M+U})}function e(A,t,B){return A.replace(y.segmentRE,function(F){var I=0,J=F.charAt(0),L=y.paramIsX[J],H=y.paramIsY[J],P=y.numParams[J];F=F.substr(1).replace(y.paramRE,function(M){if(I>=P)return M;L[I]?M=t(M):H[I]&&(M=B(M));I++;return M});return J+F})}function n(A){!A._context.edits.shapePosition&&
0<=A._fullLayout._activeShapeIndex&&(r(A),delete A._fullLayout._activeShapeIndex,q(A))}var p=b("../../registry"),c=b("../../lib"),d=b("../../plots/cartesian/axes"),f=b("./draw_newshape/helpers").readPaths,k=b("./draw_newshape/display_outlines"),r=b("../../plots/cartesian/handle_outline").clearOutlineControllers,u=b("../color"),v=b("../drawing"),x=b("../../plot_api/plot_template").arrayEditor,C=b("../dragelement"),z=b("../../lib/setcursor"),y=b("./constants"),D=b("./helpers");K.exports={draw:q,drawOne:m,
eraseActiveShape:function(A){if(!A._context.edits.shapePosition){r(A);var t=A._fullLayout._activeShapeIndex,B=(A.layout||{}).shapes||[];if(t<B.length){for(var F=[],I=0;I<B.length;I++)I!==t&&F.push(B[I]);delete A._fullLayout._activeShapeIndex;p.call("_guiRelayout",A,{shapes:F})}}}}},{"../../lib":778,"../../lib/setcursor":799,"../../plot_api/plot_template":817,"../../plots/cartesian/axes":828,"../../plots/cartesian/handle_outline":838,"../../registry":911,"../color":643,"../dragelement":662,"../drawing":665,
"./constants":722,"./draw_newshape/display_outlines":728,"./draw_newshape/helpers":729,"./helpers":731}],725:[function(b,K,G){G=b("../../drawing/attributes").dash;b=b("../../../lib/extend").extendFlat;K.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},dash:b({},G,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],
dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":768,
"../../drawing/attributes":664}],726:[function(b,K,G){K.exports={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},{}],727:[function(b,K,G){var q=b("../../color");K.exports=function(m,l,h){h("newshape.drawdirection");h("newshape.layer");h("newshape.fillcolor");h("newshape.fillrule");h("newshape.opacity");h("newshape.line.width")&&(h("newshape.line.color",q.contrast((m||{}).plot_bgcolor||"#FFF")),h("newshape.line.dash"));h("activeshape.fillcolor");
h("activeshape.opacity")}},{"../../color":643}],728:[function(b,K,G){function q(r,u){for(var v=0;v<u.length;v++){var x=u[v];r[v]=[];for(var C=0;C<x.length;C++){r[v][C]=[];for(var z=0;z<x[C].length;z++)r[v][C][z]=x[C][z]}}return r}var m=b("../../dragelement"),l=b("../../dragelement/helpers").drawMode,h=b("../../../registry");G=b("./constants");var a=G.i000,g=G.i090,e=G.i180,n=G.i270,p=b("../../../plots/cartesian/handle_outline").clearOutlineControllers;G=b("./helpers");var c=G.pointsShapeRectangle,
d=G.pointsShapeEllipse,f=G.writePaths,k=b("./newshapes");K.exports=function z(u,v,x,C){function y(){z(u,v,x,C++);d(u[0])&&D({redrawing:!0})}function D(Z){x.isActiveShape=!1;var aa=k(v,x);Object.keys(aa).length&&h.call((Z||{}).redrawing?"relayout":"_guiRelayout",P,aa)}function A(Z){Q=+Z.srcElement.getAttribute("data-i");U=+Z.srcElement.getAttribute("data-j");T[Q][U].moveFn=t}function t(Z,aa){if(u.length){var fa=S[Q][U][1],ha=S[Q][U][2],ja=u[Q],ba=ja.length;if(c(ja)){for(var ma=0;ma<ba;ma++)if(ma!==
U){var qa=ja[ma];qa[1]===ja[U][1]&&(qa[1]=fa+Z);qa[2]===ja[U][2]&&(qa[2]=ha+aa)}ja[U][1]=fa+Z;ja[U][2]=ha+aa;if(!c(ja))for(Z=0;Z<ba;Z++)for(aa=0;aa<ja[Z].length;aa++)ja[Z][aa]=S[Q][Z][aa]}else ja[U][1]=fa+Z,ja[U][2]=ha+aa;y()}}function B(){D()}function F(Z,aa){if(2===Z&&(Q=+aa.srcElement.getAttribute("data-i"),U=+aa.srcElement.getAttribute("data-j"),Z=u[Q],!c(Z)&&!d(Z)&&u.length&&u[Q]&&u[Q].length)){Z=[];for(aa=0;aa<u[Q].length;aa++)aa!==U&&Z.push(u[Q][aa]);1<Z.length&&(2!==Z.length||"Z"!==Z[1][0])&&
(0===U&&(Z[0][0]="M"),u[Q]=Z,y(),D())}}function I(Z){T=[];for(var aa=0;aa<u.length;aa++){var fa=u[aa],ha=!c(fa)&&d(fa);T[aa]=[];for(var ja=0;ja<fa.length;ja++)if("Z"!==fa[ja][0]&&(!ha||ja===a||ja===g||ja===e||ja===n)){var ba=fa[ja][1],ma=fa[ja][2];ba=Z.append("circle").classed("cursor-grab",!0).attr("data-i",aa).attr("data-j",ja).attr("cx",ba).attr("cy",ma).attr("r",4).style({"mix-blend-mode":"luminosity",fill:"black",stroke:"white","stroke-width":1});T[aa][ja]={element:ba.node(),gd:P,prepFn:A,doneFn:B,
clickFn:F};m.init(T[aa][ja])}}}function J(Z,aa){if(u.length)for(var fa=0;fa<u.length;fa++)for(var ha=0;ha<u[fa].length;ha++)for(var ja=0;ja+2<u[fa][ha].length;ja+=2)u[fa][ha][ja+1]=S[fa][ha][ja+1]+Z,u[fa][ha][ja+2]=S[fa][ha][ja+2]+aa;y()}function L(Z){(Q=+Z.srcElement.getAttribute("data-i"))||(Q=0);X[Q].moveFn=J}function H(){D()}C||(C=0);var P=x.gd,M=x.isActiveShape,N=P._fullLayout._zoomlayer;l(x.dragmode)?P._fullLayout._drawing=!0:0<=P._fullLayout._activeShapeIndex&&p(P);v.attr("d",f(u));var T,Q,
U;if(M&&!C){var S=q([],u);M=N.append("g").attr("class","outline-controllers");I(M);var X=[];u.length&&(X[0]={element:v[0][0],gd:P,prepFn:L,doneFn:H},m.init(X[0]))}}},{"../../../plots/cartesian/handle_outline":838,"../../../registry":911,"../../dragelement":662,"../../dragelement/helpers":661,"./constants":726,"./helpers":729,"./newshapes":730}],729:[function(b,K,G){function q(c,d){return 1E-6>=Math.abs(c-d)}function m(c,d){var f=d[1]-c[1];c=d[2]-c[2];return Math.sqrt(f*f+c*c)}var l=b("parse-svg-path");
K=b("./constants");var h=K.CIRCLE_SIDES,a=K.SQRT2;b=b("../../../plots/cartesian/helpers");var g=b.p2r,e=b.r2p,n=[0,3,4,5,6,1,2],p=[0,3,4,1,2];G.writePaths=function(c){var d=c.length;if(!d)return"M0,0Z";for(var f="",k=0;k<d;k++)for(var r=c[k].length,u=0;u<r;u++){var v=c[k][u][0];if("Z"===v)f+="Z";else for(var x=c[k][u].length,C=0;C<x;C++){var z=C;"Q"===v||"S"===v?z=p[C]:"C"===v&&(z=n[C]);f+=c[k][u][z];0<C&&C<x-1&&(f+=",")}}return f};G.readPaths=function(c,d,f,k){c=l(c);var r=[],u=-1,v,x=0,C=0;var z=
x;var y=C;for(var D=0;D<c.length;D++){var A=[],t=v=c[D][0];switch(v){case "M":u++;r[u]=[];x=+c[D][1];C=+c[D][2];A.push([t,x,C]);z=x;y=C;break;case "Q":case "S":v=+c[D][1];var B=+c[D][2];x=+c[D][3];C=+c[D][4];A.push([t,x,C,v,B]);break;case "C":v=+c[D][1];B=+c[D][2];var F=+c[D][3];var I=+c[D][4];x=+c[D][5];C=+c[D][6];A.push([t,x,C,v,B,F,I]);break;case "T":case "L":x=+c[D][1];C=+c[D][2];A.push([t,x,C]);break;case "H":t="L";x=+c[D][1];A.push([t,x,C]);break;case "V":t="L";C=+c[D][1];A.push([t,x,C]);break;
case "A":t="L";F=+c[D][1];B=+c[D][2];+c[D][4]||(F=-F,B=-B);I=x-F;var J=C;for(v=1;v<=h/2;v++){var L=2*Math.PI*v/h;A.push([t,I+F*Math.cos(L),J+B*Math.sin(L)])}break;case "Z":if(x!==z||C!==y)x=z,C=y,A.push([t,x,C])}t=(f||{}).domain;F=d._fullLayout._size;B=f&&"pixel"===f.xsizemode;I=f&&"pixel"===f.ysizemode;J=!1===k;for(L=0;L<A.length;L++){for(v=0;7>v+2;v+=2){var H=A[L][v+1],P=A[L][v+2];void 0!==H&&void 0!==P&&(x=H,C=P,f&&(f.xaxis&&f.xaxis.p2r?(J&&(H-=f.xaxis._offset),H=B?e(f.xaxis,f.xanchor)+H:g(f.xaxis,
H)):(J&&(H-=F.l),H=t?t.x[0]+H/F.w:H/F.w),f.yaxis&&f.yaxis.p2r?(J&&(P-=f.yaxis._offset),P=I?e(f.yaxis,f.yanchor)-P:g(f.yaxis,P)):(J&&(P-=F.t),P=t?t.y[1]-P/F.h:1-P/F.h)),A[L][v+1]=H,A[L][v+2]=P)}r[u].push(A[L].slice())}}return r};G.pointsShapeRectangle=function(c){if(5!==c.length)return!1;for(var d=1;3>d;d++)if(!q(c[0][d]-c[1][d],c[3][d]-c[2][d])||!q(c[0][d]-c[3][d],c[1][d]-c[2][d]))return!1;return q(c[0][1],c[1][1])||q(c[0][1],c[3][1])?!!(m(c[0],c[1])*m(c[0],c[3])):!1};G.pointsShapeEllipse=function(c){var d=
c.length;if(d!==h+1)return!1;d=h;for(var f=0;f<d;f++){var k=(2*d-f)%d,r=(d/2+k)%d;if(!q(m(c[f],c[(d/2+f)%d]),m(c[k],c[r])))return!1}return!0};G.handleEllipse=function(c,d,f){if(!c)return[d,f];var k=G.ellipseOver({x0:d[0],y0:d[1],x1:f[0],y1:f[1]});c=(k.x1+k.x0)/2;d=(k.y1+k.y0)/2;f=(k.x1-k.x0)/2;k=(k.y1-k.y0)/2;f||(f=k/=a);k||(k=f/=a);for(var r=[],u=0;u<h;u++){var v=2*u*Math.PI/h;r.push([c+f*Math.cos(v),d+k*Math.sin(v)])}return r};G.ellipseOver=function(c){var d=c.x0,f=c.y0,k=c.x1,r=c.y1;c=k-d;var u=
r-f;d=(d-c+k)/2;f=(f-u+r)/2;c*=a;u*=a;return{x0:d-c,y0:f-u,x1:d+c,y1:f+u}}},{"../../../plots/cartesian/helpers":839,"./constants":726,"parse-svg-path":505}],730:[function(b,K,G){G=b("../../dragelement/helpers");var q=G.drawMode,m=G.openMode;G=b("./constants");var l=G.i000,h=G.i090,a=G.i180,g=G.i270,e=G.cos45,n=G.sin45;G=b("../../../plots/cartesian/helpers");var p=G.p2r,c=G.r2p,d=b("../../../plots/cartesian/handle_outline").clearSelect;b=b("./helpers");var f=b.readPaths,k=b.writePaths,r=b.ellipseOver;
K.exports=function(u,v){if(u.length&&(u=u[0][0])){var x=u.getAttribute("d");u=v.gd;var C=u._fullLayout.newshape,z=v.plotinfo,y=z.xaxis,D=z.yaxis,A=!!z.domain||!z.xaxis,t=!!z.domain||!z.yaxis,B=v.isActiveShape,F=v.dragmode,I=(u.layout||{}).shapes||[];if(!q(F)&&void 0!==B){var J=u._fullLayout._activeShapeIndex;if(J<I.length)switch(u._fullLayout.shapes[J].type){case "rect":F="drawrect";break;case "circle":F="drawcircle";break;case "line":F="drawline";break;case "path":F=I[J].path||"",F="Z"===F[F.length-
1]?"drawclosedpath":"drawopenpath"}}J=m(F);x=f(x,u,z,B);A={editable:!0,xref:A?"paper":y._id,yref:t?"paper":D._id,layer:C.layer,opacity:C.opacity,line:{color:C.line.color,width:C.line.width,dash:C.line.dash}};J||(A.fillcolor=C.fillcolor,A.fillrule=C.fillrule);var L;1===x.length&&(L=x[0]);if(L&&"drawrect"===F)A.type="rect",A.x0=L[0][1],A.y0=L[0][2],A.x1=L[2][1],A.y1=L[2][2];else if(L&&"drawline"===F)A.type="line",A.x0=L[0][1],A.y0=L[0][2],A.x1=L[1][1],A.y1=L[1][2];else if(L&&"drawcircle"===F){A.type=
"circle";x=L[l][1];D=L[h][1];C=L[a][1];y=L[g][1];t=L[l][2];F=L[h][2];J=L[a][2];var H=L[g][2];L=z.xaxis&&("date"===z.xaxis.type||"log"===z.xaxis.type);var P=z.yaxis&&("date"===z.yaxis.type||"log"===z.yaxis.type);L&&(x=c(z.xaxis,x),D=c(z.xaxis,D),C=c(z.xaxis,C),y=c(z.xaxis,y));P&&(t=c(z.yaxis,t),F=c(z.yaxis,F),J=c(z.yaxis,J),H=c(z.yaxis,H));var M=(D+y)/2,N=(t+J)/2;x=r({x0:M,y0:N,x1:M+(y-D+C-x)/2*e,y1:N+(H-F+J-t)/2*n});L&&(x.x0=p(z.xaxis,x.x0),x.x1=p(z.xaxis,x.x1));P&&(x.y0=p(z.yaxis,x.y0),x.y1=p(z.yaxis,
x.y1));A.x0=x.x0;A.y0=x.y0;A.x1=x.x1;A.y1=x.y1}else{A.type="path";if(y&&D&&(z="date"===y.type,L="date"===D.type,z||L))for(D=0;D<x.length;D++)for(C=0;C<x[D].length;C++)for(y=0;y+2<x[D][C].length;y+=2)z&&(x[D][C][y+1]=x[D][C][y+1].replace(" ","_")),L&&(x[D][C][y+2]=x[D][C][y+2].replace(" ","_"));A.path=k(x)}d(u);v=v.editHelpers;z=(v||{}).modifyItem;L=[];for(x=0;x<I.length;x++)if(D=u._fullLayout.shapes[x],L[x]=D._input,void 0!==B&&x===u._fullLayout._activeShapeIndex)switch(C=A,D.type){case "line":case "rect":case "circle":z("x0",
C.x0);z("x1",C.x1);z("y0",C.y0);z("y1",C.y1);break;case "path":z("path",C.path)}return void 0===B?(L.push(A),L):v?v.getUpdateObj():{}}}},{"../../../plots/cartesian/handle_outline":838,"../../../plots/cartesian/helpers":839,"../../dragelement/helpers":661,"./constants":726,"./helpers":729}],731:[function(b,K,G){var q=b("./constants"),m=b("../../lib");G.rangeToShapePosition=function(l){return"log"===l.type?l.r2d:function(h){return h}};G.shapePositionToRange=function(l){return"log"===l.type?l.d2r:function(h){return h}};
G.decodeDate=function(l){return function(h){h.replace&&(h=h.replace("_"," "));return l(h)}};G.encodeDate=function(l){return function(h){return l(h).replace(" ","_")}};G.extractPathCoords=function(l,h){var a=[];l.match(q.segmentRE).forEach(function(g){var e=h[g.charAt(0)].drawn;void 0!==e&&(g=g.substr(1).match(q.paramRE),!g||g.length<e||a.push(m.cleanNumber(g[e])))});return a};G.getDataToPixel=function(l,h,a,g){var e=l._fullLayout._size;if(h)if("domain"===g)l=function(p){return h._length*(a?1-p:p)+
h._offset};else{var n=G.shapePositionToRange(h);l=function(p){return h._offset+h.r2p(n(p,!0))};"date"===h.type&&(l=G.decodeDate(l))}else l=a?function(p){return e.t+e.h*(1-p)}:function(p){return e.l+e.w*p};return l};G.getPixelToData=function(l,h,a,g){var e=l._fullLayout._size;if(h)if("domain"===g)l=function(p){p=(p-h._offset)/h._length;return a?1-p:p};else{var n=G.rangeToShapePosition(h);l=function(p){return n(h.p2r(p-h._offset))}}else l=a?function(p){return 1-(p-e.t)/e.h}:function(p){return(p-e.l)/
e.w};return l};G.roundPositionForSharpStrokeRendering=function(l,h){l=Math.round(l);return 1===Math.round(h%2)?l+.5:l};G.makeOptionsAndPlotinfo=function(l,h){h=l._fullLayout.shapes[h]||{};var a=l._fullLayout._plots[h.xref+h.yref];a?a._hadPlotinfo=!0:(a={},h.xref&&"paper"!==h.xref&&(a.xaxis=l._fullLayout[h.xref+"axis"]),h.yref&&"paper"!==h.yref&&(a.yaxis=l._fullLayout[h.yref+"axis"]));a.xsizemode=h.xsizemode;a.ysizemode=h.ysizemode;a.xanchor=h.xanchor;a.yanchor=h.yanchor;return{options:h,plotinfo:a}}},
{"../../lib":778,"./constants":722}],732:[function(b,K,G){G=b("./draw");K.exports={moduleType:"component",name:"shapes",layoutAttributes:b("./attributes"),supplyLayoutDefaults:b("./defaults"),supplyDrawNewShapeDefaults:b("./draw_newshape/defaults"),includeBasePlot:b("../../plots/cartesian/include_components")("shapes"),calcAutorange:b("./calc_autorange"),draw:G.draw,drawOne:G.drawOne}},{"../../plots/cartesian/include_components":840,"./attributes":720,"./calc_autorange":721,"./defaults":723,"./draw":724,
"./draw_newshape/defaults":727}],733:[function(b,K,G){G=b("../../plots/font_attributes");var q=b("../../plots/pad_attributes"),m=b("../../lib/extend").extendDeepAll,l=b("../../plot_api/edit_types").overrideAll,h=b("../../plots/animation_attributes"),a=b("../../plot_api/plot_template").templatedArray;b=b("./constants");var g=a("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,
items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});K.exports=l(a("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:g,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:m(q({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left",
"center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:h.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},
font:G({})},font:G({}),activebgcolor:{valType:"color",dflt:b.gripBgActiveColor},bgcolor:{valType:"color",dflt:b.railBgColor},bordercolor:{valType:"color",dflt:b.railBorderColor},borderwidth:{valType:"number",min:0,dflt:b.railBorderWidth},ticklen:{valType:"number",min:0,dflt:b.tickLength},tickcolor:{valType:"color",dflt:b.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:b.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":768,"../../plot_api/edit_types":810,
"../../plot_api/plot_template":817,"../../plots/animation_attributes":822,"../../plots/font_attributes":856,"../../plots/pad_attributes":890,"./constants":734}],734:[function(b,K,G){K.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",
labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",
labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],735:[function(b,K,G){function q(n,p,c){function d(u,v){return l.coerce(n,p,a,u,v)}for(var f=h(n,p,{name:"steps",handleItemDefaults:m}),k=0,r=0;r<f.length;r++)f[r].visible&&k++;if(2>k?p.visible=!1:d("visible"))p._stepCount=k,k=p._visibleSteps=l.filterVisible(f),r=d("active"),(f[r]||{}).visible||(p.active=k[0]._index),
d("x"),d("y"),l.noneOrAll(n,p,["x","y"]),d("xanchor"),d("yanchor"),d("len"),d("lenmode"),d("pad.t"),d("pad.r"),d("pad.b"),d("pad.l"),l.coerceFont(d,"font",c.font),d("currentvalue.visible")&&(d("currentvalue.xanchor"),d("currentvalue.prefix"),d("currentvalue.suffix"),d("currentvalue.offset"),l.coerceFont(d,"currentvalue.font",p.font)),d("transition.duration"),d("transition.easing"),d("bgcolor"),d("activebgcolor"),d("bordercolor"),d("borderwidth"),d("ticklen"),d("tickwidth"),d("tickcolor"),d("minorticklen")}
function m(n,p){function c(f,k){return l.coerce(n,p,e,f,k)}if("skip"===n.method||Array.isArray(n.args)?c("visible"):p.visible=!1){c("method");c("args");var d=c("label","step-"+p._index);c("value",d);c("execute")}}var l=b("../../lib"),h=b("../../plots/array_container_defaults"),a=b("./attributes"),g=b("./constants").name,e=a.steps;K.exports=function(n,p){h(n,p,{name:g,handleItemDefaults:q})}},{"../../lib":778,"../../plots/array_container_defaults":823,"./attributes":733,"./constants":734}],736:[function(b,
K,G){function q(M,N){M=M[J.name];for(var T=[],Q=0;Q<M.length;Q++){var U=M[Q];U.visible&&(U._gd=N,T.push(U))}return T}function m(M){return M._index}function l(M,N){var T=A.tester.selectAll("g."+J.labelGroupClass).data(N._visibleSteps);T.enter().append("g").classed(J.labelGroupClass,!0);var Q=0,U=0;T.each(function(aa){var fa=z.select(this);if(aa=e(fa,{step:aa},N).node())aa=A.bBox(aa),U=Math.max(U,aa.height),Q=Math.max(Q,aa.width)});T.remove();var S=N._dims={};S.inputAreaWidth=Math.max(J.railWidth,J.gripHeight);
var X=M._fullLayout._size;S.lx=X.l+X.w*N.x;S.ly=X.t+X.h*(1-N.y);S.outerLength="fraction"===N.lenmode?Math.round(X.w*N.len):N.len;S.inputAreaStart=0;S.inputAreaLength=Math.round(S.outerLength-N.pad.l-N.pad.r);S.labelStride=Math.max(1,Math.ceil((Q+J.labelPadding)/((S.inputAreaLength-2*J.stepInset)/(N._stepCount-1))));S.labelHeight=U;S.currentValueMaxWidth=0;S.currentValueHeight=0;S.currentValueTotalHeight=0;S.currentValueMaxLines=1;if(N.currentvalue.visible){var Z=A.tester.append("g");T.each(function(aa){var fa=
a(Z,N,aa.label);aa=fa.node()&&A.bBox(fa.node())||{width:0,height:0};fa=F.lineCount(fa);S.currentValueMaxWidth=Math.max(S.currentValueMaxWidth,Math.ceil(aa.width));S.currentValueHeight=Math.max(S.currentValueHeight,Math.ceil(aa.height));S.currentValueMaxLines=Math.max(S.currentValueMaxLines,fa)});S.currentValueTotalHeight=S.currentValueHeight+N.currentvalue.offset;Z.remove()}S.height=S.currentValueTotalHeight+J.tickOffset+N.ticklen+J.labelOffset+S.labelHeight+N.pad.t+N.pad.b;T="left";t.isRightAnchor(N)&&
(S.lx-=S.outerLength,T="right");t.isCenterAnchor(N)&&(S.lx-=S.outerLength/2,T="center");X="top";t.isBottomAnchor(N)&&(S.ly-=S.height,X="bottom");t.isMiddleAnchor(N)&&(S.ly-=S.height/2,X="middle");S.outerLength=Math.ceil(S.outerLength);S.height=Math.ceil(S.height);S.lx=Math.round(S.lx);S.ly=Math.round(S.ly);X={y:N.y,b:S.height*P[X],t:S.height*H[X]};"fraction"===N.lenmode?(X.l=0,X.xl=N.x-N.len*H[T],X.r=0,X.xr=N.x+N.len*P[T]):(X.x=N.x,X.l=S.outerLength*H[T],X.r=S.outerLength*P[T]);y.autoMargin(M,J.autoMarginIdRoot+
N._index,X)}function h(M,N,T){(T.steps[T.active]||{}).visible||(T.active=T._visibleSteps[0]._index);N.call(a,T).call(C,T).call(n,T).call(f,T).call(x,M,T).call(g,M,T);M=T._dims;A.setTranslate(N,M.lx+T.pad.l,M.ly+T.pad.t);N.call(r,T,!1);N.call(a,T)}function a(M,N,T){if(N.currentvalue.visible){var Q=N._dims;switch(N.currentvalue.xanchor){case "right":var U=Q.inputAreaLength-J.currentValueInset-Q.currentValueMaxWidth;var S="left";break;case "center":U=.5*Q.inputAreaLength;S="middle";break;default:U=J.currentValueInset,
S="left"}M=t.ensureSingle(M,"text",J.labelClass,function(aa){aa.attr({"text-anchor":S,"data-notex":1})});var X=N.currentvalue.prefix?N.currentvalue.prefix:"";if("string"===typeof T)X+=T;else{T=N.steps[N.active].label;var Z=N._gd._fullLayout._meta;Z&&(T=t.templateString(T,Z));X+=T}N.currentvalue.suffix&&(X+=N.currentvalue.suffix);M.call(A.font,N.currentvalue.font).text(X).call(F.convertToTspans,N._gd);X=F.lineCount(M);F.positionText(M,U,(Q.currentValueMaxLines+1-X)*N.currentvalue.font.size*L);return M}}
function g(M,N,T){t.ensureSingle(M,"rect",J.gripRectClass,function(Q){Q.call(d,N,M,T).style("pointer-events","all")}).attr({width:J.gripWidth,height:J.gripHeight,rx:J.gripRadius,ry:J.gripRadius}).call(D.stroke,T.bordercolor).call(D.fill,T.bgcolor).style("stroke-width",T.borderwidth+"px")}function e(M,N,T){M=t.ensureSingle(M,"text",J.labelClass,function(U){U.attr({"text-anchor":"middle","data-notex":1})});N=N.step.label;var Q=T._gd._fullLayout._meta;Q&&(N=t.templateString(N,Q));M.call(A.font,T.font).text(N).call(F.convertToTspans,
T._gd);return M}function n(M,N){M=t.ensureSingle(M,"g",J.labelsClass);var T=N._dims;M=M.selectAll("g."+J.labelGroupClass).data(T.labelSteps);M.enter().append("g").classed(J.labelGroupClass,!0);M.exit().remove();M.each(function(Q){var U=z.select(this);U.call(e,Q,N);A.setTranslate(U,u(N,Q.fraction),J.tickOffset+N.ticklen+N.font.size*L+J.labelOffset+T.currentValueTotalHeight)})}function p(M,N,T,Q,U){Q=T._visibleSteps[Math.round(Q*(T._stepCount-1))]._index;Q!==T.active&&c(M,N,T,Q,!0,U)}function c(M,N,
T,Q,U,S){var X=T.active;T.active=Q;I(M.layout,J.name,T).applyUpdate("active",Q);Q=T.steps[T.active];N.call(r,T,S);N.call(a,T);M.emit("plotly_sliderchange",{slider:T,step:T.steps[T.active],interaction:U,previousActive:X});Q&&Q.method&&U&&(N._nextMethod?(N._nextMethod.step=Q,N._nextMethod.doCallback=U,N._nextMethod.doTransition=S):(N._nextMethod={step:Q,doCallback:U,doTransition:S},N._nextMethodRaf=window.requestAnimationFrame(function(){var Z=N._nextMethod.step;Z.method&&(Z.execute&&y.executeAPICommand(M,
Z.method,Z.args),N._nextMethod=null,N._nextMethodRaf=null)})))}function d(M,N,T){var Q=T.node(),U=z.select(N);M.on("mousedown",function(){var S=T.data()[0];N.emit("plotly_sliderstart",{slider:S});var X=T.select("."+J.gripRectClass);z.event.stopPropagation();z.event.preventDefault();X.call(D.fill,S.activebgcolor);var Z=v(S,z.mouse(Q)[0]);p(N,T,S,Z,!0);S._dragging=!0;U.on("mousemove",function(){var aa=T.data()[0],fa=v(aa,z.mouse(Q)[0]);p(N,T,aa,fa,!1)});U.on("mouseup",function(){var aa=T.data()[0];
aa._dragging=!1;X.call(D.fill,aa.bgcolor);U.on("mouseup",null);U.on("mousemove",null);N.emit("plotly_sliderend",{slider:aa,step:aa.steps[aa.active]})})})}function f(M,N){M=M.selectAll("rect."+J.tickRectClass).data(N._visibleSteps);var T=N._dims;M.enter().append("rect").classed(J.tickRectClass,!0);M.exit().remove();M.attr({width:N.tickwidth+"px","shape-rendering":"crispEdges"});M.each(function(Q,U){Q=0===U%T.labelStride;var S=z.select(this);S.attr({height:Q?N.ticklen:N.minorticklen}).call(D.fill,N.tickcolor);
A.setTranslate(S,u(N,U/(N._stepCount-1))-.5*N.tickwidth,(Q?J.tickOffset:J.minorTickOffset)+T.currentValueTotalHeight)})}function k(M){var N=M._dims;N.labelSteps=[];for(var T=M._stepCount,Q=0;Q<T;Q+=N.labelStride)N.labelSteps.push({fraction:Q/(T-1),step:M._visibleSteps[Q]})}function r(M,N,T){M=M.select("rect."+J.gripRectClass);for(var Q=0,U=0;U<N._stepCount;U++)if(N._visibleSteps[U]._index===N.active){Q=U;break}Q=u(N,Q/(N._stepCount-1));N._invokingCommand||(T&&0<N.transition.duration&&(M=M.transition().duration(N.transition.duration).ease(N.transition.easing)),
M.attr("transform",B(Q-.5*J.gripWidth,N._dims.currentValueTotalHeight)))}function u(M,N){M=M._dims;return M.inputAreaStart+J.stepInset+(M.inputAreaLength-2*J.stepInset)*Math.min(1,Math.max(0,N))}function v(M,N){M=M._dims;return Math.min(1,Math.max(0,(N-J.stepInset-M.inputAreaStart)/(M.inputAreaLength-2*J.stepInset-2*M.inputAreaStart)))}function x(M,N,T){var Q=T._dims,U=t.ensureSingle(M,"rect",J.railTouchRectClass,function(S){S.call(d,N,M,T).style("pointer-events","all")});U.attr({width:Q.inputAreaLength,
height:Math.max(Q.inputAreaWidth,J.tickOffset+T.ticklen+Q.labelHeight)}).call(D.fill,T.bgcolor).attr("opacity",0);A.setTranslate(U,0,Q.currentValueTotalHeight)}function C(M,N){var T=N._dims,Q=T.inputAreaLength-2*J.railInset;M=t.ensureSingle(M,"rect",J.railRectClass);M.attr({width:Q,height:J.railWidth,rx:J.railRadius,ry:J.railRadius,"shape-rendering":"crispEdges"}).call(D.stroke,N.bordercolor).call(D.fill,N.bgcolor).style("stroke-width",N.borderwidth+"px");A.setTranslate(M,J.railInset,.5*(T.inputAreaWidth-
J.railWidth)+T.currentValueTotalHeight)}var z=b("d3"),y=b("../../plots/plots"),D=b("../color"),A=b("../drawing"),t=b("../../lib"),B=t.strTranslate,F=b("../../lib/svg_text_utils"),I=b("../../plot_api/plot_template").arrayEditor,J=b("./constants");b=b("../../constants/alignment");var L=b.LINE_SPACING,H=b.FROM_TL,P=b.FROM_BR;K.exports=function(M){function N(S){S._commandObserver&&(S._commandObserver.remove(),delete S._commandObserver);y.autoMargin(M,J.autoMarginIdRoot+S._index)}var T=M._fullLayout,Q=
q(T,M);T=T._infolayer.selectAll("g."+J.containerClassName).data(0<Q.length?[0]:[]);T.enter().append("g").classed(J.containerClassName,!0).style("cursor","ew-resize");T.exit().each(function(){z.select(this).selectAll("g."+J.groupClassName).each(N)}).remove();if(0!==Q.length){T=T.selectAll("g."+J.groupClassName).data(Q,m);T.enter().append("g").classed(J.groupClassName,!0);T.exit().each(N).remove();for(var U=0;U<Q.length;U++)l(M,Q[U]);T.each(function(S){var X=z.select(this);k(S);y.manageCommandObserver(M,
S,S._visibleSteps,function(Z){var aa=X.data()[0];aa.active!==Z.index&&(aa._dragging||c(M,X,aa,Z.index,!1,!0))});h(M,z.select(this),S)})}}},{"../../constants/alignment":745,"../../lib":778,"../../lib/svg_text_utils":803,"../../plot_api/plot_template":817,"../../plots/plots":891,"../color":643,"../drawing":665,"./constants":734,d3:169}],737:[function(b,K,G){G=b("./constants");K.exports={moduleType:"component",name:G.name,layoutAttributes:b("./attributes"),supplyLayoutDefaults:b("./defaults"),draw:b("./draw")}},
{"./attributes":733,"./constants":734,"./defaults":735,"./draw":736}],738:[function(b,K,G){var q=b("d3"),m=b("fast-isnumeric"),l=b("../../plots/plots"),h=b("../../registry"),a=b("../../lib"),g=a.strTranslate,e=b("../drawing"),n=b("../color"),p=b("../../lib/svg_text_utils"),c=b("../../constants/interactions"),d=b("../../constants/alignment").OPPOSITE_SIDE,f=/ [XY][0-9]* /;K.exports={draw:function(k,r,u){function v(X){a.syncOrAsync([x,C],X)}function x(X){if(F){var Z="";F.rotate&&(Z+="rotate("+[F.rotate,
B.x,B.y]+")");F.offset&&(Z+=g(0,F.offset))}else Z=null;X.attr("transform",Z);X.style({"font-family":N,"font-size":q.round(T,2)+"px",fill:n.rgb(Q),opacity:L*n.opacity(Q),"font-weight":l.fontWeight}).attr(B).call(p.convertToTspans,k);return l.previousPromises(k)}function C(X){X=q.select(X.node().parentNode);if(t&&t.selection&&t.side&&M){X.attr("transform",null);var Z=d[t.side],aa="left"===t.side||"top"===t.side?-1:1,fa=m(t.pad)?t.pad:2,ha=e.bBox(X.node()),ja={left:0,top:0,right:J.width,bottom:J.height};
ja=t.maxShift||aa*(ja[t.side]-ha[t.side]);var ba=0;if(0>ja)ba=ja;else{var ma=t.offsetLeft||0,qa=t.offsetTop||0;ha.left-=ma;ha.right-=ma;ha.top-=qa;ha.bottom-=qa;t.selection.each(function(){var ka=e.bBox(this);a.bBoxIntersect(ha,ka,fa)&&(ba=Math.max(ba,aa*(ka[t.side]-ha[Z])+fa))});ba=Math.min(ja,ba)}if(0<ba||0>ja)ja={left:[-ba,0],right:[ba,0],top:[0,-ba],bottom:[0,ba]}[t.side],X.attr("transform",g(ja[0],ja[1]))}}function z(){L=0;H=!0;S.text(D).on("mouseover.opacity",function(){q.select(this).transition().duration(c.SHOW_PLACEHOLDER).style("opacity",
1)}).on("mouseout.opacity",function(){q.select(this).transition().duration(c.HIDE_PLACEHOLDER).style("opacity",0)})}var y=u.propName,D=u.placeholder,A=u.traceIndex,t=u.avoid||{},B=u.attributes,F=u.transform,I=u.containerGroup,J=k._fullLayout,L=1,H=!1,P=u.propContainer.title,M=(P&&P.text?P.text:"").trim();P=P&&P.font?P.font:{};var N=P.family,T=P.size,Q=P.color,U;"title.text"===y?U="titleText":-1!==y.indexOf("axis")?U="axisTitleText":y.indexOf(!0)&&(U="colorbarTitleText");U=k._context.edits[U];""===
M?L=0:M.replace(f," % ")===D.replace(f," % ")&&(L=.2,H=!0,U||(M=""));u._meta?M=a.templateString(M,u._meta):J._meta&&(M=a.templateString(M,J._meta));u=M||U;I||(I=a.ensureSingle(J._infolayer,"g","g-"+r));var S=I.selectAll("text").data(u?[0]:[]);S.enter().append("text");S.text(M).attr("class",r);S.exit().remove();if(!u)return I;S.call(v);if(U){if(M)S.on(".opacity",null);else z();S.call(p.makeEditable,{gd:k}).on("edit",function(X){void 0!==A?h.call("_guiRestyle",k,y,X,A):h.call("_guiRelayout",k,y,X)}).on("cancel",
function(){this.text(this.attr("data-unformatted")).call(v)}).on("input",function(X){this.text(X||" ").call(p.positionText,B.x,B.y)})}S.classed("js-placeholder",H);return I}}},{"../../constants/alignment":745,"../../constants/interactions":752,"../../lib":778,"../../lib/svg_text_utils":803,"../../plots/plots":891,"../../registry":911,"../color":643,"../drawing":665,d3:169,"fast-isnumeric":241}],739:[function(b,K,G){G=b("../../plots/font_attributes");var q=b("../color/attributes"),m=b("../../lib/extend").extendFlat,
l=b("../../plot_api/edit_types").overrideAll,h=b("../../plots/pad_attributes");b=b("../../plot_api/plot_template").templatedArray;var a=b("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},
execute:{valType:"boolean",dflt:!0}});K.exports=l(b("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:a,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center",
"right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:m(h({editType:"arraydraw"}),{}),font:G({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:q.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":768,"../../plot_api/edit_types":810,"../../plot_api/plot_template":817,"../../plots/font_attributes":856,"../../plots/pad_attributes":890,
"../color/attributes":642}],740:[function(b,K,G){K.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",
autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25c4",right:"\u25ba",up:"\u25b2",down:"\u25bc"}}},{}],741:[function(b,K,G){function q(n,p,c){function d(k,r){return l.coerce(n,p,a,k,r)}var f=h(n,p,{name:"buttons",handleItemDefaults:m});d("visible",0<f.length)&&(d("active"),d("direction"),d("type"),
d("showactive"),d("x"),d("y"),l.noneOrAll(n,p,["x","y"]),d("xanchor"),d("yanchor"),d("pad.t"),d("pad.r"),d("pad.b"),d("pad.l"),l.coerceFont(d,"font",c.font),d("bgcolor",c.paper_bgcolor),d("bordercolor"),d("borderwidth"))}function m(n,p){function c(d,f){return l.coerce(n,p,e,d,f)}c("visible","skip"===n.method||Array.isArray(n.args))&&(c("method"),c("args"),c("args2"),c("label"),c("execute"))}var l=b("../../lib"),h=b("../../plots/array_container_defaults"),a=b("./attributes"),g=b("./constants").name,
e=a.buttons;K.exports=function(n,p){h(n,p,{name:g,handleItemDefaults:q})}},{"../../lib":778,"../../plots/array_container_defaults":823,"./attributes":739,"./constants":740}],742:[function(b,K,G){function q(J){return J._index}function m(J,L){return+J.attr(F.menuIndexAttrName)===L._index}function l(J,L,H,P,M,N,T,Q){L.active=T;t(J.layout,F.name,L).applyUpdate("active",T);"buttons"===L.type?a(J,P,null,null,L):"dropdown"===L.type&&(M.attr(F.menuIndexAttrName,"-1"),h(J,P,M,N,L),Q||a(J,P,M,N,L))}function h(J,
L,H,P,M){var N=D.ensureSingle(L,"g",F.headerClassName,function(S){S.style("pointer-events","all")}),T=M._dims,Q={y:M.pad.t,yPad:0,x:M.pad.l,xPad:0,index:0},U={width:T.headerWidth,height:T.headerHeight};N.call(n,M,M.buttons[M.active]||F.blankHeaderOpts,J).call(u,M,Q,U);D.ensureSingle(L,"text",F.headerArrowClassName,function(S){S.attr("text-anchor","end").call(y.font,M.font).text(F.arrowSymbol[M.direction])}).attr({x:T.headerWidth-F.arrowOffsetX+M.pad.l,y:T.headerHeight/2+F.textOffsetY+M.pad.t});N.on("click",
function(){H.call(v,String(m(H,M)?-1:M._index));a(J,L,H,P,M)});N.on("mouseover",function(){N.call(f)});N.on("mouseout",function(){N.call(k,M)});y.setTranslate(L,T.lx,T.ly)}function a(J,L,H,P,M){H||(H=L,H.attr("pointer-events","all"));var N=-1!==+H.attr(F.menuIndexAttrName)||"buttons"===M.type?M.buttons:[],T="dropdown"===M.type?F.dropdownButtonClassName:F.buttonClassName,Q=H.selectAll("g."+T).data(D.filterVisible(N));N=Q.enter().append("g").classed(T,!0);T=Q.exit();"dropdown"===M.type?(N.attr("opacity",
"0").transition().attr("opacity","1"),T.transition().attr("opacity","0").remove()):T.remove();var U=0,S=0;N=M._dims;T=-1!==["up","down"].indexOf(M.direction);"dropdown"===M.type&&(T?S=N.headerHeight+F.gapButtonHeader:U=N.headerWidth+F.gapButtonHeader);"dropdown"===M.type&&"up"===M.direction&&(S=-F.gapButtonHeader+F.gapButton-N.openHeight);"dropdown"===M.type&&"left"===M.direction&&(U=-F.gapButtonHeader+F.gapButton-N.openWidth);var X={x:N.lx+U+M.pad.l,y:N.ly+S+M.pad.t,yPad:F.gapButton,xPad:F.gapButton,
index:0};U={l:X.x+M.borderwidth,t:X.y+M.borderwidth};Q.each(function(Z,aa){var fa=x.select(this);fa.call(n,M,Z,J).call(u,M,X);fa.on("click",function(){x.event.defaultPrevented||(Z.execute&&(Z.args2&&M.active===aa?(l(J,M,Z,L,H,P,-1),C.executeAPICommand(J,Z.method,Z.args2)):(l(J,M,Z,L,H,P,aa),C.executeAPICommand(J,Z.method,Z.args))),J.emit("plotly_buttonclicked",{menu:M,button:Z,active:M.active}))});fa.on("mouseover",function(){fa.call(f)});fa.on("mouseout",function(){fa.call(k,M);Q.call(d,M)})});Q.call(d,
M);T?(U.w=Math.max(N.openWidth,N.headerWidth),U.h=X.y-U.t):(U.w=X.x-U.l,U.h=Math.max(N.openHeight,N.headerHeight));U.direction=M.direction;P&&(Q.size()?g(J,L,H,P,M,U):e(P))}function g(J,L,H,P,M,N){L=M.direction;J=M._dims;M=M.active;var T,Q;if("up"===L||"down"===L)for(L=Q=0;L<M;L++)Q+=J.heights[L]+F.gapButton;else for(L=T=0;L<M;L++)T+=J.widths[L]+F.gapButton;P.enable(N,T,Q);P.hbar&&P.hbar.attr("opacity","0").transition().attr("opacity","1");P.vbar&&P.vbar.attr("opacity","0").transition().attr("opacity",
"1")}function e(J){var L=!!J.hbar,H=!!J.vbar;L&&J.hbar.transition().attr("opacity","0").each("end",function(){L=!1;H||J.disable()});H&&J.vbar.transition().attr("opacity","0").each("end",function(){H=!1;L||J.disable()})}function n(J,L,H,P){J.call(p,L).call(c,L,H,P)}function p(J,L){D.ensureSingle(J,"rect",F.itemRectClassName,function(H){H.attr({rx:F.rx,ry:F.ry,"shape-rendering":"crispEdges"})}).call(z.stroke,L.bordercolor).call(z.fill,L.bgcolor).style("stroke-width",L.borderwidth+"px")}function c(J,
L,H,P){J=D.ensureSingle(J,"text",F.itemTextClassName,function(N){N.attr({"text-anchor":"start","data-notex":1})});H=H.label;var M=P._fullLayout._meta;M&&(H=D.templateString(H,M));J.call(y.font,L.font).text(H).call(A.convertToTspans,P)}function d(J,L){var H=L.active;J.each(function(P,M){P=x.select(this);M===H&&L.showactive&&P.select("rect."+F.itemRectClassName).call(z.fill,F.activeColor)})}function f(J){J.select("rect."+F.itemRectClassName).call(z.fill,F.hoverColor)}function k(J,L){J.select("rect."+
F.itemRectClassName).call(z.fill,L.bgcolor)}function r(J,L){var H=L._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},P=y.tester.selectAll("g."+F.dropdownButtonClassName).data(D.filterVisible(L.buttons));P.enter().append("g").classed(F.dropdownButtonClassName,!0);var M=-1!==["up","down"].indexOf(L.direction);P.each(function(U,S){var X=x.select(this);X.call(n,L,U,J);X=X.select("."+F.itemTextClassName);U=X.node()&&y.bBox(X.node()).width;U=
Math.max(U+F.textPadX,F.minWidth);var Z=L.font.size*B;X=A.lineCount(X);X=Math.max(Z*X,F.minHeight)+F.textOffsetY;X=Math.ceil(X);U=Math.ceil(U);H.widths[S]=U;H.heights[S]=X;H.height1=Math.max(H.height1,X);H.width1=Math.max(H.width1,U);M?(H.totalWidth=Math.max(H.totalWidth,U),H.openWidth=H.totalWidth,H.totalHeight+=X+F.gapButton,H.openHeight+=X+F.gapButton):(H.totalWidth+=U+F.gapButton,H.openWidth+=U+F.gapButton,H.totalHeight=Math.max(H.totalHeight,X),H.openHeight=H.totalHeight)});M?H.totalHeight-=
F.gapButton:H.totalWidth-=F.gapButton;H.headerWidth=H.width1+F.arrowPadX;H.headerHeight=H.height1;"dropdown"===L.type&&(M?(H.width1+=F.arrowPadX,H.totalHeight=H.height1):H.totalWidth=H.width1,H.totalWidth+=F.arrowPadX);P.remove();P=H.totalWidth+L.pad.l+L.pad.r;var N=H.totalHeight+L.pad.t+L.pad.b,T=J._fullLayout._size;H.lx=T.l+T.w*L.x;H.ly=T.t+T.h*(1-L.y);T="left";D.isRightAnchor(L)&&(H.lx-=P,T="right");D.isCenterAnchor(L)&&(H.lx-=P/2,T="center");var Q="top";D.isBottomAnchor(L)&&(H.ly-=N,Q="bottom");
D.isMiddleAnchor(L)&&(H.ly-=N/2,Q="middle");H.totalWidth=Math.ceil(H.totalWidth);H.totalHeight=Math.ceil(H.totalHeight);H.lx=Math.round(H.lx);H.ly=Math.round(H.ly);C.autoMargin(J,F.autoMarginIdRoot+L._index,{x:L.x,y:L.y,l:P*({right:1,center:.5}[T]||0),r:P*({left:1,center:.5}[T]||0),b:N*({top:1,middle:.5}[Q]||0),t:N*({bottom:1,middle:.5}[Q]||0)})}function u(J,L,H,P){P=P||{};var M=J.select("."+F.itemRectClassName),N=J.select("."+F.itemTextClassName),T=L.borderwidth,Q=H.index,U=L._dims;y.setTranslate(J,
T+H.x,T+H.y);J=-1!==["up","down"].indexOf(L.direction);T=P.height||(J?U.heights[Q]:U.height1);M.attr({x:0,y:0,width:P.width||(J?U.width1:U.widths[Q]),height:T});L=L.font.size*B;P=A.lineCount(N);A.positionText(N,F.textOffsetX,T/2-(P-1)*L/2+F.textOffsetY);J?H.y+=U.heights[Q]+H.yPad:H.x+=U.widths[Q]+H.xPad;H.index++}function v(J,L){J.attr(F.menuIndexAttrName,L||"-1").selectAll("g."+F.dropdownButtonClassName).remove()}var x=b("d3"),C=b("../../plots/plots"),z=b("../color"),y=b("../drawing"),D=b("../../lib"),
A=b("../../lib/svg_text_utils"),t=b("../../plot_api/plot_template").arrayEditor,B=b("../../constants/alignment").LINE_SPACING,F=b("./constants"),I=b("./scrollbox");K.exports=function(J){function L(U){C.autoMargin(J,F.autoMarginIdRoot+U._index)}var H=J._fullLayout,P=D.filterVisible(H[F.name]),M=H._menulayer.selectAll("g."+F.containerClassName).data(0<P.length?[0]:[]);M.enter().append("g").classed(F.containerClassName,!0).style("cursor","pointer");M.exit().each(function(){x.select(this).selectAll("g."+
F.headerGroupClassName).each(L)}).remove();if(0!==P.length){var N=M.selectAll("g."+F.headerGroupClassName).data(P,q);N.enter().append("g").classed(F.headerGroupClassName,!0);var T=D.ensureSingle(M,"g",F.dropdownButtonGroupClassName,function(U){U.style("pointer-events","all")});for(M=0;M<P.length;M++)r(J,P[M]);var Q=new I(J,T,"updatemenus"+H._uid);N.enter().size()&&(T.node().parentNode.appendChild(T.node()),T.call(v));N.exit().each(function(U){T.call(v);L(U)}).remove();N.each(function(U){var S=x.select(this),
X="dropdown"===U.type?T:null;C.manageCommandObserver(J,U,U.buttons,function(Z){l(J,U,U.buttons[Z.index],S,X,Q,Z.index,!0)});"dropdown"===U.type?(h(J,S,T,Q,U),m(T,U)&&a(J,S,T,Q,U)):a(J,S,null,null,U)})}}},{"../../constants/alignment":745,"../../lib":778,"../../lib/svg_text_utils":803,"../../plot_api/plot_template":817,"../../plots/plots":891,"../color":643,"../drawing":665,"./constants":740,"./scrollbox":744,d3:169}],743:[function(b,K,G){arguments[4][737][0].apply(G,arguments)},{"./attributes":739,
"./constants":740,"./defaults":741,"./draw":742,dup:737}],744:[function(b,K,G){function q(g,e,n){this.gd=g;this.container=e;this.id=n;this.vbar=this.hbar=this.translateY=this.translateX=this.position=null;this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]);this.bg.exit().on(".drag",null).on("wheel",null).remove();this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}K.exports=q;var m=b("d3"),l=b("../color"),h=
b("../drawing"),a=b("../../lib");q.barWidth=2;q.barLength=20;q.barRadius=2;q.barPad=1;q.barColor="#808BA4";q.prototype.enable=function(g,e,n){var p=this.gd._fullLayout,c=p.width,d=p.height;this.position=g;g=this.position.l;var f=this.position.w,k=this.position.t,r=this.position.h,u=this.position.direction,v="down"===u,x="left"===u,C="up"===u,z=f,y=r;v||x||"right"===u||C||(this.position.direction="down",v=!0);if(v||C){var D=g;var A=D+z;v?(C=k,u=Math.min(C+y,d)):(u=k+y,C=Math.max(u-y,0));y=u-C}else C=
k,u=C+y,x?(A=g+z,D=Math.max(A-z,0)):(D=g,A=Math.min(D+z,c)),z=A-D;this._box={l:D,t:C,w:z,h:y};v=f>z;var t=q.barLength+2*q.barPad;x=q.barWidth+2*q.barPad;var B=k+r;B+x>d&&(B=d-x);d=this.container.selectAll("rect.scrollbar-horizontal").data(v?[0]:[]);d.exit().on(".drag",null).remove();d.enter().append("rect").classed("scrollbar-horizontal",!0).call(l.fill,q.barColor);v?(this.hbar=d.attr({rx:q.barRadius,ry:q.barRadius,x:g,y:B,width:t,height:x}),this._hbarXMin=g+t/2,this._hbarTranslateMax=z-t):(delete this.hbar,
delete this._hbarXMin,delete this._hbarTranslateMax);d=r>y;z=q.barWidth+2*q.barPad;t=q.barLength+2*q.barPad;B=g+f;B+z>c&&(B=c-z);c=this.container.selectAll("rect.scrollbar-vertical").data(d?[0]:[]);c.exit().on(".drag",null).remove();c.enter().append("rect").classed("scrollbar-vertical",!0).call(l.fill,q.barColor);d?(this.vbar=c.attr({rx:q.barRadius,ry:q.barRadius,x:B,y:k,width:z,height:t}),this._vbarYMin=k+t/2,this._vbarTranslateMax=y-t):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);
c=this.id;y=D-.5;A=d?A+z+.5:A+.5;C-=.5;u=v?u+x+.5:u+.5;p=p._topdefs.selectAll("#"+c).data(v||d?[0]:[]);p.exit().remove();p.enter().append("clipPath").attr("id",c).append("rect");v||d?(this._clipRect=p.select("rect").attr({x:Math.floor(y),y:Math.floor(C),width:Math.ceil(A)-Math.floor(y),height:Math.ceil(u)-Math.floor(C)}),this.container.call(h.setClipUrl,c,this.gd),this.bg.attr({x:g,y:k,width:f,height:r})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(h.setClipUrl,
null),delete this._clipRect);if(v||d)p=m.behavior.drag().on("dragstart",function(){m.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this)),this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(p),p=m.behavior.drag().on("dragstart",function(){m.event.sourceEvent.preventDefault();m.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this)),v&&this.hbar.on(".drag",null).call(p),d&&this.vbar.on(".drag",null).call(p);this.setTranslate(e,
n)};q.prototype.disable=function(){if(this.hbar||this.vbar)this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(h.setClipUrl,null),delete this._clipRect;this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)};q.prototype._onBoxDrag=function(){var g=this.translateX,e=
this.translateY;this.hbar&&(g-=m.event.dx);this.vbar&&(e-=m.event.dy);this.setTranslate(g,e)};q.prototype._onBoxWheel=function(){var g=this.translateX,e=this.translateY;this.hbar&&(g+=m.event.deltaY);this.vbar&&(e+=m.event.deltaY);this.setTranslate(g,e)};q.prototype._onBarDrag=function(){var g=this.translateX,e=this.translateY;if(this.hbar){g+=this._hbarXMin;var n=g+this._hbarTranslateMax;g=(a.constrain(m.event.x,g,n)-g)/(n-g)*(this.position.w-this._box.w)}this.vbar&&(e+=this._vbarYMin,n=e+this._vbarTranslateMax,
e=(a.constrain(m.event.y,e,n)-e)/(n-e)*(this.position.h-this._box.h));this.setTranslate(g,e)};q.prototype.setTranslate=function(g,e){var n=this.position.w-this._box.w,p=this.position.h-this._box.h;g=a.constrain(g||0,0,n);e=a.constrain(e||0,0,p);this.translateX=g;this.translateY=e;this.container.call(h.setTranslate,this._box.l-this.position.l-g,this._box.t-this.position.t-e);this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+g-.5),y:Math.floor(this.position.t+e-.5)});this.hbar&&this.hbar.call(h.setTranslate,
g+g/n*this._hbarTranslateMax,e);this.vbar&&this.vbar.call(h.setTranslate,g,e+e/p*this._vbarTranslateMax)}},{"../../lib":778,"../color":643,"../drawing":665,d3:169}],745:[function(b,K,G){K.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],746:[function(b,
K,G){K.exports={axisRefDescription:function(q,m,l){return["If set to a",q,"axis id (e.g. *"+q+"* or","*"+q+"2*), the `"+q+"` position refers to a",q,"coordinate. If set to *paper*, the `"+q+"`","position refers to the distance from the",m,"of the plotting area in normalized coordinates where *0* (*1*) corresponds to the",m,"("+l+"). If set to a",q,"axis ID followed by *domain* (separated by a space), the position behaves like for *paper*, but refers to the distance in fractions of the domain length from the",
m,"of the domain of that axis: e.g.,","*"+q+"2 domain* refers to the domain of the second",q," axis and a",q,"position of 0.5 refers to the point between the",m,"and the",l,"of the domain of the second",q,"axis."].join(" ")}}},{}],747:[function(b,K,G){K.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"\u25b2"},DECREASING:{COLOR:"#FF4136",SYMBOL:"\u25bc"}}},{}],748:[function(b,K,G){K.exports={FORMAT_LINK:"https://github.com/d3/d3-3.x-api-reference/blob/master/Formatting.md#d3_format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format#locale_format"}},
{}],749:[function(b,K,G){K.exports={COMPARISON_OPS:"= != < >= > <=".split(" "),COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:"[] () [) (] ][ )( ]( )[".split(" "),SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},{}],750:[function(b,K,G){K.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},
{}],751:[function(b,K,G){K.exports={circle:"\u25cf","circle-open":"\u25cb",square:"\u25a0","square-open":"\u25a1",diamond:"\u25c6","diamond-open":"\u25c7",cross:"+",x:"\u274c"}},{}],752:[function(b,K,G){K.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1E3,DESELECTDIM:.2}},{}],753:[function(b,K,G){K.exports={BADNUM:void 0,FP_SAFE:Number.MAX_VALUE/1E4,ONEMAXYEAR:316224E5,ONEAVGYEAR:315576E5,ONEMINYEAR:31536E6,ONEMAXQUARTER:79488E5,ONEAVGQUARTER:78894E5,ONEMINQUARTER:76896E5,ONEMAXMONTH:26784E5,ONEAVGMONTH:26298E5,
ONEMINMONTH:24192E5,ONEWEEK:6048E5,ONEDAY:864E5,ONEHOUR:36E5,ONEMIN:6E4,ONESEC:1E3,EPOCHJD:2440587.5,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:"\u2212"}},{}],754:[function(b,K,G){G.xmlns="http://www.w3.org/2000/xmlns/";G.svg="http://www.w3.org/2000/svg";G.xlink="http://www.w3.org/1999/xlink";G.svgAttrs={xmlns:G.svg,"xmlns:xlink":G.xlink}},{}],755:[function(b,K,G){G.version=b("./version").version;b("es6-promise").polyfill();b("../build/plotcss");b("./fonts/mathjax_config")();K=b("./registry");K=
G.register=K.register;for(var q=b("./plot_api"),m=Object.keys(q),l=0;l<m.length;l++){var h=m[l];"_"!==h.charAt(0)&&(G[h]=q[h]);K({moduleType:"apiMethod",name:h,fn:q[h]})}K(b("./traces/scatter"));K([b("./components/legend"),b("./components/fx"),b("./components/annotations"),b("./components/annotations3d"),b("./components/shapes"),b("./components/images"),b("./components/updatemenus"),b("./components/sliders"),b("./components/rangeslider"),b("./components/rangeselector"),b("./components/grid"),b("./components/errorbars"),
b("./components/colorscale"),b("./components/colorbar")]);K([b("./locale-en"),b("./locale-en-us")]);window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(K(window.PlotlyLocales),delete window.PlotlyLocales);G.Icons=b("./fonts/ploticon");G.Plots=b("./plots/plots");G.Fx=b("./components/fx");G.Snapshot=b("./snapshot");G.PlotSchema=b("./plot_api/plot_schema");G.Queue=b("./lib/queue");G.d3=b("d3")},{"../build/plotcss":1,"./components/annotations":634,"./components/annotations3d":639,"./components/colorbar":649,
"./components/colorscale":655,"./components/errorbars":671,"./components/fx":683,"./components/grid":687,"./components/images":692,"./components/legend":700,"./components/rangeselector":711,"./components/rangeslider":718,"./components/shapes":732,"./components/sliders":737,"./components/updatemenus":743,"./fonts/mathjax_config":756,"./fonts/ploticon":757,"./lib/queue":794,"./locale-en":808,"./locale-en-us":807,"./plot_api":812,"./plot_api/plot_schema":816,"./plots/plots":891,"./registry":911,"./snapshot":916,
"./traces/scatter":1199,"./version":1370,d3:169,"es6-promise":224}],756:[function(b,K,G){K.exports=function(){"undefined"!==typeof MathJax&&"local"!==(window.PlotlyConfig||{}).MathJaxConfig&&(MathJax.Hub.Config({messageStyle:"none",skipStartupTypeset:!0,displayAlign:"left",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]}}),MathJax.Hub.Configured())}},{}],757:[function(b,K,G){K.exports={undo:{width:857.1,height:1E3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",
transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1E3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1E3,height:1E3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",
transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1E3,height:1E3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1E3,height:1E3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",
transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1E3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1E3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1E3,height:1E3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",
transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1E3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1E3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1E3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",
transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1E3,height:1E3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",
transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1E3,height:1E3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",
transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1E3,height:1E3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",
transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1E3,height:1E3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",
transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1E3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",
transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1E3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},
drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",
transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},
lasso:{width:1031,height:1E3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",
transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1E3,height:1E3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},
drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",
transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},
eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1E3,height:1E3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",
transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'><defs><style>.cls-1 {fill: #3f4f75;} .cls-2 {fill: #80cfbe;} .cls-3 {fill: #fff;}</style></defs><title>plotly-logomark</title><g id='symbol'><rect class='cls-1' width='132' height='132' rx='6' ry='6'/><circle class='cls-2' cx='78' cy='54' r='6'/><circle class='cls-2' cx='102' cy='30' r='6'/><circle class='cls-2' cx='78' cy='30' r='6'/><circle class='cls-2' cx='54' cy='30' r='6'/><circle class='cls-2' cx='30' cy='30' r='6'/><circle class='cls-2' cx='30' cy='54' r='6'/><path class='cls-3' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/><path class='cls-3' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/><path class='cls-3' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/><path class='cls-3' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/></g></svg>"}}},
{}],758:[function(b,K,G){G.isLeftAnchor=function(q){return"left"===q.xanchor||"auto"===q.xanchor&&q.x<=1/3};G.isCenterAnchor=function(q){return"center"===q.xanchor||"auto"===q.xanchor&&q.x>1/3&&q.x<2/3};G.isRightAnchor=function(q){return"right"===q.xanchor||"auto"===q.xanchor&&q.x>=2/3};G.isTopAnchor=function(q){return"top"===q.yanchor||"auto"===q.yanchor&&q.y>=2/3};G.isMiddleAnchor=function(q){return"middle"===q.yanchor||"auto"===q.yanchor&&q.y>1/3&&q.y<2/3};G.isBottomAnchor=function(q){return"bottom"===
q.yanchor||"auto"===q.yanchor&&q.y<=1/3}},{}],759:[function(b,K,G){function q(p){return Math.abs(p[1]-p[0])>n-1E-14}function m(p,c){return g(c-p,n)}function l(p,c){if(q(c))return!0;if(c[0]<c[1]){var d=c[0];c=c[1]}else d=c[1],c=c[0];d=a(d,n);c=a(c,n);d>c&&(c+=n);p=a(p,n);var f=p+n;return p>=d&&p<=c||f>=d&&f<=c}function h(p,c,d,f,k,r,u){function v(A,t){return[A*Math.cos(t)+k,r-A*Math.sin(t)]}function x(A,t,B){return"A"+[A,A]+" "+[0,D,B]+" "+v(A,t)}k=k||0;r=r||0;var C=q([d,f]);if(C){var z=0;var y=e;
d=n}else d<f?(z=d,d=f):z=f;p<c?(f=p,p=c):f=c;var D=Math.abs(d-z)<=e?0:1;C?C=null===f?"M"+v(p,z)+x(p,y,0)+x(p,d,0)+"Z":"M"+v(f,z)+x(f,y,0)+x(f,d,0)+"ZM"+v(p,z)+x(p,y,1)+x(p,d,1)+"Z":null===f?(C="M"+v(p,z)+x(p,d,0),u&&(C+="L0,0Z")):C="M"+v(f,z)+"L"+v(p,z)+x(p,d,0)+"L"+v(f,d)+x(f,z,1)+"Z";return C}b=b("./mod");var a=b.mod,g=b.modHalf,e=Math.PI,n=2*e;K.exports={deg2rad:function(p){return p/180*e},rad2deg:function(p){return p/e*180},angleDelta:m,angleDist:function(p,c){return Math.abs(m(p,c))},isFullCircle:q,
isAngleInsideSector:l,isPtInsideSector:function(p,c,d,f){if(!l(c,f))return!1;d[0]<d[1]?(c=d[0],d=d[1]):(c=d[1],d=d[0]);return p>=c&&p<=d},pathArc:function(p,c,d,f,k){return h(null,p,c,d,f,k,0)},pathSector:function(p,c,d,f,k){return h(null,p,c,d,f,k,1)},pathAnnulus:function(p,c,d,f,k,r){return h(p,c,d,f,k,r,1)}}},{"./mod":785}],760:[function(b,K,G){function q(e){return a.isView(e)&&!(e instanceof g)}function m(e){return h(e)||q(e)}function l(e,n,p){if(m(e)){if(m(e[0])){for(var c=0;c<e.length;c++)p=
n(p,e[c].length);return p}return e.length}return 0}var h=Array.isArray,a="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer:{isView:function(){return!1}},g="undefined"===typeof DataView?function(){}:DataView;G.isTypedArray=q;G.isArrayOrTypedArray=m;G.isArray1D=function(e){return!m(e[0])};G.ensureArray=function(e,n){h(e)||(e=[]);e.length=n;return e};G.concat=function(){var e=[],n=!0,p=0,c,d;for(c=0;c<arguments.length;c++){var f=arguments[c];if(d=f.length){if(k)e.push(f);else{var k=f;
var r=d}if(h(f))var u=!1;else n=!1,p?u!==f.constructor&&(u=!1):u=f.constructor;p+=d}}if(!p)return[];if(!e.length)return k;if(n)return k.concat.apply(k,e);if(u){n=new u(p);n.set(k);for(c=0;c<e.length;c++)f=e[c],n.set(f,r),r+=f.length;return n}n=Array(p);for(p=0;p<k.length;p++)n[p]=k[p];for(c=0;c<e.length;c++){f=e[c];for(p=0;p<f.length;p++)n[r+p]=f[p];r+=p}return n};G.maxRowLength=function(e){return l(e,Math.max,0)};G.minRowLength=function(e){return l(e,Math.min,Infinity)}},{}],761:[function(b,K,G){var q=
b("fast-isnumeric"),m=b("../constants/numerical").BADNUM,l=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;K.exports=function(h){"string"===typeof h&&(h=h.replace(l,""));return q(h)?Number(h):m}},{"../constants/numerical":753,"fast-isnumeric":241}],762:[function(b,K,G){K.exports=function(q){q=q._fullLayout;q._glcanvas&&q._glcanvas.size()&&q._glcanvas.each(function(m){m.regl&&m.regl.clear({color:!0,depth:!0})})}},{}],763:[function(b,K,G){K.exports=function(q){q._responsiveChartHandler&&(window.removeEventListener("resize",
q._responsiveChartHandler),delete q._responsiveChartHandler)}},{}],764:[function(b,K,G){function q(d,f){var k=G.valObjectMeta[f.valType];if(f.arrayOk&&c(d))return!0;if(k.validateFunction)return k.validateFunction(d,f);var r={},u=r;k.coerceFunction(d,{set:function(v){u=v}},r,f);return u!==r}var m=b("fast-isnumeric"),l=b("tinycolor2"),h=b("../plots/attributes"),a=b("../components/colorscale/scales"),g=b("../constants/interactions").DESELECTDIM,e=b("./nested_property"),n=b("./regex").counter,p=b("./mod").modHalf,
c=b("./array").isArrayOrTypedArray;G.valObjectMeta={data_array:{coerceFunction:function(d,f,k){c(d)?f.set(d):void 0!==k&&f.set(k)}},enumerated:{coerceFunction:function(d,f,k,r){r.coerceNumber&&(d=+d);-1===r.values.indexOf(d)?f.set(k):f.set(d)},validateFunction:function(d,f){f.coerceNumber&&(d=+d);f=f.values;for(var k=0;k<f.length;k++){var r=String(f[k]);if("/"===r.charAt(0)&&"/"===r.charAt(r.length-1)){if((new RegExp(r.substr(1,r.length-2))).test(d))return!0}else if(d===f[k])return!0}return!1}},"boolean":{coerceFunction:function(d,
f,k){!0===d||!1===d?f.set(d):f.set(k)}},number:{coerceFunction:function(d,f,k,r){!m(d)||void 0!==r.min&&d<r.min||void 0!==r.max&&d>r.max?f.set(k):f.set(+d)}},integer:{coerceFunction:function(d,f,k,r){d%1||!m(d)||void 0!==r.min&&d<r.min||void 0!==r.max&&d>r.max?f.set(k):f.set(+d)}},string:{coerceFunction:function(d,f,k,r){"string"!==typeof d?!0===r.strict||"number"!==typeof d?f.set(k):f.set(String(d)):r.noBlank&&!d?f.set(k):f.set(d)}},color:{coerceFunction:function(d,f,k){l(d).isValid()?f.set(d):f.set(k)}},
colorlist:{coerceFunction:function(d,f,k){function r(u){return l(u).isValid()}Array.isArray(d)&&d.length?d.every(r)?f.set(d):f.set(k):f.set(k)}},colorscale:{coerceFunction:function(d,f,k){f.set(a.get(d,k))}},angle:{coerceFunction:function(d,f,k){"auto"===d?f.set("auto"):m(d)?f.set(p(+d,360)):f.set(k)}},subplotid:{coerceFunction:function(d,f,k,r){r=r.regex||n(k);"string"===typeof d&&r.test(d)?f.set(d):f.set(k)},validateFunction:function(d,f){f=f.dflt;return d===f?!0:"string"!==typeof d?!1:n(f).test(d)?
!0:!1}},flaglist:{coerceFunction:function(d,f,k,r){if("string"!==typeof d)f.set(k);else if(-1!==(r.extras||[]).indexOf(d))f.set(d);else{d=d.split("+");for(var u=0;u<d.length;){var v=d[u];-1===r.flags.indexOf(v)||d.indexOf(v)<u?d.splice(u,1):u++}d.length?f.set(d.join("+")):f.set(k)}}},any:{coerceFunction:function(d,f,k){void 0===d?f.set(k):f.set(d)}},info_array:{coerceFunction:function(d,f,k,r){function u(F,I,J){var L;void 0===J&&(J=I.dflt);G.valObjectMeta[I.valType].coerceFunction(F,{set:function(H){L=
H}},J,I);return L}var v=2===r.dimensions||"1-2"===r.dimensions&&Array.isArray(d)&&Array.isArray(d[0]);if(Array.isArray(d)){r=r.items;var x=[],C=Array.isArray(r),z=C&&v&&Array.isArray(r[0]);z=v&&C&&!z;var y=C&&!z?r.length:d.length,D;k=Array.isArray(k)?k:[];if(v)for(v=0;v<y;v++){x[v]=[];var A=Array.isArray(d[v])?d[v]:[];var t=z?r.length:C?r[v].length:A.length;for(D=0;D<t;D++){var B=z?r[D]:C?r[v][D]:r;B=u(A[D],B,(k[v]||[])[D]);void 0!==B&&(x[v][D]=B)}}else for(v=0;v<y;v++)B=u(d[v],C?r[v]:r,k[v]),void 0!==
B&&(x[v]=B);f.set(x)}else f.set(k)},validateFunction:function(d,f){if(!Array.isArray(d))return!1;var k=f.items,r=Array.isArray(k),u=2===f.dimensions;if(!f.freeLength&&d.length!==k.length)return!1;for(var v=0;v<d.length;v++)if(u){if(!Array.isArray(d[v])||!f.freeLength&&d[v].length!==k[v].length)return!1;for(var x=0;x<d[v].length;x++)if(!q(d[v][x],r?k[v][x]:k))return!1}else if(!q(d[v],r?k[v]:k))return!1;return!0}}};G.coerce=function(d,f,k,r,u){k=e(k,r).get();var v=e(d,r);d=e(f,r);v=v.get();f=f._template;
void 0===v&&f&&(v=e(f,r).get(),f=0);void 0===u&&(u=k.dflt);if(k.arrayOk&&c(v))return d.set(v),v;var x=G.valObjectMeta[k.valType].coerceFunction;x(v,d,u,k);var C=d.get();f&&C===u&&!q(v,k)&&(v=e(f,r).get(),x(v,d,u,k),C=d.get());return C};G.coerce2=function(d,f,k,r,u){var v=e(d,r);d=G.coerce(d,f,k,r,u);v=v.get();return void 0!==v&&null!==v?d:!1};G.coerceFont=function(d,f,k){var r={};k=k||{};r.family=d(f+".family",k.family);r.size=d(f+".size",k.size);r.color=d(f+".color",k.color);return r};G.coerceHoverinfo=
function(d,f,k){var r=f._module.attributes;r=r.hoverinfo?r:h;var u=r.hoverinfo;if(1===k._dataLength){k="all"===u.dflt?u.flags.slice():u.dflt.split("+");k.splice(k.indexOf("name"),1);var v=k.join("+")}return G.coerce(d,f,r,"hoverinfo",v)};G.coerceSelectionMarkerOpacity=function(d,f){if(d.marker){var k=d.marker.opacity;if(void 0!==k){if(!c(k)&&!d.selected&&!d.unselected){var r=k;var u=g*k}f("selected.marker.opacity",r);f("unselected.marker.opacity",u)}}};G.validate=q},{"../components/colorscale/scales":658,
"../constants/interactions":752,"../plots/attributes":824,"./array":760,"./mod":785,"./nested_property":786,"./regex":795,"fast-isnumeric":241,tinycolor2:576}],765:[function(b,K,G){function q(L){return L&&u.componentsRegistry.calendars&&"string"===typeof L&&"gregorian"!==L}function m(L,H){return String(L+Math.pow(10,H)).substr(1)}function l(L,H,P,M,N){if(H||P||M||N)if(L+=" "+m(H,2)+":"+m(P,2),M||N)if(L+=":"+m(M,2),N){for(H=4;0===N%10;)--H,N/=10;L+="."+m(N,H)}return L}function h(L,H,P,M){L=L.replace(F,
function(T){T=Math.min(+T.charAt(1)||6,6);return(H/1E3%1+2).toFixed(T).substr(2).replace(/0+$/,"")||"0"});var N=new Date(Math.floor(H+.05));if(q(M))try{L=u.getComponentMethod("calendars","worldCalFmt")(L,H,M)}catch(T){return"Invalid"}return P(L)(N)}var a=b("d3-time-format").timeFormat,g=b("fast-isnumeric"),e=b("./loggers"),n=b("./mod").mod;K=b("../constants/numerical");var p=K.BADNUM,c=K.ONEDAY,d=K.ONEHOUR,f=K.ONEMIN,k=K.ONESEC,r=K.EPOCHJD,u=b("../registry"),v=b("d3-time-format").utcFormat,x=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,
C=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,z=(new Date).getFullYear()-70;G.dateTick0=function(L,H){var P=!!H;P=q(L)?P?u.getComponentMethod("calendars","CANONICAL_SUNDAY")[L]:u.getComponentMethod("calendars","CANONICAL_TICK")[L]:P?"2000-01-02":"2000-01-01";if(2>H)return P;P=G.dateTime2ms(P,L);P+=c*(H-1);return G.ms2DateTime(P,0,L)};G.dfltRange=function(L){return q(L)?u.getComponentMethod("calendars","DFLTRANGE")[L]:
["2000-01-01","2001-01-01"]};G.isJSDate=function(L){return"object"===typeof L&&null!==L&&"function"===typeof L.getTime};G.dateTime2ms=function(L,H){if(G.isJSDate(L)){H=L.getTimezoneOffset()*f;var P=(L.getUTCMinutes()-L.getMinutes())*f+(L.getUTCSeconds()-L.getSeconds())*k+(L.getUTCMilliseconds()-L.getMilliseconds());if(P){var M=3*f;H=H-M/2+n(P-H+M/2,M)}L=Number(L)-H;return L>=y&&L<=D?L:p}if("string"!==typeof L&&"number"!==typeof L)return p;L=String(L);P=q(H);var N=L.charAt(0);!P||"G"!==N&&"g"!==N||
(L=L.substr(1),H="");N=P&&"chinese"===H.substr(0,7);var T=L.match(N?C:x);if(!T)return p;L=T[1];var Q=T[3]||"1",U=Number(T[5]||1),S=Number(T[7]||0),X=Number(T[9]||0);T=Number(T[11]||0);if(P){if(2===L.length)return p;L=Number(L);try{var Z=u.getComponentMethod("calendars","getCal")(H);if(N){var aa="i"===Q.charAt(Q.length-1);Q=parseInt(Q,10);M=Z.newDate(L,Z.toMonthIndex(L,Q,aa),U)}else M=Z.newDate(L,Number(Q),U)}catch(fa){return p}return M?(M.toJD()-r)*c+S*d+X*f+T*k:p}L=2===L.length?(Number(L)+2E3-z)%
100+z:Number(L);--Q;H=new Date(Date.UTC(2E3,Q,U,S,X));H.setUTCFullYear(L);return H.getUTCMonth()!==Q||H.getUTCDate()!==U?p:H.getTime()+T*k};var y=G.MIN_MS=G.dateTime2ms("-9999");var D=G.MAX_MS=G.dateTime2ms("9999-12-31 23:59:59.9999");G.isDateTime=function(L,H){return G.dateTime2ms(L,H)!==p};var A=90*c,t=3*d,B=5*f;G.ms2DateTime=function(L,H,P){if("number"!==typeof L||!(L>=y&&L<=D))return p;H||(H=0);var M=Math.floor(10*n(L+.05,1)),N=Math.round(L-M/10);if(q(P)){var T=Math.floor(N/c)+r;L=Math.floor(n(L,
c));try{var Q=u.getComponentMethod("calendars","getCal")(P).fromJD(T).formatDate("yyyy-mm-dd")}catch(U){Q=v("G%Y-%m-%d")(new Date(N))}if("-"===Q.charAt(0))for(;11>Q.length;)Q="-0"+Q.substr(1);else for(;10>Q.length;)Q="0"+Q;P=H<A?Math.floor(L/d):0;N=H<A?Math.floor(L%d/f):0;T=H<t?Math.floor(L%f/k):0;H=H<B?L%k*10+M:0}else L=new Date(N),Q=v("%Y-%m-%d")(L),P=H<A?L.getUTCHours():0,N=H<A?L.getUTCMinutes():0,T=H<t?L.getUTCSeconds():0,H=H<B?10*L.getUTCMilliseconds()+M:0;return l(Q,P,N,T,H)};G.ms2DateTimeLocal=
function(L){if(!(L>=y+c&&L<=D-c))return p;var H=Math.floor(10*n(L+.05,1)),P=new Date(Math.round(L-H/10));L=a("%Y-%m-%d")(P);var M=P.getHours(),N=P.getMinutes(),T=P.getSeconds();H=10*P.getUTCMilliseconds()+H;return l(L,M,N,T,H)};G.cleanDate=function(L,H,P){if(L===p)return H;if(G.isJSDate(L)||"number"===typeof L&&isFinite(L)){if(q(P))return e.error("JS Dates and milliseconds are incompatible with world calendars",L),H;L=G.ms2DateTimeLocal(+L);if(!L&&void 0!==H)return H}else if(!G.isDateTime(L,P))return e.error("unrecognized date",
L),H;return L};var F=/%\d?f/g,I=[59,59.9,59.99,59.999,59.9999];G.formatDate=function(L,H,P,M,N,T){N=q(N)&&N;if(!H)if("y"===P)H=T.year;else if("m"===P)H=T.month;else if("d"===P)H=T.dayMonth+"\n"+T.year;else{H=P;P=n(L+.05,c);P=m(Math.floor(P/d),2)+":"+m(n(Math.floor(P/f),60),2);if("M"!==H){g(H)||(H=0);var Q=(100+Math.min(n(L/k,60),I[H])).toFixed(H).substr(1);0<H&&(Q=Q.replace(/0+$/,"").replace(/[\.]$/,""));P+=":"+Q}return P+"\n"+h(T.dayMonthYear,L,M,N)}return h(H,L,M,N)};var J=3*c;G.incrementMonth=
function(L,H,P){P=q(P)&&P;var M=n(L,c);L=Math.round(L-M);if(P)try{var N=Math.round(L/c)+r,T=u.getComponentMethod("calendars","getCal")(P),Q=T.fromJD(N);H%12?T.add(Q,H,"m"):T.add(Q,H/12,"y");return(Q.toJD()-r)*c+M}catch(U){e.error("invalid ms "+L+" in calendar "+P)}L=new Date(L+J);return L.setUTCMonth(L.getUTCMonth()+H)+M-J};G.findExactDates=function(L,H){for(var P=0,M=0,N=0,T=0,Q,U=q(H)&&u.getComponentMethod("calendars","getCal")(H),S=0;S<L.length;S++)if(H=L[S],!g(H))T++;else if(!(H%c))if(U)try{Q=
U.fromJD(H/c+r),1===Q.day()?1===Q.month()?P++:M++:N++}catch(X){}else Q=new Date(H),1===Q.getUTCDate()?0===Q.getUTCMonth()?P++:M++:N++;M+=P;L=L.length-T;return{exactYears:P/L,exactMonths:M/L,exactDays:(N+M)/L}}},{"../constants/numerical":753,"../registry":911,"./loggers":782,"./mod":785,"d3-time-format":166,"fast-isnumeric":241}],766:[function(b,K,G){function q(p){var c=p&&p.parentNode;c&&c.removeChild(p)}function m(p,c,d){p="plotly.js-style-"+p;var f=document.getElementById(p);f||(f=document.createElement("style"),
f.setAttribute("id",p),f.appendChild(document.createTextNode("")),document.head.appendChild(f));p=f.sheet;p.insertRule?p.insertRule(c+"{"+d+"}",0):p.addRule?p.addRule(c,d,0):g.warn("addStyleRule failed")}function l(p){p=window.getComputedStyle(p,null);p=p.getPropertyValue("-webkit-transform")||p.getPropertyValue("-moz-transform")||p.getPropertyValue("-ms-transform")||p.getPropertyValue("-o-transform")||p.getPropertyValue("transform");return"none"===p?null:p.replace("matrix","").replace("3d","").slice(1,
-1).split(",").map(function(c){return+c})}function h(p){for(var c=[];p&&(p instanceof Element||p instanceof HTMLElement);)c.push(p),p=p.parentNode;return c}var a=b("d3"),g=b("./loggers"),e=b("./matrix"),n=b("gl-mat4");K.exports={getGraphDiv:function(p){if("string"===typeof p){var c=document.getElementById(p);if(null===c)throw Error("No DOM element with id '"+p+"' exists on the page.");return c}if(null===p||void 0===p)throw Error("DOM element provided is null or undefined");return p},isPlotDiv:function(p){p=
a.select(p);return p.node()instanceof HTMLElement&&p.size()&&p.classed("js-plotly-plot")},removeElement:q,addStyleRule:function(p,c){m("global",p,c)},addRelatedStyleRule:m,deleteRelatedStyleRule:function(p){(p=document.getElementById("plotly.js-style-"+p))&&q(p)},getFullTransformMatrix:function(p){var c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];h(p).forEach(function(d){if(d=l(d))d=e.convertCssMatrix(d),c=n.multiply(c,c,d)});return c},getElementTransformMatrix:l,getElementAndAncestors:h,equalDomRects:function(p,
c){return p&&c&&p.x===c.x&&p.y===c.y&&p.top===c.top&&p.left===c.left&&p.right===c.right&&p.bottom===c.bottom}}},{"./loggers":782,"./matrix":784,d3:169,"gl-mat4":292}],767:[function(b,K,G){var q=b("events").EventEmitter;K.exports={init:function(m){if(m._ev instanceof q)return m;var l=new q,h=new q;m._ev=l;m._internalEv=h;m.on=l.on.bind(l);m.once=l.once.bind(l);m.removeListener=l.removeListener.bind(l);m.removeAllListeners=l.removeAllListeners.bind(l);m._internalOn=h.on.bind(h);m._internalOnce=h.once.bind(h);
m._removeInternalListener=h.removeListener.bind(h);m._removeAllInternalListeners=h.removeAllListeners.bind(h);m.emit=function(a,g){"undefined"!==typeof jQuery&&jQuery(m).trigger(a,g);l.emit(a,g);h.emit(a,g)};return m},triggerHandler:function(m,l,h){function a(p){if(p.listener){if(e.removeListener(l,p.listener),!p.fired)return p.fired=!0,p.listener.apply(e,[h])}else return p.apply(e,[h])}var g;"undefined"!==typeof jQuery&&(g=jQuery(m).triggerHandler(l,h));var e=m._ev;if(!e)return g;m=e._events[l];
if(!m)return g;m=Array.isArray(m)?m:[m];var n;for(n=0;n<m.length-1;n++)a(m[n]);m=a(m[n]);return void 0!==g?g:m},purge:function(m){delete m._ev;delete m.on;delete m.once;delete m.removeListener;delete m.removeAllListeners;delete m.emit;delete m._ev;delete m._internalEv;delete m._internalOn;delete m._internalOnce;delete m._removeInternalListener;delete m._removeAllInternalListeners;return m}}},{events:110}],768:[function(b,K,G){function q(h,a,g,e){var n=h[0],p=h.length,c,d,f;if(2===p&&l(n)&&l(h[1])&&
0===n.length){a:{var k=h[1];for(d=0;d<k.length;d++){var r=k[d];if(null!==r&&"object"===typeof r){k=!1;break a}void 0!==r&&(n[d]=r)}k=!0}if(k)return n;n.splice(0,n.length)}for(r=1;r<p;r++)for(c in k=h[r],k){var u=n[c];d=k[c];if(e&&l(d))n[c]=d;else if(a&&d&&(m(d)||(f=l(d))))f?(f=!1,u=u&&l(u)?u:[]):u=u&&m(u)?u:{},n[c]=q([u,d],a,g,e);else if("undefined"!==typeof d||g)n[c]=d}return n}var m=b("./is_plain_object.js"),l=Array.isArray;G.extendFlat=function(){return q(arguments,!1,!1,!1)};G.extendDeep=function(){return q(arguments,
!0,!1,!1)};G.extendDeepAll=function(){return q(arguments,!0,!0,!1)};G.extendDeepNoArrays=function(){return q(arguments,!0,!1,!0)}},{"./is_plain_object.js":779}],769:[function(b,K,G){K.exports=function(q){for(var m={},l=[],h=0,a=0;a<q.length;a++){var g=q[a];1!==m[g]&&(m[g]=1,l[h++]=g)}return l}},{}],770:[function(b,K,G){function q(l){return!0===l.visible}function m(l){l=l[0].trace;return!0===l.visible&&0!==l._length}K.exports=function(l){for(var h=Array.isArray(l)&&Array.isArray(l[0])&&l[0][0]&&l[0][0].trace?
m:q,a=[],g=0;g<l.length;g++){var e=l[g];h(e)&&a.push(e)}return a}},{}],771:[function(b,K,G){function q(k){k=k.geojson;var r=window.PlotlyGeoAssets||{};r="string"===typeof k?r[k]:k;return n(r)?r:(e.error("Oops ... something went wrong when fetching "+k),!1)}var m=b("d3"),l=b("country-regex"),h=b("@turf/area"),a=b("@turf/centroid"),g=b("@turf/bbox");G=b("./identity");var e=b("./loggers"),n=b("./is_plain_object"),p=b("./nested_property"),c=b("./polygon"),d=Object.keys(l),f={"ISO-3":G,"USA-states":G,
"country names":function(k){for(var r=0;r<d.length;r++){var u=d[r];if((new RegExp(l[u])).test(k.trim().toLowerCase()))return u}e.log("Unrecognized country name: "+k+".");return!1}};K.exports={locationToFeature:function(k,r,u){if(!r||"string"!==typeof r)return!1;r=f[k](r);var v;if(r){if("USA-states"===k)for(k=[],v=0;v<u.length;v++){var x=u[v];x.properties&&x.properties.gu&&"USA"===x.properties.gu&&k.push(x)}else k=u;for(v=0;v<k.length;v++)if(x=k[v],x.id===r)return x;e.log(["Location with id",r,"does not have a matching topojson feature at this resolution."].join(" "))}return!1},
feature2polygons:function(k){function r(y){for(var D=0;D<y.length-1;D++)if(0<y[D][0]&&0>y[D+1][0])return D;return null}var u=k.geometry,v=u.coordinates;k=k.id;var x=[],C,z;k="RUS"===k||"FJI"===k?function(y){if(null===r(y))var D=y;else for(D=Array(y.length),z=0;z<y.length;z++)D[z]=[0>y[z][0]?y[z][0]+360:y[z][0],y[z][1]];x.push(c.tester(D))}:"ATA"===k?function(y){var D=r(y);if(null===D)return x.push(c.tester(y));var A=Array(y.length+1),t=0;for(z=0;z<y.length;z++)z>D?A[t++]=[y[z][0]+360,y[z][1]]:z===
D?(A[t++]=y[z],A[t++]=[y[z][0],-90]):A[t++]=y[z];y=c.tester(A);y.pts.pop();x.push(y)}:function(y){x.push(c.tester(y))};switch(u.type){case "MultiPolygon":for(u=0;u<v.length;u++)for(C=0;C<v[u].length;C++)k(v[u][C]);break;case "Polygon":for(u=0;u<v.length;u++)k(v[u])}return x},getTraceGeojson:q,extractTraceFeature:function(k){function r(A){var t=p(A,u.featureidkey||"id").get(),B=x[t];if(B){var F=A.geometry;if("Polygon"===F.type||"MultiPolygon"===F.type){F={type:"Feature",id:t,geometry:F,properties:{}};
var I=F.properties,J=F.geometry;if("MultiPolygon"===J.type){J=J.coordinates;for(var L=0,H=0;H<J.length;H++){var P={type:"Polygon",coordinates:J[H]},M=h.default(P);if(M>L){L=M;var N=P}}}else N=J;N=a.default(N).geometry.coordinates;I.ct=N;B.fIn=A;B.fOut=F;C.push(F)}else e.log(["Location",B.loc,"does not have a valid GeoJSON geometry. Traces with locationmode *geojson-id* only support *Polygon* and *MultiPolygon* geometries."].join(" "))}delete x[t]}var u=k[0].trace,v=q(u);if(!v)return!1;var x={},C=
[],z;for(z=0;z<u._length;z++){var y=k[z];if(y.loc||0===y.loc)x[y.loc]=y}switch(v.type){case "FeatureCollection":k=v.features;for(z=0;z<k.length;z++)r(k[z]);break;case "Feature":r(v);break;default:return e.warn(["Invalid GeoJSON type",(v.type||"none")+".","Traces with locationmode *geojson-id* only support *FeatureCollection* and *Feature* types."].join(" ")),!1}for(var D in x)e.log(["Location *"+D+"*","does not have a matching feature with id-key","*"+u.featureidkey+"*."].join(" "));return C},fetchTraceGeoData:function(k){function r(y){return new Promise(function(D,
A){m.json(y,function(t,B){if(t)return delete v[y],A(Error(404===t.status?'GeoJSON at URL "'+y+'" does not exist.':"Unexpected error while fetching from "+y));v[y]=B;return D(B)})})}function u(y){return new Promise(function(D,A){var t=0,B=setInterval(function(){if(v[y]&&"pending"!==v[y])return clearInterval(B),D(v[y]);if(100<t)return clearInterval(B),A("Unexpected error while fetching from "+y);t++},50)})}for(var v=window.PlotlyGeoAssets||{},x=[],C=0;C<k.length;C++){var z=k[C][0].trace.geojson;"string"===
typeof z&&(v[z]?"pending"===v[z]&&x.push(u(z)):(v[z]="pending",x.push(r(z))))}return x},computeBbox:function(k){return g.default(k)}}},{"./identity":776,"./is_plain_object":779,"./loggers":782,"./nested_property":786,"./polygon":790,"@turf/area":59,"@turf/bbox":60,"@turf/centroid":61,"country-regex":139,d3:169}],772:[function(b,K,G){var q=b("../constants/numerical").BADNUM;G.calcTraceToLineCoords=function(m){for(var l=m[0].trace.connectgaps,h=[],a=[],g=0;g<m.length;g++){var e=m[g].lonlat;e[0]!==q?
a.push(e):!l&&0<a.length&&(h.push(a),a=[])}0<a.length&&h.push(a);return h};G.makeLine=function(m){return 1===m.length?{type:"LineString",coordinates:m[0]}:{type:"MultiLineString",coordinates:m}};G.makePolygon=function(m){if(1===m.length)return{type:"Polygon",coordinates:m};for(var l=Array(m.length),h=0;h<m.length;h++)l[h]=[m[h]];return{type:"MultiPolygon",coordinates:l}};G.makeBlank=function(){return{type:"Point",coordinates:[]}}},{"../constants/numerical":753}],773:[function(b,K,G){function q(e,
n,p,c,d,f,k,r){p-=e;var u=d-e;d=k-d;c-=n;k=f-n;r-=f;f=p*r-d*c;if(0===f)return null;r=(u*r-d*k)/f;u=(u*c-p*k)/f;return 0>u||1<u||0>r||1<r?null:{x:e+p*r,y:n+c*r}}function m(e,n,p,c,d){var f=c*e+d*n;if(0>f)return c*c+d*d;if(f>p)return p=c-e,n=d-n,p*p+n*n;n=c*n-d*e;return n*n/p}var l=b("./mod").mod;G.segmentsIntersect=q;G.segmentDistance=function(e,n,p,c,d,f,k,r){if(q(e,n,p,c,d,f,k,r))return 0;var u=p-e,v=c-n,x=k-d,C=r-f,z=u*u+v*v,y=x*x+C*C;e=Math.min(m(u,v,z,d-e,f-n),m(u,v,z,k-e,r-n),m(x,C,y,e-d,n-f),
m(x,C,y,p-d,c-f));return Math.sqrt(e)};var h,a,g;G.getTextLocation=function(e,n,p,c){if(e!==a||c!==g)h={},a=e,g=c;if(h[p])return h[p];var d=e.getPointAtLength(l(p-c/2,n));c=e.getPointAtLength(l(p+c/2,n));var f=Math.atan((c.y-d.y)/(c.x-d.x));e=e.getPointAtLength(l(p,n));d={x:(4*e.x+d.x+c.x)/6,y:(4*e.y+d.y+c.y)/6,theta:f};return h[p]=d};G.clearLocationCache=function(){a=null};G.getVisibleSegment=function(e,n,p){function c(y){var D=e.getPointAtLength(y);0===y?x=D:y===u&&(C=D);y=D.x<d?d-D.x:D.x>f?D.x-
f:0;D=D.y<k?k-D.y:D.y>r?D.y-r:0;return Math.sqrt(y*y+D*D)}var d=n.left,f=n.right,k=n.top,r=n.bottom;n=0;for(var u=e.getTotalLength(),v=u,x,C,z=c(n);z;){n+=z+p;if(n>v)return;z=c(n)}for(z=c(v);z;){v-=z+p;if(n>v)return;z=c(v)}return{min:n,max:v,len:v-n,total:u,isClosed:0===n&&v===u&&.1>Math.abs(x.x-C.x)&&.1>Math.abs(x.y-C.y)}};G.findPointOnPath=function(e,n,p,c){c=c||{};var d=c.pathLength||e.getTotalLength(),f=c.tolerance||.001;c=c.iterationLimit||30;for(var k=e.getPointAtLength(0)[p]>e.getPointAtLength(d)[p]?
-1:1,r=0,u=0,v,x,C;r<c&&!(v=(u+d)/2,x=e.getPointAtLength(v),C=x[p]-n,Math.abs(C)<f);)0<k*C?d=v:u=v,r++;return x}},{"./mod":785}],774:[function(b,K,G){function q(c,d){c[3]*=d;return c}function m(c){if(h(c))return p;c=g(c);return c.length?c:p}function l(c){return h(c)?c:1}var h=b("fast-isnumeric"),a=b("tinycolor2"),g=b("color-normalize"),e=b("../components/colorscale");G=b("../components/color/attributes").defaultLine;var n=b("./array").isArrayOrTypedArray,p=g(G);K.exports={formatColor:function(c,d,
f){var k=c.color,r=n(k),u=n(d),v=[];var x=void 0!==e.extractOpts(c).colorscale?e.makeColorScaleFuncFromTrace(c):m;c=r?function(y,D){return void 0===y[D]?p:g(x(y[D]))}:m;var C=u?function(y,D){return void 0===y[D]?1:l(y[D])}:l;if(r||u)for(var z=0;z<f;z++)r=c(k,z),u=C(d,z),v[z]=q(r,u);else v=q(g(k),d);return v},parseColorScale:function(c){c=e.extractOpts(c);var d=c.colorscale;c.reversescale&&(d=e.flipScale(c.colorscale));return d.map(function(f){var k=f[0];f=a(f[1]).toRgb();return{index:k,rgb:[f.r,f.g,
f.b,f.a]}})}}},{"../components/color/attributes":642,"../components/colorscale":655,"./array":760,"color-normalize":125,"fast-isnumeric":241,tinycolor2:576}],775:[function(b,K,G){function q(m){return[m]}b=b("./identity");K.exports={keyFun:function(m){return m.key},repeat:q,descend:b,wrap:q,unwrap:function(m){return m[0]}}},{"./identity":776}],776:[function(b,K,G){K.exports=function(q){return q}},{}],777:[function(b,K,G){K.exports=function(q,m){if(!m)return q;var l=1/Math.abs(m);l=1<l?(l*q+l*m)/l:
q+m;var h=String(l).length;16<h&&h>=String(q).length+String(m).length&&(q=parseFloat(l).toPrecision(12),-1===q.indexOf("e+")&&(l=+q));return l}},{}],778:[function(b,K,G){function q(z){var y={},D;for(D in z)for(var A=z[D],t=0;t<A.length;t++)y[A[t]]=+D;return y}function m(z,y,D){var A=this,t=arguments;y||(y={});var B={};return z.replace(n.TEMPLATE_STRING_REGEX,function(F,I,J){var L,H;for(H=3;H<t.length;H++)if(L=t[H]){if(L.hasOwnProperty(I)){var P=L[I];break}r.test(I)||(P=B[I]||n.nestedProperty(L,I).get())&&
(B[I]=P);if(void 0!==P)break}if(void 0===P&&A)return A.count<A.max&&n.warn("Variable '"+I+"' in "+A.name+" could not be found!"),A.count===A.max&&n.warn("Too many "+A.name+" warnings - additional warnings will be suppressed"),A.count++,F;J?(":"===J[0]&&(F=D?D.numberFormat:l.format,P=F(J.replace(x,""))(P)),"|"===J[0]&&(F=D?D.timeFormat:h,P=n.dateTime2ms(P),P=n.formatDate(P,J.replace(x,""),!1,F))):y.hasOwnProperty(I+"Label")&&(P=y[I+"Label"]);return P})}var l=b("d3"),h=b("d3-time-format").utcFormat,
a=b("fast-isnumeric");G=b("../constants/numerical");var g=G.FP_SAFE,e=G.BADNUM,n=K.exports={};n.nestedProperty=b("./nested_property");n.keyedContainer=b("./keyed_container");n.relativeAttr=b("./relative_attr");n.isPlainObject=b("./is_plain_object");n.toLogRange=b("./to_log_range");n.relinkPrivateKeys=b("./relink_private");K=b("./array");n.isTypedArray=K.isTypedArray;n.isArrayOrTypedArray=K.isArrayOrTypedArray;n.isArray1D=K.isArray1D;n.ensureArray=K.ensureArray;n.concat=K.concat;n.maxRowLength=K.maxRowLength;
n.minRowLength=K.minRowLength;K=b("./mod");n.mod=K.mod;n.modHalf=K.modHalf;K=b("./coerce");n.valObjectMeta=K.valObjectMeta;n.coerce=K.coerce;n.coerce2=K.coerce2;n.coerceFont=K.coerceFont;n.coerceHoverinfo=K.coerceHoverinfo;n.coerceSelectionMarkerOpacity=K.coerceSelectionMarkerOpacity;n.validate=K.validate;K=b("./dates");n.dateTime2ms=K.dateTime2ms;n.isDateTime=K.isDateTime;n.ms2DateTime=K.ms2DateTime;n.ms2DateTimeLocal=K.ms2DateTimeLocal;n.cleanDate=K.cleanDate;n.isJSDate=K.isJSDate;n.formatDate=
K.formatDate;n.incrementMonth=K.incrementMonth;n.dateTick0=K.dateTick0;n.dfltRange=K.dfltRange;n.findExactDates=K.findExactDates;n.MIN_MS=K.MIN_MS;n.MAX_MS=K.MAX_MS;K=b("./search");n.findBin=K.findBin;n.sorterAsc=K.sorterAsc;n.sorterDes=K.sorterDes;n.distinctVals=K.distinctVals;n.roundUp=K.roundUp;n.sort=K.sort;n.findIndexOfMin=K.findIndexOfMin;K=b("./stats");n.aggNums=K.aggNums;n.len=K.len;n.mean=K.mean;n.median=K.median;n.midRange=K.midRange;n.variance=K.variance;n.stdev=K.stdev;n.interp=K.interp;
K=b("./matrix");n.init2dArray=K.init2dArray;n.transposeRagged=K.transposeRagged;n.dot=K.dot;n.translationMatrix=K.translationMatrix;n.rotationMatrix=K.rotationMatrix;n.rotationXYMatrix=K.rotationXYMatrix;n.apply3DTransform=K.apply3DTransform;n.apply2DTransform=K.apply2DTransform;n.apply2DTransform2=K.apply2DTransform2;n.convertCssMatrix=K.convertCssMatrix;n.inverseTransformMatrix=K.inverseTransformMatrix;K=b("./angles");n.deg2rad=K.deg2rad;n.rad2deg=K.rad2deg;n.angleDelta=K.angleDelta;n.angleDist=
K.angleDist;n.isFullCircle=K.isFullCircle;n.isAngleInsideSector=K.isAngleInsideSector;n.isPtInsideSector=K.isPtInsideSector;n.pathArc=K.pathArc;n.pathSector=K.pathSector;n.pathAnnulus=K.pathAnnulus;K=b("./anchor_utils");n.isLeftAnchor=K.isLeftAnchor;n.isCenterAnchor=K.isCenterAnchor;n.isRightAnchor=K.isRightAnchor;n.isTopAnchor=K.isTopAnchor;n.isMiddleAnchor=K.isMiddleAnchor;n.isBottomAnchor=K.isBottomAnchor;K=b("./geometry2d");n.segmentsIntersect=K.segmentsIntersect;n.segmentDistance=K.segmentDistance;
n.getTextLocation=K.getTextLocation;n.clearLocationCache=K.clearLocationCache;n.getVisibleSegment=K.getVisibleSegment;n.findPointOnPath=K.findPointOnPath;K=b("./extend");n.extendFlat=K.extendFlat;n.extendDeep=K.extendDeep;n.extendDeepAll=K.extendDeepAll;n.extendDeepNoArrays=K.extendDeepNoArrays;K=b("./loggers");n.log=K.log;n.warn=K.warn;n.error=K.error;K=b("./regex");n.counterRegex=K.counter;K=b("./throttle");n.throttle=K.throttle;n.throttleDone=K.done;n.clearThrottle=K.clear;K=b("./dom");n.getGraphDiv=
K.getGraphDiv;n.isPlotDiv=K.isPlotDiv;n.removeElement=K.removeElement;n.addStyleRule=K.addStyleRule;n.addRelatedStyleRule=K.addRelatedStyleRule;n.deleteRelatedStyleRule=K.deleteRelatedStyleRule;n.getFullTransformMatrix=K.getFullTransformMatrix;n.getElementTransformMatrix=K.getElementTransformMatrix;n.getElementAndAncestors=K.getElementAndAncestors;n.equalDomRects=K.equalDomRects;n.clearResponsive=b("./clear_responsive");n.preserveDrawingBuffer=b("./preserve_drawing_buffer");n.makeTraceGroups=b("./make_trace_groups");
n._=b("./localize");n.notifier=b("./notifier");n.filterUnique=b("./filter_unique");n.filterVisible=b("./filter_visible");n.pushUnique=b("./push_unique");n.increment=b("./increment");n.cleanNumber=b("./clean_number");n.ensureNumber=function(z){if(!a(z))return e;z=Number(z);return z<-g||z>g?e:a(z)?Number(z):e};n.isIndex=function(z,y){return void 0!==y&&z>=y?!1:a(z)&&0<=z&&0===z%1};n.noop=b("./noop");n.identity=b("./identity");n.repeat=function(z,y){for(var D=Array(y),A=0;A<y;A++)D[A]=z;return D};n.swapAttrs=
function(z,y,D,A){D||(D="x");A||(A="y");for(var t=0;t<y.length;t++){var B=y[t],F=n.nestedProperty(z,B.replace("?",D));B=n.nestedProperty(z,B.replace("?",A));var I=F.get();F.set(B.get());B.set(I)}};n.raiseToTop=function(z){z.parentNode.appendChild(z)};n.cancelTransition=function(z){return z.transition().duration(0)};n.constrain=function(z,y,D){return y>D?Math.max(D,Math.min(y,z)):Math.max(y,Math.min(D,z))};n.bBoxIntersect=function(z,y,D){D=D||0;return z.left<=y.right+D&&y.left<=z.right+D&&z.top<=y.bottom+
D&&y.top<=z.bottom+D};n.simpleMap=function(z,y,D,A,t){for(var B=z.length,F=Array(B),I=0;I<B;I++)F[I]=y(z[I],D,A,t);return F};n.randstr=function B(y,D,A,t){A||(A=16);void 0===D&&(D=24);if(0>=D)return"0";var F=Math.log(Math.pow(2,D))/Math.log(A),I="",J;for(J=2;Infinity===F;J*=2)F=Math.log(Math.pow(2,D/J))/Math.log(A)*J;var L=F-Math.floor(F);for(J=0;J<Math.floor(F);J++){var H=Math.floor(Math.random()*A).toString(A);I=H+I}L&&(F=Math.pow(A,L),H=Math.floor(Math.random()*F).toString(A),I=H+I);F=parseInt(I,
A);return y&&y[I]||Infinity!==F&&F>=Math.pow(2,D)?10<t?(n.warn("randstr failed uniqueness"),I):B(y,D,A,(t||0)+1):I};n.OptionControl=function(y,D){y||(y={});D||(D="opt");var A={optionList:[],_newoption:function(t){t[D]=y;A[t.name]=t;A.optionList.push(t)}};A["_"+D]=y;return A};n.smooth=function(y,D){D=Math.round(D)||0;if(2>D)return y;var A=y.length,t=2*A,B=2*D-1,F=Array(B),I=Array(A),J,L,H;for(J=0;J<B;J++)F[J]=(1-Math.cos(Math.PI*(J+1)/D))/(2*D);for(J=0;J<A;J++){for(L=H=0;L<B;L++){var P=J+L+1-D;P<-A?
P-=t*Math.round(P/t):P>=t&&(P-=t*Math.floor(P/t));0>P?P=-1-P:P>=A&&(P=t-1-P);H+=y[P]*F[L]}I[J]=H}return I};n.syncOrAsync=function(y,D,A){function t(){return n.syncOrAsync(y,D,A)}for(var B;y.length;)if(B=y.splice(0,1)[0],(B=B(D))&&B.then)return B.then(t).then(void 0,n.promiseError);return A&&A(D)};n.stripTrailingSlash=function(y){return"/"===y.substr(-1)?y.substr(0,y.length-1):y};n.noneOrAll=function(y,D,A){if(y){var t=!1,B=!0,F;for(F=0;F<A.length;F++){var I=y[A[F]];void 0!==I&&null!==I?t=!0:B=!1}if(t&&
!B)for(F=0;F<A.length;F++)y[A[F]]=D[A[F]]}};n.mergeArray=function(y,D,A,t){var B="function"===typeof t;if(n.isArrayOrTypedArray(y))for(var F=Math.min(y.length,D.length),I=0;I<F;I++){var J=y[I];D[I][A]=B?t(J):J}};n.mergeArrayCastPositive=function(y,D,A){return n.mergeArray(y,D,A,function(t){t=+t;return isFinite(t)?0<t?t:0:0})};n.fillArray=function(y,D,A,t){t=t||n.identity;if(n.isArrayOrTypedArray(y))for(var B=0;B<D.length;B++)D[B][A]=t(y[B])};n.castOption=function(y,D,A,t){t=t||n.identity;y=n.nestedProperty(y,
A).get();return n.isArrayOrTypedArray(y)?Array.isArray(D)&&n.isArrayOrTypedArray(y[D[0]])?t(y[D[0]][D[1]]):t(y[D]):y};n.extractOption=function(y,D,A,t){if(A in y)return y[A];y=n.nestedProperty(D,t).get();if(!Array.isArray(y))return y};n.tagSelected=function(y,D,A){var t=D.selectedpoints;D=D._indexToPoints;var B;D&&(B=q(D));for(D=0;D<t.length;D++){var F=t[D];if(n.isIndex(F)||n.isArrayOrTypedArray(F)&&n.isIndex(F[0])&&n.isIndex(F[1]))F=B?B[F]:F,F=A?A[F]:F,void 0!==F&&F<y.length&&(y[F].selected=1)}};
n.selIndices2selPoints=function(y){var D=y.selectedpoints;if(y=y._indexToPoints){y=q(y);for(var A=[],t=0;t<D.length;t++){var B=D[t];n.isIndex(B)&&(B=y[B],n.isIndex(B)&&A.push(B))}return A}return D};n.getTargetArray=function(y,D){D=D.target;return"string"===typeof D&&D?(y=n.nestedProperty(y,D).get(),Array.isArray(y)?y:!1):Array.isArray(D)?D:!1};n.minExtend=function(y,D){var A={};"object"!==typeof D&&(D={});var t=Object.keys(y),B;for(B=0;B<t.length;B++){var F=t[B];var I=y[F];"_"!==F.charAt(0)&&"function"!==
typeof I&&("module"===F?A[F]=I:Array.isArray(I)?A[F]="colorscale"===F?I.slice():I.slice(0,3):n.isTypedArray(I)?A[F]=I.subarray(0,3):A[F]=I&&"object"===typeof I?n.minExtend(y[F],D[F]):I)}t=Object.keys(D);for(B=0;B<t.length;B++)F=t[B],I=D[F],"object"===typeof I&&F in A&&"object"===typeof A[F]||(A[F]=I);return A};n.titleCase=function(y){return y.charAt(0).toUpperCase()+y.substr(1)};n.containsAny=function(y,D){for(var A=0;A<D.length;A++)if(-1!==y.indexOf(D[A]))return!0;return!1};n.isIE=function(){return"undefined"!==
typeof window.navigator.msSaveBlob};var p=/MSIE [1-9]\./;n.isIE9orBelow=function(){return n.isIE()&&p.test(window.navigator.userAgent)};var c=/Version\/[\d\.]+.*Safari/;n.isSafari=function(){return c.test(window.navigator.userAgent)};var d=/iPad|iPhone|iPod/;n.isIOS=function(){return d.test(window.navigator.userAgent)};n.isD3Selection=function(y){return y&&"function"===typeof y.classed};n.ensureSingle=function(y,D,A,t){var B=y.select(D+(A?"."+A:""));if(B.size())return B;y=y.append(D);A&&y.classed(A,
!0);t&&y.call(t);return y};n.ensureSingleById=function(y,D,A,t){var B=y.select(D+"#"+A);if(B.size())return B;y=y.append(D).attr("id",A);t&&y.call(t);return y};n.objectFromPath=function(y,D){y=y.split(".");for(var A,t=A={},B=0;B<y.length;B++){var F=y[B],I;(I=y[B].match(/(.*)\[([0-9]+)\]/))?(F=I[1],I=I[2],A=A[F]=[],A[I]=B===y.length-1?D:{},A=A[I]):(A[F]=B===y.length-1?D:{},A=A[F])}return t};var f=/^([^\[\.]+)\.(.+)?/,k=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;n.expandObjectPaths=function(y){var D,A;if("object"===
typeof y&&!Array.isArray(y))for(A in y)if(y.hasOwnProperty(A))if(D=A.match(f)){var t=y[A];var B=D[1];delete y[A];y[B]=n.extendDeepNoArrays(y[B]||{},n.objectFromPath(A,n.expandObjectPaths(t))[B])}else if(D=A.match(k)){t=y[A];B=D[1];var F=parseInt(D[2]);delete y[A];y[B]=y[B]||[];"."===D[3]?(D=D[4],B=y[B][F]=y[B][F]||{},n.extendDeepNoArrays(B,n.objectFromPath(D,n.expandObjectPaths(t)))):y[B][F]=n.expandObjectPaths(t)}else y[A]=n.expandObjectPaths(y[A]);return y};n.numSeparate=function(y,D,A){A||(A=!1);
if("string"!==typeof D||0===D.length)throw Error("Separator string required for formatting!");"number"===typeof y&&(y=String(y));var t=/(\d+)(\d{3})/,B=D.charAt(0);D=D.charAt(1);y=y.split(".");var F=y[0];B=1<y.length?B+y[1]:"";if(D&&(1<y.length||4<F.length||A))for(;t.test(F);)F=F.replace(t,"$1"+D+"$2");return F+B};n.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var r=/^\w*$/;n.templateString=function(y,D){var A={};return y.replace(n.TEMPLATE_STRING_REGEX,function(t,B){r.test(B)?t=D[B]:(A[B]=
A[B]||n.nestedProperty(D,B).get,t=A[B]());return n.isValidTextValue(t)?t:""})};var u={max:10,count:0,name:"hovertemplate"};n.hovertemplateString=function(){return m.apply(u,arguments)};var v={max:10,count:0,name:"texttemplate"};n.texttemplateString=function(){return m.apply(v,arguments)};var x=/^[:|\|]/;n.subplotSort=function(y,D){for(var A=Math.min(y.length,D.length)+1,t=0,B=0,F=0;F<A;F++){var I=y.charCodeAt(F)||0,J=D.charCodeAt(F)||0,L=48<=I&&57>=I,H=48<=J&&57>=J;L&&(t=10*t+I-48);H&&(B=10*B+J-48);
if(!L||!H){if(t!==B)return t-B;if(I!==J)return I-J}}return B-t};var C=2E9;n.seedPseudoRandom=function(){C=2E9};n.pseudoRandom=function(){var y=C;C=(69069*C+1)%4294967296;return 429496729>Math.abs(C-y)?n.pseudoRandom():C/4294967296};n.fillText=function(y,D,A){var t=Array.isArray(A)?function(F){A.push(F)}:function(F){A.text=F},B=n.extractOption(y,D,"htx","hovertext");if(n.isValidTextValue(B))return t(B);y=n.extractOption(y,D,"tx","text");if(n.isValidTextValue(y))return t(y)};n.isValidTextValue=function(y){return y||
0===y};n.formatPercent=function(y,D){D=D||0;y=(Math.round(100*y*Math.pow(10,D))*Math.pow(.1,D)).toFixed(D)+"%";for(var A=0;A<D;A++)-1!==y.indexOf(".")&&(y=y.replace("0%","%"),y=y.replace(".%","%"));return y};n.isHidden=function(y){y=window.getComputedStyle(y).display;return!y||"none"===y};n.strTranslate=function(y,D){return y||D?"translate("+y+","+D+")":""};n.strRotate=function(y){return y?"rotate("+y+")":""};n.strScale=function(y){return 1!==y?"scale("+y+")":""};n.getTextTransform=function(y){var D=
y.noCenter,A=y.textX,t=y.textY,B=y.targetX,F=y.targetY,I=y.anchorX||0,J=y.anchorY||0,L=y.rotate;(y=y.scale)?1<y&&(y=1):y=0;return n.strTranslate(B-y*(A+I),F-y*(t+J))+n.strScale(y)+(L?"rotate("+L+(D?"":" "+A+" "+t)+")":"")};n.ensureUniformFontSize=function(y,D){var A=n.extendFlat({},D);A.size=Math.max(D.size,y._fullLayout.uniformtext.minsize||0);return A};n.join2=function(y,D,A){var t=y.length;return 1<t?y.slice(0,-1).join(D)+A+y[t-1]:y.join(D)}},{"../constants/numerical":753,"./anchor_utils":758,
"./angles":759,"./array":760,"./clean_number":761,"./clear_responsive":763,"./coerce":764,"./dates":765,"./dom":766,"./extend":768,"./filter_unique":769,"./filter_visible":770,"./geometry2d":773,"./identity":776,"./increment":777,"./is_plain_object":779,"./keyed_container":780,"./localize":781,"./loggers":782,"./make_trace_groups":783,"./matrix":784,"./mod":785,"./nested_property":786,"./noop":787,"./notifier":788,"./preserve_drawing_buffer":792,"./push_unique":793,"./regex":795,"./relative_attr":796,
"./relink_private":797,"./search":798,"./stats":801,"./throttle":804,"./to_log_range":805,d3:169,"d3-time-format":166,"fast-isnumeric":241}],779:[function(b,K,G){K.exports=function(q){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(q):"[object Object]"===Object.prototype.toString.call(q)&&Object.getPrototypeOf(q)===Object.prototype}},{}],780:[function(b,K,G){var q=b("./nested_property"),m=/^\w*$/;K.exports=function(l,h,a,g){a=a||"name";g=g||
"value";var e,n={};if(h&&h.length){var p=q(l,h);var c=p.get()}else c=l;h=h||"";var d={};if(c)for(e=0;e<c.length;e++)d[c[e][a]]=e;var f=m.test(g),k={set:function(r,u){var v=null===u?4:0;if(!c){if(!p||4===v)return;c=[];p.set(c)}var x=d[r];if(void 0===x){if(4===v)return;v|=3;x=c.length;d[r]=x}else u!==(f?c[x][g]:q(c[x],g).get())&&(v|=2);var C=c[x]=c[x]||{};C[a]=r;f?C[g]=u:q(C,g).set(u);null!==u&&(v&=-5);n[x]|=v;return k},get:function(r){if(c&&(r=d[r],void 0!==r))return f?c[r][g]:q(c[r],g).get()},rename:function(r,
u){var v=d[r];if(void 0===v)return k;n[v]|=1;d[u]=v;delete d[r];c[v][a]=u;return k},remove:function(r){var u=d[r];if(void 0===u)return k;var v=c[u];if(2<Object.keys(v).length)return n[u]|=2,k.set(r,null);if(f){for(e=u;e<c.length;e++)n[e]|=3;for(e=u;e<c.length;e++)d[c[e][a]]--;c.splice(u,1);delete d[r]}else q(v,g).set(null),n[u]|=6;return k},constructUpdate:function(){for(var r,u,v={},x=Object.keys(n),C=0;C<x.length;C++)u=x[C],r=h+"["+u+"]",c[u]?(n[u]&1&&(v[r+"."+a]=c[u][a]),n[u]&2&&(v[r+"."+g]=f?
n[u]&4?null:c[u][g]:n[u]&4?null:q(c[u],g).get())):v[r]=null;return v}};return k}},{"./nested_property":786}],781:[function(b,K,G){var q=b("../registry");K.exports=function(m,l){for(var h=m._context.locale,a=0;2>a;a++){for(var g=m._context.locales,e=0;2>e;e++){if(g=(g[h]||{}).dictionary)if(g=g[l])return g;g=q.localeRegistry}e=h.split("-")[0];if(e===h)break;h=e}return l}},{"../registry":911}],782:[function(b,K,G){function q(h,a){if(h&&h.apply)try{h.apply(console,a);return}catch(e){}for(var g=0;g<a.length;g++)try{h(a[g])}catch(e){console.log(a[g])}}
var m=b("../plot_api/plot_config").dfltConfig,l=b("./notifier");b=K.exports={};b.log=function(){var h;if(1<m.logging){var a=["LOG:"];for(h=0;h<arguments.length;h++)a.push(arguments[h]);q(console.trace||console.log,a)}if(1<m.notifyOnLogging){a=[];for(h=0;h<arguments.length;h++)a.push(arguments[h]);l(a.join("<br>"),"long")}};b.warn=function(){var h;if(0<m.logging){var a=["WARN:"];for(h=0;h<arguments.length;h++)a.push(arguments[h]);q(console.trace||console.log,a)}if(0<m.notifyOnLogging){a=[];for(h=0;h<
arguments.length;h++)a.push(arguments[h]);l(a.join("<br>"),"stick")}};b.error=function(){var h;if(0<m.logging){var a=["ERROR:"];for(h=0;h<arguments.length;h++)a.push(arguments[h]);q(console.error,a)}if(0<m.notifyOnLogging){a=[];for(h=0;h<arguments.length;h++)a.push(arguments[h]);l(a.join("<br>"),"stick")}}},{"../plot_api/plot_config":815,"./notifier":788}],783:[function(b,K,G){var q=b("d3");K.exports=function(m,l,h){l=m.selectAll("g."+h.replace(/\s/g,".")).data(l,function(g){return g[0].trace.uid});
l.exit().remove();l.enter().append("g").attr("class",h);l.order();var a=m.classed("rangeplot")?"nodeRangePlot3":"node3";l.each(function(g){g[0][a]=q.select(this)});return l}},{d3:169}],784:[function(b,K,G){var q=b("gl-mat4");G.init2dArray=function(m,l){for(var h=Array(m),a=0;a<m;a++)h[a]=Array(l);return h};G.transposeRagged=function(m){var l=0,h=m.length,a,g;for(a=0;a<h;a++)l=Math.max(l,m[a].length);var e=Array(l);for(a=0;a<l;a++)for(e[a]=Array(h),g=0;g<h;g++)e[a][g]=m[g][a];return e};G.dot=function(m,
l){if(!m.length||!l.length||m.length!==l.length)return null;var h=m.length,a;if(m[0].length){var g=Array(h);for(a=0;a<h;a++)g[a]=G.dot(m[a],l)}else if(l[0].length)for(l=G.transposeRagged(l),g=Array(l.length),a=0;a<l.length;a++)g[a]=G.dot(m,l[a]);else for(a=g=0;a<h;a++)g+=m[a]*l[a];return g};G.translationMatrix=function(m,l){return[[1,0,m],[0,1,l],[0,0,1]]};G.rotationMatrix=function(m){m=m*Math.PI/180;return[[Math.cos(m),-Math.sin(m),0],[Math.sin(m),Math.cos(m),0],[0,0,1]]};G.rotationXYMatrix=function(m,
l,h){return G.dot(G.dot(G.translationMatrix(l,h),G.rotationMatrix(m)),G.translationMatrix(-l,-h))};G.apply3DTransform=function(m){return function(){var l=arguments;l=1===arguments.length?l[0]:[l[0],l[1],l[2]||0];return G.dot(m,[l[0],l[1],l[2],1]).slice(0,3)}};G.apply2DTransform=function(m){return function(){var l=arguments;3===l.length&&(l=l[0]);l=1===arguments.length?l[0]:[l[0],l[1]];return G.dot(m,[l[0],l[1],1]).slice(0,2)}};G.apply2DTransform2=function(m){var l=G.apply2DTransform(m);return function(h){return l(h.slice(0,
2)).concat(l(h.slice(2,4)))}};G.convertCssMatrix=function(m){if(m){var l=m.length;if(16===l)return m;if(6===l)return[m[0],m[1],0,0,m[2],m[3],0,0,0,0,1,0,m[4],m[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]};G.inverseTransformMatrix=function(m){var l=[];q.invert(l,m);return[[l[0],l[1],l[2],l[3]],[l[4],l[5],l[6],l[7]],[l[8],l[9],l[10],l[11]],[l[12],l[13],l[14],l[15]]]}},{"gl-mat4":292}],785:[function(b,K,G){K.exports={mod:function(q,m){q%=m;return 0>q?q+m:q},modHalf:function(q,m){return Math.abs(q)>
m/2?q-Math.round(q/m)*m:q}}},{}],786:[function(b,K,G){function q(p,c){return function(){var d=p,f,k;for(f=0;f<c.length-1;f++){var r=c[f];if(-1===r){r=!0;var u=[];for(k=0;k<d.length;k++)u[k]=q(d[k],c.slice(f+1))(),u[k]!==u[0]&&(r=!1);return r?u[0]:u}if("number"===typeof r&&!e(d))return;d=d[r];if("object"!==typeof d||null===d)return}if("object"===typeof d&&null!==d&&(u=d[c[f]],null!==u))return u}}function m(p,c){return void 0===p||null===p&&!c.match(n)}function l(p,c,d){return function(f){var k=p,r=
"",u=[[p,r]],v=m(f,d),x;for(x=0;x<c.length-1;x++){var C=c[x];if("number"===typeof C&&!e(k))throw"array index but container is not an array";if(-1===C){v=k;r=c.slice(x+1);C=f;var z=d,y=e(C),D=!0,A=C,t=z.replace("-1",0),B=y?!1:m(C,t),F=r[0];for(u=0;u<v.length;u++)t=z.replace("-1",u),y&&(A=C[u%C.length],B=m(A,t)),B&&(D=!1),h(v,u,F,B)&&l(v[u],r,z.replace("-1",u))(A);if(v=!D)break;else return}if(!h(k,C,c[x+1],v))break;k=k[C];if("object"!==typeof k||null===k)throw"container is not an object";z=C;g(C)?z=
"["+C+"]":r&&(z="."+C);r+=z;u.push([k,r])}if(v){if(x===c.length-1&&(delete k[c[x]],Array.isArray(k)&&+c[x]===k.length-1))for(;k.length&&void 0===k[k.length-1];)k.pop()}else k[c[x]]=f}}function h(p,c,d,f){if(void 0===p[c]){if(f)return!1;p[c]="number"===typeof d?[]:{}}return!0}function a(p,c,d){return{set:function(){throw"bad container";},get:function(){},astr:c,parts:d,obj:p}}var g=b("fast-isnumeric"),e=b("./array").isArrayOrTypedArray;K.exports=function(p,c){if(g(c))c=String(c);else if("string"!==
typeof c||"[-1]"===c.substr(c.length-4))throw"bad property string";for(var d=0,f=c.split("."),k,r;d<f.length;){if(k=String(f[d]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(k[1])f[d]=k[1];else if(0===d)f.splice(0,1);else throw"bad property string";k=k[2].substr(1,k[2].length-2).split("][");for(r=0;r<k.length;r++)d++,f.splice(d,0,Number(k[r]))}d++}return"object"!==typeof p?a(p,c,f):{set:l(p,f,c),get:q(p,f),astr:c,parts:f,obj:p}};var n=/(^|\.)args\[/},{"./array":760,"fast-isnumeric":241}],787:[function(b,
K,G){K.exports=function(){}},{}],788:[function(b,K,G){var q=b("d3"),m=b("fast-isnumeric"),l=[];K.exports=function(h,a){function g(n){n.duration(700).style("opacity",0).each("end",function(p){p=l.indexOf(p);-1!==p&&l.splice(p,1);q.select(this).remove()})}if(-1===l.indexOf(h)){l.push(h);var e=1E3;m(a)?e=a:"long"===a&&(e=3E3);h=q.select("body").selectAll(".plotly-notifier").data([0]);h.enter().append("div").classed("plotly-notifier",!0);h.selectAll(".notifier-note").data(l).enter().append("div").classed("notifier-note",
!0).style("opacity",0).each(function(n){var p=q.select(this);p.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){p.transition().call(g)});var c=p.append("p");n=n.split(/<br\s*\/?>/g);for(var d=0;d<n.length;d++)d&&c.append("br"),c.append("span").text(n[d]);"stick"===a?p.transition().duration(350).style("opacity",1):p.transition().duration(700).style("opacity",1).transition().delay(e).call(g)})}}},{d3:169,"fast-isnumeric":241}],789:[function(b,K,G){var q=b("./setcursor");
K.exports=function(m,l){var h=m.attr("data-savedcursor");if(l){if(!h){h=(m.attr("class")||"").split(" ");for(var a=0;a<h.length;a++){var g=h[a];0===g.indexOf("cursor-")&&m.attr("data-savedcursor",g.substr(7)).classed(g,!1)}m.attr("data-savedcursor")||m.attr("data-savedcursor","!!")}q(m,l)}else h&&(m.attr("data-savedcursor",null),"!!"===h?q(m):q(m,h))}},{"./setcursor":799}],790:[function(b,K,G){var q=b("./matrix").dot,m=b("../constants/numerical").BADNUM,l=K.exports={};l.tester=function(h){function a(v,
x){var C=v[0],z=v[1];return C===m||C<n||C>p||z===m||z<c||z>d||x&&k(v)?!1:!0}function g(v,x){var C=v[0];v=v[1];if(C===m||C<n||C>p||v===m||v<c||v>d)return!1;var z=e.length,y=e[0][0],D=e[0][1],A=0,t;for(t=1;t<z;t++){var B=y;var F=D;y=e[t][0];D=e[t][1];var I=Math.min(B,y);if(!(C<I||C>Math.max(B,y)||v>Math.max(F,D)))if(v<Math.min(F,D))C!==I&&A++;else{B=y===B?v:F+(C-B)*(D-F)/(y-B);if(v===B)return 1===t&&x?!1:!0;v<=B&&C!==I&&A++}}return 1===A%2}var e=h.slice(),n=e[0][0],p=n,c=e[0][1],d=c;e.push(e[0]);for(h=
1;h<e.length;h++)n=Math.min(n,e[h][0]),p=Math.max(p,e[h][0]),c=Math.min(c,e[h][1]),d=Math.max(d,e[h][1]);var f=!1;if(5===e.length)if(e[0][0]===e[1][0]){if(e[2][0]===e[3][0]&&e[0][1]===e[3][1]&&e[1][1]===e[2][1]){f=!0;var k=function(v){return v[0]===e[0][0]}}}else e[0][1]===e[1][1]&&e[2][1]===e[3][1]&&e[0][0]===e[3][0]&&e[1][0]===e[2][0]&&(f=!0,k=function(v){return v[1]===e[0][1]});var r=!0,u=e[0];for(h=1;h<e.length;h++)if(u[0]!==e[h][0]||u[1]!==e[h][1]){r=!1;break}return{xmin:n,xmax:p,ymin:c,ymax:d,
pts:e,contains:f?a:g,isRect:f,degenerate:r}};l.isSegmentBent=function(h,a,g,e){var n=h[a],p=[h[g][0]-n[0],h[g][1]-n[1]],c=q(p,p),d=Math.sqrt(c);d=[-p[1]/d,p[0]/d];for(a+=1;a<g;a++){var f=[h[a][0]-n[0],h[a][1]-n[1]];var k=q(f,p);if(0>k||k>c||Math.abs(q(f,d))>e)return!0}return!1};l.filter=function(h,a){function g(d){h.push(d);d=e.length;var f=n;e.splice(p+1);for(var k=f+1;k<h.length;k++)if(k===h.length-1||l.isSegmentBent(h,f,k+1,a))e.push(h[k]),e.length<d-2&&(n=k,p=e.length-1),f=k}var e=[h[0]],n=0,
p=0;if(1<h.length){var c=h.pop();g(c)}return{addPt:g,raw:h,filtered:e}}},{"../constants/numerical":753,"./matrix":784}],791:[function(b,K,G){(function(q){(function(){var m=b("./show_no_webgl_msg"),l=b("regl");K.exports=function(h,a){var g=h._fullLayout,e=!0;g._glcanvas.each(function(n){if(!n.regl&&(!n.pick||g._has("parcoords"))){try{n.regl=l({canvas:this,attributes:{antialias:!n.pick,preserveDrawingBuffer:!0},pixelRatio:h._context.plotGlPixelRatio||q.devicePixelRatio,extensions:a||[]})}catch(p){e=
!1}n.regl||(e=!1);e&&this.addEventListener("webglcontextlost",function(p){h&&h.emit&&h.emit("plotly_webglcontextlost",{event:p,layer:n.key})},!1)}});e||m({container:g._glcontainer.node()});return e}}).call(this)}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./show_no_webgl_msg":800,regl:540}],792:[function(b,K,G){var q=b("fast-isnumeric"),m=b("is-mobile");K.exports=function(l){if(l&&l.hasOwnProperty("userAgent"))var h=l.userAgent;
else"undefined"!==typeof navigator&&(h=navigator.userAgent),h&&h.headers&&"string"===typeof h.headers["user-agent"]&&(h=h.headers["user-agent"]);if("string"!==typeof h)return!0;l=m({ua:{headers:{"user-agent":h}},tablet:!0,featureDetect:!1});if(!l){h=h.split(" ");for(var a=1;a<h.length;a++)if(-1!==h[a].indexOf("Safari"))for(var g=a-1;-1<g;g--){var e=h[g];if("Version/"===e.substr(0,8)&&(e=e.substr(8).split(".")[0],q(e)&&(e=+e),13<=e))return!0}}return l}},{"fast-isnumeric":241,"is-mobile":467}],793:[function(b,
K,G){K.exports=function(q,m){if(m instanceof RegExp){for(var l=m.toString(),h=0;h<q.length;h++)if(q[h]instanceof RegExp&&q[h].toString()===l)return q;q.push(m)}else!m&&0!==m||-1!==q.indexOf(m)||q.push(m);return q}},{}],794:[function(b,K,G){var q=b("../lib"),m=b("../plot_api/plot_config").dfltConfig,l={add:function(h,a,g,e,n){h.undoQueue=h.undoQueue||{index:0,queue:[],sequence:!1};var p=h.undoQueue.index;if(h.autoplay)h.undoQueue.inSequence||(h.autoplay=!1);else{if(!h.undoQueue.sequence||h.undoQueue.beginSequence){var c=
{undo:{calls:[],args:[]},redo:{calls:[],args:[]}};h.undoQueue.queue.splice(p,h.undoQueue.queue.length-p,c);h.undoQueue.index+=1}else c=h.undoQueue.queue[p-1];h.undoQueue.beginSequence=!1;c&&(c.undo.calls.unshift(a),c.undo.args.unshift(g),c.redo.calls.push(e),c.redo.args.push(n));h.undoQueue.queue.length>m.queueLength&&(h.undoQueue.queue.shift(),h.undoQueue.index--)}},startSequence:function(h){h.undoQueue=h.undoQueue||{index:0,queue:[],sequence:!1};h.undoQueue.sequence=!0;h.undoQueue.beginSequence=
!0},stopSequence:function(h){h.undoQueue=h.undoQueue||{index:0,queue:[],sequence:!1};h.undoQueue.sequence=!1;h.undoQueue.beginSequence=!1},undo:function(h){var a;if(h.framework&&h.framework.isPolar)h.framework.undo();else if(!(void 0===h.undoQueue||isNaN(h.undoQueue.index)||0>=h.undoQueue.index)){h.undoQueue.index--;var g=h.undoQueue.queue[h.undoQueue.index];h.undoQueue.inSequence=!0;for(a=0;a<g.undo.calls.length;a++)l.plotDo(h,g.undo.calls[a],g.undo.args[a]);h.undoQueue.inSequence=!1;h.autoplay=
!1}},redo:function(h){var a;if(h.framework&&h.framework.isPolar)h.framework.redo();else if(!(void 0===h.undoQueue||isNaN(h.undoQueue.index)||h.undoQueue.index>=h.undoQueue.queue.length)){var g=h.undoQueue.queue[h.undoQueue.index];h.undoQueue.inSequence=!0;for(a=0;a<g.redo.calls.length;a++)l.plotDo(h,g.redo.calls[a],g.redo.args[a]);h.undoQueue.inSequence=!1;h.autoplay=!1;h.undoQueue.index++}},plotDo:function(h,a,g){h.autoplay=!0;for(var e=[],n,p=0;p<g.length;p++)n=g[p],e[p]=n===h?n:"object"===typeof n?
Array.isArray(n)?q.extendDeep([],n):q.extendDeepAll({},n):n;a.apply(null,e)}};K.exports=l},{"../lib":778,"../plot_api/plot_config":815}],795:[function(b,K,G){G.counter=function(q,m,l,h){m=(m||"")+(l?"":"$");h=!1===h?"":"^";return"xy"===q?new RegExp(h+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+m):new RegExp(h+q+"([2-9]|[1-9][0-9]+)?"+m)}},{}],796:[function(b,K,G){var q=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,m=/^[^\.\[\]]+$/;K.exports=function(l,h){for(;h;){var a=l.match(q);if(a)l=a[1];else if(l.match(m))l=
"";else throw Error("bad relativeAttr call:"+[l,h]);if("^"===h.charAt(0))h=h.slice(1);else break}return l&&"["!==h.charAt(0)?l+"."+h:l+h}},{}],797:[function(b,K,G){var q=b("./array").isArrayOrTypedArray,m=b("./is_plain_object");K.exports=function g(h,a){for(var e in a){var n=a[e],p=h[e];if(p!==n)if("_"===e.charAt(0)||"function"===typeof n)e in h||(h[e]=n);else if(q(n)&&q(p)&&m(n[0])){if("customdata"!==e&&"ids"!==e)for(var c=Math.min(n.length,p.length),d=0;d<c;d++)p[d]!==n[d]&&m(n[d])&&m(p[d])&&g(p[d],
n[d])}else m(n)&&m(p)&&(g(p,n),Object.keys(p).length||delete h[e])}}},{"./array":760,"./is_plain_object":779}],798:[function(b,K,G){function q(p,c){return p<c}function m(p,c){return p<=c}function l(p,c){return p>c}function h(p,c){return p>=c}var a=b("fast-isnumeric"),g=b("./loggers"),e=b("./identity"),n=b("../constants/numerical").BADNUM;G.findBin=function(p,c,d){if(a(c.start))return d?Math.ceil((p-c.start)/c.size-1E-9)-1:Math.floor((p-c.start)/c.size+1E-9);var f=0,k=c.length,r=0,u=1<k?(c[k-1]-c[0])/
(k-1):1;var v=0<=u?d?q:m:d?h:l;for(p+=1E-9*u*(d?-1:1)*(0<=u?1:-1);f<k&&100>r++;)d=Math.floor((f+k)/2),v(c[d],p)?f=d+1:k=d;90<r&&g.log("Long binary search...");return f-1};G.sorterAsc=function(p,c){return p-c};G.sorterDes=function(p,c){return c-p};G.distinctVals=function(p,c){var d=(c||{}).unitMinDiff;p=p.slice();p.sort(G.sorterAsc);for(c=p.length-1;-1<c&&p[c]===n;c--);var f=1;d||(f=p[c]-p[0]||1);d=f/(c||1)/1E4;for(var k=[],r,u=0;u<=c;u++){var v=p[u],x=v-r;void 0===r?(k.push(v),r=v):x>d&&(f=Math.min(f,
x),k.push(v),r=v)}return{vals:k,minDiff:f}};G.roundUp=function(p,c,d){for(var f=0,k=c.length-1,r=0,u=d?0:1,v=d?1:0,x=d?Math.ceil:Math.floor;f<k&&100>r++;)d=x((f+k)/2),c[d]<=p?f=d+u:k=d-v;return c[f]};G.sort=function(p,c){for(var d=0,f=0,k=1;k<p.length;k++){var r=c(p[k],p[k-1]);0>r?d=1:0<r&&(f=1);if(d&&f)return p.sort(c)}return f?p:p.reverse()};G.findIndexOfMin=function(p,c){c=c||e;for(var d=Infinity,f,k=0;k<p.length;k++){var r=c(p[k]);r<d&&(d=r,f=k)}return f}},{"../constants/numerical":753,"./identity":776,
"./loggers":782,"fast-isnumeric":241}],799:[function(b,K,G){K.exports=function(q,m){(q.attr("class")||"").split(" ").forEach(function(l){0===l.indexOf("cursor-")&&q.classed(l,!1)});m&&q.classed("cursor-"+m,!0)}},{}],800:[function(b,K,G){var q=b("../components/color"),m=function(){};K.exports=function(l){for(var h in l)"function"===typeof l[h]&&(l[h]=m);l.destroy=function(){l.container.parentNode.removeChild(l.container)};h=document.createElement("div");h.className="no-webgl";h.style.cursor="pointer";
h.style.fontSize="24px";h.style.color=q.defaults[0];h.style.position="absolute";h.style.left=h.style.top="0px";h.style.width=h.style.height="100%";h.style["background-color"]=q.lightLine;h.style["z-index"]=30;var a=document.createElement("p");a.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info";a.style.position="relative";a.style.top="50%";a.style.left="50%";a.style.height="30%";a.style.width="50%";a.style.margin="-15% 0 0 -25%";h.appendChild(a);l.container.appendChild(h);
l.container.style.background="#FFFFFF";l.container.onclick=function(){window.open("https://get.webgl.org")};return!1}},{"../components/color":643}],801:[function(b,K,G){var q=b("fast-isnumeric"),m=b("./array").isArrayOrTypedArray;G.aggNums=function(l,h,a,g){var e;if(!g||g>a.length)g=a.length;q(h)||(h=!1);if(m(a[0])){var n=Array(g);for(e=0;e<g;e++)n[e]=G.aggNums(l,h,a[e]);a=n}for(e=0;e<g;e++)q(h)?q(a[e])&&(h=l(+h,+a[e])):h=a[e];return h};G.len=function(l){return G.aggNums(function(h){return h+1},0,
l)};G.mean=function(l,h){h||(h=G.len(l));return G.aggNums(function(a,g){return a+g},0,l)/h};G.midRange=function(l){if(void 0!==l&&0!==l.length)return(G.aggNums(Math.max,null,l)+G.aggNums(Math.min,null,l))/2};G.variance=function(l,h,a){h||(h=G.len(l));q(a)||(a=G.mean(l,h));return G.aggNums(function(g,e){return g+Math.pow(e-a,2)},0,l)/h};G.stdev=function(l,h,a){return Math.sqrt(G.variance(l,h,a))};G.median=function(l){l=l.slice().sort();return G.interp(l,.5)};G.interp=function(l,h){if(!q(h))throw"n should be a finite number";
h=h*l.length-.5;if(0>h)return l[0];if(h>l.length-1)return l[l.length-1];var a=h%1;return a*l[Math.ceil(h)]+(1-a)*l[Math.floor(h)]}},{"./array":760,"fast-isnumeric":241}],802:[function(b,K,G){var q=b("color-normalize");K.exports=function(m){return m?q(m):[0,0,0,1]}},{"color-normalize":125}],803:[function(b,K,G){function q(P,M,N){var T,Q,U,S;MathJax.Hub.Queue(function(){Q=e.extendDeepAll({},MathJax.Hub.config);U=MathJax.Hub.processSectionDelay;void 0!==MathJax.Hub.processSectionDelay&&(MathJax.Hub.processSectionDelay=
0);return MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]},displayAlign:"left"})},function(){T=MathJax.Hub.config.menuSettings.renderer;if("SVG"!==T)return MathJax.Hub.setRenderer("SVG")},function(){var X="math-output-"+e.randstr({},64);S=g.select("body").append("div").attr({id:X}).style({visibility:"hidden",position:"absolute"}).style({"font-size":M.fontSize+"px"}).text(P.replace(f,"\\lt ").replace(k,"\\gt "));return MathJax.Hub.Typeset(S.node())},function(){var X=
g.select("body").select("#MathJax_SVG_glyphs");if(S.select(".MathJax_SVG").empty()||!S.select("svg").node())e.log("There was an error in the tex syntax.",P),N();else{var Z=S.select("svg").node().getBoundingClientRect();N(S.select(".MathJax_SVG"),X,Z)}S.remove();if("SVG"!==T)return MathJax.Hub.setRenderer(T)},function(){void 0!==U&&(MathJax.Hub.processSectionDelay=U);return MathJax.Hub.Config(Q)})}function m(P,M){return P?(P=(P=P.match(M))&&(P[3]||P[4]))&&l(P):null}function l(P){return P.replace(H,
function(M,N){if("#"===N.charAt(0))if(N="x"===N.charAt(1)?parseInt(N.substr(2),16):parseInt(N.substr(1),10),1114111<N)N=void 0;else{var T=String.fromCodePoint;T?N=T(N):(T=String.fromCharCode,N=65535>=N?T(N):T((N>>10)+55232,N%1024+56320))}else N=L[N];return N||M})}function h(P,M){function N(){Z++;var oa=document.createElementNS(p.svg,"tspan");g.select(oa).attr({class:"line",dy:Z*c+"em"});P.appendChild(oa);aa=oa;var na=X;X=[{node:oa}];if(1<na.length)for(oa=1;oa<na.length;oa++)T(na[oa])}function T(oa){var na=
oa.type,la={};if("a"===na){var ia="a";var sa=oa.target,ta=oa.href,Aa=oa.popup;ta&&(la={"xlink:xlink:show":"_blank"===sa||"_"!==sa.charAt(0)?"new":"replace",target:sa,"xlink:xlink:href":ta},Aa&&(la.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+Aa+'");return false;'))}else ia="tspan";oa.style&&(la.style=oa.style);ia=document.createElementNS(p.svg,ia);"sup"===na||"sub"===na?(Q(aa,x),aa.appendChild(ia),sa=document.createElementNS(p.svg,"tspan"),Q(sa,x),g.select(sa).attr("dy",v[na]),la.dy=
u[na],aa.appendChild(ia),aa.appendChild(sa)):aa.appendChild(ia);g.select(ia).attr(la);aa=oa.node=ia;X.push(oa)}function Q(oa,na){oa.appendChild(document.createTextNode(na))}function U(oa){if(1===X.length)e.log("Ignoring unexpected end tag </"+oa+">.",M);else{var na=X.pop();oa!==na.type&&e.log("Start tag <"+na.type+"> doesnt match end tag <"+oa+">. Pretending it did match.",M);aa=X[X.length-1].node}}M=M.replace(z," ");var S=!1,X=[],Z=-1;if(A.test(M))N();else{var aa=P;X=[{node:P}]}for(var fa=M.split(y),
ha=0;ha<fa.length;ha++){var ja=fa[ha],ba=ja.match(D),ma=ba&&ba[2].toLowerCase(),qa=r[ma];if("br"===ma)N();else if(void 0===qa)Q(aa,l(ja));else if(ba[1])U(ma);else{ja=ba[4];ba={type:ma};var ka=m(ja,t);ka?(ka=ka.replace(J,"$1 fill:"),qa&&(ka+=";"+qa)):qa&&(ka=qa);ka&&(ba.style=ka);"a"===ma&&(S=!0,ma=m(ja,B))&&(qa=document.createElement("a"),qa.href=ma,-1!==C.indexOf(qa.protocol)&&(ba.href=encodeURI(decodeURI(ma)),ba.target=m(ja,F)||"_blank",ba.popup=m(ja,I)));T(ba)}}return S}function a(P,M,N){var T=
N.horizontalAlign,Q=N.verticalAlign||"top",U=P.node().getBoundingClientRect(),S=M.node().getBoundingClientRect(),X;var Z="bottom"===Q?function(){return U.bottom-X.height}:"middle"===Q?function(){return U.top+(U.height-X.height)/2}:function(){return U.top};var aa="right"===T?function(){return U.right-X.width}:"center"===T?function(){return U.left+(U.width-X.width)/2}:function(){return U.left};return function(){X=this.node().getBoundingClientRect();var fa=aa()-S.left,ha=Z()-S.top,ja=N.gd||{};N.gd&&
(ja._fullLayout._calcInverseTransform(ja),ha=e.apply3DTransform(ja._fullLayout._invTransform)(fa,ha),fa=ha[0],ha=ha[1]);this.style({top:ha+"px",left:fa+"px","z-index":1E3});return this}}var g=b("d3"),e=b("../lib"),n=e.strTranslate,p=b("../constants/xmlns_namespaces"),c=b("../constants/alignment").LINE_SPACING,d=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;G.convertToTspans=function(P,M,N){function T(){S.empty()||(X=P.attr("class")+"-math",S.select("svg."+X).remove());P.text("").style("white-space","pre");h(P.node(),
Q)&&P.style("pointer-events","all");G.positionText(P);N&&N.call(P)}var Q=P.text(),U=!P.attr("data-notex")&&"undefined"!==typeof MathJax&&Q.match(d),S=g.select(P.node().parentNode);if(!S.empty()){var X=P.attr("class")?P.attr("class").split(" ")[0]:"text";X+="-math";S.selectAll("svg."+X).remove();S.selectAll("g."+X+"-group").remove();P.style("display",null).attr({"data-unformatted":Q,"data-math":"N"});U?(M&&M._promises||[]).push(new Promise(function(Z){P.style("display","none");var aa=parseInt(P.node().style.fontSize,
10);q(U[2],{fontSize:aa},function(fa,ha,ja){S.selectAll("svg."+X).remove();S.selectAll("g."+X+"-group").remove();if((fa=fa&&fa.select("svg"))&&fa.node()){var ba=S.append("g").classed(X+"-group",!0).attr({"pointer-events":"none","data-unformatted":Q,"data-math":"Y"});ba.node().appendChild(fa.node());ha&&ha.node()&&fa.node().insertBefore(ha.node().cloneNode(!0),fa.node().firstChild);fa.attr({"class":X,height:ja.height,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});
ha=P.node().style.fill||"black";ja=fa.select("g");ja.attr({fill:ha,stroke:ha});ha=ja.node().getBoundingClientRect().width;ja=ja.node().getBoundingClientRect().height;var ma=+P.attr("x")-ha*{start:0,middle:.5,end:1}[P.attr("text-anchor")||"start"],qa=-(aa||P.node().getBoundingClientRect().height)/4;"y"===X[0]?(ba.attr({transform:"rotate("+[-90,+P.attr("x"),+P.attr("y")]+")"+n(-ha/2,qa-ja/2)}),fa.attr({x:+P.attr("x"),y:+P.attr("y")})):"l"===X[0]?fa.attr({x:P.attr("x"),y:qa-ja/2}):"a"===X[0]&&0!==X.indexOf("atitle")?
fa.attr({x:0,y:qa}):fa.attr({x:ma,y:+P.attr("y")+qa-ja/2});N&&N.call(P,ba);Z(ba)}else T(),Z()})})):T();return P}};var f=/(<|&lt;|&#60;)/g,k=/(>|&gt;|&#62;)/g,r={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},u={sub:"0.3em",sup:"-0.6em"},v={sub:"-0.21em",sup:"0.42em"},x="\u200b",C=["http:","https:","mailto:","",void 0,":"],z=G.NEWLINES=/(\r\n?|\n)/g,y=/(<[^<>]*>)/,D=/<(\/?)([^ >]*)(\s+(.*))?>/i,
A=/<br(\s+.*)?>/i;G.BR_TAG_ALL=/<br(\s+.*)?>/gi;var t=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,B=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,F=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,I=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i,J=/(^|;)\s*color:/;G.plainText=function(P,M){M=M||{};var N=void 0!==M.len&&-1!==M.len?M.len:Infinity;M=void 0!==M.allowedTags?M.allowedTags:["br"];var T=P.split(y);P=[];for(var Q="",U=0,S=0;S<T.length;S++){var X=T[S],Z=X.match(D);if(Z=Z&&Z[2].toLowerCase())-1!==
M.indexOf(Z)&&(P.push(X),Q=Z);else{Z=X.length;if(U+Z<N)P.push(X),U+=Z;else if(U<N){M=N-U;Q&&("br"!==Q||3>=M||3>=Z)&&P.pop();3<N?P.push(X.substr(0,M-3)+"..."):P.push(X.substr(0,M));break}Q=""}}return P.join("")};var L={mu:"\u03bc",amp:"&",lt:"<",gt:">",nbsp:"\u00a0",times:"\u00d7",plusmn:"\u00b1",deg:"\u00b0"},H=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;G.convertEntities=l;G.sanitizeHTML=function(P){P=P.replace(z," ");var M=document.createElement("p"),N=M,T=[];P=P.split(y);for(var Q=0;Q<P.length;Q++){var U=
P[Q],S=U.match(D),X=S&&S[2].toLowerCase();if(X in r)if(S[1])T.length&&(N=T.pop());else{S=S[4];U=(U=m(S,t))?{style:U}:{};if("a"===X){var Z=m(S,B);if(Z){var aa=document.createElement("a");aa.href=Z;-1!==C.indexOf(aa.protocol)&&(U.href=encodeURI(decodeURI(Z)),S=m(S,F))&&(U.target=S)}}X=document.createElement(X);N.appendChild(X);g.select(X).attr(U);N=X;T.push(X)}else N.appendChild(document.createTextNode(l(U)))}return M.innerHTML};G.lineCount=function(P){return P.selectAll("tspan.line").size()||1};G.positionText=
function(P,M,N){return P.each(function(){function T(X,Z){void 0===Z?(Z=Q.attr(X),null===Z&&(Q.attr(X,0),Z=0)):Q.attr(X,Z);return Z}var Q=g.select(this),U=T("x",M),S=T("y",N);"text"===this.nodeName&&Q.selectAll("tspan.line").attr({x:U,y:S})})};G.makeEditable=function(P,M){function N(){Q();P.style({opacity:0});var aa=Z.attr("class");(aa=aa?"."+aa.split(" ")[0]+"-math-group":"[class*=-math-group]")&&g.select(P.node().parentNode).select(aa).style({opacity:0})}function T(aa){aa=aa.node();var fa=document.createRange();
fa.selectNodeContents(aa);var ha=window.getSelection();ha.removeAllRanges();ha.addRange(fa);aa.focus()}function Q(){var aa=g.select(U).select(".svg-container"),fa=aa.append("div"),ha=P.node().style,ja=parseFloat(ha.fontSize||12),ba=M.text;void 0===ba&&(ba=P.attr("data-unformatted"));fa.classed("plugin-editable editable",!0).style({position:"absolute","font-family":ha.fontFamily||"Arial","font-size":ja,color:M.fill||ha.fill||"black",opacity:1,"background-color":M.background||"transparent",outline:"#ffffff33 1px solid",
margin:[-ja/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(ba).call(a(P,aa,M)).on("blur",function(){U._editing=!1;P.text(this.textContent).style({opacity:1});var ma=g.select(this).attr("class");(ma=ma?"."+ma.split(" ")[0]+"-math-group":"[class*=-math-group]")&&g.select(P.node().parentNode).select(ma).style({opacity:0});ma=this.textContent;g.select(this).transition().duration(0).remove();g.select(document).on("mouseup",null);X.edit.call(P,ma)}).on("focus",
function(){var ma=this;U._editing=!0;g.select(document).on("mouseup",function(){if(g.event.target===ma)return!1;document.activeElement===fa.node()&&fa.node().blur()})}).on("keyup",function(){27===g.event.which?(U._editing=!1,P.style({opacity:1}),g.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),X.cancel.call(P,this.textContent)):(X.input.call(P,this.textContent),g.select(this).call(a(P,aa,M)))}).on("keydown",function(){13===g.event.which&&this.blur()}).call(T)}
var U=M.gd,S=M.delegate,X=g.dispatch("edit","input","cancel"),Z=S||P;P.style({"pointer-events":S?"none":"all"});if(1!==P.size())throw Error("boo");if(M.immediate)N();else Z.on("click",N);return g.rebind(P,X,"on")}},{"../constants/alignment":745,"../constants/xmlns_namespaces":754,"../lib":778,d3:169}],804:[function(b,K,G){function q(l){l&&null!==l.timer&&(clearTimeout(l.timer),l.timer=null)}var m={};G.throttle=function(l,h,a){function g(){a();e.ts=Date.now();e.onDone&&(e.onDone(),e.onDone=null)}var e=
m[l],n=Date.now();if(!e){for(var p in m)m[p].ts<n-6E4&&delete m[p];e=m[l]={ts:0,timer:null}}q(e);n>e.ts+h?g():e.timer=setTimeout(function(){g();e.timer=null},h)};G.done=function(l){var h=m[l];return h&&h.timer?new Promise(function(a){var g=h.onDone;h.onDone=function(){g&&g();a();h.onDone=null}}):Promise.resolve()};G.clear=function(l){if(l)q(m[l]),delete m[l];else for(var h in m)G.clear(h)}},{}],805:[function(b,K,G){var q=b("fast-isnumeric");K.exports=function(m,l){if(0<m)return Math.log(m)/Math.LN10;
m=Math.log(Math.min(l[0],l[1]))/Math.LN10;q(m)||(m=Math.log(Math.max(l[0],l[1]))/Math.LN10-6);return m}},{"fast-isnumeric":241}],806:[function(b,K,G){K=K.exports={};var q=b("../plots/geo/constants").locationmodeToLayer,m=b("topojson-client").feature;K.getTopojsonName=function(l){return[l.scope.replace(/ /g,"-"),"_",l.resolution.toString(),"m"].join("")};K.getTopojsonPath=function(l,h){return l+h+".json"};K.getTopojsonFeatures=function(l,h){return m(h,h.objects[q[l.locationmode]]).features}},{"../plots/geo/constants":858,
"topojson-client":579}],807:[function(b,K,G){K.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],808:[function(b,K,G){K.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),
shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],809:[function(b,K,G){var q=b("../registry");K.exports=function(m){for(var l=q.layoutArrayContainers,h=q.layoutArrayRegexes,a=m.split("[")[0],g,e,n=0;n<h.length;n++)if((e=m.match(h[n]))&&0===e.index){g=e[0];break}g||(g=
l[l.indexOf(a)]);if(!g)return!1;m=m.substr(g.length);return m?(e=m.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))?{array:g,index:Number(e[1]),property:e[3]||""}:!1:{array:g,index:"",property:""}}},{"../registry":911}],810:[function(b,K,G){function q(n){for(var p={},c=0;c<n.length;c++)p[n[c]]=!1;return p}function m(n,p,c){n=h({},n);for(var d in n){var f=n[d];a(f)&&(n[d]=l(f,p,c,d))}"from-root"===c&&(n.editType=p);return n}function l(n,p,c,d){if(n.valType){c=h({},n);c.editType=p;if(Array.isArray(n.items))for(c.items=
Array(n.items.length),d=0;d<n.items.length;d++)c.items[d]=l(n.items[d],p,"from-root");return c}return m(n,p,"_"===d.charAt(0)?"nested":"from-root")}b=b("../lib");var h=b.extendFlat,a=b.isPlainObject;b={valType:"flaglist",extras:["none"],flags:"calc clearAxisTypes plot style markerSize colorbars".split(" ")};G={valType:"flaglist",extras:["none"],flags:"calc plot legend ticks axrange layoutstyle modebar camera arraydraw colorbars".split(" ")};var g=b.flags.slice().concat(["fullReplot"]),e=G.flags.slice().concat("layoutReplot");
K.exports={traces:b,layout:G,traceFlags:function(){return q(g)},layoutFlags:function(){return q(e)},update:function(n,p){if((p=p.editType)&&"none"!==p){p=p.split("+");for(var c=0;c<p.length;c++)n[p[c]]=!0}},overrideAll:m}},{"../lib":778}],811:[function(b,K,G){function q(C,z){var y=C[z],D=z.charAt(0);y&&"paper"!==y&&(C[z]=k(y,D,!0))}function m(C){function z(y,D){var A=C.title&&C.title[D];C[y]&&!A&&(C.title||(C.title={}),C.title[D]=C[y],delete C[y])}if(C){if("string"===typeof C.title||"number"===typeof C.title)C.title=
{text:C.title};z("titlefont","font");z("titleposition","position");z("titleside","side");z("titleoffset","offset")}}function l(C){if(!c.isPlainObject(C))return!1;var z=C.name;delete C.name;delete C.showlegend;return("string"===typeof z||"number"===typeof z)&&String(z)}function h(C){var z="middle",y="center";"string"===typeof C&&(-1!==C.indexOf("top")?z="top":-1!==C.indexOf("bottom")&&(z="bottom"),-1!==C.indexOf("left")?y="left":-1!==C.indexOf("right")&&(y="right"));return z+" "+y}function a(C,z){return z in
C&&"object"===typeof C[z]&&0===Object.keys(C[z]).length}function g(C){var z=C.search(v);if(0<z)return C.substr(0,z)}var e=b("fast-isnumeric"),n=b("gl-mat4/fromQuat"),p=b("../registry"),c=b("../lib"),d=b("../plots/plots");K=b("../plots/cartesian/axis_ids");var f=b("../components/color"),k=K.cleanId,r=K.getFromTrace,u=p.traceIs;G.clearPromiseQueue=function(C){Array.isArray(C._promises)&&0<C._promises.length&&c.log("Clearing previous rejected promises from queue.");C._promises=[]};G.cleanLayout=function(C){var z;
C||(C={});C.xaxis1&&(C.xaxis||(C.xaxis=C.xaxis1),delete C.xaxis1);C.yaxis1&&(C.yaxis||(C.yaxis=C.yaxis1),delete C.yaxis1);C.scene1&&(C.scene||(C.scene=C.scene1),delete C.scene1);var y=(d.subplotsRegistry.cartesian||{}).attrRegex,D=(d.subplotsRegistry.polar||{}).attrRegex,A=(d.subplotsRegistry.ternary||{}).attrRegex,t=(d.subplotsRegistry.gl3d||{}).attrRegex,B=Object.keys(C);for(z=0;z<B.length;z++){var F=B[z];if(y&&y.test(F)){F=C[F];F.anchor&&"free"!==F.anchor&&(F.anchor=k(F.anchor));F.overlaying&&
(F.overlaying=k(F.overlaying));F.type||(F.isdate?F.type="date":F.islog?F.type="log":!1===F.isdate&&!1===F.islog&&(F.type="linear"));if("withzero"===F.autorange||"tozero"===F.autorange)F.autorange=!0,F.rangemode="tozero";delete F.islog;delete F.isdate;delete F.categories;a(F,"domain")&&delete F.domain;void 0!==F.autotick&&(void 0===F.tickmode&&(F.tickmode=F.autotick?"auto":"linear"),delete F.autotick);m(F)}else if(D&&D.test(F))m(C[F].radialaxis);else if(A&&A.test(F))F=C[F],m(F.aaxis),m(F.baxis),m(F.caxis);
else if(t&&t.test(F)){F=C[F];var I=F.cameraposition;if(Array.isArray(I)&&4===I[0].length){var J=I[1],L=I[2],H=n([],I[0]),P=[];for(I=0;3>I;++I)P[I]=J[I]+L*H[2+4*I];F.camera={eye:{x:P[0],y:P[1],z:P[2]},center:{x:J[0],y:J[1],z:J[2]},up:{x:0,y:0,z:1}};delete F.cameraposition}m(F.xaxis);m(F.yaxis);m(F.zaxis)}}y=Array.isArray(C.annotations)?C.annotations.length:0;for(z=0;z<y;z++)D=C.annotations[z],c.isPlainObject(D)&&(D.ref&&("paper"===D.ref?(D.xref="paper",D.yref="paper"):"data"===D.ref&&(D.xref="x",D.yref=
"y"),delete D.ref),q(D,"xref"),q(D,"yref"));y=Array.isArray(C.shapes)?C.shapes.length:0;for(z=0;z<y;z++)D=C.shapes[z],c.isPlainObject(D)&&(q(D,"xref"),q(D,"yref"));y=Array.isArray(C.images)?C.images.length:0;for(z=0;z<y;z++)D=C.images[z],c.isPlainObject(D)&&(q(D,"xref"),q(D,"yref"));if(z=C.legend)3<z.x?(z.x=1.02,z.xanchor="left"):-2>z.x&&(z.x=-.02,z.xanchor="right"),3<z.y?(z.y=1.02,z.yanchor="bottom"):-2>z.y&&(z.y=-.02,z.yanchor="top");m(C);"rotate"===C.dragmode&&(C.dragmode="orbit");f.clean(C);C.template&&
C.template.layout&&G.cleanLayout(C.template.layout);return C};G.cleanData=function(C){for(var z=0;z<C.length;z++){var y=C[z];"histogramy"===y.type&&"xbins"in y&&!("ybins"in y)&&(y.ybins=y.xbins,delete y.xbins);if(y.error_y&&"opacity"in y.error_y){var D=f.defaults;D=y.error_y.color||(u(y,"bar")?f.defaultLine:D[z%D.length]);y.error_y.color=f.addOpacity(f.rgb(D),f.opacity(D)*y.error_y.opacity);delete y.error_y.opacity}"bardir"in y&&("h"!==y.bardir||!u(y,"bar")&&"histogram"!==y.type.substr(0,9)||(y.orientation=
"h",G.swapXYData(y)),delete y.bardir);"histogramy"===y.type&&G.swapXYData(y);if("histogramx"===y.type||"histogramy"===y.type)y.type="histogram";"scl"in y&&!("colorscale"in y)&&(y.colorscale=y.scl,delete y.scl);"reversescl"in y&&!("reversescale"in y)&&(y.reversescale=y.reversescl,delete y.reversescl);y.xaxis&&(y.xaxis=k(y.xaxis,"x"));y.yaxis&&(y.yaxis=k(y.yaxis,"y"));u(y,"gl3d")&&y.scene&&(y.scene=d.subplotsRegistry.gl3d.cleanId(y.scene));if(!u(y,"pie-like")&&!u(y,"bar-like"))if(Array.isArray(y.textposition))for(D=
0;D<y.textposition.length;D++)y.textposition[D]=h(y.textposition[D]);else y.textposition&&(y.textposition=h(y.textposition));(D=p.getModule(y))&&D.colorbar&&(D=(D=D.colorbar.container)?y[D]:y)&&D.colorscale&&("YIGnBu"===D.colorscale&&(D.colorscale="YlGnBu"),"YIOrRd"===D.colorscale&&(D.colorscale="YlOrRd"));if("surface"===y.type&&c.isPlainObject(y.contours)){var A=["x","y","z"];for(D=0;D<A.length;D++){var t=y.contours[A[D]];c.isPlainObject(t)&&(t.highlightColor&&(t.highlightcolor=t.highlightColor,
delete t.highlightColor),t.highlightWidth&&(t.highlightwidth=t.highlightWidth,delete t.highlightWidth))}}if("candlestick"===y.type||"ohlc"===y.type){A=!1!==(y.increasing||{}).showlegend;t=!1!==(y.decreasing||{}).showlegend;D=l(y.increasing);var B=l(y.decreasing);if(!1!==D&&!1!==B){if(!A||t)if(t&&!A)D=B;else if(D.trim()){if(B.trim()){t=Math.min(D.length,B.length);for(A=0;A<t&&D.charAt(A)===B.charAt(A);A++);D=D.substr(0,A).trim()}}else D=B;D&&(y.name=D)}else!D&&!B||y.name||(y.name=D||B)}if(Array.isArray(y.transforms))for(A=
y.transforms,D=0;D<A.length;D++)if(t=A[D],c.isPlainObject(t))switch(t.type){case "filter":t.filtersrc&&(t.target=t.filtersrc,delete t.filtersrc);t.calendar&&(t.valuecalendar||(t.valuecalendar=t.calendar),delete t.calendar);break;case "groupby":if(t.styles=t.styles||t.style,t.styles&&!Array.isArray(t.styles)){B=t.styles;var F=Object.keys(B);t.styles=[];for(var I=0;I<F.length;I++)t.styles.push({target:F[I],value:B[F[I]]})}}a(y,"line")&&delete y.line;"marker"in y&&(a(y.marker,"line")&&delete y.marker.line,
a(y,"marker")&&delete y.marker);f.clean(y);y.autobinx&&(delete y.autobinx,delete y.xbins);y.autobiny&&(delete y.autobiny,delete y.ybins);m(y);y.colorbar&&m(y.colorbar);y.marker&&y.marker.colorbar&&m(y.marker.colorbar);y.line&&y.line.colorbar&&m(y.line.colorbar);y.aaxis&&m(y.aaxis);y.baxis&&m(y.baxis)}};G.swapXYData=function(C){c.swapAttrs(C,"? ?0 d? ?bins nbins? autobin? ?src error_?".split(" "));Array.isArray(C.z)&&Array.isArray(C.z[0])&&(C.transpose?delete C.transpose:C.transpose=!0);if(C.error_x&&
C.error_y){var z=C.error_y;z="copy_ystyle"in z?z.copy_ystyle:!(z.color||z.thickness||z.width);c.swapAttrs(C,["error_?.copy_ystyle"]);z&&c.swapAttrs(C,["error_?.color","error_?.thickness","error_?.width"])}if("string"===typeof C.hoverinfo){var y=C.hoverinfo.split("+");for(z=0;z<y.length;z++)"x"===y[z]?y[z]="y":"y"===y[z]&&(y[z]="x");C.hoverinfo=y.join("+")}};G.coerceTraceIndices=function(C,z){if(e(z))return[z];if(!Array.isArray(z)||!z.length)return C.data.map(function(A,t){return t});if(Array.isArray(z)){for(var y=
[],D=0;D<z.length;D++)c.isIndex(z[D],C.data.length)?y.push(z[D]):c.warn("trace index (",z[D],") is not a number or is out of bounds");return y}return z};G.manageArrayContainers=function(C,z,y){var D=C.obj,A=C.parts,t=A.length,B=A[t-1],F=e(B);F&&null===z?(C=A.slice(0,t-1).join("."),c.nestedProperty(D,C).get().splice(B,1)):(F&&void 0===C.get()&&void 0===C.get()&&(y[C.astr]=null),C.set(z))};var v=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;G.hasParent=function(C,z){for(z=g(z);z;){if(z in C)return!0;z=g(z)}return!1};
var x=["x","y","z"];G.clearAxisTypes=function(C,z,y){for(var D=0;D<z.length;D++)for(var A=C._fullData[D],t=0;3>t;t++){var B=r(C,A,x[t]);if(B&&"log"!==B.type){var F=B._name;B=B._id.substr(1);if("scene"===B.substr(0,5)){if(void 0!==y[B])continue;F=B+"."+F}B=F+".type";void 0===y[F]&&void 0===y[B]&&c.nestedProperty(C.layout,B).set(null)}}}},{"../components/color":643,"../lib":778,"../plots/cartesian/axis_ids":831,"../plots/plots":891,"../registry":911,"fast-isnumeric":241,"gl-mat4/fromQuat":282}],812:[function(b,
K,G){K=b("./plot_api");G.plot=K.plot;G.newPlot=K.newPlot;G.restyle=K.restyle;G.relayout=K.relayout;G.redraw=K.redraw;G.update=K.update;G._guiRestyle=K._guiRestyle;G._guiRelayout=K._guiRelayout;G._guiUpdate=K._guiUpdate;G._storeDirectGUIEdit=K._storeDirectGUIEdit;G.react=K.react;G.extendTraces=K.extendTraces;G.prependTraces=K.prependTraces;G.addTraces=K.addTraces;G.deleteTraces=K.deleteTraces;G.moveTraces=K.moveTraces;G.purge=K.purge;G.addFrames=K.addFrames;G.deleteFrames=K.deleteFrames;G.animate=
K.animate;G.setPlotConfig=K.setPlotConfig;G.toImage=b("./to_image");G.validate=b("./validate");G.downloadImage=b("../snapshot/download");b=b("./template_api");G.makeTemplate=b.makeTemplate;G.validateTemplate=b.validateTemplate},{"../snapshot/download":913,"./plot_api":814,"./template_api":819,"./to_image":820,"./validate":821}],813:[function(b,K,G){var q=b("../lib/is_plain_object"),m=b("../lib/noop"),l=b("../lib/loggers"),h=b("../lib/search").sorterAsc,a=b("../registry");G.containerArrayMatch=b("./container_array_match");
var g=G.isAddVal=function(n){return"add"===n||q(n)},e=G.isRemoveVal=function(n){return null===n||"remove"===n};G.applyContainerArrayChanges=function(n,p,c,d,f){var k=p.astr,r=a.getComponentMethod(k,"supplyLayoutDefaults"),u=a.getComponentMethod(k,"draw"),v=a.getComponentMethod(k,"drawOne");d=d.replot||d.recalc||r===m||u===m;var x=n.layout,C=n._fullLayout;if(c[""]){1<Object.keys(c).length&&l.warn("Full array edits are incompatible with other edits",k);v=c[""][""];if(e(v))p.set(null);else if(Array.isArray(v))p.set(v);
else return l.warn("Unrecognized full array edit value",k,v),!0;if(d)return!1;r(x,C);u(n);return!0}var z=Object.keys(c).map(Number).sort(h),y=p.get(),D=y||[],A=f(C,k).get(),t=[],B=-1,F=D.length,I;for(I=0;I<z.length;I++){var J=z[I];var L=c[J];var H=Object.keys(L);var P=L[""];var M=g(P);if(0>J||J>D.length-(M?0:1))l.warn("index out of range",k,J);else if(void 0!==P)1<H.length&&l.warn("Insertion & removal are incompatible with edits to the same index.",k,J),e(P)?t.push(J):M?("add"===P&&(P={}),D.splice(J,
0,P),A&&A.splice(J,0,{})):l.warn("Unrecognized full object edit value",k,J,P),-1===B&&(B=J);else for(P=0;P<H.length;P++)M=k+"["+J+"].",f(D[J],H[P],M).set(L[H[P]])}for(I=t.length-1;0<=I;I--)D.splice(t[I],1),A&&A.splice(t[I],1);D.length?y||p.set(D):p.set(null);if(d)return!1;r(x,C);if(v!==m){if(-1===B)p=z;else{F=Math.max(D.length,F);p=[];for(I=0;I<z.length;I++){J=z[I];if(J>=B)break;p.push(J)}for(I=B;I<F;I++)p.push(I)}for(I=0;I<p.length;I++)v(n,p[I])}else u(n);return!0}},{"../lib/is_plain_object":779,
"../lib/loggers":782,"../lib/noop":787,"../lib/search":798,"../registry":911,"./container_array_match":809}],814:[function(b,K,G){function q(Ha){var Ra=Ha._fullLayout;Ra._redrawFromAutoMarginCount?Ra._redrawFromAutoMarginCount--:Ha.emit("plotly_afterplot")}function m(Ha,Ra){try{Ha._fullLayout._paper.style("background",Ra)}catch(La){ba.error(La)}}function l(Ha,Ra){Ra=Aa.combine(Ra,"white");m(Ha,Ra)}function h(Ha,Ra){if(!Ha._context){Ha._context=ba.extendDeep({},lb);var La=fa.select("base");Ha._context._baseUrl=
La.size()&&La.attr("href")?window.location.href.split("#")[0]:""}var gb=Ha._context;if(Ra){var ob=Object.keys(Ra);for(La=0;La<ob.length;La++){var ub=ob[La];"editable"!==ub&&"edits"!==ub&&ub in gb&&(gb[ub]="setBackground"===ub&&"opaque"===Ra[ub]?l:Ra[ub])}Ra.plot3dPixelRatio&&!gb.plotGlPixelRatio&&(gb.plotGlPixelRatio=gb.plot3dPixelRatio);ub=Ra.editable;if(void 0!==ub)for(gb.editable=ub,ob=Object.keys(gb.edits),La=0;La<ob.length;La++)gb.edits[ob[La]]=ub;if(Ra.edits)for(ob=Object.keys(Ra.edits),La=
0;La<ob.length;La++)ub=ob[La],ub in gb.edits&&(gb.edits[ub]=Ra.edits[ub]);gb._exportedPlot=Ra._exportedPlot}gb.staticPlot&&(gb.editable=!1,gb.edits={},gb.autosizable=!1,gb.scrollZoom=!1,gb.doubleClick=!1,gb.showTips=!1,gb.showLink=!1,gb.displayModeBar=!1);"hover"!==gb.displayModeBar||ja||(gb.displayModeBar=!0);if("transparent"===gb.setBackground||"function"!==typeof gb.setBackground)gb.setBackground=m;gb._hasZeroHeight=gb._hasZeroHeight||0===Ha.clientHeight;gb._hasZeroWidth=gb._hasZeroWidth||0===
Ha.clientWidth;La=gb.scrollZoom;Ha=gb._scrollZoom={};if(!0===La)Ha.cartesian=1,Ha.gl3d=1,Ha.geo=1,Ha.mapbox=1;else if("string"===typeof La)for(Ra=La.split("+"),La=0;La<Ra.length;La++)Ha[Ra[La]]=1;else!1!==La&&(Ha.gl3d=1,Ha.geo=1,Ha.mapbox=1)}function a(Ha,Ra,La){var gb=fa.select(Ha).selectAll(".plot-container").data([0]);gb.enter().insert("div",":first-child").classed("plot-container plotly",!0);gb=gb.selectAll(".svg-container").data([0]);gb.enter().append("div").classed("svg-container",!0).style("position",
"relative");gb.html("");Ra&&(Ha.data=Ra);La&&(Ha.layout=La);ia.manager.fillLayout(Ha);gb.style({width:Ha._fullLayout.width+"px",height:Ha._fullLayout.height+"px"});Ha.framework=ia.manager.framework(Ha);Ha.framework({data:Ha.data,layout:Ha.layout},gb.node());Ha.framework.setUndoPoint();gb=Ha.framework.svg();Ra=1;La=Ha._fullLayout.title?Ha._fullLayout.title.text:"";""!==La&&La||(Ra=0);var ob=function(){this.call(db.convertToTspans,Ha)};gb=gb.select(".title-group text").call(ob);if(Ha._context.edits.titleText){var ub=
ba._(Ha,"Click to enter Plot title");La&&La!==ub||(Ra=.2,gb.attr({"data-unformatted":ub}).text(ub).style({opacity:Ra}).on("mouseover.opacity",function(){fa.select(this).transition().duration(100).style("opacity",1)}).on("mouseout.opacity",function(){fa.select(this).transition().duration(1E3).style("opacity",0)}));var za=function(){this.call(db.makeEditable,{gd:Ha}).on("edit",function(Da){Ha.framework({layout:{title:{text:Da}}});this.text(Da).call(ob);this.call(za)}).on("cancel",function(){var Da=
this.attr("data-unformatted");this.text(Da).call(ob)})};gb.call(za)}Ha._context.setBackground(Ha,Ha._fullLayout.paper_bgcolor);la.addLinks(Ha);return Promise.resolve()}function g(Ha,Ra){Ra+=1;var La=[],gb;for(gb=0;gb<Ha.length;gb++){var ob=Ha[gb];0>ob?La.push(Ra+ob):La.push(ob)}return La}function e(Ha,Ra,La){var gb;for(gb=0;gb<Ra.length;gb++){var ob=Ra[gb];if(ob!==parseInt(ob,10))throw Error("all values in "+La+" must be integers");if(ob>=Ha.data.length||ob<-Ha.data.length)throw Error(La+" must be valid indices for gd.data.");
if(-1<Ra.indexOf(ob,gb+1)||0<=ob&&-1<Ra.indexOf(-Ha.data.length+ob)||0>ob&&-1<Ra.indexOf(Ha.data.length+ob))throw Error("each index in "+La+" must be unique.");}}function n(Ha,Ra,La){if(!Array.isArray(Ha.data))throw Error("gd.data must be an array.");if("undefined"===typeof Ra)throw Error("currentIndices is a required argument.");Array.isArray(Ra)||(Ra=[Ra]);e(Ha,Ra,"currentIndices");"undefined"===typeof La||Array.isArray(La)||(La=[La]);"undefined"!==typeof La&&e(Ha,La,"newIndices");if("undefined"!==
typeof La&&Ra.length!==La.length)throw Error("current and new indices must be of equal length.");}function p(Ha,Ra,La){if(!Array.isArray(Ha.data))throw Error("gd.data must be an array.");if("undefined"===typeof Ra)throw Error("traces must be defined.");Array.isArray(Ra)||(Ra=[Ra]);for(Ha=0;Ha<Ra.length;Ha++){var gb=Ra[Ha];if("object"!==typeof gb||Array.isArray(gb)||null===gb)throw Error("all values in traces array must be non-array objects");}"undefined"===typeof La||Array.isArray(La)||(La=[La]);
if("undefined"!==typeof La&&La.length!==Ra.length)throw Error("if indices is specified, traces.length must equal indices.length");}function c(Ha,Ra,La,gb,ob){var ub=ba.isPlainObject(gb);if(!Array.isArray(Ha.data))throw Error("gd.data must be an array");if(!ba.isPlainObject(Ra))throw Error("update must be a key:value object");if("undefined"===typeof La)throw Error("indices must be an integer or array of integers");e(Ha,La,"indices");for(var za in Ra){if(!Array.isArray(Ra[za])||Ra[za].length!==La.length)throw Error("attribute "+
za+" must be an array of length equal to indices array length");if(ub&&!(za in gb&&Array.isArray(gb[za])&&gb[za].length===Ra[za].length))throw Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object");}ub=La;za=ba.isPlainObject(gb);La=[];Array.isArray(ub)||(ub=[ub]);ub=g(ub,Ha.data.length-1);for(var Da in Ra)for(var Ja=0;Ja<ub.length;Ja++){var Ta=Ha.data[ub[Ja]];var Xa=ma(Ta,Da);Ta=Xa.get();var kb=Ra[Da][Ja];if(!ba.isArrayOrTypedArray(kb))throw Error("attribute: "+
Da+" index: "+Ja+" must be an array");if(!ba.isArrayOrTypedArray(Ta))throw Error("cannot extend missing or non-array attribute: "+Da);if(Ta.constructor!==kb.constructor)throw Error("cannot extend array with an array of a different type: "+Da);var rb=za?gb[Da][Ja]:gb;ha(rb)||(rb=-1);La.push({prop:Xa,target:Ta,insert:kb,maxp:Math.floor(rb)})}Ha={};Ra={};for(gb=0;gb<La.length;gb++)Da=La[gb].prop,ub=ob(La[gb].target,La[gb].insert,La[gb].maxp),Da.set(ub[0]),Array.isArray(Ha[Da.astr])||(Ha[Da.astr]=[]),
Ha[Da.astr].push(ub[1]),Array.isArray(Ra[Da.astr])||(Ra[Da.astr]=[]),Ra[Da.astr].push(La[gb].target.length);return{update:Ha,maxPoints:Ra}}function d(Ha,Ra){var La=new Ha.constructor(Ha.length+Ra.length);La.set(Ha);La.set(Ra,Ha.length);return La}function f(Ha,Ra,La,gb){Ha=ba.getGraphDiv(Ha);var ob=c(Ha,Ra,La,gb,function(za,Da,Ja){if(ba.isTypedArray(za))if(0>Ja){var Ta=new za.constructor(0);za=d(za,Da);if(0>Ja)var Xa=za;else Xa=Ta,Ta=za}else if(Xa=new za.constructor(Ja),Ta=new za.constructor(za.length+
Da.length-Ja),Ja===Da.length)Xa.set(Da),Ta.set(za);else if(Ja<Da.length)Ja=Da.length-Ja,Xa.set(Da.subarray(Ja)),Ta.set(za),Ta.set(Da.subarray(0,Ja),za.length);else{Ja-=Da.length;var kb=za.length-Ja;Xa.set(za.subarray(kb));Xa.set(Da,Ja);Ta.set(za.subarray(0,kb))}else Xa=za.concat(Da),Ta=0<=Ja&&Ja<Xa.length?Xa.splice(0,Xa.length-Ja):[];return[Xa,Ta]}),ub=G.redraw(Ha);ka.add(Ha,G.prependTraces,[Ha,ob.update,La,ob.maxPoints],f,arguments);return ub}function k(Ha,Ra,La,gb){Ha=ba.getGraphDiv(Ha);var ob=
c(Ha,Ra,La,gb,function(za,Da,Ja){if(ba.isTypedArray(za))if(0>=Ja){var Ta=new za.constructor(0);za=d(Da,za);if(0>Ja)var Xa=za;else Xa=Ta,Ta=za}else Xa=new za.constructor(Ja),Ta=new za.constructor(za.length+Da.length-Ja),Ja===Da.length?(Xa.set(Da),Ta.set(za)):Ja<Da.length?(Ja=Da.length-Ja,Xa.set(Da.subarray(0,Ja)),Ta.set(Da.subarray(Ja)),Ta.set(za,Ja)):(Ja-=Da.length,Xa.set(Da),Xa.set(za.subarray(0,Ja),Da.length),Ta.set(za.subarray(Ja)));else Xa=Da.concat(za),Ta=0<=Ja&&Ja<Xa.length?Xa.splice(Ja,Xa.length):
[];return[Xa,Ta]}),ub=G.redraw(Ha);ka.add(Ha,G.extendTraces,[Ha,ob.update,La,ob.maxPoints],k,arguments);return ub}function r(Ha,Ra,La){Ha=ba.getGraphDiv(Ha);var gb=[],ob=G.deleteTraces,ub=[Ha,gb],za=[Ha,Ra],Da;p(Ha,Ra,La);Array.isArray(Ra)||(Ra=[Ra]);Ra=Ra.map(function(Ja){return ba.extendFlat({},Ja)});Ya.cleanData(Ra);for(Da=0;Da<Ra.length;Da++)Ha.data.push(Ra[Da]);for(Da=0;Da<Ra.length;Da++)gb.push(-Ra.length+Da);if("undefined"===typeof La)return Ra=G.redraw(Ha),ka.add(Ha,ob,ub,r,za),Ra;Array.isArray(La)||
(La=[La]);try{n(Ha,gb,La)}catch(Ja){throw Ha.data.splice(Ha.data.length-Ra.length,Ra.length),Ja;}ka.startSequence(Ha);ka.add(Ha,ob,ub,r,za);Ra=G.moveTraces(Ha,gb,La);ka.stopSequence(Ha);return Ra}function u(Ha,Ra){Ha=ba.getGraphDiv(Ha);var La=[],gb=G.addTraces,ob=[Ha,La,Ra],ub=[Ha,Ra],za;if("undefined"===typeof Ra)throw Error("indices must be an integer or array of integers.");Array.isArray(Ra)||(Ra=[Ra]);e(Ha,Ra,"indices");Ra=g(Ra,Ha.data.length-1);Ra.sort(ba.sorterDes);for(za=0;za<Ra.length;za+=
1){var Da=Ha.data.splice(Ra[za],1)[0];La.push(Da)}Ra=G.redraw(Ha);ka.add(Ha,gb,ob,u,ub);return Ra}function v(Ha,Ra,La){Ha=ba.getGraphDiv(Ha);var gb=[],ob=[],ub=[Ha,La,Ra],za=[Ha,Ra,La],Da;n(Ha,Ra,La);Ra=Array.isArray(Ra)?Ra:[Ra];if("undefined"===typeof La)for(La=[],Da=0;Da<Ra.length;Da++)La.push(-Ra.length+Da);La=Array.isArray(La)?La:[La];Ra=g(Ra,Ha.data.length-1);La=g(La,Ha.data.length-1);for(Da=0;Da<Ha.data.length;Da++)-1===Ra.indexOf(Da)&&gb.push(Ha.data[Da]);for(Da=0;Da<Ra.length;Da++)ob.push({newIndex:La[Da],
trace:Ha.data[Ra[Da]]});ob.sort(function(Ja,Ta){return Ja.newIndex-Ta.newIndex});for(Da=0;Da<ob.length;Da+=1)gb.splice(ob[Da].newIndex,0,ob[Da].trace);Ha.data=gb;Ra=G.redraw(Ha);ka.add(Ha,v,ub,v,za);return Ra}function x(Ha,Ra,La,gb){Ha=ba.getGraphDiv(Ha);Ya.clearPromiseQueue(Ha);var ob={};if("string"===typeof Ra)ob[Ra]=La;else if(ba.isPlainObject(Ra))ob=ba.extendFlat({},Ra),void 0===gb&&(gb=La);else return ba.warn("Restyle fail.",Ra,La,gb),Promise.reject();Object.keys(ob).length&&(Ha.changed=!0);
Ra=Ya.coerceTraceIndices(Ha,gb);var ub=D(Ha,ob,Ra);ob=ub.flags;ob.calc&&(Ha.calcdata=void 0);ob.clearAxisTypes&&Ya.clearAxisTypes(Ha,Ra,{});Ra=[];ob.fullReplot?Ra.push(G.plot):(Ra.push(la.previousPromises),la.supplyDefaults(Ha),ob.markerSize&&(la.doCalcdata(Ha),F(Ra)),ob.style&&Ra.push(hb.doTraceStyle),ob.colorbars&&Ra.push(hb.doColorBars),Ra.push(q));Ra.push(la.rehover,la.redrag);ka.add(Ha,x,[Ha,ub.undoit,ub.traces],x,[Ha,ub.redoit,ub.traces]);(ob=ba.syncOrAsync(Ra,Ha))&&ob.then||(ob=Promise.resolve());
return ob.then(function(){Ha.emit("plotly_restyle",ub.eventData);return Ha})}function C(Ha){return void 0===Ha?null:Ha}function z(Ha,Ra){return Ra?function(La,gb,ob){var ub=ma(La,gb),za=ub.set;ub.set=function(Da){y((ob||"")+gb,ub.get(),Da,Ha);za(Da)};return ub}:ma}function y(Ha,Ra,La,gb){if(Array.isArray(Ra)||Array.isArray(La)){var ob=Array.isArray(Ra)?Ra:[];La=Array.isArray(La)?La:[];Ra=Math.max(ob.length,La.length);for(var ub=0;ub<Ra;ub++)y(Ha+"["+ub+"]",ob[ub],La[ub],gb)}else if(ba.isPlainObject(Ra)||
ba.isPlainObject(La))for(ob in Ra=ba.isPlainObject(Ra)?Ra:{},La=ba.isPlainObject(La)?La:{},ub=ba.extendFlat({},Ra,La),ub)y(Ha+"."+ob,Ra[ob],La[ob],gb);else void 0===gb[Ha]&&(gb[Ha]=C(Ra))}function D(Ha,Ra,La){function gb(){return La.map(function(){})}function ob(xb){xb=sa.id2name(xb);-1===Gb.indexOf(xb)&&Gb.push(xb)}function ub(xb){return"LAYOUT"+xb+".autorange"}function za(xb){return"LAYOUT"+xb+".range"}function Da(xb){for(var Jb=xb;Jb<rb.length;Jb++)if(rb[Jb]._input===Mb[xb])return rb[Jb]}function Ja(xb,
Jb,Xb){if(Array.isArray(xb))xb.forEach(function($c){Ja($c,Jb,Xb)});else if(!(xb in Ra||Ya.hasParent(Ra,xb))){if("LAYOUT"===xb.substr(0,6))var nc=Lb(Ha.layout,xb.replace("LAYOUT",""));else{nc=La[Xb];var Qc=kb._tracePreGUI[Da(nc)._fullInput.uid];nc=z(Qc,Fb)(Mb[nc],xb)}xb in Wc||(Wc[xb]=gb());void 0===Wc[xb][Xb]&&(Wc[xb][Xb]=C(nc.get()));void 0!==Jb&&nc.set(Jb)}}function Ta(xb){return function(Jb){return rb[Jb][xb]}}function Xa(xb){return function(Jb,Xb){return!1===Jb?rb[La[Xb]][xb]:null}}var kb=Ha._fullLayout,
rb=Ha._fullData,Mb=Ha.data,Fb=kb._guiEditing,Lb=z(kb._preGUI,Fb),Vb=ba.extendDeepAll({},Ra),xc;A(Ra);var Gc=nb.traceFlags(),Hc={},Wc={};for(dc in Ra){if(Ya.hasParent(Ra,dc))throw Error("cannot set "+dc+" and a parent attribute simultaneously");var ib=Ra[dc],Yb;if("autobinx"===dc||"autobiny"===dc){var dc=dc.charAt(dc.length-1)+"bins";ib=Array.isArray(ib)?ib.map(Xa(dc)):!1===ib?La.map(Ta(dc)):null}Hc[dc]=ib;if("LAYOUT"===dc.substr(0,6)){var oc=Lb(Ha.layout,dc.replace("LAYOUT",""));Wc[dc]=[C(oc.get())];
oc.set(Array.isArray(ib)?ib[0]:ib);Gc.calc=!0}else{Wc[dc]=gb();for(xc=0;xc<La.length;xc++){var tc=Mb[La[xc]];var Lc=Da(La[xc]);oc=z(kb._tracePreGUI[Lc._fullInput.uid],Fb)(tc,dc);var fb=oc.get();var tb=Array.isArray(ib)?ib[xc%ib.length]:ib;if(void 0!==tb){var Pb=oc.parts[oc.parts.length-1],ec=(Yb=dc.substr(0,dc.length-Pb.length-1))?Yb+".":"",cc=Yb?ma(Lc,Yb).get():Lc;if((Yb=na.getTraceValObject(Lc,oc.parts))&&Yb.impliedEdits&&null!==tb)for(var Zb in Yb.impliedEdits)Ja(ba.relativeAttr(dc,Zb),Yb.impliedEdits[Zb],
xc);else if("thicknessmode"!==Pb&&"lenmode"!==Pb||fb===tb||"fraction"!==tb&&"pixels"!==tb||!cc)"type"!==dc||"pie"===tb===("pie"===fb)&&"funnelarea"===tb===("funnelarea"===fb)||(ec="x",cc="y","bar"!==tb&&"bar"!==fb||"h"!==tc.orientation||(ec="y",cc="x"),ba.swapAttrs(tc,["?","?src"],"labels",ec),ba.swapAttrs(tc,["d?","?0"],"label",ec),ba.swapAttrs(tc,["?","?src"],"values",cc),"pie"===fb||"funnelarea"===fb?(ma(tc,"marker.color").set(ma(tc,"marker.colors").get()),kb._pielayer.selectAll("g.trace").remove()):
oa.traceIs(tc,"cartesian")&&ma(tc,"marker.colors").set(ma(tc,"marker.color").get()));else{var Qb=kb._size,sb=cc.orient;sb="top"===sb||"bottom"===sb;"thicknessmode"===Pb?(Pb=sb?Qb.h:Qb.w,Ja(ec+"thickness",cc.thickness*("fraction"===tb?1/Pb:Pb),xc)):(Pb=sb?Qb.w:Qb.h,Ja(ec+"len",cc.len*("fraction"===tb?1/Pb:Pb),xc))}Wc[dc][xc]=C(fb);if(-1!==["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(dc)){if("orientation"===dc){if(oc.set(tb),fb=tc.x&&!tc.y?"h":"v",(oc.get()||fb)===Lc.orientation)continue}else"orientationaxes"===
dc&&(tc.orientation={v:"h",h:"v"}[Lc.orientation]);Ya.swapXYData(tc);Gc.calc=Gc.clearAxisTypes=!0}else-1!==la.dataArrayContainers.indexOf(oc.parts[0])?(Ya.manageArrayContainers(oc,tb,Wc),Gc.calc=!0):(Yb?Yb.arrayOk&&!oa.traceIs(Lc,"regl")&&(ba.isArrayOrTypedArray(tb)||ba.isArrayOrTypedArray(fb))?Gc.calc=!0:nb.update(Gc,Yb):Gc.calc=!0,oc.set(tb))}}-1!==["swapxyaxes","orientationaxes"].indexOf(dc)&&sa.swap(Ha,La);"orientationaxes"===dc&&(xc=ma(Ha.layout,"hovermode"),ib=xc.get(),"x"===ib?xc.set("y"):
"y"===ib?xc.set("x"):"x unified"===ib?xc.set("y unified"):"y unified"===ib&&xc.set("x unified"));if(-1!==["orientation","type"].indexOf(dc)){var Gb=[];for(xc=0;xc<La.length;xc++)ib=Mb[La[xc]],oa.traceIs(ib,"cartesian")&&(ob(ib.xaxis||"x"),ob(ib.yaxis||"y"));Ja(Gb.map(ub),!0,0);Ja(Gb.map(za),[0,1],0)}}}if(Gc.calc||Gc.plot)Gc.fullReplot=!0;return{flags:Gc,undoit:Wc,redoit:Hc,traces:La,eventData:ba.extendDeepNoArrays([],[Vb,La])}}function A(Ha){function Ra(Ja,Ta){Ha[Ta]=Ha[Ja];delete Ha[Ja]}var La=ba.counterRegex("axis",
".title",!1,!1),gb=/colorbar\.title$/,ob=Object.keys(Ha),ub;for(ub=0;ub<ob.length;ub++){var za=ob[ub];var Da=Ha[za];"title"!==za&&!La.test(za)&&!gb.test(za)||"string"!==typeof Da&&"number"!==typeof Da?-1<za.indexOf("titlefont")?Ra(za,za.replace("titlefont","title.font")):-1<za.indexOf("titleposition")?Ra(za,za.replace("titleposition","title.position")):-1<za.indexOf("titleside")?Ra(za,za.replace("titleside","title.side")):-1<za.indexOf("titleoffset")&&Ra(za,za.replace("titleoffset","title.offset")):
Ra(za,za.replace("title","title.text"))}}function t(Ha,Ra,La){Ha=ba.getGraphDiv(Ha);Ya.clearPromiseQueue(Ha);if(Ha.framework&&Ha.framework.isPolar)return Promise.resolve(Ha);var gb={};if("string"===typeof Ra)gb[Ra]=La;else if(ba.isPlainObject(Ra))gb=ba.extendFlat({},Ra);else return ba.warn("Relayout fail.",Ra,La),Promise.reject();Object.keys(gb).length&&(Ha.changed=!0);var ob=I(Ha,gb);Ra=ob.flags;Ra.calc&&(Ha.calcdata=void 0);La=[la.previousPromises];Ra.layoutReplot?La.push(hb.layoutReplot):Object.keys(gb).length&&
(B(Ha,Ra,ob)||la.supplyDefaults(Ha),Ra.legend&&La.push(hb.doLegend),Ra.layoutstyle&&La.push(hb.layoutStyles),Ra.axrange&&F(La,ob.rangesAltered),Ra.ticks&&La.push(hb.doTicksRelayout),Ra.modebar&&La.push(hb.doModeBar),Ra.camera&&La.push(hb.doCamera),Ra.colorbars&&La.push(hb.doColorBars),La.push(q));La.push(la.rehover,la.redrag);ka.add(Ha,t,[Ha,ob.undoit],t,[Ha,ob.redoit]);(gb=ba.syncOrAsync(La,Ha))&&gb.then||(gb=Promise.resolve(Ha));return gb.then(function(){Ha.emit("plotly_relayout",ob.eventData);
return Ha})}function B(Ha,Ra,La){var gb=Ha._fullLayout;if(!Ra.axrange)return!1;for(var ob in Ra)if("axrange"!==ob&&Ra[ob])return!1;for(var ub in La.rangesAltered)if(La=sa.id2name(ub),Ra=Ha.layout[La],La=gb[La],La.autorange=Ra.autorange,Ra.range&&(La.range=Ra.range.slice()),La.cleanRange(),La._matchGroup)for(var za in La._matchGroup)za!==ub&&(Ra=gb[sa.id2name(za)],Ra.autorange=La.autorange,Ra.range=La.range.slice(),Ra._input.range=La.range.slice());return!0}function F(Ha,Ra){Ha.push(eb,hb.doAutoRangeAndConstraints,
Ra?function(La){var gb=[],ob=!0,ub;for(ub in Ra){var za=sa.getFromId(La,ub);gb.push(ub);-1!==(za.ticklabelposition||"").indexOf("inside")&&za._anchorAxis&&gb.push(za._anchorAxis._id);if(za._matchGroup)for(var Da in za._matchGroup)Ra[Da]||gb.push(Da);za.automargin&&(ob=!1)}return sa.draw(La,gb,{skipTitle:ob})}:function(La){return sa.draw(La,"redraw")},hb.drawData,hb.finalDraw)}function I(Ha,Ra){function La(Pb,ec){if(Array.isArray(Pb))Pb.forEach(function(Zb){La(Zb,ec)});else if(!(Pb in Ra||Ya.hasParent(Ra,
Pb))){var cc=za(ob,Pb);Pb in Fb||(Fb[Pb]=C(cc.get()));void 0!==ec&&cc.set(ec)}}function gb(Pb){Pb=sa.name2id(Pb.split(".")[0]);Lb[Pb]=1;return Pb}var ob=Ha.layout,ub=Ha._fullLayout,za=z(ub._preGUI,ub._guiEditing),Da=Object.keys(Ra),Ja=sa.list(Ha),Ta=ba.extendDeepAll({},Ra),Xa={},kb,rb;A(Ra);Da=Object.keys(Ra);for(kb=0;kb<Da.length;kb++)if(0===Da[kb].indexOf("allaxes")){for(rb=0;rb<Ja.length;rb++){var Mb=Ja[rb]._id.substr(1);Mb=-1!==Mb.indexOf("scene")?Mb+".":"";Mb=Da[kb].replace("allaxes",Mb+Ja[rb]._name);
Ra[Mb]||(Ra[Mb]=Ra[Da[kb]])}delete Ra[Da[kb]]}Da=nb.layoutFlags();Ja={};var Fb={},Lb={},Vb;for(Vb in Ra){if(Ya.hasParent(Ra,Vb))throw Error("cannot set "+Vb+" and a parent attribute simultaneously");kb=za(ob,Vb);rb=Ra[Vb];for(Mb=kb.parts.length-1;0<Mb&&"string"!==typeof kb.parts[Mb];)Mb--;var xc=kb.parts[Mb],Gc=kb.parts[Mb-1]+"."+xc,Hc=kb.parts.slice(0,Mb).join("."),Wc=ma(Ha.layout,Hc).get(),ib=ma(ub,Hc).get(),Yb=kb.get();if(void 0!==rb){Ja[Vb]=rb;Fb[Vb]="reverse"===xc?rb:C(Yb);if((Mb=na.getLayoutValObject(ub,
kb.parts))&&Mb.impliedEdits&&null!==rb)for(var dc in Mb.impliedEdits)La(ba.relativeAttr(Vb,dc),Mb.impliedEdits[dc]);-1!==["width","height"].indexOf(Vb)?rb?(La("autosize",null),Gc="height"===Vb?"width":"height",La(Gc,ub[Gc])):ub[Vb]=Ha._initialAutoSize[Vb]:"autosize"===Vb?(La("width",rb?null:ub.width),La("height",rb?null:ub.height)):Gc.match(Ga)?(gb(Gc),ma(ub,Hc+"._inputRange").set(null)):Gc.match(Na)?(gb(Gc),ma(ub,Hc+"._inputRange").set(null),Gc=ma(ub,Hc).get(),Gc._inputDomain&&(Gc._input.domain=
Gc._inputDomain.slice())):Gc.match($a)&&ma(ub,Hc+"._inputDomain").set(null);if("type"===xc){var oc=Wc;Gc="linear"===ib.type&&"log"===rb;var tc="log"===ib.type&&"linear"===rb;Gc||tc?(oc&&oc.range?ib.autorange?Gc&&(oc.range=oc.range[1]>oc.range[0]?[1,2]:[2,1]):(tc=oc.range[0],oc=oc.range[1],Gc?(0>=tc&&0>=oc&&La(Hc+".autorange",!0),0>=tc?tc=oc/1E6:0>=oc&&(oc=tc/1E6),La(Hc+".range[0]",Math.log(tc)/Math.LN10),La(Hc+".range[1]",Math.log(oc)/Math.LN10)):(La(Hc+".range[0]",Math.pow(10,tc)),La(Hc+".range[1]",
Math.pow(10,oc)))):La(Hc+".autorange",!0),Array.isArray(ub._subplots.polar)&&ub._subplots.polar.length&&ub[kb.parts[0]]&&"radialaxis"===kb.parts[1]&&delete ub[kb.parts[0]]._subplot.viewInitial["radialaxis.range"],oa.getComponentMethod("annotations","convertCoords")(Ha,ib,rb,La),oa.getComponentMethod("images","convertCoords")(Ha,ib,rb,La)):(La(Hc+".autorange",!0),La(Hc+".range",null));ma(ub,Hc+"._inputRange").set(null)}else xc.match(va)&&(Gc=ma(ub,Vb).get(),(oc=(rb||{}).type)&&"-"!==oc||(oc="linear"),
oa.getComponentMethod("annotations","convertCoords")(Ha,Gc,oc,La),oa.getComponentMethod("images","convertCoords")(Ha,Gc,oc,La));if(Gc=ab.containerArrayMatch(Vb)){var Lc=Gc.array;kb=Gc.index;xc=Gc.property;Mb=Mb||{editType:"calc"};""!==kb&&""===xc&&(ab.isAddVal(rb)?Fb[Vb]=null:ab.isRemoveVal(rb)?Fb[Vb]=(ma(ob,Lc).get()||[])[kb]:ba.warn("unrecognized full object value",Ra));nb.update(Da,Mb);Xa[Lc]||(Xa[Lc]={});(Mb=Xa[Lc][kb])||(Mb=Xa[Lc][kb]={});Mb[xc]=rb;delete Ra[Vb]}else"reverse"===xc?(Wc.range?
Wc.range.reverse():(La(Hc+".autorange",!0),Wc.range=[1,0]),ib.autorange?Da.calc=!0:Da.plot=!0):(ub._has("scatter-like")&&ub._has("regl")&&"dragmode"===Vb&&("lasso"===rb||"select"===rb)&&"lasso"!==Yb&&"select"!==Yb?Da.plot=!0:ub._has("gl2d")?Da.plot=!0:Mb?nb.update(Da,Mb):Da.calc=!0,kb.set(rb))}}for(Lc in Xa)ab.applyContainerArrayChanges(Ha,za(ob,Lc),Xa[Lc],Da,za)||(Da.plot=!0);for(var fb in Lb)if(ub=(oc=sa.getFromId(Ha,fb))&&oc._constraintGroup){Da.calc=!0;for(var tb in ub)Lb[tb]||(sa.getFromId(Ha,
tb)._constraintShrinkable=!0)}if(J(Ha)||Ra.height||Ra.width)Da.plot=!0;if(Da.plot||Da.calc)Da.layoutReplot=!0;return{flags:Da,rangesAltered:Lb,undoit:Fb,redoit:Ja,eventData:Ta}}function J(Ha){var Ra=Ha._fullLayout,La=Ra.width,gb=Ra.height;Ha.layout.autosize&&la.plotAutoSize(Ha,Ha.layout,Ra);return Ra.width!==La||Ra.height!==gb}function L(Ha,Ra,La,gb){Ha=ba.getGraphDiv(Ha);Ya.clearPromiseQueue(Ha);if(Ha.framework&&Ha.framework.isPolar)return Promise.resolve(Ha);ba.isPlainObject(Ra)||(Ra={});ba.isPlainObject(La)||
(La={});Object.keys(Ra).length&&(Ha.changed=!0);Object.keys(La).length&&(Ha.changed=!0);gb=Ya.coerceTraceIndices(Ha,gb);var ob=D(Ha,ba.extendFlat({},Ra),gb);Ra=ob.flags;var ub=I(Ha,ba.extendFlat({},La)),za=ub.flags;if(Ra.calc||za.calc)Ha.calcdata=void 0;Ra.clearAxisTypes&&Ya.clearAxisTypes(Ha,gb,La);La=[];za.layoutReplot?La.push(hb.layoutReplot):Ra.fullReplot?La.push(G.plot):(La.push(la.previousPromises),B(Ha,za,ub)||la.supplyDefaults(Ha),Ra.style&&La.push(hb.doTraceStyle),(Ra.colorbars||za.colorbars)&&
La.push(hb.doColorBars),za.legend&&La.push(hb.doLegend),za.layoutstyle&&La.push(hb.layoutStyles),za.axrange&&F(La,ub.rangesAltered),za.ticks&&La.push(hb.doTicksRelayout),za.modebar&&La.push(hb.doModeBar),za.camera&&La.push(hb.doCamera),La.push(q));La.push(la.rehover,la.redrag);ka.add(Ha,L,[Ha,ob.undoit,ub.undoit,ob.traces],L,[Ha,ob.redoit,ub.redoit,ob.traces]);(La=ba.syncOrAsync(La,Ha))&&La.then||(La=Promise.resolve(Ha));return La.then(function(){Ha.emit("plotly_update",{data:ob.eventData,layout:ub.eventData});
return Ha})}function H(Ha){return function(Ra){Ra._fullLayout._guiEditing=!0;var La=Ha.apply(null,arguments);Ra._fullLayout._guiEditing=!1;return La}}function P(Ha,Ra){for(var La=0;La<Ra.length;La++){var gb=Ra[La],ob=Ha.match(gb.pattern);if(ob)return{head:ob[1],attr:gb.attr}}}function M(Ha,Ra){var La=ma(Ra,Ha).get();if(void 0!==La)return La;Ha=Ha.split(".");for(Ha.pop();1<Ha.length;)if(Ha.pop(),La=ma(Ra,Ha.join(".")+".uirevision").get(),void 0!==La)return La;return Ra.uirevision}function N(Ha,Ra){var La=
ba.isPlainObject(Ha),gb=Array.isArray(Ha);return La||gb?(La&&ba.isPlainObject(Ra)||gb&&Array.isArray(Ra))&&JSON.stringify(Ha)===JSON.stringify(Ra):Ha===Ra}function T(Ha,Ra,La,gb){var ob=gb._preGUI,ub,za,Da,Ja=[],Ta={};for(ub in ob){if(za=P(ub,Va)){if(za=za.attr||za.head+".uirevision",(za=(Da=ma(gb,za).get())&&M(za,Ra))&&za===Da){Da=ob[ub];null===Da&&(Da=void 0);za=ma(Ra,ub);var Xa=za.get();if(N(Xa,Da)){void 0===Xa&&"autorange"===ub.substr(ub.length-9)&&Ja.push(ub.substr(0,ub.length-10));za.set(C(ma(gb,
ub).get()));continue}}}else ba.warn("unrecognized GUI edit: "+ub);delete ob[ub];"range["===ub.substr(ub.length-8,6)&&(Ta[ub.substr(0,ub.length-9)]=1)}for(ob=0;ob<Ja.length;ob++)Da=Ja[ob],Ta[Da]&&(Da=ma(Ra,Da).get())&&delete Da.autorange;Ja=gb._tracePreGUI;for(var kb in Ja)for(ub in Ta=Ja[kb],ob=null,Ta){if(!ob){a:{for(ob=0;ob<La.length;ob++)if(La[ob]._fullInput.uid===kb)break a;ob=-1}if(0>ob){delete Ja[kb];break}var rb=La[ob]._fullInput;a:{ob=rb.index;for(Da=0;Da<Ha.length;Da++)if(Ha[Da].uid===kb){ob=
Da;break a}ob=!Ha[ob]||Ha[ob].uid?-1:ob}if(0>ob){delete Ja[kb];break}ob=Ha[ob]}if(za=P(ub,qb)){if(za.attr?za=(Da=ma(gb,za.attr).get())&&M(za.attr,Ra):(Da=rb.uirevision,za=ob.uirevision,void 0===za&&(za=Ra.uirevision)),za&&za===Da&&(Da=Ta[ub],null===Da&&(Da=void 0),za=ma(ob,ub),Xa=za.get(),N(Xa,Da))){za.set(C(ma(rb,ub).get()));continue}}else ba.warn("unrecognized GUI edit: "+ub+" in trace uid "+kb);delete Ta[ub]}}function Q(Ha,Ra,La,gb,ob,ub){var za=Ra.length===La.length;if(!ob&&!za)return{fullReplot:!0,
calc:!0};var Da=nb.traceFlags();Da.arrays={};Da.nChanges=0;Da.nChangesAnim=0;gb={getValObject:function(Ta){Ta=na.getTraceValObject(Ja,Ta);!Ja._module.animatable&&Ta.anim&&(Ta.anim=!1);return Ta},flags:Da,immutable:gb,transition:ob,newDataRevision:ub,gd:Ha};ub={};for(Ha=0;Ha<Ra.length;Ha++)if(La[Ha]){var Ja=La[Ha]._fullInput;la.hasMakesDataTransform(Ja)&&(Ja=La[Ha]);ub[Ja.uid]||(ub[Ja.uid]=1,S(Ra[Ha]._fullInput,Ja,[],gb))}if(Da.calc||Da.plot)Da.fullReplot=!0;ob&&Da.nChanges&&Da.nChangesAnim&&(Da.anim=
Da.nChanges===Da.nChangesAnim&&za?"all":"some");return Da}function U(Ha,Ra,La,gb,ob){var ub=nb.layoutFlags();ub.arrays={};ub.rangesAltered={};ub.nChanges=0;ub.nChangesAnim=0;S(Ra,La,[],{getValObject:function(za){return na.getLayoutValObject(La,za)},flags:ub,immutable:gb,transition:ob,gd:Ha});if(ub.plot||ub.calc)ub.layoutReplot=!0;ob&&ub.nChanges&&ub.nChangesAnim&&(ub.anim=ub.nChanges===ub.nChangesAnim?"all":"some");return ub}function S(Ha,Ra,La,gb){function ob(){var Yb=ub.editType;if(Xa&&-1!==Yb.indexOf("arraydraw"))ba.pushUnique(Ja.arrays[Xa],
kb);else{nb.update(Ja,ub);"none"!==Yb&&Ja.nChanges++;gb.transition&&ub.anim&&Ja.nChangesAnim++;if(Ga.test(Lb)||Na.test(Lb))Ja.rangesAltered[La[0]]=1;$a.test(Lb)&&ma(Ra,"_inputDomain").set(null);"datarevision"===za&&(Ja.newDataRevision=1)}}var ub,za,Da=gb.getValObject,Ja=gb.flags,Ta=gb.immutable,Xa=gb.inArray,kb=gb.arrayIndex;for(za in Ha){if(Ja.calc&&!gb.transition)return;var rb=Ha[za],Mb=Ra[za],Fb=La.concat(za);var Lb=Fb.join(".");if("_"!==za.charAt(0)&&"function"!==typeof rb&&rb!==Mb){if(("tick0"===
za||"dtick"===za)&&"geo"!==La[0]){var Vb=Ra.tickmode;if("auto"===Vb||"array"===Vb||!Vb)continue}if(!("range"===za&&Ra.autorange||("zmin"===za||"zmax"===za)&&"contourcarpet"===Ra.type||!(ub=Da(Fb))||ub._compareAsJSON&&JSON.stringify(rb)===JSON.stringify(Mb))){Vb=ub.valType;var xc="data_array"===ub.valType||ub.arrayOk,Gc=Array.isArray(rb),Hc=Array.isArray(Mb);if(Gc&&Hc){var Wc="_input_"+za,ib=Ha[Wc];Wc=Ra[Wc];if(Array.isArray(ib)&&ib===Wc)continue}if(void 0===Mb)xc&&Gc?Ja.calc=!0:ob();else if(ub._isLinkedToArray){xc=
[];Gc=!1;Xa||(Ja.arrays[za]=xc);Hc=Math.min(rb.length,Mb.length);ib=Math.max(rb.length,Mb.length);if(Hc!==ib)if("arraydraw"===ub.editType)Gc=!0;else{ob();continue}for(Vb=0;Vb<Hc;Vb++)S(rb[Vb],Mb[Vb],Fb.concat(Vb),ba.extendFlat({inArray:za,arrayIndex:Vb},gb));if(Gc)for(Vb=Hc;Vb<ib;Vb++)xc.push(Vb)}else!Vb&&ba.isPlainObject(rb)?S(rb,Mb,Fb,gb):xc?Gc&&Hc?(Ta&&(Ja.calc=!0),(Ta||gb.newDataRevision)&&ob()):Gc!==Hc?Ja.calc=!0:ob():Gc&&Hc?(rb.length!==Mb.length||String(rb)!==String(Mb))&&ob():ob()}}}for(za in Ra)if(!(za in
Ha||"_"===za.charAt(0)||"function"===typeof Ra[za]))if(ub=Da(La.concat(za)),("data_array"===ub.valType||ub.arrayOk)&&Array.isArray(Ra[za])){Ja.calc=!0;break}else ob()}function X(Ha,Ra){for(var La in Ha)if("_"!==La.charAt(0)){var gb=Ha[La],ob=Ra[La];if(gb!==ob)if(ba.isPlainObject(gb)&&ba.isPlainObject(ob)){if(X(gb,ob))return!0}else if(Array.isArray(gb)&&Array.isArray(ob)){if(gb.length!==ob.length)return!0;for(var ub=0;ub<gb.length;ub++)if(gb[ub]!==ob[ub])if(ba.isPlainObject(gb[ub])&&ba.isPlainObject(ob[ub])){if(X(gb[ub],
ob[ub]))return!0}else return!0}else return!0}}function Z(Ha){var Ra=Ha._fullLayout,La=Ha.getBoundingClientRect();ba.equalDomRects(La,Ra._lastBBox)||(Ha=Ra._invTransform=ba.inverseTransformMatrix(ba.getFullTransformMatrix(Ha)),Ra._invScaleX=Math.sqrt(Ha[0][0]*Ha[0][0]+Ha[0][1]*Ha[0][1]+Ha[0][2]*Ha[0][2]),Ra._invScaleY=Math.sqrt(Ha[1][0]*Ha[1][0]+Ha[1][1]*Ha[1][1]+Ha[1][2]*Ha[1][2]),Ra._lastBBox=La)}function aa(Ha){var Ra=fa.select(Ha),La=Ha._fullLayout;La._calcInverseTransform=Z;La._calcInverseTransform(Ha);
La._container=Ra.selectAll(".plot-container").data([0]);La._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0);La._paperdiv=La._container.selectAll(".svg-container").data([0]);La._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative");La._glcontainer=La._paperdiv.selectAll(".gl-container").data([{}]);La._glcontainer.enter().append("div").classed("gl-container",!0);La._paperdiv.selectAll(".main-svg").remove();
La._paperdiv.select(".modebar-container").remove();La._paper=La._paperdiv.insert("svg",":first-child").classed("main-svg",!0);La._toppaper=La._paperdiv.append("svg").classed("main-svg",!0);La._modebardiv=La._paperdiv.append("div");delete La._modeBar;La._hoverpaper=La._paperdiv.append("svg").classed("main-svg",!0);if(!La._uid){var gb={};fa.selectAll("defs").each(function(){this.id&&(gb[this.id.split("-")[1]]=1)});La._uid=ba.randstr(gb)}La._paperdiv.selectAll(".main-svg").attr(Sa.svgAttrs);La._defs=
La._paper.append("defs").attr("id","defs-"+La._uid);La._clips=La._defs.append("g").classed("clips",!0);La._topdefs=La._toppaper.append("defs").attr("id","topdefs-"+La._uid);La._topclips=La._topdefs.append("g").classed("clips",!0);La._bgLayer=La._paper.append("g").classed("bglayer",!0);La._draggers=La._paper.append("g").classed("draglayer",!0);Ra=La._paper.append("g").classed("layer-below",!0);La._imageLowerLayer=Ra.append("g").classed("imagelayer",!0);La._shapeLowerLayer=Ra.append("g").classed("shapelayer",
!0);La._cartesianlayer=La._paper.append("g").classed("cartesianlayer",!0);La._polarlayer=La._paper.append("g").classed("polarlayer",!0);La._ternarylayer=La._paper.append("g").classed("ternarylayer",!0);La._geolayer=La._paper.append("g").classed("geolayer",!0);La._funnelarealayer=La._paper.append("g").classed("funnelarealayer",!0);La._pielayer=La._paper.append("g").classed("pielayer",!0);La._treemaplayer=La._paper.append("g").classed("treemaplayer",!0);La._sunburstlayer=La._paper.append("g").classed("sunburstlayer",
!0);La._indicatorlayer=La._toppaper.append("g").classed("indicatorlayer",!0);La._glimages=La._paper.append("g").classed("glimages",!0);Ra=La._toppaper.append("g").classed("layer-above",!0);La._imageUpperLayer=Ra.append("g").classed("imagelayer",!0);La._shapeUpperLayer=Ra.append("g").classed("shapelayer",!0);La._infolayer=La._toppaper.append("g").classed("infolayer",!0);La._menulayer=La._toppaper.append("g").classed("menulayer",!0);La._zoomlayer=La._toppaper.append("g").classed("zoomlayer",!0);La._hoverlayer=
La._hoverpaper.append("g").classed("hoverlayer",!0);La._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px");Ha.emit("plotly_framework")}var fa=b("d3"),ha=b("fast-isnumeric"),ja=b("has-hover"),ba=b("../lib"),ma=ba.nestedProperty,qa=b("../lib/events"),ka=b("../lib/queue"),oa=b("../registry"),na=b("./plot_schema"),la=b("../plots/plots"),ia=b("../plots/polar/legacy"),sa=b("../plots/cartesian/axes"),ta=b("../components/drawing"),Aa=b("../components/color"),
Ka=b("../plots/cartesian/graph_interact").initInteractions,Sa=b("../constants/xmlns_namespaces"),db=b("../lib/svg_text_utils"),eb=b("../plots/cartesian/select").clearSelect,lb=b("./plot_config").dfltConfig,ab=b("./manage_arrays"),Ya=b("./helpers"),hb=b("./subroutines"),nb=b("./edit_types"),va=b("../plots/cartesian/constants").AX_NAME_PATTERN,Ba=0,Ga=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,Na=/^[xyz]axis[0-9]*\.autorange$/,$a=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/,Va=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},
{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,
attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],qb=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];G.animate=function(Ha,Ra,La){function gb(Da,Ja){var Ta=
0;return function(){if(Da&&++Ta===Ja)return Da()}}Ha=ba.getGraphDiv(Ha);if(!ba.isPlotDiv(Ha))throw Error("This element is not a Plotly plot: "+Ha+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var ob=Ha._transitionData;ob._frameQueue||(ob._frameQueue=[]);La=la.supplyAnimationDefaults(La);var ub=La.transition,za=La.frame;void 0===ob._frameWaitingCnt&&(ob._frameWaitingCnt=0);return new Promise(function(Da,Ja){function Ta(){if(0!==
ob._frameQueue.length){for(;ob._frameQueue.length;){var Wc=ob._frameQueue.pop();if(Wc.onInterrupt)Wc.onInterrupt()}Ha.emit("plotly_animationinterrupted",[])}}function Xa(Wc){if(0!==Wc.length){for(var ib=0;ib<Wc.length;ib++){var Yb="byname"===Wc[ib].type?la.computeFrame(Ha,Wc[ib].name):Wc[ib].data;var dc=ib;dc=Array.isArray(za)?dc>=za.length?za[0]:za[dc]:za;var oc=ib;oc=Array.isArray(ub)?oc>=ub.length?ub[0]:ub[oc]:ub;oc.duration=Math.min(oc.duration,dc.duration);Yb={frame:Yb,name:Wc[ib].name,frameOpts:dc,
transitionOpts:oc};ib===Wc.length-1&&(Yb.onComplete=gb(Da,2),Yb.onInterrupt=Ja);ob._frameQueue.push(Yb)}"immediate"===La.mode&&(ob._lastFrameAt=-Infinity);ob._animationRaf||rb()}}function kb(){if(ob._currentFrame&&ob._currentFrame.onComplete)ob._currentFrame.onComplete();var Wc=ob._currentFrame=ob._frameQueue.shift();if(Wc){var ib=Wc.name?Wc.name.toString():null;Ha._fullLayout._currentFrame=ib;ob._lastFrameAt=Date.now();ob._timeToNext=Wc.frameOpts.duration;la.transition(Ha,Wc.frame.data,Wc.frame.layout,
Ya.coerceTraceIndices(Ha,Wc.frame.traces),Wc.frameOpts,Wc.transitionOpts).then(function(){if(Wc.onComplete)Wc.onComplete()});Ha.emit("plotly_animatingframe",{name:ib,frame:Wc.frame,animation:{frame:Wc.frameOpts,transition:Wc.transitionOpts}})}else Ha.emit("plotly_animated"),window.cancelAnimationFrame(ob._animationRaf),ob._animationRaf=null}function rb(){Ha.emit("plotly_animating");ob._lastFrameAt=-Infinity;ob._timeToNext=0;ob._runningTransitions=0;ob._currentFrame=null;var Wc=function(){ob._animationRaf=
window.requestAnimationFrame(Wc);Date.now()-ob._lastFrameAt>ob._timeToNext&&kb()};Wc()}function Mb(Wc){Array.isArray(ub)?Wc.transitionOpts=Fb>=ub.length?ub[Fb]:ub[0]:Wc.transitionOpts=ub;Fb++;return Wc}var Fb=0,Lb,Vb=[],xc=void 0===Ra||null===Ra;var Gc=Array.isArray(Ra);if(!xc&&!Gc&&ba.isPlainObject(Ra))Vb.push({type:"object",data:Mb(ba.extendFlat({},Ra))});else if(xc||-1!==["string","number"].indexOf(typeof Ra))for(Gc=0;Gc<ob._frames.length;Gc++)(Lb=ob._frames[Gc])&&(xc||String(Lb.group)===String(Ra))&&
Vb.push({type:"byname",name:String(Lb.name),data:Mb({name:Lb.name})});else if(Gc)for(Gc=0;Gc<Ra.length;Gc++)Lb=Ra[Gc],-1!==["number","string"].indexOf(typeof Lb)?(Lb=String(Lb),Vb.push({type:"byname",name:Lb,data:Mb({name:Lb})})):ba.isPlainObject(Lb)&&Vb.push({type:"object",data:Mb(ba.extendFlat({},Lb))});for(Gc=0;Gc<Vb.length;Gc++)if(Lb=Vb[Gc],"byname"===Lb.type&&!ob._frameHash[Lb.data.name]){ba.warn('animate failure: frame not found: "'+Lb.data.name+'"');Ja();return}-1!==["next","immediate"].indexOf(La.mode)&&
Ta();"reverse"===La.direction&&Vb.reverse();var Hc=Ha._fullLayout._currentFrame;if(Hc&&La.fromcurrent){xc=-1;for(Gc=0;Gc<Vb.length;Gc++)if(Lb=Vb[Gc],"byname"===Lb.type&&Lb.name===Hc){xc=Gc;break}if(0<xc&&xc<Vb.length-1){Hc=[];for(Gc=0;Gc<Vb.length;Gc++)Lb=Vb[Gc],("byname"!==Vb[Gc].type||Gc>xc)&&Hc.push(Lb);Vb=Hc}}0<Vb.length?Xa(Vb):(Ha.emit("plotly_animated"),Da())})};G.addFrames=function(Ha,Ra,La){Ha=ba.getGraphDiv(Ha);if(null===Ra||void 0===Ra)return Promise.resolve();if(!ba.isPlotDiv(Ha))throw Error("This element is not a Plotly plot: "+
Ha+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var gb,ob=Ha._transitionData._frames,ub=Ha._transitionData._frameHash;if(!Array.isArray(Ra))throw Error("addFrames failure: frameList must be an Array of frame definitions"+Ra);var za=ob.length+2*Ra.length;var Da=[],Ja={};for(gb=Ra.length-1;0<=gb;gb--)if(ba.isPlainObject(Ra[gb])){var Ta=Ra[gb].name;var Xa=(ub[Ta]||Ja[Ta]||{}).name,kb=Ra[gb].name,rb=ub[Xa]||
Ja[Xa];Xa&&kb&&"number"===typeof kb&&rb&&5>Ba&&(Ba++,ba.warn('addFrames: overwriting frame "'+(ub[Xa]||Ja[Xa]).name+'" with a frame whose name of type "number" also equates to "'+Xa+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),5===Ba&&ba.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed."));Ja[Ta]={name:Ta};
Da.push({frame:la.supplyFrameDefaults(Ra[gb]),index:La&&void 0!==La[gb]&&null!==La[gb]?La[gb]:za+gb})}Da.sort(function(Mb,Fb){return Mb.index>Fb.index?-1:Mb.index<Fb.index?1:0});Ra=[];La=[];Ja=ob.length;for(gb=Da.length-1;0<=gb;gb--){za=Da[gb].frame;"number"===typeof za.name&&ba.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings");if(!za.name)for(;ub[za.name="frame "+Ha._transitionData._counter++];);if(ub[za.name]){for(Ta=0;Ta<ob.length&&(ob[Ta]||
{}).name!==za.name;Ta++);Ra.push({type:"replace",index:Ta,value:za});La.unshift({type:"replace",index:Ta,value:ob[Ta]})}else Ta=Math.max(0,Math.min(Da[gb].index,Ja)),Ra.push({type:"insert",index:Ta,value:za}),La.unshift({type:"delete",index:Ta}),Ja++}ob=gb=la.modifyFrames;ub=[Ha,La];Da=[Ha,Ra];ka&&ka.add(Ha,gb,ub,ob,Da);return la.modifyFrames(Ha,Ra)};G.deleteFrames=function(Ha,Ra){Ha=ba.getGraphDiv(Ha);if(!ba.isPlotDiv(Ha))throw Error("This element is not a Plotly plot: "+Ha);var La,gb=Ha._transitionData._frames,
ob=[],ub=[];if(!Ra)for(Ra=[],La=0;La<gb.length;La++)Ra.push(La);Ra=Ra.slice();Ra.sort();for(La=Ra.length-1;0<=La;La--){var za=Ra[La];ob.push({type:"delete",index:za});ub.unshift({type:"insert",index:za,value:gb[za]})}La=Ra=la.modifyFrames;ub=[Ha,ub];za=[Ha,ob];ka&&ka.add(Ha,Ra,ub,La,za);return la.modifyFrames(Ha,ob)};G.addTraces=r;G.deleteTraces=u;G.extendTraces=f;G.moveTraces=v;G.prependTraces=k;G.newPlot=function(Ha,Ra,La,gb){Ha=ba.getGraphDiv(Ha);la.cleanPlot([],{},Ha._fullData||[],Ha._fullLayout||
{});la.purge(Ha);return G.plot(Ha,Ra,La,gb)};G.plot=function(Ha,Ra,La,gb){function ob(){for(var Vb=rb._basePlotModules,xc=0;xc<Vb.length;xc++)Vb[xc].drawFramework&&Vb[xc].drawFramework(Ha);!rb._glcanvas&&rb._has("gl")&&(rb._glcanvas=rb._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(Gc){return Gc.key}),rb._glcanvas.enter().append("canvas").attr("class",function(Gc){return"gl-canvas gl-canvas-"+
Gc.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));if(rb._glcanvas&&(rb._glcanvas.attr("width",rb.width).attr("height",rb.height),(Vb=rb._glcanvas.data()[0].regl)&&(Math.floor(rb.width)!==Vb._gl.drawingBufferWidth||Math.floor(rb.height)!==Vb._gl.drawingBufferHeight)))if(Lb)ba.error("WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.");else return ba.log("WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug. Clearing graph and plotting again."),
la.cleanPlot([],{},Ha._fullData,rb),la.supplyDefaults(Ha),rb=Ha._fullLayout,la.doCalcdata(Ha),Lb++,ob();"h"===rb.modebar.orientation?rb._modebardiv.style("height",null).style("width","100%"):rb._modebardiv.style("width",null).style("height",rb.height+"px");return la.previousPromises(Ha)}function ub(){la.clearAutoMarginIds(Ha);hb.drawMarginPushers(Ha);sa.allowAutoMargin(Ha);if(rb._has("pie"))for(var Vb=Ha._fullData,xc=0;xc<Vb.length;xc++){var Gc=Vb[xc];"pie"===Gc.type&&Gc.automargin&&la.allowAutoMargin(Ha,
"pie."+Gc.uid+".automargin")}la.doAutoMargin(Ha);return la.previousPromises(Ha)}function za(){if(Mb)return ba.syncOrAsync([oa.getComponentMethod("shapes","calcAutorange"),oa.getComponentMethod("annotations","calcAutorange"),Da],Ha);Da()}function Da(){Ha._transitioning||(hb.doAutoRangeAndConstraints(Ha),kb&&sa.saveRangeInitial(Ha),oa.getComponentMethod("rangeslider","calcAutorange")(Ha))}function Ja(){return sa.draw(Ha,kb?"":"redraw")}Ha=ba.getGraphDiv(Ha);qa.init(Ha);if(ba.isPlainObject(Ra)){var Ta=
Ra;Ra=Ta.data;La=Ta.layout;gb=Ta.config;var Xa=Ta.frames}if(!1===qa.triggerHandler(Ha,"plotly_beforeplot",[Ra,La,gb]))return Promise.reject();Ra||La||ba.isPlotDiv(Ha)||ba.warn("Calling Plotly.plot as if redrawing but this container doesn't yet have a plot.",Ha);h(Ha,gb);La||(La={});fa.select(Ha).classed("js-plotly-plot",!0);ta.makeTester();Array.isArray(Ha._promises)||(Ha._promises=[]);var kb=0===(Ha.data||[]).length&&Array.isArray(Ra);Array.isArray(Ra)&&(Ya.cleanData(Ra),kb?Ha.data=Ra:Ha.data.push.apply(Ha.data,
Ra),Ha.empty=!1);if(!Ha.layout||kb)Ha.layout=Ya.cleanLayout(La);la.supplyDefaults(Ha);var rb=Ha._fullLayout;gb=rb._has("cartesian");if(!rb._has("polar")&&Ra&&Ra[0]&&Ra[0].r)return ba.log("Legacy polar charts are deprecated!"),a(Ha,Ra,La);rb._replotting=!0;if(kb||rb._shouldCreateBgLayer)aa(Ha),rb._shouldCreateBgLayer&&delete rb._shouldCreateBgLayer;Ha.framework!==aa&&(Ha.framework=aa,aa(Ha));ta.initGradients(Ha);kb&&sa.saveShowSpikeInitial(Ha);var Mb=!Ha.calcdata||Ha.calcdata.length!==(Ha._fullData||
[]).length;Mb&&la.doCalcdata(Ha);for(Ra=0;Ra<Ha.calcdata.length;Ra++)Ha.calcdata[Ra][0].trace=Ha._fullData[Ra];Ha._context.responsive?Ha._responsiveChartHandler||(Ha._responsiveChartHandler=function(){ba.isHidden(Ha)||la.resize(Ha)},window.addEventListener("resize",Ha._responsiveChartHandler)):ba.clearResponsive(Ha);var Fb=ba.extendFlat({},rb._size),Lb=0;Ra=[la.previousPromises,function(){if(Xa)return G.addFrames(Ha,Xa)},ob,ub,function(){if(la.didMarginChange(Fb,rb._size))return ba.syncOrAsync([ub,
hb.layoutStyles],Ha)}];gb&&Ra.push(za);Ra.push(hb.layoutStyles);gb&&Ra.push(Ja,function(Vb){Vb._fullLayout._insideTickLabelsAutorange&&t(Vb,Vb._fullLayout._insideTickLabelsAutorange).then(function(){Vb._fullLayout._insideTickLabelsAutorange=void 0})});Ra.push(hb.drawData,hb.finalDraw,Ka,la.addLinks,la.rehover,la.redrag,la.doAutoMargin,function(Vb){Vb._fullLayout._insideTickLabelsAutorange&&kb&&sa.saveRangeInitial(Vb,!0)},la.previousPromises);(Ra=ba.syncOrAsync(Ra,Ha))&&Ra.then||(Ra=Promise.resolve());
return Ra.then(function(){q(Ha);return Ha})};G.purge=function(Ha){Ha=ba.getGraphDiv(Ha);var Ra=Ha._fullLayout||{};la.cleanPlot([],{},Ha._fullData||[],Ra);la.purge(Ha);qa.purge(Ha);Ra._container&&Ra._container.remove();delete Ha._context;return Ha};G.react=function(Ha,Ra,La,gb){function ob(){return G.addFrames(Ha,Ta)}var ub;Ha=ba.getGraphDiv(Ha);Ya.clearPromiseQueue(Ha);var za=Ha._fullData,Da=Ha._fullLayout;if(ba.isPlotDiv(Ha)&&za&&Da){if(ba.isPlainObject(Ra)){var Ja=Ra;Ra=Ja.data;La=Ja.layout;gb=
Ja.config;var Ta=Ja.frames}Ja=!1;gb&&(Ja=ba.extendDeep({},Ha._context),Ha._context=void 0,h(Ha,gb),Ja=X(Ja,Ha._context));Ha.data=Ra||[];Ya.cleanData(Ha.data);Ha.layout=La||{};Ya.cleanLayout(Ha.layout);T(Ha.data,Ha.layout,za,Da);la.supplyDefaults(Ha,{skipUpdateCalc:!0});var Xa=Ha._fullData;gb=Ha._fullLayout;var kb=void 0===gb.datarevision,rb=gb.transition,Mb=U(Ha,Da,gb,kb,rb),Fb=Q(Ha,za,Xa,kb,rb,Mb.newDataRevision);J(Ha)&&(Mb.layoutReplot=!0);if(Fb.calc||Mb.calc)for(Ha.calcdata=void 0,za=Object.getOwnPropertyNames(gb),
Xa=0;Xa<za.length;Xa++)kb=za[Xa],rb=kb.substring(0,5),("xaxis"===rb||"yaxis"===rb)&&(kb=gb[kb]._emptyCategories)&&kb();else la.supplyDefaultsUpdateCalc(Ha.calcdata,Xa);za=[];Ta&&(Ha._transitionData={},la.createTransitionData(Ha),za.push(ob));if(gb.transition&&!Ja&&(Fb.anim||Mb.anim))Mb.ticks&&za.push(hb.doTicksRelayout),la.doCalcdata(Ha),hb.doAutoRangeAndConstraints(Ha),za.push(function(){return la.transitionFromReact(Ha,Fb,Mb,Da)});else if(Fb.fullReplot||Mb.layoutReplot||Ja)Ha._fullLayout._skipDefaults=
!0,za.push(G.plot);else{for(ub in Mb.arrays)if(Ja=Mb.arrays[ub],Ja.length)if(gb=oa.getComponentMethod(ub,"drawOne"),gb!==ba.noop)for(Xa=0;Xa<Ja.length;Xa++)gb(Ha,Ja[Xa]);else{Ja=oa.getComponentMethod(ub,"draw");if(Ja===ba.noop)throw Error("cannot draw components: "+ub);Ja(Ha)}za.push(la.previousPromises);Fb.style&&za.push(hb.doTraceStyle);(Fb.colorbars||Mb.colorbars)&&za.push(hb.doColorBars);Mb.legend&&za.push(hb.doLegend);Mb.layoutstyle&&za.push(hb.layoutStyles);Mb.axrange&&F(za);Mb.ticks&&za.push(hb.doTicksRelayout);
Mb.modebar&&za.push(hb.doModeBar);Mb.camera&&za.push(hb.doCamera);za.push(q)}za.push(la.rehover,la.redrag);(ub=ba.syncOrAsync(za,Ha))&&ub.then||(ub=Promise.resolve(Ha))}else ub=G.newPlot(Ha,Ra,La,gb);return ub.then(function(){Ha.emit("plotly_react",{data:Ra,layout:La});return Ha})};G.redraw=function(Ha){Ha=ba.getGraphDiv(Ha);if(!ba.isPlotDiv(Ha))throw Error("This element is not a Plotly plot: "+Ha);Ya.cleanData(Ha.data);Ya.cleanLayout(Ha.layout);Ha.calcdata=void 0;return G.plot(Ha).then(function(){Ha.emit("plotly_redraw");
return Ha})};G.relayout=t;G.restyle=x;G.setPlotConfig=function(Ha){return ba.extendFlat(lb,Ha)};G.update=L;G._guiRelayout=H(t);G._guiRestyle=H(x);G._guiUpdate=H(L);G._storeDirectGUIEdit=function(Ha,Ra,La){for(var gb in La){var ob=ma(Ha,gb);y(gb,ob.get(),La[gb],Ra)}}},{"../components/color":643,"../components/drawing":665,"../constants/xmlns_namespaces":754,"../lib":778,"../lib/events":767,"../lib/queue":794,"../lib/svg_text_utils":803,"../plots/cartesian/axes":828,"../plots/cartesian/constants":834,
"../plots/cartesian/graph_interact":837,"../plots/cartesian/select":847,"../plots/plots":891,"../plots/polar/legacy":899,"../registry":911,"./edit_types":810,"./helpers":811,"./manage_arrays":813,"./plot_config":815,"./plot_schema":816,"./subroutines":818,d3:169,"fast-isnumeric":241,"has-hover":440}],815:[function(b,K,G){function q(m,l){for(var h in m){var a=m[h];a.valType?l[h]=a.dflt:(l[h]||(l[h]={}),q(a,l[h]))}}b={staticPlot:{valType:"boolean",dflt:!1},plotlyServerURL:{valType:"string",dflt:""},
editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},autosizable:{valType:"boolean",
dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},
showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},
toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",
dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}};G={};q(b,G);K.exports={configAttributes:b,dfltConfig:G}},{}],816:[function(b,K,G){function q(H,P){var M,N,T=H._basePlotModules;if(T){for(M=0;M<T.length;M++){var Q=T[M];if(Q.attrRegex&&Q.attrRegex.test(P)){if(Q.layoutAttrOverrides)return Q.layoutAttrOverrides;if(!U&&Q.layoutAttributes)var U=Q.layoutAttributes}if((Q=Q.baseLayoutAttrOverrides)&&P in Q)return Q[P]}if(U)return U}if(T=H._modules)for(M=0;M<T.length;M++)if((H=
T[M].layoutAttributes)&&P in H)return H[P];for(N in k.componentsRegistry){Q=k.componentsRegistry[N];if("colorscale"===Q.name&&0===P.indexOf("coloraxis"))return Q.layoutAttributes[P];if(!Q.schema&&P===Q.name)return Q.layoutAttributes}return P in u?u[P]:"radialaxis"===P||"angularaxis"===P?y[P]:y.layout[P]||!1}function m(H,P,M){if(!H)return!1;if(H._isLinkedToArray)if(l(P[M]))M++;else if(M<P.length)return!1;for(;M<P.length;M++){var N=H[P[M]];if(B(N))H=N;else break;if(M===P.length-1)break;if(H._isLinkedToArray){if(M++,
!l(P[M]))return!1}else if("info_array"===H.valType){M++;N=P[M];if(!l(N))return!1;var T=H.items;if(Array.isArray(T)){if(N>=T.length)return!1;if(2===H.dimensions){M++;if(P.length===M)break;H=P[M];if(!l(H))return!1;H=T[N][H]}else H=T[N]}else H=T}}return H}function l(H){return H===Math.round(H)&&0<=H}function h(H){if("area"===H){var P={attributes:z};var M={}}else P=k.modules[H]._module,M=P.basePlotModule;var N={type:null},T=t({},r),Q=t({},P.attributes);G.crawl(Q,function(U,S,X,Z,aa){I(T,aa).set(void 0);
void 0===U&&I(Q,aa).set(void 0)});t(N,T);k.traceIs(H,"noOpacity")&&delete N.opacity;k.traceIs(H,"showLegend")||(delete N.showlegend,delete N.legendgroup);k.traceIs(H,"noHover")&&(delete N.hoverinfo,delete N.hoverlabel);P.selectPoints||delete N.selectedpoints;t(N,Q);M.attributes&&t(N,M.attributes);N.type=H;H={meta:P.meta||{},categories:P.categories||{},animatable:!!P.animatable,type:H,attributes:n(N)};P.layoutAttributes&&(M={},t(M,P.layoutAttributes),H.layoutAttributes=n(M));P.animatable||G.crawl(H,
function(U){G.isValObject(U)&&"anim"in U&&delete U.anim});return H}function a(){var H={},P;t(H,u);for(P in k.subplotsRegistry){var M=k.subplotsRegistry[P];if(M.layoutAttributes)if(Array.isArray(M.attr))for(var N=0;N<M.attr.length;N++)f(H,M,M.attr[N]);else f(H,M,"subplot"===M.attr?M.name:M.attr)}A(H,{radialaxis:y.radialaxis,angularaxis:y.angularaxis});A(H,y.layout);for(P in k.componentsRegistry)if(M=k.componentsRegistry[P],(N=M.schema)&&(N.subplots||N.layout)){if((M=N.subplots)&&M.xaxis&&!M.yaxis)for(var T in M.xaxis)delete H.yaxis[T]}else"colorscale"===
M.name?t(H,M.layoutAttributes):M.layoutAttributes&&(N=M.layoutAttributes,M=I(H,M.name),M.set(t(M.get()||{},N)));return{layoutAttributes:n(H)}}function g(H){var P=t({},k.transformsRegistry[H].attributes);Object.keys(k.componentsRegistry).forEach(function(M){var N=k.componentsRegistry[M];N.schema&&N.schema.transforms&&N.schema.transforms[H]&&Object.keys(N.schema.transforms[H]).forEach(function(T){var Q=N.schema.transforms[H][T];T=I(P,T);T.set(t(T.get()||{},Q))})});return{attributes:n(P)}}function e(){var H=
{frames:t({},v)};n(H);return H.frames}function n(H){p(H);c(H);d(H);return H}function p(H){G.crawl(H,function(P,M,N){G.isValObject(P)?"data_array"===P.valType?(P.role="data",N[M+"src"]={valType:"string",editType:"none"}):!0===P.arrayOk&&(N[M+"src"]={valType:"string",editType:"none"}):B(P)&&(P.role="object")})}function c(H){G.crawl(H,function(P,M,N){if(P){var T=P._isLinkedToArray;T&&(delete P._isLinkedToArray,N[M]={items:{}},N[M].items[T]=P,N[M].role="object")}})}function d(H){function P(M){for(var N in M)if(B(M[N]))P(M[N]);
else if(Array.isArray(M[N]))for(var T=0;T<M[N].length;T++)P(M[N][T]);else M[N]instanceof RegExp&&(M[N]=M[N].toString())}P(H)}function f(H,P,M){H=I(H,M);P=t({},P.layoutAttributes);P._isSubplotObj=!0;H.set(P)}var k=b("../registry");K=b("../lib");var r=b("../plots/attributes"),u=b("../plots/layout_attributes"),v=b("../plots/frame_attributes"),x=b("../plots/animation_attributes"),C=b("./plot_config").configAttributes,z=b("../plots/polar/legacy/area_attributes"),y=b("../plots/polar/legacy/axis_attributes"),
D=b("./edit_types"),A=K.extendFlat,t=K.extendDeepAll,B=K.isPlainObject,F=K.isArrayOrTypedArray,I=K.nestedProperty,J=K.valObjectMeta,L=["_isSubplotObj","_isLinkedToArray","_arrayAttrRegexps","_deprecated"];G.IS_SUBPLOT_OBJ="_isSubplotObj";G.IS_LINKED_TO_ARRAY="_isLinkedToArray";G.DEPRECATED="_deprecated";G.UNDERSCORE_ATTRS=L;G.get=function(){var H={};k.allTypes.concat("area").forEach(function(M){H[M]=h(M)});var P={};Object.keys(k.transformsRegistry).forEach(function(M){P[M]=g(M)});return{defs:{valObjects:J,
metaKeys:L.concat(["description","role","editType","impliedEdits"]),editType:{traces:D.traces,layout:D.layout},impliedEdits:{}},traces:H,layout:a(),transforms:P,frames:e(),animation:n(x),config:n(C)}};G.crawl=function(H,P,M,N){var T=M||0;N=N||"";Object.keys(H).forEach(function(Q){var U=H[Q];if(-1===L.indexOf(Q)){var S=(N?N+".":"")+Q;P(U,Q,H,T,S);G.isValObject(U)||B(U)&&"impliedEdits"!==Q&&G.crawl(U,P,T+1,S)}})};G.isValObject=function(H){return H&&void 0!==H.valType};G.findArrayAttributes=function(H){function P(fa,
ha,ja,ba){T=T.slice(0,ba).concat([ha]);Q=Q.slice(0,ba).concat([fa&&fa._isLinkedToArray]);!fa||"data_array"!==fa.valType&&!0!==fa.arrayOk||"colorbar"===T[ba-1]&&("ticktext"===ha||"tickvals"===ha)||M(U,0,"")}function M(fa,ha,ja){fa=fa[T[ha]];ja+=T[ha];if(ha===T.length-1)F(fa)&&N.push(S+ja);else if(Q[ha]){if(Array.isArray(fa))for(var ba=0;ba<fa.length;ba++)B(fa[ba])&&M(fa[ba],ha+1,ja+"["+ba+"].")}else B(fa)&&M(fa,ha+1,ja+".")}var N=[],T=[],Q=[];var U=H;var S="";G.crawl(r,P);H._module&&H._module.attributes&&
G.crawl(H._module.attributes,P);if(H=H.transforms)for(var X=0;X<H.length;X++){var Z=H[X],aa=Z._module;aa&&(S="transforms["+X+"].",U=Z,G.crawl(aa.attributes,P))}return N};G.getTraceValObject=function(H,P){var M=P[0],N=1;if("transforms"===M){if(1===P.length)return r.transforms;M=H.transforms;if(!Array.isArray(M)||!M.length)return!1;N=P[1];if(!l(N)||N>=M.length)return!1;H=(H=(k.transformsRegistry[M[N].type]||{}).attributes)&&H[P[2]];N=3}else if("area"===H.type)H=z[M];else{var T=H._module;T||(T=(k.modules[H.type||
r.type.dflt]||{})._module);if(!T)return!1;H=(H=T.attributes)&&H[M];H||(T=T.basePlotModule)&&T.attributes&&(H=T.attributes[M]);H||(H=r[M])}return m(H,P,N)};G.getLayoutValObject=function(H,P){H=q(H,P[0]);return m(H,P,1)}},{"../lib":778,"../plots/animation_attributes":822,"../plots/attributes":824,"../plots/frame_attributes":857,"../plots/layout_attributes":882,"../plots/polar/legacy/area_attributes":897,"../plots/polar/legacy/axis_attributes":898,"../registry":911,"./edit_types":810,"./plot_config":815}],
817:[function(b,K,G){function q(a){"s"!==a.charAt(a.length-1)&&m.warn("bad argument to arrayDefaultKey: "+a);return a.substr(0,a.length-1)+"defaults"}var m=b("../lib"),l=b("../plots/attributes"),h={name:{valType:"string",editType:"none"},templateitemname:{valType:"string",editType:"calc"}};G.templatedArray=function(a,g){g._isLinkedToArray=a;g.name=h.name;g.templateitemname=h.templateitemname;return g};G.traceTemplater=function(a){var g={},e;for(e in a){var n=a[e];Array.isArray(n)&&n.length&&(g[e]=
0)}return{newTrace:function(p){e=m.coerce(p,{},l,"type");p={type:e,_template:null};if(e in g){n=a[e];var c=g[e]%n.length;g[e]++;p._template=n[c]}return p}}};G.newContainer=function(a,g,e){var n=a._template;e=n&&(n[g]||e&&n[e]);m.isPlainObject(e)||(e=null);return a[g]={_template:e}};G.arrayTemplater=function(a,g,e){var n=(a=a._template)&&a[q(g)],p=a&&a[g];Array.isArray(p)&&p.length||(p=[]);var c={};return{newItem:function(d){var f={name:d.name,_input:d},k=f.templateitemname=d.templateitemname;if(!k||
"string"!==typeof k)return f._template=n,f;for(var r=0;r<p.length;r++){var u=p[r];if(u.name===k)return c[k]=1,f._template=u,f}f[e]=d[e]||!1;f._template=!1;return f},defaultItems:function(){for(var d=[],f=0;f<p.length;f++){var k=p[f],r=k.name;if(r&&"string"===typeof r&&!c[r]){var u={_template:k,name:r,_input:{_templateitemname:r}};u.templateitemname=k.templateitemname;d.push(u);c[r]=1}}return d}}};G.arrayDefaultKey=q;G.arrayEditor=function(a,g,e){function n(){u={};k&&(u[r]={},u[r].templateitemname=
k)}function p(v,x){k?m.nestedProperty(u[r],v).set(x):u[r+"."+v]=x}function c(){var v=u;n();return v}var d=(m.nestedProperty(a,g).get()||[]).length,f=e._index,k=f>=d&&(e._input||{})._templateitemname;k&&(f=d);var r=g+"["+f+"]",u;n();return{modifyBase:function(v,x){u[v]=x},modifyItem:p,getUpdateObj:c,applyUpdate:function(v,x){v&&p(v,x);v=c();for(var C in v)m.nestedProperty(a,C).set(v[C])}}}},{"../lib":778,"../plots/attributes":824}],818:[function(b,K,G){function q(y,D,A){for(var t=0;t<A.length;t++){var B=
A[t][0],F=A[t][1];if(!(B[0]>=y[1]||B[1]<=y[0])&&F[0]<D[1]&&F[1]>D[0])return!0}return!1}function m(y){function D(ka,oa,na){var la=ka._lw/2;return"x"===ka._id.charAt(0)?oa?"top"===na?oa._offset-H-la:oa._offset+oa._length+H+la:L.t+L.h*(1-(ka.position||0))+la%1:oa?"right"===na?oa._offset+oa._length+H+la:oa._offset-H-la:L.l+L.w*(ka.position||0)+la%1}function A(ka){return"M"+ja+","+ka+"H"+ba}function t(ka){return"M"+fa._offset+","+ka+"h"+fa._length}function B(ka){return"M"+ka+","+qa+"V"+ma}function F(ka){return"M"+
ka+","+ha._offset+"v"+ha._length}function I(ka,oa,na){if(!ka.showline||N!==ka._mainSubplot)return"";if(!ka._anchorAxis)return na(ka._mainLinePosition);na=oa(ka._mainLinePosition);ka.mirror&&(na+=oa(ka._mainMirrorPosition));return na}var J=y._fullLayout,L=J._size,H=L.p,P=u.list(y,"",!0),M,N;J._paperdiv.style({width:y._context.responsive&&J.autosize&&!y._context._hasZeroWidth&&!y.layout.width?"100%":J.width+"px",height:y._context.responsive&&J.autosize&&!y._context._hasZeroHeight&&!y.layout.height?
"100%":J.height+"px"}).selectAll(".main-svg").call(f.setSize,J.width,J.height);y._context.setBackground(y,J.paper_bgcolor);G.drawMainTitle(y);r.manage(y);if(!J._has("cartesian"))return n.previousPromises(y);for(M=0;M<P.length;M++){var T=P[M];var Q=T._anchorAxis;T._linepositions={};T._lw=f.crispRound(y,T.linewidth,1);T._mainLinePosition=D(T,Q,T.side);T._mainMirrorPosition=T.mirror&&Q?D(T,Q,v.OPPOSITE_SIDE[T.side]):null}M=[];Q=[];var U=[],S=1===d.opacity(J.paper_bgcolor)&&1===d.opacity(J.plot_bgcolor)&&
J.paper_bgcolor===J.plot_bgcolor;for(N in J._plots)if(T=J._plots[N],T.mainplot)T.bg&&T.bg.remove(),T.bg=void 0;else{var X=T.xaxis.domain,Z=T.yaxis.domain,aa=T.plotgroup;q(X,Z,U)?(X=aa.node(),T=T.bg=p.ensureSingle(aa,"rect","bg"),X.insertBefore(T.node(),X.childNodes[0]),Q.push(N)):(aa.select("rect.bg").remove(),U.push([X,Z]),S||(M.push(N),Q.push(N)))}T=J._bgLayer.selectAll(".bg").data(M);T.enter().append("rect").classed("bg",!0);T.exit().remove();T.each(function(ka){J._plots[ka].bg=g.select(this)});
for(M=0;M<Q.length;M++){T=J._plots[Q[M]];var fa=T.xaxis;var ha=T.yaxis;T.bg&&void 0!==fa._offset&&void 0!==ha._offset&&T.bg.call(f.setRect,fa._offset-H,ha._offset-H,fa._length+2*H,ha._length+2*H).call(d.fill,J.plot_bgcolor).style("stroke-width",0)}if(!J._hasOnlyLargeSploms)for(N in J._plots)T=J._plots[N],fa=T.xaxis,ha=T.yaxis,Q=T.clipId="clip"+J._uid+N+"plot",M=p.ensureSingleById(J._clips,"clipPath",Q,function(ka){ka.classed("plotclip",!0).append("rect")}),T.clipRect=M.select("rect").attr({width:fa._length,
height:ha._length}),f.setTranslate(T.plot,fa._offset,ha._offset),T._hasClipOnAxisFalse?M=null:(M=Q,Q=null),f.setClipUrl(T.plot,M,y),T.layerClipId=Q;for(N in J._plots){T=J._plots[N];fa=T.xaxis;ha=T.yaxis;S="M0,0";if(l(fa,N)){Q=a(fa,"left",ha,P);var ja=fa._offset-(Q?H+Q:0);Q=a(fa,"right",ha,P);var ba=fa._offset+fa._length+(Q?H+Q:0);M=D(fa,ha,"bottom");U=D(fa,ha,"top");Q=!fa._anchorAxis||N!==fa._mainSubplot;!Q||"allticks"!==fa.mirror&&"all"!==fa.mirror||(fa._linepositions[N]=[M,U]);S=I(fa,A,t);Q&&fa.showline&&
("all"===fa.mirror||"allticks"===fa.mirror)&&(S+=A(M)+A(U));T.xlines.style("stroke-width",fa._lw+"px").call(d.stroke,fa.showline?fa.linecolor:"rgba(0,0,0,0)")}T.xlines.attr("d",S);S="M0,0";if(l(ha,N)){Q=a(ha,"bottom",fa,P);var ma=ha._offset+ha._length+(Q?H:0);Q=a(ha,"top",fa,P);var qa=ha._offset-(Q?H:0);M=D(ha,fa,"left");U=D(ha,fa,"right");Q=!ha._anchorAxis||N!==ha._mainSubplot;!Q||"allticks"!==ha.mirror&&"all"!==ha.mirror||(ha._linepositions[N]=[M,U]);S=I(ha,B,F);Q&&ha.showline&&("all"===ha.mirror||
"allticks"===ha.mirror)&&(S+=B(M)+B(U));T.ylines.style("stroke-width",ha._lw+"px").call(d.stroke,ha.showline?ha.linecolor:"rgba(0,0,0,0)")}T.ylines.attr("d",S)}u.makeClipPaths(y);return n.previousPromises(y)}function l(y,D){return(y.ticks||y.showline)&&(D===y._mainSubplot||"all"===y.mirror||"allticks"===y.mirror)}function h(y,D,A){if(!A.showline||!A._lw)return!1;if("all"===A.mirror||"allticks"===A.mirror)return!0;var t=A._anchorAxis;if(!t)return!1;var B=v.FROM_BL[D];return A.side===D?t.domain[B]===
y.domain[B]:A.mirror&&t.domain[1-B]===y.domain[1-B]}function a(y,D,A,t){if(h(y,D,A))return A._lw;for(var B=0;B<t.length;B++){var F=t[B];if(F._mainAxis===A._mainAxis&&h(y,D,F))return F._lw}return 0}var g=b("d3"),e=b("../registry"),n=b("../plots/plots"),p=b("../lib"),c=b("../lib/clear_gl_canvases"),d=b("../components/color"),f=b("../components/drawing"),k=b("../components/titles"),r=b("../components/modebar"),u=b("../plots/cartesian/axes"),v=b("../constants/alignment");K=b("../plots/cartesian/constraints");
var x=K.enforce,C=K.clean,z=b("../plots/cartesian/autorange").doAutoRange;G.layoutStyles=function(y){return p.syncOrAsync([n.doAutoMargin,m],y)};G.drawMainTitle=function(y){var D=y._fullLayout;var A=D.title;var t="middle";p.isRightAnchor(A)?t="end":p.isLeftAnchor(A)&&(t="start");A=t;t=D.title;var B="0em";p.isTopAnchor(t)?B=v.CAP_SHIFT+"em":p.isMiddleAnchor(t)&&(B=v.MID_SHIFT+"em");t=B;B=k.draw;var F=D._dfltTitle.plot;a:{var I=D.title;var J=D._size,L=0;"start"===A?L=I.pad.l:"end"===A&&(L=-I.pad.r);
switch(I.xref){case "paper":I=J.l+J.w*I.x+L;break a;default:I=D.width*I.x+L}}a:{J=D.title;L=D._size;var H=0;"0em"!==t&&t?t===v.CAP_SHIFT+"em"&&(H=J.pad.t):H=-J.pad.b;if("auto"===J.y)J=L.t/2;else switch(J.yref){case "paper":J=L.t+L.h-L.h*J.y+H;break a;default:J=D.height-D.height*J.y+H}}B.call(k,y,"gtitle",{propContainer:D,propName:"title.text",placeholder:F,attributes:{x:I,y:J,"text-anchor":A,dy:t}})};G.doTraceStyle=function(y){var D=y.calcdata,A=[],t;for(t=0;t<D.length;t++){var B=D[t],F=B[0]||{},
I=F.trace||{},J=I._module||{},L=J.arraysToCalcdata;L&&L(B,I);(B=J.editStyle)&&A.push({fn:B,cd0:F})}if(A.length){for(t=0;t<A.length;t++)D=A[t],D.fn(y,D.cd0);c(y);G.redrawReglTraces(y)}n.style(y);e.getComponentMethod("legend","draw")(y);return n.previousPromises(y)};G.doColorBars=function(y){e.getComponentMethod("colorbar","draw")(y);return n.previousPromises(y)};G.layoutReplot=function(y){var D=y.layout;y.layout=void 0;return e.call("plot",y,"",D)};G.doLegend=function(y){e.getComponentMethod("legend",
"draw")(y);return n.previousPromises(y)};G.doTicksRelayout=function(y){u.draw(y,"redraw");y._fullLayout._hasOnlyLargeSploms&&(e.subplotsRegistry.splom.updateGrid(y),c(y),G.redrawReglTraces(y));G.drawMainTitle(y);return n.previousPromises(y)};G.doModeBar=function(y){var D=y._fullLayout;r.manage(y);for(var A=0;A<D._basePlotModules.length;A++){var t=D._basePlotModules[A].updateFx;t&&t(y)}return n.previousPromises(y)};G.doCamera=function(y){y=y._fullLayout;for(var D=y._subplots.gl3d,A=0;A<D.length;A++){var t=
y[D[A]];t._scene.setViewport(t)}};G.drawData=function(y){var D=y._fullLayout;c(y);for(var A=D._basePlotModules,t=0;t<A.length;t++)A[t].plot(y);G.redrawReglTraces(y);n.style(y);e.getComponentMethod("shapes","draw")(y);e.getComponentMethod("annotations","draw")(y);e.getComponentMethod("images","draw")(y);D._replotting=!1;return n.previousPromises(y)};G.redrawReglTraces=function(y){var D=y._fullLayout;if(D._has("regl")){var A=y._fullData;y=[];var t=[],B;D._hasOnlyLargeSploms&&D._splomGrid.draw();for(B=
0;B<A.length;B++){var F=A[B];!0===F.visible&&0!==F._length&&("splom"===F.type?D._splomScenes[F.uid].draw():"scattergl"===F.type?p.pushUnique(y,F.xaxis+F.yaxis):"scatterpolargl"===F.type&&p.pushUnique(t,F.subplot))}for(B=0;B<y.length;B++)A=D._plots[y[B]],A._scene&&A._scene.draw();for(B=0;B<t.length;B++)A=D[t[B]]._subplot,A._scene&&A._scene.draw()}};G.doAutoRangeAndConstraints=function(y){for(var D=u.list(y,"",!0),A,t={},B=0;B<D.length;B++)if(A=D[B],!t[A._id]){t[A._id]=1;C(y,A);z(y,A);var F=A._matchGroup;
if(F)for(var I in F)F=u.getFromId(y,I),z(y,F,A.range),t[I]=1}x(y)};G.finalDraw=function(y){e.getComponentMethod("rangeslider","draw")(y);e.getComponentMethod("rangeselector","draw")(y)};G.drawMarginPushers=function(y){e.getComponentMethod("legend","draw")(y);e.getComponentMethod("rangeselector","draw")(y);e.getComponentMethod("sliders","draw")(y);e.getComponentMethod("updatemenus","draw")(y);e.getComponentMethod("colorbar","draw")(y)}},{"../components/color":643,"../components/drawing":665,"../components/modebar":703,
"../components/titles":738,"../constants/alignment":745,"../lib":778,"../lib/clear_gl_canvases":762,"../plots/cartesian/autorange":827,"../plots/cartesian/axes":828,"../plots/cartesian/constraints":835,"../plots/plots":891,"../registry":911,d3:169}],819:[function(b,K,G){function q(u,v){function x(F,I,J){if(p(I)&&p(F))q(F,I);else if(Array.isArray(I)&&Array.isArray(F)){F=k.arrayTemplater({_template:u},J);for(y=0;y<I.length;y++){J=I[y];var L=F.newItem(J)._template;L&&q(L,J)}F=F.defaultItems();for(y=
0;y<F.length;y++)I.push(F[y]._template);for(y=0;y<I.length;y++)delete I[y].templateitemname}}u=n.extendDeep({},u);var C=Object.keys(u).sort(),z,y;for(z=0;z<C.length;z++){var D=C[z],A=u[D];D in v?x(A,v[D],D):v[D]=A;if(m(D)===D)for(var t in v){var B=m(t);t===B||B!==D||t in u||x(A,v[t],D)}}}function m(u){return u.replace(/[0-9]+$/,"")}function l(u,v,x,C,z){var y=z&&x(z),D;for(D in u){var A=u[D],t=g(u,D,C),B=g(u,D,z),F=x(B);if(!F){var I=m(D);I!==D&&(B=g(u,I,z),F=x(B))}if(!(y&&y===F||!F||F._noTemplating||
"data_array"===F.valType||F.arrayOk&&Array.isArray(A)))if(!F.valType&&p(A))l(A,v,x,t,B);else if(F._isLinkedToArray&&Array.isArray(A)){var J=!1;F=0;I={};for(var L=0;L<A.length;L++){var H=A[L];if(p(H)){var P=H.name;P?I[P]||(l(H,v,x,g(A,F,t),g(A,F,B)),F++,I[P]=1):J||(J=k.arrayDefaultKey(D),J=g(u,J,C),P=g(A,F,t),l(H,v,x,P,g(A,F,B)),H=n.nestedProperty(v,P),n.nestedProperty(v,J).set(H.get()),H.set(null),J=!0)}}}else n.nestedProperty(v,t).set(A)}}function h(u,v){return c.getLayoutValObject(u,n.nestedProperty({},
v).parts)}function a(u,v){return c.getTraceValObject(u,n.nestedProperty({},v).parts)}function g(u,v,x){return x?Array.isArray(u)?x+"["+v+"]":x+"."+v:v}function e(u){switch(u.code){case "data":var v="The template has no key data.";break;case "layout":v="The template has no key layout.";break;case "missing":v=u.path?"There are no templates for item "+u.path+" with name "+u.templateitemname:"There are no templates for trace "+u.index+", of type "+u.traceType+".";break;case "unused":v=u.path?"The template item at "+
u.path+" was not used in constructing the plot.":u.dataCount?"Some of the templates of type "+u.traceType+" were not used. The template has "+u.templateCount+" traces, the data only has "+u.dataCount+" of this type.":"The template has "+u.templateCount+" traces of type "+u.traceType+" but there are none in the data.";break;case "reused":v="Some of the templates of type "+u.traceType+" were used more than once. The template has "+u.templateCount+" traces, the data has "+u.dataCount+" of this type."}u.msg=
v;return u}var n=b("../lib"),p=n.isPlainObject,c=b("./plot_schema"),d=b("../plots/plots"),f=b("../plots/attributes"),k=b("./plot_template"),r=b("./plot_config").dfltConfig;G.makeTemplate=function(u){u=n.isPlainObject(u)?u:n.getGraphDiv(u);u=n.extendDeep({_context:r},{data:u.data,layout:u.layout});d.supplyDefaults(u);var v=u.data||[],x=u.layout||{};x._basePlotModules=u._fullLayout._basePlotModules;x._modules=u._fullLayout._modules;var C={data:{},layout:{}};v.forEach(function(t){var B={};l(t,B,a.bind(null,
t));t=n.coerce(t,{},f,"type");var F=C.data[t];F||(F=C.data[t]=[]);F.push(B)});l(x,C.layout,h.bind(null,x));delete C.layout.template;u=x.template;if(p(u)){v=u.layout;var z;p(v)&&q(v,C.layout);var y=u.data;if(p(y)){for(z in C.data)if(v=y[z],Array.isArray(v)){var D=C.data[z];var A=D.length;x=v.length;for(u=0;u<A;u++)q(v[u%x],D[u]);for(u=A;u<x;u++)D.push(n.extendDeep({},v[u]))}for(z in y)z in C.data||(C.data[z]=n.extendDeep([],y[z]))}}return C};G.validateTemplate=function(u,v){function x(J,L){for(var H in J)if("_"!==
H.charAt(0)&&p(J[H])){var P=m(H),M=[],N;for(N=0;N<L.length;N++)M.push(g(J,H,L[N])),P!==H&&M.push(g(J,P,L[N]));for(N=0;N<M.length;N++)B[M[N]]=1;x(J[H],M)}}function C(J,L){for(var H in J)if(-1===H.indexOf("defaults")&&p(J[H])){var P=g(J,H,L);B[P]?C(J[H],P):t.push({code:"unused",path:P})}}function z(J,L){for(var H in J)if("_"!==H.charAt(0)){var P=J[H],M=g(J,H,L);if(p(P))Array.isArray(J)&&!1===P._template&&P.templateitemname&&t.push({code:"missing",path:M,templateitemname:P.templateitemname}),z(P,M);
else{var N;if(N=Array.isArray(P))a:{N=P;for(var T=0;T<N.length;T++)if(p(N[T])){N=!0;break a}N=void 0}N&&z(P,M)}}}var y=n.extendDeep({},{_context:r,data:u.data,layout:u.layout}),D=y.layout||{};p(v)||(v=D.template||{});var A=v.layout;u=v.data;var t=[];y.layout=D;y.layout.template=v;d.supplyDefaults(y);v=y._fullLayout;y=y._fullData;var B={};p(A)?(x(v,["layout"]),C(A,"layout")):t.push({code:"layout"});if(p(u)){A={};for(D=0;D<y.length;D++){var F=y[D];var I=F.type;A[I]=(A[I]||0)+1;F._fullInput._template||
t.push({code:"missing",index:F._fullInput.index,traceType:I})}for(I in u)D=u[I].length,F=A[I]||0,D>F?t.push({code:"unused",traceType:I,templateCount:D,dataCount:F}):F>D&&t.push({code:"reused",traceType:I,templateCount:D,dataCount:F})}else t.push({code:"data"});z({data:y,layout:v},"");if(t.length)return t.map(e)}},{"../lib":778,"../plots/attributes":824,"../plots/plots":891,"./plot_config":815,"./plot_schema":816,"./plot_template":817}],820:[function(b,K,G){var q=b("fast-isnumeric"),m=b("./plot_api"),
l=b("../plots/plots"),h=b("../lib"),a=b("../snapshot/helpers"),g=b("../snapshot/tosvg"),e=b("../snapshot/svgtoimg"),n=b("../version").version,p={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};K.exports=function(c,d){function f(P){return!(P in d)||h.validate(d[P],p[P])}function k(P,
M){return h.coerce(d,z,p,P,M)}function r(){return new Promise(function(P){setTimeout(P,a.getDelay(I._fullLayout))})}function u(){return new Promise(function(P,M){var N=g(I,y,t),T=I._fullLayout.width,Q=I._fullLayout.height;if("full-json"===y)return M=l.graphJson(I,!1,"keepdata","object",!0,!0),M.version=n,M=JSON.stringify(M),m.purge(I),document.body.removeChild(I),F?P(M):P(a.encodeJSON(M));m.purge(I);document.body.removeChild(I);if("svg"===y)return F?P(N):P(a.encodeSVG(N));var U=document.createElement("canvas");
U.id=h.randstr();e({format:y,width:T,height:Q,scale:t,canvas:U,svg:N,promise:!0}).then(P).catch(M)})}d=d||{};if(h.isPlainObject(c)){var v=c.data||[];var x=c.layout||{};var C=c.config||{};c={}}else c=h.getGraphDiv(c),v=h.extendDeep([],c.data),x=h.extendDeep({},c.layout),C=c._context,c=c._fullLayout||{};if(!f("width")&&null!==d.width||!f("height")&&null!==d.height)throw Error("Height and width should be pixel values.");if(!f("format"))throw Error("Export format is not "+h.join2(p.format.values,", ",
" or ")+".");var z={},y=k("format"),D=k("width"),A=k("height"),t=k("scale"),B=k("setBackground"),F=k("imageDataOnly"),I=document.createElement("div");I.style.position="absolute";I.style.left="-5000px";document.body.appendChild(I);var J=h.extendFlat({},x);D?J.width=D:null===d.width&&q(c.width)&&(J.width=c.width);A?J.height=A:null===d.height&&q(c.height)&&(J.height=c.height);var L=h.extendFlat({},C,{_exportedPlot:!0,staticPlot:!0,setBackground:B}),H=a.getRedrawFunc(I);return new Promise(function(P,
M){m.plot(I,v,J,L).then(H).then(r).then(u).then(function(N){N=F?N.replace(a.IMAGE_URL_PREFIX,""):N;P(N)}).catch(function(N){M(N)})})}},{"../lib":778,"../plots/plots":891,"../snapshot/helpers":915,"../snapshot/svgtoimg":917,"../snapshot/tosvg":919,"../version":1370,"./plot_api":814,"fast-isnumeric":241}],821:[function(b,K,G){function q(r,u,v,x,C,z){z=z||[];for(var y=Object.keys(r),D=0;D<y.length;D++){var A=y[D];if("transforms"!==A){var t=z.slice();t.push(A);var B=r[A],F=u[A];var I=v;if(A in I)var J=
I[A];else J=h(A),J=I[J.keyMinusId];var L=(J||{}).valType,H="info_array"===L,P="colorscale"===L;I=(J||{}).items;var M=v;var N=A,T=h(N),Q=T.keyMinusId;T=T.id;M=Q in M&&M[Q]._isSubplotObj&&T?!0:N in M;if(M)if(p(B)&&p(F)&&"any"!==L)q(B,F,J,x,C,t);else if(H&&c(B))if(B.length>F.length&&x.push(l("unused",C,t.concat(F.length))),A=F.length,(L=Array.isArray(I))&&(A=Math.min(A,I.length)),2===J.dimensions)for(H=0;H<A;H++)if(c(B[H]))for(B[H].length>F[H].length&&x.push(l("unused",C,t.concat(H,F[H].length))),Q=
F[H].length,J=0;J<(L?Math.min(Q,I[H].length):Q);J++)P=L?I[H][J]:I,M=B[H][J],N=F[H][J],a.validate(M,P)?N!==M&&N!==+M&&x.push(l("dynamic",C,t.concat(H,J),M,N)):x.push(l("value",C,t.concat(H,J),M));else x.push(l("array",C,t.concat(H),B[H]));else for(H=0;H<A;H++)P=L?I[H]:I,M=B[H],N=F[H],a.validate(M,P)?N!==M&&N!==+M&&x.push(l("dynamic",C,t.concat(H),M,N)):x.push(l("value",C,t.concat(H),M));else if(J.items&&!H&&c(B)){I=I[Object.keys(I)[0]];A=[];for(J=0;J<F.length;J++)H=F[J]._index||J,L=t.slice(),L.push(H),
p(B[H])&&p(F[J])&&(A.push(H),H=B[H],P=F[J],p(H)&&!1!==H.visible&&!1===P.visible?x.push(l("invisible",C,L)):q(H,P,I,x,C,L));for(J=0;J<B.length;J++)L=t.slice(),L.push(J),p(B[J])?-1===A.indexOf(J)&&x.push(l("unused",C,L)):x.push(l("object",C,L,B[J]))}else!p(B)&&p(F)?x.push(l("object",C,t,B)):d(B)||!d(F)||H||P?A in u?a.validate(B,J)?"enumerated"===J.valType&&(J.coerceNumber&&B!==+F||B!==F)&&x.push(l("dynamic",C,t,B,F)):x.push(l("value",C,t,B)):x.push(l("unused",C,t,B)):x.push(l("array",C,t,B));else x.push(l("schema",
C,t))}}return x}function m(r){return c(r)?"In data trace "+r[1]+", ":"In "+r+", "}function l(r,u,v,x,C){v=v||"";if(c(u)){var z=u[0];var y=u[1]}else z=u,y=null;var D=v;if(c(D)){for(var A="",t=0;t<D.length;t++){var B=D[t];A="number"===typeof B?A.substr(0,A.length-1)+"["+B+"]":A+B;t<D.length-1&&(A+=".")}D=A}else D=String(D);u=f[r](u,D,x,C);a.log(u);return{code:r,container:z,trace:y,path:v,astr:D,msg:u}}function h(r){r=r.match(k);return{keyMinusId:r&&r[1],id:r&&r[2]}}var a=b("../lib"),g=b("../plots/plots"),
e=b("./plot_schema"),n=b("./plot_config").dfltConfig,p=a.isPlainObject,c=Array.isArray,d=a.isArrayOrTypedArray;K.exports=function(r,u){void 0===r&&(r=[]);void 0===u&&(u={});var v=e.get(),x=[],C={_context:a.extendFlat({},n)};if(c(r)){C.data=a.extendDeep([],r);var z=r}else C.data=[],z=[],x.push(l("array","data"));if(p(u)){C.layout=a.extendDeep({},u);var y=u}else C.layout={},y={},1<arguments.length&&x.push(l("object","layout"));g.supplyDefaults(C);for(var D=C._fullData,A=z.length,t=0;t<A;t++){var B=
z[t],F=["data",t];if(p(B)){var I=D[t],J=I.type,L=v.traces[J].attributes;L.type={valType:"enumerated",values:[J]};!1===I.visible&&!1!==B.visible&&x.push(l("invisible",F));q(B,I,L,x,F);B=B.transforms;I=I.transforms;if(B)for(c(B)||x.push(l("array",F,["transforms"])),F.push("transforms"),J=0;J<B.length;J++){L=["transforms",J];var H=B[J].type;p(B[J])?(H=v.transforms[H]?v.transforms[H].attributes:{},H.type={valType:"enumerated",values:Object.keys(v.transforms)},q(B[J],I[J],H,x,F,L)):x.push(l("object",F,
L))}}else x.push(l("object",F))}C=C._fullLayout;z=v.layout.layoutAttributes;for(A=0;A<D.length;A++)t=D[A],F=v.traces[t.type],(B=F.layoutAttributes)&&(t.subplot?a.extendFlat(z[F.attributes.subplot.dflt],B):a.extendFlat(z,B));q(y,C,z,x,"layout");return 0===x.length?void 0:x};var f={object:function(r,u){return("layout"===r&&""===u?"The layout argument":"data"===r[0]&&""===u?"Trace "+r[1]+" in the data argument":m(r)+"key "+u)+" must be linked to an object container"},array:function(r,u){return("data"===
r?"The data argument":m(r)+"key "+u)+" must be linked to an array container"},schema:function(r,u){return m(r)+"key "+u+" is not part of the schema"},unused:function(r,u,v){v=p(v)?"container":"key";return m(r)+v+" "+u+" did not get coerced"},dynamic:function(r,u,v,x){return[m(r)+"key",u,"(set to '"+v+"')","got reset to","'"+x+"'","during defaults."].join(" ")},invisible:function(r,u){return(u?m(r)+"item "+u:"Trace "+r[1])+" got defaulted to be not visible"},value:function(r,u,v){return[m(r)+"key "+
u,"is set to an invalid value ("+v+")"].join(" ")}},k=a.counterRegex("([a-z]+)")},{"../lib":778,"../plots/plots":891,"./plot_config":815,"./plot_schema":816}],822:[function(b,K,G){K.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",
min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:"linear quad cubic sin exp circle elastic back bounce linear-in quad-in cubic-in sin-in exp-in circle-in elastic-in back-in bounce-in linear-out quad-out cubic-out sin-out exp-out circle-out elastic-out back-out bounce-out linear-in-out quad-in-out cubic-in-out sin-in-out exp-in-out circle-in-out elastic-in-out back-in-out bounce-in-out".split(" "),editType:"none"},ordering:{valType:"enumerated",values:["layout first",
"traces first"],dflt:"layout first",editType:"none"}}}},{}],823:[function(b,K,G){var q=b("../lib"),m=b("../plot_api/plot_template");K.exports=function(l,h,a){var g=a.name,e=a.inclusionAttr||"visible",n=h[g],p=q.isArrayOrTypedArray(l[g])?l[g]:[];l=h[g]=[];var c=m.arrayTemplater(h,g,e);for(g=0;g<p.length;g++){var d=p[g];if(q.isPlainObject(d))var f=c.newItem(d);else f=c.newItem({}),f[e]=!1;f._index=g;!1!==f[e]&&a.handleItemDefaults(d,f,h,a);l.push(f)}e=c.defaultItems();for(g=0;g<e.length;g++)f=e[g],
f._index=l.length,a.handleItemDefaults({},f,h,a,{}),l.push(f);if(q.isArrayOrTypedArray(n))for(h=Math.min(n.length,l.length),g=0;g<h;g++)q.relinkPrivateKeys(l[g],n[g]);return l}},{"../lib":778,"../plot_api/plot_template":817}],824:[function(b,K,G){b=b("../components/fx/attributes");K.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",
dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all",
"none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:b.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1E4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},{"../components/fx/attributes":674}],825:[function(b,K,G){var q=b("fast-isnumeric");G=b("../../lib");var m=G.dateTime2ms,l=G.incrementMonth,h=b("../../constants/numerical").ONEAVGMONTH;
K.exports=function(a,g,e,n){if("date"!==g.type)return n;var p=a[e+"periodalignment"];if(!p)return n;var c=a[e+"period"];if(q(c)){if(c=+c,0>=c)return n}else if("string"===typeof c&&"M"===c.charAt(0)){var d=+c.substring(1);if(!(0<d&&Math.round(d)===d))return n}g=g.calendar;var f="start"===p;p="end"===p;a=m(a[e+"period0"],g)||0;e=[];for(var k=n.length,r=0;r<k;r++){var u=n[r];if(d){var v=Math.round((u-a)/(d*h));for(v=l(a,d*v,g);v>u;)v=l(v,-d,g);for(;v<=u;)v=l(v,d,g);u=l(v,-d,g)}else{v=Math.round((u-a)/
c);for(v=a+v*c;v>u;)v-=c;for(;v<=u;)v+=c;u=v-c}e[r]=f?u:p?v:(u+v)/2}return e}},{"../../constants/numerical":753,"../../lib":778,"fast-isnumeric":241}],826:[function(b,K,G){K.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],827:[function(b,K,G){function q(z,y){function D(ha,ja){return Math.max(ha,I(ja))}var A,t,B=[],F=z._fullLayout;B=l(F,y,0);var I=l(F,y,1);z=a(z,y);var J=z.min,L=z.max;if(0===J.length||
0===L.length)return k.simpleMap(y.range,y.r2l);z=J[0].val;var H=L[0].val;for(A=1;A<J.length&&z===H;A++)z=Math.min(z,J[A].val);for(A=1;A<L.length&&z===H;A++)H=Math.max(H,L[A].val);F=!1;y.range&&(F=k.simpleMap(y.range,y.r2l),F=F[1]<F[0]);"reversed"===y.autorange&&(F=!0,y.autorange=!0);var P=y.rangemode,M="tozero"===P,N="nonnegative"===P;P=y._length;var T=P/10,Q=0;for(A=0;A<J.length;A++){var U=J[A];for(t=0;t<L.length;t++){var S=L[t];var X=S.val-U.val-m(y,U.val,S.val);if(0<X){var Z=P-B(U)-I(S);if(Z>T){if(X/
Z>Q){var aa=U;var fa=S;Q=X/Z}}else X/P>Q&&(aa={val:U.val,nopad:1},fa={val:S.val,nopad:1},Q=X/P)}}}z===H?(U=z-1,S=z+1,M?0===z?B=[0,1]:(U=(0<z?L:J).reduce(D,0),U=z/(1-Math.min(.5,U/P)),B=0<z?[0,U]:[U,0]):B=N?[Math.max(0,U),Math.max(1,S)]:[U,S]):(M?(0<=aa.val&&(aa={val:0,nopad:1}),0>=fa.val&&(fa={val:0,nopad:1})):N&&(0>aa.val-Q*B(aa)&&(aa={val:0,nopad:1}),0>=fa.val&&(fa={val:1,nopad:1})),Q=(fa.val-aa.val-m(y,U.val,S.val))/(P-B(aa)-I(fa)),B=[aa.val-Q*B(aa),fa.val+Q*I(fa)]);F&&B.reverse();return k.simpleMap(B,
y.l2r||Number)}function m(z,y,D){var A=0;if(z.rangebreaks)for(z=z.locateBreaks(y,D),y=0;y<z.length;y++)D=z[y],A+=D.max-D.min;return A}function l(z,y,D){var A=.05*y._length,t=y._anchorAxis||{};if(-1!==(y.ticklabelposition||"").indexOf("inside")||-1!==(t.ticklabelposition||"").indexOf("inside"))t="reversed"===y.autorange,t||(t=k.simpleMap(y.range,y.r2l),t=t[1]<t[0]),t&&(D=!D);var B=0;x(z,y._id)||(B=h(y,D));A=Math.max(B,A);"domain"===y.constrain&&y._inputDomain&&(A*=(y._inputDomain[1]-y._inputDomain[0])/
(y.domain[1]-y.domain[0]));return function(F){return F.nopad?0:F.pad+(F.extrapad?A:B)}}function h(z,y){var D=0,A=z._anchorAxis||{};if(-1!==(A.ticklabelposition||"").indexOf("inside")&&(!y&&("left"===A.side||"bottom"===A.side)||y&&("top"===A.side||"right"===A.side))){var t="x"===z._id.charAt(0);if(A._vals){z=k.deg2rad(A._tickAngles[A._id+"tick"]||0);var B=Math.abs(Math.cos(z)),F=Math.abs(Math.sin(z));A._vals.forEach(function(I){if(I.bb){var J=2*C+I.bb.width;I=2*C+I.bb.height;D=Math.max(D,t?Math.max(J*
B,I*F):Math.max(I*B,J*F))}})}"inside"===A.ticks&&"inside"===A.ticklabelposition&&(D+=A.ticklen||0)}return D}function a(z,y,D){function A(M,N){for(J=0;J<N.length;J++){var T=M[N[J]],Q=(T._extremes||{})[t];if(!0===T.visible&&Q){for(L=0;L<Q.min.length;L++)P=Q.min[L],g(F,P.val,P.pad,{extrapad:P.extrapad});for(L=0;L<Q.max.length;L++)P=Q.max[L],e(I,P.val,P.pad,{extrapad:P.extrapad})}}}var t=y._id,B=z._fullLayout,F=[],I=[],J,L;A(z._fullData,y._traceIndices);A(B.annotations||[],y._annIndices||[]);A(B.shapes||
[],y._shapeIndices||[]);if(y._matchGroup&&!D)for(var H in y._matchGroup)if(H!==y._id){B=v(z,H);D=a(z,B,!0);B=y._length/B._length;for(L=0;L<D.min.length;L++){var P=D.min[L];g(F,P.val,P.pad*B,{extrapad:P.extrapad})}for(L=0;L<D.max.length;L++)P=D.max[L],e(I,P.val,P.pad*B,{extrapad:P.extrapad})}return{min:F,max:I}}function g(z,y,D,A){n(z,y,D,A,c)}function e(z,y,D,A){n(z,y,D,A,d)}function n(z,y,D,A,t){var B=A.tozero;A=A.extrapad;for(var F=!0,I=0;I<z.length&&F;I++){var J=z[I];if(t(J.val,y)&&J.pad>=D&&(J.extrapad||
!A)){F=!1;break}else t(y,J.val)&&J.pad<=D&&(A||!J.extrapad)&&(z.splice(I,1),I--)}F&&(t=B&&0===y,z.push({val:y,pad:t?0:D,extrapad:t?!1:A}))}function p(z){return f(z)&&Math.abs(z)<r}function c(z,y){return z<=y}function d(z,y){return z>=y}var f=b("fast-isnumeric"),k=b("../../lib"),r=b("../../constants/numerical").FP_SAFE,u=b("../../registry");b=b("./axis_ids");var v=b.getFromId,x=b.isLinked;K.exports={getAutoRange:q,makePadFn:l,doAutoRange:function(z,y,D){y.setScale();if(y.autorange){y.range=D?D.slice():
q(z,y);y._r=y.range.slice();y._rl=k.simpleMap(y._r,y.r2l);D=y._input;var A={};A[y._attr+".range"]=y.range;A[y._attr+".autorange"]=y.autorange;u.call("_storeDirectGUIEdit",z.layout,z._fullLayout._preGUI,A);D.range=y.range.slice();D.autorange=y.autorange}(D=y._anchorAxis)&&D.rangeslider&&((A=D.rangeslider[y._name])&&"auto"===A.rangemode&&(A.range=q(z,y)),D._input.rangeslider[y._name]=k.extendFlat({},A))},findExtremes:function(z,y,D){function A(ka){if(Array.isArray(ka))return P=!0,function(na){return Math.max(Number(ka[na]||
0),0)};var oa=Math.max(Number(ka||0),0);return function(){return oa}}function t(ka){T=y[ka];f(T)&&(S=Z(ka),X=aa(ka),M?(Q=z.c2l(T)-ha(ka),U=z.c2l(T)+fa(ka)):(ja=T-ha(ka),ba=T+fa(ka),H&&ja<ba/10&&(ja=ba/10),Q=z.c2l(ja),U=z.c2l(ba)),L&&(Q=Math.min(0,Q),U=Math.max(0,U)),p(Q)&&g(B,Q,X,qa),p(U)&&e(F,U,S,qa))}D||(D={});z._m||z.setScale();var B=[],F=[],I=y.length,J=D.padded||!1,L=D.tozero&&("linear"===z.type||"-"===z.type),H="log"===z.type,P=!1,M=D.vpadLinearized||!1,N,T,Q,U,S,X,Z=A((0<z._m?D.ppadplus:D.ppadminus)||
D.ppad||0),aa=A((0<z._m?D.ppadminus:D.ppadplus)||D.ppad||0),fa=A(D.vpadplus||D.vpad),ha=A(D.vpadminus||D.vpad);if(!P){var ja=Infinity;var ba=-Infinity;if(H)for(N=0;N<I;N++){var ma=y[N];ma<ja&&0<ma&&(ja=ma);ma>ba&&ma<r&&(ba=ma)}else for(N=0;N<I;N++)ma=y[N],ma<ja&&ma>-r&&(ja=ma),ma>ba&&ma<r&&(ba=ma);y=[ja,ba];I=2}var qa={tozero:L,extrapad:J};J=Math.min(6,I);for(N=0;N<J;N++)t(N);for(N=I-1;N>=J;N--)t(N);return{min:B,max:F,opts:D}},concatExtremes:a};var C=3},{"../../constants/numerical":753,"../../lib":778,
"../../registry":911,"./axis_ids":831,"fast-isnumeric":241}],828:[function(b,K,G){function q(za){var Da=1E-4*(za[1]-za[0]);return[za[0]-Da,za[1]+Da]}function m(za){return+za}function l(za){return String(za)}function h(za,Da,Ja,Ta,Xa){function kb(xc){return 2>(1+100*(xc-za)/Ja.dtick)%100}for(var rb=0,Mb=0,Fb=0,Lb=0,Vb=0;Vb<Da.length;Vb++)0===Da[Vb]%1?Fb++:M(Da[Vb])||Lb++,kb(Da[Vb])&&rb++,kb(Da[Vb]+Ja.dtick/2)&&Mb++;Da=Da.length-Lb;Fb===Da&&"date"!==Ja.type?1>Ja.dtick?za=Ta-.5*Ja.dtick:(za-=.5,za+Ja.dtick<
Ta&&(za+=Ja.dtick)):Mb<.1*Da&&(rb>.3*Da||kb(Ta)||kb(Xa))&&(Xa=Ja.dtick/2,za+=za+Xa<Ta?Xa:-Xa);return za}function a(za){var Da=za.tickvals,Ja=za.ticktext,Ta=Array(Da.length),Xa=Q.simpleMap(za.range,za.r2l),kb=q(Xa);Xa=Math.min(kb[0],kb[1]);kb=Math.max(kb[0],kb[1]);var rb=0;Array.isArray(Ja)||(Ja=[]);var Mb="category"===za.type?za.d2l_noadd:za.d2l;"log"===za.type&&"L"!==String(za.dtick).charAt(0)&&(za.dtick="L"+Math.pow(10,Math.floor(Math.min(za.range[0],za.range[1]))-1));for(var Fb=0;Fb<Da.length;Fb++){var Lb=
Mb(Da[Fb]);Lb>Xa&&Lb<kb&&(Ta[rb]=void 0===Ja[Fb]?va.tickText(za,Lb):n(za,Lb,String(Ja[Fb])),rb++)}rb<Da.length&&Ta.splice(rb,Da.length-rb);za.rangebreaks&&(Ta=Ta.filter(function(Vb){return za.maskBreaks(Vb.x)!==lb}));return Ta}function g(za,Da,Ja){return Da*Q.roundUp(za/Da,Ja)}function e(za){var Da=za.dtick;za._tickexponent=0;M(Da)||"string"===typeof Da||(Da=1);if("category"===za.type||"multicategory"===za.type)za._tickround=null;if("date"===za.type){var Ja=za.r2l(za.tick0),Ta=za.l2r(Ja).replace(/(^-|i)/g,
""),Xa=Ta.length;"M"===String(Da).charAt(0)?10<Xa||"01-01"!==Ta.substr(5)?za._tickround="d":za._tickround=0===+Da.substr(1)%12?"y":"m":Da>=ta&&10>=Xa||Da>=15*ta?za._tickround="d":Da>=Sa&&16>=Xa||Da>=Ka?za._tickround="M":Da>=db&&19>=Xa||Da>=Sa?za._tickround="S":(Da=za.l2r(Ja+Da).replace(/^-/,"").length,za._tickround=Math.max(Xa,Da)-20,0>za._tickround&&(za._tickround=4))}else M(Da)||"L"===Da.charAt(0)?(Xa=za.range.map(za.r2d||Number),M(Da)||(Da=Number(Da.substr(1))),za._tickround=2-Math.floor(Math.log(Da)/
Math.LN10+.01),Da=Math.floor(Math.log(Math.max(Math.abs(Xa[0]),Math.abs(Xa[1])))/Math.LN10+.01),Math.abs(Da)>(void 0===za.minexponent?3:za.minexponent)&&(!v(za.exponentformat)||14<Da||-15>Da?za._tickexponent=Da:za._tickexponent=3*Math.round((Da-1)/3))):za._tickround=null}function n(za,Da,Ja){za=za.tickfont||{};return{x:Da,dx:0,dy:0,text:Ja||"",fontSize:za.size,font:za.family,fontColor:za.color}}function p(za,Da,Ja,Ta){var Xa=za._tickround,kb=Ja&&za.hoverformat||va.getTickFormat(za);Ta&&(Xa=M(Xa)?
4:{y:"m",m:"d",d:"M",M:"S",S:4}[Xa]);kb=Q.formatDate(Da.x,kb,Xa,za._dateFormat,za.calendar,za._extraFormat);var rb=kb.indexOf("\n");if(-1!==rb){var Mb=kb.substr(rb+1);kb=kb.substr(0,rb)}Ta&&("00:00:00"===kb||"00:00"===kb?(kb=Mb,Mb=""):8===kb.length&&(kb=kb.replace(/:00$/,"")));if(Mb)if(Ja)kb="d"===Xa?kb+(", "+Mb):Mb+(kb?", "+kb:"");else if(za._inCalcTicks&&za._prevDateHead===Mb){if(Ja=-1!==(za.ticklabelposition||"").indexOf("inside"),za=za._realSide||za.side,!Ja&&"top"===za||Ja&&"bottom"===za)kb+=
"<br> "}else za._prevDateHead=Mb,kb+="<br>"+Mb;Da.text=kb}function c(za,Da,Ja,Ta,Xa){var kb=za.dtick;Ja=Da.x;var rb=za.tickformat,Mb="string"===typeof kb&&kb.charAt(0);"never"===Xa&&(Xa="");Ta&&"L"!==Mb&&(kb="L3",Mb="L");if(rb||"L"===Mb)Da.text=x(Math.pow(10,Ja),za,Xa,Ta);else if(M(kb)||"D"===Mb&&.1>Q.mod(Ja+.01,1))Ta=Math.round(Ja),Xa=Math.abs(Ta),rb=za.exponentformat,"power"===rb||v(rb)&&(14<Ta||-15>Ta)?(Da.text=0===Ta?1:1===Ta?"10":"10<sup>"+(1<Ta?"":eb)+Xa+"</sup>",Da.fontSize*=1.25):("e"===rb||
"E"===rb)&&2<Xa?Da.text="1"+rb+(0<Ta?"+":eb)+Xa:(Da.text=x(Math.pow(10,Ja),za,"","fakehover"),"D1"===kb&&"y"===za._id.charAt(0)&&(Da.dy-=Da.fontSize/6));else if("D"===Mb)Da.text=String(Math.round(Math.pow(10,Q.mod(Ja,1)))),Da.fontSize*=.75;else throw"unrecognized dtick "+String(kb);"D1"===za.dtick&&(kb=String(Da.text).charAt(0),"0"===kb||"1"===kb)&&("y"===za._id.charAt(0)?Da.dx-=Da.fontSize/4:(Da.dy+=Da.fontSize/2,Da.dx+=(za.range[1]>za.range[0]?1:-1)*Da.fontSize*(0>Ja?.5:.25)))}function d(za,Da){za=
za._categories[Math.round(Da.x)];void 0===za&&(za="");Da.text=String(za)}function f(za,Da,Ja){var Ta=za._categories[Math.round(Da.x)]||[];za=void 0===Ta[1]?"":String(Ta[1]);Ta=void 0===Ta[0]?"":String(Ta[0]);Ja?Da.text=Ta+" - "+za:(Da.text=za,Da.text2=Ta)}function k(za,Da,Ja,Ta,Xa){"never"===Xa?Xa="":"all"===za.showexponent&&1E-6>Math.abs(Da.x/za.dtick)&&(Xa="hide");Da.text=x(Da.x,za,Xa,Ta)}function r(za,Da,Ja,Ta,Xa){"radians"!==za.thetaunit||Ja?Da.text=x(Da.x,za,Xa,Ta):(Ja=Da.x/180,0===Ja?Da.text=
"0":(Ja=u(Ja),100<=Ja[1]?Da.text=x(Q.deg2rad(Da.x),za,Xa,Ta):(za=0>Da.x,Da.text=1===Ja[1]?1===Ja[0]?"\u03c0":Ja[0]+"\u03c0":["<sup>",Ja[0],"</sup>\u2044<sub>",Ja[1],"</sub>\u03c0"].join(""),za&&(Da.text=eb+Da.text))))}function u(za){function Da(Xa,kb){return 1E-6>=Math.abs(kb-0)?Xa:Da(kb,Xa%kb)}var Ja=function(Xa){for(var kb=1;!(1E-6>=Math.abs(Math.round(Xa*kb)/kb-Xa));)kb*=10;return kb}(za);za*=Ja;var Ta=Math.abs(Da(za,Ja));return[Math.round(za/Ta),Math.round(Ja/Ta)]}function v(za){return"SI"===
za||"B"===za}function x(za,Da,Ja,Ta){var Xa=0>za,kb=Da._tickround;Ja=Ja||Da.exponentformat||"B";var rb=Da._tickexponent,Mb=va.getTickFormat(Da),Fb=Da.separatethousands;Ta&&(rb={exponentformat:Ja,minexponent:Da.minexponent,dtick:"none"===Da.showexponent?Da.dtick:M(za)?Math.abs(za)||1:1,range:"none"===Da.showexponent?Da.range.map(Da.r2d):[0,za||1]},e(rb),kb=(Number(rb._tickround)||0)+4,rb=rb._tickexponent,Da.hoverformat&&(Mb=Da.hoverformat));if(Mb)return Da._numFormat(Mb)(za).replace(/-/g,eb);Ta=Math.pow(10,
-kb)/2;"none"===Ja&&(rb=0);za=Math.abs(za);if(za<Ta)za="0",Xa=!1;else{za+=Ta;rb&&(za*=Math.pow(10,-rb),kb+=rb);if(0===kb)za=String(Math.floor(za));else if(0>kb)for(za=String(Math.round(za)),za=za.substr(0,za.length+kb);0>kb;kb++)za+="0";else za=String(za),(Ta=za.indexOf(".")+1)&&(za=za.substr(0,Ta+kb).replace(/\.?0+$/,""));za=Q.numSeparate(za,Da._separators,Fb)}rb&&"hide"!==Ja&&(v(Ja)&&(14<rb||-15>rb)&&(Ja="power"),Da=0>rb?eb+-rb:"power"!==Ja?"+"+rb:String(rb),"e"===Ja||"E"===Ja?za+=Ja+Da:"power"===
Ja?za+="\u00d710<sup>"+Da+"</sup>":"B"===Ja&&9===rb?za+="B":v(Ja)&&(za+=ub[rb/3+5]));return Xa?eb+za:za}function C(za,Da){var Ja=[],Ta=function(Xa,kb){kb=Xa.xbnd[kb];null!==kb&&Ja.push(Q.extendFlat({},Xa,{x:kb}))};if(Da.length){for(za=0;za<Da.length;za++)Ta(Da[za],0);Ta(Da[za-1],1)}return Ja}function z(za,Da){var Ja=[],Ta=Da.length&&Da[Da.length-1].x<Da[0].x,Xa=function(Mb,Fb){Fb=Mb.xbnd[Fb];null!==Fb&&Ja.push(Q.extendFlat({},Mb,{x:Fb}))};if(za.showdividers&&Da.length){for(za=0;za<Da.length;za++){var kb=
Da[za];kb.text2!==rb&&Xa(kb,Ta?1:0);var rb=kb.text2}Xa(Da[za-1],Ta?0:1)}return Ja}function y(za,Da){if(za._selections[Da].size()){var Ja=Infinity;var Ta=-Infinity;var Xa=Infinity;var kb=-Infinity;za._selections[Da].each(function(){var rb=I(this);rb=aa.bBox(rb.node().parentNode);Ja=Math.min(Ja,rb.top);Ta=Math.max(Ta,rb.bottom);Xa=Math.min(Xa,rb.left);kb=Math.max(kb,rb.right)})}else kb=Xa=Ta=Ja=0;return{top:Ja,bottom:Ta,left:Xa,right:kb,height:Ta-Ja,width:kb-Xa}}function D(za){var Da=za.ticklabelposition||
"",Ja=-1!==Da.indexOf("top"),Ta=-1!==Da.indexOf("left"),Xa=-1!==Da.indexOf("right"),kb=-1!==Da.indexOf("bottom");Da=-1!==Da.indexOf("inside");var rb=kb||Ta||Ja||Xa;if(!rb&&!Da)return[0,0];var Mb=za.side,Fb=rb?(za.tickwidth||0)/2:0,Lb=3,Vb=za.tickfont?za.tickfont.size:12;if(kb||Ja)Fb+=Vb*Ya,Lb+=(za.linewidth||0)/2;if(Ta||Xa)Fb+=(za.linewidth||0)/2,Lb+=3;Da&&"top"===Mb&&(Lb-=Vb*(1-Ya));if(Ta||Ja)Fb=-Fb;if("bottom"===Mb||"right"===Mb)Lb=-Lb;return[rb?Fb:0,Da?Lb:0]}function A(za){return[za.text,za.x,
za.axInfo,za.font,za.fontSize,za.fontColor].join("_")}function t(za){var Da=za.title.font.size,Ja=(za.title.text.match(S.BR_TAG_ALL)||[]).length;return za.title.hasOwnProperty("standoff")?Ja?Da*(Ya+Ja*hb):Da*Ya:Ja?Da*(Ja+1)*hb:Da}function B(za,Da){Da=za.l2p(Da);return 1<Da&&Da<za._length-1}function F(za,Da,Ja,Ta){function Xa(Vb){function xc(Wc){return"number"===typeof Wc&&Math.abs(Wc-Lb)<Gc}if(!Vb.showline||!Vb.linewidth)return!1;var Gc=Math.max((Vb.linewidth+Da.zerolinewidth)/2,1);if(xc(Vb._mainLinePosition)||
xc(Vb._mainMirrorPosition))return!0;Vb=Vb._linepositions||{};for(var Hc in Vb)if(xc(Vb[Hc][0])||xc(Vb[Hc][1]))return!0}var kb=Ja._mainAxis;if(kb){var rb=za._fullLayout,Mb=Da._id.charAt(0),Fb=va.counterLetter(Da._id),Lb=Da._offset+(Math.abs(Ta[0])<Math.abs(Ta[1])===("x"===Mb)?0:Da._length);Ta=rb._plots[Ja._mainSubplot];if(!(Ta.mainplotinfo||Ta).overlays.length)return Xa(Ja,Lb);za=va.list(za,Fb);for(Ja=0;Ja<za.length;Ja++)if(Fb=za[Ja],Fb._mainAxis===kb&&Xa(Fb,Lb))return!0}}function I(za){za=P.select(za);
var Da=za.select(".text-math-group");return Da.empty()?za.select("text"):Da}function J(za){return za._id+".automargin"}function L(za,Da){for(var Ja=0;Ja<Da.length;Ja++)-1===za.indexOf(Da[Ja])&&za.push(Da[Ja])}function H(za,Da){for(var Ja=Da._rangebreaks.length,Ta=0;Ta<Ja;Ta++){var Xa=Da._rangebreaks[Ta];if(za>=Xa.min&&za<Xa.max)return Xa.max}return za}var P=b("d3"),M=b("fast-isnumeric"),N=b("../../plots/plots"),T=b("../../registry"),Q=b("../../lib"),U=Q.strTranslate,S=b("../../lib/svg_text_utils"),
X=b("../../components/titles"),Z=b("../../components/color"),aa=b("../../components/drawing"),fa=b("./layout_attributes"),ha=b("./clean_ticks");G=b("../../constants/numerical");var ja=G.ONEMAXYEAR,ba=G.ONEAVGYEAR,ma=G.ONEMINYEAR,qa=G.ONEMAXQUARTER,ka=G.ONEAVGQUARTER,oa=G.ONEMINQUARTER,na=G.ONEMAXMONTH,la=G.ONEAVGMONTH,ia=G.ONEMINMONTH,sa=G.ONEWEEK,ta=G.ONEDAY,Aa=ta/2,Ka=G.ONEHOUR,Sa=G.ONEMIN,db=G.ONESEC,eb=G.MINUS_SIGN,lb=G.BADNUM;G=b("../../constants/alignment");var ab=G.MID_SHIFT,Ya=G.CAP_SHIFT,
hb=G.LINE_SPACING,nb=G.OPPOSITE_SIDE,va=K.exports={};va.setConvert=b("./set_convert");var Ba=b("./axis_autotype");K=b("./axis_ids");var Ga=K.idSort,Na=K.isLinked;va.id2name=K.id2name;va.name2id=K.name2id;va.cleanId=K.cleanId;va.list=K.list;va.listIds=K.listIds;va.getFromId=K.getFromId;va.getFromTrace=K.getFromTrace;b=b("./autorange");va.getAutoRange=b.getAutoRange;va.findExtremes=b.findExtremes;va.coerceRef=function(za,Da,Ja,Ta,Xa,kb){var rb=Ta.charAt(Ta.length-1);Ja=Ja._fullLayout._subplots[rb+"axis"];
Ta+="ref";rb={};Xa||(Xa=Ja[0]||("string"===typeof kb?kb:kb[0]));kb||(kb=Xa);Ja=Ja.concat(Ja.map(function(Mb){return Mb+" domain"}));rb[Ta]={valType:"enumerated",values:Ja.concat(kb?"string"===typeof kb?[kb]:kb:[]),dflt:Xa};return Q.coerce(za,Da,rb,Ta)};va.getRefType=function(za){return void 0===za?za:"paper"===za?"paper":"pixel"===za?"pixel":/( domain)$/.test(za)?"domain":"range"};va.coercePosition=function(za,Da,Ja,Ta,Xa,kb){"range"!==va.getRefType(Ta)?(Da=Q.ensureNumber,Ja=Ja(Xa,kb)):(Da=va.getFromId(Da,
Ta),kb=Da.fraction2r(kb),Ja=Ja(Xa,kb),Da=Da.cleanPos);za[Xa]=Da(Ja)};va.cleanPosition=function(za,Da,Ja){return("paper"===Ja||"pixel"===Ja?Q.ensureNumber:va.getFromId(Da,Ja).cleanPos)(za)};va.redrawComponents=function(za,Da){function Ja(Xa,kb,rb,Mb){Xa=T.getComponentMethod(Xa,kb);kb={};for(var Fb=0;Fb<Da.length;Fb++)for(var Lb=Ta[va.id2name(Da[Fb])][rb],Vb=0;Vb<Lb.length;Vb++){var xc=Lb[Vb];if(!kb[xc]&&(Xa(za,xc),kb[xc]=1,Mb))return}}Da=Da?Da:va.listIds(za);var Ta=za._fullLayout;Ja("annotations",
"drawOne","_annIndices");Ja("shapes","drawOne","_shapeIndices");Ja("images","draw","_imgIndices",!0)};var $a=va.getDataConversions=function(za,Da,Ja,Ta){Ja="x"===Ja||"y"===Ja||"z"===Ja?Ja:Ta;if(Array.isArray(Ja)){if(za={type:Ba(Ta,void 0,{autotypenumbers:za._fullLayout.autotypenumbers}),_categories:[]},va.setConvert(za),"category"===za.type)for(Da=0;Da<Ta.length;Da++)za.d2c(Ta[Da])}else za=va.getFromTrace(za,Da,Ja);return za?{d2c:za.d2c,c2d:za.c2d}:"ids"===Ja?{d2c:l,c2d:l}:{d2c:m,c2d:m}};va.getDataToCoordFunc=
function(za,Da,Ja,Ta){return $a(za,Da,Ja,Ta).d2c};va.counterLetter=function(za){za=za.charAt(0);if("x"===za)return"y";if("y"===za)return"x"};va.minDtick=function(za,Da,Ja,Ta){if(-1!==["log","category","multicategory"].indexOf(za.type)||!Ta)za._minDtick=0;else if(void 0===za._minDtick)za._minDtick=Da,za._forceTick0=Ja;else if(za._minDtick)if(2E-6>(za._minDtick/Da+1E-6)%1&&2E-6>((Ja-za._forceTick0)/Da%1+1.000001)%1)za._minDtick=Da,za._forceTick0=Ja;else if(2E-6<(Da/za._minDtick+1E-6)%1||2E-6<((Ja-za._forceTick0)/
za._minDtick%1+1.000001)%1)za._minDtick=0};va.saveRangeInitial=function(za,Da){za=va.list(za,"",!0);for(var Ja=!1,Ta=0;Ta<za.length;Ta++){var Xa=za[Ta],kb=void 0===Xa._rangeInitial,rb=kb||!(Xa.range[0]===Xa._rangeInitial[0]&&Xa.range[1]===Xa._rangeInitial[1]);if(kb&&!1===Xa.autorange||Da&&rb)Xa._rangeInitial=Xa.range.slice(),Ja=!0}return Ja};va.saveShowSpikeInitial=function(za,Da){for(var Ja=va.list(za,"",!0),Ta=!1,Xa="on",kb=0;kb<Ja.length;kb++){var rb=Ja[kb],Mb=void 0===rb._showSpikeInitial,Fb=
Mb||rb.showspikes!==rb._showspikes;if(Mb||Da&&Fb)rb._showSpikeInitial=rb.showspikes,Ta=!0;"on"!==Xa||rb.showspikes||(Xa="off")}za._fullLayout._cartesianSpikesEnabled=Xa;return Ta};va.autoBin=function(za,Da,Ja,Ta,Xa,kb){var rb=Q.aggNums(Math.min,null,za),Mb=Q.aggNums(Math.max,null,za);if("category"===Da.type||"multicategory"===Da.type)return{start:rb-.5,end:Mb+.5,size:Math.max(1,Math.round(kb)||1),_dataSpan:Mb-rb};Xa||(Xa=Da.calendar);var Fb="log"===Da.type?{type:"linear",range:[rb,Mb]}:{type:Da.type,
range:Q.simpleMap([rb,Mb],Da.c2r,0,Xa),calendar:Xa};va.setConvert(Fb);(kb=kb&&ha.dtick(kb,Fb.type))?(Fb.dtick=kb,Fb.tick0=ha.tick0(void 0,Fb.type,Xa)):(Ja?Ta=(Mb-rb)/Ja:(Ja=Q.distinctVals(za),kb=Math.pow(10,Math.floor(Math.log(Ja.minDiff)/Math.LN10)),Ja=kb*Q.roundUp(Ja.minDiff/kb,[.9,1.9,4.9,9.9],!0),Ta=Math.max(Ja,2*Q.stdev(za)/Math.pow(za.length,Ta?.25:.4)),M(Ta)||(Ta=1)),va.autoTicks(Fb,Ta));Ta=Fb.dtick;Ja=va.tickIncrement(va.tickFirst(Fb),Ta,"reverse",Xa);if("number"===typeof Ta)Ja=h(Ja,za,Fb,
rb,Mb),Fb=1+Math.floor((Mb-Ja)/Ta),za=Ja+Fb*Ta;else{if("M"===Fb.dtick.charAt(0))a:{Fb=Ja;za=Q.findExactDates(za,Xa);if(.8<za.exactDays&&(Ja=Number(Ta.substr(1)),Fb=.8<za.exactYears&&0===Ja%12?va.tickIncrement(Fb,"M6","reverse")+1.5*ta:.8<za.exactMonths?va.tickIncrement(Fb,"M1","reverse")+15.5*ta:Fb-Aa,za=va.tickIncrement(Fb,Ta),za<=rb)){Ja=za;break a}Ja=Fb}za=Ja;for(Fb=0;za<=Mb;)za=va.tickIncrement(za,Ta,!1,Xa),Fb++}return{start:Da.c2r(Ja,0,Xa),end:Da.c2r(za,0,Xa),size:Ta,_dataSpan:Mb-rb}};va.prepTicks=
function(za,Da){Da=Q.simpleMap(za.range,za.r2l,void 0,void 0,Da);za._dtickInit=za.dtick;za._tick0Init=za.tick0;if("auto"===za.tickmode||!za.dtick){var Ja=za.nticks;Ja||("category"===za.type||"multicategory"===za.type?(Ja=za.tickfont?1.2*(za.tickfont.size||12):15,Ja=za._length/Ja):(Ja="y"===za._id.charAt(0)?40:80,Ja=Q.constrain(za._length/Ja,4,9)+1),"radialaxis"===za._name&&(Ja*=2));"array"===za.tickmode&&(Ja*=100);za._roughDTick=Math.abs(Da[1]-Da[0])/Ja;va.autoTicks(za,za._roughDTick);0<za._minDtick&&
za.dtick<2*za._minDtick&&(za.dtick=za._minDtick,za.tick0=za.l2r(za._forceTick0))}if("period"===za.ticklabelmode){Da=!(M(za.dtick)||"M"!==za.dtick.charAt(0));if(Ja=va.getTickFormat(za)){var Ta=za._dtickInit!==za.dtick;if(!/%[fLQsSMX]/.test(Ja))if(/%[HI]/.test(Ja)){var Xa=Ka;Ta&&!Da&&za.dtick<Ka&&(za.dtick=Ka)}else/%p/.test(Ja)?(Xa=Aa,Ta&&!Da&&za.dtick<Aa&&(za.dtick=Aa)):/%[Aadejuwx]/.test(Ja)?(Xa=ta,Ta&&!Da&&za.dtick<ta&&(za.dtick=ta)):/%[UVW]/.test(Ja)?(Xa=sa,Ta&&!Da&&za.dtick<sa&&(za.dtick=sa)):
/%[Bbm]/.test(Ja)?(Xa=la,Ta&&(Da?1>+za.dtick.substring(1):za.dtick<ia)&&(za.dtick="M1")):/%[q]/.test(Ja)?(Xa=ka,Ta&&(Da?3>+za.dtick.substring(1):za.dtick<oa)&&(za.dtick="M3")):/%[Yy]/.test(Ja)&&(Xa=ba,Ta&&(Da?12>+za.dtick.substring(1):za.dtick<ma)&&(za.dtick="M12"))}(Da=!(M(za.dtick)||"M"!==za.dtick.charAt(0)))&&za.tick0===za._dowTick0&&(za.tick0=za._rawTick0);za._definedDelta=Xa}za.tick0||(za.tick0="date"===za.type?"2000-01-01":0);"date"===za.type&&.1>za.dtick&&(za.dtick=.1);e(za)};va.calcTicks=
function(za,Da){va.prepTicks(za,Da);var Ja=Q.simpleMap(za.range,za.r2l,void 0,void 0,Da);if("array"===za.tickmode)return a(za);var Ta=q(Ja),Xa=Ta[0],kb=Ta[1],rb=Ja[1]<Ja[0];Ta=Math.min(Ja[0],Ja[1]);var Mb=Math.max(Ja[0],Ja[1]),Fb="log"===za.type&&!(M(za.dtick)||"L"===za.dtick.charAt(0)),Lb="period"===za.ticklabelmode;za._tmin=va.tickFirst(za,Da);if(za._tmin<Xa!==rb)return[];if("category"===za.type||"multicategory"===za.type)kb=rb?Math.max(-.5,kb):Math.min(za._categories.length-.5,kb);var Vb=za._tmin;
za.rangebreaks&&za._tick0Init!==za.tick0&&(Vb=H(Vb,za),rb||(Vb=va.tickIncrement(Vb,za.dtick,!rb,za.calendar)));Lb&&(Vb=va.tickIncrement(Vb,za.dtick,!rb,za.calendar));var xc=Math.max(1E3,za._length||0);Da=[];for(var Gc=null;rb?Vb>=kb:Vb<=kb;Vb=va.tickIncrement(Vb,za.dtick,rb,za.calendar)){if(za.rangebreaks&&!rb){if(Vb<Xa)continue;if(za.maskBreaks(Vb)===lb&&H(Vb,za)>=Mb)break}if(Da.length>xc||Vb===Gc)break;Gc=Vb;var Hc=!1;Fb&&Vb!==(Vb|0)&&(Hc=!0);Da.push({minor:Hc,value:Vb})}if(Lb)for(Xa=za._definedDelta,
kb=0;kb<Da.length;kb++){Fb=Da[kb].value;kb<Da.length-1?(Lb=kb,Vb=kb+1):(Lb=0<kb?kb-1:kb,Vb=kb);Lb=Math.abs(Da[Vb].value-Da[Lb].value);xc=Xa||Lb;Vb=0;xc>=ma?Vb=Lb>=ma&&Lb<=ja?Lb:ba:Xa===ka&&xc>=oa?Vb=Lb>=oa&&Lb<=qa?Lb:ka:xc>=ia?Vb=Lb>=ia&&Lb<=na?Lb:la:Xa===sa&&xc>=sa?Vb=sa:xc>=ta?Vb=ta:Xa===Aa&&xc>=Aa?Vb=Aa:Xa===Ka&&xc>=Ka&&(Vb=Ka);if(Vb>=Lb){Vb=Lb;var Wc=!0}xc=Fb+Vb;if(za.rangebreaks&&0<Vb){for(Hc=Gc=0;84>Hc;Hc++){var ib=(Hc+.5)/84;za.maskBreaks(Fb*(1-ib)+ib*xc)!==lb&&Gc++}Vb*=Gc/84;Vb||(Da[kb].drop=
!0);Wc&&Lb>sa&&(Vb=Lb)}if(0<Vb||0===kb)Da[kb].periodX=Fb+Vb/2}if(za.rangebreaks)for(Xa="y"===za._id.charAt(0),kb=1,"auto"===za.tickmode&&(kb=za.tickfont?za.tickfont.size:12),Fb=NaN,Wc=Da.length-1;-1<Wc;Wc--)Da[Wc].drop?Da.splice(Wc,1):(Da[Wc].value=H(Da[Wc].value,za),Lb=za.c2p(Da[Wc].value),(Xa?Fb>Lb-kb:Fb<Lb+kb)?Da.splice(rb?Wc+1:Wc,1):Fb=Lb);"angularaxis"===za._id&&360===Math.abs(Ja[1]-Ja[0])&&Da.pop();za._tmax=(Da[Da.length-1]||{}).value;za._prevDateHead="";za._inCalcTicks=!0;Ja=[];for(Wc=0;Wc<
Da.length;Wc++)rb=va.tickText(za,Da[Wc].value,!1,Da[Wc].minor),Xa=Da[Wc].periodX,void 0!==Xa&&(rb.periodX=Xa,Xa>Mb||Xa<Ta)&&(Xa>Mb&&(rb.periodX=Mb),Xa<Ta&&(rb.periodX=Ta),rb.text=" ",za._prevDateHead=""),Ja.push(rb);za._inCalcTicks=!1;return Ja};var Va=[2,5,10],qb=[1,2,3,6,12],Ha=[1,2,5,10,15,30],Ra=[1,2,3,7,14],La=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],gb=[-.301,0,.301,.699,1],ob=[15,30,45,90,180];va.autoTicks=function(za,Da){function Ja(kb){return Math.pow(kb,Math.floor(Math.log(Da)/
Math.LN10))}if("date"===za.type){za.tick0=Q.dateTick0(za.calendar,0);var Ta=2*Da;if(Ta>ba)Da/=ba,Ta=Ja(10),za.dtick="M"+12*g(Da,Ta,Va);else if(Ta>la)Da/=la,za.dtick="M"+g(Da,1,qb);else if(Ta>ta){za.dtick=g(Da,ta,za._hasDayOfWeekBreaks?[1,2,7,14]:Ra);Ta=va.getTickFormat(za);var Xa="period"===za.ticklabelmode;Xa&&(za._rawTick0=za.tick0);/%[uVW]/.test(Ta)?za.tick0=Q.dateTick0(za.calendar,2):za.tick0=Q.dateTick0(za.calendar,1);Xa&&(za._dowTick0=za.tick0)}else Ta>Ka?za.dtick=g(Da,Ka,qb):Ta>Sa?za.dtick=
g(Da,Sa,Ha):Ta>db?za.dtick=g(Da,db,Ha):(Ta=Ja(10),za.dtick=g(Da,Ta,Va))}else"log"===za.type?(za.tick0=0,Ta=Q.simpleMap(za.range,za.r2l),.7<Da?za.dtick=Math.ceil(Da):1>Math.abs(Ta[1]-Ta[0])?(Da=Math.abs(Math.pow(10,Ta[1])-Math.pow(10,Ta[0]))/(1.5*Math.abs((Ta[1]-Ta[0])/Da)),Ta=Ja(10),za.dtick="L"+g(Da,Ta,Va)):za.dtick=.3<Da?"D2":"D1"):"category"===za.type||"multicategory"===za.type?(za.tick0=0,za.dtick=Math.ceil(Math.max(Da,1))):"angularaxis"===za._id?(za.tick0=0,za.dtick=g(Da,1,ob)):(za.tick0=0,Ta=
Ja(10),za.dtick=g(Da,Ta,Va));0===za.dtick&&(za.dtick=1);if(!M(za.dtick)&&"string"!==typeof za.dtick)throw Ta=za.dtick,za.dtick=1,"ax.dtick error: "+String(Ta);};va.tickIncrement=function(za,Da,Ja,Ta){var Xa=Ja?-1:1;if(M(Da))return Q.increment(za,Xa*Da);var kb=Da.charAt(0),rb=Xa*Number(Da.substr(1));if("M"===kb)return Q.incrementMonth(za,rb,Ta);if("L"===kb)return Math.log(Math.pow(10,za)+rb)/Math.LN10;if("D"===kb)return Da="D2"===Da?gb:La,za+=.01*Xa,Ja=Q.roundUp(Q.mod(za,1),Da,Ja),Math.floor(za)+Math.log(P.round(Math.pow(10,
Ja),1))/Math.LN10;throw"unrecognized dtick "+String(Da);};va.tickFirst=function(za,Da){var Ja=za.r2l||Number,Ta=Q.simpleMap(za.range,Ja,void 0,void 0,Da),Xa=(Da=Ta[1]<Ta[0])?Math.floor:Math.ceil;Ta=q(Ta)[0];var kb=za.dtick,rb=Ja(za.tick0);if(M(kb)){Da=Xa((Ta-rb)/kb)*kb+rb;if("category"===za.type||"multicategory"===za.type)Da=Q.constrain(Da,0,za._categories.length-1);return Da}Ja=kb.charAt(0);var Mb=Number(kb.substr(1));if("M"===Ja){Xa=0;for(var Fb,Lb;10>Xa;){Fb=va.tickIncrement(rb,kb,Da,za.calendar);
if(0>=(Fb-Ta)*(rb-Ta))return Da?Math.min(rb,Fb):Math.max(rb,Fb);Fb=(Ta-(rb+Fb)/2)/(Fb-rb);Lb=Ja+(Math.abs(Math.round(Fb))||1)*Mb;rb=va.tickIncrement(rb,Lb,0>Fb?!Da:Da,za.calendar);Xa++}Q.error("tickFirst did not converge",za);return rb}if("L"===Ja)return Math.log(Xa((Math.pow(10,Ta)-rb)/Mb)*Mb+rb)/Math.LN10;if("D"===Ja)return za="D2"===kb?gb:La,za=Q.roundUp(Q.mod(Ta,1),za,Da),Math.floor(Ta)+Math.log(P.round(Math.pow(10,za),1))/Math.LN10;throw"unrecognized dtick "+String(kb);};va.tickText=function(za,
Da,Ja,Ta){function Xa(xc){if(void 0===xc)return!0;if(Ja)return"none"===xc;var Gc={first:za._tmin,last:za._tmax}[xc];return"all"!==xc&&Da!==Gc}var kb=n(za,Da),rb="array"===za.tickmode,Mb=Ja||rb,Fb=za.type,Lb="category"===Fb?za.d2l_noadd:za.d2l;if(rb&&Array.isArray(za.ticktext)){rb=Q.simpleMap(za.range,za.r2l);var Vb=(Math.abs(rb[1]-rb[0])-(za._lBreaks||0))/1E4;for(rb=0;rb<za.ticktext.length&&!(Math.abs(Da-Lb(za.tickvals[rb]))<Vb);rb++);if(rb<za.ticktext.length)return kb.text=String(za.ticktext[rb]),
kb}Lb=Ja?"never":"none"!==za.exponentformat&&Xa(za.showexponent)?"hide":"";"date"===Fb?p(za,kb,Ja,Mb):"log"===Fb?c(za,kb,Ja,Mb,Lb):"category"===Fb?d(za,kb):"multicategory"===Fb?f(za,kb,Ja):"angularaxis"===za._id?r(za,kb,Ja,Mb,Lb):k(za,kb,Ja,Mb,Lb);Ta||(za.tickprefix&&!Xa(za.showtickprefix)&&(kb.text=za.tickprefix+kb.text),za.ticksuffix&&!Xa(za.showticksuffix)&&(kb.text+=za.ticksuffix));if("boundaries"===za.tickson||za.showdividers)Ta=function(xc){var Gc=za.l2p(xc);return 0<=Gc&&Gc<=za._length?xc:
null},kb.xbnd=[Ta(kb.x-.5),Ta(kb.x+za.dtick-.5)];return kb};va.hoverLabelText=function(za,Da,Ja){if(Ja!==lb&&Ja!==Da)return va.hoverLabelText(za,Da)+" - "+va.hoverLabelText(za,Ja);Ja="log"===za.type&&0>=Da;za=va.tickText(za,za.c2l(Ja?-Da:Da),"hover").text;return Ja?0===Da?"0":eb+za:za};var ub="f p n \u03bc m  k M G T".split(" ");va.getTickFormat=function(za){function Da(Fb){return"string"!==typeof Fb?Fb:Number(Fb.replace("M",""))*la}function Ja(Fb,Lb){var Vb=["L","D"];if(typeof Fb===typeof Lb){if("number"===
typeof Fb)return Fb-Lb;var xc=Vb.indexOf(Fb.charAt(0));Vb=Vb.indexOf(Lb.charAt(0));return xc===Vb?Number(Fb.replace(/(L|D)/g,""))-Number(Lb.replace(/(L|D)/g,"")):xc-Vb}return"number"===typeof Fb?1:-1}function Ta(Fb,Lb,Vb){Vb=Vb||function(Gc){return Gc};var xc=Lb[0];Lb=Lb[1];return(!xc&&"number"!==typeof xc||Vb(xc)<=Vb(Fb))&&(!Lb&&"number"!==typeof Lb||Vb(Lb)>=Vb(Fb))}function Xa(Fb,Lb){var Vb=null===Lb[0],xc=null===Lb[1],Gc=0<=Ja(Fb,Lb[0]);Fb=0>=Ja(Fb,Lb[1]);return(Vb||Gc)&&(xc||Fb)}var kb;if(za.tickformatstops&&
0<za.tickformatstops.length)switch(za.type){case "date":case "linear":for(kb=0;kb<za.tickformatstops.length;kb++){var rb=za.tickformatstops[kb];if(rb.enabled&&Ta(za.dtick,rb.dtickrange,Da)){var Mb=rb;break}}break;case "log":for(kb=0;kb<za.tickformatstops.length;kb++)if(rb=za.tickformatstops[kb],rb.enabled&&Xa(za.dtick,rb.dtickrange)){Mb=rb;break}}return Mb?Mb.value:za.tickformat};va.getSubplots=function(za,Da){za=za._fullLayout._subplots;za=za.cartesian.concat(za.gl2d||[]);Da=Da?va.findSubplotsWithAxis(za,
Da):za;Da.sort(function(Ja,Ta){Ja=Ja.substr(1).split("y");Ta=Ta.substr(1).split("y");return Ja[0]===Ta[0]?+Ja[1]-+Ta[1]:+Ja[0]-+Ta[0]});return Da};va.findSubplotsWithAxis=function(za,Da){Da=new RegExp("x"===Da._id.charAt(0)?"^"+Da._id+"y":Da._id+"$");for(var Ja=[],Ta=0;Ta<za.length;Ta++){var Xa=za[Ta];Da.test(Xa)&&Ja.push(Xa)}return Ja};va.makeClipPaths=function(za){var Da=za._fullLayout;if(!Da._hasOnlyLargeSploms){var Ja={_offset:0,_length:Da.width,_id:""},Ta={_offset:0,_length:Da.height,_id:""},
Xa=va.list(za,"x",!0);za=va.list(za,"y",!0);var kb=[],rb,Mb;for(rb=0;rb<Xa.length;rb++)for(kb.push({x:Xa[rb],y:Ta}),Mb=0;Mb<za.length;Mb++)0===rb&&kb.push({x:Ja,y:za[Mb]}),kb.push({x:Xa[rb],y:za[Mb]});Ja=Da._clips.selectAll(".axesclip").data(kb,function(Fb){return Fb.x._id+Fb.y._id});Ja.enter().append("clipPath").classed("axesclip",!0).attr("id",function(Fb){return"clip"+Da._uid+Fb.x._id+Fb.y._id}).append("rect");Ja.exit().remove();Ja.each(function(Fb){P.select(this).select("rect").attr({x:Fb.x._offset||
0,y:Fb.y._offset||0,width:Fb.x._length||1,height:Fb.y._length||1})})}};va.draw=function(za,Da,Ja){var Ta=za._fullLayout;"redraw"===Da&&Ta._paper.selectAll("g.subplot").each(function(Xa){if(Xa=Ta._plots[Xa[0]]){var kb=Xa.xaxis,rb=Xa.yaxis;Xa.xaxislayer.selectAll("."+kb._id+"tick").remove();Xa.yaxislayer.selectAll("."+rb._id+"tick").remove();Xa.xaxislayer.selectAll("."+kb._id+"tick2").remove();Xa.yaxislayer.selectAll("."+rb._id+"tick2").remove();Xa.xaxislayer.selectAll("."+kb._id+"divider").remove();
Xa.yaxislayer.selectAll("."+rb._id+"divider").remove();Xa.gridlayer&&Xa.gridlayer.selectAll("path").remove();Xa.zerolinelayer&&Xa.zerolinelayer.selectAll("path").remove();Ta._infolayer.select(".g-"+kb._id+"title").remove();Ta._infolayer.select(".g-"+rb._id+"title").remove()}});Da=Da&&"redraw"!==Da?Da:va.listIds(za);return Q.syncOrAsync(Da.map(function(Xa){return function(){if(Xa){var kb=va.getFromId(za,Xa),rb=va.drawOne(za,kb,Ja);kb._r=kb.range.slice();kb._rl=Q.simpleMap(kb._r,kb.r2l);return rb}}}))};
va.drawOne=function(za,Da,Ja){function Ta(Jb){Jb=rb+(Jb||"tick");Wc[Jb]||(Wc[Jb]=y(Da,Jb));return Wc[Jb]}Ja=Ja||{};var Xa;Da.setScale();var kb=za._fullLayout,rb=Da._id,Mb=rb.charAt(0),Fb=va.counterLetter(rb),Lb=kb._plots[Da._mainSubplot];if(Lb){var Vb=Lb[Mb+"axislayer"],xc=Da._mainLinePosition;Lb=Da._mainMirrorPosition;var Gc=Da._vals=va.calcTicks(Da),Hc=[Da.mirror,xc,Lb].join("_");for(Xa=0;Xa<Gc.length;Xa++)Gc[Xa].axInfo=Hc;Da._selections={};Da._tickAngles&&(Da._prevTickAngles=Da._tickAngles);Da._tickAngles=
{};Da._depth=null;var Wc={};if(Da.visible){var ib=va.makeTransTickFn(Da),Yb=va.makeTransTickLabelFn(Da);Hc="inside"===Da.ticks;var dc="outside"===Da.ticks;if("boundaries"===Da.tickson){var oc=C(Da,Gc);Xa=va.clipEnds(Da,oc);Hc=Hc?Xa:oc}else Xa=va.clipEnds(Da,Gc),Hc=Hc&&"period"!==Da.ticklabelmode?Xa:Gc;var tc=Da._gridVals=Xa,Lc=z(Da,Gc);if(!kb._hasOnlyLargeSploms){var fb=Da._subplotsWith,tb={};for(Xa=0;Xa<fb.length;Xa++){var Pb=fb[Xa];oc=kb._plots[Pb];Pb=oc[Fb+"axis"];var ec=Pb._mainAxis._id;tb[ec]||
(tb[ec]=1,ec="x"===Mb?"M0,"+Pb._offset+"v"+Pb._length:"M"+Pb._offset+",0h"+Pb._length,va.drawGrid(za,Da,{vals:tc,counterAxis:Pb,layer:oc.gridlayer.select("."+rb),path:ec,transFn:ib}),va.drawZeroLine(za,Da,{counterAxis:Pb,layer:oc.zerolinelayer,path:ec,transFn:ib}))}}var cc=va.getTickSigns(Da);tc=[];if(Da.ticks){Xa=va.makeTickPath(Da,xc,cc[2]);if(Da._anchorAxis&&Da.mirror&&!0!==Da.mirror){var Zb=va.makeTickPath(Da,Lb,cc[3]);var Qb=Xa+Zb}else Zb="",Qb=Xa;if(Da.showdividers&&dc&&"boundaries"===Da.tickson){var sb=
{};for(Xa=0;Xa<Lc.length;Xa++)sb[Lc[Xa].x]=1;Lb=function(Jb){return sb[Jb.x]?Zb:Qb}}else Lb=Qb;va.drawTicks(za,Da,{vals:Hc,layer:Vb,path:Lb,transFn:ib});"allticks"===Da.mirror&&(tc=Object.keys(Da._linepositions||{}))}for(Xa=0;Xa<tc.length;Xa++)Pb=tc[Xa],oc=kb._plots[Pb],Lb=Da._linepositions[Pb]||[],Lb=va.makeTickPath(Da,Lb[0],cc[0])+va.makeTickPath(Da,Lb[1],cc[1]),va.drawTicks(za,Da,{vals:Hc,layer:oc[Mb+"axislayer"],path:Lb,transFn:ib});Lb=[];Lb.push(function(){return va.drawLabels(za,Da,{vals:Gc,
layer:Vb,transFn:Yb,labelFns:va.makeLabelFns(Da,xc)})});if("multicategory"===Da.type){var Gb={x:2,y:10}[Mb];Lb.push(function(){var Jb={x:"height",y:"width"}[Mb];Jb=Ta()[Jb]+Gb+(Da._tickAngles[rb+"tick"]?Da.tickfont.size*hb:0);for(var Xb=va,nc=Xb.drawLabels,Qc=[],$c={},Uc=0;Uc<Gc.length;Uc++){var ac=Gc[Uc];$c[ac.text2]?$c[ac.text2].push(ac.x):$c[ac.text2]=[ac.x]}for(var Ac in $c)Qc.push(n(Da,Q.interp($c[Ac],.5),Ac));return nc.call(Xb,za,Da,{vals:Qc,layer:Vb,cls:rb+"tick2",repositionOnUpdate:!0,secondary:!0,
transFn:ib,labelFns:va.makeLabelFns(Da,xc+Jb*cc[4])})});Lb.push(function(){Da._depth=cc[4]*(Ta("tick2")[Da.side]-xc);var Jb=va.makeTickPath(Da,xc,cc[4],Da._depth),Xb=Da._id+"divider",nc=Vb.selectAll("path."+Xb).data(Lc,A);nc.exit().remove();nc.enter().insert("path",":first-child").classed(Xb,1).classed("crisp",1).call(Z.stroke,Da.dividercolor).style("stroke-width",aa.crispRound(za,Da.dividerwidth,1)+"px");nc.attr("transform",ib).attr("d",Jb)})}else Da.title.hasOwnProperty("standoff")&&Lb.push(function(){Da._depth=
cc[4]*(Ta()[Da.side]-xc)});var xb=T.getComponentMethod("rangeslider","isVisible")(Da);Lb.push(function(){var Jb=Da.side.charAt(0),Xb=nb[Da.side].charAt(0),nc=va.getPxPosition(za,Da),Qc=dc?Da.ticklen:0,$c;if(Da.automargin||xb)if("multicategory"===Da.type)var Uc=Ta("tick2");else Uc=Ta(),"x"===Mb&&"b"===Jb&&(Da._depth=Math.max(0<Uc.width?Uc.bottom-nc:0,Qc));if(Da.automargin){var ac={x:0,y:0,r:0,l:0,t:0,b:0};var Ac=[0,1];"x"===Mb?("b"===Jb?ac[Jb]=Da._depth:(ac[Jb]=Da._depth=Math.max(0<Uc.width?nc-Uc.top:
0,Qc),Ac.reverse()),0<Uc.width&&(nc=Uc.right-(Da._offset+Da._length),0<nc&&(ac.xr=1,ac.r=nc),Uc=Da._offset-Uc.left,0<Uc&&(ac.xl=0,ac.l=Uc))):("l"===Jb?ac[Jb]=Da._depth=Math.max(0<Uc.height?nc-Uc.left:0,Qc):(ac[Jb]=Da._depth=Math.max(0<Uc.height?Uc.right-nc:0,Qc),Ac.reverse()),0<Uc.height&&(nc=Uc.bottom-(Da._offset+Da._length),0<nc&&(ac.yb=0,ac.b=nc),Uc=Da._offset-Uc.top,0<Uc&&(ac.yt=1,ac.t=Uc)));ac[Fb]="free"===Da.anchor?Da.position:Da._anchorAxis.domain[Ac[0]];Da.title.text!==kb._dfltTitle[Mb]&&
(ac[Jb]+=t(Da)+(Da.title.standoff||0));if(Da.mirror&&"free"!==Da.anchor){var Zc={x:0,y:0,r:0,l:0,t:0,b:0};Zc[Xb]=Da.linewidth;Da.mirror&&!0!==Da.mirror&&(Zc[Xb]+=Qc);if(!0===Da.mirror||"ticks"===Da.mirror)Zc[Fb]=Da._anchorAxis.domain[Ac[1]];else if("all"===Da.mirror||"allticks"===Da.mirror)Zc[Fb]=[Da._counterDomainMin,Da._counterDomainMax][Ac[1]]}}xb&&($c=T.getComponentMethod("rangeslider","autoMarginOpts")(za,Da));N.autoMargin(za,J(Da),ac);N.autoMargin(za,J(Da)+".mirror",Zc);N.autoMargin(za,Da._id+
".rangeslider",$c)});Ja.skipTitle||xb&&"bottom"===Da.side||Lb.push(function(){var Jb=za._fullLayout,Xb=Da._id,nc=Xb.charAt(0),Qc=Da.title.font.size;if(Da.title.hasOwnProperty("standoff"))var $c=Da._depth+Da.title.standoff+t(Da);else{var Uc=-1!==(Da.ticklabelposition||"").indexOf("inside");"multicategory"===Da.type?$c=Da._depth:($c=1.5*Qc,Uc&&($c=.5*Qc,"outside"===Da.ticks&&($c+=Da.ticklen)),$c=10+$c+(Da.linewidth?Da.linewidth-1:0));Uc||($c="x"===nc?$c+("top"===Da.side?Qc*(Da.showticklabels?1:0):Qc*
(Da.showticklabels?1.5:.5)):$c+("right"===Da.side?Qc*(Da.showticklabels?1:.5):Qc*(Da.showticklabels?.5:0)))}var ac=va.getPxPosition(za,Da);if("x"===nc)Qc=Da._offset+Da._length/2,Uc="top"===Da.side?ac-$c:ac+$c;else{Uc=Da._offset+Da._length/2;Qc="right"===Da.side?ac+$c:ac-$c;var Ac={rotate:"-90",offset:0}}if("multicategory"!==Da.type){$c=Da._selections[Da._id+"tick"];var Zc={selection:$c,side:Da.side};$c&&$c.node()&&$c.node().parentNode&&($c=aa.getTranslate($c.node().parentNode),Zc.offsetLeft=$c.x,
Zc.offsetTop=$c.y);Da.title.hasOwnProperty("standoff")&&(Zc.pad=0)}return X.draw(za,Xb+"title",{propContainer:Da,propName:Da._name+".title.text",placeholder:Jb._dfltTitle[nc],avoid:Zc,transform:Ac,attributes:{x:Qc,y:Uc,"text-anchor":"middle"}})});return Q.syncOrAsync(Lb)}}};va.getTickSigns=function(za){var Da=za._id.charAt(0),Ja=za.side==={x:"top",y:"right"}[Da]?1:-1;Ja=[-1,1,Ja,-Ja];"inside"!==za.ticks===("x"===Da)&&(Ja=Ja.map(function(Ta){return-Ta}));za.side&&Ja.push({l:-1,t:-1,r:1,b:1}[za.side.charAt(0)]);
return Ja};va.makeTransTickFn=function(za){return"x"===za._id.charAt(0)?function(Da){return U(za._offset+za.l2p(Da.x),0)}:function(Da){return U(0,za._offset+za.l2p(Da.x))}};va.makeTransTickLabelFn=function(za){var Da=D(za),Ja=Da[0],Ta=Da[1];return"x"===za._id.charAt(0)?function(Xa){return U(Ja+za._offset+za.l2p(void 0!==Xa.periodX?Xa.periodX:Xa.x),Ta)}:function(Xa){return U(Ta,Ja+za._offset+za.l2p(void 0!==Xa.periodX?Xa.periodX:Xa.x))}};va.makeTickPath=function(za,Da,Ja,Ta){Ta=void 0!==Ta?Ta:za.ticklen;
var Xa=za._id.charAt(0);za=(za.linewidth||1)/2;return"x"===Xa?"M0,"+(Da+za*Ja)+"v"+Ta*Ja:"M"+(Da+za*Ja)+",0h"+Ta*Ja};va.makeLabelFns=function(za,Da,Ja){var Ta=za.ticklabelposition||"",Xa=-1!==Ta.indexOf("top"),kb=-1!==Ta.indexOf("left"),rb=-1!==Ta.indexOf("right"),Mb=-1!==Ta.indexOf("bottom")||kb||Xa||rb,Fb=-1!==Ta.indexOf("inside"),Lb="inside"===Ta&&"inside"===za.ticks||!Fb&&"outside"===za.ticks&&"boundaries"!==za.tickson;Xa=Ta=0;var Vb=Lb?za.ticklen:0;Fb?Vb*=-1:Mb&&(Vb=0);Lb&&(Ta+=Vb,Ja&&(Xa=Q.deg2rad(Ja),
Ta=Vb*Math.cos(Xa)+1,Xa=Vb*Math.sin(Xa)));za.showticklabels&&(Lb||za.showline)&&(Ta+=.2*za.tickfont.size);Ta+=(za.linewidth||1)/2*(Fb?-1:1);Ja={labelStandoff:Ta,labelShift:Xa};var xc=0;Lb=za.side;Vb=za._id.charAt(0);var Gc=za.tickangle,Hc;if("x"===Vb){var Wc=(Hc=!Fb&&"bottom"===Lb||Fb&&"top"===Lb)?1:-1;Fb&&(Wc*=-1);var ib=Xa*Wc;var Yb=Da+Ta*Wc;var dc=Hc?1:-.2;90===Math.abs(Gc)&&(dc=Fb?dc+ab:-90===Gc&&"bottom"===Lb?Ya:90===Gc&&"top"===Lb?ab:.5,xc=ab/2*(Gc/90));Ja.xFn=function(oc){return oc.dx+ib+xc*
oc.fontSize};Ja.yFn=function(oc){return oc.dy+Yb+oc.fontSize*dc};Ja.anchorFn=function(oc,tc){if(Mb){if(kb)return"end";if(rb)return"start"}return M(tc)&&0!==tc&&180!==tc?0>tc*Wc!==Fb?"end":"start":"middle"};Ja.heightFn=function(oc,tc,Lc){return-60>tc||60<tc?-.5*Lc:"top"===za.side!==Fb?-Lc:0}}else"y"===Vb&&(Wc=(Hc=!Fb&&"left"===Lb||Fb&&"right"===Lb)?1:-1,Fb&&(Wc*=-1),ib=Ta,Yb=Xa*Wc,dc=0,Fb||90!==Math.abs(Gc)||(dc=-90===Gc&&"left"===Lb||90===Gc&&"right"===Lb?Ya:.5),Fb&&(Ta=M(Gc)?+Gc:0,0!==Ta&&(Ta=Q.deg2rad(Ta),
xc=Math.abs(Math.sin(Ta))*Ya*Wc,dc=0)),Ja.xFn=function(oc){return oc.dx+Da-(ib+oc.fontSize*dc)*Wc+xc*oc.fontSize},Ja.yFn=function(oc){return oc.dy+Yb+oc.fontSize*ab},Ja.anchorFn=function(oc,tc){return M(tc)&&90===Math.abs(tc)?"middle":Hc?"end":"start"},Ja.heightFn=function(oc,tc,Lc){"right"===za.side&&(tc*=-1);return-30>tc?-Lc:30>tc?-.5*Lc:0});return Ja};va.drawTicks=function(za,Da,Ja){Ja=Ja||{};var Ta=Da._id+"tick",Xa=Ja.vals;"period"===Da.ticklabelmode&&(Xa=Xa.slice(),Xa.shift());Xa=Ja.layer.selectAll("path."+
Ta).data(Da.ticks?Xa:[],A);Xa.exit().remove();Xa.enter().append("path").classed(Ta,1).classed("ticks",1).classed("crisp",!1!==Ja.crisp).call(Z.stroke,Da.tickcolor).style("stroke-width",aa.crispRound(za,Da.tickwidth,1)+"px").attr("d",Ja.path);Xa.attr("transform",Ja.transFn)};va.drawGrid=function(za,Da,Ja){Ja=Ja||{};var Ta=Da._id+"grid",Xa=Ja.vals,kb=Ja.counterAxis;if(!1===Da.showgrid)Xa=[];else if(kb&&va.shouldShowZeroLine(za,Da,kb)){kb="array"===Da.tickmode;for(var rb=0;rb<Xa.length;rb++){var Mb=
Xa[rb].x;if(kb?!Mb:Math.abs(Mb)<Da.dtick/100)if(Xa=Xa.slice(0,rb).concat(Xa.slice(rb+1)),kb)rb--;else break}}Xa=Ja.layer.selectAll("path."+Ta).data(Xa,A);Xa.exit().remove();Xa.enter().append("path").classed(Ta,1).classed("crisp",!1!==Ja.crisp);Da._gw=aa.crispRound(za,Da.gridwidth,1);Xa.attr("transform",Ja.transFn).attr("d",Ja.path).call(Z.stroke,Da.gridcolor||"#ddd").style("stroke-width",Da._gw+"px");"function"===typeof Ja.path&&Xa.attr("d",Ja.path)};va.drawZeroLine=function(za,Da,Ja){Ja=Ja||Ja;var Ta=
Da._id+"zl",Xa=va.shouldShowZeroLine(za,Da,Ja.counterAxis);Xa=Ja.layer.selectAll("path."+Ta).data(Xa?[{x:0,id:Da._id}]:[]);Xa.exit().remove();Xa.enter().append("path").classed(Ta,1).classed("zl",1).classed("crisp",!1!==Ja.crisp).each(function(){Ja.layer.selectAll("path").sort(function(kb,rb){return Ga(kb.id,rb.id)})});Xa.attr("transform",Ja.transFn).attr("d",Ja.path).call(Z.stroke,Da.zerolinecolor||Z.defaultLine).style("stroke-width",aa.crispRound(za,Da.zerolinewidth,Da._gw||1)+"px")};va.drawLabels=
function(za,Da,Ja){function Ta(dc,oc){var tc=-1!==(Da.ticklabelposition||"").indexOf("inside");dc.each(function(Lc){var fb=P.select(this),tb=fb.select(".text-math-group"),Pb=Vb.anchorFn(Lc,oc),ec=Ja.transFn.call(fb.node(),Lc)+(M(oc)&&0!==+oc?" rotate("+oc+","+Vb.xFn(Lc)+","+(Vb.yFn(Lc)-Lc.fontSize/2)+")":""),cc=S.lineCount(fb),Zb=hb*Lc.fontSize;(Lc=Vb.heightFn(Lc,M(oc)?+oc:0,(cc-1)*Zb))&&(ec+=U(0,Lc));tb.empty()?(tb=fb.select("text"),tb.attr({transform:ec,"text-anchor":Pb}),tc&&(tb.style({opacity:100}),
Da._hideOutOfRangeInsideTickLabels&&Da._hideOutOfRangeInsideTickLabels())):(Pb=aa.bBox(tb.node()).width*{end:-.5,start:.5}[Pb],tb.attr("transform",ec+U(Pb,0)))})}function Xa(){Ta(Hc,xc);if(Lb.length&&"x"===Mb&&!M(xc)&&("log"!==Da.type||"D"!==String(Da.dtick).charAt(0))){var dc=ib=0,oc=[];Hc.each(function(ec){dc=Math.max(dc,ec.fontSize);ec=Da.l2p(ec.x);var cc=I(this);cc=aa.bBox(cc.node());oc.push({top:0,bottom:10,height:10,left:ec-cc.width/2,right:ec+cc.width/2+2,width:cc.width+2})});if("boundaries"!==
Da.tickson&&!Da.showdividers||Ja.secondary){var tc=Lb.length;tc=Math.abs((Lb[tc-1].x-Lb[0].x)*Da._m)/(tc-1);var Lc=Da.ticklabelposition||"",fb=-1!==Lc.indexOf("top"),tb=-1!==Lc.indexOf("left"),Pb=-1!==Lc.indexOf("right");Lc=-1!==Lc.indexOf("bottom")||tb||fb||Pb?(Da.tickwidth||0)+6:0;fb=tc<2.5*dc||"multicategory"===Da.type;for(tc=0;tc<oc.length-1;tc++)if(Q.bBoxIntersect(oc[tc],oc[tc+1],Lc)){ib=fb?90:30;break}}else for(Lc=2,Da.ticks&&(Lc+=Da.tickwidth/2),tc=0;tc<oc.length;tc++)if(fb=Lb[tc].xbnd,tb=
oc[tc],null!==fb[0]&&tb.left-Da.l2p(fb[0])<Lc||null!==fb[1]&&Da.l2p(fb[1])-tb.right<Lc){ib=90;break}ib&&Ta(Hc,ib)}}Ja=Ja||{};var kb=za._fullLayout,rb=Da._id,Mb=rb.charAt(0),Fb=Ja.cls||rb+"tick",Lb=Ja.vals,Vb=Ja.labelFns,xc=Ja.secondary?0:Da.tickangle,Gc=(Da._prevTickAngles||{})[Fb],Hc=Ja.layer.selectAll("g."+Fb).data(Da.showticklabels?Lb:[],A),Wc=[];Hc.enter().append("g").classed(Fb,1).append("text").attr("text-anchor","middle").each(function(dc){var oc=P.select(this),tc=za._promises.length;oc.call(S.positionText,
Vb.xFn(dc),Vb.yFn(dc)).call(aa.font,dc.font,dc.fontSize,dc.fontColor).text(dc.text).call(S.convertToTspans,za);za._promises[tc]?Wc.push(za._promises.pop().then(function(){Ta(oc,xc)})):Ta(oc,xc)});Hc.exit().remove();Ja.repositionOnUpdate&&Hc.each(function(dc){P.select(this).select("text").call(S.positionText,Vb.xFn(dc),Vb.yFn(dc))});Da._hideOutOfRangeInsideTickLabels=void 0;-1!==(Da.ticklabelposition||"").indexOf("inside")&&(Da._hideOutOfRangeInsideTickLabels=function(){var dc=Q.simpleMap(Da.range,
Da.r2l),oc=Da.l2p(dc[0]);dc=Da.l2p(dc[1]);var tc=Math.min(oc,dc)+Da._offset,Lc=Math.max(oc,dc)+Da._offset,fb="x"===Da._id.charAt(0);Hc.each(function(tb){var Pb=P.select(this);if(Pb.select(".text-math-group").empty()){var ec=aa.bBox(Pb.node()),cc=!1;fb?ec.right>Lc?cc=!0:ec.left<tc&&(cc=!0):ec.bottom>Lc?cc=!0:ec.top+(Da.tickangle?0:tb.fontSize/4)<tc&&(cc=!0);cc&&Pb.select("text").style({opacity:0})}})});Ta(Hc,Gc+1?Gc:xc);var ib=null;Da._selections&&(Da._selections[Fb]=Hc);rb=[function(){return Wc.length&&
Promise.all(Wc)}];Da.automargin&&kb._redrawFromAutoMarginCount&&90===Gc?(ib=90,rb.push(function(){Ta(Hc,Gc)})):rb.push(Xa);Da._tickAngles&&rb.push(function(){Da._tickAngles[Fb]=null===ib?M(xc)?xc:0:ib});var Yb=Da._anchorAxis;Yb&&Yb.autorange&&-1!==(Da.ticklabelposition||"").indexOf("inside")&&!Na(kb,Da._id)&&(kb._insideTickLabelsAutorange||(kb._insideTickLabelsAutorange={}),kb._insideTickLabelsAutorange[Yb._name+".autorange"]=Yb.autorange,rb.push(function(){Hc.each(function(dc,oc){dc=I(this);Da._vals[oc].bb=
aa.bBox(dc.node())})}));(kb=Q.syncOrAsync(rb))&&kb.then&&za._promises.push(kb);return kb};va.getPxPosition=function(za,Da){za=za._fullLayout._size;var Ja=Da._id.charAt(0),Ta=Da.side,Xa;"free"!==Da.anchor?Xa=Da._anchorAxis:"x"===Ja?Xa={_offset:za.t+(1-(Da.position||0))*za.h,_length:0}:"y"===Ja&&(Xa={_offset:za.l+(Da.position||0)*za.w,_length:0});if("top"===Ta||"left"===Ta)return Xa._offset;if("bottom"===Ta||"right"===Ta)return Xa._offset+Xa._length};va.shouldShowZeroLine=function(za,Da,Ja){var Ta=
Q.simpleMap(Da.range,Da.r2l),Xa;if(Xa=0>=Ta[0]*Ta[1]&&Da.zeroline&&("linear"===Da.type||"-"===Da.type)&&!(Da.rangebreaks&&Da.maskBreaks(0)===lb)){if(!(Ja=B(Da,0)||!F(za,Da,Ja,Ta)))a:{za=za._fullData;Ja=Da._mainSubplot;Da=Da._id.charAt(0);for(Ta=0;Ta<za.length;Ta++)if(Xa=za[Ta],!0===Xa.visible&&Xa.xaxis+Xa.yaxis===Ja){if(T.traceIs(Xa,"bar-like")&&Xa.orientation==={x:"h",y:"v"}[Da]){Ja=!0;break a}if(Xa.fill&&Xa.fill.charAt(Xa.fill.length-1)===Da){Ja=!0;break a}}Ja=!1}Xa=Ja}return Xa};va.clipEnds=function(za,
Da){return Da.filter(function(Ja){return B(za,Ja.x)})};va.allowAutoMargin=function(za){for(var Da=va.list(za,"",!0),Ja=0;Ja<Da.length;Ja++){var Ta=Da[Ja];Ta.automargin&&(N.allowAutoMargin(za,J(Ta)),Ta.mirror&&N.allowAutoMargin(za,J(Ta)+".mirror"));T.getComponentMethod("rangeslider","isVisible")(Ta)&&N.allowAutoMargin(za,Ta._id+".rangeslider")}};va.swap=function(za,Da){var Ja=[],Ta,Xa;for(Ta=0;Ta<Da.length;Ta++){var kb=[],rb=za._fullData[Da[Ta]].xaxis,Mb=za._fullData[Da[Ta]].yaxis;if(rb&&Mb){for(Xa=
0;Xa<Ja.length;Xa++)-1===Ja[Xa].x.indexOf(rb)&&-1===Ja[Xa].y.indexOf(Mb)||kb.push(Xa);if(kb.length){var Fb=Ja[kb[0]];if(1<kb.length)for(Xa=1;Xa<kb.length;Xa++){var Lb=Ja[kb[Xa]];L(Fb.x,Lb.x);L(Fb.y,Lb.y)}L(Fb.x,[rb]);L(Fb.y,[Mb])}else Ja.push({x:[rb],y:[Mb]})}}for(Da=0;Da<Ja.length;Da++){var Vb;Xa=za;kb=Ja[Da].x;rb=Ja[Da].y;Fb=[];Lb=[];Mb=Xa.layout;for(Ta=0;Ta<kb.length;Ta++)Fb.push(va.getFromId(Xa,kb[Ta]));for(Ta=0;Ta<rb.length;Ta++)Lb.push(va.getFromId(Xa,rb[Ta]));var xc=Object.keys(fa),Gc="anchor domain overlaying position side tickangle editType".split(" "),
Hc=["linear","log"];for(Ta=0;Ta<xc.length;Ta++){var Wc=xc[Ta],ib=Fb[0][Wc],Yb=Lb[0][Wc],dc=!0,oc=!1,tc=!1;if("_"!==Wc.charAt(0)&&"function"!==typeof ib&&-1===Gc.indexOf(Wc)){for(Vb=1;Vb<Fb.length&&dc;Vb++){var Lc=Fb[Vb][Wc];"type"===Wc&&-1!==Hc.indexOf(ib)&&-1!==Hc.indexOf(Lc)&&ib!==Lc?oc=!0:Lc!==ib&&(dc=!1)}for(Vb=1;Vb<Lb.length&&dc;Vb++)ib=Lb[Vb][Wc],"type"===Wc&&-1!==Hc.indexOf(Yb)&&-1!==Hc.indexOf(ib)&&Yb!==ib?tc=!0:Lb[Vb][Wc]!==Yb&&(dc=!1);if(dc){oc&&(Mb[Fb[0]._name].type="linear");tc&&(Mb[Lb[0]._name].type=
"linear");Vb=Mb;Yb=Fb;dc=Lb;Lc=Xa._fullLayout._dfltTitle;oc=Q.nestedProperty;tc=oc(Vb[Yb[0]._name],Wc).get();ib=oc(Vb[dc[0]._name],Wc).get();"title"===Wc&&(tc&&tc.text===Lc.x&&(tc.text=Lc.y),ib&&ib.text===Lc.y&&(ib.text=Lc.x));for(Lc=0;Lc<Yb.length;Lc++)oc(Vb,Yb[Lc]._name+"."+Wc).set(ib);for(Lc=0;Lc<dc.length;Lc++)oc(Vb,dc[Lc]._name+"."+Wc).set(tc)}}}for(Ta=0;Ta<Xa._fullLayout.annotations.length;Ta++)Fb=Xa._fullLayout.annotations[Ta],-1!==kb.indexOf(Fb.xref)&&-1!==rb.indexOf(Fb.yref)&&Q.swapAttrs(Mb.annotations[Ta],
["?"])}}},{"../../components/color":643,"../../components/drawing":665,"../../components/titles":738,"../../constants/alignment":745,"../../constants/numerical":753,"../../lib":778,"../../lib/svg_text_utils":803,"../../plots/plots":891,"../../registry":911,"./autorange":827,"./axis_autotype":829,"./axis_ids":831,"./clean_ticks":833,"./layout_attributes":842,"./set_convert":848,d3:169,"fast-isnumeric":241}],829:[function(b,K,G){var q=b("fast-isnumeric");G=b("../../lib");var m=b("../../constants/numerical").BADNUM,
l=G.isArrayOrTypedArray,h=G.isDateTime,a=G.cleanNumber,g=Math.round;K.exports=function(e,n,p){var c=p.noMultiCategory;if(l(e)&&!e.length)return"-";var d;if(d=!c)d=e,d=l(d[0])&&l(d[1]);if(d)return"multicategory";if(c&&Array.isArray(e[0])){c=[];for(d=0;d<e.length;d++)if(l(e[d]))for(var f=0;f<e[d].length;f++)c.push(e[d][f]);e=c}c=e;d=c.length;f=Math.max(1,(d-1)/1E3);for(var k=0,r=0,u={},v=0;v<d;v+=f){var x=g(v);x=c[x];var C=String(x);u[C]||(u[C]=1,h(x,n)&&k++,q(x)&&r++)}if(k>2*r)return"date";n="strict"!==
p.autotypenumbers;p=e;c=p.length;d=Math.max(1,(c-1)/1E3);k=f=0;r={};for(u=0;u<c;u+=d)v=g(u),v=p[v],x=String(v),r[x]||(r[x]=1,x=typeof v,"boolean"===x?k++:(n?a(v)!==m:"number"===x)?f++:"string"===x&&k++);if(k>2*f)return"category";a:{p=e.length;for(c=0;c<p;c++)if(d=e[c],n?q(d):"number"===typeof d){e=!0;break a}e=!1}return e?"linear":"-"}},{"../../constants/numerical":753,"../../lib":778,"fast-isnumeric":241}],830:[function(b,K,G){function q(x,C,z){function y(F,I){return a.coerce(x,C,e.rangebreaks,F,
I)}if(y("enabled")){var D=y("bounds");if(D&&2<=D.length){var A="",t,B;if(2===D.length)for(t=0;2>t;t++)if(B=m(D[t])){A=r;break}A=y("pattern",A);if(A===r)for(t=0;2>t;t++)(B=m(D[t]))&&(C.bounds[t]=D[t]=B-1);if(A)for(t=0;2>t;t++)switch(B=D[t],A){case r:if(!l(B)){C.enabled=!1;return}B=+B;if(B!==Math.floor(B)||0>B||7<=B){C.enabled=!1;return}C.bounds[t]=D[t]=B;break;case u:if(!l(B)){C.enabled=!1;return}B=+B;if(0>B||24<B){C.enabled=!1;return}C.bounds[t]=D[t]=B}!1===z.autorange&&(z=z.range,z[0]<z[1]?D[0]<
z[0]&&D[1]>z[1]&&(C.enabled=!1):D[0]>z[0]&&D[1]<z[1]&&(C.enabled=!1))}else(D=y("values"))&&D.length?y("dvalue"):C.enabled=!1}}function m(x){if("string"===typeof x)return v[x.substr(0,3).toLowerCase()]}var l=b("fast-isnumeric"),h=b("../../registry"),a=b("../../lib"),g=b("../array_container_defaults"),e=b("./layout_attributes"),n=b("./tick_value_defaults"),p=b("./tick_mark_defaults"),c=b("./tick_label_defaults"),d=b("./category_order_defaults"),f=b("./line_grid_defaults"),k=b("./set_convert"),r=b("./constants").WEEKDAY_PATTERN,
u=b("./constants").HOUR_PATTERN;K.exports=function(x,C,z,y,D){var A=y.letter,t=y.font||{},B=y.splomStash||{},F=z("visible",!y.visibleDflt),I=C._template||{};I=C.type||I.type||"-";var J;"date"===I&&(h.getComponentMethod("calendars","handleDefaults")(x,C,"calendar",y.calendar),y.noTicklabelmode||(J=z("ticklabelmode")));y.noTicklabelposition&&"multicategory"!==I||a.coerce(x,C,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:"period"===J?["outside","inside"]:"x"===A?"outside;inside;outside left;inside left;outside right;inside right".split(";"):
"outside;inside;outside top;inside top;outside bottom;inside bottom".split(";")}},"ticklabelposition");k(C,D);(J=!C.isValidRange(x.range))&&y.reverseDflt&&(J="reversed");!z("autorange",J)||"linear"!==I&&"-"!==I||z("rangemode");z("range");C.cleanRange();d(x,C,z,y);"category"===I||y.noHover||z("hoverformat");J=z("color");var L=J!==e.color.dflt?J:t.color;A=B.label||D._dfltTitle[A];c(x,C,z,I,y,{pass:1});if(!F)return C;z("title.text",A);a.coerceFont(z,"title.font",{family:t.family,size:Math.round(1.2*
t.size),color:L});n(x,C,z,I);c(x,C,z,I,y,{pass:2});p(x,C,z,y);f(x,C,z,{dfltColor:J,bgColor:y.bgColor,showGrid:y.showGrid,attributes:e});(C.showline||C.ticks)&&z("mirror");y.automargin&&z("automargin");t="multicategory"===I;if(!y.noTickson&&("category"===I||t)&&(C.ticks||C.showgrid)){var H;t&&(H="boundaries");"boundaries"===z("tickson",H)&&delete C.ticklabelposition}t&&z("showdividers")&&(z("dividercolor"),z("dividerwidth"));if("date"===I)if(g(x,C,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:q}),
C.rangebreaks.length){for(x=0;x<C.rangebreaks.length;x++)if(C.rangebreaks[x].pattern===r){C._hasDayOfWeekBreaks=!0;break}k(C,D);if(D._has("scattergl")||D._has("splom"))for(D=0;D<y.data.length;D++)if(x=y.data[D],"scattergl"===x.type||"splom"===x.type)x.visible=!1,a.warn(x.type+" traces do not work on axes with rangebreaks. Setting trace "+x.index+" to `visible: false`.")}else delete C.rangebreaks;return C};var v={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7}},{"../../lib":778,"../../registry":911,"../array_container_defaults":823,
"./category_order_defaults":832,"./constants":834,"./layout_attributes":842,"./line_grid_defaults":844,"./set_convert":848,"./tick_label_defaults":849,"./tick_mark_defaults":850,"./tick_value_defaults":851,"fast-isnumeric":241}],831:[function(b,K,G){function q(h,a){if(a&&a.length)for(var g=0;g<a.length;g++)if(a[g][h])return!0;return!1}var m=b("../../registry"),l=b("./constants");G.id2name=function(h){if("string"===typeof h&&h.match(l.AX_ID_PATTERN)){var a=h.split(" ")[0].substr(1);"1"===a&&(a="");
return h.charAt(0)+"axis"+a}};G.name2id=function(h){if(h.match(l.AX_NAME_PATTERN)){var a=h.substr(5);"1"===a&&(a="");return h.charAt(0)+a}};G.cleanId=function(h,a,g){var e=/( domain)$/.test(h);if(!("string"!==typeof h||!h.match(l.AX_ID_PATTERN)||a&&h.charAt(0)!==a||e&&!g))return a=h.split(" ")[0].substr(1).replace(/^0+/,""),"1"===a&&(a=""),h.charAt(0)+a+(e&&g?" domain":"")};G.list=function(h,a,g){var e=h._fullLayout;if(!e)return[];var n=G.listIds(h,a);h=Array(n.length);var p;for(p=0;p<n.length;p++){var c=
n[p];h[p]=e[c.charAt(0)+"axis"+c.substr(1)]}if(!g)for(g=e._subplots.gl3d||[],p=0;p<g.length;p++)n=e[g[p]],a?h.push(n[a+"axis"]):h.push(n.xaxis,n.yaxis,n.zaxis);return h};G.listIds=function(h,a){h=h._fullLayout;if(!h)return[];h=h._subplots;return a?h[a+"axis"]:h.xaxis.concat(h.yaxis)};G.getFromId=function(h,a,g){h=h._fullLayout;a=void 0===a||"string"!==typeof a?a:a.replace(" domain","");"x"===g?a=a.replace(/y[0-9]*/,""):"y"===g&&(a=a.replace(/x[0-9]*/,""));return h[G.id2name(a)]};G.getFromTrace=function(h,
a,g){var e=h._fullLayout,n=null;m.traceIs(a,"gl3d")?(h=a.scene,"scene"===h.substr(0,5)&&(n=e[h][g+"axis"])):n=G.getFromId(h,a[g+"axis"]||g);return n};G.idSort=function(h,a){var g=h.charAt(0),e=a.charAt(0);return g!==e?g>e?1:-1:+(h.substr(1)||1)-+(a.substr(1)||1)};G.ref2id=function(h){return/^[xyz]/.test(h)?h.split(" ")[0]:!1};G.isLinked=function(h,a){return q(a,h._axisMatchGroups)||q(a,h._axisConstraintGroups)}},{"../../registry":911,"./constants":834}],832:[function(b,K,G){K.exports=function(q,m,
l,h){if("category"===m.type){q=q.categoryarray;q=Array.isArray(q)&&0<q.length;var a;q&&(a="array");a=l("categoryorder",a);var g;"array"===a&&(g=l("categoryarray"));q||"array"!==a||(a=m.categoryorder="trace");if("trace"===a)m._initialCategories=[];else if("array"===a)m._initialCategories=g.slice();else{l=h.dataAttr||m._id.charAt(0);g={};var e;if(h.axData)q=h.axData;else for(q=[],e=0;e<h.data.length;e++){var n=h.data[e];n[l+"axis"]===m._id&&q.push(n)}for(e=0;e<q.length;e++)for(n=q[e][l],h=0;h<n.length;h++){var p=
n[h];null!==p&&void 0!==p&&(g[p]=1)}g=Object.keys(g).sort();"category ascending"===a?m._initialCategories=g:"category descending"===a&&(m._initialCategories=g.reverse())}}}},{}],833:[function(b,K,G){var q=b("fast-isnumeric"),m=b("../../lib");b=b("../../constants/numerical");var l=b.ONEDAY,h=b.ONEWEEK;G.dtick=function(a,g){var e="log"===g,n="date"===g,p="category"===g;g=n?l:1;if(!a)return g;if(q(a))return a=Number(a),0>=a?g:p?Math.max(1,Math.round(a)):n?Math.max(.1,a):a;if("string"!==typeof a||!n&&
!e)return g;p=a.charAt(0);var c=a.substr(1);c=q(c)?Number(c):0;return 0>=c||!(n&&"M"===p&&c===Math.round(c)||e&&"L"===p||e&&"D"===p&&(1===c||2===c))?g:a};G.tick0=function(a,g,e,n){if("date"===g)return m.cleanDate(a,m.dateTick0(e,0===n%h?1:0));if("D1"!==n&&"D2"!==n)return q(a)?Number(a):0}},{"../../constants/numerical":753,"../../lib":778,"fast-isnumeric":241}],834:[function(b,K,G){b=b("../../lib/regex").counter;K.exports={idRegex:{x:b("x","( domain)?"),y:b("y","( domain)?")},attrRegex:b("[xy]axis"),
xAxisMatch:b("xaxis"),yAxisMatch:b("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:"imagelayer heatmaplayer contourcarpetlayer contourlayer funnellayer waterfalllayer barlayer carpetlayer violinlayer boxlayer ohlclayer scattercarpetlayer scatterlayer".split(" "),
clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":795}],835:[function(b,K,G){function q(u,v,x){var C=x.axIds,z=x.layoutOut,y=x.hasImage;x=z._axisConstraintGroups;var D=z._axisMatchGroups,A=v._id,t=A.charAt(0),B=((z._splomAxes||{})[t]||{})[A]||{};A=v._id;t="x"===A.charAt(0);v._matchGroup=null;v._constraintGroup=null;e.coerce(u,v,c,"constrain",y?"domain":"range");e.coerce(u,v,
{constraintoward:{valType:"enumerated",values:t?["left","center","right"]:["bottom","middle","top"],dflt:t?"center":"middle"}},"constraintoward");var F=v.type,I,J=[];for(I=0;I<C.length;I++){var L=C[I];L!==A&&z[p(L)].type===F&&J.push(L)}if(F=l(x,A)){var H=[];for(I=0;I<J.length;I++)L=J[I],F[L]||H.push(L);J=H}I=J.length;var P,M;I&&(u.matches||B.matches)&&(P=e.coerce(u,v,{matches:{valType:"enumerated",values:J,dflt:-1!==J.indexOf(B.matches)?B.matches:void 0}},"matches"));y=y&&!t?v.anchor:void 0;I&&!P&&
(u.scaleanchor||y)&&(M=e.coerce(u,v,{scaleanchor:{valType:"enumerated",values:J}},"scaleanchor",y));P?(v._matchGroup=h(D,A,P,1),D=z[p(P)],z=m(z,v)/m(z,D),t!==("x"===P.charAt(0))&&(z=(t?"x":"y")+z),h(x,A,P,z)):u.matches&&-1!==C.indexOf(u.matches)&&e.warn("ignored "+v._name+'.matches: "'+u.matches+'" to avoid an infinite loop');M?(u=e.coerce(u,v,c,"scaleratio",void 0),u||(u=v.scaleratio=1),h(x,A,M,u)):u.scaleanchor&&-1!==C.indexOf(u.scaleanchor)&&e.warn("ignored "+v._name+'.scaleanchor: "'+u.scaleanchor+
'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function m(u,v){var x=v.domain;x||(x=u[p(v.overlaying)].domain);return x[1]-x[0]}function l(u,v){for(var x=0;x<u.length;x++)if(u[x][v])return u[x];return null}function h(u,v,x,C){var z,y=l(u,v);if(null===y){y={};y[v]=1;var D=u.length;u.push(y)}else D=u.indexOf(y);v=Object.keys(y);for(z=0;z<u.length;z++){var A=u[z];if(z!==D&&A[x]){var t=A[x];for(z=0;z<v.length;z++)x=v[z],
A[x]=a(t,a(C,y[x]));u.splice(D,1);return}}if(1!==C)for(z=0;z<v.length;z++)u=v[z],y[u]=a(C,y[u]);y[x]=1}function a(u,v){var x="",C="";if("string"===typeof u){x=u.match(/^[xy]*/)[0];var z=x.length;u=+u.substr(z)}if("string"===typeof v){C=v.match(/^[xy]*/)[0];var y=C.length;v=+v.substr(y)}var D=u*v;return z||y?z&&y&&x.charAt(0)!==C.charAt(0)?z===y?D:(z>y?x.substr(y):C.substr(z))+D:x+C+u*v:D}function g(u,v){var x=u._inputDomain,C=x[0]+(x[1]-x[0])*r[u.constraintoward];u.domain=u._input.domain=[C+(x[0]-
C)/v,C+(x[1]-C)/v];u.setScale()}var e=b("../../lib"),n=b("./autorange"),p=b("./axis_ids").id2name,c=b("./layout_attributes"),d=b("./scale_zoom"),f=b("./set_convert"),k=b("../../constants/numerical").ALMOST_EQUAL,r=b("../../constants/alignment").FROM_BL;G.handleDefaults=function(u,v,x){function C(Q,U){for(t=0;t<Q.length;t++)for(B in L=Q[t],L)v[p(B)][U]=L}function z(){N=J[M];"rangebreaks"===M&&(P=J._hasDayOfWeekBreaks)}var y=x.axIds,D=x.axHasImage,A=v._axisConstraintGroups=[];x=v._axisMatchGroups=[];
var t,B;for(t=0;t<y.length;t++){var F=p(y[t]);var I=u[F];var J=v[F];q(I,J,{axIds:y,layoutOut:v,hasImage:D[F]})}C(x,"_matchGroup");for(t=0;t<A.length;t++){var L=A[t];for(B in L)if(J=v[p(B)],J.fixedrange){for(var H in L)F=p(H),!1===(u[F]||{}).fixedrange&&e.warn("fixedrange was specified as false for axis "+F+" but was overridden because another axis in its constraint group has fixedrange true"),v[F].fixedrange=!0;break}}for(t=0;t<A.length;){L=A[t];for(B in L){J=v[p(B)];J._matchGroup&&Object.keys(J._matchGroup).length===
Object.keys(L).length&&(A.splice(t,1),t--);break}t++}C(A,"_constraintGroup");H="constrain range autorange rangemode rangebreaks categoryorder categoryarray".split(" ");var P=y=!1;for(t=0;t<x.length;t++)for(L=x[t],A=0;A<H.length;A++){var M=H[A];var N=null;for(B in L)if(F=p(B),I=u[F],J=v[F],M in J){if(!J.matches){var T=J;if(M in I){z();break}}null===N&&M in I&&z()}"range"===M&&N&&(y=!0);"autorange"===M&&null===N&&y&&(N=!1);null===N&&M in T&&(N=T[M]);if(null!==N)for(B in L)J=v[p(B)],J[M]="range"===M?
N.slice():N,"rangebreaks"===M&&(J._hasDayOfWeekBreaks=P,f(J,v))}};G.enforce=function(u){var v=u._fullLayout,x=v._axisConstraintGroups||[],C;for(C=0;C<x.length;C++){var z=x[C];var y=v._size;y=y.h/y.w;for(var D={},A=Object.keys(z),t=0;t<A.length;t++){var B=A[t];var F=z[B];if("string"===typeof F){var I=F.match(/^[xy]*/)[0];var J=I.length;F=+F.substr(J);I="y"===I.charAt(0)?y:1/y;for(var L=0;L<J;L++)F*=I}D[B]=F}J=D;D=Object.keys(J);L=Infinity;var H=0;A=Infinity;t={};B={};var P=!1;for(z=0;z<D.length;z++)I=
D[z],B[I]=y=v[p(I)],y._inputDomain?y.domain=y._inputDomain.slice():y._inputDomain=y.domain.slice(),y._inputRange||(y._inputRange=y.range.slice()),y.setScale(),t[I]=F=Math.abs(y._m)/J[I],L=Math.min(L,F),"domain"!==y.constrain&&y._constraintShrinkable||(A=Math.min(A,F)),delete y._constraintShrinkable,H=Math.max(H,F),"domain"===y.constrain&&(P=!0);if(!(L>k*H)||P)for(z=0;z<D.length;z++)if(I=D[z],F=t[I],y=B[I],J=y.constrain,F!==A||"domain"===J)if(F/=A,"range"===J)d(y,F);else if(J=y._inputDomain,I=(y.domain[1]-
y.domain[0])/(J[1]-J[0]),L=(y.r2l(y.range[1])-y.r2l(y.range[0]))/(y.r2l(y._inputRange[1])-y.r2l(y._inputRange[0])),F/=I,1>F*L)y.domain=y._input.domain=J.slice(),d(y,F);else{1>L&&(y.range=y._input.range=y._inputRange.slice(),F*=L);if(y.autorange){J=y.r2l(y.range[0]);I=y.r2l(y.range[1]);var M=(J+I)/2;H=L=M;P=Math.abs(I-M);var N=M-P*F*1.0001;M+=P*F*1.0001;var T=n.makePadFn(v,y,0),Q=n.makePadFn(v,y,1);g(y,F);var U=Math.abs(y._m),S=n.concatExtremes(u,y),X=S.min;S=S.max;var Z;for(Z=0;Z<X.length;Z++){var aa=
X[Z].val-T(X[Z])/U;aa>N&&aa<L&&(L=aa)}for(Z=0;Z<S.length;Z++)aa=S[Z].val+Q(S[Z])/U,aa<M&&aa>H&&(H=aa);F/=(H-L)/(2*P);L=y.l2r(L);H=y.l2r(H);y.range=y._input.range=J<I?[L,H]:[H,L]}g(y,F)}}};G.getAxisGroup=function(u,v){u=u._axisMatchGroups;for(var x=0;x<u.length;x++)if(u[x][v])return"g"+x;return v};G.clean=function(u,v){if(v._inputDomain){var x=!1,C=v._id;u=u._fullLayout._axisConstraintGroups;for(var z=0;z<u.length;z++)if(u[z][C]){x=!0;break}x&&"domain"===v.constrain||(v._input.domain=v.domain=v._inputDomain,
delete v._inputDomain)}}},{"../../constants/alignment":745,"../../constants/numerical":753,"../../lib":778,"./autorange":827,"./axis_ids":831,"./layout_attributes":842,"./scale_zoom":846,"./set_convert":848}],836:[function(b,K,G){function q(ka,oa,na,la){oa=A.ensureSingle(ka.draglayer,oa,na,function(ia){ia.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",ka.id)});oa.call(H,la);return oa.node()}function m(ka,oa,na,la,ia,sa,ta){ka=q(ka,"rect",oa,na);C.select(ka).call(I.setRect,
la,ia,sa,ta);return ka}function l(ka,oa){for(var na=0;na<ka.length;na++)if(!ka[na].fixedrange)return oa;return""}function h(ka,oa){var na=ka.range[oa];oa=Math.abs(na-ka.range[1-oa]);if("date"===ka.type)return na;if("log"===ka.type)return ka=Math.ceil(Math.max(0,-Math.log(oa)/Math.LN10))+3,C.format("."+ka+"g")(Math.pow(10,na));ka=Math.floor(Math.log(Math.abs(na))/Math.LN10)-Math.floor(Math.log(oa)/Math.LN10)+4;return C.format("."+String(ka)+"g")(na)}function a(ka,oa,na,la,ia){for(var sa=0;sa<ka.length;sa++){var ta=
ka[sa];if(!ta.fixedrange)if(ta.rangebreaks){var Aa="y"===ta._id.charAt(0),Ka=Aa?1-na:na;la[ta._name+".range[0]"]=ta.l2r(ta.p2l((Aa?1-oa:oa)*ta._length));la[ta._name+".range[1]"]=ta.l2r(ta.p2l(Ka*ta._length))}else Aa=ta._rl[0],Ka=ta._rl[1]-Aa,la[ta._name+".range[0]"]=ta.l2r(Aa+Ka*oa),la[ta._name+".range[1]"]=ta.l2r(Aa+Ka*na)}ia&&ia.length&&(ka=(oa+(1-na))/2,a(ia,ka,1-ka,la,[]))}function g(ka,oa){for(var na=0;na<ka.length;na++){var la=ka[na];if(!la.fixedrange)if(la.rangebreaks){var ia=la._length,sa=
la.p2l(0+oa)-la.p2l(0);ia=la.p2l(ia+oa)-la.p2l(ia);sa=(sa+ia)/2;la.range=[la.l2r(la._rl[0]-sa),la.l2r(la._rl[1]-sa)]}else la.range=[la.l2r(la._rl[0]-oa/la._m),la.l2r(la._rl[1]-oa/la._m)]}}function e(ka,oa,na){return ka?"nsew"===ka?na?"":"pan"===oa?"move":"crosshair":ka.toLowerCase()+"-resize":"pointer"}function n(ka,oa,na,la,ia){return ka.append("path").attr("class","zoombox").style({fill:.2<oa?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",t(na,la)).attr("d",ia+"Z")}function p(ka,
oa,na){return ka.append("path").attr("class","zoombox-corners").style({fill:F.background,stroke:F.defaultLine,"stroke-width":1,opacity:0}).attr("transform",t(oa,na)).attr("d","M0,0Z")}function c(ka,oa,na,la,ia,sa){ka.attr("d",la+"M"+na.l+","+na.t+"v"+na.h+"h"+na.w+"v-"+na.h+"h-"+na.w+"Z");d(ka,oa,ia,sa)}function d(ka,oa,na,la){na||(ka.transition().style("fill",.2<la?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),oa.transition().style("opacity",1).duration(200))}function f(ka){C.select(ka).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}
function k(ka){qa&&ka.data&&ka._context.showTips&&(A.notifier(A._(ka,"Double-click to zoom back out"),"long"),qa=!1)}function r(ka){var oa=Math.floor(Math.min(ka.b-ka.t,ka.r-ka.l,ma)/2);return"M"+(ka.l-3.5)+","+(ka.t-.5+oa)+"h3v"+-oa+"h"+oa+"v-3h-"+(oa+3)+"ZM"+(ka.r+3.5)+","+(ka.t-.5+oa)+"h-3v"+-oa+"h"+-oa+"v-3h"+(oa+3)+"ZM"+(ka.r+3.5)+","+(ka.b+.5-oa)+"h-3v"+oa+"h"+-oa+"v3h"+(oa+3)+"ZM"+(ka.l-3.5)+","+(ka.b+.5-oa)+"h3v"+oa+"h"+oa+"v3h-"+(oa+3)+"Z"}function u(ka,oa,na,la,ia){for(var sa=!1,ta={},Aa=
{},Ka,Sa,db,eb,lb=(ia||{}).xaHash,ab=(ia||{}).yaHash,Ya=0;Ya<oa.length;Ya++){var hb=oa[Ya];for(Ka in na)if(hb[Ka]){for(db in hb)ia&&(lb[db]||ab[db])||("x"===db.charAt(0)?na:la)[db]||(ta[db]=Ka);for(Sa in la)ia&&(lb[Sa]||ab[Sa])||!hb[Sa]||(sa=!0)}for(Sa in la)if(hb[Sa])for(eb in hb)ia&&(lb[eb]||ab[eb])||("x"===eb.charAt(0)?na:la)[eb]||(Aa[eb]=Sa)}sa&&(A.extendFlat(ta,Aa),Aa={});oa={};na=[];for(db in ta)la=X(ka,db),na.push(la),oa[la._id]=la;db={};la=[];for(eb in Aa)ia=X(ka,eb),la.push(ia),db[ia._id]=
ia;return{xaHash:oa,yaHash:db,xaxes:na,yaxes:la,xLinks:ta,yLinks:Aa,isSubplotConstrained:sa}}function v(ka,oa){if(y){var na=void 0!==ka.onwheel?"wheel":"mousewheel";ka._onwheel&&ka.removeEventListener(na,ka._onwheel);ka._onwheel=oa;ka.addEventListener(na,oa,{passive:!1})}else void 0!==ka.onwheel?ka.onwheel=oa:void 0!==ka.onmousewheel?ka.onmousewheel=oa:ka.isAddedWheelEvent||(ka.isAddedWheelEvent=!0,ka.addEventListener("wheel",oa,{passive:!1}))}function x(ka){var oa=[],na;for(na in ka)oa.push(ka[na]);
return oa}var C=b("d3"),z=b("tinycolor2"),y=b("has-passive-events"),D=b("../../registry"),A=b("../../lib"),t=A.strTranslate,B=b("../../lib/svg_text_utils"),F=b("../../components/color"),I=b("../../components/drawing"),J=b("../../components/fx"),L=b("./axes"),H=b("../../lib/setcursor"),P=b("../../components/dragelement");G=b("../../components/dragelement/helpers");var M=G.selectingOrDrawing,N=G.freeMode,T=b("../../constants/alignment").FROM_TL,Q=b("../../lib/clear_gl_canvases"),U=b("../../plot_api/subroutines").redrawReglTraces,
S=b("../plots"),X=b("./axis_ids").getFromId,Z=b("./select").prepSelect,aa=b("./select").clearSelect,fa=b("./select").selectOnClick,ha=b("./scale_zoom"),ja=b("./constants"),ba=ja.MINDRAG,ma=ja.MINZOOM,qa=!0;K.exports={makeDragBox:function(ka,oa,na,la,ia,sa,ta,Aa){function Ka(){gb=oa.xaxis;ob=oa.yaxis;kb=gb._length;rb=ob._length;Ta=gb._offset;Xa=ob._offset;ub={};ub[gb._id]=gb;za={};za[ob._id]=ob;if(ta&&Aa)for(var ac=oa.overlays,Ac=0;Ac<ac.length;Ac++){var Zc=ac[Ac].xaxis;ub[Zc._id]=Zc;Zc=ac[Ac].yaxis;
za[Zc._id]=Zc}Da=x(ub);Ja=x(za);Lb=l(Da,Aa);Vb=l(Ja,ta);xc=!Vb&&!Lb;Fb=u(ka,ka._fullLayout._axisMatchGroups,ub,za);Mb=u(ka,ka._fullLayout._axisConstraintGroups,ub,za,Fb);ac=Mb.isSubplotConstrained||Fb.isSubplotConstrained;Gc=Aa||ac;Hc=ta||ac;ac=ka._fullLayout;Wc=ac._has("scattergl");ib=ac._has("splom");Yb=ac._has("svg")}function Sa(ac,Ac){var Zc=tb.gd;if(0<=Zc._fullLayout._activeShapeIndex)Zc._fullLayout._deactivateShape(Zc);else{var wc=Zc._fullLayout.clickmode;f(Zc);2!==ac||La||Ba();if(Ra)-1<wc.indexOf("select")&&
fa(Ac,Zc,Da,Ja,oa.id,tb),-1<wc.indexOf("event")&&J.click(Zc,Ac,oa.id);else if(1===ac&&La){var Dc=ta?ob:gb;ac="s"===ta||"w"===Aa?0:1;var ad=Dc._name+".range["+ac+"]";ac=h(Dc,ac);Ac="left";wc="middle";if(!Dc.fixedrange&&(ta?(wc="n"===ta?"top":"bottom","right"===Dc.side&&(Ac="right")):"e"===Aa&&(Ac="right"),Zc._context.showAxisRangeEntryBoxes))C.select(fb).call(B.makeEditable,{gd:Zc,immediate:!0,background:Zc._fullLayout.paper_bgcolor,text:String(ac),fill:Dc.tickfont?Dc.tickfont.color:"#444",horizontalAlign:Ac,
verticalAlign:wc}).on("edit",function(Rc){Rc=Dc.d2r(Rc);void 0!==Rc&&D.call("_guiRelayout",Zc,ad,Rc)})}}}function db(ac,Ac,Zc){ac=fb.getBoundingClientRect();Pb=Ac-ac.left;ec=Zc-ac.top;ka._fullLayout._calcInverseTransform(ka);Ac=A.apply3DTransform(ka._fullLayout._invTransform)(Pb,ec);Pb=Ac[0];ec=Ac[1];cc={l:Pb,r:Pb,w:0,t:ec,b:ec,h:0};Zb=ka._hmpixcount?ka._hmlumcount/ka._hmpixcount:z(ka._fullLayout.plot_bgcolor).getLuminance();Qb="M0,0H"+kb+"V"+rb+"H0V0";sb=!1;Gb="xy";Xb=!1;xb=n(Ha,Zb,Ta,Xa,Qb);Jb=
p(Ha,Ta,Xa)}function eb(ac,Ac){function Zc(){Gb="";cc.r=cc.l;cc.t=cc.b;Jb.attr("d","M0,0Z")}if(ka._transitioningWithDuration)return!1;ac=Math.max(0,Math.min(kb,oc*ac+Pb));Ac=Math.max(0,Math.min(rb,tc*Ac+ec));var wc=Math.abs(ac-Pb),Dc=Math.abs(Ac-ec);cc.l=Math.min(Pb,ac);cc.r=Math.max(Pb,ac);cc.t=Math.min(ec,Ac);cc.b=Math.max(ec,Ac);Mb.isSubplotConstrained?wc>ma||Dc>ma?(Gb="xy",wc/kb>Dc/rb?(Dc=wc*rb/kb,ec>Ac?cc.t=ec-Dc:cc.b=ec+Dc):(wc=Dc*kb/rb,Pb>ac?cc.l=Pb-wc:cc.r=Pb+wc),Jb.attr("d",r(cc))):Zc():
Fb.isSubplotConstrained?wc>ma||Dc>ma?(Gb="xy",ac=Math.min(cc.l/kb,(rb-cc.b)/rb),Ac=Math.max(cc.r/kb,(rb-cc.t)/rb),cc.l=ac*kb,cc.r=Ac*kb,cc.b=(1-ac)*rb,cc.t=(1-Ac)*rb,Jb.attr("d",r(cc))):Zc():!Vb||Dc<Math.min(Math.max(.6*wc,ba),ma)?wc<ba||!Lb?Zc():(cc.t=0,cc.b=rb,Gb="x",Jb.attr("d","M"+(cc.l-.5)+","+(ec-ma-.5)+"h-3v"+(2*ma+1)+"h3ZM"+(cc.r+.5)+","+(ec-ma-.5)+"h3v"+(2*ma+1)+"h-3Z")):!Lb||wc<Math.min(.6*Dc,ma)?(cc.l=0,cc.r=kb,Gb="y",Jb.attr("d","M"+(Pb-ma-.5)+","+(cc.t-.5)+"v-3h"+(2*ma+1)+"v3ZM"+(Pb-
ma-.5)+","+(cc.b+.5)+"v3h"+(2*ma+1)+"v-3Z")):(Gb="xy",Jb.attr("d",r(cc)));cc.w=cc.r-cc.l;cc.h=cc.b-cc.t;Gb&&(Xb=!0);ka._dragged=Xb;c(xb,Jb,cc,Qb,sb,Zb);lb();ka.emit("plotly_relayouting",dc);sb=!0}function lb(){dc={};if("xy"===Gb||"x"===Gb)a(Da,cc.l/kb,cc.r/kb,dc,Mb.xaxes),nb("x",dc);if("xy"===Gb||"y"===Gb)a(Ja,(rb-cc.b)/rb,(rb-cc.t)/rb,dc,Mb.yaxes),nb("y",dc)}function ab(){lb();f(ka);Ga();k(ka)}function Ya(ac){function Ac(Rc,Bc,id){if(!Rc.fixedrange){var jd=A.simpleMap(Rc.range,Rc.r2l),ld=jd[0]+(jd[1]-
jd[0])*Bc;Rc.range=jd.map(function(ke){return Rc.l2r(ld+(ke-ld)*id)})}}if(ka._context._scrollZoom.cartesian||ka._fullLayout._enablescrollzoom)if(tb.plotinfo.selection=!1,aa(ka),ka._transitioningWithDuration)ac.preventDefault(),ac.stopPropagation();else{Ka();clearTimeout(Qc);var Zc=-ac.deltaY;isFinite(Zc)||(Zc=ac.wheelDelta/10);if(isFinite(Zc)){Zc=Math.exp(-Math.min(Math.max(Zc,-20),20)/200);var wc=Uc.draglayer.select(".nsewdrag").node().getBoundingClientRect(),Dc=(ac.clientX-wc.left)/wc.width;wc=
(wc.bottom-ac.clientY)/wc.height;var ad;if(Gc){Aa||(Dc=.5);for(ad=0;ad<Da.length;ad++)Ac(Da[ad],Dc,Zc);nb("x");nc[2]*=Zc;nc[0]+=nc[2]*Dc*(1/Zc-1)}if(Hc){ta||(wc=.5);for(ad=0;ad<Ja.length;ad++)Ac(Ja[ad],wc,Zc);nb("y");nc[3]*=Zc;nc[1]+=nc[3]*(1-wc)*(1/Zc-1)}Na(nc);va();ka.emit("plotly_relayouting",dc);Qc=setTimeout(function(){nc=[0,0,kb,rb];Ga()},$c);ac.preventDefault()}else A.log("Did not find wheel motion attributes: ",ac)}}function hb(ac,Ac){function Zc(Bc,id,jd){for(var ld=1-id,ke,ud,td=0;td<Bc.length;td++){var Sd=
Bc[td];if(!Sd.fixedrange){ke=Sd;ud=jd/Sd._length;ud=Sd._rl[ld]+(Sd._rl[id]-Sd._rl[ld])/(1-(0<=ud?Math.min(ud,.9):1/(1/Math.max(ud,-.3)+3.222)));var be=Sd.l2r(ud);!1!==be&&void 0!==be&&(Sd.range[id]=be)}}return ke._length*(ke._rl[id]-ud)/(ke._rl[id]-ke._rl[ld])}ac*=oc;Ac*=tc;if(!ka._transitioningWithDuration){ka._fullLayout._replotting=!0;if("ew"===Lb||"ns"===Vb){var wc=Lb?-ac:0,Dc=Vb?-Ac:0;Fb.isSubplotConstrained&&(Lb&&Vb&&(Ac=(ac/kb-Ac/rb)/2,ac=Ac*kb,Ac=-Ac*rb,wc=-ac,Dc=-Ac),Vb?wc=-Dc*kb/rb:Dc=-wc*
rb/kb);Lb&&(g(Da,ac),nb("x"));Vb&&(g(Ja,Ac),nb("y"));Na([wc,Dc,kb,rb])}else{var ad="w"===Lb===("n"===Vb)?1:-1;Lb&&Vb&&(Mb.isSubplotConstrained||Fb.isSubplotConstrained)&&(Ac=(ac/kb+ad*Ac/rb)/2,ac=Ac*kb,Ac=ad*Ac*rb);"w"===Lb?ac=Zc(Da,0,ac):"e"===Lb?ac=Zc(Da,1,-ac):Lb||(ac=0);"n"===Vb?Ac=Zc(Ja,1,Ac):"s"===Vb?Ac=Zc(Ja,0,-Ac):Vb||(Ac=0);wc="w"===Lb?ac:0;Dc="n"===Vb?Ac:0;if(Mb.isSubplotConstrained&&!Fb.isSubplotConstrained||Fb.isSubplotConstrained&&Lb&&Vb&&0<ad){if(Fb.isSubplotConstrained||!Lb&&1===Vb.length){for(ad=
0;ad<Da.length;ad++)Da[ad].range=Da[ad]._r.slice(),ha(Da[ad],1-Ac/rb);ac=Ac*kb/rb;wc=ac/2}if(Fb.isSubplotConstrained||!Vb&&1===Lb.length){for(ad=0;ad<Ja.length;ad++)Ja[ad].range=Ja[ad]._r.slice(),ha(Ja[ad],1-ac/kb);Ac=ac*rb/kb;Dc=Ac/2}}Fb.isSubplotConstrained&&Vb||nb("x");Fb.isSubplotConstrained&&Lb||nb("y");ad=kb-ac;var Rc=rb-Ac;!Fb.isSubplotConstrained||Lb&&Vb||(Lb?(Dc=wc?0:ac*rb/kb,Rc=ad*rb/kb):(wc=Dc?0:Ac*kb/rb,ad=Rc*kb/rb));Na([wc,Dc,ad,Rc])}va();ka.emit("plotly_relayouting",dc)}}function nb(ac,
Ac){var Zc=Fb.isSubplotConstrained?{x:Ja,y:Da}[ac]:Fb[ac+"axes"];ac=Fb.isSubplotConstrained?{x:Da,y:Ja}[ac]:[];for(var wc=0;wc<Zc.length;wc++){var Dc=Zc[wc],ad=Dc._id;ad=Fb.xLinks[ad]||Fb.yLinks[ad];if(ad=ac[0]||ub[ad]||za[ad])Ac?(Ac[Dc._name+".range[0]"]=Ac[ad._name+".range[0]"],Ac[Dc._name+".range[1]"]=Ac[ad._name+".range[1]"]):Dc.range=ad.range.slice()}}function va(){function ac(Dc){for(Zc=0;Zc<Dc.length;Zc++)Dc[Zc].fixedrange||Ac.push(Dc[Zc]._id)}var Ac=[],Zc;Gc&&(ac(Da),ac(Mb.xaxes),ac(Fb.xaxes));
Hc&&(ac(Ja),ac(Mb.yaxes),ac(Fb.yaxes));dc={};for(Zc=0;Zc<Ac.length;Zc++){var wc=X(ka,Ac[Zc]);L.drawOne(ka,wc,{skipTitle:!0});dc[wc._name+".range[0]"]=wc.range[0];dc[wc._name+".range[1]"]=wc.range[1]}L.redrawComponents(ka,Ac)}function Ba(){if(!ka._transitioningWithDuration){var ac=ka._context.doubleClick,Ac=[];Lb&&(Ac=Ac.concat(Da));Vb&&(Ac=Ac.concat(Ja));Fb.xaxes&&(Ac=Ac.concat(Fb.xaxes));Fb.yaxes&&(Ac=Ac.concat(Fb.yaxes));var Zc={},wc;if("reset+autosize"===ac)for(ac="autosize",wc=0;wc<Ac.length;wc++){var Dc=
Ac[wc];if(Dc._rangeInitial&&(Dc.range[0]!==Dc._rangeInitial[0]||Dc.range[1]!==Dc._rangeInitial[1])||!Dc._rangeInitial&&!Dc.autorange){ac="reset";break}}if("autosize"===ac)for(wc=0;wc<Ac.length;wc++)Dc=Ac[wc],Dc.fixedrange||(Zc[Dc._name+".autorange"]=!0);else if("reset"===ac){if(Lb||Mb.isSubplotConstrained)Ac=Ac.concat(Mb.xaxes);Vb&&!Mb.isSubplotConstrained&&(Ac=Ac.concat(Mb.yaxes));Mb.isSubplotConstrained&&(Lb?Vb||(Ac=Ac.concat(Ja)):Ac=Ac.concat(Da));for(wc=0;wc<Ac.length;wc++)Dc=Ac[wc],Dc.fixedrange||
(Dc._rangeInitial?(ac=Dc._rangeInitial,Zc[Dc._name+".range[0]"]=ac[0],Zc[Dc._name+".range[1]"]=ac[1]):Zc[Dc._name+".autorange"]=!0)}ka.emit("plotly_doubleclick",null);D.call("_guiRelayout",ka,Zc)}}function Ga(){Na([0,0,kb,rb]);A.syncOrAsync([S.previousPromises,function(){ka._fullLayout._replotting=!1;D.call("_guiRelayout",ka,dc)}],ka)}function Na(ac){var Ac=ka._fullLayout,Zc=Ac._plots;Ac=Ac._subplots.cartesian;var wc;ib&&D.subplotsRegistry.splom.drag(ka);if(Wc)for(wc=0;wc<Ac.length;wc++){var Dc=Zc[Ac[wc]];
var ad=Dc.xaxis;var Rc=Dc.yaxis;if(Dc._scene){var Bc=A.simpleMap(ad.range,ad.r2l);Rc=A.simpleMap(Rc.range,Rc.r2l);Dc._scene.update({range:[Bc[0],Rc[0],Bc[1],Rc[1]]})}}if(ib||Wc)Q(ka),U(ka);if(Yb){Bc=ac[2]/gb._length;var id=ac[3]/ob._length;for(wc=0;wc<Ac.length;wc++){Dc=Zc[Ac[wc]];ad=Dc.xaxis;Rc=Dc.yaxis;var jd=(Hc||Fb.isSubplotConstrained)&&!Rc.fixedrange&&za[Rc._id];if((Gc||Fb.isSubplotConstrained)&&!ad.fixedrange&&ub[ad._id]){var ld=Bc;var ke=Aa||Fb.isSubplotConstrained?ac[0]:qb(ad,ld)}else Fb.xaHash[ad._id]?
(ld=Bc,ke=ac[0]*ad._length/gb._length):Fb.yaHash[ad._id]?(ld=id,ke="ns"===Vb?-ac[1]*ad._length/ob._length:qb(ad,ld,{n:"top",s:"bottom"}[Vb])):(ld=$a(ad,Bc,id),ke=Va(ad,ld));if(jd){jd=id;var ud=ta||Fb.isSubplotConstrained?ac[1]:qb(Rc,jd)}else Fb.yaHash[Rc._id]?(jd=id,ud=ac[1]*Rc._length/ob._length):Fb.xaHash[Rc._id]?(jd=Bc,ud="ew"===Lb?-ac[0]*Rc._length/gb._length:qb(Rc,jd,{e:"right",w:"left"}[Lb])):(jd=$a(Rc,Bc,id),ud=Va(Rc,jd));if(ld||jd){ld||(ld=1);jd||(jd=1);ad=ad._offset-ke/ld;Rc=Rc._offset-ud/
jd;Dc.clipRect.call(I.setTranslate,ke,ud).call(I.setScale,ld,jd);Dc.plot.call(I.setTranslate,ad,Rc).call(I.setScale,1/ld,1/jd);if(ld!==Dc.xScaleFactor||jd!==Dc.yScaleFactor)I.setPointGroupScale(Dc.zoomScalePts,ld,jd),I.setTextPointsScale(Dc.zoomScaleTxt,ld,jd);I.hideOutsideRangePoints(Dc.clipOnAxisFalseTraces,Dc);Dc.xScaleFactor=ld;Dc.yScaleFactor=jd}}}}function $a(ac,Ac,Zc){return ac.fixedrange?0:Gc&&Mb.xaHash[ac._id]?Ac:Hc&&(Mb.isSubplotConstrained?Mb.xaHash:Mb.yaHash)[ac._id]?Zc:0}function Va(ac,
Ac){return Ac?(ac.range=ac._r.slice(),ha(ac,Ac),qb(ac,Ac)):0}function qb(ac,Ac,Zc){return ac._length*(1-Ac)*T[Zc||ac.constraintoward||"middle"]}var Ha=ka._fullLayout._zoomlayer,Ra="nsew"===ta+Aa,La=1===(ta+Aa).length,gb,ob,ub,za,Da,Ja,Ta,Xa,kb,rb,Mb,Fb,Lb,Vb,xc,Gc,Hc,Wc,ib,Yb,dc,oc,tc;Ka();var Lc=e(Vb+Lb,ka._fullLayout.dragmode,Ra),fb=m(oa,ta+Aa+"drag",Lc,na,la,ia,sa);if(xc&&!Ra)return fb.onmousedown=null,fb.style.pointerEvents="none",fb;var tb={element:fb,gd:ka,plotinfo:oa,prepFn:function(ac,Ac,
Zc){var wc=tb.dragmode,Dc=ka._fullLayout.dragmode;Dc!==wc&&(tb.dragmode=Dc);Ka();oc=ka._fullLayout._invScaleX;tc=ka._fullLayout._invScaleY;xc||(Ra?ac.shiftKey?"pan"===Dc?Dc="zoom":M(Dc)||(Dc="pan"):ac.ctrlKey&&(Dc="pan"):Dc="pan");N(Dc)?tb.minDrag=1:tb.minDrag=void 0;M(Dc)?(tb.xaxes=Da,tb.yaxes=Ja,Z(ac,Ac,Zc,tb,Dc)):(tb.clickFn=Sa,M(wc)&&(tb.plotinfo.selection=!1,aa(ka)),xc||("zoom"===Dc?(tb.moveFn=eb,tb.doneFn=ab,tb.minDrag=1,db(ac,Ac,Zc)):"pan"===Dc&&(tb.moveFn=hb,tb.doneFn=Ga)));ka._fullLayout._redrag=
function(){var ad=ka._dragdata;ad&&ad.element===fb&&!M(ka._fullLayout.dragmode)&&(Ka(),Na([0,0,kb,rb]),tb.moveFn(ad.dx,ad.dy))}}};P.init(tb);var Pb,ec,cc,Zb,Qb,sb,Gb,xb,Jb,Xb,nc=[0,0,kb,rb],Qc=null,$c=ja.REDRAWDELAY,Uc=oa.mainplot?ka._fullLayout._plots[oa.mainplot]:oa;1!==ta.length*Aa.length&&v(fb,Ya);return fb},makeDragger:q,makeRectDragger:m,makeZoombox:n,makeCorners:p,updateZoombox:c,xyCorners:r,transitionZoombox:d,removeZoombox:f,showDoubleClickNotifier:k,attachWheelEventHandler:v}},{"../../components/color":643,
"../../components/dragelement":662,"../../components/dragelement/helpers":661,"../../components/drawing":665,"../../components/fx":683,"../../constants/alignment":745,"../../lib":778,"../../lib/clear_gl_canvases":762,"../../lib/setcursor":799,"../../lib/svg_text_utils":803,"../../plot_api/subroutines":818,"../../registry":911,"../plots":891,"./axes":828,"./axis_ids":831,"./constants":834,"./scale_zoom":846,"./select":847,d3:169,"has-passive-events":441,tinycolor2:576}],837:[function(b,K,G){var q=
b("d3"),m=b("../../components/fx"),l=b("../../components/dragelement"),h=b("../../lib/setcursor"),a=b("./dragbox").makeDragBox,g=b("./constants").DRAGGERSIZE;G.initInteractions=function(e){var n=e._fullLayout;if(e._context.staticPlot)q.select(e).selectAll(".drag").remove();else if(n._has("cartesian")||n._has("splom")){Object.keys(n._plots||{}).sort(function(c,d){return(n._plots[c].mainplot&&!0)===(n._plots[d].mainplot&&!0)?(c=c.split("y"),d=d.split("y"),c[0]===d[0]?Number(c[1]||1)-Number(d[1]||1):
Number(c[0]||1)-Number(d[0]||1)):n._plots[c].mainplot?1:-1}).forEach(function(c){var d=n._plots[c],f=d.xaxis,k=d.yaxis;if(!d.mainplot){var r=a(e,d,f._offset,k._offset,f._length,k._length,"ns","ew");r.onmousemove=function(v){e._fullLayout._rehover=function(){e._fullLayout._hoversubplot===c&&e._fullLayout._plots[c]&&m.hover(e,v,c)};m.hover(e,v,c);e._fullLayout._lasthover=r;e._fullLayout._hoversubplot=c};r.onmouseout=function(v){e._dragging||(e._fullLayout._hoversubplot=null,l.unhover(e,v))};e._context.showAxisDragHandles&&
(a(e,d,f._offset-g,k._offset-g,g,g,"n","w"),a(e,d,f._offset+f._length,k._offset-g,g,g,"n","e"),a(e,d,f._offset-g,k._offset+k._length,g,g,"s","w"),a(e,d,f._offset+f._length,k._offset+k._length,g,g,"s","e"))}if(e._context.showAxisDragHandles){if(c===f._mainSubplot){var u=f._mainLinePosition;"top"===f.side&&(u-=g);a(e,d,f._offset+.1*f._length,u,.8*f._length,g,"","ew");a(e,d,f._offset,u,.1*f._length,g,"","w");a(e,d,f._offset+.9*f._length,u,.1*f._length,g,"","e")}c===k._mainSubplot&&(f=k._mainLinePosition,
"right"!==k.side&&(f-=g),a(e,d,f,k._offset+.1*k._length,g,.8*k._length,"ns",""),a(e,d,f,k._offset+.9*k._length,g,.1*k._length,"s",""),a(e,d,f,k._offset,g,.1*k._length,"n",""))}});var p=n._hoverlayer.node();p.onmousemove=function(c){c.target=e._fullLayout._lasthover;m.hover(e,c,n._hoversubplot)};p.onclick=function(c){c.target=e._fullLayout._lasthover;m.click(e,c)};p.onmousedown=function(c){e._fullLayout._lasthover.onmousedown(c)};G.updateFx(e)}};G.updateFx=function(e){e=e._fullLayout;h(e._draggers,
"pan"===e.dragmode?"move":"crosshair")}},{"../../components/dragelement":662,"../../components/fx":683,"../../lib/setcursor":799,"./constants":834,"./dragbox":836,d3:169}],838:[function(b,K,G){K.exports={clearOutlineControllers:function(q){(q=q._fullLayout._zoomlayer)&&q.selectAll(".outline-controllers").remove()},clearSelect:function(q){var m=q._fullLayout._zoomlayer;m&&m.selectAll(".select-outline").remove();q._fullLayout._drawing=!1}}},{}],839:[function(b,K,G){function q(l,h){switch(l.type){case "log":return l.p2d(h);
case "date":return l.p2r(h,0,l.calendar);default:return l.p2r(h)}}var m=b("../../lib").strTranslate;K.exports={p2r:q,r2p:function(l,h){switch(l.type){case "log":return l.d2p(h);case "date":return l.r2p(h,0,l.calendar);default:return l.r2p(h)}},axValue:function(l){var h="y"===l._id.charAt(0)?1:0;return function(a){return q(l,a[h])}},getTransform:function(l){return m(l.xaxis._offset,l.yaxis._offset)}}},{"../../lib":778}],840:[function(b,K,G){var q=b("../../registry"),m=b("../../lib"),l=b("./axis_ids");
K.exports=function(h){return function(a,g){a=a[h];if(Array.isArray(a)){var e=q.subplotsRegistry.cartesian,n=e.idRegex,p=g._subplots,c=p.xaxis,d=p.yaxis;p=p.cartesian;for(var f=g._has("cartesian")||g._has("gl2d"),k=0;k<a.length;k++){var r=a[k];if(m.isPlainObject(r)){var u=l.cleanId(r.xref,"x",!1);r=l.cleanId(r.yref,"y",!1);var v=n.x.test(u),x=n.y.test(r);if(v||x){f||m.pushUnique(g._basePlotModules,e);var C=!1;v&&-1===c.indexOf(u)&&(c.push(u),C=!0);x&&-1===d.indexOf(r)&&(d.push(r),C=!0);C&&v&&x&&p.push(u+
r)}}}}}}},{"../../lib":778,"../../registry":911,"./axis_ids":831}],841:[function(b,K,G){function q(x,C,z){return p.ensureSingle(x,C,z,function(y){y.datum(z)})}function m(x,C,z,y,D){for(var A=r.traceLayerClasses,t=x._fullLayout,B=t._modules,F,I,J=[],L=[],H=0;H<B.length;H++){F=B[H];I=F.name;var P=n.modules[I].categories;if(P.svg){var M=F.layerName||I+"layer";F=F.plot;z=f(z,F);I=z[0];z=z[1];I.length&&J.push({i:A.indexOf(M),className:M,plotMethod:F,cdModule:I});P.zoomScale&&L.push("."+M)}}J.sort(function(N,
T){return N.i-T.i});A=C.plot.selectAll("g.mlayer").data(J,function(N){return N.className});A.enter().append("g").attr("class",function(N){return N.className}).classed("mlayer",!0).classed("rangeplot",C.isRangePlot);A.exit().remove();A.order();A.each(function(N){var T=e.select(this),Q=N.className;N.plotMethod(x,C,N.cdModule,T,y,D);-1===r.clipOnAxisFalseQuery.indexOf("."+Q)&&d.setClipUrl(T,C.layerClipId,x)});t._has("scattergl")&&(F=n.getModule("scattergl"),I=f(z,F)[0],F.plot(x,C,I));x._context.staticPlot||
(C._hasClipOnAxisFalse&&(C.clipOnAxisFalseTraces=C.plot.selectAll(r.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),L.length&&(t=C.plot.selectAll(L.join(",")).selectAll(".trace"),C.zoomScalePts=t.selectAll("path.point"),C.zoomScaleTxt=t.selectAll(".textpoint")))}function l(x){x=x._fullLayout;var C=x._subplots.cartesian,z=C.length,y,D=[],A=[];for(y=0;y<z;y++){var t=C[y];var B=x._plots[t];var F=B.xaxis;var I=B.yaxis;F=F._mainAxis._id+I._mainAxis._id;I=x._plots[F];B.overlays=[];F!==t&&I?(B.mainplot=
F,B.mainplotinfo=I,A.push(t)):(B.mainplot=void 0,B.mainplotinfo=void 0,D.push(t))}for(y=0;y<A.length;y++)t=A[y],B=x._plots[t],B.mainplotinfo.overlays.push(B);C=D.concat(A);D=Array(z);for(y=0;y<z;y++){t=C[y];B=x._plots[t];F=B.xaxis;I=B.yaxis;F=[t,F.layer,I.layer,F.overlaying||"",I.overlaying||""];for(t=0;t<B.overlays.length;t++)F.push(B.overlays[t].id);D[y]=F}return D}function h(x,C){var z=C.plotgroup,y=C.id,D=r.layerValue2layerClass[C.xaxis.layer],A=r.layerValue2layerClass[C.yaxis.layer];x=x._fullLayout._hasOnlyLargeSploms;
if(C.mainplot){z=C.mainplotinfo;var t=z.plotgroup,B=y+"-x",F=y+"-y";C.gridlayer=z.gridlayer;C.zerolinelayer=z.zerolinelayer;v(z.overlinesBelow,"path",B);v(z.overlinesBelow,"path",F);v(z.overaxesBelow,"g",B);v(z.overaxesBelow,"g",F);C.plot=v(z.overplot,"g",y);v(z.overlinesAbove,"path",B);v(z.overlinesAbove,"path",F);v(z.overaxesAbove,"g",B);v(z.overaxesAbove,"g",F);C.xlines=t.select(".overlines-"+D).select("."+B);C.ylines=t.select(".overlines-"+A).select("."+F);C.xaxislayer=t.select(".overaxes-"+D).select("."+
B);C.yaxislayer=t.select(".overaxes-"+A).select("."+F)}else x?(C.xlines=v(z,"path","xlines-above"),C.ylines=v(z,"path","ylines-above"),C.xaxislayer=v(z,"g","xaxislayer-above"),C.yaxislayer=v(z,"g","yaxislayer-above")):(y=v(z,"g","layer-subplot"),C.shapelayer=v(y,"g","shapelayer"),C.imagelayer=v(y,"g","imagelayer"),C.gridlayer=v(z,"g","gridlayer"),C.zerolinelayer=v(z,"g","zerolinelayer"),v(z,"path","xlines-below"),v(z,"path","ylines-below"),C.overlinesBelow=v(z,"g","overlines-below"),v(z,"g","xaxislayer-below"),
v(z,"g","yaxislayer-below"),C.overaxesBelow=v(z,"g","overaxes-below"),C.plot=v(z,"g","plot"),C.overplot=v(z,"g","overplot"),C.xlines=v(z,"path","xlines-above"),C.ylines=v(z,"path","ylines-above"),C.overlinesAbove=v(z,"g","overlines-above"),v(z,"g","xaxislayer-above"),v(z,"g","yaxislayer-above"),C.overaxesAbove=v(z,"g","overaxes-above"),C.xlines=z.select(".xlines-"+D),C.ylines=z.select(".ylines-"+A),C.xaxislayer=z.select(".xaxislayer-"+D),C.yaxislayer=z.select(".yaxislayer-"+A));x||(q(C.gridlayer,
"g",C.xaxis._id),q(C.gridlayer,"g",C.yaxis._id),C.gridlayer.selectAll("g").map(function(I){return I[0]}).sort(k.idSort));C.xlines.style("fill","none").classed("crisp",!0);C.ylines.style("fill","none").classed("crisp",!0)}function a(x,C){if(x){var z={};x.each(function(t){t=t[0];e.select(this).remove();g(t,C);z[t]=!0});for(var y in C._plots){x=C._plots[y].overlays||[];for(var D=0;D<x.length;D++){var A=x[D];z[A.id]&&A.plot.selectAll(".trace").remove()}}}}function g(x,C){C._draggers.selectAll("g."+x).remove();
C._defs.select("#clip"+C._uid+x+"plot").remove()}var e=b("d3"),n=b("../../registry"),p=b("../../lib"),c=b("../plots"),d=b("../../components/drawing"),f=b("../get_data").getModuleCalcData,k=b("./axis_ids"),r=b("./constants"),u=b("../../constants/xmlns_namespaces"),v=p.ensureSingle;G.name="cartesian";G.attr=["xaxis","yaxis"];G.idRoot=["x","y"];G.idRegex=r.idRegex;G.attrRegex=r.attrRegex;G.attributes=b("./attributes");G.layoutAttributes=b("./layout_attributes");G.supplyLayoutDefaults=b("./layout_defaults");
G.transitionAxes=b("./transition_axes");G.finalizeSubplots=function(x,C){var z=C._subplots;C=z.xaxis;var y=z.yaxis,D=z.cartesian;z=D.concat(z.gl2d||[]);var A={},t={},B;for(B=0;B<z.length;B++){var F=z[B].split("y");A[F[0]]=1;t["y"+F[1]]=1}for(B=0;B<C.length;B++)if(F=C[B],!A[F]){var I=(x[k.id2name(F)]||{}).anchor;r.idRegex.y.test(I)||(I="y");D.push(F+I);z.push(F+I);t[I]||(t[I]=1,p.pushUnique(y,I))}for(B=0;B<y.length;B++)I=y[B],t[I]||(F=(x[k.id2name(I)]||{}).anchor,r.idRegex.x.test(F)||(F="x"),D.push(F+
I),z.push(F+I),A[F]||(A[F]=1,p.pushUnique(C,F)));if(!z.length){I=F="";for(var J in x)if(r.attrRegex.test(J))if("x"===J.charAt(0)){if(!F||+J.substr(5)<+F.substr(5))F=J}else if(!I||+J.substr(5)<+I.substr(5))I=J;F=F?k.name2id(F):"x";I=I?k.name2id(I):"y";C.push(F);y.push(I);D.push(F+I)}};G.plot=function(x,C,z,y){var D=x._fullLayout,A=D._subplots.cartesian,t=x.calcdata,B;if(!Array.isArray(C))for(C=[],B=0;B<t.length;B++)C.push(B);for(B=0;B<A.length;B++){for(var F=A[B],I=D._plots[F],J=[],L,H=0;H<t.length;H++){var P=
t[H],M=P[0].trace;if(M.xaxis+M.yaxis===F){if(-1!==C.indexOf(M.index)||M.carpet)L&&L[0].trace.xaxis+L[0].trace.yaxis===F&&-1!==["tonextx","tonexty","tonext"].indexOf(M.fill)&&-1===J.indexOf(L)&&J.push(L),J.push(P);L=P}}m(x,I,J,z,y)}};G.clean=function(x,C,z,y){var D=y._plots||{};x=C._plots||{};z=y._subplots||{};var A;if(y._hasOnlyLargeSploms&&!C._hasOnlyLargeSploms)for(A in D){var t=D[A];t.plotgroup&&t.plotgroup.remove()}t=y._has&&y._has("gl");var B=C._has&&C._has("gl");if(t&&!B)for(A in D)t=D[A],t._scene&&
t._scene.destroy();if(z.xaxis&&z.yaxis)for(D=k.listIds({_fullLayout:y}),A=0;A<D.length;A++)t=D[A],C[k.id2name(t)]||y._infolayer.selectAll(".g-"+t+"title").remove();A=y._has&&y._has("cartesian");C=C._has&&C._has("cartesian");if(A&&!C)a(y._cartesianlayer.selectAll(".subplot"),y),y._defs.selectAll(".axesclip").remove(),delete y._axisConstraintGroups,delete y._axisMatchGroups;else if(z.cartesian)for(A=0;A<z.cartesian.length;A++)C=z.cartesian[A],x[C]||(y._cartesianlayer.selectAll("."+C+",."+C+"-x,."+C+
"-y").remove(),g(C,y))};G.drawFramework=function(x){var C=x._fullLayout,z=l(x);z=C._cartesianlayer.selectAll(".subplot").data(z,String);z.enter().append("g").attr("class",function(y){return"subplot "+y[0]});z.order();z.exit().call(a,C);z.each(function(y){y=y[0];var D=C._plots[y];D.plotgroup=e.select(this);h(x,D);D.draglayer=v(C._draggers,"g",y)})};G.rangePlot=function(x,C,z){h(x,C);m(x,C,z);c.style(x)};G.toSVG=function(x){var C=x._fullLayout._glimages,z=e.select(x).selectAll(".svg-container");z.filter(function(y,
D){return D===z.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var y=this.toDataURL("image/png");C.append("svg:image").attr({xmlns:u.svg,"xlink:href":y,preserveAspectRatio:"none",x:0,y:0,width:this.width,height:this.height})})};G.updateFx=b("./graph_interact").updateFx},{"../../components/drawing":665,"../../constants/xmlns_namespaces":754,"../../lib":778,"../../registry":911,"../get_data":865,"../plots":891,"./attributes":826,"./axis_ids":831,"./constants":834,"./graph_interact":837,
"./layout_attributes":842,"./layout_defaults":843,"./transition_axes":852,d3:169}],842:[function(b,K,G){G=b("../font_attributes");var q=b("../../components/color/attributes"),m=b("../../components/drawing/attributes").dash,l=b("../../lib/extend").extendFlat,h=b("../../plot_api/plot_template").templatedArray;b("../../constants/docs");b("../../constants/docs");var a=b("../../constants/numerical").ONEDAY;b=b("./constants");var g=b.HOUR_PATTERN,e=b.WEEKDAY_PATTERN;K.exports={visible:{valType:"boolean",
editType:"plot"},color:{valType:"color",dflt:q.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:G({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:"- linear log date category multicategory".split(" "),dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,
!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",
values:[b.idRegex.x.toString(),b.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:"left center right top middle bottom".split(" "),editType:"plot"},matches:{valType:"enumerated",values:[b.idRegex.x.toString(),b.idRegex.y.toString()],editType:"calc"},rangebreaks:h("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",
items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[e,g,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:a},editType:"calc"}),tickmode:{valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},nticks:{valType:"integer",min:0,dflt:0,editType:"ticks"},
tick0:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},dtick:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},tickvals:{valType:"data_array",editType:"ticks"},ticktext:{valType:"data_array",editType:"ticks"},ticks:{valType:"enumerated",values:["outside","inside",""],editType:"ticks"},tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},
ticklabelposition:{valType:"enumerated",values:"outside;inside;outside top;inside top;outside left;inside left;outside right;inside right;outside bottom;inside bottom".split(";"),dflt:"outside",editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:{valType:"number",min:0,dflt:5,editType:"ticks"},tickwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},tickcolor:{valType:"color",dflt:q.defaultLine,editType:"ticks"},showticklabels:{valType:"boolean",
dflt:!0,editType:"ticks"},automargin:{valType:"boolean",dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:l({},m,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"data",editType:"none"},tickfont:G({editType:"ticks"}),
tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",
values:"none e E power SI B".split(" "),dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks"},tickformatstops:h("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},
editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none"},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:q.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:{valType:"boolean",editType:"ticks"},gridcolor:{valType:"color",dflt:q.lightLine,editType:"ticks"},gridwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",
dflt:q.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:q.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",b.idRegex.x.toString(),b.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",
b.idRegex.x.toString(),b.idRegex.y.toString()],editType:"plot"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:"trace;category ascending;category descending;array;total ascending;total descending;min ascending;min descending;max ascending;max descending;sum ascending;sum descending;mean ascending;mean descending;median ascending;median descending".split(";"),
dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:G({editType:"ticks"})}}},{"../../components/color/attributes":642,"../../components/drawing/attributes":664,"../../constants/docs":748,"../../constants/numerical":753,"../../lib/extend":768,"../../plot_api/plot_template":817,"../font_attributes":856,
"./constants":834}],843:[function(b,K,G){function q(z,y,D){Array.isArray(z[y])?z[y].push(D):z[y]=[D]}var m=b("../../lib"),l=b("../../components/color"),h=b("../../components/fx/helpers").isUnifiedHover,a=b("../../components/fx/hovermode_defaults"),g=b("../../plot_api/plot_template"),e=b("../layout_attributes"),n=b("./layout_attributes"),p=b("./type_defaults"),c=b("./axis_defaults"),d=b("./constraints"),f=b("./position_defaults"),k=b("./axis_ids"),r=k.id2name,u=k.name2id,v=b("./constants").AX_ID_PATTERN;
b=b("../../registry");var x=b.traceIs,C=b.getComponentMethod;K.exports=function(z,y,D){function A(){ta._traceIndices=(L[la]||[]).map(function(ab){return ab._expandedIndex});ta._annIndices=[];ta._shapeIndices=[];ta._imgIndices=[];ta._subplotsWith=[];ta._counterAxes=[];ta._name=ta._attr=la;ta._id=ia}function t(ab,Ya){return m.coerce(sa,ta,n,ab,Ya)}function B(ab,Ya){return m.coerce2(sa,ta,n,ab,Ya)}function F(ab,Ya){ab="x"===ab?ba:ma;for(var hb=[],nb=0;nb<ab.length;nb++){var va=ab[nb];va===Ya||(z[va]||
{}).overlaying||hb.push(u(va))}return hb}function I(){var ab=sa.matches;v.test(ab)&&-1===qa.indexOf(ab)&&(ka[ab]=sa.type,oa=Object.keys(ka))}var J=y.autotypenumbers,L={},H={},P={},M={},N={},T={},Q={},U={},S={},X={},Z,aa;for(Z=0;Z<D.length;Z++){var fa=D[Z];if(x(fa,"cartesian")||x(fa,"gl2d")){if(fa.xaxis){var ha=r(fa.xaxis);q(L,ha,fa)}else if(fa.xaxes)for(aa=0;aa<fa.xaxes.length;aa++)q(L,r(fa.xaxes[aa]),fa);if(fa.yaxis){var ja=r(fa.yaxis);q(L,ja,fa)}else if(fa.yaxes)for(aa=0;aa<fa.yaxes.length;aa++)q(L,
r(fa.yaxes[aa]),fa);"funnel"===fa.type?"h"===fa.orientation?(ha&&(H[ha]=!0),ja&&(Q[ja]=!0)):ja&&(P[ja]=!0):"image"===fa.type?(ja&&(U[ja]=!0),ha&&(U[ha]=!0)):(ja&&(N[ja]=!0,T[ja]=!0),(!x(fa,"carpet")||"carpet"===fa.type&&!fa._cheater)&&ha&&(M[ha]=!0));"carpet"===fa.type&&fa._cheater&&ha&&(H[ha]=!0);x(fa,"2dMap")&&(S[ha]=!0,S[ja]=!0);x(fa,"oriented")&&(X["h"===fa.orientation?ja:ha]=!0)}}aa=y._subplots;Z=aa.xaxis;ha=aa.yaxis;var ba=m.simpleMap(Z,r),ma=m.simpleMap(ha,r);aa=ba.concat(ma);fa=l.background;
Z.length&&ha.length&&(fa=m.coerce(z,y,e,"plot_bgcolor"));fa=l.combine(fa,y.paper_bgcolor);ha={x:ha,y:Z};var qa=ha.x.concat(ha.y),ka={},oa=[];ja=a(z,y,D);var na=h(ja);for(Z=0;Z<aa.length;Z++){var la=aa[Z];var ia=u(la);D=la.charAt(0);m.isPlainObject(z[la])||(z[la]={});var sa=z[la];var ta=g.newContainer(y,la,D+"axis");A();var Aa={letter:D,font:y.font,outerTicks:S[la],showGrid:!X[la],data:L[la]||[],bgColor:fa,calendar:y.calendar,automargin:!0,visibleDflt:"x"===D&&!M[la]&&H[la]||"y"===D&&!N[la]&&P[la],
reverseDflt:"y"===D&&(!T[la]&&Q[la]||U[la]),autotypenumbersDflt:J,splomStash:((y._splomAxes||{})[D]||{})[ia]};t("uirevision",y.uirevision);p(sa,ta,t,Aa);c(sa,ta,t,Aa,y);Aa=na&&D===ja.charAt(0);var Ka=B("spikecolor",na?ta.color:void 0),Sa=B("spikethickness",na?1.5:void 0),db=B("spikedash",na?"dot":void 0),eb=B("spikemode",na?"across":void 0),lb=B("spikesnap",na?"hovered data":void 0);t("showspikes",!!Aa||!!Ka||!!Sa||!!db||!!eb||!!lb)||(delete ta.spikecolor,delete ta.spikethickness,delete ta.spikedash,
delete ta.spikemode,delete ta.spikesnap);f(sa,ta,t,{letter:D,counterAxes:ha[D],overlayableAxes:F(D,la),grid:y.grid});t("title.standoff");I();ta._input=sa}for(Z=0;Z<oa.length;)ia=oa[Z++],la=r(ia),D=la.charAt(0),m.isPlainObject(z[la])||(z[la]={}),sa=z[la],ta=g.newContainer(y,la,D+"axis"),A(),H={letter:D,font:y.font,outerTicks:S[la],showGrid:!X[la],data:[],bgColor:fa,calendar:y.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:J,splomStash:((y._splomAxes||{})[D]||{})[ia]},t("uirevision",
y.uirevision),ta.type=ka[ia]||"linear",c(sa,ta,t,H,y),f(sa,ta,t,{letter:D,counterAxes:ha[D],overlayableAxes:F(D,la),grid:y.grid}),t("fixedrange"),I(),ta._input=sa;J=C("rangeslider","handleDefaults");S=C("rangeselector","handleDefaults");for(Z=0;Z<ba.length;Z++)la=ba[Z],sa=z[la],ta=y[la],J(z,y,la),"date"===ta.type&&S(sa,ta,y,ma,ta.calendar),t("fixedrange");for(Z=0;Z<ma.length;Z++)la=ma[Z],sa=z[la],ta=y[la],J=y[r(ta.anchor)],J=C("rangeslider","isVisible")(J),t("fixedrange",J);d.handleDefaults(z,y,{axIds:qa.concat(oa).sort(k.idSort),
axHasImage:U})}},{"../../components/color":643,"../../components/fx/helpers":679,"../../components/fx/hovermode_defaults":682,"../../lib":778,"../../plot_api/plot_template":817,"../../registry":911,"../layout_attributes":882,"./axis_defaults":830,"./axis_ids":831,"./constants":834,"./constraints":835,"./layout_attributes":842,"./position_defaults":845,"./type_defaults":853}],844:[function(b,K,G){var q=b("tinycolor2").mix,m=b("../../components/color/attributes").lightFraction,l=b("../../lib");K.exports=
function(h,a,g,e){function n(f,k){return l.coerce2(h,a,e.attributes,f,k)}e=e||{};var p=e.dfltColor,c=n("linecolor",p),d=n("linewidth");g("showline",e.showLine||!!c||!!d)||(delete a.linecolor,delete a.linewidth);c=q(p,e.bgColor,e.blend||m).toRgbString();c=n("gridcolor",c);d=n("gridwidth");g("showgrid",e.showGrid||!!c||!!d)||(delete a.gridcolor,delete a.gridwidth);e.noZeroLine||(p=n("zerolinecolor",p),c=n("zerolinewidth"),g("zeroline",e.showGrid||!!p||!!c)||(delete a.zerolinecolor,delete a.zerolinewidth))}},
{"../../components/color/attributes":642,"../../lib":778,tinycolor2:576}],845:[function(b,K,G){var q=b("fast-isnumeric"),m=b("../../lib");K.exports=function(l,h,a,g){var e=g.counterAxes||[],n=g.overlayableAxes||[],p=g.letter;g=g.grid;if(g){var c=g._domains[p][g._axisMap[h._id]];var d=g._anchors[h._id];if(c){var f=g[p+"side"].split(" ")[0];var k=g.domain[p]["right"===f||"top"===f?1:0]}}c=c||[0,1];d=d||(q(l.position)?"free":e[0]||"free");f=f||("x"===p?"bottom":"left");k=k||0;"free"===m.coerce(l,h,{anchor:{valType:"enumerated",
values:["free"].concat(e),dflt:d}},"anchor")&&a("position",k);m.coerce(l,h,{side:{valType:"enumerated",values:"x"===p?["bottom","top"]:["left","right"],dflt:f}},"side");e=!1;n.length&&(e=m.coerce(l,h,{overlaying:{valType:"enumerated",values:[!1].concat(n),dflt:!1}},"overlaying"));e||(n=a("domain",c),n[0]>n[1]-1/4096&&(h.domain=c),m.noneOrAll(l.domain,h.domain,c));a("layer");return h}},{"../../lib":778,"fast-isnumeric":241}],846:[function(b,K,G){var q=b("../../constants/alignment").FROM_BL;K.exports=
function(m,l,h){void 0===h&&(h=q[m.constraintoward||"center"]);var a=[m.r2l(m.range[0]),m.r2l(m.range[1])];h=a[0]+(a[1]-a[0])*h;m.range=m._input.range=[m.l2r(h+(a[0]-h)*l),m.l2r(h+(a[1]-h)*l)];m.setScale()}},{"../../constants/alignment":745}],847:[function(b,K,G){function q(ha,ja,ba,ma,qa,ka,oa){var na=ja._hoverdata,la=-1<ja._fullLayout.clickmode.indexOf("event"),ia=[],sa;if(na&&Array.isArray(na)&&!0!==na[0].hoverOnBox){a(ha,ja,ka);ba=e(ja,ba,ma,qa);na=na[0];ma=-1;qa=[];var ta;for(ta=0;ta<ba.length;ta++){var Aa=
ba[ta];if(na.fullData._expandedIndex===Aa.cd[0].trace._expandedIndex){if(!0===na.hoverOnBox)break;void 0!==na.pointNumber?ma=na.pointNumber:void 0!==na.binNumber&&(ma=na.binNumber,qa=na.pointNumbers);break}}Aa={pointNumber:ma,pointNumbers:qa,searchInfo:Aa};if(0<Aa.pointNumbers.length)a:{ma=[];for(na=0;na<ba.length;na++)qa=ba[na],qa.cd[0].trace.selectedpoints&&0<qa.cd[0].trace.selectedpoints.length&&ma.push(qa);if(1===ma.length&&(na=ma[0]===Aa.searchInfo)&&(ma=Aa.searchInfo.cd[0].trace,ma.selectedpoints.length===
Aa.pointNumbers.length)){for(na=0;na<Aa.pointNumbers.length;na++)if(0>ma.selectedpoints.indexOf(Aa.pointNumbers[na])){na=!1;break a}na=!0;break a}na=!1}else{a:{for(ma=na=0;ma<ba.length;ma++)if(qa=ba[ma],qa=qa.cd[0].trace,qa.selectedpoints){if(1<qa.selectedpoints.length){na=!1;break a}na+=qa.selectedpoints.length;if(1<na){na=!1;break a}}na=1===na}na=na&&(sa=n(Aa))}if(na){oa&&oa.remove();for(sa=0;sa<ba.length;sa++)oa=ba[sa],oa._module.selectPoints(oa,!1);p(ja,ba);g(ka);la&&ja.emit("plotly_deselect",
null)}else{ha=ha.shiftKey&&(void 0!==sa?sa:n(Aa));ha={pointNumber:Aa.pointNumber,searchInfo:Aa.searchInfo,subtract:ha};sa=ka.selectionDefs.concat([ha]);Aa=h(sa);for(sa=0;sa<ba.length;sa++)if(na=ba[sa]._module.selectPoints(ba[sa],Aa),na=d(na,ba[sa]),ia.length)for(ma=0;ma<na.length;ma++)ia.push(na[ma]);else ia=na;ia={points:ia};p(ja,ba,ia);ha&&ka&&ka.selectionDefs.push(ha);oa&&(ba=ka.mergedPolygons,ha=A(ka.dragmode),B(f(ba,ha),oa,ka));la&&ja.emit("plotly_selected",ia)}}}function m(ha){return"pointNumber"in
ha&&"searchInfo"in ha}function l(ha){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(ja,ba,ma,qa){return qa.cd[0].trace._expandedIndex===ha.searchInfo.cd[0].trace._expandedIndex&&ma===ha.pointNumber},isRect:!1,degenerate:!1,subtract:ha.subtract}}function h(ha){for(var ja=[],ba=m(ha[0])?0:ha[0][0][0],ma=ba,qa=m(ha[0])?0:ha[0][0][1],ka=qa,oa=0;oa<ha.length;oa++)if(m(ha[oa]))ja.push(l(ha[oa]));else{var na=L.tester(ha[oa]);na.subtract=ha[oa].subtract;ja.push(na);ba=Math.min(ba,na.xmin);ma=
Math.max(ma,na.xmax);qa=Math.min(qa,na.ymin);ka=Math.max(ka,na.ymax)}return{xmin:ba,xmax:ma,ymin:qa,ymax:ka,pts:[],contains:function(la,ia,sa,ta){for(var Aa=!1,Ka=0;Ka<ja.length;Ka++)ja[Ka].contains(la,ia,sa,ta)&&(Aa=!1===ja[Ka].subtract);return Aa},isRect:!1,degenerate:!1}}function a(ha,ja,ba){ja._fullLayout._drawing=!1;var ma=ja._fullLayout,qa=ba.plotinfo,ka=ba.dragmode,oa=ma._lastSelectedSubplot&&ma._lastSelectedSubplot===qa.id;ha=(ha.shiftKey||ha.altKey)&&!(D(ka)&&A(ka));oa&&ha&&qa.selection&&
qa.selection.selectionDefs&&!ba.selectionDefs?(ba.selectionDefs=qa.selection.selectionDefs,ba.mergedPolygons=qa.selection.mergedPolygons):ha&&qa.selection||g(ba);oa||(X(ja),ma._lastSelectedSubplot=qa.id)}function g(ha){var ja=ha.dragmode,ba=ha.plotinfo,ma=ha.gd;0<=ma._fullLayout._activeShapeIndex&&ma._fullLayout._deactivateShape(ma);D(ja)&&(ja=ma._fullLayout._zoomlayer.selectAll(".select-outline-"+ba.id))&&ma._fullLayout._drawing&&((ja=I(ja,ha))&&r.call("_guiRelayout",ma,{shapes:ja}),ma._fullLayout._drawing=
!1);ba.selection={};ba.selection.selectionDefs=ha.selectionDefs=[];ba.selection.mergedPolygons=ha.mergedPolygons=[]}function e(ha,ja,ba,ma){function qa(ta,Aa,Ka,Sa){return{_module:ta,cd:Aa,xaxis:Ka,yaxis:Sa}}var ka=[],oa=ja.map(function(ta){return ta._id}),na=ba.map(function(ta){return ta._id}),la;for(la=0;la<ha.calcdata.length;la++){var ia=ha.calcdata[la];var sa=ia[0].trace;!0===sa.visible&&sa._module&&sa._module.selectPoints&&(!ma||sa.subplot!==ma&&sa.geo!==ma?"splom"===sa.type&&sa._xaxes[oa[0]]&&
sa._yaxes[na[0]]?(ia=qa(sa._module,ia,ja[0],ba[0]),ia.scene=ha._fullLayout._splomScenes[sa.uid],ka.push(ia)):"sankey"===sa.type?(sa=qa(sa._module,ia,ja[0],ba[0]),ka.push(sa)):-1!==oa.indexOf(sa.xaxis)&&-1!==na.indexOf(sa.yaxis)&&ka.push(qa(sa._module,ia,P(ha,sa.xaxis),P(ha,sa.yaxis))):ka.push(qa(sa._module,ia,ja[0],ba[0])))}return ka}function n(ha){var ja=ha.searchInfo.cd[0].trace,ba=ha.pointNumber;ha=ha.pointNumbers;ba=0<ha.length?ha[0]:ba;return ja.selectedpoints?-1<ja.selectedpoints.indexOf(ba):
!1}function p(ha,ja,ba){var ma;for(ma=0;ma<ja.length;ma++){var qa=ja[ma].cd[0].trace._fullInput;var ka=ha._fullLayout._tracePreGUI[qa.uid]||{};void 0===ka.selectedpoints&&(ka.selectedpoints=qa._input.selectedpoints||null)}if(ba){ba=ba.points||[];for(ma=0;ma<ja.length;ma++){var oa=ja[ma].cd[0].trace;oa._input.selectedpoints=oa._fullInput.selectedpoints=[];oa._fullInput!==oa&&(oa.selectedpoints=[])}for(ma=0;ma<ba.length;ma++){qa=ba[ma];ka=qa.data;var na=qa.fullData;qa.pointIndices?([].push.apply(ka.selectedpoints,
qa.pointIndices),oa._fullInput!==oa&&[].push.apply(na.selectedpoints,qa.pointIndices)):(ka.selectedpoints.push(qa.pointIndex),oa._fullInput!==oa&&na.selectedpoints.push(qa.pointIndex))}}else for(ma=0;ma<ja.length;ma++)oa=ja[ma].cd[0].trace,delete oa.selectedpoints,delete oa._input.selectedpoints,oa._fullInput!==oa&&delete oa._fullInput.selectedpoints;qa=!1;for(ma=0;ma<ja.length;ma++)if(ka=ja[ma],ba=ka.cd,oa=ba[0].trace,r.traceIs(oa,"regl")&&(qa=!0),oa=ka._module,oa=oa.styleOnSelect||oa.style)oa(ha,
ba,ba[0].node3),ba[0].nodeRangePlot3&&oa(ha,ba,ba[0].nodeRangePlot3);qa&&(M(ha),N(ha))}function c(ha,ja,ba){if(ba)return ha=k.difference({regions:ha,inverted:!1},{regions:[ja],inverted:!1}),ha.regions;ha=k.union({regions:ha,inverted:!1},{regions:[ja],inverted:!1});return ha.regions}function d(ha,ja){if(Array.isArray(ha)){var ba=ja.cd;ja=ja.cd[0].trace;for(var ma=0;ma<ha.length;ma++)ha[ma]=C(ha[ma],ja,ba)}return ha}function f(ha,ja){for(var ba=[],ma=0;ma<ha.length;ma++){ba[ma]=[];for(var qa=0;qa<ha[ma].length;qa++){ba[ma][qa]=
[];ba[ma][qa][0]=qa?"L":"M";for(var ka=0;ka<ha[ma][qa].length;ka++)ba[ma][qa].push(ha[ma][qa][ka])}ja||ba[ma].push(["Z",ba[ma][0][1],ba[ma][0][2]])}return ba}var k=b("polybooljs"),r=b("../../registry"),u=b("../../components/drawing").dashStyle,v=b("../../components/color"),x=b("../../components/fx"),C=b("../../components/fx/helpers").makeEventData;G=b("../../components/dragelement/helpers");var z=G.freeMode,y=G.rectMode,D=G.drawMode,A=G.openMode,t=G.selectMode,B=b("../../components/shapes/draw_newshape/display_outlines"),
F=b("../../components/shapes/draw_newshape/helpers").handleEllipse,I=b("../../components/shapes/draw_newshape/newshapes"),J=b("../../lib"),L=b("../../lib/polygon"),H=b("../../lib/throttle"),P=b("./axis_ids").getFromId,M=b("../../lib/clear_gl_canvases"),N=b("../../plot_api/subroutines").redrawReglTraces,T=b("./constants"),Q=T.MINSELECT,U=L.filter,S=L.tester,X=b("./handle_outline").clearSelect;b=b("./helpers");var Z=b.p2r,aa=b.axValue,fa=b.getTransform;K.exports={prepSelect:function(ha,ja,ba,ma,qa){function ka(Mb,
Fb){return Mb-Fb}var oa=z(qa),na=y(qa),la=A(qa),ia=D(qa),sa=t(qa),ta="drawcircle"===qa,Aa="drawline"===qa||ta,Ka=ma.gd,Sa=Ka._fullLayout,db=Sa._zoomlayer,eb=ma.element.getBoundingClientRect(),lb=ma.plotinfo,ab=fa(lb),Ya=ja-eb.left,hb=ba-eb.top;Sa._calcInverseTransform(Ka);ja=J.apply3DTransform(Sa._invTransform)(Ya,hb);Ya=ja[0];hb=ja[1];var nb=Sa._invScaleX,va=Sa._invScaleY,Ba=Ya,Ga=hb;ja="M"+Ya+","+hb;var Na=ma.xaxes[0]._length,$a=ma.yaxes[0]._length,Va=ma.xaxes.concat(ma.yaxes),qb=ha.altKey&&!(D(qa)&&
la),Ha,Ra,La,gb,ob,ub,za;a(ha,Ka,ma);oa&&(Ha=U([[Ya,hb]],T.BENDPX));var Da=db.selectAll("path.select-outline-"+lb.id).data(ia?[0]:[1,2]);ha=Sa.newshape;Da.enter().append("path").attr("class",function(Mb){return"select-outline select-outline-"+Mb+" select-outline-"+lb.id}).style(ia?{opacity:ha.opacity/2,fill:la?void 0:ha.fillcolor,stroke:ha.line.color,"stroke-dasharray":u(ha.line.dash,ha.line.width),"stroke-width":ha.line.width+"px"}:{}).attr("fill-rule",ha.fillrule).classed("cursor-move",ia?!0:!1).attr("transform",
ab).attr("d",ja+"Z");var Ja=db.append("path").attr("class","zoombox-corners").style({fill:v.background,stroke:v.defaultLine,"stroke-width":1}).attr("transform",ab).attr("d","M0,0Z"),Ta=Sa._uid+T.SELECTID,Xa=[],kb=e(Ka,ma.xaxes,ma.yaxes,ma.subplot);var rb=lb.fillRangeItems?lb.fillRangeItems:na?function(Mb,Fb){Mb=Mb.range={};for(ob=0;ob<Va.length;ob++){var Lb=Va[ob],Vb=Lb._id.charAt(0);Mb[Lb._id]=[Z(Lb,Fb[Vb+"min"]),Z(Lb,Fb[Vb+"max"])].sort(ka)}}:function(Mb,Fb,Lb){Mb=Mb.lassoPoints={};for(ob=0;ob<
Va.length;ob++)Fb=Va[ob],Mb[Fb._id]=Lb.filtered.map(aa(Fb))};ma.moveFn=function(Mb,Fb){Ba=Math.max(0,Math.min(Na,nb*Mb+Ya));Ga=Math.max(0,Math.min($a,va*Fb+hb));Mb=Math.abs(Ba-Ya);Fb=Math.abs(Ga-hb);if(na){if(sa){var Lb=Sa.selectdirection;Lb="any"===Lb?Fb<Math.min(.6*Mb,Q)?"h":Mb<Math.min(.6*Fb,Q)?"v":"d":Lb;switch(Lb){case "h":var Vb=ta?$a/2:0;var xc=$a;break;case "v":Vb=ta?Na/2:0,xc=Na}}if(ia)switch(Sa.newshape.drawdirection){case "vertical":Lb="h";Vb=ta?$a/2:0;xc=$a;break;case "horizontal":Lb=
"v";Vb=ta?Na/2:0;xc=Na;break;case "ortho":Mb<Fb?(Lb="h",Vb=hb,xc=Ga):(Lb="v",Vb=Ya,xc=Ba);break;default:Lb="d"}"h"===Lb?(gb=Aa?F(ta,[Ba,Vb],[Ba,xc]):[[Ya,Vb],[Ya,xc],[Ba,xc],[Ba,Vb]],gb.xmin=Aa?Ba:Math.min(Ya,Ba),gb.xmax=Aa?Ba:Math.max(Ya,Ba),gb.ymin=Math.min(Vb,xc),gb.ymax=Math.max(Vb,xc),Ja.attr("d","M"+gb.xmin+","+(hb-Q)+"h-4v"+2*Q+"h4ZM"+(gb.xmax-1)+","+(hb-Q)+"h4v"+2*Q+"h-4Z")):"v"===Lb?(gb=Aa?F(ta,[Vb,Ga],[xc,Ga]):[[Vb,hb],[Vb,Ga],[xc,Ga],[xc,hb]],gb.xmin=Math.min(Vb,xc),gb.xmax=Math.max(Vb,
xc),gb.ymin=Aa?Ga:Math.min(hb,Ga),gb.ymax=Aa?Ga:Math.max(hb,Ga),Ja.attr("d","M"+(Ya-Q)+","+gb.ymin+"v-4h"+2*Q+"v4ZM"+(Ya-Q)+","+(gb.ymax-1)+"v4h"+2*Q+"v-4Z")):"d"===Lb&&(gb=Aa?F(ta,[Ya,hb],[Ba,Ga]):[[Ya,hb],[Ya,Ga],[Ba,Ga],[Ba,hb]],gb.xmin=Math.min(Ya,Ba),gb.xmax=Math.max(Ya,Ba),gb.ymin=Math.min(hb,Ga),gb.ymax=Math.max(hb,Ga),Ja.attr("d","M0,0Z"))}else oa&&(Ha.addPt([Ba,Ga]),gb=Ha.filtered);ma.selectionDefs&&ma.selectionDefs.length?(La=c(ma.mergedPolygons,gb,qb),gb.subtract=qb,Ra=h(ma.selectionDefs.concat([gb]))):
(La=[gb],Ra=S(gb));B(f(La,la),Da,ma);sa&&H.throttle(Ta,T.SELECTDELAY,function(){Xa=[];var Gc=[];for(ob=0;ob<kb.length;ob++){ub=kb[ob];var Hc=ub._module.selectPoints(ub,Ra);Gc.push(Hc);Hc=d(Hc,ub);if(Xa.length)for(var Wc=0;Wc<Hc.length;Wc++)Xa.push(Hc[Wc]);else Xa=Hc}za={points:Xa};p(Ka,kb,za);rb(za,gb,Ha);ma.gd.emit("plotly_selecting",za)})};ma.clickFn=function(Mb,Fb){Ja.remove();if(0<=Ka._fullLayout._activeShapeIndex)Ka._fullLayout._deactivateShape(Ka);else if(!ia){var Lb=Sa.clickmode;H.done(Ta).then(function(){H.clear(Ta);
if(2===Mb){Da.remove();for(ob=0;ob<kb.length;ob++)ub=kb[ob],ub._module.selectPoints(ub,!1);p(Ka,kb);g(ma);Ka.emit("plotly_deselect",null)}else-1<Lb.indexOf("select")&&q(Fb,Ka,ma.xaxes,ma.yaxes,ma.subplot,ma,Da),"event"===Lb&&Ka.emit("plotly_selected",void 0);x.click(Ka,Fb)}).catch(J.error)}};ma.doneFn=function(){Ja.remove();H.done(Ta).then(function(){H.clear(Ta);ma.gd.emit("plotly_selected",za);gb&&ma.selectionDefs&&(gb.subtract=qb,ma.selectionDefs.push(gb),ma.mergedPolygons.length=0,[].push.apply(ma.mergedPolygons,
La));ma.doneFnCompleted&&ma.doneFnCompleted(Xa)}).catch(J.error);ia&&g(ma)}},clearSelect:X,clearSelectionsCache:g,selectOnClick:q}},{"../../components/color":643,"../../components/dragelement/helpers":661,"../../components/drawing":665,"../../components/fx":683,"../../components/fx/helpers":679,"../../components/shapes/draw_newshape/display_outlines":728,"../../components/shapes/draw_newshape/helpers":729,"../../components/shapes/draw_newshape/newshapes":730,"../../lib":778,"../../lib/clear_gl_canvases":762,
"../../lib/polygon":790,"../../lib/throttle":804,"../../plot_api/subroutines":818,"../../registry":911,"./axis_ids":831,"./constants":834,"./handle_outline":838,"./helpers":839,polybooljs:517}],848:[function(b,K,G){function q(t){return Math.pow(10,t)}var m=b("d3"),l=b("d3-time-format").utcFormat,h=b("fast-isnumeric"),a=b("../../lib"),g=a.cleanNumber,e=a.ms2DateTime,n=a.dateTime2ms,p=a.ensureNumber,c=a.isArrayOrTypedArray;G=b("../../constants/numerical");var d=G.FP_SAFE,f=G.BADNUM,k=G.LOG_CLIP,r=G.ONEWEEK,
u=G.ONEDAY,v=G.ONEHOUR,x=G.ONEMIN,C=G.ONESEC,z=b("./axis_ids"),y=b("./constants"),D=y.HOUR_PATTERN,A=y.WEEKDAY_PATTERN;K.exports=function(t,B){function F(aa,fa){return 0<aa?Math.log(aa)/Math.LN10:0>=aa&&fa&&t.range&&2===t.range.length?(aa=t.range[0],fa=t.range[1],.5*(aa+fa-2*k*Math.abs(aa-fa))):f}function I(aa,fa,ha,ja){if((ja||{}).msUTC&&h(aa))return+aa;fa=n(aa,ha||t.calendar);if(fa===f)if(h(aa))aa=+aa,fa=Math.floor(10*a.mod(aa+.05,1)),fa=n(new Date(Math.round(aa-fa/10)))+fa/10;else return f;return fa}
function J(aa,fa,ha){return e(aa,fa,ha||t.calendar)}function L(aa){return t._categories[Math.round(aa)]}function H(aa){if(null!==aa&&void 0!==aa){void 0===t._categoriesMap&&(t._categoriesMap={});if(void 0!==t._categoriesMap[aa])return t._categoriesMap[aa];t._categories.push("number"===typeof aa?String(aa):aa);var fa=t._categories.length-1;return t._categoriesMap[aa]=fa}return f}function P(aa){if(t._categoriesMap)return t._categoriesMap[aa]}function M(aa){var fa=P(aa);if(void 0!==fa)return fa;if(h(aa))return+aa}
function N(aa){return h(aa)?+aa:P(aa)}B=B||{};var T=t._id||"x",Q=T.charAt(0),U=function(aa){return h(aa)?m.round(t._b+t._m*aa,2):f},S=function(aa){return(aa-t._b)/t._m};if(t.rangebreaks){var X="y"===Q;U=function(aa){if(!h(aa))return f;var fa=t._rangebreaks.length;if(!fa)return m.round(t._b+t._m*aa,2);var ha=X;t.range[0]>t.range[1]&&(ha=!ha);ha=ha?-1:1;for(var ja=ha*aa,ba=0,ma=0;ma<fa;ma++){var qa=ha*t._rangebreaks[ma].min,ka=ha*t._rangebreaks[ma].max;if(ja<qa)break;if(ja>ka)ba=ma+1;else{ba=ja<(qa+
ka)/2?ma:ma+1;break}}fa=t._B[ba]||0;return isFinite(fa)?m.round(fa+t._m2*aa,2):0};S=function(aa){var fa=t._rangebreaks.length;if(!fa)return(aa-t._b)/t._m;for(var ha=0,ja=0;ja<fa&&!(aa<t._rangebreaks[ja].pmin);ja++)aa>t._rangebreaks[ja].pmax&&(ha=ja+1);return(aa-t._B[ha])/t._m2}}t.c2l="log"===t.type?F:p;t.l2c="log"===t.type?q:p;t.l2p=U;t.p2l=S;t.c2p="log"===t.type?function(aa,fa){return U(F(aa,fa))}:U;t.p2c="log"===t.type?function(aa){return q(S(aa))}:S;-1!==["linear","-"].indexOf(t.type)?(t.d2r=t.r2d=
t.d2c=t.r2c=t.d2l=t.r2l=g,t.c2d=t.c2r=t.l2d=t.l2r=p,t.d2p=t.r2p=function(aa){return t.l2p(g(aa))},t.p2d=t.p2r=S,t.cleanPos=p):"log"===t.type?(t.d2r=t.d2l=function(aa,fa){return F(g(aa),fa)},t.r2d=t.r2c=function(aa){return q(g(aa))},t.d2c=t.r2l=g,t.c2d=t.l2r=p,t.c2r=F,t.l2d=q,t.d2p=function(aa,fa){return t.l2p(t.d2r(aa,fa))},t.p2d=function(aa){return q(S(aa))},t.r2p=function(aa){return t.l2p(g(aa))},t.p2r=S,t.cleanPos=p):"date"===t.type?(t.d2r=t.r2d=a.identity,t.d2c=t.r2c=t.d2l=t.r2l=I,t.c2d=t.c2r=
t.l2d=t.l2r=J,t.d2p=t.r2p=function(aa,fa,ha){return t.l2p(I(aa,0,ha))},t.p2d=t.p2r=function(aa,fa,ha){return J(S(aa),fa,ha)},t.cleanPos=function(aa){return a.cleanDate(aa,f,t.calendar)}):"category"===t.type?(t.d2c=t.d2l=H,t.r2d=t.c2d=t.l2d=L,t.d2r=t.d2l_noadd=M,t.r2c=function(aa){aa=N(aa);return void 0!==aa?aa:t.fraction2r(.5)},t.l2r=t.c2r=p,t.r2l=N,t.d2p=function(aa){return t.l2p(t.r2c(aa))},t.p2d=function(aa){return L(S(aa))},t.r2p=t.d2p,t.p2r=S,t.cleanPos=function(aa){return"string"===typeof aa&&
""!==aa?aa:p(aa)}):"multicategory"===t.type&&(t.r2d=t.c2d=t.l2d=L,t.d2r=t.d2l_noadd=M,t.r2c=function(aa){aa=M(aa);return void 0!==aa?aa:t.fraction2r(.5)},t.r2c_just_indices=P,t.l2r=t.c2r=p,t.r2l=M,t.d2p=function(aa){return t.l2p(t.r2c(aa))},t.p2d=function(aa){return L(S(aa))},t.r2p=t.d2p,t.p2r=S,t.cleanPos=function(aa){return Array.isArray(aa)||"string"===typeof aa&&""!==aa?aa:p(aa)},t.setupMultiCategory=function(aa){var fa=t._traceIndices,ha,ja=t._matchGroup;if(ja&&0===t._categories.length)for(ha in ja)ha!==
T&&(ja=B[z.id2name(ha)],fa=fa.concat(ja._traceIndices));var ba=[[0,{}],[0,{}]];ja=[];for(ha=0;ha<fa.length;ha++){var ma=aa[fa[ha]];if(Q in ma){var qa=ma[Q],ka=ma._length||a.minRowLength(qa);if(c(qa[0])&&c(qa[1]))for(ma=0;ma<ka;ma++){var oa=qa[0][ma],na=qa[1][ma];null!==oa&&void 0!==oa&&null!==na&&void 0!==na&&(ja.push([oa,na]),oa in ba[0][1]||(ba[0][1][oa]=ba[0][0]++),na in ba[1][1]||(ba[1][1][na]=ba[1][0]++))}}}ja.sort(function(la,ia){var sa=ba[0][1];if(sa=sa[la[0]]-sa[ia[0]])return sa;sa=ba[1][1];
return sa[la[1]]-sa[ia[1]]});for(ha=0;ha<ja.length;ha++)H(ja[ha])});t.fraction2r=function(aa){var fa=t.r2l(t.range[0]),ha=t.r2l(t.range[1]);return t.l2r(fa+aa*(ha-fa))};t.r2fraction=function(aa){var fa=t.r2l(t.range[0]),ha=t.r2l(t.range[1]);return(t.r2l(aa)-fa)/(ha-fa)};t.cleanRange=function(aa,fa){fa||(fa={});aa||(aa="range");var ha=a.nestedProperty(t,aa).get();var ja="date"===t.type?a.dfltRange(t.calendar):"y"===Q?y.DFLTRANGEY:fa.dfltRange||y.DFLTRANGEX;ja=ja.slice();if("tozero"===t.rangemode||
"nonnegative"===t.rangemode)ja[0]=0;if(ha&&2===ha.length)for("date"!==t.type||t.autorange||(ha[0]=a.cleanDate(ha[0],f,t.calendar),ha[1]=a.cleanDate(ha[1],f,t.calendar)),fa=0;2>fa;fa++)if("date"===t.type){if(!a.isDateTime(ha[fa],t.calendar)){t[aa]=ja;break}if(t.r2l(ha[0])===t.r2l(ha[1])){aa=a.constrain(t.r2l(ha[0]),a.MIN_MS+1E3,a.MAX_MS-1E3);ha[0]=t.l2r(aa-1E3);ha[1]=t.l2r(aa+1E3);break}}else{if(!h(ha[fa]))if(h(ha[1-fa]))ha[fa]=ha[1-fa]*(fa?10:.1);else{t[aa]=ja;break}ha[fa]<-d?ha[fa]=-d:ha[fa]>d&&
(ha[fa]=d);if(ha[0]===ha[1]){var ba=Math.max(1,Math.abs(1E-6*ha[0]));ha[0]-=ba;ha[1]+=ba}}else a.nestedProperty(t,aa).set(ja)};t.setScale=function(aa){var fa=B._size;if(t.overlaying){var ha=z.getFromId({_fullLayout:B},t.overlaying);t.domain=ha.domain}ha=aa&&t._r?"_r":"range";var ja=t.calendar;t.cleanRange(ha);aa=t.r2l(t[ha][0],ja);ha=t.r2l(t[ha][1],ja);(ja="y"===Q)?(t._offset=fa.t+(1-t.domain[1])*fa.h,t._length=fa.h*(t.domain[1]-t.domain[0]),t._m=t._length/(aa-ha),t._b=-t._m*ha):(t._offset=fa.l+t.domain[0]*
fa.w,t._length=fa.w*(t.domain[1]-t.domain[0]),t._m=t._length/(ha-aa),t._b=-t._m*aa);t._rangebreaks=[];t._lBreaks=0;t._m2=0;t._B=[];if(t.rangebreaks&&(t._rangebreaks=t.locateBreaks(Math.min(aa,ha),Math.max(aa,ha)),t._rangebreaks.length)){for(fa=0;fa<t._rangebreaks.length;fa++){var ba=t._rangebreaks[fa];t._lBreaks+=Math.abs(ba.max-ba.min)}fa=ja;aa>ha&&(fa=!fa);fa&&t._rangebreaks.reverse();var ma=fa?-1:1;t._m2=ma*t._length/(Math.abs(ha-aa)-t._lBreaks);t._B.push(-t._m2*(ja?ha:aa));for(fa=0;fa<t._rangebreaks.length;fa++)ba=
t._rangebreaks[fa],t._B.push(t._B[t._B.length-1]-ma*t._m2*(ba.max-ba.min));for(fa=0;fa<t._rangebreaks.length;fa++)ba=t._rangebreaks[fa],ba.pmin=U(ba.min),ba.pmax=U(ba.max)}if(!isFinite(t._m)||!isFinite(t._b)||0>t._length)throw B._replotting=!1,Error("Something went wrong with axis scaling");};t.maskBreaks=function(aa){for(var fa=t.rangebreaks||[],ha,ja,ba,ma,qa=0;qa<fa.length;qa++){var ka=fa[qa];if(ka.enabled)if(ka.bounds){var oa=ka.pattern;ha=a.simpleMap(ka.bounds,oa?g:t.d2c);ja=ha[0];ha=ha[1];switch(oa){case A:ma=
new Date(aa);ba=ma.getUTCDay();ja>ha&&(ha+=7,ba<ja&&(ba+=7));break;case D:ma=new Date(aa);ba=ma.getUTCHours();ka=ma.getUTCMinutes();oa=ma.getUTCSeconds();ma=ma.getUTCMilliseconds();ba+=ka/60+oa/3600+ma/36E5;ja>ha&&(ha+=24,ba<ja&&(ba+=24));break;case "":ba=aa}if(ba>=ja&&ba<ha)return f}else for(oa=a.simpleMap(ka.values,t.d2c).sort(a.sorterAsc),ma=0;ma<oa.length;ma++)if(ja=oa[ma],ha=ja+ka.dvalue,aa>=ja&&aa<ha)return f}return aa};t.locateBreaks=function(aa,fa){var ha,ja=[];if(!t.rangebreaks)return ja;
var ba=t.rangebreaks.slice().sort(function(ta,Aa){return ta.pattern===A&&Aa.pattern===D?-1:Aa.pattern===A&&ta.pattern===D?1:0}),ma=function(ta,Aa){ta=a.constrain(ta,aa,fa);Aa=a.constrain(Aa,aa,fa);if(ta!==Aa){for(var Ka=!0,Sa=0;Sa<ja.length;Sa++){var db=ja[Sa];ta<db.max&&Aa>=db.min&&(ta<db.min&&(db.min=ta),Aa>db.max&&(db.max=Aa),Ka=!1)}Ka&&ja.push({min:ta,max:Aa})}};for(ha=0;ha<ba.length;ha++){var qa=ba[ha];if(qa.enabled)if(qa.bounds){var ka=aa,oa=fa;qa.pattern&&(ka=Math.floor(ka));var na=a.simpleMap(qa.bounds,
qa.pattern?g:t.r2l);var la=na[0];var ia=na[1];var sa=new Date(ka);switch(qa.pattern){case A:qa=r;ia=((ia<la?7:0)+(ia-la))*u;ka+=la*u-(sa.getUTCDay()*u+sa.getUTCHours()*v+sa.getUTCMinutes()*x+sa.getUTCSeconds()*C+sa.getUTCMilliseconds());break;case D:qa=u;ia=((ia<la?24:0)+(ia-la))*v;ka+=la*v-(sa.getUTCHours()*v+sa.getUTCMinutes()*x+sa.getUTCSeconds()*C+sa.getUTCMilliseconds());break;default:ka=Math.min(na[0],na[1]),oa=Math.max(na[0],na[1]),ia=qa=oa-ka}for(la=ka;la<oa;la+=qa)ma(la,la+ia)}else for(oa=
a.simpleMap(qa.values,t.d2c),ka=0;ka<oa.length;ka++)la=oa[ka],ia=la+qa.dvalue,ma(la,ia)}ja.sort(function(ta,Aa){return ta.min-Aa.min});return ja};t.makeCalcdata=function(aa,fa,ha){var ja;var ba=t.type;var ma="date"===ba&&aa[fa+"calendar"];if(fa in aa){fa=aa[fa];aa=aa._length||a.minRowLength(fa);if(a.isTypedArray(fa)&&("linear"===ba||"log"===ba)){if(aa===fa.length)return fa;if(fa.subarray)return fa.subarray(0,aa)}if("multicategory"===ba){ha=Array(aa);for(ma=0;ma<aa;ma++)ha[ma]=P([(fa[0]||[])[ma],(fa[1]||
[])[ma]]);return ha}ba=Array(aa);for(ja=0;ja<aa;ja++)ba[ja]=t.d2c(fa[ja],0,ma,ha)}else for(ha=(fa+"0"in aa)?t.d2c(aa[fa+"0"],0,ma):0,ma=aa["d"+fa]?Number(aa["d"+fa]):1,fa=aa[{x:"y",y:"x"}[fa]],aa=aa._length||fa.length,ba=Array(aa),ja=0;ja<aa;ja++)ba[ja]=ha+ja*ma;if(t.rangebreaks)for(ja=0;ja<aa;ja++)ba[ja]=t.maskBreaks(ba[ja]);return ba};t.isValidRange=function(aa){return Array.isArray(aa)&&2===aa.length&&h(t.r2l(aa[0]))&&h(t.r2l(aa[1]))};t.isPtWithinRange=function(aa,fa){aa=t.c2l(aa[Q],null,fa);fa=
t.r2l(t.range[0]);var ha=t.r2l(t.range[1]);return fa<ha?fa<=aa&&aa<=ha:ha<=aa&&aa<=fa};t._emptyCategories=function(){t._categories=[];t._categoriesMap={}};t.clearCalc=function(){var aa=t._matchGroup;if(aa){var fa=null,ha=null,ja;for(ja in aa)if(aa=B[z.id2name(ja)],aa._categories){fa=aa._categories;ha=aa._categoriesMap;break}fa&&ha?(t._categories=fa,t._categoriesMap=ha):t._emptyCategories()}else t._emptyCategories();if(t._initialCategories)for(fa=0;fa<t._initialCategories.length;fa++)H(t._initialCategories[fa])};
t.sortByInitialCategories=function(){var aa=[];t._emptyCategories();if(t._initialCategories)for(var fa=0;fa<t._initialCategories.length;fa++)H(t._initialCategories[fa]);aa=aa.concat(t._traceIndices);fa=t._matchGroup;for(var ha in fa)T!==ha&&(fa=B[z.id2name(ha)],fa._categories=t._categories,fa._categoriesMap=t._categoriesMap,aa=aa.concat(fa._traceIndices));return aa};var Z=B._d3locale;"date"===t.type&&(t._dateFormat=Z?Z.timeFormat:l,t._extraFormat=B._extraFormat);t._separators=B.separators;t._numFormat=
Z?Z.numberFormat:m.format;delete t._minDtick;delete t._forceTick0}},{"../../constants/numerical":753,"../../lib":778,"./axis_ids":831,"./constants":834,d3:169,"d3-time-format":166,"fast-isnumeric":241}],849:[function(b,K,G){function q(e){var n=["showexponent","showtickprefix","showticksuffix"].filter(function(p){return void 0!==e[p]});if(n.every(function(p){return e[p]===e[n[0]]})||1===n.length)return e[n[0]]}function m(e,n){l.coerce(e,n,a.tickformatstops,"enabled",void 0)&&(l.coerce(e,n,a.tickformatstops,
"dtickrange",void 0),l.coerce(e,n,a.tickformatstops,"value",void 0))}var l=b("../../lib"),h=b("../../components/color").contrast,a=b("./layout_attributes"),g=b("../array_container_defaults");K.exports=function(e,n,p,c,d,f){if(!f||1===f.pass){var k=q(e);p("tickprefix")&&p("showtickprefix",k);p("ticksuffix",d.tickSuffixDflt)&&p("showticksuffix",k)}if(!f||2===f.pass)if(f=q(e),p("tickprefix")&&p("showtickprefix",f),p("ticksuffix",d.tickSuffixDflt)&&p("showticksuffix",f),p("showticklabels")){k=d.font||
{};var r=n.color;d=-1!==(n.ticklabelposition||"").indexOf("inside")?h(d.bgColor):r&&r!==a.color.dflt?r:k.color;l.coerceFont(p,"tickfont",{family:k.family,size:k.size,color:d});p("tickangle");"category"!==c&&(d=p("tickformat"),g(e,n,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:m}),n.tickformatstops.length||delete n.tickformatstops,d||"date"===c||(p("showexponent",f),p("exponentformat"),p("minexponent"),p("separatethousands")))}}},{"../../components/color":643,"../../lib":778,
"../array_container_defaults":823,"./layout_attributes":842}],850:[function(b,K,G){var q=b("../../lib"),m=b("./layout_attributes");K.exports=function(l,h,a,g){var e=q.coerce2(l,h,m,"ticklen"),n=q.coerce2(l,h,m,"tickwidth");l=q.coerce2(l,h,m,"tickcolor",h.color);a("ticks",g.outerTicks||e||n||l?"outside":"")||(delete h.ticklen,delete h.tickwidth,delete h.tickcolor)}},{"../../lib":778,"./layout_attributes":842}],851:[function(b,K,G){var q=b("./clean_ticks"),m=b("../../lib").isArrayOrTypedArray;K.exports=
function(l,h,a,g){function e(d){var f=l[d];return void 0!==f?f:(h._template||{})[d]}var n=e("tick0"),p=e("dtick"),c=e("tickvals");c=m(c)?"array":p?"linear":"auto";c=a("tickmode",c);"auto"===c?a("nticks"):"linear"===c?(a=h.dtick=q.dtick(p,g),h.tick0=q.tick0(n,g,h.calendar,a)):"multicategory"!==g&&(void 0===a("tickvals")?h.tickmode="auto":a("ticktext"))}},{"../../lib":778,"./clean_ticks":833}],852:[function(b,K,G){var q=b("d3"),m=b("../../registry"),l=b("../../lib"),h=b("../../components/drawing"),
a=b("./axes");K.exports=function(g,e,n,p){function c(y){var D=y.xaxis,A=y.yaxis;r._defs.select("#"+y.clipId+"> rect").call(h.setTranslate,0,0).call(h.setScale,1,1);y.plot.call(h.setTranslate,D._offset,A._offset).call(h.setScale,1,1);D=y.plot.selectAll(".scatterlayer .trace");D.selectAll(".point").call(h.setPointGroupScale,1,1);D.selectAll(".textpoint").call(h.setTextPointsScale,1,1);D.call(h.hideOutsideRangePoints,y)}function d(){for(var y={},D=0;D<e.length;D++){var A=e[D],t=A.plotinfo.xaxis,B=A.plotinfo.yaxis;
A.xr1&&(y[t._name+".range"]=A.xr1.slice());A.yr1&&(y[B._name+".range"]=A.yr1.slice())}u&&u();return m.call("relayout",g,y).then(function(){for(var F=0;F<e.length;F++)c(e[F].plotinfo)})}function f(){for(var y={},D=0;D<e.length;D++){var A=e[D],t=A.plotinfo.xaxis,B=A.plotinfo.yaxis;A.xr0&&(y[t._name+".range"]=A.xr0.slice());A.yr0&&(y[B._name+".range"]=A.yr0.slice())}return m.call("relayout",g,y).then(function(){for(var F=0;F<e.length;F++)c(e[F].plotinfo)})}function k(){v=Date.now();for(var y=x(Math.min(1,
(v-C)/n.duration)),D=0;D<e.length;D++){var A=e[D],t=y,B=A.plotinfo,F=B.xaxis,I=B.yaxis,J=F._length,L=I._length,H=!!A.xr1,P=!!A.yr1,M=[];if(H){var N=l.simpleMap(A.xr0,F.r2l),T=l.simpleMap(A.xr1,F.r2l),Q=N[1]-N[0],U=T[1]-T[0];M[0]=(N[0]*(1-t)+t*T[0]-N[0])/(N[1]-N[0])*J;M[2]=J*(1-t+t*U/Q);F.range[0]=F.l2r(N[0]*(1-t)+t*T[0]);F.range[1]=F.l2r(N[1]*(1-t)+t*T[1])}else M[0]=0,M[2]=J;P?(N=l.simpleMap(A.yr0,I.r2l),A=l.simpleMap(A.yr1,I.r2l),T=N[1]-N[0],Q=A[1]-A[0],M[1]=(N[1]*(1-t)+t*A[1]-N[1])/(N[0]-N[1])*
L,M[3]=L*(1-t+t*Q/T),I.range[0]=F.l2r(N[0]*(1-t)+t*A[0]),I.range[1]=I.l2r(N[1]*(1-t)+t*A[1])):(M[1]=0,M[3]=L);a.drawOne(g,F,{skipTitle:!0});a.drawOne(g,I,{skipTitle:!0});a.redrawComponents(g,[F._id,I._id]);t=H?J/M[2]:1;A=P?L/M[3]:1;F=F._offset-(H?M[0]/M[2]*J:0);I=I._offset-(P?M[1]/M[3]*L:0);B.clipRect.call(h.setTranslate,H?M[0]:0,P?M[1]:0).call(h.setScale,1/t,1/A);B.plot.call(h.setTranslate,F,I).call(h.setScale,t,A);h.setPointGroupScale(B.zoomScalePts,1/t,1/A);h.setTextPointsScale(B.zoomScaleTxt,
1/t,1/A)}v-C>n.duration?(d(),z=window.cancelAnimationFrame(k)):z=window.requestAnimationFrame(k)}var r=g._fullLayout;if(0===e.length)a.redrawComponents(g);else{var u;p&&(u=p());var v,x=q.ease(n.easing);g._transitionData._interruptCallbacks.push(function(){window.cancelAnimationFrame(z);z=null;return f()});var C=Date.now();var z=window.requestAnimationFrame(k);return Promise.resolve()}}},{"../../components/drawing":665,"../../lib":778,"../../registry":911,"./axes":828,d3:169}],853:[function(b,K,G){function q(h,
a){var g={v:"x",h:"y"}[h.orientation||"v"],e=m(h,"box-violin"),n=m(h._fullInput||{},"candlestick");return e&&!n&&a===g&&void 0===h[g]&&void 0===h[g+"0"]}var m=b("../../registry").traceIs,l=b("./axis_autotype");K.exports=function(h,a,g,e){g("autotypenumbers",e.autotypenumbersDflt);if("-"===g("type",(e.splomStash||{}).type)){g=e.data;if("-"===a.type){e=a._id;var n=e.charAt(0);-1!==e.indexOf("scene")&&(e=n);b:{for(var p=e,c=0;c<g.length;c++){var d=g[c];if("splom"===d.type&&0<d._length&&(d["_"+n+"axes"]||
{})[p]||(d[n+"axis"]||n)===p&&(q(d,n)||(d[n]||[]).length||d[n+"0"])){var f=d;break b}}f=void 0}if(f)if("histogram"===f.type&&n==={v:"y",h:"x"}[f.orientation||"v"])a.type="linear";else if(d=n+"calendar",p=f[d],c={noMultiCategory:!m(f,"cartesian")||m(f,"noMultiCategory")},"box"===f.type&&f._hasPreCompStats&&n==={h:"x",v:"y"}[f.orientation||"v"]&&(c.noMultiCategory=!0),c.autotypenumbers=a.autotypenumbers,q(f,n)){var k={v:"x",h:"y"}[f.orientation||"v"],r=[];for(f=0;f<g.length;f++){var u=g[f];m(u,"box-violin")&&
(u[n+"axis"]||n)===e&&(void 0!==u[k]?r.push(u[k][0]):void 0!==u.name?r.push(u.name):r.push("text"),u[d]!==p&&(p=void 0))}a.type=l(r,p,c)}else"splom"===f.type?(g=f.dimensions[f._axesDim[e]],g.visible&&(a.type=l(g.values,p,c))):a.type=l(f[n]||[f[n+"0"]],p,c)}"-"===a.type?a.type="linear":h.type=a.type}}},{"../../registry":911,"./axis_autotype":829}],854:[function(b,K,G){function q(e,n,p){var c=!1;if("data"===n.type)e=e._fullData[null!==n.traces?n.traces[0]:0];else if("layout"===n.type)e=e._fullLayout;
else return!1;e=g.nestedProperty(e,n.prop).get();p=p[n.type]=p[n.type]||{};p.hasOwnProperty(n.prop)&&p[n.prop]!==e&&(c=!0);p[n.prop]=e;return{changed:c,value:e}}function m(e,n){var p=[];e=n[0];var c={};if("string"===typeof e)c[e]=n[1];else if(g.isPlainObject(e))c=e;else return p;h(c,function(d,f,k){p.push({type:"layout",prop:d,value:k})},"",0);return p}function l(e,n){var p=[];var c=n[0];var d=n[1];var f=n[2];n={};if("string"===typeof c)n[c]=d;else if(g.isPlainObject(c))n=c,void 0===f&&(f=d);else return p;
void 0===f&&(f=null);h(n,function(k,r,u){if(Array.isArray(u)){u=u.slice();var v=Math.min(u.length,e.data.length);f&&(v=Math.min(v,f.length));r=[];for(var x=0;x<v;x++)r[x]=f?f[x]:x}else r=f?f.slice():null;if(null===r)Array.isArray(u)&&(u=u[0]);else if(Array.isArray(r)){if(!Array.isArray(u))for(v=u,u=[],x=0;x<r.length;x++)u[x]=v;u.length=Math.min(r.length,u.length)}p.push({type:"data",prop:k,traces:r,value:u})},"",0);return p}function h(e,n,p,c){Object.keys(e).forEach(function(d){var f=e[d];if("_"!==
d[0]){var k=p+(0<c?".":"")+d;g.isPlainObject(f)?h(f,n,k,c+1):n(k,d,f)}})}var a=b("../registry"),g=b("../lib");G.manageCommandObserver=function(e,n,p,c){var d={},f=!0;n&&n._commandObserver&&(d=n._commandObserver);d.cache||(d.cache={});d.lookupTable={};var k=G.hasSimpleAPICommandBindings(e,p,d.lookupTable);if(n&&n._commandObserver){if(k)return d;if(n._commandObserver.remove)return n._commandObserver.remove(),n._commandObserver=null,d}if(k){q(e,k,d.cache);d.check=function(){if(f){var u=q(e,k,d.cache);
u.changed&&c&&void 0!==d.lookupTable[u.value]&&(d.disable(),Promise.resolve(c({value:u.value,type:k.type,prop:k.prop,traces:k.traces,index:d.lookupTable[u.value]})).then(d.enable,d.enable));return u.changed}};var r="plotly_relayout plotly_redraw plotly_restyle plotly_update plotly_animatingframe plotly_afterplot".split(" ");for(p=0;p<r.length;p++)e._internalOn(r[p],d.check);d.remove=function(){for(var u=0;u<r.length;u++)e._removeInternalListener(r[u],d.check)}}else g.log("Unable to automatically bind plot updates to API command"),
d.lookupTable={},d.remove=function(){};d.disable=function(){f=!1};d.enable=function(){f=!0};n&&(n._commandObserver=d);return d};G.hasSimpleAPICommandBindings=function(e,n,p){var c,d=n.length;for(c=0;c<d;c++){var f=n[c];var k=f.method;f=f.args;Array.isArray(f)||(f=[]);if(!k)return!1;f=G.computeAPICommandBindings(e,k,f);if(1!==f.length)return!1;if(u){k=f[0];if(k.type!==u.type||k.prop!==u.prop)return!1;if(Array.isArray(u.traces))if(Array.isArray(k.traces)){k.traces.sort();for(var r=0;r<u.traces.length;r++)if(u.traces[r]!==
k.traces[r])return!1}else return!1;else if(k.prop!==u.prop)return!1}else{var u=f[0];Array.isArray(u.traces)&&u.traces.sort()}k=f[0];k=k.value;if(Array.isArray(k))if(1===k.length)k=k[0];else return!1;p&&(p[k]=c)}return u};G.executeAPICommand=function(e,n,p){if("skip"===n)return Promise.resolve();var c=a.apiMethodRegistry[n];e=[e];Array.isArray(p)||(p=[]);for(var d=0;d<p.length;d++)e.push(p[d]);return c.apply(null,e).catch(function(f){g.warn("API call to Plotly."+n+" rejected.",f);return Promise.reject(f)})};
G.computeAPICommandBindings=function(e,n,p){Array.isArray(p)||(p=[]);switch(n){case "restyle":e=l(e,p);break;case "relayout":e=m(e,p);break;case "update":e=l(e,[p[0],p[2]]).concat(m(e,[p[1]]));break;case "animate":e=p;e=Array.isArray(e[0])&&1===e[0].length&&-1!==["string","number"].indexOf(typeof e[0][0])?[{type:"layout",prop:"_currentFrame",value:e[0][0].toString()}]:[];break;default:e=[]}return e}},{"../lib":778,"../registry":911}],855:[function(b,K,G){var q=b("../lib/extend").extendFlat;G.attributes=
function(m,l){m=m||{};l={valType:"info_array",editType:m.editType,items:[{valType:"number",min:0,max:1,editType:m.editType},{valType:"number",min:0,max:1,editType:m.editType}],dflt:[0,1]};l={x:q({},l,{}),y:q({},l,{}),editType:m.editType};m.noGridCell||(l.row={valType:"integer",min:0,dflt:0,editType:m.editType},l.column={valType:"integer",min:0,dflt:0,editType:m.editType});return l};G.defaults=function(m,l,h,a){var g=a&&a.x||[0,1];a=a&&a.y||[0,1];if(l=l.grid){var e=h("domain.column");void 0!==e&&(e<
l.columns?g=l._domains.x[e]:delete m.domain.column);e=h("domain.row");void 0!==e&&(e<l.rows?a=l._domains.y[e]:delete m.domain.row)}l=h("domain.x",g);h=h("domain.y",a);l[0]<l[1]||(m.domain.x=g.slice());h[0]<h[1]||(m.domain.y=a.slice())}},{"../lib/extend":768}],856:[function(b,K,G){K.exports=function(q){var m=q.editType,l=q.colorEditType;void 0===l&&(l=m);m={family:{valType:"string",noBlank:!0,strict:!0,editType:m},size:{valType:"number",min:1,editType:m},color:{valType:"color",editType:l},editType:m};
q.arrayOk&&(m.family.arrayOk=!0,m.size.arrayOk=!0,m.color.arrayOk=!0);return m}},{}],857:[function(b,K,G){K.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],858:[function(b,K,G){G.projNames={equirectangular:"equirectangular",mercator:"mercator",orthographic:"orthographic","natural earth":"naturalEarth",kavrayskiy7:"kavrayskiy7",miller:"miller",robinson:"robinson",
eckert4:"eckert4","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant","conic equal area":"conicEqualArea","conic conformal":"conicConformal","conic equidistant":"conicEquidistant",gnomonic:"gnomonic",stereographic:"stereographic",mollweide:"mollweide",hammer:"hammer","transverse mercator":"transverseMercator","albers usa":"albersUsa","winkel tripel":"winkel3",aitoff:"aitoff",sinusoidal:"sinusoidal"};G.axesNames=["lonaxis","lataxis"];G.lonaxisSpan={orthographic:180,
"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360};G.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180};G.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,
60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}};G.clipPad=.001;G.precision=.1;G.landColor="#F0DC82";G.waterColor="#3399FF";
G.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"};G.sphereSVG={type:"Sphere"};G.fillLayers={ocean:1,land:1,lakes:1};G.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1};G.layers="bg ocean land lakes subunits countries coastlines rivers lataxis lonaxis frame backplot frontplot".split(" ");G.layersForChoropleth="bg ocean land subunits countries coastlines lataxis lonaxis frame backplot rivers lakes frontplot".split(" ");G.layerNameToAdjective=
{ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},{}],859:[function(b,K,G){function q(B){this.id=B.id;this.graphDiv=B.graphDiv;this.container=B.container;this.topojsonURL=B.topojsonURL;this.isStatic=B.staticPlot;this.midPt=this.bounds=this.fitScale=this.viewInitial=this.scope=this.projection=this.topojson=this.topojsonName=null;this.hasChoropleth=!1;this.traceHash={};this.layers={};this.basePaths={};this.dataPaths=
{};this.dataPoints={};this.bgRect=this.clipRect=this.clipDef=null;this.makeFramework()}function m(B){var F=B.projection.type,I=a.geo[y.projNames[F]](),J=B._isClipped?y.lonaxisSpan[F]/2:null;B=["center","rotate","parallels","clipExtent"];F=function(P){return P?I:[]};for(var L=0;L<B.length;L++){var H=B[L];"function"!==typeof I[H]&&(I[H]=F)}I.isLonLatOverEdges=function(P){if(null===I(P))return!0;if(J){var M=I.rotate();return a.geo.distance(P,[-M[0],-M[1]])>J*Math.PI/180}return!1};I.getPath=function(){return a.geo.path().projection(I)};
I.getBounds=function(P){return I.getPath().bounds(P)};I.fitExtent=function(P,M){var N=P[1][0]-P[0][0],T=P[1][1]-P[0][1],Q=I.clipExtent&&I.clipExtent();I.scale(150).translate([0,0]);Q&&I.clipExtent(null);var U=I.getBounds(M);M=Math.min(N/(U[1][0]-U[0][0]),T/(U[1][1]-U[0][1]));N=+P[0][0]+(N-M*(U[1][0]+U[0][0]))/2;P=+P[0][1]+(T-M*(U[1][1]+U[0][1]))/2;Q&&I.clipExtent(Q);return I.scale(150*M).translate([N,P])};I.precision(y.precision);J&&I.clipAngle(J-y.clipPad);return I}function l(B,F,I){var J=F[B],L=
y.scopeDefaults[F.scope];if("lonaxis"===B){var H=L.lonaxisRange;var P=L.lataxisRange;var M=function(T,Q){return[T,Q]}}else"lataxis"===B&&(H=L.lataxisRange,P=L.lonaxisRange,M=function(T,Q){return[Q,T]});J={type:"linear",range:[H[0],H[1]-1E-6],tick0:J.tick0,dtick:J.dtick};k.setConvert(J,I);I=k.calcTicks(J);F.isScoped||"lonaxis"!==B||I.pop();B=I.length;F=Array(B);for(J=0;J<B;J++){L=I[J].x;H=F[J]=[];for(var N=P[0];N<P[1]+2.5;N+=2.5)H.push(M(L,N))}return{type:"MultiLineString",coordinates:F}}function h(B,
F){var I=y.clipPad,J=B[0]+I;B=B[1]-I;var L=F[0]+I;F=F[1]-I;0<J&&0>B&&(B+=360);I=(B-J)/4;return{type:"Polygon",coordinates:[[[J,L],[J,F],[J+I,F],[J+2*I,F],[J+3*I,F],[B,F],[B,L],[B-I,L],[B-2*I,L],[B-3*I,L],[J,L]]]}}var a=b("d3"),g=b("../../registry"),e=b("../../lib"),n=e.strTranslate,p=b("../../components/color"),c=b("../../components/drawing"),d=b("../../components/fx"),f=b("../plots"),k=b("../cartesian/axes"),r=b("../cartesian/autorange").getAutoRange,u=b("../../components/dragelement"),v=b("../cartesian/select").prepSelect,
x=b("../cartesian/select").clearSelect,C=b("../cartesian/select").selectOnClick,z=b("./zoom"),y=b("./constants"),D=b("../../lib/geo_location_utils"),A=b("../../lib/topojson_utils"),t=b("topojson-client").feature;b("./projections")(a);b=q.prototype;K.exports=function(B){return new q(B)};b.plot=function(B,F,I){var J=this,L=F[this.id],H=[],P=!1,M;for(M in y.layerNameToAdjective)if("frame"!==M&&L["show"+M]){P=!0;break}for(M=0;M<B.length;M++)if(B[0][0].trace.locationmode){P=!0;break}P&&(L=A.getTopojsonName(L),
null===J.topojson||L!==J.topojsonName)&&(J.topojsonName=L,void 0===window.PlotlyGeoAssets.topojson[J.topojsonName]&&H.push(J.fetchTopojson()));H=H.concat(D.fetchTraceGeoData(B));I.push(new Promise(function(N,T){Promise.all(H).then(function(){J.topojson=window.PlotlyGeoAssets.topojson[J.topojsonName];J.update(B,F);N()}).catch(T)}))};b.fetchTopojson=function(){var B=this,F=A.getTopojsonPath(B.topojsonURL,B.topojsonName);return new Promise(function(I,J){a.json(F,function(L,H){if(L)return 404===L.status?
J(Error(["plotly.js could not find topojson file at",F,". Make sure the *topojsonURL* plot config option is set properly."].join(" "))):J(Error(["unexpected error while fetching topojson file at",F].join(" ")));window.PlotlyGeoAssets.topojson[B.topojsonName]=H;I()})})};b.update=function(B,F){var I=F[this.id];this.hasChoropleth=!1;for(var J=0;J<B.length;J++){var L=B[J],H=L[0].trace;"choropleth"===H.type&&(this.hasChoropleth=!0);!0===H.visible&&0<H._length&&H._module.calcGeoJSON(L,F)}this.updateProjection(B,
F)||(this.viewInitial&&this.scope===I.scope||this.saveViewInitial(I),this.scope=I.scope,this.updateBaseLayers(F,I),this.updateDims(F,I),this.updateFx(F,I),f.generalUpdatePerTraceModule(this.graphDiv,this,B,I),B=this.layers.frontplot.select(".scatterlayer"),this.dataPoints.point=B.selectAll(".point"),this.dataPoints.text=B.selectAll("text"),this.dataPaths.line=B.selectAll(".js-line"),B=this.layers.backplot.select(".choroplethlayer"),this.dataPaths.choropleth=B.selectAll("path"),this.render())};b.updateProjection=
function(B,F){B=this.graphDiv;var I=F[this.id],J=F._size,L=I.domain,H=I.projection,P=I.lonaxis,M=I.lataxis,N=P._ax,T=M._ax;F=this.projection=m(I);L=[[J.l+J.w*L.x[0],J.t+J.h*(1-L.y[1])],[J.l+J.w*L.x[1],J.t+J.h*(1-L.y[0])]];J=I.center||{};var Q=H.rotation||{},U=P.range||[],S=M.range||[];I.fitbounds&&(N._length=L[1][0]-L[0][0],T._length=L[1][1]-L[0][1],N.range=r(B,N),T.range=r(B,T),M=(N.range[0]+N.range[1])/2,P=(T.range[0]+T.range[1])/2,I._isScoped?J={lon:M,lat:P}:I._isClipped?(J={lon:M,lat:P},Q={lon:M,
lat:P,roll:Q.roll},S=H.type,U=y.lonaxisSpan[S]/2||180,S=y.lataxisSpan[S]/2||90,U=[M-U,M+U],S=[P-S,P+S]):(J={lon:M,lat:P},Q={lon:M,lat:Q.lat,roll:Q.roll}));F.center([J.lon-Q.lon,J.lat-Q.lat]).rotate([-Q.lon,-Q.lat,Q.roll]).parallels(H.parallels);Q=h(U,S);F.fitExtent(L,Q);L=this.bounds=F.getBounds(Q);M=this.fitScale=F.scale();Q=F.translate();if(!(isFinite(L[0][0])&&isFinite(L[0][1])&&isFinite(L[1][0])&&isFinite(L[1][1]))||isNaN(Q[0])||isNaN(Q[0])){F=["fitbounds","projection.rotation","center","lonaxis.range",
"lataxis.range"];I={};for(J=0;J<F.length;J++)I[this.id+"."+F[J]]=null;this.viewInitial=null;e.warn("Invalid geo settings, relayout'ing to default view.");B._promises.push(g.call("relayout",B,I));return"Invalid geo settings, relayout'ing to default view."}I.fitbounds?(B=F.getBounds(h(N.range,T.range)),B=Math.min((L[1][0]-L[0][0])/(B[1][0]-B[0][0]),(L[1][1]-L[0][1])/(B[1][1]-B[0][1])),isFinite(B)?F.scale(B*M):e.warn("Something went wrong during"+this.id+"fitbounds computations.")):F.scale(H.scale*M);
B=this.midPt=[(L[0][0]+L[1][0])/2,(L[0][1]+L[1][1])/2];F.translate([Q[0]+(B[0]-Q[0]),Q[1]+(B[1]-Q[1])]).clipExtent(L);I._isAlbersUsa&&(B=F([J.lon,J.lat]),I=F.translate(),F.translate([I[0]-(B[0]-I[0]),I[1]-(B[1]-I[1])]))};b.updateBaseLayers=function(B,F){function I(N){return"lonaxis"===N||"lataxis"===N}var J=this,L=J.topojson,H=J.layers,P=J.basePaths,M=(this.hasChoropleth?y.layersForChoropleth:y.layers).filter(function(N){return y.lineLayers[N]||y.fillLayers[N]?F["show"+N]:I(N)?F[N].showgrid:!0});
M=J.framework.selectAll(".layer").data(M,String);M.exit().each(function(N){delete H[N];delete P[N];a.select(this).remove()});M.enter().append("g").attr("class",function(N){return"layer "+N}).each(function(N){var T=H[N]=a.select(this);"bg"===N?J.bgRect=T.append("rect").style("pointer-events","all"):I(N)?P[N]=T.append("path").style("fill","none"):"backplot"===N?T.append("g").classed("choroplethlayer",!0):"frontplot"===N?T.append("g").classed("scatterlayer",!0):y.lineLayers[N]?P[N]=T.append("path").style("fill",
"none").style("stroke-miterlimit",2):y.fillLayers[N]&&(P[N]=T.append("path").style("stroke","none"))});M.order();M.each(function(N){var T=P[N],Q=y.layerNameToAdjective[N];"frame"===N?T.datum(y.sphereSVG):y.lineLayers[N]||y.fillLayers[N]?T.datum(t(L,L.objects[N])):I(N)&&T.datum(l(N,F,B)).call(p.stroke,F[N].gridcolor).call(c.dashLine,"",F[N].gridwidth);y.lineLayers[N]?T.call(p.stroke,F[Q+"color"]).call(c.dashLine,"",F[Q+"width"]):y.fillLayers[N]&&T.call(p.fill,F[Q+"color"])})};b.updateDims=function(B,
F){var I=this.bounds,J=(F.framewidth||0)/2;B=I[0][0]-J;var L=I[0][1]-J,H=I[1][0]-B+J;I=I[1][1]-L+J;c.setRect(this.clipRect,B,L,H,I);this.bgRect.call(c.setRect,B,L,H,I).call(p.fill,F.bgcolor);this.xaxis._offset=B;this.xaxis._length=H;this.yaxis._offset=L;this.yaxis._length=I};b.updateFx=function(B,F){function I(){var U=L.viewInitial,S={},X;for(X in U)S[L.id+"."+X]=U[X];g.call("_guiRelayout",H,S);H.emit("plotly_doubleclick",null)}function J(U){return L.projection.invert([U[0]+L.xaxis._offset,U[1]+L.yaxis._offset])}
var L=this,H=L.graphDiv,P=L.bgRect,M=B.dragmode,N=B.clickmode;if(!L.isStatic){var T;"select"===M?T=function(U,S){(U.range={})[L.id]=[J([S.xmin,S.ymin]),J([S.xmax,S.ymax])]}:"lasso"===M&&(T=function(U,S,X){(U.lassoPoints={})[L.id]=X.filtered.map(J)});var Q={element:L.bgRect.node(),gd:H,plotinfo:{id:L.id,xaxis:L.xaxis,yaxis:L.yaxis,fillRangeItems:T},xaxes:[L.xaxis],yaxes:[L.yaxis],subplot:L.id,clickFn:function(U){2===U&&x(H)}};if("pan"===M){if(P.node().onmousedown=null,P.call(z(L,F)),P.on("dblclick.zoom",
I),!H._context._scrollZoom.geo)P.on("wheel.zoom",null)}else if("select"===M||"lasso"===M)P.on(".zoom",null),Q.prepFn=function(U,S,X){v(U,S,X,Q,M)},u.init(Q);P.on("mousemove",function(){var U=L.projection.invert(a.mouse(this));if(!U||isNaN(U[0])||isNaN(U[1]))return u.unhover(H,a.event);L.xaxis.p2c=function(){return U[0]};L.yaxis.p2c=function(){return U[1]};d.hover(H,a.event,L.id)});P.on("mouseout",function(){H._dragging||u.unhover(H,a.event)});P.on("click",function(){"select"!==M&&"lasso"!==M&&(-1<
N.indexOf("select")&&C(a.event,H,[L.xaxis],[L.yaxis],L.id,Q),-1<N.indexOf("event")&&d.click(H,a.event))})}};b.makeFramework=function(){var B=this,F=B.graphDiv,I=F._fullLayout,J="clip"+I._uid+B.id;B.clipDef=I._clips.append("clipPath").attr("id",J);B.clipRect=B.clipDef.append("rect");B.framework=a.select(B.container).append("g").attr("class","geo "+B.id).call(c.setClipUrl,J,F);B.project=function(L){return(L=B.projection(L))?[L[0]-B.xaxis._offset,L[1]-B.yaxis._offset]:[null,null]};B.xaxis={_id:"x",c2p:function(L){return B.project(L)[0]}};
B.yaxis={_id:"y",c2p:function(L){return B.project(L)[1]}};B.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"};k.setConvert(B.mockAxis,I)};b.saveViewInitial=function(B){var F=B.center||{},I=B.projection,J=I.rotation||{};this.viewInitial={fitbounds:B.fitbounds,"projection.scale":I.scale};e.extendFlat(this.viewInitial,B._isScoped?{"center.lon":F.lon,"center.lat":F.lat}:B._isClipped?{"projection.rotation.lon":J.lon,"projection.rotation.lat":J.lat}:{"center.lon":F.lon,"center.lat":F.lat,"projection.rotation.lon":J.lon})};
b.render=function(){function B(H){return(H=I(H.lonlat))?n(H[0],H[1]):null}function F(H){return I.isLonLatOverEdges(H.lonlat)?"none":null}var I=this.projection,J=I.getPath(),L;for(L in this.basePaths)this.basePaths[L].attr("d",J);for(L in this.dataPaths)this.dataPaths[L].attr("d",function(H){return J(H.geojson)});for(L in this.dataPoints)this.dataPoints[L].attr("display",F).attr("transform",B)}},{"../../components/color":643,"../../components/dragelement":662,"../../components/drawing":665,"../../components/fx":683,
"../../lib":778,"../../lib/geo_location_utils":771,"../../lib/topojson_utils":806,"../../registry":911,"../cartesian/autorange":827,"../cartesian/axes":828,"../cartesian/select":847,"../plots":891,"./constants":858,"./projections":863,"./zoom":864,d3:169,"topojson-client":579}],860:[function(b,K,G){var q=b("../../plots/get_data").getSubplotCalcData;G=b("../../lib").counterRegex;var m=b("./geo");G=G("geo");K.exports={attr:"geo",name:"geo",idRoot:"geo",idRegex:G,attrRegex:G,attributes:{geo:{valType:"subplotid",
dflt:"geo",editType:"calc"}},layoutAttributes:b("./layout_attributes"),supplyLayoutDefaults:b("./layout_defaults"),plot:function(l){for(var h=l._fullLayout,a=l.calcdata,g=h._subplots.geo,e=0;e<g.length;e++){var n=g[e],p=q(a,"geo",n),c=h[n]._subplot;c||(c=m({id:n,graphDiv:l,container:h._geolayer.node(),topojsonURL:l._context.topojsonURL,staticPlot:l._context.staticPlot}),h[n]._subplot=c);c.plot(p,h,l._promises)}},updateFx:function(l){l=l._fullLayout;for(var h=l._subplots.geo,a=0;a<h.length;a++){var g=
l[h[a]];g._subplot.updateFx(l,g)}},clean:function(l,h,a,g){l=g._subplots.geo||[];for(a=0;a<l.length;a++){var e=l[a],n=g[e]._subplot;!h[e]&&n&&(n.framework.remove(),n.clipDef.remove())}}}},{"../../lib":778,"../../plots/get_data":865,"./geo":859,"./layout_attributes":861,"./layout_defaults":862}],861:[function(b,K,G){G=b("../../components/color/attributes");var q=b("../domain").attributes,m=b("./constants");b=b("../../plot_api/edit_types").overrideAll;var l={range:{valType:"info_array",items:[{valType:"number"},
{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:G.lightLine},gridwidth:{valType:"number",min:0,dflt:1}};(K.exports=b({domain:q({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:Object.keys(m.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",
values:Object.keys(m.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:G.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",
dflt:m.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:m.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:m.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:m.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:G.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",
dflt:G.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:G.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:G.background},lonaxis:l,lataxis:l},"plot","from-root")).uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":642,"../../plot_api/edit_types":810,"../domain":855,"./constants":858}],862:[function(b,K,G){function q(n,p,c,d){var f=h(d.fullData,"geo",d.id).map(function(I){return I._expandedIndex});
d=c("resolution");var k=c("scope"),r=a.scopeDefaults[k],u=c("projection.type",r.projType),v=p._isAlbersUsa="albers usa"===u;v&&(k=p.scope="usa");var x=p._isScoped="world"!==k,C=p._isConic=-1!==u.indexOf("conic"),z=p._isClipped=!!a.lonaxisSpan[u];!1===n.visible&&(n=m.extendDeep({},p._template),n.showcoastlines=!1,n.showcountries=!1,n.showframe=!1,n.showlakes=!1,n.showland=!1,n.showocean=!1,n.showrivers=!1,n.showsubunits=!1,n.lonaxis&&(n.lonaxis.showgrid=!1),n.lataxis&&(n.lataxis.showgrid=!1),p._template=
n);n=c("visible");for(var y,D=0;D<e.length;D++){var A=e[D];y=[30,10][D];if(x)var t=r[A+"Range"];else{t=a[A+"Span"];t=(t[u]||t["*"])/2;var B=c("projection.rotation."+A.substr(0,3),r.projRotate[D]);t=[B-t,B+t]}t=c(A+".range",t);c(A+".tick0");c(A+".dtick",y);if(y=c(A+".showgrid",n?void 0:!1))c(A+".gridcolor"),c(A+".gridwidth");p[A]._ax={type:"linear",_id:A.slice(0,3),_traceIndices:f,setScale:m.identity,c2l:m.identity,r2l:m.identity,autorange:!0,range:t.slice(),_m:1,_input:{}}}D=p.lonaxis.range;f=p.lataxis.range;
u=D[0];D=D[1];0<u&&0>D&&(D+=360);u=(u+D)/2;if(!v){D=x?r.projRotate:[u,0,0];var F=c("projection.rotation.lon",D[0]);c("projection.rotation.lat",D[1]);c("projection.rotation.roll",D[2]);if(y=c("showcoastlines",!x&&n))c("coastlinecolor"),c("coastlinewidth");(y=c("showocean",n?void 0:!1))&&c("oceancolor")}v?(F=-96.6,v=38.7):(F=x?u:F,v=(f[0]+f[1])/2);c("center.lon",F);c("center.lat",v);C&&c("projection.parallels",r.projParallels||[0,60]);c("projection.scale");(y=c("showland",n?void 0:!1))&&c("landcolor");
(y=c("showlakes",n?void 0:!1))&&c("lakecolor");if(y=c("showrivers",n?void 0:!1))c("rivercolor"),c("riverwidth");if(y=c("showcountries",x&&"usa"!==k&&n))c("countrycolor"),c("countrywidth");if("usa"===k||"north america"===k&&50===d)c("showsubunits",n),c("subunitcolor"),c("subunitwidth");!x&&(y=c("showframe",n))&&(c("framecolor"),c("framewidth"));c("bgcolor");c("fitbounds")&&(delete p.projection.scale,x?(delete p.center.lon,delete p.center.lat):z?(delete p.center.lon,delete p.center.lat,delete p.projection.rotation.lon,
delete p.projection.rotation.lat,delete p.lonaxis.range,delete p.lataxis.range):(delete p.center.lon,delete p.center.lat,delete p.projection.rotation.lon))}var m=b("../../lib"),l=b("../subplot_defaults"),h=b("../get_data").getSubplotData,a=b("./constants"),g=b("./layout_attributes"),e=a.axesNames;K.exports=function(n,p,c){l(n,p,c,{type:"geo",attributes:g,handleDefaults:q,fullData:c,partition:"y"})}},{"../../lib":778,"../get_data":865,"../subplot_defaults":905,"./constants":858,"./layout_attributes":861}],
863:[function(b,K,G){K.exports=function(q){function m(Q,U){return{type:"Feature",id:Q.id,properties:Q.properties,geometry:l(Q.geometry,U)}}function l(Q,U){if(!Q)return null;if("GeometryCollection"===Q.type)return{type:"GeometryCollection",geometries:Q.geometries.map(function(X){return l(X,U)})};if(!B.hasOwnProperty(Q.type))return null;var S=B[Q.type];q.geo.stream(Q,U(S));return S.result()}function h(){}function a(Q){return 1<Q?I:-1>Q?-I:Math.asin(Q)}function g(Q){return 1<Q?0:-1>Q?F:Math.acos(Q)}
function e(Q,U){var S=(2+I)*Math.sin(U);U/=2;for(var X=0,Z=Infinity;10>X&&1E-6<Math.abs(Z);X++)Z=Math.cos(U),U-=Z=(U+Math.sin(U)*(Z+2)-S)/(2*Z*(1+Z));return[2/Math.sqrt(F*(4+F))*Q*(1+Math.cos(U)),2*Math.sqrt(F/(4+F))*Math.sin(U)]}function n(Q,U){function S(X,Z){X=M(X/U,Z);X[0]*=Q;return X}2>arguments.length&&(U=Q);if(1===U)return M;if(Infinity===U)return p;S.invert=function(X,Z){X=M.invert(X/Q,Z);X[0]*=U;return X};return S}function p(Q,U){return[Q*Math.cos(U)/Math.cos(U/=2),2*Math.sin(U)]}function c(Q,
U){return[3*Q/(2*F)*Math.sqrt(F*F/3-U*U),U]}function d(Q,U){return[Q,1.25*Math.log(Math.tan(F/4+.4*U))]}function f(Q){return function(U){var S=Q*Math.sin(U),X=30,Z;do U-=Z=(U+Math.sin(U)-S)/(1+Math.cos(U));while(1E-6<Math.abs(Z)&&0<--X);return U/2}}function k(Q,U){var S=U*U,X=S*S;return[Q*(.8707-.131979*S+X*(-.013791+X*(.003971*S-.001529*X))),U*(1.007226+S*(.015085+X*(-.044475+.028874*S-.005916*X)))]}function r(Q,U){var S=Math.min(18,36*Math.abs(U)/F),X=Math.floor(S);S-=X;var Z=(ja=T[X])[0],aa=ja[1],
fa=(ja=T[++X])[0],ha=ja[1];X=(ja=T[Math.min(19,++X)])[0];ja=ja[1];var ja;return[Q*(fa+S*(X-Z)/2+S*S*(X-2*fa+Z)/2),(0<U?I:-I)*(ha+S*(ja-aa)/2+S*S*(ja-2*ha+aa)/2)]}function u(Q,U){return[Q*Math.cos(U),U]}function v(Q,U){var S=Math.cos(U);var X=(X=g(S*Math.cos(Q/=2)))?X/Math.sin(X):1;return[2*S*Math.sin(Q)*X,Math.sin(U)*X]}function x(Q,U){var S=v(Q,U);return[(S[0]+Q/I)/2,(S[1]+U)/2]}q.geo.project=function(Q,U){U=U.stream;if(!U)throw Error("not yet supported");return(Q&&C.hasOwnProperty(Q.type)?C[Q.type]:
l)(Q,U)};var C={Feature:m,FeatureCollection:function(Q,U){return{type:"FeatureCollection",features:Q.features.map(function(S){return m(S,U)})}}},z=[],y=[],D={point:function(Q,U){z.push([Q,U])},result:function(){var Q=z.length?2>z.length?{type:"Point",coordinates:z[0]}:{type:"MultiPoint",coordinates:z}:null;z=[];return Q}},A={lineStart:h,point:function(Q,U){z.push([Q,U])},lineEnd:function(){z.length&&(y.push(z),z=[])},result:function(){var Q=y.length?2>y.length?{type:"LineString",coordinates:y[0]}:
{type:"MultiLineString",coordinates:y}:null;y=[];return Q}},t={polygonStart:h,lineStart:h,point:function(Q,U){z.push([Q,U])},lineEnd:function(){var Q=z.length;if(Q){do z.push(z[0].slice());while(4>++Q);y.push(z);z=[]}},polygonEnd:h,result:function(){if(!y.length)return null;var Q=[],U=[];y.forEach(function(S){if(4>(Z=S.length))var X=!1;else{X=0;for(var Z,aa=S[Z-1][1]*S[0][0]-S[Z-1][0]*S[0][1];++X<Z;)aa+=S[X-1][1]*S[X][0]-S[X-1][0]*S[X][1];X=0>=aa}X?Q.push([S]):U.push(S)});U.forEach(function(S){var X=
S[0];Q.some(function(Z){for(var aa=Z[0],fa=X[0],ha=X[1],ja=!1,ba=0,ma=aa.length,qa=ma-1;ba<ma;qa=ba++){var ka=aa[ba],oa=ka[0];ka=ka[1];var na=aa[qa];qa=na[0];na=na[1];ka>ha^na>ha&&fa<(qa-oa)*(ha-ka)/(na-ka)+oa&&(ja=!ja)}if(ja)return Z.push(S),!0})||Q.push([S])});y=[];return Q.length?1<Q.length?{type:"MultiPolygon",coordinates:Q}:{type:"Polygon",coordinates:Q[0]}:null}},B={Point:D,MultiPoint:D,LineString:A,MultiLineString:A,Polygon:t,MultiPolygon:t,Sphere:t},F=Math.PI,I=F/2,J=F/180,L=180/F,H=q.geo.projection,
P=q.geo.projectionMutator;q.geo.interrupt=function(Q){function U(ja,ba){for(var ma=0>ba?-1:1,qa=Z[+(0>ba)],ka=0,oa=qa.length-1;ka<oa&&ja>qa[ka][2][0];++ka);ja=Q(ja-qa[ka][1][0],ba);ja[0]+=Q(qa[ka][1][0],ma*ba>ma*qa[ka][0][1]?qa[ka][0][1]:ba)[0];return ja}function S(){aa=Z.map(function(ja){return ja.map(function(ba){var ma=Q(ba[0][0],ba[0][1])[0],qa=Q(ba[2][0],ba[2][1])[0],ka=Q(ba[1][0],ba[0][1])[1];ba=Q(ba[1][0],ba[1][1])[1];if(ka>ba){var oa=ka;ka=ba;ba=oa}return[[ma,ka],[qa,ba]]})})}function X(ja,
ba){for(var ma=-1,qa=ja.length,ka=ja[0],oa,na,la,ia=[];++ma<qa;){oa=ja[ma];na=(oa[0]-ka[0])/ba;la=(oa[1]-ka[1])/ba;for(var sa=0;sa<ba;++sa)ia.push([ka[0]+sa*na,ka[1]+sa*la]);ka=oa}ia.push(oa);return ia}var Z=[[[[-F,0],[0,I],[F,0]]],[[[-F,0],[0,-I],[F,0]]]],aa;Q.invert&&(U.invert=function(ja,ba){for(var ma=aa[+(0>ba)],qa=Z[+(0>ba)],ka=0,oa=ma.length;ka<oa;++ka){var na=ma[ka];if(na[0][0]<=ja&&ja<na[1][0]&&na[0][1]<=ba&&ba<na[1][1])return ma=Q.invert(ja-Q(qa[ka][1][0],0)[0],ba),ma[0]+=qa[ka][1][0],qa=
U(ma[0],ma[1]),ja=[ja,ba],1E-6>Math.abs(qa[0]-ja[0])&&1E-6>Math.abs(qa[1]-ja[1])?ma:null}});var fa=q.geo.projection(U),ha=fa.stream;fa.stream=function(ja){var ba=fa.rotate(),ma=ha(ja),qa=(fa.rotate([0,0]),ha(ja));fa.rotate(ba);ma.sphere=function(){var ka=q.geo,oa=ka.stream;var na=[];for(var la=0,ia=Z[0].length;la<ia;++la){var sa=Z[0][la],ta=180*sa[0][0]/F,Aa=180*sa[0][1]/F,Ka=180*sa[1][1]/F,Sa=180*sa[2][0]/F;sa=180*sa[2][1]/F;na.push(X([[ta+1E-6,Aa+1E-6],[ta+1E-6,Ka-1E-6],[Sa-1E-6,Ka-1E-6],[Sa-1E-6,
sa+1E-6]],30))}for(la=Z[1].length-1;0<=la;--la)sa=Z[1][la],ta=180*sa[0][0]/F,Aa=180*sa[0][1]/F,Ka=180*sa[1][1]/F,Sa=180*sa[2][0]/F,sa=180*sa[2][1]/F,na.push(X([[Sa-1E-6,sa-1E-6],[Sa-1E-6,Ka+1E-6],[ta+1E-6,Ka+1E-6],[ta+1E-6,Aa-1E-6]],30));na={type:"Polygon",coordinates:[q.merge(na)]};oa.call(ka,na,qa)};return ma};fa.lobes=function(ja){if(!arguments.length)return Z.map(function(ba){return ba.map(function(ma){return[[180*ma[0][0]/F,180*ma[0][1]/F],[180*ma[1][0]/F,180*ma[1][1]/F],[180*ma[2][0]/F,180*
ma[2][1]/F]]})});Z=ja.map(function(ba){return ba.map(function(ma){return[[ma[0][0]*F/180,ma[0][1]*F/180],[ma[1][0]*F/180,ma[1][1]*F/180],[ma[2][0]*F/180,ma[2][1]*F/180]]})});S();return fa};return fa};e.invert=function(Q,U){U=.5*U*Math.sqrt((4+F)/F);var S=a(U),X=Math.cos(S);return[Q/(2/Math.sqrt(F*(4+F))*(1+X)),a((S+U*(X+2))/(2+I))]};(q.geo.eckert4=function(){return H(e)}).raw=e;var M=q.geo.azimuthalEqualArea.raw;p.invert=function(Q,U){U=2*a(U/2);return[Q*Math.cos(U/2)/Math.cos(U),U]};(q.geo.hammer=
function(){var Q=2,U=P(n),S=U(Q);S.coefficient=function(X){return arguments.length?U(Q=+X):Q};return S}).raw=n;c.invert=function(Q,U){return[2/3*F*Q/Math.sqrt(F*F/3-U*U),U]};(q.geo.kavrayskiy7=function(){return H(c)}).raw=c;d.invert=function(Q,U){return[Q,2.5*Math.atan(Math.exp(.8*U))-.625*F]};(q.geo.miller=function(){return H(d)}).raw=d;f(F);var N=function(Q,U,S){function X(aa,fa){return[Q*aa*Math.cos(fa=Z(fa)),U*Math.sin(fa)]}var Z=f(S);X.invert=function(aa,fa){fa=a(fa/U);return[aa/(Q*Math.cos(fa)),
a((2*fa+Math.sin(2*fa))/S)]};return X}(Math.SQRT2/I,Math.SQRT2,F);(q.geo.mollweide=function(){return H(N)}).raw=N;k.invert=function(Q,U){var S=U,X=25;do{var Z=S*S;var aa=Z*Z;S-=aa=(S*(1.007226+Z*(.015085+aa*(-.044475+.028874*Z-.005916*aa)))-U)/(1.007226+Z*(.045255+aa*(-.311325+.259866*Z-.005916*11*aa)))}while(1E-6<Math.abs(aa)&&0<--X);return[Q/(.8707+(Z=S*S)*(-.131979+Z*(-.013791+Z*Z*Z*(.003971-.001529*Z)))),S]};(q.geo.naturalEarth=function(){return H(k)}).raw=k;var T=[[.9986,-.062],[1,0],[.9986,
.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];T.forEach(function(Q){Q[1]*=1.0144});r.invert=function(Q,U){var S=U/I,X=90*S,Z=Math.min(18,Math.abs(X/5)),aa=Math.max(0,Math.floor(Z));do{var fa=T[aa][1],ha=T[aa+1][1],ja=T[Math.min(19,aa+2)][1],ba=ja-fa,ma=2*(Math.abs(S)-ha)/ba;fa=(ja-2*ha+fa)/ba;ma*=1-fa*ma*(1-2*fa*ma);if(0<=
ma||1===aa){X=(0<=U?5:-5)*(ma+Z);S=50;do Z=Math.min(18,Math.abs(X)/5),aa=Math.floor(Z),ma=Z-aa,fa=T[aa][1],ha=T[aa+1][1],ja=T[Math.min(19,aa+2)][1],X-=(Z=(0<=U?I:-I)*(ha+ma*(ja-fa)/2+ma*ma*(ja-2*ha+fa)/2)-U)*L;while(1E-12<Math.abs(Z)&&0<--S);break}}while(0<=--aa);U=T[aa][0];Z=T[aa+1][0];aa=T[Math.min(19,aa+2)][0];return[Q/(Z+ma*(aa-U)/2+ma*ma*(aa-2*Z+U)/2),X*J]};(q.geo.robinson=function(){return H(r)}).raw=r;u.invert=function(Q,U){return[Q/Math.cos(U),U]};(q.geo.sinusoidal=function(){return H(u)}).raw=
u;v.invert=function(Q,U){if(!(Q*Q+4*U*U>F*F+1E-6)){var S=Q,X=U,Z=25;do{var aa=Math.sin(S),fa=Math.sin(S/2),ha=Math.cos(S/2),ja=Math.sin(X),ba=Math.cos(X),ma=Math.sin(2*X),qa=ja*ja,ka=ba*ba,oa=fa*fa,na=1-ka*ha*ha,la=na?g(ba*ha)*Math.sqrt(ia=1/na):ia=0,ia;na=2*la*ba*fa-Q;var sa=la*ja-U,ta=ia*(ka*oa+la*ba*ha*qa),Aa=ia*(.5*aa*ma-2*la*ja*fa);aa=.25*ia*(ma*fa-la*ja*ka*aa);ba=ia*(qa*ha+la*oa*ba);ha=Aa*aa-ba*ta;if(!ha)break;Aa=(sa*Aa-na*ba)/ha;na=(na*aa-sa*ta)/ha;S-=Aa;X-=na}while((1E-6<Math.abs(Aa)||1E-6<
Math.abs(na))&&0<--Z);return[S,X]}};(q.geo.aitoff=function(){return H(v)}).raw=v;x.invert=function(Q,U){var S=Q,X=U,Z=25;do{var aa=Math.cos(X),fa=Math.sin(X),ha=Math.sin(2*X),ja=fa*fa,ba=aa*aa,ma=Math.sin(S),qa=Math.cos(S/2),ka=Math.sin(S/2),oa=ka*ka,na=1-ba*qa*qa,la=na?g(aa*qa)*Math.sqrt(ia=1/na):ia=0,ia;na=.5*(2*la*aa*ka+S/I)-Q;var sa=.5*(la*fa+X)-U,ta=.5*ia*(ba*oa+la*aa*qa*ja)+.5/I,Aa=ia*(ma*ha/4-la*fa*ka);fa=.125*ia*(ha*ka-la*fa*ba*ma);ja=.5*ia*(ja*qa+la*oa*aa)+.5;aa=Aa*fa-ja*ta;Aa=(sa*Aa-na*
ja)/aa;na=(na*fa-sa*ta)/aa;S-=Aa;X-=na}while((1E-6<Math.abs(Aa)||1E-6<Math.abs(na))&&0<--Z);return[S,X]};(q.geo.winkel3=function(){return H(x)}).raw=x}},{}],864:[function(b,K,G){function q(z,y){return f.behavior.zoom().translate(y.translate()).scale(y.scale())}function m(z,y,D){function A(M,N){H[t+"."+M]=k.nestedProperty(I,M).get();r.call("_storeDirectGUIEdit",F,J._preGUI,H);var T=k.nestedProperty(L,M);T.get()!==N&&(T.set(N),k.nestedProperty(I,M).set(N),P[t+"."+M]=N)}var t=z.id,B=z.graphDiv,F=B.layout,
I=F[t],J=B._fullLayout,L=J[t],H={},P={};D(A);A("projection.scale",y.scale()/z.fitScale);A("fitbounds",!1);B.emit("plotly_relayout",P)}function l(z,y){function D(t){var B=y.invert(z.midPt);t("center.lon",B[0]);t("center.lat",B[1])}var A=q(z,y);A.on("zoomstart",function(){f.select(this).style(x)}).on("zoom",function(){y.scale(f.event.scale).translate(f.event.translate);z.render();var t=y.invert(z.midPt);z.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":y.scale()/z.fitScale,"geo.center.lon":t[0],
"geo.center.lat":t[1]})}).on("zoomend",function(){f.select(this).style(C);m(z,y,D)});return A}function h(z,y){function D(N){var T=y.rotate(),Q=y.invert(z.midPt);N("projection.rotation.lon",-T[0]);N("center.lon",Q[0]);N("center.lat",Q[1])}var A=q(z,y),t,B,F,I,J,L,H,P,M;A.on("zoomstart",function(){f.select(this).style(x);t=f.mouse(this);B=y.rotate();F=y.translate();I=B;J=y.invert(t)}).on("zoom",function(){L=f.mouse(this);var N=t;var T=y.invert(N);T?(T=y(T),N=2<Math.abs(T[0]-N[0])||2<Math.abs(T[1]-N[1])):
N=!0;N?(A.scale(y.scale()),A.translate(y.translate())):(y.scale(f.event.scale),y.translate([F[0],f.event.translate[1]]),J?y.invert(L)&&(P=y.invert(L),H=[I[0]+(P[0]-J[0]),B[1],B[2]],y.rotate(H),I=H):(t=L,J=y.invert(t)),M=!0,z.render(),N=y.rotate(),T=y.invert(z.midPt),z.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":y.scale()/z.fitScale,"geo.center.lon":T[0],"geo.center.lat":T[1],"geo.projection.rotation.lon":-N[0]}))}).on("zoomend",function(){f.select(this).style(C);M&&m(z,y,D)});return A}
function a(z,y){function D(L){F++||L({type:"zoomstart"})}function A(L){var H=y.rotate();L("projection.rotation.lon",-H[0]);L("projection.rotation.lat",-H[1])}y.rotate();y.scale();var t=q(z,y),B=d(t,"zoomstart","zoom","zoomend"),F=0,I=t.on,J;t.on("zoomstart",function(){f.select(this).style(x);var L=f.mouse(this),H=y.rotate(),P=H,M=y.translate(),N=e(H);J=g(y,L);I.call(t,"zoom",function(){var T=f.mouse(this);y.scale(f.event.scale);if(!J)L=T,J=g(y,L);else if(g(y,T)){y.rotate(H).translate(M);var Q=g(y,
T);var U=J;if(U&&Q){T=[U[1]*Q[2]-U[2]*Q[1],U[2]*Q[0]-U[0]*Q[2],U[0]*Q[1]-U[1]*Q[0]];var S=Math.sqrt(c(T,T));Q=.5*Math.acos(Math.max(-1,Math.min(1,c(U,Q))));U=Math.sin(Q)/S;var X=S&&[Math.cos(Q),T[2]*U,-T[1]*U,T[0]*U]}else X=void 0;T=N[0];S=N[1];Q=N[2];U=N[3];var Z=X[0],aa=X[1],fa=X[2];X=X[3];T=[T*Z-S*aa-Q*fa-U*X,T*aa+S*Z+Q*X-U*fa,T*fa-S*X+Q*Z+U*aa,T*X+S*fa-Q*aa+U*Z];Q=[Math.atan2(2*(T[0]*T[1]+T[2]*T[3]),1-2*(T[1]*T[1]+T[2]*T[2]))*v,Math.asin(Math.max(-1,Math.min(1,2*(T[0]*T[2]-T[3]*T[1]))))*v,Math.atan2(2*
(T[0]*T[3]+T[1]*T[2]),1-2*(T[2]*T[2]+T[3]*T[3]))*v];S=J;T=P;Z=p(S,2,Q[0]);Z=p(Z,1,Q[1]);Z=p(Z,0,Q[2]-T[2]);U=S[0];X=S[1];S=S[2];Q=Z[0];aa=Z[1];Z=Z[2];fa=Math.atan2(X,U)*v;X=Math.sqrt(U*U+X*X);Math.abs(aa)>X?(U=(0<aa?90:-90)-fa,X=0):(U=Math.asin(aa/X)*v-fa,X=Math.sqrt(X*X-aa*aa));aa=180-U-2*fa;fa=(Math.atan2(Z,Q)-Math.atan2(S,X))*v;S=(Math.atan2(Z,Q)-Math.atan2(S,-X))*v;Q=n(T[0],T[1],U,fa);Z=n(T[0],T[1],aa,S);T=Q<=Z?[U,fa,T[2]]:[aa,S,T[2]];isFinite(T[0])&&isFinite(T[1])&&isFinite(T[2])||(T=P);y.rotate(T);
P=T}B.of(this,arguments)({type:"zoom"})});D(B.of(this,arguments))}).on("zoomend",function(){f.select(this).style(C);I.call(t,"zoom",null);var L=B.of(this,arguments);--F||L({type:"zoomend"});m(z,y,A)}).on("zoom.redraw",function(){z.render();var L=y.rotate();z.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":y.scale()/z.fitScale,"geo.projection.rotation.lon":-L[0],"geo.projection.rotation.lat":-L[1]})});return f.rebind(t,B,"on")}function g(z,y){if(z=(y=z.invert(y))&&isFinite(y[0])&&isFinite(y[1])){z=
y[0]*u;y=y[1]*u;var D=Math.cos(y);z=[D*Math.cos(z),D*Math.sin(z),Math.sin(y)]}return z}function e(z){var y=.5*z[0]*u,D=.5*z[1]*u,A=.5*z[2]*u;z=Math.sin(y);y=Math.cos(y);var t=Math.sin(D);D=Math.cos(D);var B=Math.sin(A);A=Math.cos(A);return[y*D*A+z*t*B,z*D*A-y*t*B,y*t*A+z*D*B,y*D*B-z*t*A]}function n(z,y,D,A){z=((D-z)%360+540)%360-180;y=((A-y)%360+540)%360-180;return Math.sqrt(z*z+y*y)}function p(z,y,D){var A=D*u;D=z.slice();var t=0===y?1:0;y=2===y?1:2;var B=Math.cos(A);A=Math.sin(A);D[t]=z[t]*B-z[y]*
A;D[y]=z[y]*B+z[t]*A;return D}function c(z,y){for(var D=0,A=0,t=z.length;A<t;++A)D+=z[A]*y[A];return D}function d(z){for(var y=0,D=arguments.length,A=[];++y<D;)A.push(arguments[y]);var t=f.dispatch.apply(null,A);t.of=function(B,F){return function(I){try{var J=I.sourceEvent=f.event;I.target=z;f.event=I;t[I.type].apply(B,F)}finally{f.event=J}}};return t}var f=b("d3"),k=b("../../lib"),r=b("../../registry"),u=Math.PI/180,v=180/Math.PI,x={cursor:"pointer"},C={cursor:"auto"};K.exports=function(z,y){return(y._isScoped?
l:y._isClipped?a:h)(z,z.projection)}},{"../../lib":778,"../../registry":911,d3:169}],865:[function(b,K,G){var q=b("../registry"),m=b("./cartesian/constants").SUBPLOT_PATTERN;G.getSubplotCalcData=function(l,h,a){h=q.subplotsRegistry[h];if(!h)return[];h=h.attr;for(var g=[],e=0;e<l.length;e++){var n=l[e];n[0].trace[h]===a&&g.push(n)}return g};G.getModuleCalcData=function(l,h){var a=[],g=[];h="string"===typeof h?q.getModule(h).plot:"function"===typeof h?h:h.plot;if(!h)return[a,l];for(var e=0;e<l.length;e++){var n=
l[e],p=n[0].trace;!0===p.visible&&0!==p._length&&(p._module.plot===h?a.push(n):g.push(n))}return[a,g]};G.getSubplotData=function(l,h,a){if(!q.subplotsRegistry[h])return[];var g=q.subplotsRegistry[h].attr,e=[];if("gl2d"===h){var n=a.match(m);var p="x"+n[1];var c="y"+n[2]}for(var d=0;d<l.length;d++)n=l[d],"gl2d"===h&&q.traceIs(n,"gl2d")?n[g[0]]===p&&n[g[1]]===c&&e.push(n):n[g]===a&&e.push(n);return e}},{"../registry":911,"./cartesian/constants":834}],866:[function(b,K,G){function q(e,n){this.element=
e;this.plot=n;this.wheelListener=this.mouseListener=null;this.lastInputTime=Date.now();this.lastPos=[0,0];this.boxInited=this.boxEnabled=!1;this.boxStart=[0,0];this.boxEnd=[0,0];this.dragStart=[0,0]}var m=b("mouse-change"),l=b("mouse-wheel"),h=b("mouse-event-offset"),a=b("../cartesian/constants"),g=b("has-passive-events");K.exports=function(e){function n(){for(var k=e.graphDiv._fullLayout._axisConstraintGroups,r=e.xaxis._id,u=e.yaxis._id,v=0;v<k.length;v++)if(-1!==k[v][r]){if(-1!==k[v][u])return!0;
break}return!1}function p(k,r,u){function v(t,B,F){var I=Math.min(B,F);B=Math.max(B,F);I!==B?(x[t]=I,x[t+2]=B,f.dataBox=x,e.setRanges(x)):(e.selectBox.selectBox=[0,0,1,1],e.glplot.setDirty())}var x=e.calcDataBox(),C=d.viewBox,z=f.lastPos[0],y=f.lastPos[1],D=a.MINDRAG*d.pixelRatio,A=a.MINZOOM*d.pixelRatio;r*=d.pixelRatio;u*=d.pixelRatio;u=C[3]-C[1]-u;switch(e.fullLayout.dragmode){case "zoom":k?(y=r/(C[2]-C[0])*(x[2]-x[0])+x[0],C=u/(C[3]-C[1])*(x[3]-x[1])+x[1],f.boxInited||(f.boxStart[0]=y,f.boxStart[1]=
C,f.dragStart[0]=r,f.dragStart[1]=u),f.boxEnd[0]=y,f.boxEnd[1]=C,f.boxInited=!0,f.boxEnabled||f.boxStart[0]===f.boxEnd[0]&&f.boxStart[1]===f.boxEnd[1]||(f.boxEnabled=!0),C=Math.abs(f.dragStart[0]-r)<A,A=Math.abs(f.dragStart[1]-u)<A,!n()||C&&A?(C&&(f.boxEnd[0]=f.boxStart[0]),A&&(f.boxEnd[1]=f.boxStart[1])):(A=f.boxEnd[0]-f.boxStart[0],C=f.boxEnd[1]-f.boxStart[1],y=(x[3]-x[1])/(x[2]-x[0]),Math.abs(A*y)>Math.abs(C)?(f.boxEnd[1]=f.boxStart[1]+Math.abs(A)*y*(0<=C?1:-1),f.boxEnd[1]<x[1]?(f.boxEnd[1]=x[1],
f.boxEnd[0]=f.boxStart[0]+(x[1]-f.boxStart[1])/Math.abs(y)):f.boxEnd[1]>x[3]&&(f.boxEnd[1]=x[3],f.boxEnd[0]=f.boxStart[0]+(x[3]-f.boxStart[1])/Math.abs(y))):(f.boxEnd[0]=f.boxStart[0]+Math.abs(C)/y*(0<=A?1:-1),f.boxEnd[0]<x[0]?(f.boxEnd[0]=x[0],f.boxEnd[1]=f.boxStart[1]+(x[0]-f.boxStart[0])*Math.abs(y)):f.boxEnd[0]>x[2]&&(f.boxEnd[0]=x[2],f.boxEnd[1]=f.boxStart[1]+(x[2]-f.boxStart[0])*Math.abs(y))))):f.boxEnabled?(A=f.boxStart[0]!==f.boxEnd[0],C=f.boxStart[1]!==f.boxEnd[1],A||C?(A&&(v(0,f.boxStart[0],
f.boxEnd[0]),e.xaxis.autorange=!1),C&&(v(1,f.boxStart[1],f.boxEnd[1]),e.yaxis.autorange=!1),e.relayoutCallback()):e.glplot.setDirty(),f.boxEnabled=!1,f.boxInited=!1):f.boxInited&&(f.boxInited=!1);break;case "pan":f.boxEnabled=!1,f.boxInited=!1,k?(f.panning||(f.dragStart[0]=r,f.dragStart[1]=u),Math.abs(f.dragStart[0]-r)<D&&(r=f.dragStart[0]),Math.abs(f.dragStart[1]-u)<D&&(u=f.dragStart[1]),A=(z-r)*(x[2]-x[0])/(d.viewBox[2]-d.viewBox[0]),C=(y-u)*(x[3]-x[1])/(d.viewBox[3]-d.viewBox[1]),x[0]+=A,x[2]+=
A,x[1]+=C,x[3]+=C,e.setRanges(x),f.panning=!0,f.lastInputTime=Date.now(),e.xaxis.autorange=!1,e.yaxis.autorange=!1,e.cameraChanged(),e.handleAnnotations()):f.panning&&(f.panning=!1,e.relayoutCallback())}f.lastPos[0]=r;f.lastPos[1]=u}var c=e.mouseContainer,d=e.glplot,f=new q(c,d);f.mouseListener=m(c,p);c.addEventListener("touchstart",function(k){var r=h(k.changedTouches[0],c);p(0,r[0],r[1]);p(1,r[0],r[1]);k.preventDefault()},g?{passive:!1}:!1);c.addEventListener("touchmove",function(k){k.preventDefault();
var r=h(k.changedTouches[0],c);p(1,r[0],r[1]);k.preventDefault()},g?{passive:!1}:!1);c.addEventListener("touchend",function(k){p(0,f.lastPos[0],f.lastPos[1]);k.preventDefault()},g?{passive:!1}:!1);f.wheelListener=l(c,function(k,r){if(!e.scrollZoom)return!1;k=e.calcDataBox();var u=d.viewBox;r=Math.exp(5*r/(u[3]-u[1]));var v=f.lastPos[0]/(u[2]-u[0])*(k[2]-k[0])+k[0];u=f.lastPos[1]/(u[3]-u[1])*(k[3]-k[1])+k[1];k[0]=(k[0]-v)*r+v;k[2]=(k[2]-v)*r+v;k[1]=(k[1]-u)*r+u;k[3]=(k[3]-u)*r+u;e.setRanges(k);f.lastInputTime=
Date.now();e.xaxis.autorange=!1;e.yaxis.autorange=!1;e.cameraChanged();e.handleAnnotations();e.relayoutCallback();return!0},!0);return f}},{"../cartesian/constants":834,"has-passive-events":441,"mouse-change":483,"mouse-event-offset":484,"mouse-wheel":486}],867:[function(b,K,G){function q(a){this.scene=a;this.gl=a.gl;this.pixelRatio=a.pixelRatio;this.screenBox=[0,0,1,1];this.viewBox=[0,0,1,1];this.dataBox=[-1,-1,1,1];this.borderLineEnable=[!1,!1,!1,!1];this.borderLineWidth=[1,1,1,1];this.borderLineColor=
[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.ticks=[[],[]];this.tickEnable=[!0,!0,!1,!1];this.tickPad=[15,15,15,15];this.tickAngle=[0,0,0,0];this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.tickMarkLength=[0,0,0,0];this.tickMarkWidth=[0,0,0,0];this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.labels=["x","y"];this.labelEnable=[!0,!0,!1,!1];this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2];this.labelPad=[15,15,15,15];this.labelSize=[12,12];this.labelFont=["sans-serif","sans-serif"];
this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.title="";this.titleEnable=!0;this.titleCenter=[0,0,0,0];this.titleAngle=0;this.titleColor=[0,0,0,1];this.titleFont="sans-serif";this.titleSize=18;this.gridLineEnable=[!0,!0];this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]];this.gridLineWidth=[1,1];this.zeroLineEnable=[!0,!0];this.zeroLineWidth=[1,1];this.zeroLineColor=[[0,0,0,1],[0,0,0,1]];this.borderColor=[0,0,0,0];this.backgroundColor=[0,0,0,0];this.static=this.scene.staticPlot}var m=b("../cartesian/axes"),
l=b("../../lib/str2rgbarray");b=q.prototype;var h=["xaxis","yaxis"];b.merge=function(a){this.titleEnable=!1;this.backgroundColor=l(a.plot_bgcolor);var g,e;for(e=0;2>e;++e){var n=h[e];var p=n.charAt(0);var c=a[this.scene[n]._name];p=c.title.text===this.scene.fullLayout._dfltTitle[p]?"":c.title.text;for(g=0;2>=g;g+=2)this.labelEnable[e+g]=!1,this.labels[e+g]=p,this.labelColor[e+g]=l(c.title.font.color),this.labelFont[e+g]=c.title.font.family,this.labelSize[e+g]=c.title.font.size,this.labelPad[e+g]=
this.getLabelPad(n,c),this.tickEnable[e+g]=!1,this.tickColor[e+g]=l((c.tickfont||{}).color),this.tickAngle[e+g]="auto"===c.tickangle?0:Math.PI*-c.tickangle/180,this.tickPad[e+g]=this.getTickPad(c),this.tickMarkLength[e+g]=0,this.tickMarkWidth[e+g]=c.tickwidth||0,this.tickMarkColor[e+g]=l(c.tickcolor),this.borderLineEnable[e+g]=!1,this.borderLineColor[e+g]=l(c.linecolor),this.borderLineWidth[e+g]=c.linewidth||0;g=this.hasSharedAxis(c);p=this.hasAxisInDfltPos(n,c)&&!g;n=this.hasAxisInAltrPos(n,c)&&
!g;var d=c.mirror||!1;var f=g?-1!==String(d).indexOf("all"):!!d;g=g?"allticks"===d:-1!==String(d).indexOf("ticks");p?this.labelEnable[e]=!0:n&&(this.labelEnable[e+2]=!0);p?this.tickEnable[e]=c.showticklabels:n&&(this.tickEnable[e+2]=c.showticklabels);if(p||f)this.borderLineEnable[e]=c.showline;if(n||f)this.borderLineEnable[e+2]=c.showline;if(p||g)this.tickMarkLength[e]=this.getTickMarkLength(c);if(n||g)this.tickMarkLength[e+2]=this.getTickMarkLength(c);this.gridLineEnable[e]=c.showgrid;this.gridLineColor[e]=
l(c.gridcolor);this.gridLineWidth[e]=c.gridwidth;this.zeroLineEnable[e]=c.zeroline;this.zeroLineColor[e]=l(c.zerolinecolor);this.zeroLineWidth[e]=c.zerolinewidth}};b.hasSharedAxis=function(a){var g=this.scene;return 0!==m.findSubplotsWithAxis(g.fullLayout._subplots.gl2d,a).indexOf(g.id)};b.hasAxisInDfltPos=function(a,g){g=g.side;if("xaxis"===a)return"bottom"===g;if("yaxis"===a)return"left"===g};b.hasAxisInAltrPos=function(a,g){g=g.side;if("xaxis"===a)return"top"===g;if("yaxis"===a)return"right"===
g};b.getLabelPad=function(a,g){var e=g.title.font.size,n=g.showticklabels;if("xaxis"===a)return"top"===g.side?-10+e*(1.5+(n?1:0)):-10+e*(1.5+(n?.5:0));if("yaxis"===a)return"right"===g.side?10+e*(1.5+(n?1:.5)):10+e*(1.5+(n?.5:0))};b.getTickPad=function(a){return"outside"===a.ticks?10+a.ticklen:15};b.getTickMarkLength=function(a){if(!a.ticks)return 0;var g=a.ticklen;return"inside"===a.ticks?-g:g};K.exports=function(a){return new q(a)}},{"../../lib/str2rgbarray":802,"../cartesian/axes":828}],868:[function(b,
K,G){K=b("../../plot_api/edit_types").overrideAll;var q=b("./scene2d"),m=b("../layout_attributes"),l=b("../../constants/xmlns_namespaces"),h=b("../cartesian/constants"),a=b("../cartesian"),g=b("../../components/fx/layout_attributes"),e=b("../get_data").getSubplotData;G.name="gl2d";G.attr=["xaxis","yaxis"];G.idRoot=["x","y"];G.idRegex=h.idRegex;G.attrRegex=h.attrRegex;G.attributes=b("../cartesian/attributes");G.supplyLayoutDefaults=function(n,p,c){p._has("cartesian")||a.supplyLayoutDefaults(n,p,c)};
G.layoutAttrOverrides=K(a.layoutAttributes,"plot","from-root");G.baseLayoutAttrOverrides=K({plot_bgcolor:m.plot_bgcolor,hoverlabel:g.hoverlabel},"plot","nested");G.plot=function(n){for(var p=n._fullLayout,c=n._fullData,d=p._subplots.gl2d,f=0;f<d.length;f++){var k=d[f],r=p._plots[k],u=e(c,"gl2d",k),v=r._scene2d;void 0===v&&(v=new q({id:k,graphDiv:n,container:n.querySelector(".gl-container"),staticPlot:n._context.staticPlot,plotGlPixelRatio:n._context.plotGlPixelRatio},p),r._scene2d=v);v.plot(u,n.calcdata,
p,n.layout)}};G.clean=function(n,p,c,d){for(var f=d._subplots.gl2d||[],k=0;k<f.length;k++){var r=f[k],u=d._plots[r];u._scene2d&&0===e(n,"gl2d",r).length&&(u._scene2d.destroy(),delete d._plots[r])}a.clean.apply(this,arguments)};G.drawFramework=function(n){n._context.staticPlot||a.drawFramework(n)};G.toSVG=function(n){n=n._fullLayout;for(var p=n._subplots.gl2d,c=0;c<p.length;c++){var d=n._plots[p[c]]._scene2d,f=d.toImage("png");n._glimages.append("svg:image").attr({xmlns:l.svg,"xlink:href":f,x:0,y:0,
width:"100%",height:"100%",preserveAspectRatio:"none"});d.destroy()}};G.updateFx=function(n){n=n._fullLayout;for(var p=n._subplots.gl2d,c=0;c<p.length;c++)n._plots[p[c]]._scene2d.updateFx(n.dragmode)}},{"../../components/fx/layout_attributes":684,"../../constants/xmlns_namespaces":754,"../../plot_api/edit_types":810,"../cartesian":841,"../cartesian/attributes":826,"../cartesian/constants":834,"../get_data":865,"../layout_attributes":882,"./scene2d":869}],869:[function(b,K,G){function q(D,A){this.container=
D.container;this.graphDiv=D.graphDiv;this.pixelRatio=D.plotGlPixelRatio||window.devicePixelRatio;this.id=D.id;this.staticPlot=!!D.staticPlot;this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian;this.fullData=null;this.updateRefs(A);this.makeFramework();this.stopped||(this.glplotOptions=p(this),this.glplotOptions.merge(A),this.glplot=a(this.glplotOptions),this.camera=c(this),this.traces={},this.spikes=g(this.glplot),this.selectBox=e(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=
0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}var m=b("../../registry"),l=b("../../plots/cartesian/axes"),h=b("../../components/fx"),a=b("gl-plot2d"),g=b("gl-spikes2d"),e=b("gl-select-box"),n=b("webgl-context"),p=b("./convert"),c=b("./camera"),d=b("../../lib/show_no_webgl_msg");G=b("../cartesian/constraints");var f=G.enforce,k=G.clean,r=b("../cartesian/autorange").doAutoRange;G=b("../../components/dragelement/helpers");var u=G.drawMode,
v=G.selectMode,x=["xaxis","yaxis"],C,z,y=b("../cartesian/constants").SUBPLOT_PATTERN;K.exports=q;b=q.prototype;b.makeFramework=function(){if(this.staticPlot){if(!z&&(C=document.createElement("canvas"),z=n({canvas:C,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}),!z))throw Error("Error creating static canvas/context for image server");this.canvas=C;this.gl=z}else{var D=this.container.querySelector(".gl-canvas-focus"),A=n({canvas:D,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!A){d(this);
this.stopped=!0;return}this.canvas=D;this.gl=A}D=this.canvas;D.style.width="100%";D.style.height="100%";D.style.position="absolute";D.style.top="0px";D.style.left="0px";D.style["pointer-events"]="none";this.updateSize(D);D=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");D.style.position="absolute";D.style.top=D.style.left="0px";D.style.width=D.style.height="100%";D.style["z-index"]=20;D.style["pointer-events"]="none";A=this.mouseContainer=document.createElement("div");
A.style.position="absolute";A.style["pointer-events"]="auto";this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var t=this.container;t.appendChild(D);t.appendChild(A);var B=this;A.addEventListener("mouseout",function(){B.isMouseOver=!1;B.unhover()});A.addEventListener("mouseover",function(){B.isMouseOver=!0})};b.toImage=function(D){D||(D="png");this.stopped=!0;this.staticPlot&&this.container.appendChild(C);this.updateSize(this.canvas);var A=this.glplot.gl,t=A.drawingBufferWidth,B=A.drawingBufferHeight;
A.clearColor(1,1,1,0);A.clear(A.COLOR_BUFFER_BIT|A.DEPTH_BUFFER_BIT);this.glplot.setDirty();this.glplot.draw();A.bindFramebuffer(A.FRAMEBUFFER,null);var F=new Uint8Array(t*B*4);A.readPixels(0,0,t,B,A.RGBA,A.UNSIGNED_BYTE,F);A=0;for(var I=B-1;A<I;++A,--I)for(var J=0;J<t;++J)for(var L=0;4>L;++L){var H=F[4*(t*A+J)+L];F[4*(t*A+J)+L]=F[4*(t*I+J)+L];F[4*(t*I+J)+L]=H}A=document.createElement("canvas");A.width=t;A.height=B;I=A.getContext("2d");t=I.createImageData(t,B);t.data.set(F);I.putImageData(t,0,0);
switch(D){case "jpeg":D=A.toDataURL("image/jpeg");break;case "webp":D=A.toDataURL("image/webp");break;default:D=A.toDataURL("image/png")}this.staticPlot&&this.container.removeChild(C);return D};b.updateSize=function(D){D||(D=this.canvas);var A=this.pixelRatio,t=this.fullLayout,B=Math.ceil(A*t.width)|0;A=Math.ceil(A*t.height)|0;if(D.width!==B||D.height!==A)D.width=B,D.height=A;return D};b.computeTickMarks=function(){this.xaxis.setScale();this.yaxis.setScale();for(var D=[l.calcTicks(this.xaxis),l.calcTicks(this.yaxis)],
A=0;2>A;++A)for(var t=0;t<D[A].length;++t)D[A][t].text+="";return D};b.updateRefs=function(D){this.fullLayout=D;D=this.id.match(y);var A="yaxis"+D[2];this.xaxis=this.fullLayout["xaxis"+D[1]];this.yaxis=this.fullLayout[A]};b.relayoutCallback=function(){var D=this.graphDiv,A=this.xaxis,t=this.yaxis,B=D.layout,F={},I=F[A._name+".range"]=A.range.slice(),J=F[t._name+".range"]=t.range.slice();F[A._name+".autorange"]=A.autorange;F[t._name+".autorange"]=t.autorange;m.call("_storeDirectGUIEdit",D.layout,D._fullLayout._preGUI,
F);var L=B[A._name];L.range=I;L.autorange=A.autorange;A=B[t._name];A.range=J;A.autorange=t.autorange;F.lastInputTime=this.camera.lastInputTime;D.emit("plotly_relayout",F)};b.cameraChanged=function(){var D=this.camera;this.glplot.setDataBox(this.calcDataBox());var A=this.computeTickMarks(),t=this.glplotOptions.ticks;a:{for(var B=0;2>B;++B){var F=A[B],I=t[B];if(F.length!==I.length){t=!0;break a}for(var J=0;J<F.length;++J)if(F[J].x!==I[J].x){t=!0;break a}}t=!1}t&&(this.glplotOptions.ticks=A,this.glplotOptions.dataBox=
D.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())};b.handleAnnotations=function(){for(var D=this.graphDiv,A=this.fullLayout.annotations,t=0;t<A.length;t++){var B=A[t];B.xref===this.xaxis._id&&B.yref===this.yaxis._id&&m.getComponentMethod("annotations","drawOne")(D,t)}};b.destroy=function(){if(this.glplot){var D=this.traces;D&&Object.keys(D).map(function(A){D[A].dispose();delete D[A]});this.glplot.dispose();this.container.removeChild(this.svgContainer);this.container.removeChild(this.mouseContainer);
this.glplot=this.fullData=null;this.stopped=!0;this.camera.mouseListener.enabled=!1;this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener);this.camera=null}};b.plot=function(D,A,t){var B=this.glplot;this.updateRefs(t);this.xaxis.clearCalc();this.yaxis.clearCalc();this.updateTraces(D,A);this.updateFx(t.dragmode);var F=t.width,I=t.height;this.updateSize(this.canvas);D=this.glplotOptions;D.merge(t);D.screenBox=[0,0,F,I];A={_fullLayout:{_axisConstraintGroups:this.graphDiv._fullLayout._axisConstraintGroups,
xaxis:this.xaxis,yaxis:this.yaxis}};k(A,this.xaxis);k(A,this.yaxis);var J=t._size,L=this.xaxis.domain,H=this.yaxis.domain;D.viewBox=[J.l+L[0]*J.w,J.b+H[0]*J.h,F-J.r-(1-L[1])*J.w,I-J.t-(1-H[1])*J.h];this.mouseContainer.style.width=J.w*(L[1]-L[0])+"px";this.mouseContainer.style.height=J.h*(H[1]-H[0])+"px";this.mouseContainer.height=J.h*(H[1]-H[0]);this.mouseContainer.style.left=J.l+L[0]*J.w+"px";this.mouseContainer.style.top=J.t+(1-H[1])*J.h+"px";for(I=0;2>I;++I)F=this[x[I]],F._length=D.viewBox[I+2]-
D.viewBox[I],r(this.graphDiv,F),F.setScale();f(A);D.ticks=this.computeTickMarks();D.dataBox=this.calcDataBox();D.merge(t);B.update(D);this.glplot.draw()};b.calcDataBox=function(){var D=this.xaxis,A=this.yaxis,t=D.range,B=A.range;D=D.r2l;A=A.r2l;return[D(t[0]),A(B[0]),D(t[1]),A(B[1])]};b.setRanges=function(D){var A=this.xaxis,t=this.yaxis,B=A.l2r,F=t.l2r;A.range=[B(D[0]),B(D[2])];t.range=[F(D[1]),F(D[3])]};b.updateTraces=function(D,A){var t=Object.keys(this.traces),B;this.fullData=D;var F=0;a:for(;F<
t.length;F++){var I=t[F],J=this.traces[I];for(B=0;B<D.length;B++){var L=D[B];if(L.uid===I&&L.type===J.type)continue a}J.dispose();delete this.traces[I]}for(F=0;F<D.length;F++)L=D[F],t=A[F],(B=this.traces[L.uid])?B.update(L,t):(B=L._module.plot(this,L,t),this.traces[L.uid]=B);this.glplot.objects.sort(function(H,P){return H._trace.index-P._trace.index})};b.updateFx=function(D){v(D)||u(D)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]=
"auto",this.mouseContainer.style["pointer-events"]="auto");this.mouseContainer.style.cursor="pan"===D?"move":"zoom"===D?"crosshair":null};b.emitPointAction=function(D,A){for(var t=D.trace.uid,B=D.pointIndex,F,I=0;I<this.fullData.length;I++)this.fullData[I].uid===t&&(F=this.fullData[I]);D={x:D.traceCoord[0],y:D.traceCoord[1],curveNumber:F.index,pointNumber:B,data:F._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};h.appendArrayPointValue(D,F,B);this.graphDiv.emit(A,{points:[D]})};b.draw=
function(){if(!this.stopped){requestAnimationFrame(this.redraw);var D=this.glplot,A=this.camera,t=A.mouseListener,B=1===this.lastButtonState&&0===t.buttons,F=this.fullLayout;this.lastButtonState=t.buttons;this.cameraChanged();var I=t.x*D.pixelRatio;t=this.canvas.height-D.pixelRatio*t.y;if(A.boxEnabled&&"zoom"===F.dragmode){this.selectBox.enabled=!0;F=this.selectBox.selectBox=[Math.min(A.boxStart[0],A.boxEnd[0]),Math.min(A.boxStart[1],A.boxEnd[1]),Math.max(A.boxStart[0],A.boxEnd[0]),Math.max(A.boxStart[1],
A.boxEnd[1])];for(B=0;2>B;B++)A.boxStart[B]===A.boxEnd[B]&&(F[B]=D.dataBox[B],F[B+2]=D.dataBox[B+2]);D.setDirty()}else if(!A.panning&&this.isMouseOver){this.selectBox.enabled=!1;var J=F._size;(A=(J=D.pick(I/D.pixelRatio+J.l+this.xaxis.domain[0]*J.w,t/D.pixelRatio-(J.t+(1-this.yaxis.domain[1])*J.h)))&&J.object._trace.handlePick(J))&&B&&this.emitPointAction(A,"plotly_click");J&&"skip"!==J.object._trace.hoverinfo&&F.hovermode&&A&&(!this.lastPickResult||this.lastPickResult.traceUid!==A.trace.uid||this.lastPickResult.dataCoord[0]!==
A.dataCoord[0]||this.lastPickResult.dataCoord[1]!==A.dataCoord[1])&&(this.lastPickResult={traceUid:A.trace?A.trace.uid:null,dataCoord:A.dataCoord.slice()},this.spikes.update({center:J.dataCoord}),A.screenCoord=[((D.viewBox[2]-D.viewBox[0])*(J.dataCoord[0]-D.dataBox[0])/(D.dataBox[2]-D.dataBox[0])+D.viewBox[0])/D.pixelRatio,(this.canvas.height-(D.viewBox[3]-D.viewBox[1])*(J.dataCoord[1]-D.dataBox[1])/(D.dataBox[3]-D.dataBox[1])-D.viewBox[1])/D.pixelRatio],this.emitPointAction(A,"plotly_hover"),B=this.fullData[A.trace.index]||
{},I=A.pointIndex,(F=h.castHoverinfo(B,F,I))&&"all"!==F&&(F=F.split("+"),-1===F.indexOf("x")&&(A.traceCoord[0]=void 0),-1===F.indexOf("y")&&(A.traceCoord[1]=void 0),-1===F.indexOf("z")&&(A.traceCoord[2]=void 0),-1===F.indexOf("text")&&(A.textLabel=void 0),-1===F.indexOf("name")&&(A.name=void 0)),h.loneHover({x:A.screenCoord[0],y:A.screenCoord[1],xLabel:this.hoverFormatter("xaxis",A.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",A.traceCoord[1]),zLabel:A.traceCoord[2],text:A.textLabel,name:A.name,
color:h.castHoverOption(B,I,"bgcolor")||A.color,borderColor:h.castHoverOption(B,I,"bordercolor"),fontFamily:h.castHoverOption(B,I,"font.family"),fontSize:h.castHoverOption(B,I,"font.size"),fontColor:h.castHoverOption(B,I,"font.color"),nameLength:h.castHoverOption(B,I,"namelength"),textAlign:h.castHoverOption(B,I,"align")},{container:this.svgContainer,gd:this.graphDiv}))}J||this.unhover();D.draw()}};b.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),
h.loneUnhover(this.svgContainer))};b.hoverFormatter=function(D,A){if(void 0!==A)return D=this[D],l.tickText(D,D.c2l(A),"hover").text}},{"../../components/dragelement/helpers":661,"../../components/fx":683,"../../lib/show_no_webgl_msg":800,"../../plots/cartesian/axes":828,"../../registry":911,"../cartesian/autorange":827,"../cartesian/constants":834,"../cartesian/constraints":835,"./camera":866,"./convert":867,"gl-plot2d":317,"gl-select-box":333,"gl-spikes2d":342,"webgl-context":606}],870:[function(b,
K,G){K=b("../../plot_api/edit_types").overrideAll;var q=b("../../components/fx/layout_attributes"),m=b("./scene"),l=b("../get_data").getSubplotData,h=b("../../lib"),a=b("../../constants/xmlns_namespaces");G.name="gl3d";G.attr="scene";G.idRoot="scene";G.idRegex=G.attrRegex=h.counterRegex("scene");G.attributes=b("./layout/attributes");G.layoutAttributes=b("./layout/layout_attributes");G.baseLayoutAttrOverrides=K({hoverlabel:q.hoverlabel},"plot","nested");G.supplyLayoutDefaults=b("./layout/defaults");
G.plot=function(g){for(var e=g._fullLayout,n=g._fullData,p=e._subplots.gl3d,c=0;c<p.length;c++){var d=p[c],f=l(n,"gl3d",d),k=e[d],r=k.camera,u=k._scene;u||(u=new m({id:d,graphDiv:g,container:g.querySelector(".gl-container"),staticPlot:g._context.staticPlot,plotGlPixelRatio:g._context.plotGlPixelRatio,camera:r},e),k._scene=u);u.viewInitial||(u.viewInitial={up:{x:r.up.x,y:r.up.y,z:r.up.z},eye:{x:r.eye.x,y:r.eye.y,z:r.eye.z},center:{x:r.center.x,y:r.center.y,z:r.center.z}});u.plot(f,e,g.layout)}};G.clean=
function(g,e,n,p){g=p._subplots.gl3d||[];for(n=0;n<g.length;n++){var c=g[n];!e[c]&&p[c]._scene&&(p[c]._scene.destroy(),p._infolayer&&p._infolayer.selectAll(".annotation-"+c).remove())}};G.toSVG=function(g){g=g._fullLayout;for(var e=g._subplots.gl3d,n=g._size,p=0;p<e.length;p++){var c=g[e[p]],d=c.domain;c=c._scene;var f=c.toImage("png");g._glimages.append("svg:image").attr({xmlns:a.svg,"xlink:href":f,x:n.l+n.w*d.x[0],y:n.t+n.h*(1-d.y[1]),width:n.w*(d.x[1]-d.x[0]),height:n.h*(d.y[1]-d.y[0]),preserveAspectRatio:"none"});
c.destroy()}};G.cleanId=function(g){if(g.match(/^scene[0-9]*$/))return g=g.substr(5),"1"===g&&(g=""),"scene"+g};G.updateFx=function(g){g=g._fullLayout;for(var e=g._subplots.gl3d,n=0;n<e.length;n++)g[e[n]]._scene.updateFx(g.dragmode,g.hovermode)}},{"../../components/fx/layout_attributes":684,"../../constants/xmlns_namespaces":754,"../../lib":778,"../../plot_api/edit_types":810,"../get_data":865,"./layout/attributes":871,"./layout/defaults":875,"./layout/layout_attributes":876,"./scene":880}],871:[function(b,
K,G){K.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},{}],872:[function(b,K,G){G=b("../../../components/color");var q=b("../../cartesian/layout_attributes"),m=b("../../../lib/extend").extendFlat;b=b("../../../plot_api/edit_types").overrideAll;K.exports=b({visible:q.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:G.defaultLine},showbackground:{valType:"boolean",
dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:q.color,categoryorder:q.categoryorder,categoryarray:q.categoryarray,title:{text:q.title.text,font:q.title.font},type:m({},q.type,{values:["-","linear","log","date","category"]}),autotypenumbers:q.autotypenumbers,autorange:q.autorange,rangemode:q.rangemode,range:m({},q.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",
impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:q.tickmode,nticks:q.nticks,tick0:q.tick0,dtick:q.dtick,tickvals:q.tickvals,ticktext:q.ticktext,ticks:q.ticks,mirror:q.mirror,ticklen:q.ticklen,tickwidth:q.tickwidth,tickcolor:q.tickcolor,showticklabels:q.showticklabels,tickfont:q.tickfont,tickangle:q.tickangle,tickprefix:q.tickprefix,showtickprefix:q.showtickprefix,ticksuffix:q.ticksuffix,showticksuffix:q.showticksuffix,showexponent:q.showexponent,exponentformat:q.exponentformat,minexponent:q.minexponent,
separatethousands:q.separatethousands,tickformat:q.tickformat,tickformatstops:q.tickformatstops,hoverformat:q.hoverformat,showline:q.showline,linecolor:q.linecolor,linewidth:q.linewidth,showgrid:q.showgrid,gridcolor:m({},q.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:q.gridwidth,zeroline:q.zeroline,zerolinecolor:q.zerolinecolor,zerolinewidth:q.zerolinewidth,_deprecated:{title:q._deprecated.title,titlefont:q._deprecated.titlefont}},"plot","from-root")},{"../../../components/color":643,"../../../lib/extend":768,
"../../../plot_api/edit_types":810,"../../cartesian/layout_attributes":842}],873:[function(b,K,G){var q=b("tinycolor2").mix,m=b("../../../lib"),l=b("../../../plot_api/plot_template"),h=b("./axis_attributes"),a=b("../../cartesian/type_defaults"),g=b("../../cartesian/axis_defaults"),e=["xaxis","yaxis","zaxis"],n=13600/187;K.exports=function(p,c,d){function f(x,C){return m.coerce(k,r,h,x,C)}for(var k,r,u=0;u<e.length;u++){var v=e[u];k=p[v]||{};r=l.newContainer(c,v);r._id=v[0]+d.scene;r._name=v;a(k,r,
f,d);g(k,r,f,{font:d.font,letter:v[0],data:d.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelposition:!0,bgColor:d.bgColor,calendar:d.calendar},d.fullLayout);f("gridcolor",q(r.color,d.bgColor,n).toRgbString());f("title.text",v[0]);r.setScale=m.noop;f("showspikes")&&(f("spikesides"),f("spikethickness"),f("spikecolor",r.color));f("showaxeslabels");f("showbackground")&&f("backgroundcolor")}}},{"../../../lib":778,"../../../plot_api/plot_template":817,"../../cartesian/axis_defaults":830,"../../cartesian/type_defaults":853,
"./axis_attributes":872,tinycolor2:576}],874:[function(b,K,G){function q(){this.bounds=[[-10,-10,-10],[10,10,10]];this.ticks=[[],[],[]];this.tickEnable=[!0,!0,!0];this.tickFont=["sans-serif","sans-serif","sans-serif"];this.tickSize=[12,12,12];this.tickAngle=[0,0,0];this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.tickPad=[18,18,18];this.labels=["x","y","z"];this.labelEnable=[!0,!0,!0];this.labelFont=["Open Sans","Open Sans","Open Sans"];this.labelSize=[20,20,20];this.labelColor=[[0,0,0,1],[0,0,
0,1],[0,0,0,1]];this.labelPad=[30,30,30];this.lineEnable=[!0,!0,!0];this.lineMirror=[!1,!1,!1];this.lineWidth=[1,1,1];this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.lineTickEnable=[!0,!0,!0];this.lineTickMirror=[!1,!1,!1];this.lineTickLength=[10,10,10];this.lineTickWidth=[1,1,1];this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.gridEnable=[!0,!0,!0];this.gridWidth=[1,1,1];this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.zeroEnable=[!0,!0,!0];this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,
0,0,1]];this.zeroLineWidth=[2,2,2];this.backgroundEnable=[!0,!0,!0];this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]];this._defaultTickPad=this.tickPad.slice();this._defaultLabelPad=this.labelPad.slice();this._defaultLineTickLength=this.lineTickLength.slice()}var m=b("../../../lib/str2rgbarray"),l=b("../../../lib"),h=["xaxis","yaxis","zaxis"];q.prototype.merge=function(a,g){for(var e=0;3>e;++e){var n=g[h[e]];n.visible?(this.labels[e]=a._meta?l.templateString(n.title.text,a._meta):n.title.text,
"font"in n.title&&(n.title.font.color&&(this.labelColor[e]=m(n.title.font.color)),n.title.font.family&&(this.labelFont[e]=n.title.font.family),n.title.font.size&&(this.labelSize[e]=n.title.font.size)),"showline"in n&&(this.lineEnable[e]=n.showline),"linecolor"in n&&(this.lineColor[e]=m(n.linecolor)),"linewidth"in n&&(this.lineWidth[e]=n.linewidth),"showgrid"in n&&(this.gridEnable[e]=n.showgrid),"gridcolor"in n&&(this.gridColor[e]=m(n.gridcolor)),"gridwidth"in n&&(this.gridWidth[e]=n.gridwidth),"log"===
n.type?this.zeroEnable[e]=!1:"zeroline"in n&&(this.zeroEnable[e]=n.zeroline),"zerolinecolor"in n&&(this.zeroLineColor[e]=m(n.zerolinecolor)),"zerolinewidth"in n&&(this.zeroLineWidth[e]=n.zerolinewidth),this.lineTickEnable[e]="ticks"in n&&n.ticks?!0:!1,"ticklen"in n&&(this.lineTickLength[e]=this._defaultLineTickLength[e]=n.ticklen),"tickcolor"in n&&(this.lineTickColor[e]=m(n.tickcolor)),"tickwidth"in n&&(this.lineTickWidth[e]=n.tickwidth),"tickangle"in n&&(this.tickAngle[e]="auto"===n.tickangle?-3600:
Math.PI*-n.tickangle/180),"showticklabels"in n&&(this.tickEnable[e]=n.showticklabels),"tickfont"in n&&(n.tickfont.color&&(this.tickColor[e]=m(n.tickfont.color)),n.tickfont.family&&(this.tickFont[e]=n.tickfont.family),n.tickfont.size&&(this.tickSize[e]=n.tickfont.size)),"mirror"in n?-1!==["ticks","all","allticks"].indexOf(n.mirror)?(this.lineTickMirror[e]=!0,this.lineMirror[e]=!0):!0===n.mirror?(this.lineTickMirror[e]=!1,this.lineMirror[e]=!0):(this.lineTickMirror[e]=!1,this.lineMirror[e]=!1):this.lineMirror[e]=
!1,"showbackground"in n&&!1!==n.showbackground?(this.backgroundEnable[e]=!0,this.backgroundColor[e]=m(n.backgroundcolor)):this.backgroundEnable[e]=!1):(this.tickEnable[e]=!1,this.labelEnable[e]=!1,this.lineEnable[e]=!1,this.lineTickEnable[e]=!1,this.gridEnable[e]=!1,this.zeroEnable[e]=!1,this.backgroundEnable[e]=!1)}};K.exports=function(a,g){var e=new q;e.merge(a,g);return e}},{"../../../lib":778,"../../../lib/str2rgbarray":802}],875:[function(b,K,G){function q(p,c,d,f){var k=d("bgcolor");k=l.combine(k,
f.paper_bgcolor);for(var r=["up","center","eye"],u=0;u<r.length;u++)d("camera."+r[u]+".x"),d("camera."+r[u]+".y"),d("camera."+r[u]+".z");d("camera.projection.type");r=!!d("aspectratio.x")&&!!d("aspectratio.y")&&!!d("aspectratio.z");u=d("aspectmode",r?"manual":"auto");r||(p.aspectratio=c.aspectratio={x:1,y:1,z:1},"manual"===u&&(c.aspectmode="auto"),p.aspectmode=c.aspectmode);r=n(f.fullData,"gl3d",f.id);g(p,c,{font:f.font,scene:f.id,data:r,bgColor:k,calendar:f.calendar,autotypenumbersDflt:f.autotypenumbersDflt,
fullLayout:f.fullLayout});h.getComponentMethod("annotations3d","handleDefaults")(p,c,f);c=f.getDfltFromLayout("dragmode");!1===c||c||(c="orbit",p.camera&&p.camera.up?(k=p.camera.up.x,r=p.camera.up.y,p=p.camera.up.z,0!==p&&(k&&r&&p?.999<p/Math.sqrt(k*k+r*r+p*p)&&(c="turntable"):c="turntable")):c="turntable");d("dragmode",c);d("hovermode",f.getDfltFromLayout("hovermode"))}var m=b("../../../lib"),l=b("../../../components/color"),h=b("../../../registry"),a=b("../../subplot_defaults"),g=b("./axis_defaults"),
e=b("./layout_attributes"),n=b("../../get_data").getSubplotData;K.exports=function(p,c,d){var f=1<c._basePlotModules.length;a(p,c,d,{type:"gl3d",attributes:e,handleDefaults:q,fullLayout:c,font:c.font,fullData:d,getDfltFromLayout:function(k){if(!f&&m.validate(p[k],e[k]))return p[k]},autotypenumbersDflt:c.autotypenumbers,paper_bgcolor:c.paper_bgcolor,calendar:c.calendar})}},{"../../../components/color":643,"../../../lib":778,"../../../registry":911,"../../get_data":865,"../../subplot_defaults":905,
"./axis_defaults":873,"./layout_attributes":876}],876:[function(b,K,G){function q(h,a,g){return{x:{valType:"number",dflt:h,editType:"camera"},y:{valType:"number",dflt:a,editType:"camera"},z:{valType:"number",dflt:g,editType:"camera"},editType:"camera"}}G=b("./axis_attributes");var m=b("../../domain").attributes,l=b("../../../lib/extend").extendFlat;b=b("../../../lib").counterRegex;K.exports={_arrayAttrRegexps:[b("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},
camera:{up:l(q(0,0,1),{}),center:l(q(0,0,0),{}),eye:l(q(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:m({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",
impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:G,yaxis:G,zaxis:G,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},
editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},{"../../../lib":778,"../../../lib/extend":768,"../../domain":855,"./axis_attributes":872}],877:[function(b,K,G){function q(){this.enabled=[!0,!0,!0];this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.drawSides=[!0,!0,!0];this.lineWidth=[1,1,1]}var m=b("../../../lib/str2rgbarray"),l=["xaxis","yaxis","zaxis"];q.prototype.merge=function(h){for(var a=0;3>a;++a){var g=h[l[a]];g.visible?(this.enabled[a]=g.showspikes,this.colors[a]=
m(g.spikecolor),this.drawSides[a]=g.spikesides,this.lineWidth[a]=g.spikethickness):(this.enabled[a]=!1,this.drawSides[a]=!1)}};K.exports=function(h){var a=new q;a.merge(h);return a}},{"../../../lib/str2rgbarray":802}],878:[function(b,K,G){K.exports=function(h){for(var a=h.axesOptions,g=h.glplot.axesPixels,e=h.fullSceneLayout,n=[[],[],[]],p=0;3>p;++p){var c=e[l[p]];c._length=(g[p].hi-g[p].lo)*g[p].pixelsPerDataUnit/h.dataScale[p];if(Infinity===Math.abs(c._length)||isNaN(c._length))n[p]=[];else{c._input_range=
c.range.slice();c.range[0]=g[p].lo/h.dataScale[p];c.range[1]=g[p].hi/h.dataScale[p];c._m=1/(h.dataScale[p]*g[p].pixelsPerDataUnit);c.range[0]===c.range[1]&&(--c.range[0],c.range[1]+=1);var d=c.tickmode;if("auto"===c.tickmode){c.tickmode="linear";var f=c.nticks||m.constrain(c._length/40,4,9);q.autoTicks(c,Math.abs(c.range[1]-c.range[0])/f)}f=q.calcTicks(c,{msUTC:!0});for(var k=0;k<f.length;++k)f[k].x*=h.dataScale[p],"date"===c.type&&(f[k].text=f[k].text.replace(/<br>/g," "));n[p]=f;c.tickmode=d}}a.ticks=
n;for(p=0;3>p;++p)for(k=0;2>k;++k)a.bounds[k][p]=h.glplot.bounds[k][p];a=Array(3);for(g=0;3>g;++g){e=n[g];p=Array(e.length);for(c=0;c<e.length;++c)p[c]=e[c].x;a[g]=p}h.contourLevels=a};var q=b("../../cartesian/axes"),m=b("../../../lib"),l=["xaxis","yaxis","zaxis"]},{"../../../lib":778,"../../cartesian/axes":828}],879:[function(b,K,G){function q(m,l){var h=[0,0,0,0],a,g;for(a=0;4>a;++a)for(g=0;4>g;++g)h[g]+=m[4*a+g]*l[a];return h}K.exports=function(m,l){return q(m.projection,q(m.view,q(m.model,[l[0],
l[1],l[2],1])))}},{}],880:[function(b,K,G){function q(t,B){var F=document.createElement("div"),I=t.container;this.graphDiv=t.graphDiv;var J=document.createElementNS("http://www.w3.org/2000/svg","svg");J.style.position="absolute";J.style.top=J.style.left="0px";J.style.width=J.style.height="100%";J.style["z-index"]=20;J.style["pointer-events"]="none";F.appendChild(J);this.svgContainer=J;F.id=t.id;F.style.position="absolute";F.style.top=F.style.left="0px";F.style.width=F.style.height="100%";I.appendChild(F);
this.fullLayout=B;this.id=t.id||"scene";this.fullSceneLayout=B[this.id];this.plotArgs=[[],{},{}];this.axesOptions=v(B,B[this.id]);this.spikeOptions=x(B[this.id]);this.container=F;this.staticMode=!!t.staticPlot;this.pixelRatio=this.pixelRatio||t.plotGlPixelRatio||2;this.dataScale=[1,1,1];this.contourLevels=[[],[],[]];this.convertAnnotations=n.getComponentMethod("annotations3d","convert");this.drawAnnotations=n.getComponentMethod("annotations3d","draw");this.initializeGLPlot()}function m(t,B,F){t=t.fullSceneLayout;
for(var I=0;3>I;I++){var J=A[I],L=J.charAt(0);J=t[J];var H=B[L],P=B[L+"calendar"];L=B["_"+L+"length"];if(p.isArrayOrTypedArray(H))for(var M,N=0;N<(L||H.length);N++)if(p.isArrayOrTypedArray(H[N]))for(var T=0;T<H[N].length;++T)M=J.d2l(H[N][T],0,P),!isNaN(M)&&isFinite(M)&&(F[0][I]=Math.min(F[0][I],M),F[1][I]=Math.max(F[1][I],M));else M=J.d2l(H[N],0,P),!isNaN(M)&&isFinite(M)&&(F[0][I]=Math.min(F[0][I],M),F[1][I]=Math.max(F[1][I],M));else F[0][I]=Math.min(F[0][I],0),F[1][I]=Math.max(F[1][I],L-1)}}function l(t,
B){t=t.fullSceneLayout;for(var F=t.annotations||[],I=0;3>I;I++){var J=A[I],L=J.charAt(0);J=t[J];for(var H=0;H<F.length;H++){var P=F[H];P.visible&&(P=J.r2l(P[L]),!isNaN(P)&&isFinite(P)&&(B[0][I]=Math.min(B[0][I],P),B[1][I]=Math.max(B[1][I],P)))}}}G=b("gl-plot3d");var h=G.createCamera,a=G.createScene,g=b("webgl-context"),e=b("has-passive-events"),n=b("../../registry"),p=b("../../lib"),c=p.preserveDrawingBuffer(),d=b("../../plots/cartesian/axes"),f=b("../../components/fx"),k=b("../../lib/str2rgbarray"),
r=b("../../lib/show_no_webgl_msg"),u=b("./project"),v=b("./layout/convert"),x=b("./layout/spikes"),C=b("./layout/tick_marks"),z,y;b=q.prototype;b.prepareOptions=function(){var t={canvas:this.canvas,gl:this.gl,glOptions:{preserveDrawingBuffer:c,premultipliedAlpha:!0,antialias:!0},container:this.container,axes:this.axesOptions,spikes:this.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:this.camera,pixelRatio:this.pixelRatio};if(this.staticMode){if(!y&&(z=document.createElement("canvas"),
y=g({canvas:z,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}),!y))throw Error("error creating static canvas/context for image server");t.gl=y;t.canvas=z}return t};var D=!0;b.tryCreatePlot=function(){var t=this.prepareOptions(),B=!0;try{this.glplot=a(t)}catch(F){if(this.staticMode||!D||c)B=!1;else{p.warn("webgl setup failed possibly due to false preserveDrawingBuffer config. The mobile/tablet device may not be detected by is-mobile module. Enabling preserveDrawingBuffer in second attempt to create webgl scene...");
try{c=t.glOptions.preserveDrawingBuffer=!0,this.glplot=a(t)}catch(I){B=c=t.glOptions.preserveDrawingBuffer=!1}}}D=!1;return B};b.initializeGLCamera=function(){var t=this.fullSceneLayout.camera;this.camera=h(this.container,{center:[t.center.x,t.center.y,t.center.z],eye:[t.eye.x,t.eye.y,t.eye.z],up:[t.up.x,t.up.y,t.up.z],_ortho:"orthographic"===t.projection.type,zoomMin:.01,zoomMax:100,mode:"orbit"})};b.initializeGLPlot=function(){var t=this;t.initializeGLCamera();if(!t.tryCreatePlot())return r(t);
t.traces={};t.make4thDimension();var B=t.graphDiv,F=B.layout,I=function(){var L={};t.isCameraChanged(F)&&(L[t.id+".camera"]=t.getCamera());t.isAspectChanged(F)&&(L[t.id+".aspectratio"]=t.glplot.getAspectratio(),"manual"!==F[t.id].aspectmode&&(t.fullSceneLayout.aspectmode=F[t.id].aspectmode=L[t.id+".aspectmode"]="manual"));return L},J=function(L){if(!1!==L.fullSceneLayout.dragmode){var H=I();L.saveLayout(F);L.graphDiv.emit("plotly_relayout",H)}};t.glplot.canvas&&(t.glplot.canvas.addEventListener("mouseup",
function(){J(t)}),t.glplot.canvas.addEventListener("wheel",function(L){if(B._context._scrollZoom.gl3d){if(t.camera._ortho){L=L.deltaX>L.deltaY?1.1:1/1.1;var H=t.glplot.getAspectratio();t.glplot.setAspectratio({x:L*H.x,y:L*H.y,z:L*H.z})}J(t)}},e?{passive:!1}:!1),t.glplot.canvas.addEventListener("mousemove",function(){if(!1!==t.fullSceneLayout.dragmode&&0!==t.camera.mouseListener.buttons){var L=I();t.graphDiv.emit("plotly_relayouting",L)}}),t.staticMode||t.glplot.canvas.addEventListener("webglcontextlost",
function(L){B&&B.emit&&B.emit("plotly_webglcontextlost",{event:L,layer:t.id})},!1));t.glplot.oncontextloss=function(){t.recoverContext()};t.glplot.onrender=function(){t.render()};return!0};b.render=function(){function t(aa,fa){aa=B.fullSceneLayout[aa];return d.tickText(aa,aa.d2l(fa),"hover").text}var B=this,F=B.graphDiv,I=B.svgContainer,J=B.container.getBoundingClientRect();F._fullLayout._calcInverseTransform(F);var L=J.width*F._fullLayout._invScaleX;J=J.height*F._fullLayout._invScaleY;I.setAttributeNS(null,
"viewBox","0 0 "+L+" "+J);I.setAttributeNS(null,"width",L);I.setAttributeNS(null,"height",J);C(B);B.glplot.axes.update(B.axesOptions);for(var H=Object.keys(B.traces),P=null,M=B.glplot.selection,N=0;N<H.length;++N){var T=B.traces[H[N]];"skip"!==T.data.hoverinfo&&T.handlePick(M)&&(P=T);T.setContourLevels&&T.setContourLevels()}if(null!==P){var Q=u(B.glplot.cameraParams,M.dataCoordinate);T=P.data;H=F._fullData[T.index];N=M.index;var U={xLabel:t("xaxis",M.traceCoordinate[0]),yLabel:t("yaxis",M.traceCoordinate[1]),
zLabel:t("zaxis",M.traceCoordinate[2])},S=f.castHoverinfo(H,B.fullLayout,N),X=(S||"").split("+");S=S&&"all"===S;H.hovertemplate||S||(-1===X.indexOf("x")&&(U.xLabel=void 0),-1===X.indexOf("y")&&(U.yLabel=void 0),-1===X.indexOf("z")&&(U.zLabel=void 0),-1===X.indexOf("text")&&(M.textLabel=void 0),-1===X.indexOf("name")&&(P.name=void 0));var Z=[];"cone"===T.type||"streamtube"===T.type?(U.uLabel=t("xaxis",M.traceCoordinate[3]),(S||-1!==X.indexOf("u"))&&Z.push("u: "+U.uLabel),U.vLabel=t("yaxis",M.traceCoordinate[4]),
(S||-1!==X.indexOf("v"))&&Z.push("v: "+U.vLabel),U.wLabel=t("zaxis",M.traceCoordinate[5]),(S||-1!==X.indexOf("w"))&&Z.push("w: "+U.wLabel),U.normLabel=M.traceCoordinate[6].toPrecision(3),(S||-1!==X.indexOf("norm"))&&Z.push("norm: "+U.normLabel),"streamtube"===T.type&&(U.divergenceLabel=M.traceCoordinate[7].toPrecision(3),(S||-1!==X.indexOf("divergence"))&&Z.push("divergence: "+U.divergenceLabel)),M.textLabel&&Z.push(M.textLabel),X=Z.join("<br>")):"isosurface"===T.type||"volume"===T.type?(U.valueLabel=
d.tickText(B._mockAxis,B._mockAxis.d2l(M.traceCoordinate[3]),"hover").text,Z.push("value: "+U.valueLabel),M.textLabel&&Z.push(M.textLabel),X=Z.join("<br>")):X=M.textLabel;S={x:M.traceCoordinate[0],y:M.traceCoordinate[1],z:M.traceCoordinate[2],data:H._input,fullData:H,curveNumber:H.index,pointNumber:N};f.appendArrayPointValue(S,H,N);T._module.eventData&&(S=H._module.eventData(S,M,H,{},N));T={points:[S]};B.fullSceneLayout.hovermode&&f.loneHover({trace:H,x:(.5+.5*Q[0]/Q[3])*L,y:(.5-.5*Q[1]/Q[3])*J,xLabel:U.xLabel,
yLabel:U.yLabel,zLabel:U.zLabel,text:X,name:P.name,color:f.castHoverOption(H,N,"bgcolor")||P.color,borderColor:f.castHoverOption(H,N,"bordercolor"),fontFamily:f.castHoverOption(H,N,"font.family"),fontSize:f.castHoverOption(H,N,"font.size"),fontColor:f.castHoverOption(H,N,"font.color"),nameLength:f.castHoverOption(H,N,"namelength"),textAlign:f.castHoverOption(H,N,"align"),hovertemplate:p.castOption(H,N,"hovertemplate"),hovertemplateLabels:p.extendFlat({},S,U),eventData:[S]},{container:I,gd:F});M.buttons&&
5>M.distance?F.emit("plotly_click",T):F.emit("plotly_hover",T);Q=T}else f.loneUnhover(I),F.emit("plotly_unhover",Q);B.drawAnnotations(B)};b.recoverContext=function(){var t=this;t.glplot.dispose();var B=function(){t.glplot.gl.isContextLost()?requestAnimationFrame(B):t.initializeGLPlot()?t.plot.apply(t,t.plotArgs):p.error("Catastrophic and unrecoverable WebGL error. Context lost.")};requestAnimationFrame(B)};var A=["xaxis","yaxis","zaxis"];b.plot=function(t,B,F){this.plotArgs=[t,B,F];if(!this.glplot.contextLost){var I,
J,L=B[this.id];F=F[this.id];this.fullLayout=B;this.fullSceneLayout=L;this.axesOptions.merge(B,L);this.spikeOptions.merge(L);this.setViewport(L);this.updateFx(L.dragmode,L.hovermode);this.camera.enableWheel=this.graphDiv._context._scrollZoom.gl3d;this.glplot.setClearColor(k(L.bgcolor));this.setConvert(P);t?Array.isArray(t)||(t=[t]):t=[];var H=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];for(I=0;I<t.length;++I){var P=t[I];!0===P.visible&&0!==P._length&&m(this,P,H)}l(this,H);var M=
[1,1,1];for(J=0;3>J;++J)M[J]=H[1][J]===H[0][J]?1:1/(H[1][J]-H[0][J]);this.dataScale=M;this.convertAnnotations(this);for(I=0;I<t.length;++I)P=t[I],!0===P.visible&&0!==P._length&&((H=this.traces[P.uid])?H.data.type===P.type?H.update(P):(H.dispose(),H=P._module.plot(this,P),this.traces[P.uid]=H):(H=P._module.plot(this,P),this.traces[P.uid]=H),H.name=P.name);P=Object.keys(this.traces);I=0;a:for(;I<P.length;++I){for(J=0;J<t.length;++J)if(t[J].uid===P[I]&&!0===t[J].visible&&0!==t[J]._length)continue a;
H=this.traces[P[I]];H.dispose();delete this.traces[P[I]]}this.glplot.objects.sort(function(Z,aa){return Z._trace.data.index-aa._trace.data.index});H=[[0,0,0],[0,0,0]];t={};for(I=0;3>I;++I){P=L[A[I]];J=P.type;J in t?(t[J].acc*=M[I],t[J].count+=1):t[J]={acc:M[I],count:1};if(P.autorange){H[0][I]=Infinity;H[1][I]=-Infinity;var N=this.glplot.objects,T=this.fullSceneLayout.annotations||[],Q=P._name.charAt(0);for(J=0;J<N.length;J++){var U=N[J],S=U.bounds,X=U._trace.data._pad||0;H[0][I]="ErrorBars"===U.constructor.name&&
P._lowerLogErrorBound?Math.min(H[0][I],P._lowerLogErrorBound):Math.min(H[0][I],S[0][I]/M[I]-X);H[1][I]=Math.max(H[1][I],S[1][I]/M[I]+X)}for(J=0;J<T.length;J++)N=T[J],N.visible&&(N=P.r2l(N[Q]),H[0][I]=Math.min(H[0][I],N),H[1][I]=Math.max(H[1][I],N));"rangemode"in P&&"tozero"===P.rangemode&&(H[0][I]=Math.min(H[0][I],0),H[1][I]=Math.max(H[1][I],0));H[0][I]>H[1][I]?(H[0][I]=-1,H[1][I]=1):(J=H[1][I]-H[0][I],H[0][I]-=J/32,H[1][I]+=J/32);"reversed"===P.autorange&&(P=H[0][I],H[0][I]=H[1][I],H[1][I]=P)}else J=
P.range,H[0][I]=P.r2l(J[0]),H[1][I]=P.r2l(J[1]);H[0][I]===H[1][I]&&(--H[0][I],H[1][I]+=1);this.glplot.setBounds(I,{min:H[0][I]*M[I],max:H[1][I]*M[I]})}H=L.aspectmode;if("cube"===H)I=[1,1,1];else if("manual"===H)I=L.aspectratio,I=[I.x,I.y,I.z];else if("auto"===H||"data"===H){T=[1,1,1];for(I=0;3>I;++I)P=L[A[I]],J=P.type,P=t[J],T[I]=Math.pow(P.acc,1/P.count)/M[I];I="data"===H?T:4>=Math.max.apply(null,T)/Math.min.apply(null,T)?T:[1,1,1]}else throw Error("scene.js aspectRatio was not one of the enumerated types");
L.aspectratio.x=F.aspectratio.x=I[0];L.aspectratio.y=F.aspectratio.y=I[1];L.aspectratio.z=F.aspectratio.z=I[2];this.glplot.setAspectratio(L.aspectratio);this.viewInitial.aspectratio||(this.viewInitial.aspectratio={x:L.aspectratio.x,y:L.aspectratio.y,z:L.aspectratio.z});this.viewInitial.aspectmode||(this.viewInitial.aspectmode=L.aspectmode);L=L.domain||null;B=B._size||null;L&&B&&(F=this.container.style,F.position="absolute",F.left=B.l+L.x[0]*B.w+"px",F.top=B.t+(1-L.y[1])*B.h+"px",F.width=B.w*(L.x[1]-
L.x[0])+"px",F.height=B.h*(L.y[1]-L.y[0])+"px");this.glplot.redraw()}};b.destroy=function(){this.glplot&&(this.camera.mouseListener.enabled=!1,this.container.removeEventListener("wheel",this.camera.wheelListener),this.camera=null,this.glplot.dispose(),this.container.parentNode.removeChild(this.container),this.glplot=null)};b.getCamera=function(){this.camera.view.recalcMatrix(this.camera.view.lastT());var t=this.camera;return{up:{x:t.up[0],y:t.up[1],z:t.up[2]},center:{x:t.center[0],y:t.center[1],z:t.center[2]},
eye:{x:t.eye[0],y:t.eye[1],z:t.eye[2]},projection:{type:!0===t._ortho?"orthographic":"perspective"}}};b.setViewport=function(t){var B=t.camera;this.camera.lookAt.apply(this,[[B.eye.x,B.eye.y,B.eye.z],[B.center.x,B.center.y,B.center.z],[B.up.x,B.up.y,B.up.z]]);this.glplot.setAspectratio(t.aspectratio);"orthographic"===B.projection.type!==this.camera._ortho&&(this.glplot.redraw(),this.glplot.clearRGBA(),this.glplot.dispose(),this.initializeGLPlot())};b.isCameraChanged=function(t){var B=this.getCamera();
t=p.nestedProperty(t,this.id+".camera").get();var F=!1;if(void 0===t)F=!0;else{for(var I=0;3>I;I++)for(var J=0;3>J;J++){var L=["up","center","eye"],H=["x","y","z"];if(!t[L[I]]||B[L[I]][H[J]]!==t[L[I]][H[J]]){F=!0;break}}if(!t.projection||B.projection&&B.projection.type!==t.projection.type)F=!0}return F};b.isAspectChanged=function(t){var B=this.glplot.getAspectratio();t=p.nestedProperty(t,this.id+".aspectratio").get();return void 0===t||t.x!==B.x||t.y!==B.y||t.z!==B.z};b.saveLayout=function(t){var B=
this.fullLayout,F=this.isCameraChanged(t),I=this.isAspectChanged(t),J=F||I;if(J){var L={};if(F){var H=this.getCamera();var P=p.nestedProperty(t,this.id+".camera");var M=P.get();L[this.id+".camera"]=M}if(I){var N=this.glplot.getAspectratio();var T=p.nestedProperty(t,this.id+".aspectratio");M=T.get();L[this.id+".aspectratio"]=M}n.call("_storeDirectGUIEdit",t,B._preGUI,L);F&&(P.set(H),p.nestedProperty(B,this.id+".camera").set(H));I&&(T.set(N),p.nestedProperty(B,this.id+".aspectratio").set(N),this.glplot.redraw())}return J};
b.updateFx=function(t,B){var F=this.camera;if(F)if("orbit"===t)F.mode="orbit",F.keyBindingMode="rotate";else if("turntable"===t){F.up=[0,0,1];F.mode="turntable";F.keyBindingMode="rotate";var I=this.graphDiv;t=I._fullLayout;F=this.fullSceneLayout.camera;var J=F.up.x,L=F.up.y,H=F.up.z;.999>H/Math.sqrt(J*J+L*L+H*H)&&(J=this.id+".camera.up",L={x:0,y:0,z:1},H={},H[J]=L,I=I.layout,n.call("_storeDirectGUIEdit",I,t._preGUI,H),F.up=L,p.nestedProperty(I,J).set(L))}else F.keyBindingMode=t;this.fullSceneLayout.hovermode=
B};b.toImage=function(t){t||(t="png");this.staticMode&&this.container.appendChild(z);this.glplot.redraw();var B=this.glplot.gl,F=B.drawingBufferWidth,I=B.drawingBufferHeight;B.bindFramebuffer(B.FRAMEBUFFER,null);var J=new Uint8Array(F*I*4);B.readPixels(0,0,F,I,B.RGBA,B.UNSIGNED_BYTE,J);B=0;for(var L=I-1;B<L;++B,--L)for(var H=0;H<F;++H)for(var P=0;4>P;++P){var M=4*(F*B+H)+P,N=4*(F*L+H)+P,T=J[M];J[M]=J[N];J[N]=T}for(B=0;B<I;++B)for(L=0;L<F;++L)if(H=4*(F*B+L),P=J[H+3],0<P)for(P=255/P,M=0;3>M;++M)J[H+
M]=Math.min(P*J[H+M],255);B=document.createElement("canvas");B.width=F;B.height=I;L=B.getContext("2d");F=L.createImageData(F,I);F.data.set(J);L.putImageData(F,0,0);switch(t){case "jpeg":t=B.toDataURL("image/jpeg");break;case "webp":t=B.toDataURL("image/webp");break;default:t=B.toDataURL("image/png")}this.staticMode&&this.container.removeChild(z);return t};b.setConvert=function(){for(var t=0;3>t;t++){var B=this.fullSceneLayout[A[t]];d.setConvert(B,this.fullLayout);B.setScale=p.noop}};b.make4thDimension=
function(){var t=this.graphDiv._fullLayout;this._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"};d.setConvert(this._mockAxis,t)};K.exports=q},{"../../components/fx":683,"../../lib":778,"../../lib/show_no_webgl_msg":800,"../../lib/str2rgbarray":802,"../../plots/cartesian/axes":828,"../../registry":911,"./layout/convert":874,"./layout/spikes":877,"./layout/tick_marks":878,"./project":879,"gl-plot3d":321,"has-passive-events":441,"webgl-context":606}],881:[function(b,K,G){K.exports=function(q,
m,l,h){h=h||q.length;for(var a=Array(h),g=0;g<h;g++)a[g]=[q[g],m[g],l[g]];return a}},{}],882:[function(b,K,G){G=b("./font_attributes");var q=b("./animation_attributes"),m=b("../components/color/attributes"),l=b("../components/shapes/draw_newshape/attributes"),h=b("./pad_attributes");b=b("../lib/extend").extendFlat;var a=G({editType:"calc"});a.family.dflt='"Open Sans", verdana, arial, sans-serif';a.size.dflt=12;a.color.dflt=m.defaultLine;K.exports={font:a,title:{text:{valType:"string",editType:"layoutstyle"},
font:G({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",
values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:b(h({editType:"layoutstyle"}),{}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},
r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:m.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:m.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types",
"strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:m.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},modebar:{orientation:{valType:"enumerated",
values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"modebar"},newshape:l.newshape,activeshape:l.activeshape,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:b({},q.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:G({editType:"layoutstyle"})}}},{"../components/color/attributes":642,
"../components/shapes/draw_newshape/attributes":725,"../lib/extend":768,"./animation_attributes":822,"./font_attributes":856,"./pad_attributes":890}],883:[function(b,K,G){b={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:'<a href="http://www.openstreetmap.org/about/" target="_blank">\u00a9 OpenStreetMap</a>',tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",
type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}]},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}]},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:'<a href="https://carto.com/" target="_blank">\u00a9 CARTO</a>',tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",
type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}]},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:'<a href="https://carto.com/" target="_blank">\u00a9 CARTO</a>',tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}]},"stamen-terrain":{id:"stamen-terrain",version:8,
sources:{"plotly-stamen-terrain":{type:"raster",attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> | Data by <a href="http://openstreetmap.org">OpenStreetMap</a>, under <a href="http://www.openstreetmap.org/copyright">ODbL</a>.',tiles:["https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,
maxzoom:22}]},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> | Data by <a href="http://openstreetmap.org">OpenStreetMap</a>, under <a href="http://www.openstreetmap.org/copyright">ODbL</a>.',tiles:["https://stamen-tiles.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",
source:"plotly-stamen-toner",minzoom:0,maxzoom:22}]},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> | Data by <a href="http://openstreetmap.org">OpenStreetMap</a>, under <a href="http://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>.',tiles:["https://stamen-tiles.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png"],
tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}]}};G=Object.keys(b);K.exports={requiredVersion:"1.10.1",styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:"basic streets outdoors light dark satellite satellite-streets".split(" "),styleValueDflt:"basic",stylesNonMapbox:b,styleValuesNonMapbox:G,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:"Your custom plotly.js bundle is not using the correct mapbox-gl version\nPlease install mapbox-gl@1.10.1.",
noAccessTokenErrorMsg:"Missing Mapbox access token.\nMapbox trace type require a Mapbox access token to be registered.\nFor example:\n  Plotly.plot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });\nMore info here: https://www.mapbox.com/help/define-access-token/",missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",G.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join("\n"),multipleTokensErrorMsg:"Set multiple mapbox access token across different mapbox subplot,\nusing first token found as mapbox-gl does not allow multipleaccess tokens on the same page.",
mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",
path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;",
"ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":'content: ""; cursor: pointer; position: absolute; background-image: url(\'data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E\'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;',
"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px",
"ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":'display:block; width: 21px; height: 21px; background-image: url(\'data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E\')'}}},
{}],884:[function(b,K,G){var q=b("../../lib");K.exports=function(m,l){var h=m.split(" ");m=h[0];h=h[1];var a=q.isArrayOrTypedArray(l)?q.mean(l):l;l=.5+a/100;a=1.5+a/100;var g=["",""],e=[0,0];switch(m){case "top":g[0]="top";e[1]=-a;break;case "bottom":g[0]="bottom",e[1]=a}switch(h){case "left":g[1]="right";e[0]=-l;break;case "right":g[1]="left",e[0]=l}return{anchor:g[0]&&g[1]?g.join("-"):g[0]?g[0]:g[1]?g[1]:"center",offset:e}}},{"../../lib":778}],885:[function(b,K,G){function q(k){return"string"===
typeof k&&(-1!==f.styleValuesMapbox.indexOf(k)||0===k.indexOf("mapbox://"))}var m=b("mapbox-gl"),l=b("../../lib"),h=l.strTranslate,a=l.strScale,g=b("../../plots/get_data").getSubplotCalcData,e=b("../../constants/xmlns_namespaces"),n=b("d3"),p=b("../../components/drawing"),c=b("../../lib/svg_text_utils"),d=b("./mapbox"),f=G.constants=b("./constants");G.name="mapbox";G.attr="subplot";G.idRoot="mapbox";G.idRegex=G.attrRegex=l.counterRegex("mapbox");G.attributes={subplot:{valType:"subplotid",dflt:"mapbox",
editType:"calc"}};G.layoutAttributes=b("./layout_attributes");G.supplyLayoutDefaults=b("./layout_defaults");G.plot=function(k){var r=k._fullLayout,u=k.calcdata,v=r._subplots.mapbox;if(m.version!==f.requiredVersion)throw Error(f.wrongVersionErrorMsg);var x=k._fullLayout;if(""===k._context.mapboxAccessToken)x="";else{for(var C=[],z=[],y=!1,D=!1,A=0;A<v.length;A++){var t=x[v[A]],B=t.accesstoken;q(t.style)&&(B?l.pushUnique(C,B):(q(t._input.style)&&(l.error("Uses Mapbox map style, but did not set an access token."),
y=!0),D=!0));B&&l.pushUnique(z,B)}if(D)throw k=y?f.noAccessTokenErrorMsg:f.missingStyleErrorMsg,l.error(k),Error(k);C.length?(1<C.length&&l.warn(f.multipleTokensErrorMsg),x=C[0]):(z.length&&l.log(["Listed mapbox access token(s)",z.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),x="")}m.accessToken=x;for(x=0;x<v.length;x++)C=v[x],z=g(u,"mapbox",C),y=r[C],D=y._subplot,D||(D=new d(k,C),r[C]._subplot=D),D.viewInitial||(D.viewInitial={center:l.extendFlat({},y.center),zoom:y.zoom,
bearing:y.bearing,pitch:y.pitch}),D.plot(z,r,k._promises)};G.clean=function(k,r,u,v){k=v._subplots.mapbox||[];for(u=0;u<k.length;u++){var x=k[u];!r[x]&&v[x]._subplot&&v[x]._subplot.destroy()}};G.toSVG=function(k){for(var r=k._fullLayout,u=r._subplots.mapbox,v=r._size,x=0;x<u.length;x++){var C=r[u[x]],z=C.domain,y=C._subplot.toImage("png");r._glimages.append("svg:image").attr({xmlns:e.svg,"xlink:href":y,x:v.l+v.w*z.x[0],y:v.t+v.h*(1-z.y[1]),width:v.w*(z.x[1]-z.x[0]),height:v.h*(z.y[1]-z.y[0]),preserveAspectRatio:"none"});
C=n.select(C._subplot.div);null!==C.select(".mapboxgl-ctrl-logo").node().offsetParent&&(y=r._glimages.append("g"),y.attr("transform",h(v.l+v.w*z.x[0]+10,v.t+v.h*(1-z.y[0])-31)),y.append("path").attr("d",f.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),y.append("path").attr("d",f.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),y.append("path").attr("d",f.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),y.append("polygon").attr("points",
f.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"}));var D=C.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map","");C=r._glimages.append("g");var A=C.append("text");A.text(D).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":D});var t=p.bBox(A.node());y=v.w*(z.x[1]-z.x[0]);t.width>y/2&&(t=D.split("|").join("<br>"),A.text(t).attr("data-unformatted",t).call(c.convertToTspans,
k),t=p.bBox(A.node()));A.attr("transform",h(-3,-t.height+8));C.insert("rect",".static-attribution").attr({x:-t.width-6,y:-t.height-3,width:t.width+6,height:t.height+3,fill:"rgba(255, 255, 255, 0.75)"});A=1;t.width+6>y&&(A=y/(t.width+6));z=[v.l+v.w*z.x[1],v.t+v.h*(1-z.y[0])];C.attr("transform",h(z[0],z[1])+a(A))}};G.updateFx=function(k){k=k._fullLayout;for(var r=k._subplots.mapbox,u=0;u<r.length;u++)k[r[u]]._subplot.updateFx(k)}},{"../../components/drawing":665,"../../constants/xmlns_namespaces":754,
"../../lib":778,"../../lib/svg_text_utils":803,"../../plots/get_data":865,"./constants":883,"./layout_attributes":887,"./layout_defaults":888,"./mapbox":889,d3:169,"mapbox-gl":473}],886:[function(b,K,G){function q(n,p){this.subplot=n;this.uid=n.uid+"-"+p;this.index=p;this.idSource="source-"+this.uid;this.idLayer=e.layoutLayerPrefix+this.uid;this.below=this.layerType=this.source=this.sourceType=null;this.visible=!1}function m(n){if(!n.visible)return!1;n=n.source;if(Array.isArray(n)&&0<n.length){for(var p=
0;p<n.length;p++)if("string"!==typeof n[p]||0===n[p].length)return!1;return!0}return h.isPlainObject(n)||"string"===typeof n&&0<n.length}function l(n){var p={},c={};switch(n.type){case "circle":h.extendFlat(c,{"circle-radius":n.circle.radius,"circle-color":n.color,"circle-opacity":n.opacity});break;case "line":h.extendFlat(c,{"line-width":n.line.width,"line-color":n.color,"line-opacity":n.opacity,"line-dasharray":n.line.dash});break;case "fill":h.extendFlat(c,{"fill-color":n.color,"fill-outline-color":n.fill.outlinecolor,
"fill-opacity":n.opacity});break;case "symbol":var d=n.symbol,f=g(d.textposition,d.iconsize);h.extendFlat(p,{"icon-image":d.icon+"-15","icon-size":d.iconsize/10,"text-field":d.text,"text-size":d.textfont.size,"text-anchor":f.anchor,"text-offset":f.offset,"symbol-placement":d.placement});h.extendFlat(c,{"icon-color":n.color,"text-color":d.textfont.color,"text-opacity":n.opacity});break;case "raster":h.extendFlat(c,{"raster-fade-duration":0,"raster-opacity":n.opacity})}return{layout:p,paint:c}}var h=
b("../../lib"),a=b("../../lib/svg_text_utils").sanitizeHTML,g=b("./convert_text_opts"),e=b("./constants");b=q.prototype;b.update=function(n){this.visible?this.needsNewImage(n)?this.updateImage(n):this.needsNewSource(n)?(this.removeLayer(),this.updateSource(n),this.updateLayer(n)):this.needsNewLayer(n)?this.updateLayer(n):this.updateStyle(n):(this.updateSource(n),this.updateLayer(n));this.visible=m(n)};b.needsNewImage=function(n){return this.subplot.map.getSource(this.idSource)&&"image"===this.sourceType&&
"image"===n.sourcetype&&(this.source!==n.source||JSON.stringify(this.coordinates)!==JSON.stringify(n.coordinates))};b.needsNewSource=function(n){return this.sourceType!==n.sourcetype||JSON.stringify(this.source)!==JSON.stringify(n.source)||this.layerType!==n.type};b.needsNewLayer=function(n){return this.layerType!==n.type||this.below!==this.subplot.belowLookup["layout-"+this.index]};b.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]};b.updateImage=function(n){this.subplot.map.getSource(this.idSource).updateImage({url:n.source,
coordinates:n.coordinates});n=this.findFollowingMapboxLayerId(this.lookupBelow());null!==n&&this.subplot.map.moveLayer(this.idLayer,n)};b.updateSource=function(n){var p=this.subplot.map;p.getSource(this.idSource)&&p.removeSource(this.idSource);this.sourceType=n.sourcetype;this.source=n.source;if(m(n)){var c=n.sourcetype,d=n.source,f={type:c};if("geojson"===c)var k="data";else"vector"===c?k="string"===typeof d?"url":"tiles":"raster"===c?(k="tiles",f.tileSize=256):"image"===c&&(k="url",f.coordinates=
n.coordinates);f[k]=d;n.sourceattribution&&(f.attribution=a(n.sourceattribution));p.addSource(this.idSource,f)}};b.findFollowingMapboxLayerId=function(n){if("traces"===n)for(var p=this.subplot.getMapLayers(),c=0;c<p.length;c++){var d=p[c].id;if("string"===typeof d&&0===d.indexOf(e.traceLayerPrefix)){n=d;break}}return n};b.updateLayer=function(n){var p=this.subplot,c=l(n),d=this.lookupBelow(),f=this.findFollowingMapboxLayerId(d);this.removeLayer();m(n)&&p.addLayer({id:this.idLayer,source:this.idSource,
"source-layer":n.sourcelayer||"",type:n.type,minzoom:n.minzoom,maxzoom:n.maxzoom,layout:c.layout,paint:c.paint},f);this.layerType=n.type;this.below=d};b.updateStyle=function(n){m(n)&&(n=l(n),this.subplot.setOptions(this.idLayer,"setLayoutProperty",n.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",n.paint))};b.removeLayer=function(){var n=this.subplot.map;n.getLayer(this.idLayer)&&n.removeLayer(this.idLayer)};b.dispose=function(){var n=this.subplot.map;n.getLayer(this.idLayer)&&n.removeLayer(this.idLayer);
n.getSource(this.idSource)&&n.removeSource(this.idSource)};K.exports=function(n,p,c){n=new q(n,p);n.update(c);return n}},{"../../lib":778,"../../lib/svg_text_utils":803,"./constants":883,"./convert_text_opts":884}],887:[function(b,K,G){G=b("../../lib");var q=b("../../components/color").defaultLine,m=b("../domain").attributes,l=b("../font_attributes"),h=b("../../traces/scatter/attributes").textposition,a=b("../../plot_api/edit_types").overrideAll,g=b("../../plot_api/plot_template").templatedArray;
b=b("./constants");l=l({});l.family.dflt="Open Sans Regular, Arial Unicode MS Regular";(K.exports=a({_arrayAttrRegexps:[G.counterRegex("mapbox",".layers",!0)],domain:m({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:b.styleValuesMapbox.concat(b.styleValuesNonMapbox),dflt:b.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},
layers:g("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:q},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,
max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:q}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:l,textposition:G.extendFlat({},h,{arrayOk:!1})}})},"plot","from-root")).uirevision=
{valType:"any",editType:"none"}},{"../../components/color":643,"../../lib":778,"../../plot_api/edit_types":810,"../../plot_api/plot_template":817,"../../traces/scatter/attributes":1187,"../domain":855,"../font_attributes":856,"./constants":883}],888:[function(b,K,G){function q(e,n,p,c){p("accesstoken",c.accessToken);p("style");p("center.lon");p("center.lat");p("zoom");p("bearing");p("pitch");a(e,n,{name:"layers",handleItemDefaults:m});n._input=e}function m(e,n){function p(k,r){return l.coerce(e,n,
g.layers,k,r)}if(p("visible")){var c=p("sourcetype"),d="raster"===c||"image"===c;p("source");p("sourceattribution");"vector"===c&&p("sourcelayer");"image"===c&&p("coordinates");var f;d&&(f="raster");c=p("type",f);d&&"raster"!==c&&(c=n.type="raster",l.log("Source types *raster* and *image* must drawn *raster* layer type."));p("below");p("color");p("opacity");p("minzoom");p("maxzoom");"circle"===c&&p("circle.radius");"line"===c&&(p("line.width"),p("line.dash"));"fill"===c&&p("fill.outlinecolor");"symbol"===
c&&(p("symbol.icon"),p("symbol.iconsize"),p("symbol.text"),l.coerceFont(p,"symbol.textfont"),p("symbol.textposition"),p("symbol.placement"))}}var l=b("../../lib"),h=b("../subplot_defaults"),a=b("../array_container_defaults"),g=b("./layout_attributes");K.exports=function(e,n,p){h(e,n,p,{type:"mapbox",attributes:g,handleDefaults:q,partition:"y",accessToken:n._mapboxAccessToken})}},{"../../lib":778,"../array_container_defaults":823,"../subplot_defaults":905,"./layout_attributes":887}],889:[function(b,
K,G){function q(D,A){this.id=A;this.gd=D;A=D._fullLayout;D=D._context;this.container=A._glcontainer.node();this.isStatic=D.staticPlot;this.uid=A._uid+"-"+this.id;this.yaxis=this.xaxis=this.div=null;this.createFramework(A);this.styleObj=this.accessToken=this.map=null;this.traceHash={};this.layerList=[];this.belowLookup={};this.wheeling=this.dragging=!1}function m(D){var A={};a.isPlainObject(D)?(A.id=D.id,A.style=D):"string"===typeof D?(A.id=D,-1!==C.styleValuesMapbox.indexOf(D)?A.style=C.styleUrlPrefix+
D+"-"+C.styleUrlSuffix:A.style=C.stylesNonMapbox[D]?C.stylesNonMapbox[D]:D):(A.id=C.styleValueDflt,A.style=C.styleUrlPrefix+C.styleValueDflt+"-"+C.styleUrlSuffix);A.transition={duration:0,delay:0};return A}function l(D){return[D.lon,D.lat]}var h=b("mapbox-gl"),a=b("../../lib"),g=b("../../lib/geo_location_utils"),e=b("../../registry"),n=b("../cartesian/axes"),p=b("../../components/dragelement"),c=b("../../components/fx");G=b("../../components/dragelement/helpers");var d=G.rectMode,f=G.drawMode,k=G.selectMode,
r=b("../cartesian/select").prepSelect,u=b("../cartesian/select").clearSelect,v=b("../cartesian/select").clearSelectionsCache,x=b("../cartesian/select").selectOnClick,C=b("./constants"),z=b("./layers");b=q.prototype;b.plot=function(D,A,t){var B=this,F=A[B.id];B.map&&F.accesstoken!==B.accessToken&&(B.map.remove(),B.map=null,B.styleObj=null,B.traceHash={},B.layerList=[]);F=B.map?new Promise(function(I,J){B.updateMap(D,A,I,J)}):new Promise(function(I,J){B.createMap(D,A,I,J)});t.push(F)};b.createMap=function(D,
A,t,B){var F=this,I=A[F.id],J=F.styleObj=m(I.style);F.accessToken=I.accesstoken;var L=F.map=(new h.Map({container:F.div,style:J.style,center:l(I.center),zoom:I.zoom,bearing:I.bearing,pitch:I.pitch,interactive:!F.isStatic,preserveDrawingBuffer:F.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1})).addControl(new h.AttributionControl({compact:!0}));L._canvas.style.left="0px";L._canvas.style.top="0px";F.rejectOnError(B);F.isStatic||F.initFx(D,A);I=[];I.push(new Promise(function(H){L.once("load",
H)}));I=I.concat(g.fetchTraceGeoData(D));Promise.all(I).then(function(){F.fillBelowLookup(D,A);F.updateData(D);F.updateLayout(A);F.resolveOnRender(t)}).catch(B)};b.updateMap=function(D,A,t,B){var F=this,I=F.map,J=A[this.id];F.rejectOnError(B);var L=[];J=m(J.style);JSON.stringify(F.styleObj)!==JSON.stringify(J)&&(F.styleObj=J,I.setStyle(J.style),F.traceHash={},L.push(new Promise(function(H){I.once("styledata",H)})));L=L.concat(g.fetchTraceGeoData(D));Promise.all(L).then(function(){F.fillBelowLookup(D,
A);F.updateData(D);F.updateLayout(A);F.resolveOnRender(t)}).catch(B)};b.fillBelowLookup=function(D,A){var t=A[this.id].layers,B,F=this.belowLookup={},I=!1;for(A=0;A<D.length;A++){var J=D[A][0].trace,L=J._module;"string"===typeof J.below?B=J.below:L.getBelow&&(B=L.getBelow(J,this));""===B&&(I=!0);F["trace-"+J.uid]=B||""}for(A=0;A<t.length;A++)B=t[A],B="string"===typeof B.below?B.below:I?"traces":"",F["layout-"+A]=B;D={};for(var H in F)B=F[H],D[B]?D[B].push(H):D[B]=[H];for(B in D)if(F=D[B],1<F.length)for(A=
0;A<F.length;A++)H=F[A],0===H.indexOf("trace-")?(H=H.split("trace-")[1],this.traceHash[H]&&(this.traceHash[H].below=null)):0===H.indexOf("layout-")&&(H=H.split("layout-")[1],this.layerList[H]&&(this.layerList[H].below=null))};var y={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};b.updateData=function(D){var A=this.traceHash,t,B=D.slice().sort(function(H,P){return y[H[0].trace.type]-y[P[0].trace.type]});for(t=0;t<B.length;t++){var F=B[t];var I=F[0].trace;var J=A[I.uid];var L=!1;J&&(J.type===I.type?
(J.update(F),L=!0):J.dispose());!L&&I._module&&(A[I.uid]=I._module.plot(this,F))}B=Object.keys(A);t=0;a:for(;t<B.length;t++){F=B[t];for(J=0;J<D.length;J++)if(I=D[J][0].trace,F===I.uid)continue a;J=A[F];J.dispose();delete A[F]}};b.updateLayout=function(D){var A=this.map,t=D[this.id];this.dragging||this.wheeling||(A.setCenter(l(t.center)),A.setZoom(t.zoom),A.setBearing(t.bearing),A.setPitch(t.pitch));this.updateLayers(D);this.updateFramework(D);this.updateFx(D);this.map.resize();this.gd._context._scrollZoom.mapbox?
A.scrollZoom.enable():A.scrollZoom.disable()};b.resolveOnRender=function(D){var A=this.map;A.on("render",function B(){A.loaded()&&(A.off("render",B),setTimeout(D,10))})};b.rejectOnError=function(D){function A(){D(Error(C.mapOnErrorMsg))}var t=this.map;t.once("error",A);t.once("style.error",A);t.once("source.error",A);t.once("tile.error",A);t.once("layer.error",A)};b.createFramework=function(D){var A=this,t=A.div=document.createElement("div");t.id=A.uid;t.style.position="absolute";A.container.appendChild(t);
A.xaxis={_id:"x",c2p:function(B){return A.project(B).x}};A.yaxis={_id:"y",c2p:function(B){return A.project(B).y}};A.updateFramework(D);A.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"};n.setConvert(A.mockAxis,D)};b.initFx=function(D,A){function t(){c.loneUnhover(A._hoverlayer)}function B(){var L=F.getView();I.emit("plotly_relayouting",F.getViewEditsWithDerived(L))}var F=this,I=F.gd,J=F.map;J.on("moveend",function(L){if(F.map){var H=I._fullLayout;if(L.originalEvent||F.wheeling){var P=
H[F.id];e.call("_storeDirectGUIEdit",I.layout,H._preGUI,F.getViewEdits(P));var M=F.getView();P._input.center=P.center=M.center;P._input.zoom=P.zoom=M.zoom;P._input.bearing=P.bearing=M.bearing;P._input.pitch=P.pitch=M.pitch;I.emit("plotly_relayout",F.getViewEditsWithDerived(M))}L.originalEvent&&"mouseup"===L.originalEvent.type?F.dragging=!1:F.wheeling&&(F.wheeling=!1);H._rehover&&H._rehover()}});J.on("wheel",function(){F.wheeling=!0});J.on("mousemove",function(L){var H=F.div.getBoundingClientRect(),
P=[L.originalEvent.offsetX,L.originalEvent.offsetY];L.target.getBoundingClientRect=function(){return H};F.xaxis.p2c=function(){return J.unproject(P).lng};F.yaxis.p2c=function(){return J.unproject(P).lat};I._fullLayout._rehover=function(){I._fullLayout._hoversubplot===F.id&&I._fullLayout[F.id]&&c.hover(I,L,F.id)};c.hover(I,L,F.id);I._fullLayout._hoversubplot=F.id});J.on("dragstart",function(){F.dragging=!0;t()});J.on("zoomstart",t);J.on("mouseout",function(){I._fullLayout._hoversubplot=null});J.on("drag",
B);J.on("zoom",B);J.on("dblclick",function(){var L=I._fullLayout[F.id];e.call("_storeDirectGUIEdit",I.layout,I._fullLayout._preGUI,F.getViewEdits(L));var H=F.viewInitial;J.setCenter(l(H.center));J.setZoom(H.zoom);J.setBearing(H.bearing);J.setPitch(H.pitch);H=F.getView();L._input.center=L.center=H.center;L._input.zoom=L.zoom=H.zoom;L._input.bearing=L.bearing=H.bearing;L._input.pitch=L.pitch=H.pitch;I.emit("plotly_doubleclick",null);I.emit("plotly_relayout",F.getViewEditsWithDerived(H))});F.clearSelect=
function(){v(F.dragOptions);u(F.dragOptions.gd)};F.onClickInPanFn=function(L){return function(H){var P=I._fullLayout.clickmode;-1<P.indexOf("select")&&x(H.originalEvent,I,[F.xaxis],[F.yaxis],F.id,L);-1<P.indexOf("event")&&c.click(I,H.originalEvent)}}};b.updateFx=function(D){function A(L){L=t.map.unproject(L);return[L.lng,L.lat]}var t=this,B=t.map,F=t.gd;if(!t.isStatic){var I=D.dragmode;var J=d(I)?function(L,H){(L.range={})[t.id]=[A([H.xmin,H.ymin]),A([H.xmax,H.ymax])]}:function(L,H,P){(L.lassoPoints=
{})[t.id]=P.filtered.map(A)};t.dragOptions=a.extendDeep(t.dragOptions||{},{dragmode:D.dragmode,element:t.div,gd:F,plotinfo:{id:t.id,domain:D[t.id].domain,xaxis:t.xaxis,yaxis:t.yaxis,fillRangeItems:J},xaxes:[t.xaxis],yaxes:[t.yaxis],subplot:t.id});B.off("click",t.onClickInPanHandler);k(I)||f(I)?(B.dragPan.disable(),B.on("zoomstart",t.clearSelect),t.dragOptions.prepFn=function(L,H,P){r(L,H,P,t.dragOptions,I)},p.init(t.dragOptions)):(B.dragPan.enable(),B.off("zoomstart",t.clearSelect),t.div.onmousedown=
null,t.onClickInPanHandler=t.onClickInPanFn(t.dragOptions),B.on("click",t.onClickInPanHandler))}};b.updateFramework=function(D){var A=D[this.id].domain;D=D._size;var t=this.div.style;t.width=D.w*(A.x[1]-A.x[0])+"px";t.height=D.h*(A.y[1]-A.y[0])+"px";t.left=D.l+A.x[0]*D.w+"px";t.top=D.t+(1-A.y[1])*D.h+"px";this.xaxis._offset=D.l+A.x[0]*D.w;this.xaxis._length=D.w*(A.x[1]-A.x[0]);this.yaxis._offset=D.t+(1-A.y[1])*D.h;this.yaxis._length=D.h*(A.y[1]-A.y[0])};b.updateLayers=function(D){D=D[this.id].layers;
var A=this.layerList,t;if(D.length!==A.length){for(t=0;t<A.length;t++)A[t].dispose();A=this.layerList=[];for(t=0;t<D.length;t++)A.push(z(this,t,D[t]))}else for(t=0;t<D.length;t++)A[t].update(D[t])};b.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))};b.toImage=function(){this.map.stop();return this.map.getCanvas().toDataURL()};b.setOptions=function(D,A,t){for(var B in t)this.map[A](D,B,t[B])};b.getMapLayers=function(){return this.map.getStyle().layers};
b.addLayer=function(D,A){var t=this.map;if("string"===typeof A){if(""===A){t.addLayer(D,A);return}for(var B=this.getMapLayers(),F=0;F<B.length;F++)if(A===B[F].id){t.addLayer(D,A);return}a.warn(["Trying to add layer with *below* value",A,"referencing a layer that does not exist or that does not yet exist."].join(" "))}t.addLayer(D)};b.project=function(D){return this.map.project(new h.LngLat(D[0],D[1]))};b.getView=function(){var D=this.map,A=D.getCenter();A={lon:A.lng,lat:A.lat};var t=D.getCanvas(),
B=t.width;t=t.height;return{center:A,zoom:D.getZoom(),bearing:D.getBearing(),pitch:D.getPitch(),_derived:{coordinates:[D.unproject([0,0]).toArray(),D.unproject([B,0]).toArray(),D.unproject([B,t]).toArray(),D.unproject([0,t]).toArray()]}}};b.getViewEdits=function(D){for(var A=this.id,t=["center","zoom","bearing","pitch"],B={},F=0;F<t.length;F++){var I=t[F];B[A+"."+I]=D[I]}return B};b.getViewEditsWithDerived=function(D){var A=this.id,t=this.getViewEdits(D);t[A+"._derived"]=D._derived;return t};K.exports=
q},{"../../components/dragelement":662,"../../components/dragelement/helpers":661,"../../components/fx":683,"../../lib":778,"../../lib/geo_location_utils":771,"../../registry":911,"../cartesian/axes":828,"../cartesian/select":847,"./constants":883,"./layers":886,"mapbox-gl":473}],890:[function(b,K,G){K.exports=function(q){q=q.editType;return{t:{valType:"number",dflt:0,editType:q},r:{valType:"number",dflt:0,editType:q},b:{valType:"number",dflt:0,editType:q},l:{valType:"number",dflt:0,editType:q},editType:q}}},
{}],891:[function(b,K,G){function q(Q,U){U.text("");U=U.append("a").attr({"xlink:xlink:href":"#","class":"link--impt link--embedview","font-weight":"bold"}).text(Q._context.linkText+" "+String.fromCharCode(187));if(Q._context.sendData)U.on("click",function(){L.sendDataToCloud(Q)});else{var S=window.location.pathname.split("/"),X=window.location.search;U.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+S[2].split(".")[0]+"/"+S[1]+X})}}function m(Q,U){function S(qa,ka){ba[ka]=qa;ma[qa]=1}function X(qa,
ka){if(qa&&"string"===typeof qa&&!ma[qa])return S(qa,ka),!0}var Z=U.length,aa=[],fa;for(fa=0;fa<Q.length;fa++){var ha=Q[fa]._fullInput;ha!==ja&&aa.push(ha);var ja=ha}Q=aa.length;var ba=Array(Z),ma={};for(fa=0;fa<Z;fa++)ja=U[fa].uid,"number"===typeof ja&&(ja=String(ja)),X(ja,fa)||fa<Q&&X(aa[fa].uid,fa)||S(C.randstr(ma),fa);return ba}function l(Q,U){function S(ba){for(var ma=!0,qa=0;qa<U.length;qa++){var ka=U[qa];aa[ka]||(ba[ka]?aa[ka]=ba[ka]:ma=!1)}ma&&(Z=!0)}var X=Q._context.locale;X||(X="en-US");
for(var Z=!1,aa={},fa=0;2>fa;fa++){for(var ha=Q._context.locales,ja=0;2>ja;ja++){if(ha=(ha[X]||{}).format)if(S(ha),Z)break;ha=u.localeRegistry}ja=X.split("-")[0];if(Z||ja===X)break;X=ja}Z||S(u.localeRegistry.en.format);return aa}function h(Q){Q=Q.transforms;if(Array.isArray(Q)&&Q.length)for(var U=0;U<Q.length;U++){var S=Q[U];if((S=S._module||H[S.type])&&S.makesData)return!0}return!1}function a(Q,U,S,X){for(var Z=Q.transforms,aa=[Q],fa=0;fa<Z.length;fa++){var ha=Z[fa],ja=H[ha.type];ja&&ja.transform&&
(aa=ja.transform(aa,{transform:ha,fullTrace:Q,fullData:U,layout:S,fullLayout:X,transformIndex:fa}))}return aa}function g(Q){return"string"===typeof Q&&"px"===Q.substr(Q.length-2)&&parseFloat(Q)}function e(Q){var U=Q.margin;Q._size||(U=Q._size={l:Math.round(U.l),r:Math.round(U.r),t:Math.round(U.t),b:Math.round(U.b),p:Math.round(U.pad)},U.w=Math.round(Q.width)-U.l-U.r,U.h=Math.round(Q.height)-U.t-U.b);Q._pushmargin||(Q._pushmargin={});Q._pushmarginIds||(Q._pushmarginIds={})}function n(Q,U,S){function X(ha){if(ha)for(;ha.length;)ha.shift()}
function Z(ha){if(Q._transitionData)return X(Q._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(S.redraw)return u.call("redraw",Q)}).then(function(){Q._transitioning=!1;Q._transitioningWithDuration=!1;Q.emit("plotly_transitioned",[])}).then(ha)}var aa=!1,fa=C.syncOrAsync([L.previousPromises,function(){if(Q._transitionData){Q._transitioning=!1;var ha=Q._transitionData._interruptCallbacks,ja=Promise.resolve();if(ha)for(;ha.length;)ja=ja.then(ha.shift());return ja}},S.prepareFn,
L.rehover,function(){Q.emit("plotly_transitioning",[]);return new Promise(function(ha){function ja(){ba++;return function(){ma++;aa||ma!==ba||Z(ha)}}Q._transitioning=!0;0<U.duration&&(Q._transitioningWithDuration=!0);Q._transitionData._interruptCallbacks.push(function(){aa=!0});S.redraw&&Q._transitionData._interruptCallbacks.push(function(){return u.call("redraw",Q)});Q._transitionData._interruptCallbacks.push(function(){Q.emit("plotly_transitioninterrupted",[])});var ba=0,ma=0;S.runFn(ja);setTimeout(ja())})}],
Q);fa&&fa.then||(fa=Promise.resolve());return fa.then(function(){return Q})}function p(Q,U){function S(lb,ab,Ya){var hb=ab._id.charAt(0);if("histogram2dcontour"===lb){lb=ab._counterAxes[0];ab=D.getFromId(U,lb);var nb="x"===hb||"x"===lb&&"category"===ab.type,va="y"===hb||"y"===lb&&"category"===ab.type;return function(Ba,Ga){return 0===Ba||0===Ga||nb&&Ba===Ya[Ga].length-1||va&&Ga===Ya.length-1?-1:("y"===hb?Ga:Ba)-1}}return function(Ba,Ga){return"y"===hb?Ga:Ba}}var X=[],Z,aa,fa,ha,ja={min:function(lb){return C.aggNums(Math.min,
null,lb)},max:function(lb){return C.aggNums(Math.max,null,lb)},sum:function(lb){return C.aggNums(function(ab,Ya){return ab+Ya},null,lb)},total:function(lb){return C.aggNums(function(ab,Ya){return ab+Ya},null,lb)},mean:function(lb){return C.mean(lb)},median:function(lb){return C.median(lb)}};for(Z=0;Z<Q.length;Z++){var ba=Q[Z];if("category"===ba.type&&(aa=ba.categoryorder.match(T))){var ma=aa[1],qa=aa[2],ka=ba._id.charAt(0),oa="x"===ka,na=[];for(aa=0;aa<ba._categories.length;aa++)na.push([ba._categories[aa],
[]]);for(aa=0;aa<ba._traceIndices.length;aa++){var la=ba._traceIndices[aa];var ia=U._fullData[la];if(!0===ia.visible){var sa=ia.type;u.traceIs(ia,"histogram")&&(delete ia._xautoBinFinished,delete ia._yautoBinFinished);var ta="splom"===sa;sa="scattergl"===sa;var Aa=U.calcdata[la];for(la=0;la<Aa.length;la++){var Ka=Aa[la];if(ta){var Sa=ia._axesDim[ba._id];oa||(fa=ia._diag[Sa][0])&&(ba=U._fullLayout[D.id2name(fa)]);var db=Ka.trace.dimensions[Sa].values;for(fa=0;fa<db.length;fa++){var eb=ba._categoriesMap[db[fa]];
for(ha=0;ha<Ka.trace.dimensions.length;ha++)ha!==Sa&&na[eb][1].push(Ka.trace.dimensions[ha].values[fa])}}else if(sa){for(fa=0;fa<Ka.t.x.length;fa++)oa?(eb=Ka.t.x[fa],Sa=Ka.t.y[fa]):(eb=Ka.t.y[fa],Sa=Ka.t.x[fa]),na[eb][1].push(Sa);Ka.t&&Ka.t._scene&&delete Ka.t._scene.dirty}else if(Ka.hasOwnProperty("z"))for(Sa=Ka.z,Ka=S(ia.type,ba,Sa),fa=0;fa<Sa.length;fa++)for(ha=0;ha<Sa[fa].length;ha++)eb=Ka(ha,fa),eb+1&&na[eb][1].push(Sa[fa][ha]);else for(eb=Ka.p,void 0===eb&&(eb=Ka[ka]),Sa=Ka.s,void 0===Sa&&(Sa=
Ka.v),void 0===Sa&&(Sa=oa?Ka.y:Ka.x),Array.isArray(Sa)||(Sa=void 0===Sa?[]:[Sa]),fa=0;fa<Sa.length;fa++)na[eb][1].push(Sa[fa])}}}ba._categoriesValue=na;ka=[];for(aa=0;aa<na.length;aa++)ka.push([na[aa][0],ja[ma](na[aa][1])]);ka.sort(function(lb,ab){return lb[1]-ab[1]});ba._categoriesAggregatedValue=ka;ba._initialCategories=ka.map(function(lb){return lb[0]});"descending"===qa&&ba._initialCategories.reverse();X=X.concat(ba.sortByInitialCategories())}}return X}function c(Q,U,S){function X(ha){ha.clearCalc();
"multicategory"===ha.type&&ha.setupMultiCategory(U);Z[ha._id]=1}var Z={};C.simpleMap(Q,X);Q=S._axisMatchGroups||[];for(var aa=0;aa<Q.length;aa++)for(var fa in Q[aa])Z[fa]||X(S[D.id2name(fa)])}function d(Q){var U=Q._fullLayout,S=U._visibleModules,X={},Z,aa;for(Z=0;Z<S.length;Z++){var fa=S[Z],ha=fa.crossTraceCalc;ha&&(fa=fa.basePlotModule.name,X[fa]?C.pushUnique(X[fa],ha):X[fa]=[ha])}for(aa in X)if(ha=X[aa],fa=U._subplots[aa],Array.isArray(fa))for(S=0;S<fa.length;S++){var ja=fa[S],ba="cartesian"===
aa?U._plots[ja]:U[ja];for(Z=0;Z<ha.length;Z++)ha[Z](Q,ba,ja)}else for(Z=0;Z<ha.length;Z++)ha[Z](Q)}var f=b("d3"),k=b("d3-time-format").timeFormatLocale,r=b("fast-isnumeric"),u=b("../registry"),v=b("../plot_api/plot_schema"),x=b("../plot_api/plot_template"),C=b("../lib"),z=b("../components/color"),y=b("../constants/numerical").BADNUM,D=b("./cartesian/axis_ids"),A=b("./cartesian/handle_outline").clearSelect,t=b("./animation_attributes"),B=b("./frame_attributes"),F=b("../plots/get_data").getModuleCalcData,
I=C.relinkPrivateKeys,J=C._,L=K.exports={};C.extendFlat(L,u);L.attributes=b("./attributes");L.attributes.type.values=L.allTypes;L.fontAttrs=b("./font_attributes");L.layoutAttributes=b("./layout_attributes");L.fontWeight="normal";var H=L.transformsRegistry;b=b("./command");L.executeAPICommand=b.executeAPICommand;L.computeAPICommandBindings=b.computeAPICommandBindings;L.manageCommandObserver=b.manageCommandObserver;L.hasSimpleAPICommandBindings=b.hasSimpleAPICommandBindings;L.redrawText=function(Q){Q=
C.getGraphDiv(Q);var U=Q._fullLayout||{};if(U._has&&U._has("polar")||!Q.data||!Q.data[0]||!Q.data[0].r)return new Promise(function(S){setTimeout(function(){u.getComponentMethod("annotations","draw")(Q);u.getComponentMethod("legend","draw")(Q);u.getComponentMethod("colorbar","draw")(Q);S(L.previousPromises(Q))},300)})};L.resize=function(Q){Q=C.getGraphDiv(Q);var U,S=new Promise(function(X,Z){Q&&!C.isHidden(Q)||Z(Error("Resize must be passed a displayed plot div element."));Q._redrawTimer&&clearTimeout(Q._redrawTimer);
Q._resolveResize&&(U=Q._resolveResize);Q._resolveResize=X;Q._redrawTimer=setTimeout(function(){if(!Q.layout||Q.layout.width&&Q.layout.height||C.isHidden(Q))X(Q);else{delete Q.layout.width;delete Q.layout.height;var aa=Q.changed;Q.autoplay=!0;u.call("relayout",Q,{autosize:!0}).then(function(){Q.changed=aa;Q._resolveResize===X&&(delete Q._resolveResize,X(Q))})}},100)});U&&U(S);return S};L.previousPromises=function(Q){if((Q._promises||[]).length)return Promise.all(Q._promises).then(function(){Q._promises=
[]})};L.addLinks=function(Q){if(Q._context.showLink||Q._context.showSources){var U=Q._fullLayout,S=C.ensureSingle(U._paper,"text","js-plot-link-container",function(aa){aa.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:z.defaultLine,"pointer-events":"all"}).each(function(){var fa=f.select(this);fa.append("tspan").classed("js-link-to-tool",!0);fa.append("tspan").classed("js-link-spacer",!0);fa.append("tspan").classed("js-sourcelinks",!0)})}),X=S.node(),Z={y:U._paper.attr("height")-
9};document.body.contains(X)&&X.getComputedTextLength()>=U.width-20?(Z["text-anchor"]="start",Z.x=5):(Z["text-anchor"]="end",Z.x=U._paper.attr("width")-7);S.attr(Z);U=S.select(".js-link-to-tool");X=S.select(".js-link-spacer");S=S.select(".js-sourcelinks");Q._context.showSources&&Q._context.showSources(Q);Q._context.showLink&&q(Q,U);X.text(U.text()&&S.text()?" - ":"")}};L.sendDataToCloud=function(Q){var U=(window.PLOTLYENV||{}).BASE_URL||Q._context.plotlyServerURL;if(U){Q.emit("plotly_beforeexport");
var S=f.select(Q).append("div").attr("id","hiddenform").style("display","none");U=S.append("form").attr({action:U+"/external",method:"post",target:"_blank"});U.append("input").attr({type:"text",name:"data"}).node().value=L.graphJson(Q,!1,"keepdata");U.node().submit();S.remove();Q.emit("plotly_afterexport");return!1}};var P="days shortDays months shortMonths periods dateTime date time decimal thousands grouping currency".split(" "),M=["year","month","dayMonth","dayMonthYear"];L.supplyDefaults=function(Q,
U){U=U&&U.skipUpdateCalc;var S=Q._fullLayout||{};if(S._skipDefaults)delete S._skipDefaults;else{var X=Q._fullLayout={},Z=Q.layout||{},aa=Q._fullData||[],fa=Q._fullData=[],ha=Q.data||[],ja=Q.calcdata||[],ba=Q._context||{};Q._transitionData||L.createTransitionData(Q);X._dfltTitle={plot:J(Q,"Click to enter Plot title"),x:J(Q,"Click to enter X axis title"),y:J(Q,"Click to enter Y axis title"),colorbar:J(Q,"Click to enter Colorscale title"),annotation:J(Q,"new text")};X._traceWord=J(Q,"trace");var ma=
l(Q,P);X._mapboxAccessToken=ba.mapboxAccessToken;if(S._initialAutoSizeIsDone){var qa=S.width,ka=S.height;L.supplyLayoutGlobalDefaults(Z,X,ma);Z.width||(X.width=qa);Z.height||(X.height=ka);L.sanitizeMargins(X)}else L.supplyLayoutGlobalDefaults(Z,X,ma),qa=!Z.width||!Z.height,ka=X.autosize,ba=ba.autosizable,qa&&(ka||ba)?L.plotAutoSize(Q,Z,X):qa&&L.sanitizeMargins(X),!ka&&qa&&(Z.width=X.width,Z.height=X.height);qa=X.separators;ma.decimal=qa.charAt(0);ma.thousands=qa.charAt(1);ma={numberFormat:f.locale(ma).numberFormat,
timeFormat:k(ma).utcFormat};X._d3locale=ma;X._extraFormat=l(Q,M);X._initialAutoSizeIsDone=!0;X._dataLength=ha.length;X._modules=[];X._visibleModules=[];X._basePlotModules=[];ma=u.collectableSubplotTypes;qa={};var oa;if(!ma)for(oa in ma=[],ba=u.subplotsRegistry,ba){var na=ba[oa].attr;if(na&&(ma.push(oa),Array.isArray(na)))for(ka=0;ka<na.length;ka++)C.pushUnique(ma,na[ka])}for(oa=0;oa<ma.length;oa++)qa[ma[oa]]=[];qa=X._subplots=qa;ma=X._splomAxes={x:{},y:{}};ka=X._splomSubplots={};X._splomGridDflt=
{};X._scatterStackOpts={};X._firstScatter={};X._alignmentOpts={};X._colorAxes={};X._requestRangeslider={};X._traceUids=m(aa,ha);X._globalTransforms=(Q._context||{}).globalTransforms;L.supplyDataDefaults(ha,fa,Z,X);oa=Object.keys(ma.x);ma=Object.keys(ma.y);if(1<oa.length&&1<ma.length){u.getComponentMethod("grid","sizeDefaults")(Z,X);for(ha=0;ha<oa.length;ha++)C.pushUnique(qa.xaxis,oa[ha]);for(ha=0;ha<ma.length;ha++)C.pushUnique(qa.yaxis,ma[ha]);for(var la in ka)C.pushUnique(qa.cartesian,la)}X._has=
L._hasPlotType.bind(X);if(aa.length===fa.length)for(ha=0;ha<fa.length;ha++)I(fa[ha],aa[ha]);L.supplyLayoutModuleDefaults(Z,X,fa,Q._transitionData);la=X._visibleModules;Z=[];for(ha=0;ha<la.length;ha++)(qa=la[ha].crossTraceDefaults)&&C.pushUnique(Z,qa);for(ha=0;ha<Z.length;ha++)Z[ha](fa,X);X._hasOnlyLargeSploms=1===X._basePlotModules.length&&"splom"===X._basePlotModules[0].name&&15<oa.length&&15<ma.length&&0===X.shapes.length&&0===X.images.length;X._hasCartesian=X._has("cartesian");X._hasGeo=X._has("geo");
X._hasGL3D=X._has("gl3d");X._hasGL2D=X._has("gl2d");X._hasTernary=X._has("ternary");X._hasPie=X._has("pie");L.linkSubplots(fa,X,aa,S);L.cleanPlot(fa,X,aa,S);Z=!(!S._has||!S._has("gl2d"));aa=!(!X._has||!X._has("gl2d"));ha=!(!S._has||!S._has("cartesian"));la=!(!X._has||!X._has("cartesian"));Z=ha||Z;aa=la||aa;Z&&!aa?S._bgLayer.remove():aa&&!Z&&(X._shouldCreateBgLayer=!0);S._zoomlayer&&!Q._dragging&&A({_fullLayout:S});Q=[];if(X.meta)var ia=X._meta={meta:X.meta,layout:{meta:X.meta}};for(aa=0;aa<fa.length;aa++)la=
fa[aa],la.meta?Q[la.index]=la._meta={meta:la.meta}:X.meta&&(la._meta={meta:X.meta}),X.meta&&(la._meta.layout={meta:X.meta});Q.length&&(ia||(ia=X._meta={}),ia.data=Q);I(X,S);u.getComponentMethod("colorscale","crossTraceDefaults")(fa,X);X._preGUI||(X._preGUI={});X._tracePreGUI||(X._tracePreGUI={});ia=X._tracePreGUI;S={};for(var sa in ia)S[sa]="old";for(ha=0;ha<fa.length;ha++)sa=fa[ha]._fullInput.uid,S[sa]||(ia[sa]={}),S[sa]="new";for(sa in S)"old"===S[sa]&&delete ia[sa];e(X);u.getComponentMethod("rangeslider",
"makeData")(X);U||ja.length!==fa.length||L.supplyDefaultsUpdateCalc(ja,fa)}};L.supplyDefaultsUpdateCalc=function(Q,U){for(var S=0;S<U.length;S++){var X=U[S],Z=(Q[S]||[])[0];if(Z&&Z.trace){var aa=Z.trace;if(aa._hasCalcTransform){var fa=aa._arrayAttrs,ha;for(ha=0;ha<fa.length;ha++){var ja=fa[ha];var ba=C.nestedProperty(aa,ja).get().slice();C.nestedProperty(X,ja).set(ba)}}Z.trace=X}}};L.createTransitionData=function(Q){Q._transitionData||(Q._transitionData={});Q._transitionData._frames||(Q._transitionData._frames=
[]);Q._transitionData._frameHash||(Q._transitionData._frameHash={});Q._transitionData._counter||(Q._transitionData._counter=0);Q._transitionData._interruptCallbacks||(Q._transitionData._interruptCallbacks=[])};L._hasPlotType=function(Q){var U,S=this._basePlotModules||[];for(U=0;U<S.length;U++)if(S[U].name===Q)return!0;S=this._modules||[];for(U=0;U<S.length;U++){var X=S[U].name;if(X===Q||(X=u.modules[X])&&X.categories[Q])return!0}return!1};L.cleanPlot=function(Q,U,S,X){var Z,aa=X._basePlotModules||
[];for(Z=0;Z<aa.length;Z++){var fa=aa[Z];fa.clean&&fa.clean(Q,U,S,X)}Z=X._has&&X._has("gl");U=U._has&&U._has("gl");Z&&!U&&void 0!==X._glcontainer&&(X._glcontainer.selectAll(".gl-canvas").remove(),X._glcontainer.selectAll(".no-webgl").remove(),X._glcanvas=null);aa=!!X._infolayer;Z=0;a:for(;Z<S.length;Z++){fa=S[Z].uid;for(U=0;U<Q.length;U++)if(fa===Q[U].uid)continue a;aa&&X._infolayer.select(".cb"+fa).remove()}};L.linkSubplots=function(Q,U,S,X){var Z=X._plots||{},aa=U._plots={};X=U._subplots;S={_fullData:Q,
_fullLayout:U};var fa=X.cartesian.concat(X.gl2d||[]);for(X=0;X<fa.length;X++){var ha=fa[X];var ja=Z[ha],ba=D.getFromId(S,ha,"x"),ma=D.getFromId(S,ha,"y");ja?ja=aa[ha]=ja:(ja=aa[ha]={},ja.id=ha);ba._counterAxes.push(ma._id);ma._counterAxes.push(ba._id);ba._subplotsWith.push(ha);ma._subplotsWith.push(ha);ja.xaxis=ba;ja.yaxis=ma;ja._hasClipOnAxisFalse=!1;for(ha=0;ha<Q.length;ha++)if(ba=Q[ha],ba.xaxis===ja.xaxis._id&&ba.yaxis===ja.yaxis._id&&!1===ba.cliponaxis){ja._hasClipOnAxisFalse=!0;break}}Q=D.list(S,
null,!0);for(X=0;X<Q.length;X++)Z=Q[X],ha=null,Z.overlaying&&(ha=D.getFromId(S,Z.overlaying))&&ha.overlaying&&(Z.overlaying=!1,ha=null),Z._mainAxis=ha||Z,ha&&(Z.domain=ha.domain.slice()),Z._anchorAxis="free"===Z.anchor?null:D.getFromId(S,Z.anchor);for(X=0;X<Q.length;X++){Z=Q[X];Z._counterAxes.sort(D.idSort);Z._subplotsWith.sort(C.subplotSort);aa=ha=Z;var qa=U;fa={_fullLayout:qa};ja="x"===aa._id.charAt(0);var ka=aa._mainAxis._anchorAxis,oa=ma=ba="";ka&&(oa=ka._mainAxis._id,ba=ja?aa._id+oa:oa+aa._id);
if(!ba||!qa._plots[ba])for(ba="",qa=aa._counterAxes,ka=0;ka<qa.length;ka++){var na=qa[ka],la=ja?aa._id+na:na+aa._id;ma||(ma=la);na=D.getFromId(fa,na);if(oa&&na.overlaying===oa){ba=la;break}}ha._mainSubplot=ba||ma;if(Z._counterAxes.length&&(Z.spikemode&&-1!==Z.spikemode.indexOf("across")||Z.automargin&&Z.mirror&&"free"!==Z.anchor||u.getComponentMethod("rangeslider","isVisible")(Z))){aa=1;for(ha=fa=0;ha<Z._counterAxes.length;ha++)ja=D.getFromId(S,Z._counterAxes[ha]),aa=Math.min(aa,ja.domain[0]),fa=
Math.max(fa,ja.domain[1]);aa<fa&&(Z._counterDomainMin=aa,Z._counterDomainMax=fa)}}};L.clearExpandedTraceDefaultColors=function(Q){function U(aa,fa,ha,ja){X[ja]=fa;X.length=ja+1;"color"===aa.valType&&void 0===aa.dflt&&Z.push(X.join("."))}var S;var X=[];var Z=Q._module._colorAttrs;Z||(Q._module._colorAttrs=Z=[],v.crawl(Q._module.attributes,U));for(S=0;S<Z.length;S++)C.nestedProperty(Q,"_input."+Z[S]).get()||C.nestedProperty(Q,Z[S]).set(null)};L.supplyDataDefaults=function(Q,U,S,X){function Z(Sa){U.push(Sa);
var db=Sa._module;db&&(C.pushUnique(aa,db),!0===Sa.visible&&C.pushUnique(fa,db),C.pushUnique(ha,Sa._module.basePlotModule),ja++,!1!==Sa._input.visible&&ba++)}var aa=X._modules,fa=X._visibleModules,ha=X._basePlotModules,ja=0,ba=0,ma;X._transformModules=[];var qa={},ka=[],oa=x.traceTemplater((S.template||{}).data||{});for(ma=0;ma<Q.length;ma++){var na=Q[ma];var la=oa.newTrace(na);la.uid=X._traceUids[ma];L.supplyTraceDefaults(na,la,ba,X,ma);la.index=ma;la._input=na;la._expandedIndex=ja;if(la.transforms&&
la.transforms.length)for(var ia=!1!==na.visible&&!1===la.visible,sa=a(la,U,S,X),ta=0;ta<sa.length;ta++){var Aa=sa[ta],Ka={_template:la._template,type:la.type,uid:la.uid+ta};ia&&!1===Aa.visible&&delete Aa.visible;L.supplyTraceDefaults(Aa,Ka,ja,X,ma);I(Ka,Aa);Ka.index=ma;Ka._input=na;Ka._fullInput=la;Ka._expandedIndex=ja;Ka._expandedInput=Aa;Z(Ka)}else la._fullInput=la,la._expandedInput=la,Z(la);u.traceIs(la,"carpetAxis")&&(qa[la.carpet]=la);u.traceIs(la,"carpetDependent")&&ka.push(ma)}for(ma=0;ma<
ka.length;ma++)la=U[ka[ma]],la.visible&&(Q=qa[la.carpet],(la._carpet=Q)&&Q.visible?(la.xaxis=Q.xaxis,la.yaxis=Q.yaxis):la.visible=!1)};L.supplyAnimationDefaults=function(Q){Q=Q||{};var U,S={};C.coerce(Q||{},S,t,"mode",void 0);C.coerce(Q||{},S,t,"direction",void 0);C.coerce(Q||{},S,t,"fromcurrent",void 0);if(Array.isArray(Q.frame))for(S.frame=[],U=0;U<Q.frame.length;U++)S.frame[U]=L.supplyAnimationFrameDefaults(Q.frame[U]||{});else S.frame=L.supplyAnimationFrameDefaults(Q.frame||{});if(Array.isArray(Q.transition))for(S.transition=
[],U=0;U<Q.transition.length;U++)S.transition[U]=L.supplyAnimationTransitionDefaults(Q.transition[U]||{});else S.transition=L.supplyAnimationTransitionDefaults(Q.transition||{});return S};L.supplyAnimationFrameDefaults=function(Q){var U={};C.coerce(Q||{},U,t.frame,"duration",void 0);C.coerce(Q||{},U,t.frame,"redraw",void 0);return U};L.supplyAnimationTransitionDefaults=function(Q){var U={};C.coerce(Q||{},U,t.transition,"duration",void 0);C.coerce(Q||{},U,t.transition,"easing",void 0);return U};L.supplyFrameDefaults=
function(Q){function U(X,Z){return C.coerce(Q,S,B,X,Z)}var S={};U("group");U("name");U("traces");U("baseframe");U("data");U("layout");return S};L.supplyTraceDefaults=function(Q,U,S,X,Z){function aa(la,ia){return C.coerce(Q,U,L.attributes,la,ia)}var fa=X.colorway||z.defaults;S=fa[S%fa.length];fa=aa("visible");aa("type");aa("name",X._traceWord+" "+Z);aa("uirevision",X.uirevision);var ha=L.getModule(U);if(U._module=ha){var ja=ha.basePlotModule,ba=ja.attr,ma=ja.attributes;if(ba&&ma){var qa=X._subplots,
ka="";if(fa||"gl2d"!==ja.name){if(Array.isArray(ba))for(Z=0;Z<ba.length;Z++){var oa=ba[Z],na=C.coerce(Q,U,ma,oa);qa[oa]&&C.pushUnique(qa[oa],na);ka+=na}else ka=C.coerce(Q,U,ma,ba);qa[ja.name]&&C.pushUnique(qa[ja.name],ka)}}}fa&&(aa("customdata"),aa("ids"),aa("meta"),u.traceIs(U,"showLegend")?(C.coerce(Q,U,ha.attributes.showlegend?ha.attributes:L.attributes,"showlegend"),aa("legendgroup"),U._dfltShowLegend=!0):U._dfltShowLegend=!1,ha&&ha.supplyDefaults(Q,U,S,X),u.traceIs(U,"noOpacity")||aa("opacity"),
u.traceIs(U,"notLegendIsolatable")&&(U.visible=!!U.visible),u.traceIs(U,"noHover")||(U.hovertemplate||C.coerceHoverinfo(Q,U,X),"parcats"!==U.type&&u.getComponentMethod("fx","supplyDefaults")(Q,U,S,X)),ha&&ha.selectPoints&&aa("selectedpoints"),L.supplyTransformDefaults(Q,U,X));return U};L.hasMakesDataTransform=h;L.supplyTransformDefaults=function(Q,U,S){if(U._length||h(Q)){var X=S._globalTransforms||[],Z=S._transformModules||[];if(Array.isArray(Q.transforms)||0!==X.length){X=X.concat(Q.transforms||
[]);for(var aa=U.transforms=[],fa=0;fa<X.length;fa++){var ha=X[fa],ja=ha.type,ba=H[ja],ma=!(ha._module&&ha._module===ba),qa=ba&&"function"===typeof ba.transform;ba||C.warn("Unrecognized transform type "+ja+".");ba&&ba.supplyDefaults&&(ma||qa)?(ha=ba.supplyDefaults(ha,U,S,Q),ha.type=ja,ha._module=ba,C.pushUnique(Z,ba)):ha=C.extendFlat({},ha);aa.push(ha)}}}};L.supplyLayoutGlobalDefaults=function(Q,U,S){function X(aa,fa){return C.coerce(Q,U,L.layoutAttributes,aa,fa)}var Z=Q.template;C.isPlainObject(Z)&&
(U.template=Z,U._template=Z.layout,U._dataTemplate=Z.data);X("autotypenumbers");Z=C.coerceFont(X,"font");X("title.text",U._dfltTitle.plot);C.coerceFont(X,"title.font",{family:Z.family,size:Math.round(1.4*Z.size),color:Z.color});X("title.xref");X("title.yref");X("title.x");X("title.y");X("title.xanchor");X("title.yanchor");X("title.pad.t");X("title.pad.r");X("title.pad.b");X("title.pad.l");X("uniformtext.mode")&&X("uniformtext.minsize");X("autosize",!(Q.width&&Q.height));X("width");X("height");X("margin.l");
X("margin.r");X("margin.t");X("margin.b");X("margin.pad");X("margin.autoexpand");Q.width&&Q.height&&L.sanitizeMargins(U);u.getComponentMethod("grid","sizeDefaults")(Q,U);X("paper_bgcolor");X("separators",S.decimal+S.thousands);X("hidesources");X("colorway");X("datarevision");S=X("uirevision");X("editrevision",S);X("selectionrevision",S);X("modebar.orientation");X("modebar.bgcolor",z.addOpacity(U.paper_bgcolor,.5));Z=z.contrast(z.rgb(U.modebar.bgcolor));X("modebar.color",z.addOpacity(Z,.3));X("modebar.activecolor",
z.addOpacity(Z,.7));X("modebar.uirevision",S);u.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(Q,U,X);X("meta");C.isPlainObject(Q.transition)&&(X("transition.duration"),X("transition.easing"),X("transition.ordering"));u.getComponentMethod("calendars","handleDefaults")(Q,U,"calendar");u.getComponentMethod("fx","supplyLayoutGlobalDefaults")(Q,U,X)};L.plotAutoSize=function(Q,U,S){var X=Q._context||{},Z=X.frameMargins,aa;(aa=C.isPlotDiv(Q))&&Q.emit("plotly_autosize");X.fillFrame?(X=window.innerWidth,
aa=window.innerHeight,document.body.style.overflow="hidden"):(aa=aa?window.getComputedStyle(Q):{},X=g(aa.width)||g(aa.maxWidth)||S.width,aa=g(aa.height)||g(aa.maxHeight)||S.height,r(Z)&&0<Z&&(Z=1-2*Z,X=Math.round(Z*X),aa=Math.round(Z*aa)));Z=L.layoutAttributes.width.min;var fa=L.layoutAttributes.height.min;X<Z&&(X=Z);aa<fa&&(aa=fa);Z=!U.width&&1<Math.abs(S.width-X);if((U=!U.height&&1<Math.abs(S.height-aa))||Z)Z&&(S.width=X),U&&(S.height=aa);Q._initialAutoSize||(Q._initialAutoSize={width:X,height:aa});
L.sanitizeMargins(S)};L.supplyLayoutModuleDefaults=function(Q,U,S,X){var Z=u.componentsRegistry,aa=U._basePlotModules,fa;var ha=u.subplotsRegistry.cartesian;for(fa in Z){var ja=Z[fa];ja.includeBasePlot&&ja.includeBasePlot(Q,U)}aa.length||aa.push(ha);U._has("cartesian")&&(u.getComponentMethod("grid","contentDefaults")(Q,U),ha.finalizeSubplots(Q,U));for(var ba in U._subplots)U._subplots[ba].sort(C.subplotSort);for(ha=0;ha<aa.length;ha++)ja=aa[ha],ja.supplyLayoutDefaults&&ja.supplyLayoutDefaults(Q,U,
S);aa=U._modules;for(ha=0;ha<aa.length;ha++)ja=aa[ha],ja.supplyLayoutDefaults&&ja.supplyLayoutDefaults(Q,U,S);aa=U._transformModules;for(ha=0;ha<aa.length;ha++)ja=aa[ha],ja.supplyLayoutDefaults&&ja.supplyLayoutDefaults(Q,U,S,X);for(fa in Z)ja=Z[fa],ja.supplyLayoutDefaults&&ja.supplyLayoutDefaults(Q,U,S)};L.purge=function(Q){var U=Q._fullLayout||{};void 0!==U._glcontainer&&(U._glcontainer.selectAll(".gl-canvas").remove(),U._glcontainer.remove(),U._glcanvas=null);U._modeBar&&U._modeBar.destroy();Q._transitionData&&
(Q._transitionData._interruptCallbacks&&(Q._transitionData._interruptCallbacks.length=0),Q._transitionData._animationRaf&&window.cancelAnimationFrame(Q._transitionData._animationRaf));C.clearThrottle();C.clearResponsive(Q);delete Q.data;delete Q.layout;delete Q._fullData;delete Q._fullLayout;delete Q.calcdata;delete Q.framework;delete Q.empty;delete Q.fid;delete Q.undoqueue;delete Q.undonum;delete Q.autoplay;delete Q.changed;delete Q._promises;delete Q._redrawTimer;delete Q._hmlumcount;delete Q._hmpixcount;
delete Q._transitionData;delete Q._transitioning;delete Q._initialAutoSize;delete Q._transitioningWithDuration;delete Q._dragging;delete Q._dragged;delete Q._dragdata;delete Q._hoverdata;delete Q._snapshotInProgress;delete Q._editing;delete Q._mouseDownTime;delete Q._legendMouseDownTime;Q.removeAllListeners&&Q.removeAllListeners()};L.style=function(Q){var U=Q._fullLayout._visibleModules,S=[],X;for(X=0;X<U.length;X++){var Z=U[X];Z.style&&C.pushUnique(S,Z.style)}for(X=0;X<S.length;X++)S[X](Q)};L.sanitizeMargins=
function(Q){if(Q&&Q.margin){var U=Q.width,S=Q.height;Q=Q.margin;var X=S-(Q.t+Q.b);0>U-(Q.l+Q.r)&&(U=(U-1)/(Q.l+Q.r),Q.l=Math.floor(U*Q.l),Q.r=Math.floor(U*Q.r));0>X&&(U=(S-1)/(Q.t+Q.b),Q.t=Math.floor(U*Q.t),Q.b=Math.floor(U*Q.b))}};L.clearAutoMarginIds=function(Q){Q._fullLayout._pushmarginIds={}};L.allowAutoMargin=function(Q,U){Q._fullLayout._pushmarginIds[U]=1};L.autoMargin=function(Q,U,S){var X=Q._fullLayout,Z=X.width,aa=X.height,fa=X.margin,ha=C.constrain(Z-fa.l-fa.r,2,64),ja=C.constrain(aa-fa.t-
fa.b,2,64);Z=Math.max(0,Z-ha);var ba=Math.max(0,aa-ja);aa=X._pushmargin;ja=X._pushmarginIds;if(!1!==fa.autoexpand&&(S?(ha=S.pad,void 0===ha&&(ha=Math.min(12,fa.l,fa.r,fa.t,fa.b)),Z&&(fa=(S.l+S.r)/Z,1<fa&&(S.l/=fa,S.r/=fa)),ba&&(fa=(S.t+S.b)/ba,1<fa&&(S.t/=fa,S.b/=fa)),aa[U]={l:{val:void 0!==S.xl?S.xl:S.x,size:S.l+ha},r:{val:void 0!==S.xr?S.xr:S.x,size:S.r+ha},b:{val:void 0!==S.yb?S.yb:S.y,size:S.b+ha},t:{val:void 0!==S.yt?S.yt:S.y,size:S.t+ha}},ja[U]=1):(delete aa[U],delete ja[U]),!X._replotting))return L.doAutoMargin(Q)};
L.doAutoMargin=function(Q){var U=Q._fullLayout,S=U.width,X=U.height;U._size||(U._size={});e(U);var Z=U._size,aa=U.margin,fa=C.extendFlat({},Z),ha=aa.l,ja=aa.r,ba=aa.t,ma=aa.b,qa=U._pushmargin,ka=U._pushmarginIds;if(!1!==U.margin.autoexpand){for(var oa in qa)ka[oa]||delete qa[oa];qa.base={l:{val:0,size:ha},r:{val:1,size:ja},t:{val:1,size:ba},b:{val:0,size:ma}};for(var na in qa){var la=qa[na].l||{},ia=qa[na].b||{};oa=la.val;la=la.size;var sa=ia.val;ia=ia.size;for(var ta in qa){if(r(la)&&qa[ta].r){var Aa=
qa[ta].r.val,Ka=qa[ta].r.size;if(Aa>oa){var Sa=(la*Aa+(Ka-S)*oa)/(Aa-oa);Aa=(Ka*(1-oa)+(la-S)*(1-Aa))/(Aa-oa);Sa+Aa>ha+ja&&(ha=Sa,ja=Aa)}}r(ia)&&qa[ta].t&&(Aa=qa[ta].t.val,Ka=qa[ta].t.size,Aa>sa&&(Sa=(ia*Aa+(Ka-X)*sa)/(Aa-sa),Aa=(Ka*(1-sa)+(ia-X)*(1-Aa))/(Aa-sa),Sa+Aa>ma+ba&&(ma=Sa,ba=Aa)))}}}na=C.constrain(S-aa.l-aa.r,2,64);qa=C.constrain(X-aa.t-aa.b,2,64);na=Math.max(0,S-na);qa=Math.max(0,X-qa);na&&(na=(ha+ja)/na,1<na&&(ha/=na,ja/=na));qa&&(qa=(ma+ba)/qa,1<qa&&(ma/=qa,ba/=qa));Z.l=Math.round(ha);
Z.r=Math.round(ja);Z.t=Math.round(ba);Z.b=Math.round(ma);Z.p=Math.round(aa.pad);Z.w=Math.round(S)-Z.l-Z.r;Z.h=Math.round(X)-Z.t-Z.b;if(!U._replotting&&L.didMarginChange(fa,Z)){"_redrawFromAutoMarginCount"in U?U._redrawFromAutoMarginCount++:U._redrawFromAutoMarginCount=1;S=3*(1+Object.keys(ka).length);if(U._redrawFromAutoMarginCount<S)return u.call("plot",Q);U._size=fa;C.warn("Too many auto-margin redraws.")}Q=D.list(Q,"",!0);for(U=0;U<Q.length;U++)(fa=Q[U]._hideOutOfRangeInsideTickLabels)&&fa()};
var N="lrtbpwh".split("");L.didMarginChange=function(Q,U){for(var S=0;S<N.length;S++){var X=N[S],Z=Q[X];X=U[X];if(!r(Z)||1<Math.abs(X-Z))return!0}return!1};L.graphJson=function(Q,U,S,X,Z,aa){function fa(ma,qa){if("function"===typeof ma)return qa?"_function_":null;if(C.isPlainObject(ma)){var ka={},oa;Object.keys(ma).sort().forEach(function(na){if(-1===["_","["].indexOf(na.charAt(0)))if("function"===typeof ma[na])qa&&(ka[na]="_function");else{if("keepdata"===S){if("src"===na.substr(na.length-3))return}else if("keepstream"===
S){if(oa=ma[na+"src"],"string"===typeof oa&&0<oa.indexOf(":")&&!C.isPlainObject(ma.stream))return}else if("keepall"!==S&&(oa=ma[na+"src"],"string"===typeof oa&&0<oa.indexOf(":")))return;ka[na]=fa(ma[na],qa)}});return ka}return Array.isArray(ma)?ma.map(function(na){return fa(na,qa)}):C.isTypedArray(ma)?C.simpleMap(ma,C.identity):C.isJSDate(ma)?C.ms2DateTimeLocal(+ma):ma}(Z&&U&&!Q._fullData||Z&&!U&&!Q._fullLayout)&&L.supplyDefaults(Q);var ha=Z?Q._fullLayout:Q.layout,ja=(Q._transitionData||{})._frames,
ba={data:((Z?Q._fullData:Q.data)||[]).map(function(ma){ma=fa(ma);U&&delete ma.fit;return ma})};U||(ba.layout=fa(ha),Z&&(Z=ha._size,ba.layout.computed={margin:{b:Z.b,l:Z.l,r:Z.r,t:Z.t}}));Q.framework&&Q.framework.isPolar&&(ba=Q.framework.getConfig());ja&&(ba.frames=fa(ja));aa&&(ba.config=fa(Q._context,!0));return"object"===X?ba:JSON.stringify(ba)};L.modifyFrames=function(Q,U){var S=Q._transitionData._frames,X=Q._transitionData._frameHash;for(Q=0;Q<U.length;Q++){var Z=U[Q];switch(Z.type){case "replace":var aa=
Z.value;var fa=(S[Z.index]||{}).name,ha=aa.name;S[Z.index]=X[ha]=aa;ha!==fa&&(delete X[fa],X[ha]=aa);break;case "insert":aa=Z.value;X[aa.name]=aa;S.splice(Z.index,0,aa);break;case "delete":aa=S[Z.index],delete X[aa.name],S.splice(Z.index,1)}}return Promise.resolve()};L.computeFrame=function(Q,U){var S=Q._transitionData._frameHash,X;if(!U)throw Error("computeFrame must be given a string frame name");U=S[U.toString()];if(!U)return!1;Q=[U];for(X=[U.name];U.baseframe&&(U=S[U.baseframe.toString()])&&-1===
X.indexOf(U.name);)Q.push(U),X.push(U.name);for(var Z={};U=Q.pop();)if(U.layout&&(Z.layout=L.extendLayout(Z.layout,U.layout)),U.data){Z.data||(Z.data=[]);X=U.traces;if(!X)for(X=[],S=0;S<U.data.length;S++)X[S]=S;Z.traces||(Z.traces=[]);for(S=0;S<U.data.length;S++){var aa=X[S];if(void 0!==aa&&null!==aa){var fa=Z.traces.indexOf(aa);-1===fa&&(fa=Z.data.length,Z.traces[fa]=aa);Z.data[fa]=L.extendTrace(Z.data[fa],U.data[S])}}}return Z};L.recomputeFrameHash=function(Q){var U=Q._transitionData._frameHash=
{};Q=Q._transitionData._frames;for(var S=0;S<Q.length;S++){var X=Q[S];X&&X.name&&(U[X.name]=X)}};L.extendObjectWithContainers=function(Q,U,S){U=C.extendDeepNoArrays({},U||{});var X=C.expandObjectPaths(U);var Z={};if(S&&S.length)for(U=0;U<S.length;U++){var aa=C.nestedProperty(X,S[U]);var fa=aa.get();void 0===fa?C.nestedProperty(Z,S[U]).set(null):(aa.set(null),C.nestedProperty(Z,S[U]).set(fa))}Q=C.extendDeepNoArrays(Q||{},X);if(S&&S.length)for(U=0;U<S.length;U++)if(aa=C.nestedProperty(Z,S[U]),X=aa.get()){fa=
C.nestedProperty(Q,S[U]);var ha=fa.get();Array.isArray(ha)||(ha=[],fa.set(ha));for(aa=0;aa<X.length;aa++){var ja=X[aa];ha[aa]=null===ja?null:L.extendObjectWithContainers(ha[aa],ja)}fa.set(ha)}return Q};L.dataArrayContainers=["transforms","dimensions"];L.layoutArrayContainers=u.layoutArrayContainers;L.extendTrace=function(Q,U){return L.extendObjectWithContainers(Q,U,L.dataArrayContainers)};L.extendLayout=function(Q,U){return L.extendObjectWithContainers(Q,U,L.layoutArrayContainers)};L.transition=function(Q,
U,S,X,Z,aa){Z={redraw:Z.redraw};var fa={},ha=[];Z.prepareFn=function(){var ja=Array.isArray(U)?U.length:0;ja=X.slice(0,ja);for(var ba=0;ba<ja.length;ba++){var ma=ja[ba],qa=Q._fullData[ma]._module;qa&&(qa.animatable&&(qa=qa.basePlotModule.name,fa[qa]||(fa[qa]=[]),fa[qa].push(ma)),Q.data[ja[ba]]=L.extendTrace(Q.data[ja[ba]],U[ba]))}ja=C.expandObjectPaths(C.extendDeepNoArrays({},S));ba=/^[xy]axis[0-9]*$/;for(var ka in ja)ba.test(ka)&&delete ja[ka].range;L.extendLayout(Q.layout,ja);delete Q.calcdata;
L.supplyDefaults(Q);L.doCalcdata(Q);if(ka=C.expandObjectPaths(S)){ja=Q._fullLayout._plots;for(var oa in ja){ba=ja[oa];ma=ba.xaxis;qa=ba.yaxis;var na=ma.range.slice(),la=qa.range.slice(),ia=null,sa=null,ta=null,Aa=null;Array.isArray(ka[ma._name+".range"])?ia=ka[ma._name+".range"].slice():Array.isArray((ka[ma._name]||{}).range)&&(ia=ka[ma._name].range.slice());Array.isArray(ka[qa._name+".range"])?sa=ka[qa._name+".range"].slice():Array.isArray((ka[qa._name]||{}).range)&&(sa=ka[qa._name].range.slice());
na&&ia&&(ma.r2l(na[0])!==ma.r2l(ia[0])||ma.r2l(na[1])!==ma.r2l(ia[1]))&&(ta={xr0:na,xr1:ia});la&&sa&&(qa.r2l(la[0])!==qa.r2l(sa[0])||qa.r2l(la[1])!==qa.r2l(sa[1]))&&(Aa={yr0:la,yr1:sa});(ta||Aa)&&ha.push(C.extendFlat({plotinfo:ba},ta,Aa))}}return Promise.resolve()};Z.runFn=function(ja){var ba=Q._fullLayout._basePlotModules;var ma=ha.length,qa;if(S)for(qa=0;qa<ba.length;qa++)ba[qa].transitionAxes&&ba[qa].transitionAxes(Q,ha,aa,ja);ma?(ba=C.extendFlat({},aa),ba.duration=0,delete fa.cartesian):ba=aa;
for(var ka in fa)ma=fa[ka],Q._fullData[ma[0]]._module.basePlotModule.plot(Q,ma,ba,ja)};return n(Q,aa,Z)};L.transitionFromReact=function(Q,U,S,X){var Z=Q._fullLayout,aa=Z.transition,fa={},ha=[];fa.prepareFn=function(){var ja=Z._plots;fa.redraw=!1;"some"===U.anim&&(fa.redraw=!0);"some"===S.anim&&(fa.redraw=!0);for(var ba in ja){var ma=ja[ba],qa=ma.xaxis,ka=ma.yaxis,oa=X[qa._name].range.slice(),na=X[ka._name].range.slice(),la=qa.range.slice(),ia=ka.range.slice();qa.setScale();ka.setScale();var sa=null,
ta=null;if(qa.r2l(oa[0])!==qa.r2l(la[0])||qa.r2l(oa[1])!==qa.r2l(la[1]))sa={xr0:oa,xr1:la};if(ka.r2l(na[0])!==ka.r2l(ia[0])||ka.r2l(na[1])!==ka.r2l(ia[1]))ta={yr0:na,yr1:ia};(sa||ta)&&ha.push(C.extendFlat({plotinfo:ma},sa,ta))}return Promise.resolve()};fa.runFn=function(ja){function ba(){for(var ta=0;ta<ka.length;ta++)ka[ta].transitionAxes&&ka[ta].transitionAxes(Q,ha,oa,ja)}function ma(){for(var ta=0;ta<ka.length;ta++)ka[ta].plot(Q,la,na,ja)}for(var qa=Q._fullData,ka=Q._fullLayout._basePlotModules,
oa,na,la,ia=[],sa=0;sa<qa.length;sa++)ia.push(sa);ha.length&&U.anim?"traces first"===aa.ordering?(oa=C.extendFlat({},aa,{duration:0}),la=ia,na=aa,setTimeout(ba,aa.duration),ma()):(oa=aa,la=null,na=C.extendFlat({},aa,{duration:0}),setTimeout(ma,oa.duration),ba()):ha.length?(oa=aa,ba()):U.anim&&(la=ia,na=aa,ma())};return n(Q,aa,fa)};L.doCalcdata=function(Q,U){function S(la){ka=aa[la];ha=ka._module;if(!0===ka.visible&&ka.transforms)for(ha&&ha.calc&&(la=ha.calc(Q,ka),la[0]&&la[0].t&&la[0].t._scene&&delete la[0].t._scene.dirty),
ba=0;ba<ka.transforms.length;ba++)la=ka.transforms[ba],(ha=H[la.type])&&ha.calcTransform&&(na=ka._hasCalcTransform=!0,ha.calcTransform(Q,ka,la))}function X(la,ia){ka=aa[la];ha=ka._module;if(!!ha.isContainer===ia){ia=[];if(!0===ka.visible&&0!==ka._length){delete ka._indexToPoints;var sa=ka.transforms||[];for(ba=sa.length-1;0<=ba;ba--)if(sa[ba].enabled){ka._indexToPoints=sa[ba]._indexToPoints;break}ha&&ha.calc&&(ia=ha.calc(Q,ka))}Array.isArray(ia)&&ia[0]||(ia=[{x:y,y:y}]);ia[0].t||(ia[0].t={});ia[0].trace=
ka;ma[la]=ia}}var Z=D.list(Q),aa=Q._fullData,fa=Q._fullLayout,ha,ja,ba,ma=Array(aa.length),qa=(Q.calcdata||[]).slice();Q.calcdata=ma;fa._numBoxes=0;fa._numViolins=0;fa._violinScaleGroupStats={};Q._hmpixcount=0;Q._hmlumcount=0;fa._piecolormap={};fa._sunburstcolormap={};fa._treemapcolormap={};fa._funnelareacolormap={};for(ja=0;ja<aa.length;ja++)Array.isArray(U)&&-1===U.indexOf(ja)&&(ma[ja]=qa[ja]);for(ja=0;ja<aa.length;ja++){var ka=aa[ja];ka._arrayAttrs=v.findArrayAttributes(ka);ka._extremes={}}U=fa._subplots.polar||
[];for(ja=0;ja<U.length;ja++)Z.push(fa[U[ja]].radialaxis,fa[U[ja]].angularaxis);for(var oa in fa._colorAxes)ja=fa[oa],!1!==ja.cauto&&(delete ja.cmin,delete ja.cmax);var na=!1;c(Z,aa,fa);for(ja=0;ja<aa.length;ja++)X(ja,!0);for(ja=0;ja<aa.length;ja++)S(ja);na&&c(Z,aa,fa);for(ja=0;ja<aa.length;ja++)X(ja,!0);for(ja=0;ja<aa.length;ja++)X(ja,!1);d(Q);Z=p(Z,Q);if(Z.length){fa._numBoxes=0;for(ja=fa._numViolins=0;ja<Z.length;ja++)X(Z[ja],!0);for(ja=0;ja<Z.length;ja++)X(Z[ja],!1);d(Q)}u.getComponentMethod("fx",
"calc")(Q);u.getComponentMethod("errorbars","calc")(Q)};var T=/(total|sum|min|max|mean|median) (ascending|descending)/;L.rehover=function(Q){Q._fullLayout._rehover&&Q._fullLayout._rehover()};L.redrag=function(Q){Q._fullLayout._redrag&&Q._fullLayout._redrag()};L.generalUpdatePerTraceModule=function(Q,U,S,X){var Z=U.traceHash,aa={},fa;for(fa=0;fa<S.length;fa++){var ha=S[fa],ja=ha[0].trace;ja.visible&&(aa[ja.type]=aa[ja.type]||[],aa[ja.type].push(ha))}for(var ba in Z)aa[ba]||(S=Z[ba][0],S[0].trace.visible=
!1,aa[ba]=[S]);for(var ma in aa)Z=aa[ma],Z[0][0].trace._module.plot(Q,U,C.filterVisible(Z),X);U.traceHash=aa};L.plotBasePlot=function(Q,U,S,X,Z){Q=u.getModule(Q);S=F(U.calcdata,Q)[0];Q.plot(U,S,X,Z)};L.cleanBasePlot=function(Q,U,S,X,Z){U=Z._has&&Z._has(Q);S=S._has&&S._has(Q);U&&!S&&Z["_"+Q+"layer"].selectAll("g.trace").remove()}},{"../components/color":643,"../constants/numerical":753,"../lib":778,"../plot_api/plot_schema":816,"../plot_api/plot_template":817,"../plots/get_data":865,"../registry":911,
"./animation_attributes":822,"./attributes":824,"./cartesian/axis_ids":831,"./cartesian/handle_outline":838,"./command":854,"./font_attributes":856,"./frame_attributes":857,"./layout_attributes":882,d3:169,"d3-time-format":166,"fast-isnumeric":241}],892:[function(b,K,G){K.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:"draglayer plotbg backplot angular-grid radial-grid frontplot angular-line radial-line angular-axis radial-axis".split(" "),
radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},{}],893:[function(b,K,G){function q(f,k,r,u){var v=u[0];u=u[1];var x=h(Math.sin(k)-Math.sin(f));f=h(Math.cos(k)-Math.cos(f));r=Math.tan(r);var C=h(1/r),z=x/f;k=u-z*v;C?x&&f?(x=k/(r-z),v=r*x):f?(x=u*C,v=u):(x=v,v*=r):x&&f?(x=0,v=k):f?(x=0,v=u):x=v=NaN;return[x,v]}function m(f,k,r,u){function v(A,t,B){return q(A,t,B,[f*Math.cos(A),f*Math.sin(A)])}var x=u.length,C=[];var z=n(u,function(A){return p(A,
[k,r])?d(A,k):Infinity});var y=v(u[z],u[g.mod(z-1,x)],k);C.push(y);for(y=0;y<x;z++,y++){var D=u[g.mod(z,x)];if(!p(D,[k,r]))break;C.push([f*Math.cos(D),f*Math.sin(D)])}z=n(u,function(A){return p(A,[k,r])?d(A,r):Infinity});u=v(u[z],u[g.mod(z+1,x)],r);C.push(u);C.push([0,0]);C.push(C[0].slice());return C}function l(f,k,r,u){if(g.isFullCircle([k,r])){k=u.length;r=Array(k+1);var v;for(v=0;v<k;v++){var x=u[v];r[v]=[f*Math.cos(x),f*Math.sin(x)]}r[v]=r[0].slice();f=r}else f=m(f,k,r,u);return f}function h(f){return 1E-10<
Math.abs(f)?f:0}function a(f,k,r){k=k||0;r=r||0;for(var u=f.length,v=Array(u),x=0;x<u;x++){var C=f[x];v[x]=[k+C[0],r-C[1]]}return v}var g=b("../../lib"),e=b("../../lib/polygon").tester,n=g.findIndexOfMin,p=g.isAngleInsideSector,c=g.angleDelta,d=g.angleDist;K.exports={isPtInsidePolygon:function(f,k,r,u,v){if(!p(k,u))return!1;if(r[0]<r[1]){var x=r[0];r=r[1]}else x=r[1],r=r[0];x=e(l(x,u[0],u[1],v));u=e(l(r,u[0],u[1],v));f=[f*Math.cos(k),f*Math.sin(k)];return u.contains(f)&&!x.contains(f)},findPolygonOffset:function(f,
k,r,u){var v=Infinity,x=Infinity;f=l(f,k,r,u);for(k=0;k<f.length;k++)r=f[k],v=Math.min(v,r[0]),x=Math.min(x,-r[1]);return[v,x]},findEnclosingVertexAngles:function(f,k){var r=n(k,function(v){v=c(v,f);return 0<v?v:Infinity}),u=g.mod(r+1,k.length);return[k[r],k[u]]},findIntersectionXY:q,findXYatLength:function(f,k,r,u){var v=-k*r,x=k*k+1,C=2*(k*v-r);r=Math.sqrt(C*C-4*x*(v*v+r*r-f*f));f=(-C+r)/(2*x);x=(-C-r)/(2*x);return[[f,k*f+v+u],[x,k*x+v+u]]},clampTiny:h,pathPolygon:function(f,k,r,u,v,x){f=l(f,k,
r,u);return"M"+a(f,v,x).join("L")},pathPolygonAnnulus:function(f,k,r,u,v,x,C){if(f<k){var z=f;f=k}else z=k;z=a(l(z,r,u,v),x,C);return"M"+a(l(f,r,u,v),x,C).reverse().join("L")+"M"+z.join("L")}}},{"../../lib":778,"../../lib/polygon":790}],894:[function(b,K,G){var q=b("../get_data").getSubplotCalcData,m=b("../../lib").counterRegex,l=b("./polar"),h=b("./constants");G=h.attr;var a=h.name;m=m(a);h={};h[G]={valType:"subplotid",dflt:a,editType:"calc"};K.exports={attr:G,name:a,idRoot:a,idRegex:m,attrRegex:m,
attributes:h,layoutAttributes:b("./layout_attributes"),supplyLayoutDefaults:b("./layout_defaults"),plot:function(g){for(var e=g._fullLayout,n=g.calcdata,p=e._subplots[a],c=0;c<p.length;c++){var d=p[c],f=q(n,a,d),k=e[d]._subplot;k||(k=l(g,d),e[d]._subplot=k);k.plot(f,e,g._promises)}},clean:function(g,e,n,p){g=p._subplots[a]||[];n=p._has&&p._has("gl");var c=e._has&&e._has("gl");n=n&&!c;for(c=0;c<g.length;c++){var d=g[c],f=p[d]._subplot;if(!e[d]&&f){f.framework.remove();f.layers["radial-axis-title"].remove();
for(var k in f.clipPaths)f.clipPaths[k].remove()}n&&f._scene&&(f._scene.destroy(),f._scene=null)}},toSVG:b("../cartesian").toSVG}},{"../../lib":778,"../cartesian":841,"../get_data":865,"./constants":892,"./layout_attributes":895,"./layout_defaults":896,"./polar":903}],895:[function(b,K,G){G=b("../../components/color/attributes");var q=b("../cartesian/layout_attributes"),m=b("../domain").attributes,l=b("../../lib").extendFlat,h=b("../../plot_api/edit_types").overrideAll;b=h({color:q.color,showline:l({},
q.showline,{dflt:!0}),linecolor:q.linecolor,linewidth:q.linewidth,showgrid:l({},q.showgrid,{dflt:!0}),gridcolor:q.gridcolor,gridwidth:q.gridwidth},"plot","from-root");h=h({tickmode:q.tickmode,nticks:q.nticks,tick0:q.tick0,dtick:q.dtick,tickvals:q.tickvals,ticktext:q.ticktext,ticks:q.ticks,ticklen:q.ticklen,tickwidth:q.tickwidth,tickcolor:q.tickcolor,showticklabels:q.showticklabels,showtickprefix:q.showtickprefix,tickprefix:q.tickprefix,showticksuffix:q.showticksuffix,ticksuffix:q.ticksuffix,showexponent:q.showexponent,
exponentformat:q.exponentformat,minexponent:q.minexponent,separatethousands:q.separatethousands,tickfont:q.tickfont,tickangle:q.tickangle,tickformat:q.tickformat,tickformatstops:q.tickformatstops,layer:q.layer},"plot","from-root");var a={visible:l({},q.visible,{dflt:!0}),type:l({},q.type,{values:["-","linear","log","date","category"]}),autotypenumbers:q.autotypenumbers,autorange:l({},q.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",
editType:"calc"},range:l({},q.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:q.categoryorder,categoryarray:q.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:l({},q.title.text,{editType:"plot",dflt:""}),font:l({},q.title.font,{editType:"plot"}),editType:"plot"},
hoverformat:q.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:q._deprecated.title,titlefont:q._deprecated.titlefont}};l(a,b,h);q={visible:l({},q.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:q.autotypenumbers,categoryorder:q.categoryorder,categoryarray:q.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",
editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:q.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};l(q,b,h);K.exports={domain:m({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,
editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:G.background},radialaxis:a,angularaxis:q,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},{"../../components/color/attributes":642,"../../lib":778,"../../plot_api/edit_types":810,"../cartesian/layout_attributes":842,"../domain":855}],896:[function(b,K,G){function q(C,z,y,D){function A(U,S){return y(I+"."+U,S)}var t=y("bgcolor");D.bgColor=
h.combine(t,D.paper_bgcolor);t=y("sector");y("hole");for(var B=e(D.fullData,v.name,D.id),F=D.layoutOut,I,J=0;J<x.length;J++){I=x[J];l.isPlainObject(C[I])||(C[I]={});var L=C[I],H=a.newContainer(z,I);H._id=H._name=I;H._attr=D.id+"."+I;H._traceIndices=B.map(function(U){return U._expandedIndex});var P=v.axisName2dataArray[I],M=m(L,H,A,B,P,D);d(L,H,A,{axData:B,dataAttr:P});P=A("visible");u(H,z,F);A("uirevision",z.uirevision);if(P){var N=A("color");var T=N===L.color?N:D.font.color}H._m=1;switch(I){case "radialaxis":var Q=
A("autorange",!H.isValidRange(L.range));L.autorange=Q;!Q||"linear"!==M&&"-"!==M||A("rangemode");"reversed"===Q&&(H._m=-1);A("range");H.cleanRange("range",{dfltRange:[0,1]});P&&(A("side"),A("angle",t[0]),A("title.text"),l.coerceFont(A,"title.font",{family:D.font.family,size:Math.round(1.2*D.font.size),color:T}));break;case "angularaxis":if("date"===M){l.log("Polar plots do not support date angular axes yet.");for(M=0;M<B.length;M++)B[M].visible=!1;M=L.type=H.type="linear"}"linear"===M?A("thetaunit"):
A("period");Q=A("direction");A("rotation",{counterclockwise:0,clockwise:90}[Q])}P&&(n(L,H,A,H.type),c(L,H,A,H.type,{tickSuffixDflt:"degrees"===H.thetaunit?"\u00b0":void 0}),p(L,H,A,{outerTicks:!0}),A("showticklabels")&&(l.coerceFont(A,"tickfont",{family:D.font.family,size:D.font.size,color:T}),A("tickangle"),A("tickformat")),f(L,H,A,{dfltColor:N,bgColor:D.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:r[I]}),A("layer"));"category"!==M&&A("hoverformat");H._input=L}"category"===z.angularaxis.type&&
y("gridshape")}function m(C,z,y,D,A,t){t=y("autotypenumbers",t.autotypenumbersDflt);if("-"===y("type")){for(y=0;y<D.length;y++)if(D[y].visible){var B=D[y];break}B&&B[A]&&(z.type=k(B[A],"gregorian",{noMultiCategory:!0,autotypenumbers:t}));"-"===z.type?z.type="linear":C.type=z.type}return z.type}var l=b("../../lib"),h=b("../../components/color"),a=b("../../plot_api/plot_template"),g=b("../subplot_defaults"),e=b("../get_data").getSubplotData,n=b("../cartesian/tick_value_defaults"),p=b("../cartesian/tick_mark_defaults"),
c=b("../cartesian/tick_label_defaults"),d=b("../cartesian/category_order_defaults"),f=b("../cartesian/line_grid_defaults"),k=b("../cartesian/axis_autotype"),r=b("./layout_attributes"),u=b("./set_convert"),v=b("./constants"),x=v.axisNames;K.exports=function(C,z,y){g(C,z,y,{type:v.name,attributes:r,handleDefaults:q,font:z.font,autotypenumbersDflt:z.autotypenumbers,paper_bgcolor:z.paper_bgcolor,fullData:y,layoutOut:z})}},{"../../components/color":643,"../../lib":778,"../../plot_api/plot_template":817,
"../cartesian/axis_autotype":829,"../cartesian/category_order_defaults":832,"../cartesian/line_grid_defaults":844,"../cartesian/tick_label_defaults":849,"../cartesian/tick_mark_defaults":850,"../cartesian/tick_value_defaults":851,"../get_data":865,"../subplot_defaults":905,"./constants":892,"./layout_attributes":895,"./set_convert":904}],897:[function(b,K,G){G=b("../../../traces/scatter/attributes");var q=G.marker;b=b("../../../lib/extend").extendFlat;K.exports={r:b({},G.r,{}),t:b({},G.t,{}),marker:{color:b({},
q.color,{}),size:b({},q.size,{}),symbol:b({},q.symbol,{}),opacity:b({},q.opacity,{}),editType:"calc"}}},{"../../../lib/extend":768,"../../../traces/scatter/attributes":1187}],898:[function(b,K,G){function q(l,h){return m({},h,{showline:{valType:"boolean"},showticklabels:{valType:"boolean"},tickorientation:{valType:"enumerated",values:["horizontal","vertical"]},ticklen:{valType:"number",min:0},tickcolor:{valType:"color"},ticksuffix:{valType:"string"},endpadding:{valType:"number",description:"Legacy polar charts are deprecated! Please switch to *polar* subplots."},
visible:{valType:"boolean"}})}G=b("../../cartesian/layout_attributes");var m=b("../../../lib/extend").extendFlat;b=b("../../../plot_api/edit_types").overrideAll;G=m({},G.domain,{});K.exports=b({radialaxis:q("radial",{range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},domain:G,orientation:{valType:"number"}}),angularaxis:q("angular",{range:{valType:"info_array",items:[{valType:"number",dflt:0},{valType:"number",dflt:360}]},domain:G}),layout:{direction:{valType:"enumerated",
values:["clockwise","counterclockwise"]},orientation:{valType:"angle"}}},"plot","nested")},{"../../../lib/extend":768,"../../../plot_api/edit_types":810,"../../cartesian/layout_attributes":842}],899:[function(b,K,G){(K.exports=b("./micropolar")).manager=b("./micropolar_manager")},{"./micropolar":900,"./micropolar_manager":901}],900:[function(b,K,G){var q=b("d3"),m=b("../../../lib").extendDeepAll,l=b("../../../constants/alignment").MID_SHIFT,h=K.exports={version:"0.2.2"};h.Axis=function(){function a(u){c=
u||c;u=g.data;var v=g.layout;if("string"==typeof c||c.nodeName)c=q.select(c);c.datum(u).each(function(x,C){x=x.slice();n={data:h.util.cloneJson(x),layout:h.util.cloneJson(v)};var z=0;x.forEach(function(ka,oa){ka.color||(ka.color=v.defaultColorRange[z],z=(z+1)%v.defaultColorRange.length);ka.strokeColor||(ka.strokeColor="LinePlot"===ka.geometry?ka.color:q.rgb(ka.color).darker().toString());n.data[oa].color=ka.color;n.data[oa].strokeColor=ka.strokeColor;n.data[oa].strokeDash=ka.strokeDash;n.data[oa].strokeSize=
ka.strokeSize});x=x.filter(function(ka,oa){ka=ka.visible;return"undefined"===typeof ka||!0===ka});var y=!1;C=x.map(function(ka,oa){y=y||"undefined"!==typeof ka.groupId;return ka});if(y){var D=[];x=q.nest().key(function(ka,oa){return"undefined"!=typeof ka.groupId?ka.groupId:"unstacked"}).entries(C).map(function(ka,oa){if("unstacked"!==ka.key){var na=ka.values[0].r.map(function(la,ia){return 0});ka.values.forEach(function(la,ia,sa){la.yStack=[na];D.push(na);na=h.util.sumArrays(la.r,na)})}return ka.values});
x=q.merge(x)}x.forEach(function(ka,oa){ka.t=Array.isArray(ka.t[0])?ka.t:[ka.t];ka.r=Array.isArray(ka.r[0])?ka.r:[ka.r]});var A=Math.min(v.width-v.margin.left-v.margin.right,v.height-v.margin.top-v.margin.bottom)/2;A=Math.max(10,A);var t=[v.margin.left+A,v.margin.top+A];C=y?[0,q.max(h.util.sumArrays(h.util.arrayLast(x).r[0],h.util.arrayLast(D)))]:q.extent(h.util.flattenArray(x.map(function(ka,oa){return ka.r})));v.radialAxis.domain!=h.DATAEXTENT&&(C[0]=0);f=q.scale.linear().domain(v.radialAxis.domain!=
h.DATAEXTENT&&v.radialAxis.domain?v.radialAxis.domain:C).range([0,A]);n.layout.radialAxis.domain=f.domain();var B=h.util.flattenArray(x.map(function(ka,oa){return ka.t})),F="string"===typeof B[0];if(F){B=h.util.deduplicate(B);var I=B.slice();B=q.range(B.length);x=x.map(function(ka,oa){ka.t=[B];y&&(ka.yStack=ka.yStack);return ka})}var J=x.filter(function(ka,oa){return"LinePlot"===ka.geometry||"DotPlot"===ka.geometry}).length===x.length;C=null===v.needsEndSpacing?F||!J:v.needsEndSpacing;var L=v.angularAxis.domain&&
v.angularAxis.domain!=h.DATAEXTENT&&!F&&0<=v.angularAxis.domain[0]?v.angularAxis.domain:q.extent(B),H=Math.abs(B[1]-B[0]);J&&!F&&(H=0);L=L.slice();C&&F&&(L[1]+=H);J=v.angularAxis.ticksCount||4;8<J&&(J=J/(J/8)+J%8);v.angularAxis.ticksStep&&(J=(L[1]-L[0])/J);J=v.angularAxis.ticksStep||(L[1]-L[0])/(J*(v.minorTicks+1));I&&(J=Math.max(Math.round(J),1));L[2]||(L[2]=J);J=q.range.apply(this,L);J=J.map(function(ka,oa){return parseFloat(ka.toPrecision(12))});k=q.scale.linear().domain(L.slice(0,2)).range("clockwise"===
v.direction?[0,360]:[360,0]);n.layout.angularAxis.domain=k.domain();n.layout.angularAxis.endPadding=C?H:0;p=q.select(this).select("svg.chart-root");if("undefined"===typeof p||p.empty())C=(new DOMParser).parseFromString("<svg xmlns='http://www.w3.org/2000/svg' class='chart-root'>' + '<g class='outer-group'>' + '<g class='chart-group'>' + '<circle class='background-circle'></circle>' + '<g class='geometry-group'></g>' + '<g class='radial axis-group'>' + '<circle class='outside-circle'></circle>' + '</g>' + '<g class='angular axis-group'></g>' + '<g class='guides-group'><line></line><circle r='0'></circle></g>' + '</g>' + '<g class='legend-group'></g>' + '<g class='tooltips-group'></g>' + '<g class='title-group'><text></text></g>' + '</g>' + '</svg>",
"application/xml"),C=this.appendChild(this.ownerDocument.importNode(C.documentElement,!0)),p=q.select(C);p.select(".guides-group").style({"pointer-events":"none"});p.select(".angular.axis-group").style({"pointer-events":"none"});p.select(".radial.axis-group").style({"pointer-events":"none"});C=p.select(".chart-group");L={fill:"none",stroke:v.tickColor};var P={"font-size":v.font.size,"font-family":v.font.family,fill:v.font.color,"text-shadow":["-1px 0px","1px -1px","-1px 1px","1px 1px"].map(function(ka,
oa){return" "+ka+" 0 "+v.font.outlineColor}).join(",")};if(v.showLegend){H=p.select(".legend-group").attr({transform:"translate("+[A,v.margin.top]+")"}).style({display:"block"});var M=x.map(function(ka,oa){oa=h.util.cloneJson(ka);oa.symbol="DotPlot"===ka.geometry?ka.dotType||"circle":"LinePlot"!=ka.geometry?"square":"line";oa.visibleInLegend="undefined"===typeof ka.visibleInLegend||ka.visibleInLegend;oa.color="LinePlot"===ka.geometry?ka.strokeColor:ka.color;return oa});h.Legend().config({data:x.map(function(ka,
oa){return ka.name||"Element"+oa}),legendConfig:m({},h.Legend.defaultConfig().legendConfig,{container:H,elements:M,reverseOrder:v.legend.reverseOrder})})();M=H.node().getBBox();A=Math.min(v.width-M.width-v.margin.left-v.margin.right,v.height-v.margin.top-v.margin.bottom)/2;A=Math.max(10,A);t=[v.margin.left+A,v.margin.top+A];f.range([0,A]);n.layout.radialAxis.domain=f.domain();H.attr("transform","translate("+[t[0]+A,t[1]-A]+")")}else H=p.select(".legend-group").style({display:"none"});p.attr({width:v.width,
height:v.height}).style({opacity:v.opacity});C.attr("transform","translate("+t+")").style({cursor:"crosshair"});var N=[(v.width-(v.margin.left+v.margin.right+2*A+(M?M.width:0)))/2,(v.height-(v.margin.top+v.margin.bottom+2*A))/2];N[0]=Math.max(0,N[0]);N[1]=Math.max(0,N[1]);p.select(".outer-group").attr("transform","translate("+N+")");if(v.title&&v.title.text){M=p.select("g.title-group text").style(P).text(v.title.text);var T=M.node().getBBox();M.attr({x:t[0]-T.width/2,y:t[1]-A-20})}M=p.select(".radial.axis-group");
v.radialAxis.gridLinesVisible&&(T=M.selectAll("circle.grid-circle").data(f.ticks(5)),T.enter().append("circle").attr({"class":"grid-circle"}).style(L),T.attr("r",f),T.exit().remove());M.select("circle.outside-circle").attr({r:A}).style(L);var Q=p.select("circle.background-circle").attr({r:A}).style({fill:v.backgroundColor,stroke:v.stroke});v.radialAxis.visible&&(T=q.svg.axis().scale(f).ticks(5).tickSize(5),M.call(T).attr({transform:"rotate("+v.radialAxis.orientation+")"}),M.selectAll(".domain").style(L),
M.selectAll("g>text").text(function(ka,oa){return this.textContent+v.radialAxis.ticksSuffix}).style(P).style({"text-anchor":"start"}).attr({x:0,y:0,dx:0,dy:0,transform:function(ka,oa){return"horizontal"===v.radialAxis.tickOrientation?"rotate("+-v.radialAxis.orientation+") translate("+[0,P["font-size"]]+")":"translate("+[0,P["font-size"]]+")"}}),M.selectAll("g>line").style({stroke:"black"}));M=p.select(".angular.axis-group").selectAll("g.angular-tick").data(J);J=M.enter().append("g").classed("angular-tick",
!0);M.attr({transform:function(ka,oa){return"rotate("+(k(ka)%360+v.orientation)+")"}}).style({display:v.angularAxis.visible?"block":"none"});M.exit().remove();J.append("line").classed("grid-line",!0).classed("major",function(ka,oa){return 0==oa%(v.minorTicks+1)}).classed("minor",function(ka,oa){return 0!=oa%(v.minorTicks+1)}).style(L);J.selectAll(".minor").style({stroke:v.minorTickColor});M.select("line.grid-line").attr({x1:v.tickLength?A-v.tickLength:0,x2:A}).style({display:v.angularAxis.gridLinesVisible?
"block":"none"});J.append("text").classed("axis-text",!0).style(P);M=M.select("text.axis-text").attr({x:A+v.labelOffset,dy:l+"em",transform:function(ka,oa){ka=k(ka)%360+v.orientation;oa=A+v.labelOffset;var na=v.angularAxis.tickOrientation;return"horizontal"==na?"rotate("+-ka+" "+oa+" 0)":"radial"==na?270>ka&&90<ka?"rotate(180 "+oa+" 0)":null:"rotate("+(180>=ka&&0<ka?-90:90)+" "+oa+" 0)"}}).style({"text-anchor":"middle",display:v.angularAxis.labelsVisible?"block":"none"}).text(function(ka,oa){return 0!=
oa%(v.minorTicks+1)?"":I?I[ka]+v.angularAxis.ticksSuffix:ka+v.angularAxis.ticksSuffix}).style(P);v.angularAxis.rewriteTicks&&M.text(function(ka,oa){return 0!=oa%(v.minorTicks+1)?"":v.angularAxis.rewriteTicks(this.textContent,oa)});M=q.max(C.selectAll(".angular-tick text")[0].map(function(ka,oa){return ka.getCTM().e+ka.getBBox().width}));H.attr({transform:"translate("+[A+M,v.margin.top]+")"});M=0<p.select("g.geometry-group").selectAll("g").size();var U=p.select("g.geometry-group").selectAll("g.geometry").data(x);
U.enter().append("g").attr({"class":function(ka,oa){return"geometry geometry"+oa}});U.exit().remove();if(x[0]||M){var S=[];x.forEach(function(ka,oa){var na={};na.radialScale=f;na.angularScale=k;na.container=U.filter(function(la,ia){return ia==oa});na.geometry=ka.geometry;na.orientation=v.orientation;na.direction=v.direction;na.index=oa;S.push({data:ka,geometryConfig:na})});var X=[];q.nest().key(function(ka,oa){return"undefined"!=typeof ka.data.groupId||"unstacked"}).entries(S).forEach(function(ka,
oa){"unstacked"===ka.key?X=X.concat(ka.values.map(function(na,la){return[na]})):X.push(ka.values)});X.forEach(function(ka,oa){var na=Array.isArray(ka)?ka[0].geometryConfig.geometry:ka.geometryConfig.geometry;ka=ka.map(function(la,ia){return m(h[na].defaultConfig(),la)});h[na]().config(ka)()})}var Z=p.select(".guides-group");x=p.select(".tooltips-group");var aa=h.tooltipPanel().config({container:x,fontSize:8})(),fa=h.tooltipPanel().config({container:x,fontSize:8})(),ha=h.tooltipPanel().config({container:x,
hasTick:!0})(),ja,ba;if(!F){var ma=Z.select("line").attr({x1:0,y1:0,y2:0}).style({stroke:"grey","pointer-events":"none"});C.on("mousemove.angular-guide",function(ka,oa){ka=h.util.getMousePos(Q).angle;ma.attr({x2:-A,transform:"rotate("+ka+")"}).style({opacity:.5});ja=k.invert((ka+180+360-v.orientation)%360);ka=h.util.convertToCartesian(A+12,ka+180);aa.text(h.util.round(ja)).move([ka[0]+t[0],ka[1]+t[1]])}).on("mouseout.angular-guide",function(ka,oa){Z.select("line").style({opacity:0})})}var qa=Z.select("circle").style({stroke:"grey",
fill:"none"});C.on("mousemove.radial-guide",function(ka,oa){ka=h.util.getMousePos(Q).radius;qa.attr({r:ka}).style({opacity:.5});ba=f.invert(h.util.getMousePos(Q).radius);ka=h.util.convertToCartesian(ka,v.radialAxis.orientation);fa.text(h.util.round(ba)).move([ka[0]+t[0],ka[1]+t[1]])}).on("mouseout.radial-guide",function(ka,oa){qa.style({opacity:0});ha.hide();aa.hide();fa.hide()});p.selectAll(".geometry-group .mark").on("mouseover.tooltip",function(ka,oa){var na=q.select(this);oa=this.style.fill;na.attr({"data-opacity":this.style.opacity||
1});if(oa&&"none"!==oa){na.attr({"data-fill":oa});oa=q.hsl(oa).darker().toString();na.style({fill:oa,opacity:1});na=h.util.round(ka[0]);var la=h.util.round(ka[1]);F&&(na=I[ka[0]]);ka="t: "+na+", r: "+la;na=this.getBoundingClientRect();la=p.node().getBoundingClientRect();na=[na.left+na.width/2-N[0]-la.left,na.top+na.height/2-N[1]-la.top];ha.config({color:oa}).text(ka);ha.move(na)}else oa=this.style.stroke||"black",na.attr({"data-stroke":oa}),oa=q.hsl(oa).darker().toString(),na.style({stroke:oa,opacity:1})}).on("mousemove.tooltip",
function(ka,oa){if(0!=q.event.which)return!1;q.select(this).attr("data-fill")&&ha.show()}).on("mouseout.tooltip",function(ka,oa){ha.hide();ka=q.select(this);(oa=ka.attr("data-fill"))?ka.style({fill:oa,opacity:ka.attr("data-opacity")}):ka.style({stroke:ka.attr("data-stroke"),opacity:ka.attr("data-opacity")})})});return r}var g={data:[],layout:{}},e={},n={},p,c,d=q.dispatch("hover"),f,k,r={render:function(u){a(u);return this},config:function(u){if(!arguments.length)return g;var v=h.util.cloneJson(u);
v.data.forEach(function(x,C){g.data[C]||(g.data[C]={});m(g.data[C],h.Axis.defaultConfig().data[0]);m(g.data[C],x)});m(g.layout,h.Axis.defaultConfig().layout);m(g.layout,v.layout);return this},getLiveConfig:function(){return n},getinputConfig:function(){return e},radialScale:function(u){return f},angularScale:function(u){return k},svg:function(){return p}};q.rebind(r,d,"on");return r};h.Axis.defaultConfig=function(a,g){return{data:[{t:[1,2,3,4],r:[10,11,12,13],name:"Line1",geometry:"LinePlot",color:null,
strokeDash:"solid",strokeColor:null,strokeSize:"1",visibleInLegend:!0,opacity:1}],layout:{defaultColorRange:q.scale.category10().range(),title:null,height:450,width:500,margin:{top:40,right:40,bottom:40,left:40},font:{size:12,color:"gray",outlineColor:"white",family:"Tahoma, sans-serif"},direction:"clockwise",orientation:0,labelOffset:10,radialAxis:{domain:null,orientation:-45,ticksSuffix:"",visible:!0,gridLinesVisible:!0,tickOrientation:"horizontal",rewriteTicks:null},angularAxis:{domain:[0,360],
ticksSuffix:"",visible:!0,gridLinesVisible:!0,labelsVisible:!0,tickOrientation:"horizontal",rewriteTicks:null,ticksCount:null,ticksStep:null},minorTicks:0,tickLength:null,tickColor:"silver",minorTickColor:"#eee",backgroundColor:"none",needsEndSpacing:null,showLegend:!0,legend:{reverseOrder:!1},opacity:1}}};h.util={};h.DATAEXTENT="dataExtent";h.AREA="AreaChart";h.LINE="LinePlot";h.DOT="DotPlot";h.BAR="BarChart";h.util._override=function(a,g){for(var e in a)e in g&&(g[e]=a[e])};h.util._extend=function(a,
g){for(var e in a)g[e]=a[e]};h.util._rndSnd=function(){return 2*Math.random()-1+(2*Math.random()-1)+(2*Math.random()-1)};h.util.dataFromEquation2=function(a,g){g=g||6;return q.range(0,360+g,g).map(function(e,n){n=a(e*Math.PI/180);return[e,n]})};h.util.dataFromEquation=function(a,g,e){g=g||6;var n=[],p=[];q.range(0,360+g,g).forEach(function(c,d){d=a(c*Math.PI/180);n.push(c);p.push(d)});g={t:n,r:p};e&&(g.name=e);return g};h.util.ensureArray=function(a,g){if("undefined"===typeof a)return null;var e=
[].concat(a);return q.range(g).map(function(n,p){return e[p]||e[0]})};h.util.fillArrays=function(a,g,e){g.forEach(function(n,p){a[n]=h.util.ensureArray(a[n],e)});return a};h.util.cloneJson=function(a){return JSON.parse(JSON.stringify(a))};h.util.sumArrays=function(a,g){return q.zip(a,g).map(function(e,n){return q.sum(e)})};h.util.arrayLast=function(a){return a[a.length-1]};h.util.arrayEqual=function(a,g){for(var e=Math.max(a.length,g.length,1);0<=e--&&a[e]===g[e];);return-2===e};h.util.flattenArray=
function(a){for(var g=[];!h.util.arrayEqual(g,a);)g=a,a=[].concat.apply([],a);return a};h.util.deduplicate=function(a){return a.filter(function(g,e,n){return n.indexOf(g)==e})};h.util.convertToCartesian=function(a,g){g=g*Math.PI/180;return[a*Math.cos(g),a*Math.sin(g)]};h.util.round=function(a,g){g=Math.pow(10,g||2);return Math.round(a*g)/g};h.util.getMousePos=function(a){a=q.mouse(a.node());var g=a[0],e=a[1],n={};n.x=g;n.y=e;n.pos=a;n.angle=180*(Math.atan2(e,g)+Math.PI)/Math.PI;n.radius=Math.sqrt(g*
g+e*e);return n};h.util.duplicatesCount=function(a){for(var g={},e,n={},p=0,c=a.length;p<c;p++)e=a[p],e in g?(g[e]++,n[e]=g[e]):g[e]=1;return n};h.util.duplicates=function(a){return Object.keys(h.util.duplicatesCount(a))};h.util.translator=function(a,g,e,n){n&&(n=e.slice(),e=g,g=n);var p=g.reduce(function(c,d){if("undefined"!=typeof c)return c[d]},a);"undefined"!==typeof p&&(g.reduce(function(c,d,f){if("undefined"!=typeof c)return f===g.length-1&&delete c[d],c[d]},a),e.reduce(function(c,d,f){"undefined"===
typeof c[d]&&(c[d]={});f===e.length-1&&(c[d]=p);return c[d]},a))};h.PolyChart=function(){function a(){var p=g[0].geometryConfig,c=p.container;"string"==typeof c&&(c=q.select(c));c.datum(g).each(function(d,f){var k=!!d[0].data.yStack,r=d.map(function(t,B){return k?q.zip(t.data.t[0],t.data.r[0],t.data.yStack[0]):q.zip(t.data.t[0],t.data.r[0])}),u=p.angularScale,v=p.radialScale.domain()[0],x={bar:function(t,B,F){F=d[F].data;B=p.radialScale(t[1])-p.radialScale(0);t=p.radialScale(t[2]||0);F=F.barWidth;
q.select(this).attr({"class":"mark bar",d:"M"+[[B+t,-F/2],[B+t,F/2],[t,F/2],[t,-F/2]].join("L")+"Z",transform:function(I,J){return"rotate("+(p.orientation+u(I[0]))+")"}})},dot:function(t,B,F){var I=t[2]?[t[0],t[1]+t[2]]:t;t=q.svg.symbol().size(d[F].data.dotSize).type(d[F].data.dotType)(t,B);q.select(this).attr({"class":"mark dot",d:t,transform:function(J,L){J=p.radialScale(I[1]);L=(p.angularScale(I[0])+p.orientation)*Math.PI/180;return"translate("+[J*Math.cos(L),J*Math.sin(L)]+")"}})}},C=q.svg.line.radial().interpolate(d[0].data.lineInterpolation).radius(function(t){return p.radialScale(t[1])}).angle(function(t){return p.angularScale(t[0])*
Math.PI/180});x.line=function(t,B,F){var I=t[2]?r[F].map(function(L,H){return[L[0],L[1]+L[2]]}):r[F];q.select(this).each(x.dot).style({opacity:function(L,H){return+d[F].data.dotVisible},fill:D.stroke(t,B,F)}).attr({"class":"mark dot"});if(!(0<B)){var J=q.select(this.parentNode).selectAll("path.line").data([0]);J.enter().insert("path");J.attr({"class":"line",d:C(I),transform:function(L,H){return"rotate("+(p.orientation+90)+")"},"pointer-events":"none"}).style({fill:function(L,H){return D.fill(t,B,
F)},"fill-opacity":0,stroke:function(L,H){return D.stroke(t,B,F)},"stroke-width":function(L,H){return D["stroke-width"](t,B,F)},"stroke-dasharray":function(L,H){return D["stroke-dasharray"](t,B,F)},opacity:function(L,H){return D.opacity(t,B,F)},display:function(L,H){return D.display(t,B,F)}})}};f=p.angularScale.range();var z=Math.abs(f[1]-f[0])/r[0].length*Math.PI/180,y=q.svg.arc().startAngle(function(t){return-z/2}).endAngle(function(t){return z/2}).innerRadius(function(t){return p.radialScale(v+
(t[2]||0))}).outerRadius(function(t){return p.radialScale(v+(t[2]||0))+p.radialScale(t[1])});x.arc=function(t,B,F){q.select(this).attr({"class":"mark arc",d:y,transform:function(I,J){return"rotate("+(p.orientation+u(I[0])+90)+")"}})};var D={fill:function(t,B,F){return d[F].data.color},stroke:function(t,B,F){return d[F].data.strokeColor},"stroke-width":function(t,B,F){return d[F].data.strokeSize+"px"},"stroke-dasharray":function(t,B,F){return n[d[F].data.strokeDash]},opacity:function(t,B,F){return d[F].data.opacity},
display:function(t,B,F){return"undefined"===typeof d[F].data.visible||d[F].data.visible?"block":"none"}};f=q.select(this).selectAll("g.layer").data(r);f.enter().append("g").attr({"class":"layer"});var A=f.selectAll("path.mark").data(function(t,B){return t});A.enter().append("path").attr({"class":"mark"});A.style(D).each(x[p.geometryType]);A.exit().remove();f.exit().remove()})}var g=[h.PolyChart.defaultConfig()],e=q.dispatch("hover"),n={solid:"none",dash:[5,2],dot:[2,5]};a.config=function(p){if(!arguments.length)return g;
p.forEach(function(c,d){g[d]||(g[d]={});m(g[d],h.PolyChart.defaultConfig());m(g[d],c)});return this};a.getColorScale=function(){};q.rebind(a,e,"on");return a};h.PolyChart.defaultConfig=function(){return{data:{name:"geom1",t:[[1,2,3,4]],r:[[1,2,3,4]],dotType:"circle",dotSize:64,dotVisible:!1,barWidth:20,color:"#ffa500",strokeSize:1,strokeColor:"silver",strokeDash:"solid",opacity:1,index:0,visible:!0,visibleInLegend:!0},geometryConfig:{geometry:"LinePlot",geometryType:"arc",direction:"clockwise",orientation:0,
container:"body",radialScale:null,angularScale:null,colorScale:q.scale.category20()}}};h.BarChart=function(){return h.PolyChart()};h.BarChart.defaultConfig=function(){return{geometryConfig:{geometryType:"bar"}}};h.AreaChart=function(){return h.PolyChart()};h.AreaChart.defaultConfig=function(){return{geometryConfig:{geometryType:"arc"}}};h.DotPlot=function(){return h.PolyChart()};h.DotPlot.defaultConfig=function(){return{geometryConfig:{geometryType:"dot",dotType:"circle"}}};h.LinePlot=function(){return h.PolyChart()};
h.LinePlot.defaultConfig=function(){return{geometryConfig:{geometryType:"line"}}};h.Legend=function(){function a(){var n=g.legendConfig,p=g.data.map(function(C,z){return[].concat(C).map(function(y,D){var A=m({},n.elements[z]);A.name=y;A.color=[].concat(n.elements[z].color)[D];return A})}),c=q.merge(p);c=c.filter(function(C,z){return n.elements[z]&&(n.elements[z].visibleInLegend||"undefined"===typeof n.elements[z].visibleInLegend)});n.reverseOrder&&(c=c.reverse());var d=n.container;if("string"==typeof d||
d.nodeName)d=q.select(d);var f=c.map(function(C,z){return C.color}),k=n.fontSize,r=(p=null==n.isContinuous?"number"===typeof c[0]:n.isContinuous)?n.height:k*c.length;d=d.classed("legend-group",!0).selectAll("svg").data([0]);var u=d.enter().append("svg").attr({width:300,height:r+k,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"});u.append("g").classed("legend-axis",!0);u.append("g").classed("legend-marks",!0);u=q.range(c.length);var v=q.scale[p?"linear":
"ordinal"]().domain(u).range(f),x=q.scale[p?"linear":"ordinal"]().domain(u)[p?"range":"rangePoints"]([0,r]);p?(r=d.select(".legend-marks").append("defs").append("linearGradient").attr({id:"grad1",x1:"0%",y1:"0%",x2:"0%",y2:"100%"}).selectAll("stop").data(f),r.enter().append("stop"),r.attr({offset:function(C,z){return z/(f.length-1)*100+"%"}}).style({"stop-color":function(C,z){return C}}),d.append("rect").classed("legend-mark",!0).attr({height:n.height,width:n.colorBandWidth,fill:"url(#grad1)"})):
(r=d.select(".legend-marks").selectAll("path.legend-mark").data(c),r.enter().append("path").classed("legend-mark",!0),r.attr({transform:function(C,z){return"translate("+[k/2,x(z)+k/2]+")"},d:function(C,z){C=C.symbol;z=3*k;C="line"===C?"M"+[[-k/2,-k/12],[k/2,-k/12],[k/2,k/12],[-k/2,k/12]]+"Z":-1!=q.svg.symbolTypes.indexOf(C)?q.svg.symbol().type(C).size(z)():q.svg.symbol().type("square").size(z)();return C},fill:function(C,z){return v(z)}}),r.exit().remove());r=q.svg.axis().scale(x).orient("right");
d=d.select("g.legend-axis").attr({transform:"translate("+[p?n.colorBandWidth:k,k/2]+")"}).call(r);d.selectAll(".domain").style({fill:"none",stroke:"none"});d.selectAll("line").style({fill:"none",stroke:p?n.textColor:"none"});d.selectAll("text").style({fill:n.textColor,"font-size":n.fontSize}).text(function(C,z){return c[z].name});return a}var g=h.Legend.defaultConfig(),e=q.dispatch("hover");a.config=function(n){if(!arguments.length)return g;m(g,n);return this};q.rebind(a,e,"on");return a};h.Legend.defaultConfig=
function(a,g){return{data:["a","b","c"],legendConfig:{elements:[{symbol:"line",color:"red"},{symbol:"square",color:"yellow"},{symbol:"diamond",color:"limegreen"}],height:150,colorBandWidth:30,fontSize:12,container:"body",isContinuous:null,textColor:"grey",reverseOrder:!1}}};h.tooltipPanel=function(){var a,g,e,n={container:null,hasTick:!1,fontSize:12,color:"white",padding:5},p="tooltip-"+h.tooltipPanel.uid++,c=function(){a=n.container.selectAll("g."+p).data([0]);var d=a.enter().append("g").classed(p,
!0).style({"pointer-events":"none",display:"none"});e=d.append("path").style({fill:"white","fill-opacity":.9}).attr({d:"M0 0"});g=d.append("text").attr({dx:n.padding+10,dy:.3*+n.fontSize});return c};c.text=function(d){var f=q.hsl(n.color).l,k=.5<=f?"#aaa":"white";d=d||"";g.style({fill:.5<=f?"black":"white","font-size":n.fontSize+"px"}).text(d);f=n.padding;d=g.node().getBBox();k={fill:n.color,stroke:k,"stroke-width":"2px"};var r=d.width+2*f+10;d=d.height+2*f;e.attr({d:"M"+[[10,-d/2],[10,-d/4],[n.hasTick?
0:10,0],[10,d/4],[10,d/2],[r,d/2],[r,-d/2]].join("L")+"Z"}).style(k);a.attr({transform:"translate("+[10,-d/2+2*f]+")"});a.style({display:"block"});return c};c.move=function(d){if(a)return a.attr({transform:"translate("+[d[0],d[1]]+")"}).style({display:"block"}),c};c.hide=function(){if(a)return a.style({display:"none"}),c};c.show=function(){if(a)return a.style({display:"block"}),c};c.config=function(d){m(n,d);return c};return c};h.tooltipPanel.uid=1;h.adapter={};h.adapter.plotly=function(){return{convert:function(a,
g){var e={};if(a.data&&(e.data=a.data.map(function(f,k){f=m({},f);[[f,["marker","color"],["color"]],[f,["marker","opacity"],["opacity"]],[f,["marker","line","color"],["strokeColor"]],[f,["marker","line","dash"],["strokeDash"]],[f,["marker","line","width"],["strokeSize"]],[f,["marker","symbol"],["dotType"]],[f,["marker","size"],["dotSize"]],[f,["marker","barWidth"],["barWidth"]],[f,["line","interpolation"],["lineInterpolation"]],[f,["showlegend"],["visibleInLegend"]]].forEach(function(r,u){h.util.translator.apply(null,
r.concat(g))});g||delete f.marker;g&&delete f.groupId;g?("LinePlot"===f.geometry?(f.type="scatter",!0===f.dotVisible?(delete f.dotVisible,f.mode="lines+markers"):f.mode="lines"):"DotPlot"===f.geometry?(f.type="scatter",f.mode="markers"):"AreaChart"===f.geometry?f.type="area":"BarChart"===f.geometry&&(f.type="bar"),delete f.geometry):("scatter"===f.type?"lines"===f.mode?f.geometry="LinePlot":"markers"===f.mode?f.geometry="DotPlot":"lines+markers"===f.mode&&(f.geometry="LinePlot",f.dotVisible=!0):"area"===
f.type?f.geometry="AreaChart":"bar"===f.type&&(f.geometry="BarChart"),delete f.mode,delete f.type);return f}),!g&&a.layout&&"stack"===a.layout.barmode)){var n=h.util.duplicates(e.data.map(function(f,k){return f.geometry}));e.data.forEach(function(f,k){f=n.indexOf(f.geometry);-1!=f&&(e.data[k].groupId=f)})}if(a.layout){a=m({},a.layout);[[a,["plot_bgcolor"],["backgroundColor"]],[a,["showlegend"],["showLegend"]],[a,["radialaxis"],["radialAxis"]],[a,["angularaxis"],["angularAxis"]],[a.angularaxis,["showline"],
["gridLinesVisible"]],[a.angularaxis,["showticklabels"],["labelsVisible"]],[a.angularaxis,["nticks"],["ticksCount"]],[a.angularaxis,["tickorientation"],["tickOrientation"]],[a.angularaxis,["ticksuffix"],["ticksSuffix"]],[a.angularaxis,["range"],["domain"]],[a.angularaxis,["endpadding"],["endPadding"]],[a.radialaxis,["showline"],["gridLinesVisible"]],[a.radialaxis,["tickorientation"],["tickOrientation"]],[a.radialaxis,["ticksuffix"],["ticksSuffix"]],[a.radialaxis,["range"],["domain"]],[a.angularAxis,
["showline"],["gridLinesVisible"]],[a.angularAxis,["showticklabels"],["labelsVisible"]],[a.angularAxis,["nticks"],["ticksCount"]],[a.angularAxis,["tickorientation"],["tickOrientation"]],[a.angularAxis,["ticksuffix"],["ticksSuffix"]],[a.angularAxis,["range"],["domain"]],[a.angularAxis,["endpadding"],["endPadding"]],[a.radialAxis,["showline"],["gridLinesVisible"]],[a.radialAxis,["tickorientation"],["tickOrientation"]],[a.radialAxis,["ticksuffix"],["ticksSuffix"]],[a.radialAxis,["range"],["domain"]],
[a.font,["outlinecolor"],["outlineColor"]],[a.legend,["traceorder"],["reverseOrder"]],[a,["labeloffset"],["labelOffset"]],[a,["defaultcolorrange"],["defaultColorRange"]]].forEach(function(f,k){h.util.translator.apply(null,f.concat(g))});g?("undefined"!==typeof a.tickLength&&(a.angularaxis.ticklen=a.tickLength,delete a.tickLength),a.tickColor&&(a.angularaxis.tickcolor=a.tickColor,delete a.tickColor)):(a.angularAxis&&"undefined"!==typeof a.angularAxis.ticklen&&(a.tickLength=a.angularAxis.ticklen),a.angularAxis&&
"undefined"!==typeof a.angularAxis.tickcolor&&(a.tickColor=a.angularAxis.tickcolor));a.legend&&"boolean"!=typeof a.legend.reverseOrder&&(a.legend.reverseOrder="normal"!=a.legend.reverseOrder);a.legend&&"boolean"==typeof a.legend.traceorder&&(a.legend.traceorder=a.legend.traceorder?"reversed":"normal",delete a.legend.reverseOrder);if(a.margin&&"undefined"!=typeof a.margin.t){var p=["t","r","b","l","pad"],c=["top","right","bottom","left","pad"],d={};q.entries(a.margin).forEach(function(f,k){d[c[p.indexOf(f.key)]]=
f.value});a.margin=d}g&&(delete a.needsEndSpacing,delete a.minorTickColor,delete a.minorTicks,delete a.angularaxis.ticksCount,delete a.angularaxis.ticksCount,delete a.angularaxis.ticksStep,delete a.angularaxis.rewriteTicks,delete a.angularaxis.nticks,delete a.radialaxis.ticksCount,delete a.radialaxis.ticksCount,delete a.radialaxis.ticksStep,delete a.radialaxis.rewriteTicks,delete a.radialaxis.nticks);e.layout=a}return e}}}},{"../../../constants/alignment":745,"../../../lib":778,d3:169}],901:[function(b,
K,G){var q=b("d3");G=b("../../../lib");var m=b("../../../components/color"),l=b("./micropolar"),h=b("./undo_manager"),a=G.extendDeepAll,g=K.exports={};g.framework=function(e){function n(u,v){v&&(k=v);q.select(q.select(k).node().parentNode).selectAll(".svg-container>*:not(.chart-root)").remove();p=p?a(p,u):u;d||(d=l.Axis());f=l.adapter.plotly().convert(p);d.config(f).render(k);e.data=p.data;e.layout=p.layout;g.fillLayout(e);return p}var p,c,d,f,k,r=new h;n.isPolar=!0;n.svg=function(){return d.svg()};
n.getConfig=function(){return p};n.getLiveConfig=function(){return l.adapter.plotly().convert(d.getLiveConfig(),!0)};n.getLiveScales=function(){return{t:d.angularScale(),r:d.radialScale()}};n.setUndoPoint=function(){var u=this,v=l.util.cloneJson(p);(function(x,C){r.add({undo:function(){C&&u(C)},redo:function(){u(x)}})})(v,c);c=l.util.cloneJson(v)};n.undo=function(){r.undo()};n.redo=function(){r.redo()};return n};g.fillLayout=function(e){var n=q.select(e).selectAll(".plot-container"),p=n.selectAll(".svg-container"),
c=e.framework&&e.framework.svg&&e.framework.svg();e._fullLayout=a({width:800,height:600,paper_bgcolor:m.background,_container:n,_paperdiv:p,_paper:c},e.layout)}},{"../../../components/color":643,"../../../lib":778,"./micropolar":900,"./undo_manager":902,d3:169}],902:[function(b,K,G){K.exports=function(){function q(g,e){if(!g)return this;h=!0;g[e]();h=!1;return this}var m=[],l=-1,h=!1,a;return{add:function(g){if(h)return this;m.splice(l+1,m.length-l);m.push(g);l=m.length-1;return this},setCallback:function(g){a=
g},undo:function(){var g=m[l];if(!g)return this;q(g,"undo");--l;a&&a(g.undo);return this},redo:function(){var g=m[l+1];if(!g)return this;q(g,"redo");l+=1;a&&a(g.redo);return this},clear:function(){m=[];l=-1},hasUndo:function(){return-1!==l},hasRedo:function(){return l<m.length-1},getCommands:function(){return m},getPreviousCommand:function(){return m[l-1]},getIndex:function(){return l}}}},{}],903:[function(b,K,G){function q(U,S){this.id=S;this.gd=U;this.radialAxisAngle=this.vangles=this._hasClipOnAxisFalse=
null;this.traceHash={};this.layers={};this.clipPaths={};this.clipIds={};this.viewInitial={};U=U._fullLayout;this.clipIds.forTraces="clip"+U._uid+S+"-for-traces";this.clipPaths.forTraces=U._clips.append("clipPath").attr("id",this.clipIds.forTraces);this.clipPaths.forTraces.append("path");this.framework=U._polarlayer.append("g").attr("class",S);this.angularTickLayout=this.radialTickLayout=null}function m(U){var S=U.ticks+String(U.ticklen)+String(U.showticklabels);"side"in U&&(S+=U.side);return S}function l(U,
S){var X=n.findIndexOfMin(S,function(Z){return n.angleDist(U,Z)});return S[X]}function h(U,S,X){S?(U.attr("display",null),U.attr(X)):U&&U.attr("display","none");return U}var a=b("d3"),g=b("tinycolor2"),e=b("../../registry"),n=b("../../lib"),p=n.strRotate,c=n.strTranslate,d=b("../../components/color"),f=b("../../components/drawing"),k=b("../plots"),r=b("../../plots/cartesian/axes"),u=b("../cartesian/set_convert"),v=b("./set_convert"),x=b("../cartesian/autorange").doAutoRange,C=b("../cartesian/dragbox"),
z=b("../../components/dragelement"),y=b("../../components/fx"),D=b("../../components/titles"),A=b("../cartesian/select").prepSelect,t=b("../cartesian/select").selectOnClick,B=b("../cartesian/select").clearSelect,F=b("../../lib/setcursor"),I=b("../../lib/clear_gl_canvases"),J=b("../../plot_api/subroutines").redrawReglTraces,L=b("../../constants/alignment").MID_SHIFT,H=b("./constants"),P=b("./helpers"),M=n._,N=n.mod,T=n.deg2rad,Q=n.rad2deg;b=q.prototype;K.exports=function(U,S){return new q(U,S)};b.plot=
function(U,S){var X=S[this.id];this._hasClipOnAxisFalse=!1;for(var Z=0;Z<U.length;Z++)if(!1===U[Z][0].trace.cliponaxis){this._hasClipOnAxisFalse=!0;break}this.updateLayers(S,X);this.updateLayout(S,X);k.generalUpdatePerTraceModule(this.gd,this,U,X);this.updateFx(S,X)};b.updateLayers=function(U,S){var X=this.layers;U=S.radialaxis;S=S.angularaxis;var Z=H.layerNames,aa=Z.indexOf("frontplot");Z=Z.slice(0,aa);S="below traces"===S.layer;U="below traces"===U.layer;S&&Z.push("angular-line");U&&Z.push("radial-line");
S&&Z.push("angular-axis");U&&Z.push("radial-axis");Z.push("frontplot");S||Z.push("angular-line");U||Z.push("radial-line");S||Z.push("angular-axis");U||Z.push("radial-axis");U=this.framework.selectAll(".polarsublayer").data(Z,String);U.enter().append("g").attr("class",function(fa){return"polarsublayer "+fa}).each(function(fa){var ha=X[fa]=a.select(this);switch(fa){case "frontplot":ha.append("g").classed("barlayer",!0);ha.append("g").classed("scatterlayer",!0);break;case "backplot":ha.append("g").classed("maplayer",
!0);break;case "plotbg":X.bg=ha.append("path");break;case "radial-grid":ha.style("fill","none");break;case "angular-grid":ha.style("fill","none");break;case "radial-line":ha.append("line").style("fill","none");break;case "angular-line":ha.append("path").style("fill","none")}});U.order()};b.updateLayout=function(U,S){var X=this.layers,Z=U._size,aa=S.radialaxis,fa=S.angularaxis,ha=S.domain.x,ja=S.domain.y;this.xOffset=Z.l+Z.w*ha[0];this.yOffset=Z.t+Z.h*(1-ja[1]);var ba=this.xLength=Z.w*(ha[1]-ha[0]),
ma=this.yLength=Z.h*(ja[1]-ja[0]),qa=S.sector;this.sectorInRad=qa.map(T);var ka=qa[0];qa=qa[1]-ka;ka=N(ka,360);qa=ka+qa;var oa=Math.cos(T(ka)),na=Math.sin(T(ka)),la=Math.cos(T(qa)),ia=Math.sin(T(qa));var sa=90>=ka&&90<=qa||90<ka&&450<=qa?1:0>=na&&0>=ia?0:Math.max(na,ia);var ta=180>=ka&&180<=qa||180<ka&&540<=qa?-1:0<=oa&&0<=la?0:Math.min(oa,la);ka=this.sectorBBox=[ta,270>=ka&&270<=qa||270<ka&&630<=qa?-1:0<=na&&0<=ia?0:Math.min(na,ia),360<=qa?1:0>=oa&&0>=la?0:Math.max(oa,la),sa];qa=ka[2]-ka[0];na=Math.abs((ka[3]-
ka[1])/qa);ma/ba>na?(oa=ba,na*=ba,ba=(ma-na)/Z.h/2,ha=[ha[0],ha[1]],ja=[ja[0]+ba,ja[1]-ba]):(oa=ma/na,na=ma,ba=(ba-oa)/Z.w/2,ha=[ha[0]+ba,ha[1]-ba],ja=[ja[0],ja[1]]);this.xLength2=oa;this.yLength2=na;this.xDomain2=ha;this.yDomain2=ja;ba=this.xOffset2=Z.l+Z.w*ha[0];ma=this.yOffset2=Z.t+Z.h*(1-ja[1]);oa=this.radius=oa/qa;na=this.innerRadius=S.hole*oa;qa=this.cx=ba-oa*ka[0];ka=this.cy=ma+oa*ka[3];la=this.cxx=qa-ba;ia=this.cyy=ka-ma;this.radialAxis=this.mockAxis(U,S,aa,{_id:"x",side:{counterclockwise:"top",
clockwise:"bottom"}[aa.side],_realSide:aa.side,domain:[na/Z.w,oa/Z.w]});this.angularAxis=this.mockAxis(U,S,fa,{side:"right",domain:[0,Math.PI],autorange:!1});this.doAutoRange(U,S);this.updateAngularAxis(U,S);this.updateRadialAxis(U,S);this.updateRadialAxisTitle(U,S);this.xaxis=this.mockCartesianAxis(U,S,{_id:"x",domain:ha});this.yaxis=this.mockCartesianAxis(U,S,{_id:"y",domain:ja});U=this.pathSubplot();this.clipPaths.forTraces.select("path").attr("d",U).attr("transform",c(la,ia));X.frontplot.attr("transform",
c(ba,ma)).call(f.setClipUrl,this._hasClipOnAxisFalse?null:this.clipIds.forTraces,this.gd);X.bg.attr("d",U).attr("transform",c(qa,ka)).call(d.fill,S.bgcolor)};b.mockAxis=function(U,S,X,Z){X=n.extendFlat({},X,Z);v(X,S,U);return X};b.mockCartesianAxis=function(U,S,X){var Z=this,aa=X._id,fa=n.extendFlat({type:"linear"},X);u(fa,U);var ha={x:[0,2],y:[1,3]};fa.setRange=function(){var ja=Z.sectorBBox,ba=ha[aa],ma=Z.radialAxis._rl;ma=(ma[1]-ma[0])/(1-S.hole);fa.range=[ja[ba[0]]*ma,ja[ba[1]]*ma]};fa.isPtWithinRange=
"x"===aa?function(ja){return Z.isPtInside(ja)}:function(){return!0};fa.setRange();fa.setScale();return fa};b.doAutoRange=function(U,S){var X=this.gd;U=this.radialAxis;S=S.radialaxis;U.setScale();x(X,U);X=U.range;S.range=X.slice();S._input.range=X.slice();U._rl=[U.r2l(X[0],null,"gregorian"),U.r2l(X[1],null,"gregorian")]};b.updateRadialAxis=function(U,S){var X=this,Z=X.gd;U=X.layers;var aa=X.radius,fa=X.innerRadius,ha=X.cx,ja=X.cy,ba=S.radialaxis,ma=N(S.sector[0],360),qa=X.radialAxis;S=fa<aa;X.fillViewInitialKey("radialaxis.angle",
ba.angle);X.fillViewInitialKey("radialaxis.range",qa.range.slice());qa.setGeometry();"auto"===qa.tickangle&&90<ma&&270>=ma&&(qa.tickangle=180);ma=function(ia){return c(qa.l2p(ia.x)+fa,0)};var ka=function(ia){return X.pathArc(qa.r2p(ia.x)+fa)},oa=m(ba);X.radialTickLayout!==oa&&(U["radial-axis"].selectAll(".xtick").remove(),X.radialTickLayout=oa);if(S){qa.setScale();oa=r.calcTicks(qa);var na=r.clipEnds(qa,oa),la=r.getTickSigns(qa)[2];r.drawTicks(Z,qa,{vals:oa,layer:U["radial-axis"],path:r.makeTickPath(qa,
0,la),transFn:ma,crisp:!1});r.drawGrid(Z,qa,{vals:na,layer:U["radial-grid"],path:ka,transFn:n.noop,crisp:!1});r.drawLabels(Z,qa,{vals:oa,layer:U["radial-axis"],transFn:ma,labelFns:r.makeLabelFns(qa,0)})}Z=X.radialAxisAngle=X.vangles?Q(l(T(ba.angle),X.vangles)):ba.angle;ha=c(ha,ja);ja=ha+p(-Z);h(U["radial-axis"],S&&(ba.showticklabels||ba.ticks),{transform:ja});h(U["radial-grid"],S&&ba.showgrid,{transform:ha});h(U["radial-line"].select("line"),S&&ba.showline,{x1:fa,y1:0,x2:aa,y2:0,transform:ja}).attr("stroke-width",
ba.linewidth).call(d.stroke,ba.linecolor)};b.updateRadialAxisTitle=function(U,S,X){U=this.gd;var Z=this.radius,aa=this.cx,fa=this.cy;S=S.radialaxis;var ha=this.id+"title";X=void 0!==X?X:this.radialAxisAngle;var ja=T(X),ba=Math.cos(ja);ja=Math.sin(ja);var ma=0;if(S.title){ma=f.bBox(this.layers["radial-axis"].node()).height;var qa=S.title.font.size;ma="counterclockwise"===S.side?-ma-.4*qa:ma+.8*qa}this.layers["radial-axis-title"]=D.draw(U,ha,{propContainer:S,propName:this.id+".radialaxis.title",placeholder:M(U,
"Click to enter radial axis title"),attributes:{x:aa+Z/2*ba+ma*ja,y:fa-Z/2*ja+ma*ba,"text-anchor":"middle"},transform:{rotate:-X}})};b.updateAngularAxis=function(U,S){var X=this;U=X.gd;var Z=X.layers,aa=X.radius,fa=X.innerRadius,ha=X.cx,ja=X.cy,ba=S.angularaxis,ma=X.angularAxis;X.fillViewInitialKey("angularaxis.rotation",ba.rotation);ma.setGeometry();ma.setScale();var qa=function(Aa){return ma.t2g(Aa.x)};"linear"===ma.type&&"radians"===ma.thetaunit&&(ma.tick0=Q(ma.tick0),ma.dtick=Q(ma.dtick));var ka=
function(Aa){return c(ha+aa*Math.cos(Aa),ja-aa*Math.sin(Aa))},oa=function(Aa){return ka(qa(Aa))},na=function(Aa){Aa=qa(Aa);return ka(Aa)+p(-Q(Aa))},la=function(Aa){var Ka=qa(Aa);Aa=Math.cos(Ka);Ka=Math.sin(Ka);return"M"+[ha+fa*Aa,ja-fa*Ka]+"L"+[ha+aa*Aa,ja-aa*Ka]},ia=r.makeLabelFns(ma,0).labelStandoff,sa={xFn:function(Aa){Aa=qa(Aa);return Math.cos(Aa)*ia},yFn:function(Aa){var Ka=qa(Aa);return-Math.sin(Ka)*(ia+Aa.fontSize*(0<Math.sin(Ka)?.2:1))+Math.abs(Math.cos(Ka))*Aa.fontSize*L},anchorFn:function(Aa){Aa=
qa(Aa);Aa=Math.cos(Aa);return.1>Math.abs(Aa)?"middle":0<Aa?"start":"end"},heightFn:function(Aa,Ka,Sa){Aa=qa(Aa);return-.5*(1+Math.sin(Aa))*Sa}},ta=m(ba);X.angularTickLayout!==ta&&(Z["angular-axis"].selectAll("."+ma._id+"tick").remove(),X.angularTickLayout=ta);ta=r.calcTicks(ma);"linear"===S.gridshape?(S=ta.map(qa),0>n.angleDelta(S[0],S[1])&&(S=S.slice().reverse())):S=null;X.vangles=S;"category"===ma.type&&(ta=ta.filter(function(Aa){return n.isAngleInsideSector(qa(Aa),X.sectorInRad)}));ma.visible&&
(S="inside"===ma.ticks?-1:1,r.drawTicks(U,ma,{vals:ta,layer:Z["angular-axis"],path:"M"+(ma.linewidth||1)/2*S+",0h"+S*ma.ticklen,transFn:na,crisp:!1}),r.drawGrid(U,ma,{vals:ta,layer:Z["angular-grid"],path:la,transFn:n.noop,crisp:!1}),r.drawLabels(U,ma,{vals:ta,layer:Z["angular-axis"],repositionOnUpdate:!0,transFn:oa,labelFns:sa}));h(Z["angular-line"].select("path"),ba.showline,{d:X.pathSubplot(),transform:c(ha,ja)}).attr("stroke-width",ba.linewidth).call(d.stroke,ba.linecolor)};b.updateFx=function(U,
S){this.gd._context.staticPlot||(this.updateAngularDrag(U),this.updateRadialDrag(U,S,0),this.updateRadialDrag(U,S,1),this.updateMainDrag(U))};b.updateMainDrag=function(U){function S(Xa,kb){return Math.sqrt(Xa*Xa+kb*kb)}function X(Xa,kb){return[Xa*Math.cos(kb),Xa*Math.sin(-kb)]}function Z(Xa,kb){if(0===Xa)return na.pathSector(2*Ga);var rb=Na/Xa,Mb=kb-rb;kb+=rb;rb=Math.max(0,Math.min(Xa,Aa));Xa=rb-Ga;rb+=Ga;return"M"+X(Xa,Mb)+"A"+[Xa,Xa]+" 0,0,0 "+X(Xa,kb)+"L"+X(rb,kb)+"A"+[rb,rb]+" 0,0,1 "+X(rb,Mb)+
"Z"}function aa(Xa,kb,rb){if(0===Xa)return na.pathSector(2*Ga);kb=X(Xa,kb);rb=X(Xa,rb);Xa=nb((kb[0]+rb[0])/2);rb=nb((kb[1]+rb[1])/2);if(Xa&&rb){kb=rb/Xa;var Mb=-1/kb;Xa=va(Ga,kb,Xa,rb);kb=va(Na,Mb,Xa[0][0],Xa[0][1]);Xa=va(Na,Mb,Xa[1][0],Xa[1][1])}else{if(rb){Mb=Na;var Fb=Ga}else Mb=Ga,Fb=Na;kb=[[Xa-Mb,rb-Fb],[Xa+Mb,rb-Fb]];Xa=[[Xa-Mb,rb+Fb],[Xa+Mb,rb+Fb]]}return"M"+kb.join("L")+"L"+Xa.reverse().join("L")+"Z"}function fa(Xa,kb){kb=Math.max(Math.min(kb,Aa),Ka);Xa<ta?Xa=0:Aa-Xa<ta?Xa=Aa:kb<ta?kb=0:Aa-
kb<ta&&(kb=Aa);if(Math.abs(kb-Xa)>sa)return Xa<kb?(gb=Xa,ob=kb):(gb=kb,ob=Xa),!0;ob=gb=null;return!1}function ha(Xa,kb){Xa=Xa||ub;kb=kb||"M0,0Z";Ja.attr("d",Xa);Ta.attr("d",kb);C.transitionZoombox(Ja,Ta,za,Da);za=!0;Xa={};ka(Xa);la.emit("plotly_relayouting",Xa)}function ja(Xa,kb){Xa*=$a;kb*=Va;Xa=Ra+Xa;var rb=La+kb;kb=S(Ra-eb,La-lb);Xa=Math.min(S(Xa-eb,rb-lb),Aa);rb=Math.atan2(lb-La,Ra-eb);if(fa(kb,Xa)){var Mb=ub+na.pathSector(ob);gb&&(Mb+=na.pathSector(gb));var Fb=Z(gb,rb)+Z(ob,rb)}ha(Mb,Fb)}function ba(Xa,
kb,rb,Mb){Xa=P.findIntersectionXY(rb,Mb,rb,[Xa-eb,lb-kb]);return S(Xa[0],Xa[1])}function ma(Xa,kb){Xa=Ra+Xa;var rb=La+kb,Mb=Math.atan2(lb-rb,Xa-eb);kb=Ba(Math.atan2(lb-La,Ra-eb),Ya);var Fb=Ba(Mb,Ya);Mb=ba(Ra,La,kb[0],kb[1]);Xa=Math.min(ba(Xa,rb,Fb[0],Fb[1]),Aa);if(fa(Mb,Xa)){var Lb=ub+na.pathSector(ob);gb&&(Lb+=na.pathSector(gb));var Vb=[aa(gb,kb[0],kb[1]),aa(ob,kb[0],kb[1])].join(" ")}ha(Lb,Vb)}function qa(){C.removeZoombox(la);if(null!==gb&&null!==ob){var Xa={};ka(Xa);C.showDoubleClickNotifier(la);
e.call("_guiRelayout",la,Xa)}}function ka(Xa){var kb=hb._rl,rb=(kb[1]-kb[0])/(1-Ka/Aa)/Aa;Xa[na.id+".radialaxis.range"]=[kb[0]+(gb-Ka)*rb,kb[0]+(ob-Ka)*rb]}function oa(Xa,kb){var rb=la._fullLayout.clickmode;C.removeZoombox(la);if(2===Xa){var Mb={},Fb;for(Fb in na.viewInitial)Mb[na.id+"."+Fb]=na.viewInitial[Fb];la.emit("plotly_doubleclick",null);e.call("_guiRelayout",la,Mb)}-1<rb.indexOf("select")&&1===Xa&&t(kb,la,[na.xaxis],[na.yaxis],na.id,Ha);-1<rb.indexOf("event")&&y.click(la,kb,na.id)}var na=
this,la=na.gd,ia=U._zoomlayer,sa=H.MINZOOM,ta=H.OFFEDGE,Aa=na.radius,Ka=na.innerRadius,Sa=na.cx,db=na.cy,eb=na.cxx,lb=na.cyy,ab=na.sectorInRad,Ya=na.vangles,hb=na.radialAxis,nb=P.clampTiny,va=P.findXYatLength,Ba=P.findEnclosingVertexAngles,Ga=H.cornerHalfWidth,Na=H.cornerLen/2,$a,Va,qb=C.makeDragger(na.layers,"path","maindrag","crosshair");a.select(qb).attr("d",na.pathSubplot()).attr("transform",c(Sa,db));var Ha={element:qb,gd:la,subplot:na.id,plotinfo:{id:na.id,xaxis:na.xaxis,yaxis:na.yaxis},xaxes:[na.xaxis],
yaxes:[na.yaxis]},Ra,La,gb,ob,ub,za,Da,Ja,Ta;Ha.prepFn=function(Xa,kb,rb){var Mb=la._fullLayout.dragmode,Fb=qb.getBoundingClientRect();la._fullLayout._calcInverseTransform(la);var Lb=la._fullLayout._invTransform;$a=la._fullLayout._invScaleX;Va=la._fullLayout._invScaleY;Fb=n.apply3DTransform(Lb)(kb-Fb.left,rb-Fb.top);Ra=Fb[0];La=Fb[1];Ya&&(Fb=P.findPolygonOffset(Aa,ab[0],ab[1],Ya),Ra+=eb+Fb[0],La+=lb+Fb[1]);switch(Mb){case "zoom":Ha.moveFn=Ya?ma:ja;Ha.clickFn=oa;Ha.doneFn=qa;ob=gb=null;ub=na.pathSubplot();
za=!1;Da=g(la._fullLayout[na.id].bgcolor).getLuminance();Ja=C.makeZoombox(ia,Da,Sa,db,ub);Ja.attr("fill-rule","evenodd");Ta=C.makeCorners(ia,Sa,db);B(la);break;case "select":case "lasso":A(Xa,kb,rb,Ha,Mb)}};qb.onmousemove=function(Xa){y.hover(la,Xa,na.id);la._fullLayout._lasthover=qb;la._fullLayout._hoversubplot=na.id};qb.onmouseout=function(Xa){la._dragging||z.unhover(la,Xa)};z.init(Ha)};b.updateRadialDrag=function(U,S,X){function Z(va,Ba){Ya?Ya(va,Ba):(va=[va,-Ba],va=Math.abs(n.dot(va,[Math.cos(sa),
Math.sin(sa)])/Math.sqrt(n.dot(va,va))),isNaN(va)||(Ya=.5>va?fa:ha));va={};null!==hb?va[ja.id+".radialaxis.angle"]=hb:null!==nb&&(va[ja.id+".radialaxis.range["+X+"]"]=nb);ba.emit("plotly_relayouting",va)}function aa(){null!==hb?e.call("_guiRelayout",ba,ja.id+".radialaxis.angle",hb):null!==nb&&e.call("_guiRelayout",ba,ja.id+".radialaxis.range["+X+"]",nb)}function fa(va,Ba){0!==X&&(hb=Math.atan2(oa-(lb+Ba),eb+va-ka),ja.vangles&&(hb=l(hb,ja.vangles)),hb=Q(hb),va=c(ka,oa)+p(-hb),ma["radial-axis"].attr("transform",
va),ma["radial-line"].select("line").attr("transform",va),va=ja.gd._fullLayout,ja.updateRadialAxisTitle(va,va[ja.id],hb))}function ha(va,Ba){va=n.dot([va,-Ba],[Math.cos(sa),Math.sin(sa)]);nb=Sa-db*va;if(0<db!==(X?nb>Aa:nb<Ka))nb=null;else{Ba=ba._fullLayout;va=Ba[ja.id];na.range[X]=nb;na._rl[X]=nb;ja.updateRadialAxis(Ba,va);ja.xaxis.setRange();ja.xaxis.setScale();ja.yaxis.setRange();ja.yaxis.setScale();Ba=!1;for(var Ga in ja.traceHash){var Na=ja.traceHash[Ga],$a=n.filterVisible(Na);Na[0][0].trace._module.plot(ba,
ja,$a,va);e.traceIs(Ga,"gl")&&$a.length&&(Ba=!0)}Ba&&(I(ba),J(ba))}}var ja=this,ba=ja.gd,ma=ja.layers;U=ja.radius;var qa=ja.innerRadius,ka=ja.cx,oa=ja.cy,na=ja.radialAxis,la=H.radialDragBoxSize,ia=la/2;if(na.visible){var sa=T(ja.radialAxisAngle),ta=na._rl,Aa=ta[0],Ka=ta[1],Sa=ta[X],db=.75*(ta[1]-ta[0])/(1-S.hole)/U;if(X){var eb=ka+(U+ia)*Math.cos(sa);var lb=oa-(U+ia)*Math.sin(sa);S="radialdrag"}else eb=ka+(qa-ia)*Math.cos(sa),lb=oa-(qa-ia)*Math.sin(sa),S="radialdrag-inner";S=C.makeRectDragger(ma,
S,"crosshair",-ia,-ia,la,la);var ab={element:S,gd:ba};h(a.select(S),na.visible&&qa<U,{transform:c(eb,lb)});var Ya,hb,nb;ab.prepFn=function(){nb=hb=Ya=null;ab.moveFn=Z;ab.doneFn=aa;B(ba)};ab.clampFn=function(va,Ba){Math.sqrt(va*va+Ba*Ba)<H.MINDRAG&&(Ba=va=0);return[va,Ba]};z.init(ab)}};b.updateAngularDrag=function(U){function S(Ya,hb){var nb=aa.gd._fullLayout,va=nb[aa.id],Ba=Q(Math.atan2(oa+na-(Sa+hb*U._invScaleY),Ka+Ya*U._invScaleX-ka-na)-ab);eb=db+Ba;ha.frontplot.attr("transform",c(aa.xOffset2,aa.yOffset2)+
p([-Ba,ka,oa]));aa.vangles?(lb=aa.radialAxisAngle+Ba,Ya=c(ma,qa)+p(-Ba),hb=c(ma,qa)+p(-lb),ha.bg.attr("transform",Ya),ha["radial-grid"].attr("transform",Ya),ha["radial-axis"].attr("transform",hb),ha["radial-line"].select("line").attr("transform",hb),aa.updateRadialAxisTitle(nb,va,lb)):aa.clipPaths.forTraces.select("path").attr("transform",c(ka,oa)+p(Ba));ta.each(function(){var Na=a.select(this),$a=f.getTranslate(Na);Na.attr("transform",c($a.x,$a.y)+p([Ba]))});Aa.each(function(){var Na=a.select(this),
$a=Na.select("text"),Va=f.getTranslate(Na);Na.attr("transform",p([Ba,$a.attr("x"),$a.attr("y")])+c(Va.x,Va.y))});ba.rotation=n.modHalf(eb,360);aa.updateAngularAxis(nb,va);aa._hasClipOnAxisFalse&&!n.isFullCircle(aa.sectorInRad)&&sa.call(f.hideOutsideRangePoints,aa);nb=!1;for(var Ga in aa.traceHash)e.traceIs(Ga,"gl")&&(Ya=aa.traceHash[Ga],hb=n.filterVisible(Ya),Ya[0][0].trace._module.plot(fa,aa,hb,va),hb.length&&(nb=!0));nb&&(I(fa),J(fa));va={};X(va);fa.emit("plotly_relayouting",va)}function X(Ya){Ya[aa.id+
".angularaxis.rotation"]=eb;aa.vangles&&(Ya[aa.id+".radialaxis.angle"]=lb)}function Z(){Aa.select("text").attr("transform",null);var Ya={};X(Ya);e.call("_guiRelayout",fa,Ya)}var aa=this,fa=aa.gd,ha=aa.layers,ja=aa.radius,ba=aa.angularAxis,ma=aa.cx,qa=aa.cy,ka=aa.cxx,oa=aa.cyy,na=H.angularDragBoxSize,la=C.makeDragger(ha,"path","angulardrag","move"),ia={element:la,gd:fa};a.select(la).attr("d",aa.pathAnnulus(ja,ja+na)).attr("transform",c(ma,qa)).call(F,"move");var sa=ha.frontplot.select(".scatterlayer").selectAll(".trace"),
ta=sa.selectAll(".point"),Aa=sa.selectAll(".textpoint"),Ka,Sa,db,eb,lb,ab;ia.prepFn=function(Ya,hb,nb){db=U[aa.id].angularaxis.rotation;Ya=la.getBoundingClientRect();Ka=hb-Ya.left;Sa=nb-Ya.top;fa._fullLayout._calcInverseTransform(fa);hb=n.apply3DTransform(U._invTransform)(Ka,Sa);Ka=hb[0];Sa=hb[1];ab=Math.atan2(oa+na-Sa,Ka-ka-na);ia.moveFn=S;ia.doneFn=Z;B(fa)};aa.vangles&&!n.isFullCircle(aa.sectorInRad)&&(ia.prepFn=n.noop,F(a.select(la),null));z.init(ia)};b.isPtInside=function(U){var S=this.sectorInRad,
X=this.vangles,Z=this.angularAxis.c2g(U.theta),aa=this.radialAxis;U=aa.c2l(U.r);return(X?P.isPtInsidePolygon:n.isPtInsideSector)(U,Z,aa._rl,S,X)};b.pathArc=function(U){var S=this.sectorInRad,X=this.vangles;return(X?P.pathPolygon:n.pathArc)(U,S[0],S[1],X)};b.pathSector=function(U){var S=this.sectorInRad,X=this.vangles;return(X?P.pathPolygon:n.pathSector)(U,S[0],S[1],X)};b.pathAnnulus=function(U,S){var X=this.sectorInRad,Z=this.vangles;return(Z?P.pathPolygonAnnulus:n.pathAnnulus)(U,S,X[0],X[1],Z)};
b.pathSubplot=function(){var U=this.innerRadius,S=this.radius;return U?this.pathAnnulus(U,S):this.pathSector(S)};b.fillViewInitialKey=function(U,S){U in this.viewInitial||(this.viewInitial[U]=S)}},{"../../components/color":643,"../../components/dragelement":662,"../../components/drawing":665,"../../components/fx":683,"../../components/titles":738,"../../constants/alignment":745,"../../lib":778,"../../lib/clear_gl_canvases":762,"../../lib/setcursor":799,"../../plot_api/subroutines":818,"../../plots/cartesian/axes":828,
"../../registry":911,"../cartesian/autorange":827,"../cartesian/dragbox":836,"../cartesian/select":847,"../cartesian/set_convert":848,"../plots":891,"./constants":892,"./helpers":893,"./set_convert":904,d3:169,tinycolor2:576}],904:[function(b,K,G){function q(e,n){var p=n._subplot;e.setGeometry=function(){var c=e._rl[0],d=e._rl[1],f=p.innerRadius,k=(p.radius-f)/(d-c),r=f/k,u=c>d?function(v){return 0>=v}:function(v){return 0<=v};e.c2g=function(v){v=e.c2l(v)-c;return(u(v)?v:0)+r};e.g2c=function(v){return e.l2c(v+
c-r)};e.g2p=function(v){return v*k};e.c2p=function(v){return e.g2p(e.c2g(v))}}}function m(e,n){var p=e.type;if("linear"===p){var c=e.d2c,d=e.c2d;e.d2c=function(f,k){f=c(f);return"degrees"===k?a(f):f};e.c2d=function(f,k){f="degrees"===k?g(f):f;return d(f)}}e.makeCalcdata=function(f,k){var r=f[k],u=f._length,v;if(r){if(l.isTypedArray(r)&&"linear"===p){if(u===r.length)return r;if(r.subarray)return r.subarray(0,u)}k=Array(u);for(v=0;v<u;v++)k[v]=e.d2c(r[v],f.thetaunit)}else for(v=k+"0",k="d"+k,r=(v in
f)?e.d2c(f[v],f.thetaunit):0,f=f[k]?e.d2c(f[k],f.thetaunit):(e.period||2*Math.PI)/u,k=Array(u),v=0;v<u;v++)k[v]=r+v*f;return k};e.setGeometry=function(){var f=n.sector,k=f.map(a),r={clockwise:-1,counterclockwise:1}[e.direction],u=a(e.rotation),v=function(A){return(A-u)/r},x;switch(p){case "linear":var C=x=l.identity;var z=a;var y=g;e.range=l.isFullCircle(k)?[f[0],f[0]+360]:k.map(v).map(g);break;case "category":f=e._categories.length;var D=e.period?Math.max(e.period,f):f;0===D&&(D=1);C=z=function(A){return 2*
A*Math.PI/D};x=y=function(A){return A*D/Math.PI/2};e.range=[0,D]}e.c2g=function(A){return r*C(A)+u};e.g2c=function(A){return x(v(A))};e.t2g=function(A){return r*z(A)+u};e.g2t=function(A){return y(v(A))}}}var l=b("../../lib"),h=b("../cartesian/set_convert"),a=l.deg2rad,g=l.rad2deg;K.exports=function(e,n,p){h(e,p);switch(e._id){case "x":case "radialaxis":q(e,n);break;case "angularaxis":m(e,n)}}},{"../../lib":778,"../cartesian/set_convert":848}],905:[function(b,K,G){var q=b("../lib"),m=b("../plot_api/plot_template"),
l=b("./domain").defaults;K.exports=function(h,a,g,e){function n(z,y){return q.coerce(r,u,p,z,y)}var p=e.attributes;g=e.handleDefaults;for(var c=e.partition||"x",d=a._subplots[e.type],f=d.length,k=f&&d[0].replace(/\d+$/,""),r,u,v=0;v<f;v++){var x=d[v];r=h[x]?h[x]:h[x]={};u=m.newContainer(a,x,k);n("uirevision",a.uirevision);var C={};C[c]=[v/f,(v+1)/f];l(u,a,n,C);e.id=x;g(r,u,n,e)}}},{"../lib":778,"../plot_api/plot_template":817,"./domain":855}],906:[function(b,K,G){function q(m){var l=m.description?
" "+m.description:"";m=m.keys||[];if(0<m.length){l=[];for(var h=0;h<m.length;h++)l[h]="`"+m[h]+"`";l=1===m.length?"variable "+l[0]:"variables "+l.slice(0,-1).join(", ")+" and "+l.slice(-1)+"."}return l}K=b("../constants/docs").FORMAT_LINK;b=b("../constants/docs").DATE_FORMAT_LINK;['Variables are inserted using %{variable}, for example "y: %{y}". Numbers are formatted using d3-format\'s syntax %{variable:d3-format}, for example "Price: %{y:$.2f}".',K,'for details on the formatting syntax. Dates are formatted using d3-time-format\'s syntax %{variable|d3-time-format}, for example "Day: %{2019-01-01|%A}".',
b,"for details on the date formatting syntax."].join(" ");G.hovertemplateAttrs=function(m,l){m=m||{};l=l||{};q(l);l={valType:"string",dflt:"",editType:m.editType||"none"};!1!==m.arrayOk&&(l.arrayOk=!0);return l};G.texttemplateAttrs=function(m,l){m=m||{};l=l||{};q(l);l={valType:"string",dflt:"",editType:m.editType||"calc"};!1!==m.arrayOk&&(l.arrayOk=!0);return l}},{"../constants/docs":748}],907:[function(b,K,G){var q=b("./ternary"),m=b("../../plots/get_data").getSubplotCalcData;K=b("../../lib").counterRegex;
G.name="ternary";var l=G.attr="subplot";G.idRoot="ternary";G.idRegex=G.attrRegex=K("ternary");(G.attributes={})[l]={valType:"subplotid",dflt:"ternary",editType:"calc"};G.layoutAttributes=b("./layout_attributes");G.supplyLayoutDefaults=b("./layout_defaults");G.plot=function(h){for(var a=h._fullLayout,g=h.calcdata,e=a._subplots.ternary,n=0;n<e.length;n++){var p=e[n],c=m(g,"ternary",p),d=a[p]._subplot;d||(d=new q({id:p,graphDiv:h,container:a._ternarylayer.node()},a),a[p]._subplot=d);d.plot(c,a,h._promises)}};
G.clean=function(h,a,g,e){h=e._subplots.ternary||[];for(g=0;g<h.length;g++){var n=h[g],p=e[n]._subplot;!a[n]&&p&&(p.plotContainer.remove(),p.clipDef.remove(),p.clipDefRelative.remove(),p.layers["a-title"].remove(),p.layers["b-title"].remove(),p.layers["c-title"].remove())}}},{"../../lib":778,"../../plots/get_data":865,"./layout_attributes":908,"./layout_defaults":909,"./ternary":910}],908:[function(b,K,G){G=b("../../components/color/attributes");var q=b("../domain").attributes,m=b("../cartesian/layout_attributes"),
l=b("../../plot_api/edit_types").overrideAll;b=b("../../lib/extend").extendFlat;b={title:{text:m.title.text,font:m.title.font},color:m.color,tickmode:m.tickmode,nticks:b({},m.nticks,{dflt:6,min:1}),tick0:m.tick0,dtick:m.dtick,tickvals:m.tickvals,ticktext:m.ticktext,ticks:m.ticks,ticklen:m.ticklen,tickwidth:m.tickwidth,tickcolor:m.tickcolor,showticklabels:m.showticklabels,showtickprefix:m.showtickprefix,tickprefix:m.tickprefix,showticksuffix:m.showticksuffix,ticksuffix:m.ticksuffix,showexponent:m.showexponent,
exponentformat:m.exponentformat,minexponent:m.minexponent,separatethousands:m.separatethousands,tickfont:m.tickfont,tickangle:m.tickangle,tickformat:m.tickformat,tickformatstops:m.tickformatstops,hoverformat:m.hoverformat,showline:b({},m.showline,{dflt:!0}),linecolor:m.linecolor,linewidth:m.linewidth,showgrid:b({},m.showgrid,{dflt:!0}),gridcolor:m.gridcolor,gridwidth:m.gridwidth,layer:m.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:m._deprecated.title,titlefont:m._deprecated.titlefont}};
K=K.exports=l({domain:q({name:"ternary"}),bgcolor:{valType:"color",dflt:G.background},sum:{valType:"number",dflt:1,min:0},aaxis:b,baxis:b,caxis:b},"plot","from-root");K.uirevision={valType:"any",editType:"none"};K.aaxis.uirevision=K.baxis.uirevision=K.caxis.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":642,"../../lib/extend":768,"../../plot_api/edit_types":810,"../cartesian/layout_attributes":842,"../domain":855}],909:[function(b,K,G){function q(k,r,u,v){var x=u("bgcolor");
u=u("sum");v.bgColor=l.combine(x,v.paper_bgcolor);for(var C,z,y=0;y<f.length;y++)x=f[y],C=k[x]||{},z=h.newContainer(r,x),z._name=x,m(C,z,v,r);v=r.aaxis;x=r.baxis;r=r.caxis;v.min+x.min+r.min>=u&&(v.min=0,x.min=0,r.min=0,k.aaxis&&delete k.aaxis.min,k.baxis&&delete k.baxis.min,k.caxis&&delete k.caxis.min)}function m(k,r,u,v){function x(t,B){return a.coerce(k,r,C,t,B)}var C=d[r._name];x("uirevision",v.uirevision);r.type="linear";v=x("color");var z=v!==C.color.dflt?v:u.font.color,y=r._name.charAt(0).toUpperCase(),
D="Component "+y,A=x("title.text",D);r._hovertitle=A===D?A:y;a.coerceFont(x,"title.font",{family:u.font.family,size:Math.round(1.2*u.font.size),color:z});x("min");p(k,r,x,"linear");e(k,r,x,"linear",{});n(k,r,x,{outerTicks:!0});x("showticklabels")&&(a.coerceFont(x,"tickfont",{family:u.font.family,size:u.font.size,color:z}),x("tickangle"),x("tickformat"));c(k,r,x,{dfltColor:v,bgColor:u.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:C});x("hoverformat");x("layer")}var l=b("../../components/color"),
h=b("../../plot_api/plot_template"),a=b("../../lib"),g=b("../subplot_defaults"),e=b("../cartesian/tick_label_defaults"),n=b("../cartesian/tick_mark_defaults"),p=b("../cartesian/tick_value_defaults"),c=b("../cartesian/line_grid_defaults"),d=b("./layout_attributes"),f=["aaxis","baxis","caxis"];K.exports=function(k,r,u){g(k,r,u,{type:"ternary",attributes:d,handleDefaults:q,font:r.font,paper_bgcolor:r.paper_bgcolor})}},{"../../components/color":643,"../../lib":778,"../../plot_api/plot_template":817,"../cartesian/line_grid_defaults":844,
"../cartesian/tick_label_defaults":849,"../cartesian/tick_mark_defaults":850,"../cartesian/tick_value_defaults":851,"../subplot_defaults":905,"./layout_attributes":908}],910:[function(b,K,G){function q(P,M){this.id=P.id;this.graphDiv=P.graphDiv;this.init(M);this.makeFramework(M);this.cTickLayout=this.bTickLayout=this.aTickLayout=null}function m(P){l.select(P).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}var l=b("d3"),h=b("tinycolor2"),a=b("../../registry"),
g=b("../../lib"),e=g.strTranslate,n=g._,p=b("../../components/color"),c=b("../../components/drawing"),d=b("../cartesian/set_convert"),f=b("../../lib/extend").extendFlat,k=b("../plots"),r=b("../cartesian/axes"),u=b("../../components/dragelement"),v=b("../../components/fx");G=b("../../components/dragelement/helpers");var x=G.freeMode,C=G.rectMode,z=b("../../components/titles"),y=b("../cartesian/select").prepSelect,D=b("../cartesian/select").selectOnClick,A=b("../cartesian/select").clearSelect,t=b("../cartesian/select").clearSelectionsCache,
B=b("../cartesian/constants");K.exports=q;b=q.prototype;b.init=function(P){this.container=P._ternarylayer;this.defs=P._defs;this.layoutId=P._uid;this.traceHash={};this.layers={}};b.plot=function(P,M){var N=M[this.id];M=M._size;this._hasClipOnAxisFalse=!1;for(var T=0;T<P.length;T++)if(!1===P[T][0].trace.cliponaxis){this._hasClipOnAxisFalse=!0;break}this.updateLayers(N);this.adjustLayout(N,M);k.generalUpdatePerTraceModule(this.graphDiv,this,P,N);this.layers.plotbg.select("path").call(p.fill,N.bgcolor)};
b.makeFramework=function(P){var M=this.graphDiv,N=P[this.id],T=this.clipId="clip"+this.layoutId+this.id,Q=this.clipIdRelative="clip-relative"+this.layoutId+this.id;this.clipDef=g.ensureSingleById(P._clips,"clipPath",T,function(U){U.append("path").attr("d","M0,0Z")});this.clipDefRelative=g.ensureSingleById(P._clips,"clipPath",Q,function(U){U.append("path").attr("d","M0,0Z")});this.plotContainer=g.ensureSingle(this.container,"g",this.id);this.updateLayers(N);c.setClipUrl(this.layers.backplot,T,M);c.setClipUrl(this.layers.grids,
T,M)};b.updateLayers=function(P){var M=this.layers,N=["draglayer","plotbg","backplot","grids"];"below traces"===P.aaxis.layer&&N.push("aaxis","aline");"below traces"===P.baxis.layer&&N.push("baxis","bline");"below traces"===P.caxis.layer&&N.push("caxis","cline");N.push("frontplot");"above traces"===P.aaxis.layer&&N.push("aaxis","aline");"above traces"===P.baxis.layer&&N.push("baxis","bline");"above traces"===P.caxis.layer&&N.push("caxis","cline");P=this.plotContainer.selectAll("g.toplevel").data(N,
String);var T=["agrid","bgrid","cgrid"];P.enter().append("g").attr("class",function(Q){return"toplevel "+Q}).each(function(Q){var U=l.select(this);M[Q]=U;"frontplot"===Q?U.append("g").classed("scatterlayer",!0):"backplot"===Q?U.append("g").classed("maplayer",!0):"plotbg"===Q?U.append("path").attr("d","M0,0Z"):"aline"===Q||"bline"===Q||"cline"===Q?U.append("path"):"grids"===Q&&T.forEach(function(S){M[S]=U.append("g").classed("grid "+S,!0)})});P.order()};var F=Math.sqrt(4/3);b.adjustLayout=function(P,
M){var N=this,T=P.domain,Q=(T.x[0]+T.x[1])/2,U=(T.y[0]+T.y[1])/2,S=T.x[1]-T.x[0],X=T.y[1]-T.y[0],Z=S*M.w,aa=X*M.h,fa=P.sum,ha=P.aaxis.min,ja=P.baxis.min,ba=P.caxis.min;if(Z>F*aa){var ma=aa;T=ma*F}else T=Z,ma=T/F;Z=S*T/Z;X=X*ma/aa;S=M.l+M.w*Q-T/2;M=M.t+M.h*(1-U)-ma/2;N.x0=S;N.y0=M;N.w=T;N.h=ma;N.sum=fa;N.xaxis={type:"linear",range:[ha+2*ba-fa,fa-ha-2*ja],domain:[Q-Z/2,Q+Z/2],_id:"x"};d(N.xaxis,N.graphDiv._fullLayout);N.xaxis.setScale();N.xaxis.isPtWithinRange=function(qa){return qa.a>=N.aaxis.range[0]&&
qa.a<=N.aaxis.range[1]&&qa.b>=N.baxis.range[1]&&qa.b<=N.baxis.range[0]&&qa.c>=N.caxis.range[1]&&qa.c<=N.caxis.range[0]};N.yaxis={type:"linear",range:[ha,fa-ja-ba],domain:[U-X/2,U+X/2],_id:"y"};d(N.yaxis,N.graphDiv._fullLayout);N.yaxis.setScale();N.yaxis.isPtWithinRange=function(){return!0};Z=N.yaxis.domain[0];Q=N.aaxis=f({},P.aaxis,{range:[ha,fa-ja-ba],side:"left",tickangle:(+P.aaxis.tickangle||0)-30,domain:[Z,Z+X*F],anchor:"free",position:0,_id:"y",_length:T});d(Q,N.graphDiv._fullLayout);Q.setScale();
U=N.baxis=f({},P.baxis,{range:[fa-ha-ba,ja],side:"bottom",domain:N.xaxis.domain,anchor:"free",position:0,_id:"x",_length:T});d(U,N.graphDiv._fullLayout);U.setScale();P=N.caxis=f({},P.caxis,{range:[fa-ha-ja,ba],side:"right",tickangle:(+P.caxis.tickangle||0)+30,domain:[Z,Z+X*F],anchor:"free",position:0,_id:"y",_length:T});d(P,N.graphDiv._fullLayout);P.setScale();fa="M"+S+","+(M+ma)+"h"+T+"l-"+T/2+",-"+ma+"Z";N.clipDef.select("path").attr("d",fa);N.layers.plotbg.select("path").attr("d",fa);fa="M0,"+
ma+"h"+T+"l-"+T/2+",-"+ma+"Z";N.clipDefRelative.select("path").attr("d",fa);fa=e(S,M);N.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",fa);N.clipDefRelative.select("path").attr("transform",null);fa=e(S-U._offset,M+ma);N.layers.baxis.attr("transform",fa);N.layers.bgrid.attr("transform",fa);fa=e(S+T/2,M)+"rotate(30)"+e(0,-Q._offset);N.layers.aaxis.attr("transform",fa);N.layers.agrid.attr("transform",fa);fa=e(S+T/2,M)+"rotate(-30)"+e(0,-P._offset);N.layers.caxis.attr("transform",
fa);N.layers.cgrid.attr("transform",fa);N.drawAxes(!0);N.layers.aline.select("path").attr("d",Q.showline?"M"+S+","+(M+ma)+"l"+T/2+",-"+ma:"M0,0").call(p.stroke,Q.linecolor||"#000").style("stroke-width",(Q.linewidth||0)+"px");N.layers.bline.select("path").attr("d",U.showline?"M"+S+","+(M+ma)+"h"+T:"M0,0").call(p.stroke,U.linecolor||"#000").style("stroke-width",(U.linewidth||0)+"px");N.layers.cline.select("path").attr("d",P.showline?"M"+(S+T/2)+","+M+"l"+T/2+","+ma:"M0,0").call(p.stroke,P.linecolor||
"#000").style("stroke-width",(P.linewidth||0)+"px");N.graphDiv._context.staticPlot||N.initInteractions();c.setClipUrl(N.layers.frontplot,N._hasClipOnAxisFalse?null:N.clipId,N.graphDiv)};b.drawAxes=function(P){var M=this.graphDiv,N=this.id.substr(7)+"title",T=this.layers,Q=this.aaxis,U=this.baxis,S=this.caxis;this.drawAx(Q);this.drawAx(U);this.drawAx(S);if(P){P=Math.max(Q.showticklabels?Q.tickfont.size/2:0,(S.showticklabels?.75*S.tickfont.size:0)+("outside"===S.ticks?.87*S.ticklen:0));var X=(U.showticklabels?
U.tickfont.size:0)+("outside"===U.ticks?U.ticklen:0)+3;T["a-title"]=z.draw(M,"a"+N,{propContainer:Q,propName:this.id+".aaxis.title",placeholder:n(M,"Click to enter Component A title"),attributes:{x:this.x0+this.w/2,y:this.y0-Q.title.font.size/3-P,"text-anchor":"middle"}});T["b-title"]=z.draw(M,"b"+N,{propContainer:U,propName:this.id+".baxis.title",placeholder:n(M,"Click to enter Component B title"),attributes:{x:this.x0-X,y:this.y0+this.h+.83*U.title.font.size+X,"text-anchor":"middle"}});T["c-title"]=
z.draw(M,"c"+N,{propContainer:S,propName:this.id+".caxis.title",placeholder:n(M,"Click to enter Component C title"),attributes:{x:this.x0+this.w+X,y:this.y0+this.h+.83*S.title.font.size+X,"text-anchor":"middle"}})}};b.drawAx=function(P){var M=this.graphDiv,N=P._name,T=N.charAt(0),Q=P._id;N=this.layers[N];var U=T+"tickLayout",S=P.ticks+String(P.ticklen)+String(P.showticklabels);this[U]!==S&&(N.selectAll("."+Q+"tick").remove(),this[U]=S);P.setScale();Q=r.calcTicks(P);U=r.clipEnds(P,Q);S=r.makeTransTickFn(P);
var X=r.getTickSigns(P)[2],Z=g.deg2rad(30),aa=X*(P.linewidth||1)/2;X*=P.ticklen;var fa=this.w,ha=this.h;fa={a:"M0,0l"+ha+",-"+fa/2,b:"M0,0l-"+fa/2+",-"+ha,c:"M0,0l-"+ha+","+fa/2}[T];r.drawTicks(M,P,{vals:"inside"===P.ticks?U:Q,layer:N,path:"b"===T?"M0,"+aa+"l"+Math.sin(Z)*X+","+Math.cos(Z)*X:"M"+aa+",0l"+Math.cos(Z)*X+","+-Math.sin(Z)*X,transFn:S,crisp:!1});r.drawGrid(M,P,{vals:U,layer:this.layers[T+"grid"],path:fa,transFn:S,crisp:!1});r.drawLabels(M,P,{vals:Q,layer:N,transFn:S,labelFns:r.makeLabelFns(P,
0,30)})};K=B.MINZOOM/2+.87;var I="m-0.87,.5h"+K+"v3h-"+(K+5.2)+"l"+(K/2+2.6)+",-"+(.87*K+4.5)+"l2.6,1.5l-"+K/2+","+.87*K+"Z",J="m0.87,.5h-"+K+"v3h"+(K+5.2)+"l-"+(K/2+2.6)+",-"+(.87*K+4.5)+"l-2.6,1.5l"+K/2+","+.87*K+"Z",L="m0,1l"+K/2+","+.87*K+"l2.6,-1.5l-"+(K/2+2.6)+",-"+(.87*K+4.5)+"l-"+(K/2+2.6)+","+(.87*K+4.5)+"l2.6,1.5l"+K/2+",-"+.87*K+"Z",H=!0;b.clearSelect=function(){t(this.dragOptions);A(this.dragOptions.gd)};b.initInteractions=function(){function P(ta){var Aa={};Aa[S.id+".aaxis.min"]=ta.a;
Aa[S.id+".baxis.min"]=ta.b;Aa[S.id+".caxis.min"]=ta.c;return Aa}function M(ta,Aa){var Ka=Z._fullLayout.clickmode;m(Z);2===ta&&(Z.emit("plotly_doubleclick",null),a.call("_guiRelayout",Z,P({a:0,b:0,c:0})));-1<Ka.indexOf("select")&&1===ta&&D(Aa,Z,[S.xaxis],[S.yaxis],S.id,S.dragOptions);-1<Ka.indexOf("event")&&v.click(Z,Aa,S.id)}function N(ta,Aa){var Ka=ja+ta*fa,Sa=ba+Aa*ha;Aa=Math.max(0,Math.min(1,1-ba/S.h,1-Sa/S.h));ta=Math.max(0,Math.min(1,1-(ja+(S.h-ba)/Math.sqrt(3))/S.w,1-(Ka+(S.h-Sa)/Math.sqrt(3))/
S.w));Ka=Math.max(0,Math.min(1,(ja-(S.h-ba)/Math.sqrt(3))/S.w,(Ka-(S.h-Sa)/Math.sqrt(3))/S.w));Sa=(Aa/2+Ka)*S.w;var db=(1-Aa/2-ta)*S.w,eb=(Sa+db)/2,lb=db-Sa,ab=(1-Aa)*S.h,Ya=ab-lb/F;lb<B.MINZOOM?(ka=ma,ia.attr("d",na),sa.attr("d","M0,0Z")):(ka={a:ma.a+Aa*qa,b:ma.b+ta*qa,c:ma.c+Ka*qa},ia.attr("d",na+"M"+Sa+","+ab+"H"+db+"L"+eb+","+Ya+"L"+Sa+","+ab+"Z"),sa.attr("d","M"+ja+","+ba+"m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2ZM"+Sa+","+ab+I+"M"+db+","+ab+J+"M"+eb+","+Ya+L));la||(ia.transition().style("fill",.2<
oa?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),sa.transition().style("opacity",1).duration(200),la=!0);Z.emit("plotly_relayouting",P(ka))}function T(){m(Z);ka!==ma&&(a.call("_guiRelayout",Z,P(ka)),H&&Z.data&&Z._context.showTips&&(g.notifier(n(Z,"Double-click to zoom back out"),"long"),H=!1))}function Q(ta,Aa){var Ka=ta/S.xaxis._m,Sa=Aa/S.yaxis._m;ka={a:ma.a-Sa,b:ma.b+(Ka+Sa)/2,c:ma.c-(Ka-Sa)/2};Ka=[ka.a,ka.b,ka.c].sort(g.sorterAsc);Sa=Ka.indexOf(ka.a);var db=Ka.indexOf(ka.b),eb=Ka.indexOf(ka.c);
0>Ka[0]&&(0>Ka[1]+Ka[0]/2?(Ka[2]+=Ka[0]+Ka[1],Ka[0]=Ka[1]=0):(Ka[2]+=Ka[0]/2,Ka[1]+=Ka[0]/2,Ka[0]=0),ka={a:Ka[Sa],b:Ka[db],c:Ka[eb]},Aa=(ma.a-ka.a)*S.yaxis._m,ta=(ma.c-ka.c-ma.b+ka.b)*S.xaxis._m);Ka=e(S.x0+ta,S.y0+Aa);S.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",Ka);ta=e(-ta,-Aa);S.clipDefRelative.select("path").attr("transform",ta);S.aaxis.range=[ka.a,S.sum-ka.b-ka.c];S.baxis.range=[S.sum-ka.a-ka.c,ka.b];S.caxis.range=[S.sum-ka.a-ka.b,ka.c];S.drawAxes(!1);S._hasClipOnAxisFalse&&
S.plotContainer.select(".scatterlayer").selectAll(".trace").call(c.hideOutsideRangePoints,S);Z.emit("plotly_relayouting",P(ka))}function U(){a.call("_guiRelayout",Z,P(ka))}var S=this,X=S.layers.plotbg.select("path").node(),Z=S.graphDiv,aa=Z._fullLayout._zoomlayer,fa,ha;this.dragOptions={element:X,gd:Z,plotinfo:{id:S.id,domain:Z._fullLayout[S.id].domain,xaxis:S.xaxis,yaxis:S.yaxis},subplot:S.id,prepFn:function(ta,Aa,Ka){S.dragOptions.xaxes=[S.xaxis];S.dragOptions.yaxes=[S.yaxis];fa=Z._fullLayout._invScaleX;
ha=Z._fullLayout._invScaleY;var Sa=S.dragOptions.dragmode=Z._fullLayout.dragmode;x(Sa)?S.dragOptions.minDrag=1:S.dragOptions.minDrag=void 0;"zoom"===Sa?(S.dragOptions.moveFn=N,S.dragOptions.clickFn=M,S.dragOptions.doneFn=T,ta=X.getBoundingClientRect(),ja=Aa-ta.left,ba=Ka-ta.top,Z._fullLayout._calcInverseTransform(Z),Aa=g.apply3DTransform(Z._fullLayout._invTransform)(ja,ba),ja=Aa[0],ba=Aa[1],ka=ma={a:S.aaxis.range[0],b:S.baxis.range[1],c:S.caxis.range[1]},qa=S.aaxis.range[1]-ma.a,oa=h(S.graphDiv._fullLayout[S.id].bgcolor).getLuminance(),
na="M0,"+S.h+"L"+S.w/2+", 0L"+S.w+","+S.h+"Z",la=!1,ia=aa.append("path").attr("class","zoombox").attr("transform",e(S.x0,S.y0)).style({fill:.2<oa?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",na),sa=aa.append("path").attr("class","zoombox-corners").attr("transform",e(S.x0,S.y0)).style({fill:p.background,stroke:p.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),S.clearSelect(Z)):"pan"===Sa?(S.dragOptions.moveFn=Q,S.dragOptions.clickFn=M,S.dragOptions.doneFn=U,ka=ma={a:S.aaxis.range[0],
b:S.baxis.range[1],c:S.caxis.range[1]},S.clearSelect(Z)):(C(Sa)||x(Sa))&&y(ta,Aa,Ka,S.dragOptions,Sa)}};var ja,ba,ma,qa,ka,oa,na,la,ia,sa;X.onmousemove=function(ta){v.hover(Z,ta,S.id);Z._fullLayout._lasthover=X;Z._fullLayout._hoversubplot=S.id};X.onmouseout=function(ta){Z._dragging||u.unhover(Z,ta)};u.init(this.dragOptions)}},{"../../components/color":643,"../../components/dragelement":662,"../../components/dragelement/helpers":661,"../../components/drawing":665,"../../components/fx":683,"../../components/titles":738,
"../../lib":778,"../../lib/extend":768,"../../registry":911,"../cartesian/axes":828,"../cartesian/constants":834,"../cartesian/select":847,"../cartesian/set_convert":848,"../plots":891,d3:169,tinycolor2:576}],911:[function(b,K,G){function q(u){if(u.layoutAttributes&&(u=u.layoutAttributes._arrayAttrRegexps))for(var v=0;v<u.length;v++)n(G.layoutArrayRegexes,u[v])}function m(u,v){(u=G.componentsRegistry[u].schema)&&u.traces&&(u=u.traces[v])&&r(G.modules[v]._module.attributes,u)}function l(u,v){(u=G.componentsRegistry[u].schema)&&
u.transforms&&(u=u.transforms[v])&&r(G.transformsRegistry[v].attributes,u)}function h(u,v){if((u=G.componentsRegistry[u].schema)&&u.subplots){var x=G.subplotsRegistry[v];v=x.layoutAttributes;x="subplot"===x.attr?x.name:x.attr;Array.isArray(x)&&(x=x[0]);u=u.subplots[x];v&&u&&r(v,u)}}function a(u){"object"===typeof u&&(u=u.type);return u}var g=b("./lib/loggers"),e=b("./lib/noop"),n=b("./lib/push_unique"),p=b("./lib/is_plain_object"),c=b("./lib/dom").addStyleRule;K=b("./lib/extend");var d=b("./plots/attributes"),
f=b("./plots/layout_attributes"),k=K.extendFlat,r=K.extendDeepAll;G.modules={};G.allCategories={};G.allTypes=[];G.subplotsRegistry={};G.transformsRegistry={};G.componentsRegistry={};G.layoutArrayContainers=[];G.layoutArrayRegexes=[];G.traceLayoutAttributes={};G.localeRegistry={};G.apiMethodRegistry={};G.collectableSubplotTypes=null;G.register=function(u){G.collectableSubplotTypes=null;if(u)u&&!Array.isArray(u)&&(u=[u]);else throw Error("No argument passed to Plotly.register.");for(var v=0;v<u.length;v++){var x=
u[v];if(!x)throw Error("Invalid module was attempted to be registered!");switch(x.moduleType){case "trace":var C=void 0,z=void 0,y=x.name,D=x.categories,A=x.meta;if(G.modules[y])g.log("Type "+y+" already registered");else{if(!G.subplotsRegistry[x.basePlotModule.name]){var t=void 0,B=x.basePlotModule,F=B.name;if(G.subplotsRegistry[F])g.log("Plot type "+F+" already registered.");else for(t in q(B),G.subplotsRegistry[F]=B,G.componentsRegistry)h(t,B.name)}t={};for(B=0;B<D.length;B++)t[D[B]]=!0,G.allCategories[D[B]]=
!0;G.modules[y]={_module:x,categories:t};A&&Object.keys(A).length&&(G.modules[y].meta=A);G.allTypes.push(y);for(z in G.componentsRegistry)m(z,y);x.layoutAttributes&&k(G.traceLayoutAttributes,x.layoutAttributes);x=x.basePlotModule;z=x.name;if("mapbox"===z)for(C in x=x.constants.styleRules,x)c(".js-plotly-plot .plotly .mapboxgl-"+C,x[C]);"geo"!==z&&"mapbox"!==z||void 0!==window.PlotlyGeoAssets||(window.PlotlyGeoAssets={topojson:{}})}break;case "transform":C=void 0;z=x;if("string"!==typeof z.name)throw Error("Transform module *name* must be a string.");
x="Transform module "+z.name;y="function"===typeof z.transform;D="function"===typeof z.calcTransform;if(!y&&!D)throw Error(x+" is missing a *transform* or *calcTransform* method.");y&&D&&g.log([x+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed before all *calcTransform* methods."].join(" "));p(z.attributes)||g.log(x+" registered without an *attributes* object.");"function"!==typeof z.supplyDefaults&&g.log(x+" registered without a *supplyDefaults* method.");
G.transformsRegistry[z.name]=z;for(C in G.componentsRegistry)l(C,z.name);break;case "component":y=z=C=void 0;if("string"!==typeof x.name)throw Error("Component module *name* must be a string.");D=x.name;G.componentsRegistry[D]=x;x.layoutAttributes&&(x.layoutAttributes._isLinkedToArray&&n(G.layoutArrayContainers,D),q(x));for(y in G.modules)m(D,y);for(z in G.subplotsRegistry)h(D,z);for(C in G.transformsRegistry)l(D,C);x.schema&&x.schema.layout&&r(f,x.schema.layout);break;case "locale":y=x;x=y.name;
C=x.split("-")[0];z=y.dictionary;y=y.format;D=z&&Object.keys(z).length;A=y&&Object.keys(y).length;t=G.localeRegistry;(B=t[x])||(t[x]=B={});C!==x&&((x=t[C])||(t[C]=x={}),D&&x.dictionary===B.dictionary&&(x.dictionary=z),A&&x.format===B.format&&(x.format=y));D&&(B.dictionary=z);A&&(B.format=y);break;case "apiMethod":G.apiMethodRegistry[x.name]=x.fn;break;default:throw Error("Invalid module was attempted to be registered!");}}};G.getModule=function(u){return(u=G.modules[a(u)])?u._module:!1};G.traceIs=
function(u,v){u=a(u);if("various"===u)return!1;var x=G.modules[u];x||(u&&"area"!==u&&g.log("Unrecognized trace type "+u+"."),x=G.modules[d.type.dflt]);return!!x.categories[v]};G.getTransformIndices=function(u,v){var x=[];u=u.transforms||[];for(var C=0;C<u.length;C++)u[C].type===v&&x.push(C);return x};G.hasTransform=function(u,v){u=u.transforms||[];for(var x=0;x<u.length;x++)if(u[x].type===v)return!0;return!1};G.getComponentMethod=function(u,v){return(u=G.componentsRegistry[u])?u[v]||e:e};G.call=function(){var u=
arguments[0],v=[].slice.call(arguments,1);return G.apiMethodRegistry[u].apply(null,v)}},{"./lib/dom":766,"./lib/extend":768,"./lib/is_plain_object":779,"./lib/loggers":782,"./lib/noop":787,"./lib/push_unique":793,"./plots/attributes":824,"./plots/layout_attributes":882}],912:[function(b,K,G){function q(a){switch(a){case "themes__thumb":a={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case "thumbnail":a={title:{text:""},hidesources:!0,
showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:a={}}return a}var m=b("../registry");b=b("../lib");var l=b.extendFlat,h=b.extendDeep;K.exports=function(a,g){a.framework&&a.framework.isPolar&&(a=a.framework.getConfig());var e,n=a.layout,p=h([],a.data);n=h({},n,q(g.tileClass));a=a._context||{};g.width&&(n.width=g.width);g.height&&(n.height=g.height);if("thumbnail"===g.tileClass||"themes__thumb"===g.tileClass){n.annotations=[];var c=Object.keys(n);
for(e=0;e<c.length;e++)-1<["xaxis","yaxis","zaxis"].indexOf(c[e].slice(0,5))&&(n[c[e]].title={text:""});for(e=0;e<p.length;e++)c=p[e],c.showscale=!1,c.marker&&(c.marker.showscale=!1),m.traceIs(c,"pie-like")&&(c.textposition="none")}if(Array.isArray(g.annotations))for(e=0;e<g.annotations.length;e++)n.annotations.push(g.annotations[e]);c=Object.keys(n).filter(function(k){return k.match(/^scene\d*$/)});if(c.length){var d={};"thumbnail"===g.tileClass&&(d={title:{text:""},showaxeslabels:!1,showticklabels:!1,
linetickenable:!1});for(e=0;e<c.length;e++){var f=n[c[e]];f.xaxis||(f.xaxis={});f.yaxis||(f.yaxis={});f.zaxis||(f.zaxis={});l(f.xaxis,d);l(f.yaxis,d);l(f.zaxis,d);f._scene=null}}e=document.createElement("div");g.tileClass&&(e.className=g.tileClass);p={gd:e,td:e,layout:n,data:p,config:{staticPlot:void 0===g.staticPlot?!0:g.staticPlot,plotGlPixelRatio:void 0===g.plotGlPixelRatio?2:g.plotGlPixelRatio,displaylogo:g.displaylogo||!1,showLink:g.showLink||!1,showTips:g.showTips||!1,mapboxAccessToken:a.mapboxAccessToken}};
"transparent"!==g.setBackground&&(p.config.setBackground=g.setBackground||"opaque");p.gd.defaultLayout=q(g.tileClass);return p}},{"../lib":778,"../registry":911}],913:[function(b,K,G){var q=b("../lib"),m=b("../plot_api/to_image"),l=b("./filesaver"),h=b("./helpers");K.exports=function(a,g){var e;q.isPlainObject(a)||(e=q.getGraphDiv(a));g=g||{};g.format=g.format||"png";g.width=g.width||null;g.height=g.height||null;g.imageDataOnly=!0;return new Promise(function(n,p){e&&e._snapshotInProgress&&p(Error("Snapshotting already in progress."));
q.isIE()&&"svg"!==g.format&&p(Error(h.MSG_IE_BAD_FORMAT));e&&(e._snapshotInProgress=!0);var c=m(a,g),d=g.filename||a.fn||"newplot";d+="."+g.format.replace("-",".");c.then(function(f){e&&(e._snapshotInProgress=!1);return l(f,d,g.format)}).then(function(f){n(f)}).catch(function(f){e&&(e._snapshotInProgress=!1);p(f)})})}},{"../lib":778,"../plot_api/to_image":820,"./filesaver":914,"./helpers":915}],914:[function(b,K,G){var q=b("../lib"),m=b("./helpers");K.exports=function(l,h,a){var g=document.createElement("a"),
e="download"in g;return new Promise(function(n,p){q.isIE9orBelow()&&p(Error("IE < 10 unsupported"));if(q.isSafari())return m.octetStream(("svg"===a?",":";base64,")+encodeURIComponent(l)),n(h);if(q.isIE())return p=m.createBlob(l,"svg"),window.navigator.msSaveBlob(p,h),n(h);if(e)return p=m.createBlob(l,a),p=m.createObjectURL(p),g.href=p,g.download=h,document.body.appendChild(g),g.click(),document.body.removeChild(g),m.revokeObjectURL(p),n(h);p(Error("download error"))})}},{"../lib":778,"./helpers":915}],
915:[function(b,K,G){var q=b("../registry");G.getDelay=function(l){return l._has?l._has("gl3d")||l._has("gl2d")||l._has("mapbox")?500:0:0};G.getRedrawFunc=function(l){return function(){var h=l._fullLayout||{};(h._has&&h._has("polar")||!l.data||!l.data[0]||!l.data[0].r)&&q.getComponentMethod("colorbar","draw")(l)}};G.encodeSVG=function(l){return"data:image/svg+xml,"+encodeURIComponent(l)};G.encodeJSON=function(l){return"data:application/json,"+encodeURIComponent(l)};var m=window.URL||window.webkitURL;
G.createObjectURL=function(l){return m.createObjectURL(l)};G.revokeObjectURL=function(l){return m.revokeObjectURL(l)};G.createBlob=function(l,h){if("svg"===h)return new window.Blob([l],{type:"image/svg+xml;charset=utf-8"});if("full-json"===h)return new window.Blob([l],{type:"application/json;charset=utf-8"});l=window.atob(l);for(var a=l.length,g=new ArrayBuffer(a),e=new Uint8Array(g),n=0;n<a;n++)e[n]=l.charCodeAt(n);return new window.Blob([g],{type:"image/"+h})};G.octetStream=function(l){document.location.href=
"data:application/octet-stream"+l};G.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/;G.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},{"../registry":911}],916:[function(b,K,G){G=b("./helpers");b={getDelay:G.getDelay,getRedrawFunc:G.getRedrawFunc,clone:b("./cloneplot"),toSVG:b("./tosvg"),svgToImg:b("./svgtoimg"),toImage:b("./toimage"),downloadImage:b("./download")};K.exports=b},{"./cloneplot":912,"./download":913,"./helpers":915,"./svgtoimg":917,"./toimage":918,
"./tosvg":919}],917:[function(b,K,G){var q=b("../lib"),m=b("events").EventEmitter,l=b("./helpers");K.exports=function(h){var a=h.emitter||new m,g=new Promise(function(e,n){var p=window.Image,c=h.svg,d=h.format||"png";if(q.isIE()&&"svg"!==d)return p=Error(l.MSG_IE_BAD_FORMAT),n(p),h.promise?g:a.emit("error",p);var f=h.canvas,k=h.scale||1,r=k*(h.width||300),u=k*(h.height||150),v=f.getContext("2d"),x=new p;if("svg"===d||q.isIE9orBelow()||q.isSafari())var C=l.encodeSVG(c);else{var z=l.createBlob(c,"svg");
C=l.createObjectURL(z)}f.width=r;f.height=u;x.onload=function(){z=null;l.revokeObjectURL(C);"svg"!==d&&v.drawImage(x,0,0,r,u);switch(d){case "jpeg":var y=f.toDataURL("image/jpeg");break;case "png":y=f.toDataURL("image/png");break;case "webp":y=f.toDataURL("image/webp");break;case "svg":y=C;break;default:if(n(Error("Image format is not jpeg, png, svg or webp.")),!h.promise)return a.emit("error","Image format is not jpeg, png, svg or webp.")}e(y);h.promise||a.emit("success",y)};x.onerror=function(y){z=
null;l.revokeObjectURL(C);n(y);if(!h.promise)return a.emit("error",y)};x.src=C});return h.promise?g:a}},{"../lib":778,"./helpers":915,events:110}],918:[function(b,K,G){var q=b("events").EventEmitter,m=b("../registry"),l=b("../lib"),h=b("./helpers"),a=b("./cloneplot"),g=b("./tosvg"),e=b("./svgtoimg");K.exports=function(n,p){var c=new q;n=a(n,{format:"png"});var d=n.gd;d.style.position="absolute";d.style.left="-5000px";document.body.appendChild(d);var f=h.getRedrawFunc(d);m.call("plot",d,n.data,n.layout,
n.config).then(f).then(function(){var k=h.getDelay(d._fullLayout);setTimeout(function(){var r=g(d),u=document.createElement("canvas");u.id=l.randstr();c=e({format:p.format,width:d._fullLayout.width,height:d._fullLayout.height,canvas:u,emitter:c,svg:r});c.clean=function(){d&&document.body.removeChild(d)}},k)}).catch(function(k){c.emit("error",k)});return c}},{"../lib":778,"../registry":911,"./cloneplot":912,"./helpers":915,"./svgtoimg":917,"./tosvg":919,events:110}],919:[function(b,K,G){function q(p){var c=
m.select("body").append("div").style({display:"none"}).html("");p=p.replace(/(&[^;]*;)/gi,function(d){return"&lt;"===d?"&#60;":"&rt;"===d?"&#62;":-1!==d.indexOf("<")||-1!==d.indexOf(">")?"":c.html(d).text()});c.remove();return p}var m=b("d3"),l=b("../lib"),h=b("../components/drawing"),a=b("../components/color"),g=b("../constants/xmlns_namespaces"),e=/"/g,n=/("TOBESTRIPPED)|(TOBESTRIPPED")/g;K.exports=function(p,c,d){var f=p._fullLayout,k=f._paper,r=f._toppaper,u=f.width,v=f.height,x;k.insert("rect",
":first-child").call(h.setRect,0,0,u,v).call(a.fill,f.paper_bgcolor);var C=f._basePlotModules||[];for(x=0;x<C.length;x++){var z=C[x];z.toSVG&&z.toSVG(p)}if(r)for(x=r.node().childNodes,p=Array.prototype.slice.call(x),x=0;x<p.length;x++)r=p[x],r.childNodes.length&&k.node().appendChild(r);f._draggers&&f._draggers.remove();k.node().style.background="";k.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var D=m.select(this);if("hidden"===this.style.visibility||"none"===
this.style.display)D.remove();else{D.style({visibility:null,display:null});var A=this.style.fontFamily;A&&-1!==A.indexOf('"')&&D.style("font-family",A.replace(e,"TOBESTRIPPED"))}});if(f._gradientUrlQueryParts){x=[];for(var y in f._gradientUrlQueryParts)x.push(y);x.length&&k.selectAll(x.join(",")).each(function(){var D=m.select(this),A=this.style.fill;A&&-1!==A.indexOf("url(")&&D.style("fill",A.replace(e,"TOBESTRIPPED"));(A=this.style.stroke)&&-1!==A.indexOf("url(")&&D.style("stroke",A.replace(e,"TOBESTRIPPED"))})}"pdf"!==
c&&"eps"!==c||k.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0);k.node().setAttributeNS(g.xmlns,"xmlns",g.svg);k.node().setAttributeNS(g.xmlns,"xmlns:xlink",g.xlink);"svg"===c&&d&&(k.attr("width",d*u),k.attr("height",d*v),k.attr("viewBox","0 0 "+u+" "+v));c=(new window.XMLSerializer).serializeToString(k.node());c=q(c);c=c.replace(/&(?!\w+;|#[0-9]+;| #x[0-9A-F]+;)/g,"&amp;");c=c.replace(n,"'");l.isIE()&&(c=c.replace(/"/gi,"'"),c=c.replace(/(\('#)([^']*)('\))/gi,'("#$2")'),c=c.replace(/(\\')/gi,
'"'));return c}},{"../components/color":643,"../components/drawing":665,"../constants/xmlns_namespaces":754,"../lib":778,d3:169}],920:[function(b,K,G){var q=b("../../lib");K.exports=function(m,l){for(var h=0;h<m.length;h++)m[h].i=h;q.mergeArray(l.text,m,"tx");q.mergeArray(l.hovertext,m,"htx");if(l=l.marker)if(q.mergeArray(l.opacity,m,"mo",!0),q.mergeArray(l.color,m,"mc"),l=l.line)q.mergeArray(l.color,m,"mlc"),q.mergeArrayCastPositive(l.width,m,"mlw")}},{"../../lib":778}],921:[function(b,K,G){G=b("../scatter/attributes");
var q=b("../../plots/template_attributes").hovertemplateAttrs,m=b("../../plots/template_attributes").texttemplateAttrs,l=b("../../components/colorscale/attributes"),h=b("../../plots/font_attributes"),a=b("./constants");b=b("../../lib/extend").extendFlat;h=h({editType:"calc",arrayOk:!0,colorEditType:"style"});var g=b({},G.marker.line.width,{dflt:0});g=b({width:g,editType:"calc"},l("marker.line"));l=b({line:g,editType:"calc"},l("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"}});
K.exports={x:G.x,x0:G.x0,dx:G.dx,y:G.y,y0:G.y0,dy:G.dy,xperiod:G.xperiod,yperiod:G.yperiod,xperiod0:G.xperiod0,yperiod0:G.yperiod0,xperiodalignment:G.xperiodalignment,yperiodalignment:G.yperiodalignment,text:G.text,texttemplate:m({editType:"plot"},{keys:a.eventDataKeys}),hovertext:G.hovertext,hovertemplate:q({},{keys:a.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"none",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end",
"middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:b({},h,{}),insidetextfont:b({},h,{}),outsidetextfont:b({},h,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:b({},G.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,
editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:l,offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},selected:{marker:{opacity:G.selected.marker.opacity,color:G.selected.marker.color,editType:"style"},textfont:G.selected.textfont,editType:"style"},unselected:{marker:{opacity:G.unselected.marker.opacity,color:G.unselected.marker.color,editType:"style"},textfont:G.unselected.textfont,editType:"style"},
r:G.r,t:G.t,_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plots/font_attributes":856,"../../plots/template_attributes":906,"../scatter/attributes":1187,"./constants":923}],922:[function(b,K,G){var q=b("../../plots/cartesian/axes"),m=b("../../plots/cartesian/align_period"),l=b("../../components/colorscale/helpers").hasColorscale,h=b("../../components/colorscale/calc"),a=b("./arrays_to_calcdata"),
g=b("../scatter/calc_selection");K.exports=function(e,n){var p=q.getFromId(e,n.xaxis||"x"),c=q.getFromId(e,n.yaxis||"y");var d={msUTC:!(!n.base&&0!==n.base)};if("h"===n.orientation){d=p.makeCalcdata(n,"x",d);var f=c.makeCalcdata(n,"y");p=m(n,c,"y",f);c=!!n.yperiodalignment}else d=c.makeCalcdata(n,"y",d),f=p.makeCalcdata(n,"x"),p=m(n,p,"x",f),c=!!n.xperiodalignment;for(var k=Math.min(p.length,d.length),r=Array(k),u=0;u<k;u++)r[u]={p:p[u],s:d[u]},c&&(r[u].orig_p=f[u]),n.ids&&(r[u].id=String(n.ids[u]));
l(n,"marker")&&h(e,n,{vals:n.marker.color,containerStr:"marker",cLetter:"c"});l(n,"marker.line")&&h(e,n,{vals:n.marker.line.color,containerStr:"marker.line",cLetter:"c"});a(r,n);g(r,n);return r}},{"../../components/colorscale/calc":651,"../../components/colorscale/helpers":654,"../../plots/cartesian/align_period":825,"../../plots/cartesian/axes":828,"../scatter/calc_selection":1189,"./arrays_to_calcdata":920}],923:[function(b,K,G){K.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},{}],924:[function(b,
K,G){function q(z,y,D,A,t){if(A.length){var B;m(D,A);switch(t.mode){case "overlay":l(y,D,A,t);break;case "group":var F=[];var I=[];for(B=0;B<A.length;B++){var J=A[B];var L=J[0].trace;void 0===L.offset?I.push(J):F.push(J)}if(I.length){I=new C(I,{sepNegVal:!1,overlapNoMerge:!t.norm});var H=z._fullLayout;z=I.minDiff;B=I.traces;J=B.length;L=I.positions.length!==I.distinctPositions.length;var P=z*(1-t.gap),M=x(H,y._id)+B[0][0].trace.orientation;H=H._alignmentOpts[M]||{};for(M=0;M<J;M++){var N=B[M],T=N[0].trace,
Q=Object.keys((H[T.alignmentgroup]||{}).offsetGroups||{}).length;var U=Q?P/Q:L?P/J:P;var S=U*(1-(t.groupgap||0));T=Q?((2*T._offsetIndex+1-Q)*U-S)/2:L?((2*M+1-J)*U-S)/2:-S/2;N=N[0].t;N.barwidth=S;N.poffset=T;N.bargroupwidth=P;N.bardelta=z}I.binWidth=B[0][0].t.barwidth/100;a(I);g(y,I);e(y,I,L);z=I.traces;for(B=0;B<z.length;B++)if(J=z[B],void 0===J[0].trace.base)for(L=new C([J],{sepNegVal:!0,overlapNoMerge:!0}),P=0;P<J.length;P++)if(H=J[P],H.p!==r&&(M=L.put(H.p,H.b+H.s)))H.b=M;t.norm?(p(I),c(D,I,t)):
n(D,I)}F.length&&l(y,D,F,t);break;case "stack":case "relative":F=[];I=[];for(B=0;B<A.length;B++)J=A[B],L=J[0].trace,void 0===L.base?I.push(J):F.push(J);if(I.length){z=new C(I,{sepNegVal:"relative"===t.mode,overlapNoMerge:!(t.norm||"stack"===t.mode||"relative"===t.mode)});h(y,z,t);B=D._id.charAt(0);J=z.traces;for(M=0;M<J.length;M++)if(L=J[M],P=L[0].trace,"funnel"===P.type)for(S=0;S<L.length;S++)N=L[S],N.s!==r&&z.put(N.p,-.5*N.s);for(M=0;M<J.length;M++){L=J[M];P=L[0].trace;H="funnel"===P.type;T=[];
for(S=0;S<L.length;S++)N=L[S],N.s!==r&&(U=H?N.s:N.s+N.b,Q=z.put(N.p,U),U=Q+U,N.b=Q,N[B]=U,t.norm||(T.push(U),N.hasB&&T.push(Q)));t.norm||(P._extremes[D._id]=v.findExtremes(D,T,{tozero:!0,padded:!0}))}for(B=0;B<I.length;B++)for(J=I[B],L=0;L<J.length;L++)P=J[L],P.s!==r&&P.b+P.s===z.get(P.p,P.s)&&(P._outmost=!0);t.norm&&c(D,z,t)}F.length&&l(y,D,F,t)}d(A,y)}}function m(z,y){var D;for(D=0;D<y.length;D++){var A=y[D];var t=A[0].trace;var B="funnel"===t.type?t._base:t.base,F="h"===t.orientation?t.xcalendar:
t.ycalendar,I="category"===z.type||"multicategory"===z.type?function(){return null}:z.d2c;if(k(B)){for(t=0;t<Math.min(B.length,A.length);t++){var J=I(B[t],0,F);f(J)?(A[t].b=+J,A[t].hasB=1):A[t].b=0}for(;t<A.length;t++)A[t].b=0}else for(J=I(B,0,F),J=(B=f(J))?J:0,t=0;t<A.length;t++)A[t].b=J,B&&(A[t].hasB=1)}}function l(z,y,D,A){for(var t=0;t<D.length;t++){var B=new C([D[t]],{unitMinDiff:A.xCat||A.yCat,sepNegVal:!1,overlapNoMerge:!A.norm});h(z,B,A);A.norm?(p(B),c(y,B,A)):n(y,B)}}function h(z,y,D){var A=
y.minDiff,t=y.traces,B=A*(1-D.gap);D=B*(1-(D.groupgap||0));for(var F=-D/2,I=0;I<t.length;I++){var J=t[I][0].t;J.barwidth=D;J.poffset=F;J.bargroupwidth=B;J.bardelta=A}y.binWidth=t[0][0].t.barwidth/100;a(y);g(z,y);e(z,y)}function a(z){z=z.traces;var y,D;for(y=0;y<z.length;y++){var A=z[y],t=A[0],B=t.trace;t=t.t;var F=B._offset||B.offset,I=t.poffset;if(k(F)){var J=Array.prototype.slice.call(F,0,A.length);for(D=0;D<J.length;D++)f(J[D])||(J[D]=I);for(D=J.length;D<A.length;D++)J.push(I);t.poffset=J}else void 0!==
F&&(t.poffset=F);D=B._width||B.width;B=t.barwidth;if(k(D)){var L=Array.prototype.slice.call(D,0,A.length);for(D=0;D<L.length;D++)f(L[D])||(L[D]=B);for(D=L.length;D<A.length;D++)L.push(B);t.barwidth=L;if(void 0===F){J=[];for(D=0;D<A.length;D++)J.push(I+(B-L[D])/2);t.poffset=J}}else void 0!==D&&(t.barwidth=D,void 0===F&&(t.poffset=I+(B-D)/2))}}function g(z,y){y=y.traces;z=z._id.charAt(0);for(var D=0;D<y.length;D++){var A=y[D],t=A[0].t,B=t.poffset,F=Array.isArray(B);t=t.barwidth;for(var I=Array.isArray(t),
J=0;J<A.length;J++){var L=A[J],H=L.w=I?t[J]:t;L[z]=L.p+(F?B[J]:B)+H/2}}}function e(z,y,D){var A=y.traces,t=y.minDiff/2;v.minDtick(z,y.minDiff,y.distinctPositions[0],D);for(y=0;y<A.length;y++){D=A[y];var B=D[0],F=B.trace,I=[],J;for(J=0;J<D.length;J++){var L=D[J];var H=L.p-t;L=L.p+t;I.push(H,L)}if(F.width||F.offset){H=B.t;B=H.poffset;var P=H.barwidth,M=Array.isArray(B),N=Array.isArray(P);for(J=0;J<D.length;J++){L=D[J];var T=N?P[J]:P;H=L.p+(M?B[J]:B);L=H+T;I.push(H,L)}}F._extremes[z._id]=v.findExtremes(z,
I,{padded:!1})}}function n(z,y){y=y.traces;for(var D=z._id.charAt(0),A=0;A<y.length;A++){for(var t=y[A],B=t[0].trace,F=[],I=!1,J=0;J<t.length;J++){var L=t[J],H=L.b,P=H+L.s;L[D]=P;F.push(P);L.hasB&&F.push(H);L.hasB&&L.b||(I=!0)}B._extremes[z._id]=v.findExtremes(z,F,{tozero:I,padded:!0})}}function p(z){for(var y=z.traces,D=0;D<y.length;D++)for(var A=y[D],t=0;t<A.length;t++){var B=A[t];B.s!==r&&z.put(B.p,B.b+B.s)}}function c(z,y,D){function A(Z){return f(z.c2l(Z))&&(Z<J-I||Z>L+I||!f(J))}var t=y.traces,
B=z._id.charAt(0),F="fraction"===D.norm?1:100,I=F/1E9,J=z.l2c(z.c2l(0)),L="stack"===D.mode?F:J;for(D=0;D<t.length;D++){for(var H=t[D],P=H[0].trace,M=[],N=!1,T=!1,Q=0;Q<H.length;Q++){var U=H[Q];if(U.s!==r){var S=Math.abs(F/y.get(U.p,U.s));U.b*=S;U.s*=S;S=U.b;var X=S+U.s;U[B]=X;M.push(X);T=T||A(X);U.hasB&&(M.push(S),T=T||A(S));U.hasB&&U.b||(N=!0)}}P._extremes[z._id]=v.findExtremes(z,M,{tozero:N,padded:T})}}function d(z,y){y=y._id.charAt(0);var D={},A,t,B=Infinity,F=-Infinity;for(A=0;A<z.length;A++){var I=
z[A];for(t=0;t<I.length;t++){var J=I[t].p;f(J)&&(B=Math.min(B,J),F=Math.max(F,J))}}var L=1E4/(F-B);F=D.round=function(Q){return String(Math.round(L*(Q-B)))};for(A=0;A<z.length;A++){I=z[A];I[0].t.extents=D;J=I[0].t.poffset;var H=Array.isArray(J);for(t=0;t<I.length;t++){var P=I[t],M=P[y]-P.w/2;if(f(M)){var N=P[y]+P.w/2,T=F(P.p);D[T]=D[T]?[Math.min(M,D[T][0]),Math.max(N,D[T][1])]:[M,N]}P.p0=P.p+(H?J[t]:J);P.p1=P.p0+P.w;P.s0=P.b;P.s1=P.s0+P.s}}}var f=b("fast-isnumeric"),k=b("../../lib").isArrayOrTypedArray,
r=b("../../constants/numerical").BADNUM,u=b("../../registry"),v=b("../../plots/cartesian/axes"),x=b("../../plots/cartesian/constraints").getAxisGroup,C=b("./sieve.js");K.exports={crossTraceCalc:function(z,y){var D=y.xaxis;y=y.yaxis;for(var A=z._fullLayout,t=z._fullData,B=z.calcdata,F=[],I=[],J=0;J<t.length;J++){var L=t[J];if(!0===L.visible&&u.traceIs(L,"bar")&&L.xaxis===D._id&&L.yaxis===y._id&&("h"===L.orientation?F.push(B[J]):I.push(B[J]),L._computePh)){L=z.calcdata[J];for(var H=0;H<L.length;H++)"function"===
typeof L[H].ph0&&(L[H].ph0=L[H].ph0()),"function"===typeof L[H].ph1&&(L[H].ph1=L[H].ph1())}}A={xCat:"category"===D.type||"multicategory"===D.type,yCat:"category"===y.type||"multicategory"===y.type,mode:A.barmode,norm:A.barnorm,gap:A.bargap,groupgap:A.bargroupgap};q(z,D,y,I,A);q(z,y,D,F,A)},setGroupPositions:q}},{"../../constants/numerical":753,"../../lib":778,"../../plots/cartesian/axes":828,"../../plots/cartesian/constraints":835,"../../registry":911,"./sieve.js":934,"fast-isnumeric":241}],925:[function(b,
K,G){function q(f,k,r,u){f=k.orientation;f=p(r,k[{v:"x",h:"y"}[f]+"axis"])+f;var v=r._alignmentOpts||{};r=u("alignmentgroup");var x=v[f];x||(x=v[f]={});(f=x[r])?f.traces.push(k):f=x[r]={traces:[k],alignmentIndex:Object.keys(x).length,offsetGroups:{}};u=u("offsetgroup");f=f.offsetGroups;r=f[u];u&&(r||(r=f[u]={offsetIndex:Object.keys(f).length}),k._offsetIndex=r.offsetIndex)}function m(f,k,r,u,v,x){x=x||{};k=!1!==x.moduleHasSelected;var C=!1!==x.moduleHasUnselected,z=!1!==x.moduleHasConstrain,y=!1!==
x.moduleHasCliponaxis,D=!1!==x.moduleHasTextangle,A=!1!==x.moduleHasInsideanchor,t=!!x.hasPathbar,B=Array.isArray(v)||"auto"===v;x=B||"inside"===v;v=B||"outside"===v;if(x||v)r=d(u,"textfont",r.font),B=l.extendFlat({},r),(f=!(f.textfont&&f.textfont.color))&&delete B.color,d(u,"insidetextfont",B),t&&(t=l.extendFlat({},r),f&&delete t.color,d(u,"pathbar.textfont",t)),v&&d(u,"outsidetextfont",r),k&&u("selected.textfont.color"),C&&u("unselected.textfont.color"),z&&u("constraintext"),y&&u("cliponaxis"),
D&&u("textangle"),u("texttemplate");x&&A&&u("insidetextanchor")}var l=b("../../lib"),h=b("../../components/color"),a=b("../../registry"),g=b("../scatter/xy_defaults"),e=b("../scatter/period_defaults"),n=b("./style_defaults"),p=b("../../plots/cartesian/constraints").getAxisGroup,c=b("./attributes"),d=l.coerceFont;K.exports={supplyDefaults:function(f,k,r,u){function v(C,z){return l.coerce(f,k,c,C,z)}if(g(f,k,u,v)){e(f,k,u,v);v("orientation",k.x&&!k.y?"h":"v");v("base");v("offset");v("width");v("text");
v("hovertext");v("hovertemplate");var x=v("textposition");m(f,k,u,v,x,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0});n(f,k,v,r,u);r=(k.marker.line||{}).color;u=a.getComponentMethod("errorbars","supplyDefaults");u(f,k,r||h.defaultLine,{axis:"y"});u(f,k,r||h.defaultLine,{axis:"x",inherit:"y"});l.coerceSelectionMarkerOpacity(k,v)}else k.visible=!1},crossTraceDefaults:function(f,k){function r(C){return l.coerce(v._input,
v,c,C)}if("group"===k.barmode)for(var u=0;u<f.length;u++){var v=f[u];if("bar"===v.type){var x=v._input;q(x,v,k,r)}}},handleGroupingDefaults:q,handleText:m}},{"../../components/color":643,"../../lib":778,"../../plots/cartesian/constraints":835,"../../registry":911,"../scatter/period_defaults":1207,"../scatter/xy_defaults":1214,"./attributes":921,"./style_defaults":936}],926:[function(b,K,G){K.exports=function(q,m,l){q.x="xVal"in m?m.xVal:m.x;q.y="yVal"in m?m.yVal:m.y;m.xa&&(q.xaxis=m.xa);m.ya&&(q.yaxis=
m.ya);"h"===l.orientation?(q.label=q.y,q.value=q.x):(q.label=q.x,q.value=q.y);return q}},{}],927:[function(b,K,G){var q=b("fast-isnumeric"),m=b("tinycolor2"),l=b("../../lib").isArrayOrTypedArray;G.coerceString=function(h,a,g){if("string"===typeof a){if(a||!h.noBlank)return a}else if(("number"===typeof a||!0===a)&&!h.strict)return String(a);return void 0!==g?g:h.dflt};G.coerceNumber=function(h,a,g){if(q(a)){a=+a;var e=h.min,n=h.max;if(!(void 0!==e&&a<e||void 0!==n&&a>n))return a}return void 0!==g?
g:h.dflt};G.coerceColor=function(h,a,g){return m(a).isValid()?a:void 0!==g?g:h.dflt};G.coerceEnumerated=function(h,a,g){h.coerceNumber&&(a=+a);return-1!==h.values.indexOf(a)?a:void 0!==g?g:h.dflt};G.getValue=function(h,a){var g;Array.isArray(h)?a<h.length&&(g=h[a]):g=h;return g};G.getLineWidth=function(h,a){return 0<a.mlw?a.mlw:l(h.marker.line.width)?0:h.marker.line.width}},{"../../lib":778,"fast-isnumeric":241,tinycolor2:576}],928:[function(b,K,G){function q(c,d,f,k){function r(Q){return Q[H]-Q.w/
2}function u(Q){return Q[H]+Q.w/2}function v(Q,U){return l.inbox(Q-J,U-J,B+Math.min(1,Math.abs(U-Q)/T)-1)}function x(Q){return v(F(Q),I(Q))}function C(Q){var U=L,S=Q.b,X=Q[P];t&&(Q=Math.abs(Q.rawS)||0,0<U?X+=Q:0>U&&(X-=Q));return l.inbox(S-U,X-U,B+(X-U)/(X-S)-1)}var z=c.cd,y=z[0].trace,D=z[0].t,A="closest"===k,t="waterfall"===y.type,B=c.maxHoverDistance,F=A?r:function(Q){return Math.min(r(Q),Q.p-D.bardelta/2)},I=A?u:function(Q){return Math.max(u(Q),Q.p+D.bardelta/2)};if("h"===y.orientation){var J=
f;var L=d;var H="y";var P="x";var M=C;var N=x}else J=d,L=f,H="x",P="y",N=C,M=x;d=c[H+"a"];f=c[P+"a"];var T=Math.abs(d.r2c(d.range[1])-d.r2c(d.range[0]));k=l.getDistanceFunction(k,M,N,function(Q){return(M(Q)+N(Q))/2});l.getClosest(z,k,c);if(!1!==c.index&&z[c.index].p!==p)return A||(F=function(Q){return Math.min(r(Q),Q.p-D.bargroupwidth/2)},I=function(Q){return Math.max(u(Q),Q.p+D.bargroupwidth/2)}),z=z[c.index],k=y.base?z.b+z.s:z.s,c[P+"0"]=c[P+"1"]=f.c2p(z[P],!0),c[P+"LabelVal"]=k,k=D.extents[D.extents.round(z.p)],
c[H+"0"]=d.c2p(A?F(z):k[0],!0),c[H+"1"]=d.c2p(A?I(z):k[1],!0),c[H+"LabelVal"]=void 0!==z.orig_p?z.orig_p:z.p,c.labelLabel=n(d,c[H+"LabelVal"]),c.valueLabel=n(f,c[P+"LabelVal"]),c.baseLabel=n(f,z.b),c.spikeDistance=(C(z)+function(Q){return v(r(Q),u(Q))}(z))/2-B,c[H+"Spike"]=d.c2p(z.p,!0),g(z,y,c),c.hovertemplate=y.hovertemplate,c}function m(c,d){var f=d.mcc||c.marker.color,k=d.mlcc||c.marker.line.color;c=e(c,d);if(a.opacity(f))return f;if(a.opacity(k)&&c)return k}var l=b("../../components/fx"),h=b("../../registry"),
a=b("../../components/color"),g=b("../../lib").fillText,e=b("./helpers").getLineWidth,n=b("../../plots/cartesian/axes").hoverLabelText,p=b("../../constants/numerical").BADNUM;K.exports={hoverPoints:function(c,d,f,k){if(c=q(c,d,f,k))return f=c.cd,d=f[0].trace,f=f[c.index],c.color=m(d,f),h.getComponentMethod("errorbars","hoverInfo")(f,d,c),[c]},hoverOnBars:q,getTraceColor:m}},{"../../components/color":643,"../../components/fx":683,"../../constants/numerical":753,"../../lib":778,"../../plots/cartesian/axes":828,
"../../registry":911,"./helpers":927}],929:[function(b,K,G){K.exports={attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults").supplyDefaults,crossTraceDefaults:b("./defaults").crossTraceDefaults,supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc"),crossTraceCalc:b("./cross_trace_calc").crossTraceCalc,colorbar:b("../scatter/marker_colorbar"),arraysToCalcdata:b("./arrays_to_calcdata"),plot:b("./plot").plot,style:b("./style").style,styleOnSelect:b("./style").styleOnSelect,
hoverPoints:b("./hover").hoverPoints,eventData:b("./event_data"),selectPoints:b("./select"),moduleType:"trace",name:"bar",basePlotModule:b("../../plots/cartesian"),categories:"bar-like cartesian svg bar oriented errorBarsOK showLegend zoomScale".split(" "),animatable:!0,meta:{}}},{"../../plots/cartesian":841,"../scatter/marker_colorbar":1205,"./arrays_to_calcdata":920,"./attributes":921,"./calc":922,"./cross_trace_calc":924,"./defaults":925,"./event_data":926,"./hover":928,"./layout_attributes":930,
"./layout_defaults":931,"./plot":932,"./select":933,"./style":935}],930:[function(b,K,G){K.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],931:[function(b,K,G){var q=b("../../registry"),m=b("../../plots/cartesian/axes"),
l=b("../../lib"),h=b("./layout_attributes");K.exports=function(a,g,e){for(var n=!1,p=!1,c=!1,d={},f=l.coerce(a,g,h,"barmode",void 0),k=0;k<e.length;k++){var r=e[k];if(q.traceIs(r,"bar")&&r.visible){n=!0;if("group"===f){var u=r.xaxis+r.yaxis;d[u]&&(c=!0);d[u]=!0}r.visible&&"histogram"===r.type&&"category"!==m.getFromId({_fullLayout:g},r["v"===r.orientation?"xaxis":"yaxis"]).type&&(p=!0)}}n?("overlay"!==f&&l.coerce(a,g,h,"barnorm",void 0),l.coerce(a,g,h,"bargap",p&&!c?0:.2),l.coerce(a,g,h,"bargroupgap",
void 0)):delete g.barmode}},{"../../lib":778,"../../plots/cartesian/axes":828,"../../registry":911,"./layout_attributes":930}],932:[function(b,K,G){function q(H){return H.id}function m(H,P,M,N){var T=[],Q=[],U=N?P:M;P=N?M:P;T[0]=U.c2p(H.s0,!0);Q[0]=P.c2p(H.p0,!0);T[1]=U.c2p(H.s1,!0);Q[1]=P.c2p(H.p1,!0);return N?[T,Q]:[Q,T]}function l(H,P,M,N){if(!P.uniformtext.mode&&M&&0<M.duration){var T;N&&(T=N());return H.transition().duration(M.duration).ease(M.easing).each("end",function(){T&&T()}).each("interrupt",
function(){T&&T()})}return H}function h(H,P,M,N,T,Q,U,S,X,Z,aa){function fa(Aa,Ka,Sa){return r.ensureSingle(Aa,"text").text(Ka).attr({"class":"bartext bartext-"+ka,"text-anchor":"middle","data-notex":1}).call(x.font,Sa).call(u.convertToTspans,H)}var ha=P.xaxis,ja=P.yaxis;P=H._fullLayout;var ba=N[0].trace,ma="h"===ba.orientation,qa=n(P,N,T,ha,ja);var ka=p(ba,T);var oa=N[T],na=!("stack"===Z.mode||"relative"===Z.mode)||oa._outmost;if(qa&&"none"!==ka&&(!oa.isBlank&&Q!==U&&S!==X||"auto"!==ka&&"inside"!==
ka)){var la=P.font;N=A.getBarColor(N[T],ba);N=A.getInsideTextFont(ba,T,la,N);T=A.getOutsideTextFont(ba,T,la);la=M.datum();ma?"log"===ha.type&&0>=la.s0&&(Q=ha.range[0]<ha.range[1]?0:ha._length):"log"===ja.type&&0>=la.s0&&(S=ja.range[0]<ja.range[1]?ja._length:0);ha=Math.abs(U-Q)-2*L;ja=Math.abs(X-S)-2*L;"outside"===ka&&(na||oa.hasB||(ka="inside"));if("auto"===ka)if(na){ka="inside";var ia=r.ensureUniformFontSize(H,N);var sa=fa(M,qa,ia);var ta=x.bBox(sa.node());na=ta.width;la=ta.height;0<na&&0<la&&(na<=
ha&&la<=ja||na<=ja&&la<=ha||(ma?ha>=ja/la*na:ja>=ha/na*la))?ka="inside":(ka="outside",sa.remove(),sa=null)}else ka="inside";if(!sa&&(ia=r.ensureUniformFontSize(H,"outside"===ka?T:N),sa=fa(M,qa,ia),M=sa.attr("transform"),sa.attr("transform",""),ta=x.bBox(sa.node()),na=ta.width,la=ta.height,sa.attr("transform",M),0>=na||0>=la)){sa.remove();return}M=ba.textangle;"outside"===ka?(qa="both"===ba.constraintext||"outside"===ba.constraintext,Q=e(Q,U,S,X,ta,{isHorizontal:ma,constrained:qa,angle:M})):(qa="both"===
ba.constraintext||"inside"===ba.constraintext,Q=g(Q,U,S,X,ta,{isHorizontal:ma,constrained:qa,angle:M,anchor:ba.insidetextanchor}));Q.fontSize=ia.size;y(ba.type,Q,P);oa.transform=Q;l(sa,P,Z,aa).attr("transform",r.getTextTransform(Q))}else M.select("text").remove()}function a(H,P){var M=Math.PI/180*P;P=Math.abs(Math.sin(M));M=Math.abs(Math.cos(M));return{x:H.width*M+H.height*P,y:H.width*P+H.height*M}}function g(H,P,M,N,T,Q){var U=!!Q.isHorizontal,S=!!Q.constrained,X=Q.angle||0,Z=Q.anchor||"end",aa=
"end"===Z;Z="start"===Z;var fa=((Q.leftToRight||0)+1)/2,ha=1-fa,ja=T.width,ba=T.height,ma=Math.abs(P-H),qa=Math.abs(N-M);Q=ma>2*L&&qa>2*L?L:0;ma-=2*Q;qa-=2*Q;var ka="auto"===X?0:X;"auto"!==X||ja<=ma&&ba<=qa||!(ja>ma||ba>qa)||(ja>qa||ba>ma)&&ja<ba===ma<qa||(ka+=90);ja=a(T,ka);X=1;S&&(X=Math.min(1,ma/ja.x,qa/ja.y));S=T.left*ha+T.right*fa;T=(T.top+T.bottom)/2;fa=(H+L)*ha+(P-L)*fa;ha=(M+N)/2;qa=ma=0;if(Z||aa)aa=(U?ja.x:ja.y)/2,ja=U?H<P?1:-1:M<N?1:-1,U?Z?(fa=H+ja*Q,ma=-ja*aa):(fa=P-ja*Q,ma=ja*aa):Z?(ha=
M+ja*Q,qa=-ja*aa):(ha=N-ja*Q,qa=ja*aa);return{textX:S,textY:T,targetX:fa,targetY:ha,anchorX:ma,anchorY:qa,scale:X,rotate:ka}}function e(H,P,M,N,T,Q){var U=!!Q.isHorizontal,S=!!Q.constrained,X=Q.angle||0,Z=T.width,aa=T.height,fa=Math.abs(P-H),ha=Math.abs(N-M);Q=U?ha>2*L?L:0:fa>2*L?L:0;var ja=1;S&&(ja=U?Math.min(1,ha/aa):Math.min(1,fa/Z));S="auto"===X?0:X;X=a(T,S);X=(U?X.x:X.y)/2;Z=(T.left+T.right)/2;T=(T.top+T.bottom)/2;aa=(H+P)/2;fa=(M+N)/2;var ba=ha=0;H=U?P<H?1:-1:M<N?1:-1;U?(aa=P-H*Q,ha=H*X):(fa=
N+H*Q,ba=-H*X);return{textX:Z,textY:T,targetX:aa,targetY:fa,anchorX:ha,anchorY:ba,scale:ja,rotate:S}}function n(H,P,M,N,T){var Q=P[0].trace;H=Q.texttemplate?c(H,P,M,N,T):Q.textinfo?d(P,M,N,T):t.getValue(Q.text,M);return t.coerceString(F,H)}function p(H,P){H=t.getValue(H.textposition,P);return t.coerceEnumerated(I,H)}function c(H,P,M,N,T){function Q(ba){return z(ja,+ba,!0).text}var U=P[0].trace,S=r.castOption(U,M,"texttemplate");if(!S)return"";var X="waterfall"===U.type,Z="funnel"===U.type;if("h"===
U.orientation){var aa="y";var fa=T;var ha="x";var ja=N}else aa="x",fa=N,ha="y",ja=T;M=P[M];P={};P.label=M.p;P.labelLabel=P[aa+"Label"]=z(fa,M.p,!0).text;aa=r.castOption(U,M.i,"text");if(0===aa||aa)P.text=aa;P.value=M.s;P.valueLabel=P[ha+"Label"]=Q(M.s);ha={};J(ha,U,M.i);X&&(P.delta=+M.rawS||M.s,P.deltaLabel=Q(P.delta),P.final=M.v,P.finalLabel=Q(P.final),P.initial=P.final-P.delta,P.initialLabel=Q(P.initial));Z&&(P.value=M.s,P.valueLabel=Q(P.value),P.percentInitial=M.begR,P.percentInitialLabel=r.formatPercent(M.begR),
P.percentPrevious=M.difR,P.percentPreviousLabel=r.formatPercent(M.difR),P.percentTotal=M.sumR,P.percenTotalLabel=r.formatPercent(M.sumR));if(X=r.castOption(U,M.i,"customdata"))P.customdata=X;return r.texttemplateString(S,P,H._d3locale,ha,P,U._meta||{})}function d(H,P,M,N){function T(ja){return z(U?M:N,+ja,!0).text}var Q=H[0].trace,U="h"===Q.orientation,S="waterfall"===Q.type,X="funnel"===Q.type,Z=H[P],aa=Q.textinfo.split("+"),fa=[],ha=function(ja){return-1!==aa.indexOf(ja)};ha("label")&&fa.push(z(U?
N:M,H[P].p,!0).text);ha("text")&&(H=r.castOption(Q,Z.i,"text"),(0===H||H)&&fa.push(H));S&&(S=+Z.rawS||Z.s,H=Z.v,P=H-S,ha("initial")&&fa.push(T(P)),ha("delta")&&fa.push(T(S)),ha("final")&&fa.push(T(H)));X&&(ha("value")&&fa.push(T(Z.s)),X=0,ha("percent initial")&&X++,ha("percent previous")&&X++,ha("percent total")&&X++,X=1<X,ha("percent initial")&&(H=r.formatPercent(Z.begR),X&&(H+=" of initial"),fa.push(H)),ha("percent previous")&&(H=r.formatPercent(Z.difR),X&&(H+=" of previous"),fa.push(H)),ha("percent total")&&
(H=r.formatPercent(Z.sumR),X&&(H+=" of total"),fa.push(H)));return fa.join("<br>")}var f=b("d3"),k=b("fast-isnumeric"),r=b("../../lib"),u=b("../../lib/svg_text_utils"),v=b("../../components/color"),x=b("../../components/drawing"),C=b("../../registry"),z=b("../../plots/cartesian/axes").tickText;G=b("./uniform_text");var y=G.recordMinTextSize,D=G.clearMinTextSize,A=b("./style"),t=b("./helpers");G=b("./constants");var B=b("./attributes"),F=B.text,I=B.textposition,J=b("../../components/fx/helpers").appendArrayPointValue,
L=G.TEXTPAD;K.exports={plot:function(H,P,M,N,T,Q){var U=P.xaxis,S=P.yaxis,X=H._fullLayout;T||(T={mode:X.barmode,norm:X.barmode,gap:X.bargap,groupgap:X.bargroupgap},D("bar",X));M=r.makeTraceGroups(N,M,"trace bars").each(function(Z){var aa=f.select(this),fa=Z[0].trace,ha="funnel"===fa.type,ja="bar"===fa.type||ha,ba=0;"waterfall"===fa.type&&fa.connector.visible&&"between"===fa.connector.mode&&(ba=fa.connector.line.width/2);var ma="h"===fa.orientation,qa=T&&0<T.duration;ha=r.ensureSingle(aa,"g","points");
var ka=fa.ids?q:void 0;ha=ha.selectAll("g.point").data(r.identity,ka);ha.enter().append("g").classed("point",!0);ha.exit().remove();ha.each(function(oa,na){function la(ab){var Ya=f.round(lb/2%1,2);return 0===T.gap&&0===T.groupgap?f.round(Math.round(ab)-Ya,2):ab}function ia(ab,Ya,hb){return hb&&ab===Ya?ab:2<=Math.abs(ab-Ya)?la(ab):ab>Ya?Math.ceil(ab):Math.floor(ab)}var sa=f.select(this),ta=m(oa,U,S,ma),Aa=ta[0][0],Ka=ta[0][1],Sa=ta[1][0];ta=ta[1][1];var db=0===(ma?Ka-Aa:ta-Sa);db&&ja&&t.getLineWidth(fa,
oa)&&(db=!1);db||(db=!k(Aa)||!k(Ka)||!k(Sa)||!k(ta));(oa.isBlank=db)&&(ma?Ka=Aa:ta=Sa);ba&&!db&&(ma?(Aa-=(Aa<Ka?1:-1)*ba,Ka+=(Aa<Ka?1:-1)*ba):(Sa-=(Sa<ta?1:-1)*ba,ta+=(Sa<ta?1:-1)*ba));if("waterfall"===fa.type){if(!db){var eb=fa[oa.dir].marker;var lb=eb.line.width;eb=eb.color}}else lb=t.getLineWidth(fa,oa),eb=oa.mc||fa.marker.color;H._context.staticPlot||(eb=1>v.opacity(eb)||.01<lb?la:ia,Aa=eb(Aa,Ka,ma),Ka=eb(Ka,Aa,ma),Sa=eb(Sa,ta,!ma),ta=eb(ta,Sa,!ma));eb=l(r.ensureSingle(sa,"path"),X,T,Q);eb.style("vector-effect",
"non-scaling-stroke").attr("d",isNaN((Ka-Aa)*(ta-Sa))||db&&H._context.staticPlot?"M0,0Z":"M"+Aa+","+Sa+"V"+ta+"H"+Ka+"V"+Sa+"Z").call(x.setClipUrl,P.layerClipId,H);!X.uniformtext.mode&&qa&&(db=x.makePointStyleFns(fa),x.singlePointStyle(oa,eb,fa,db,H));h(H,P,sa,Z,na,Aa,Ka,Sa,ta,T,Q);P.layerClipId&&x.hideOutsideRangePoint(oa,sa.select("text"),U,S,fa.xcalendar,fa.ycalendar)});x.setClipUrl(aa,!1===fa.cliponaxis?null:P.layerClipId,H)});C.getComponentMethod("errorbars","plot")(H,M,P,T)},toMoveInsideBar:g}},
{"../../components/color":643,"../../components/drawing":665,"../../components/fx/helpers":679,"../../lib":778,"../../lib/svg_text_utils":803,"../../plots/cartesian/axes":828,"../../registry":911,"./attributes":921,"./constants":923,"./helpers":927,"./style":935,"./uniform_text":937,d3:169,"fast-isnumeric":241}],933:[function(b,K,G){K.exports=function(q,m){var l=q.cd,h=q.xaxis,a=q.yaxis,g=l[0].trace,e="funnel"===g.type;g="h"===g.orientation;var n=[],p;if(!1===m)for(p=0;p<l.length;p++)l[p].selected=
0;else for(p=0;p<l.length;p++){var c=l[p];if("ct"in c)var d=c.ct;else{var f=c,k=h,r=a;d=g;var u=e,v=k.c2p(d?f.s0:f.p0,!0);k=k.c2p(d?f.s1:f.p1,!0);var x=r.c2p(d?f.p0:f.s0,!0);f=r.c2p(d?f.p1:f.s1,!0);d=u?[(v+k)/2,(x+f)/2]:d?[k,(x+f)/2]:[(v+k)/2,f]}m.contains(d,!1,p,q)?(n.push({pointNumber:p,x:h.c2d(c.x),y:a.c2d(c.y)}),c.selected=1):c.selected=0}return n}},{}],934:[function(b,K,G){function q(h,a){this.traces=h;this.sepNegVal=a.sepNegVal;this.overlapNoMerge=a.overlapNoMerge;for(var g=Infinity,e=[],n=
0;n<h.length;n++){for(var p=h[n],c=0;c<p.length;c++){var d=p[c];d.p!==l&&e.push(d.p)}p[0]&&p[0].width1&&(g=Math.min(p[0].width1,g))}this.positions=e;h=m(e,{unitMinDiff:a.unitMinDiff});this.distinctPositions=h.vals;this.binWidth=this.minDiff=1===h.vals.length&&Infinity!==g?g:Math.min(h.minDiff,g);this.bins={}}K.exports=q;var m=b("../../lib").distinctVals,l=b("../../constants/numerical").BADNUM;q.prototype.put=function(h,a){h=this.getLabel(h,a);var g=this.bins[h]||0;this.bins[h]=g+a;return g};q.prototype.get=
function(h,a){h=this.getLabel(h,a);return this.bins[h]||0};q.prototype.getLabel=function(h,a){return(0>a&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?h:Math.round(h/this.binWidth))}},{"../../constants/numerical":753,"../../lib":778}],935:[function(b,K,G){function q(C,z,y){C.selectAll("text").each(function(D){var A=n.select(this);D=d.ensureUniformFontSize(y,l(A,D,z,y));c.font(A,D)})}function m(C,z,y){C.each(function(D){var A=n.select(this);if(D.selected){D=d.ensureUniformFontSize(y,l(A,D,z,y));var t=
z.selected.textfont&&z.selected.textfont.color;t&&(D.color=t);c.font(A,D)}else c.selectedTextStyle(A,z)})}function l(C,z,y,D){D=D._fullLayout.font;var A=y.textfont;C.classed("bartext-inside")?(C=e(z,y),A=h(y,z.i,D,C)):C.classed("bartext-outside")&&(A=a(y,z.i,D));return A}function h(C,z,y,D){y=g(r,C.textfont,z,y);if(void 0===C._input.textfont||void 0===C._input.textfont.color||Array.isArray(C.textfont.color)&&void 0===C.textfont.color[z])y={color:p.contrast(D),family:y.family,size:y.size};return g(u,
C.insidetextfont,z,y)}function a(C,z,y){y=g(r,C.textfont,z,y);return g(v,C.outsidetextfont,z,y)}function g(C,z,y,D){z=z||{};var A=x.getValue(z.family,y),t=x.getValue(z.size,y);z=x.getValue(z.color,y);return{family:x.coerceString(C.family,A,D.family),size:x.coerceNumber(C.size,t,D.size),color:x.coerceColor(C.color,z,D.color)}}function e(C,z){return"waterfall"===z.type?z[C.dir].marker.color:C.mc||z.marker.color}var n=b("d3"),p=b("../../components/color"),c=b("../../components/drawing"),d=b("../../lib"),
f=b("../../registry"),k=b("./uniform_text").resizeText;G=b("./attributes");var r=G.textfont,u=G.insidetextfont,v=G.outsidetextfont,x=b("./helpers");K.exports={style:function(C){var z=n.select(C).selectAll("g.barlayer").selectAll("g.trace");k(C,z,"bar");var y=z.size(),D=C._fullLayout;z.style("opacity",function(A){return A[0].trace.opacity}).each(function(A){("stack"===D.barmode&&1<y||0===D.bargap&&0===D.bargroupgap&&!A[0].trace.marker.line.width)&&n.select(this).attr("shape-rendering","crispEdges")});
z.selectAll("g.points").each(function(A){var t=n.select(this);A=A[0].trace;c.pointStyle(t.selectAll("path"),A,C);q(t,A,C)});f.getComponentMethod("errorbars","style")(z)},styleTextPoints:q,styleOnSelect:function(C,z,y){z=z[0].trace;z.selectedpoints?(c.selectedPointStyle(y.selectAll("path"),z),m(y.selectAll("text"),z,C)):(c.pointStyle(y.selectAll("path"),z,C),q(y,z,C),f.getComponentMethod("errorbars","style")(y))},getInsideTextFont:h,getOutsideTextFont:a,getBarColor:e,resizeText:k}},{"../../components/color":643,
"../../components/drawing":665,"../../lib":778,"../../registry":911,"./attributes":921,"./helpers":927,"./uniform_text":937,d3:169}],936:[function(b,K,G){var q=b("../../components/color"),m=b("../../components/colorscale/helpers").hasColorscale,l=b("../../components/colorscale/defaults");K.exports=function(h,a,g,e,n){g("marker.color",e);m(h,"marker")&&l(h,a,n,g,{prefix:"marker.",cLetter:"c"});g("marker.line.color",q.defaultLine);m(h,"marker.line")&&l(h,a,n,g,{prefix:"marker.line.",cLetter:"c"});g("marker.line.width");
g("marker.opacity");g("selected.marker.color");g("unselected.marker.color")}},{"../../components/color":643,"../../components/colorscale/defaults":653,"../../components/colorscale/helpers":654}],937:[function(b,K,G){var q=b("d3"),m=b("../../lib");K.exports={recordMinTextSize:function(l,h,a){if(a.uniformtext.mode){l="_"+l+"Text_minsize";var g=a.uniformtext.minsize,e=h.scale*h.fontSize;h.hide=e<g;a[l]=a[l]||Infinity;h.hide||(a[l]=Math.min(a[l],Math.max(e,g)))}},clearMinTextSize:function(l,h){h["_"+
l+"Text_minsize"]=void 0},resizeText:function(l,h,a){l=l._fullLayout;var g=l["_"+a+"Text_minsize"];if(g){var e="hide"===l.uniformtext.mode;switch(a){case "funnelarea":case "pie":case "sunburst":a="g.slice";break;case "treemap":a="g.slice, g.pathbar";break;default:a="g.points > g.point"}h.selectAll(a).each(function(n){if(n=n.transform)n.scale=e&&n.hide?0:g/n.fontSize,q.select(this).select("text").attr("transform",m.getTextTransform(n))})}}}},{"../../lib":778,d3:169}],938:[function(b,K,G){G=b("../../plots/template_attributes").hovertemplateAttrs;
var q=b("../../lib/extend").extendFlat,m=b("../scatterpolar/attributes");b=b("../bar/attributes");K.exports={r:m.r,theta:m.theta,r0:m.r0,dr:m.dr,theta0:m.theta0,dtheta:m.dtheta,thetaunit:m.thetaunit,base:q({},b.base,{}),offset:q({},b.offset,{}),width:q({},b.width,{}),text:q({},b.text,{}),hovertext:q({},b.hovertext,{}),marker:b.marker,hoverinfo:m.hoverinfo,hovertemplate:G(),selected:b.selected,unselected:b.unselected}},{"../../lib/extend":768,"../../plots/template_attributes":906,"../bar/attributes":921,
"../scatterpolar/attributes":1261}],939:[function(b,K,G){var q=b("../../components/colorscale/helpers").hasColorscale,m=b("../../components/colorscale/calc"),l=b("../bar/arrays_to_calcdata"),h=b("../bar/cross_trace_calc").setGroupPositions,a=b("../scatter/calc_selection"),g=b("../../registry").traceIs,e=b("../../lib").extendFlat;K.exports={calc:function(n,p){function c(x){var C=p[x];void 0!==C&&(p["_"+x]=Array.isArray(C)?k.makeCalcdata(p,x):k.d2c(C,p.thetaunit))}var d=n._fullLayout,f=p.subplot,k=
d[f].angularaxis;d=d[f].radialaxis.makeCalcdata(p,"r");f=k.makeCalcdata(p,"theta");for(var r=p._length,u=Array(r),v=0;v<r;v++)u[v]={p:f[v],s:d[v]};"linear"===k.type&&(c("width"),c("offset"));q(p,"marker")&&m(n,p,{vals:p.marker.color,containerStr:"marker",cLetter:"c"});q(p,"marker.line")&&m(n,p,{vals:p.marker.line.color,containerStr:"marker.line",cLetter:"c"});l(u,p);a(u,p);return u},crossTraceCalc:function(n,p,c){for(var d=n.calcdata,f=[],k=0;k<d.length;k++){var r=d[k],u=r[0].trace;!0===u.visible&&
g(u,"bar")&&u.subplot===c&&f.push(r)}c=e({},p.radialaxis,{_id:"x"});h(n,p.angularaxis,c,f,{mode:p.barmode,norm:p.barnorm,gap:p.bargap,groupgap:p.bargroupgap})}}},{"../../components/colorscale/calc":651,"../../components/colorscale/helpers":654,"../../lib":778,"../../registry":911,"../bar/arrays_to_calcdata":920,"../bar/cross_trace_calc":924,"../scatter/calc_selection":1189}],940:[function(b,K,G){var q=b("../../lib"),m=b("../scatterpolar/defaults").handleRThetaDefaults,l=b("../bar/style_defaults"),
h=b("./attributes");K.exports=function(a,g,e,n){function p(c,d){return q.coerce(a,g,h,c,d)}m(a,g,n,p)?(p("thetaunit"),p("base"),p("offset"),p("width"),p("text"),p("hovertext"),p("hovertemplate"),l(a,g,p,e,n),q.coerceSelectionMarkerOpacity(g,p)):g.visible=!1}},{"../../lib":778,"../bar/style_defaults":936,"../scatterpolar/defaults":1263,"./attributes":938}],941:[function(b,K,G){var q=b("../../components/fx"),m=b("../../lib"),l=b("../bar/hover").getTraceColor,h=m.fillText,a=b("../scatterpolar/hover").makeHoverPointText,
g=b("../../plots/polar/helpers").isPtInsidePolygon;K.exports=function(e,n,p){var c=e.cd,d=c[0].trace,f=e.subplot,k=f.radialAxis,r=f.vangles,u=r?g:m.isPtInsideSector,v=e.maxHoverDistance,x=f.angularAxis._period||2*Math.PI,C=Math.abs(k.g2p(Math.sqrt(n*n+p*p))),z=Math.atan2(p,n);k.range[0]>k.range[1]&&(z+=Math.PI);q.getClosest(c,function(y){return u(C,z,[y.rp0,y.rp1],[y.thetag0,y.thetag1],r)?v+Math.min(1,Math.abs(y.thetag1-y.thetag0)/x)-1+(y.rp1-C)/(y.rp1-y.rp0)-1:Infinity},e);if(!1!==e.index)return n=
c[e.index],e.x0=e.x1=n.ct[0],e.y0=e.y1=n.ct[1],p=m.extendFlat({},n,{r:n.s,theta:n.p}),h(n,d,e),a(p,d,f,e),e.hovertemplate=d.hovertemplate,e.color=l(d,n),e.xLabelVal=e.yLabelVal=void 0,0>n.s&&(e.idealAlign="left"),[e]}},{"../../components/fx":683,"../../lib":778,"../../plots/polar/helpers":893,"../bar/hover":928,"../scatterpolar/hover":1265}],942:[function(b,K,G){K.exports={moduleType:"trace",name:"barpolar",basePlotModule:b("../../plots/polar"),categories:["polar","bar","showLegend"],attributes:b("./attributes"),
layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults"),supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc").calc,crossTraceCalc:b("./calc").crossTraceCalc,plot:b("./plot"),colorbar:b("../scatter/marker_colorbar"),formatLabels:b("../scatterpolar/format_labels"),style:b("../bar/style").style,styleOnSelect:b("../bar/style").styleOnSelect,hoverPoints:b("./hover"),selectPoints:b("../bar/select"),meta:{}}},{"../../plots/polar":894,"../bar/select":933,"../bar/style":935,"../scatter/marker_colorbar":1205,
"../scatterpolar/format_labels":1264,"./attributes":938,"./calc":939,"./defaults":940,"./hover":941,"./layout_attributes":943,"./layout_defaults":944,"./plot":945}],943:[function(b,K,G){K.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},{}],944:[function(b,K,G){var q=b("../../lib"),m=b("./layout_attributes");K.exports=function(l,h,a){for(var g={},e,n=0;n<a.length;n++)e=a[n],"barpolar"===
e.type&&!0===e.visible&&(e=e.subplot,g[e]||(q.coerce(l[e]||{},h[e],m,"barmode",void 0),q.coerce(l[e]||{},h[e],m,"bargap",void 0),g[e]=1))}},{"../../lib":778,"./layout_attributes":943}],945:[function(b,K,G){function q(e){var n=e.cxx,p=e.cyy;return e.vangles?function(c,d,f,k){if(0<h.angleDelta(f,k)){var r=f;f=k}else r=k;k=g.findEnclosingVertexAngles(r,e.vangles)[0];var u=g.findEnclosingVertexAngles(f,e.vangles)[1];return g.pathPolygonAnnulus(c,d,r,f,[k,(r+f)/2,u],n,p)}:function(c,d,f,k){return h.pathAnnulus(c,
d,f,k,n,p)}}var m=b("d3"),l=b("fast-isnumeric"),h=b("../../lib"),a=b("../../components/drawing"),g=b("../../plots/polar/helpers");K.exports=function(e,n,p){var c=n.xaxis,d=n.yaxis,f=n.radialAxis,k=n.angularAxis,r=q(n),u=n.layers.frontplot.select("g.barlayer");h.makeTraceGroups(u,p,"trace bars").each(function(){var v=m.select(this),x=h.ensureSingle(v,"g","points").selectAll("g.point").data(h.identity);x.enter().append("g").style("vector-effect","non-scaling-stroke").style("stroke-miterlimit",2).classed("point",
!0);x.exit().remove();x.each(function(C){var z=m.select(this),y=C.rp0=f.c2p(C.s0),D=C.rp1=f.c2p(C.s1),A=C.thetag0=k.c2g(C.p0),t=C.thetag1=k.c2g(C.p1);if(l(y)&&l(D)&&l(A)&&l(t)&&y!==D&&A!==t){var B=f.c2g(C.s1),F=(A+t)/2;C.ct=[c.c2p(B*Math.cos(F)),d.c2p(B*Math.sin(F))];C=r(y,D,A,t)}else C="M0,0Z";h.ensureSingle(z,"path").attr("d",C)});a.setClipUrl(v,n._hasClipOnAxisFalse?n.clipIds.forTraces:null,e)})}},{"../../components/drawing":665,"../../lib":778,"../../plots/polar/helpers":893,d3:169,"fast-isnumeric":241}],
946:[function(b,K,G){G=b("../scatter/attributes");var q=b("../bar/attributes"),m=b("../../components/color/attributes"),l=b("../../plots/template_attributes").hovertemplateAttrs;b=b("../../lib/extend").extendFlat;var h=G.marker,a=h.line;K.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",
editType:"calc"},xperiod:G.xperiod,yperiod:G.yperiod,xperiod0:G.xperiod0,yperiod0:G.yperiod0,xperiodalignment:G.xperiodalignment,yperiodalignment:G.yperiodalignment,name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",
editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",
values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:b({},h.symbol,{arrayOk:!1,editType:"plot"}),opacity:b({},h.opacity,{arrayOk:!1,dflt:1,editType:"style"}),size:b({},h.size,{arrayOk:!1,editType:"calc"}),color:b({},h.color,{arrayOk:!1,editType:"style"}),
line:{color:b({},a.color,{arrayOk:!1,dflt:m.defaultLine,editType:"style"}),width:b({},a.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:G.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},offsetgroup:q.offsetgroup,
alignmentgroup:q.alignmentgroup,selected:{marker:G.selected.marker,editType:"style"},unselected:{marker:G.unselected.marker,editType:"style"},text:b({},G.text,{}),hovertext:b({},G.hovertext,{}),hovertemplate:l({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},{"../../components/color/attributes":642,"../../lib/extend":768,"../../plots/template_attributes":906,"../bar/attributes":921,"../scatter/attributes":1187}],947:[function(b,K,G){function q(x,C,z,
y){var D=C+"0"in x;if(C in x||D&&"d"+C in x)return y=z.makeCalcdata(x,C),[f(x,z,C,y),y];y=D?x[C+"0"]:"name"in x&&("category"===z.type||c(x.name)&&-1!==["linear","log"].indexOf(z.type)||k.isDateTime(x.name)&&"date"===z.type)?x.name:y;C="multicategory"===z.type?z.r2c_just_indices(y):z.d2c(y,0,x[C+"calendar"]);x=x._length;z=Array(x);for(y=0;y<x;y++)z[y]=C;return[z]}function m(x,C){for(var z=x.length,y=Array(z+1),D=0;D<z;D++)y[D]=x[D]-C;y[z]=x[z-1]+C;return y}function l(x){for(var C=Array(x),z=0;z<x;z++)C[z]=
[];return C}function h(x,C,z){for(var y in v)k.isArrayOrTypedArray(C[y])&&(Array.isArray(z)?k.isArrayOrTypedArray(C[y][z[0]])&&(x[v[y]]=C[y][z[0]][z[1]]):x[v[y]]=C[y][z])}function a(x,C){if(k.isArrayOrTypedArray(C.selectedpoints))for(var z=0;z<x.length;z++){for(var y=x[z].pts||[],D={},A=0;A<y.length;A++)D[y[A].i]=A;k.tagSelected(y,C,D)}}function g(x,C){return x.v-C.v}function e(x){return x.v}function n(x,C,z){return 0===z?x.q1:Math.min(x.q1,C[Math.min(k.findBin(2.5*x.q1-1.5*x.q3,C,!0)+1,z-1)])}function p(x,
C,z){return 0===z?x.q3:Math.max(x.q3,C[Math.max(k.findBin(2.5*x.q3-1.5*x.q1,C),0)])}var c=b("fast-isnumeric"),d=b("../../plots/cartesian/axes"),f=b("../../plots/cartesian/align_period"),k=b("../../lib"),r=b("../../constants/numerical").BADNUM,u=k._;K.exports=function(x,C){var z=x._fullLayout,y=d.getFromId(x,C.xaxis||"x"),D=d.getFromId(x,C.yaxis||"y"),A=[],t="violin"===C.type?"_numViolins":"_numBoxes",B,F;if("h"===C.orientation){var I=y;var J="x";y="y";var L=!!C.yperiodalignment}else I=D,J="y",D=y,
y="x",L=!!C.xperiodalignment;D=q(C,y,D,z[t]);var H=D[0],P=D[1];D=k.distinctVals(H);var M=D.vals;D=D.minDiff/2;var N="all"===(C.boxpoints||C.points)?k.identity:function(ja){return ja.v<X.lf||ja.v>X.uf};if(C._hasPreCompStats){var T=C[J],Q=function(ja){return I.d2c((C[ja]||[])[B])};M=Infinity;var U=-Infinity;for(B=0;B<C._length;B++){var S=H[B];if(c(S)){var X={};X.pos=X[y]=S;L&&P&&(X.orig_p=P[B]);X.q1=Q("q1");X.med=Q("median");X.q3=Q("q3");S=[];if(T&&k.isArrayOrTypedArray(T[B]))for(F=0;F<T[B].length;F++){var Z=
I.d2c(T[B][F]);Z!==r&&(Z={v:Z,i:[B,F]},h(Z,C,[B,F]),S.push(Z))}X.pts=S.sort(g);Z=X[J]=S.map(e);F=Z.length;if(X.med!==r&&X.q1!==r&&X.q3!==r&&X.med>=X.q1&&X.q3>=X.med){var aa=Q("lowerfence");X.lf=aa!==r&&aa<=X.q1?aa:n(X,Z,F);aa=Q("upperfence");X.uf=aa!==r&&aa>=X.q3?aa:p(X,Z,F);aa=Q("mean");X.mean=aa!==r?aa:F?k.mean(Z,F):(X.q1+X.q3)/2;var fa=Q("sd");X.sd=aa!==r&&0<=fa?fa:F?k.stdev(Z,F,X.mean):X.q3-X.q1;X.lo=4*X.q1-3*X.q3;X.uo=4*X.q3-3*X.q1;aa=Q("notchspan");aa=aa!==r&&0<aa?aa:0===F?0:1.57*(X.q3-X.q1)/
Math.sqrt(F);X.ln=X.med-aa;X.un=X.med+aa;aa=X.lf;fa=X.uf;C.boxpoints&&Z.length&&(aa=Math.min(aa,Z[0]),fa=Math.max(fa,Z[F-1]));C.notched&&(aa=Math.min(aa,X.ln),fa=Math.max(fa,X.un));X.min=aa;X.max=fa}else k.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+X.q1,"median = "+X.med,"q3 = "+X.q3].join("\n")),Z=X.med!==r?X.med:X.q1!==r?X.q3!==r?(X.q1+X.q3)/2:X.q1:X.q3!==r?X.q3:0,X.med=Z,X.q1=X.q3=Z,X.lf=X.uf=Z,X.mean=X.sd=Z,X.ln=X.un=Z,X.min=X.max=Z;M=Math.min(M,X.min);U=Math.max(U,X.max);
X.pts2=S.filter(N);A.push(X)}}C._extremes[I._id]=d.findExtremes(I,[M,U],{padded:!0})}else{L=I.makeCalcdata(C,J);S=m(M,D);P=M.length;U=l(P);for(B=0;B<C._length;B++)Z=L[B],c(Z)&&(F=k.findBin(H[B],S),0<=F&&F<P&&(Z={v:Z,i:B},h(Z,C,B),U[F].push(Z)));H=Infinity;aa=-Infinity;S=C.quartilemethod;fa="exclusive"===S;var ha="inclusive"===S;for(B=0;B<P;B++)0<U[B].length&&(X={},X.pos=X[y]=M[B],S=X.pts=U[B].sort(g),Z=X[J]=S.map(e),F=Z.length,X.min=Z[0],X.max=Z[F-1],X.mean=k.mean(Z,F),X.sd=k.stdev(Z,F,X.mean),X.med=
k.interp(Z,.5),F%2&&(fa||ha)?(fa?(T=Z.slice(0,F/2),Q=Z.slice(F/2+1)):ha&&(T=Z.slice(0,F/2+1),Q=Z.slice(F/2)),X.q1=k.interp(T,.5),X.q3=k.interp(Q,.5)):(X.q1=k.interp(Z,.25),X.q3=k.interp(Z,.75)),X.lf=n(X,Z,F),X.uf=p(X,Z,F),X.lo=4*X.q1-3*X.q3,X.uo=4*X.q3-3*X.q1,Z=0===F?0:1.57*(X.q3-X.q1)/Math.sqrt(F),X.ln=X.med-Z,X.un=X.med+Z,H=Math.min(H,X.ln),aa=Math.max(aa,X.un),X.pts2=S.filter(N),A.push(X));C._extremes[I._id]=d.findExtremes(I,C.notched?L.concat([H,aa]):L,{padded:!0})}a(A,C);return 0<A.length?(A[0].t=
{num:z[t],dPos:D,posLetter:y,valLetter:J,labels:{med:u(x,"median:"),min:u(x,"min:"),q1:u(x,"q1:"),q3:u(x,"q3:"),max:u(x,"max:"),mean:"sd"===C.boxmean?u(x,"mean \u00b1 \u03c3:"):u(x,"mean:"),lf:u(x,"lower fence:"),uf:u(x,"upper fence:")}},z[t]++,A):[{t:{empty:!0}}]};var v={text:"tx",hovertext:"htx"}},{"../../constants/numerical":753,"../../lib":778,"../../plots/cartesian/align_period":825,"../../plots/cartesian/axes":828,"fast-isnumeric":241}],948:[function(b,K,G){function q(g,e,n,p){var c=e.calcdata;
e=e._fullLayout;var d=p._id,f=d.charAt(0),k,r,u=[],v=0;for(k=0;k<n.length;k++){var x=c[n[k]];for(r=0;r<x.length;r++)u.push(p.c2l(x[r].pos,!0)),v+=(x[r].pts2||[]).length}if(u.length){k=l.distinctVals(u,{unitMinDiff:"category"===p.type||"multicategory"===p.type});u=k.minDiff/2;m.minDtick(p,k.minDiff,k.vals[0],!0);var C=e["violin"===g?"_numViolins":"_numBoxes"],z="group"===e[g+"mode"]&&1<C,y=1-e[g+"gap"];g=1-e[g+"groupgap"];for(k=0;k<n.length;k++){x=c[n[k]];var D=x[0].trace,A=x[0].t;r=D.width;var t=
D.side,B,F;if(r){var I=B=F=r/2;var J=0}else I=u,z?(B=h(e,p._id)+D.orientation,F=(B=Object.keys(((e._alignmentOpts[B]||{})[D.alignmentgroup]||{}).offsetGroups||{}).length)||C,J=B?D._offsetIndex:A.num,B=I*y*g/F,J=2*I*(-.5+(J+.5)/F)*y,F=I*y/F):(B=I*y*g,J=0,F=I);A.dPos=I;A.bPos=J;A.bdPos=B;A.wHover=F;B=J+B;A=!!r;F=(D.boxpoints||D.points)&&0<v;if("positive"===t)t=I*(r?1:.5),r=J;else if("negative"===t){t=J;r=I*(r?1:.5);var L=B}else t=r=I,J=L=B;if(F){I=D.pointpos;F=D.jitter;var H=D.marker.size/2,P=0;if(0<=
I+F)if(P=B*(I+F),P>t){A=!0;var M=H;var N=P}else P>J&&(M=H,N=t);P<=t&&(N=t);t=0;if(0>=I-F)if(t=-B*(I-F),t>r){A=!0;var T=H;var Q=t}else t>L&&(T=H,Q=r);t<=r&&(Q=r)}else N=t,Q=r;I=Array(x.length);for(r=0;r<x.length;r++)I[r]=x[r].pos;D._extremes[d]=m.findExtremes(p,I,{padded:A,vpadminus:Q,vpadplus:N,vpadLinearized:!0,ppadminus:{x:T,y:M}[f],ppadplus:{x:M,y:T}[f]})}}}var m=b("../../plots/cartesian/axes"),l=b("../../lib"),h=b("../../plots/cartesian/constraints").getAxisGroup,a=["v","h"];K.exports={crossTraceCalc:function(g,
e){var n=g.calcdata,p=e.xaxis;e=e.yaxis;for(var c=0;c<a.length;c++){for(var d=a[c],f="h"===d?e:p,k=[],r=0;r<n.length;r++){var u=n[r],v=u[0].t;u=u[0].trace;!0!==u.visible||"box"!==u.type&&"candlestick"!==u.type||v.empty||(u.orientation||"v")!==d||u.xaxis!==p._id||u.yaxis!==e._id||k.push(r)}q("box",g,k,f)}},setPositionOffset:q}},{"../../lib":778,"../../plots/cartesian/axes":828,"../../plots/cartesian/constraints":835}],949:[function(b,K,G){function q(c,d,f,k){function r(J){var L=0;J&&J.length&&(L+=
1,l.isArrayOrTypedArray(J[0])&&J[0].length&&(L+=1));return L}function u(J){return l.validate(c[J],p[J])}var v=f("y"),x=f("x");if("box"===d.type){var C=f("q1"),z=f("median");var y=f("q3");d._hasPreCompStats=C&&C.length&&z&&z.length&&y&&y.length;y=Math.min(l.minRowLength(C),l.minRowLength(z),l.minRowLength(y))}C=r(v);z=r(x);var D=C&&l.minRowLength(v),A=z&&l.minRowLength(x),t=k.calendar,B={autotypenumbers:k.autotypenumbers};if(d._hasPreCompStats)switch(String(z)+String(C)){case "00":v=u("x0")||u("dx");
var F=!u("y0")&&!u("dy")||v?"v":"h";var I=y;break;case "10":F="v";I=Math.min(y,A);break;case "20":F="h";I=Math.min(y,x.length);break;case "01":F="h";I=Math.min(y,D);break;case "02":F="v";I=Math.min(y,v.length);break;case "12":F="v";I=Math.min(y,A,v.length);break;case "21":F="h";I=Math.min(y,x.length,D);break;case "11":I=0;break;case "22":F=!1;for(I=0;I<x.length;I++)if("category"===n(x[I],t,B)){F=!0;break}if(F)F="v",I=Math.min(y,A,v.length);else{for(I=0;I<v.length;I++)if("category"===n(v[I],t,B)){F=
!0;break}F?(F="h",I=Math.min(y,x.length,D)):(F="v",I=Math.min(y,A,v.length))}}else 0<C?(F="v",I=0<z?Math.min(A,D):Math.min(D)):0<z?(F="h",I=Math.min(A)):I=0;I?(d._length=I,v=f("orientation",F),d._hasPreCompStats?"v"===v&&0===z?(f("x0",0),f("dx",1)):"h"===v&&0===C&&(f("y0",0),f("dy",1)):"v"===v&&0===z?f("x0"):"h"===v&&0===C&&f("y0"),h.getComponentMethod("calendars","handleTraceDefaults")(c,d,["x","y"],k)):d.visible=!1}function m(c,d,f,k){k=k.prefix;c=l.coerce2(c,d,p,"marker.outliercolor");var r=f("marker.line.outliercolor"),
u="outliers";if(d._hasPreCompStats)u="all";else if(c||r)u="suspectedoutliers";(k=f(k+"points",u))?(f("jitter","all"===k?.3:0),f("pointpos","all"===k?-1.5:0),f("marker.symbol"),f("marker.opacity"),f("marker.size"),f("marker.color",d.line.color),f("marker.line.color"),f("marker.line.width"),"suspectedoutliers"===k&&(f("marker.line.outliercolor",d.marker.color),f("marker.line.outlierwidth")),f("selected.marker.color"),f("unselected.marker.color"),f("selected.marker.size"),f("unselected.marker.size"),
f("text"),f("hovertext")):delete d.marker;k=f("hoveron");"all"!==k&&-1===k.indexOf("points")||f("hovertemplate");l.coerceSelectionMarkerOpacity(d,f)}var l=b("../../lib"),h=b("../../registry"),a=b("../../components/color"),g=b("../scatter/period_defaults"),e=b("../bar/defaults").handleGroupingDefaults,n=b("../../plots/cartesian/axis_autotype"),p=b("./attributes");K.exports={supplyDefaults:function(c,d,f,k){function r(x,C){return l.coerce(c,d,p,x,C)}q(c,d,r,k);if(!1!==d.visible){g(c,d,k,r);if(k=d._hasPreCompStats)r("lowerfence"),
r("upperfence");r("line.color",(c.marker||{}).color||f);r("line.width");r("fillcolor",a.addOpacity(d.line.color,.5));f=!1;if(k){var u=r("mean"),v=r("sd");u&&u.length&&(f=!0,v&&v.length&&(f="sd"))}r("boxmean",f);r("whiskerwidth");r("width");r("quartilemethod");f=!1;k?(k=r("notchspan"))&&k.length&&(f=!0):l.validate(c.notchwidth,p.notchwidth)&&(f=!0);r("notched",f)&&r("notchwidth");m(c,d,r,{prefix:"box"})}},crossTraceDefaults:function(c,d){function f(x){return l.coerce(r._input,r,p,x)}for(var k,r,u=
0;u<c.length;u++){r=c[u];var v=r.type;if("box"===v||"violin"===v)k=r._input,"group"===d[v+"mode"]&&e(k,r,d,f)}},handleSampleDefaults:q,handlePointsDefaults:m}},{"../../components/color":643,"../../lib":778,"../../plots/cartesian/axis_autotype":829,"../../registry":911,"../bar/defaults":925,"../scatter/period_defaults":1207,"./attributes":946}],950:[function(b,K,G){K.exports=function(q,m){m.hoverOnBox&&(q.hoverOnBox=m.hoverOnBox);"xVal"in m&&(q.x=m.xVal);"yVal"in m&&(q.y=m.yVal);m.xa&&(q.xaxis=m.xa);
m.ya&&(q.yaxis=m.ya);return q}},{}],951:[function(b,K,G){function q(n,p,c,d){function f(N){return(L(N)+H(N))/2}var k=n.cd,r=n.xa,u=n.ya,v=k[0].trace,x=k[0].t,C="violin"===v.type,z=[];var y=x.bdPos;var D=x.wHover,A=function(N){return P.c2l(N.pos)+x.bPos-P.c2l(J)};if(C&&"both"!==v.side){if("positive"===v.side){var t=function(N){N=A(N);return a.inbox(N,N+D,M)};var B=y;var F=0}"negative"===v.side&&(t=function(N){N=A(N);return a.inbox(N-D,N,M)},B=0,F=y)}else t=function(N){N=A(N);return a.inbox(N-D,N+D,
M)},B=F=y;C=C?function(N){return a.inbox(N.span[0]-I,N.span[1]-I,M)}:function(N){return a.inbox(N.min-I,N.max-I,M)};if("h"===v.orientation){var I=p;var J=c;var L=C;var H=t;c="y";var P=u;p="x"}else I=c,J=p,L=t,H=C,c="x",P=r,p="y",r=u;y=Math.min(1,y/Math.abs(P.r2c(P.range[1])-P.r2c(P.range[0])));var M=n.maxHoverDistance-y;y=n.maxSpikeDistance-y;d=a.getDistanceFunction(d,L,H,f);a.getClosest(k,d,n);if(!1===n.index)return[];k=k[n.index];d=v.line.color;u=(v.marker||{}).color;g.opacity(d)&&v.line.width?
n.color=d:g.opacity(u)&&v.boxpoints?n.color=u:n.color=v.fillcolor;n[c+"0"]=P.c2p(k.pos+x.bPos-F,!0);n[c+"1"]=P.c2p(k.pos+x.bPos+B,!0);n[c+"LabelVal"]=void 0!==k.orig_p?k.orig_p:k.pos;B=c+"Spike";n.spikeDistance=f(k)*y/M;n[B]=P.c2p(k.pos,!0);F={};d=["med","q1","q3","min","max"];(v.boxmean||(v.meanline||{}).visible)&&d.push("mean");(v.boxpoints||v.points)&&d.push("lf","uf");for(c=0;c<d.length;c++)y=d[c],y in k&&!(k[y]in F)&&(F[k[y]]=!0,u=k[y],t=r.c2p(u,!0),C=h.extendFlat({},n),C.attr=y,C[p+"0"]=C[p+
"1"]=t,C[p+"LabelVal"]=u,C[p+"Label"]=(x.labels?x.labels[y]+" ":"")+l.hoverLabelText(r,u),C.hoverOnBox=!0,"mean"===y&&"sd"in k&&"sd"===v.boxmean&&(C[p+"err"]=k.sd),n.name="",n.spikeDistance=void 0,n[B]=void 0,C.hovertemplate=!1,z.push(C));return z}function m(n,p,c){for(var d=n.cd,f=n.xa,k=n.ya,r=d[0].trace,u=f.c2p(p),v=k.c2p(c),x=a.quadrature(function(D){var A=Math.max(3,D.mrc||0);return Math.max(Math.abs(f.c2p(D.x)-u)-A,1-3/A)},function(D){var A=Math.max(3,D.mrc||0);return Math.max(Math.abs(k.c2p(D.y)-
v)-A,1-3/A)}),C=!1,z=0;z<d.length;z++){p=d[z];for(var y=0;y<(p.pts||[]).length;y++)c=p.pts[y],c=x(c),c<=n.distance&&(n.distance=c,C=[z,y])}if(!C)return!1;p=d[C[0]];c=p.pts[C[1]];d=f.c2p(c.x,!0);x=k.c2p(c.y,!0);C=c.mrc||1;n=h.extendFlat({},n,{index:c.i,color:(r.marker||{}).color,name:r.name,x0:d-C,x1:d+C,y0:x-C,y1:x+C,spikeDistance:n.distance,hovertemplate:r.hovertemplate});d=p.orig_p;x=void 0!==d?d:p.pos;"h"===r.orientation?(d=k,n.xLabelVal=c.x,n.yLabelVal=x):(d=f,n.xLabelVal=x,n.yLabelVal=c.y);x=
d._id.charAt(0);n[x+"Spike"]=d.c2p(p.pos,!0);e(c,r,n);return n}var l=b("../../plots/cartesian/axes"),h=b("../../lib"),a=b("../../components/fx"),g=b("../../components/color"),e=h.fillText;K.exports={hoverPoints:function(n,p,c,d){var f=n.cd[0].trace.hoveron,k=[],r;-1!==f.indexOf("boxes")&&(k=k.concat(q(n,p,c,d)));-1!==f.indexOf("points")&&(r=m(n,p,c));if("closest"===d)return r?[r]:k;r&&k.push(r);return k},hoverOnBoxes:q,hoverOnPoints:m}},{"../../components/color":643,"../../components/fx":683,"../../lib":778,
"../../plots/cartesian/axes":828}],952:[function(b,K,G){K.exports={attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults").supplyDefaults,crossTraceDefaults:b("./defaults").crossTraceDefaults,supplyLayoutDefaults:b("./layout_defaults").supplyLayoutDefaults,calc:b("./calc"),crossTraceCalc:b("./cross_trace_calc").crossTraceCalc,plot:b("./plot").plot,style:b("./style").style,styleOnSelect:b("./style").styleOnSelect,hoverPoints:b("./hover").hoverPoints,eventData:b("./event_data"),
selectPoints:b("./select"),moduleType:"trace",name:"box",basePlotModule:b("../../plots/cartesian"),categories:"cartesian svg symbols oriented box-violin showLegend boxLayout zoomScale".split(" "),meta:{}}},{"../../plots/cartesian":841,"./attributes":946,"./calc":947,"./cross_trace_calc":948,"./defaults":949,"./event_data":950,"./hover":951,"./layout_attributes":953,"./layout_defaults":954,"./plot":955,"./select":956,"./style":957}],953:[function(b,K,G){K.exports={boxmode:{valType:"enumerated",values:["group",
"overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},{}],954:[function(b,K,G){function q(a,g,e,n,p){a=p+"Layout";g=!1;for(var c=0;c<e.length;c++)if(m.traceIs(e[c],a)){g=!0;break}g&&(n(p+"mode"),n(p+"gap"),n(p+"groupgap"))}var m=b("../../registry"),l=b("../../lib"),h=b("./layout_attributes");K.exports={supplyLayoutDefaults:function(a,g,e){q(a,g,e,function(n,p){return l.coerce(a,
g,h,n,p)},"box")},_supply:q}},{"../../lib":778,"../../registry":911,"./layout_attributes":953}],955:[function(b,K,G){function q(e,n,p,c){var d="h"===p.orientation,f=n.val,k=n.pos,r=!!k.rangebreaks,u=c.bPos,v=c.wdPos||0,x=c.bPosPxOffset||0,C=p.whiskerwidth||0,z=p.notched||!1,y=z?1-2*p.notchwidth:1;if(Array.isArray(c.bdPos)){var D=c.bdPos[0];var A=c.bdPos[1]}else A=D=c.bdPos;e=e.selectAll("path.box").data("violin"!==p.type||p.box.visible?a.identity:[]);e.enter().append("path").style("vector-effect",
"non-scaling-stroke").attr("class","box");e.exit().remove();e.each(function(t){if(t.empty)return"M0,0Z";var B=k.c2l(t.pos+u,!0),F=k.l2p(B-D)+x,I=k.l2p(B+A)+x,J=r?(F+I)/2:k.l2p(B)+x,L=p.whiskerwidth,H=r?F*L+(1-L)*J:k.l2p(B-v)+x;L=r?I*L+(1-L)*J:k.l2p(B+v)+x;var P=k.l2p(B-D*y)+x;B=k.l2p(B+A*y)+x;var M=f.c2p(t.q1,!0),N=f.c2p(t.q3,!0),T=a.constrain(f.c2p(t.med,!0),Math.min(M,N)+1,Math.max(M,N)-1),Q=void 0===t.lf||!1===p.boxpoints,U=f.c2p(Q?t.min:t.lf,!0);Q=f.c2p(Q?t.max:t.uf,!0);var S=f.c2p(t.ln,!0);t=
f.c2p(t.un,!0);d?h.select(this).attr("d","M"+T+","+P+"V"+B+"M"+M+","+F+"V"+I+(z?"H"+S+"L"+T+","+B+"L"+t+","+I:"")+"H"+N+"V"+F+(z?"H"+t+"L"+T+","+P+"L"+S+","+F:"")+"ZM"+M+","+J+"H"+U+"M"+N+","+J+"H"+Q+(0===C?"":"M"+U+","+H+"V"+L+"M"+Q+","+H+"V"+L)):h.select(this).attr("d","M"+P+","+T+"H"+B+"M"+F+","+M+"H"+I+(z?"V"+S+"L"+B+","+T+"L"+I+","+t:"")+"V"+N+"H"+F+(z?"V"+t+"L"+P+","+T+"L"+F+","+S:"")+"ZM"+J+","+M+"V"+U+"M"+J+","+N+"V"+Q+(0===C?"":"M"+H+","+U+"H"+L+"M"+H+","+Q+"H"+L))})}function m(e,n,p,c){var d=
n.x;n=n.y;var f=c.bdPos,k=c.bPos,r=p.boxpoints||p.points;a.seedPseudoRandom();var u=function(v){v.forEach(function(x){x.t=c;x.trace=p});return v};e=e.selectAll("g.points").data(r?u:[]);e.enter().append("g").attr("class","points");e.exit().remove();e=e.selectAll("path").data(function(v){var x=v.pts2;var C=Math.max((v.max-v.min)/10,v.q3-v.q1);var z=1E-9*C,y=.01*C,D=[],A=0;if(p.jitter){if(0===C)for(A=1,D=Array(x.length),C=0;C<x.length;C++)D[C]=1;else for(C=0;C<x.length;C++){var t=Math.max(0,C-5);var B=
x[t].v,F=Math.min(x.length-1,C+5),I=x[F].v;"all"!==r&&(x[C].v<v.lf?I=Math.min(I,v.lf):B=Math.max(B,v.uf));t=Math.sqrt(y*(F-t)/(I-B+z))||0;t=a.constrain(Math.abs(t),0,1);D.push(t);A=Math.max(t,A)}t=2*p.jitter/(A||1)}for(C=0;C<x.length;C++)z=x[C],y=z.v,A=p.jitter?t*D[C]*(a.pseudoRandom()-.5):0,A=v.pos+k+f*(p.pointpos+A),"h"===p.orientation?(z.y=A,z.x=y):(z.x=A,z.y=y),"suspectedoutliers"===r&&y<v.uo&&y>v.lo&&(z.so=!0);return x});e.enter().append("path").classed("point",!0);e.exit().remove();e.call(g.translatePoints,
d,n)}function l(e,n,p,c){var d=n.val,f=n.pos,k=!!f.rangebreaks,r=c.bPos,u=c.bPosPxOffset||0,v=p.boxmean||(p.meanline||{}).visible;if(Array.isArray(c.bdPos)){var x=c.bdPos[0];var C=c.bdPos[1]}else C=x=c.bdPos;e=e.selectAll("path.mean").data("box"===p.type&&p.boxmean||"violin"===p.type&&p.box.visible&&p.meanline.visible?a.identity:[]);e.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"});e.exit().remove();e.each(function(z){var y=f.c2l(z.pos+r,!0),D=
f.l2p(y-x)+u,A=f.l2p(y+C)+u;y=k?(D+A)/2:f.l2p(y)+u;var t=d.c2p(z.mean,!0),B=d.c2p(z.mean-z.sd,!0);z=d.c2p(z.mean+z.sd,!0);"h"===p.orientation?h.select(this).attr("d","M"+t+","+D+"V"+A+("sd"===v?"m0,0L"+B+","+y+"L"+t+","+D+"L"+z+","+y+"Z":"")):h.select(this).attr("d","M"+D+","+t+"H"+A+("sd"===v?"m0,0L"+y+","+B+"L"+D+","+t+"L"+y+","+z+"Z":""))})}var h=b("d3"),a=b("../../lib"),g=b("../../components/drawing");K.exports={plot:function(e,n,p,c){var d=n.xaxis,f=n.yaxis;a.makeTraceGroups(c,p,"trace boxes").each(function(k){var r=
h.select(this),u=k[0];k=u.t;u=u.trace;k.wdPos=k.bdPos*u.whiskerwidth;if(!0!==u.visible||k.empty)r.remove();else{if("h"===u.orientation){var v=f;var x=d}else v=d,x=f;q(r,{pos:v,val:x},u,k);m(r,{x:d,y:f},u,k);l(r,{pos:v,val:x},u,k)}})},plotBoxAndWhiskers:q,plotPoints:m,plotBoxMean:l}},{"../../components/drawing":665,"../../lib":778,d3:169}],956:[function(b,K,G){K.exports=function(q,m){var l=q.cd,h=q.xaxis,a=q.yaxis,g=[],e,n;if(!1===m)for(e=0;e<l.length;e++)for(n=0;n<(l[e].pts||[]).length;n++)l[e].pts[n].selected=
0;else for(e=0;e<l.length;e++)for(n=0;n<(l[e].pts||[]).length;n++){var p=l[e].pts[n],c=h.c2p(p.x),d=a.c2p(p.y);m.contains([c,d],null,p.i,q)?(g.push({pointNumber:p.i,x:h.c2d(p.x),y:a.c2d(p.y)}),p.selected=1):p.selected=0}return g}},{}],957:[function(b,K,G){var q=b("d3"),m=b("../../components/color"),l=b("../../components/drawing");K.exports={style:function(h,a,g){a=g?g:q.select(h).selectAll("g.trace.boxes");a.style("opacity",function(e){return e[0].trace.opacity});a.each(function(e){function n(f,k,
r,u){f.style("stroke-width",k+"px").call(m.stroke,r).call(m.fill,u)}var p=q.select(this),c=e[0].trace;e=c.line.width;var d=p.selectAll("path.box");"candlestick"===c.type?d.each(function(f){if(!f.empty){var k=q.select(this),r=c[f.dir];n(k,r.line.width,r.line.color,r.fillcolor);k.style("opacity",c.selectedpoints&&!f.selected?.3:1)}}):(n(d,e,c.line.color,c.fillcolor),p.selectAll("path.mean").style({"stroke-width":e,"stroke-dasharray":2*e+"px,"+e+"px"}).call(m.stroke,c.line.color),p=p.selectAll("path.point"),
l.pointStyle(p,c,h))})},styleOnSelect:function(h,a,g){a=a[0].trace;g=g.selectAll("path.point");a.selectedpoints?l.selectedPointStyle(g,a):l.pointStyle(g,a,h)}}},{"../../components/color":643,"../../components/drawing":665,d3:169}],958:[function(b,K,G){function q(h){return{line:{color:m({},l.line.color,{dflt:h}),width:l.line.width,editType:"style"},fillcolor:l.fillcolor,editType:"style"}}var m=b("../../lib").extendFlat;G=b("../ohlc/attributes");var l=b("../box/attributes");K.exports={xperiod:G.xperiod,
xperiod0:G.xperiod0,xperiodalignment:G.xperiodalignment,x:G.x,open:G.open,high:G.high,low:G.low,close:G.close,line:{width:m({},l.line.width,{}),editType:"style"},increasing:q(G.increasing.line.color.dflt),decreasing:q(G.decreasing.line.color.dflt),text:G.text,hovertext:G.hovertext,whiskerwidth:m({},l.whiskerwidth,{dflt:0}),hoverlabel:G.hoverlabel}},{"../../lib":778,"../box/attributes":946,"../ohlc/attributes":1133}],959:[function(b,K,G){function q(g,e,n,p){return{min:n,q1:Math.min(g,p),med:p,q3:Math.max(g,
p),max:e}}var m=b("../../lib"),l=b("../../plots/cartesian/axes"),h=b("../../plots/cartesian/align_period"),a=b("../ohlc/calc").calcCommon;K.exports=function(g,e){var n=g._fullLayout,p=l.getFromId(g,e.xaxis),c=l.getFromId(g,e.yaxis),d=p.makeCalcdata(e,"x");p=h(e,p,"x",d);g=a(g,e,d,p,c,q);return g.length?(m.extendFlat(g[0].t,{num:n._numBoxes,dPos:m.distinctVals(p).minDiff/2,posLetter:"x",valLetter:"y"}),n._numBoxes++,g):[{t:{empty:!0}}]}},{"../../lib":778,"../../plots/cartesian/align_period":825,"../../plots/cartesian/axes":828,
"../ohlc/calc":1134}],960:[function(b,K,G){function q(e,n,p,c){e=p(c+".line.color");p(c+".line.width",n.line.width);p(c+".fillcolor",l.addOpacity(e,.5))}var m=b("../../lib"),l=b("../../components/color"),h=b("../ohlc/ohlc_defaults"),a=b("../scatter/period_defaults"),g=b("./attributes");K.exports=function(e,n,p,c){function d(f,k){return m.coerce(e,n,g,f,k)}h(e,n,d,c)?(a(e,n,c,d,{x:!0}),d("line.width"),q(e,n,d,"increasing"),q(e,n,d,"decreasing"),d("text"),d("hovertext"),d("whiskerwidth"),c._requestRangeslider[n.xaxis]=
!0):n.visible=!1}},{"../../components/color":643,"../../lib":778,"../ohlc/ohlc_defaults":1138,"../scatter/period_defaults":1207,"./attributes":958}],961:[function(b,K,G){K.exports={moduleType:"trace",name:"candlestick",basePlotModule:b("../../plots/cartesian"),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:b("./attributes"),layoutAttributes:b("../box/layout_attributes"),supplyLayoutDefaults:b("../box/layout_defaults").supplyLayoutDefaults,crossTraceCalc:b("../box/cross_trace_calc").crossTraceCalc,
supplyDefaults:b("./defaults"),calc:b("./calc"),plot:b("../box/plot").plot,layerName:"boxlayer",style:b("../box/style").style,hoverPoints:b("../ohlc/hover").hoverPoints,selectPoints:b("../ohlc/select")}},{"../../plots/cartesian":841,"../box/cross_trace_calc":948,"../box/layout_attributes":953,"../box/layout_defaults":954,"../box/plot":955,"../box/style":957,"../ohlc/hover":1136,"../ohlc/select":1140,"./attributes":958,"./calc":959,"./defaults":960}],962:[function(b,K,G){function q(h,a,g,e){["aaxis",
"baxis"].forEach(function(n){var p=n.charAt(0),c=h[n]||{},d=l.newContainer(a,n);m(c,d,{tickfont:"x",id:p+"axis",letter:p,font:a.font,name:n,data:h[p],calendar:a.calendar,dfltColor:e,bgColor:g.paper_bgcolor,autotypenumbersDflt:g.autotypenumbers,fullLayout:g});d._categories=d._categories||[];h[n]||"-"===c.type||(h[n]={type:c.type})})}var m=b("./axis_defaults"),l=b("../../plot_api/plot_template");K.exports=function(h,a,g,e,n){e("a")||(e("da"),e("a0"));e("b")||(e("db"),e("b0"));q(h,a,g,n)}},{"../../plot_api/plot_template":817,
"./axis_defaults":967}],963:[function(b,K,G){function q(l,h){if(!m(l)||10<=h)return null;for(var a=Infinity,g=-Infinity,e=l.length,n=0;n<e;n++){var p=l[n];if(m(p)){if(p=q(p,h+1))a=Math.min(p[0],a),g=Math.max(p[1],g)}else a=Math.min(p,a),g=Math.max(p,g)}return[a,g]}var m=b("../../lib").isArrayOrTypedArray;K.exports=function(l){return q(l,0)}},{"../../lib":778}],964:[function(b,K,G){var q=b("../../plots/font_attributes");G=b("./axis_attributes");b=b("../../components/color/attributes");q=q({editType:"calc"});
q.family.dflt='"Open Sans", verdana, arial, sans-serif';q.size.dflt=12;q.color.dflt=b.defaultLine;K.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",
dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:G,baxis:G,font:q,color:{valType:"color",dflt:b.defaultLine,editType:"plot"},transforms:void 0}},{"../../components/color/attributes":642,"../../plots/font_attributes":856,"./axis_attributes":966}],965:[function(b,K,G){var q=b("../../lib").isArrayOrTypedArray;K.exports=function(m,l,h,a){var g=q(h)?"a":"b",e=("a"===g?m.aaxis:m.baxis).smoothing,n="a"===g?m.a2i:m.b2j,p="a"===g?h:a;a="a"===g?a:h;h="a"===g?l.a.length:l.b.length;
var c="a"===g?l.b.length:l.a.length,d=Math.floor("a"===g?m.b2j(a):m.a2i(a));l="a"===g?function(F){return m.evalxy([],F,d)}:function(F){return m.evalxy([],d,F)};if(e){var f=Math.max(0,Math.min(c-2,d));var k=d-f;var r="a"===g?function(F,I){return m.dxydi([],F,f,I,k)}:function(F,I){return m.dxydj([],f,F,k,I)}}g=n(p[0]);n=n(p[1]);p=g<n?1:-1;var u=1E-8*(n-g);var v=0<p?Math.ceil:Math.floor;a=0<p?Math.min:Math.max;c=0<p?Math.max:Math.min;var x=(0<p?Math.floor:Math.ceil)(g+u);v=v(n-u);u=l(g);for(var C=[[u]];x*
p<v*p;x+=p){var z=[];var y=c(g,x);var D=a(n,x+p);var A=D-y;var t=Math.max(0,Math.min(h-2,Math.floor(.5*(y+D))));var B=l(D);e&&(y=r(t,y-t),t=r(t,D-t),z.push([u[0]+y[0]/3*A,u[1]+y[1]/3*A]),z.push([B[0]-t[0]/3*A,B[1]-t[1]/3*A]));z.push(B);C.push(z);u=B}return C}},{"../../lib":778}],966:[function(b,K,G){G=b("../../plots/font_attributes");var q=b("../../components/color/attributes"),m=b("../../plots/cartesian/layout_attributes"),l=b("../../plot_api/edit_types").overrideAll;b("../../constants/docs");b("../../constants/docs");
K.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:G({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:m.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",
values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",
editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},tickfont:G({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",
values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:"none e E power SI B".split(" "),dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc"},tickformatstops:l(m.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",
values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:q.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",
editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgridcolor:{valType:"color",dflt:q.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},
endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:G({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},{"../../components/color/attributes":642,
"../../constants/docs":748,"../../plot_api/edit_types":810,"../../plots/cartesian/layout_attributes":842,"../../plots/font_attributes":856}],967:[function(b,K,G){function q(d,f){if("-"===d.type){var k=d._id.charAt(0);d.type=c(f,d[k+"calendar"],{autotypenumbers:d.autotypenumbers})}}var m=b("./attributes"),l=b("../../components/color").addOpacity,h=b("../../registry"),a=b("../../lib"),g=b("../../plots/cartesian/tick_value_defaults"),e=b("../../plots/cartesian/tick_label_defaults"),n=b("../../plots/cartesian/category_order_defaults"),
p=b("../../plots/cartesian/set_convert"),c=b("../../plots/cartesian/axis_autotype");K.exports=function(d,f,k){function r(A,t){return a.coerce(d,f,C,A,t)}function u(A,t){return a.coerce2(d,f,C,A,t)}var v=k.letter,x=k.font||{},C=m[v+"axis"];k.name&&(f._name=k.name,f._id=k.name);r("autotypenumbers",k.autotypenumbersDflt);var z=r("type");"-"===z&&(k.data&&q(f,k.data),"-"===f.type?f.type="linear":z=d.type=f.type);r("smoothing");r("cheatertype");r("showticklabels");r("labelprefix",v+" = ");r("labelsuffix");
r("showtickprefix");r("showticksuffix");r("separatethousands");r("tickformat");r("exponentformat");r("minexponent");r("showexponent");r("categoryorder");r("tickmode");r("tickvals");r("ticktext");r("tick0");r("dtick");"array"===f.tickmode&&(r("arraytick0"),r("arraydtick"));r("labelpadding");f._hovertitle=v;"date"===z&&h.getComponentMethod("calendars","handleDefaults")(d,f,"calendar",k.calendar);p(f,k.fullLayout);f.c2p=a.identity;var y=r("color",k.dfltColor),D=y===d.color?y:x.color;r("title.text")&&
(a.coerceFont(r,"title.font",{family:x.family,size:Math.round(1.2*x.size),color:D}),r("title.offset"));r("tickangle");r("autorange",!f.isValidRange(d.range))&&r("rangemode");r("range");f.cleanRange();r("fixedrange");g(d,f,r,z);e(d,f,r,z,k);n(d,f,r,{data:k.data,dataAttr:v});k=u("gridcolor",l(y,.3));v=u("gridwidth");x=r("showgrid");x||(delete f.gridcolor,delete f.gridwidth);z=u("startlinecolor",y);D=u("startlinewidth",v);r("startline",f.showgrid||!!z||!!D)||(delete f.startlinecolor,delete f.startlinewidth);
y=u("endlinecolor",y);z=u("endlinewidth",v);r("endline",f.showgrid||!!y||!!z)||(delete f.endlinecolor,delete f.endlinewidth);x?(r("minorgridcount"),r("minorgridwidth",v),r("minorgridcolor",l(k,.06)),f.minorgridcount||(delete f.minorgridwidth,delete f.minorgridcolor)):(delete f.gridcolor,delete f.gridWidth);"none"===f.showticklabels&&(delete f.tickfont,delete f.tickangle,delete f.showexponent,delete f.exponentformat,delete f.minexponent,delete f.tickformat,delete f.showticksuffix,delete f.showtickprefix);
f.showticksuffix||delete f.ticksuffix;f.showtickprefix||delete f.tickprefix;r("tickmode");return f}},{"../../components/color":643,"../../lib":778,"../../plots/cartesian/axis_autotype":829,"../../plots/cartesian/category_order_defaults":832,"../../plots/cartesian/set_convert":848,"../../plots/cartesian/tick_label_defaults":849,"../../plots/cartesian/tick_value_defaults":851,"../../registry":911,"./attributes":964}],968:[function(b,K,G){var q=b("../../plots/cartesian/axes"),m=b("../../lib").isArray1D,
l=b("./cheater_basis"),h=b("./array_minmax"),a=b("./calc_gridlines"),g=b("./calc_labels"),e=b("./calc_clippath"),n=b("../heatmap/clean_2d_array"),p=b("./smooth_fill_2d_array"),c=b("../heatmap/convert_column_xyz"),d=b("./set_convert");K.exports=function(f,k){var r=q.getFromId(f,k.xaxis);f=q.getFromId(f,k.yaxis);var u=k.aaxis,v=k.baxis,x=k.x,C=k.y,z=[];x&&m(x)&&z.push("x");C&&m(C)&&z.push("y");z.length&&c(k,u,v,"a","b",z);z=k._a=k._a||k.a;var y=k._b=k._b||k.b;x=k._x||k.x;C=k._y||k.y;var D={};k._cheater&&
(x=l("index"===u.cheatertype?z.length:z,"index"===v.cheatertype?y.length:y,k.cheaterslope));k._x=x=n(x);k._y=C=n(C);p(x,z,y);p(C,z,y);d(k);k.setScale();var A=h(x),t=h(C),B=.5*(A[1]-A[0]);A=.5*(A[1]+A[0]);var F=.5*(t[1]-t[0]);t=.5*(t[1]+t[0]);A=[A-1.3*B,A+1.3*B];t=[t-1.3*F,t+1.3*F];k._extremes[r._id]=q.findExtremes(r,A,{padded:!0});k._extremes[f._id]=q.findExtremes(f,t,{padded:!0});a(k,"a","b");a(k,"b","a");g(k,u);g(k,v);D.clipsegments=e(k._xctrl,k._yctrl,u,v);D.x=x;D.y=C;D.a=z;D.b=y;return[D]}},{"../../lib":778,
"../../plots/cartesian/axes":828,"../heatmap/clean_2d_array":1067,"../heatmap/convert_column_xyz":1069,"./array_minmax":963,"./calc_clippath":969,"./calc_gridlines":970,"./calc_labels":971,"./cheater_basis":973,"./set_convert":986,"./smooth_fill_2d_array":987}],969:[function(b,K,G){K.exports=function(q,m,l,h){var a,g=[];l=!!l.smoothing;var e=!!h.smoothing,n=q[0].length-1,p=q.length-1;h=0;var c=[];for(a=[];h<=n;h++)c[h]=q[0][h],a[h]=m[0][h];g.push({x:c,y:a,bicubic:l});h=0;c=[];for(a=[];h<=p;h++)c[h]=
q[h][n],a[h]=m[h][n];g.push({x:c,y:a,bicubic:e});h=n;c=[];for(a=[];0<=h;h--)c[n-h]=q[p][h],a[n-h]=m[p][h];g.push({x:c,y:a,bicubic:l});h=p;c=[];for(a=[];0<=h;h--)c[p-h]=q[h][0],a[p-h]=m[h][0];g.push({x:c,y:a,bicubic:e});return g}},{}],970:[function(b,K,G){var q=b("../../plots/cartesian/axes"),m=b("../../lib/extend").extendFlat;K.exports=function(l,h,a){function g(H){var P,M=[],N=[],T={};if("b"===h){var Q=l.b2j(H);var U=Math.floor(Math.max(0,Math.min(D-2,Q)));var S=Q-U;T.length=D;T.crossLength=y;T.xy=
function(ja){return l.evalxy([],ja,Q)};T.dxy=function(ja,ba){return l.dxydi([],ja,U,ba,S)};for(P=0;P<y;P++){var X=Math.min(y-2,P);var Z=P-X;var aa=l.evalxy([],P,Q);if(u.smoothing&&0<P){var fa=l.dxydi([],P-1,U,0,S);M.push(ha[0]+fa[0]/3);N.push(ha[1]+fa[1]/3);var ha=l.dxydi([],P-1,U,1,S);M.push(aa[0]-ha[0]/3);N.push(aa[1]-ha[1]/3)}M.push(aa[0]);N.push(aa[1]);ha=aa}}else for(P=l.a2i(H),X=Math.floor(Math.max(0,Math.min(y-2,P))),Z=P-X,T.length=y,T.crossLength=D,T.xy=function(ja){return l.evalxy([],P,ja)},
T.dxy=function(ja,ba){return l.dxydj([],X,ja,Z,ba)},Q=0;Q<D;Q++)U=Math.min(D-2,Q),S=Q-U,aa=l.evalxy([],P,Q),u.smoothing&&0<Q&&(fa=l.dxydj([],X,Q-1,Z,0),M.push(ha[0]+fa[0]/3),N.push(ha[1]+fa[1]/3),ha=l.dxydj([],X,Q-1,Z,1),M.push(aa[0]-ha[0]/3),N.push(aa[1]-ha[1]/3)),M.push(aa[0]),N.push(aa[1]),ha=aa;T.axisLetter=h;T.axis=c;T.crossAxis=u;T.value=H;T.constvar=a;T.index=n;T.x=M;T.y=N;T.smoothing=u.smoothing;return T}function e(H){var P,M=[],N=[],T={};T.length=p.length;T.crossLength=r.length;if("b"===
h){var Q=Math.max(0,Math.min(D-2,H));var U=Math.min(1,Math.max(0,H-Q));T.xy=function(Z){return l.evalxy([],Z,H)};T.dxy=function(Z,aa){return l.dxydi([],Z,Q,aa,U)};for(P=0;P<C;P++)M[P]=v[H*A][P],N[P]=x[H*A][P]}else{var S=Math.max(0,Math.min(y-2,H));var X=Math.min(1,Math.max(0,H-S));T.xy=function(Z){return l.evalxy([],H,Z)};T.dxy=function(Z,aa){return l.dxydj([],S,Z,X,aa)};for(P=0;P<z;P++)M[P]=v[P][H*A],N[P]=x[P][H*A]}T.axisLetter=h;T.axis=c;T.crossAxis=u;T.value=p[H];T.constvar=a;T.index=H;T.x=M;T.y=
N;T.smoothing=u.smoothing;return T}var n,p=l["_"+h],c=l[h+"axis"];var d=c._gridlines=[];var f=c._minorgridlines=[],k=c._boundarylines=[],r=l["_"+a],u=l[a+"axis"];"array"===c.tickmode&&(c.tickvals=p.slice());var v=l._xctrl,x=l._yctrl,C=v[0].length,z=v.length,y=l._a.length,D=l._b.length;q.prepTicks(c);"array"===c.tickmode&&delete c.tickvals;var A=c.smoothing?3:1;if("array"===c.tickmode){var t=5E-15;t=[Math.floor((p.length-1-c.arraytick0)/c.arraydtick*(1+t)),Math.ceil(-c.arraytick0/c.arraydtick/(1+t))].sort(function(H,
P){return H-P});var B=t[0]-1;t=t[1]+1;for(n=B;n<t;n++){var F=c.arraytick0+c.arraydtick*n;0>F||F>p.length-1||d.push(m(e(F),{color:c.gridcolor,width:c.gridwidth}))}for(n=B;n<t;n++){B=c.arraytick0+c.arraydtick*n;var I=Math.min(B+c.arraydtick,p.length-1);if(!(0>B||B>p.length-1||0>I||I>p.length-1)){var J=p[B];var L=p[I];for(d=0;d<c.minorgridcount;d++)F=I-B,0>=F||(F=J+(L-J)*(d+1)/(c.minorgridcount+1)*(c.arraydtick/F),F<p[0]||F>p[p.length-1]||f.push(m(g(F),{color:c.minorgridcolor,width:c.minorgridwidth})))}}c.startline&&
k.push(m(e(0),{color:c.startlinecolor,width:c.startlinewidth}));c.endline&&k.push(m(e(p.length-1),{color:c.endlinecolor,width:c.endlinewidth}))}else{t=5E-15;t=[Math.floor((p[p.length-1]-c.tick0)/c.dtick*(1+t)),Math.ceil((p[0]-c.tick0)/c.dtick/(1+t))].sort(function(H,P){return H-P});B=t[0];t=t[1];for(n=B;n<=t;n++)I=c.tick0+c.dtick*n,d.push(m(g(I),{color:c.gridcolor,width:c.gridwidth}));for(n=B-1;n<t+1;n++)for(I=c.tick0+c.dtick*n,d=0;d<c.minorgridcount;d++)F=I+c.dtick*(d+1)/(c.minorgridcount+1),F<p[0]||
F>p[p.length-1]||f.push(m(g(F),{color:c.minorgridcolor,width:c.minorgridwidth}));c.startline&&k.push(m(g(p[0]),{color:c.startlinecolor,width:c.startlinewidth}));c.endline&&k.push(m(g(p[p.length-1]),{color:c.endlinecolor,width:c.endlinewidth}))}}},{"../../lib/extend":768,"../../plots/cartesian/axes":828}],971:[function(b,K,G){var q=b("../../plots/cartesian/axes"),m=b("../../lib/extend").extendFlat;K.exports=function(l,h){var a=h._labels=[],g=h._gridlines;for(l=0;l<g.length;l++){var e=g[l];if(-1!==
["start","both"].indexOf(h.showticklabels)){var n=q.tickText(h,e.value);m(n,{prefix:void 0,suffix:void 0,endAnchor:!0,xy:e.xy(0),dxy:e.dxy(0,0),axis:e.axis,length:e.crossAxis.length,font:e.axis.tickfont,isFirst:0===l,isLast:l===g.length-1});a.push(n)}-1!==["end","both"].indexOf(h.showticklabels)&&(n=q.tickText(h,e.value),m(n,{endAnchor:!1,xy:e.xy(e.crossLength-1),dxy:e.dxy(e.crossLength-2,1),axis:e.axis,length:e.crossAxis.length,font:e.axis.tickfont,isFirst:0===l,isLast:l===g.length-1}),a.push(n))}}},
{"../../lib/extend":768,"../../plots/cartesian/axes":828}],972:[function(b,K,G){K.exports=function(q,m,l,h){var a=q[0]-m[0],g=q[1]-m[1],e=l[0]-m[0],n=l[1]-m[1];l=Math.pow(a*a+g*g,.25);q=Math.pow(e*e+n*n,.25);a=(q*q*a-l*l*e)*h;h*=q*q*g-l*l*n;g=q*(l+q)*3;l=l*(l+q)*3;return[[m[0]+(g&&a/g),m[1]+(g&&h/g)],[m[0]-(l&&a/l),m[1]-(l&&h/l)]]}},{}],973:[function(b,K,G){var q=b("../../lib").isArrayOrTypedArray;K.exports=function(m,l,h){var a,g,e=[],n=q(m)?m.length:m,p=q(l)?l.length:l,c=q(m)?m:null,d=q(l)?l:null;
c&&(a=(c.length-1)/(c[c.length-1]-c[0])/(n-1));d&&(g=(d.length-1)/(d[d.length-1]-d[0])/(p-1));var f=Infinity,k=-Infinity;for(m=0;m<p;m++){e[m]=[];var r=d?(d[m]-d[0])*g:m/(p-1);for(l=0;l<n;l++){var u=c?(c[l]-c[0])*a:l/(n-1);u-=r*h;f=Math.min(u,f);k=Math.max(u,k);e[m][l]=u}}h=1/(k-f);a=-f*h;for(m=0;m<p;m++)for(l=0;l<n;l++)e[m][l]=h*e[m][l]+a;return e}},{"../../lib":778}],974:[function(b,K,G){function q(h,a,g){return[(2*(-.5*g[0]+1.5*a[0])+h[0])/3,(2*(-.5*g[1]+1.5*a[1])+h[1])/3]}var m=b("./catmull_rom"),
l=b("../../lib").ensureArray;K.exports=function(h,a,g,e,n,p){var c,d,f,k,r=g[0].length,u=g.length,v=n?3*r-2:r,x=p?3*u-2:u;h=l(h,x);a=l(a,x);for(f=0;f<x;f++)h[f]=l(h[f],v),a[f]=l(a[f],v);for(k=d=0;d<u;d++,k+=p?3:1){var C=h[k];var z=a[k];var y=g[d];var D=e[d];for(f=c=0;c<r;c++,f+=n?3:1)C[f]=y[c],z[f]=D[c]}if(n)for(k=d=0;d<u;d++,k+=p?3:1){c=1;for(f=3;c<r-1;c++,f+=3)C=m([g[d][c-1],e[d][c-1]],[g[d][c],e[d][c]],[g[d][c+1],e[d][c+1]],n),h[k][f-1]=C[0][0],a[k][f-1]=C[0][1],h[k][f+1]=C[1][0],a[k][f+1]=C[1][1];
c=q([h[k][0],a[k][0]],[h[k][2],a[k][2]],[h[k][3],a[k][3]]);h[k][1]=c[0];a[k][1]=c[1];c=q([h[k][v-1],a[k][v-1]],[h[k][v-3],a[k][v-3]],[h[k][v-4],a[k][v-4]]);h[k][v-2]=c[0];a[k][v-2]=c[1]}if(p)for(f=0;f<v;f++){for(k=3;k<x-3;k+=3)C=m([h[k-3][f],a[k-3][f]],[h[k][f],a[k][f]],[h[k+3][f],a[k+3][f]],p),h[k-1][f]=C[0][0],a[k-1][f]=C[0][1],h[k+1][f]=C[1][0],a[k+1][f]=C[1][1];c=q([h[0][f],a[0][f]],[h[2][f],a[2][f]],[h[3][f],a[3][f]]);h[1][f]=c[0];a[1][f]=c[1];c=q([h[x-1][f],a[x-1][f]],[h[x-3][f],a[x-3][f]],
[h[x-4][f],a[x-4][f]]);h[x-2][f]=c[0];a[x-2][f]=c[1]}if(n&&p)for(k=1;k<x;k+=0===(k+1)%3?2:1){for(f=3;f<v-3;f+=3)C=m([h[k][f-3],a[k][f-3]],[h[k][f],a[k][f]],[h[k][f+3],a[k][f+3]],n),h[k][f-1]=.5*(h[k][f-1]+C[0][0]),a[k][f-1]=.5*(a[k][f-1]+C[0][1]),h[k][f+1]=.5*(h[k][f+1]+C[1][0]),a[k][f+1]=.5*(a[k][f+1]+C[1][1]);c=q([h[k][0],a[k][0]],[h[k][2],a[k][2]],[h[k][3],a[k][3]]);h[k][1]=.5*(h[k][1]+c[0]);a[k][1]=.5*(a[k][1]+c[1]);c=q([h[k][v-1],a[k][v-1]],[h[k][v-3],a[k][v-3]],[h[k][v-4],a[k][v-4]]);h[k][v-
2]=.5*(h[k][v-2]+c[0]);a[k][v-2]=.5*(a[k][v-2]+c[1])}return[h,a]}},{"../../lib":778,"./catmull_rom":972}],975:[function(b,K,G){K.exports={RELATIVE_CULL_TOLERANCE:1E-6}},{}],976:[function(b,K,G){K.exports=function(q,m,l){return m&&l?function(h,a,g,e,n){h||(h=[]);var p;a*=3;g*=3;var c=e*e;var d=1-e,f=d*d;d=d*e*2;e=-3*f;f=3*(f-d);d=3*(d-c);var k=3*c,r=n*n,u=r*n,v=1-n,x=v*v,C=x*v;for(p=0;p<q.length;p++){var z=q[p];c=e*z[g][a]+f*z[g][a+1]+d*z[g][a+2]+k*z[g][a+3];var y=e*z[g+1][a]+f*z[g+1][a+1]+d*z[g+1][a+
2]+k*z[g+1][a+3];var D=e*z[g+2][a]+f*z[g+2][a+1]+d*z[g+2][a+2]+k*z[g+2][a+3];z=e*z[g+3][a]+f*z[g+3][a+1]+d*z[g+3][a+2]+k*z[g+3][a+3];h[p]=C*c+3*(x*n*y+v*r*D)+u*z}return h}:m?function(h,a,g,e,n){h||(h=[]);var p;a*=3;var c=e*e;var d=1-e,f=d*d;d=d*e*2;e=-3*f;f=3*(f-d);d=3*(d-c);var k=3*c,r=1-n;for(p=0;p<q.length;p++){var u=q[p];c=e*u[g][a]+f*u[g][a+1]+d*u[g][a+2]+k*u[g][a+3];u=e*u[g+1][a]+f*u[g+1][a+1]+d*u[g+1][a+2]+k*u[g+1][a+3];h[p]=r*c+n*u}return h}:l?function(h,a,g,e,n){h||(h=[]);var p;g*=3;var c=
n*n,d=c*n,f=1-n,k=f*f,r=k*f;for(p=0;p<q.length;p++){var u=q[p];e=u[g][a+1]-u[g][a];var v=u[g+1][a+1]-u[g+1][a];var x=u[g+2][a+1]-u[g+2][a];u=u[g+3][a+1]-u[g+3][a];h[p]=r*e+3*(k*n*v+f*c*x)+d*u}return h}:function(h,a,g,e,n){h||(h=[]);var p,c=1-n;for(p=0;p<q.length;p++){var d=q[p];e=d[g][a+1]-d[g][a];d=d[g+1][a+1]-d[g+1][a];h[p]=c*e+n*d}return h}}},{}],977:[function(b,K,G){K.exports=function(q,m,l){return m&&l?function(h,a,g,e,n){h||(h=[]);var p;a*=3;g*=3;var c=e*e,d=c*e,f=1-e,k=f*f,r=k*f;var u=n*n;
var v=1-n,x=v*v;v=v*n*2;n=-3*x;x=3*(x-v);v=3*(v-u);var C=3*u;for(p=0;p<q.length;p++){var z=q[p];u=n*z[g][a]+x*z[g+1][a]+v*z[g+2][a]+C*z[g+3][a];var y=n*z[g][a+1]+x*z[g+1][a+1]+v*z[g+2][a+1]+C*z[g+3][a+1];var D=n*z[g][a+2]+x*z[g+1][a+2]+v*z[g+2][a+2]+C*z[g+3][a+2];z=n*z[g][a+3]+x*z[g+1][a+3]+v*z[g+2][a+3]+C*z[g+3][a+3];h[p]=r*u+3*(k*e*y+f*c*D)+d*z}return h}:m?function(h,a,g,e,n){h||(h=[]);var p;a*=3;var c=n*n,d=c*n,f=1-n,k=f*f,r=k*f;for(p=0;p<q.length;p++){var u=q[p];e=u[g+1][a]-u[g][a];var v=u[g+
1][a+1]-u[g][a+1];var x=u[g+1][a+2]-u[g][a+2];u=u[g+1][a+3]-u[g][a+3];h[p]=r*e+3*(k*n*v+f*c*x)+d*u}return h}:l?function(h,a,g,e,n){h||(h=[]);var p;g*=3;var c=1-e;var d=n*n;var f=1-n,k=f*f;f=f*n*2;n=-3*k;k=3*(k-f);f=3*(f-d);var r=3*d;for(p=0;p<q.length;p++){var u=q[p];d=n*u[g][a]+k*u[g+1][a]+f*u[g+2][a]+r*u[g+3][a];u=n*u[g][a+1]+k*u[g+1][a+1]+f*u[g+2][a+1]+r*u[g+3][a+1];h[p]=c*d+e*u}return h}:function(h,a,g,e,n){h||(h=[]);var p,c=1-e;for(p=0;p<q.length;p++){var d=q[p];n=d[g+1][a]-d[g][a];d=d[g+1][a+
1]-d[g][a+1];h[p]=c*n+e*d}return h}}},{}],978:[function(b,K,G){K.exports=function(q,m,l,h,a){var g=m-2,e=l-2;return h&&a?function(n,p,c){n||(n=[]);var d,f=Math.max(0,Math.min(Math.floor(p),g)),k=Math.max(0,Math.min(Math.floor(c),e));p=Math.max(0,Math.min(1,p-f));var r=Math.max(0,Math.min(1,c-k));f*=3;k*=3;var u=p*p,v=u*p,x=1-p,C=x*x,z=C*x,y=r*r,D=y*r,A=1-r,t=A*A,B=t*A;for(d=0;d<q.length;d++){var F=q[d];c=z*F[k][f]+3*(C*p*F[k][f+1]+x*u*F[k][f+2])+v*F[k][f+3];var I=z*F[k+1][f]+3*(C*p*F[k+1][f+1]+x*
u*F[k+1][f+2])+v*F[k+1][f+3];var J=z*F[k+2][f]+3*(C*p*F[k+2][f+1]+x*u*F[k+2][f+2])+v*F[k+2][f+3];F=z*F[k+3][f]+3*(C*p*F[k+3][f+1]+x*u*F[k+3][f+2])+v*F[k+3][f+3];n[d]=B*c+3*(t*r*I+A*y*J)+D*F}return n}:h?function(n,p,c){n||(n=[]);var d=Math.max(0,Math.min(Math.floor(p),g)),f=Math.max(0,Math.min(Math.floor(c),e));p=Math.max(0,Math.min(1,p-d));c=Math.max(0,Math.min(1,c-f));var k;d*=3;var r=p*p,u=r*p,v=1-p,x=v*v,C=x*v,z=1-c;for(k=0;k<q.length;k++){var y=q[k];var D=z*y[f][d]+c*y[f+1][d];var A=z*y[f][d+
1]+c*y[f+1][d+1];var t=z*y[f][d+2]+c*y[f+1][d+1];y=z*y[f][d+3]+c*y[f+1][d+1];n[k]=C*D+3*(x*p*A+v*r*t)+u*y}return n}:a?function(n,p,c){n||(n=[]);var d=Math.max(0,Math.min(Math.floor(p),g)),f=Math.max(0,Math.min(Math.floor(c),e));p=Math.max(0,Math.min(1,p-d));c=Math.max(0,Math.min(1,c-f));var k;f*=3;var r=c*c,u=r*c,v=1-c,x=v*v,C=x*v,z=1-p;for(k=0;k<q.length;k++){var y=q[k];var D=z*y[f][d]+p*y[f][d+1];var A=z*y[f+1][d]+p*y[f+1][d+1];var t=z*y[f+2][d]+p*y[f+2][d+1];y=z*y[f+3][d]+p*y[f+3][d+1];n[k]=C*
D+3*(x*c*A+v*r*t)+u*y}return n}:function(n,p,c){n||(n=[]);var d=Math.max(0,Math.min(Math.floor(p),g)),f=Math.max(0,Math.min(Math.floor(c),e));p=Math.max(0,Math.min(1,p-d));c=Math.max(0,Math.min(1,c-f));var k,r=1-c,u=1-p;for(k=0;k<q.length;k++){var v=q[k];var x=u*v[f][d]+p*v[f][d+1];v=u*v[f+1][d]+p*v[f+1][d+1];n[k]=r*x+c*v}return n}}},{}],979:[function(b,K,G){var q=b("../../lib"),m=b("./xy_defaults"),l=b("./ab_defaults"),h=b("./attributes"),a=b("../../components/color/attributes");K.exports=function(g,
e,n,p){function c(d,f){return q.coerce(g,e,h,d,f)}e._clipPathId="clip"+e.uid+"carpet";n=c("color",a.defaultLine);q.coerceFont(c,"font");c("carpet");l(g,e,p,c,n);e.a&&e.b?(3>e.a.length&&(e.aaxis.smoothing=0),3>e.b.length&&(e.baxis.smoothing=0),m(g,e,c)||(e.visible=!1),e._cheater&&c("cheaterslope")):e.visible=!1}},{"../../components/color/attributes":642,"../../lib":778,"./ab_defaults":962,"./attributes":964,"./xy_defaults":988}],980:[function(b,K,G){K.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),
plot:b("./plot"),calc:b("./calc"),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:b("../../plots/cartesian"),categories:"cartesian svg carpet carpetAxis notLegendIsolatable noMultiCategory noHover noSortingByValue".split(" "),meta:{}}},{"../../plots/cartesian":841,"./attributes":964,"./calc":968,"./defaults":979,"./plot":985}],981:[function(b,K,G){K.exports=function(q,m){for(var l=q._fullData.length,h,a=0;a<l;a++){var g=q._fullData[a];if(g.index!==m.index&&"carpet"===
g.type&&(h||(h=g),g.carpet===m.carpet))return g}return h}},{}],982:[function(b,K,G){K.exports=function(q,m,l){if(0===q.length)return"";var h,a=[],g=l?3:1;for(h=0;h<q.length;h+=g)a.push(q[h]+","+m[h]),l&&h<q.length-g&&(a.push("C"),a.push([q[h+1]+","+m[h+1],q[h+2]+","+m[h+2]+" "].join(" ")));return a.join(l?"":"L")}},{}],983:[function(b,K,G){var q=b("../../lib").isArrayOrTypedArray;K.exports=function(m,l,h){var a;q(m)?m.length>l.length&&(m=m.slice(0,l.length)):m=[];for(a=0;a<l.length;a++)m[a]=h(l[a]);
return m}},{"../../lib":778}],984:[function(b,K,G){K.exports=function(q,m,l,h,a,g){var e=a[0]*q.dpdx(m),n=a[1]*q.dpdy(l),p=1,c=1;g&&(c=Math.max(0,(a[0]*g[0]+a[1]*g[1])/Math.sqrt(a[0]*a[0]+a[1]*a[1])/Math.sqrt(g[0]*g[0]+g[1]*g[1])));a=180*Math.atan2(n,e)/Math.PI;-90>a?(a+=180,p=-p):90<a&&(a-=180,p=-p);return{angle:a,flip:p,p:q.c2p(h,m,l),offsetMultplier:c}}},{}],985:[function(b,K,G){function q(u,v,x,C,z,y){C="const-"+z+"-lines";x=x.selectAll("."+C).data(y);x.enter().append("path").classed(C,!0).style("vector-effect",
"non-scaling-stroke");x.each(function(D){var A=D.y,t=g([],D.x,u.c2p);A=g([],A,v.c2p);t="M"+e(t,A,D.smoothing);h.select(this).attr("d",t).style("stroke-width",D.width).style("stroke",D.color).style("fill","none")});x.exit().remove()}function m(u,v,x,C,z,y,D,A){z=y.selectAll("text."+A).data(D);z.enter().append("text").classed(A,!0);var t=0,B={};z.each(function(F,I){if("auto"===F.axis.tickangle)var J=n(C,v,x,F.xy,F.dxy);else J=(F.axis.tickangle+180)*Math.PI/180,J=n(C,v,x,F.xy,[Math.cos(J),Math.sin(J)]);
I||(B={angle:J.angle,flip:J.flip});I=(F.endAnchor?-1:1)*J.flip;var L=h.select(this).attr({"text-anchor":0<I?"start":"end","data-notex":1}).call(a.font,F.font).text(F.text).call(p.convertToTspans,u),H=a.bBox(this);L.attr("transform",f(J.p[0],J.p[1])+d(J.angle)+f(F.axis.labelpadding*I,.3*H.height));t=Math.max(t,H.width+F.axis.labelpadding)});z.exit().remove();B.maxExtent=t;return B}function l(u,v,x,C,z,y,D,A,t,B,F){C=[];D.title.text&&C.push(D.title.text);v=v.selectAll("text."+F).data(C);var I=B.maxExtent;
v.enter().append("text").classed(F,!0);v.each(function(){var J=n(x,A,t,z,y);-1===["start","both"].indexOf(D.showticklabels)&&(I=0);var L=D.title.font.size;I+=L+D.title.offset;var H=(B.angle+(0>B.flip?180:0)-J.angle+450)%360;H=90<H&&270>H;var P=h.select(this);P.text(D.title.text).call(p.convertToTspans,u);H&&(I=(-p.lineCount(P)+r)*k*L-I);P.attr("transform",f(J.p[0],J.p[1])+d(J.angle)+f(0,I)).attr("text-anchor","middle").call(a.font,D.title.font)});v.exit().remove()}var h=b("d3"),a=b("../../components/drawing"),
g=b("./map_1d_array"),e=b("./makepath"),n=b("./orient_text"),p=b("../../lib/svg_text_utils"),c=b("../../lib"),d=c.strRotate,f=c.strTranslate;b=b("../../constants/alignment");K.exports=function(u,v,x,C){var z=v.xaxis,y=v.yaxis,D=u._fullLayout._clips;c.makeTraceGroups(C,x,"trace").each(function(A){var t=h.select(this),B=A[0];A=B.trace;var F=A.aaxis,I=A.baxis,J=c.ensureSingle(t,"g","minorlayer"),L=c.ensureSingle(t,"g","majorlayer"),H=c.ensureSingle(t,"g","boundarylayer"),P=c.ensureSingle(t,"g","labellayer");
t.style("opacity",A.opacity);q(z,y,L,F,"a",F._gridlines,!0);q(z,y,L,I,"b",I._gridlines,!0);q(z,y,J,F,"a",F._minorgridlines,!0);q(z,y,J,I,"b",I._minorgridlines,!0);q(z,y,H,F,"a-boundary",F._boundarylines);q(z,y,H,I,"b-boundary",I._boundarylines);t=m(u,z,y,A,B,P,F._labels,"a-label");I=m(u,z,y,A,B,P,I._labels,"b-label");F=c.aggNums(Math.min,null,A.a);H=c.aggNums(Math.max,null,A.a);J=c.aggNums(Math.min,null,A.b);L=c.aggNums(Math.max,null,A.b);H=.5*(F+H);var M=J;var N=A.ab2xy(H,M,!0);var T=A.dxyda_rough(H,
M);void 0===t.angle&&c.extendFlat(t,n(A,z,y,N,A.dxydb_rough(H,M)));l(u,P,A,B,N,T,A.aaxis,z,y,t,"a-title");H=F;M=.5*(J+L);N=A.ab2xy(H,M,!0);T=A.dxydb_rough(H,M);void 0===I.angle&&c.extendFlat(I,n(A,z,y,N,A.dxyda_rough(H,M)));l(u,P,A,B,N,T,A.baxis,z,y,I,"b-title");P=D.select("#"+A._clipPathId);P.size()||(P=D.append("clipPath").classed("carpetclip",!0));t=c.ensureSingle(P,"path","carpetboundary");L=B.clipsegments;H=[];for(J=0;J<L.length;J++)B=L[J],I=g([],B.x,z.c2p),F=g([],B.y,y.c2p),H.push(e(I,F,B.bicubic));
B="M"+H.join("L")+"Z";P.attr("id",A._clipPathId);t.attr("d",B)})};var k=b.LINE_SPACING,r=(1-b.MID_SHIFT)/k+1},{"../../components/drawing":665,"../../constants/alignment":745,"../../lib":778,"../../lib/svg_text_utils":803,"./makepath":982,"./map_1d_array":983,"./orient_text":984,d3:169}],986:[function(b,K,G){var q=b("./constants"),m=b("../../lib/search").findBin,l=b("./compute_control_points"),h=b("./create_spline_evaluator"),a=b("./create_i_derivative_evaluator"),g=b("./create_j_derivative_evaluator");
K.exports=function(e){var n=e._a,p=e._b,c=n.length,d=p.length,f=e.aaxis,k=e.baxis,r=n[0],u=n[c-1],v=p[0],x=p[d-1],C=n[n.length-1]-n[0],z=p[p.length-1]-p[0],y=C*q.RELATIVE_CULL_TOLERANCE,D=z*q.RELATIVE_CULL_TOLERANCE;r-=y;u+=y;v-=D;x+=D;e.isVisible=function(A,t){return A>r&&A<u&&t>v&&t<x};e.isOccluded=function(A,t){return A<r||A>u||t<v||t>x};e.setScale=function(){var A=l(e._xctrl,e._yctrl,e._x,e._y,f.smoothing,k.smoothing);e._xctrl=A[0];e._yctrl=A[1];e.evalxy=h([e._xctrl,e._yctrl],c,d,f.smoothing,
k.smoothing);e.dxydi=a([e._xctrl,e._yctrl],f.smoothing,k.smoothing);e.dxydj=g([e._xctrl,e._yctrl],f.smoothing,k.smoothing)};e.i2a=function(A){var t=Math.max(0,Math.floor(A[0]),c-2);A=A[0]-t;return(1-A)*n[t]+A*n[t+1]};e.j2b=function(A){var t=Math.max(0,Math.floor(A[1]),c-2);A=A[1]-t;return(1-A)*p[t]+A*p[t+1]};e.ij2ab=function(A){return[e.i2a(A[0]),e.j2b(A[1])]};e.a2i=function(A){var t=Math.max(0,Math.min(m(A,n),c-2)),B=n[t];return Math.max(0,Math.min(c-1,t+(A-B)/(n[t+1]-B)))};e.b2j=function(A){var t=
Math.max(0,Math.min(m(A,p),d-2)),B=p[t];return Math.max(0,Math.min(d-1,t+(A-B)/(p[t+1]-B)))};e.ab2ij=function(A){return[e.a2i(A[0]),e.b2j(A[1])]};e.i2c=function(A,t){return e.evalxy([],A,t)};e.ab2xy=function(A,t,B){if(!B&&(A<n[0]||A>n[c-1]|t<p[0]||t>p[d-1]))return[!1,!1];var F=e.a2i(A),I=e.b2j(t),J=e.evalxy([],F,I);if(B){var L=B=0,H=[],P;A<n[0]?(F=P=0,B=(A-n[0])/(n[1]-n[0])):A>n[c-1]?(P=c-2,F=1,B=(A-n[c-1])/(n[c-1]-n[c-2])):(P=Math.max(0,Math.min(c-2,Math.floor(F))),F-=P);t<p[0]?(I=A=0,L=(t-p[0])/
(p[1]-p[0])):t>p[d-1]?(A=d-2,I=1,L=(t-p[d-1])/(p[d-1]-p[d-2])):(A=Math.max(0,Math.min(d-2,Math.floor(I))),I-=A);B&&(e.dxydi(H,P,A,F,I),J[0]+=H[0]*B,J[1]+=H[1]*B);L&&(e.dxydj(H,P,A,F,I),J[0]+=H[0]*L,J[1]+=H[1]*L)}return J};e.c2p=function(A,t,B){return[t.c2p(A[0]),B.c2p(A[1])]};e.p2x=function(A,t,B){return[t.p2c(A[0]),B.p2c(A[1])]};e.dadi=function(A){A=Math.max(0,Math.min(n.length-2,A));return n[A+1]-n[A]};e.dbdj=function(A){A=Math.max(0,Math.min(p.length-2,A));return p[A+1]-p[A]};e.dxyda=function(A,
t,B,F){t=e.dxydi(null,A,t,B,F);A=e.dadi(A,B);return[t[0]/A,t[1]/A]};e.dxydb=function(A,t,B,F){A=e.dxydj(null,A,t,B,F);t=e.dbdj(t,F);return[A[0]/t,A[1]/t]};e.dxyda_rough=function(A,t,B){B=C*(B||.1);var F=e.ab2xy(A+B,t,!0);A=e.ab2xy(A-B,t,!0);return[.5*(F[0]-A[0])/B,.5*(F[1]-A[1])/B]};e.dxydb_rough=function(A,t,B){B=z*(B||.1);var F=e.ab2xy(A,t+B,!0);A=e.ab2xy(A,t-B,!0);return[.5*(F[0]-A[0])/B,.5*(F[1]-A[1])/B]};e.dpdx=function(A){return A._m};e.dpdy=function(A){return A._m}}},{"../../lib/search":798,
"./compute_control_points":974,"./constants":975,"./create_i_derivative_evaluator":976,"./create_j_derivative_evaluator":977,"./create_spline_evaluator":978}],987:[function(b,K,G){var q=b("../../lib");K.exports=function(m,l,h){var a,g,e=[],n=[],p=m[0].length,c=m.length,d=0;for(a=0;a<p;a++)for(g=0;g<c;g++){if(void 0===m[g][a]){e.push(a);n.push(g);var f=m[g];var k=a,r=void 0,u=0,v=0;0<a&&void 0!==(r=m[g][a-1])&&(v++,u+=r);a<p-1&&void 0!==(r=m[g][a+1])&&(v++,u+=r);0<g&&void 0!==(r=m[g-1][a])&&(v++,u+=
r);g<c-1&&void 0!==(r=m[g+1][a])&&(v++,u+=r);f[k]=u/Math.max(1,v)}d=Math.max(d,Math.abs(m[g][a]))}if(!e.length)return m;r=0;u=e.length;do{for(f=k=0;f<u;f++){a=e[f];g=n[f];var x=v=0;if(0===a){var C=Math.min(p-1,2);var z=l[C];var y=l[1];C=m[g][C];var D=m[g][1];x+=D+(D-C)*(l[0]-y)/(y-z);v++}else a===p-1&&(C=Math.max(0,p-3),z=l[C],y=l[p-2],C=m[g][C],D=m[g][p-2],x+=D+(D-C)*(l[p-1]-y)/(y-z),v++);(0===a||a===p-1)&&0<g&&g<c-1&&(z=h[g+1]-h[g],y=h[g]-h[g-1],x+=(y*m[g+1][a]+z*m[g-1][a])/(y+z),v++);0===g?(C=
Math.min(c-1,2),z=h[C],y=h[1],C=m[C][a],D=m[1][a],x+=D+(D-C)*(h[0]-y)/(y-z),v++):g===c-1&&(C=Math.max(0,c-3),z=h[C],y=h[c-2],C=m[C][a],D=m[c-2][a],x+=D+(D-C)*(h[c-1]-y)/(y-z),v++);(0===g||g===c-1)&&0<a&&a<p-1&&(z=l[a+1]-l[a],y=l[a]-l[a-1],x+=(y*m[g][a+1]+z*m[g][a-1])/(y+z),v++);if(v)x/=v;else{x=l[a+1]-l[a];z=l[a]-l[a-1];y=h[g+1]-h[g];C=h[g]-h[g-1];D=x*z*(x+z);var A=y*C*(y+C);x=(D*(C*m[g+1][a]+y*m[g-1][a])+A*(z*m[g][a+1]+x*m[g][a-1]))/(A*(z+x)+D*(C+y))}x-=m[g][a];z=x/d;k+=z*z;v=v?0:.85;m[g][a]+=x*
(1+v)}k=Math.sqrt(k)}while(100>r++&&1E-5<k);q.log("Smoother converged to",k,"after",r,"iterations");return m}},{"../../lib":778}],988:[function(b,K,G){var q=b("../../lib").isArray1D;K.exports=function(m,l,h){var a=(m=h("x"))&&m.length,g=(h=h("y"))&&h.length;if(!a&&!g)return!1;l._cheater=!m;a&&!q(m)||g&&!q(h)?l._length=null:(m=a?m.length:Infinity,g&&(m=Math.min(m,h.length)),l.a&&l.a.length&&(m=Math.min(m,l.a.length)),l.b&&l.b.length&&(m=Math.min(m,l.b.length)),l._length=m);return!0}},{"../../lib":778}],
989:[function(b,K,G){G=b("../../plots/template_attributes").hovertemplateAttrs;var q=b("../scattergeo/attributes"),m=b("../../components/colorscale/attributes"),l=b("../../plots/attributes"),h=b("../../components/color/attributes").defaultLine;b=b("../../lib/extend").extendFlat;var a=q.marker.line;K.exports=b({locations:{valType:"data_array",editType:"calc"},locationmode:q.locationmode,z:{valType:"data_array",editType:"calc"},geojson:b({},q.geojson,{}),featureidkey:q.featureidkey,text:b({},q.text,
{}),hovertext:b({},q.hovertext,{}),marker:{line:{color:b({},a.color,{dflt:h}),width:b({},a.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:q.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:q.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:b({},l.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:G(),showlegend:b({},
l.showlegend,{dflt:!1})},m("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/color/attributes":642,"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,"../scattergeo/attributes":1229}],990:[function(b,K,G){function q(e){return e&&"string"===typeof e}var m=b("fast-isnumeric"),l=b("../../constants/numerical").BADNUM,h=b("../../components/colorscale/calc"),a=b("../scatter/arrays_to_calcdata"),g=b("../scatter/calc_selection");
K.exports=function(e,n){var p=n._length,c=Array(p);var d=n.geojson?function(v){return q(v)||m(v)}:q;for(var f=0;f<p;f++){var k=c[f]={},r=n.locations[f],u=n.z[f];d(r)&&m(u)?(k.loc=r,k.z=u):(k.loc=null,k.z=l);k.index=f}a(c,n);h(e,n,{vals:n.z,containerStr:"",cLetter:"z"});g(c,n);return c}},{"../../components/colorscale/calc":651,"../../constants/numerical":753,"../scatter/arrays_to_calcdata":1186,"../scatter/calc_selection":1189,"fast-isnumeric":241}],991:[function(b,K,G){var q=b("../../lib"),m=b("../../components/colorscale/defaults"),
l=b("./attributes");K.exports=function(h,a,g,e){function n(d,f){return q.coerce(h,a,l,d,f)}g=n("locations");var p=n("z");if(g&&g.length&&q.isArrayOrTypedArray(p)&&p.length){a._length=Math.min(g.length,p.length);g=n("geojson");if("string"===typeof g&&""!==g||q.isPlainObject(g))var c="geojson-id";"geojson-id"===n("locationmode",c)&&n("featureidkey");n("text");n("hovertext");n("hovertemplate");n("marker.line.width")&&n("marker.line.color");n("marker.opacity");m(h,a,e,n,{prefix:"",cLetter:"z"});q.coerceSelectionMarkerOpacity(a,
n)}else a.visible=!1}},{"../../components/colorscale/defaults":653,"../../lib":778,"./attributes":989}],992:[function(b,K,G){K.exports=function(q,m,l,h,a){q.location=m.location;q.z=m.z;m=h[a];m.fIn&&m.fIn.properties&&(q.properties=m.fIn.properties);q.ct=m.ct;return q}},{}],993:[function(b,K,G){var q=b("../../plots/cartesian/axes"),m=b("./attributes"),l=b("../../lib").fillText;K.exports=function(h,a,g){var e=h.cd,n=e[0].trace,p=h.subplot,c=[a,g],d=[a+360,g];for(a=0;a<e.length;a++){var f=e[a];var k=
!1;if(f._polygons){for(g=0;g<f._polygons.length;g++)f._polygons[g].contains(c)&&(k=!k),f._polygons[g].contains(d)&&(k=!k);if(k)break}}if(k&&f)return h.x0=h.x1=h.xa.c2p(f.ct),h.y0=h.y1=h.ya.c2p(f.ct),h.index=f.index,h.location=f.loc,h.z=f.z,h.zLabel=q.tickText(p.mockAxis,p.mockAxis.c2l(f.z),"hover").text,h.hovertemplate=f.hovertemplate,e=f,n.hovertemplate||(f=e.hi||n.hoverinfo,p=String(e.loc),a="all"===f?m.hoverinfo.flags:f.split("+"),f=-1!==a.indexOf("name"),k=-1!==a.indexOf("location"),c=-1!==a.indexOf("z"),
a=-1!==a.indexOf("text"),g=[],!f&&k?h.nameOverride=p:(f&&(h.nameOverride=n.name),k&&g.push(p)),c&&g.push(h.zLabel),a&&l(e,n,g),h.extraText=g.join("<br>")),[h]}},{"../../lib":778,"../../plots/cartesian/axes":828,"./attributes":989}],994:[function(b,K,G){K.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../heatmap/colorbar"),calc:b("./calc"),calcGeoJSON:b("./plot").calcGeoJSON,plot:b("./plot").plot,style:b("./style").style,styleOnSelect:b("./style").styleOnSelect,hoverPoints:b("./hover"),
eventData:b("./event_data"),selectPoints:b("./select"),moduleType:"trace",name:"choropleth",basePlotModule:b("../../plots/geo"),categories:["geo","noOpacity","showLegend"],meta:{}}},{"../../plots/geo":860,"../heatmap/colorbar":1068,"./attributes":989,"./calc":990,"./defaults":991,"./event_data":992,"./hover":993,"./plot":995,"./select":996,"./style":997}],995:[function(b,K,G){var q=b("d3"),m=b("../../lib"),l=b("../../lib/geo_location_utils"),h=b("../../lib/topojson_utils").getTopojsonFeatures,a=b("../../plots/cartesian/autorange").findExtremes,
g=b("./style").style;K.exports={calcGeoJSON:function(e,n){var p=e[0].trace;n=n[p.geo];var c=n._subplot,d=p.locationmode,f=p._length,k="geojson-id"===d?l.extractTraceFeature(e):h(p,c.topojson);c=[];for(var r=[],u=0;u<f;u++){var v=e[u],x="geojson-id"===d?v.fOut:l.locationToFeature(d,v.loc,k);x?(v.geojson=x,v.ct=x.properties.ct,v._polygons=l.feature2polygons(x),v=l.computeBbox(x),c.push(v[0],v[2]),r.push(v[1],v[3])):v.geojson=null}"geojson"===n.fitbounds&&"geojson-id"===d&&(e=l.computeBbox(l.getTraceGeojson(p)),
c=[e[0],e[2]],r=[e[1],e[3]]);e={padded:!0};p._extremes.lon=a(n.lonaxis._ax,c,e);p._extremes.lat=a(n.lataxis._ax,r,e)},plot:function(e,n,p){n=n.layers.backplot.select(".choroplethlayer");m.makeTraceGroups(n,p,"trace choropleth").each(function(c){var d=q.select(this).selectAll("path.choroplethlocation").data(m.identity);d.enter().append("path").classed("choroplethlocation",!0);d.exit().remove();g(e,c)})}}},{"../../lib":778,"../../lib/geo_location_utils":771,"../../lib/topojson_utils":806,"../../plots/cartesian/autorange":827,
"./style":997,d3:169}],996:[function(b,K,G){K.exports=function(q,m){var l=q.cd,h=q.xaxis,a=q.yaxis,g=[],e,n;if(!1===m)for(e=0;e<l.length;e++)l[e].selected=0;else for(e=0;e<l.length;e++){var p=l[e];if(n=p.ct){var c=h.c2p(n);var d=a.c2p(n);m.contains([c,d],null,e,q)?(g.push({pointNumber:e,lon:n[0],lat:n[1]}),p.selected=1):p.selected=0}}return g}},{}],997:[function(b,K,G){function q(g,e){var n=e[0].trace;e=e[0].node3.selectAll(".choroplethlocation");var p=n.marker||{},c=p.line||{},d=a.makeColorScaleFuncFromTrace(n);
e.each(function(f){m.select(this).attr("fill",d(f.z)).call(l.stroke,f.mlc||c.color).call(h.dashLine,"",f.mlw||c.width||0).style("opacity",p.opacity)});h.selectedPointStyle(e,n,g)}var m=b("d3"),l=b("../../components/color"),h=b("../../components/drawing"),a=b("../../components/colorscale");K.exports={style:function(g,e){e&&q(g,e)},styleOnSelect:function(g,e){var n=e[0].node3,p=e[0].trace;p.selectedpoints?h.selectedPointStyle(n.selectAll(".choroplethlocation"),p,g):q(g,e)}}},{"../../components/color":643,
"../../components/colorscale":655,"../../components/drawing":665,d3:169}],998:[function(b,K,G){G=b("../choropleth/attributes");var q=b("../../components/colorscale/attributes"),m=b("../../plots/template_attributes").hovertemplateAttrs,l=b("../../plots/attributes");b=b("../../lib/extend").extendFlat;K.exports=b({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:b({},G.featureidkey,{}),below:{valType:"string",
editType:"plot"},text:G.text,hovertext:G.hovertext,marker:{line:{color:b({},G.marker.line.color,{editType:"plot"}),width:b({},G.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:b({},G.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:b({},G.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:b({},G.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:G.hoverinfo,hovertemplate:m({},
{keys:["properties"]}),showlegend:b({},l.showlegend,{dflt:!1})},q("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,"../choropleth/attributes":989}],999:[function(b,K,G){function q(n){var p=n[0].trace,c=p._opts;if(p.selectedpoints){p=a.makeSelectedPointStyleFns(p);for(var d=0;d<n.length;d++){var f=n[d];f.fOut&&(f.fOut.properties.mo2=p.selectedOpacityFn(f))}n={type:"identity",
property:"mo2"}}else n=l.isArrayOrTypedArray(p.marker.opacity)?{type:"identity",property:"mo"}:p.marker.opacity;l.extendFlat(c.fill.paint,{"fill-opacity":n});l.extendFlat(c.line.paint,{"line-opacity":n});return c}var m=b("fast-isnumeric"),l=b("../../lib"),h=b("../../components/colorscale"),a=b("../../components/drawing"),g=b("../../lib/geojson_utils").makeBlank,e=b("../../lib/geo_location_utils");K.exports={convert:function(n){var p=n[0].trace,c=!0===p.visible&&0!==p._length,d={layout:{visibility:"none"},
paint:{}},f={layout:{visibility:"none"},paint:{}},k=p._opts={fill:d,line:f,geojson:g()};if(!c)return k;c=e.extractTraceFeature(n);if(!c)return k;var r=h.makeColorScaleFuncFromTrace(p),u=p.marker;p=u.line||{};var v;l.isArrayOrTypedArray(u.opacity)&&(v=function(t){t=t.mo;return m(t)?+l.constrain(t,0,1):0});var x;l.isArrayOrTypedArray(p.color)&&(x=function(t){return t.mlc});var C;l.isArrayOrTypedArray(p.width)&&(C=function(t){return t.mlw});for(var z=0;z<n.length;z++){var y=n[z],D=y.fOut;if(D){var A=
D.properties;A.fc=r(y.z);v&&(A.mo=v(y));x&&(A.mlc=x(y));C&&(A.mlw=C(y));y.ct=A.ct;y._polygons=e.feature2polygons(D)}}v=v?{type:"identity",property:"mo"}:u.opacity;l.extendFlat(d.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":v});l.extendFlat(f.paint,{"line-color":x?{type:"identity",property:"mlc"}:p.color,"line-width":C?{type:"identity",property:"mlw"}:p.width,"line-opacity":v});d.layout.visibility="visible";f.layout.visibility="visible";k.geojson={type:"FeatureCollection",features:c};
q(n);return k},convertOnSelect:q}},{"../../components/colorscale":655,"../../components/drawing":665,"../../lib":778,"../../lib/geo_location_utils":771,"../../lib/geojson_utils":772,"fast-isnumeric":241}],1E3:[function(b,K,G){var q=b("../../lib"),m=b("../../components/colorscale/defaults"),l=b("./attributes");K.exports=function(h,a,g,e){function n(d,f){return q.coerce(h,a,l,d,f)}g=n("locations");var p=n("z"),c=n("geojson");q.isArrayOrTypedArray(g)&&g.length&&q.isArrayOrTypedArray(p)&&p.length&&("string"===
typeof c&&""!==c||q.isPlainObject(c))?(n("featureidkey"),a._length=Math.min(g.length,p.length),n("below"),n("text"),n("hovertext"),n("hovertemplate"),n("marker.line.width")&&n("marker.line.color"),n("marker.opacity"),m(h,a,e,n,{prefix:"",cLetter:"z"}),q.coerceSelectionMarkerOpacity(a,n)):a.visible=!1}},{"../../components/colorscale/defaults":653,"../../lib":778,"./attributes":998}],1001:[function(b,K,G){K.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../heatmap/colorbar"),
calc:b("../choropleth/calc"),plot:b("./plot"),hoverPoints:b("../choropleth/hover"),eventData:b("../choropleth/event_data"),selectPoints:b("../choropleth/select"),styleOnSelect:function(q,m){m&&m[0].trace._glTrace.updateOnSelect(m)},getBelow:function(q,m){q=m.getMapLayers();for(m=q.length-2;0<=m;m--){var l=q[m].id;if("string"===typeof l&&0===l.indexOf("water"))for(var h=m+1;h<q.length;h++)if(l=q[h].id,"string"===typeof l&&-1===l.indexOf("plotly-"))return l}},moduleType:"trace",name:"choroplethmapbox",
basePlotModule:b("../../plots/mapbox"),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},{"../../plots/mapbox":885,"../choropleth/calc":990,"../choropleth/event_data":992,"../choropleth/hover":993,"../choropleth/select":996,"../heatmap/colorbar":1068,"./attributes":998,"./defaults":1E3,"./plot":1002}],1002:[function(b,K,G){function q(a,g){this.type="choroplethmapbox";this.subplot=a;this.uid=g;this.sourceId="source-"+g;this.layerList=[["fill",h+g+"-fill"],["line",
h+g+"-line"]];this.below=null}var m=b("./convert").convert,l=b("./convert").convertOnSelect,h=b("../../plots/mapbox/constants").traceLayerPrefix;b=q.prototype;b.update=function(a){this._update(m(a))};b.updateOnSelect=function(a){this._update(l(a))};b._update=function(a){var g=this.subplot,e=this.layerList,n=g.belowLookup["trace-"+this.uid];g.map.getSource(this.sourceId).setData(a.geojson);n!==this.below&&(this._removeLayers(),this._addLayers(a,n),this.below=n);for(n=0;n<e.length;n++){var p=e[n],c=
p[1];p=a[p[0]];g.setOptions(c,"setLayoutProperty",p.layout);"visible"===p.layout.visibility&&g.setOptions(c,"setPaintProperty",p.paint)}};b._addLayers=function(a,g){for(var e=this.subplot,n=this.layerList,p=this.sourceId,c=0;c<n.length;c++){var d=n[c],f=d[0],k=a[f];e.addLayer({type:f,id:d[1],source:p,layout:k.layout,paint:k.paint},g)}};b._removeLayers=function(){for(var a=this.subplot.map,g=this.layerList,e=g.length-1;0<=e;e--)a.removeLayer(g[e][1])};b.dispose=function(){var a=this.subplot.map;this._removeLayers();
a.removeSource(this.sourceId)};K.exports=function(a,g){var e=g[0].trace,n=new q(a,e.uid),p=n.sourceId,c=m(g);e=n.below=a.belowLookup["trace-"+e.uid];a.map.addSource(p,{type:"geojson",data:c.geojson});n._addLayers(c,e);return g[0].trace._glTrace=n}},{"../../plots/mapbox/constants":883,"./convert":999}],1003:[function(b,K,G){G=b("../../components/colorscale/attributes");var q=b("../../plots/template_attributes").hovertemplateAttrs,m=b("../mesh3d/attributes"),l=b("../../plots/attributes");b=b("../../lib/extend").extendFlat;
var h={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail",
"cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:q({editType:"calc"},{keys:["norm"]}),showlegend:b({},l.showlegend,{dflt:!1})};b(h,G("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));["opacity","lightposition","lighting"].forEach(function(a){h[a]=m[a]});h.hoverinfo=b({},l.hoverinfo,{editType:"calc",flags:"x y z u v w norm text name".split(" "),dflt:"x+y+z+norm+text+name"});
h.transforms=void 0;K.exports=h},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,"../mesh3d/attributes":1128}],1004:[function(b,K,G){var q=b("../../components/colorscale/calc");K.exports=function(m,l){for(var h=l.u,a=l.v,g=l.w,e=Math.min(l.x.length,l.y.length,l.z.length,h.length,a.length,g.length),n=-Infinity,p=Infinity,c=0;c<e;c++){var d=h[c],f=a[c],k=g[c];d=Math.sqrt(d*d+f*f+k*k);n=Math.max(n,d);p=Math.min(p,
d)}l._len=e;l._normMax=n;q(m,l,{vals:[p,n],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":651}],1005:[function(b,K,G){function q(f,k){this.scene=f;this.uid=k;this.data=this.mesh=null}function m(f,k){function r(C,z){var y=u[z],D=v[p[z]];return a(C,function(A){return y.d2l(A)*D})}var u=f.fullSceneLayout,v=f.dataScale;f={};f.vectors=n(r(k.u,"xaxis"),r(k.v,"yaxis"),r(k.w,"zaxis"),k._len);f.positions=n(r(k.x,"xaxis"),r(k.y,"yaxis"),r(k.z,"zaxis"),k._len);var x=e(k);f.colormap=g(k);
f.vertexIntensityBounds=[x.min/k._normMax,x.max/k._normMax];f.coneOffset=c[k.anchor];f.coneSize="scaled"===k.sizemode?k.sizeref||.5:k.sizeref&&k._normMax?k.sizeref/k._normMax:.5;f=l(f);x=k.lightposition;f.lightPosition=[x.x,x.y,x.z];f.ambient=k.lighting.ambient;f.diffuse=k.lighting.diffuse;f.specular=k.lighting.specular;f.roughness=k.lighting.roughness;f.fresnel=k.lighting.fresnel;f.opacity=k.opacity;k._pad=d[k.anchor]*f.vectorScale*f.coneScale*k._normMax;return f}var l=b("gl-cone3d"),h=b("gl-cone3d").createConeMesh,
a=b("../../lib").simpleMap,g=b("../../lib/gl_format_color").parseColorScale,e=b("../../components/colorscale").extractOpts,n=b("../../plots/gl3d/zip3");b=q.prototype;b.handlePick=function(f){if(f.object===this.mesh){var k=f.index=f.data.index,r=this.data.u[k],u=this.data.v[k],v=this.data.w[k];f.traceCoordinate=[this.data.x[k],this.data.y[k],this.data.z[k],r,u,v,Math.sqrt(r*r+u*u+v*v)];r=this.data.hovertext||this.data.text;Array.isArray(r)&&void 0!==r[k]?f.textLabel=r[k]:r&&(f.textLabel=r);return!0}};
var p={xaxis:0,yaxis:1,zaxis:2},c={tip:1,tail:0,cm:.25,center:.5},d={tip:1,tail:1,cm:.75,center:.5};b.update=function(f){this.data=f;f=m(this.scene,f);this.mesh.update(f)};b.dispose=function(){this.scene.glplot.remove(this.mesh);this.mesh.dispose()};K.exports=function(f,k){var r=f.glplot.gl,u=m(f,k);r=h(r,u);u=new q(f,k.uid);u.mesh=r;u.data=k;r._trace=u;f.glplot.add(r);return u}},{"../../components/colorscale":655,"../../lib":778,"../../lib/gl_format_color":774,"../../plots/gl3d/zip3":881,"gl-cone3d":260}],
1006:[function(b,K,G){var q=b("../../lib"),m=b("../../components/colorscale/defaults"),l=b("./attributes");K.exports=function(h,a,g,e){function n(r,u){return q.coerce(h,a,l,r,u)}g=n("u");var p=n("v"),c=n("w"),d=n("x"),f=n("y"),k=n("z");g&&g.length&&p&&p.length&&c&&c.length&&d&&d.length&&f&&f.length&&k&&k.length?(n("sizeref"),n("sizemode"),n("anchor"),n("lighting.ambient"),n("lighting.diffuse"),n("lighting.specular"),n("lighting.roughness"),n("lighting.fresnel"),n("lightposition.x"),n("lightposition.y"),
n("lightposition.z"),m(h,a,e,n,{prefix:"",cLetter:"c"}),n("text"),n("hovertext"),n("hovertemplate"),a._length=null):a.visible=!1}},{"../../components/colorscale/defaults":653,"../../lib":778,"./attributes":1003}],1007:[function(b,K,G){K.exports={moduleType:"trace",name:"cone",basePlotModule:b("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:b("./calc"),plot:b("./convert"),eventData:function(q,m){q.norm=
m.traceCoordinate[6];return q},meta:{}}},{"../../plots/gl3d":870,"./attributes":1003,"./calc":1004,"./convert":1005,"./defaults":1006}],1008:[function(b,K,G){G=b("../heatmap/attributes");var q=b("../scatter/attributes"),m=b("../../components/colorscale/attributes"),l=b("../../components/drawing/attributes").dash,h=b("../../plots/font_attributes"),a=b("../../lib/extend").extendFlat,g=b("../../constants/filter_ops"),e=g.COMPARISON_OPS2;g=g.INTERVAL_OPS;b("../../constants/docs");b=q.line;K.exports=a({z:G.z,
x:G.x,x0:G.x0,dx:G.dx,y:G.y,y0:G.y0,dy:G.dy,xperiod:G.xperiod,yperiod:G.yperiod,xperiod0:q.xperiod0,yperiod0:q.yperiod0,xperiodalignment:G.xperiodalignment,yperiodalignment:G.yperiodalignment,text:G.text,hovertext:G.hovertext,transpose:G.transpose,xtype:G.xtype,ytype:G.ytype,zhoverformat:G.zhoverformat,hovertemplate:G.hovertemplate,hoverongaps:G.hoverongaps,connectgaps:a({},G.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,
"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill",
"heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:h({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot"},operation:{valType:"enumerated",values:[].concat(e).concat(g),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:a({},b.color,{editType:"style+colorbars"}),
width:{valType:"number",min:0,editType:"style+colorbars"},dash:l,smoothing:a({},b.smoothing,{}),editType:"plot"}},m("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":650,"../../components/drawing/attributes":664,"../../constants/docs":748,"../../constants/filter_ops":749,"../../lib/extend":768,"../../plots/font_attributes":856,"../heatmap/attributes":1065,"../scatter/attributes":1187}],1009:[function(b,K,G){var q=b("../../components/colorscale"),
m=b("../heatmap/calc"),l=b("./set_contours"),h=b("./end_plus");K.exports=function(a,g){var e=m(a,g),n=e[0].z;l(g,n);var p=g.contours,c=q.extractOpts(g);"heatmap"===p.coloring&&c.auto&&!1===g.autocontour?(n=p.start,c=h(p),p=p.size||1,c=Math.floor((c-n)/p)+1,isFinite(p)||(c=p=1),n-=p/2,p=[n,n+c*p]):p=n;q.calc(a,g,{vals:p,cLetter:"z"});return e}},{"../../components/colorscale":655,"../heatmap/calc":1066,"./end_plus":1019,"./set_contours":1027}],1010:[function(b,K,G){K.exports=function(q,m){var l=q[0],
h=l.z,a;switch(m.type){case "levels":l=Math.min(h[0][0],h[0][1]);for(a=0;a<q.length;a++){var g=q[a];g.prefixBoundary=!g.edgepaths.length&&(l>g.level||g.starts.length&&l===g.level)}break;case "constraint":if(l.prefixBoundary=!1,!l.edgepaths.length){var e=l.x.length,n=l.y.length;q=-Infinity;g=Infinity;for(a=0;a<n;a++)g=Math.min(g,h[a][0]),g=Math.min(g,h[a][e-1]),q=Math.max(q,h[a][0]),q=Math.max(q,h[a][e-1]);for(a=1;a<e-1;a++)g=Math.min(g,h[0][a]),g=Math.min(g,h[n-1][a]),q=Math.max(q,h[0][a]),q=Math.max(q,
h[n-1][a]);a=m.value;switch(m._operation){case ">":a>q&&(l.prefixBoundary=!0);break;case "<":if(a<g||l.starts.length&&a===g)l.prefixBoundary=!0;break;case "[]":m=Math.min(a[0],a[1]);a=Math.max(a[0],a[1]);if(a<g||m>q||l.starts.length&&a===g)l.prefixBoundary=!0;break;case "][":m=Math.min(a[0],a[1]),a=Math.max(a[0],a[1]),m<g&&a>q&&(l.prefixBoundary=!0)}}}}},{}],1011:[function(b,K,G){var q=b("../../components/colorscale"),m=b("./make_color_map"),l=b("./end_plus");K.exports={min:"zmin",max:"zmax",calc:function(h,
a,g){h=a.contours;var e=a.line,n=h.size||1,p=h.coloring,c=m(a,{isColorbar:!0});"heatmap"===p?(a=q.extractOpts(a),g._fillgradient=a.reversescale?q.flipScale(a.colorscale):a.colorscale,g._zrange=[a.min,a.max]):"fill"===p&&(g._fillcolor=c);g._line={color:"lines"===p?c:e.color,width:!1!==h.showlines?e.width:0,dash:e.dash};g._levels={start:h.start,end:l(h),size:n}}}},{"../../components/colorscale":655,"./end_plus":1019,"./make_color_map":1024}],1012:[function(b,K,G){K.exports={BOTTOMSTART:[1,9,13,104,
713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},
{}],1013:[function(b,K,G){var q=b("fast-isnumeric"),m=b("./label_defaults");G=b("../../components/color");var l=G.addOpacity,h=G.opacity;b=b("../../constants/filter_ops");var a=b.CONSTRAINT_REDUCTION,g=b.COMPARISON_OPS2;K.exports=function(e,n,p,c,d,f){var k=n.contours,r=p("contours.operation");k._operation=a[r];if(-1===g.indexOf(k.operation))if(p("contours.value",[0,1]),Array.isArray(k.value))if(2<k.value.length)k.value=k.value.slice(2);else if(0===k.length)k.value=[0,1];else if(2>k.length){var u=
parseFloat(k.value[0]);k.value=[u,u+1]}else k.value=[parseFloat(k.value[0]),parseFloat(k.value[1])];else q(k.value)&&(u=parseFloat(k.value),k.value=[u,u+1]);else p("contours.value",0),q(k.value)||(Array.isArray(k.value)?k.value=parseFloat(k.value[0]):k.value=0);if("="===r)k=k.showlines=!0;else{k=p("contours.showlines");var v=p("fillcolor",l((e.line||{}).color||d,.5))}if(k){e=v&&h(v)?l(n.fillcolor,1):d;var x=p("line.color",e);p("line.width",2);p("line.dash")}p("line.smoothing");m(p,c,x,f)}},{"../../components/color":643,
"../../constants/filter_ops":749,"./label_defaults":1023,"fast-isnumeric":241}],1014:[function(b,K,G){function q(g,e){function n(d){return a(d)?+d:null}var p=Array.isArray(e),c;-1!==h.COMPARISON_OPS2.indexOf(g)?c=p?n(e[0]):n(e):-1!==h.INTERVAL_OPS.indexOf(g)?c=p?[n(e[0]),n(e[1])]:[n(e),n(e)]:-1!==h.SET_OPS.indexOf(g)&&(c=p?e.map(n):[n(e)]);return c}function m(g){return function(e){e=q(g,e);var n=Math.min(e[0],e[1]);e=Math.max(e[0],e[1]);return{start:n,end:e,size:e-n}}}function l(g){return function(e){e=
q(g,e);return{start:e,end:Infinity,size:Infinity}}}var h=b("../../constants/filter_ops"),a=b("fast-isnumeric");K.exports={"[]":m("[]"),"][":m("]["),">":l(">"),"<":l("<"),"=":l("=")}},{"../../constants/filter_ops":749,"fast-isnumeric":241}],1015:[function(b,K,G){K.exports=function(q,m,l,h){q=h("contours.start");h=h("contours.end");h=!1===q||!1===h;q=l("contours.size");(h?!(m.autocontour=!0):!l("autocontour",!1))&&q||l("ncontours")}},{}],1016:[function(b,K,G){function q(l){return m.extendFlat({},l,
{edgepaths:m.extendDeep([],l.edgepaths),paths:m.extendDeep([],l.paths),starts:m.extendDeep([],l.starts)})}var m=b("../../lib");K.exports=function(l,h){var a=function(n){return n.reverse()},g=function(n){return n};switch(h){case "=":case "<":return l;case ">":1!==l.length&&m.warn("Contour data invalid for the specified inequality operation.");var e=l[0];for(h=0;h<e.edgepaths.length;h++)e.edgepaths[h]=a(e.edgepaths[h]);for(h=0;h<e.paths.length;h++)e.paths[h]=a(e.paths[h]);for(h=0;h<e.starts.length;h++)e.starts[h]=
a(e.starts[h]);return l;case "][":h=a,a=g,g=h;case "[]":2!==l.length&&m.warn("Contour data invalid for the specified inequality range operation.");e=q(l[0]);l=q(l[1]);for(h=0;h<e.edgepaths.length;h++)e.edgepaths[h]=a(e.edgepaths[h]);for(h=0;h<e.paths.length;h++)e.paths[h]=a(e.paths[h]);for(h=0;h<e.starts.length;h++)e.starts[h]=a(e.starts[h]);for(;l.edgepaths.length;)e.edgepaths.push(g(l.edgepaths.shift()));for(;l.paths.length;)e.paths.push(g(l.paths.shift()));for(;l.starts.length;)e.starts.push(g(l.starts.shift()));
return[e]}}},{"../../lib":778}],1017:[function(b,K,G){var q=b("../../lib"),m=b("../heatmap/xyz_defaults"),l=b("../scatter/period_defaults"),h=b("./constraint_defaults"),a=b("./contours_defaults"),g=b("./style_defaults"),e=b("./attributes");K.exports=function(n,p,c,d){function f(u,v){return q.coerce(n,p,e,u,v)}function k(u){return q.coerce2(n,p,e,u)}if(m(n,p,f,d)){l(n,p,d,f);f("text");f("hovertext");f("hovertemplate");f("hoverongaps");var r="constraint"===f("contours.type");f("connectgaps",q.isArray1D(p.z));
r?h(n,p,f,d,c):(a(n,p,f,k),g(n,p,f,d))}else p.visible=!1}},{"../../lib":778,"../heatmap/xyz_defaults":1079,"../scatter/period_defaults":1207,"./attributes":1008,"./constraint_defaults":1013,"./contours_defaults":1015,"./style_defaults":1029}],1018:[function(b,K,G){var q=b("../../lib"),m=b("./constraint_mapping"),l=b("./end_plus");K.exports=function(h,a,g){var e="constraint"===h.type?m[h._operation](h.value):h,n=e.size,p=[],c=l(e),d=g.trace._carpetTrace;a=d?{xaxis:d.aaxis,yaxis:d.baxis,x:g.a,y:g.b}:
{xaxis:a.xaxis,yaxis:a.yaxis,x:g.x,y:g.y};for(e=e.start;e<c;e+=n)if(p.push(q.extendFlat({level:e,crossings:{},starts:[],edgepaths:[],paths:[],z:g.z,smoothing:g.trace.line.smoothing},a)),1E3<p.length){q.warn("Too many contours, clipping at 1000",h);break}return p}},{"../../lib":778,"./constraint_mapping":1014,"./end_plus":1019}],1019:[function(b,K,G){K.exports=function(q){return q.end+q.size/1E6}},{}],1020:[function(b,K,G){function q(g,e,n,p){return Math.abs(g[0]-e[0])<n&&Math.abs(g[1]-e[1])<p}function m(g,
e,n,p,c){var d=e.join(","),f=g.crossings[d],k=f,r=0,u=0;20<k&&n?208===k||1114===k?r=0===e[0]?1:-1:u=0===e[1]?1:-1:-1!==a.BOTTOMSTART.indexOf(k)?u=1:-1!==a.LEFTSTART.indexOf(k)?r=1:-1!==a.TOPSTART.indexOf(k)?u=-1:r=-1;var v=[r,u];k=[l(g,e,[-v[0],-v[1]])];var x=g.z.length,C=g.z[0].length;r=e.slice();var z=v.slice();for(u=0;1E4>u;u++){20<f?(f=a.CHOOSESADDLE[f][0>(v[0]||v[1])?0:1],g.crossings[d]=a.SADDLEREMAINDER[f]):delete g.crossings[d];v=a.NEWDELTA[f];if(!v){h.log("Found bad marching index:",f,e,g.level);
break}k.push(l(g,e,v));e[0]+=v[0];e[1]+=v[1];d=e.join(",");q(k[k.length-1],k[k.length-2],p,c)&&k.pop();f=v[0]&&(0>e[0]||e[0]>C-2)||v[1]&&(0>e[1]||e[1]>x-2);if(e[0]===r[0]&&e[1]===r[1]&&v[0]===z[0]&&v[1]===z[1]||n&&f)break;f=g.crossings[d]}1E4===u&&h.log("Infinite loop in contour?");e=q(k[0],k[k.length-1],p,c);v=0;x=.2*g.smoothing;d=[];f=0;for(u=1;u<k.length;u++){z=k[u];var y=k[u-1];C=z[2]-y[2];z=z[3]-y[3];C=Math.sqrt(C*C+z*z);v+=C;d.push(C)}C=v/d.length*x;for(u=k.length-2;u>=f;u--)if(z=d[u],z<C){x=
0;for(v=u-1;v>=f;v--)if(z+d[v]<C)z+=d[v];else break;if(e&&u===k.length-2)for(x=0;x<v;x++)if(z+d[x]<C)z+=d[x];else break;z=u-v+x+1;y=Math.floor((u+v+x+2)/2);z=e||u!==k.length-2?e||-1!==v?z%2?k[y%k.length]:[(k[y%k.length][0]+k[(y+1)%k.length][0])/2,(k[y%k.length][1]+k[(y+1)%k.length][1])/2]:k[0]:k[k.length-1];k.splice(v+1,u-v+1,z);u=v+1;x&&(f=x);e&&(u===k.length-2?k[x]=k[k.length-1]:0===u&&(k[k.length-1]=k[0]))}k.splice(0,f);for(u=0;u<k.length;u++)k[u].length=2;if(!(2>k.length))if(e)k.pop(),g.paths.push(k);
else{n||h.log("Unclosed interior contour?",g.level,r.join(","),k.join("L"));d=!1;for(n=0;n<g.edgepaths.length;n++)if(u=g.edgepaths[n],!d&&q(u[0],k[k.length-1],p,c)){k.pop();d=!0;f=!1;for(r=0;r<g.edgepaths.length;r++)if(e=g.edgepaths[r],q(e[e.length-1],k[0],p,c)){f=!0;k.shift();g.edgepaths.splice(n,1);r===n?g.paths.push(k.concat(e)):(r>n&&r--,g.edgepaths[r]=e.concat(k,u));break}f||(g.edgepaths[n]=k.concat(u))}for(n=0;n<g.edgepaths.length&&!d;n++)u=g.edgepaths[n],q(u[u.length-1],k[0],p,c)&&(k.shift(),
g.edgepaths[n]=u.concat(k),d=!0);d||g.edgepaths.push(k)}}function l(g,e,n){var p=e[0]+Math.max(n[0],0);e=e[1]+Math.max(n[1],0);var c=g.z[e][p],d=g.xaxis,f=g.yaxis;if(n[1])return n=(g.level-c)/(g.z[e][p+1]-c),[d.c2p((1-n)*g.x[p]+n*g.x[p+1],!0),f.c2p(g.y[e],!0),p+n,e];n=(g.level-c)/(g.z[e+1][p]-c);return[d.c2p(g.x[p],!0),f.c2p((1-n)*g.y[e]+n*g.y[e+1],!0),p,e+n]}var h=b("../../lib"),a=b("./constants");K.exports=function(g,e,n){var p,c;e=e||.01;n=n||.01;for(c=0;c<g.length;c++){var d=g[c];for(p=0;p<d.starts.length;p++){var f=
d.starts[p];m(d,f,"edge",e,n)}for(p=0;Object.keys(d.crossings).length&&1E4>p;)p++,f=Object.keys(d.crossings)[0].split(",").map(Number),m(d,f,void 0,e,n);1E4===p&&h.log("Infinite loop in contour?")}}},{"../../lib":778,"./constants":1012}],1021:[function(b,K,G){var q=b("../../components/color"),m=b("../heatmap/hover");K.exports=function(l,h,a,g,e){(l=m(l,h,a,g,e,!0))&&l.forEach(function(n){var p=n.trace;"constraint"===p.contours.type&&(p.fillcolor&&q.opacity(p.fillcolor)?n.color=q.addOpacity(p.fillcolor,
1):p.contours.showlines&&q.opacity(p.line.color)&&(n.color=q.addOpacity(p.line.color,1)))});return l}},{"../../components/color":643,"../heatmap/hover":1072}],1022:[function(b,K,G){K.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc"),plot:b("./plot").plot,style:b("./style"),colorbar:b("./colorbar"),hoverPoints:b("./hover"),moduleType:"trace",name:"contour",basePlotModule:b("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},
{"../../plots/cartesian":841,"./attributes":1008,"./calc":1009,"./colorbar":1011,"./defaults":1017,"./hover":1021,"./plot":1026,"./style":1028}],1023:[function(b,K,G){var q=b("../../lib");K.exports=function(m,l,h,a){a||(a={});m("contours.showlabels")&&(l=l.font,q.coerceFont(m,"contours.labelfont",{family:l.family,size:l.size,color:h}),m("contours.labelformat"));!1!==a.hasHover&&m("zhoverformat")}},{"../../lib":778}],1024:[function(b,K,G){var q=b("d3"),m=b("../../components/colorscale"),l=b("./end_plus");
K.exports=function(h){var a=h.contours,g=a.start,e=l(a),n=a.size||1,p=Math.floor((e-g)/n)+1,c="lines"===a.coloring?0:1,d=m.extractOpts(h);isFinite(n)||(p=n=1);var f=d.reversescale?m.flipScale(d.colorscale):d.colorscale,k=f.length;h=Array(k);e=Array(k);var r;if("heatmap"===a.coloring){g=d.min;c=d.max;for(r=0;r<k;r++)d=f[r],h[r]=d[0]*(c-g)+g,e[r]=d[1];n=q.extent([g,c,a.start,a.start+n*(p-1)]);a=n[g<c?0:1];n=n[g<c?1:0];a!==g&&(h.splice(0,0,a),e.splice(0,0,e[0]));n!==c&&(h.push(n),e.push(e[e.length-1]))}else for(r=
0;r<k;r++)d=f[r],h[r]=(d[0]*(p+c-1)-c/2)*n+g,e[r]=d[1];return m.makeColorScaleFunc({domain:h,range:e},{noNumericCheck:!0})}},{"../../components/colorscale":655,"./end_plus":1019,d3:169}],1025:[function(b,K,G){var q=b("./constants");K.exports=function(m){var l=m[0].z,h=l.length,a=l[0].length,g=2===h||2===a,e,n,p;for(n=0;n<h-1;n++){var c=[];0===n&&(c=c.concat(q.BOTTOMSTART));n===h-2&&(c=c.concat(q.TOPSTART));for(e=0;e<a-1;e++){var d=c.slice();0===e&&(d=d.concat(q.LEFTSTART));e===a-2&&(d=d.concat(q.RIGHTSTART));
var f=e+","+n;var k=[[l[n][e],l[n][e+1]],[l[n+1][e],l[n+1][e+1]]];for(p=0;p<m.length;p++){var r=m[p];var u=r.level;var v=(k[0][0]>u?0:1)+(k[0][1]>u?0:2)+(k[1][1]>u?0:4)+(k[1][0]>u?0:8);u=5===v||10===v?u>(k[0][0]+k[0][1]+k[1][0]+k[1][1])/4?5===v?713:1114:5===v?104:208:15===v?0:v;u&&(r.crossings[f]=u,-1!==d.indexOf(u)&&(r.starts.push([e,n]),g&&-1!==d.indexOf(u,d.indexOf(u)+1)&&r.starts.push([e,n])))}}}}},{"./constants":1012}],1026:[function(b,K,G){function q(z,y,D,A){var t="fill"===A.coloring||"constraint"===
A.type&&"="!==A._operation,B="M"+D.join("L")+"Z";t&&v(y,A);z=a.ensureSingle(z,"g","contourfill").selectAll("path").data(t?y:[]);z.enter().append("path");z.exit().remove();z.each(function(F){(F=(F.prefixBoundary?B:"")+m(F,D))?h.select(this).attr("d",F).style("stroke","none"):h.select(this).remove()})}function m(z,y){for(var D="",A=0,t=z.edgepaths.map(function(P,M){return M}),B=!0,F,I,J,L;t.length;){I=g.smoothopen(z.edgepaths[A],z.smoothing);D+=B?I:I.replace(/^M/,"L");t.splice(t.indexOf(A),1);B=z.edgepaths[A][z.edgepaths[A].length-
1];J=-1;for(I=0;4>I;I++){if(!B){a.log("Missing end?",A,z);break}.01>Math.abs(B[1]-y[0][1])&&!(.01>Math.abs(B[0]-y[2][0]))?F=y[1]:.01>Math.abs(B[0]-y[0][0])?F=y[0]:.01>Math.abs(B[1]-y[2][1])?F=y[3]:.01>Math.abs(B[0]-y[2][0])&&(F=y[2]);for(L=0;L<z.edgepaths.length;L++){var H=z.edgepaths[L][0];.01>Math.abs(B[0]-F[0])?.01>Math.abs(B[0]-H[0])&&0<=(H[1]-B[1])*(F[1]-H[1])&&(F=H,J=L):.01>Math.abs(B[1]-F[1])?.01>Math.abs(B[1]-H[1])&&0<=(H[0]-B[0])*(F[0]-H[0])&&(F=H,J=L):a.log("endpt to newendpt is not vert. or horz.",
B,F,H)}B=F;if(0<=J)break;D+="L"+F}if(J===z.edgepaths.length){a.log("unclosed perimeter path");break}A=J;if(B=-1===t.indexOf(A))A=t[0],D+="Z"}for(A=0;A<z.paths.length;A++)D+=g.smoothclosed(z.paths[A],z.smoothing);return D}function l(z,y,D,A,t){var B=a.ensureSingle(z,"g","contourlines"),F=!1!==t.showlines,I=t.showlabels,J=F&&I,L=G.createLines(B,F||I,y);B=G.createLineClip(B,J,D,A.trace.uid);z=z.selectAll("g.contourlabels").data(I?[0]:[]);z.exit().remove();z.enter().append("g").classed("contourlabels",
!0);if(I){var H=[],P=[];a.clearLocationCache();var M=G.labelFormatter(D,A),N=g.tester.append("text").attr("data-notex",1).call(g.font,t.labelfont),T=y[0].xaxis,Q=y[0].yaxis;t=T._length;var U=Q._length,S=T.range,X=Q.range,Z=a.aggNums(Math.min,null,A.x),aa=a.aggNums(Math.max,null,A.x),fa=a.aggNums(Math.min,null,A.y),ha=a.aggNums(Math.max,null,A.y);A=Math.max(T.c2p(Z,!0),0);T=Math.min(T.c2p(aa,!0),t);aa=Math.max(Q.c2p(ha,!0),0);Q=Math.min(Q.c2p(fa,!0),U);var ja={};S[0]<S[1]?(ja.left=A,ja.right=T):(ja.left=
T,ja.right=A);X[0]<X[1]?(ja.top=aa,ja.bottom=Q):(ja.top=Q,ja.bottom=aa);ja.middle=(ja.top+ja.bottom)/2;ja.center=(ja.left+ja.right)/2;H.push([[ja.left,ja.top],[ja.right,ja.top],[ja.right,ja.bottom],[ja.left,ja.bottom]]);var ba=x.LABELDISTANCE*Math.sqrt(t*t+U*U)/Math.max(1,y.length/x.LABELINCREASE);L.each(function(ma){var qa=G.calcTextOpts(ma.level,M,N,D);h.select(this).selectAll("path").each(function(){var ka=a.getVisibleSegment(this,ja,qa.height/2);if(ka&&!(ka.len<(qa.width+qa.height)*x.LABELMIN))for(var oa=
Math.min(Math.ceil(ka.len/ba),x.LABELMAX),na=0;na<oa;na++){var la=G.findBestTextLocation(this,ka,qa,P,ja);if(!la)break;G.addLabelData(la,qa,P,H)}})});N.remove();G.drawLabels(z,P,D,B,J?H:null)}I&&!F&&L.remove()}var h=b("d3"),a=b("../../lib"),g=b("../../components/drawing"),e=b("../../components/colorscale"),n=b("../../lib/svg_text_utils"),p=b("../../plots/cartesian/axes"),c=b("../../plots/cartesian/set_convert"),d=b("../heatmap/plot"),f=b("./make_crossings"),k=b("./find_all_paths"),r=b("./empty_pathinfo"),
u=b("./convert_to_constraints"),v=b("./close_boundaries"),x=b("./constants"),C=x.LABELOPTIMIZER;G.plot=function(z,y,D,A){var t=y.xaxis,B=y.yaxis;a.makeTraceGroups(A,D,"contour").each(function(F){var I=h.select(this),J=F[0],L=J.x,H=J.y,P=J.trace.contours,M=r(P,y,J),N=a.ensureSingle(I,"g","heatmapcoloring"),T=[];"heatmap"===P.coloring&&(T=[F]);d(z,y,T,N);f(M);k(M);F=t.c2p(L[0],!0);L=t.c2p(L[L.length-1],!0);N=B.c2p(H[0],!0);H=B.c2p(H[H.length-1],!0);H=[[F,H],[L,H],[L,N],[F,N]];L=M;"constraint"===P.type&&
(L=u(M,P._operation));F=a.ensureSingle(I,"g","contourbg").selectAll("path").data("fill"===P.coloring?[0]:[]);F.enter().append("path");F.exit().remove();F.attr("d","M"+H.join("L")+"Z").style("stroke","none");q(I,L,H,P);l(I,M,z,J,P);L=J.trace;P="clip"+L.uid;M=z._fullLayout._clips.selectAll("#"+P).data(L.connectgaps?[]:[0]);M.enter().append("clipPath").classed("contourclip",!0).attr("id",P);M.exit().remove();if(!1===L.connectgaps){L=y.xaxis;F=y.yaxis;N=J.x;T=J.y;var Q=J.trace._emptypoints,U=[],S=J.z.length,
X=J.z[0].length,Z,aa=[];for(Z=0;Z<X;Z++)aa.push(1);for(Z=0;Z<S;Z++)U.push(aa.slice());for(Z=0;Z<Q.length;Z++)S=Q[Z],U[S[0]][S[1]]=0;J.zmask=U;J={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:L,yaxis:F,x:N,y:T,z:U,smoothing:0};f([J]);k([J]);v([J],{type:"levels"});a.ensureSingle(M,"path","").attr("d",(J.prefixBoundary?"M"+H.join("L")+"Z":"")+m(J,H))}else P=null;g.setClipUrl(I,P,z)})};G.createLines=function(z,y,D){var A=D[0].smoothing;z=z.selectAll("g.contourlevel").data(y?D:[]);z.exit().remove();
z.enter().append("g").classed("contourlevel",!0);y&&(y=z.selectAll("path.openline").data(function(t){return t.pedgepaths||t.edgepaths}),y.exit().remove(),y.enter().append("path").classed("openline",!0),y.attr("d",function(t){return g.smoothopen(t,A)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke"),y=z.selectAll("path.closedline").data(function(t){return t.ppaths||t.paths}),y.exit().remove(),y.enter().append("path").classed("closedline",!0),y.attr("d",function(t){return g.smoothclosed(t,
A)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke"));return z};G.createLineClip=function(z,y,D,A){A=y?"clipline"+A:null;y=D._fullLayout._clips.selectAll("#"+A).data(y?[0]:[]);y.exit().remove();y.enter().append("clipPath").classed("contourlineclip",!0).attr("id",A);g.setClipUrl(z,A,D);return y};G.labelFormatter=function(z,y){z=z._fullLayout;var D=y.trace;y=D.contours;var A={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};y.labelformat?(A.tickformat=y.labelformat,
c(A,z)):(D=e.extractOpts(D))&&D.colorbar&&D.colorbar._axis?A=D.colorbar._axis:("constraint"===y.type?(y=y.value,Array.isArray(y)?A.range=[y[0],y[y.length-1]]:A.range=[y,y]):(A.range=[y.start,y.end],A.nticks=(y.end-y.start)/y.size),A.range[0]===A.range[1]&&(A.range[1]+=A.range[0]||1),A.nticks||(A.nticks=1E3),c(A,z),p.prepTicks(A),A._tmin=null,A._tmax=null);return function(t){return p.tickText(A,t).text}};G.calcTextOpts=function(z,y,D,A){y=y(z);D.text(y).call(n.convertToTspans,A);D=D.node();A=g.bBox(D,
!0);return{text:y,width:A.width,height:A.height,fontSize:+D.style["font-size"].replace("px",""),level:z,dy:(A.top+A.bottom)/2}};G.findBestTextLocation=function(z,y,D,A,t){var B=D.width;if(y.isClosed){var F=y.len/C.INITIALSEARCHPOINTS;var I=y.min+F/2;var J=y.max}else F=(y.len-B)/(C.INITIALSEARCHPOINTS+1),I=y.min+F+B/2,J=y.max-(F+B)/2;for(var L=Infinity,H=0;H<C.ITERATIONS;H++){for(;I<J;I+=F){var P=a.getTextLocation(z,y.total,I,B);a:{var M=D;var N=A,T=M.width/2,Q=M.height/2,U=P.x,S=P.y,X=P.theta,Z=Math.cos(X)*
T,aa=Math.sin(X)*T;T=(U>t.center?t.right-U:U-t.left)/(Z+Math.abs(Math.sin(X)*Q));Q=(S>t.middle?t.bottom-S:S-t.top)/(Math.abs(aa)+Math.cos(X)*Q);if(1>T||1>Q)M=Infinity;else{Q=C.EDGECOST*(1/(T-1)+1/(Q-1));Q+=C.ANGLECOST*X*X;X=U-Z;T=S-aa;U+=Z;S+=aa;for(Z=0;Z<N.length;Z++){aa=N[Z];var fa=Math.cos(aa.theta)*aa.width/2,ha=Math.sin(aa.theta)*aa.width/2;fa=2*a.segmentDistance(X,T,U,S,aa.x-fa,aa.y-ha,aa.x+fa,aa.y+ha)/(M.height+aa.height);ha=(aa=aa.level===M.level)?C.SAMELEVELDISTANCE:1;if(fa<=ha){M=Infinity;
break a}Q+=C.NEIGHBORCOST*(aa?C.SAMELEVELFACTOR:1)/(fa-ha)}M=Q}}if(M<L){L=M;var ja=P;var ba=I}}if(L>2*C.MAXCOST)break;H&&(F/=2);I=ba-F/2;J=I+1.5*F}if(L<=C.MAXCOST)return ja};G.addLabelData=function(z,y,D,A){var t=y.fontSize,B=y.width+t/3;t=Math.max(0,y.height-t/3);var F=z.x,I=z.y;z=z.theta;var J=Math.sin(z),L=Math.cos(z),H=function(P,M){return[F+P*L-M*J,I+P*J+M*L]};H=[H(-B/2,-t/2),H(-B/2,t/2),H(B/2,t/2),H(B/2,-t/2)];D.push({text:y.text,x:F,y:I,dy:y.dy,theta:z,level:y.level,width:B,height:t});A.push(H)};
G.drawLabels=function(z,y,D,A,t){z=z.selectAll("text").data(y,function(B){return B.text+","+B.x+","+B.y+","+B.theta});z.exit().remove();z.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(B){var F=B.x+Math.sin(B.theta)*B.dy,I=B.y-Math.cos(B.theta)*B.dy;h.select(this).text(B.text).attr({x:F,y:I,transform:"rotate("+180*B.theta/Math.PI+" "+F+" "+I+")"}).call(n.convertToTspans,D)});if(t){z="";for(y=0;y<t.length;y++)z+="M"+t[y].join("L")+"Z";a.ensureSingle(A,"path","").attr("d",
z)}}},{"../../components/colorscale":655,"../../components/drawing":665,"../../lib":778,"../../lib/svg_text_utils":803,"../../plots/cartesian/axes":828,"../../plots/cartesian/set_convert":848,"../heatmap/plot":1076,"./close_boundaries":1010,"./constants":1012,"./convert_to_constraints":1016,"./empty_pathinfo":1018,"./find_all_paths":1020,"./make_crossings":1025,d3:169}],1027:[function(b,K,G){function q(h,a,g){var e={type:"linear",range:[h,a]};m.autoTicks(e,(a-h)/(g||15));return e}var m=b("../../plots/cartesian/axes"),
l=b("../../lib");K.exports=function(h,a){var g=h.contours;if(h.autocontour){var e=h.zmin,n=h.zmax;if(h.zauto||void 0===e)e=l.aggNums(Math.min,null,a);if(h.zauto||void 0===n)n=l.aggNums(Math.max,null,a);a=q(e,n,h.ncontours);g.size=a.dtick;g.start=m.tickFirst(a);a.range.reverse();g.end=m.tickFirst(a);g.start===e&&(g.start+=g.size);g.end===n&&(g.end-=g.size);g.start>g.end&&(g.start=g.end=(g.start+g.end)/2);h._input.contours||(h._input.contours={});l.extendFlat(h._input.contours,{start:g.start,end:g.end,
size:g.size});h._input.autocontour=!0}else"constraint"!==g.type&&(n=g.start,a=g.end,e=h._input.contours,n>a&&(g.start=e.start=a,a=g.end=e.end=n,n=g.start),0<g.size||(h=n===a?1:q(n,a,h.ncontours).dtick,e.size=g.size=h))}},{"../../lib":778,"../../plots/cartesian/axes":828}],1028:[function(b,K,G){var q=b("d3"),m=b("../../components/drawing"),l=b("../heatmap/style"),h=b("./make_color_map");K.exports=function(a){var g=q.select(a).selectAll("g.contour");g.style("opacity",function(e){return e[0].trace.opacity});
g.each(function(e){var n=q.select(this);e=e[0].trace;var p=e.contours,c=e.line,d=p.size||1,f=p.start,k="constraint"===p.type,r=!k&&"lines"===p.coloring,u=!k&&"fill"===p.coloring,v=r||u?h(e):null;n.selectAll("g.contourlevel").each(function(z){q.select(this).selectAll("path").call(m.lineGroupStyle,c.width,r?v(z.level):c.color,c.dash)});var x=p.labelfont;n.selectAll("g.contourlabels text").each(function(z){m.font(q.select(this),{family:x.family,size:x.size,color:x.color||(r?v(z.level):c.color)})});if(k)n.selectAll("g.contourfill path").style("fill",
e.fillcolor);else if(u){var C;n.selectAll("g.contourfill path").style("fill",function(z){void 0===C&&(C=z.level);return v(z.level+.5*d)});void 0===C&&(C=f);n.selectAll("g.contourbg path").style("fill",v(C-.5*d))}});l(a)}},{"../../components/drawing":665,"../heatmap/style":1077,"./make_color_map":1024,d3:169}],1029:[function(b,K,G){var q=b("../../components/colorscale/defaults"),m=b("./label_defaults");K.exports=function(l,h,a,g,e){var n=a("contours.coloring"),p,c="";"fill"===n&&(p=a("contours.showlines"));
!1!==p&&("lines"!==n&&(c=a("line.color","#000")),a("line.width",.5),a("line.dash"));"none"!==n&&(!0!==l.showlegend&&(h.showlegend=!1),h._dfltShowLegend=!1,q(l,h,g,a,{prefix:"",cLetter:"z"}));a("line.smoothing");m(a,g,c,e)}},{"../../components/colorscale/defaults":653,"./label_defaults":1023}],1030:[function(b,K,G){G=b("../heatmap/attributes");var q=b("../contour/attributes"),m=b("../../components/colorscale/attributes");b=b("../../lib/extend").extendFlat;var l=q.contours;K.exports=b({carpet:{valType:"string",
editType:"calc"},z:G.z,a:G.x,a0:G.x0,da:G.dx,b:G.y,b0:G.y0,db:G.dy,text:G.text,hovertext:G.hovertext,transpose:G.transpose,atype:G.xtype,btype:G.ytype,fillcolor:q.fillcolor,autocontour:q.autocontour,ncontours:q.ncontours,contours:{type:l.type,start:l.start,end:l.end,size:l.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:l.showlines,showlabels:l.showlabels,labelfont:l.labelfont,labelformat:l.labelformat,operation:l.operation,value:l.value,editType:"calc",
impliedEdits:{autocontour:!1}},line:{color:q.line.color,width:q.line.width,dash:q.line.dash,smoothing:q.line.smoothing,editType:"plot"},transforms:void 0},m("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../contour/attributes":1008,"../heatmap/attributes":1065}],1031:[function(b,K,G){var q=b("../../components/colorscale/calc"),m=b("../../lib"),l=b("../heatmap/convert_column_xyz"),h=b("../heatmap/clean_2d_array"),a=b("../heatmap/interp2d"),
g=b("../heatmap/find_empties"),e=b("../heatmap/make_bound_array"),n=b("./defaults"),p=b("../carpet/lookup_carpetid"),c=b("../contour/set_contours");K.exports=function(d,f){var k=f._carpetTrace=p(d,f);if(k&&k.visible&&"legendonly"!==k.visible){if(!f.a||!f.b){k=d.data[k.index];var r=d.data[f.index];r.a||(r.a=k.a);r.b||(r.b=k.b);n(r,f,f._defaultColor,d._fullLayout)}k=f._carpetTrace;r=k.aaxis;var u=k.baxis;r._minDtick=0;u._minDtick=0;m.isArray1D(f.z)&&l(f,r,u,"a","b",["z"]);var v=f._a=f._a||f.a;var x=
f._b=f._b||f.b;v=v?r.makeCalcdata(f,"_a"):[];x=x?u.makeCalcdata(f,"_b"):[];var C=f.a0||0;var z=f.da||1;var y=f.b0||0;var D=f.db||1;k=f._z=h(f._z||f.z,f.transpose);f._emptypoints=g(k);a(k,f._emptypoints);var A=m.maxRowLength(k);r=e(f,"scaled"===f.xtype?"":v,C,z,A,r);u=e(f,"scaled"===f.ytype?"":x,y,D,k.length,u);r={a:r,b:u,z:k};"levels"===f.contours.type&&"none"!==f.contours.coloring&&q(d,f,{vals:k,containerStr:"",cLetter:"z"});d=[r];c(f,f._z);return d}}},{"../../components/colorscale/calc":651,"../../lib":778,
"../carpet/lookup_carpetid":981,"../contour/set_contours":1027,"../heatmap/clean_2d_array":1067,"../heatmap/convert_column_xyz":1069,"../heatmap/find_empties":1071,"../heatmap/interp2d":1074,"../heatmap/make_bound_array":1075,"./defaults":1032}],1032:[function(b,K,G){var q=b("../../lib"),m=b("../heatmap/xyz_defaults"),l=b("./attributes"),h=b("../contour/constraint_defaults"),a=b("../contour/contours_defaults"),g=b("../contour/style_defaults");K.exports=function(e,n,p,c){function d(k,r){return q.coerce(e,
n,l,k,r)}function f(k){return q.coerce2(e,n,l,k)}d("carpet");e.a&&e.b?m(e,n,d,c,"a","b")?(d("text"),"constraint"===d("contours.type")?h(e,n,d,c,p,{hasHover:!1}):(a(e,n,d,f),g(e,n,d,c,{hasHover:!1}))):n.visible=!1:(n._defaultColor=p,n._length=null)}},{"../../lib":778,"../contour/constraint_defaults":1013,"../contour/contours_defaults":1015,"../contour/style_defaults":1029,"../heatmap/xyz_defaults":1079,"./attributes":1030}],1033:[function(b,K,G){K.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),
colorbar:b("../contour/colorbar"),calc:b("./calc"),plot:b("./plot"),style:b("../contour/style"),moduleType:"trace",name:"contourcarpet",basePlotModule:b("../../plots/cartesian"),categories:"cartesian svg carpet contour symbols showLegend hasLines carpetDependent noHover noSortingByValue".split(" "),meta:{}}},{"../../plots/cartesian":841,"../contour/colorbar":1011,"../contour/style":1028,"./attributes":1030,"./calc":1031,"./defaults":1032,"./plot":1034}],1034:[function(b,K,G){function q(B,F){var I,
J,L;for(I=0;I<B.length;I++){var H=B[I];var P=H.pedgepaths=[];var M=H.ppaths=[];for(J=0;J<H.edgepaths.length;J++){var N=H.edgepaths[J];var T=[];for(L=0;L<N.length;L++)T[L]=F(N[L]);P.push(T)}for(J=0;J<H.paths.length;J++){N=H.paths[J];P=[];for(L=0;L<N.length;L++)P[L]=F(N[L]);M.push(P)}}}function m(B,F,I,J,L,H,P){var M=r.ensureSingle(B,"g","contourlines"),N=!1!==L.showlines,T=L.showlabels,Q=N&&T,U=x.createLines(M,N||T,F);M=x.createLineClip(M,Q,I,J.trace.uid);B=B.selectAll("g.contourlabels").data(T?[0]:
[]);B.exit().remove();B.enter().append("g").classed("contourlabels",!0);if(T){var S=H.xaxis._length;H=H.yaxis._length;var X=[[[0,0],[S,0],[S,H],[0,H]]],Z=[];r.clearLocationCache();var aa=x.labelFormatter(I,J),fa=k.tester.append("text").attr("data-notex",1).call(k.font,L.labelfont),ha={left:0,right:S,center:S/2,top:0,bottom:H,middle:H/2},ja=C.LABELDISTANCE*Math.sqrt(S*S+H*H)/Math.max(1,F.length/C.LABELINCREASE);U.each(function(ba){var ma=x.calcTextOpts(ba.level,aa,fa,I);c.select(this).selectAll("path").each(function(qa){var ka=
r.getVisibleSegment(this,ha,ma.height/2);if(ka&&(l(this,qa,ba,ka,P,ma.height),!(ka.len<(ma.width+ma.height)*C.LABELMIN))){qa=Math.min(Math.ceil(ka.len/ja),C.LABELMAX);for(var oa=0;oa<qa;oa++){var na=x.findBestTextLocation(this,ka,ma,Z,ha);if(!na)break;x.addLabelData(na,ma,Z,X)}}})});fa.remove();x.drawLabels(B,Z,I,M,Q?X:null)}T&&!N&&U.remove()}function l(B,F,I,J,L,H){function P(X,Z){var aa=0;if(.1>Math.abs(X[0]-T)||.1>Math.abs(X[0]-Q)){var fa=a(L.dxydb_rough(X[0],X[1],.1));aa=Math.max(aa,H*g(Z,fa)/
2)}if(.1>Math.abs(X[1]-U)||.1>Math.abs(X[1]-S))fa=a(L.dxyda_rough(X[0],X[1],.1)),aa=Math.max(aa,H*g(Z,fa)/2);return aa}for(var M,N=0;N<I.pedgepaths.length;N++)F===I.pedgepaths[N]&&(M=I.edgepaths[N]);if(M){var T=L.a[0],Q=L.a[L.a.length-1],U=L.b[0],S=L.b[L.b.length-1];F=h(B,0,1);B=h(B,J.total,J.total-1);F=P(M[0],F);M=J.total-P(M[M.length-1],B);J.min<F&&(J.min=F);J.max>M&&(J.max=M);J.len=J.max-J.min}}function h(B,F,I){F=B.getPointAtLength(F);I=B.getPointAtLength(I);B=I.x-F.x;F=I.y-F.y;I=Math.sqrt(B*
B+F*F);return[B/I,F/I]}function a(B){var F=Math.sqrt(B[0]*B[0]+B[1]*B[1]);return[B[0]/F,B[1]/F]}function g(B,F){B=Math.abs(B[0]*F[0]+B[1]*F[1]);return Math.sqrt(1-B*B)/B}function e(B,F,I,J,L,H){var P,M=r.ensureSingle(B,"g","contourbg").selectAll("path").data("fill"!==H||L?[]:[0]);M.enter().append("path");M.exit().remove();var N=[];for(P=0;P<F.length;P++)B=F[P],L=d([],B.x,I.c2p),H=d([],B.y,J.c2p),N.push(f(L,H,B.bicubic));M.attr("d","M"+N.join("L")+"Z").style("stroke","none")}function n(B,F,I,J,L,H,
P,M,N,T,Q){(T="fill"===T)&&D(L,B.contours);F=r.ensureSingle(F,"g","contourfill").selectAll("path").data(T?L:[]);F.enter().append("path");F.exit().remove();F.each(function(U){(U=(U.prefixBoundary?Q:"")+p(B,U,H,P,M,N,I,J))?c.select(this).attr("d",U).style("stroke","none"):c.select(this).remove()})}function p(B,F,I,J,L,H,P,M){function N(ma){return Math.abs(ma[0]-I[2][0])<fa}function T(ma,qa){var ka="";if(Math.abs(ma[1]-I[0][1])<ha&&!N(ma)||Math.abs(ma[1]-I[2][1])<ha&&!(Math.abs(ma[0]-I[0][0])<fa)){var oa=
L.aaxis;var na=t(L,H,[ma[0],qa[0]],.5*(ma[1]+qa[1]))}else oa=L.baxis,na=t(L,H,.5*(ma[0]+qa[0]),[ma[1],qa[1]]);for(ma=1;ma<na.length;ma++)for(ka+=oa.smoothing?"C":"L",qa=0;qa<na[ma].length;qa++){var la=na[ma][qa];ka+=[P.c2p(la[0]),M.c2p(la[1])]+" "}return ka}var Q="",U=F.edgepaths.map(function(ma,qa){return qa}),S=!0,X,Z,aa,fa=1E-4*Math.abs(I[0][0]-I[2][0]),ha=1E-4*Math.abs(I[0][1]-I[2][1]);B=0;for(X=null;U.length;){var ja=F.edgepaths[B][0];X&&(Q+=T(X,ja));X=k.smoothopen(F.edgepaths[B].map(J),F.smoothing);
Q+=S?X:X.replace(/^M/,"L");U.splice(U.indexOf(B),1);X=F.edgepaths[B][F.edgepaths[B].length-1];ja=-1;for(S=0;4>S;S++){if(!X){r.log("Missing end?",B,F);break}Math.abs(X[1]-I[0][1])<ha&&!N(X)?Z=I[1]:Math.abs(X[0]-I[0][0])<fa?Z=I[0]:Math.abs(X[1]-I[2][1])<ha?Z=I[3]:N(X)&&(Z=I[2]);for(aa=0;aa<F.edgepaths.length;aa++){var ba=F.edgepaths[aa][0];Math.abs(X[0]-Z[0])<fa?Math.abs(X[0]-ba[0])<fa&&0<=(ba[1]-X[1])*(Z[1]-ba[1])&&(Z=ba,ja=aa):Math.abs(X[1]-Z[1])<ha?Math.abs(X[1]-ba[1])<ha&&0<=(ba[0]-X[0])*(Z[0]-
ba[0])&&(Z=ba,ja=aa):r.log("endpt to newendpt is not vert. or horz.",X,Z,ba)}if(0<=ja)break;Q+=T(X,Z);X=Z}if(ja===F.edgepaths.length){r.log("unclosed perimeter path");break}B=ja;if(S=-1===U.indexOf(B))B=U[0],Q+=T(X,Z)+"Z",X=null}for(B=0;B<F.paths.length;B++)Q+=k.smoothclosed(F.paths[B].map(J),F.smoothing);return Q}var c=b("d3"),d=b("../carpet/map_1d_array"),f=b("../carpet/makepath"),k=b("../../components/drawing"),r=b("../../lib"),u=b("../contour/make_crossings"),v=b("../contour/find_all_paths"),
x=b("../contour/plot"),C=b("../contour/constants"),z=b("../contour/convert_to_constraints"),y=b("../contour/empty_pathinfo"),D=b("../contour/close_boundaries"),A=b("../carpet/lookup_carpetid"),t=b("../carpet/axis_aligned_line");K.exports=function(B,F,I,J){var L=F.xaxis,H=F.yaxis;r.makeTraceGroups(J,I,"contour").each(function(P){function M(oa){oa=Q.ab2xy(oa[0],oa[1],!0);return[L.c2p(oa[0]),H.c2p(oa[1])]}var N=c.select(this);P=P[0];var T=P.trace,Q=T._carpetTrace=A(B,T),U=B.calcdata[Q.index][0];if(Q.visible&&
"legendonly"!==Q.visible){var S=P.a,X=P.b,Z=T.contours,aa=y(Z,F,P),fa="constraint"===Z.type,ha=Z._operation,ja=fa?"="===ha?"lines":"fill":Z.coloring,ba=[[S[0],X[X.length-1]],[S[S.length-1],X[X.length-1]],[S[S.length-1],X[0]],[S[0],X[0]]];u(aa);v(aa,1E-8*(S[S.length-1]-S[0]),1E-8*(X[X.length-1]-X[0]));S=aa;"constraint"===Z.type&&(S=z(aa,ha));q(aa,M);var ma,qa=[];for(ma=U.clipsegments.length-1;0<=ma;ma--){ha=U.clipsegments[ma];X=d([],ha.x,L.c2p);var ka=d([],ha.y,H.c2p);X.reverse();ka.reverse();qa.push(f(X,
ka,ha.bicubic))}ha="M"+qa.join("L")+"Z";e(N,U.clipsegments,L,H,fa,ja);n(T,N,L,H,S,ba,M,Q,U,ja,ha);m(N,aa,B,P,Z,F,Q);k.setClipUrl(N,Q._clipPathId,B)}})}},{"../../components/drawing":665,"../../lib":778,"../carpet/axis_aligned_line":965,"../carpet/lookup_carpetid":981,"../carpet/makepath":982,"../carpet/map_1d_array":983,"../contour/close_boundaries":1010,"../contour/constants":1012,"../contour/convert_to_constraints":1016,"../contour/empty_pathinfo":1018,"../contour/find_all_paths":1020,"../contour/make_crossings":1025,
"../contour/plot":1026,d3:169}],1035:[function(b,K,G){G=b("../../components/colorscale/attributes");var q=b("../../plots/template_attributes").hovertemplateAttrs,m=b("../../plots/attributes"),l=b("../scattermapbox/attributes");b=b("../../lib/extend").extendFlat;K.exports=b({lon:l.lon,lat:l.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:l.text,hovertext:l.hovertext,hoverinfo:b({},m.hoverinfo,
{flags:["lon","lat","z","text","name"]}),hovertemplate:q(),showlegend:b({},m.showlegend,{dflt:!1})},G("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,"../scattermapbox/attributes":1252}],1036:[function(b,K,G){var q=b("fast-isnumeric"),m=b("../../lib").isArrayOrTypedArray,l=b("../../constants/numerical").BADNUM,h=b("../../components/colorscale/calc"),a=b("../../lib")._;
K.exports=function(g,e){for(var n=e._length,p=Array(n),c=e.z,d=m(c)&&c.length,f=0;f<n;f++){var k=p[f]={},r=e.lon[f],u=e.lat[f];k.lonlat=q(r)&&q(u)?[+r,+u]:[l,l];d&&(r=c[f],k.z=q(r)?r:l)}h(g,e,{vals:d?c:[0,1],containerStr:"",cLetter:"z"});n&&(p[0].t={labels:{lat:a(g,"lat:")+" ",lon:a(g,"lon:")+" "}});return p}},{"../../components/colorscale/calc":651,"../../constants/numerical":753,"../../lib":778,"fast-isnumeric":241}],1037:[function(b,K,G){var q=b("fast-isnumeric"),m=b("../../lib"),l=b("../../components/color"),
h=b("../../components/colorscale"),a=b("../../constants/numerical").BADNUM,g=b("../../lib/geojson_utils").makeBlank;K.exports=function(e){var n=e[0].trace,p=!0===n.visible&&0!==n._length,c=n._opts={heatmap:{layout:{visibility:"none"},paint:{}},geojson:g()};if(!p)return c;p=[];var d,f=n.z,k=n.radius;f=m.isArrayOrTypedArray(f)&&f.length;var r=m.isArrayOrTypedArray(k);for(d=0;d<e.length;d++){var u=e[d],v=u.lonlat;if(v[0]!==a){var x={};f&&(u=u.z,x.z=u!==a?u:0);r&&(x.r=q(k[d])&&0<k[d]?+k[d]:0);p.push({type:"Feature",
geometry:{type:"Point",coordinates:v},properties:x})}}e=h.extractOpts(n);k=e.reversescale?h.flipScale(e.colorscale):e.colorscale;d=k[0][1];v=["interpolate",["linear"],["heatmap-density"],0,1>l.opacity(d)?d:l.addOpacity(d,0)];for(d=1;d<k.length;d++)v.push(k[d][0],k[d][1]);d=["interpolate",["linear"],["get","z"],e.min,0,e.max,1];m.extendFlat(c.heatmap.paint,{"heatmap-weight":f?d:1/(e.max-e.min),"heatmap-color":v,"heatmap-radius":r?{type:"identity",property:"r"}:n.radius,"heatmap-opacity":n.opacity});
c.geojson={type:"FeatureCollection",features:p};c.heatmap.layout.visibility="visible";return c}},{"../../components/color":643,"../../components/colorscale":655,"../../constants/numerical":753,"../../lib":778,"../../lib/geojson_utils":772,"fast-isnumeric":241}],1038:[function(b,K,G){var q=b("../../lib"),m=b("../../components/colorscale/defaults"),l=b("./attributes");K.exports=function(h,a,g,e){function n(c,d){return q.coerce(h,a,l,c,d)}g=n("lon")||[];var p=n("lat")||[];(g=Math.min(g.length,p.length))?
(a._length=g,n("z"),n("radius"),n("below"),n("text"),n("hovertext"),n("hovertemplate"),m(h,a,e,n,{prefix:"",cLetter:"z"})):a.visible=!1}},{"../../components/colorscale/defaults":653,"../../lib":778,"./attributes":1035}],1039:[function(b,K,G){K.exports=function(q,m){q.lon=m.lon;q.lat=m.lat;q.z=m.z;return q}},{}],1040:[function(b,K,G){var q=b("../../lib"),m=b("../../plots/cartesian/axes"),l=b("../scattermapbox/hover");K.exports=function(h,a,g){if(h=l(h,a,g)){h=h[0];var e=h.cd;a=e[0].trace;g=e[h.index];
delete h.color;if("z"in g){var n=h.subplot.mockAxis;h.z=g.z;h.zLabel=m.tickText(n,n.c2l(g.z),"hover").text}e=e[0].t.labels;if(a.hovertemplate)a=void 0;else{n=(g.hi||a.hoverinfo).split("+");var p=-1!==n.indexOf("all"),c=-1!==n.indexOf("lon"),d=-1!==n.indexOf("lat"),f=g.lonlat,k=[];p||c&&d?k.push("("+(f[0]+"\u00b0, ")+(f[1]+"\u00b0)")):c?k.push(e.lon+(f[0]+"\u00b0")):d&&k.push(e.lat+(f[1]+"\u00b0"));(p||-1!==n.indexOf("text"))&&q.fillText(g,a,k);a=k.join("<br>")}h.extraText=a;return[h]}}},{"../../lib":778,
"../../plots/cartesian/axes":828,"../scattermapbox/hover":1257}],1041:[function(b,K,G){K.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../heatmap/colorbar"),formatLabels:b("../scattermapbox/format_labels"),calc:b("./calc"),plot:b("./plot"),hoverPoints:b("./hover"),eventData:b("./event_data"),getBelow:function(q,m){q=m.getMapLayers();for(m=0;m<q.length;m++){var l=q[m],h=l.id;if("symbol"===l.type&&"string"===typeof h&&-1===h.indexOf("plotly-"))return h}},moduleType:"trace",
name:"densitymapbox",basePlotModule:b("../../plots/mapbox"),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},{"../../plots/mapbox":885,"../heatmap/colorbar":1068,"../scattermapbox/format_labels":1256,"./attributes":1035,"./calc":1036,"./defaults":1038,"./event_data":1039,"./hover":1040,"./plot":1042}],1042:[function(b,K,G){function q(h,a){this.type="densitymapbox";this.subplot=h;this.uid=a;this.sourceId="source-"+a;this.layerList=[["heatmap",l+a+"-heatmap"]];this.below=null}
var m=b("./convert"),l=b("../../plots/mapbox/constants").traceLayerPrefix;b=q.prototype;b.update=function(h){var a=this.subplot,g=this.layerList;h=m(h);var e=a.belowLookup["trace-"+this.uid];a.map.getSource(this.sourceId).setData(h.geojson);e!==this.below&&(this._removeLayers(),this._addLayers(h,e),this.below=e);for(e=0;e<g.length;e++){var n=g[e],p=n[1];n=h[n[0]];a.setOptions(p,"setLayoutProperty",n.layout);"visible"===n.layout.visibility&&a.setOptions(p,"setPaintProperty",n.paint)}};b._addLayers=
function(h,a){for(var g=this.subplot,e=this.layerList,n=this.sourceId,p=0;p<e.length;p++){var c=e[p],d=c[0],f=h[d];g.addLayer({type:d,id:c[1],source:n,layout:f.layout,paint:f.paint},a)}};b._removeLayers=function(){for(var h=this.subplot.map,a=this.layerList,g=a.length-1;0<=g;g--)h.removeLayer(a[g][1])};b.dispose=function(){var h=this.subplot.map;this._removeLayers();h.removeSource(this.sourceId)};K.exports=function(h,a){var g=a[0].trace,e=new q(h,g.uid),n=e.sourceId;a=m(a);g=e.below=h.belowLookup["trace-"+
g.uid];h.map.addSource(n,{type:"geojson",data:a.geojson});e._addLayers(a,g);return e}},{"../../plots/mapbox/constants":883,"./convert":1037}],1043:[function(b,K,G){var q=b("../../lib");K.exports=function(m,l){for(var h=0;h<m.length;h++)m[h].i=h;q.mergeArray(l.text,m,"tx");q.mergeArray(l.hovertext,m,"htx");if(l=l.marker)if(q.mergeArray(l.opacity,m,"mo"),q.mergeArray(l.color,m,"mc"),l=l.line)q.mergeArray(l.color,m,"mlc"),q.mergeArrayCastPositive(l.width,m,"mlw")}},{"../../lib":778}],1044:[function(b,
K,G){G=b("../bar/attributes");var q=b("../scatter/attributes").line,m=b("../../plots/attributes"),l=b("../../plots/template_attributes").hovertemplateAttrs,h=b("../../plots/template_attributes").texttemplateAttrs,a=b("./constants"),g=b("../../lib/extend").extendFlat;b=b("../../components/color");K.exports={x:G.x,x0:G.x0,dx:G.dx,y:G.y,y0:G.y0,dy:G.dy,xperiod:G.xperiod,yperiod:G.yperiod,xperiod0:G.xperiod0,yperiod0:G.yperiod0,xperiodalignment:G.xperiodalignment,yperiodalignment:G.yperiodalignment,hovertext:G.hovertext,
hovertemplate:l({},{keys:a.eventDataKeys}),hoverinfo:g({},m.hoverinfo,{flags:"name;x;y;text;percent initial;percent previous;percent total".split(";")}),textinfo:{valType:"flaglist",flags:"label;text;percent initial;percent previous;percent total;value".split(";"),extras:["none"],editType:"plot",arrayOk:!1},texttemplate:h({editType:"plot"},{keys:a.eventDataKeys.concat(["label","value"])}),text:G.text,textposition:g({},G.textposition,{dflt:"auto"}),insidetextanchor:g({},G.insidetextanchor,{dflt:"middle"}),
textangle:g({},G.textangle,{dflt:0}),textfont:G.textfont,insidetextfont:G.insidetextfont,outsidetextfont:G.outsidetextfont,constraintext:G.constraintext,cliponaxis:G.cliponaxis,orientation:g({},G.orientation,{}),offset:g({},G.offset,{arrayOk:!1}),width:g({},G.width,{arrayOk:!1}),marker:G.marker,connector:{fillcolor:{valType:"color",editType:"style"},line:{color:g({},q.color,{dflt:b.defaultLine}),width:g({},q.width,{dflt:0,editType:"plot"}),dash:q.dash,editType:"style"},visible:{valType:"boolean",
dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:G.offsetgroup,alignmentgroup:G.alignmentgroup}},{"../../components/color":643,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,"../bar/attributes":921,"../scatter/attributes":1187,"./constants":1046}],1045:[function(b,K,G){function q(e){return e===g?0:e}var m=b("../../plots/cartesian/axes"),l=b("../../plots/cartesian/align_period"),h=b("./arrays_to_calcdata"),a=b("../scatter/calc_selection"),g=b("../../constants/numerical").BADNUM;
K.exports=function(e,n){var p=m.getFromId(e,n.xaxis||"x"),c=m.getFromId(e,n.yaxis||"y");if("h"===n.orientation){e=p.makeCalcdata(n,"x");var d=c.makeCalcdata(n,"y");p=l(n,c,"y",d);var f=!!n.yperiodalignment}else e=c.makeCalcdata(n,"y"),d=p.makeCalcdata(n,"x"),p=l(n,p,"x",d),f=!!n.xperiodalignment;var k=Math.min(p.length,e.length),r=Array(k);n._base=[];for(c=0;c<k;c++){0>e[c]&&(e[c]=g);var u=!1;e[c]!==g&&c+1<k&&e[c+1]!==g&&(u=!0);u=r[c]={p:p[c],s:e[c],cNext:u};n._base[c]=-.5*u.s;f&&(r[c].orig_p=d[c]);
n.ids&&(u.id=String(n.ids[c]));0===c&&(r[0].vTotal=0);r[0].vTotal+=q(u.s);u.begR=q(u.s)/q(r[0].s)}for(c=0;c<k;c++)if(u=r[c],u.s!==g){u.sumR=u.s/r[0].vTotal;u.difR=void 0!==v?u.s/v:1;var v=u.s}h(r,n);a(r,n);return r}},{"../../constants/numerical":753,"../../plots/cartesian/align_period":825,"../../plots/cartesian/axes":828,"../scatter/calc_selection":1189,"./arrays_to_calcdata":1043}],1046:[function(b,K,G){K.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},{}],1047:[function(b,
K,G){var q=b("../bar/cross_trace_calc").setGroupPositions;K.exports=function(m,l){var h=m._fullLayout,a=m._fullData,g=m.calcdata,e=l.xaxis,n=l.yaxis;l=[];var p=[],c=[],d;for(d=0;d<a.length;d++){var f=a[d];var k="h"===f.orientation;!0===f.visible&&f.xaxis===e._id&&f.yaxis===n._id&&"funnel"===f.type&&(f=g[d],k?c.push(f):p.push(f),l.push(f))}h={mode:h.funnelmode,norm:h.funnelnorm,gap:h.funnelgap,groupgap:h.funnelgroupgap};q(m,e,n,p,h);q(m,n,e,c,h);for(d=0;d<l.length;d++)for(f=l[d],m=0;m<f.length;m++)m+
1<f.length&&(f[m].nextP0=f[m+1].p0,f[m].nextS0=f[m+1].s0,f[m].nextP1=f[m+1].p1,f[m].nextS1=f[m+1].s1)}},{"../bar/cross_trace_calc":924}],1048:[function(b,K,G){function q(p){p=m.isArrayOrTypedArray(p)?"#000":p;return n.addOpacity(p,.5*n.opacity(p))}var m=b("../../lib"),l=b("../bar/defaults").handleGroupingDefaults,h=b("../bar/defaults").handleText,a=b("../scatter/xy_defaults"),g=b("../scatter/period_defaults"),e=b("./attributes"),n=b("../../components/color");K.exports={supplyDefaults:function(p,c,
d,f){function k(v,x){return m.coerce(p,c,e,v,x)}if(a(p,c,f,k)){g(p,c,f,k);k("orientation",c.y&&!c.x?"v":"h");k("offset");k("width");var r=k("text");k("hovertext");k("hovertemplate");var u=k("textposition");h(p,c,f,k,u,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0});"none"===c.textposition||c.texttemplate||k("textinfo",Array.isArray(r)?"text+value":"value");d=k("marker.color",d);k("marker.line.color",n.defaultLine);
k("marker.line.width");k("connector.visible")&&(k("connector.fillcolor",q(d)),k("connector.line.width")&&(k("connector.line.color"),k("connector.line.dash")))}else c.visible=!1},crossTraceDefaults:function(p,c){function d(u){return m.coerce(k._input,k,e,u)}if("group"===c.funnelmode)for(var f=0;f<p.length;f++){var k=p[f];var r=k._input;l(r,k,c,d)}}}},{"../../components/color":643,"../../lib":778,"../bar/defaults":925,"../scatter/period_defaults":1207,"../scatter/xy_defaults":1214,"./attributes":1044}],
1049:[function(b,K,G){K.exports=function(q,m){q.x="xVal"in m?m.xVal:m.x;q.y="yVal"in m?m.yVal:m.y;"percentInitial"in m&&(q.percentInitial=m.percentInitial);"percentPrevious"in m&&(q.percentPrevious=m.percentPrevious);"percentTotal"in m&&(q.percentTotal=m.percentTotal);m.xa&&(q.xaxis=m.xa);m.ya&&(q.yaxis=m.ya);return q}},{}],1050:[function(b,K,G){var q=b("../../components/color").opacity,m=b("../bar/hover").hoverOnBars,l=b("../../lib").formatPercent;K.exports=function(h,a,g,e){if(h=m(h,a,g,e)){a=h.cd;
g=a[0].trace;a=a[h.index];h[("h"===g.orientation?"x":"y")+"LabelVal"]=a.s;h.percentInitial=a.begR;h.percentInitialLabel=l(a.begR,1);h.percentPrevious=a.difR;h.percentPreviousLabel=l(a.difR,1);h.percentTotal=a.sumR;h.percentTotalLabel=l(a.sumR,1);var n=a.hi||g.hoverinfo;e=[];if(n&&"none"!==n&&"skip"!==n){var p="all"===n;n=n.split("+");(p||-1!==n.indexOf("percent initial"))&&e.push(h.percentInitialLabel+" of initial");(p||-1!==n.indexOf("percent previous"))&&e.push(h.percentPreviousLabel+" of previous");
(p||-1!==n.indexOf("percent total"))&&e.push(h.percentTotalLabel+" of total")}h.extraText=e.join("<br>");p=g.marker;g=a.mc||p.color;e=a.mlc||p.line.color;a=a.mlw||p.line.width;a=q(g)?g:q(e)&&a?e:void 0;h.color=a;return[h]}}},{"../../components/color":643,"../../lib":778,"../bar/hover":928}],1051:[function(b,K,G){K.exports={attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults").supplyDefaults,crossTraceDefaults:b("./defaults").crossTraceDefaults,supplyLayoutDefaults:b("./layout_defaults"),
calc:b("./calc"),crossTraceCalc:b("./cross_trace_calc"),plot:b("./plot"),style:b("./style").style,hoverPoints:b("./hover"),eventData:b("./event_data"),selectPoints:b("../bar/select"),moduleType:"trace",name:"funnel",basePlotModule:b("../../plots/cartesian"),categories:"bar-like cartesian svg oriented showLegend zoomScale".split(" "),meta:{}}},{"../../plots/cartesian":841,"../bar/select":933,"./attributes":1044,"./calc":1045,"./cross_trace_calc":1047,"./defaults":1048,"./event_data":1049,"./hover":1050,
"./layout_attributes":1052,"./layout_defaults":1053,"./plot":1054,"./style":1055}],1052:[function(b,K,G){K.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],1053:[function(b,K,G){var q=b("../../lib"),m=b("./layout_attributes");K.exports=function(l,h,a){for(var g=!1,e=0;e<a.length;e++){var n=a[e];if(n.visible&&"funnel"===
n.type){g=!0;break}}g&&(q.coerce(l,h,m,"funnelmode",void 0),q.coerce(l,h,m,"funnelgap",.2),q.coerce(l,h,m,"funnelgroupgap",void 0))}},{"../../lib":778,"./layout_attributes":1052}],1054:[function(b,K,G){function q(c,d,f,k){var r=d.xaxis,u=d.yaxis;a.makeTraceGroups(k,f,"trace bars").each(function(v){var x=h.select(this);v=v[0].trace;x=a.ensureSingle(x,"g","regions");if(v.connector&&v.connector.visible){var C="h"===v.orientation;x=x.selectAll("g.region").data(a.identity);x.enter().append("g").classed("region",
!0);x.exit().remove();var z=x.size();x.each(function(y,D){if(D===z-1||y.cNext){D=l(y,r,u,C);y=D[0];D=D[1];var A="";y[0]!==e&&D[0]!==e&&y[1]!==e&&D[1]!==e&&y[2]!==e&&D[2]!==e&&y[3]!==e&&D[3]!==e&&(A=C?A+("M"+y[0]+","+D[1]+"L"+y[2]+","+D[2]+"H"+y[3]+"L"+y[1]+","+D[1]+"Z"):A+("M"+y[1]+","+D[1]+"L"+y[2]+","+D[3]+"V"+D[2]+"L"+y[1]+","+D[0]+"Z"));""===A&&(A="M0,0Z");a.ensureSingle(h.select(this),"path").attr("d",A).call(g.setClipUrl,d.layerClipId,c)}})}else x.remove()})}function m(c,d,f,k){var r=d.xaxis,
u=d.yaxis;a.makeTraceGroups(k,f,"trace bars").each(function(v){var x=h.select(this);v=v[0].trace;x=a.ensureSingle(x,"g","lines");if(v.connector&&v.connector.visible&&v.connector.line.width){var C="h"===v.orientation;x=x.selectAll("g.line").data(a.identity);x.enter().append("g").classed("line",!0);x.exit().remove();var z=x.size();x.each(function(y,D){if(D===z-1||y.cNext){D=l(y,r,u,C);y=D[0];D=D[1];var A="";void 0!==y[3]&&void 0!==D[3]&&(C?(A+="M"+y[0]+","+D[1]+"L"+y[2]+","+D[2],A+="M"+y[1]+","+D[1]+
"L"+y[3]+","+D[2]):(A+="M"+y[1]+","+D[1]+"L"+y[2]+","+D[3],A+="M"+y[1]+","+D[0]+"L"+y[2]+","+D[2]));""===A&&(A="M0,0Z");a.ensureSingle(h.select(this),"path").attr("d",A).call(g.setClipUrl,d.layerClipId,c)}})}else x.remove()})}function l(c,d,f,k){var r=[],u=[],v=k?d:f;d=k?f:d;r[0]=v.c2p(c.s0,!0);u[0]=d.c2p(c.p0,!0);r[1]=v.c2p(c.s1,!0);u[1]=d.c2p(c.p1,!0);r[2]=v.c2p(c.nextS0,!0);u[2]=d.c2p(c.nextP0,!0);r[3]=v.c2p(c.nextS1,!0);u[3]=d.c2p(c.nextP1,!0);return k?[r,u]:[u,r]}var h=b("d3"),a=b("../../lib"),
g=b("../../components/drawing"),e=b("../../constants/numerical").BADNUM,n=b("../bar/plot"),p=b("../bar/uniform_text").clearMinTextSize;K.exports=function(c,d,f,k){var r=c._fullLayout;p("funnel",r);q(c,d,f,k);m(c,d,f,k);n.plot(c,d,f,k,{mode:r.funnelmode,norm:r.funnelmode,gap:r.funnelgap,groupgap:r.funnelgroupgap})}},{"../../components/drawing":665,"../../constants/numerical":753,"../../lib":778,"../bar/plot":932,"../bar/uniform_text":937,d3:169}],1055:[function(b,K,G){var q=b("d3"),m=b("../../components/drawing"),
l=b("../../components/color"),h=b("../../constants/interactions").DESELECTDIM;G=b("../bar/style");var a=b("../bar/uniform_text").resizeText,g=G.styleTextPoints;K.exports={style:function(e,n,p){n=p?p:q.select(e).selectAll("g.funnellayer").selectAll("g.trace");a(e,n,"funnel");n.style("opacity",function(c){return c[0].trace.opacity});n.each(function(c){var d=q.select(this),f=c[0].trace;d.selectAll(".point > path").each(function(k){if(!k.isBlank){var r=f.marker;q.select(this).call(l.fill,k.mc||r.color).call(l.stroke,
k.mlc||r.line.color).call(m.dashLine,r.line.dash,k.mlw||r.line.width).style("opacity",f.selectedpoints&&!k.selected?h:1)}});g(d,f,e);d.selectAll(".regions").each(function(){q.select(this).selectAll("path").style("stroke-width",0).call(l.fill,f.connector.fillcolor)});d.selectAll(".lines").each(function(){var k=f.connector.line;m.lineGroupStyle(q.select(this).selectAll("path"),k.width,k.color,k.dash)})})}}},{"../../components/color":643,"../../components/drawing":665,"../../constants/interactions":752,
"../bar/style":935,"../bar/uniform_text":937,d3:169}],1056:[function(b,K,G){G=b("../pie/attributes");var q=b("../../plots/attributes"),m=b("../../plots/domain").attributes,l=b("../../plots/template_attributes").hovertemplateAttrs,h=b("../../plots/template_attributes").texttemplateAttrs;b=b("../../lib/extend").extendFlat;K.exports={labels:G.labels,label0:G.label0,dlabel:G.dlabel,values:G.values,marker:{colors:G.marker.colors,line:{color:b({},G.marker.line.color,{dflt:null}),width:b({},G.marker.line.width,
{dflt:1}),editType:"calc"},editType:"calc"},text:G.text,hovertext:G.hovertext,scalegroup:b({},G.scalegroup,{}),textinfo:b({},G.textinfo,{flags:["label","text","value","percent"]}),texttemplate:h({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:b({},q.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:l({},{keys:["label","color","value","text","percent"]}),textposition:b({},G.textposition,{values:["inside","none"],dflt:"inside"}),textfont:G.textfont,
insidetextfont:G.insidetextfont,title:{text:G.title.text,font:G.title.font,position:b({},G.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:m({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},{"../../lib/extend":768,"../../plots/attributes":824,"../../plots/domain":855,"../../plots/template_attributes":906,"../pie/attributes":1161}],
1057:[function(b,K,G){var q=b("../../plots/plots");G.name="funnelarea";G.plot=function(m,l,h,a){q.plotBasePlot(G.name,m,l,h,a)};G.clean=function(m,l,h,a){q.cleanBasePlot(G.name,m,l,h,a)}},{"../../plots/plots":891}],1058:[function(b,K,G){var q=b("../pie/calc");K.exports={calc:function(m,l){return q.calc(m,l)},crossTraceCalc:function(m){q.crossTraceCalc(m,{type:"funnelarea"})}}},{"../pie/calc":1163}],1059:[function(b,K,G){var q=b("../../lib"),m=b("./attributes"),l=b("../../plots/domain").defaults,h=
b("../bar/defaults").handleText,a=b("../pie/defaults").handleLabelsAndValues;K.exports=function(g,e,n,p){function c(k,r){return q.coerce(g,e,m,k,r)}n=c("labels");var d=c("values");n=a(n,d);d=n.len;e._hasLabels=n.hasLabels;e._hasValues=n.hasValues;!e._hasLabels&&e._hasValues&&(c("label0"),c("dlabel"));if(d){e._length=d;c("marker.line.width")&&c("marker.line.color",p.paper_bgcolor);c("marker.colors");c("scalegroup");n=c("text");d=c("texttemplate");var f;d||(f=c("textinfo",Array.isArray(n)?"text+percent":
"percent"));c("hovertext");c("hovertemplate");if(d||f&&"none"!==f)f=c("textposition"),h(g,e,p,c,f,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1});l(e,p,c);c("title.text")&&(c("title.position"),q.coerceFont(c,"title.font",p.font));c("aspectratio");c("baseratio")}else e.visible=!1}},{"../../lib":778,"../../plots/domain":855,"../bar/defaults":925,"../pie/defaults":1164,"./attributes":1056}],1060:[function(b,K,
G){K.exports={moduleType:"trace",name:"funnelarea",basePlotModule:b("./base_plot"),categories:["pie-like","funnelarea","showLegend"],attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults"),supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc").calc,crossTraceCalc:b("./calc").crossTraceCalc,plot:b("./plot"),style:b("./style"),styleOne:b("../pie/style_one"),meta:{}}},{"../pie/style_one":1172,"./attributes":1056,"./base_plot":1057,"./calc":1058,"./defaults":1059,
"./layout_attributes":1061,"./layout_defaults":1062,"./plot":1063,"./style":1064}],1061:[function(b,K,G){b=b("../pie/layout_attributes").hiddenlabels;K.exports={hiddenlabels:b,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{"../pie/layout_attributes":1168}],1062:[function(b,K,G){var q=b("../../lib"),m=b("./layout_attributes");K.exports=function(l,h){q.coerce(l,h,m,"hiddenlabels",void 0);q.coerce(l,h,m,"funnelareacolorway",
h.colorway);q.coerce(l,h,m,"extendfunnelareacolors",void 0)}},{"../../lib":778,"./layout_attributes":1061}],1063:[function(b,K,G){function q(y,D){return"l"+(D[0]-y[0])+","+(D[1]-y[1])}function m(y,D){return[.5*(y[0]+D[0]),.5*(y[1]+D[1])]}function l(y){function D(){var M=Math.sqrt(I);return[M,-M]}if(y.length){var A=y[0],t=A.trace,B=t.aspectratio;t=t.baseratio;.999<t&&(t=.999);t=Math.pow(t,2);var F=A.vTotal,I=F*t/(1-t)/F;t=[];t.push(D());var J;for(J=y.length-1;-1<J;J--){var L=y[J];L.hidden||(I+=L.v/
F,t.push(D()))}F=Infinity;var H=-Infinity;for(J=0;J<t.length;J++)L=t[J],F=Math.min(F,L[1]),H=Math.max(H,L[1]);for(J=0;J<t.length;J++)t[J][1]-=(H+F)/2;J=A.r;F=(H-F)/2;L=J/t[t.length-1][0];B*=J/F;A.r=B*F;for(J=0;J<t.length;J++)t[J][0]*=L,t[J][1]*=B;L=t[0];A=[-L[0],L[1]];B=[L[0],L[1]];F=0;for(J=y.length-1;-1<J;J--)if(L=y[J],!L.hidden){F+=1;H=t[F][0];var P=t[F][1];L.TL=[-H,P];L.TR=[H,P];L.BL=A;L.BR=B;L.pxmid=m(L.TR,L.BR);A=L.TL;B=L.TR}}}var h=b("d3"),a=b("../../components/drawing"),g=b("../../lib"),e=
g.strScale,n=g.strTranslate,p=b("../../lib/svg_text_utils"),c=b("../bar/plot").toMoveInsideBar;G=b("../bar/uniform_text");var d=G.recordMinTextSize,f=G.clearMinTextSize,k=b("../pie/helpers");b=b("../pie/plot");var r=b.attachFxHandlers,u=b.determineInsideTextFont,v=b.layoutAreas,x=b.prerenderTitles,C=b.positionTitleOutside,z=b.formatSliceLabel;K.exports=function(y,D){var A=y._fullLayout;f("funnelarea",A);x(D,y);v(D,A._size);g.makeTraceGroups(A._funnelarealayer,D,"trace").each(function(t){var B=h.select(this),
F=t[0],I=F.trace;l(t);B.each(function(){var J=h.select(this).selectAll("g.slice").data(t);J.enter().append("g").classed("slice",!0);J.exit().remove();J.each(function(L,H){if(L.hidden)h.select(this).selectAll("path,g").remove();else{L.pointNumber=L.i;L.curveNumber=I.index;var P=F.cx,M=F.cy,N=h.select(this),T=N.selectAll("path.surface").data([L]);T.enter().append("path").classed("surface",!0).style({"pointer-events":"all"});N.call(r,y,t);var Q="M"+(P+L.TR[0])+","+(M+L.TR[1])+q(L.TR,L.BR)+q(L.BR,L.BL)+
q(L.BL,L.TL)+"Z";T.attr("d",Q);z(y,L,F);T=k.castOption(I.textposition,L.pts);N=N.selectAll("g.slicetext").data(L.text&&"none"!==T?[0]:[]);N.enter().append("g").classed("slicetext",!0);N.exit().remove();N.each(function(){var U=g.ensureSingle(h.select(this),"text","",function(Z){Z.attr("data-notex",1)}),S=g.ensureUniformFontSize(y,u(I,L,A.font));U.text(L.text).attr({"class":"slicetext",transform:"","text-anchor":"middle"}).call(a.font,S).call(p.convertToTspans,y);var X=a.bBox(U.node());X=c(Math.max(L.TL[0],
L.BL[0])+P,Math.min(L.TR[0],L.BR[0])+P,Math.min(L.BL[1],L.BR[1])+M,Math.max(L.TL[1],L.TR[1])+M,X,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"});X.fontSize=S.size;d(I.type,X,A);t[H].transform=X;U.attr("transform",g.getTextTransform(X))})}});J=h.select(this).selectAll("g.titletext").data(I.title.text?[0]:[]);J.enter().append("g").classed("titletext",!0);J.exit().remove();J.each(function(){var L=g.ensureSingle(h.select(this),"text","",function(P){P.attr("data-notex",1)}),H=I.title.text;I._meta&&
(H=g.templateString(H,I._meta));L.text(H).attr({"class":"titletext",transform:"","text-anchor":"middle"}).call(a.font,I.title.font).call(p.convertToTspans,y);H=C(F,A._size);L.attr("transform",n(H.x,H.y)+e(Math.min(1,H.scale))+n(H.tx,H.ty))})})})}},{"../../components/drawing":665,"../../lib":778,"../../lib/svg_text_utils":803,"../bar/plot":932,"../bar/uniform_text":937,"../pie/helpers":1166,"../pie/plot":1170,d3:169}],1064:[function(b,K,G){var q=b("d3"),m=b("../pie/style_one"),l=b("../bar/uniform_text").resizeText;
K.exports=function(h){var a=h._fullLayout._funnelarealayer.selectAll(".trace");l(h,a,"funnelarea");a.each(function(g){var e=g[0].trace;g=q.select(this);g.style({opacity:e.opacity});g.selectAll("path.surface").each(function(n){q.select(this).call(m,n,e)})})}},{"../bar/uniform_text":937,"../pie/style_one":1172,d3:169}],1065:[function(b,K,G){G=b("../scatter/attributes");var q=b("../../plots/attributes"),m=b("../../plots/template_attributes").hovertemplateAttrs,l=b("../../components/colorscale/attributes");
b("../../constants/docs");b=b("../../lib/extend").extendFlat;K.exports=b({z:{valType:"data_array",editType:"calc"},x:b({},G.x,{impliedEdits:{xtype:"array"}}),x0:b({},G.x0,{impliedEdits:{xtype:"scaled"}}),dx:b({},G.dx,{impliedEdits:{xtype:"scaled"}}),y:b({},G.y,{impliedEdits:{ytype:"array"}}),y0:b({},G.y0,{impliedEdits:{ytype:"scaled"}}),dy:b({},G.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:b({},G.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:b({},G.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:b({},
G.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:b({},G.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:b({},G.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:b({},G.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",
values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},zhoverformat:{valType:"string",dflt:"",editType:"none"},hovertemplate:m(),showlegend:b({},q.showlegend,{dflt:!1})},{transforms:void 0},l("",{cLetter:"z",
autoColorDflt:!1}))},{"../../components/colorscale/attributes":650,"../../constants/docs":748,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,"../scatter/attributes":1187}],1066:[function(b,K,G){function q(u){for(var v=[],x=u.length,C=0;C<x;C++){var z=u[C];z!==r&&v.push(z)}return v}function m(u,v,x){for(var C=[],z=-1,y=0;y<x.length;y++)if(v[y]!==r){z++;C[z]=[];for(var D=0;D<x[y].length;D++)u[D]!==r&&C[z].push(x[y][D])}return C}var l=b("../../registry"),h=
b("../../lib"),a=b("../../plots/cartesian/axes"),g=b("../../plots/cartesian/align_period"),e=b("../histogram2d/calc"),n=b("../../components/colorscale/calc"),p=b("./convert_column_xyz"),c=b("./clean_2d_array"),d=b("./interp2d"),f=b("./find_empties"),k=b("./make_bound_array"),r=b("../../constants/numerical").BADNUM;K.exports=function(u,v){function x(X){t=v._input.zsmooth=v.zsmooth=!1;h.warn('cannot use zsmooth: "fast": '+X)}var C=a.getFromId(u,v.xaxis||"x"),z=a.getFromId(u,v.yaxis||"y"),y=l.traceIs(v,
"contour"),D=l.traceIs(v,"histogram"),A=l.traceIs(v,"gl2d"),t=y?"best":v.zsmooth,B;C._minDtick=0;z._minDtick=0;if(D){var F=e(u,v);var I=F.orig_x;var J=F.x;var L=F.x0;var H=F.dx;var P=F.orig_y;var M=F.y;var N=F.y0;var T=F.dy;var Q=F.z}else Q=v.z,h.isArray1D(Q)?(p(v,C,z,"x","y",["z"]),J=v._x,M=v._y,Q=v._z):(I=v.x?C.makeCalcdata(v,"x"):[],P=v.y?z.makeCalcdata(v,"y"):[],J=g(v,C,"x",I),M=g(v,z,"y",P),v._x=J,v._y=M),L=v.x0,H=v.dx,N=v.y0,T=v.dy,Q=c(Q,v,C,z);if(C.rangebreaks||z.rangebreaks)Q=m(J,M,Q),D||
(J=q(J),M=q(M),v._x=J,v._y=M);D||!y&&!v.connectgaps||(v._emptypoints=f(Q),d(Q,v._emptypoints));if("fast"===t)if("log"===C.type||"log"===z.type)x("log axis found");else if(!D){if(J.length){var U=(J[J.length-1]-J[0])/(J.length-1),S=Math.abs(U/100);for(B=0;B<J.length-1;B++)if(Math.abs(J[B+1]-J[B]-U)>S){x("x scale is not linear");break}}if(M.length&&"fast"===t)for(U=(M[M.length-1]-M[0])/(M.length-1),S=Math.abs(U/100),B=0;B<M.length-1;B++)if(Math.abs(M[B+1]-M[B]-U)>S){x("y scale is not linear");break}}B=
h.maxRowLength(Q);J="scaled"===v.xtype?"":J;U=k(v,J,L,H,B,C);M="scaled"===v.ytype?"":M;S=k(v,M,N,T,Q.length,z);A||(v._extremes[C._id]=a.findExtremes(C,U),v._extremes[z._id]=a.findExtremes(z,S));A={x:U,y:S,z:Q,text:v._text||v.text,hovertext:v._hovertext||v.hovertext};v.xperiodalignment&&I&&(A.orig_x=I);v.yperiodalignment&&P&&(A.orig_y=P);J&&J.length===U.length-1&&(A.xCenter=J);M&&M.length===S.length-1&&(A.yCenter=M);D&&(A.xRanges=F.xRanges,A.yRanges=F.yRanges,A.pts=F.pts);y||n(u,v,{vals:Q,cLetter:"z"});
y&&v.contours&&"heatmap"===v.contours.coloring&&(u={type:"contour"===v.type?"heatmap":"histogram2d",xcalendar:v.xcalendar,ycalendar:v.ycalendar},A.xfill=k(u,J,L,H,B,C),A.yfill=k(u,M,N,T,Q.length,z));return[A]}},{"../../components/colorscale/calc":651,"../../constants/numerical":753,"../../lib":778,"../../plots/cartesian/align_period":825,"../../plots/cartesian/axes":828,"../../registry":911,"../histogram2d/calc":1098,"./clean_2d_array":1067,"./convert_column_xyz":1069,"./find_empties":1071,"./interp2d":1074,
"./make_bound_array":1075}],1067:[function(b,K,G){var q=b("fast-isnumeric"),m=b("../../lib"),l=b("../../constants/numerical").BADNUM;K.exports=function(h,a,g,e){function n(z){if(q(z))return+z}function p(z){if(a&&"carpet"!==a.type&&"contourcarpet"!==a.type&&z&&"category"===z.type&&a["_"+z._id.charAt(0)].length){var y=z._id.charAt(0),D={};y=a["_"+y+"CategoryMap"]||a[y];for(d=0;d<y.length;d++)D[y[d]]=d;return function(A){A=D[z._categories[A]];return A+1?A:l}}return m.identity}var c,d,f;if(a&&a.transpose){for(d=
c=0;d<h.length;d++)c=Math.max(c,h[d].length);if(0===c)return!1;var k=function(z){return z.length};var r=function(z,y,D){return(z[D]||[])[y]}}else c=h.length,k=function(z,y){return z[y].length},r=function(z,y,D){return(z[y]||[])[D]};var u=function(z,y,D){return y===l||D===l?l:r(z,y,D)},v=p(g),x=p(e);e&&"category"===e.type&&(c=e._categories.length);var C=Array(c);for(d=0;d<c;d++)for(e=g&&"category"===g.type?g._categories.length:k(h,d),C[d]=Array(e),f=0;f<e;f++)C[d][f]=n(u(h,x(d),v(f)));return C}},{"../../constants/numerical":753,
"../../lib":778,"fast-isnumeric":241}],1068:[function(b,K,G){K.exports={min:"zmin",max:"zmax"}},{}],1069:[function(b,K,G){var q=b("../../lib"),m=b("../../constants/numerical").BADNUM,l=b("../../plots/cartesian/align_period");K.exports=function(h,a,g,e,n,p){var c=h._length,d=a.makeCalcdata(h,e),f=g.makeCalcdata(h,n);d=l(h,a,e,d);f=l(h,g,n,f);var k=h.text,r=void 0!==k&&q.isArray1D(k),u=h.hovertext,v=void 0!==u&&q.isArray1D(u),x,C=q.distinctVals(d),z=C.vals,y=q.distinctVals(f),D=y.vals,A=[],t,B;var F=
D.length;var I=z.length;for(x=0;x<p.length;x++)A[x]=q.init2dArray(F,I);r&&(t=q.init2dArray(F,I));v&&(B=q.init2dArray(F,I));I=q.init2dArray(F,I);for(x=0;x<c;x++)if(d[x]!==m&&f[x]!==m){var J=q.findBin(d[x]+C.minDiff/2,z),L=q.findBin(f[x]+y.minDiff/2,D);for(F=0;F<p.length;F++)A[F][L][J]=h[p[F]][x],I[L][J]=x;r&&(t[L][J]=k[x]);v&&(B[L][J]=u[x])}h["_"+e]=z;h["_"+n]=D;for(F=0;F<p.length;F++)h["_"+p[F]]=A[F];r&&(h._text=t);v&&(h._hovertext=B);a&&"category"===a.type&&(h["_"+e+"CategoryMap"]=z.map(function(H){return a._categories[H]}));
g&&"category"===g.type&&(h["_"+n+"CategoryMap"]=D.map(function(H){return g._categories[H]}));h._after2before=I}},{"../../constants/numerical":753,"../../lib":778,"../../plots/cartesian/align_period":825}],1070:[function(b,K,G){var q=b("../../lib"),m=b("./xyz_defaults"),l=b("../scatter/period_defaults"),h=b("./style_defaults"),a=b("../../components/colorscale/defaults"),g=b("./attributes");K.exports=function(e,n,p,c){function d(f,k){return q.coerce(e,n,g,f,k)}m(e,n,d,c)?(l(e,n,c,d),d("text"),d("hovertext"),
d("hovertemplate"),h(e,n,d,c),d("hoverongaps"),d("connectgaps",q.isArray1D(n.z)&&!1!==n.zsmooth),a(e,n,c,d,{prefix:"",cLetter:"z"})):n.visible=!1}},{"../../components/colorscale/defaults":653,"../../lib":778,"../scatter/period_defaults":1207,"./attributes":1065,"./style_defaults":1078,"./xyz_defaults":1079}],1071:[function(b,K,G){var q=b("../../lib").maxRowLength;K.exports=function(m){var l=[],h={},a=[],g=m[0],e=[],n=[0,0,0],p=q(m),c,d,f;for(c=0;c<m.length;c++){var k=e;e=g;g=m[c+1]||[];for(d=0;d<
p;d++)void 0===e[d]&&((f=(void 0!==e[d-1]?1:0)+(void 0!==e[d+1]?1:0)+(void 0!==k[d]?1:0)+(void 0!==g[d]?1:0))?(0===c&&f++,0===d&&f++,c===m.length-1&&f++,d===e.length-1&&f++,4>f&&(h[[c,d]]=[c,d,f]),l.push([c,d,f])):a.push([c,d]))}for(;a.length;){g={};e=!1;for(m=a.length-1;0<=m;m--){var r=a[m];c=r[0];d=r[1];if(f=((h[[c-1,d]]||n)[2]+(h[[c+1,d]]||n)[2]+(h[[c,d-1]]||n)[2]+(h[[c,d+1]]||n)[2])/20)g[r]=[c,d,f],a.splice(m,1),e=!0}if(!e)throw"findEmpties iterated with no new neighbors";for(r in g)h[r]=g[r],
l.push(g[r])}return l.sort(function(u,v){return v[2]-u[2]})}},{"../../lib":778}],1072:[function(b,K,G){var q=b("../../components/fx"),m=b("../../lib"),l=b("../../plots/cartesian/axes"),h=b("../../components/colorscale").extractOpts;K.exports=function(a,g,e,n,p,c){var d=a.cd[0];n=d.trace;p=a.xa;var f=a.ya,k=d.x,r=d.y,u=d.z,v=d.xCenter,x=d.yCenter,C=d.zmask,z=n.zhoverformat,y=k,D=r;if(!1!==a.index){try{var A=Math.round(a.index[1]);var t=Math.round(a.index[0])}catch(I){m.error("Error hovering on heatmap, pointNumber must be [row,col], found:",
a.index);return}if(0>A||A>=u[0].length||0>t||t>u.length)return}else{if(0<q.inbox(g-k[0],g-k[k.length-1],0)||0<q.inbox(e-r[0],e-r[r.length-1],0))return;if(c){y=[2*k[0]-k[1]];for(A=1;A<k.length;A++)y.push((k[A]+k[A-1])/2);y.push([2*k[k.length-1]-k[k.length-2]]);D=[2*r[0]-r[1]];for(A=1;A<r.length;A++)D.push((r[A]+r[A-1])/2);D.push([2*r[r.length-1]-r[r.length-2]])}A=Math.max(0,Math.min(y.length-2,m.findBin(g,y)));t=Math.max(0,Math.min(D.length-2,m.findBin(e,D)))}g=p.c2p(k[A]);e=p.c2p(k[A+1]);y=f.c2p(r[t]);
D=f.c2p(r[t+1]);if(c){c=d.orig_x||k;var B=d.orig_y||r;e=g;c=c[A];D=y;x=B[t]}else c=d.orig_x||v||k,B=d.orig_y||x||r,c=v?c[A]:(c[A]+c[A+1])/2,x=x?B[t]:(B[t]+B[t+1])/2,p&&"category"===p.type&&(c=k[A]),f&&"category"===f.type&&(x=r[t]),n.zsmooth&&(g=e=p.c2p(c),y=D=f.c2p(x));f=u[t][A];C&&!C[t][A]&&(f=void 0);if(void 0!==f||n.hoverongaps){var F;Array.isArray(d.hovertext)&&Array.isArray(d.hovertext[t])?F=d.hovertext[t][A]:Array.isArray(d.text)&&Array.isArray(d.text[t])&&(F=d.text[t][A]);d=h(n);p=l.tickText({type:"linear",
range:[d.min,d.max],hoverformat:z,_separators:p._separators,_numFormat:p._numFormat},f,"hover").text;return[m.extendFlat(a,{index:n._after2before?n._after2before[t][A]:[t,A],distance:a.maxHoverDistance,spikeDistance:a.maxSpikeDistance,x0:g,x1:e,y0:y,y1:D,xLabelVal:c,yLabelVal:x,zLabelVal:f,zLabel:p,text:F})]}}},{"../../components/colorscale":655,"../../components/fx":683,"../../lib":778,"../../plots/cartesian/axes":828}],1073:[function(b,K,G){K.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),
calc:b("./calc"),plot:b("./plot"),colorbar:b("./colorbar"),style:b("./style"),hoverPoints:b("./hover"),moduleType:"trace",name:"heatmap",basePlotModule:b("../../plots/cartesian"),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},{"../../plots/cartesian":841,"./attributes":1065,"./calc":1066,"./colorbar":1068,"./defaults":1070,"./hover":1072,"./plot":1076,"./style":1077}],1074:[function(b,K,G){function q(h,a,g){var e=0,n,p,c,d,f,k;for(n=0;n<a.length;n++){var r=a[n];var u=r[0];r=r[1];var v=
h[u][r];for(p=d=f=0;4>p;p++){var x=l[p];if(c=h[u+x[0]])if(x=c[r+x[1]],void 0!==x){if(0===f)var C=k=x;else C=Math.min(C,x),k=Math.max(k,x);d++;f+=x}}if(0===d)throw"iterateInterp2d order is wrong: no defined neighbors";h[u][r]=f/d;void 0===v?4>d&&(e=1):(h[u][r]=(1+g)*h[u][r]-g*v,k>C&&(e=Math.max(e,Math.abs(h[u][r]-v)/(k-C))))}return e}var m=b("../../lib"),l=[[-1,0],[1,0],[0,-1],[0,1]];K.exports=function(h,a){var g=1,e;q(h,a);for(e=0;e<a.length&&!(4>a[e][2]);e++);a=a.slice(e);for(e=0;100>e&&.01<g;e++)g=
q(h,a,.5-.25*Math.min(1,.5*g));.01<g&&m.log("interp2d didn't converge quickly",g);return h}},{"../../lib":778}],1075:[function(b,K,G){var q=b("../../registry"),m=b("../../lib").isArrayOrTypedArray;K.exports=function(l,h,a,g,e,n){var p=[],c=q.traceIs(l,"contour"),d=q.traceIs(l,"histogram"),f=q.traceIs(l,"gl2d");if(m(h)&&1<h.length&&!d&&"category"!==n.type)if(g=h.length,g<=e){if(c||f)p=h.slice(0,e);else if(1===e)p=[h[0]-.5,h[0]+.5];else{p=[1.5*h[0]-.5*h[1]];for(c=1;c<g;c++)p.push(.5*(h[c-1]+h[c]));
p.push(1.5*h[g-1]-.5*h[g-2])}if(g<e)for(f=p[p.length-1],h=f-p[p.length-2],c=g;c<e;c++)f+=h,p.push(f)}else return c?h.slice(0,e):h.slice(0,e+1);else for(l=l[n._id.charAt(0)+"calendar"],h=d?n.r2c(a,0,l):m(h)&&1===h.length?h[0]:void 0===a?0:("log"===n.type?n.d2c:n.r2c)(a,0,l),g=g||1,c=c||f?0:-.5;c<e;c++)p.push(h+g*c);return p}},{"../../lib":778,"../../registry":911}],1076:[function(b,K,G){function q(c,d){var f=d.length-2,k=e.constrain(e.findBin(c,d),0,f),r=d[k];c=e.constrain(k+(c-r)/(d[k+1]-r)-.5,0,
f);d=Math.round(c);k=Math.abs(c-d);return c&&c!==f&&k?{bin0:d,frac:k,bin1:Math.round(d+k/(c-d))}:{bin0:d,bin1:d,frac:0}}function m(c,d){var f=d.length-1;f=e.constrain(e.findBin(c,d),0,f);var k=d[f];c=(c-k)/(d[f+1]-k)||0;return 0>=c?{bin0:f,bin1:f,frac:0}:.5>c?{bin0:f,bin1:f+1,frac:c}:{bin0:f+1,bin1:f,frac:1-c}}function l(c,d,f){c[d]=f[0];c[d+1]=f[1];c[d+2]=f[2];c[d+3]=Math.round(255*f[3])}var h=b("d3"),a=b("tinycolor2"),g=b("../../registry"),e=b("../../lib"),n=b("../../components/colorscale").makeColorScaleFuncFromTrace,
p=b("../../constants/xmlns_namespaces");K.exports=function(c,d,f,k){var r=d.xaxis,u=d.yaxis;e.makeTraceGroups(k,f,"hm").each(function(v){function x(ia,sa){return void 0!==ia?(ia=fa(ia),ia[0]=Math.round(ia[0]),ia[1]=Math.round(ia[1]),ia[2]=Math.round(ia[2]),ja+=sa,ba+=ia[0]*sa,ma+=ia[1]*sa,qa+=ia[2]*sa,ia):[0,0,0,0]}function C(ia,sa,ta,Aa){var Ka=ia[ta.bin0];if(void 0===Ka)return x(void 0,1);ia=ia[ta.bin1];var Sa=sa[ta.bin0];sa=sa[ta.bin1];return x(Ka+ta.frac*(ia-Ka||0)+Aa.frac*((Sa-Ka||0)+ta.frac*
(void 0===ia?void 0===sa?0:void 0===Sa?2*(sa-Ka):2*(2*sa-Sa-Ka)/3:void 0===sa?void 0===Sa?0:2*(2*Ka-ia-Sa)/3:void 0===Sa?2*(2*sa-ia-Ka)/3:sa+Ka-ia-Sa)))}var z=h.select(this),y=v[0],D=y.trace,A=y.z,t=y.x,B=y.y,F=y.xCenter,I=y.yCenter,J=g.traceIs(D,"contour"),L=J?"best":D.zsmooth,H=A.length,P=e.maxRowLength(A),M=!1,N=!1,T;for(T=0;void 0===Q&&T<t.length-1;){var Q=r.c2p(t[T]);T++}for(T=t.length-1;void 0===U&&0<T;){var U=r.c2p(t[T]);T--}U<Q&&(T=U,U=Q,Q=T,M=!0);for(T=0;void 0===S&&T<B.length-1;){var S=
u.c2p(B[T]);T++}for(T=B.length-1;void 0===X&&0<T;){var X=u.c2p(B[T]);T--}X<S&&(T=S,S=X,X=T,N=!0);J&&(F=t,I=B,t=y.xfill,B=y.yfill);"fast"!==L&&(T="best"===L?0:.5,Q=Math.max(-T*r._length,Q),U=Math.min((1+T)*r._length,U),S=Math.max(-T*u._length,S),X=Math.min((1+T)*u._length,X));var Z=Math.round(U-Q),aa=Math.round(X-S);if(0>=Z||0>=aa)z.selectAll("image").data([]).exit().remove();else{"fast"===L?(X=P,T=H):(X=Z,T=aa);U=document.createElement("canvas");U.width=X;U.height=T;X=U.getContext("2d");var fa=n(D,
{noNumericCheck:!0,returnArray:!0});"fast"===L?(y=M?function(ia){return P-1-ia}:e.identity,J=N?function(ia){return H-1-ia}:e.identity):(y=function(ia){return e.constrain(Math.round(r.c2p(t[ia])-Q),0,Z)},J=function(ia){return e.constrain(Math.round(u.c2p(B[ia])-S),0,aa)});T=J(0);var ha=[T,T];M=M?0:1;N=N?0:1;var ja=0,ba=0,ma=0,qa=0;if(L){D=0;try{var ka=new Uint8Array(Z*aa*4)}catch(ia){ka=Array(Z*aa*4)}if("best"===L){L=F||t;M=I||B;N=Array(L.length);y=Array(M.length);J=Array(Z);F=F?m:q;ha=I?m:q;for(T=
0;T<L.length;T++)N[T]=Math.round(r.c2p(L[T])-Q);for(T=0;T<M.length;T++)y[T]=Math.round(u.c2p(M[T])-S);for(T=0;T<Z;T++)J[T]=F(T,N);for(I=0;I<aa;I++)for(L=ha(I,y),M=A[L.bin0],N=A[L.bin1],T=0;T<Z;T++,D+=4)F=C(M,N,J[T],L),l(ka,D,F)}else for(I=0;I<H;I++)for(L=A[I],ha=J(I),T=0;T<Z;T++)F=x(L[T],1),D=4*(ha*Z+y(T)),l(ka,D,F);A=X.createImageData(Z,aa);try{A.data.set(ka)}catch(ia){for(T=A.data,F=T.length,I=0;I<F;I++)T[I]=ka[I]}X.putImageData(A,0,0)}else{ka=D.xgap;D=D.ygap;var oa=Math.floor(ka/2),na=Math.floor(D/
2);for(I=0;I<H;I++)if(L=A[I],ha.reverse(),ha[N]=J(I+1),ha[0]!==ha[1]&&void 0!==ha[0]&&void 0!==ha[1]){T=y(0);var la=[T,T];for(T=0;T<P;T++)la.reverse(),la[M]=y(T+1),la[0]!==la[1]&&void 0!==la[0]&&void 0!==la[1]&&(F=L[T],F=x(F,(la[1]-la[0])*(ha[1]-ha[0])),X.fillStyle="rgba("+F.join(",")+")",X.fillRect(la[0]+oa,ha[0]+na,la[1]-la[0]-ka,ha[1]-ha[0]-D))}}ba=Math.round(ba/ja);ma=Math.round(ma/ja);qa=Math.round(qa/ja);A=a("rgb("+ba+","+ma+","+qa+")");c._hmpixcount=(c._hmpixcount||0)+ja;c._hmlumcount=(c._hmlumcount||
0)+ja*A.getLuminance();v=z.selectAll("image").data(v);v.enter().append("svg:image").attr({xmlns:p.svg,preserveAspectRatio:"none"});v.attr({height:aa,width:Z,x:Q,y:S,"xlink:href":U.toDataURL("image/png")})}})}},{"../../components/colorscale":655,"../../constants/xmlns_namespaces":754,"../../lib":778,"../../registry":911,d3:169,tinycolor2:576}],1077:[function(b,K,G){var q=b("d3");K.exports=function(m){q.select(m).selectAll(".hm image").style("opacity",function(l){return l.trace.opacity})}},{d3:169}],
1078:[function(b,K,G){K.exports=function(q,m,l){!1===l("zsmooth")&&(l("xgap"),l("ygap"));l("zhoverformat")}},{}],1079:[function(b,K,G){function q(a,g){var e=g(a);"scaled"===(e?g(a+"type","array"):"scaled")&&(g(a+"0"),g("d"+a));return e}var m=b("fast-isnumeric"),l=b("../../lib"),h=b("../../registry");K.exports=function(a,g,e,n,p,c){var d=e("z");p=p||"x";c=c||"y";if(void 0===d||!d.length)return 0;if(l.isArray1D(a.z)){var f=e(p);e=e(c);f=l.minRowLength(f);e=l.minRowLength(e);if(0===f||0===e)return 0;
g._length=Math.min(f,e,d.length)}else{q(p,e);q(c,e);f=!0;for(var k=!1,r=!1,u,v=0;v<d.length;v++){u=d[v];if(!l.isArrayOrTypedArray(u)){f=!1;break}0<u.length&&(k=!0);for(var x=0;x<u.length;x++)if(m(u[x])){r=!0;break}}if(!(f&&k&&r))return 0;e("transpose");g._length=null}if("heatmapgl"===a.type||"contourgl"===a.type)return!0;h.getComponentMethod("calendars","handleTraceDefaults")(a,g,[p,c],n);return!0}},{"../../lib":778,"../../registry":911,"fast-isnumeric":241}],1080:[function(b,K,G){G=b("../heatmap/attributes");
var q=b("../../components/colorscale/attributes"),m=b("../../lib/extend").extendFlat;b=b("../../plot_api/edit_types").overrideAll;for(var l="z x x0 dx y y0 dy text transpose xtype ytype".split(" "),h={},a=0;a<l.length;a++){var g=l[a];h[g]=G[g]}h.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"};m(h,q("",{cLetter:"z",autoColorDflt:!1}));K.exports=b(h,"calc","nested")},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plot_api/edit_types":810,"../heatmap/attributes":1065}],
1081:[function(b,K,G){function q(a,g){this.scene=a;this.uid=g;this.type="heatmapgl";this.name="";this.hoverinfo="all";this.xData=[];this.yData=[];this.zData=[];this.textLabels=[];this.idToIndex=[];this.bounds=[0,0,0,0];this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]};this.heatmap=m(a.glplot,this.options);this.heatmap._trace=this}var m=b("gl-heatmap2d"),l=b("../../plots/cartesian/axes"),h=b("../../lib/str2rgbarray");b=q.prototype;b.handlePick=function(a){var g=
this.options,e=g.shape,n=a.pointId,p=n%e[0];e=Math.floor(n/e[0]);return{trace:this,dataCoord:a.dataCoord,traceCoord:[g.x[p],g.y[e],g.z[n]],textLabel:this.textLabels[n],name:this.name,pointIndex:[e,p],hoverinfo:this.hoverinfo}};b.update=function(a,g){g=g[0];this.index=a.index;this.name=a.name;this.hoverinfo=a.hoverinfo;var e=g.z;this.options.z=[].concat.apply([],e);this.options.shape=[e[0].length,e.length];this.options.x=g.x;this.options.y=g.y;this.options.zsmooth=a.zsmooth;e=a.colorscale;for(var n=
a.zmin,p=a.zmax,c=e.length,d=Array(c),f=Array(4*c),k=0;k<c;k++){var r=e[k],u=h(r[1]);d[k]=n+r[0]*(p-n);for(r=0;4>r;r++)f[4*k+r]=u[r]}this.options.colorLevels=d;this.options.colorValues=f;this.textLabels=[].concat.apply([],a.text);this.heatmap.update(this.options);e=this.scene.xaxis;n=this.scene.yaxis;if(!1===a.zsmooth){var v={ppad:g.x[1]-g.x[0]};var x={ppad:g.y[1]-g.y[0]}}a._extremes[e._id]=l.findExtremes(e,g.x,v);a._extremes[n._id]=l.findExtremes(n,g.y,x)};b.dispose=function(){this.heatmap.dispose()};
K.exports=function(a,g,e){a=new q(a,g.uid);a.update(g,e);return a}},{"../../lib/str2rgbarray":802,"../../plots/cartesian/axes":828,"gl-heatmap2d":271}],1082:[function(b,K,G){var q=b("../../lib"),m=b("../heatmap/xyz_defaults"),l=b("../../components/colorscale/defaults"),h=b("./attributes");K.exports=function(a,g,e,n){function p(c,d){return q.coerce(a,g,h,c,d)}m(a,g,p,n)?(p("text"),p("zsmooth"),l(a,g,n,p,{prefix:"",cLetter:"z"})):g.visible=!1}},{"../../components/colorscale/defaults":653,"../../lib":778,
"../heatmap/xyz_defaults":1079,"./attributes":1080}],1083:[function(b,K,G){K.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../heatmap/colorbar"),calc:b("../heatmap/calc"),plot:b("./convert"),moduleType:"trace",name:"heatmapgl",basePlotModule:b("../../plots/gl2d"),categories:["gl","gl2d","2dMap"],meta:{}}},{"../../plots/gl2d":868,"../heatmap/calc":1066,"../heatmap/colorbar":1068,"./attributes":1080,"./convert":1081,"./defaults":1082}],1084:[function(b,K,G){G=b("../bar/attributes");
var q=b("../../plots/template_attributes").hovertemplateAttrs,m=b("./bin_attributes"),l=b("./constants");b=b("../../lib/extend").extendFlat;K.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},text:b({},G.text,{}),hovertext:b({},G.hovertext,{}),orientation:G.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability",
"density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:m("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:m("y",!0),autobinx:{valType:"boolean",
dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:q({},{keys:l.eventDataKeys}),marker:G.marker,offsetgroup:G.offsetgroup,alignmentgroup:G.alignmentgroup,selected:G.selected,unselected:G.unselected,_deprecated:{bardir:G._deprecated.bardir}}},{"../../lib/extend":768,"../../plots/template_attributes":906,"../bar/attributes":921,"./bin_attributes":1086,"./constants":1090}],1085:[function(b,K,G){K.exports=
function(q,m){for(var l=q.length,h=0,a=0;a<l;a++)m[a]?(q[a]/=m[a],h+=q[a]):q[a]=null;return h}},{}],1086:[function(b,K,G){K.exports=function(q,m){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},{}],1087:[function(b,K,G){var q=b("fast-isnumeric");K.exports={count:function(m,l,h){h[m]++;return 1},sum:function(m,l,h,a){l=a[l];return q(l)?(l=Number(l),h[m]+=l,l):0},avg:function(m,l,h,a,g){l=a[l];q(l)&&(l=Number(l),
h[m]+=l,g[m]++);return 0},min:function(m,l,h,a){l=a[l];if(q(l)){l=Number(l);if(!q(h[m]))return h[m]=l;if(h[m]>l)return a=l-h[m],h[m]=l,a}return 0},max:function(m,l,h,a){l=a[l];if(q(l)){l=Number(l);if(!q(h[m]))return h[m]=l;if(h[m]<l)return a=l-h[m],h[m]=l,a}return 0}}},{"fast-isnumeric":241}],1088:[function(b,K,G){function q(d,f,k,r){if(0>=d*f)return Infinity;for(var u="date"===k.type,v=m(Math.abs(f-d),u),x=0;10>x;x++){var C=m(80*v,u);if(v===C)break;var z=C;var y=d,D=f,A=k,t=r;u&&z>g?(y=l(y,A,t),
D=l(D,A,t),z=z===h?0:1,z=y[z]!==D[z]):z=.1<Math.floor(D/z)-Math.floor(y/z);if(z)v=C;else break}return v}function m(d,f){return f&&d>p?d>g?d>1.1*h?h:d>1.1*a?a:g:d>e?e:d>n?n:p:Math.pow(10,Math.floor(Math.log(d)/Math.LN10))}function l(d,f,k){d=f.c2d(d,h,k).split("-");""===d[0]&&(d.unshift(),d[0]="-"+d[0]);return d}G=b("../../constants/numerical");var h=G.ONEAVGYEAR,a=G.ONEAVGMONTH,g=G.ONEDAY,e=G.ONEHOUR,n=G.ONEMIN,p=G.ONESEC,c=b("../../plots/cartesian/axes").tickIncrement;K.exports=function(d,f,k,r,
u){var v=-1.1*f,x=-.1*f,C=d-x;f=k[0];k=k[1];C=Math.min(q(f+x,f+C,r,u),q(k+x,k+C,r,u));v=Math.min(q(f+v,f+x,r,u),q(k+v,k+x,r,u));if(C>v&&v<Math.abs(k-f)/4E3){var z=C;var y=!1}else z=Math.min(C,v),y=!0;if("date"===r.type&&z>g){var D=z===h?1:6,A=z===h?"M12":"M1";return function(t,B){var F=r.c2d(t,h,u),I=F.indexOf("-",D);0<I&&(F=F.substr(0,I));F=r.d2c(F,0,u);F<t&&(I=c(F,A,!1,u),(F+I)/2<t+d&&(F=I));return B&&y?c(F,A,!0,u):F}}return function(t,B){var F=z*Math.round(t/z);F+z/10<t&&F+.9*z<t+d&&(F+=z);B&&
y&&(F-=z);return F}}},{"../../constants/numerical":753,"../../plots/cartesian/axes":828}],1089:[function(b,K,G){function q(k,r,u,v,x){function C(T,Q,U){Q[T+"Found"]?(Q[T]=t(Q[T]),null===Q[T]&&(Q[T]=U[T])):(N[T]=Q[T]=U[T],a.nestedProperty(B[0],z+"."+T).set(U[T]))}var z=v+"bins",y=k._fullLayout,D=y._histogramBinOpts[r["_"+v+"bingroup"]];y="overlay"===y.barmode;var A,t="date"===u.type?function(T){return T||0===T?a.cleanDate(T,null,M):null}:function(T){return h(T)?Number(T):null};if(r["_"+v+"autoBinFinished"])delete r["_"+
v+"autoBinFinished"];else{var B=D.traces;var F=[],I=!0,J=!1,L=!1;for(A=0;A<B.length;A++){var H=B[A];if(H.visible){var P=D.dirs[A];P=H["_"+P+"pos0"]=u.makeCalcdata(H,P);F=a.concat(F,P);delete H["_"+v+"autoBinFinished"];!0===r.visible&&(I?I=!1:(delete H._autoBin,H["_"+v+"autoBinFinished"]=1),g.traceIs(H,"2dMap")&&(J=!0),"histogram2dcontour"===H.type&&(L=!0))}}var M=B[0][v+"calendar"];A=e.autoBin(F,u,D.nbins,J,M,D.sizeFound&&D.size);var N=(B[0]._autoBin={})[D.dirs[0]]={};L&&(D.size||(A.start=u.c2r(e.tickIncrement(u.r2c(A.start,
0,M),A.size,!0,M),0,M)),void 0===D.end&&(A.end=u.c2r(e.tickIncrement(u.r2c(A.end,0,M),A.size,!1,M),0,M)));if(y&&!g.traceIs(r,"2dMap")&&0===A._dataSpan&&"category"!==u.type&&"multicategory"!==u.type){if(x)return[A,P,!0];A=m(k,r,u,v,z)}P=H.cumulative||{};P.enabled&&"include"!==P.currentbin&&("decreasing"===P.direction?A.start=u.c2r(e.tickIncrement(u.r2c(A.start,0,M),A.size,!0,M),0,M):A.end=u.c2r(e.tickIncrement(u.r2c(A.end,0,M),A.size,!1,M),0,M));D.size=A.size;D.sizeFound||(N.size=A.size,a.nestedProperty(B[0],
z+".size").set(A.size));C("start",D,A);C("end",D,A)}P=r["_"+v+"pos0"];delete r["_"+v+"pos0"];x=r._input[z]||{};k=a.extendFlat({},D);L=D.start;y=u.r2l(x.start);H=void 0!==y;(D.startFound||H)&&y!==u.r2l(L)&&(y=H?y:a.aggNums(Math.min,null,P),L={type:"category"===u.type||"multicategory"===u.type?"linear":u.type,r2l:u.r2l,dtick:D.size,tick0:L,calendar:M,range:[y,e.tickIncrement(y,D.size,!1,M)].map(u.l2r)},L=e.tickFirst(L),L>u.r2l(y)&&(L=e.tickIncrement(L,D.size,!0,M)),k.start=u.l2r(L),H||a.nestedProperty(r,
z+".start").set(k.start));H=D.end;y=u.r2l(x.end);x=void 0!==y;(D.endFound||x)&&y!==u.r2l(H)&&(D=x?y:a.aggNums(Math.max,null,P),k.end=u.l2r(D),x||a.nestedProperty(r,z+".start").set(k.end));u="autobin"+v;!1===r._input[u]&&(r._input[z]=a.extendFlat({},r[z]||{}),delete r._input[u],delete r[u]);return[k,P]}function m(k,r,u,v,x){for(var C=k._fullLayout,z=r.xaxis,y=r.yaxis,D=r.orientation,A=[],t=k._fullData,B=0;B<t.length;B++){var F=t[B];"histogram"===F.type&&!0===F.visible&&F.orientation===D&&F.xaxis===
z&&F.yaxis===y&&A.push(F)}B=!1;z=Infinity;y=[r];for(D=0;D<A.length;D++)if(t=A[D],t===r)B=!0;else if(B){F=q(k,t,u,v,!0);var I=F[0],J=F[2];t["_"+v+"autoBinFinished"]=1;t["_"+v+"pos0"]=F[1];J?y.push(t):z=Math.min(z,I.size)}else F=C._histogramBinOpts[t["_"+v+"bingroup"]],z=Math.min(z,F.size||t[x].size);k=Array(y.length);for(D=0;D<y.length;D++)for(A=y[D]["_"+v+"pos0"],t=0;t<A.length;t++)if(void 0!==A[t]){k[D]=A[t];break}isFinite(z)||(z=a.distinctVals(k).minDiff);for(D=0;D<y.length;D++)t=y[D],A=t[v+"calendar"],
A={start:u.c2r(k[D]-z/2,0,A),end:u.c2r(k[D]+z/2,0,A),size:z},t._input[x]=t[x]=A,(F=C._histogramBinOpts[t["_"+v+"bingroup"]])&&a.extendFlat(F,A);return r[x]}function l(k,r,u){function v(y){z=k[y];k[y]/=2}function x(y){C=k[y];k[y]=z+C/2;z+=C}var C,z;if("half"===u)if("increasing"===r)for(v(0),r=1;r<k.length;r++)x(r);else for(v(k.length-1),r=k.length-2;0<=r;r--)x(r);else if("increasing"===r){for(r=1;r<k.length;r++)k[r]+=k[r-1];"exclude"===u&&(k.unshift(0),k.pop())}else{for(r=k.length-2;0<=r;r--)k[r]+=
k[r+1];"exclude"===u&&(k.push(0),k.shift())}}var h=b("fast-isnumeric"),a=b("../../lib"),g=b("../../registry"),e=b("../../plots/cartesian/axes"),n=b("../bar/arrays_to_calcdata"),p=b("./bin_functions"),c=b("./norm_functions"),d=b("./average"),f=b("./bin_label_vals");K.exports={calc:function(k,r){var u=[],v=[],x=e.getFromId(k,"h"===r.orientation?r.yaxis:r.xaxis),C="h"===r.orientation?"y":"x",z={x:"y",y:"x"}[C],y=r[C+"calendar"],D=r.cumulative,A=q(k,r,x,C),t=A[0];A=A[1];var B="string"===typeof t.size,
F=[],I=B?F:t,J=[],L=[],H=[],P=0,M=r.histnorm,N=r.histfunc,T=-1!==M.indexOf("density"),Q;D.enabled&&T&&(M=M.replace(/ ?density$/,""),T=!1);var U="max"===N||"min"===N?null:0,S=p.count;M=c[M];var X=!1;if(a.isArrayOrTypedArray(r[z])&&"count"!==N){var Z=r[z];X="avg"===N;S=p[N]}z=x.r2c(t.start,0,y);for(Q=x.r2c(t.end,0,y)+(z-e.tickIncrement(z,t.size,!1,y))/1E6;z<Q&&1E6>u.length;){N=e.tickIncrement(z,t.size,!1,y);u.push((z+N)/2);v.push(U);H.push([]);F.push(z);T&&J.push(1/(N-z));X&&L.push(0);if(N<=z)break;
z=N}F.push(z);B||"date"!==x.type||(I={start:x.r2c(I.start,0,y),end:x.r2c(I.end,0,y),size:I.size});k._fullLayout._roundFnOpts||(k._fullLayout._roundFnOpts={});var aa=r["_"+C+"bingroup"];U={leftGap:Infinity,rightGap:Infinity};aa&&(k._fullLayout._roundFnOpts[aa]||(k._fullLayout._roundFnOpts[aa]=U),U=k._fullLayout._roundFnOpts[aa]);N=v.length;C=!0;Q=U.leftGap;var fa=U.rightGap;B={};for(z=0;z<A.length;z++){var ha=A[z];T=a.findBin(ha,I);0<=T&&T<N&&(P+=S(T,z,v,Z,L),C&&H[T].length&&ha!==A[H[T][0]]&&(C=!1),
H[T].push(z),B[z]=T,Q=Math.min(Q,ha-F[T]),fa=Math.min(fa,F[T+1]-ha))}U.leftGap=Q;U.rightGap=fa;var ja;C||(ja=function(ba,ma){return function(){var qa=k._fullLayout._roundFnOpts[aa];return f(qa.leftGap,qa.rightGap,F,x,y)(ba,ma)}});X&&(P=d(v,L));M&&M(v,P,J);D.enabled&&l(v,D.direction,D.currentbin);J=Math.min(u.length,v.length);Z=[];L=0;I=J-1;for(z=0;z<J;z++)if(v[z]){L=z;break}for(z=J-1;z>=L;z--)if(v[z]){I=z;break}for(z=L;z<=I;z++)h(u[z])&&h(v[z])&&(J={p:u[z],s:v[z],b:0},D.enabled||(J.pts=H[z],C?J.ph0=
J.ph1=H[z].length?A[H[z][0]]:u[z]:(r._computePh=!0,J.ph0=ja(F[z]),J.ph1=ja(F[z+1],!0))),Z.push(J));1===Z.length&&(Z[0].width1=e.tickIncrement(Z[0].p,t.size,!1,y)-Z[0].p);n(Z,r);a.isArrayOrTypedArray(r.selectedpoints)&&a.tagSelected(Z,r,B);return Z},calcAllAutoBins:q}},{"../../lib":778,"../../plots/cartesian/axes":828,"../../registry":911,"../bar/arrays_to_calcdata":920,"./average":1085,"./bin_functions":1087,"./bin_label_vals":1088,"./norm_functions":1096,"fast-isnumeric":241}],1090:[function(b,K,
G){K.exports={eventDataKeys:["binNumber"]}},{}],1091:[function(b,K,G){var q=b("../../lib"),m=b("../../plots/cartesian/axis_ids"),l=b("../../registry").traceIs,h=b("../bar/defaults").handleGroupingDefaults,a=q.nestedProperty,g=b("../../plots/cartesian/constraints").getAxisGroup,e=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],n=["x","y"];K.exports=
function(p,c){function d(F,I){return q.coerce(z._input,z,z._module.attributes,F,I)}function f(F){return"v"===F.orientation?"x":"y"}function k(F,I,J){var L=F.uid+"__"+J;I||(I=L);var H=m.getFromTrace({_fullLayout:c},F,J).type;var P=F[J+"calendar"]||"",M=r[I],N=!0;M&&(H===M.axType&&P===M.calendar?(N=!1,M.traces.push(F),M.dirs.push(J)):(I=L,H!==M.axType&&q.warn(["Attempted to group the bins of trace",F.index,"set on a","type:"+H,"axis with bins on","type:"+M.axType,"axis."].join(" ")),P!==M.calendar&&
q.warn(["Attempted to group the bins of trace",F.index,"set with a",P,"calendar with bins",M.calendar?"on a "+M.calendar+" calendar":"w/o a set calendar"].join(" "))));N&&(r[I]={traces:[F],dirs:[J],axType:H,calendar:F[J+"calendar"]||""});F["_"+J+"bingroup"]=I}var r=c._histogramBinOpts={},u=[],v={},x=[],C;for(C=0;C<p.length;C++){var z=p[C];l(z,"histogram")&&(u.push(z),delete z._xautoBinFinished,delete z._yautoBinFinished,l(z,"2dMap")||h(z._input,z,c,d))}p=c._alignmentOpts||{};for(C=0;C<u.length;C++){z=
u[C];var y="";if(!l(z,"2dMap")){var D=f(z);if("group"===c.barmode&&z.alignmentgroup){var A=g(c,z[D+"axis"])+z.orientation;(p[A]||{})[z.alignmentgroup]&&(y=A)}y||"overlay"===c.barmode||(y=g(c,z.xaxis)+g(c,z.yaxis)+f(z))}y?(v[y]||(v[y]=[]),v[y].push(z)):x.push(z)}for(y in v)if(u=v[y],1===u.length)x.push(u[0]);else for(C=!1,u.length&&(z=u[0],C=d("bingroup")),y=C||y,C=0;C<u.length;C++)z=u[C],(p=z._input.bingroup)&&p!==y&&q.warn(["Trace",z.index,"must match within bingroup",y+".","Ignoring its bingroup:",
p,"setting."].join(" ")),z.bingroup=y,k(z,y,f(z));for(C=0;C<x.length;C++)if(z=x[C],v=d("bingroup"),l(z,"2dMap"))for(u=0;2>u;u++)D=n[u],p=d(D+"bingroup",v?v+"__"+D:null),k(z,p,D);else k(z,v,f(z));for(y in r)for(v=r[y],u=v.traces,x=0;x<e.length;x++)if(p=e[x],A=p.name,"nbins"!==A||!v.sizeFound){for(C=0;C<u.length;C++){z=u[C];D=v.dirs[C];var t=p.aStr[D];if(void 0!==a(z._input,t).get()){v[A]=d(t);v[A+"Found"]=!0;break}var B=(z._autoBin||{})[D]||{};B[A]&&a(z,t).set(B[A])}if("start"===A||"end"===A)for(;C<
u.length;C++)z=u[C],z["_"+D+"bingroup"]&&(B=(z._autoBin||{})[D]||{},d(t,B[A]));"nbins"!==A||v.sizeFound||v.nbinsFound||(z=u[0],v[A]=d(t))}}},{"../../lib":778,"../../plots/cartesian/axis_ids":831,"../../plots/cartesian/constraints":835,"../../registry":911,"../bar/defaults":925}],1092:[function(b,K,G){var q=b("../../registry"),m=b("../../lib"),l=b("../../components/color"),h=b("../bar/style_defaults"),a=b("./attributes");K.exports=function(g,e,n,p){function c(u,v){return m.coerce(g,e,a,u,v)}var d=
c("x"),f=c("y");c("cumulative.enabled")&&(c("cumulative.direction"),c("cumulative.currentbin"));c("text");c("hovertext");c("hovertemplate");var k=c("orientation",f&&!d?"h":"v"),r="v"===k?"x":"y";k="v"===k?"y":"x";(d=d&&f?Math.min(m.minRowLength(d)&&m.minRowLength(f)):m.minRowLength(e[r]||[]))?(e._length=d,q.getComponentMethod("calendars","handleTraceDefaults")(g,e,["x","y"],p),e[k]&&c("histfunc"),c("histnorm"),c("autobin"+r),h(g,e,c,n,p),m.coerceSelectionMarkerOpacity(e,c),n=(e.marker.line||{}).color,
p=q.getComponentMethod("errorbars","supplyDefaults"),p(g,e,n||l.defaultLine,{axis:"y"}),p(g,e,n||l.defaultLine,{axis:"x",inherit:"y"})):e.visible=!1}},{"../../components/color":643,"../../lib":778,"../../registry":911,"../bar/style_defaults":936,"./attributes":1084}],1093:[function(b,K,G){K.exports=function(q,m,l,h,a){q.x="xVal"in m?m.xVal:m.x;q.y="yVal"in m?m.yVal:m.y;"zLabelVal"in m&&(q.z=m.zLabelVal);m.xa&&(q.xaxis=m.xa);m.ya&&(q.yaxis=m.ya);if(!(l.cumulative||{}).enabled){m=Array.isArray(a)?h[0].pts[a[0]][a[1]]:
h[a].pts;q.pointNumbers=m;q.binNumber=q.pointNumber;delete q.pointNumber;delete q.pointIndex;if(l._indexToPoints)for(h=[],a=0;a<m.length;a++)h=h.concat(l._indexToPoints[m[a]]);else h=m;q.pointIndices=h}return q}},{}],1094:[function(b,K,G){var q=b("../bar/hover").hoverPoints,m=b("../../plots/cartesian/axes").hoverLabelText;K.exports=function(l,h,a,g){if(h=q(l,h,a,g))return l=h[0],a=l.cd[l.index],g=l.cd[0].trace,g.cumulative.enabled||(g="h"===g.orientation?"y":"x",l[g+"Label"]=m(l[g+"a"],a.ph0,a.ph1)),
h}},{"../../plots/cartesian/axes":828,"../bar/hover":928}],1095:[function(b,K,G){K.exports={attributes:b("./attributes"),layoutAttributes:b("../bar/layout_attributes"),supplyDefaults:b("./defaults"),crossTraceDefaults:b("./cross_trace_defaults"),supplyLayoutDefaults:b("../bar/layout_defaults"),calc:b("./calc").calc,crossTraceCalc:b("../bar/cross_trace_calc").crossTraceCalc,plot:b("../bar/plot").plot,layerName:"barlayer",style:b("../bar/style").style,styleOnSelect:b("../bar/style").styleOnSelect,colorbar:b("../scatter/marker_colorbar"),
hoverPoints:b("./hover"),selectPoints:b("../bar/select"),eventData:b("./event_data"),moduleType:"trace",name:"histogram",basePlotModule:b("../../plots/cartesian"),categories:"bar-like cartesian svg bar histogram oriented errorBarsOK showLegend".split(" "),meta:{}}},{"../../plots/cartesian":841,"../bar/cross_trace_calc":924,"../bar/layout_attributes":930,"../bar/layout_defaults":931,"../bar/plot":932,"../bar/select":933,"../bar/style":935,"../scatter/marker_colorbar":1205,"./attributes":1084,"./calc":1089,
"./cross_trace_defaults":1091,"./defaults":1092,"./event_data":1093,"./hover":1094}],1096:[function(b,K,G){K.exports={percent:function(q,m){var l=q.length;m=100/m;for(var h=0;h<l;h++)q[h]*=m},probability:function(q,m){for(var l=q.length,h=0;h<l;h++)q[h]/=m},density:function(q,m,l,h){m=q.length;h=h||1;for(var a=0;a<m;a++)q[a]=q[a]*l[a]*h},"probability density":function(q,m,l,h){var a=q.length;h&&(m/=h);for(h=0;h<a;h++)q[h]*=l[h]/m}}},{}],1097:[function(b,K,G){G=b("../histogram/attributes");var q=b("../histogram/bin_attributes"),
m=b("../heatmap/attributes"),l=b("../../plots/attributes"),h=b("../../plots/template_attributes").hovertemplateAttrs,a=b("../../components/colorscale/attributes");b=b("../../lib/extend").extendFlat;K.exports=b({x:G.x,y:G.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:G.histnorm,histfunc:G.histfunc,nbinsx:G.nbinsx,xbins:q("x"),nbinsy:G.nbinsy,ybins:q("y"),autobinx:G.autobinx,autobiny:G.autobiny,bingroup:b({},G.bingroup,{}),
xbingroup:b({},G.bingroup,{}),ybingroup:b({},G.bingroup,{}),xgap:m.xgap,ygap:m.ygap,zsmooth:m.zsmooth,zhoverformat:m.zhoverformat,hovertemplate:h({},{keys:"z"}),showlegend:b({},l.showlegend,{dflt:!1})},a("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,"../heatmap/attributes":1065,"../histogram/attributes":1084,"../histogram/bin_attributes":1086}],1098:[function(b,K,G){function q(d,
f,k,r){var u=Array(d);if(r)for(k=0;k<d;k++)u[k]=1/(f[k+1]-f[k]);else for(f=1/k,k=0;k<d;k++)u[k]=f;return u}function m(d,f){return{start:d(f.start),end:d(f.end),size:f.size}}function l(d,f,k,r,u,v){var x=d.length-1,C=Array(x);r=p(k,r,d,u,v);for(k=0;k<x;k++)u=(f||[])[k],C[k]=void 0===u?[r(d[k]),r(d[k+1],!0)]:[u,u];return C}var h=b("../../lib"),a=b("../../plots/cartesian/axes"),g=b("../histogram/bin_functions"),e=b("../histogram/norm_functions"),n=b("../histogram/average"),p=b("../histogram/bin_label_vals"),
c=b("../histogram/calc").calcAllAutoBins;K.exports=function(d,f){var k=a.getFromId(d,f.xaxis),r=a.getFromId(d,f.yaxis),u=f.xcalendar,v=f.ycalendar,x=function(sa){return k.r2c(sa,0,u)},C=function(sa){return r.r2c(sa,0,v)},z=c(d,f,k,"x");var y=z[0];z=z[1];d=c(d,f,r,"y");var D=d[0];d=d[1];var A=f._length;z.length>A&&z.splice(A,z.length-A);d.length>A&&d.splice(A,d.length-A);var t=[],B=[],F=[],I="string"===typeof y.size,J="string"===typeof D.size,L=[],H=[],P=I?L:y,M=J?H:D,N=0,T=[],Q=[],U=f.histnorm,S=
f.histfunc,X=-1!==U.indexOf("density"),Z="max"===S||"min"===S?null:0,aa=g.count;U=e[U];var fa=!1,ha=[],ja=[];(f="z"in f?f.z:"marker"in f&&Array.isArray(f.marker.color)?f.marker.color:"")&&"count"!==S&&(fa="avg"===S,aa=g[S]);S=y.size;var ba=x(y.start),ma=x(y.end)+(ba-a.tickIncrement(ba,S,!1,u))/1E6;for(y=ba;y<ma;y=a.tickIncrement(y,S,!1,u))B.push(Z),L.push(y),fa&&F.push(0);L.push(y);Z=B.length;S=(y-ba)/Z;ba=k.c2r(ba+S/2,0,u);var qa=D.size;ma=C(D.start);var ka=C(D.end)+(ma-a.tickIncrement(ma,qa,!1,
v))/1E6;for(y=ma;y<ka;y=a.tickIncrement(y,qa,!1,v)){t.push(B.slice());H.push(y);var oa=Array(Z);for(D=0;D<Z;D++)oa[D]=[];Q.push(oa);fa&&T.push(F.slice())}H.push(y);F=t.length;D=(y-ma)/F;ma=r.c2r(ma+D/2,0,v);X&&(ha=q(B.length,P,S,I),ja=q(t.length,M,D,J));I||"date"!==k.type||(P=m(x,P));J||"date"!==r.type||(M=m(C,M));I=B=!0;J=Array(Z);X=Array(F);var na=oa=ka=qa=Infinity;for(y=0;y<A;y++){var la=z[y],ia=d[y];x=h.findBin(la,P);C=h.findBin(ia,M);0<=x&&x<Z&&0<=C&&C<F&&(N+=aa(x,y,t[C],f,T[C]),Q[C][x].push(y),
B&&(void 0===J[x]?J[x]=la:J[x]!==la&&(B=!1)),I&&(void 0===X[C]?X[C]=ia:X[C]!==ia&&(I=!1)),qa=Math.min(qa,la-L[x]),ka=Math.min(ka,L[x+1]-la),oa=Math.min(oa,ia-H[C]),na=Math.min(na,H[C+1]-ia))}if(fa)for(C=0;C<F;C++)N+=n(t[C],T[C]);if(U)for(C=0;C<F;C++)U(t[C],N,ha,ja[C]);return{x:z,xRanges:l(L,B&&J,qa,ka,k,u),x0:ba,dx:S,y:d,yRanges:l(H,I&&X,oa,na,r,v),y0:ma,dy:D,z:t,pts:Q}}},{"../../lib":778,"../../plots/cartesian/axes":828,"../histogram/average":1085,"../histogram/bin_functions":1087,"../histogram/bin_label_vals":1088,
"../histogram/calc":1089,"../histogram/norm_functions":1096}],1099:[function(b,K,G){var q=b("../../lib"),m=b("./sample_defaults"),l=b("../heatmap/style_defaults"),h=b("../../components/colorscale/defaults"),a=b("./attributes");K.exports=function(g,e,n,p){function c(d,f){return q.coerce(g,e,a,d,f)}m(g,e,c,p);!1!==e.visible&&(l(g,e,c,p),h(g,e,p,c,{prefix:"",cLetter:"z"}),c("hovertemplate"))}},{"../../components/colorscale/defaults":653,"../../lib":778,"../heatmap/style_defaults":1078,"./attributes":1097,
"./sample_defaults":1102}],1100:[function(b,K,G){var q=b("../heatmap/hover"),m=b("../../plots/cartesian/axes").hoverLabelText;K.exports=function(l,h,a,g,e,n){if(h=q(l,h,a,g,e,n))return l=h[0],g=l.index,e=l.cd[0],a=e.xRanges[g[1]],g=e.yRanges[g[0]],l.xLabel=m(l.xa,a[0],a[1]),l.yLabel=m(l.ya,g[0],g[1]),h}},{"../../plots/cartesian/axes":828,"../heatmap/hover":1072}],1101:[function(b,K,G){K.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),crossTraceDefaults:b("../histogram/cross_trace_defaults"),
calc:b("../heatmap/calc"),plot:b("../heatmap/plot"),layerName:"heatmaplayer",colorbar:b("../heatmap/colorbar"),style:b("../heatmap/style"),hoverPoints:b("./hover"),eventData:b("../histogram/event_data"),moduleType:"trace",name:"histogram2d",basePlotModule:b("../../plots/cartesian"),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":841,"../heatmap/calc":1066,"../heatmap/colorbar":1068,"../heatmap/plot":1076,"../heatmap/style":1077,"../histogram/cross_trace_defaults":1091,
"../histogram/event_data":1093,"./attributes":1097,"./defaults":1099,"./hover":1100}],1102:[function(b,K,G){var q=b("../../registry"),m=b("../../lib");K.exports=function(l,h,a,g){var e=a("x"),n=a("y");e=m.minRowLength(e);n=m.minRowLength(n);e&&n?(h._length=Math.min(e,n),q.getComponentMethod("calendars","handleTraceDefaults")(l,h,["x","y"],g),(a("z")||a("marker.color"))&&a("histfunc"),a("histnorm"),a("autobinx"),a("autobiny")):h.visible=!1}},{"../../lib":778,"../../registry":911}],1103:[function(b,
K,G){G=b("../histogram2d/attributes");var q=b("../contour/attributes"),m=b("../../components/colorscale/attributes");b=b("../../lib/extend").extendFlat;K.exports=b({x:G.x,y:G.y,z:G.z,marker:G.marker,histnorm:G.histnorm,histfunc:G.histfunc,nbinsx:G.nbinsx,xbins:G.xbins,nbinsy:G.nbinsy,ybins:G.ybins,autobinx:G.autobinx,autobiny:G.autobiny,bingroup:G.bingroup,xbingroup:G.xbingroup,ybingroup:G.ybingroup,autocontour:q.autocontour,ncontours:q.ncontours,contours:q.contours,line:{color:q.line.color,width:b({},
q.line.width,{dflt:.5}),dash:q.line.dash,smoothing:q.line.smoothing,editType:"plot"},zhoverformat:G.zhoverformat,hovertemplate:G.hovertemplate},m("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../contour/attributes":1008,"../histogram2d/attributes":1097}],1104:[function(b,K,G){var q=b("../../lib"),m=b("../histogram2d/sample_defaults"),l=b("../contour/contours_defaults"),h=b("../contour/style_defaults"),a=b("./attributes");K.exports=
function(g,e,n,p){function c(d,f){return q.coerce(g,e,a,d,f)}m(g,e,c,p);!1!==e.visible&&(l(g,e,c,function(d){return q.coerce2(g,e,a,d)}),h(g,e,c,p),c("hovertemplate"))}},{"../../lib":778,"../contour/contours_defaults":1015,"../contour/style_defaults":1029,"../histogram2d/sample_defaults":1102,"./attributes":1103}],1105:[function(b,K,G){K.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),crossTraceDefaults:b("../histogram/cross_trace_defaults"),calc:b("../contour/calc"),plot:b("../contour/plot").plot,
layerName:"contourlayer",style:b("../contour/style"),colorbar:b("../contour/colorbar"),hoverPoints:b("../contour/hover"),moduleType:"trace",name:"histogram2dcontour",basePlotModule:b("../../plots/cartesian"),categories:"cartesian svg 2dMap contour histogram showLegend".split(" "),meta:{}}},{"../../plots/cartesian":841,"../contour/calc":1009,"../contour/colorbar":1011,"../contour/hover":1021,"../contour/plot":1026,"../contour/style":1028,"../histogram/cross_trace_defaults":1091,"./attributes":1103,
"./defaults":1104}],1106:[function(b,K,G){G=b("../../plots/attributes");var q=b("../../plots/template_attributes").hovertemplateAttrs,m=b("../../lib/extend").extendFlat;b=b("./constants").colormodel;for(var l=["rgb","rgba","rgba256","hsl","hsla"],h=[],a=[],g=0;g<l.length;g++){var e=b[l[g]];h.push("For the `"+l[g]+"` colormodel, it is ["+(e.zminDflt||e.min).join(", ")+"].");a.push("For the `"+l[g]+"` colormodel, it is ["+(e.zmaxDflt||e.max).join(", ")+"].")}K.exports=m({source:{valType:"string",editType:"calc"},
z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:l,editType:"calc"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",
dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:m({},G.hoverinfo,{flags:"x y z color name text".split(" "),dflt:"x+y+z+text+name"}),hovertemplate:q({},{keys:["z","color","colormodel"]}),transforms:void 0})},{"../../lib/extend":768,"../../plots/attributes":824,
"../../plots/template_attributes":906,"./constants":1108}],1107:[function(b,K,G){function q(c,d,f,k){return function(r){return h.constrain((r-c)*d,f,k)}}function m(c,d){return function(f){return h.constrain(f,c,d)}}function l(c){var d=a.colormodel[c.colormodel],f=(d.colormodel||c.colormodel).length;c._sArray=[];for(var k=0;k<f;k++)d.min[k]!==c.zmin[k]||d.max[k]!==c.zmax[k]?c._sArray.push(q(c.zmin[k],(d.max[k]-d.min[k])/(c.zmax[k]-c.zmin[k]),d.min[k],d.max[k])):c._sArray.push(m(d.min[k],d.max[k]));
return function(r){r=r.slice(0,f);for(var u=0;u<f;u++){var v=r[u];if(!g(v))return!1;r[u]=c._sArray[u](v)}return r}}var h=b("../../lib"),a=b("./constants"),g=b("fast-isnumeric"),e=b("../../plots/cartesian/axes"),n=b("../../lib").maxRowLength,p=b("./helpers").getImageSize;K.exports=function(c,d){if(d._hasZ){var f=d.z.length;var k=n(d.z)}else d._hasSource&&(k=p(d.source),f=k.height,k=k.width);var r=e.getFromId(c,d.xaxis||"x");c=e.getFromId(c,d.yaxis||"y");var u=r.d2c(d.x0)-d.dx/2,v=c.d2c(d.y0)-d.dy/
2,x,C=[u,u+k*d.dx],z=[v,v+f*d.dy];if(r&&"log"===r.type)for(x=0;x<k;x++)C.push(u+x*d.dx);if(c&&"log"===c.type)for(x=0;x<f;x++)z.push(v+x*d.dy);d._extremes[r._id]=e.findExtremes(r,C);d._extremes[c._id]=e.findExtremes(c,z);d._scaler=l(d);return[{x0:u,y0:v,z:d.z,w:k,h:f}]}},{"../../lib":778,"../../plots/cartesian/axes":828,"./constants":1108,"./helpers":1111,"fast-isnumeric":241}],1108:[function(b,K,G){K.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(q){return q.slice(0,3)},suffix:["",
"",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(q){return q.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(q){return q.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(q){q=q.slice(0,3);q[1]+="%";q[2]+="%";return q},suffix:["\u00b0","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(q){q=q.slice(0,4);q[1]+="%";q[2]+="%";return q},suffix:["\u00b0",
"%","%",""]}}}},{}],1109:[function(b,K,G){var q=b("../../lib"),m=b("./attributes"),l=b("./constants"),h=b("../../snapshot/helpers").IMAGE_URL_PREFIX;K.exports=function(a,g){function e(p,c){return q.coerce(a,g,m,p,c)}e("source");g.source&&!g.source.match(h)&&delete g.source;g._hasSource=!!g.source;var n=e("z");g._hasZ=!(void 0===n||!n.length||!n[0]||!n[0].length);g._hasZ||g._hasSource?(e("x0"),e("y0"),e("dx"),e("dy"),g._hasZ?(e("colormodel","rgb"),n=l.colormodel[g.colormodel],e("zmin",n.zminDflt||
n.min),e("zmax",n.zmaxDflt||n.max)):g._hasSource&&(g.colormodel="rgba256",n=l.colormodel[g.colormodel],g.zmin=n.zminDflt,g.zmax=n.zmaxDflt),e("text"),e("hovertext"),e("hovertemplate"),g._length=null):g.visible=!1}},{"../../lib":778,"../../snapshot/helpers":915,"./attributes":1106,"./constants":1108}],1110:[function(b,K,G){K.exports=function(q,m){"xVal"in m&&(q.x=m.xVal);"yVal"in m&&(q.y=m.yVal);m.xa&&(q.xaxis=m.xa);m.ya&&(q.yaxis=m.ya);q.color=m.color;q.colormodel=m.trace.colormodel;q.z||(q.z=m.color);
return q}},{}],1111:[function(b,K,G){var q=b("image-size"),m=b("../../snapshot/helpers").IMAGE_URL_PREFIX,l=b("buffer/").Buffer;G.getImageSize=function(h){h=h.replace(m,"");h=new l(h,"base64");return q(h)}},{"../../snapshot/helpers":915,"buffer/":111,"image-size":444}],1112:[function(b,K,G){var q=b("../../components/fx"),m=b("../../lib"),l=b("./constants");K.exports=function(h,a,g){var e=h.cd[0],n=e.trace,p=h.xa,c=h.ya;if(!(0<q.inbox(a-e.x0,a-(e.x0+e.w*n.dx),0)||0<q.inbox(g-e.y0,g-(e.y0+e.h*n.dy),
0))){a=Math.floor((a-e.x0)/n.dx);g=Math.floor(Math.abs(g-e.y0)/n.dy);if(n._hasZ)var d=e.z[g][a];else n._hasSource&&(d=n._canvas.el.getContext("2d").getImageData(a,g,1,1).data);if(d){var f=e.hi||n.hoverinfo,k;f&&(f=f.split("+"),-1!==f.indexOf("all")&&(f=["color"]),-1!==f.indexOf("color")&&(k=!0));var r=l.colormodel[n.colormodel],u=r.colormodel||n.colormodel,v=u.length;f=n._scaler(d);r=r.suffix;var x=[];if(n.hovertemplate||k)x.push("["+[f[0]+r[0],f[1]+r[1],f[2]+r[2]].join(", ")),4===v&&x.push(", "+
f[3]+r[3]),x.push("]"),x=x.join(""),h.extraText=u.toUpperCase()+": "+x;var C;Array.isArray(n.hovertext)&&Array.isArray(n.hovertext[g])?C=n.hovertext[g][a]:Array.isArray(n.text)&&Array.isArray(n.text[g])&&(C=n.text[g][a]);c=c.c2p(e.y0+(g+.5)*n.dy);k=e.x0+(a+.5)*n.dx;u=e.y0+(g+.5)*n.dy;d="["+d.slice(0,n.colormodel.length).join(", ")+"]";return[m.extendFlat(h,{index:[g,a],x0:p.c2p(e.x0+a*n.dx),x1:p.c2p(e.x0+(a+1)*n.dx),y0:c,y1:c,color:f,xVal:k,xLabelVal:k,yVal:u,yLabelVal:u,zLabelVal:d,text:C,hovertemplateLabels:{zLabel:d,
colorLabel:x,"color[0]Label":f[0]+r[0],"color[1]Label":f[1]+r[1],"color[2]Label":f[2]+r[2],"color[3]Label":f[3]+r[3]}})]}}}},{"../../components/fx":683,"../../lib":778,"./constants":1108}],1113:[function(b,K,G){K.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc"),plot:b("./plot"),style:b("./style"),hoverPoints:b("./hover"),eventData:b("./event_data"),moduleType:"trace",name:"image",basePlotModule:b("../../plots/cartesian"),categories:["cartesian","svg","2dMap","noSortingByValue"],
animatable:!1,meta:{}}},{"../../plots/cartesian":841,"./attributes":1106,"./calc":1107,"./defaults":1109,"./event_data":1110,"./hover":1112,"./plot":1114,"./style":1115}],1114:[function(b,K,G){var q=b("d3"),m=b("../../lib"),l=m.strTranslate,h=b("../../constants/xmlns_namespaces"),a=b("./constants"),g=m.isIOS()||m.isSafari()||m.isIE();K.exports=function(e,n,p,c){var d=n.xaxis,f=n.yaxis,k=!(g||e._context._exportedPlot);m.makeTraceGroups(c,p,"im").each(function(r){function u(S){var X=document.createElement("canvas");
X.width=T;X.height=Q;var Z=X.getContext("2d"),aa=function(la){return m.constrain(Math.round(d.c2p(D+la*F)-L),0,T)},fa=function(la){return m.constrain(Math.round(f.c2p(A+la*I)-P),0,Q)},ha=a.colormodel[C.colormodel],ja=ha.colormodel||C.colormodel;ha=ha.fmt;for(J=0;J<x.w;J++){var ba=aa(J),ma=aa(J+1);if(ma!==ba&&!isNaN(ma)&&!isNaN(ba))for(var qa=0;qa<x.h;qa++){var ka=fa(qa),oa=fa(qa+1);if(oa!==ka&&!isNaN(oa)&&!isNaN(ka)&&S(J,qa)){var na=C._scaler(S(J,qa));Z.fillStyle=na?ja+"("+ha(na).join(",")+")":"rgba(0,0,0,0)";
Z.fillRect(ba,ka,ma-ba,oa-ka)}}}return X}var v=q.select(this),x=r[0],C=x.trace,z=k&&!C._hasZ&&C._hasSource&&"linear"===d.type&&"linear"===f.type;C._fastImage=z;var y=x.z,D=x.x0,A=x.y0,t=x.w,B=x.h,F=C.dx,I=C.dy,J;for(J=0;void 0===L&&J<t;){var L=d.c2p(D+J*F);J++}for(J=t;void 0===H&&0<J;){var H=d.c2p(D+J*F);J--}for(J=0;void 0===P&&J<B;){var P=f.c2p(A+J*I);J++}for(J=B;void 0===M&&0<J;){var M=f.c2p(A+J*I);J--}if(H<L){var N=H;H=L;L=N}M<P&&(N=P,P=M,M=N);z||(L=Math.max(-.5*d._length,L),H=Math.min(1.5*d._length,
H),P=Math.max(-.5*f._length,P),M=Math.min(1.5*f._length,M));var T=Math.round(H-L),Q=Math.round(M-P);if(0>=T||0>=Q)v.selectAll("image").data([]).exit().remove();else{var U=v.selectAll("image").data([r]);U.enter().append("svg:image").attr({xmlns:h.svg,preserveAspectRatio:"none"});U.exit().remove();r="image-rendering: optimizeSpeed; image-rendering: -moz-crisp-edges; image-rendering: -o-crisp-edges; image-rendering: -webkit-optimize-contrast; image-rendering: optimize-contrast; image-rendering: crisp-edges; image-rendering: pixelated;";
z&&(v=m.simpleMap(d.range,d.r2l),H=m.simpleMap(f.range,f.r2l),v=v[1]<v[0],H=H[1]>H[0],v||H)&&(N=L+T/2,M=P+Q/2,r+="transform:"+l(N+"px",M+"px")+"scale("+(v?-1:1)+","+(H?-1:1)+")"+l(-N+"px",-M+"px")+";");U.attr("style",r);r=(new Promise(function(S){if(C._hasZ)S();else if(C._hasSource)if(C._canvas&&C._canvas.el.width===t&&C._canvas.el.height===B&&C._canvas.source===C.source)S();else{var X=document.createElement("canvas");X.width=t;X.height=B;var Z=X.getContext("2d");C._image=C._image||new Image;var aa=
C._image;aa.onload=function(){Z.drawImage(aa,0,0);C._canvas={el:X,source:C.source};S()};aa.setAttribute("src",C.source)}})).then(function(){if(C._hasZ){var S=u(function(Z,aa){return y[aa][Z]});S=S.toDataURL("image/png")}else if(C._hasSource)if(z)S=C.source;else{var X=C._canvas.el.getContext("2d").getImageData(0,0,t,B).data;S=u(function(Z,aa){Z=4*(aa*t+Z);return[X[Z],X[Z+1],X[Z+2],X[Z+3]]});S=S.toDataURL("image/png")}U.attr({"xlink:href":S,height:Q,width:T,x:L,y:P})});e._promises.push(r)}})}},{"../../constants/xmlns_namespaces":754,
"../../lib":778,"./constants":1108,d3:169}],1115:[function(b,K,G){var q=b("d3");K.exports=function(m){q.select(m).selectAll(".im image").style("opacity",function(l){return l[0].trace.opacity})}},{d3:169}],1116:[function(b,K,G){G=b("../../lib/extend").extendFlat;var q=b("../../lib/extend").extendDeep,m=b("../../plot_api/edit_types").overrideAll,l=b("../../plots/font_attributes"),h=b("../../components/color/attributes"),a=b("../../plots/domain").attributes,g=b("../../plots/cartesian/layout_attributes"),
e=b("../../plot_api/plot_template").templatedArray,n=b("../../constants/delta.js");b("../../constants/docs");b=l({editType:"plot",colorEditType:"plot"});var p={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:h.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},c={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",
editType:"plot"}],editType:"plot"};e=e("step",q({},p,{range:c}));K.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:a({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:G({},b,{}),editType:"plot"},
number:{valueformat:{valType:"string",dflt:"",editType:"plot"},font:G({},b,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot"},increasing:{symbol:{valType:"string",dflt:n.INCREASING.SYMBOL,
editType:"plot"},color:{valType:"color",dflt:n.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:n.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:n.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:G({},b,{}),editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:q({},p,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:h.defaultLine,
editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:m({range:c,visible:G({},g.visible,{dflt:!0}),tickmode:g.tickmode,nticks:g.nticks,tick0:g.tick0,dtick:g.dtick,tickvals:g.tickvals,ticktext:g.ticktext,ticks:G({},g.ticks,{dflt:"outside"}),ticklen:g.ticklen,tickwidth:g.tickwidth,tickcolor:g.tickcolor,showticklabels:g.showticklabels,tickfont:l({}),tickangle:g.tickangle,tickformat:g.tickformat,tickformatstops:g.tickformatstops,tickprefix:g.tickprefix,showtickprefix:g.showtickprefix,
ticksuffix:g.ticksuffix,showticksuffix:g.showticksuffix,separatethousands:g.separatethousands,exponentformat:g.exponentformat,minexponent:g.minexponent,showexponent:g.showexponent,editType:"plot"},"plot"),steps:e,threshold:{line:{color:G({},p.line.color,{}),width:G({},p.line.width,{dflt:1}),editType:"plot"},thickness:G({},p.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},{"../../components/color/attributes":642,"../../constants/delta.js":747,
"../../constants/docs":748,"../../lib/extend":768,"../../plot_api/edit_types":810,"../../plot_api/plot_template":817,"../../plots/cartesian/layout_attributes":842,"../../plots/domain":855,"../../plots/font_attributes":856}],1117:[function(b,K,G){var q=b("../../plots/plots");G.name="indicator";G.plot=function(m,l,h,a){q.plotBasePlot(G.name,m,l,h,a)};G.clean=function(m,l,h,a){q.cleanBasePlot(G.name,m,l,h,a)}},{"../../plots/plots":891}],1118:[function(b,K,G){K.exports={calc:function(q,m){q=[];var l=
m.value;"number"!==typeof m._lastValue&&(m._lastValue=m.value);var h=m._lastValue,a=h;m._hasDelta&&"number"===typeof m.delta.reference&&(a=m.delta.reference);q[0]={y:l,lastY:h,delta:l-a,relativeDelta:(l-a)/a};return q}}},{}],1119:[function(b,K,G){K.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},{}],1120:[function(b,K,G){function q(d,f){function k(r,u){return m.coerce(d,f,l.gauge.steps,r,u)}k("color");
k("line.color");k("line.width");k("range");k("thickness")}var m=b("../../lib"),l=b("./attributes"),h=b("../../plots/domain").defaults,a=b("../../plot_api/plot_template"),g=b("../../plots/array_container_defaults"),e=b("./constants.js"),n=b("../../plots/cartesian/tick_value_defaults"),p=b("../../plots/cartesian/tick_mark_defaults"),c=b("../../plots/cartesian/tick_label_defaults");K.exports={supplyDefaults:function(d,f,k,r){function u(B,F){return m.coerce(d,f,l,B,F)}function v(B,F){return m.coerce(y,
D,l.gauge,B,F)}function x(B,F){return m.coerce(A,t,l.gauge.axis,B,F)}h(f,r,u);u("mode");f._hasNumber=-1!==f.mode.indexOf("number");f._hasDelta=-1!==f.mode.indexOf("delta");f._hasGauge=-1!==f.mode.indexOf("gauge");k=u("value");f._range=[0,"number"===typeof k?1.5*k:1];k=Array(2);if(f._hasNumber){u("number.valueformat");u("number.font.color",r.font.color);u("number.font.family",r.font.family);u("number.font.size");void 0===f.number.font.size&&(f.number.font.size=e.defaultNumberFontSize,k[0]=!0);u("number.prefix");
u("number.suffix");var C=f.number.font.size}if(f._hasDelta){u("delta.font.color",r.font.color);u("delta.font.family",r.font.family);u("delta.font.size");void 0===f.delta.font.size&&(f.delta.font.size=(f._hasNumber?.5:1)*(C||e.defaultNumberFontSize),k[1]=!0);u("delta.reference",f.value);u("delta.relative");u("delta.valueformat",f.delta.relative?"2%":"");u("delta.increasing.symbol");u("delta.increasing.color");u("delta.decreasing.symbol");u("delta.decreasing.color");u("delta.position");var z=f.delta.font.size}f._scaleNumbers=
(!f._hasNumber||k[0])&&(!f._hasDelta||k[1])||!1;u("title.font.color",r.font.color);u("title.font.family",r.font.family);u("title.font.size",.25*(C||z||e.defaultNumberFontSize));u("title.text");var y;if(f._hasGauge){(y=d.gauge)||(y={});var D=a.newContainer(f,"gauge");v("shape");(f._isBullet="bullet"===f.gauge.shape)||u("title.align","center");(f._isAngular="angular"===f.gauge.shape)||u("align","center");v("bgcolor",r.paper_bgcolor);v("borderwidth");v("bordercolor");v("bar.color");v("bar.line.color");
v("bar.line.width");v("bar.thickness",e.valueThickness*("bullet"===f.gauge.shape?.5:1));g(y,D,{name:"steps",handleItemDefaults:q});v("threshold.value");v("threshold.thickness");v("threshold.line.width");v("threshold.line.color");var A={};y&&(A=y.axis||{});var t=a.newContainer(D,"axis");x("visible");f._range=x("range",f._range);r={outerTicks:!0};n(A,t,x,"linear");c(A,t,x,"linear",r);p(A,t,x,r)}else u("title.align","center"),u("align","center"),f._isAngular=f._isBullet=!1;f._length=null}}},{"../../lib":778,
"../../plot_api/plot_template":817,"../../plots/array_container_defaults":823,"../../plots/cartesian/tick_label_defaults":849,"../../plots/cartesian/tick_mark_defaults":850,"../../plots/cartesian/tick_value_defaults":851,"../../plots/domain":855,"./attributes":1116,"./constants.js":1119}],1121:[function(b,K,G){K.exports={moduleType:"trace",name:"indicator",basePlotModule:b("./base_plot"),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:b("./attributes"),supplyDefaults:b("./defaults").supplyDefaults,
calc:b("./calc").calc,plot:b("./plot"),meta:{}}},{"./attributes":1116,"./base_plot":1117,"./calc":1118,"./defaults":1120,"./plot":1122}],1122:[function(b,K,G){function q(J,L,H,P){function M(ma){ma.attr("width",function(qa){return Math.max(0,ja.c2p(qa.range[1])-ja.c2p(qa.range[0]))}).attr("x",function(qa){return ja.c2p(qa.range[0])}).attr("y",function(qa){return.5*(1-qa.thickness)*fa}).attr("height",function(qa){return qa.thickness*fa})}var N=H[0].trace;L=P.gauge;var T=P.layer,Q=P.gaugeBg,U=P.gaugeOutline,
S=P.size,X=N.domain,Z=P.transitionOpts,aa=P.onComplete;L.enter().append("g").classed("bullet",!0);L.attr("transform",k(S.l,S.t));T.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0);T.selectAll("g.xbulletaxistick,path,text").remove();var fa=S.h;P=N.gauge.bar.thickness*fa;var ha=X.x[0];X=X.x[0]+(X.x[1]-X.x[0])*(N._hasNumber||N._hasDelta?1-x.bulletNumberDomainSize:1);var ja=g(J,N.gauge.axis);ja._id="xbulletaxis";ja.domain=[ha,X];ja.setScale();X=z.calcTicks(ja);ha=z.makeTransTickFn(ja);
var ba=z.getTickSigns(ja)[2];S=S.t+S.h;ja.visible&&(z.drawTicks(J,ja,{vals:"inside"===ja.ticks?z.clipEnds(ja,X):X,layer:T,path:z.makeTickPath(ja,S,ba),transFn:ha}),z.drawLabels(J,ja,{vals:X,layer:T,transFn:ha,labelFns:z.makeLabelFns(ja,S)}));J=[Q].concat(N.gauge.steps);J=L.selectAll("g.bg-bullet").data(J);J.enter().append("g").classed("bg-bullet",!0).append("rect");J.select("rect").call(M).call(h);J.exit().remove();J=L.selectAll("g.value-bullet").data([N.gauge.bar]);J.enter().append("g").classed("value-bullet",
!0).append("rect");J.select("rect").attr("height",P).attr("y",(fa-P)/2).call(h);Z&&0<Z.duration?J.select("rect").transition().duration(Z.duration).ease(Z.easing).each("end",function(){aa&&aa()}).each("interrupt",function(){aa&&aa()}).attr("width",Math.max(0,ja.c2p(Math.min(N.gauge.axis.range[1],H[0].y)))):J.select("rect").attr("width","number"===typeof H[0].y?Math.max(0,ja.c2p(Math.min(N.gauge.axis.range[1],H[0].y))):0);J.exit().remove();H=H.filter(function(){return N.gauge.threshold.value});H=L.selectAll("g.threshold-bullet").data(H);
H.enter().append("g").classed("threshold-bullet",!0).append("line");H.select("line").attr("x1",ja.c2p(N.gauge.threshold.value)).attr("x2",ja.c2p(N.gauge.threshold.value)).attr("y1",(1-N.gauge.threshold.thickness)/2*fa).attr("y2",(1-(1-N.gauge.threshold.thickness)/2)*fa).call(t.stroke,N.gauge.threshold.line.color).style("stroke-width",N.gauge.threshold.line.width);H.exit().remove();L=L.selectAll("g.gauge-outline").data([U]);L.enter().append("g").classed("gauge-outline",!0).append("rect");L.select("rect").call(M).call(h);
L.exit().remove()}function m(J,L,H,P){function M(ta){var Aa=Q.gauge.axis.range[0];ta=(ta-Aa)/(Q.gauge.axis.range[1]-Aa)*Math.PI-ba;return ta<-ba?-ba:ta>ba?ba:ta}function N(ta){return c.svg.arc().innerRadius((X+S)/2-ta/2*(S-X)).outerRadius((X+S)/2+ta/2*(S-X)).startAngle(-ba)}function T(ta){ta.attr("d",function(Aa){return N(Aa.thickness).startAngle(M(Aa.range[0])).endAngle(M(Aa.range[1]))()})}var Q=H[0].trace,U=P.size,S=P.radius,X=P.innerRadius,Z=P.gaugeBg;L=P.gaugeOutline;var aa=[U.l+U.w/2,U.t+U.h/
2+S/2];U=P.gauge;var fa=P.layer,ha=P.transitionOpts,ja=P.onComplete,ba=Math.PI/2;U.enter().append("g").classed("angular",!0);U.attr("transform",k(aa[0],aa[1]));fa.enter().append("g").classed("angularaxis",!0).classed("crisp",!0);fa.selectAll("g.xangularaxistick,path,text").remove();var ma=g(J,Q.gauge.axis);ma.type="linear";ma.range=Q.gauge.axis.range;ma._id="xangularaxis";ma.setScale();var qa=function(ta){return(ma.range[0]-ta.x)/(ma.range[1]-ma.range[0])*Math.PI+Math.PI},ka={},oa=z.makeLabelFns(ma,
0).labelStandoff;ka.xFn=function(ta){ta=qa(ta);return Math.cos(ta)*oa};ka.yFn=function(ta){var Aa=qa(ta);return-Math.sin(Aa)*(oa+ta.fontSize*(0<Math.sin(Aa)?.2:1))+Math.abs(Math.cos(Aa))*ta.fontSize*u};ka.anchorFn=function(ta){ta=qa(ta);ta=Math.cos(ta);return.1>Math.abs(ta)?"middle":0<ta?"start":"end"};ka.heightFn=function(ta,Aa,Ka){ta=qa(ta);return-.5*(1+Math.sin(ta))*Ka};var na=function(ta){return k(aa[0]+S*Math.cos(ta),aa[1]-S*Math.sin(ta))};var la=function(ta){return na(qa(ta))};var ia=function(ta){ta=
qa(ta);return na(ta)+"rotate("+-r(ta)+")"};P=z.calcTicks(ma);var sa=z.getTickSigns(ma)[2];ma.visible&&(sa="inside"===ma.ticks?-1:1,z.drawTicks(J,ma,{vals:P,layer:fa,path:"M"+(ma.linewidth||1)/2*sa+",0h"+sa*ma.ticklen,transFn:ia}),z.drawLabels(J,ma,{vals:P,layer:fa,transFn:la,labelFns:ka}));J=[Z].concat(Q.gauge.steps);J=U.selectAll("g.bg-arc").data(J);J.enter().append("g").classed("bg-arc",!0).append("path");J.select("path").call(T).call(h);J.exit().remove();J=N(Q.gauge.bar.thickness);Z=U.selectAll("g.value-arc").data([Q.gauge.bar]);
Z.enter().append("g").classed("value-arc",!0).append("path");fa=Z.select("path");ha&&0<ha.duration?(fa.transition().duration(ha.duration).ease(ha.easing).each("end",function(){ja&&ja()}).each("interrupt",function(){ja&&ja()}).attrTween("d",a(J,M(H[0].lastY),M(H[0].y))),Q._lastValue=H[0].y):fa.attr("d","number"===typeof H[0].y?J.endAngle(M(H[0].y)):"M0,0Z");fa.call(h);Z.exit().remove();J=[];(H=Q.gauge.threshold.value)&&J.push({range:[H,H],color:Q.gauge.threshold.color,line:{color:Q.gauge.threshold.line.color,
width:Q.gauge.threshold.line.width},thickness:Q.gauge.threshold.thickness});H=U.selectAll("g.threshold-arc").data(J);H.enter().append("g").classed("threshold-arc",!0).append("path");H.select("path").call(T).call(h);H.exit().remove();L=U.selectAll("g.gauge-outline").data([L]);L.enter().append("g").classed("gauge-outline",!0).append("path");L.select("path").call(T).call(h);L.exit().remove()}function l(J,L,H,P){function M(sa,ta,Aa,Ka){if(!sa.match("s")||0<=Aa===0<=Ka||ta(Aa).slice(-1).match(I)||ta(Ka).slice(-1).match(I))return ta;
sa=sa.slice().replace("s","f").replace(/\d+/,function(db){return parseInt(db)-1});var Sa=g(J,{tickformat:sa});return function(db){return 1>Math.abs(db)?z.tickText(Sa,db).text:ta(db)}}function N(){function sa(){var eb="number"===typeof H[0].y?Sa+Aa(H[0].y)+Ka:"-";db.text(eb).call(v.font,Q.number.font).call(C.convertToTspans,J)}var ta=g(J,{tickformat:Q.number.valueformat},Q._range);ta.setScale();z.prepTicks(ta);var Aa=function(eb){return z.tickText(ta,eb).text},Ka=Q.number.suffix,Sa=Q.number.prefix,
db=ha.select("text.number");aa&&0<aa.duration?db.transition().duration(aa.duration).ease(aa.easing).each("end",function(){sa();fa&&fa()}).each("interrupt",function(){sa();fa&&fa()}).attrTween("text",function(){var eb=c.select(this),lb=c.interpolateNumber(H[0].lastY,H[0].y);Q._lastValue=H[0].y;var ab=M(Q.number.valueformat,Aa,H[0].lastY,H[0].y);return function(Ya){eb.text(Sa+ab(lb(Ya))+Ka)}}):sa();ja=n(Sa+Aa(H[0].y)+Ka,Q.number.font,Z,J);return db}function T(){function sa(){eb.text(Sa(Ka(H[0]),Aa)).call(t.fill,
db(H[0])).call(C.convertToTspans,J)}var ta=g(J,{tickformat:Q.delta.valueformat},Q._range);ta.setScale();z.prepTicks(ta);var Aa=function(lb){return z.tickText(ta,lb).text},Ka=function(lb){return Q.delta.relative?lb.relativeDelta:lb.delta},Sa=function(lb,ab){return 0===lb||"number"!==typeof lb||isNaN(lb)?"-":(0<lb?Q.delta.increasing.symbol:Q.delta.decreasing.symbol)+ab(lb)},db=function(lb){return 0<=lb.delta?Q.delta.increasing.color:Q.delta.decreasing.color};void 0===Q._deltaLastValue&&(Q._deltaLastValue=
Ka(H[0]));var eb=ha.select("text.delta");eb.call(v.font,Q.delta.font).call(t.fill,db({delta:Q._deltaLastValue}));aa&&0<aa.duration?eb.transition().duration(aa.duration).ease(aa.easing).tween("text",function(){var lb=c.select(this),ab=Ka(H[0]),Ya=Q._deltaLastValue,hb=M(Q.delta.valueformat,Aa,Ya,ab),nb=c.interpolateNumber(Ya,ab);Q._deltaLastValue=ab;return function(va){lb.text(Sa(nb(va),hb));lb.call(t.fill,db({delta:nb(va)}))}}).each("end",function(){sa();fa&&fa()}).each("interrupt",function(){sa();
fa&&fa()}):sa();ba=n(Sa(Ka(H[0]),Aa),Q.delta.font,Z,J);return eb}var Q=H[0].trace,U=P.numbersX,S=P.numbersY,X=Q.align||"center",Z=B[X],aa=P.transitionOpts,fa=P.onComplete,ha=d.ensureSingle(L,"g","numbers"),ja,ba;L=[];Q._hasNumber&&L.push("number");Q._hasDelta&&(L.push("delta"),"left"===Q.delta.position&&L.reverse());L=ha.selectAll("text").data(L);L.enter().append("text");L.attr("text-anchor",function(){return Z}).attr("class",function(sa){return sa}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",
null);L.exit().remove();var ma=Q.mode+Q.align;if(Q._hasDelta){var qa=T();ma+=Q.delta.position+Q.delta.font.size+Q.delta.font.family+Q.delta.valueformat;ma+=Q.delta.increasing.symbol+Q.delta.decreasing.symbol;var ka=ba}Q._hasNumber&&(N(),ma+=Q.number.font.size+Q.number.font.family+Q.number.valueformat+Q.number.suffix+Q.number.prefix,ka=ja);if(Q._hasDelta&&Q._hasNumber){L=[(ja.left+ja.right)/2,(ja.top+ja.bottom)/2];var oa=[(ba.left+ba.right)/2,(ba.top+ba.bottom)/2],na=.75*Q.delta.font.size;if("left"===
Q.delta.position){var la=p(Q,"deltaPos",0,-1*(ja.width*F[Q.align]+ba.width*(1-F[Q.align])+na),ma,Math.min);var ia=L[1]-oa[1];ka={width:ja.width+ba.width+na,height:Math.max(ja.height,ba.height),left:ba.left+la,right:ja.right,top:Math.min(ja.top,ba.top+ia),bottom:Math.max(ja.bottom,ba.bottom+ia)}}"right"===Q.delta.position&&(la=p(Q,"deltaPos",0,ja.width*(1-F[Q.align])+ba.width*F[Q.align]+na,ma,Math.max),ia=L[1]-oa[1],ka={width:ja.width+ba.width+na,height:Math.max(ja.height,ba.height),left:ja.left,right:ba.right+
la,top:Math.min(ja.top,ba.top+ia),bottom:Math.max(ja.bottom,ba.bottom+ia)});"bottom"===Q.delta.position&&(la=null,ia=ba.height,ka={width:Math.max(ja.width,ba.width),height:ja.height+ba.height,left:Math.min(ja.left,ba.left),right:Math.max(ja.right,ba.right),top:ja.bottom-ja.height,bottom:ja.bottom+ba.height});"top"===Q.delta.position&&(la=null,ia=ja.top,ka={width:Math.max(ja.width,ba.width),height:ja.height+ba.height,left:Math.min(ja.left,ba.left),right:Math.max(ja.right,ba.right),top:ja.bottom-ja.height-
ba.height,bottom:ja.bottom});qa.attr({dx:la,dy:ia})}(Q._hasNumber||Q._hasDelta)&&ha.attr("transform",function(){var sa=P.numbersScaler(ka);ma+=sa[2];sa=p(Q,"numbersScale",1,sa[0],ma,Math.min);Q._scaleNumbers||(sa=1);var ta=Q._isAngular?S-sa*ka.bottom:S-sa*(ka.top+ka.bottom)/2;Q._numbersTop=sa*ka.top+ta;var Aa=ka[X];"center"===X&&(Aa=(ka.left+ka.right)/2);Aa=U-sa*Aa;Aa=p(Q,"numbersTranslate",0,Aa,ma,Math.max);return k(Aa,ta)+f(sa)})}function h(J){J.each(function(L){t.stroke(c.select(this),L.line.color)}).each(function(L){t.fill(c.select(this),
L.color)}).style("stroke-width",function(L){return L.line.width})}function a(J,L,H){return function(){var P=c.interpolate(L,H);return function(M){return J.endAngle(P(M))()}}}function g(J,L,H){function P(T,Q){return d.coerce(M,N,A,T,Q)}J=J._fullLayout;var M=d.extendFlat({type:"linear",ticks:"outside",range:H,showline:!0},L),N={type:"linear",_id:"x"+L._id};L={letter:"x",font:J.font,noHover:!0,noTickson:!0};y(M,N,P,L,J);D(M,N,P,L);return N}function e(J,L,H){return[Math.min(L/J.width,H/J.height),J,L+
"x"+H]}function n(J,L,H,P){var M=document.createElementNS("http://www.w3.org/2000/svg","text");M=c.select(M);M.text(J).attr("x",0).attr("y",0).attr("text-anchor",H).attr("data-unformatted",J).call(C.convertToTspans,P).call(v.font,L);return v.bBox(M.node())}function p(J,L,H,P,M,N){L="_cache"+L;J[L]&&J[L].key===M||(J[L]={key:M,value:H});H=d.aggNums(N,null,[J[L].value,P],2);return J[L].value=H}var c=b("d3"),d=b("../../lib"),f=d.strScale,k=d.strTranslate,r=d.rad2deg,u=b("../../constants/alignment").MID_SHIFT,
v=b("../../components/drawing"),x=b("./constants"),C=b("../../lib/svg_text_utils"),z=b("../../plots/cartesian/axes"),y=b("../../plots/cartesian/axis_defaults"),D=b("../../plots/cartesian/position_defaults"),A=b("../../plots/cartesian/layout_attributes"),t=b("../../components/color"),B={left:"start",center:"middle",right:"end"},F={left:0,center:.5,right:1},I=/[yzafpn\u00b5mkMGTPEZY]/;K.exports=function(J,L,H,P){var M=J._fullLayout,N;H&&0<H.duration&&P&&(N=P());d.makeTraceGroups(M._indicatorlayer,L,
"trace").each(function(T){var Q=T[0].trace,U=c.select(this),S=Q._hasGauge,X=Q._isAngular,Z=Q._isBullet,aa=Q.domain,fa={w:M._size.w*(aa.x[1]-aa.x[0]),h:M._size.h*(aa.y[1]-aa.y[0]),l:M._size.l+M._size.w*aa.x[0],r:M._size.r+M._size.w*(1-aa.x[1]),t:M._size.t+M._size.h*(1-aa.y[1]),b:M._size.b+M._size.h*aa.y[0]},ha=fa.l+fa.w/2,ja=fa.t+fa.h/2,ba=Math.min(fa.w/2,fa.h),ma=x.innerRadius*ba;aa=Q.align||"center";var qa=ja;if(S){if(X){var ka=ha;qa=ja+ba/2;var oa=function(Aa){var Ka=.9*ma;return[Ka/Math.sqrt(Aa.width/
2*(Aa.width/2)+Aa.height*Aa.height),Aa,Ka]}}if(Z){var na=x.bulletPadding;ka=1-x.bulletNumberDomainSize+na;ka=fa.l+(ka+(1-ka)*F[aa])*fa.w;oa=function(Aa){return e(Aa,(x.bulletNumberDomainSize-na)*fa.w,fa.h)}}}else ka=fa.l+F[aa]*fa.w,oa=function(Aa){return e(Aa,fa.w,fa.h)};l(J,U,T,{numbersX:ka,numbersY:qa,numbersScaler:oa,transitionOpts:H,onComplete:N});if(S){var la={range:Q.gauge.axis.range,color:Q.gauge.bgcolor,line:{color:Q.gauge.bordercolor,width:0},thickness:1};var ia={range:Q.gauge.axis.range,
color:"rgba(0, 0, 0, 0)",line:{color:Q.gauge.bordercolor,width:Q.gauge.borderwidth},thickness:1}}ka=U.selectAll("g.angular").data(X?T:[]);ka.exit().remove();var sa=U.selectAll("g.angularaxis").data(X?T:[]);sa.exit().remove();X&&m(J,U,T,{radius:ba,innerRadius:ma,gauge:ka,layer:sa,size:fa,gaugeBg:la,gaugeOutline:ia,transitionOpts:H,onComplete:N});ka=U.selectAll("g.bullet").data(Z?T:[]);ka.exit().remove();oa=U.selectAll("g.bulletaxis").data(Z?T:[]);oa.exit().remove();Z&&q(J,U,T,{gauge:ka,layer:oa,size:fa,
gaugeBg:la,gaugeOutline:ia,transitionOpts:H,onComplete:N});var ta=U.selectAll("text.title").data(T);ta.exit().remove();ta.enter().append("text").classed("title",!0);ta.attr("text-anchor",function(){return Z?B.right:B[Q.title.align]}).text(Q.title.text).call(v.font,Q.title.font).call(C.convertToTspans,J);ta.attr("transform",function(){var Aa=fa.l+fa.w*F[Q.title.align],Ka,Sa=x.titlePadding,db=v.bBox(ta.node());S?(X&&(Ka=Q.gauge.axis.visible?v.bBox(sa.node()).top-Sa-db.bottom:fa.t+fa.h/2-ba/2-db.bottom-
Sa),Z&&(Ka=qa-(db.top+db.bottom)/2,Aa=fa.l-x.bulletPadding*fa.w)):Ka=Q._numbersTop-Sa-db.bottom;return k(Aa,Ka)})})}},{"../../components/color":643,"../../components/drawing":665,"../../constants/alignment":745,"../../lib":778,"../../lib/svg_text_utils":803,"../../plots/cartesian/axes":828,"../../plots/cartesian/axis_defaults":830,"../../plots/cartesian/layout_attributes":842,"../../plots/cartesian/position_defaults":845,"./constants":1119,d3:169}],1123:[function(b,K,G){function q(e){return{show:{valType:"boolean",
dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}}function m(e){return{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}}G=b("../../components/colorscale/attributes");var l=b("../../plots/template_attributes").hovertemplateAttrs,h=b("../mesh3d/attributes"),a=b("../../plots/attributes"),g=b("../../lib/extend").extendFlat;b=b("../../plot_api/edit_types").overrideAll;K=K.exports=b(g({x:{valType:"data_array"},y:{valType:"data_array"},
z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:q("x"),y:q("y"),z:q("z")},caps:{x:m("x"),y:m("y"),z:m("z")},text:{valType:"string",
dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:l(),showlegend:g({},a.showlegend,{dflt:!1})},G("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:h.opacity,lightposition:h.lightposition,lighting:h.lighting,flatshading:h.flatshading,contour:h.contour,hoverinfo:g({},a.hoverinfo)}),"calc","nested");K.flatshading.dflt=!0;K.lighting.facenormalsepsilon.dflt=0;K.x.editType=K.y.editType=K.z.editType=K.value.editType="calc+clearAxisTypes";K.transforms=
void 0},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plot_api/edit_types":810,"../../plots/attributes":824,"../../plots/template_attributes":906,"../mesh3d/attributes":1128}],1124:[function(b,K,G){var q=b("../../components/colorscale/calc"),m=b("../streamtube/calc").processGrid,l=b("../streamtube/calc").filter;K.exports=function(h,a){a._len=Math.min(a.x.length,a.y.length,a.z.length,a.value.length);a._x=l(a.x,a._len);a._y=l(a.y,a._len);a._z=l(a.z,a._len);a._value=l(a.value,
a._len);var g=m(a);a._gridFill=g.fill;a._Xs=g.Xs;a._Ys=g.Ys;a._Zs=g.Zs;a._len=g.len;g=Infinity;for(var e=-Infinity,n=0;n<a._len;n++){var p=a._value[n];g=Math.min(g,p);e=Math.max(e,p)}a._minValues=g;a._maxValues=e;a._vMin=void 0===a.isomin||null===a.isomin?g:a.isomin;a._vMax=void 0===a.isomax||null===a.isomin?e:a.isomax;q(h,a,{vals:[a._vMin,a._vMax],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":651,"../streamtube/calc":1295}],1125:[function(b,K,G){function q(c,d,f){this.scene=
c;this.uid=f;this.mesh=d;this.name="";this.data=null;this.showContour=!1}function m(c){function d(){eb=[];lb=[];ab=[];Ya=[];ma=ba=0}function f(nb,va,Ba,Ga){eb.push(nb);lb.push(va);ab.push(Ba);Ya.push(Ga);ba++;return ba-1}function k(nb,va,Ba){for(var Ga=[],Na=0;Na<nb.length;Na++)Ga[Na]=nb[Na]*(1-Ba)+Ba*va[Na];return Ga}function r(nb,va){return"all"===nb||null===nb?!0:-1<nb.indexOf(va)}function u(nb,va,Ba){ma=ba;var Ga=[va];var Na=[Ba];if(1<=hb)Ga=[va],Na=[Ba];else if(0<hb){var $a=Ba;Ga=va[0];Na=va[1];
va=va[2];for(var Va=[],qb=0;qb<Ga.length;qb++)Va[qb]=(Ga[qb]+Na[qb]+va[qb])/3;var Ha=Math.sqrt(1-hb);qb=k(Va,Ga,Ha);Ba=k(Va,Na,Ha);var Ra=k(Va,va,Ha);Va=$a[0];Ha=$a[1];$a=$a[2];va=[[Ga,Na,Ba],[Ba,qb,Ga],[Na,va,Ra],[Ra,Ba,Na],[va,Ga,qb],[qb,Ra,va]];Na=[[Va,Ha,-1],[-1,-1,Va],[Ha,$a,-1],[-1,-1,Ha],[$a,Va,-1],[-1,-1,$a]];Ga=va}for($a=0;$a<Ga.length;$a++){va=Ga[$a];Ba=Na[$a];qb=[];for(Va=0;3>Va;Va++){var La=va[Va][0],gb=va[Va][1];Ra=va[Va][2];Ha=va[Va][3];if(-1<Ba[Va])var ob=Ba[Va];else a:{ob=Ya.length;
for(var ub=ma;ub<ob;ub++)if(La===eb[ub]&&gb===lb[ub]&&Ra===ab[ub]){ob=ub;break a}ob=-1}-1<ob?qb[Va]=ob:(ob=qb,ub=Va,Ha=null===nb?Ha:nb,ob[ub]=f(La,gb,Ra,Ha))}va=qb[1];Ba=qb[2];c._meshI.push(qb[0]);c._meshJ.push(va);c._meshK.push(Ba);ja++}}function v(nb,va,Ba){var Ga=function(Na,$a,Va){u(nb,[va[Na],va[$a],va[Va]],[Ba[Na],Ba[$a],Ba[Va]])};Ga(0,1,2);Ga(2,3,0)}function x(nb,va,Ba){var Ga=function(Na,$a,Va){u(nb,[va[Na],va[$a],va[Va]],[Ba[Na],Ba[$a],Ba[Va]])};Ga(0,1,2);Ga(3,0,1);Ga(2,3,0);Ga(1,2,3)}function C(nb,
va,Ba,Ga){var Na=nb[3];Na<Ba&&(Na=Ba);Na>Ga&&(Na=Ga);Ba=(nb[3]-Na)/(nb[3]-va[3]+1E-9);Ga=[];for(Na=0;4>Na;Na++)Ga[Na]=(1-Ba)*nb[Na]+Ba*va[Na];return Ga}function z(nb,va,Ba){return nb>=va&&nb<=Ba}function y(nb){var va=.001*(db-Sa);return nb>=Sa-va&&nb<=db+va}function D(nb){for(var va=[],Ba=0;4>Ba;Ba++){var Ga=nb[Ba];va.push([c._x[Ga],c._y[Ga],c._z[Ga],c._value[Ga]])}return va}function A(nb,va,Ba,Ga,Na,$a){$a||($a=1);Ba=[-1,-1,-1];var Va=!1,qb=[z(va[0][3],Ga,Na),z(va[1][3],Ga,Na),z(va[2][3],Ga,Na)];
if(!qb[0]&&!qb[1]&&!qb[2])return!1;var Ha=function(La,gb,ob){return y(gb[0][3])&&y(gb[1][3])&&y(gb[2][3])?(u(La,gb,ob),!0):3>$a?A(La,gb,ob,Sa,db,++$a):!1};if(qb[0]&&qb[1]&&qb[2])return Ha(nb,va,Ba)||Va;var Ra=!1;[[0,1,2],[2,0,1],[1,2,0]].forEach(function(La){if(qb[La[0]]&&qb[La[1]]&&!qb[La[2]]){var gb=va[La[0]],ob=va[La[1]],ub=va[La[2]],za=C(ub,gb,Ga,Na);ub=C(ub,ob,Ga,Na);Va=Ha(nb,[ub,za,gb],[-1,-1,Ba[La[0]]])||Va;Va=Ha(nb,[gb,ob,ub],[Ba[La[0]],Ba[La[1]],-1])||Va;Ra=!0}});if(Ra)return Va;[[0,1,2],
[1,2,0],[2,0,1]].forEach(function(La){if(qb[La[0]]&&!qb[La[1]]&&!qb[La[2]]){var gb=va[La[0]],ob=va[La[2]],ub=C(va[La[1]],gb,Ga,Na);ob=C(ob,gb,Ga,Na);Va=Ha(nb,[ob,ub,gb],[-1,-1,Ba[La[0]]])||Va;Ra=!0}});return Va}function t(nb,va,Ba,Ga){var Na=!1,$a=D(va),Va=[z($a[0][3],Ba,Ga),z($a[1][3],Ba,Ga),z($a[2][3],Ba,Ga),z($a[3][3],Ba,Ga)];if(!(Va[0]||Va[1]||Va[2]||Va[3]))return Na;if(Va[0]&&Va[1]&&Va[2]&&Va[3])return ha&&(Na=x(nb,$a,va)||Na),Na;var qb=!1;[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(Ha){if(Va[Ha[0]]&&
Va[Ha[1]]&&Va[Ha[2]]&&!Va[Ha[3]]){var Ra=$a[Ha[0]],La=$a[Ha[1]],gb=$a[Ha[2]],ob=$a[Ha[3]];ha?Na=u(nb,[Ra,La,gb],[va[Ha[0]],va[Ha[1]],va[Ha[2]]])||Na:(Ha=C(ob,Ra,Ba,Ga),La=C(ob,La,Ba,Ga),gb=C(ob,gb,Ba,Ga),Na=u(null,[Ha,La,gb],[-1,-1,-1])||Na);qb=!0}});if(qb)return Na;[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(Ha){if(Va[Ha[0]]&&Va[Ha[1]]&&!Va[Ha[2]]&&!Va[Ha[3]]){var Ra=$a[Ha[0]],La=$a[Ha[1]],gb=$a[Ha[2]],ob=$a[Ha[3]],ub=C(gb,Ra,Ba,Ga);gb=C(gb,La,Ba,Ga);var za=C(ob,
La,Ba,Ga);ob=C(ob,Ra,Ba,Ga);ha?(Na=u(nb,[Ra,ob,ub],[va[Ha[0]],-1,-1])||Na,Na=u(nb,[La,gb,za],[va[Ha[1]],-1,-1])||Na):Na=v(null,[ub,gb,za,ob],[-1,-1,-1,-1])||Na;qb=!0}});if(qb)return Na;[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(Ha){if(Va[Ha[0]]&&!Va[Ha[1]]&&!Va[Ha[2]]&&!Va[Ha[3]]){var Ra=$a[Ha[0]],La=$a[Ha[2]],gb=$a[Ha[3]],ob=C($a[Ha[1]],Ra,Ba,Ga);La=C(La,Ra,Ba,Ga);gb=C(gb,Ra,Ba,Ga);ha?(Na=u(nb,[Ra,ob,La],[va[Ha[0]],-1,-1])||Na,Na=u(nb,[Ra,La,gb],[va[Ha[0]],-1,-1])||Na,Na=u(nb,[Ra,
gb,ob],[va[Ha[0]],-1,-1])||Na):Na=u(null,[ob,La,gb],[-1,-1,-1])||Na;qb=!0}});return Na}function B(nb,va,Ba,Ga,Na,$a,Va,qb,Ha,Ra,La){var gb=!1;fa&&(r(nb,"A")&&(gb=t(null,[va,Ba,Ga,$a],Ra,La)||gb),r(nb,"B")&&(gb=t(null,[Ba,Ga,Na,Ha],Ra,La)||gb),r(nb,"C")&&(gb=t(null,[Ba,$a,Va,Ha],Ra,La)||gb),r(nb,"D")&&(gb=t(null,[Ga,$a,qb,Ha],Ra,La)||gb),r(nb,"E")&&(gb=t(null,[Ba,Ga,$a,Ha],Ra,La)||gb));ha&&(gb=t(nb,[Ba,Ga,$a,Ha],Ra,La)||gb);return gb}function F(nb,va,Ba,Ga,Na,$a,Va,qb){return[!0===qb[0]?!0:A(nb,D([va,
Ba,Ga]),[va,Ba,Ga],$a,Va),!0===qb[1]?!0:A(nb,D([Ga,Na,va]),[Ga,Na,va],$a,Va)]}function I(nb,va,Ba,Ga,Na,$a,Va,qb,Ha){return qb?F(nb,va,Ba,Na,Ga,$a,Va,Ha):F(nb,Ba,Na,Ga,va,$a,Va,Ha)}function J(nb,va,Ba,Ga,Na,$a,Va){var qb=!1,Ha=function(){qb=A(nb,[gb,ob,ub],[-1,-1,-1],Na,$a)||qb;qb=A(nb,[ub,za,gb],[-1,-1,-1],Na,$a)||qb},Ra=Va[0],La=Va[1];Va=Va[2];if(Ra){var gb=k(D([ta(va,Ba-0,Ga-0)])[0],D([ta(va-1,Ba-0,Ga-0)])[0],Ra);var ob=k(D([ta(va,Ba-0,Ga-1)])[0],D([ta(va-1,Ba-0,Ga-1)])[0],Ra);var ub=k(D([ta(va,
Ba-1,Ga-1)])[0],D([ta(va-1,Ba-1,Ga-1)])[0],Ra);var za=k(D([ta(va,Ba-1,Ga-0)])[0],D([ta(va-1,Ba-1,Ga-0)])[0],Ra);Ha()}La&&(gb=k(D([ta(va-0,Ba,Ga-0)])[0],D([ta(va-0,Ba-1,Ga-0)])[0],La),ob=k(D([ta(va-0,Ba,Ga-1)])[0],D([ta(va-0,Ba-1,Ga-1)])[0],La),ub=k(D([ta(va-1,Ba,Ga-1)])[0],D([ta(va-1,Ba-1,Ga-1)])[0],La),za=k(D([ta(va-1,Ba,Ga-0)])[0],D([ta(va-1,Ba-1,Ga-0)])[0],La),Ha());Va&&(gb=k(D([ta(va-0,Ba-0,Ga)])[0],D([ta(va-0,Ba-0,Ga-1)])[0],Va),ob=k(D([ta(va-0,Ba-1,Ga)])[0],D([ta(va-0,Ba-1,Ga-1)])[0],Va),ub=
k(D([ta(va-1,Ba-1,Ga)])[0],D([ta(va-1,Ba-1,Ga-1)])[0],Va),za=k(D([ta(va-1,Ba-0,Ga)])[0],D([ta(va-1,Ba-0,Ga-1)])[0],Va),Ha());return qb}function L(nb,va,Ba,Ga,Na){for(var $a=[],Va=0,qb=0;qb<va.length;qb++)for(var Ha=va[qb],Ra=1;Ra<ia;Ra++)for(var La=1;La<la;La++)$a.push(I(nb,ta(Ha,La-1,Ra-1),ta(Ha,La-1,Ra),ta(Ha,La,Ra-1),ta(Ha,La,Ra),Ba,Ga,(Ha+La+Ra)%2,Na&&Na[Va]?Na[Va]:[])),Va++;return $a}function H(nb,va,Ba,Ga,Na){for(var $a=[],Va=0,qb=0;qb<va.length;qb++)for(var Ha=va[qb],Ra=1;Ra<na;Ra++)for(var La=
1;La<ia;La++)$a.push(I(nb,ta(Ra-1,Ha,La-1),ta(Ra,Ha,La-1),ta(Ra-1,Ha,La),ta(Ra,Ha,La),Ba,Ga,(Ra+Ha+La)%2,Na&&Na[Va]?Na[Va]:[])),Va++;return $a}function P(nb,va,Ba,Ga,Na){for(var $a=[],Va=0,qb=0;qb<va.length;qb++)for(var Ha=va[qb],Ra=1;Ra<la;Ra++)for(var La=1;La<na;La++)$a.push(I(nb,ta(La-1,Ra-1,Ha),ta(La-1,Ra,Ha),ta(La,Ra-1,Ha),ta(La,Ra,Ha),Ba,Ga,(La+Ra+Ha)%2,Na&&Na[Va]?Na[Va]:[])),Va++;return $a}function M(nb,va,Ba){for(var Ga=1;Ga<ia;Ga++)for(var Na=1;Na<la;Na++)for(var $a=1;$a<na;$a++){var Va=
nb,qb=ta($a-1,Na-1,Ga-1),Ha=ta($a-1,Na-1,Ga),Ra=ta($a-1,Na,Ga-1),La=ta($a-1,Na,Ga),gb=ta($a,Na-1,Ga-1),ob=ta($a,Na-1,Ga),ub=ta($a,Na,Ga-1),za=ta($a,Na,Ga),Da=va,Ja=Ba,Ta=Va;($a+Na+Ga)%2?(fa&&"even"===Va&&(Ta=null),B(Ta,qb,Ha,Ra,La,gb,ob,ub,za,Da,Ja)):(fa&&"odd"===Va&&(Ta=null),B(Ta,za,ub,ob,gb,La,Ra,Ha,qb,Da,Ja))}}function N(nb,va,Ba){ha=!0;M(nb,va,Ba);ha=!1}function T(nb,va,Ba){fa=!0;M(nb,va,Ba);fa=!1}function Q(nb,va){for(var Ba=[];nb<va;nb++)Ba.push(nb);return Ba}function U(){for(var nb=0;nb<na;nb++)for(var va=
0;va<la;va++)for(var Ba=0;Ba<ia;Ba++){var Ga=ta(nb,va,Ba);f(c._x[Ga],c._y[Ga],c._z[Ga],c._value[Ga])}}c._meshI=[];c._meshJ=[];c._meshK=[];var S=c.surface.show,X=c.spaceframe.show,Z=c.surface.fill,aa=c.spaceframe.fill,fa=!1,ha=!1,ja=0,ba,ma,qa=c._Xs,ka=c._Ys,oa=c._Zs,na=qa.length,la=ka.length,ia=oa.length,sa=p.indexOf(c._gridFill.replace(/-/g,"").replace(/\+/g,"")),ta=function(nb,va,Ba){switch(sa){case 5:return Ba+ia*va+ia*la*nb;case 4:return Ba+ia*nb+ia*na*va;case 3:return va+la*Ba+la*ia*nb;case 2:return va+
la*nb+la*na*Ba;case 1:return nb+na*Ba+na*ia*va;default:return nb+na*va+na*la*Ba}},Aa=c._minValues,Ka=c._maxValues,Sa=c._vMin,db=c._vMax,eb,lb,ab,Ya,hb;(function(){d();U();X&&aa&&(hb=aa,N(null,Sa,db));if(S&&Z){hb=Z;for(var nb=c.surface.pattern,va=c.surface.count,Ba=0;Ba<va;Ba++){var Ga=1===va?.5:Ba/(va-1);Ga=(1-Ga)*Sa+Ga*db;Ga=Math.abs(Ga-Aa)>Math.abs(Ga-Ka)?[Aa,Ga]:[Ga,Ka];T(nb,Ga[0],Ga[1])}}var Na=[[Math.min(Sa,Ka),Math.max(Sa,Ka)],[Math.min(Aa,db),Math.max(Aa,db)]];["x","y","z"].forEach(function($a){for(var Va=
[],qb=0;qb<Na.length;qb++){var Ha=0,Ra=Na[qb][0],La=Na[qb][1],gb=c.slices[$a];if(gb.show&&gb.fill){hb=gb.fill;var ob=[],ub=[],za=[];if(gb.locations.length)for(var Da=0;Da<gb.locations.length;Da++){var Ja=n(gb.locations[Da],"x"===$a?qa:"y"===$a?ka:oa);0===Ja.distRatio?ob.push(Ja.id):0<Ja.id&&(ub.push(Ja.id),"x"===$a?za.push([Ja.distRatio,0,0]):"y"===$a?za.push([0,Ja.distRatio,0]):za.push([0,0,Ja.distRatio]))}else ob="x"===$a?Q(1,na-1):"y"===$a?Q(1,la-1):Q(1,ia-1);if(0<ub.length){if("x"===$a){gb=Ha;
Da=Ra;Ja=La;for(var Ta=Va[Ha],Xa=[],kb=0,rb=0;rb<ub.length;rb++)for(var Mb=ub[rb],Fb=1;Fb<ia;Fb++)for(var Lb=1;Lb<la;Lb++)Xa.push(J(null,Mb,Lb,Fb,Da,Ja,za[rb],Ta&&Ta[kb]?Ta[kb]:[])),kb++;Va[gb]=Xa}else if("y"===$a){gb=Ha;Da=Ra;Ja=La;Ta=Va[Ha];Xa=[];for(rb=kb=0;rb<ub.length;rb++)for(Mb=ub[rb],Fb=1;Fb<na;Fb++)for(Lb=1;Lb<ia;Lb++)Xa.push(J(null,Fb,Mb,Lb,Da,Ja,za[rb],Ta&&Ta[kb]?Ta[kb]:[])),kb++;Va[gb]=Xa}else{gb=Ha;Da=Ra;Ja=La;Ta=Va[Ha];Xa=[];for(rb=kb=0;rb<ub.length;rb++)for(Mb=ub[rb],Fb=1;Fb<la;Fb++)for(Lb=
1;Lb<na;Lb++)Xa.push(J(null,Lb,Fb,Mb,Da,Ja,za[rb],Ta&&Ta[kb]?Ta[kb]:[])),kb++;Va[gb]=Xa}Ha++}0<ob.length&&(Va[Ha]="x"===$a?L(null,ob,Ra,La,Va[Ha]):"y"===$a?H(null,ob,Ra,La,Va[Ha]):P(null,ob,Ra,La,Va[Ha]),Ha++)}ob=c.caps[$a];ob.show&&ob.fill&&(hb=ob.fill,Va[Ha]="x"===$a?L(null,[0,na-1],Ra,La,Va[Ha]):"y"===$a?H(null,[0,la-1],Ra,La,Va[Ha]):P(null,[0,ia-1],Ra,La,Va[Ha]))}});0===ja&&d();c._meshX=eb;c._meshY=lb;c._meshZ=ab;c._meshIntensity=Ya;c._Xs=qa;c._Ys=ka;c._Zs=oa})();return c}var l=b("gl-mesh3d"),
h=b("../../lib/gl_format_color").parseColorScale,a=b("../../lib/str2rgbarray"),g=b("../../components/colorscale").extractOpts,e=b("../../plots/gl3d/zip3"),n=function(c,d){for(var f=d.length-1;0<f;f--){var k=Math.min(d[f],d[f-1]),r=Math.max(d[f],d[f-1]);if(r>k&&k<c&&c<=r)return{id:f,distRatio:(r-c)/(r-k)}}return{id:0,distRatio:0}};b=q.prototype;b.handlePick=function(c){if(c.object===this.mesh){var d=c.data.index,f=this.data._meshY[d],k=this.data._meshZ[d],r=this.data._Ys.length,u=this.data._Zs.length;
d=n(this.data._meshX[d],this.data._Xs).id;f=n(f,this.data._Ys).id;k=n(k,this.data._Zs).id;r=c.index=k+u*f+u*r*d;c.traceCoordinate=[this.data._meshX[r],this.data._meshY[r],this.data._meshZ[r],this.data._value[r]];u=this.data.hovertext||this.data.text;Array.isArray(u)&&void 0!==u[r]?c.textLabel=u[r]:u&&(c.textLabel=u);return!0}};b.update=function(c){function d(r,u,v,x){return u.map(function(C){return r.d2l(C,0,x)*v})}var f=this.scene,k=f.fullSceneLayout;this.data=m(c);f=e(d(k.xaxis,c._meshX,f.dataScale[0],
c.xcalendar),d(k.yaxis,c._meshY,f.dataScale[1],c.ycalendar),d(k.zaxis,c._meshZ,f.dataScale[2],c.zcalendar));k=e(c._meshI,c._meshJ,c._meshK);f={positions:f,cells:k,lightPosition:[c.lightposition.x,c.lightposition.y,c.lightposition.z],ambient:c.lighting.ambient,diffuse:c.lighting.diffuse,specular:c.lighting.specular,roughness:c.lighting.roughness,fresnel:c.lighting.fresnel,vertexNormalsEpsilon:c.lighting.vertexnormalsepsilon,faceNormalsEpsilon:c.lighting.facenormalsepsilon,opacity:c.opacity,contourEnable:c.contour.show,
contourColor:a(c.contour.color).slice(0,3),contourWidth:c.contour.width,useFacetNormals:c.flatshading};k=g(c);f.vertexIntensity=c._meshIntensity;f.vertexIntensityBounds=[k.min,k.max];f.colormap=h(c);this.mesh.update(f)};b.dispose=function(){this.scene.glplot.remove(this.mesh);this.mesh.dispose()};var p="xyz xzy yxz yzx zxy zyx".split(" ");K.exports={findNearestOnAxis:n,generateIsoMeshes:m,createIsosurfaceTrace:function(c,d){var f=l({gl:c.glplot.gl}),k=new q(c,f,d.uid);f._trace=k;k.update(d);c.glplot.add(f);
return k}}},{"../../components/colorscale":655,"../../lib/gl_format_color":774,"../../lib/str2rgbarray":802,"../../plots/gl3d/zip3":881,"gl-mesh3d":309}],1126:[function(b,K,G){function q(g,e,n,p,c){n=c("isomin");var d=c("isomax");void 0!==d&&null!==d&&void 0!==n&&null!==n&&n>d&&(e.isomin=null,e.isomax=null);n=c("x");d=c("y");var f=c("z"),k=c("value");n&&n.length&&d&&d.length&&f&&f.length&&k&&k.length?(l.getComponentMethod("calendars","handleTraceDefaults")(g,e,["x","y","z"],p),["x","y","z"].forEach(function(r){var u=
"caps."+r;c(u+".show")&&c(u+".fill");r="slices."+r;c(r+".show")&&(c(r+".fill"),c(r+".locations"))}),c("spaceframe.show")&&c("spaceframe.fill"),c("surface.show")&&(c("surface.count"),c("surface.fill"),c("surface.pattern")),c("contour.show")&&(c("contour.color"),c("contour.width")),"text hovertext hovertemplate lighting.ambient lighting.diffuse lighting.specular lighting.roughness lighting.fresnel lighting.vertexnormalsepsilon lighting.facenormalsepsilon lightposition.x lightposition.y lightposition.z flatshading opacity".split(" ").forEach(function(r){c(r)}),
a(g,e,p,c,{prefix:"",cLetter:"c"}),e._length=null):e.visible=!1}var m=b("../../lib"),l=b("../../registry"),h=b("./attributes"),a=b("../../components/colorscale/defaults");K.exports={supplyDefaults:function(g,e,n,p){q(g,e,n,p,function(c,d){return m.coerce(g,e,h,c,d)})},supplyIsoDefaults:q}},{"../../components/colorscale/defaults":653,"../../lib":778,"../../registry":911,"./attributes":1123}],1127:[function(b,K,G){K.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults").supplyDefaults,
calc:b("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:b("./convert").createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:b("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":870,"./attributes":1123,"./calc":1124,"./convert":1125,"./defaults":1126}],1128:[function(b,K,G){G=b("../../components/colorscale/attributes");var q=b("../../plots/template_attributes").hovertemplateAttrs,m=b("../surface/attributes"),l=b("../../plots/attributes");b=b("../../lib/extend").extendFlat;
K.exports=b({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:q({editType:"calc"}),delaunayaxis:{valType:"enumerated",values:["x",
"y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},G("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:m.opacity,flatshading:{valType:"boolean",
dflt:!1,editType:"calc"},contour:{show:b({},m.contours.x.show,{}),color:m.contours.x.color,width:m.contours.x.width,editType:"calc"},lightposition:{x:b({},m.lightposition.x,{dflt:1E5}),y:b({},m.lightposition.y,{dflt:1E5}),z:b({},m.lightposition.z,{dflt:0}),editType:"calc"},lighting:b({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1E-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1E-6,editType:"calc"},editType:"calc"},m.lighting),hoverinfo:b({},l.hoverinfo,{editType:"calc"}),
showlegend:b({},l.showlegend,{dflt:!1})})},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,"../surface/attributes":1311}],1129:[function(b,K,G){var q=b("../../components/colorscale/calc");K.exports=function(m,l){l.intensity&&q(m,l,{vals:l.intensity,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":651}],1130:[function(b,K,G){function q(r,u,v){this.scene=r;this.uid=v;this.mesh=u;this.name="";this.color=
"#fff";this.data=null;this.showContour=!1}function m(r){for(var u=[],v=r.length,x=0;x<v;x++)u[x]=d(r[x]);return u}function l(r,u,v,x){for(var C=[],z=u.length,y=0;y<z;y++)C[y]=r.d2l(u[y],0,x)*v;return C}function h(r){for(var u=[],v=r.length,x=0;x<v;x++)u[x]=Math.round(r[x]);return u}function a(r,u){for(var v=r.length,x=0;x<v;x++)if(-.5>=r[x]||r[x]>=u-.5)return!1;return!0}var g=b("gl-mesh3d"),e=b("delaunay-triangulate"),n=b("alpha-shape"),p=b("convex-hull"),c=b("../../lib/gl_format_color").parseColorScale,
d=b("../../lib/str2rgbarray"),f=b("../../components/colorscale").extractOpts,k=b("../../plots/gl3d/zip3");b=q.prototype;b.handlePick=function(r){if(r.object===this.mesh){var u=r.index=r.data.index;r.traceCoordinate=r.data._cellCenter?r.data.dataCoordinate:[this.data.x[u],this.data.y[u],this.data.z[u]];var v=this.data.hovertext||this.data.text;Array.isArray(v)&&void 0!==v[u]?r.textLabel=v[u]:v&&(r.textLabel=v);return!0}};b.update=function(r){var u=this.scene,v=u.fullSceneLayout;this.data=r;var x=r.x.length;
u=k(l(v.xaxis,r.x,u.dataScale[0],r.xcalendar),l(v.yaxis,r.y,u.dataScale[1],r.ycalendar),l(v.zaxis,r.z,u.dataScale[2],r.zcalendar));if(r.i&&r.j&&r.k){if(r.i.length!==r.j.length||r.j.length!==r.k.length||!a(r.i,x)||!a(r.j,x)||!a(r.k,x))return;x=k(h(r.i),h(r.j),h(r.k))}else if(0===r.alphahull)x=p(u);else if(0<r.alphahull)x=n(r.alphahull,u);else{x=["x","y","z"].indexOf(r.delaunayaxis);v=[];for(var C=u.length,z=0;z<C;z++)v[z]=[u[z][(x+1)%3],u[z][(x+2)%3]];x=e(v)}u={positions:u,cells:x,lightPosition:[r.lightposition.x,
r.lightposition.y,r.lightposition.z],ambient:r.lighting.ambient,diffuse:r.lighting.diffuse,specular:r.lighting.specular,roughness:r.lighting.roughness,fresnel:r.lighting.fresnel,vertexNormalsEpsilon:r.lighting.vertexnormalsepsilon,faceNormalsEpsilon:r.lighting.facenormalsepsilon,opacity:r.opacity,contourEnable:r.contour.show,contourColor:d(r.contour.color).slice(0,3),contourWidth:r.contour.width,useFacetNormals:r.flatshading};r.intensity?(x=f(r),this.color="#fff",v=r.intensitymode,u[v+"Intensity"]=
r.intensity,u[v+"IntensityBounds"]=[x.min,x.max],u.colormap=c(r)):r.vertexcolor?(this.color=r.vertexcolor[0],u.vertexColors=m(r.vertexcolor)):r.facecolor?(this.color=r.facecolor[0],u.cellColors=m(r.facecolor)):(this.color=r.color,u.meshColor=d(r.color));this.mesh.update(u)};b.dispose=function(){this.scene.glplot.remove(this.mesh);this.mesh.dispose()};K.exports=function(r,u){var v=g({gl:r.glplot.gl}),x=new q(r,v,u.uid);v._trace=x;x.update(u);r.glplot.add(v);return x}},{"../../components/colorscale":655,
"../../lib/gl_format_color":774,"../../lib/str2rgbarray":802,"../../plots/gl3d/zip3":881,"alpha-shape":69,"convex-hull":135,"delaunay-triangulate":171,"gl-mesh3d":309}],1131:[function(b,K,G){var q=b("../../registry"),m=b("../../lib"),l=b("../../components/colorscale/defaults"),h=b("./attributes");K.exports=function(a,g,e,n){function p(d,f){return m.coerce(a,g,h,d,f)}function c(d){var f=d.map(function(k){return(k=p(k))&&m.isArrayOrTypedArray(k)?k:null});return f.every(function(k){return k&&k.length===
f[0].length})&&f}c(["x","y","z"])?(c(["i","j","k"]),(!g.i||g.j&&g.k)&&(!g.j||g.k&&g.i)&&(!g.k||g.i&&g.j)?(q.getComponentMethod("calendars","handleTraceDefaults")(a,g,["x","y","z"],n),"lighting.ambient lighting.diffuse lighting.specular lighting.roughness lighting.fresnel lighting.vertexnormalsepsilon lighting.facenormalsepsilon lightposition.x lightposition.y lightposition.z flatshading alphahull delaunayaxis opacity".split(" ").forEach(function(d){p(d)}),p("contour.show")&&(p("contour.color"),p("contour.width")),
"intensity"in a?(p("intensity"),p("intensitymode"),l(a,g,n,p,{prefix:"",cLetter:"c"})):(g.showscale=!1,"facecolor"in a?p("facecolor"):"vertexcolor"in a?p("vertexcolor"):p("color",e)),p("text"),p("hovertext"),p("hovertemplate"),g._length=null):g.visible=!1):g.visible=!1}},{"../../components/colorscale/defaults":653,"../../lib":778,"../../registry":911,"./attributes":1128}],1132:[function(b,K,G){K.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc"),colorbar:{min:"cmin",
max:"cmax"},plot:b("./convert"),moduleType:"trace",name:"mesh3d",basePlotModule:b("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":870,"./attributes":1128,"./calc":1129,"./convert":1130,"./defaults":1131}],1133:[function(b,K,G){function q(e){return{line:{color:m({},g.color,{dflt:e}),width:g.width,dash:l,editType:"style"},editType:"style"}}var m=b("../../lib").extendFlat;G=b("../scatter/attributes");var l=b("../../components/drawing/attributes").dash,h=b("../../components/fx/attributes"),
a=b("../../constants/delta.js");b=a.INCREASING.COLOR;a=a.DECREASING.COLOR;var g=G.line;K.exports={xperiod:G.xperiod,xperiod0:G.xperiod0,xperiodalignment:G.xperiodalignment,x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:m({},g.width,{}),dash:m({},l,{}),editType:"style"},increasing:q(b),decreasing:q(a),text:{valType:"string",
dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:m({},h.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},{"../../components/drawing/attributes":664,"../../components/fx/attributes":674,"../../constants/delta.js":747,"../../lib":778,"../scatter/attributes":1187}],1134:[function(b,K,G){function q(n,p,c,d){return{o:n,h:p,l:c,c:d}}function m(n,p,c,d,f,k){for(var r=
f.makeCalcdata(p,"open"),u=f.makeCalcdata(p,"high"),v=f.makeCalcdata(p,"low"),x=f.makeCalcdata(p,"close"),C=Array.isArray(p.text),z=Array.isArray(p.hovertext),y=!0,D=null,A=!!p.xperiodalignment,t=[],B=0;B<d.length;B++){var F=d[B],I=r[B],J=u[B],L=v[B],H=x[B];if(F!==e&&I!==e&&J!==e&&L!==e&&H!==e){H===I?null!==D&&H!==D&&(y=H>D):y=H>I;D=H;var P=k(I,J,L,H);P.pos=F;P.yc=(I+H)/2;P.i=B;P.dir=y?"increasing":"decreasing";P.x=P.pos;P.y=[L,J];A&&(P.orig_p=c[B]);C&&(P.tx=p.text[B]);z&&(P.htx=p.hovertext[B]);t.push(P)}else t.push({pos:F,
empty:!0})}p._extremes[f._id]=a.findExtremes(f,l.concat(v,u),{padded:!0});t.length&&(t[0].t={labels:{open:h(n,"open:")+" ",high:h(n,"high:")+" ",low:h(n,"low:")+" ",close:h(n,"close:")+" "}});return t}var l=b("../../lib"),h=l._,a=b("../../plots/cartesian/axes"),g=b("../../plots/cartesian/align_period"),e=b("../../constants/numerical").BADNUM;K.exports={calc:function(n,p){var c=a.getFromId(n,p.xaxis),d=a.getFromId(n,p.yaxis);var f=p._minDiff;if(!f){var k=n._fullData,r=[];f=Infinity;var u;for(u=0;u<
k.length;u++){var v=k[u];if("ohlc"===v.type&&!0===v.visible&&v.xaxis===c._id){r.push(v);var x=c.makeCalcdata(v,"x");v._origX=x;x=g(p,c,"x",x);v._xcalc=x;(v=l.distinctVals(x).minDiff)&&isFinite(v)&&(f=Math.min(f,v))}}Infinity===f&&(f=1);for(u=0;u<r.length;u++)r[u]._minDiff=f}f*=p.tickwidth;k=p._minDiff;p._minDiff=null;u=p._origX;p._origX=null;r=p._xcalc;p._xcalc=null;n=m(n,p,u,r,d,q);p._extremes[c._id]=a.findExtremes(c,r,{vpad:k/2});return n.length?(l.extendFlat(n[0].t,{wHover:k/2,tickLen:f}),n):[{t:{empty:!0}}]},
calcCommon:m}},{"../../constants/numerical":753,"../../lib":778,"../../plots/cartesian/align_period":825,"../../plots/cartesian/axes":828}],1135:[function(b,K,G){function q(g,e,n,p){n(p+".line.color");n(p+".line.width",e.line.width);n(p+".line.dash",e.line.dash)}var m=b("../../lib"),l=b("./ohlc_defaults"),h=b("../scatter/period_defaults"),a=b("./attributes");K.exports=function(g,e,n,p){function c(d,f){return m.coerce(g,e,a,d,f)}l(g,e,c,p)?(h(g,e,p,c,{x:!0}),c("line.width"),c("line.dash"),q(g,e,c,
"increasing"),q(g,e,c,"decreasing"),c("text"),c("hovertext"),c("tickwidth"),p._requestRangeslider[e.xaxis]=!0):e.visible=!1}},{"../../lib":778,"../scatter/period_defaults":1207,"./attributes":1133,"./ohlc_defaults":1138}],1136:[function(b,K,G){function q(c,d,f,k){function r(J){J=J.pos+B-d;return g.inbox(J-F,J+F,I)}function u(J){var L=J[A];J=J[t];return L===J||g.inbox(L-f,J-f,I)}function v(J){return(r(J)+u(J))/2}var x=c.cd,C=c.xa,z=x[0].trace,y=x[0].t,D=z.type,A="ohlc"===D?"l":"min",t="ohlc"===D?"h":
"max",B=y.bPos||0;D=y.bdPos||y.tickLen;var F=y.wHover;y=Math.min(1,D/Math.abs(C.r2c(C.range[1])-C.r2c(C.range[0])));var I=c.maxHoverDistance-y;y=c.maxSpikeDistance-y;k=g.getDistanceFunction(k,r,u,v);g.getClosest(x,k,c);if(!1===c.index)return null;x=x[c.index];if(x.empty)return null;z=z[x.dir];k=z.line.color;e.opacity(k)&&z.line.width?c.color=k:c.color=z.fillcolor;c.x0=C.c2p(x.pos+B-D,!0);c.x1=C.c2p(x.pos+B+D,!0);c.xLabelVal=void 0!==x.orig_p?x.orig_p:x.pos;c.spikeDistance=v(x)*y/I;c.xSpike=C.c2p(x.pos,
!0);return c}function m(c,d,f,k){var r=c.cd,u=c.ya,v=r[0].trace,x=r[0].t,C=[];c=q(c,d,f,k);if(!c)return[];r=r[c.index].hi||v.hoverinfo;d=r.split("+");if("all"!==r&&-1===d.indexOf("y"))return[];r=["high","open","close","low"];d={};for(f=0;f<r.length;f++){k=r[f];var z=v[k][c.index],y=u.c2p(z,!0);if(z in d){var D=d[z];D.yLabel+="<br>"+x.labels[k]+h.hoverLabelText(u,z)}else D=a.extendFlat({},c),D.y0=D.y1=y,D.yLabelVal=z,D.yLabel=x.labels[k]+h.hoverLabelText(u,z),D.name="",C.push(D),d[z]=D}return C}function l(c,
d,f,k){function r(D){return C.labels[D]+h.hoverLabelText(v,x[D][z])}var u=c.cd,v=c.ya,x=u[0].trace,C=u[0].t;c=q(c,d,f,k);if(!c)return[];u=u[c.index];var z=c.index=u.i;d=u.dir;k=u.hi||x.hoverinfo;f=k.split("+");var y="all"===k;k=y||-1!==f.indexOf("y");f=y||-1!==f.indexOf("text");d=k?[r("open"),r("high"),r("low"),r("close")+"  "+p[d]]:[];f&&n(u,x,d);c.extraText=d.join("<br>");c.y0=c.y1=v.c2p(u.yc,!0);return[c]}var h=b("../../plots/cartesian/axes"),a=b("../../lib"),g=b("../../components/fx"),e=b("../../components/color"),
n=b("../../lib").fillText;b=b("../../constants/delta.js");var p={increasing:b.INCREASING.SYMBOL,decreasing:b.DECREASING.SYMBOL};K.exports={hoverPoints:function(c,d,f,k){return c.cd[0].trace.hoverlabel.split?m(c,d,f,k):l(c,d,f,k)},hoverSplit:m,hoverOnPoints:l}},{"../../components/color":643,"../../components/fx":683,"../../constants/delta.js":747,"../../lib":778,"../../plots/cartesian/axes":828}],1137:[function(b,K,G){K.exports={moduleType:"trace",name:"ohlc",basePlotModule:b("../../plots/cartesian"),
categories:["cartesian","svg","showLegend"],meta:{},attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc").calc,plot:b("./plot"),style:b("./style"),hoverPoints:b("./hover").hoverPoints,selectPoints:b("./select")}},{"../../plots/cartesian":841,"./attributes":1133,"./calc":1134,"./defaults":1135,"./hover":1136,"./plot":1139,"./select":1140,"./style":1141}],1138:[function(b,K,G){var q=b("../../registry"),m=b("../../lib");K.exports=function(l,h,a,g){var e=a("x"),n=a("open"),p=a("high"),
c=a("low"),d=a("close");a("hoverlabel.split");q.getComponentMethod("calendars","handleTraceDefaults")(l,h,["x"],g);if(n&&p&&c&&d)return l=Math.min(n.length,p.length,c.length,d.length),e&&(l=Math.min(l,m.minRowLength(e))),h._length=l}},{"../../lib":778,"../../registry":911}],1139:[function(b,K,G){var q=b("d3"),m=b("../../lib");K.exports=function(l,h,a,g){var e=h.yaxis,n=h.xaxis,p=!!n.rangebreaks;m.makeTraceGroups(g,a,"trace ohlc").each(function(c){var d=q.select(this);c=c[0];var f=c.t;if(!0!==c.trace.visible||
f.empty)d.remove();else{var k=f.tickLen;d=d.selectAll("path").data(m.identity);d.enter().append("path");d.exit().remove();d.attr("d",function(r){if(r.empty)return"M0,0Z";var u=n.c2p(r.pos-k,!0),v=n.c2p(r.pos+k,!0),x=p?(u+v)/2:n.c2p(r.pos,!0),C=e.c2p(r.o,!0),z=e.c2p(r.h,!0),y=e.c2p(r.l,!0);r=e.c2p(r.c,!0);return"M"+u+","+C+"H"+x+"M"+x+","+z+"V"+y+"M"+v+","+r+"H"+x})}})}},{"../../lib":778,d3:169}],1140:[function(b,K,G){K.exports=function(q,m){var l=q.cd,h=q.xaxis,a=q.yaxis,g=[],e,n=l[0].t.bPos||0;if(!1===
m)for(e=0;e<l.length;e++)l[e].selected=0;else for(e=0;e<l.length;e++){var p=l[e];m.contains([h.c2p(p.pos+n),a.c2p(p.yc)],null,p.i,q)?(g.push({pointNumber:p.i,x:h.c2d(p.pos),y:a.c2d(p.yc)}),p.selected=1):p.selected=0}return g}},{}],1141:[function(b,K,G){var q=b("d3"),m=b("../../components/drawing"),l=b("../../components/color");K.exports=function(h,a,g){h=g?g:q.select(h).selectAll("g.ohlclayer").selectAll("g.trace");h.style("opacity",function(e){return e[0].trace.opacity});h.each(function(e){var n=
e[0].trace;q.select(this).selectAll("path").each(function(p){if(!p.empty){var c=n[p.dir].line;q.select(this).style("fill","none").call(l.stroke,c.color).call(m.dashLine,c.dash,c.width).style("opacity",n.selectedpoints&&!p.selected?.3:1)}})})}},{"../../components/color":643,"../../components/drawing":665,d3:169}],1142:[function(b,K,G){G=b("../../lib/extend").extendFlat;var q=b("../../plots/attributes"),m=b("../../plots/font_attributes"),l=b("../../components/colorscale/attributes"),h=b("../../plots/template_attributes").hovertemplateAttrs;
b=b("../../plots/domain").attributes;l=G({editType:"calc"},l("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:h({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});K.exports={domain:b({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:G({},q.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},
hovertemplate:h({editType:"plot",arrayOk:!1},{keys:"count probability category categorycount colorcount bandcolorcount".split(" ")}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:m({editType:"calc"}),tickfont:m({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",
label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:l,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,
editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legendgroup:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/domain":855,"../../plots/font_attributes":856,"../../plots/template_attributes":906}],1143:[function(b,K,G){var q=b("../../plots/get_data").getModuleCalcData,m=b("./plot");G.name="parcats";G.plot=function(l,h,a,g){h=q(l.calcdata,"parcats");h.length&&
m(l,h[0],a,g)};G.clean=function(l,h,a,g){l=g._has&&g._has("parcats");h=h._has&&h._has("parcats");l&&!h&&g._paperdiv.selectAll(".parcats").remove()}},{"../../plots/get_data":865,"./plot":1148}],1144:[function(b,K,G){function q(r,u,v){var x=r.map(function(C){return C.categories.length}).reduce(function(C,z){return Math.max(C,z)});return{dimensions:r,paths:u,trace:void 0,maxCats:x,count:v}}function m(r,u,v){r.valueInds.push(u);r.count+=v}function l(r,u,v){r.valueInds.push(u);r.count+=v}function h(r,
u){u=void 0===u||null===u?[]:u.map(function(A){return A});var v={},x={},C=[];u.forEach(function(A,t){v[A]=0;x[A]=t});for(var z=0;z<r.length;z++){var y=r[z];if(void 0===v[y]){v[y]=1;var D=u.push(y)-1;x[y]=D}else v[y]++,D=x[y];C.push(D)}r=u.map(function(A){return v[A]});return{uniqueValues:u,uniqueCounts:r,inds:C}}function a(r){var u=r.map(function(v){return v.displayindex});if(g(u))for(u=0;u<r.length;u++)r[u]._displayindex=r[u].displayindex;else for(u=0;u<r.length;u++)r[u]._displayindex=u}function g(r){for(var u=
Array(r.length),v=0;v<r.length;v++){if(0>r[v]||r[v]>=r.length||void 0!==u[r[v]])return!1;u[r[v]]=!0}return!0}var e=b("../../lib/gup").wrap,n=b("../../components/colorscale/helpers").hasColorscale,p=b("../../components/colorscale/calc"),c=b("../../lib/filter_unique.js"),d=b("../../components/drawing"),f=b("../../lib"),k=b("fast-isnumeric");K.exports=function(r,u){function v(P){if(f.isArrayOrTypedArray(y.color))var M=P=y.color[P%y.color.length];else P=y.color;return{color:D(P),rawColor:M}}var x=f.filterVisible(u.dimensions);
if(0===x.length)return[];var C=x.map(function(P){if("trace"===P.categoryorder)var M=null;else if("array"===P.categoryorder)M=P.categoryarray;else{M=c(P.values);for(var N=!0,T=0;T<M.length;T++)if(!k(M[T])){N=!1;break}M.sort(N?f.sorterAsc:void 0);"category descending"===P.categoryorder&&(M=M.reverse())}return h(P.values,M)});var z=f.isArrayOrTypedArray(u.counts)?u.counts:[u.counts];a(x);x.forEach(function(P,M){M=C[M];P._categoryarray=M.uniqueValues;P._ticktext=null===P.ticktext||void 0===P.ticktext?
[]:P.ticktext.slice();for(var N=P._ticktext.length;N<M.uniqueValues.length;N++)P._ticktext.push(M.uniqueValues[N])});var y=u.line;if(y){n(u,"line")&&p(r,u,{vals:u.line.color,containerStr:"line",cLetter:"c"});var D=d.tryColorscale(y)}else D=f.identity;var A=x[0].values.length,t={},B=C.map(function(P){return P.inds});var F=0;var I,J;for(I=0;I<A;I++){var L=[];for(J=0;J<B.length;J++)L.push(B[J][I]);r=z[I%z.length];F+=r;J=v(I);var H=L+"-"+J.rawColor;void 0===t[H]&&(t[H]={categoryInds:L,color:J.color,rawColor:J.rawColor,
valueInds:[],count:0});l(t[H],I,r)}x=x.map(function(P,M){return{dimensionInd:M,containerInd:P._index,displayInd:P._displayindex,dimensionLabel:P.label,count:F,categories:[],dragX:null}});for(I=0;I<A;I++)for(r=z[I%z.length],J=0;J<x.length;J++)B=x[J].containerInd,L=C[J].inds[I],H=x[J].categories,void 0===H[L]&&(H[L]={dimensionInd:J,categoryInd:L,categoryValue:u.dimensions[B]._categoryarray[L],displayInd:L,categoryLabel:u.dimensions[B]._ticktext[L],valueInds:[],count:0,dragY:null}),m(H[L],I,r);return e(q(x,
t,F))}},{"../../components/colorscale/calc":651,"../../components/colorscale/helpers":654,"../../components/drawing":665,"../../lib":778,"../../lib/filter_unique.js":769,"../../lib/gup":775,"fast-isnumeric":241}],1145:[function(b,K,G){function q(c,d,f,k,r){r("line.shape");r("line.hovertemplate");var u=r("line.color",k.colorway[0]);if(h(c,"line")&&l.isArrayOrTypedArray(u)){if(u.length)return r("line.colorscale"),a(c,d,k,r,{prefix:"line.",cLetter:"c"}),u.length;d.line.color=f}return Infinity}function m(c,
d){function f(v,x){return l.coerce(c,d,n.dimensions,v,x)}var k=f("values"),r=f("visible");k&&k.length||(r=d.visible=!1);if(r){f("label");f("displayindex",d._index);k=c.categoryarray;k=Array.isArray(k)&&0<k.length;var u;k&&(u="array");u=f("categoryorder",u);"array"===u?(f("categoryarray"),f("ticktext")):(delete c.categoryarray,delete c.ticktext);k||"array"!==u||(d.categoryorder="trace")}}var l=b("../../lib"),h=b("../../components/colorscale/helpers").hasColorscale,a=b("../../components/colorscale/defaults"),
g=b("../../plots/domain").defaults,e=b("../../plots/array_container_defaults"),n=b("./attributes"),p=b("../parcoords/merge_length");K.exports=function(c,d,f,k){function r(v,x){return l.coerce(c,d,n,v,x)}var u=e(c,d,{name:"dimensions",handleItemDefaults:m});f=q(c,d,f,k,r);g(d,k,r);Array.isArray(u)&&u.length||(d.visible=!1);p(d,u,"values",f);r("hoveron");r("hovertemplate");r("arrangement");r("bundlecolors");r("sortpaths");r("counts");l.coerceFont(r,"labelfont",{family:k.font.family,size:Math.round(k.font.size),
color:k.font.color});l.coerceFont(r,"tickfont",{family:k.font.family,size:Math.round(k.font.size/1.2),color:k.font.color})}},{"../../components/colorscale/defaults":653,"../../components/colorscale/helpers":654,"../../lib":778,"../../plots/array_container_defaults":823,"../../plots/domain":855,"../parcoords/merge_length":1158,"./attributes":1142}],1146:[function(b,K,G){K.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc"),plot:b("./plot"),colorbar:{container:"line",
min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:b("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":1142,"./base_plot":1143,"./calc":1144,"./defaults":1145,"./plot":1148}],1147:[function(b,K,G){function q(ba,ma,qa,ka){ba=ba.map(P.bind(0,ma,qa));ka=ka.selectAll("g.parcatslayer").data([null]);ka.enter().append("g").attr("class","parcatslayer").style("pointer-events","all");ka=ka.selectAll("g.trace.parcats").data(ba,m);ba=ka.enter().append("g").attr("class","trace parcats");
ka.attr("transform",function(ia){return aa(ia.x,ia.y)});ba.append("g").attr("class","paths");qa=ka.select("g.paths").selectAll("path.path").data(function(ia){return ia.paths},m);qa.attr("fill",function(ia){return ia.model.color});var oa=qa.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(ia){return ia.model.color}).attr("fill-opacity",0);c(oa);qa.attr("d",function(ia){return ia.svgD});oa.empty()||qa.sort(h);qa.exit().remove();qa.on("mouseover",a).on("mouseout",
g).on("click",p);ba.append("g").attr("class","dimensions");ba=ka.select("g.dimensions").selectAll("g.dimension").data(function(ia){return ia.dimensions},m);ba.enter().append("g").attr("class","dimension");ba.attr("transform",function(ia){return aa(ia.x,0)});ba.exit().remove();qa=ba.selectAll("g.category").data(function(ia){return ia.categories},m);oa=qa.enter().append("g").attr("class","category");qa.attr("transform",function(ia){return aa(0,ia.y)});oa.append("rect").attr("class","catrect").attr("pointer-events",
"none");qa.select("rect.catrect").attr("fill","none").attr("width",function(ia){return ia.width}).attr("height",function(ia){return ia.height});f(oa);var na=qa.selectAll("rect.bandrect").data(function(ia){return ia.bands},m);na.each(function(){Z.raiseToTop(this)});na.attr("fill",function(ia){return ia.color});var la=na.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(ia){return ia.color}).attr("fill-opacity",0);na.attr("fill",function(ia){return ia.color}).attr("width",
function(ia){return ia.width}).attr("height",function(ia){return ia.height}).attr("y",function(ia){return ia.y}).attr("cursor",function(ia){return"fixed"===ia.parcatsViewModel.arrangement?"default":"perpendicular"===ia.parcatsViewModel.arrangement?"ns-resize":"move"});k(la);na.exit().remove();oa.append("text").attr("class","catlabel").attr("pointer-events","none");na=ma._fullLayout.paper_bgcolor;qa.select("text.catlabel").attr("text-anchor",function(ia){return l(ia)?"start":"end"}).attr("alignment-baseline",
"middle").style("text-shadow",na+" -1px  1px 2px, "+na+" 1px  1px 2px, "+na+"  1px -1px 2px, "+na+" -1px -1px 2px").style("fill","rgb(0, 0, 0)").attr("x",function(ia){return l(ia)?ia.width+5:-5}).attr("y",function(ia){return ia.height/2}).text(function(ia){return ia.model.categoryLabel}).each(function(ia){fa.font(U.select(this),ia.parcatsViewModel.categorylabelfont);ja.convertToTspans(U.select(this),ma)});oa.append("text").attr("class","dimlabel");qa.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline",
"baseline").attr("cursor",function(ia){return"fixed"===ia.parcatsViewModel.arrangement?"default":"ew-resize"}).attr("x",function(ia){return ia.width/2}).attr("y",-5).text(function(ia,sa){return 0===sa?ia.parcatsViewModel.model.dimensions[ia.model.dimensionInd].dimensionLabel:null}).each(function(ia){fa.font(U.select(this),ia.parcatsViewModel.labelfont)});qa.selectAll("rect.bandrect").on("mouseover",A).on("mouseout",t);qa.exit().remove();ba.call(U.behavior.drag().origin(function(ia){return{x:ia.x,
y:0}}).on("dragstart",B).on("drag",F).on("dragend",I));ka.each(function(ia){ia.traceSelection=U.select(this);ia.pathSelection=U.select(this).selectAll("g.paths").selectAll("path.path");ia.dimensionSelection=U.select(this).selectAll("g.dimensions").selectAll("g.dimension")});ka.exit().remove()}function m(ba){return ba.key}function l(ba){return ba.model.dimensionInd===ba.parcatsViewModel.dimensions[ba.parcatsViewModel.dimensions.length-1].model.dimensionInd}function h(ba,ma){return ba.model.rawColor>
ma.model.rawColor?1:ba.model.rawColor<ma.model.rawColor?-1:0}function a(ba){if(!ba.parcatsViewModel.dragDimension&&-1===ba.parcatsViewModel.hoverinfoItems.indexOf("skip")){Z.raiseToTop(this);d(U.select(this));var ma=e(ba),qa=n(ba);ba.parcatsViewModel.graphDiv.emit("plotly_hover",{points:ma,event:U.event,constraints:qa});if(-1===ba.parcatsViewModel.hoverinfoItems.indexOf("none")){var ka=U.mouse(this)[0];ma=ba.parcatsViewModel.graphDiv;qa=ba.parcatsViewModel.trace;var oa=ma._fullLayout,na=oa._paperdiv.node().getBoundingClientRect(),
la=ba.parcatsViewModel.graphDiv.getBoundingClientRect(),ia;for(ia=0;ia<ba.leftXs.length-1;ia++)if(ba.leftXs[ia]+ba.dimWidths[ia]-2<=ka&&ka<=ba.leftXs[ia+1]+2){var sa=ba.parcatsViewModel.dimensions[ia];sa=(sa.x+sa.width+ba.parcatsViewModel.dimensions[ia+1].x)/2;var ta=(ba.topYs[ia]+ba.topYs[ia+1]+ba.height)/2;break}sa=ba.parcatsViewModel.x+sa;ta=ba.parcatsViewModel.y+ta;ia=ha.mostReadable(ba.model.color,["black","white"]);ka=ba.model.count;var Aa=ka/ba.parcatsViewModel.model.count,Ka={countLabel:ka,
probabilityLabel:Aa.toFixed(3)},Sa=[];-1!==ba.parcatsViewModel.hoverinfoItems.indexOf("count")&&Sa.push(["Count:",Ka.countLabel].join(" "));-1!==ba.parcatsViewModel.hoverinfoItems.indexOf("probability")&&Sa.push(["P:",Ka.probabilityLabel].join(" "));Sa=Sa.join("<br>");var db=U.mouse(ma)[0];X.loneHover({trace:qa,x:sa-na.left+la.left,y:ta-na.top+la.top,text:Sa,color:ba.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:ia,idealAlign:db<sa?"right":"left",
hovertemplate:(qa.line||{}).hovertemplate,hovertemplateLabels:Ka,eventData:[{data:qa._input,fullData:qa,count:ka,probability:Aa}]},{container:oa._hoverlayer.node(),outerContainer:oa._paper.node(),gd:ma})}}}function g(ba){if(!ba.parcatsViewModel.dragDimension&&(c(U.select(this)),X.loneUnhover(ba.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),ba.parcatsViewModel.pathSelection.sort(h),-1===ba.parcatsViewModel.hoverinfoItems.indexOf("skip"))){var ma=e(ba),qa=n(ba);ba.parcatsViewModel.graphDiv.emit("plotly_unhover",
{points:ma,event:U.event,constraints:qa})}}function e(ba){for(var ma=[],qa=J(ba.parcatsViewModel),ka=0;ka<ba.model.valueInds.length;ka++)ma.push({curveNumber:qa,pointNumber:ba.model.valueInds[ka]});return ma}function n(ba){for(var ma={},qa=ba.parcatsViewModel.model.dimensions,ka=0;ka<qa.length;ka++){var oa=qa[ka];ma[oa.containerInd]=oa.categories[ba.model.categoryInds[ka]].categoryValue}void 0!==ba.model.rawColor&&(ma.color=ba.model.rawColor);return ma}function p(ba){if(-1===ba.parcatsViewModel.hoverinfoItems.indexOf("skip")){var ma=
e(ba),qa=n(ba);ba.parcatsViewModel.graphDiv.emit("plotly_click",{points:ma,event:U.event,constraints:qa})}}function c(ba){ba.attr("fill",function(ma){return ma.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function d(ba){ba.attr("fill-opacity",.8).attr("stroke",function(ma){return ha.mostReadable(ma.model.color,["black","white"])}).attr("stroke-width",.3)}function f(ba){ba.select("rect.catrect").attr("stroke","black").attr("stroke-width",
1).attr("stroke-opacity",1)}function k(ba){ba.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function r(ba){var ma=ba.categoryViewModel.model.dimensionInd,qa=ba.categoryViewModel.model.categoryInd;return ba.parcatsViewModel.pathSelection.filter(function(ka){return ka.model.categoryInds[ma]===qa&&ka.model.color===ba.color})}function u(ba){U.select(ba.parentNode).selectAll("rect.bandrect").each(function(ma){ma=r(ma);d(ma);ma.each(function(){Z.raiseToTop(this)})});
U.select(ba.parentNode).select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}function v(ba){var ma=U.select(ba).datum(),qa=r(ma);d(qa);qa.each(function(){Z.raiseToTop(this)});U.select(ba.parentNode).selectAll("rect.bandrect").filter(function(ka){return ka.color===ma.color}).each(function(){Z.raiseToTop(this);U.select(this).attr("stroke","black").attr("stroke-width",1.5)})}function x(ba,ma,qa){var ka=U.select(ba).datum(),oa=ka.categoryViewModel.model;ka=ka.parcatsViewModel.graphDiv;
var na=[];U.select(ba.parentNode).selectAll("rect.bandrect").each(function(la){r(la).each(function(ia){Array.prototype.push.apply(na,e(ia))})});ba={};ba[oa.dimensionInd]=oa.categoryValue;ka.emit(ma,{points:na,event:qa,constraints:ba})}function C(ba,ma,qa){ba=U.select(ba).datum();var ka=ba.categoryViewModel.model,oa=ba.parcatsViewModel.graphDiv,na=[];r(ba).each(function(ia){Array.prototype.push.apply(na,e(ia))});var la={};la[ka.dimensionInd]=ka.categoryValue;void 0!==ba.rawColor&&(la.color=ba.rawColor);
oa.emit(ma,{points:na,event:qa,constraints:la})}function z(ba,ma,qa){ba._fullLayout._calcInverseTransform(ba);var ka=ba._fullLayout._invScaleX;ba=ba._fullLayout._invScaleY;qa=U.select(qa.parentNode).select("rect.catrect");var oa=qa.node().getBoundingClientRect(),na=qa.datum(),la=na.parcatsViewModel,ia=la.model.dimensions[na.model.dimensionInd];qa=la.trace;var sa=oa.top+oa.height/2;1<la.dimensions.length&&ia.displayInd===la.dimensions.length-1?(oa=oa.left,la="left"):(oa=oa.left+oa.width,la="right");
ia=na.model.count;var ta=na.model.categoryLabel,Aa=ia/na.parcatsViewModel.model.count,Ka={countLabel:ia,categoryLabel:ta,probabilityLabel:Aa.toFixed(3)},Sa=[];-1!==na.parcatsViewModel.hoverinfoItems.indexOf("count")&&Sa.push(["Count:",Ka.countLabel].join(" "));-1!==na.parcatsViewModel.hoverinfoItems.indexOf("probability")&&Sa.push(["P("+Ka.categoryLabel+"):",Ka.probabilityLabel].join(" "));na=Sa.join("<br>");return{trace:qa,x:ka*(oa-ma.left),y:ba*(sa-ma.top),text:na,color:"lightgray",borderColor:"black",
fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:la,hovertemplate:qa.hovertemplate,hovertemplateLabels:Ka,eventData:[{data:qa._input,fullData:qa,count:ia,category:ta,probability:Aa}]}}function y(ba,ma,qa){var ka=[];U.select(qa.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){ka.push(z(ba,ma,this))});return ka}function D(ba,ma,qa){ba._fullLayout._calcInverseTransform(ba);var ka=ba._fullLayout._invScaleX;ba=ba._fullLayout._invScaleY;
var oa=qa.getBoundingClientRect(),na=U.select(qa).datum(),la=na.categoryViewModel,ia=la.parcatsViewModel,sa=ia.model.dimensions[la.model.dimensionInd];qa=ia.trace;var ta=oa.y+oa.height/2;1<ia.dimensions.length&&sa.displayInd===ia.dimensions.length-1?(oa=oa.left,sa="left"):(oa=oa.left+oa.width,sa="right");var Aa=la.model.categoryLabel,Ka=na.parcatsViewModel.model.count,Sa=0;na.categoryViewModel.bands.forEach(function(nb){nb.color===na.color&&(Sa+=nb.count)});var db=la.model.count,eb=0;ia.pathSelection.each(function(nb){nb.model.color===
na.color&&(eb+=nb.model.count)});ia=Sa/Ka;var lb=Sa/eb,ab=Sa/db,Ya={countLabel:Ka,categoryLabel:Aa,probabilityLabel:ia.toFixed(3)},hb=[];-1!==la.parcatsViewModel.hoverinfoItems.indexOf("count")&&hb.push(["Count:",Ya.countLabel].join(" "));-1!==la.parcatsViewModel.hoverinfoItems.indexOf("probability")&&(hb.push("P(color \u2229 "+Aa+"): "+Ya.probabilityLabel),hb.push("P("+Aa+" | color): "+lb.toFixed(3)),hb.push("P(color | "+Aa+"): "+ab.toFixed(3)));la=hb.join("<br>");lb=ha.mostReadable(na.color,["black",
"white"]);return{trace:qa,x:ka*(oa-ma.left),y:ba*(ta-ma.top),text:la,color:na.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:lb,fontSize:10,idealAlign:sa,hovertemplate:qa.hovertemplate,hovertemplateLabels:Ya,eventData:[{data:qa._input,fullData:qa,category:Aa,count:Ka,probability:ia,categorycount:db,colorcount:eb,bandcolorcount:Sa}]}}function A(ba){if(!(ba.parcatsViewModel.dragDimension||-1!==ba.parcatsViewModel.hoverinfoItems.indexOf("skip")||-1>U.mouse(this)[1])){var ma=
ba.parcatsViewModel.graphDiv,qa=ma._fullLayout,ka=qa._paperdiv.node().getBoundingClientRect(),oa=ba.parcatsViewModel.hoveron;"color"===oa?(v(this),C(this,"plotly_hover",U.event)):(u(this),x(this,"plotly_hover",U.event));if(-1===ba.parcatsViewModel.hoverinfoItems.indexOf("none")){var na;"category"===oa?na=z(ma,ka,this):"color"===oa?na=D(ma,ka,this):"dimension"===oa&&(na=y(ma,ka,this));na&&X.loneHover(na,{container:qa._hoverlayer.node(),outerContainer:qa._paper.node(),gd:ma})}}}function t(ba){var ma=
ba.parcatsViewModel;ma.dragDimension||(c(ma.pathSelection),f(ma.dimensionSelection.selectAll("g.category")),k(ma.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),X.loneUnhover(ma.graphDiv._fullLayout._hoverlayer.node()),ma.pathSelection.sort(h),-1===ma.hoverinfoItems.indexOf("skip")&&("color"===ba.parcatsViewModel.hoveron?C(this,"plotly_unhover",U.event):x(this,"plotly_unhover",U.event)))}function B(ba){"fixed"!==ba.parcatsViewModel.arrangement&&(ba.dragDimensionDisplayInd=ba.model.displayInd,
ba.initialDragDimensionDisplayInds=ba.parcatsViewModel.model.dimensions.map(function(ma){return ma.displayInd}),ba.dragHasMoved=!1,ba.dragCategoryDisplayInd=null,U.select(this).selectAll("g.category").select("rect.catrect").each(function(ma){var qa=U.mouse(this)[0],ka=U.mouse(this)[1];-2<=qa&&qa<=ma.width+2&&-2<=ka&&ka<=ma.height+2&&(ba.dragCategoryDisplayInd=ma.model.displayInd,ba.initialDragCategoryDisplayInds=ba.model.categories.map(function(oa){return oa.displayInd}),ma.model.dragY=ma.y,Z.raiseToTop(this.parentNode),
U.select(this.parentNode).selectAll("rect.bandrect").each(function(oa){oa.y<ka&&ka<=oa.y+oa.height&&(ba.potentialClickBand=this)}))}),ba.parcatsViewModel.dragDimension=ba,X.loneUnhover(ba.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function F(ba){if("fixed"!==ba.parcatsViewModel.arrangement&&(ba.dragHasMoved=!0,null!==ba.dragDimensionDisplayInd)){var ma=ba.dragDimensionDisplayInd,qa=ma-1,ka=ma+1,oa=ba.parcatsViewModel.dimensions[ma];if(null!==ba.dragCategoryDisplayInd){var na=oa.categories[ba.dragCategoryDisplayInd];
na.model.dragY+=U.event.dy;var la=na.model.dragY,ia=na.model.displayInd,sa=oa.categories,ta=sa[ia-1];sa=sa[ia+1];void 0!==ta&&la<ta.y+ta.height/2&&(na.model.displayInd=ta.model.displayInd,ta.model.displayInd=ia);void 0!==sa&&la+na.height>sa.y+sa.height/2&&(na.model.displayInd=sa.model.displayInd,sa.model.displayInd=ia);ba.dragCategoryDisplayInd=na.model.displayInd}if(null===ba.dragCategoryDisplayInd||"freeform"===ba.parcatsViewModel.arrangement)oa.model.dragX=U.event.x,qa=ba.parcatsViewModel.dimensions[qa],
ka=ba.parcatsViewModel.dimensions[ka],void 0!==qa&&oa.model.dragX<qa.x+qa.width&&(oa.model.displayInd=qa.model.displayInd,qa.model.displayInd=ma),void 0!==ka&&oa.model.dragX+oa.width>ka.x&&(oa.model.displayInd=ka.model.displayInd,ka.model.displayInd=ba.dragDimensionDisplayInd),ba.dragDimensionDisplayInd=oa.model.displayInd;T(ba.parcatsViewModel);N(ba.parcatsViewModel);H(ba.parcatsViewModel);L(ba.parcatsViewModel)}}function I(ba){if("fixed"!==ba.parcatsViewModel.arrangement&&null!==ba.dragDimensionDisplayInd){U.select(this).selectAll("text").attr("font-weight",
"normal");var ma={},qa=J(ba.parcatsViewModel),ka=ba.parcatsViewModel.model.dimensions.map(function(ta){return ta.displayInd}),oa=ba.initialDragDimensionDisplayInds.some(function(ta,Aa){return ta!==ka[Aa]});oa&&ka.forEach(function(ta,Aa){ma["dimensions["+ba.parcatsViewModel.model.dimensions[Aa].containerInd+"].displayindex"]=ta});var na=!1;if(null!==ba.dragCategoryDisplayInd){var la=ba.model.categories.map(function(ta){return ta.displayInd});if(na=ba.initialDragCategoryDisplayInds.some(function(ta,
Aa){return ta!==la[Aa]})){var ia=ba.model.categories.slice().sort(function(ta,Aa){return ta.displayInd-Aa.displayInd}),sa=ia.map(function(ta){return ta.categoryValue});ia=ia.map(function(ta){return ta.categoryLabel});ma["dimensions["+ba.model.containerInd+"].categoryarray"]=[sa];ma["dimensions["+ba.model.containerInd+"].ticktext"]=[ia];ma["dimensions["+ba.model.containerInd+"].categoryorder"]="array"}}-1===ba.parcatsViewModel.hoverinfoItems.indexOf("skip")&&!ba.dragHasMoved&&ba.potentialClickBand&&
("color"===ba.parcatsViewModel.hoveron?C(ba.potentialClickBand,"plotly_click",U.event.sourceEvent):x(ba.potentialClickBand,"plotly_click",U.event.sourceEvent));ba.model.dragX=null;null!==ba.dragCategoryDisplayInd&&(ba.parcatsViewModel.dimensions[ba.dragDimensionDisplayInd].categories[ba.dragCategoryDisplayInd].model.dragY=null,ba.dragCategoryDisplayInd=null);ba.dragDimensionDisplayInd=null;ba.parcatsViewModel.dragDimension=null;ba.dragHasMoved=null;ba.potentialClickBand=null;T(ba.parcatsViewModel);
N(ba.parcatsViewModel);U.transition().duration(300).ease("cubic-in-out").each(function(){H(ba.parcatsViewModel,!0);L(ba.parcatsViewModel,!0)}).each("end",function(){(oa||na)&&S.restyle(ba.parcatsViewModel.graphDiv,ma,[qa])})}}function J(ba){for(var ma,qa=ba.graphDiv._fullData,ka=0;ka<qa.length;ka++)if(ba.key===qa[ka].uid){ma=ka;break}return ma}function L(ba,ma){void 0===ma&&(ma=!1);ba.pathSelection.data(function(qa){return qa.paths},m);(function(qa){return ma?qa.transition():qa})(ba.pathSelection).attr("d",
function(qa){return qa.svgD})}function H(ba,ma){function qa(oa){return ma?oa.transition():oa}void 0===ma&&(ma=!1);ba.dimensionSelection.data(function(oa){return oa.dimensions},m);var ka=ba.dimensionSelection.selectAll("g.category").data(function(oa){return oa.categories},m);qa(ba.dimensionSelection).attr("transform",function(oa){return aa(oa.x,0)});qa(ka).attr("transform",function(oa){return aa(0,oa.y)});ka.select(".dimlabel").text(function(oa,na){return 0===na?oa.parcatsViewModel.model.dimensions[oa.model.dimensionInd].dimensionLabel:
null});ka.select(".catlabel").attr("text-anchor",function(oa){return l(oa)?"start":"end"}).attr("x",function(oa){return l(oa)?oa.width+5:-5}).each(function(oa){if(l(oa)){oa=oa.width+5;var na="start"}else oa=-5,na="end";U.select(this).selectAll("tspan").attr("x",oa).attr("text-anchor",na)});ba=ka.selectAll("rect.bandrect").data(function(oa){return oa.bands},m);ka=ba.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(oa){return oa.color}).attr("fill-opacity",
0);ba.attr("fill",function(oa){return oa.color}).attr("width",function(oa){return oa.width}).attr("height",function(oa){return oa.height}).attr("y",function(oa){return oa.y});k(ka);ba.each(function(){Z.raiseToTop(this)});ba.exit().remove()}function P(ba,ma,qa){qa=qa[0];var ka=ma.margin||{l:80,r:80,t:100,b:80},oa=qa.trace,na=oa.domain,la=ma.width,ia=Math.floor(la*(na.x[1]-na.x[0])),sa=Math.floor(ma.height*(na.y[1]-na.y[0]));la=na.x[0]*la+ka.l;ma=ma.height-na.y[1]*ma.height+ka.t;na=oa.line.shape;var ta=
"all"===oa.hoverinfo?["count","probability"]:(oa.hoverinfo||"").split("+");ba={trace:oa,key:oa.uid,model:qa,x:la,y:ma,width:ia,height:sa,hoveron:oa.hoveron,hoverinfoItems:ta,arrangement:oa.arrangement,bundlecolors:oa.bundlecolors,sortpaths:oa.sortpaths,labelfont:oa.labelfont,categorylabelfont:oa.tickfont,pathShape:na,dragDimension:null,margin:ka,paths:[],dimensions:[],graphDiv:ba,traceSelection:null,pathSelection:null,dimensionSelection:null};qa.dimensions&&(T(ba),N(ba));return ba}function M(ba,ma,
qa,ka,oa){var na=[],la=[],ia;for(ia=0;ia<qa.length-1;ia++){var sa=U.interpolateNumber(qa[ia]+ba[ia],ba[ia+1]);na.push(sa(oa));la.push(sa(1-oa))}oa="M "+ba[0]+","+ma[0];oa+="l"+qa[0]+",0 ";for(ia=1;ia<qa.length;ia++)oa+="C"+na[ia-1]+","+ma[ia-1]+" "+la[ia-1]+","+ma[ia]+" "+ba[ia]+","+ma[ia],oa+="l"+qa[ia]+",0 ";oa=oa+("l0,"+ka+" l -")+(qa[qa.length-1]+",0 ");for(ia=qa.length-2;0<=ia;ia--)oa+="C"+la[ia]+","+(ma[ia+1]+ka)+" "+na[ia]+","+(ma[ia]+ka)+" "+(ba[ia]+qa[ia])+","+(ma[ia]+ka),oa+="l-"+qa[ia]+
",0 ";return oa+"Z"}function N(ba){function ma(va){var Ba=va.categoryInds.map(function(Ga,Na){return na[Na][Ga]});return ia.map(function(Ga){return Ba[Ga]})}var qa=ba.dimensions,ka=ba.model,oa=qa.map(function(va){return va.categories.map(function(Ba){return Ba.y})}),na=ba.model.dimensions.map(function(va){return va.categories.map(function(Ba){return Ba.displayInd})}),la=ba.model.dimensions.map(function(va){return va.displayInd}),ia=ba.dimensions.map(function(va){return va.model.dimensionInd}),sa=
qa.map(function(va){return va.x}),ta=qa.map(function(va){return va.width}),Aa=[];for(Ka in ka.paths)ka.paths.hasOwnProperty(Ka)&&Aa.push(ka.paths[Ka]);Aa.sort(function(va,Ba){var Ga=ma(va),Na=ma(Ba);"backward"===ba.sortpaths&&(Ga.reverse(),Na.reverse());Ga.push(va.valueInds[0]);Na.push(Ba.valueInds[0]);ba.bundlecolors&&(Ga.unshift(va.rawColor),Na.unshift(Ba.rawColor));return Ga<Na?-1:Ga>Na?1:0});ka=Array(Aa.length);var Ka=qa[0].model.count;qa=qa[0].categories.map(function(va){return va.height}).reduce(function(va,
Ba){return va+Ba});for(var Sa=0;Sa<Aa.length;Sa++){var db=Aa[Sa];var eb=0<Ka?db.count/Ka*qa:0;for(var lb=Array(oa.length),ab=0;ab<db.categoryInds.length;ab++){var Ya=na[ab][db.categoryInds[ab]],hb=la[ab];lb[hb]=oa[hb][Ya];oa[hb][Ya]+=eb;Ya=ba.dimensions[hb].categories[Ya];hb=Ya.bands.length;var nb=Ya.bands[hb-1];void 0===nb||db.rawColor!==nb.rawColor?(hb=void 0===nb?0:nb.y+nb.height,Ya.bands.push({key:hb,color:db.color,rawColor:db.rawColor,height:eb,width:Ya.width,count:db.count,y:hb,categoryViewModel:Ya,
parcatsViewModel:ba})):(Ya=Ya.bands[hb-1],Ya.height+=eb,Ya.count+=db.count)}ab="hspline"===ba.pathShape?M(sa,lb,ta,eb,.5):M(sa,lb,ta,eb,0);ka[Sa]={key:db.valueInds[0],model:db,height:eb,leftXs:sa,topYs:lb,dimWidths:ta,svgD:ab,parcatsViewModel:ba}}ba.paths=ka}function T(ba){var ma=ba.model.dimensions.map(function(oa){return{displayInd:oa.displayInd,dimensionInd:oa.dimensionInd}});ma.sort(function(oa,na){return oa.displayInd-na.displayInd});var qa=[],ka;for(ka in ma)qa.push(Q(ba,ba.model.dimensions[ma[ka].dimensionInd]));
ba.dimensions=qa}function Q(ba,ma){var qa=ba.model.dimensions.length;qa=40+(1<qa?(ba.width-80-16)/(qa-1):0)*ma.displayInd;var ka=[],oa=ba.model.maxCats,na=ma.categories.length,la=ma.count,ia=ba.height-8*(oa-1),sa=8*(oa-na)/2,ta=ma.categories.map(function(Sa){return{displayInd:Sa.displayInd,categoryInd:Sa.categoryInd}});ta.sort(function(Sa,db){return Sa.displayInd-db.displayInd});for(oa=0;oa<na;oa++){var Aa=ta[oa].categoryInd;var Ka=ma.categories[Aa];Aa=0<la?Ka.count/la*ia:0;Ka={key:Ka.valueInds[0],
model:Ka,width:16,height:Aa,y:null!==Ka.dragY?Ka.dragY:sa,bands:[],parcatsViewModel:ba};sa=sa+Aa+8;ka.push(Ka)}return{key:ma.dimensionInd,x:null!==ma.dragX?ma.dragX:qa,y:0,width:16,model:ma,categories:ka,parcatsViewModel:ba,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}var U=b("d3"),S=b("../../plot_api/plot_api"),X=b("../../components/fx"),Z=b("../../lib"),aa=Z.strTranslate,
fa=b("../../components/drawing"),ha=b("tinycolor2"),ja=b("../../lib/svg_text_utils");K.exports=function(ba,ma,qa,ka){q(qa,ba,ka,ma)}},{"../../components/drawing":665,"../../components/fx":683,"../../lib":778,"../../lib/svg_text_utils":803,"../../plot_api/plot_api":814,d3:169,tinycolor2:576}],1148:[function(b,K,G){var q=b("./parcats");K.exports=function(m,l,h,a){var g=m._fullLayout,e=g._size;q(m,g._paper,l,{width:e.w,height:e.h,margin:{t:e.t,r:e.r,b:e.b,l:e.l}},h,a)}},{"./parcats":1147}],1149:[function(b,
K,G){G=b("../../components/colorscale/attributes");var q=b("../../plots/cartesian/layout_attributes"),m=b("../../plots/font_attributes"),l=b("../../plots/domain").attributes,h=b("../../lib/extend").extendFlat;b=b("../../plot_api/plot_template").templatedArray;K.exports={domain:l({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:m({editType:"plot"}),tickfont:m({editType:"plot"}),
rangefont:m({editType:"plot"}),dimensions:b("dimension",{label:{valType:"string",editType:"plot"},tickvals:h({},q.tickvals,{editType:"plot"}),ticktext:h({},q.ticktext,{editType:"plot"}),tickformat:h({},q.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"number",
editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:h({editType:"calc"},G("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"}))}},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plot_api/plot_template":817,"../../plots/cartesian/layout_attributes":842,"../../plots/domain":855,"../../plots/font_attributes":856}],
1150:[function(b,K,G){function q(P,M,N,T){a:{for(var Q=0;Q<T.length;Q++)if(N>=T[Q][0]&&N<=T[Q][1]){T=!0;break a}T=!1}if(T)return N;P=P?-1:1;var U=0;T=M.length-1;0>P&&(Q=U,U=T,T=Q);for(var S=Q=M[U];P*U<P*T;U+=P){var X=U+P,Z=M[X];if(P*N<P*(Q*(1-H)+Z*H))return Q*(1-L)+S*L;if(P*N<P*Z||X===T)return Z*(1-L)+Q*L;S=Q;Q=Z}}function m(P){P.attr("x",-A.bar.captureWidth/2).attr("width",A.bar.captureWidth)}function l(P){P.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",
0)}function h(P){if(!P.brush.filterSpecified)return"0,"+P.height;for(var M=a(P.brush.filter.getConsolidated(),P.height),N=[0],T,Q,U=M.length?M[0][0]:null,S=0;S<M.length;S++)T=M[S],Q=T[1]-T[0],N.push(U),N.push(Q),Q=S+1,Q<M.length&&(U=M[Q][0]-T[1]);N.push(P.height);return N}function a(P,M){return P.map(function(N){return N.map(function(T){return Math.max(0,T*M)}).sort(I)})}function g(){t.select(document.body).style("cursor",null)}function e(P){P.attr("stroke-dasharray",h)}function n(P,M){P=t.select(P).selectAll(".highlight, .highlight-shadow");
M=M?P.transition().duration(A.bar.snapDuration).each("end",M):P;e(M)}function p(P,M){var N=P.brush,T={};if(N.filterSpecified){var Q=P.height;N=N.filter.getConsolidated();var U=a(N,Q),S=NaN,X=NaN,Z=NaN;for(Q=0;Q<=U.length;Q++){var aa=U[Q];if(aa&&aa[0]<=M&&M<=aa[1]){S=Q;break}else if(X=Q?Q-1:NaN,aa&&aa[0]>M){Z=Q;break}}Q=S;isNaN(Q)&&(Q=isNaN(X)||isNaN(Z)?isNaN(X)?Z:X:M-U[X][1]<U[Z][0]-M?X:Z);isNaN(Q)||(U=U[Q],X=A.bar.handleHeight,X=M>U[1]+X||M<U[0]-X?void 0:M>=.9*U[1]+.1*U[0]?"n":M<=.9*U[0]+.1*U[1]?
"s":"ns",X&&(T.interval=N[Q],T.intervalPix=U,T.region=X))}if(P.ordinal&&!T.region)for(N=P.unitTickvals,P=P.unitToPaddedPx.invert(M),Q=0;Q<N.length;Q++)if(M=[.25*N[Math.max(Q-1,0)]+.75*N[Q],.25*N[Math.min(Q+1,N.length-1)]+.75*N[Q]],P>=M[0]&&P<=M[1]){T.clickableOrdinalRange=M;break}return T}function c(P,M){t.event.sourceEvent.stopPropagation();P=M.height-t.mouse(P)[1]-2*A.verticalPadding;var N=M.unitToPaddedPx.invert(P),T=M.brush,Q=p(M,P),U=Q.interval,S=T.svgBrush;S.wasDragged=!1;S.grabbingBar="ns"===
Q.region;if(S.grabbingBar){var X=U.map(M.unitToPaddedPx);S.grabPoint=P-X[0]-A.verticalPadding;S.barLength=X[1]-X[0]}S.clickableOrdinalRange=Q.clickableOrdinalRange;S.stayingIntervals=M.multiselect&&T.filterSpecified?T.filter.getConsolidated():[];U&&(S.stayingIntervals=S.stayingIntervals.filter(function(Z){return Z[0]!==U[0]&&Z[1]!==U[1]}));S.startExtent=Q.region?U["s"===Q.region?1:0]:N;M.parent.inBrushDrag=!0;S.brushStartCallback()}function d(P,M){t.event.sourceEvent.stopPropagation();var N=M.height-
t.mouse(P)[1]-2*A.verticalPadding,T=M.brush.svgBrush;T.wasDragged=!0;T._dragging=!0;T.newExtent=T.grabbingBar?[N-T.grabPoint,N+T.barLength-T.grabPoint].map(M.unitToPaddedPx.invert):[T.startExtent,M.unitToPaddedPx.invert(N)].sort(I);M.brush.filterSpecified=!0;T.extent=T.stayingIntervals.concat([T.newExtent]);T.brushCallback(M);n(P.parentNode)}function f(P,M){var N=M.brush,T=N.filter,Q=N.svgBrush;Q._dragging||(k(P,M),d(P,M),M.brush.svgBrush.wasDragged=!1);Q._dragging=!1;t.event.sourceEvent.stopPropagation();
var U=Q.grabbingBar;Q.grabbingBar=!1;Q.grabLocation=void 0;M.parent.inBrushDrag=!1;g();if(Q.wasDragged)if(U=function(){T.set(T.getConsolidated())},M.ordinal){var S=M.unitTickvals;S[S.length-1]<S[0]&&S.reverse();Q.newExtent=[q(0,S,Q.newExtent[0],Q.stayingIntervals),q(1,S,Q.newExtent[1],Q.stayingIntervals)];S=Q.newExtent[1]>Q.newExtent[0];Q.extent=Q.stayingIntervals.concat(S?[Q.newExtent]:[]);Q.extent.length||C(N);Q.brushCallback(M);S?n(P.parentNode,U):(U(),n(P.parentNode))}else U();else Q.wasDragged=
void 0,Q.clickableOrdinalRange?N.filterSpecified&&M.multiselect?Q.extent.push(Q.clickableOrdinalRange):(Q.extent=[Q.clickableOrdinalRange],N.filterSpecified=!0):U?(Q.extent=Q.stayingIntervals,0===Q.extent.length&&C(N)):C(N),Q.brushCallback(M),n(P.parentNode);Q.brushEndCallback(N.filterSpecified?T.getConsolidated():[])}function k(P,M){P=M.height-t.mouse(P)[1]-2*A.verticalPadding;M=p(M,P);P="crosshair";M.clickableOrdinalRange?P="pointer":M.region&&(P=M.region+"-resize");t.select(document.body).style("cursor",
P)}function r(P){P.on("mousemove",function(M){t.event.preventDefault();M.parent.inBrushDrag||k(this,M)}).on("mouseleave",function(M){M.parent.inBrushDrag||g()}).call(t.behavior.drag().on("dragstart",function(M){c(this,M)}).on("drag",function(M){d(this,M)}).on("dragend",function(M){f(this,M)}))}function u(P,M){return P[0]-M[0]}function v(P){var M=P.selectAll(".background").data(F);M.enter().append("rect").classed("background",!0).call(m).call(l).style("pointer-events","auto").attr("transform",J(0,
A.verticalPadding));M.call(r).attr("height",function(N){return N.height-A.verticalPadding});M=P.selectAll(".highlight-shadow").data(F);M.enter().append("line").classed("highlight-shadow",!0).attr("x",-A.bar.width/2).attr("stroke-width",A.bar.width+A.bar.strokeWidth).attr("stroke",A.bar.strokeColor).attr("opacity",A.bar.strokeOpacity).attr("stroke-linecap","butt");M.attr("y1",function(N){return N.height}).call(e);P=P.selectAll(".highlight").data(F);P.enter().append("line").classed("highlight",!0).attr("x",
-A.bar.width/2).attr("stroke-width",A.bar.width-A.bar.strokeWidth).attr("stroke",A.bar.fillColor).attr("opacity",A.bar.fillOpacity).attr("stroke-linecap","butt");P.attr("y1",function(N){return N.height}).call(e)}function x(P){return P.svgBrush.extent.map(function(M){return M.slice()})}function C(P){P.filterSpecified=!1;P.svgBrush.extent=[[-Infinity,Infinity]]}function z(P){return function(M){M=M.brush;var N=x(M).slice();M.filter.set(N);P()}}function y(P){P=P.slice();for(var M=[],N,T=P.shift();T;){for(N=
T.slice();(T=P.shift())&&T[0]<=N[1];)N[1]=Math.max(N[1],T[1]);M.push(N)}1===M.length&&M[0][0]>M[0][1]&&(M=[]);return M}function D(){var P=[],M,N;return{set:function(T){P=T.map(function(Q){return Q.slice().sort(I)}).sort(u);1===P.length&&-Infinity===P[0][0]&&Infinity===P[0][1]&&(P=[[0,-1]]);M=y(P);N=P.reduce(function(Q,U){return[Math.min(Q[0],U[0]),Math.max(Q[1],U[1])]},[Infinity,-Infinity])},get:function(){return P.slice()},getConsolidated:function(){return M},getBounds:function(){return N}}}var A=
b("./constants"),t=b("d3"),B=b("../../lib/gup").keyFun,F=b("../../lib/gup").repeat,I=b("../../lib").sorterAsc,J=b("../../lib").strTranslate,L=A.bar.snapRatio,H=A.bar.snapClose;K.exports={makeBrush:function(P,M,N,T,Q,U){P=D();P.set(N);return{filter:P,filterSpecified:M,svgBrush:{extent:[],brushStartCallback:T,brushCallback:z(Q),brushEndCallback:U}}},ensureAxisBrush:function(P){P=P.selectAll("."+A.cn.axisBrush).data(F,B);P.enter().append("g").classed(A.cn.axisBrush,!0);v(P)},cleanRanges:function(P,M){Array.isArray(P[0])?
(P=P.map(function(T){return T.sort(I)}),P=M.multiselect?y(P.sort(u)):[P[0]]):P=[P.sort(I)];if(M.tickvals){var N=M.tickvals.slice().sort(I);P=P.map(function(T){T=[q(0,N,T[0],[]),q(1,N,T[1],[])];if(T[1]>T[0])return T}).filter(function(T){return T});if(!P.length)return}return 1<P.length?P:P[0]}}},{"../../lib":778,"../../lib/gup":775,"./constants":1153,d3:169}],1151:[function(b,K,G){var q=b("d3"),m=b("../../plots/get_data").getModuleCalcData,l=b("./plot"),h=b("../../constants/xmlns_namespaces");G.name=
"parcoords";G.plot=function(a){var g=m(a.calcdata,"parcoords")[0];g.length&&l(a,g)};G.clean=function(a,g,e,n){a=n._has&&n._has("parcoords");g=g._has&&g._has("parcoords");a&&!g&&(n._paperdiv.selectAll(".parcoords").remove(),n._glimages.selectAll("*").remove())};G.toSVG=function(a){var g=a._fullLayout._glimages,e=q.select(a).selectAll(".svg-container");e.filter(function(n,p){return p===e.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var n=this.toDataURL("image/png");g.append("svg:image").attr({xmlns:h.svg,
"xlink:href":n,preserveAspectRatio:"none",x:0,y:0,width:this.width,height:this.height})});window.setTimeout(function(){q.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},{"../../constants/xmlns_namespaces":754,"../../plots/get_data":865,"./plot":1160,d3:169}],1152:[function(b,K,G){var q=b("../../lib").isArrayOrTypedArray,m=b("../../components/colorscale"),l=b("../../lib/gup").wrap;K.exports=function(h,a){if(m.hasColorscale(a,"line")&&q(a.line.color)){var g=a.line.color;var e=m.extractOpts(a.line).colorscale;
m.calc(h,a,{vals:g,containerStr:"line",cLetter:"c"})}else{h=a._length;g=Array(h);for(e=0;e<h;e++)g[e]=.5;e=[[0,a.line.color],[1,a.line.color]]}return l({lineColor:g,cscale:e})}},{"../../components/colorscale":655,"../../lib":778,"../../lib/gup":775}],1153:[function(b,K,G){K.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5E3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,deselectedLineColor:"#777",
bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeColor:"white",strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",
axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},{}],1154:[function(b,K,G){function q(k,r,u,v,x){var C=x("line.color",u);if(h(k,"line")&&l.isArrayOrTypedArray(C)){if(C.length)return x("line.colorscale"),a(k,r,v,x,{prefix:"line.",cLetter:"c"}),C.length;r.line.color=u}return Infinity}function m(k,r,u,v){function x(z,y){return l.coerce(k,
r,p.dimensions,z,y)}u=x("values");var C=x("visible");u&&u.length||(C=r.visible=!1);C&&(x("label"),x("tickvals"),x("ticktext"),x("tickformat"),u=x("range"),r._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:u},n.setConvert(r._ax,v.layout),x("multiselect"),v=x("constraintrange"))&&(r.constraintrange=c.cleanRanges(v,r))}var l=b("../../lib"),h=b("../../components/colorscale/helpers").hasColorscale,a=b("../../components/colorscale/defaults"),g=b("../../plots/domain").defaults,e=b("../../plots/array_container_defaults"),
n=b("../../plots/cartesian/axes"),p=b("./attributes"),c=b("./axisbrush"),d=b("./constants").maxDimensionCount,f=b("./merge_length");K.exports=function(k,r,u,v){function x(z,y){return l.coerce(k,r,p,z,y)}var C=k.dimensions;Array.isArray(C)&&C.length>d&&(l.log("parcoords traces support up to "+d+" dimensions at the moment"),C.splice(d));C=e(k,r,{name:"dimensions",layout:v,handleItemDefaults:m});u=q(k,r,u,v,x);g(r,v,x);Array.isArray(C)&&C.length||(r.visible=!1);f(r,C,"values",u);v={family:v.font.family,
size:Math.round(v.font.size/1.2),color:v.font.color};l.coerceFont(x,"labelfont",v);l.coerceFont(x,"tickfont",v);l.coerceFont(x,"rangefont",v);x("labelangle");x("labelside")}},{"../../components/colorscale/defaults":653,"../../components/colorscale/helpers":654,"../../lib":778,"../../plots/array_container_defaults":823,"../../plots/cartesian/axes":828,"../../plots/domain":855,"./attributes":1149,"./axisbrush":1150,"./constants":1153,"./merge_length":1158}],1155:[function(b,K,G){var q=b("../../lib").isTypedArray;
G.convertTypedArray=function(m){return q(m)?Array.prototype.slice.call(m):m};G.isOrdinal=function(m){return!!m.tickvals};G.isVisible=function(m){return m.visible||!("visible"in m)}},{"../../lib":778}],1156:[function(b,K,G){K.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc"),plot:b("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:b("./base_plot"),categories:["gl","regl","noOpacity","noHover"],meta:{}}},
{"./attributes":1149,"./base_plot":1151,"./calc":1152,"./defaults":1154,"./plot":1160}],1157:[function(b,K,G){function q(x,C,z,y,D){var A=x._gl;A.enable(A.SCISSOR_TEST);A.scissor(C,z,y,D);x.clear({color:[0,0,0,0],depth:1})}function m(x,C,z,y,D,A){function t(F){var I=Math.min(y,D-F*y);0===F&&(window.cancelAnimationFrame(z.currentRafs[B]),delete z.currentRafs[B],q(x,A.scissorX,A.scissorY,A.scissorWidth,A.viewBoxSize[1]));z.clearOnly||(A.count=2*I,A.offset=2*F*y,C(A),F*y+I<D&&(z.currentRafs[B]=window.requestAnimationFrame(function(){t(F+
1)})),z.drawCompleted=!1)}var B=A.key;z.drawCompleted||(x.read({x:0,y:0,width:1,height:1,data:r}),z.drawCompleted=!0);t(0)}function l(x,C){for(var z=Array(256),y=0;256>y;y++)z[y]=x(y/255).concat(C);return z}function h(x,C,z){for(var y=Array(x*(f+4)),D=0,A=0;A<x;A++){for(var t=0;t<f;t++)y[D++]=t<C.length?C[t].paddedUnitValues[A]:.5;y[D++]=(A>>>16)%256/255;y[D++]=(A>>>8)%256/255;y[D++]=(A>>>0)%256/255;y[D++]=Math.max(1E-6,Math.min(.999999,z[A]))}return y}function a(x){x="0"+x;return x.substr(x.length-
2)}function g(x){return x<f?"p"+a(x+1)+"_"+a(x+4):"colors"}function e(x,C,z){for(var y=0;y<=f;y+=4){for(var D=x,A=D[g(y)],t=y/4,B=C,F=z,I=Array(8*B),J=0,L=0;L<B;L++)for(var H=0;2>H;H++)for(var P=0;4>P;P++){var M=4*t+P,N=F[64*L+M];63===M&&0===H&&(N*=-1);I[J++]=N}A.call(D,I)}}function n(x){for(var C={},z=0;z<=f;z+=4)C[g(z)]=x.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return C}function p(x){var C=Math.max(0,Math.floor(2047*x[0]),0);x=Math.min(2047,Math.ceil(2047*x[1]),2047);return[Math.min(C,
x),Math.max(C,x)]}G=b("glslify");var c=G(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nattribute vec4 p01_04, p05_08, p09_12, p13_16,\n               p17_20, p21_24, p25_28, p29_32,\n               p33_36, p37_40, p41_44, p45_48,\n               p49_52, p53_56, p57_60, colors;\n\nuniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,\n             loA, hiA, loB, hiB, loC, hiC, loD, hiD;\n\nuniform vec2 resolution, viewBoxPos, viewBoxSize;\nuniform sampler2D mask, palette;\nuniform float maskHeight;\nuniform float drwLayer; // 0: context, 1: focus, 2: pick\nuniform vec4 contextColor;\n\nbool isPick    = (drwLayer > 1.5);\nbool isContext = (drwLayer < 0.5);\n\nconst vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);\nconst vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);\n\nfloat val(mat4 p, mat4 v) {\n    return dot(matrixCompMult(p, v) * UNITS, UNITS);\n}\n\nfloat axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);\n    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);\n    return y1 * (1.0 - ratio) + y2 * ratio;\n}\n\nint iMod(int a, int b) {\n    return a - b * (a / b);\n}\n\nbool fOutside(float p, float lo, float hi) {\n    return (lo < hi) && (lo > p || p > hi);\n}\n\nbool vOutside(vec4 p, vec4 lo, vec4 hi) {\n    return (\n        fOutside(p[0], lo[0], hi[0]) ||\n        fOutside(p[1], lo[1], hi[1]) ||\n        fOutside(p[2], lo[2], hi[2]) ||\n        fOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool mOutside(mat4 p, mat4 lo, mat4 hi) {\n    return (\n        vOutside(p[0], lo[0], hi[0]) ||\n        vOutside(p[1], lo[1], hi[1]) ||\n        vOutside(p[2], lo[2], hi[2]) ||\n        vOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {\n    return mOutside(A, loA, hiA) ||\n           mOutside(B, loB, hiB) ||\n           mOutside(C, loC, hiC) ||\n           mOutside(D, loD, hiD);\n}\n\nbool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {\n    mat4 pnts[4];\n    pnts[0] = A;\n    pnts[1] = B;\n    pnts[2] = C;\n    pnts[3] = D;\n\n    for(int i = 0; i < 4; ++i) {\n        for(int j = 0; j < 4; ++j) {\n            for(int k = 0; k < 4; ++k) {\n                if(0 == iMod(\n                    int(255.0 * texture2D(mask,\n                        vec2(\n                            (float(i * 2 + j / 2) + 0.5) / 8.0,\n                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight\n                        ))[3]\n                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),\n                    2\n                )) return true;\n            }\n        }\n    }\n    return false;\n}\n\nvec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float x = 0.5 * sign(v) + 0.5;\n    float y = axisY(x, A, B, C, D);\n    float z = 1.0 - abs(v);\n\n    z += isContext ? 0.0 : 2.0 * float(\n        outsideBoundingBox(A, B, C, D) ||\n        outsideRasterMask(A, B, C, D)\n    );\n\n    return vec4(\n        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,\n        z,\n        1.0\n    );\n}\n\nvoid main() {\n    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);\n    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);\n    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);\n    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);\n\n    float v = colors[3];\n\n    gl_Position = position(isContext, v, A, B, C, D);\n\n    fragColor =\n        isContext ? vec4(contextColor) :\n        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));\n}\n"]),
d=G(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n    gl_FragColor = fragColor;\n}\n"]),f=b("./constants").maxDimensionCount,k=b("../../lib"),r=new Uint8Array(4),u=new Uint8Array(4),v={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};K.exports=function(x,C){function z(T){B=T.model;F=T.viewModel;I=F.dimensions.slice();J=I[0]?I[0].values.length:0;var Q=B.lines;T=D?Q.color.map(function(U,S){return S/Q.color.length}):Q.color;T=h(J,I,T);e(L,
J,T);y||D||(P=A.texture(k.extendFlat({data:l(B.unitToColor,255)},v)))}var y=C.context,D=C.pick,A=C.regl,t={currentRafs:{},drawCompleted:!0,clearOnly:!1},B,F,I,J,L=n(A),H,P=A.texture(v),M=[];z(C);var N=A({profile:!1,blend:{enable:y,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!y,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:A.prop("scissorX"),y:A.prop("scissorY"),
width:A.prop("scissorWidth"),height:A.prop("scissorHeight")}},viewport:{x:A.prop("viewportX"),y:A.prop("viewportY"),width:A.prop("viewportWidth"),height:A.prop("viewportHeight")},dither:!1,vert:c,frag:d,primitive:"lines",lineWidth:1,attributes:L,uniforms:{resolution:A.prop("resolution"),viewBoxPos:A.prop("viewBoxPos"),viewBoxSize:A.prop("viewBoxSize"),dim0A:A.prop("dim0A"),dim1A:A.prop("dim1A"),dim0B:A.prop("dim0B"),dim1B:A.prop("dim1B"),dim0C:A.prop("dim0C"),dim1C:A.prop("dim1C"),dim0D:A.prop("dim0D"),
dim1D:A.prop("dim1D"),loA:A.prop("loA"),hiA:A.prop("hiA"),loB:A.prop("loB"),hiB:A.prop("hiB"),loC:A.prop("loC"),hiC:A.prop("hiC"),loD:A.prop("loD"),hiD:A.prop("hiD"),palette:P,contextColor:A.prop("contextColor"),mask:A.prop("maskTexture"),drwLayer:A.prop("drwLayer"),maskHeight:A.prop("maskHeight")},offset:A.prop("offset"),count:A.prop("count")});return{render:function(T,Q,U){var S=T.length,X,Z=Infinity,aa=-Infinity;for(X=0;X<S;X++){if(T[X].dim0.canvasX<Z){Z=T[X].dim0.canvasX;var fa=X}if(T[X].dim1.canvasX>
aa){aa=T[X].dim1.canvasX;var ha=X}}0===S&&q(A,0,0,B.canvasWidth,B.canvasHeight);var ja=y,ba;X=[[],[]];for(aa=0;64>aa;aa++)Z=!ja&&aa<I.length?I[aa].brush.filter.getBounds():[-Infinity,Infinity],X[0][aa]=Z[0],X[1][aa]=Z[1];var ma=Array(16384);for(Z=0;16384>Z;Z++)ma[Z]=255;if(!ja)for(Z=0;Z<I.length;Z++){aa=Z%8;ja=(Z-aa)/8;var qa=Math.pow(2,aa),ka=I[Z].brush.filter.get();if(!(2>ka.length)){var oa=p(ka[0])[1];for(ba=1;ba<ka.length;ba++){var na=p(ka[ba]);for(aa=oa+1;aa<na[0];aa++)ma[8*aa+ja]&=~qa;oa=Math.max(oa,
na[1])}}}Z={shape:[8,2048],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:ma};H?H(Z):H=A.texture(Z);Z={maskTexture:H,maskHeight:2048,loA:X[0].slice(0,16),loB:X[0].slice(16,32),loC:X[0].slice(32,48),loD:X[0].slice(48,64),hiA:X[1].slice(0,16),hiB:X[1].slice(16,32),hiC:X[1].slice(32,48),hiD:X[1].slice(48,64)};for(X=0;X<S;X++){var la=T[X];qa=la.dim0.crossfilterDimensionIndex;ka=la.dim1.crossfilterDimensionIndex;oa=la.canvasX;na=la.canvasY;aa=oa+la.panelSizeX;if(Q||!M[qa]||M[qa][0]!==oa||
M[qa][1]!==aa){M[qa]=[oa,aa];aa=B;ma=fa;ja=ha;ba=X;var ia=la.panelSizeX,sa=la.panelSizeY;la=la.dim0.crossfilterDimensionIndex;for(var ta=y?0:D?2:1,Aa=Z,Ka=[[],[]],Sa=0;64>Sa;Sa++)Ka[0][Sa]=Sa===qa?1:0,Ka[1][Sa]=Sa===ka?1:0;Sa=aa.lines.canvasOverdrag;var db=aa.domain,eb=aa.canvasWidth,lb=aa.canvasHeight,ab=aa.deselectedLines.color;aa=k.extendFlat({key:la,resolution:[eb,lb],viewBoxPos:[oa+Sa,na],viewBoxSize:[ia,sa],i0:qa,i1:ka,dim0A:Ka[0].slice(0,16),dim0B:Ka[0].slice(16,32),dim0C:Ka[0].slice(32,48),
dim0D:Ka[0].slice(48,64),dim1A:Ka[1].slice(0,16),dim1B:Ka[1].slice(16,32),dim1C:Ka[1].slice(32,48),dim1D:Ka[1].slice(48,64),drwLayer:ta,contextColor:[ab[0]/255,ab[1]/255,ab[2]/255,1>ab[3]?ab[3]:Math.max(1/255,Math.pow(1/aa.lines.color.length,1/3))],scissorX:(ba===ma?0:oa+Sa)+(aa.pad.l-Sa)+aa.layoutWidth*db.x[0],scissorWidth:(ba===ja?eb-oa+Sa:ia+.5)+(ba===ma?oa+Sa:0),scissorY:na+aa.pad.b+aa.layoutHeight*db.y[0],scissorHeight:sa,viewportX:aa.pad.l-Sa+aa.layoutWidth*db.x[0],viewportY:aa.pad.b+aa.layoutHeight*
db.y[0],viewportWidth:eb,viewportHeight:lb},Aa);t.clearOnly=U;m(A,N,t,Q?B.lines.blockLineCount:J,J,aa)}}},readPixel:function(T,Q){A.read({x:T,y:Q,width:1,height:1,data:u});return u},readPixels:function(T,Q,U,S){var X=new Uint8Array(4*U*S);A.read({x:T,y:Q,width:U,height:S,data:X});return X},destroy:function(){x.style["pointer-events"]="none";P.destroy();H&&H.destroy();for(var T in L)L[T].destroy()},update:z}}},{"../../lib":778,"./constants":1153,glslify:439}],1158:[function(b,K,G){K.exports=function(q,
m,l,h){h||(h=Infinity);var a;for(a=0;a<m.length;a++){var g=m[a];g.visible&&(h=Math.min(h,g[l].length))}Infinity===h&&(h=0);q._length=h;for(a=0;a<m.length;a++)g=m[a],g.visible&&(g._length=h);return h}},{}],1159:[function(b,K,G){function q(U,S){return l(A.aggNums(Math.min,null,U,S),A.aggNums(Math.max,null,U,S))}function m(U){var S=U.range;return S?l(S[0],S[1]):q(U.values,U._length)}function l(U,S){if(isNaN(U)||!isFinite(U))U=0;if(isNaN(S)||!isFinite(S))S=0;U===S&&(0===U?(--U,S+=1):(U*=.9,S*=1.1));return[U,
S]}function h(U,S){return S?function(X,Z){Z=S[Z];return null===Z||void 0===Z?U(X):Z}:U}function a(U,S,X,Z,aa){var fa=m(X);return Z?z.scale.ordinal().domain(Z.map(h(z.format(X.tickformat),aa))).range(Z.map(function(ha){return U-S+(ha-fa[0])/(fa[1]-fa[0])*(2*S-U)})):z.scale.linear().domain(fa).range([U-S,S])}function g(U,S){return z.scale.linear().range([S,U-S])}function e(U,S){return z.scale.linear().domain(m(U)).range([S,1-S])}function n(U){if(U.tickvals){var S=m(U);return z.scale.ordinal().domain(U.tickvals).range(U.tickvals.map(function(X){return(X-
S[0])/(S[1]-S[0])}))}}function p(U){var S=U.map(function(fa){return fa[0]}),X=U.map(function(fa){fa=y(fa[1]);return z.rgb("rgb("+fa[0]+","+fa[1]+","+fa[2]+")")}),Z=function(fa){return function(ha){return ha[fa]}},aa=["r","g","b"].map(function(fa){return z.scale.linear().clamp(!0).domain(S).range(X.map(Z(fa)))});return function(fa){return aa.map(function(ha){return ha(fa)})}}function c(U){return U.dimensions.some(function(S){return S.brush.filterSpecified})}function d(U,S,X){var Z=P(S),aa=Z.trace,
fa=M.convertTypedArray(Z.lineColor),ha=aa.line;S={color:y(N.deselectedLineColor)};var ja=J.extractOpts(ha);Z=ja.reversescale?J.flipScale(Z.cscale):Z.cscale;var ba=aa.domain,ma=aa.dimensions,qa=U.width,ka=aa.labelangle,oa=aa.labelside,na=aa.labelfont,la=aa.tickfont,ia=aa.rangefont;aa=A.extendDeepNoArrays({},ha,{color:fa.map(z.scale.linear().domain(m({values:fa,range:[ja.min,ja.max],_length:aa._length}))),blockLineCount:N.blockLineCount,canvasOverdrag:N.overdrag*N.canvasPixelRatio});fa=U.margin||{l:80,
r:80,t:100,b:80};ha=Math.floor(qa*(ba.x[1]-ba.x[0]));ja=Math.floor(U.height*(ba.y[1]-ba.y[0]));return{key:X,colCount:ma.filter(M.isVisible).length,dimensions:ma,tickDistance:N.tickDistance,unitToColor:p(Z),lines:aa,deselectedLines:S,labelAngle:ka,labelSide:oa,labelFont:na,tickFont:la,rangeFont:ia,layoutWidth:qa,layoutHeight:U.height,domain:ba,translateX:ba.x[0]*qa,translateY:U.height-ba.y[1]*U.height,pad:fa,canvasWidth:ha*N.canvasPixelRatio+2*aa.canvasOverdrag,canvasHeight:ja*N.canvasPixelRatio,width:ha,
height:ja,canvasPixelRatio:N.canvasPixelRatio}}function f(U,S,X){var Z=X.width,aa=X.height,fa=X.dimensions,ha=X.canvasPixelRatio,ja=function(oa){return Z*oa/Math.max(1,X.colCount-1)},ba=N.verticalPadding/aa,ma=g(aa,N.verticalPadding),qa={key:X.key,xScale:ja,model:X,inBrushDrag:!1},ka={};qa.dimensions=fa.filter(M.isVisible).map(function(oa,na){function la(Ya,hb){return{val:Ya,text:eb[hb]}}function ia(Ya,hb){return Ya.val-hb.val}var sa=e(oa,ba),ta=ka[oa.label];ka[oa.label]=(ta||0)+1;ta=oa.label+(ta?
"__"+ta:"");var Aa=oa.constraintrange,Ka=Aa&&Aa.length;Ka&&!Array.isArray(Aa[0])&&(Aa=[Aa]);Aa=Ka?Aa.map(function(Ya){return Ya.map(sa)}):[[-Infinity,Infinity]];var Sa=oa.values;Sa.length>oa._length&&(Sa=Sa.slice(0,oa._length));var db=oa.tickvals;if(Array.isArray(db)&&db.length){var eb=oa.ticktext;Array.isArray(eb)&&eb.length?eb.length>db.length?eb=eb.slice(0,db.length):db.length>eb.length&&(db=db.slice(0,eb.length)):eb=db.map(z.format(oa.tickformat));for(var lb=1;lb<db.length;lb++)if(db[lb]<db[lb-
1]){lb=db.map(la).sort(ia);for(var ab=0;ab<db.length;ab++)db[ab]=lb[ab].val,eb[ab]=lb[ab].text;break}}else db=void 0;Sa=M.convertTypedArray(Sa);return{key:ta,label:oa.label,tickFormat:oa.tickformat,tickvals:db,ticktext:eb,ordinal:M.isOrdinal(oa),multiselect:oa.multiselect,xIndex:na,crossfilterDimensionIndex:na,visibleIndex:oa._index,height:aa,values:Sa,paddedUnitValues:Sa.map(sa),unitTickvals:db&&db.map(sa),xScale:ja,x:ja(na),canvasX:ja(na)*ha,unitToPaddedPx:ma,domainScale:a(aa,N.verticalPadding,
oa,db,eb),ordinalScale:n(oa),parent:qa,model:X,brush:T.makeBrush(U,Ka,Aa,function(){U.linePickActive(!1)},function(){qa.focusLayer&&qa.focusLayer.render(qa.panels,!0);var Ya=c(qa);!U.contextShown()&&Ya?(qa.contextLayer&&qa.contextLayer.render(qa.panels,!0),U.contextShown(!0)):U.contextShown()&&!Ya&&(qa.contextLayer&&qa.contextLayer.render(qa.panels,!0,!0),U.contextShown(!1))},function(Ya){qa.focusLayer.render(qa.panels,!0);qa.pickLayer&&qa.pickLayer.render(qa.panels,!0);U.linePickActive(!0);if(S&&
S.filterChanged){var hb=sa.invert;Ya=Ya.map(function(nb){return nb.map(hb).sort(A.sorterAsc)}).sort(function(nb,va){return nb[0]-va[0]});S.filterChanged(qa.key,oa._index,Ya)}})}});return qa}function k(U){U.classed(N.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function r(){var U=!0,S=!1;return{linePickActive:function(X){return arguments.length?U=!!X:U},contextShown:function(X){return arguments.length?S=!!X:S}}}function u(U,S){var X=U*Math.PI/180;return{dir:"top"===
S?1:-1,dx:Math.sin(X),dy:Math.cos(X),degrees:U}}function v(U,S){var X=S.panels||(S.panels=[]);U=U.data();for(var Z=0;Z<U.length-1;Z++){var aa=X[Z]||(X[Z]={}),fa=U[Z],ha=U[Z+1];aa.dim0=fa;aa.dim1=ha;aa.canvasX=fa.canvasX;aa.panelSizeX=ha.canvasX-fa.canvasX;aa.panelSizeY=S.model.canvasHeight;aa.y=0;aa.canvasY=0}}function x(U){for(var S=0;S<U.length;S++)for(var X=0;X<U[S].length;X++)for(var Z=U[S][X].trace,aa=Z.dimensions,fa=0;fa<aa.length;fa++){var ha=aa[fa].values,ja=aa[fa]._ax;ja&&(ja.range=ja.range?
l(ja.range[0],ja.range[1]):q(ha,Z._length),ja.dtick||(ja.dtick=.01*(Math.abs(ja.range[1]-ja.range[0])||1)),ja.tickformat=aa[fa].tickformat,D.calcTicks(ja),ja.cleanRange())}}function C(U,S){if(U.ordinal)return"";var X=U.domainScale.domain();return D.tickText(U.model.dimensions[U.visibleIndex]._ax,X[S?X.length-1:0],!1).text}var z=b("d3"),y=b("color-rgba"),D=b("../../plots/cartesian/axes"),A=b("../../lib"),t=A.strRotate,B=A.strTranslate,F=b("../../lib/svg_text_utils"),I=b("../../components/drawing"),
J=b("../../components/colorscale");G=b("../../lib/gup");var L=G.keyFun,H=G.repeat,P=G.unwrap,M=b("./helpers"),N=b("./constants"),T=b("./axisbrush"),Q=b("./lines");K.exports=function(U,S,X,Z){var aa=U._fullLayout,fa=aa._toppaper;aa=aa._glcontainer;x(S);var ha=r(),ja=S.filter(function(ka){return P(ka).trace.visible}).map(d.bind(0,X)).map(f.bind(0,ha,Z));aa.each(function(ka,oa){return A.extendFlat(ka,ja[oa])});S=aa.selectAll(".gl-canvas").each(function(ka){ka.viewModel=ja[0];ka.model=ka.viewModel?ka.viewModel.model:
null});var ba=null;S.filter(function(ka){return ka.pick}).style("pointer-events","auto").on("mousemove",function(ka){if(ha.linePickActive()&&ka.lineLayer&&Z&&Z.hover){var oa=z.event,na=this.width,la=this.height,ia=z.mouse(this),sa=ia[0];ia=ia[1];0>sa||0>ia||sa>=na||ia>=la||(la=ka.lineLayer.readPixel(sa,la-1-ia),la=(na=0!==la[3])?la[2]+256*(la[1]+256*la[0]):null,ka={x:sa,y:ia,clientX:oa.clientX,clientY:oa.clientY,dataIndex:ka.model.key,curveNumber:la},la!==ba&&(na?Z.hover(ka):Z.unhover&&Z.unhover(ka),
ba=la))}});S.style("opacity",function(ka){return ka.pick?0:1});fa.style("background","rgba(255, 255, 255, 0)");fa=fa.selectAll("."+N.cn.parcoords).data(ja,L);fa.exit().remove();fa.enter().append("g").classed(N.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none");fa.attr("transform",function(ka){return B(ka.model.translateX,ka.model.translateY)});fa=fa.selectAll("."+N.cn.parcoordsControlView).data(H,L);fa.enter().append("g").classed(N.cn.parcoordsControlView,!0);fa.attr("transform",
function(ka){return B(ka.model.pad.l,ka.model.pad.t)});var ma=fa.selectAll("."+N.cn.yAxis).data(function(ka){return ka.dimensions},L);ma.enter().append("g").classed(N.cn.yAxis,!0);fa.each(function(ka){v(ma,ka)});S.each(function(ka){if(ka.viewModel){!ka.lineLayer||Z?ka.lineLayer=Q(this,ka):ka.lineLayer.update(ka);if(ka.key||0===ka.key)ka.viewModel[ka.key]=ka.lineLayer;ka.lineLayer.render(ka.viewModel.panels,!ka.context||Z)}});ma.attr("transform",function(ka){return B(ka.xScale(ka.xIndex),0)});ma.call(z.behavior.drag().origin(function(ka){return ka}).on("drag",
function(ka){var oa=ka.parent;ha.linePickActive(!1);ka.x=Math.max(-N.overdrag,Math.min(ka.model.width+N.overdrag,z.event.x));ka.canvasX=ka.x*ka.model.canvasPixelRatio;ma.sort(function(na,la){return na.x-la.x}).each(function(na,la){na.xIndex=la;na.x=ka===na?na.x:na.xScale(na.xIndex);na.canvasX=na.x*na.model.canvasPixelRatio});v(ma,oa);ma.filter(function(na){return 0!==Math.abs(ka.xIndex-na.xIndex)}).attr("transform",function(na){return B(na.xScale(na.xIndex),0)});z.select(this).attr("transform",B(ka.x,
0));ma.each(function(na,la,ia){ia===ka.parent.key&&(oa.dimensions[la]=na)});oa.contextLayer&&oa.contextLayer.render(oa.panels,!1,!c(oa));oa.focusLayer.render&&oa.focusLayer.render(oa.panels)}).on("dragend",function(ka){var oa=ka.parent;ka.x=ka.xScale(ka.xIndex);ka.canvasX=ka.x*ka.model.canvasPixelRatio;v(ma,oa);z.select(this).attr("transform",function(na){return B(na.x,0)});oa.contextLayer&&oa.contextLayer.render(oa.panels,!1,!c(oa));oa.focusLayer&&oa.focusLayer.render(oa.panels);oa.pickLayer&&oa.pickLayer.render(oa.panels,
!0);ha.linePickActive(!0);Z&&Z.axesMoved&&Z.axesMoved(oa.key,oa.dimensions.map(function(na){return na.crossfilterDimensionIndex}))}));ma.exit().remove();fa=ma.selectAll("."+N.cn.axisOverlays).data(H,L);fa.enter().append("g").classed(N.cn.axisOverlays,!0);fa.selectAll("."+N.cn.axis).remove();var qa=fa.selectAll("."+N.cn.axis).data(H,L);qa.enter().append("g").classed(N.cn.axis,!0);qa.each(function(ka){var oa=ka.model.height/ka.model.tickDistance,na=ka.domainScale,la=na.domain();z.select(this).call(z.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(oa,
ka.tickFormat).tickValues(ka.ordinal?la:null).tickFormat(function(ia){return M.isOrdinal(ka)?ia:D.tickText(ka.model.dimensions[ka.visibleIndex]._ax,ia,!1).text}).scale(na));I.font(qa.selectAll("text"),ka.model.tickFont)});qa.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px");qa.selectAll("text").style("text-shadow","1px 1px 1px #fff, -1px -1px 1px #fff, 1px -1px 1px #fff, -1px 1px 1px #fff").style("cursor","default");S=
fa.selectAll("."+N.cn.axisHeading).data(H,L);S.enter().append("g").classed(N.cn.axisHeading,!0);S=S.selectAll("."+N.cn.axisTitle).data(H,L);S.enter().append("text").classed(N.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events","auto");S.text(function(ka){return ka.label}).each(function(ka){var oa=z.select(this);I.font(oa,ka.model.labelFont);F.convertToTspans(oa,U)}).attr("transform",function(ka){var oa=u(ka.model.labelAngle,ka.model.labelSide),na=N.axisTitleOffset;
return(0<oa.dir?"":B(0,2*na+ka.model.height))+t(oa.degrees)+B(-na*oa.dx,-na*oa.dy)}).attr("text-anchor",function(ka){ka=u(ka.model.labelAngle,ka.model.labelSide);return 2*Math.abs(ka.dx)>Math.abs(ka.dy)?0>ka.dir*ka.dx?"start":"end":"middle"});S=fa.selectAll("."+N.cn.axisExtent).data(H,L);S.enter().append("g").classed(N.cn.axisExtent,!0);X=S.selectAll("."+N.cn.axisExtentTop).data(H,L);X.enter().append("g").classed(N.cn.axisExtentTop,!0);X.attr("transform",B(0,-N.axisExtentOffset));X=X.selectAll("."+
N.cn.axisExtentTopText).data(H,L);X.enter().append("text").classed(N.cn.axisExtentTopText,!0).call(k);X.text(function(ka){return C(ka,!0)}).each(function(ka){I.font(z.select(this),ka.model.rangeFont)});S=S.selectAll("."+N.cn.axisExtentBottom).data(H,L);S.enter().append("g").classed(N.cn.axisExtentBottom,!0);S.attr("transform",function(ka){return B(0,ka.model.height+N.axisExtentOffset)});S=S.selectAll("."+N.cn.axisExtentBottomText).data(H,L);S.enter().append("text").classed(N.cn.axisExtentBottomText,
!0).attr("dy","0.75em").call(k);S.text(function(ka){return C(ka,!1)}).each(function(ka){I.font(z.select(this),ka.model.rangeFont)});T.ensureAxisBrush(fa)}},{"../../components/colorscale":655,"../../components/drawing":665,"../../lib":778,"../../lib/gup":775,"../../lib/svg_text_utils":803,"../../plots/cartesian/axes":828,"./axisbrush":1150,"./constants":1153,"./helpers":1155,"./lines":1157,"color-rgba":127,d3:169}],1160:[function(b,K,G){function q(g,e,n){n=e.indexOf(n);g=g.indexOf(n);-1===g&&(g+=e.length);
return g}function m(g,e){return function(n,p){return q(g,e,n)-q(g,e,p)}}var l=b("./parcoords"),h=b("../../lib/prepare_regl"),a=b("./helpers").isVisible;K.exports=function(g,e){var n=g._fullLayout;if(h(g)){var p={},c={},d={},f={},k=n._size;e.forEach(function(r,u){r=r[0].trace;d[u]=r.index;r=f[u]=r._fullInput.index;p[u]=g.data[r].dimensions;c[u]=g.data[r].dimensions.slice()});l(g,e,{width:k.w,height:k.h,margin:{t:k.t,r:k.r,b:k.b,l:k.l}},{filterChanged:function(r,u,v){var x=c[r][u];v=v.map(function(y){return y.slice()});
var C="dimensions["+u+"].constraintrange",z=n._tracePreGUI[g._fullData[d[r]]._fullInput.uid];void 0===z[C]&&(z[C]=x.constraintrange||null);u=g._fullData[d[r]].dimensions[u];v.length?(1===v.length&&(v=v[0]),x.constraintrange=v,u.constraintrange=v.slice(),v=[v]):(delete x.constraintrange,delete u.constraintrange,v=null);x={};x[C]=v;g.emit("plotly_restyle",[x,[f[r]]])},hover:function(r){g.emit("plotly_hover",r)},unhover:function(r){g.emit("plotly_unhover",r)},axesMoved:function(r,u){u=m(u,c[r].filter(a));
p[r].sort(u);c[r].filter(function(v){return!a(v)}).sort(function(v){return c[r].indexOf(v)}).forEach(function(v){p[r].splice(p[r].indexOf(v),1);p[r].splice(c[r].indexOf(v),0,v)});g.emit("plotly_restyle",[{dimensions:[p[r]]},[f[r]]])}})}}},{"../../lib/prepare_regl":791,"./helpers":1155,"./parcoords":1159}],1161:[function(b,K,G){G=b("../../plots/attributes");var q=b("../../plots/domain").attributes,m=b("../../plots/font_attributes"),l=b("../../components/color/attributes"),h=b("../../plots/template_attributes").hovertemplateAttrs,
a=b("../../plots/template_attributes").texttemplateAttrs;b=b("../../lib/extend").extendFlat;m=m({editType:"plot",arrayOk:!0,colorEditType:"plot"});K.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:l.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",
min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:b({},G.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:h({},{keys:["label","color","value","percent","text"]}),texttemplate:a({editType:"plot"},
{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:b({},m,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:b({},m,{}),outsidetextfont:b({},m,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:b({},m,{}),position:{valType:"enumerated",
values:"top left;top center;top right;middle center;bottom left;bottom center;bottom right".split(";"),editType:"plot"},editType:"plot"},domain:q({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"number",min:-360,max:360,dflt:0,editType:"calc"},pull:{valType:"number",min:0,
max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:b({},m,{}),titleposition:{valType:"enumerated",values:"top left;top center;top right;middle center;bottom left;bottom center;bottom right".split(";"),editType:"calc"}}}},{"../../components/color/attributes":642,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/domain":855,"../../plots/font_attributes":856,"../../plots/template_attributes":906}],1162:[function(b,K,G){var q=
b("../../plots/plots");G.name="pie";G.plot=function(m,l,h,a){q.plotBasePlot(G.name,m,l,h,a)};G.clean=function(m,l,h,a){q.cleanBasePlot(G.name,m,l,h,a)}},{"../../plots/plots":891}],1163:[function(b,K,G){function q(e){return function(n,p){if(!n)return!1;n=h(n);if(!n.isValid())return!1;n=a.addOpacity(n,n.getAlpha());e[p]||(e[p]=n);return n}}function m(e,n){var p,c=JSON.stringify(e),d=n[c];if(!d){d=e.slice();for(p=0;p<e.length;p++)d.push(h(e[p]).lighten(20).toHexString());for(p=0;p<e.length;p++)d.push(h(e[p]).darken(20).toHexString());
n[c]=d}return d}var l=b("fast-isnumeric"),h=b("tinycolor2"),a=b("../../components/color"),g={};K.exports={calc:function(e,n){var p=[],c=e._fullLayout;e=c.hiddenlabels||[];var d=n.labels,f=n.marker.colors||[],k=n.values,r=n._length,u=n._hasValues&&r,v;if(n.dlabel)for(d=Array(r),v=0;v<r;v++)d[v]=String(n.label0+v*n.dlabel);var x={};c=q(c["_"+n.type+"colormap"]);var C=0,z=!1;for(v=0;v<r;v++){if(u){var y=k[v];if(!l(y))continue;y=+y;if(0>y)continue}else y=1;var D=d[v];if(void 0===D||""===D)D=v;D=String(D);
var A=x[D];void 0===A?(x[D]=p.length,(A=-1!==e.indexOf(D))||(C+=y),p.push({v:y,label:D,color:c(f[v],D),i:v,pts:[v],hidden:A})):(z=!0,A=p[A],A.v+=y,A.pts.push(v),A.hidden||(C+=y),!1===A.color&&f[v]&&(A.color=c(f[v],D)))}("funnelarea"===n.type?z:n.sort)&&p.sort(function(t,B){return B.v-t.v});p[0]&&(p[0].vTotal=C);return p},crossTraceCalc:function(e,n){(n=(n||{}).type)||(n="pie");var p=e._fullLayout;e=e.calcdata;var c=p[n+"colorway"],d=p["_"+n+"colormap"];p["extend"+n+"colors"]&&(c=m(c,g));for(var f=
p=0;f<e.length;f++){var k=e[f];if(k[0].trace.type===n)for(var r=0;r<k.length;r++){var u=k[r];!1===u.color&&(d[u.label]?u.color=d[u.label]:(d[u.label]=u.color=c[p%c.length],p++))}}},makePullColorFn:q,generateExtendedColors:m}},{"../../components/color":643,"fast-isnumeric":241,tinycolor2:576}],1164:[function(b,K,G){function q(e,n){var p=Array.isArray(e),c=l.isArrayOrTypedArray(n);e=Math.min(p?e.length:Infinity,c?n.length:Infinity);isFinite(e)||(e=0);if(e&&c){for(var d,f=0;f<e;f++){var k=n[f];if(m(k)&&
0<k){d=!0;break}}d||(e=0)}return{hasLabels:p,hasValues:c,len:e}}var m=b("fast-isnumeric"),l=b("../../lib"),h=b("./attributes"),a=b("../../plots/domain").defaults,g=b("../bar/defaults").handleText;K.exports={handleLabelsAndValues:q,supplyDefaults:function(e,n,p,c){function d(r,u){return l.coerce(e,n,h,r,u)}p=d("labels");var f=d("values");p=q(p,f);f=p.len;n._hasLabels=p.hasLabels;n._hasValues=p.hasValues;!n._hasLabels&&n._hasValues&&(d("label0"),d("dlabel"));if(f){n._length=f;d("marker.line.width")&&
d("marker.line.color");d("marker.colors");d("scalegroup");p=d("text");f=d("texttemplate");var k;f||(k=d("textinfo",Array.isArray(p)?"text+percent":"percent"));d("hovertext");d("hovertemplate");if(f||k&&"none"!==k)k=d("textposition"),g(e,n,c,d,k,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),(Array.isArray(k)||"auto"===k||"outside"===k)&&d("automargin"),("inside"===k||"auto"===k||Array.isArray(k))&&d("insidetextorientation");
a(n,c,d);k=d("hole");d("title.text")&&(p=d("title.position",k?"middle center":"top center"),k||"middle center"!==p||(n.title.position="top center"),l.coerceFont(d,"title.font",c.font));d("sort");d("direction");d("rotation");d("pull")}else n.visible=!1}}},{"../../lib":778,"../../plots/domain":855,"../bar/defaults":925,"./attributes":1161,"fast-isnumeric":241}],1165:[function(b,K,G){var q=b("../../components/fx/helpers").appendArrayMultiPointValues;K.exports=function(m,l){var h={curveNumber:l.index,
pointNumbers:m.pts,data:l._input,fullData:l,label:m.label,color:m.color,value:m.v,percent:m.percent,text:m.text,v:m.v};1===m.pts.length&&(h.pointNumber=h.i=m.pts[0]);q(h,l,m.pts);"funnelarea"===l.type&&(delete h.v,delete h.i);return h}},{"../../components/fx/helpers":679}],1166:[function(b,K,G){function q(l){return-1!==l.indexOf("e")?l.replace(/[.]?0+e/,"e"):-1!==l.indexOf(".")?l.replace(/[.]?0+$/,""):l}var m=b("../../lib");G.formatPiePercent=function(l,h){l=q((100*l).toPrecision(3));return m.numSeparate(l,
h)+"%"};G.formatPieValue=function(l,h){l=q(l.toPrecision(10));return m.numSeparate(l,h)};G.getFirstFilled=function(l,h){if(Array.isArray(l))for(var a=0;a<h.length;a++){var g=l[h[a]];if(g||0===g||""===g)return g}};G.castOption=function(l,h){if(Array.isArray(l))return G.getFirstFilled(l,h);if(l)return l};G.getRotationAngle=function(l){return("auto"===l?0:l)*Math.PI/180}},{"../../lib":778}],1167:[function(b,K,G){K.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults").supplyDefaults,supplyLayoutDefaults:b("./layout_defaults"),
layoutAttributes:b("./layout_attributes"),calc:b("./calc").calc,crossTraceCalc:b("./calc").crossTraceCalc,plot:b("./plot").plot,style:b("./style"),styleOne:b("./style_one"),moduleType:"trace",name:"pie",basePlotModule:b("./base_plot"),categories:["pie-like","pie","showLegend"],meta:{}}},{"./attributes":1161,"./base_plot":1162,"./calc":1163,"./defaults":1164,"./layout_attributes":1168,"./layout_defaults":1169,"./plot":1170,"./style":1171,"./style_one":1172}],1168:[function(b,K,G){K.exports={hiddenlabels:{valType:"data_array",
editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1169:[function(b,K,G){var q=b("../../lib"),m=b("./layout_attributes");K.exports=function(l,h){q.coerce(l,h,m,"hiddenlabels",void 0);q.coerce(l,h,m,"piecolorway",h.colorway);q.coerce(l,h,m,"extendpiecolors",void 0)}},{"../../lib":778,"./layout_attributes":1168}],1170:[function(b,K,G){function q(U,S){U.each(function(X){var Z=y.select(this);if(X.labelExtraX||X.labelExtraY){var aa=
Z.select("g.slicetext text");X.transform.targetX+=X.labelExtraX;X.transform.targetY+=X.labelExtraY;aa.attr("transform",F.getTextTransform(X.transform));aa=X.cxFinal+X.pxmid[0];var fa="M"+aa+","+(X.cyFinal+X.pxmid[1]),ha=(X.yLabelMax-X.yLabelMin)*(0>X.pxmid[0]?-1:1)/4;if(X.labelExtraX){var ja=X.labelExtraX*X.pxmid[1]/X.pxmid[0],ba=X.yLabelMid+X.labelExtraY-(X.cyFinal+X.pxmid[1]);fa=Math.abs(ja)>Math.abs(ba)?fa+("l"+ba*X.pxmid[0]/X.pxmid[1]+","+ba+"H"+(aa+X.labelExtraX+ha)):fa+("l"+X.labelExtraX+","+
ja+"v"+(ba-ja)+"h"+ha)}else fa+="V"+(X.yLabelMid+X.labelExtraY)+"h"+ha;F.ensureSingle(Z,"path","textline").call(t.stroke,S.outsidetextfont.color).attr({"stroke-width":Math.min(2,S.outsidetextfont.size/8),d:fa,fill:"none"})}else Z.select("path.textline").remove()})}function m(U,S,X){var Z=X[0],aa=Z.trace,fa=Z.cx,ha=Z.cy;"_hasHoverLabel"in aa||(aa._hasHoverLabel=!1);"_hasHoverEvent"in aa||(aa._hasHoverEvent=!1);U.on("mouseover",function(ja){var ba=S._fullLayout,ma=S._fullData[aa.index];if(!S._dragging&&
!1!==ba.hovermode){var qa=ma.hoverinfo;Array.isArray(qa)&&(qa=A.castHoverinfo({hoverinfo:[N.castOption(qa,ja.pts)],_module:aa._module},ba,0));"all"===qa&&(qa="label+text+value+percent+name");if(ma.hovertemplate||"none"!==qa&&"skip"!==qa&&qa){var ka=ja.rInscribed||0,oa=fa+ja.pxmid[0]*(1-ka),na=ha+ja.pxmid[1]*(1-ka),la=ba.separators,ia=[];qa&&-1!==qa.indexOf("label")&&ia.push(ja.label);ja.text=N.castOption(ma.hovertext||ma.text,ja.pts);if(qa&&-1!==qa.indexOf("text")){var sa=ja.text;F.isValidTextValue(sa)&&
ia.push(sa)}ja.value=ja.v;ja.valueLabel=N.formatPieValue(ja.v,la);qa&&-1!==qa.indexOf("value")&&ia.push(ja.valueLabel);ja.percent=ja.v/Z.vTotal;ja.percentLabel=N.formatPiePercent(ja.percent,la);qa&&-1!==qa.indexOf("percent")&&ia.push(ja.percentLabel);la=ma.hoverlabel;sa=la.font;A.loneHover({trace:aa,x0:oa-ka*Z.r,x1:oa+ka*Z.r,y:na,text:ia.join("<br>"),name:ma.hovertemplate||-1!==qa.indexOf("name")?ma.name:void 0,idealAlign:0>ja.pxmid[0]?"left":"right",color:N.castOption(la.bgcolor,ja.pts)||ja.color,
borderColor:N.castOption(la.bordercolor,ja.pts),fontFamily:N.castOption(sa.family,ja.pts),fontSize:N.castOption(sa.size,ja.pts),fontColor:N.castOption(sa.color,ja.pts),nameLength:N.castOption(la.namelength,ja.pts),textAlign:N.castOption(la.align,ja.pts),hovertemplate:N.castOption(ma.hovertemplate,ja.pts),hovertemplateLabels:ja,eventData:[T(ja,ma)]},{container:ba._hoverlayer.node(),outerContainer:ba._paper.node(),gd:S});aa._hasHoverLabel=!0}aa._hasHoverEvent=!0;S.emit("plotly_hover",{points:[T(ja,
ma)],event:y.event})}});U.on("mouseout",function(ja){var ba=S._fullLayout,ma=S._fullData[aa.index],qa=y.select(this).datum();aa._hasHoverEvent&&(ja.originalEvent=y.event,S.emit("plotly_unhover",{points:[T(qa,ma)],event:y.event}),aa._hasHoverEvent=!1);aa._hasHoverLabel&&(A.loneUnhover(ba._hoverlayer.node()),aa._hasHoverLabel=!1)});U.on("click",function(ja){var ba=S._fullLayout;S._dragging||!1===ba.hovermode||(S._hoverdata=[T(ja,S._fullData[aa.index])],A.click(S,y.event))})}function l(U,S,X){var Z=
N.castOption(U.outsidetextfont.color,S.pts)||N.castOption(U.textfont.color,S.pts)||X.color,aa=N.castOption(U.outsidetextfont.family,S.pts)||N.castOption(U.textfont.family,S.pts)||X.family;U=N.castOption(U.outsidetextfont.size,S.pts)||N.castOption(U.textfont.size,S.pts)||X.size;return{color:Z,family:aa,size:U}}function h(U,S,X){var Z=N.castOption(U.insidetextfont.color,S.pts);!Z&&U._input.textfont&&(Z=N.castOption(U._input.textfont.color,S.pts));var aa=N.castOption(U.insidetextfont.family,S.pts)||
N.castOption(U.textfont.family,S.pts)||X.family;U=N.castOption(U.insidetextfont.size,S.pts)||N.castOption(U.textfont.size,S.pts)||X.size;return{color:Z||t.contrast(S.color),family:aa,size:U}}function a(U,S){for(var X,Z,aa=0;aa<U.length;aa++)if(X=U[aa][0],Z=X.trace,Z.title.text){var fa=Z.title.text;Z._meta&&(fa=F.templateString(fa,Z._meta));Z=B.tester.append("text").attr("data-notex",1).text(fa).call(B.font,Z.title.font).call(L.convertToTspans,S);fa=B.bBox(Z.node(),!0);X.titleBox={width:fa.width,height:fa.height};
Z.remove()}}function g(U,S,X){var Z=X.r||S.rpx1,aa=S.rInscribed;if(S.startangle===S.stopangle)return{rCenter:1-aa,scale:0,rotate:0,textPosAngle:0};var fa=S.ring,ha=1===fa&&Math.abs(S.startangle-S.stopangle)===2*Math.PI,ja=S.halfangle,ba=S.midangle;X=X.trace.insidetextorientation;var ma="horizontal"===X,qa="tangential"===X,ka="radial"===X;X="auto"===X;var oa=[];if(!X){var na=function(sa,ta){var Aa=S.startangle,Ka=S.stopangle;if(Aa>sa&&sa>Ka||Aa<sa&&sa<Ka)Aa=Math.abs(sa-S.startangle),Ka=Math.abs(sa-
S.stopangle),Aa=Aa<Ka?Aa:Ka,ia="tan"===ta?n(U,Z,fa,Aa,0):e(U,Z,fa,Aa,Math.PI/2),ia.textPosAngle=sa,oa.push(ia)},la;if(ma||qa){for(la=4;-4<=la;la-=2)na(Math.PI*la,"tan");for(la=4;-4<=la;la-=2)na(Math.PI*(la+1),"tan")}if(ma||ka){for(la=4;-4<=la;la-=2)na(Math.PI*(la+1.5),"rad");for(la=4;-4<=la;la-=2)na(Math.PI*(la+.5),"rad")}}if(ha||X||ma){var ia={scale:aa*Z*2/Math.sqrt(U.width*U.width+U.height*U.height),rCenter:1-aa,rotate:0};ia.textPosAngle=(S.startangle+S.stopangle)/2;if(1<=ia.scale)return ia;oa.push(ia)}if(X||
ka)ia=e(U,Z,fa,ja,ba),ia.textPosAngle=(S.startangle+S.stopangle)/2,oa.push(ia);if(X||qa)ia=n(U,Z,fa,ja,ba),ia.textPosAngle=(S.startangle+S.stopangle)/2,oa.push(ia);for(ja=ha=aa=0;ja<oa.length&&(ba=oa[ja].scale,ha<ba&&(ha=ba,aa=ja),X||!(1<=ha));ja++);return oa[aa]}function e(U,S,X,Z,aa){S=Math.max(0,S-2*M);var fa=U.width/U.height;X=p(fa,Z,S,X);S=X/S;return{scale:2*X/U.height,rCenter:Math.cos(S)-fa*S,rotate:(180/Math.PI*aa+720)%180-90}}function n(U,S,X,Z,aa){S=Math.max(0,S-2*M);var fa=U.height/U.width;
X=p(fa,Z,S,X);S=X/S;return{scale:2*X/U.width,rCenter:Math.cos(S)-fa*S,rotate:(180/Math.PI*(aa+Math.PI/2)+720)%180-90}}function p(U,S,X,Z){S=U+1/(2*Math.tan(S));return X*Math.min(1/(Math.sqrt(S*S+.5)+S),Z/(Math.sqrt(U*U+Z/2)+U))}function c(U,S){var X=S.pxmid[0];S=S.pxmid[1];var Z=U.width/2;U=U.height/2;0>X&&(Z*=-1);0>S&&(U*=-1);return{scale:1,rCenter:1,rotate:0,x:Z+Math.abs(U)*(0<Z?1:-1)/2,y:U/(1+X*X/(S*S)),outside:!0}}function d(U,S){var X=U.trace,Z=U.cx,aa=U.cy,fa=0;var ha=0+X.title.font.size;var ja=
k(X);-1!==X.title.position.indexOf("top")?(aa-=(1+ja)*U.r,ha-=U.titleBox.height):-1!==X.title.position.indexOf("bottom")&&(aa+=(1+ja)*U.r);var ba=U.trace.aspectratio;ba=U.r/(void 0===ba?1:ba);var ma=S.w*(X.domain.x[1]-X.domain.x[0])/2;-1!==X.title.position.indexOf("left")?(ma+=ba,Z-=(1+ja)*ba,fa+=U.titleBox.width/2):-1!==X.title.position.indexOf("center")?ma*=2:-1!==X.title.position.indexOf("right")&&(ma+=ba,Z+=(1+ja)*ba,fa-=U.titleBox.width/2);ja=ma/U.titleBox.width;U=f(U,S)/U.titleBox.height;return{x:Z,
y:aa,scale:Math.min(ja,U),tx:fa,ty:ha}}function f(U,S){var X=U.trace;return Math.min(U.titleBox.height,S.h*(X.domain.y[1]-X.domain.y[0])/2)}function k(U){var S=U.pull;if(!S)return 0;var X;if(Array.isArray(S))for(X=S=0;X<U.pull.length;X++)U.pull[X]>S&&(S=U.pull[X]);return S}function r(U,S){function X(ta,Aa){return ta.pxmid[1]-Aa.pxmid[1]}function Z(ta,Aa){return Aa.pxmid[1]-ta.pxmid[1]}function aa(ta,Aa){Aa||(Aa={});var Ka=Aa.labelExtraY+(ha?Aa.yLabelMax:Aa.yLabelMin);Aa=ha?ta.yLabelMin:ta.yLabelMax;
var Sa=ha?ta.yLabelMax:ta.yLabelMin,db=ta.cyFinal+ma(ta.px0[1],ta.px1[1]),eb=Ka-Aa;0<eb*qa&&(ta.labelExtraY=eb);if(Array.isArray(S.pull))for(Ka=0;Ka<ia.length;Ka++){var lb=ia[Ka];lb===ta||(N.castOption(S.pull,ta.pts)||0)>=(N.castOption(S.pull,lb.pts)||0)||(0<(ta.pxmid[1]-lb.pxmid[1])*qa?(eb=lb.cyFinal+ma(lb.px0[1],lb.px1[1]),eb=eb-Aa-ta.labelExtraY,0<eb*qa&&(ta.labelExtraY+=eb)):0<(Sa+ta.labelExtraY-db)*qa&&(eb=3*oa*Math.abs(Ka-ia.indexOf(ta)),lb=lb.cxFinal+ka(lb.px0[0],lb.px1[0]),eb=lb+eb-(ta.cxFinal+
ta.pxmid[0])-ta.labelExtraX,0<eb*oa&&(ta.labelExtraX+=eb)))}}var fa,ha,ja;for(ha=0;2>ha;ha++){var ba=ha?X:Z;var ma=ha?Math.max:Math.min;var qa=ha?1:-1;for(fa=0;2>fa;fa++){var ka=fa?Math.max:Math.min;var oa=fa?1:-1;var na=U[ha][fa];na.sort(ba);var la=U[1-ha][fa];var ia=la.concat(na);var sa=[];for(ja=0;ja<na.length;ja++)void 0!==na[ja].yLabelMid&&sa.push(na[ja]);na=!1;for(ja=0;ha&&ja<la.length;ja++)if(void 0!==la[ja].yLabelMid){na=la[ja];break}for(ja=0;ja<sa.length;ja++)la=ja&&sa[ja-1],na&&!ja&&(la=
na),aa(sa[ja],la)}}}function u(U,S){for(var X=[],Z=0;Z<U.length;Z++){var aa=U[Z][0],fa=aa.trace,ha=fa.domain,ja=S.w*(ha.x[1]-ha.x[0]);ha=S.h*(ha.y[1]-ha.y[0]);fa.title.text&&"middle center"!==fa.title.position&&(ha-=f(aa,S));ja/=2;var ba=ha/2;"funnelarea"!==fa.type||fa.scalegroup||(ba/=fa.aspectratio);aa.r=Math.min(ja,ba)/(1+k(fa));aa.cx=S.l+S.w*(fa.domain.x[1]+fa.domain.x[0])/2;aa.cy=S.t+S.h*(1-fa.domain.y[0])-ha/2;fa.title.text&&-1!==fa.title.position.indexOf("bottom")&&(aa.cy-=f(aa,S));fa.scalegroup&&
-1===X.indexOf(fa.scalegroup)&&X.push(fa.scalegroup)}for(fa=0;fa<X.length;fa++){ha=Infinity;ja=X[fa];for(Z=0;Z<U.length;Z++)if(S=U[Z][0],aa=S.trace,aa.scalegroup===ja){if("pie"===aa.type)var ma=S.r*S.r;else"funnelarea"===aa.type&&(1<aa.aspectratio?(ma=S.r,ba=ma/aa.aspectratio):(ba=S.r,ma=ba*aa.aspectratio),ma*=(1+aa.baseratio)/2,ma*=ba);ha=Math.min(ha,ma/S.vTotal)}for(Z=0;Z<U.length;Z++)S=U[Z][0],aa=S.trace,aa.scalegroup===ja&&(ba=ha*S.vTotal,"funnelarea"===aa.type&&(ba/=(1+aa.baseratio)/2,ba/=aa.aspectratio),
S.r=Math.sqrt(ba))}}function v(U){var S=U[0],X=S.r,Z=S.trace,aa=N.getRotationAngle(Z.rotation),fa=2*Math.PI/S.vTotal,ha="px0",ja="px1",ba;if("counterclockwise"===Z.direction){for(ba=0;ba<U.length&&U[ba].hidden;ba++);if(ba===U.length)return;aa+=fa*U[ba].v;fa*=-1;ha="px1";ja="px0"}var ma=x(X,aa);for(ba=0;ba<U.length;ba++){var qa=U[ba];if(!qa.hidden){qa[ha]=ma;qa.startangle=aa;aa+=fa*qa.v/2;qa.pxmid=x(X,aa);qa.midangle=aa;aa+=fa*qa.v/2;ma=x(X,aa);qa.stopangle=aa;qa[ja]=ma;qa.largeArc=qa.v>S.vTotal/2?
1:0;qa.halfangle=Math.PI*Math.min(qa.v/S.vTotal,.5);qa.ring=1-Z.hole;var ka=qa;qa=qa.v!==S.vTotal||S.trace.hole?Math.min(1/(1+1/Math.sin(qa.halfangle)),qa.ring/2):1;ka.rInscribed=qa}}}function x(U,S){return[U*Math.sin(S),-U*Math.cos(S)]}function C(U,S,X){var Z=U._fullLayout,aa=X.trace,fa=aa.texttemplate,ha=aa.textinfo;if(!fa&&ha&&"none"!==ha){var ja=ha.split("+"),ba=-1!==ja.indexOf("label"),ma=-1!==ja.indexOf("text");ha=-1!==ja.indexOf("value");ja=-1!==ja.indexOf("percent");var qa=Z.separators;ba=
ba?[S.label]:[];ma&&(ma=N.getFirstFilled(aa.text,S.pts),Q(ma)&&ba.push(ma));ha&&ba.push(N.formatPieValue(S.v,qa));ja&&ba.push(N.formatPiePercent(S.v/X.vTotal,qa));S.text=ba.join("<br>")}if(fa)if(fa=F.castOption(aa,S.i,"texttemplate")){X={label:S.label,value:S.v,valueLabel:N.formatPieValue(S.v,Z.separators),percent:S.v/X.vTotal,percentLabel:N.formatPiePercent(S.v/X.vTotal,Z.separators),color:S.color,text:S.text,customdata:F.castOption(aa,S.i,"customdata")};Z=N.getFirstFilled(aa.text,S.pts);if(Q(Z)||
""===Z)X.text=Z;S.text=F.texttemplateString(fa,X,U._fullLayout._d3locale,X,aa._meta||{})}else S.text=""}function z(U,S){var X=U.rotate*Math.PI/180,Z=Math.cos(X);X=Math.sin(X);var aa=(S.left+S.right)/2;S=(S.top+S.bottom)/2;U.textX=aa*Z-S*X;U.textY=aa*X+S*Z;U.noCenter=!0}var y=b("d3"),D=b("../../plots/plots"),A=b("../../components/fx"),t=b("../../components/color"),B=b("../../components/drawing"),F=b("../../lib"),I=F.strScale,J=F.strTranslate,L=b("../../lib/svg_text_utils");G=b("../bar/uniform_text");
var H=G.recordMinTextSize,P=G.clearMinTextSize,M=b("../bar/constants").TEXTPAD,N=b("./helpers"),T=b("./event_data"),Q=b("../../lib").isValidTextValue;K.exports={plot:function(U,S){var X=U._fullLayout,Z=X._size;P("pie",X);a(S,U);u(S,Z);var aa=F.makeTraceGroups(X._pielayer,S,"trace").each(function(fa){var ha=y.select(this),ja=fa[0],ba=ja.trace;v(fa);ha.attr("stroke-linejoin","round");ha.each(function(){var ma=y.select(this).selectAll("g.slice").data(fa);ma.enter().append("g").classed("slice",!0);ma.exit().remove();
var qa=[[[],[]],[[],[]]],ka=!1;ma.each(function(ia,sa){function ta(hb,nb,va,Ba){return"a"+Ba*ja.r+","+Ba*ja.r+" 0 "+ia.largeArc+(va?" 1 ":" 0 ")+Ba*(nb[0]-hb[0])+","+Ba*(nb[1]-hb[1])}if(ia.hidden)y.select(this).selectAll("path,g").remove();else{ia.pointNumber=ia.i;ia.curveNumber=ba.index;qa[0>ia.pxmid[1]?0:1][0>ia.pxmid[0]?0:1].push(ia);var Aa=ja.cx,Ka=ja.cy,Sa=y.select(this),db=Sa.selectAll("path.surface").data([ia]);db.enter().append("path").classed("surface",!0).style({"pointer-events":"all"});
Sa.call(m,U,fa);if(ba.pull){var eb=+N.castOption(ba.pull,ia.pts)||0;0<eb&&(Aa+=eb*ia.pxmid[0],Ka+=eb*ia.pxmid[1])}ia.cxFinal=Aa;ia.cyFinal=Ka;eb=ba.hole;if(ia.v===ja.vTotal){var lb="M"+(Aa+ia.px0[0])+","+(Ka+ia.px0[1])+ta(ia.px0,ia.pxmid,!0,1)+ta(ia.pxmid,ia.px0,!0,1)+"Z";eb?db.attr("d","M"+(Aa+eb*ia.px0[0])+","+(Ka+eb*ia.px0[1])+ta(ia.px0,ia.pxmid,!1,eb)+ta(ia.pxmid,ia.px0,!1,eb)+"Z"+lb):db.attr("d",lb)}else if(lb=ta(ia.px0,ia.px1,!0,1),eb){var ab=1-eb;db.attr("d","M"+(Aa+eb*ia.px1[0])+","+(Ka+eb*
ia.px1[1])+ta(ia.px1,ia.px0,!1,eb)+"l"+ab*ia.px0[0]+","+ab*ia.px0[1]+lb+"Z")}else db.attr("d","M"+Aa+","+Ka+"l"+ia.px0[0]+","+ia.px0[1]+lb+"Z");C(U,ia,ja);var Ya=N.castOption(ba.textposition,ia.pts);Sa=Sa.selectAll("g.slicetext").data(ia.text&&"none"!==Ya?[0]:[]);Sa.enter().append("g").classed("slicetext",!0);Sa.exit().remove();Sa.each(function(){var hb=F.ensureSingle(y.select(this),"text","",function(Na){Na.attr("data-notex",1)}),nb=F.ensureUniformFontSize(U,"outside"===Ya?l(ba,ia,X.font):h(ba,ia,
X.font));hb.text(ia.text).attr({"class":"slicetext",transform:"","text-anchor":"middle"}).call(B.font,nb).call(L.convertToTspans,U);var va=B.bBox(hb.node());if("outside"===Ya)var Ba=c(va,ia);else Ba=g(va,ia,ja),"auto"===Ya&&1>Ba.scale&&(va=F.ensureUniformFontSize(U,ba.outsidetextfont),hb.call(B.font,va),va=B.bBox(hb.node()),Ba=c(va,ia));var Ga=Ba.textPosAngle;Ga=void 0===Ga?ia.pxmid:x(ja.r,Ga);Ba.targetX=Aa+Ga[0]*Ba.rCenter+(Ba.x||0);Ba.targetY=Ka+Ga[1]*Ba.rCenter+(Ba.y||0);z(Ba,va);Ba.outside&&(Ga=
Ba.targetY,ia.yLabelMin=Ga-va.height/2,ia.yLabelMid=Ga,ia.yLabelMax=Ga+va.height/2,ia.labelExtraX=0,ia.labelExtraY=0,ka=!0);Ba.fontSize=nb.size;H(ba.type,Ba,X);fa[sa].transform=Ba;hb.attr("transform",F.getTextTransform(Ba))})}});var oa=y.select(this).selectAll("g.titletext").data(ba.title.text?[0]:[]);oa.enter().append("g").classed("titletext",!0);oa.exit().remove();oa.each(function(){var ia=F.ensureSingle(y.select(this),"text","",function(ta){ta.attr("data-notex",1)}),sa=ba.title.text;ba._meta&&
(sa=F.templateString(sa,ba._meta));ia.text(sa).attr({"class":"titletext",transform:"","text-anchor":"middle"}).call(B.font,ba.title.font).call(L.convertToTspans,U);sa="middle center"===ba.title.position?{x:ja.cx,y:ja.cy,scale:ja.trace.hole*ja.r*2/Math.sqrt(ja.titleBox.width*ja.titleBox.width+ja.titleBox.height*ja.titleBox.height),tx:0,ty:-ja.titleBox.height/2+ja.trace.title.font.size}:d(ja,Z);ia.attr("transform",J(sa.x,sa.y)+I(Math.min(1,sa.scale))+J(sa.tx,sa.ty))});ka&&r(qa,ba);q(ma,ba);if(ka&&ba.automargin){ma=
B.bBox(ha.node());oa=ba.domain;var na=(.5*Z.w*(oa.x[1]-oa.x[0])-ja.r)/Z.w,la=(.5*Z.h*(oa.y[1]-oa.y[0])-ja.r)/Z.h;D.autoMargin(U,"pie."+ba.uid+".automargin",{xl:oa.x[0]-na,xr:oa.x[1]+na,yb:oa.y[0]-la,yt:oa.y[1]+la,l:Math.max(ja.cx-ja.r-ma.left,0),r:Math.max(ma.right-(ja.cx+ja.r),0),b:Math.max(ma.bottom-(ja.cy+ja.r),0),t:Math.max(ja.cy-ja.r-ma.top,0),pad:5})}})});setTimeout(function(){aa.selectAll("tspan").each(function(){var fa=y.select(this);fa.attr("dy")&&fa.attr("dy",fa.attr("dy"))})},0)},formatSliceLabel:C,
transformInsideText:g,determineInsideTextFont:h,positionTitleOutside:d,prerenderTitles:a,layoutAreas:u,attachFxHandlers:m,computeTransform:z}},{"../../components/color":643,"../../components/drawing":665,"../../components/fx":683,"../../lib":778,"../../lib/svg_text_utils":803,"../../plots/plots":891,"../bar/constants":923,"../bar/uniform_text":937,"./event_data":1165,"./helpers":1166,d3:169}],1171:[function(b,K,G){var q=b("d3"),m=b("./style_one"),l=b("../bar/uniform_text").resizeText;K.exports=function(h){var a=
h._fullLayout._pielayer.selectAll(".trace");l(h,a,"pie");a.each(function(g){var e=g[0].trace;g=q.select(this);g.style({opacity:e.opacity});g.selectAll("path.surface").each(function(n){q.select(this).call(m,n,e)})})}},{"../bar/uniform_text":937,"./style_one":1172,d3:169}],1172:[function(b,K,G){var q=b("../../components/color"),m=b("./helpers").castOption;K.exports=function(l,h,a){var g=a.marker.line;a=m(g.color,h.pts)||q.defaultLine;g=m(g.width,h.pts)||0;l.style("stroke-width",g).call(q.fill,h.color).call(q.stroke,
a)}},{"../../components/color":643,"./helpers":1166}],1173:[function(b,K,G){b=b("../scatter/attributes");K.exports={x:b.x,y:b.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:b.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},
sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},{"../scatter/attributes":1187}],1174:[function(b,K,G){function q(g,e){this.scene=g;this.uid=e;this.type="pointcloud";this.pickXData=[];this.pickYData=[];this.xData=[];this.yData=[];this.textLabels=[];this.color=
"rgb(0, 0, 0)";this.name="";this.hoverinfo="all";this.idToIndex=new Int32Array(0);this.bounds=[0,0,0,0];this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]};this.pointcloud=m(g.glplot,this.pointcloudOptions);this.pointcloud._trace=this}var m=b("gl-pointcloud2d"),l=b("../../lib/str2rgbarray"),h=b("../../plots/cartesian/autorange").findExtremes,a=b("../scatter/get_trace_color");b=q.prototype;b.handlePick=
function(g){var e=this.idToIndex[g.pointId];return{trace:this,dataCoord:g.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*e],this.pickXYData[2*e+1]]:[this.pickXData[e],this.pickYData[e]],textLabel:Array.isArray(this.textLabels)?this.textLabels[e]:this.textLabels,color:this.color,name:this.name,pointIndex:e,hoverinfo:this.hoverinfo}};b.update=function(g){this.index=g.index;this.textLabels=g.text;this.name=g.name;this.hoverinfo=g.hoverinfo;this.bounds=[Infinity,Infinity,-Infinity,-Infinity];
this.updateFast(g);this.color=a(g,{})};b.updateFast=function(g){var e=this.xData=this.pickXData=g.x,n=this.yData=this.pickYData=g.y,p=this.pickXYData=g.xy,c=g.xbounds&&g.ybounds,d=g.indices,f=this.bounds,k;if(p){var r=p;p=p.length>>>1;if(c)f[0]=g.xbounds[0],f[2]=g.xbounds[1],f[1]=g.ybounds[0],f[3]=g.ybounds[1];else for(k=0;k<p;k++){c=r[2*k];var u=r[2*k+1];c<f[0]&&(f[0]=c);c>f[2]&&(f[2]=c);u<f[1]&&(f[1]=u);u>f[3]&&(f[3]=u)}if(!d)for(d=new Int32Array(p),k=0;k<p;k++)d[k]=k}else for(p=e.length,r=new Float32Array(2*
p),d=new Int32Array(p),k=0;k<p;k++)c=e[k],u=n[k],d[k]=k,r[2*k]=c,r[2*k+1]=u,c<f[0]&&(f[0]=c),c>f[2]&&(f[2]=c),u<f[1]&&(f[1]=u),u>f[3]&&(f[3]=u);this.idToIndex=d;this.pointcloudOptions.idToIndex=d;this.pointcloudOptions.positions=r;p=l(g.marker.color);r=l(g.marker.border.color);d=g.opacity*g.marker.opacity;p[3]*=d;this.pointcloudOptions.color=p;p=g.marker.blend;null===p&&(p=100>e.length||100>n.length);this.pointcloudOptions.blend=p;r[3]*=d;this.pointcloudOptions.borderColor=r;r=Math.max(g.marker.sizemax,
g.marker.sizemin);this.pointcloudOptions.sizeMin=g.marker.sizemin;this.pointcloudOptions.sizeMax=r;this.pointcloudOptions.areaRatio=g.marker.border.arearatio;this.pointcloud.update(this.pointcloudOptions);e=this.scene.xaxis;n=this.scene.yaxis;r=r/2||.5;g._extremes[e._id]=h(e,[f[0],f[2]],{ppad:r});g._extremes[n._id]=h(n,[f[1],f[3]],{ppad:r})};b.dispose=function(){this.pointcloud.dispose()};K.exports=function(g,e){g=new q(g,e.uid);g.update(e);return g}},{"../../lib/str2rgbarray":802,"../../plots/cartesian/autorange":827,
"../scatter/get_trace_color":1197,"gl-pointcloud2d":324}],1175:[function(b,K,G){var q=b("../../lib"),m=b("./attributes");K.exports=function(l,h,a){function g(e,n){return q.coerce(l,h,m,e,n)}g("x");g("y");g("xbounds");g("ybounds");l.xy&&l.xy instanceof Float32Array&&(h.xy=l.xy);l.indices&&l.indices instanceof Int32Array&&(h.indices=l.indices);g("text");g("marker.color",a);g("marker.opacity");g("marker.blend");g("marker.sizemin");g("marker.sizemax");g("marker.border.color",a);g("marker.border.arearatio");
h._length=null}},{"../../lib":778,"./attributes":1173}],1176:[function(b,K,G){K.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("../scatter3d/calc"),plot:b("./convert"),moduleType:"trace",name:"pointcloud",basePlotModule:b("../../plots/gl2d"),categories:["gl","gl2d","showLegend"],meta:{}}},{"../../plots/gl2d":868,"../scatter3d/calc":1216,"./attributes":1173,"./convert":1174,"./defaults":1175}],1177:[function(b,K,G){G=b("../../plots/font_attributes");var q=b("../../plots/attributes"),
m=b("../../components/color/attributes"),l=b("../../components/fx/attributes"),h=b("../../plots/domain").attributes,a=b("../../plots/template_attributes").hovertemplateAttrs,g=b("../../components/colorscale/attributes"),e=b("../../plot_api/plot_template").templatedArray,n=b("../../lib/extend").extendFlat,p=b("../../plot_api/edit_types").overrideAll;b("../../constants/docs");(K.exports=p({hoverinfo:n({},q.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:l.hoverlabel,domain:h({name:"sankey",trace:!0}),orientation:{valType:"enumerated",
values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s"},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:G({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",
arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:m.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:l.hoverlabel,hovertemplate:a({},{keys:["value","label"]})},link:{label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",
editType:"calc"},line:{color:{valType:"color",dflt:m.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:l.hoverlabel,hovertemplate:a({},{keys:["value","label"]}),colorscales:e("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",
editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:n(g().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested")).transforms=void 0},{"../../components/color/attributes":642,"../../components/colorscale/attributes":650,"../../components/fx/attributes":674,"../../constants/docs":748,"../../lib/extend":768,"../../plot_api/edit_types":810,"../../plot_api/plot_template":817,"../../plots/attributes":824,"../../plots/domain":855,"../../plots/font_attributes":856,
"../../plots/template_attributes":906}],1178:[function(b,K,G){function q(c,d){var f=c._fullData[d],k=c._fullLayout,r=k.dragmode,u=f._bgRect;if("pan"!==r&&"zoom"!==r){a(u,"pan"===k.dragmode?"move":"crosshair");k={_id:"x",c2p:n.identity,_offset:f._sankey.translateX,_length:f._sankey.width};f={_id:"y",c2p:n.identity,_offset:f._sankey.translateY,_length:f._sankey.height};var v={gd:c,element:u.node(),plotinfo:{id:d,xaxis:k,yaxis:f,fillRangeItems:n.noop},subplot:d,xaxes:[k],yaxes:[f],doneFnCompleted:function(x){for(var C=
c._fullData[d],z=C.node.groups.slice(),y=[],D=0;D<x.length;D++){a:{var A=C._sankey.graph.nodes;for(var t=0;t<A.length;t++)if(A[t].pointNumber===x[D].pointNumber){A=A[t];break a}A=void 0}if(A)if(A.group){for(t=0;t<A.childrenNodes.length;t++)y.push(A.childrenNodes[t].pointNumber);z[A.pointNumber-C.node._count]=!1}else y.push(A.pointNumber)}x=z.filter(Boolean).concat([y]);p.call("_guiRestyle",c,{"node.groups":[x]},d)},prepFn:function(x,C,z){e(x,C,z,v,r)}};g.init(v)}}K=b("../../plot_api/edit_types").overrideAll;
var m=b("../../plots/get_data").getModuleCalcData,l=b("./plot"),h=b("../../components/fx/layout_attributes"),a=b("../../lib/setcursor"),g=b("../../components/dragelement"),e=b("../../plots/cartesian/select").prepSelect,n=b("../../lib"),p=b("../../registry");G.name="sankey";G.baseLayoutAttrOverrides=K({hoverlabel:h.hoverlabel},"plot","nested");G.plot=function(c){var d=m(c.calcdata,"sankey")[0];l(c,d);G.updateFx(c)};G.clean=function(c,d,f,k){c=k._has&&k._has("sankey");d=d._has&&d._has("sankey");c&&
!d&&(k._paperdiv.selectAll(".sankey").remove(),k._paperdiv.selectAll(".bgsankey").remove())};G.updateFx=function(c){for(var d=0;d<c._fullData.length;d++)q(c,d)}},{"../../components/dragelement":662,"../../components/fx/layout_attributes":684,"../../lib":778,"../../lib/setcursor":799,"../../plot_api/edit_types":810,"../../plots/cartesian/select":847,"../../plots/get_data":865,"../../registry":911,"./plot":1183}],1179:[function(b,K,G){function q(n,p,c){for(var d=l.init2dArray(n,0),f=0;f<Math.min(p.length,
c.length);f++)if(l.isIndex(p[f],n)&&l.isIndex(c[f],n)){if(p[f]===c[f])return!0;d[p[f]].push(c[f])}return m(d).components.some(function(k){return 1<k.length})}var m=b("strongly-connected-components"),l=b("../../lib"),h=b("../../lib/gup").wrap,a=l.isArrayOrTypedArray,g=l.isIndex,e=b("../../components/colorscale");K.exports=function(n,p){var c=p.node,d=p.link;n=[];var f=a(d.color),k=a(d.customdata),r={},u={},v=d.colorscales.length,x;for(x=0;x<v;x++){var C=d.colorscales[x],z=e.extractScale(C,{cLetter:"c"});
z=e.makeColorScaleFunc(z);u[C.label]=z}for(x=v=0;x<d.value.length;x++)d.source[x]>v&&(v=d.source[x]),d.target[x]>v&&(v=d.target[x]);v+=1;p.node._count=v;p=p.node.groups;C={};for(x=0;x<p.length;x++){var y=p[x];for(z=0;z<y.length;z++){var D=y[z],A=v+x;C.hasOwnProperty(D)?l.warn("Node "+D+" is already part of a group."):C[D]=A}}z=[];y=[];for(x=0;x<d.value.length;x++){D=d.value[x];A=d.source[x];var t=d.target[x];if(0<D&&g(A,v)&&g(t,v)&&(!C.hasOwnProperty(A)||!C.hasOwnProperty(t)||C[A]!==C[t])){C.hasOwnProperty(t)&&
(t=C[t]);C.hasOwnProperty(A)&&(A=C[A]);A=+A;t=+t;r[A]=r[t]=!0;var B="";d.label&&d.label[x]&&(B=d.label[x]);var F=null;B&&u.hasOwnProperty(B)&&(F=u[B]);n.push({pointNumber:x,label:B,color:f?d.color[x]:d.color,customdata:k?d.customdata[x]:d.customdata,concentrationscale:F,source:A,target:t,value:+D});z.push(A);y.push(t)}}d=v+p.length;k=a(c.color);u=a(c.customdata);f=[];for(x=0;x<d;x++)r[x]&&f.push({group:x>v-1,childrenNodes:[],pointNumber:x,label:c.label[x],color:k?c.color[x]:c.color,customdata:u?c.customdata[x]:
c.customdata});c=!1;q(d,z,y)&&(c=!0);return h({circular:c,_nodes:f,_links:n,_groups:p,_groupLookup:C})}},{"../../components/colorscale":655,"../../lib":778,"../../lib/gup":775,"strongly-connected-components":569}],1180:[function(b,K,G){K.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",
sankeyNode:"sankey-node",nodeRect:"node-rect",nodeCapture:"node-capture",nodeCentered:"node-entered",nodeLabelGuide:"node-label-guide",nodeLabel:"node-label",nodeLabelTextPath:"node-label-text-path"}}},{}],1181:[function(b,K,G){function q(c,d){function f(k,r){return m.coerce(c,d,l.link.colorscales,k,r)}f("label");f("cmin");f("cmax");f("colorscale")}var m=b("../../lib"),l=b("./attributes"),h=b("../../components/color"),a=b("tinycolor2"),g=b("../../plots/domain").defaults,e=b("../../components/fx/hoverlabel_defaults"),
n=b("../../plot_api/plot_template"),p=b("../../plots/array_container_defaults");K.exports=function(c,d,f,k){function r(t,B){return m.coerce(c,d,l,t,B)}function u(t,B){return m.coerce(x,C,l.node,t,B)}function v(t,B){return m.coerce(y,D,l.link,t,B)}f=m.extendDeep(k.hoverlabel,c.hoverlabel);var x=c.node,C=n.newContainer(d,"node");u("label");u("groups");u("x");u("y");u("pad");u("thickness");u("line.color");u("line.width");u("hoverinfo",c.hoverinfo);e(x,C,u,f);u("hovertemplate");var z=k.colorway;u("color",
C.label.map(function(t,B){return h.addOpacity(z[B%z.length],.8)}));u("customdata");var y=c.link||{},D=n.newContainer(d,"link");v("label");v("source");v("target");v("value");v("line.color");v("line.width");v("hoverinfo",c.hoverinfo);e(y,D,v,f);v("hovertemplate");f=.333>a(k.paper_bgcolor).getLuminance()?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";v("color",m.repeat(f,D.value.length));v("customdata");p(y,D,{name:"colorscales",handleItemDefaults:q});g(d,k,r);r("orientation");r("valueformat");r("valuesuffix");
var A;C.x.length&&C.y.length&&(A="freeform");r("arrangement",A);m.coerceFont(r,"textfont",m.extendFlat({},k.font));d._length=null}},{"../../components/color":643,"../../components/fx/hoverlabel_defaults":681,"../../lib":778,"../../plot_api/plot_template":817,"../../plots/array_container_defaults":823,"../../plots/domain":855,"./attributes":1177,tinycolor2:576}],1182:[function(b,K,G){K.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc"),plot:b("./plot"),moduleType:"trace",
name:"sankey",basePlotModule:b("./base_plot"),selectPoints:b("./select.js"),categories:["noOpacity"],meta:{}}},{"./attributes":1177,"./base_plot":1178,"./calc":1179,"./defaults":1181,"./plot":1183,"./select.js":1185}],1183:[function(b,K,G){function q(z){return""!==z}function m(z,y){return z.filter(function(D){return D.key===y.traceId})}function l(z,y){f.select(z).select("path").style("fill-opacity",y);f.select(z).select("rect").style("fill-opacity",y)}function h(z){f.select(z).select("text.name").style("fill",
"black")}function a(z){return function(y){return-1!==z.node.sourceLinks.indexOf(y.link)||-1!==z.node.targetLinks.indexOf(y.link)}}function g(z){return function(y){return-1!==y.node.sourceLinks.indexOf(z.link)||-1!==y.node.targetLinks.indexOf(z.link)}}function e(z,y,D){y&&D&&m(D,y).selectAll("."+x.sankeyLink).filter(a(y)).call(p.bind(0,y,D,!1))}function n(z,y,D){y&&D&&m(D,y).selectAll("."+x.sankeyLink).filter(a(y)).call(c.bind(0,y,D,!1))}function p(z,y,D,A){var t=A.datum().link.label;A.style("fill-opacity",
function(B){if(!B.link.concentrationscale)return.4});t&&m(y,z).selectAll("."+x.sankeyLink).filter(function(B){return B.link.label===t}).style("fill-opacity",function(B){if(!B.link.concentrationscale)return.4});D&&m(y,z).selectAll("."+x.sankeyNode).filter(g(z)).call(e)}function c(z,y,D,A){var t=A.datum().link.label;A.style("fill-opacity",function(B){return B.tinyColorAlpha});t&&m(y,z).selectAll("."+x.sankeyLink).filter(function(B){return B.link.label===t}).style("fill-opacity",function(B){return B.tinyColorAlpha});
D&&m(y,z).selectAll(x.sankeyNode).filter(g(z)).call(n)}function d(z,y){z=v.nestedProperty(z.hoverlabel||{},y).get();return Array.isArray(z)?!1:z}var f=b("d3"),k=b("./render"),r=b("../../components/fx"),u=b("../../components/color"),v=b("../../lib"),x=b("./constants").cn,C=v._;K.exports=function(z,y){for(var D=z._fullLayout,A=D._paper,t=D._size,B=0;B<z._fullData.length;B++)if(z._fullData[B].visible&&z._fullData[B].type===x.sankey&&!z._fullData[B]._viewInitial){var F=z._fullData[B].node;z._fullData[B]._viewInitial=
{node:{groups:F.groups.slice(),x:F.x.slice(),y:F.y.slice()}}}var I=C(z,"source:")+" ",J=C(z,"target:")+" ",L=C(z,"concentration:")+" ",H=C(z,"incoming flow count:")+" ",P=C(z,"outgoing flow count:")+" ";k(z,A,y,{width:t.w,height:t.h,margin:{t:t.t,r:t.r,b:t.b,l:t.l}},{linkEvents:{hover:function(M,N,T){!1!==z._fullLayout.hovermode&&(f.select(M).call(p.bind(0,N,T,!0)),"skip"!==N.link.trace.link.hoverinfo&&(N.link.fullData=N.link.trace,z.emit("plotly_hover",{event:f.event,points:[N.link]})))},follow:function(M,
N){function T(fa){if(fa.circular){var ha=(fa.circularPathData.leftInnerExtent+fa.circularPathData.rightInnerExtent)/2;var ja=fa.circularPathData.verticalFullExtent}else ha=(fa.source.x1+fa.target.x0)/2,ja=(fa.y0+fa.y1)/2;ha=[ha,ja];"v"===fa.trace.orientation&&ha.reverse();ha[0]+=N.parent.translateX;ha[1]+=N.parent.translateY;return ha}if(!1!==z._fullLayout.hovermode&&(M=N.link.trace.link,"none"!==M.hoverinfo&&"skip"!==M.hoverinfo)){for(var Q=[],U=0,S=0;S<N.flow.links.length;S++){var X=N.flow.links[S];
if("closest"!==z._fullLayout.hovermode||N.link.pointNumber===X.pointNumber){N.link.pointNumber===X.pointNumber&&(U=S);X.fullData=X.trace;M=N.link.trace.link;var Z=T(X),aa={valueLabel:f.format(N.valueFormat)(X.value)+N.valueSuffix};Q.push({x:Z[0],y:Z[1],name:aa.valueLabel,text:[X.label||"",I+X.source.label,J+X.target.label,X.concentrationscale?L+f.format("%0.2f")(X.flow.labelConcentration):""].filter(q).join("<br>"),color:d(M,"bgcolor")||u.addOpacity(X.color,1),borderColor:d(M,"bordercolor"),fontFamily:d(M,
"font.family"),fontSize:d(M,"font.size"),fontColor:d(M,"font.color"),nameLength:d(M,"namelength"),textAlign:d(M,"align"),idealAlign:f.event.x<Z[0]?"right":"left",hovertemplate:M.hovertemplate,hovertemplateLabels:aa,eventData:[X]})}}r.loneHover(Q,{container:D._hoverlayer.node(),outerContainer:D._paper.node(),gd:z,anchorIndex:U}).each(function(){N.link.concentrationscale||l(this,.65);h(this)})}},unhover:function(M,N,T){!1!==z._fullLayout.hovermode&&(f.select(M).call(c.bind(0,N,T,!0)),"skip"!==N.link.trace.link.hoverinfo&&
(N.link.fullData=N.link.trace,z.emit("plotly_unhover",{event:f.event,points:[N.link]})),r.loneUnhover(D._hoverlayer.node()))},select:function(M,N){M=N.link;M.originalEvent=f.event;z._hoverdata=[M];r.click(z,{target:!0})}},nodeEvents:{hover:function(M,N,T){!1!==z._fullLayout.hovermode&&(f.select(M).call(e,N,T),"skip"!==N.node.trace.node.hoverinfo&&(N.node.fullData=N.node.trace,z.emit("plotly_hover",{event:f.event,points:[N.node]})))},follow:function(M,N){if(!1!==z._fullLayout.hovermode){var T=N.node.trace.node;
if("none"!==T.hoverinfo&&"skip"!==T.hoverinfo){M=f.select(M).select("."+x.nodeRect);var Q=z._fullLayout._paperdiv.node().getBoundingClientRect(),U=M.node().getBoundingClientRect();M=U.left-2-Q.left;var S=U.right+2-Q.left;Q=U.top+U.height/4-Q.top;U={valueLabel:f.format(N.valueFormat)(N.node.value)+N.valueSuffix};N.node.fullData=N.node.trace;z._fullLayout._calcInverseTransform(z);var X=z._fullLayout._invScaleX;N=r.loneHover({x0:X*M,x1:X*S,y:z._fullLayout._invScaleY*Q,name:f.format(N.valueFormat)(N.node.value)+
N.valueSuffix,text:[N.node.label,H+N.node.targetLinks.length,P+N.node.sourceLinks.length].filter(q).join("<br>"),color:d(T,"bgcolor")||N.tinyColorHue,borderColor:d(T,"bordercolor"),fontFamily:d(T,"font.family"),fontSize:d(T,"font.size"),fontColor:d(T,"font.color"),nameLength:d(T,"namelength"),textAlign:d(T,"align"),idealAlign:"left",hovertemplate:T.hovertemplate,hovertemplateLabels:U,eventData:[N.node]},{container:D._hoverlayer.node(),outerContainer:D._paper.node(),gd:z});l(N,.85);h(N)}}},unhover:function(M,
N,T){!1!==z._fullLayout.hovermode&&(f.select(M).call(n,N,T),"skip"!==N.node.trace.node.hoverinfo&&(N.node.fullData=N.node.trace,z.emit("plotly_unhover",{event:f.event,points:[N.node]})),r.loneUnhover(D._hoverlayer.node()))},select:function(M,N,T){var Q=N.node;Q.originalEvent=f.event;z._hoverdata=[Q];f.select(M).call(n,N,T);r.click(z,{target:!0})}}})}},{"../../components/color":643,"../../components/fx":683,"../../lib":778,"./constants":1180,"./render":1184,d3:169}],1184:[function(b,K,G){function q(fa,
ha,ja){function ba(nb){nb.forEach(function(va){var Ba=0;var Ga=va.length,Na;va.sort(function(Va,qb){return Va.y0-qb.y0});for(Na=0;Na<Ga;++Na){var $a=va[Na];$a.y0>=Ba||(Ba-=$a.y0,1E-6<Ba&&($a.y0+=Ba,$a.y1+=Ba));Ba=$a.y1+na}})}function ma(nb){var va=nb.map(function(Ha,Ra){return{x0:Ha.x0,index:Ra}}).sort(function(Ha,Ra){return Ha.x0-Ra.x0}),Ba=[],Ga=-1,Na=-Infinity;for(eb=0;eb<va.length;eb++){var $a=nb[va[eb].index];if($a.x0>Na+la){Ga+=1;var Va=$a.x0}Na=$a.x0;Ba[Ga]||(Ba[Ga]=[]);Ba[Ga].push($a);var qb=
Va-$a.x0;$a.x0+=qb;$a.x1+=qb}return Ba}var qa=X(ha);ha=qa.trace;var ka=ha.domain,oa="h"===ha.orientation,na=ha.node.pad,la=ha.node.thickness,ia=fa.width*(ka.x[1]-ka.x[0]),sa=fa.height*(ka.y[1]-ka.y[0]),ta=qa._nodes,Aa=qa._links,Ka=qa.circular;var Sa=Ka?M.sankeyCircular().circularLinkGap(0):P.sankey();Sa.iterations(F.sankeyIterations).size(oa?[ia,sa]:[sa,ia]).nodeWidth(la).nodePadding(na).nodeId(function(nb){return nb.pointNumber}).nodes(ta).links(Aa);var db=Sa();Sa.nodePadding()<na&&T.warn("node.pad was reduced to ",
Sa.nodePadding()," to fit within the figure.");var eb,lb,ab;for(hb in qa._groupLookup){ta=parseInt(qa._groupLookup[hb]);for(eb=0;eb<db.nodes.length;eb++)if(db.nodes[eb].pointNumber===ta){var Ya=db.nodes[eb];break}Ya&&(ta={pointNumber:parseInt(hb),x0:Ya.x0,x1:Ya.x1,y0:Ya.y0,y1:Ya.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]},db.nodes.unshift(ta),Ya.childrenNodes.unshift(ta))}(function(){for(eb=0;eb<db.nodes.length;eb++){var nb=db.nodes[eb],va={};for(lb=0;lb<nb.targetLinks.length;lb++){var Ba=nb.targetLinks[lb];
var Ga=Ba.source.pointNumber+":"+Ba.target.pointNumber;va.hasOwnProperty(Ga)||(va[Ga]=[]);va[Ga].push(Ba)}var Na=Object.keys(va);for(lb=0;lb<Na.length;lb++){Ga=Na[lb];Ga=va[Ga];var $a=0,Va={};for(ab=0;ab<Ga.length;ab++)Ba=Ga[ab],Va[Ba.label]||(Va[Ba.label]=0),Va[Ba.label]+=Ba.value,$a+=Ba.value;for(ab=0;ab<Ga.length;ab++)Ba=Ga[ab],Ba.flow={value:$a,labelConcentration:Va[Ba.label]/$a,concentration:Ba.value/$a,links:Ga},Ba.concentrationscale&&(Ba.color=J(Ba.concentrationscale(Ba.flow.labelConcentration)))}for(lb=
va=0;lb<nb.sourceLinks.length;lb++)va+=nb.sourceLinks[lb].value;for(lb=0;lb<nb.sourceLinks.length;lb++)Ba=nb.sourceLinks[lb],Ba.concentrationOut=Ba.value/va;for(lb=va=0;lb<nb.targetLinks.length;lb++)va+=nb.targetLinks[lb].value;for(lb=0;lb<nb.targetLinks.length;lb++)Ba=nb.targetLinks[lb],Ba.concenrationIn=Ba.value/va}})();if(ha.node.x.length&&ha.node.y.length){for(eb=0;eb<Math.min(ha.node.x.length,ha.node.y.length,db.nodes.length);eb++)if(ha.node.x[eb]&&ha.node.y[eb]){var hb=[ha.node.x[eb]*ia,ha.node.y[eb]*
sa];db.nodes[eb].x0=hb[0]-la/2;db.nodes[eb].x1=hb[0]+la/2;Ya=db.nodes[eb].y1-db.nodes[eb].y0;db.nodes[eb].y0=hb[1]-Ya/2;db.nodes[eb].y1=hb[1]+Ya/2}"snap"===ha.arrangement&&(ta=db.nodes,hb=ma(ta),ba(hb));Sa.update(db)}return{circular:Ka,key:ja,trace:ha,guid:T.randstr(),horizontal:oa,width:ia,height:sa,nodePad:ha.node.pad,nodeLineColor:ha.node.line.color,nodeLineWidth:ha.node.line.width,linkLineColor:ha.link.line.color,linkLineWidth:ha.link.line.width,valueFormat:ha.valueformat,valueSuffix:ha.valuesuffix,
textFont:ha.textfont,translateX:ka.x[0]*fa.width+fa.margin.l,translateY:fa.height-ka.y[1]*fa.height+fa.margin.t,dragParallel:oa?sa:ia,dragPerpendicular:oa?ia:sa,arrangement:ha.arrangement,sankey:Sa,graph:db,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function m(fa,ha,ja){var ba=J(ha.color),ma=ha.source.label+"|"+ha.target.label;ha.trace=fa.trace;ha.curveNumber=fa.trace.index;return{circular:fa.circular,key:ma+"__"+ja,traceId:fa.key,pointNumber:ha.pointNumber,link:ha,tinyColorHue:L.tinyRGB(ba),
tinyColorAlpha:ba.getAlpha(),linkPath:l,linkLineColor:fa.linkLineColor,linkLineWidth:fa.linkLineWidth,valueFormat:fa.valueFormat,valueSuffix:fa.valueSuffix,sankey:fa.sankey,parent:fa,interactionState:fa.interactionState,flow:ha.flow}}function l(){return function(fa){if(fa.link.circular){var ha=fa.link,ja=ha.width/2,ba=ha.circularPathData;return"top"===ha.circularLinkType?"M "+ba.targetX+" "+(ba.targetY+ja)+" L"+ba.rightInnerExtent+" "+(ba.targetY+ja)+"A"+(ba.rightLargeArcRadius+ja)+" "+(ba.rightSmallArcRadius+
ja)+" 0 0 1 "+(ba.rightFullExtent-ja)+" "+(ba.targetY-ba.rightSmallArcRadius)+"L"+(ba.rightFullExtent-ja)+" "+ba.verticalRightInnerExtent+"A"+(ba.rightLargeArcRadius+ja)+" "+(ba.rightLargeArcRadius+ja)+" 0 0 1 "+ba.rightInnerExtent+" "+(ba.verticalFullExtent-ja)+"L"+ba.leftInnerExtent+" "+(ba.verticalFullExtent-ja)+"A"+(ba.leftLargeArcRadius+ja)+" "+(ba.leftLargeArcRadius+ja)+" 0 0 1 "+(ba.leftFullExtent+ja)+" "+ba.verticalLeftInnerExtent+"L"+(ba.leftFullExtent+ja)+" "+(ba.sourceY-ba.leftSmallArcRadius)+
"A"+(ba.leftLargeArcRadius+ja)+" "+(ba.leftSmallArcRadius+ja)+" 0 0 1 "+ba.leftInnerExtent+" "+(ba.sourceY+ja)+"L"+ba.sourceX+" "+(ba.sourceY+ja)+"L"+ba.sourceX+" "+(ba.sourceY-ja)+"L"+ba.leftInnerExtent+" "+(ba.sourceY-ja)+"A"+(ba.leftLargeArcRadius-ja)+" "+(ba.leftSmallArcRadius-ja)+" 0 0 0 "+(ba.leftFullExtent-ja)+" "+(ba.sourceY-ba.leftSmallArcRadius)+"L"+(ba.leftFullExtent-ja)+" "+ba.verticalLeftInnerExtent+"A"+(ba.leftLargeArcRadius-ja)+" "+(ba.leftLargeArcRadius-ja)+" 0 0 0 "+ba.leftInnerExtent+
" "+(ba.verticalFullExtent+ja)+"L"+ba.rightInnerExtent+" "+(ba.verticalFullExtent+ja)+"A"+(ba.rightLargeArcRadius-ja)+" "+(ba.rightLargeArcRadius-ja)+" 0 0 0 "+(ba.rightFullExtent+ja)+" "+ba.verticalRightInnerExtent+"L"+(ba.rightFullExtent+ja)+" "+(ba.targetY-ba.rightSmallArcRadius)+"A"+(ba.rightLargeArcRadius-ja)+" "+(ba.rightSmallArcRadius-ja)+" 0 0 0 "+ba.rightInnerExtent+" "+(ba.targetY-ja)+"L"+ba.targetX+" "+(ba.targetY-ja)+"Z":"M "+ba.targetX+" "+(ba.targetY-ja)+" L"+ba.rightInnerExtent+" "+
(ba.targetY-ja)+"A"+(ba.rightLargeArcRadius+ja)+" "+(ba.rightSmallArcRadius+ja)+" 0 0 0 "+(ba.rightFullExtent-ja)+" "+(ba.targetY+ba.rightSmallArcRadius)+"L"+(ba.rightFullExtent-ja)+" "+ba.verticalRightInnerExtent+"A"+(ba.rightLargeArcRadius+ja)+" "+(ba.rightLargeArcRadius+ja)+" 0 0 0 "+ba.rightInnerExtent+" "+(ba.verticalFullExtent+ja)+"L"+ba.leftInnerExtent+" "+(ba.verticalFullExtent+ja)+"A"+(ba.leftLargeArcRadius+ja)+" "+(ba.leftLargeArcRadius+ja)+" 0 0 0 "+(ba.leftFullExtent+ja)+" "+ba.verticalLeftInnerExtent+
"L"+(ba.leftFullExtent+ja)+" "+(ba.sourceY+ba.leftSmallArcRadius)+"A"+(ba.leftLargeArcRadius+ja)+" "+(ba.leftSmallArcRadius+ja)+" 0 0 0 "+ba.leftInnerExtent+" "+(ba.sourceY-ja)+"L"+ba.sourceX+" "+(ba.sourceY-ja)+"L"+ba.sourceX+" "+(ba.sourceY+ja)+"L"+ba.leftInnerExtent+" "+(ba.sourceY+ja)+"A"+(ba.leftLargeArcRadius-ja)+" "+(ba.leftSmallArcRadius-ja)+" 0 0 1 "+(ba.leftFullExtent-ja)+" "+(ba.sourceY+ba.leftSmallArcRadius)+"L"+(ba.leftFullExtent-ja)+" "+ba.verticalLeftInnerExtent+"A"+(ba.leftLargeArcRadius-
ja)+" "+(ba.leftLargeArcRadius-ja)+" 0 0 1 "+ba.leftInnerExtent+" "+(ba.verticalFullExtent-ja)+"L"+ba.rightInnerExtent+" "+(ba.verticalFullExtent-ja)+"A"+(ba.rightLargeArcRadius-ja)+" "+(ba.rightLargeArcRadius-ja)+" 0 0 1 "+(ba.rightFullExtent+ja)+" "+ba.verticalRightInnerExtent+"L"+(ba.rightFullExtent+ja)+" "+(ba.targetY+ba.rightSmallArcRadius)+"A"+(ba.rightLargeArcRadius-ja)+" "+(ba.rightSmallArcRadius-ja)+" 0 0 1 "+ba.rightInnerExtent+" "+(ba.targetY+ja)+"L"+ba.targetX+" "+(ba.targetY+ja)+"Z"}ha=
fa.link.source.x1;ja=fa.link.target.x0;var ma=Z(ha,ja);ba=ma(.5);ma=ma(.5);var qa=fa.link.y0-fa.link.width/2,ka=fa.link.y0+fa.link.width/2,oa=fa.link.y1-fa.link.width/2;fa=fa.link.y1+fa.link.width/2;return"M"+ha+","+qa+"C"+ba+","+qa+" "+ma+","+oa+" "+ja+","+oa+"L"+ja+","+fa+"C"+ma+","+fa+" "+ba+","+ka+" "+ha+","+ka+"Z"}}function h(fa,ha){var ja=J(ha.color),ba=F.nodePadAcross,ma=fa.nodePad/2;ha.dx=ha.x1-ha.x0;ha.dy=ha.y1-ha.y0;var qa=ha.dx,ka=Math.max(.5,ha.dy),oa="node_"+ha.pointNumber;ha.group&&
(oa=T.randstr());ha.trace=fa.trace;ha.curveNumber=fa.trace.index;return{index:ha.pointNumber,key:oa,partOfGroup:ha.partOfGroup||!1,group:ha.group,traceId:fa.key,trace:fa.trace,node:ha,nodePad:fa.nodePad,nodeLineColor:fa.nodeLineColor,nodeLineWidth:fa.nodeLineWidth,textFont:fa.textFont,size:fa.horizontal?fa.height:fa.width,visibleWidth:Math.ceil(qa),visibleHeight:ka,zoneX:-ba,zoneY:-ma,zoneWidth:qa+2*ba,zoneHeight:ka+2*ma,labelY:fa.horizontal?ha.dy/2+1:ha.dx/2+1,left:1===ha.originalLayer,sizeAcross:fa.width,
forceLayouts:fa.forceLayouts,horizontal:fa.horizontal,darkBackground:128>=ja.getBrightness(),tinyColorHue:L.tinyRGB(ja),tinyColorAlpha:ja.getAlpha(),valueFormat:fa.valueFormat,valueSuffix:fa.valueSuffix,sankey:fa.sankey,graph:fa.graph,arrangement:fa.arrangement,uniqueNodeLabelPathId:[fa.guid,fa.key,oa].join("_"),interactionState:fa.interactionState,figure:fa}}function a(fa){fa.attr("transform",function(ha){return Q(ha.node.x0.toFixed(3),ha.node.y0.toFixed(3))})}function g(fa){fa.call(a)}function e(fa){fa.attr("width",
function(ha){return ha.node.x1-ha.node.x0}).attr("height",function(ha){return ha.visibleHeight})}function n(fa){return Q(fa.translateX,fa.translateY)+(fa.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function p(fa){return Q(fa.horizontal?0:fa.labelY,fa.horizontal?fa.labelY:0)}function c(fa){return I.svg.line()([[fa.horizontal?fa.left?-fa.sizeAcross:fa.visibleWidth+F.nodeTextOffsetHorizontal:F.nodeTextOffsetHorizontal,0],[fa.horizontal?fa.left?-F.nodeTextOffsetHorizontal:fa.sizeAcross:fa.visibleHeight-
F.nodeTextOffsetHorizontal,0]])}function d(fa){return fa.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)"}function f(fa){return fa.horizontal?"scale(1 1)":"scale(-1 1)"}function k(fa){return fa.darkBackground&&!fa.horizontal?"rgb(255,255,255)":"rgb(0,0,0)"}function r(fa){return fa.horizontal&&fa.left?"100%":"0%"}function u(fa,ha,ja){fa.on(".basic",null).on("mouseover.basic",function(ba){ba.interactionState.dragInProgress||ba.partOfGroup||(ja.hover(this,ba,ha),ba.interactionState.hovered=[this,
ba])}).on("mousemove.basic",function(ba){ba.interactionState.dragInProgress||ba.partOfGroup||(ja.follow(this,ba),ba.interactionState.hovered=[this,ba])}).on("mouseout.basic",function(ba){ba.interactionState.dragInProgress||ba.partOfGroup||(ja.unhover(this,ba,ha),ba.interactionState.hovered=!1)}).on("click.basic",function(ba){ba.interactionState.hovered&&(ja.unhover(this,ba,ha),ba.interactionState.hovered=!1);ba.interactionState.dragInProgress||ba.partOfGroup||ja.select(this,ba,ha)})}function v(fa,
ha,ja,ba){var ma=I.behavior.drag().origin(function(qa){return{x:qa.node.x0+qa.visibleWidth/2,y:qa.node.y0+qa.visibleHeight/2}}).on("dragstart",function(qa){if("fixed"!==qa.arrangement&&(T.ensureSingle(ba._fullLayout._infolayer,"g","dragcover",function(oa){ba._fullLayout._dragCover=oa}),T.raiseToTop(this),qa.interactionState.dragInProgress=qa.node,A(qa.node),qa.interactionState.hovered&&(ja.nodeEvents.unhover.apply(0,qa.interactionState.hovered),qa.interactionState.hovered=!1),"snap"===qa.arrangement)){var ka=
qa.traceId+"|"+qa.key;qa.forceLayouts[ka]?qa.forceLayouts[ka].alpha(1):x(fa,ka,qa,ba);C(fa,ha,qa,ka,ba)}}).on("drag",function(qa){if("fixed"!==qa.arrangement){var ka=I.event.x,oa=I.event.y;"snap"===qa.arrangement?(qa.node.x0=ka-qa.visibleWidth/2,qa.node.x1=ka+qa.visibleWidth/2):("freeform"===qa.arrangement&&(qa.node.x0=ka-qa.visibleWidth/2,qa.node.x1=ka+qa.visibleWidth/2),oa=Math.max(0,Math.min(qa.size-qa.visibleHeight/2,oa)));qa.node.y0=oa-qa.visibleHeight/2;qa.node.y1=oa+qa.visibleHeight/2;A(qa.node);
"snap"!==qa.arrangement&&(qa.sankey.update(qa.graph),fa.filter(t(qa)).call(g),ha.attr("d",l()))}}).on("dragend",function(qa){if("fixed"!==qa.arrangement){qa.interactionState.dragInProgress=!1;for(var ka=0;ka<qa.node.childrenNodes.length;ka++)qa.node.childrenNodes[ka].x=qa.node.x,qa.node.childrenNodes[ka].y=qa.node.y;"snap"!==qa.arrangement&&y(qa,ba)}});fa.on(".drag",null).call(ma)}function x(fa,ha,ja,ba){B(ja.graph.nodes);var ma=ja.graph.nodes.filter(function(qa){return qa.originalX===ja.node.originalX}).filter(function(qa){return!qa.partOfGroup});
ja.forceLayouts[ha]=N.forceSimulation(ma).alphaDecay(0).force("collide",N.forceCollide().radius(function(qa){return qa.dy/2+ja.nodePad/2}).strength(1).iterations(F.forceIterations)).force("constrain",z(fa,ha,ma,ja,ba)).stop()}function C(fa,ha,ja,ba,ma){window.requestAnimationFrame(function ka(){var oa;for(oa=0;oa<F.forceTicksPerFrame;oa++)ja.forceLayouts[ba].tick();oa=ja.graph.nodes;for(var na=0;na<oa.length;na++)oa[na].y0=oa[na].y-oa[na].dy/2,oa[na].y1=oa[na].y0+oa[na].dy,oa[na].x0=oa[na].x-oa[na].dx/
2,oa[na].x1=oa[na].x0+oa[na].dx;ja.sankey.update(ja.graph);fa.filter(t(ja)).call(g);ha.attr("d",l());0<ja.forceLayouts[ba].alpha()?window.requestAnimationFrame(ka):(oa=ja.node.originalX,ja.node.x0=oa-ja.visibleWidth/2,ja.node.x1=oa+ja.visibleWidth/2,y(ja,ma))})}function z(fa,ha,ja,ba){return function(){for(var ma=0,qa=0;qa<ja.length;qa++){var ka=ja[qa];ka===ba.interactionState.dragInProgress?(ka.x=ka.lastDraggedX,ka.y=ka.lastDraggedY):(ka.vx=(ka.originalX-ka.x)/F.forceTicksPerFrame,ka.y=Math.min(ba.size-
ka.dy/2,Math.max(ka.dy/2,ka.y)));ma=Math.max(ma,Math.abs(ka.vx),Math.abs(ka.vy))}!ba.interactionState.dragInProgress&&.1>ma&&0<ba.forceLayouts[ha].alpha()&&ba.forceLayouts[ha].alpha(0)}}function y(fa,ha){for(var ja=[],ba=[],ma=0;ma<fa.graph.nodes.length;ma++){var qa=(fa.graph.nodes[ma].y0+fa.graph.nodes[ma].y1)/2;ja.push((fa.graph.nodes[ma].x0+fa.graph.nodes[ma].x1)/2/fa.figure.width);ba.push(qa/fa.figure.height)}aa.call("_guiRestyle",ha,{"node.x":[ja],"node.y":[ba]},fa.trace.index).then(function(){ha._fullLayout._dragCover&&
ha._fullLayout._dragCover.remove()})}function D(fa){var ha=[],ja;for(ja=0;ja<fa.length;ja++)fa[ja].originalX=(fa[ja].x0+fa[ja].x1)/2,fa[ja].originalY=(fa[ja].y0+fa[ja].y1)/2,-1===ha.indexOf(fa[ja].originalX)&&ha.push(fa[ja].originalX);ha.sort(function(ba,ma){return ba-ma});for(ja=0;ja<fa.length;ja++)fa[ja].originalLayerIndex=ha.indexOf(fa[ja].originalX),fa[ja].originalLayer=fa[ja].originalLayerIndex/(ha.length-1)}function A(fa){fa.lastDraggedX=fa.x0+fa.dx/2;fa.lastDraggedY=fa.y0+fa.dy/2}function t(fa){return function(ha){return ha.node.originalX===
fa.node.originalX}}function B(fa){for(var ha=0;ha<fa.length;ha++)fa[ha].y=(fa[ha].y0+fa[ha].y1)/2,fa[ha].x=(fa[ha].x0+fa[ha].x1)/2}var F=b("./constants"),I=b("d3"),J=b("tinycolor2"),L=b("../../components/color"),H=b("../../components/drawing"),P=b("@plotly/d3-sankey"),M=b("@plotly/d3-sankey-circular"),N=b("d3-force"),T=b("../../lib"),Q=T.strTranslate;G=b("../../lib/gup");var U=G.keyFun,S=G.repeat,X=G.unwrap,Z=b("d3-interpolate").interpolateNumber,aa=b("../../registry");K.exports=function(fa,ha,ja,
ba,ma){var qa=!1;T.ensureSingle(fa._fullLayout._infolayer,"g","first-render",function(){qa=!0});var ka=fa._fullLayout._dragCover;ja=ja.filter(function(na){return X(na).trace.visible}).map(q.bind(null,ba));ha=ha.selectAll("."+F.cn.sankey).data(ja,U);ha.exit().remove();ha.enter().append("g").classed(F.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events","auto").attr("transform",n);ha.each(function(na,
la){fa._fullData[la]._sankey=na;var ia="bgsankey-"+na.trace.uid+"-"+la;T.ensureSingle(fa._fullLayout._draggers,"rect",ia);fa._fullData[la]._bgRect=I.select("."+ia);fa._fullData[la]._bgRect.style("pointer-events","all").attr("width",na.width).attr("height",na.height).attr("x",na.translateX).attr("y",na.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})});ha.transition().ease(F.ease).duration(F.duration).attr("transform",n);ja=ha.selectAll("."+F.cn.sankeyLinks).data(S,U);
ja.enter().append("g").classed(F.cn.sankeyLinks,!0).style("fill","none");ba=ja.selectAll("."+F.cn.sankeyLink).data(function(na){return na.graph.links.filter(function(la){return la.value}).map(m.bind(null,na))},U);ba.enter().append("path").classed(F.cn.sankeyLink,!0).call(u,ha,ma.linkEvents);ba.style("stroke",function(na){return 1<na.link.width||0<na.linkLineWidth?L.tinyRGB(J(na.linkLineColor)):na.tinyColorHue}).style("stroke-opacity",function(na){return 1<na.link.width||0<na.linkLineWidth?L.opacity(na.linkLineColor):
na.tinyColorAlpha}).style("fill",function(na){return na.tinyColorHue}).style("fill-opacity",function(na){return na.tinyColorAlpha}).style("stroke-width",function(na){return 1<na.link.width||0<na.linkLineWidth?na.linkLineWidth:1}).attr("d",l());ba.style("opacity",function(){return fa._context.staticPlot||qa||ka?1:0}).transition().ease(F.ease).duration(F.duration).style("opacity",1);ba.exit().transition().ease(F.ease).duration(F.duration).style("opacity",0).remove();ja=ha.selectAll("."+F.cn.sankeyNodeSet).data(S,
U);ja.enter().append("g").classed(F.cn.sankeyNodeSet,!0);ja.style("cursor",function(na){switch(na.arrangement){case "fixed":return"default";case "perpendicular":return"ns-resize";default:return"move"}});ja=ja.selectAll("."+F.cn.sankeyNode).data(function(na){var la=na.graph.nodes;D(la);return la.map(h.bind(null,na))},U);ja.enter().append("g").classed(F.cn.sankeyNode,!0).call(a).style("opacity",function(na){return!fa._context.staticPlot&&!qa||na.partOfGroup?0:1});ja.call(u,ha,ma.nodeEvents).call(v,
ba,ma,fa);ja.transition().ease(F.ease).duration(F.duration).call(a).style("opacity",function(na){return na.partOfGroup?0:1});ja.exit().transition().ease(F.ease).duration(F.duration).style("opacity",0).remove();ma=ja.selectAll("."+F.cn.nodeRect).data(S);ma.enter().append("rect").classed(F.cn.nodeRect,!0).call(e);ma.style("stroke-width",function(na){return na.nodeLineWidth}).style("stroke",function(na){return L.tinyRGB(J(na.nodeLineColor))}).style("stroke-opacity",function(na){return L.opacity(na.nodeLineColor)}).style("fill",
function(na){return na.tinyColorHue}).style("fill-opacity",function(na){return na.tinyColorAlpha});ma.transition().ease(F.ease).duration(F.duration).call(e);ma=ja.selectAll("."+F.cn.nodeCapture).data(S);ma.enter().append("rect").classed(F.cn.nodeCapture,!0).style("fill-opacity",0);ma.attr("x",function(na){return na.zoneX}).attr("y",function(na){return na.zoneY}).attr("width",function(na){return na.zoneWidth}).attr("height",function(na){return na.zoneHeight});ma=ja.selectAll("."+F.cn.nodeCentered).data(S);
ma.enter().append("g").classed(F.cn.nodeCentered,!0).attr("transform",p);ma.transition().ease(F.ease).duration(F.duration).attr("transform",p);ha=ma.selectAll("."+F.cn.nodeLabelGuide).data(S);ha.enter().append("path").classed(F.cn.nodeLabelGuide,!0).attr("id",function(na){return na.uniqueNodeLabelPathId}).attr("d",c).attr("transform",d);ha.transition().ease(F.ease).duration(F.duration).attr("d",c).attr("transform",d);var oa=ma.selectAll("."+F.cn.nodeLabel).data(S);oa.enter().append("text").classed(F.cn.nodeLabel,
!0).attr("transform",f).style("cursor","default").style("fill","black");oa.style("text-shadow",function(na){return na.horizontal?"-1px 1px 1px #fff, 1px 1px 1px #fff, 1px -1px 1px #fff, -1px -1px 1px #fff":"none"}).each(function(na){H.font(oa,na.textFont)});oa.transition().ease(F.ease).duration(F.duration).attr("transform",f);ma=oa.selectAll("."+F.cn.nodeLabelTextPath).data(S);ma.enter().append("textPath").classed(F.cn.nodeLabelTextPath,!0).attr("alignment-baseline","middle").attr("xlink:href",function(na){return"#"+
na.uniqueNodeLabelPathId}).attr("startOffset",r).style("fill",k);ma.text(function(na){return na.horizontal||5<na.node.dy?na.node.label:""}).attr("text-anchor",function(na){return na.horizontal&&na.left?"end":"start"});ma.transition().ease(F.ease).duration(F.duration).attr("startOffset",r).style("fill",k)}},{"../../components/color":643,"../../components/drawing":665,"../../lib":778,"../../lib/gup":775,"../../registry":911,"./constants":1180,"@plotly/d3-sankey":56,"@plotly/d3-sankey-circular":55,d3:169,
"d3-force":160,"d3-interpolate":162,tinycolor2:576}],1185:[function(b,K,G){K.exports=function(q,m){for(var l=[],h=q.cd[0].trace,a=h._sankey.graph.nodes,g=0;g<a.length;g++){var e=a[g];if(!e.partOfGroup){var n=[(e.x0+e.x1)/2,(e.y0+e.y1)/2];"v"===h.orientation&&n.reverse();m&&m.contains(n,!1,g,q)&&l.push({pointNumber:e.pointNumber})}}return l}},{}],1186:[function(b,K,G){var q=b("../../lib");K.exports=function(m,l){for(var h=0;h<m.length;h++)m[h].i=h;q.mergeArray(l.text,m,"tx");q.mergeArray(l.texttemplate,
m,"txt");q.mergeArray(l.hovertext,m,"htx");q.mergeArray(l.customdata,m,"data");q.mergeArray(l.textposition,m,"tp");l.textfont&&(q.mergeArrayCastPositive(l.textfont.size,m,"ts"),q.mergeArray(l.textfont.color,m,"tc"),q.mergeArray(l.textfont.family,m,"tf"));if(l=l.marker){q.mergeArrayCastPositive(l.size,m,"ms");q.mergeArrayCastPositive(l.opacity,m,"mo");q.mergeArray(l.symbol,m,"mx");q.mergeArray(l.color,m,"mc");if(h=l.line)q.mergeArray(h.color,m,"mlc"),q.mergeArrayCastPositive(h.width,m,"mlw");(l=l.gradient)&&
"none"!==l.type&&(q.mergeArray(l.type,m,"mgt"),q.mergeArray(l.color,m,"mgc"))}}},{"../../lib":778}],1187:[function(b,K,G){function q(p){return{valType:"any",dflt:0,editType:"calc"}}function m(p){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"}}G=b("../../plots/template_attributes").texttemplateAttrs;var l=b("../../plots/template_attributes").hovertemplateAttrs,h=b("../../components/colorscale/attributes"),a=b("../../plots/font_attributes"),g=b("../../components/drawing/attributes").dash,
e=b("../../components/drawing"),n=b("./constants");b=b("../../lib/extend").extendFlat;K.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:q("x"),yperiod:q("y"),xperiod0:{valType:"any",
editType:"calc"},yperiod0:{valType:"any",editType:"calc"},xperiodalignment:m("x"),yperiodalignment:m("y"),stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:G({},{}),
hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:l({},{keys:n.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:"linear spline hv vh hvh vhv".split(" "),dflt:"linear",editType:"plot"},smoothing:{valType:"number",
min:0,max:1.3,dflt:1,editType:"plot"},dash:b({},g,{editType:"style"}),simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:"none tozeroy tozerox tonexty tonextx toself tonext".split(" "),editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},marker:b({symbol:{valType:"enumerated",values:e.symbolList,dflt:"circle",arrayOk:!0,
editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:b({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},
h("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},h("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},
editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:"top left;top center;top right;middle left;middle center;middle right;bottom left;bottom center;bottom right".split(";"),dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:a({editType:"calc",
colorEditType:"style",arrayOk:!0}),r:{valType:"data_array",editType:"calc"},t:{valType:"data_array",editType:"calc"}}},{"../../components/colorscale/attributes":650,"../../components/drawing":665,"../../components/drawing/attributes":664,"../../lib/extend":768,"../../plots/font_attributes":856,"../../plots/template_attributes":906,"./constants":1191}],1188:[function(b,K,G){function q(u,v,x,C,z,y,D){var A=v._length,t=u._fullLayout;u=x._id;var B=C._id,F=t._firstScatter[h(v)]===v.uid;t=(a(v,t,x,C)||
{}).orientation;var I=v.fill;x._minDtick=0;C._minDtick=0;var J={padded:!0},L={padded:!0};D&&(J.ppad=L.ppad=D);(D=2>A||z[0]!==z[A-1]||y[0]!==y[A-1])&&("tozerox"===I||"tonextx"===I&&(F||"h"===t))?J.tozero=!0:(v.error_y||{}).visible||"tonexty"!==I&&"tozeroy"!==I&&(d.hasMarkers(v)||d.hasText(v))||(J.padded=!1,J.ppad=0);if(D&&("tozeroy"===I||"tonexty"===I&&(F||"v"===t)))L.tozero=!0;else if("tonextx"===I||"tozerox"===I)L.padded=!1;u&&(v._extremes[u]=n.findExtremes(x,z,J));B&&(v._extremes[B]=n.findExtremes(C,
y,L))}function m(u,v){if(d.hasMarkers(u)){var x=u.marker,C=1.6*(u.marker.sizeref||1);var z="area"===u.marker.sizemode?function(D){return Math.max(Math.sqrt((D||0)/C),3)}:function(D){return Math.max((D||0)/C,3)};if(e.isArrayOrTypedArray(x.size)){x={type:"linear"};n.setConvert(x);u=x.makeCalcdata(u.marker,"size");x=Array(v);for(var y=0;y<v;y++)x[y]=z(u[y]);return x}return z(x.size)}}function l(u,v){var x=h(v);u=u._firstScatter;u[x]||(u[x]=v.uid)}function h(u){var v=u.stackgroup;return u.xaxis+u.yaxis+
u.type+(v?"-"+v:"")}function a(u,v,x,C){if(u=u.stackgroup)if(v=v._scatterStackOpts[x._id+C._id][u],x="v"===v.orientation?C:x,"linear"===x.type||"log"===x.type)return v}var g=b("fast-isnumeric"),e=b("../../lib"),n=b("../../plots/cartesian/axes"),p=b("../../plots/cartesian/align_period"),c=b("../../constants/numerical").BADNUM,d=b("./subtypes"),f=b("./colorscale_calc"),k=b("./arrays_to_calcdata"),r=b("./calc_selection");K.exports={calc:function(u,v){var x=u._fullLayout,C=n.getFromId(u,v.xaxis||"x"),
z=n.getFromId(u,v.yaxis||"y"),y=C.makeCalcdata(v,"x"),D=z.makeCalcdata(v,"y"),A=p(v,C,"x",y),t=p(v,z,"y",D),B=v._length,F=Array(B),I=v.ids,J=a(v,x,C,z),L=!1,H;l(x,v);x="x";var P="y";if(J){e.pushUnique(J.traceIndices,v._expandedIndex);if(H="v"===J.orientation){P="s";var M="x"}else x="s",M="y";var N="interpolate"===J.stackgaps}else{var T=m(v,B);q(u,v,C,z,A,t,T)}z=!!v.xperiodalignment;T=!!v.yperiodalignment;for(C=0;C<B;C++){var Q=F[C]={},U=g(A[C]),S=g(t[C]);U&&S?(Q[x]=A[C],Q[P]=t[C],z&&(Q.orig_x=y[C]),
T&&(Q.orig_y=D[C])):J&&(H?U:S)?(Q[M]=H?A[C]:t[C],Q.gap=!0,N?(Q.s=c,L=!0):Q.s=0):Q[x]=Q[P]=c;I&&(Q.id=String(I[C]))}k(F,v);f(u,v);r(F,v);if(J){for(C=0;C<F.length;)F[C][M]===c?F.splice(C,1):C++;e.sort(F,function(X,Z){return X[M]-Z[M]||X.i-Z.i});if(L){for(C=0;C<F.length-1&&F[C].gap;)C++;y=F[C].s;y||(y=F[C].s=0);for(u=0;u<C;u++)F[u].s=y;for(v=F.length-1;v>C&&F[v].gap;)v--;y=F[v].s;for(u=F.length-1;u>v;u--)F[u].s=y;for(;C<v;)if(C++,F[C].gap){for(u=C+1;F[u].gap;)u++;y=F[C-1][M];D=F[C-1].s;for(A=(F[u].s-
D)/(F[u][M]-y);C<u;)F[C].s=D+(F[C][M]-y)*A,C++}}}return F},calcMarkerSize:m,calcAxisExpansion:q,setFirstScatter:l,getStackOpts:a}},{"../../constants/numerical":753,"../../lib":778,"../../plots/cartesian/align_period":825,"../../plots/cartesian/axes":828,"./arrays_to_calcdata":1186,"./calc_selection":1189,"./colorscale_calc":1190,"./subtypes":1212,"fast-isnumeric":241}],1189:[function(b,K,G){var q=b("../../lib");K.exports=function(m,l){q.isArrayOrTypedArray(l.selectedpoints)&&q.tagSelected(m,l)}},
{"../../lib":778}],1190:[function(b,K,G){var q=b("../../components/colorscale/helpers").hasColorscale,m=b("../../components/colorscale/calc"),l=b("./subtypes");K.exports=function(h,a){l.hasLines(a)&&q(a,"line")&&m(h,a,{vals:a.line.color,containerStr:"line",cLetter:"c"});l.hasMarkers(a)&&(q(a,"marker")&&m(h,a,{vals:a.marker.color,containerStr:"marker",cLetter:"c"}),q(a,"marker.line")&&m(h,a,{vals:a.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},{"../../components/colorscale/calc":651,
"../../components/colorscale/helpers":654,"./subtypes":1212}],1191:[function(b,K,G){K.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},{}],1192:[function(b,K,G){function q(l,h,a,g,e,n,p){e[g]=!0;g={i:null,gap:!0,s:0};g[p]=a;l.splice(h,0,g);h&&a===l[h-1][p]?(a=l[h-1],g.s=a.s,g.i=a.i,g.gap=a.gap):n&&(n=l[h-1],a=(e=l[h+1])?n?n.s+(e.s-n.s)*(a-n[p])/(e[p]-n[p]):e.s:n.s,g.s=a);h||(l[0].t=l[1].t,l[0].trace=l[1].trace,delete l[1].t,delete l[1].trace)}var m=
b("./calc");K.exports=function(l,h){var a=h.xaxis;h=h.yaxis;var g=l._fullLayout._scatterStackOpts[a._id+h._id];if(g){var e=l.calcdata,n,p,c,d,f,k;for(k in g){var r=g[k];var u=r.traceIndices;if(u.length){var v="interpolate"===r.stackgaps;var x=r.groupnorm;if("v"===r.orientation){var C="x";var z="y"}else C="y",z="x";var y=Array(u.length);for(n=0;n<y.length;n++)y[n]=!1;var D=e[u[0]];var A=Array(D.length);for(n=0;n<D.length;n++)A[n]=D[n][C];for(n=1;n<u.length;n++){var t=e[u[n]];for(p=c=0;p<t.length;p++){for(f=
t[p][C];f>A[c]&&c<A.length;c++)q(t,p,A[c],n,y,v,C),p++;if(f!==A[c]){for(d=0;d<n;d++)q(e[u[d]],c,f,d,y,v,C);A.splice(c,0,f)}c++}for(;c<A.length;c++)q(t,p,A[c],n,y,v,C),p++}c=A.length;for(p=0;p<D.length;p++){d=D[p][z]=D[p].s;for(n=1;n<u.length;n++)t=e[u[n]],t[0].trace._rawLength=t[0].trace._length,t[0].trace._length=c,d+=t[p].s,t[p][z]=d;if(x)for(t=("fraction"===x?d:d/100)||1,n=0;n<u.length;n++)d=e[u[n]][p],d[z]/=t,d.sNorm=d.s/t}for(n=0;n<u.length;n++){t=e[u[n]];D=t[0].trace;x=m.calcMarkerSize(D,D._rawLength);
z=Array.isArray(x);if(x&&y[n]||z)for(d=x,x=Array(c),p=0;p<c;p++)x[p]=t[p].gap?0:z?d[t[p].i]:d;z=Array(c);d=Array(c);for(p=0;p<c;p++)z[p]=t[p].x,d[p]=t[p].y;m.calcAxisExpansion(l,D,a,h,z,d,x);t[0].t.orientation=r.orientation}}}}}},{"./calc":1188}],1193:[function(b,K,G){K.exports=function(q){for(var m=0;m<q.length;m++){var l=q[m];if("scatter"===l.type){var h=l.fill;if("none"!==h&&"toself"!==h&&(l.opacity=void 0,"tonexty"===h||"tonextx"===h))for(h=m-1;0<=h;h--){var a=q[h];if("scatter"===a.type&&a.xaxis===
l.xaxis&&a.yaxis===l.yaxis){a.opacity=void 0;break}}}}}},{}],1194:[function(b,K,G){var q=b("../../lib"),m=b("../../registry"),l=b("./attributes"),h=b("./constants"),a=b("./subtypes"),g=b("./xy_defaults"),e=b("./period_defaults"),n=b("./stack_defaults"),p=b("./marker_defaults"),c=b("./line_defaults"),d=b("./line_shape_defaults"),f=b("./text_defaults"),k=b("./fillcolor_defaults");K.exports=function(r,u,v,x){function C(D,A){return q.coerce(r,u,l,D,A)}var z=g(r,u,x,C);z||(u.visible=!1);if(u.visible){e(r,
u,x,C);var y=n(r,u,x,C);z=!y&&z<h.PTS_LINESONLY?"lines+markers":"lines";C("text");C("hovertext");C("mode",z);a.hasLines(u)&&(c(r,u,v,x,C),d(r,u,C),C("connectgaps"),C("line.simplify"));a.hasMarkers(u)&&p(r,u,v,x,C,{gradient:!0});a.hasText(u)&&(C("texttemplate"),f(r,u,x,C));x=[];if(a.hasMarkers(u)||a.hasText(u))C("cliponaxis"),C("marker.maxdisplayed"),x.push("points");C("fill",y?y.fillDflt:"none");"none"!==u.fill&&(k(r,u,v,C),a.hasLines(u)||d(r,u,C));y=(u.line||{}).color;z=(u.marker||{}).color;"tonext"!==
u.fill&&"toself"!==u.fill||x.push("fills");C("hoveron",x.join("+")||"points");"fills"!==u.hoveron&&C("hovertemplate");x=m.getComponentMethod("errorbars","supplyDefaults");x(r,u,y||z||v,{axis:"y"});x(r,u,y||z||v,{axis:"x",inherit:"y"});q.coerceSelectionMarkerOpacity(u,C)}}},{"../../lib":778,"../../registry":911,"./attributes":1187,"./constants":1191,"./fillcolor_defaults":1195,"./line_defaults":1200,"./line_shape_defaults":1202,"./marker_defaults":1206,"./period_defaults":1207,"./stack_defaults":1210,
"./subtypes":1212,"./text_defaults":1213,"./xy_defaults":1214}],1195:[function(b,K,G){var q=b("../../components/color"),m=b("../../lib").isArrayOrTypedArray;K.exports=function(l,h,a,g){l=!1;if(h.marker){var e=h.marker.color,n=(h.marker.line||{}).color;e&&!m(e)?l=e:n&&!m(n)&&(l=n)}g("fillcolor",q.addOpacity((h.line||{}).color||l||a,.5))}},{"../../components/color":643,"../../lib":778}],1196:[function(b,K,G){var q=b("../../plots/cartesian/axes");K.exports=function(m,l,h){var a={},g={_fullLayout:h};
h=q.getFromTrace(g,l,"x");l=q.getFromTrace(g,l,"y");a.xLabel=q.tickText(h,m.x,!0).text;a.yLabel=q.tickText(l,m.y,!0).text;return a}},{"../../plots/cartesian/axes":828}],1197:[function(b,K,G){var q=b("../../components/color"),m=b("./subtypes");K.exports=function(l,h){if("lines"===l.mode)return(h=l.line.color)&&q.opacity(h)?h:l.fillcolor;if("none"===l.mode)return l.fill?l.fillcolor:"";var a=h.mcc||(l.marker||{}).color,g=h.mlcc||((l.marker||{}).line||{}).color;return(h=a&&q.opacity(a)?a:g&&q.opacity(g)&&
(h.mlw||((l.marker||{}).line||{}).width)?g:"")?.3>q.opacity(h)?q.addOpacity(h,.3):h:(h=(l.line||{}).color)&&q.opacity(h)&&m.hasLines(l)&&l.line.width?h:l.fillcolor}},{"../../components/color":643,"./subtypes":1212}],1198:[function(b,K,G){var q=b("../../lib"),m=b("../../components/fx"),l=b("../../registry"),h=b("./get_trace_color"),a=b("../../components/color"),g=q.fillText;K.exports=function(e,n,p,c){var d=e.cd,f=d[0].trace,k=e.xa,r=e.ya,u=k.c2p(n),v=r.c2p(p),x=[u,v];p=f.hoveron||"";var C=-1!==f.mode.indexOf("markers")?
3:.5;if(-1!==p.indexOf("points")&&(n=function(F){var I=Math.max(C,F.mrc||0),J=k.c2p(F.x)-u;F=r.c2p(F.y)-v;return Math.max(Math.sqrt(J*J+F*F)-I,1-C/I)},c=m.getDistanceFunction(c,function(F){var I=Math.max(3,F.mrc||0),J=1-1/I;F=Math.abs(k.c2p(F.x)-u);return F<I?J*F/I:F-I+J},function(F){var I=Math.max(3,F.mrc||0),J=1-1/I;F=Math.abs(r.c2p(F.y)-v);return F<I?J*F/I:F-I+J},n),m.getClosest(d,c,e),!1!==e.index)){c=d[e.index];p=k.c2p(c.x,!0);x=r.c2p(c.y,!0);var z=c.mrc||1;e.index=c.i;var y=d[0].t.orientation,
D=y&&(c.sNorm||c.s);d="h"===y?D:void 0!==c.orig_x?c.orig_x:c.x;y="v"===y?D:void 0!==c.orig_y?c.orig_y:c.y;q.extendFlat(e,{color:h(f,c),x0:p-z,x1:p+z,xLabelVal:d,y0:x-z,y1:x+z,yLabelVal:y,spikeDistance:n(c),hovertemplate:f.hovertemplate});g(c,f,e);l.getComponentMethod("errorbars","hoverInfo")(c,f,e);return[e]}if(-1!==p.indexOf("fills")&&f._polygons){z=f._polygons;c=[];y=!1;n=Infinity;d=-Infinity;D=Infinity;var A=-Infinity;for(p=0;p<z.length;p++){var t=z[p];t.contains(x)&&(y=!y,c.push(t),D=Math.min(D,
t.ymin),A=Math.max(A,t.ymax))}if(y){D=Math.max(D,0);A=Math.min(A,r._length);x=(D+A)/2;for(p=0;p<c.length;p++)for(y=c[p].pts,z=1;z<y.length;z++){t=y[z-1][1];var B=y[z][1];t>x!==B>=x&&(D=y[z-1][0],A=y[z][0],B-t&&(D+=(A-D)*(x-t)/(B-t),n=Math.min(n,D),d=Math.max(d,D)))}n=Math.max(n,0);d=Math.min(d,k._length);c=a.defaultLine;a.opacity(f.fillcolor)?c=f.fillcolor:a.opacity((f.line||{}).color)&&(c=f.line.color);q.extendFlat(e,{distance:e.maxHoverDistance,x0:n,x1:d,y0:x,y1:x,color:c,hovertemplate:!1});delete e.index;
f.text&&!Array.isArray(f.text)?e.text=String(f.text):e.text=f.name;return[e]}}}},{"../../components/color":643,"../../components/fx":683,"../../lib":778,"../../registry":911,"./get_trace_color":1197}],1199:[function(b,K,G){G=b("./subtypes");K.exports={hasLines:G.hasLines,hasMarkers:G.hasMarkers,hasText:G.hasText,isBubble:G.isBubble,attributes:b("./attributes"),supplyDefaults:b("./defaults"),crossTraceDefaults:b("./cross_trace_defaults"),calc:b("./calc").calc,crossTraceCalc:b("./cross_trace_calc"),
arraysToCalcdata:b("./arrays_to_calcdata"),plot:b("./plot"),colorbar:b("./marker_colorbar"),formatLabels:b("./format_labels"),style:b("./style").style,styleOnSelect:b("./style").styleOnSelect,hoverPoints:b("./hover"),selectPoints:b("./select"),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:b("../../plots/cartesian"),categories:"cartesian svg symbols errorBarsOK showLegend scatter-like zoomScale".split(" "),meta:{}}},{"../../plots/cartesian":841,"./arrays_to_calcdata":1186,"./attributes":1187,
"./calc":1188,"./cross_trace_calc":1192,"./cross_trace_defaults":1193,"./defaults":1194,"./format_labels":1196,"./hover":1198,"./marker_colorbar":1205,"./plot":1208,"./select":1209,"./style":1211,"./subtypes":1212}],1200:[function(b,K,G){var q=b("../../lib").isArrayOrTypedArray,m=b("../../components/colorscale/helpers").hasColorscale,l=b("../../components/colorscale/defaults");K.exports=function(h,a,g,e,n,p){var c=(h.marker||{}).color;n("line.color",g);m(h,"line")?l(h,a,e,n,{prefix:"line.",cLetter:"c"}):
(h=(q(c)?!1:c)||g,n("line.color",h));n("line.width");(p||{}).noDash||n("line.dash")}},{"../../components/colorscale/defaults":653,"../../components/colorscale/helpers":654,"../../lib":778}],1201:[function(b,K,G){G=b("../../constants/numerical");var q=G.BADNUM;G=G.LOG_CLIP;var m=G+.5,l=G-.5,h=b("../../lib"),a=h.segmentsIntersect,g=h.constrain,e=b("./constants");K.exports=function(n,p){function c(Na){Na=n[Na];if(!Na)return!1;var $a=p.linearized?A.l2p(Na.x):A.c2p(Na.x),Va=p.linearized?t.l2p(Na.y):t.c2p(Na.y);
if($a===q){B&&($a=A.c2p(Na.x,!0));if($a===q)return!1;F&&Va===q&&($a*=Math.abs(A._m*J*(0<A._m?m:l)/(t._m*I*(0<t._m?m:l))));$a*=1E3}if(Va===q){F&&(Va=t.c2p(Na.y,!0));if(Va===q)return!1;Va*=1E3}return[$a,Va]}function d(Na,$a,Va,qb){Va-=Na;qb-=$a;Na=.5-Na;var Ha=.5-$a;$a=Va*Va+qb*qb;var Ra=Va*Na+qb*Ha;if(0<Ra&&Ra<$a&&(Va=Na*qb-Ha*Va,Va*Va<$a))return!0}function f(Na,$a){var Va=Na[0]/I;Na=Na[1]/J;var qb=Math.max(0,-Va,Va-1,-Na,Na-1);qb&&void 0!==fa&&d(Va,Na,fa,ha)&&(qb=0);qb&&$a&&d(Va,Na,$a[0]/I,$a[1]/
J)&&(qb=0);return(1+e.toleranceGrowth*qb)*H}function k(Na,$a){var Va=Na[0]-$a[0];Na=Na[1]-$a[1];return Math.sqrt(Va*Va+Na*Na)}function r(Na,$a){for(var Va=[],qb=0,Ha=0;4>Ha;Ha++){var Ra=oa[Ha];(Ra=a(Na[0],Na[1],$a[0],$a[1],Ra[0],Ra[1],Ra[2],Ra[3]))&&(!qb||1<Math.abs(Ra.x-Va[0][0])||1<Math.abs(Ra.y-Va[0][1]))&&(Ra=[Ra.x,Ra.y],qb&&k(Ra,Na)<k(Va[0],Na)?Va.unshift(Ra):Va.push(Ra),qb++)}return Va}function u(Na){if(Na[0]<ba||Na[0]>ma||Na[1]<qa||Na[1]>ka)return[g(Na[0],ba,ma),g(Na[1],qa,ka)]}function v(Na,
$a){if(Na[0]===$a[0]&&(Na[0]===ba||Na[0]===ma)||Na[1]===$a[1]&&(Na[1]===qa||Na[1]===ka))return!0}function x(Na,$a){var Va=[];Na=u(Na);$a=u($a);if(Na&&$a&&v(Na,$a))return Va;Na&&Va.push(Na);$a&&Va.push($a);return Va}function C(Na,$a,Va){return function(qb,Ha){var Ra=u(qb),La=u(Ha),gb=[];if(Ra&&La&&v(Ra,La))return gb;Ra&&gb.push(Ra);La&&gb.push(La);if(qb=2*h.constrain((qb[Na]+Ha[Na])/2,$a,Va)-((Ra||qb)[Na]+(La||Ha)[Na]))Ra=Ra&&La?0<qb===Ra[Na]>La[Na]?Ra:La:Ra||La,Ra[Na]+=qb;return gb}}function z(Na){var $a=
Na[0],Va=Na[1],qb=$a===S[X-1][0],Ha=Va===S[X-1][1];if(!qb||!Ha)if(1<X){var Ra=$a===S[X-2][0],La=Va===S[X-2][1];qb&&($a===ba||$a===ma)&&Ra?La?X--:S[X-1]=Na:Ha&&(Va===qa||Va===ka)&&La?Ra?X--:S[X-1]=Na:S[X++]=Na}else S[X++]=Na}function y(Na){S[X-1][0]!==Na[0]&&S[X-1][1]!==Na[1]&&z([ia,sa]);z(Na);Ka=null;ia=sa=0}function D(Na){fa=Na[0]/I;ha=Na[1]/J;na=Na[0]<ba?ba:Na[0]>ma?ma:0;la=Na[1]<qa?qa:Na[1]>ka?ka:0;if(na||la){if(X)if(Ka){var $a=Aa(Ka,Na);1<$a.length&&(y($a[0]),S[X++]=$a[1])}else ta=Aa(S[X-1],Na)[0],
S[X++]=ta;else S[X++]=[na||Na[0],la||Na[1]];$a=S[X-1];if(na&&la&&($a[0]!==na||$a[1]!==la)){if(Ka)if(ia!==na&&sa!==la)if(ia&&sa){$a=Na[0]-Ka[0];var Va=(Na[1]-Ka[1])/$a;$a=0<(Ka[1]*Na[0]-Na[1]*Ka[0])/$a?[0<Va?ba:ma,ka]:[0<Va?ma:ba,qa];z($a)}else z([ia||na,sa||la]);else ia&&sa&&z([ia,sa]);z([na,la])}else ia-na&&sa-la&&z([na||ia,la||sa]);Ka=Na;ia=na;sa=la}else Ka&&y(Aa(Ka,Na)[0]),S[X++]=Na}var A=p.xaxis,t=p.yaxis,B="log"===A.type,F="log"===t.type,I=A._length,J=t._length,L=p.connectGaps,H=p.baseTolerance,
P=p.shape,M="linear"===P,N=p.fill&&"none"!==p.fill,T=[],Q=e.minTolerance,U=n.length,S=Array(U),X=0,Z,aa,fa,ha;var ja=e.maxScreensAway;var ba=-I*ja,ma=I*(1+ja),qa=-J*ja,ka=J*(1+ja),oa=[[ba,qa,ma,qa],[ma,qa,ma,ka],[ma,ka,ba,ka],[ba,ka,ba,qa]],na,la,ia,sa,ta,Aa;"linear"===P||"spline"===P?Aa=r:"hv"===P||"vh"===P?Aa=x:"hvh"===P?Aa=C(0,ba,ma):"vhv"===P&&(Aa=C(1,qa,ka));for(P=0;P<U;P++)if(ja=c(P)){X=0;var Ka=null;D(ja);for(P++;P<U;P++){var Sa=c(P);if(!Sa)if(L)continue;else break;if(M&&p.simplify){var db=
c(P+1);var eb=k(Sa,ja);if(N&&(0===X||X===U-1)||!(eb<f(Sa,db)*Q)){var lb=[(Sa[0]-ja[0])/eb,(Sa[1]-ja[1])/eb];var ab=ja;var Ya=eb;var hb=Z=aa=0;var nb=!1;eb=Sa;for(P++;P<n.length;P++){var va=db;db=c(P+1);if(!va)if(L)continue;else break;var Ba=[va[0]-ja[0],va[1]-ja[1]];var Ga=Ba[0]*lb[1]-Ba[1]*lb[0];Z=Math.min(Z,Ga);aa=Math.max(aa,Ga);if(aa-Z>f(va,db))break;eb=va;Ba=Ba[0]*lb[0]+Ba[1]*lb[1];Ba>Ya?(Ya=Ba,Sa=va,nb=!1):Ba<hb&&(hb=Ba,ab=va,nb=!0)}nb?(D(Sa),eb!==ab&&D(ab)):(ab!==ja&&D(ab),eb!==Sa&&D(Sa));
D(eb);if(P>=n.length||!va)break;D(va);ja=va}}else D(Sa)}Ka&&z([ia||Ka[0],sa||Ka[1]]);T.push(S.slice(0,X))}return T}},{"../../constants/numerical":753,"../../lib":778,"./constants":1191}],1202:[function(b,K,G){K.exports=function(q,m,l){"spline"===l("line.shape")&&l("line.smoothing")}},{}],1203:[function(b,K,G){var q={tonextx:1,tonexty:1,tonext:1};K.exports=function(m,l,h){var a,g={};var e=!1;var n=-1,p=0,c=-1;for(l=0;l<h.length;l++)m=h[l][0].trace,(a=m.stackgroup||"")?a in g?a=g[a]:(a=g[a]=p,p++):
m.fill in q&&0<=c?a=c:(a=c=p,p++),a<n&&(e=!0),m._groupIndex=n=a;h=h.slice();e&&h.sort(function(d,f){d=d[0].trace;f=f[0].trace;return d._groupIndex-f._groupIndex||d.index-f.index});g={};for(l=0;l<h.length;l++)m=h[l][0].trace,a=m.stackgroup||"",!0===m.visible?(m._nexttrace=null,m.fill in q&&(e=g[a],m._prevtrace=e||null,e&&(e._nexttrace=m)),m._ownfill=m.fill&&("tozero"===m.fill.substr(0,6)||"toself"===m.fill||"to"===m.fill.substr(0,2)&&!m._prevtrace),g[a]=m):m._prevtrace=m._nexttrace=m._ownfill=null;
return h}},{}],1204:[function(b,K,G){var q=b("fast-isnumeric");K.exports=function(m){m=m.marker;var l=m.sizeref||1,h=m.sizemin||0,a="area"===m.sizemode?function(g){return Math.sqrt(g/l)}:function(g){return g/l};return function(g){g=a(g/2);return q(g)&&0<g?Math.max(g,h):0}}},{"fast-isnumeric":241}],1205:[function(b,K,G){K.exports={container:"marker",min:"cmin",max:"cmax"}},{}],1206:[function(b,K,G){var q=b("../../components/color"),m=b("../../components/colorscale/helpers").hasColorscale,l=b("../../components/colorscale/defaults"),
h=b("./subtypes");K.exports=function(a,g,e,n,p,c){var d=h.isBubble(a),f=(a.line||{}).color;c=c||{};f&&(e=f);p("marker.symbol");p("marker.opacity",d?.7:1);p("marker.size");p("marker.color",e);m(a,"marker")&&l(a,g,n,p,{prefix:"marker.",cLetter:"c"});c.noSelect||(p("selected.marker.color"),p("unselected.marker.color"),p("selected.marker.size"),p("unselected.marker.size"));c.noLine||(e=f&&!Array.isArray(f)&&g.marker.color!==f?f:d?q.background:q.defaultLine,p("marker.line.color",e),m(a,"marker.line")&&
l(a,g,n,p,{prefix:"marker.line.",cLetter:"c"}),p("marker.line.width",d?1:0));d&&(p("marker.sizeref"),p("marker.sizemin"),p("marker.sizemode"));c.gradient&&"none"!==p("marker.gradient.type")&&p("marker.gradient.color")}},{"../../components/color":643,"../../components/colorscale/defaults":653,"../../components/colorscale/helpers":654,"./subtypes":1212}],1207:[function(b,K,G){function q(h,a){return 0===h%l?m(a,1):m(a,0)}var m=b("../../lib").dateTick0,l=b("../../constants/numerical").ONEWEEK;K.exports=
function(h,a,g,e,n){n||(n={x:!0,y:!0});n.x&&(h=e("xperiod"))&&(e("xperiod0",q(h,a.xcalendar)),e("xperiodalignment"));n.y&&(n=e("yperiod"))&&(e("yperiod0",q(n,a.ycalendar)),e("yperiodalignment"))}},{"../../constants/numerical":753,"../../lib":778}],1208:[function(b,K,G){function q(r,u,v){u.each(function(x){var C=e(h.select(this),"g","fills");p.setClipUrl(C,v.layerClipId,r);var z=x[0].trace;x=[];z._ownfill&&x.push("_ownFill");z._nexttrace&&x.push("_nextFill");C=C.selectAll("g").data(x,n);C.enter().append("g");
C.exit().each(function(y){z[y]=null}).remove();C.order().each(function(y){z[y]=e(h.select(this),"path","js-fill")})})}function m(r,u,v,x,C,z,y){function D(la){return L?la.transition():la}function A(la){D(la).attr("d","M0,0Z")}function t(la){return la.filter(function(ia){return!ia.gap&&ia.vis})}function B(la){return la.filter(function(ia){return ia.vis})}function F(la){return la.filter(function(ia){return!ia.gap})}function I(la){return la.id}function J(){return!1}l(r,u,v,x,C);var L=!!y&&0<y.duration,
H=v.xaxis,P=v.yaxis,M=x[0].trace,N=M.line,T=h.select(z),Q=e(T,"g","errorbars");z=e(T,"g","lines");u=e(T,"g","points");C=e(T,"g","text");a.getComponentMethod("errorbars","plot")(r,Q,v,y);if(!0===M.visible){D(T).style("opacity",M.opacity);var U=M.fill.charAt(M.fill.length-1);"x"!==U&&"y"!==U&&(U="");x[0][v.isRangePlot?"nodeRangePlot3":"node3"]=T;y="";T=[];if(Q=M._prevtrace){y=Q._prevRevpath||"";var S=Q._nextFill;T=Q._polygons}var X,Z,aa="",fa="",ha=[];var ja=g.noop;Q=M._ownFill;if(c.hasLines(M)||"none"!==
M.fill){S&&S.datum(x);if(-1!==["hv","vh","hvh","vhv"].indexOf(N.shape)){var ba=p.steps(N.shape);var ma=p.steps(N.shape.split("").reverse().join(""))}else ba="spline"===N.shape?ma=function(la){var ia=la[la.length-1];return 1<la.length&&la[0][0]===ia[0]&&la[0][1]===ia[1]?p.smoothclosed(la.slice(1),N.smoothing):p.smoothopen(la,N.smoothing)}:ma=function(la){return"M"+la.join("L")};var qa=function(la){return ma(la.reverse())};ha=d(x,{xaxis:H,yaxis:P,connectGaps:M.connectgaps,baseTolerance:Math.max(N.width||
1,3)/4,shape:N.shape,simplify:N.simplify,fill:M.fill});var ka=M._polygons=Array(ha.length);for(ja=0;ja<ha.length;ja++)M._polygons[ja]=k(ha[ja]);if(ha.length){var oa=ha[0][0];var na=ha[ha.length-1];na=na[na.length-1]}ja=function(la){return function(ia){X=ba(ia);Z=qa(ia);aa?U?(aa+="L"+X.substr(1),fa=Z+("L"+fa.substr(1))):(aa+="Z"+X,fa=Z+"Z"+fa):(aa=X,fa=Z);c.hasLines(M)&&1<ia.length&&(ia=h.select(this),ia.datum(x),la?D(ia.style("opacity",0).attr("d",X).call(p.lineGroupStyle)).style("opacity",1):(ia=
D(ia),ia.attr("d",X),p.singleLineStyle(x,ia)))}}}z=z.selectAll(".js-line").data(ha);D(z.exit()).style("opacity",0).remove();z.each(ja(!1));z.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(p.lineGroupStyle).each(ja(!0));p.setClipUrl(z,v.layerClipId,r);ha.length?(Q?(Q.datum(x),oa&&na&&(U?("y"===U?oa[1]=na[1]=P.c2p(0,!0):"x"===U&&(oa[0]=na[0]=H.c2p(0,!0)),D(Q).attr("d","M"+na+"L"+oa+"L"+aa.substr(1)).call(p.singleFillStyle)):D(Q).attr("d",aa+"Z").call(p.singleFillStyle))):
S&&("tonext"===M.fill.substr(0,6)&&aa&&y?("tonext"===M.fill?D(S).attr("d",aa+"Z"+y+"Z").call(p.singleFillStyle):D(S).attr("d",aa+"L"+y.substr(1)+"Z").call(p.singleFillStyle),M._polygons=M._polygons.concat(T)):(A(S),M._polygons=null)),M._prevRevpath=fa,M._prevPolygons=ka):(Q?A(Q):S&&A(S),M._polygons=M._prevRevpath=M._prevPolygons=null);u.datum(x);C.datum(x);(function(la,ia,sa){var ta,Aa=sa[0].trace;sa=c.hasMarkers(Aa);var Ka=c.hasText(Aa);var Sa=Aa.ids?I:void 0;var db=J,eb=J;if(sa||Ka){var lb=n,ab=
Aa.stackgroup,Ya=ab&&"infer zero"===r._fullLayout._scatterStackOpts[H._id+P._id][ab].stackgaps;Aa.marker.maxdisplayed||Aa._needsCull?lb=Ya?B:t:ab&&!Ya&&(lb=F);sa&&(db=lb);Ka&&(eb=lb)}la=la.selectAll("path.point");la=la.data(db,Sa);db=la.enter().append("path").classed("point",!0);L&&db.call(p.pointStyle,Aa,r).call(p.translatePoints,H,P).style("opacity",0).transition().style("opacity",1);la.order();var hb;sa&&(hb=p.makePointStyleFns(Aa));la.each(function(nb){var va=h.select(this),Ba=D(va);(ta=p.translatePoint(nb,
Ba,H,P))?(p.singlePointStyle(nb,Ba,Aa,hb,r),v.layerClipId&&p.hideOutsideRangePoint(nb,Ba,H,P,Aa.xcalendar,Aa.ycalendar),Aa.customdata&&va.classed("plotly-customdata",null!==nb.data&&void 0!==nb.data)):Ba.remove()});L?la.exit().transition().style("opacity",0).remove():la.exit().remove();la=ia.selectAll("g");la=la.data(eb,Sa);la.enter().append("g").classed("textpoint",!0).append("text");la.order();la.each(function(nb){var va=h.select(this),Ba=D(va.select("text"));(ta=p.translatePoint(nb,Ba,H,P))?v.layerClipId&&
p.hideOutsideRangePoint(nb,va,H,P,Aa.xcalendar,Aa.ycalendar):va.remove()});la.selectAll("text").call(p.textPointStyle,Aa,r).each(function(nb){var va=H.c2p(nb.x),Ba=P.c2p(nb.y);h.select(this).selectAll("tspan.line").each(function(){D(h.select(this)).attr({x:va,y:Ba})})});la.exit().remove()})(u,C,x);S=!1===M.cliponaxis?null:v.layerClipId;p.setClipUrl(u,S,r);p.setClipUrl(C,S,r)}}function l(r,u,v,x,C){r=v.xaxis;v=v.yaxis;var z=h.extent(g.simpleMap(r.range,r.r2c)),y=h.extent(g.simpleMap(v.range,v.r2c));
v=x[0].trace;if(c.hasMarkers(v)&&(v=v.marker.maxdisplayed,0!==v)){r=x.filter(function(B){return B.x>=z[0]&&B.x<=z[1]&&B.y>=y[0]&&B.y<=y[1]});var D=Math.ceil(r.length/v),A=0;C.forEach(function(B,F){B=B[0].trace;c.hasMarkers(B)&&0<B.marker.maxdisplayed&&F<u&&A++});var t=Math.round(A*D/3+Math.floor(A/3)*D/7.1);x.forEach(function(B){delete B.vis});r.forEach(function(B,F){0===Math.round((F+t)%D)&&(B.vis=!0)})}}var h=b("d3"),a=b("../../registry"),g=b("../../lib"),e=g.ensureSingle,n=g.identity,p=b("../../components/drawing"),
c=b("./subtypes"),d=b("./line_points"),f=b("./link_traces"),k=b("../../lib/polygon").tester;K.exports=function(r,u,v,x,C,z){var y,D=!C,A=!!C&&0<C.duration,t=f(r,u,v);v=x.selectAll("g.trace").data(t,function(B){return B[0].trace.uid});v.enter().append("g").attr("class",function(B){return"trace scatter trace"+B[0].trace.uid}).style("stroke-miterlimit",2);v.order();q(r,v,u);A?(z&&(y=z()),h.transition().duration(C.duration).ease(C.easing).each("end",function(){y&&y()}).each("interrupt",function(){y&&
y()}).each(function(){x.selectAll("g.trace").each(function(B,F){m(r,F,u,B,t,this,C)})})):v.each(function(B,F){m(r,F,u,B,t,this,C)});D&&v.exit().remove();x.selectAll("path:not([d])").remove()}},{"../../components/drawing":665,"../../lib":778,"../../lib/polygon":790,"../../registry":911,"./line_points":1201,"./link_traces":1203,"./subtypes":1212,d3:169}],1209:[function(b,K,G){var q=b("./subtypes");K.exports=function(m,l){var h=m.cd,a=m.xaxis,g=m.yaxis,e=[],n=h[0].trace;if(!q.hasMarkers(n)&&!q.hasText(n))return[];
if(!1===l)for(n=0;n<h.length;n++)h[n].selected=0;else for(n=0;n<h.length;n++){var p=h[n];var c=a.c2p(p.x);var d=g.c2p(p.y);null!==p.i&&l.contains([c,d],!1,n,m)?(e.push({pointNumber:p.i,x:a.c2d(p.x),y:g.c2d(p.y)}),p.selected=1):p.selected=0}return e}},{"./subtypes":1212}],1210:[function(b,K,G){var q=["orientation","groupnorm","stackgaps"];K.exports=function(m,l,h,a){h=h._scatterStackOpts;var g=a("stackgroup");if(g){var e=l.xaxis+l.yaxis,n=h[e];n||(n=h[e]={});h=n[g];e=!1;h?h.traces.push(l):(h=n[g]=
{traceIndices:[],traces:[l]},e=!0);l={orientation:l.x&&!l.y?"h":"v"};for(g=0;g<q.length;g++){n=q[g];var p=n+"Found";if(!h[p]){var c=void 0!==m[n],d="orientation"===n;if(c||e)if(h[n]=a(n,l[n]),d&&(h.fillDflt="h"===h[n]?"tonextx":"tonexty"),c&&(h[p]=!0,!e&&(delete h.traces[0][n],d)))for(n=0;n<h.traces.length-1;n++)p=h.traces[n],p._input.fill!==p.fill&&(p.fill=h.fillDflt)}}return h}}},{}],1211:[function(b,K,G){function q(g,e,n){h.pointStyle(g.selectAll("path.point"),e,n)}function m(g,e,n){h.textPointStyle(g.selectAll("text"),
e,n)}var l=b("d3"),h=b("../../components/drawing"),a=b("../../registry");K.exports={style:function(g){var e=l.select(g).selectAll("g.trace.scatter");e.style("opacity",function(n){return n[0].trace.opacity});e.selectAll("g.points").each(function(n){var p=l.select(this);q(p,n.trace||n[0].trace,g)});e.selectAll("g.text").each(function(n){var p=l.select(this);m(p,n.trace||n[0].trace,g)});e.selectAll("g.trace path.js-line").call(h.lineGroupStyle);e.selectAll("g.trace path.js-fill").call(h.fillGroupStyle);
a.getComponentMethod("errorbars","style")(e)},stylePoints:q,styleText:m,styleOnSelect:function(g,e,n){e=e[0].trace;e.selectedpoints?(h.selectedPointStyle(n.selectAll("path.point"),e),h.selectedTextStyle(n.selectAll("text"),e)):(q(n,e,g),m(n,e,g))}}},{"../../components/drawing":665,"../../registry":911,d3:169}],1212:[function(b,K,G){var q=b("../../lib");K.exports={hasLines:function(m){return m.visible&&m.mode&&-1!==m.mode.indexOf("lines")},hasMarkers:function(m){return m.visible&&(m.mode&&-1!==m.mode.indexOf("markers")||
"splom"===m.type)},hasText:function(m){return m.visible&&m.mode&&-1!==m.mode.indexOf("text")},isBubble:function(m){return q.isPlainObject(m.marker)&&q.isArrayOrTypedArray(m.marker.size)}}},{"../../lib":778}],1213:[function(b,K,G){var q=b("../../lib");K.exports=function(m,l,h,a,g){g=g||{};a("textposition");q.coerceFont(a,"textfont",h.font);g.noSelect||(a("selected.textfont.color"),a("unselected.textfont.color"))}},{"../../lib":778}],1214:[function(b,K,G){var q=b("../../lib"),m=b("../../registry");
K.exports=function(l,h,a,g){var e=g("x"),n=g("y");m.getComponentMethod("calendars","handleTraceDefaults")(l,h,["x","y"],a);if(e)l=q.minRowLength(e),n?n=Math.min(l,q.minRowLength(n)):(n=l,g("y0"),g("dy"));else{if(!n)return 0;n=q.minRowLength(n);g("x0");g("dx")}return h._length=n}},{"../../lib":778,"../../registry":911}],1215:[function(b,K,G){function q(d){return{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}}G=b("../scatter/attributes");
var m=b("../../components/colorscale/attributes"),l=b("../../plots/template_attributes").hovertemplateAttrs,h=b("../../plots/template_attributes").texttemplateAttrs,a=b("../../plots/attributes"),g=b("../../constants/gl3d_dashes"),e=b("../../constants/gl3d_markers"),n=b("../../lib/extend").extendFlat;b=b("../../plot_api/edit_types").overrideAll;var p=G.marker,c=p.line;g=n({width:G.line.width,dash:{valType:"enumerated",values:Object.keys(g),dflt:"solid"}},m("line"));K=K.exports=b({x:G.x,y:G.y,z:{valType:"data_array"},
text:n({},G.text,{}),texttemplate:h({},{}),hovertext:n({},G.hovertext,{}),hovertemplate:l(),mode:n({},G.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:q("x"),y:q("y"),z:q("z")},connectgaps:G.connectgaps,line:g,marker:n({symbol:{valType:"enumerated",values:Object.keys(e),dflt:"circle",arrayOk:!0},size:n({},p.size,{dflt:8}),sizeref:p.sizeref,sizemin:p.sizemin,sizemode:p.sizemode,opacity:n({},p.opacity,{arrayOk:!1}),
colorbar:p.colorbar,line:n({width:n({},c.width,{arrayOk:!1})},m("marker.line"))},m("marker")),textposition:n({},G.textposition,{dflt:"top center"}),textfont:{color:G.textfont.color,size:G.textfont.size,family:n({},G.textfont.family,{arrayOk:!1})},hoverinfo:n({},a.hoverinfo)},"calc","nested");K.x.editType=K.y.editType=K.z.editType="calc+clearAxisTypes"},{"../../components/colorscale/attributes":650,"../../constants/gl3d_dashes":750,"../../constants/gl3d_markers":751,"../../lib/extend":768,"../../plot_api/edit_types":810,
"../../plots/attributes":824,"../../plots/template_attributes":906,"../scatter/attributes":1187}],1216:[function(b,K,G){var q=b("../scatter/arrays_to_calcdata"),m=b("../scatter/colorscale_calc");K.exports=function(l,h){var a=[{x:!1,y:!1,trace:h,t:{}}];q(a,h);m(l,h);return a}},{"../scatter/arrays_to_calcdata":1186,"../scatter/colorscale_calc":1190}],1217:[function(b,K,G){function q(l,h,a,g){if(!h||!h.visible)return null;h=m.getComponentMethod("errorbars","makeComputeError")(h);for(var e=Array(l.length),
n=0;n<l.length;n++){var p=h(+l[n],n);if("log"===g.type){var c=g.c2l(l[n]),d=l[n]-p[0];p=l[n]+p[1];e[n]=[(g.c2l(d,!0)-c)*a,(g.c2l(p,!0)-c)*a];0<d&&(c=g.c2l(d),g._lowerLogErrorBound||(g._lowerLogErrorBound=c),g._lowerErrorBound=Math.min(g._lowerLogErrorBound,c))}else e[n]=[-p[0]*a,p[1]*a]}return e}var m=b("../../registry");K.exports=function(l,h,a){l=[q(l.x,l.error_x,h[0],a.xaxis),q(l.y,l.error_y,h[1],a.yaxis),q(l.z,l.error_z,h[2],a.zaxis)];a:{for(h=0;h<l.length;h++)if(l[h]){h=l[h].length;break a}h=
0}if(0===h)return null;a=Array(h);for(var g=0;g<h;g++){for(var e=[[0,0,0],[0,0,0]],n=0;3>n;n++)if(l[n])for(var p=0;2>p;p++)e[p][n]=l[n][g][p];a[g]=e}return a}},{"../../registry":911}],1218:[function(b,K,G){function q(I,J){this.scene=I;this.uid=J;this.color=this.delaunayMesh=this.textMarkers=this.errorBars=this.scatterPlot=this.linePlot=null;this.mode="";this.dataPoints=[];this.axesBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.data=this.textLabels=null}function m(I){for(var J=
[0,0,0],L=[[0,0,0],[0,0,0],[0,0,0]],H=[1,1,1],P=0;3>P;P++){var M=I[P];M&&!1!==M.copy_zstyle&&!1!==I[2].visible&&(M=I[2]);M&&M.visible&&(J[P]=M.width/2,L[P]=C(M.color),H[P]=M.thickness)}return{capSize:J,color:L,lineWidth:H}}function l(I){return null===I||void 0===I?0:-1<I.indexOf("left")?-1:-1<I.indexOf("right")?1:0}function h(I){return null===I||void 0===I?0:-1<I.indexOf("top")?-1:-1<I.indexOf("bottom")?1:0}function a(I){var J=[0,0];if(Array.isArray(I))for(var L=0;L<I.length;L++)J[L]=[0,0],I[L]&&
(J[L][0]=l(I[L]),J[L][1]=h(I[L]));else J[0]=l(I),J[1]=h(I);return J}function g(I,J){return J(4*I)}function e(I){return A[I]}function n(I,J,L,H,P){if(x.isArrayOrTypedArray(I)){var M=[];for(var N=0;N<J;N++)M[N]=void 0===I[N]?H:L(I[N],P)}else M=L(I,x.identity);return M}function p(I,J){function L(ia,sa){ia=P[ia];return t.tickText(ia,ia.d2l(sa),!0).text}var H=[],P=I.fullSceneLayout,M=I.dataScale,N=P.xaxis,T=P.yaxis,Q=P.zaxis,U=J.marker,S=J.line,X=J.x||[],Z=J.y||[],aa=J.z||[],fa=X.length,ha=J.xcalendar,
ja=J.ycalendar,ba=J.zcalendar,ma;for(ma=0;ma<fa;ma++){var qa=N.d2l(X[ma],0,ha)*M[0];var ka=T.d2l(Z[ma],0,ja)*M[1];var oa=Q.d2l(aa[ma],0,ba)*M[2];H[ma]=[qa,ka,oa]}if(Array.isArray(J.text))var na=J.text;else if(void 0!==J.text)for(na=Array(fa),ma=0;ma<fa;ma++)na[ma]=J.text;var la=J.texttemplate;if(la)for(I=I.fullLayout._d3locale,N=(ma=Array.isArray(la))?Math.min(la.length,fa):fa,T=ma?function(ia){return la[ia]}:function(){return la},na=Array(N),ma=0;ma<N;ma++)Q={x:X[ma],y:Z[ma],z:aa[ma]},ha={xLabel:L("xaxis",
X[ma]),yLabel:L("yaxis",Z[ma]),zLabel:L("zaxis",aa[ma])},ja={},B(ja,J,ma),ba=J._meta||{},na[ma]=x.texttemplateString(T(ma),ha,I,ja,Q,ba);H={position:H,mode:J.mode,text:na};"line"in J&&(H.lineColor=z(S,1,fa),H.lineWidth=S.width,H.lineDashes=S.dash);"marker"in J&&(ma=y(J),H.scatterColor=z(U,1,fa),H.scatterSize=n(U.size,fa,g,20,ma),H.scatterMarker=n(U.symbol,fa,e,"\u25cf"),H.scatterLineWidth=U.line.width,H.scatterLineColor=z(U.line,1,fa),H.scatterAngle=0);"textposition"in J&&(H.textOffset=a(J.textposition),
H.textColor=z(J.textfont,1,fa),H.textSize=n(J.textfont.size,fa,x.identity,12),H.textFont=J.textfont.family,H.textAngle=0);U=["x","y","z"];H.project=[!1,!1,!1];H.projectScale=[1,1,1];H.projectOpacity=[1,1,1];for(ma=0;3>ma;++ma)if(fa=J.projection[U[ma]],H.project[ma]=fa.show)H.projectOpacity[ma]=fa.opacity,H.projectScale[ma]=fa.scale;H.errorBounds=F(J,M,P);M=m([J.error_x,J.error_y,J.error_z]);H.errorColor=M.color;H.errorLineWidth=M.lineWidth;H.errorCapSize=M.capSize;H.delaunayAxis=J.surfaceaxis;H.delaunayColor=
C(J.surfacecolor);return H}function c(I){if(x.isArrayOrTypedArray(I)){var J=I[0];x.isArrayOrTypedArray(J)&&(I=J);return"rgb("+I.slice(0,3).map(function(L){return Math.round(255*L)})+")"}return null}function d(I){return x.isArrayOrTypedArray(I)?4===I.length&&"number"===typeof I[0]?c(I):I.map(c):null}var f=b("gl-line3d"),k=b("gl-scatter3d"),r=b("gl-error3d"),u=b("gl-mesh3d"),v=b("delaunay-triangulate"),x=b("../../lib"),C=b("../../lib/str2rgbarray"),z=b("../../lib/gl_format_color").formatColor,y=b("../scatter/make_bubble_size_func"),
D=b("../../constants/gl3d_dashes"),A=b("../../constants/gl3d_markers"),t=b("../../plots/cartesian/axes"),B=b("../../components/fx/helpers").appendArrayPointValue,F=b("./calc_errors");b=q.prototype;b.handlePick=function(I){if(I.object&&(I.object===this.linePlot||I.object===this.delaunayMesh||I.object===this.textMarkers||I.object===this.scatterPlot)){var J=I.index=I.data.index;I.object.highlight&&I.object.highlight(null);this.scatterPlot&&(I.object=this.scatterPlot,this.scatterPlot.highlight(I.data));
I.textLabel="";if(this.textLabels)if(Array.isArray(this.textLabels)){if(this.textLabels[J]||0===this.textLabels[J])I.textLabel=this.textLabels[J]}else I.textLabel=this.textLabels;I.traceCoordinate=[this.data.x[J],this.data.y[J],this.data.z[J]];return!0}};b.update=function(I){var J=this.scene.glplot.gl;var L=D.solid;this.data=I;var H=p(this.scene,I);"mode"in H&&(this.mode=H.mode);"lineDashes"in H&&H.lineDashes in D&&(L=D[H.lineDashes]);this.color=d(H.scatterColor)||d(H.lineColor);this.dataPoints=H.position;
L={gl:this.scene.glplot.gl,position:H.position,color:H.lineColor,lineWidth:H.lineWidth||1,dashes:L[0],dashScale:L[1],opacity:I.opacity,connectGaps:I.connectgaps};-1!==this.mode.indexOf("lines")?this.linePlot?this.linePlot.update(L):(this.linePlot=f(L),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);L=I.opacity;I.marker&&I.marker.opacity&&(L*=I.marker.opacity);L={gl:this.scene.glplot.gl,
position:H.position,color:H.scatterColor,size:H.scatterSize,glyph:H.scatterMarker,opacity:L,orthographic:!0,lineWidth:H.scatterLineWidth,lineColor:H.scatterLineColor,project:H.project,projectScale:H.projectScale,projectOpacity:H.projectOpacity};-1!==this.mode.indexOf("markers")?this.scatterPlot?this.scatterPlot.update(L):(this.scatterPlot=k(L),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),
this.scatterPlot.dispose(),this.scatterPlot=null);L={gl:this.scene.glplot.gl,position:H.position,glyph:H.text,color:H.textColor,size:H.textSize,angle:H.textAngle,alignment:H.textOffset,font:H.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:I.opacity};this.textLabels=I.hovertext||I.text;-1!==this.mode.indexOf("text")?this.textMarkers?this.textMarkers.update(L):(this.textMarkers=k(L),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&
(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null);L={gl:this.scene.glplot.gl,position:H.position,color:H.errorColor,error:H.errorBounds,lineWidth:H.errorLineWidth,capSize:H.errorCapSize,opacity:I.opacity};this.errorBars?H.errorBounds?this.errorBars.update(L):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):H.errorBounds&&(this.errorBars=r(L),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars));if(0<=H.delaunayAxis){L=
H.position;var P=H.delaunayColor;H=H.delaunayAxis;var M=(H+1)%3,N=(H+2)%3,T=[];H=[];var Q;for(Q=0;Q<L.length;++Q){var U=L[Q];!isNaN(U[M])&&isFinite(U[M])&&!isNaN(U[N])&&isFinite(U[N])&&(T.push([U[M],U[N]]),H.push(Q))}M=v(T);for(Q=0;Q<M.length;++Q)for(N=M[Q],T=0;T<N.length;++T)N[T]=H[N[T]];L={positions:L,cells:M,meshColor:P};L.opacity=I.opacity;this.delaunayMesh?this.delaunayMesh.update(L):(L.gl=J,this.delaunayMesh=u(L),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&
(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)};b.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose());this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose());this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose());this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose());this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),
this.delaunayMesh.dispose())};K.exports=function(I,J){I=new q(I,J.uid);I.update(J);return I}},{"../../components/fx/helpers":679,"../../constants/gl3d_dashes":750,"../../constants/gl3d_markers":751,"../../lib":778,"../../lib/gl_format_color":774,"../../lib/str2rgbarray":802,"../../plots/cartesian/axes":828,"../scatter/make_bubble_size_func":1204,"./calc_errors":1217,"delaunay-triangulate":171,"gl-error3d":266,"gl-line3d":275,"gl-mesh3d":309,"gl-scatter3d":330}],1219:[function(b,K,G){function q(p,
c,d,f){var k=0,r=d("x"),u=d("y");d=d("z");m.getComponentMethod("calendars","handleTraceDefaults")(p,c,["x","y","z"],f);r&&u&&d&&(k=Math.min(r.length,u.length,d.length),c._length=c._xlength=c._ylength=c._zlength=k);return k}var m=b("../../registry"),l=b("../../lib"),h=b("../scatter/subtypes"),a=b("../scatter/marker_defaults"),g=b("../scatter/line_defaults"),e=b("../scatter/text_defaults"),n=b("./attributes");K.exports=function(p,c,d,f){function k(C,z){return l.coerce(p,c,n,C,z)}if(q(p,c,k,f)){k("text");
k("hovertext");k("hovertemplate");k("mode");h.hasLines(c)&&(k("connectgaps"),g(p,c,d,f,k));h.hasMarkers(c)&&a(p,c,d,f,k,{noSelect:!0});h.hasText(c)&&(k("texttemplate"),e(p,c,f,k,{noSelect:!0}));f=(c.line||{}).color;var r=(c.marker||{}).color;0<=k("surfaceaxis")&&k("surfacecolor",f||r);for(var u=["x","y","z"],v=0;3>v;++v){var x="projection."+u[v];k(x+".show")&&(k(x+".opacity"),k(x+".scale"))}u=m.getComponentMethod("errorbars","supplyDefaults");u(p,c,f||r||d,{axis:"z"});u(p,c,f||r||d,{axis:"y",inherit:"z"});
u(p,c,f||r||d,{axis:"x",inherit:"z"})}else c.visible=!1}},{"../../lib":778,"../../registry":911,"../scatter/line_defaults":1200,"../scatter/marker_defaults":1206,"../scatter/subtypes":1212,"../scatter/text_defaults":1213,"./attributes":1215}],1220:[function(b,K,G){K.exports={plot:b("./convert"),attributes:b("./attributes"),markerSymbols:b("../../constants/gl3d_markers"),supplyDefaults:b("./defaults"),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:b("./calc"),
moduleType:"trace",name:"scatter3d",basePlotModule:b("../../plots/gl3d"),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},{"../../constants/gl3d_markers":751,"../../plots/gl3d":870,"./attributes":1215,"./calc":1216,"./convert":1218,"./defaults":1219}],1221:[function(b,K,G){G=b("../scatter/attributes");var q=b("../../plots/attributes"),m=b("../../plots/template_attributes").hovertemplateAttrs,l=b("../../plots/template_attributes").texttemplateAttrs,h=b("../../components/colorscale/attributes");
b=b("../../lib/extend").extendFlat;var a=G.marker,g=G.line,e=a.line;K.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:b({},G.mode,{dflt:"markers"}),text:b({},G.text,{}),texttemplate:l({editType:"plot"},{keys:["a","b","text"]}),hovertext:b({},G.hovertext,{}),line:{color:g.color,width:g.width,dash:g.dash,shape:b({},g.shape,{values:["linear","spline"]}),smoothing:g.smoothing,editType:"calc"},connectgaps:G.connectgaps,
fill:b({},G.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:G.fillcolor,marker:b({symbol:a.symbol,opacity:a.opacity,maxdisplayed:a.maxdisplayed,size:a.size,sizeref:a.sizeref,sizemin:a.sizemin,sizemode:a.sizemode,line:b({width:e.width,editType:"calc"},h("marker.line")),gradient:a.gradient,editType:"calc"},h("marker")),textfont:G.textfont,textposition:G.textposition,selected:G.selected,unselected:G.unselected,hoverinfo:b({},q.hoverinfo,{flags:["a","b","text","name"]}),hoveron:G.hoveron,
hovertemplate:m()}},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,"../scatter/attributes":1187}],1222:[function(b,K,G){var q=b("fast-isnumeric"),m=b("../scatter/colorscale_calc"),l=b("../scatter/arrays_to_calcdata"),h=b("../scatter/calc_selection"),a=b("../scatter/calc").calcMarkerSize,g=b("../carpet/lookup_carpetid");K.exports=function(e,n){var p=n._carpetTrace=g(e,n);if(p&&p.visible&&"legendonly"!==p.visible){var c;
n.xaxis=p.xaxis;n.yaxis=p.yaxis;var d=n._length,f=Array(d),k=!1;for(c=0;c<d;c++){var r=n.a[c];var u=n.b[c];if(q(r)&&q(u)){var v=p.ab2xy(+r,+u,!0),x=p.isVisible(+r,+u);x||(k=!0);f[c]={x:v[0],y:v[1],a:r,b:u,vis:x}}else f[c]={x:!1,y:!1}}n._needsCull=k;f[0].carpet=p;f[0].trace=n;a(n,d);m(e,n);l(f,n);h(f,n);return f}}},{"../carpet/lookup_carpetid":981,"../scatter/arrays_to_calcdata":1186,"../scatter/calc":1188,"../scatter/calc_selection":1189,"../scatter/colorscale_calc":1190,"fast-isnumeric":241}],1223:[function(b,
K,G){var q=b("../../lib"),m=b("../scatter/constants"),l=b("../scatter/subtypes"),h=b("../scatter/marker_defaults"),a=b("../scatter/line_defaults"),g=b("../scatter/line_shape_defaults"),e=b("../scatter/text_defaults"),n=b("../scatter/fillcolor_defaults"),p=b("./attributes");K.exports=function(c,d,f,k){function r(x,C){return q.coerce(c,d,p,x,C)}r("carpet");d.xaxis="x";d.yaxis="y";var u=r("a"),v=r("b");if(u=Math.min(u.length,v.length)){d._length=u;r("text");r("texttemplate");r("hovertext");r("mode",
u<m.PTS_LINESONLY?"lines+markers":"lines");l.hasLines(d)&&(a(c,d,f,k,r),g(c,d,r),r("connectgaps"));l.hasMarkers(d)&&h(c,d,f,k,r,{gradient:!0});l.hasText(d)&&e(c,d,k,r);k=[];if(l.hasMarkers(d)||l.hasText(d))r("marker.maxdisplayed"),k.push("points");r("fill");"none"!==d.fill&&(n(c,d,f,r),l.hasLines(d)||g(c,d,r));"tonext"!==d.fill&&"toself"!==d.fill||k.push("fills");"fills"!==r("hoveron",k.join("+")||"points")&&r("hovertemplate");q.coerceSelectionMarkerOpacity(d,r)}else d.visible=!1}},{"../../lib":778,
"../scatter/constants":1191,"../scatter/fillcolor_defaults":1195,"../scatter/line_defaults":1200,"../scatter/line_shape_defaults":1202,"../scatter/marker_defaults":1206,"../scatter/subtypes":1212,"../scatter/text_defaults":1213,"./attributes":1221}],1224:[function(b,K,G){K.exports=function(q,m,l,h,a){m=h[a];q.a=m.a;q.b=m.b;q.y=m.y;return q}},{}],1225:[function(b,K,G){K.exports=function(q,m){var l={};m=m._carpet;q=m.ab2ij([q.a,q.b]);var h=Math.floor(q[0]),a=Math.floor(q[1]);m=m.evalxy([],h,a,q[0]-
h,q[1]-a);l.yLabel=m[1].toFixed(3);return l}},{}],1226:[function(b,K,G){var q=b("../scatter/hover"),m=b("../../lib").fillText;K.exports=function(l,h,a,g){function e(d,f){var k=d.labelprefix&&0<d.labelprefix.length?d.labelprefix.replace(/ = $/,""):d._hovertitle;c.push(k+": "+f.toFixed(3)+d.labelsuffix)}if((h=q(l,h,a,g))&&!1!==h[0].index){a=h[0];if(void 0===a.index)return g=l.xa._length,l=g*(1-a.y0/l.ya._length)/2,g-=l,a.x0=Math.max(Math.min(a.x0,g),l),a.x1=Math.max(Math.min(a.x1,g),l),h;l=a.cd[a.index];
a.a=l.a;a.b=l.b;a.xLabelVal=void 0;a.yLabelVal=void 0;g=a.trace;var n=g._carpet,p=g._module.formatLabels(l,g);a.yLabel=p.yLabel;delete a.text;var c=[];g.hovertemplate||(p=(l.hi||g.hoverinfo).split("+"),-1!==p.indexOf("all")&&(p=["a","b","text"]),-1!==p.indexOf("a")&&e(n.aaxis,l.a),-1!==p.indexOf("b")&&e(n.baxis,l.b),c.push("y: "+a.yLabel),-1!==p.indexOf("text")&&m(l,g,c),a.extraText=c.join("<br>"));return h}}},{"../../lib":778,"../scatter/hover":1198}],1227:[function(b,K,G){K.exports={attributes:b("./attributes"),
supplyDefaults:b("./defaults"),colorbar:b("../scatter/marker_colorbar"),formatLabels:b("./format_labels"),calc:b("./calc"),plot:b("./plot"),style:b("../scatter/style").style,styleOnSelect:b("../scatter/style").styleOnSelect,hoverPoints:b("./hover"),selectPoints:b("../scatter/select"),eventData:b("./event_data"),moduleType:"trace",name:"scattercarpet",basePlotModule:b("../../plots/cartesian"),categories:"svg carpet symbols showLegend carpetDependent zoomScale".split(" "),meta:{}}},{"../../plots/cartesian":841,
"../scatter/marker_colorbar":1205,"../scatter/select":1209,"../scatter/style":1211,"./attributes":1221,"./calc":1222,"./defaults":1223,"./event_data":1224,"./format_labels":1225,"./hover":1226,"./plot":1228}],1228:[function(b,K,G){var q=b("../scatter/plot"),m=b("../../plots/cartesian/axes"),l=b("../../components/drawing");K.exports=function(h,a,g,e){var n=g[0][0].carpet;a={xaxis:m.getFromId(h,n.xaxis||"x"),yaxis:m.getFromId(h,n.yaxis||"y"),plot:a.plot};q(h,a,g,e);for(a=0;a<g.length;a++)n=g[a][0].trace,
n=e.selectAll("g.trace"+n.uid+" .js-line"),l.setClipUrl(n,g[a][0].carpet._clipPathId,h)}},{"../../components/drawing":665,"../../plots/cartesian/axes":828,"../scatter/plot":1208}],1229:[function(b,K,G){G=b("../../plots/template_attributes").hovertemplateAttrs;var q=b("../../plots/template_attributes").texttemplateAttrs,m=b("../scatter/attributes"),l=b("../../plots/attributes"),h=b("../../components/colorscale/attributes"),a=b("../../components/drawing/attributes").dash,g=b("../../lib/extend").extendFlat;
b=b("../../plot_api/edit_types").overrideAll;var e=m.marker,n=m.line,p=e.line;K.exports=b({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:g({},m.mode,{dflt:"markers"}),text:g({},m.text,{}),texttemplate:q({editType:"plot"},{keys:["lat","lon","location",
"text"]}),hovertext:g({},m.hovertext,{}),textfont:m.textfont,textposition:m.textposition,line:{color:n.color,width:n.width,dash:a},connectgaps:m.connectgaps,marker:g({symbol:e.symbol,opacity:e.opacity,size:e.size,sizeref:e.sizeref,sizemin:e.sizemin,sizemode:e.sizemode,colorbar:e.colorbar,line:g({width:p.width},h("marker.line")),gradient:e.gradient},h("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:m.fillcolor,selected:m.selected,unselected:m.unselected,hoverinfo:g({},
l.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:G()},"calc","nested")},{"../../components/colorscale/attributes":650,"../../components/drawing/attributes":664,"../../lib/extend":768,"../../plot_api/edit_types":810,"../../plots/attributes":824,"../../plots/template_attributes":906,"../scatter/attributes":1187}],1230:[function(b,K,G){function q(n){return n&&"string"===typeof n}var m=b("fast-isnumeric"),l=b("../../constants/numerical").BADNUM,h=b("../scatter/colorscale_calc"),
a=b("../scatter/arrays_to_calcdata"),g=b("../scatter/calc_selection"),e=b("../../lib")._;K.exports=function(n,p){var c=Array.isArray(p.locations),d=c?p.locations.length:p._length,f=Array(d);var k=p.geojson?function(C){return q(C)||m(C)}:q;for(var r=0;r<d;r++){var u=f[r]={};if(c){var v=p.locations[r];u.loc=k(v)?v:null}else{v=p.lon[r];var x=p.lat[r];m(v)&&m(x)?u.lonlat=[+v,+x]:u.lonlat=[l,l]}}a(f,p);h(n,p);g(f,p);d&&(f[0].t={labels:{lat:e(n,"lat:")+" ",lon:e(n,"lon:")+" "}});return f}},{"../../constants/numerical":753,
"../../lib":778,"../scatter/arrays_to_calcdata":1186,"../scatter/calc_selection":1189,"../scatter/colorscale_calc":1190,"fast-isnumeric":241}],1231:[function(b,K,G){var q=b("../../lib"),m=b("../scatter/subtypes"),l=b("../scatter/marker_defaults"),h=b("../scatter/line_defaults"),a=b("../scatter/text_defaults"),g=b("../scatter/fillcolor_defaults"),e=b("./attributes");K.exports=function(n,p,c,d){function f(v,x){return q.coerce(n,p,e,v,x)}var k=f("locations");if(k&&k.length){var r=f("geojson");if("string"===
typeof r&&""!==r||q.isPlainObject(r))var u="geojson-id";"geojson-id"===f("locationmode",u)&&f("featureidkey");k=k.length}else k=f("lon")||[],r=f("lat")||[],k=Math.min(k.length,r.length);k?(p._length=k,f("text"),f("hovertext"),f("hovertemplate"),f("mode"),m.hasLines(p)&&(h(n,p,c,d,f),f("connectgaps")),m.hasMarkers(p)&&l(n,p,c,d,f,{gradient:!0}),m.hasText(p)&&(f("texttemplate"),a(n,p,d,f)),f("fill"),"none"!==p.fill&&g(n,p,c,f),q.coerceSelectionMarkerOpacity(p,f)):p.visible=!1}},{"../../lib":778,"../scatter/fillcolor_defaults":1195,
"../scatter/line_defaults":1200,"../scatter/marker_defaults":1206,"../scatter/subtypes":1212,"../scatter/text_defaults":1213,"./attributes":1229}],1232:[function(b,K,G){K.exports=function(q,m,l,h,a){q.lon=m.lon;q.lat=m.lat;q.location=m.loc?m.loc:null;m=h[a];m.fIn&&m.fIn.properties&&(q.properties=m.fIn.properties);return q}},{}],1233:[function(b,K,G){var q=b("../../plots/cartesian/axes");K.exports=function(m,l,h){var a={};l=h[l.geo]._subplot.mockAxis;m=m.lonlat;a.lonLabel=q.tickText(l,l.c2l(m[0]),
!0).text;a.latLabel=q.tickText(l,l.c2l(m[1]),!0).text;return a}},{"../../plots/cartesian/axes":828}],1234:[function(b,K,G){function q(e,n,p,c){if(!e.hovertemplate){var d=n.hi||e.hoverinfo,f="all"===d?g.hoverinfo.flags:d.split("+");d=-1!==f.indexOf("location")&&Array.isArray(e.locations);var k=-1!==f.indexOf("lon"),r=-1!==f.indexOf("lat");f=-1!==f.indexOf("text");var u=[];d?u.push(n.loc):k&&r?u.push("("+(p.lonLabel+"\u00b0, ")+(p.latLabel+"\u00b0)")):k?u.push(c.lon+(p.lonLabel+"\u00b0")):r&&u.push(c.lat+
(p.latLabel+"\u00b0"));f&&a(n,e,u);return u.join("<br>")}}var m=b("../../components/fx"),l=b("../../constants/numerical").BADNUM,h=b("../scatter/get_trace_color"),a=b("../../lib").fillText,g=b("./attributes");K.exports=function(e,n,p){var c=e.cd,d=c[0].trace,f=e.xa,k=e.ya,r=e.subplot,u=r.projection.isLonLatOverEdges,v=r.project;m.getClosest(c,function(z){var y=z.lonlat;if(y[0]===l||u(y))return Infinity;var D=v(y),A=v([n,p]);y=Math.abs(D[0]-A[0]);D=Math.abs(D[1]-A[1]);z=Math.max(3,z.mrc||0);return Math.max(Math.sqrt(y*
y+D*D)-z,1-3/z)},e);if(!1!==e.index){var x=c[e.index],C=x.lonlat;f=[f.c2p(C),k.c2p(C)];k=x.mrc||1;e.x0=f[0]-k;e.x1=f[0]+k;e.y0=f[1]-k;e.y1=f[1]+k;e.loc=x.loc;e.lon=C[0];e.lat=C[1];C={};C[d.geo]={_subplot:r};r=d._module.formatLabels(x,d,C);e.lonLabel=r.lonLabel;e.latLabel=r.latLabel;e.color=h(d,x);e.extraText=q(d,x,e,c[0].t.labels);e.hovertemplate=d.hovertemplate;return[e]}}},{"../../components/fx":683,"../../constants/numerical":753,"../../lib":778,"../scatter/get_trace_color":1197,"./attributes":1229}],
1235:[function(b,K,G){K.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../scatter/marker_colorbar"),formatLabels:b("./format_labels"),calc:b("./calc"),calcGeoJSON:b("./plot").calcGeoJSON,plot:b("./plot").plot,style:b("./style"),styleOnSelect:b("../scatter/style").styleOnSelect,hoverPoints:b("./hover"),eventData:b("./event_data"),selectPoints:b("./select"),moduleType:"trace",name:"scattergeo",basePlotModule:b("../../plots/geo"),categories:["geo","symbols","showLegend",
"scatter-like"],meta:{}}},{"../../plots/geo":860,"../scatter/marker_colorbar":1205,"../scatter/style":1211,"./attributes":1229,"./calc":1230,"./defaults":1231,"./event_data":1232,"./format_labels":1233,"./hover":1234,"./plot":1236,"./select":1237,"./style":1238}],1236:[function(b,K,G){var q=b("d3"),m=b("../../lib"),l=b("../../lib/topojson_utils").getTopojsonFeatures,h=b("../../lib/geojson_utils"),a=b("../../lib/geo_location_utils"),g=b("../../plots/cartesian/autorange").findExtremes,e=b("../../constants/numerical").BADNUM,
n=b("../scatter/calc").calcMarkerSize,p=b("../scatter/subtypes"),c=b("./style");K.exports={calcGeoJSON:function(d,f){var k=d[0].trace;f=f[k.geo];var r=f._subplot,u=k._length;if(Array.isArray(k.locations)){var v=k.locationmode,x="geojson-id"===v?a.extractTraceFeature(d):l(k,r.topojson);for(r=0;r<u;r++){var C=d[r];var z="geojson-id"===v?C.fOut:a.locationToFeature(v,C.loc,x);C.lonlat=z?z.properties.ct:[e,e]}}v={padded:!0};if("geojson"===f.fitbounds&&"geojson-id"===k.locationmode)d=a.computeBbox(a.getTraceGeojson(k)),
x=[d[0],d[2]],z=[d[1],d[3]];else{x=Array(u);z=Array(u);for(r=0;r<u;r++)C=d[r],x[r]=C.lonlat[0],z[r]=C.lonlat[1];v.ppad=n(k,u)}k._extremes.lon=g(f.lonaxis._ax,x,v);k._extremes.lat=g(f.lataxis._ax,z,v)},plot:function(d,f,k){f=f.layers.frontplot.select(".scatterlayer");k=m.makeTraceGroups(f,k,"trace scattergeo");k.selectAll("*").remove();k.each(function(r){var u=q.select(this),v=r[0].trace;if(p.hasLines(v)||"none"!==v.fill){var x=h.calcTraceToLineCoords(r);x="none"!==v.fill?h.makePolygon(x):h.makeLine(x);
u.selectAll("path.js-line").data([{geojson:x,trace:v}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}p.hasMarkers(v)&&u.selectAll("path.point").data(m.identity).enter().append("path").classed("point",!0).each(function(C){C.lonlat[0]===e&&q.select(this).remove()});p.hasText(v)&&u.selectAll("g").data(m.identity).enter().append("g").append("text").each(function(C){C.lonlat[0]===e&&q.select(this).remove()});c(d,r)})}}},{"../../constants/numerical":753,"../../lib":778,"../../lib/geo_location_utils":771,
"../../lib/geojson_utils":772,"../../lib/topojson_utils":806,"../../plots/cartesian/autorange":827,"../scatter/calc":1188,"../scatter/subtypes":1212,"./style":1238,d3:169}],1237:[function(b,K,G){var q=b("../scatter/subtypes"),m=b("../../constants/numerical").BADNUM;K.exports=function(l,h){var a=l.cd,g=l.xaxis,e=l.yaxis,n=[],p=a[0].trace,c;if(!q.hasMarkers(p)&&!q.hasText(p))return[];if(!1===h)for(c=0;c<a.length;c++)a[c].selected=0;else for(c=0;c<a.length;c++){p=a[c];var d=p.lonlat;if(d[0]!==m){var f=
g.c2p(d);var k=e.c2p(d);h.contains([f,k],null,c,l)?(n.push({pointNumber:c,lon:d[0],lat:d[1]}),p.selected=1):p.selected=0}}return n}},{"../../constants/numerical":753,"../scatter/subtypes":1212}],1238:[function(b,K,G){function q(e,n){var p=n[0].trace,c=n[0].node3;c.style("opacity",n[0].trace.opacity);a(c,p,e);g(c,p,e);c.selectAll("path.js-line").style("fill","none").each(function(d){var f=m.select(this);d=d.trace;var k=d.line||{};f.call(h.stroke,k.color).call(l.dashLine,k.dash||"",k.width||0);"none"!==
d.fill&&f.call(h.fill,d.fillcolor)})}var m=b("d3"),l=b("../../components/drawing"),h=b("../../components/color");b=b("../scatter/style");var a=b.stylePoints,g=b.styleText;K.exports=function(e,n){n&&q(e,n)}},{"../../components/color":643,"../../components/drawing":665,"../scatter/style":1211,d3:169}],1239:[function(b,K,G){var q=b("../../plots/attributes");G=b("../scatter/attributes");var m=b("../../components/colorscale/attributes"),l=b("../../lib/extend").extendFlat,h=b("../../plot_api/edit_types").overrideAll;
b=b("./constants").DASHES;var a=G.line,g=G.marker,e=g.line;K=K.exports=h({x:G.x,x0:G.x0,dx:G.dx,y:G.y,y0:G.y0,dy:G.dy,xperiod:G.xperiod,yperiod:G.yperiod,xperiod0:G.xperiod0,yperiod0:G.yperiod0,xperiodalignment:G.xperiodalignment,yperiodalignment:G.yperiodalignment,text:G.text,hovertext:G.hovertext,textposition:G.textposition,textfont:G.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:a.color,width:a.width,shape:{valType:"enumerated",values:["linear",
"hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:Object.keys(b),dflt:"solid"}},marker:l({},m("marker"),{symbol:g.symbol,size:g.size,sizeref:g.sizeref,sizemin:g.sizemin,sizemode:g.sizemode,opacity:g.opacity,colorbar:g.colorbar,line:l({},m("marker.line"),{width:e.width})}),connectgaps:G.connectgaps,fill:l({},G.fill,{dflt:"none"}),fillcolor:G.fillcolor,selected:{marker:G.selected.marker,textfont:G.selected.textfont},unselected:{marker:G.unselected.marker,textfont:G.unselected.textfont},
opacity:q.opacity},"calc","nested");K.x.editType=K.y.editType=K.x0.editType=K.y0.editType="calc+clearAxisTypes";K.hovertemplate=G.hovertemplate;K.texttemplate=G.texttemplate},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plot_api/edit_types":810,"../../plots/attributes":824,"../scatter/attributes":1187,"./constants":1241}],1240:[function(b,K,G){function q(u,v,x){u=u._extremes[v._id];v=a(v,x._bnds,{padded:!0});u.min=u.min.concat(v.min);u.max=u.max.concat(v.max)}var m=
b("@plotly/point-cluster"),l=b("../../lib"),h=b("../../plots/cartesian/axis_ids"),a=b("../../plots/cartesian/autorange").findExtremes,g=b("../../plots/cartesian/align_period");G=b("../scatter/calc");var e=G.calcMarkerSize,n=G.calcAxisExpansion,p=G.setFirstScatter,c=b("../scatter/colorscale_calc"),d=b("./convert"),f=b("./scene_update"),k=b("../../constants/numerical").BADNUM,r=b("./constants").TOO_MANY_POINTS;K.exports=function(u,v){var x=u._fullLayout,C=h.getFromId(u,v.xaxis),z=h.getFromId(u,v.yaxis),
y=x._plots[v.xaxis+v.yaxis],D=v._length,A=D>=r,t=2*D,B={},F=C.makeCalcdata(v,"x");var I=z.makeCalcdata(v,"y");var J=g(v,C,"x",F),L=g(v,z,"y",I);v._x=J;v._y=L;v.xperiodalignment&&(v._origX=F);v.yperiodalignment&&(v._origY=I);F=Array(t);for(I=0;I<D;I++){var H=J[I];var P=L[I];F[2*I]=H===k?NaN:H;F[2*I+1]=P===k?NaN:P}if("log"===C.type)for(I=0;I<t;I+=2)F[I]=C.c2l(F[I]);if("log"===z.type)for(I=1;I<t;I+=2)F[I]=z.c2l(F[I]);if(A&&"log"!==C.type&&"log"!==z.type)B.tree=m(F);else for(t=B.ids=Array(D),I=0;I<D;I++)t[I]=
I;c(u,v);t=d.style(u,v);t.marker&&(t.marker.positions=F);t.line&&1<F.length&&l.extendFlat(t.line,d.linePositions(u,v,F));if(t.errorX||t.errorY)I=d.errorBarPositions(u,v,F,J,L),t.errorX&&l.extendFlat(t.errorX,I.x),t.errorY&&l.extendFlat(t.errorY,I.y);t.text&&(l.extendFlat(t.text,{positions:F},d.textPosition(u,v,t.text,t.marker)),l.extendFlat(t.textSel,{positions:F},d.textPosition(u,v,t.text,t.markerSel)),l.extendFlat(t.textUnsel,{positions:F},d.textPosition(u,v,t.text,t.markerUnsel)));y=f(u,y);p(x,
v);var M;A?t.marker&&(M=2*(t.marker.sizeAvg||Math.max(t.marker.size,3))):M=e(v,D);n(u,v,C,z,J,L,M);t.errorX&&q(v,C,t.errorX);t.errorY&&q(v,z,t.errorY);t.fill&&!y.fill2d&&(y.fill2d=!0);t.marker&&!y.scatter2d&&(y.scatter2d=!0);t.line&&!y.line2d&&(y.line2d=!0);!t.errorX&&!t.errorY||y.error2d||(y.error2d=!0);t.text&&!y.glText&&(y.glText=!0);t.marker&&(t.marker.snap=D);y.lineOptions.push(t.line);y.errorXOptions.push(t.errorX);y.errorYOptions.push(t.errorY);y.fillOptions.push(t.fill);y.markerOptions.push(t.marker);
y.markerSelectedOptions.push(t.markerSel);y.markerUnselectedOptions.push(t.markerUnsel);y.textOptions.push(t.text);y.textSelectedOptions.push(t.textSel);y.textUnselectedOptions.push(t.textUnsel);y.selectBatch.push([]);y.unselectBatch.push([]);B._scene=y;B.index=y.count;B.x=J;B.y=L;B.positions=F;y.count++;return[{x:!1,y:!1,t:B,trace:v}]}},{"../../constants/numerical":753,"../../lib":778,"../../plots/cartesian/align_period":825,"../../plots/cartesian/autorange":827,"../../plots/cartesian/axis_ids":831,
"../scatter/calc":1188,"../scatter/colorscale_calc":1190,"./constants":1241,"./convert":1242,"./scene_update":1250,"@plotly/point-cluster":57}],1241:[function(b,K,G){K.exports={TOO_MANY_POINTS:1E5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:20,SYMBOL_STROKE:1,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},{}],1242:[function(b,K,G){function q(J,L){var H=J._fullLayout;J=L._length;var P=L.textfont,M=L.textposition,N=Array.isArray(M)?
M:[M],T=P.color;M=P.size;P=P.family;var Q={},U,S=L.texttemplate;if(S){Q.text=[];var X=H._d3locale,Z=(U=Array.isArray(S))?Math.min(S.length,J):J,aa=U?function(ma){return S[ma]}:function(){return S};for(U=0;U<Z;U++){var fa={i:U},ha=L._module.formatLabels(fa,L,H),ja={};D(ja,L,U);var ba=L._meta||{};Q.text.push(d.texttemplateString(aa(U),ha,X,ja,fa,ba))}}else Array.isArray(L.text)&&L.text.length<J?Q.text=L.text.slice():Q.text=L.text;if(Array.isArray(Q.text))for(U=Q.text.length;U<J;U++)Q.text[U]="";Q.opacity=
L.opacity;Q.font={};Q.align=[];Q.baseline=[];for(U=0;U<N.length;U++){L=N[U].split(/\s+/);switch(L[1]){case "left":Q.align.push("right");break;case "right":Q.align.push("left");break;default:Q.align.push(L[1])}switch(L[0]){case "top":Q.baseline.push("bottom");break;case "bottom":Q.baseline.push("top");break;default:Q.baseline.push(L[0])}}if(Array.isArray(T))for(Q.color=Array(J),U=0;U<J;U++)Q.color[U]=T[U];else Q.color=T;if(d.isArrayOrTypedArray(M)||Array.isArray(P))for(Q.font=Array(J),U=0;U<J;U++)L=
Q.font[U]={},L.size=d.isTypedArray(M)?M[U]:Array.isArray(M)?e(M[U])?M[U]:0:M,L.family=Array.isArray(P)?P[U]:P;else Q.font={size:M,family:P};return Q}function m(J){var L=J._length,H=J.marker,P={},M=d.isArrayOrTypedArray(H.symbol);var N=d.isArrayOrTypedArray(H.color);var T=d.isArrayOrTypedArray(H.line.color),Q=d.isArrayOrTypedArray(H.opacity),U=d.isArrayOrTypedArray(H.size),S=d.isArrayOrTypedArray(H.line.width),X;M||(X=x.isOpenSymbol(H.symbol));if(M||N||T||Q){P.colors=Array(L);P.borderColors=Array(L);
T=r(H,H.opacity,L);Q=r(H.line,H.opacity,L);if(!Array.isArray(Q[0])){var Z=Q;Q=Array(L);for(N=0;N<L;N++)Q[N]=Z}if(!Array.isArray(T[0]))for(Z=T,T=Array(L),N=0;N<L;N++)T[N]=Z;P.colors=T;P.borderColors=Q;for(N=0;N<L;N++)M&&(X=x.isOpenSymbol(H.symbol[N])),X&&(Q[N]=T[N].slice(),T[N]=T[N].slice(),T[N][3]=0);P.opacity=J.opacity}else X?(P.color=p(H.color,"uint8"),P.color[3]=0,P.borderColor=p(H.color,"uint8")):(P.color=p(H.color,"uint8"),P.borderColor=p(H.line.color,"uint8")),P.opacity=J.opacity*H.opacity;
if(M)for(P.markers=Array(L),N=0;N<L;N++)P.markers[N]=g(H.symbol[N]);else P.marker=g(H.symbol);X=v(J);if(U||S){J=P.sizes=Array(L);M=P.borderSizes=Array(L);T=0;if(U){for(N=0;N<L;N++)J[N]=X(H.size[N]),T+=J[N];var aa=T/L}else for(U=X(H.size),N=0;N<L;N++)J[N]=U;if(S)for(N=0;N<L;N++)M[N]=H.line.width[N]/2;else for(U=H.line.width/2,N=0;N<L;N++)M[N]=U;P.sizeAvg=aa}else P.size=X(H&&H.size||10),P.borderSizes=X(H.line.width);return P}function l(J,L){J=J.marker;var H={};if(!L)return H;L.marker&&L.marker.symbol?
H=m(d.extendFlat({},J,L.marker)):L.marker&&(L.marker.size&&(H.size=L.marker.size/2),L.marker.color&&(H.colors=L.marker.color),void 0!==L.marker.opacity&&(H.opacity=L.marker.opacity));return H}function h(J,L,H){var P={};if(!H)return P;H.textfont&&(L={opacity:1,text:L.text,texttemplate:L.texttemplate,textposition:L.textposition,textfont:d.extendFlat({},L.textfont)},H.textfont&&d.extendFlat(L.textfont,H.textfont),P=q(J,L));return P}function a(J,L){var H={capSize:2*L.width,lineWidth:L.thickness,color:L.color};
L.copy_ystyle&&(H=J.error_y);return H}function g(J){if("circle"===J)return null;var L=f.symbolNumber(J);var H=f.symbolFuncs[L%100];var P=!!f.symbolNoDot[L%100];L=!!f.symbolNoFill[L%100];var M=x.isDotSymbol(J);if(F[J])return F[J];H=M&&!P?H(1.1*t)+I:H(t);H=n(H,{w:A,h:A,viewBox:[-t,-t,t,t],stroke:L?B:-B});return(F[J]=H)||null}var e=b("fast-isnumeric"),n=b("svg-path-sdf"),p=b("color-normalize"),c=b("../../registry"),d=b("../../lib"),f=b("../../components/drawing"),k=b("../../plots/cartesian/axis_ids"),
r=b("../../lib/gl_format_color").formatColor,u=b("../scatter/subtypes"),v=b("../scatter/make_bubble_size_func"),x=b("./helpers"),C=b("./constants"),z=b("../../constants/interactions").DESELECTDIM,y={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},D=b("../../components/fx/helpers").appendArrayPointValue,A=C.SYMBOL_SDF_SIZE,t=C.SYMBOL_SIZE,B=C.SYMBOL_STROKE,F={},I=f.symbolFuncs[0](.05*t);K.exports={style:function(J,L){var H={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,
fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0};if(!0!==L.visible)return H;u.hasText(L)&&(H.text=q(J,L),H.textSel=h(J,L,L.selected),H.textUnsel=h(J,L,L.unselected));if(u.hasMarkers(L)&&(H.marker=m(L),H.markerSel=l(L,L.selected),H.markerUnsel=l(L,L.unselected),!L.unselected&&d.isArrayOrTypedArray(L.marker.opacity))){var P=L.marker.opacity;H.markerUnsel.opacity=Array(P.length);for(J=0;J<P.length;J++)H.markerUnsel.opacity[J]=z*P[J]}if(u.hasLines(L)){H.line={overlay:!0,
thickness:L.line.width,color:L.line.color,opacity:L.opacity};P=(C.DASHES[L.line.dash]||[1]).slice();for(J=0;J<P.length;++J)P[J]*=L.line.width;H.line.dashes=P}L.error_x&&L.error_x.visible&&(H.errorX=a(L,L.error_x));L.error_y&&L.error_y.visible&&(H.errorY=a(L,L.error_y));L.fill&&"none"!==L.fill&&(H.fill={closed:!0,fill:L.fillcolor,thickness:0});return H},markerStyle:m,markerSelection:l,linePositions:function(J,L,H){var P=H.length,M=P/2;if(u.hasLines(L)&&M)if("hv"===L.line.shape){var N=[];for(J=0;J<
M-1;J++)isNaN(H[2*J])||isNaN(H[2*J+1])?N.push(NaN,NaN,NaN,NaN):(N.push(H[2*J],H[2*J+1]),isNaN(H[2*J+2])||isNaN(H[2*J+3])?N.push(NaN,NaN):N.push(H[2*J+2],H[2*J+1]));N.push(H[P-2],H[P-1])}else if("hvh"===L.line.shape){N=[];for(J=0;J<M-1;J++)if(isNaN(H[2*J])||isNaN(H[2*J+1])||isNaN(H[2*J+2])||isNaN(H[2*J+3]))isNaN(H[2*J])||isNaN(H[2*J+1])?N.push(NaN,NaN):N.push(H[2*J],H[2*J+1]),N.push(NaN,NaN);else{var T=(H[2*J]+H[2*J+2])/2;N.push(H[2*J],H[2*J+1],T,H[2*J+1],T,H[2*J+3])}N.push(H[P-2],H[P-1])}else if("vhv"===
L.line.shape){N=[];for(J=0;J<M-1;J++)isNaN(H[2*J])||isNaN(H[2*J+1])||isNaN(H[2*J+2])||isNaN(H[2*J+3])?(isNaN(H[2*J])||isNaN(H[2*J+1])?N.push(NaN,NaN):N.push(H[2*J],H[2*J+1]),N.push(NaN,NaN)):(T=(H[2*J+1]+H[2*J+3])/2,N.push(H[2*J],H[2*J+1],H[2*J],T,H[2*J+2],T));N.push(H[P-2],H[P-1])}else if("vh"===L.line.shape){N=[];for(J=0;J<M-1;J++)isNaN(H[2*J])||isNaN(H[2*J+1])?N.push(NaN,NaN,NaN,NaN):(N.push(H[2*J],H[2*J+1]),isNaN(H[2*J+2])||isNaN(H[2*J+3])?N.push(NaN,NaN):N.push(H[2*J],H[2*J+3]));N.push(H[P-2],
H[P-1])}else N=H;P=!1;for(J=0;J<N.length;J++)if(isNaN(N[J])){P=!0;break}H=P||N.length>C.TOO_MANY_POINTS?"rect":u.hasMarkers(L)?"rect":"round";if(P&&L.connectgaps)for(L=N[0],P=N[1],J=0;J<N.length;J+=2)isNaN(N[J])||isNaN(N[J+1])?(N[J]=L,N[J+1]=P):(L=N[J],P=N[J+1]);return{join:H,positions:N}},errorBarPositions:function(J,L,H,P,M){function N(X,Z){var aa=Z._id.charAt(0),fa=L["error_"+aa];if(fa&&fa.visible&&("linear"===Z.type||"log"===Z.type)){fa=T(fa);for(var ha={x:0,y:1}[aa],ja={x:[0,1,2,3],y:[2,3,0,
1]}[aa],ba=new Float64Array(4*U),ma=Infinity,qa=-Infinity,ka=0,oa=0;ka<U;ka++,oa+=4){var na=X[ka];if(e(na)){var la=H[2*ka+ha],ia=fa(na,ka),sa=ia[0];ia=ia[1];if(e(sa)&&e(ia)){var ta=na+ia;ba[oa+ja[0]]=la-Z.c2l(na-sa);ba[oa+ja[1]]=Z.c2l(ta)-la;ba[oa+ja[2]]=0;ba[oa+ja[3]]=0;ma=Math.min(ma,na-sa);qa=Math.max(qa,na+ia)}}}S[aa]={positions:H,errors:ba,_bnds:[ma,qa]}}}var T=c.getComponentMethod("errorbars","makeComputeError"),Q=k.getFromId(J,L.xaxis);J=k.getFromId(J,L.yaxis);var U=H.length/2,S={};N(P,Q);
N(M,J);return S},textPosition:function(J,L,H,P){J=L._length;var M={};if(u.hasMarkers(L)){L=H.font;var N=H.align,T=H.baseline;M.offset=Array(J);for(H=0;H<J;H++){var Q=P.sizes?P.sizes[H]:P.size,U=Array.isArray(L)?L[H].size:L.size,S=Array.isArray(N)?1<N.length?N[H]:N[0]:N,X=Array.isArray(T)?1<T.length?T[H]:T[0]:T;X=y[X];Q=Q?Q/.8+1:0;M.offset[H]=[y[S]*Q/U,(-X*Q-.5*X)/U]}}return M}}},{"../../components/drawing":665,"../../components/fx/helpers":679,"../../constants/interactions":752,"../../lib":778,"../../lib/gl_format_color":774,
"../../plots/cartesian/axis_ids":831,"../../registry":911,"../scatter/make_bubble_size_func":1204,"../scatter/subtypes":1212,"./constants":1241,"./helpers":1246,"color-normalize":125,"fast-isnumeric":241,"svg-path-sdf":574}],1243:[function(b,K,G){var q=b("../../lib"),m=b("../../registry"),l=b("./helpers"),h=b("./attributes"),a=b("../scatter/constants"),g=b("../scatter/subtypes"),e=b("../scatter/xy_defaults"),n=b("../scatter/period_defaults"),p=b("../scatter/marker_defaults"),c=b("../scatter/line_defaults"),
d=b("../scatter/fillcolor_defaults"),f=b("../scatter/text_defaults");K.exports=function(k,r,u,v){function x(D,A){return q.coerce(k,r,h,D,A)}var C=k.marker?l.isOpenSymbol(k.marker.symbol):!1,z=g.isBubble(k),y=e(k,r,v,x);y?(n(k,r,v,x),y=y<a.PTS_LINESONLY?"lines+markers":"lines",x("text"),x("hovertext"),x("hovertemplate"),x("mode",y),g.hasLines(r)&&(x("connectgaps"),c(k,r,u,v,x),x("line.shape")),g.hasMarkers(r)&&(p(k,r,u,v,x),x("marker.line.width",C||z?1:0)),g.hasText(r)&&(x("texttemplate"),f(k,r,v,
x)),v=(r.line||{}).color,C=(r.marker||{}).color,x("fill"),"none"!==r.fill&&d(k,r,u,x),z=m.getComponentMethod("errorbars","supplyDefaults"),z(k,r,v||C||u,{axis:"y"}),z(k,r,v||C||u,{axis:"x",inherit:"y"}),q.coerceSelectionMarkerOpacity(r,x)):r.visible=!1}},{"../../lib":778,"../../registry":911,"../scatter/constants":1191,"../scatter/fillcolor_defaults":1195,"../scatter/line_defaults":1200,"../scatter/marker_defaults":1206,"../scatter/period_defaults":1207,"../scatter/subtypes":1212,"../scatter/text_defaults":1213,
"../scatter/xy_defaults":1214,"./attributes":1239,"./helpers":1246}],1244:[function(b,K,G){var q=b("../../lib"),m=b("../../components/color"),l=b("../../constants/interactions").DESELECTDIM;K.exports={styleTextSelection:function(h){h=h[0];var a=h.trace,g=h.t;h=g._scene;g=g.index;var e=h.selectBatch[g],n=h.unselectBatch[g],p=h.textOptions[g],c=h.textSelectedOptions[g]||{},d=h.textUnselectedOptions[g]||{},f=q.extendFlat({},p);if(e.length||n.length){c=c.color;d=d.color;p=p.color;var k=Array.isArray(p);
f.color=Array(a._length);for(a=0;a<e.length;a++){var r=e[a];f.color[r]=c||(k?p[r]:p)}for(a=0;a<n.length;a++)r=n[a],e=k?p[r]:p,f.color[r]=d?d:c?e:m.addOpacity(e,l)}h.glText[g].update(f)}}},{"../../components/color":643,"../../constants/interactions":752,"../../lib":778}],1245:[function(b,K,G){var q=b("../scatter/format_labels");K.exports=function(m,l,h){var a=m.i;"x"in m||(m.x=l._x[a]);"y"in m||(m.y=l._y[a]);return q(m,l,h)}},{"../scatter/format_labels":1196}],1246:[function(b,K,G){var q=b("./constants");
G.isOpenSymbol=function(m){return"string"===typeof m?q.OPEN_RE.test(m):100<m%200};G.isDotSymbol=function(m){return"string"===typeof m?q.DOT_RE.test(m):200<m}},{"./constants":1241}],1247:[function(b,K,G){function q(a,g,e,n){var p=a.xa,c=a.ya,d=a.distance,f=a.dxy,k=a.index;g={pointNumber:k,x:g[k],y:e[k]};g.tx=Array.isArray(n.text)?n.text[k]:n.text;g.htx=Array.isArray(n.hovertext)?n.hovertext[k]:n.hovertext;g.data=Array.isArray(n.customdata)?n.customdata[k]:n.customdata;g.tp=Array.isArray(n.textposition)?
n.textposition[k]:n.textposition;if(e=n.textfont)g.ts=l.isArrayOrTypedArray(e.size)?e.size[k]:e.size,g.tc=Array.isArray(e.color)?e.color[k]:e.color,g.tf=Array.isArray(e.family)?e.family[k]:e.family;if(e=n.marker)g.ms=l.isArrayOrTypedArray(e.size)?e.size[k]:e.size,g.mo=l.isArrayOrTypedArray(e.opacity)?e.opacity[k]:e.opacity,g.mx=l.isArrayOrTypedArray(e.symbol)?e.symbol[k]:e.symbol,g.mc=l.isArrayOrTypedArray(e.color)?e.color[k]:e.color;var r=e&&e.line;r&&(g.mlc=Array.isArray(r.color)?r.color[k]:r.color,
g.mlw=l.isArrayOrTypedArray(r.width)?r.width[k]:r.width);(e=e&&e.gradient)&&"none"!==e.type&&(g.mgt=Array.isArray(e.type)?e.type[k]:e.type,g.mgc=Array.isArray(e.color)?e.color[k]:e.color);p=p.c2p(g.x,!0);c=c.c2p(g.y,!0);e=g.mrc||1;if(r=n.hoverlabel)g.hbg=Array.isArray(r.bgcolor)?r.bgcolor[k]:r.bgcolor,g.hbc=Array.isArray(r.bordercolor)?r.bordercolor[k]:r.bordercolor,g.hts=l.isArrayOrTypedArray(r.font.size)?r.font.size[k]:r.font.size,g.htc=Array.isArray(r.font.color)?r.font.color[k]:r.font.color,g.htf=
Array.isArray(r.font.family)?r.font.family[k]:r.font.family,g.hnl=l.isArrayOrTypedArray(r.namelength)?r.namelength[k]:r.namelength;if(r=n.hoverinfo)g.hi=Array.isArray(r)?r[k]:r;if(r=n.hovertemplate)g.ht=Array.isArray(r)?r[k]:r;r={};r[a.index]=g;var u=n._origX,v=n._origY;a=l.extendFlat({},a,{color:h(n,g),x0:p-e,x1:p+e,xLabelVal:u?u[k]:g.x,y0:c-e,y1:c+e,yLabelVal:v?v[k]:g.y,cd:r,distance:d,spikeDistance:f,hovertemplate:g.ht});g.htx?a.text=g.htx:g.tx?a.text=g.tx:n.text&&(a.text=n.text);l.fillText(g,
n,a);m.getComponentMethod("errorbars","hoverInfo")(g,n,a);return a}var m=b("../../registry"),l=b("../../lib"),h=b("../scatter/get_trace_color");K.exports={hoverPoints:function(a,g,e,n){var p=a.cd,c=p[0].t;p=p[0].trace;var d=a.xa,f=a.ya,k=c.x,r=c.y;g=d.c2p(g);e=f.c2p(e);var u=a.distance;if(c.tree){var v=d.p2c(g-u),x=d.p2c(g+u),C=f.p2c(e-u),z=f.p2c(e+u);c="x"===n?c.tree.range(Math.min(v,x),Math.min(f._rl[0],f._rl[1]),Math.max(v,x),Math.max(f._rl[0],f._rl[1])):c.tree.range(Math.min(v,x),Math.min(C,z),
Math.max(v,x),Math.max(C,z))}else c=c.ids;if("x"===n)for(n=0;n<c.length;n++){if(x=k[c[n]],x=Math.abs(d.c2p(x)-g),x<u){u=x;v=f.c2p(r[c[n]])-e;var y=Math.sqrt(x*x+v*v);var D=c[n]}}else for(n=c.length-1;-1<n;n--)x=k[c[n]],v=r[c[n]],x=d.c2p(x)-g,v=f.c2p(v)-e,v=Math.sqrt(x*x+v*v),v<u&&(u=y=v,D=c[n]);a.index=D;a.distance=u;a.dxy=y;return void 0===D?[a]:[q(a,k,r,p)]},calcHover:q}},{"../../lib":778,"../../registry":911,"../scatter/get_trace_color":1197}],1248:[function(b,K,G){G=b("./hover");K.exports={moduleType:"trace",
name:"scattergl",basePlotModule:b("../../plots/cartesian"),categories:"gl regl cartesian symbols errorBarsOK showLegend scatter-like".split(" "),attributes:b("./attributes"),supplyDefaults:b("./defaults"),crossTraceDefaults:b("../scatter/cross_trace_defaults"),colorbar:b("../scatter/marker_colorbar"),formatLabels:b("./format_labels"),calc:b("./calc"),plot:b("./plot"),hoverPoints:G.hoverPoints,selectPoints:b("./select"),meta:{}}},{"../../plots/cartesian":841,"../scatter/cross_trace_defaults":1193,
"../scatter/marker_colorbar":1205,"./attributes":1239,"./calc":1240,"./defaults":1243,"./format_labels":1245,"./hover":1247,"./plot":1249,"./select":1251}],1249:[function(b,K,G){function q(f,k,r){var u=f._size;return[u.l+k.domain[0]*u.w,u.b+r.domain[0]*u.h,f.width-u.r-(1-k.domain[1])*u.w,f.height-u.t-(1-r.domain[1])*u.h]}var m=b("regl-scatter2d"),l=b("regl-line2d"),h=b("regl-error2d"),a=b("gl-text"),g=b("../../lib"),e=b("../../components/dragelement/helpers").selectMode,n=b("../../lib/prepare_regl"),
p=b("../scatter/subtypes"),c=b("../scatter/link_traces"),d=b("./edit_style").styleTextSelection;K.exports=function(f,k,r){if(r.length){var u=f._fullLayout,v=k._scene,x=k.xaxis,C=k.yaxis;if(v)if(n(f,["ANGLE_instanced_arrays","OES_element_index_uint"])){var z=v.count,y=u._glcanvas.data()[0].regl;c(f,k,r);if(v.dirty){!0===v.error2d&&(v.error2d=h(y));!0===v.line2d&&(v.line2d=l(y));!0===v.scatter2d&&(v.scatter2d=m(y,{constPointSize:!0}));!0===v.fill2d&&(v.fill2d=l(y));if(!0===v.glText)for(v.glText=Array(z),
f=0;f<z;f++)v.glText[f]=new a(y);if(v.glText){if(z>v.glText.length)for(k=z-v.glText.length,f=0;f<k;f++)v.glText.push(new a(y));else z<v.glText.length&&v.glText.splice(z,v.glText.length-z).forEach(function(P){P.destroy()});for(f=0;f<z;f++)v.glText[f].update(v.textOptions[f])}v.line2d&&(v.line2d.update(v.lineOptions),v.lineOptions=v.lineOptions.map(function(P){if(P&&P.positions){for(var M=P.positions,N=0;N<M.length&&(isNaN(M[N])||isNaN(M[N+1]));)N+=2;for(var T=M.length-2;T>N&&(isNaN(M[T])||isNaN(M[T+
1]));)T-=2;P.positions=M.slice(N,T+2)}return P}),v.line2d.update(v.lineOptions));v.error2d&&(f=(v.errorXOptions||[]).concat(v.errorYOptions||[]),v.error2d.update(f));v.scatter2d&&v.scatter2d.update(v.markerOptions);v.fillOrder=g.repeat(null,z);v.fill2d&&(v.fillOptions=v.fillOptions.map(function(P,M){var N=r[M];if(P&&N&&N[0]&&N[0].trace){var T=N[0];N=T.trace;var Q=T.t,U=v.lineOptions[M],S;T=[];N._ownfill&&T.push(M);N._nexttrace&&T.push(M+1);T.length&&(v.fillOrder[M]=T);T=[];Q=U&&U.positions||Q.positions;
if("tozeroy"===N.fill){for(U=0;U<Q.length&&isNaN(Q[U+1]);)U+=2;for(S=Q.length-2;S>U&&isNaN(Q[S+1]);)S-=2;0!==Q[U+1]&&(T=[Q[U],0]);T=T.concat(Q.slice(U,S+2));0!==Q[S+1]&&(T=T.concat([Q[S],0]))}else if("tozerox"===N.fill){for(U=0;U<Q.length&&isNaN(Q[U]);)U+=2;for(S=Q.length-2;S>U&&isNaN(Q[S]);)S-=2;0!==Q[U]&&(T=[0,Q[U+1]]);T=T.concat(Q.slice(U,S+2));0!==Q[S]&&(T=T.concat([0,Q[S+1]]))}else if("toself"===N.fill||"tonext"===N.fill){T=[];for(U=S=0;U<Q.length;U+=2)if(isNaN(Q[U])||isNaN(Q[U+1]))T=T.concat(Q.slice(S,
U)),T.push(Q[S],Q[S+1]),S=U+2;T=T.concat(Q.slice(S));S&&T.push(Q[S],Q[S+1])}else if(U=N._nexttrace)if(S=v.lineOptions[M+1])if(S=S.positions,"tonexty"===N.fill){T=Q.slice();for(M=Math.floor(S.length/2);M--;){Q=S[2*M];var X=S[2*M+1];isNaN(Q)||isNaN(X)||T.push(Q,X)}P.fill=U.fillcolor}if(N._prevtrace&&"tonext"===N._prevtrace.fill){M=v.lineOptions[M-1].positions;Q=T.length/2;S=[Q];for(U=0;U<M.length;U+=2)(isNaN(M[U])||isNaN(M[U+1]))&&S.push(U/2+Q+1);T=T.concat(M);P.hole=S}P.fillmode=N.fill;P.opacity=N.opacity;
P.positions=T;return P}}),v.fill2d.update(v.fillOptions))}y=e(u.dragmode);k=-1<u.clickmode.indexOf("select");for(f=0;f<z;f++){var D=r[f][0];var A=D.trace;var t=D.t,B=t.index;D=A._length;var F=t.x,I=t.y;if(A.selectedpoints||y||k){y||(y=!0);if(A.selectedpoints){var J=v.selectBatch[B]=g.selIndices2selPoints(A),L={};for(A=0;A<J.length;A++)L[J[A]]=1;J=[];for(A=0;A<D;A++)L[A]||J.push(A);v.unselectBatch[B]=J}B=t.xpx=Array(D);t=t.ypx=Array(D);for(A=0;A<D;A++)B[A]=x.c2p(F[A]),t[A]=C.c2p(I[A])}else t.xpx=t.ypx=
null}if(y){v.select2d||(v.select2d=m(u._glcanvas.data()[1].regl));if(v.scatter2d){y=Array(z);for(f=0;f<z;f++)y[f]=v.selectBatch[f].length||v.unselectBatch[f].length?v.markerUnselectedOptions[f]:{};v.scatter2d.update(y)}v.select2d&&(v.select2d.update(v.markerOptions),v.select2d.update(v.markerSelectedOptions));v.glText&&r.forEach(function(P){p.hasText(((P||[])[0]||{}).trace||{})&&d(P)})}else v.scatter2d&&v.scatter2d.update(v.markerOptions);var H={viewport:q(u,x,C),range:[(x._rl||x.range)[0],(C._rl||
C.range)[0],(x._rl||x.range)[1],(C._rl||C.range)[1]]};u=g.repeat(H,v.count);v.fill2d&&v.fill2d.update(u);v.line2d&&v.line2d.update(u);v.error2d&&v.error2d.update(u.concat(u));v.scatter2d&&v.scatter2d.update(u);v.select2d&&v.select2d.update(u);v.glText&&v.glText.forEach(function(P){P.update(H)})}else v.init()}}},{"../../components/dragelement/helpers":661,"../../lib":778,"../../lib/prepare_regl":791,"../scatter/link_traces":1203,"../scatter/subtypes":1212,"./edit_style":1244,"gl-text":352,"regl-error2d":534,
"regl-line2d":535,"regl-scatter2d":537}],1250:[function(b,K,G){var q=b("../../lib");K.exports=function(m,l){var h=l._scene,a={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},g={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};l._scene||(h=l._scene={},h.init=function(){q.extendFlat(h,g,
a)},h.init(),h.update=function(e){var n=q.repeat(e,h.count);h.fill2d&&h.fill2d.update(n);h.scatter2d&&h.scatter2d.update(n);h.line2d&&h.line2d.update(n);h.error2d&&h.error2d.update(n.concat(n));h.select2d&&h.select2d.update(n);if(h.glText)for(n=0;n<h.count;n++)h.glText[n].update(e)},h.draw=function(){for(var e=h.count,n=h.fill2d,p=h.error2d,c=h.line2d,d=h.scatter2d,f=h.glText,k=h.select2d,r=h.selectBatch,u=h.unselectBatch,v=0;v<e;v++){n&&h.fillOrder[v]&&n.draw(h.fillOrder[v]);c&&h.lineOptions[v]&&
c.draw(v);p&&(h.errorXOptions[v]&&p.draw(v),h.errorYOptions[v]&&p.draw(v+e));if(d&&h.markerOptions[v])if(u[v].length){var x=q.repeat([],h.count);x[v]=u[v];d.draw(x)}else r[v].length||d.draw(v);f[v]&&h.textOptions[v]&&f[v].render()}k&&k.draw(r);h.dirty=!1},h.destroy=function(){h.fill2d&&h.fill2d.destroy&&h.fill2d.destroy();h.scatter2d&&h.scatter2d.destroy&&h.scatter2d.destroy();h.error2d&&h.error2d.destroy&&h.error2d.destroy();h.line2d&&h.line2d.destroy&&h.line2d.destroy();h.select2d&&h.select2d.destroy&&
h.select2d.destroy();h.glText&&h.glText.forEach(function(e){e.destroy&&e.destroy()});h.lineOptions=null;h.fillOptions=null;h.markerOptions=null;h.markerSelectedOptions=null;h.markerUnselectedOptions=null;h.errorXOptions=null;h.errorYOptions=null;h.textOptions=null;h.textSelectedOptions=null;h.textUnselectedOptions=null;h.selectBatch=null;h.unselectBatch=null;l._scene=null});h.dirty||q.extendFlat(h,a);return h}},{"../../lib":778}],1251:[function(b,K,G){var q=b("../scatter/subtypes"),m=b("./edit_style").styleTextSelection;
K.exports=function(l,h){var a=l.cd,g=[],e=a[0].trace,n=a[0].t,p=e._length,c=n.x,d=n.y,f=n._scene,k=n.index;if(!f)return g;var r=q.hasText(e),u=q.hasMarkers(e);if(!0!==e.visible||!u&&!r)return g;e=[];var v=[];if(!1!==h&&!h.degenerate)for(var x=0;x<p;x++)h.contains([n.xpx[x],n.ypx[x]],!1,x,l)?(e.push(x),g.push({pointNumber:x,x:c[x],y:d[x]})):v.push(x);u&&((l=f.scatter2d,e.length||v.length)?f.selectBatch[k].length||f.unselectBatch[k].length||(h=Array(f.count),h[k]=f.markerUnselectedOptions[k],l.update.apply(l,
h)):(h=Array(f.count),h[k]=f.markerOptions[k],l.update.apply(l,h)));f.selectBatch[k]=e;f.unselectBatch[k]=v;r&&m(a);return g}},{"../scatter/subtypes":1212,"./edit_style":1244}],1252:[function(b,K,G){G=b("../../plots/template_attributes").hovertemplateAttrs;var q=b("../../plots/template_attributes").texttemplateAttrs,m=b("../scattergeo/attributes"),l=b("../scatter/attributes"),h=b("../../plots/mapbox/layout_attributes"),a=b("../../plots/attributes"),g=b("../../components/colorscale/attributes"),e=
b("../../lib/extend").extendFlat;b=b("../../plot_api/edit_types").overrideAll;var n=m.line,p=m.marker;K.exports=b({lon:m.lon,lat:m.lat,mode:e({},l.mode,{dflt:"markers"}),text:e({},l.text,{}),texttemplate:q({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:e({},l.hovertext,{}),line:{color:n.color,width:n.width},connectgaps:l.connectgaps,marker:e({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:p.opacity,
size:p.size,sizeref:p.sizeref,sizemin:p.sizemin,sizemode:p.sizemode},g("marker")),fill:m.fill,fillcolor:l.fillcolor,textfont:h.layers.symbol.textfont,textposition:h.layers.symbol.textposition,below:{valType:"string"},selected:{marker:l.selected.marker},unselected:{marker:l.unselected.marker},hoverinfo:e({},a.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:G()},"calc","nested")},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plot_api/edit_types":810,"../../plots/attributes":824,
"../../plots/mapbox/layout_attributes":887,"../../plots/template_attributes":906,"../scatter/attributes":1187,"../scattergeo/attributes":1229}],1253:[function(b,K,G){function q(){return{geojson:n.makeBlank(),layout:{visibility:"none"},paint:{}}}function m(x){var C=x[0].trace,z=C.marker,y=C.selectedpoints,D=g.isArrayOrTypedArray(z.color),A=g.isArrayOrTypedArray(z.size),t=g.isArrayOrTypedArray(z.opacity),B,F;D&&(F=p.hasColorscale(C,"marker")?p.makeColorScaleFuncFromTrace(z):g.identity);var I;A&&(I=
d(C));var J;t&&(J=function(T){T=a(T)?+g.constrain(T,0,1):0;return C.opacity*T});var L=[];for(B=0;B<x.length;B++){var H=x[B],P=H.lonlat;if(P[0]!==e){var M={};F&&(M.mcc=H.mcc=F(H.mc));I&&(M.mrc=H.mrc=I(H.ms));J&&(M.mo=J(H.mo));y&&(M.selected=H.selected||0);L.push({type:"Feature",geometry:{type:"Point",coordinates:P},properties:M})}}if(y){var N=c.makeSelectedPointStyleFns(C);for(B=0;B<L.length;B++)x=L[B].properties,N.selectedOpacityFn&&(x.mo=C.opacity*N.selectedOpacityFn(x)),N.selectedColorFn&&(x.mcc=
N.selectedColorFn(x)),N.selectedSizeFn&&(x.mrc=N.selectedSizeFn(x))}return{geojson:{type:"FeatureCollection",features:L},mcc:D||N&&N.selectedColorFn?{type:"identity",property:"mcc"}:z.color,mrc:A||N&&N.selectedSizeFn?{type:"identity",property:"mrc"}:z.size/2,mo:t||N&&N.selectedOpacityFn?{type:"identity",property:"mo"}:C.opacity*z.opacity}}function l(x,C){return g.isArrayOrTypedArray(x)?C?function(z){return a(x[z])?+x[z]:0}:function(z){return x[z]}:x?function(){return x}:h}function h(){return""}var a=
b("fast-isnumeric"),g=b("../../lib"),e=b("../../constants/numerical").BADNUM,n=b("../../lib/geojson_utils"),p=b("../../components/colorscale"),c=b("../../components/drawing"),d=b("../scatter/make_bubble_size_func"),f=b("../scatter/subtypes"),k=b("../../plots/mapbox/convert_text_opts"),r=b("../../components/fx/helpers").appendArrayPointValue,u=b("../../lib/svg_text_utils").NEWLINES,v=b("../../lib/svg_text_utils").BR_TAG_ALL;K.exports=function(x,C){var z=C[0].trace,y=!0===z.visible&&0!==z._length,D=
"none"!==z.fill,A=f.hasLines(z),t=f.hasMarkers(z),B=f.hasText(z),F=t&&"circle"===z.marker.symbol,I=t&&"circle"!==z.marker.symbol,J=q(),L=q(),H=q();t=q();var P={fill:J,line:L,circle:H,symbol:t};if(!y)return P;if(D||A)var M=n.calcTraceToLineCoords(C);D&&(J.geojson=n.makePolygon(M),J.layout.visibility="visible",g.extendFlat(J.paint,{"fill-color":z.fillcolor}));A&&(L.geojson=n.makeLine(M),L.layout.visibility="visible",g.extendFlat(L.paint,{"line-width":z.line.width,"line-color":z.line.color,"line-opacity":z.opacity}));
F&&(y=m(C),H.geojson=y.geojson,H.layout.visibility="visible",g.extendFlat(H.paint,{"circle-color":y.mcc,"circle-radius":y.mrc,"circle-opacity":y.mo}));if(I||B){x=x._fullLayout;y=C[0].trace;A=y.marker||{};D=A.symbol;A=A.angle;D="circle"!==D?l(D):h;A="auto"!==A?l(A,!0):h;F=f.hasText(y)?l(y.text):h;H=[];for(M=0;M<C.length;M++)if(J=C[M],J.lonlat[0]!==e){if(L=y.texttemplate){L=Array.isArray(L)?L[M]||"":L;var N=y._module.formatLabels(J,y,x),T={};r(T,y,J.i);L=g.texttemplateString(L,N,x._d3locale,T,J,y._meta||
{})}else L=F(M);L&&(L=L.replace(u,"").replace(v,"\n"));H.push({type:"Feature",geometry:{type:"Point",coordinates:J.lonlat},properties:{symbol:D(M),angle:A(M),text:L}})}t.geojson={type:"FeatureCollection",features:H};g.extendFlat(t.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"});I&&(g.extendFlat(t.layout,{"icon-size":z.marker.size/10}),"angle"in z.marker&&"auto"!==z.marker.angle&&g.extendFlat(t.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),
t.layout["icon-allow-overlap"]=z.marker.allowoverlap,g.extendFlat(t.paint,{"icon-opacity":z.opacity*z.marker.opacity,"icon-color":z.marker.color}));B&&(C=k(z.textposition,(z.marker||{}).size),g.extendFlat(t.layout,{"text-size":z.textfont.size,"text-anchor":C.anchor,"text-offset":C.offset}),g.extendFlat(t.paint,{"text-color":z.textfont.color,"text-opacity":z.opacity}))}return P}},{"../../components/colorscale":655,"../../components/drawing":665,"../../components/fx/helpers":679,"../../constants/numerical":753,
"../../lib":778,"../../lib/geojson_utils":772,"../../lib/svg_text_utils":803,"../../plots/mapbox/convert_text_opts":884,"../scatter/make_bubble_size_func":1204,"../scatter/subtypes":1212,"fast-isnumeric":241}],1254:[function(b,K,G){function q(p,c,d){p=d("lon")||[];d=d("lat")||[];d=Math.min(p.length,d.length);return c._length=d}var m=b("../../lib"),l=b("../scatter/subtypes"),h=b("../scatter/marker_defaults"),a=b("../scatter/line_defaults"),g=b("../scatter/text_defaults"),e=b("../scatter/fillcolor_defaults"),
n=b("./attributes");K.exports=function(p,c,d,f){function k(u,v){return m.coerce(p,c,n,u,v)}if(q(p,c,k)){k("text");k("texttemplate");k("hovertext");k("hovertemplate");k("mode");k("below");l.hasLines(c)&&(a(p,c,d,f,k,{noDash:!0}),k("connectgaps"));if(l.hasMarkers(c)){h(p,c,d,f,k,{noLine:!0});k("marker.allowoverlap");k("marker.angle");var r=c.marker;"circle"!==r.symbol&&(m.isArrayOrTypedArray(r.size)&&(r.size=r.size[0]),m.isArrayOrTypedArray(r.color)&&(r.color=r.color[0]))}l.hasText(c)&&g(p,c,f,k,{noSelect:!0});
k("fill");"none"!==c.fill&&e(p,c,d,k);m.coerceSelectionMarkerOpacity(c,k)}else c.visible=!1}},{"../../lib":778,"../scatter/fillcolor_defaults":1195,"../scatter/line_defaults":1200,"../scatter/marker_defaults":1206,"../scatter/subtypes":1212,"../scatter/text_defaults":1213,"./attributes":1252}],1255:[function(b,K,G){K.exports=function(q,m){q.lon=m.lon;q.lat=m.lat;return q}},{}],1256:[function(b,K,G){var q=b("../../plots/cartesian/axes");K.exports=function(m,l,h){var a={};l=h[l.subplot]._subplot.mockAxis;
m=m.lonlat;a.lonLabel=q.tickText(l,l.c2l(m[0]),!0).text;a.latLabel=q.tickText(l,l.c2l(m[1]),!0).text;return a}},{"../../plots/cartesian/axes":828}],1257:[function(b,K,G){function q(e,n,p){if(!e.hovertemplate){var c=(n.hi||e.hoverinfo).split("+"),d=-1!==c.indexOf("all"),f=-1!==c.indexOf("lon"),k=-1!==c.indexOf("lat"),r=n.lonlat,u=[];d||f&&k?u.push("("+(r[0]+"\u00b0, ")+(r[1]+"\u00b0)")):f?u.push(p.lon+(r[0]+"\u00b0")):k&&u.push(p.lat+(r[1]+"\u00b0"));(d||-1!==c.indexOf("text"))&&a(n,e,u);return u.join("<br>")}}
var m=b("../../components/fx"),l=b("../../lib"),h=b("../scatter/get_trace_color"),a=l.fillText,g=b("../../constants/numerical").BADNUM;K.exports=function(e,n,p){var c=e.cd,d=c[0].trace,f=e.xa,k=e.ya,r=e.subplot,u=360*(0<=n?Math.floor((n+180)/360):Math.ceil((n-180)/360)),v=n-u;m.getClosest(c,function(z){var y=z.lonlat;if(y[0]===g)return Infinity;var D=l.modHalf(y[0],360);y=y[1];var A=r.project([D,y]);y=A.x-f.c2p([v,y]);D=A.y-k.c2p([D,p]);z=Math.max(3,z.mrc||0);return Math.max(Math.sqrt(y*y+D*D)-z,
1-3/z)},e);if(!1!==e.index){n=c[e.index];var x=n.lonlat;x=[l.modHalf(x[0],360)+u,x[1]];u=f.c2p(x);x=k.c2p(x);var C=n.mrc||1;e.x0=u-C;e.x1=u+C;e.y0=x-C;e.y1=x+C;u={};u[d.subplot]={_subplot:r};u=d._module.formatLabels(n,d,u);e.lonLabel=u.lonLabel;e.latLabel=u.latLabel;e.color=h(d,n);e.extraText=q(d,n,c[0].t.labels);e.hovertemplate=d.hovertemplate;return[e]}}},{"../../components/fx":683,"../../constants/numerical":753,"../../lib":778,"../scatter/get_trace_color":1197}],1258:[function(b,K,G){K.exports=
{attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../scatter/marker_colorbar"),formatLabels:b("./format_labels"),calc:b("../scattergeo/calc"),plot:b("./plot"),hoverPoints:b("./hover"),eventData:b("./event_data"),selectPoints:b("./select"),styleOnSelect:function(q,m){m&&m[0].trace._glTrace.update(m)},moduleType:"trace",name:"scattermapbox",basePlotModule:b("../../plots/mapbox"),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/mapbox":885,
"../scatter/marker_colorbar":1205,"../scattergeo/calc":1230,"./attributes":1252,"./defaults":1254,"./event_data":1255,"./format_labels":1256,"./hover":1257,"./plot":1259,"./select":1260}],1259:[function(b,K,G){function q(a,g){this.type="scattermapbox";this.subplot=a;this.uid=g;this.sourceIds={fill:"source-"+g+"-fill",line:"source-"+g+"-line",circle:"source-"+g+"-circle",symbol:"source-"+g+"-symbol"};this.layerIds={fill:l+g+"-fill",line:l+g+"-line",circle:l+g+"-circle",symbol:l+g+"-symbol"};this.below=
null}var m=b("./convert"),l=b("../../plots/mapbox/constants").traceLayerPrefix,h=["fill","line","circle","symbol"];b=q.prototype;b.addSource=function(a,g){this.subplot.map.addSource(this.sourceIds[a],{type:"geojson",data:g.geojson})};b.setSourceData=function(a,g){this.subplot.map.getSource(this.sourceIds[a]).setData(g.geojson)};b.addLayer=function(a,g,e){this.subplot.addLayer({type:a,id:this.layerIds[a],source:this.sourceIds[a],layout:g.layout,paint:g.paint},e)};b.update=function(a){var g=this.subplot,
e=g.map,n=m(g.gd,a),p=g.belowLookup["trace-"+this.uid],c;if(p!==this.below){for(c=h.length-1;0<=c;c--){var d=h[c];e.removeLayer(this.layerIds[d])}for(c=0;c<h.length;c++)d=h[c],e=n[d],this.addLayer(d,e,p);this.below=p}for(c=0;c<h.length;c++)d=h[c],e=n[d],g.setOptions(this.layerIds[d],"setLayoutProperty",e.layout),"visible"===e.layout.visibility&&(this.setSourceData(d,e),g.setOptions(this.layerIds[d],"setPaintProperty",e.paint));a[0].trace._glTrace=this};b.dispose=function(){for(var a=this.subplot.map,
g=h.length-1;0<=g;g--){var e=h[g];a.removeLayer(this.layerIds[e]);a.removeSource(this.sourceIds[e])}};K.exports=function(a,g){var e=g[0].trace,n=new q(a,e.uid),p=m(a.gd,g);a=n.below=a.belowLookup["trace-"+e.uid];for(e=0;e<h.length;e++){var c=h[e],d=p[c];n.addSource(c,d);n.addLayer(c,d,a)}return g[0].trace._glTrace=n}},{"../../plots/mapbox/constants":883,"./convert":1253}],1260:[function(b,K,G){var q=b("../../lib"),m=b("../scatter/subtypes"),l=b("../../constants/numerical").BADNUM;K.exports=function(h,
a){var g=h.cd,e=h.xaxis,n=h.yaxis,p=[],c;if(!m.hasMarkers(g[0].trace))return[];if(!1===a)for(c=0;c<g.length;c++)g[c].selected=0;else for(c=0;c<g.length;c++){var d=g[c],f=d.lonlat;if(f[0]!==l){var k=[q.modHalf(f[0],360),f[1]];k=[e.c2p(k),n.c2p(k)];a.contains(k,null,c,h)?(p.push({pointNumber:c,lon:f[0],lat:f[1]}),d.selected=1):d.selected=0}}return p}},{"../../constants/numerical":753,"../../lib":778,"../scatter/subtypes":1212}],1261:[function(b,K,G){G=b("../../plots/template_attributes").hovertemplateAttrs;
var q=b("../../plots/template_attributes").texttemplateAttrs,m=b("../../lib/extend").extendFlat,l=b("../scatter/attributes");b=b("../../plots/attributes");var h=l.line;K.exports={mode:l.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},
thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:l.text,texttemplate:q({editType:"plot"},{keys:["r","theta","text"]}),hovertext:l.hovertext,line:{color:h.color,width:h.width,dash:h.dash,shape:m({},h.shape,{values:["linear","spline"]}),smoothing:h.smoothing,editType:"calc"},connectgaps:l.connectgaps,marker:l.marker,cliponaxis:m({},l.cliponaxis,{dflt:!1}),textposition:l.textposition,textfont:l.textfont,fill:m({},l.fill,{values:["none",
"toself","tonext"],dflt:"none"}),fillcolor:l.fillcolor,hoverinfo:m({},b.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:l.hoveron,hovertemplate:G(),selected:l.selected,unselected:l.unselected}},{"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,"../scatter/attributes":1187}],1262:[function(b,K,G){var q=b("fast-isnumeric"),m=b("../../constants/numerical").BADNUM,l=b("../../plots/cartesian/axes"),h=b("../scatter/colorscale_calc"),a=b("../scatter/arrays_to_calcdata"),
g=b("../scatter/calc_selection"),e=b("../scatter/calc").calcMarkerSize;K.exports=function(n,p){var c=n._fullLayout,d=p.subplot,f=c[d].radialaxis;d=c[d].angularaxis;c=f.makeCalcdata(p,"r");var k=d.makeCalcdata(p,"theta"),r=p._length;d=Array(r);for(var u=0;u<r;u++){var v=c[u],x=k[u],C=d[u]={};q(v)&&q(x)?(C.r=v,C.theta=x):C.r=m}k=e(p,r);p._extremes.x=l.findExtremes(f,c,{ppad:k});h(n,p);a(d,p);g(d,p);return d}},{"../../constants/numerical":753,"../../plots/cartesian/axes":828,"../scatter/arrays_to_calcdata":1186,
"../scatter/calc":1188,"../scatter/calc_selection":1189,"../scatter/colorscale_calc":1190,"fast-isnumeric":241}],1263:[function(b,K,G){function q(d,f,k,r){d=r("r");k=r("theta");if(d)k?d=Math.min(d.length,k.length):(d=d.length,r("theta0"),r("dtheta"));else{if(!k)return 0;d=f.theta.length;r("r0");r("dr")}return f._length=d}var m=b("../../lib"),l=b("../scatter/subtypes"),h=b("../scatter/marker_defaults"),a=b("../scatter/line_defaults"),g=b("../scatter/line_shape_defaults"),e=b("../scatter/text_defaults"),
n=b("../scatter/fillcolor_defaults"),p=b("../scatter/constants").PTS_LINESONLY,c=b("./attributes");K.exports={handleRThetaDefaults:q,supplyDefaults:function(d,f,k,r){function u(x,C){return m.coerce(d,f,c,x,C)}var v=q(d,f,r,u);if(v){u("thetaunit");u("mode",v<p?"lines+markers":"lines");u("text");u("hovertext");"fills"!==f.hoveron&&u("hovertemplate");l.hasLines(f)&&(a(d,f,k,r,u),g(d,f,u),u("connectgaps"));l.hasMarkers(f)&&h(d,f,k,r,u,{gradient:!0});l.hasText(f)&&(u("texttemplate"),e(d,f,r,u));r=[];if(l.hasMarkers(f)||
l.hasText(f))u("cliponaxis"),u("marker.maxdisplayed"),r.push("points");u("fill");"none"!==f.fill&&(n(d,f,k,u),l.hasLines(f)||g(d,f,u));"tonext"!==f.fill&&"toself"!==f.fill||r.push("fills");u("hoveron",r.join("+")||"points");m.coerceSelectionMarkerOpacity(f,u)}else f.visible=!1}}},{"../../lib":778,"../scatter/constants":1191,"../scatter/fillcolor_defaults":1195,"../scatter/line_defaults":1200,"../scatter/line_shape_defaults":1202,"../scatter/marker_defaults":1206,"../scatter/subtypes":1212,"../scatter/text_defaults":1213,
"./attributes":1261}],1264:[function(b,K,G){var q=b("../../lib"),m=b("../../plots/cartesian/axes");K.exports=function(l,h,a){var g={},e=a[h.subplot]._subplot;e?(h=e.radialAxis,e=e.angularAxis):(e=a[h.subplot],h=e.radialaxis,e=e.angularaxis);a=h.c2l(l.r);g.rLabel=m.tickText(h,a,!0).text;l="degrees"===e.thetaunit?q.rad2deg(l.theta):l.theta;g.thetaLabel=m.tickText(e,l,!0).text;return g}},{"../../lib":778,"../../plots/cartesian/axes":828}],1265:[function(b,K,G){function q(l,h,a,g){var e=a.radialAxis,
n=a.angularAxis;e._hovertitle="r";n._hovertitle="\u03b8";var p={};p[h.subplot]={_subplot:a};a=h._module.formatLabels(l,h,p);g.rLabel=a.rLabel;g.thetaLabel=a.thetaLabel;a=l.hi||h.hoverinfo;l=[];h.hovertemplate||(h=a.split("+"),-1!==h.indexOf("all")&&(h=["r","theta","text"]),-1!==h.indexOf("r")&&l.push(e._hovertitle+": "+g.rLabel),-1!==h.indexOf("theta")&&l.push(n._hovertitle+": "+g.thetaLabel),-1!==h.indexOf("text")&&g.text&&(l.push(g.text),delete g.text),g.extraText=l.join("<br>"))}var m=b("../scatter/hover");
K.exports={hoverPoints:function(l,h,a,g){if((h=m(l,h,a,g))&&!1!==h[0].index){a=h[0];if(void 0===a.index)return h;l=l.subplot;g=a.cd[a.index];var e=a.trace;if(l.isPtInside(g))return a.xLabelVal=void 0,a.yLabelVal=void 0,q(g,e,l,a),a.hovertemplate=e.hovertemplate,h}},makeHoverPointText:q}},{"../scatter/hover":1198}],1266:[function(b,K,G){K.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:b("../../plots/polar"),categories:["polar","symbols","showLegend","scatter-like"],attributes:b("./attributes"),
supplyDefaults:b("./defaults").supplyDefaults,colorbar:b("../scatter/marker_colorbar"),formatLabels:b("./format_labels"),calc:b("./calc"),plot:b("./plot"),style:b("../scatter/style").style,styleOnSelect:b("../scatter/style").styleOnSelect,hoverPoints:b("./hover").hoverPoints,selectPoints:b("../scatter/select"),meta:{}}},{"../../plots/polar":894,"../scatter/marker_colorbar":1205,"../scatter/select":1209,"../scatter/style":1211,"./attributes":1261,"./calc":1262,"./defaults":1263,"./format_labels":1264,
"./hover":1265,"./plot":1267}],1267:[function(b,K,G){var q=b("../scatter/plot"),m=b("../../constants/numerical").BADNUM;K.exports=function(l,h,a){var g=h.layers.frontplot.select("g.scatterlayer"),e={xaxis:h.xaxis,yaxis:h.yaxis,plot:h.framework,layerClipId:h._hasClipOnAxisFalse?h.clipIds.forTraces:null},n=h.radialAxis;h=h.angularAxis;for(var p=0;p<a.length;p++)for(var c=a[p],d=0;d<c.length;d++){var f=c[d],k=f.r;if(k===m)f.x=f.y=m;else{k=n.c2g(k);var r=h.c2g(f.theta);f.x=k*Math.cos(r);f.y=k*Math.sin(r)}}q(l,
e,a,g)}},{"../../constants/numerical":753,"../scatter/plot":1208}],1268:[function(b,K,G){G=b("../scatterpolar/attributes");var q=b("../scattergl/attributes");b=b("../../plots/template_attributes").texttemplateAttrs;K.exports={mode:G.mode,r:G.r,theta:G.theta,r0:G.r0,dr:G.dr,theta0:G.theta0,dtheta:G.dtheta,thetaunit:G.thetaunit,text:G.text,texttemplate:b({editType:"plot"},{keys:["r","theta","text"]}),hovertext:G.hovertext,hovertemplate:G.hovertemplate,line:q.line,connectgaps:q.connectgaps,marker:q.marker,
fill:q.fill,fillcolor:q.fillcolor,textposition:q.textposition,textfont:q.textfont,hoverinfo:G.hoverinfo,selected:G.selected,unselected:G.unselected}},{"../../plots/template_attributes":906,"../scattergl/attributes":1239,"../scatterpolar/attributes":1261}],1269:[function(b,K,G){var q=b("../scatter/colorscale_calc"),m=b("../scatter/calc").calcMarkerSize,l=b("../scattergl/convert"),h=b("../../plots/cartesian/axes"),a=b("../scattergl/constants").TOO_MANY_POINTS;K.exports=function(g,e){var n=g._fullLayout,
p=e.subplot,c=n[p].radialaxis;p=n[p].angularaxis;n=e._r=c.makeCalcdata(e,"r");var d=e._theta=p.makeCalcdata(e,"theta");p=e._length;var f={};p<n.length&&(n=n.slice(0,p));p<d.length&&(d=d.slice(0,p));f.r=n;f.theta=d;q(g,e);g=f.opts=l.style(g,e);var k;p<a?k=m(e,p):g.marker&&(k=2*(g.marker.sizeAvg||Math.max(g.marker.size,3)));e._extremes.x=h.findExtremes(c,n,{ppad:k});return[{x:!1,y:!1,t:f,trace:e}]}},{"../../plots/cartesian/axes":828,"../scatter/calc":1188,"../scatter/colorscale_calc":1190,"../scattergl/constants":1241,
"../scattergl/convert":1242}],1270:[function(b,K,G){var q=b("../../lib"),m=b("../scatter/subtypes"),l=b("../scatterpolar/defaults").handleRThetaDefaults,h=b("../scatter/marker_defaults"),a=b("../scatter/line_defaults"),g=b("../scatter/text_defaults"),e=b("../scatter/fillcolor_defaults"),n=b("../scatter/constants").PTS_LINESONLY,p=b("./attributes");K.exports=function(c,d,f,k){function r(v,x){return q.coerce(c,d,p,v,x)}var u=l(c,d,k,r);u?(r("thetaunit"),r("mode",u<n?"lines+markers":"lines"),r("text"),
r("hovertext"),"fills"!==d.hoveron&&r("hovertemplate"),m.hasLines(d)&&(a(c,d,f,k,r),r("connectgaps")),m.hasMarkers(d)&&h(c,d,f,k,r),m.hasText(d)&&(r("texttemplate"),g(c,d,k,r)),r("fill"),"none"!==d.fill&&e(c,d,f,r),q.coerceSelectionMarkerOpacity(d,r)):d.visible=!1}},{"../../lib":778,"../scatter/constants":1191,"../scatter/fillcolor_defaults":1195,"../scatter/line_defaults":1200,"../scatter/marker_defaults":1206,"../scatter/subtypes":1212,"../scatter/text_defaults":1213,"../scatterpolar/defaults":1263,
"./attributes":1268}],1271:[function(b,K,G){var q=b("../scatterpolar/format_labels");K.exports=function(m,l,h){var a=m.i;"r"in m||(m.r=l._r[a]);"theta"in m||(m.theta=l._theta[a]);return q(m,l,h)}},{"../scatterpolar/format_labels":1264}],1272:[function(b,K,G){var q=b("../scattergl/hover"),m=b("../scatterpolar/hover").makeHoverPointText;K.exports={hoverPoints:function(l,h,a,g){var e=l.cd[0].t,n=e.r;e=e.theta;if((h=q.hoverPoints(l,h,a,g))&&!1!==h[0].index){a=h[0];if(void 0===a.index)return h;l=l.subplot;
g=a.cd[a.index];var p=a.trace;g.r=n[a.index];g.theta=e[a.index];if(l.isPtInside(g))return a.xLabelVal=void 0,a.yLabelVal=void 0,m(g,p,l,a),h}}}},{"../scattergl/hover":1247,"../scatterpolar/hover":1265}],1273:[function(b,K,G){K.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:b("../../plots/polar"),categories:"gl regl polar symbols showLegend scatter-like".split(" "),attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../scatter/marker_colorbar"),formatLabels:b("./format_labels"),
calc:b("./calc"),plot:b("./plot"),hoverPoints:b("./hover").hoverPoints,selectPoints:b("../scattergl/select"),meta:{}}},{"../../plots/polar":894,"../scatter/marker_colorbar":1205,"../scattergl/select":1251,"./attributes":1268,"./calc":1269,"./defaults":1270,"./format_labels":1271,"./hover":1272,"./plot":1274}],1274:[function(b,K,G){var q=b("@plotly/point-cluster"),m=b("fast-isnumeric"),l=b("../scattergl/plot"),h=b("../scattergl/scene_update"),a=b("../scattergl/convert"),g=b("../../lib"),e=b("../scattergl/constants").TOO_MANY_POINTS;
K.exports=function(n,p,c){if(c.length){var d=p.radialAxis,f=p.angularAxis,k=h(n,p);c.forEach(function(r){if(r&&r[0]&&r[0].trace){var u=r[0];r=u.trace;u=u.t;var v=r._length,x=u.r,C=u.theta,z=u.opts,y,D=x.slice(),A=C.slice();for(y=0;y<x.length;y++)p.isPtInside({r:x[y],theta:C[y]})||(D[y]=NaN,A[y]=NaN);var t=Array(2*v),B=Array(v),F=Array(v);for(y=0;y<v;y++){var I=D[y];if(m(I)){var J=d.c2g(I);var L=f.c2g(A[y],r.thetaunit);I=J*Math.cos(L);J*=Math.sin(L)}else I=J=NaN;B[y]=t[2*y]=I;F[y]=t[2*y+1]=J}u.tree=
q(t);z.marker&&v>=e&&(z.marker.cluster=u.tree);z.marker&&(z.markerSel.positions=z.markerUnsel.positions=z.marker.positions=t);z.line&&1<t.length&&g.extendFlat(z.line,a.linePositions(n,r,t));z.text&&(g.extendFlat(z.text,{positions:t},a.textPosition(n,r,z.text,z.marker)),g.extendFlat(z.textSel,{positions:t},a.textPosition(n,r,z.text,z.markerSel)),g.extendFlat(z.textUnsel,{positions:t},a.textPosition(n,r,z.text,z.markerUnsel)));z.fill&&!k.fill2d&&(k.fill2d=!0);z.marker&&!k.scatter2d&&(k.scatter2d=!0);
z.line&&!k.line2d&&(k.line2d=!0);z.text&&!k.glText&&(k.glText=!0);k.lineOptions.push(z.line);k.fillOptions.push(z.fill);k.markerOptions.push(z.marker);k.markerSelectedOptions.push(z.markerSel);k.markerUnselectedOptions.push(z.markerUnsel);k.textOptions.push(z.text);k.textSelectedOptions.push(z.textSel);k.textUnselectedOptions.push(z.textUnsel);k.selectBatch.push([]);k.unselectBatch.push([]);u.x=B;u.y=F;u.rawx=B;u.rawy=F;u.r=x;u.theta=C;u.positions=t;u._scene=k;u.index=k.count;k.count++}});return l(n,
p,c)}}},{"../../lib":778,"../scattergl/constants":1241,"../scattergl/convert":1242,"../scattergl/plot":1249,"../scattergl/scene_update":1250,"@plotly/point-cluster":57,"fast-isnumeric":241}],1275:[function(b,K,G){G=b("../../plots/template_attributes").hovertemplateAttrs;var q=b("../../plots/template_attributes").texttemplateAttrs,m=b("../scatter/attributes"),l=b("../../plots/attributes"),h=b("../../components/colorscale/attributes"),a=b("../../components/drawing/attributes").dash;b=b("../../lib/extend").extendFlat;
var g=m.marker,e=m.line,n=g.line;K.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:b({},m.mode,{dflt:"markers"}),text:b({},m.text,{}),texttemplate:q({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:b({},m.hovertext,{}),line:{color:e.color,width:e.width,dash:a,shape:b({},e.shape,{values:["linear","spline"]}),smoothing:e.smoothing,editType:"calc"},connectgaps:m.connectgaps,
cliponaxis:m.cliponaxis,fill:b({},m.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:m.fillcolor,marker:b({symbol:g.symbol,opacity:g.opacity,maxdisplayed:g.maxdisplayed,size:g.size,sizeref:g.sizeref,sizemin:g.sizemin,sizemode:g.sizemode,line:b({width:n.width,editType:"calc"},h("marker.line")),gradient:g.gradient,editType:"calc"},h("marker")),textfont:m.textfont,textposition:m.textposition,selected:m.selected,unselected:m.unselected,hoverinfo:b({},l.hoverinfo,{flags:["a","b","c","text",
"name"]}),hoveron:m.hoveron,hovertemplate:G()}},{"../../components/colorscale/attributes":650,"../../components/drawing/attributes":664,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,"../scatter/attributes":1187}],1276:[function(b,K,G){var q=b("fast-isnumeric"),m=b("../scatter/colorscale_calc"),l=b("../scatter/arrays_to_calcdata"),h=b("../scatter/calc_selection"),a=b("../scatter/calc").calcMarkerSize,g=["a","b","c"],e={a:["b","c"],b:["a","c"],c:["a","b"]};
K.exports=function(n,p){var c=n._fullLayout[p.subplot].sum,d=p.sum||c,f={a:p.a,b:p.b,c:p.c},k,r;for(k=0;k<g.length;k++){var u=g[k];if(!f[u]){var v=f[e[u][0]];var x=f[e[u][1]];var C=Array(v.length);for(r=0;r<v.length;r++)C[r]=d-v[r]-x[r];f[u]=C}}d=p._length;r=Array(d);for(k=0;k<d;k++)if(u=f.a[k],C=f.b[k],v=f.c[k],q(u)&&q(C)&&q(v)){u=+u;C=+C;v=+v;x=c/(u+C+v);1!==x&&(u*=x,C*=x,v*=x);var z=u;x=v-C;r[k]={x:x,y:z,a:u,b:C,c:v}}else r[k]={x:!1,y:!1};a(p,d);m(n,p);l(r,p);h(r,p);return r}},{"../scatter/arrays_to_calcdata":1186,
"../scatter/calc":1188,"../scatter/calc_selection":1189,"../scatter/colorscale_calc":1190,"fast-isnumeric":241}],1277:[function(b,K,G){var q=b("../../lib"),m=b("../scatter/constants"),l=b("../scatter/subtypes"),h=b("../scatter/marker_defaults"),a=b("../scatter/line_defaults"),g=b("../scatter/line_shape_defaults"),e=b("../scatter/text_defaults"),n=b("../scatter/fillcolor_defaults"),p=b("./attributes");K.exports=function(c,d,f,k){function r(z,y){return q.coerce(c,d,p,z,y)}var u=r("a"),v=r("b"),x=r("c");
if(u){var C=u.length;v?(C=Math.min(C,v.length),x&&(C=Math.min(C,x.length))):C=x?Math.min(C,x.length):0}else v&&x&&(C=Math.min(v.length,x.length));if(C){d._length=C;r("sum");r("text");r("hovertext");"fills"!==d.hoveron&&r("hovertemplate");r("mode",C<m.PTS_LINESONLY?"lines+markers":"lines");l.hasLines(d)&&(a(c,d,f,k,r),g(c,d,r),r("connectgaps"));l.hasMarkers(d)&&h(c,d,f,k,r,{gradient:!0});l.hasText(d)&&(r("texttemplate"),e(c,d,k,r));k=[];if(l.hasMarkers(d)||l.hasText(d))r("cliponaxis"),r("marker.maxdisplayed"),
k.push("points");r("fill");"none"!==d.fill&&(n(c,d,f,r),l.hasLines(d)||g(c,d,r));"tonext"!==d.fill&&"toself"!==d.fill||k.push("fills");r("hoveron",k.join("+")||"points");q.coerceSelectionMarkerOpacity(d,r)}else d.visible=!1}},{"../../lib":778,"../scatter/constants":1191,"../scatter/fillcolor_defaults":1195,"../scatter/line_defaults":1200,"../scatter/line_shape_defaults":1202,"../scatter/marker_defaults":1206,"../scatter/subtypes":1212,"../scatter/text_defaults":1213,"./attributes":1275}],1278:[function(b,
K,G){K.exports=function(q,m,l,h,a){m.xa&&(q.xaxis=m.xa);m.ya&&(q.yaxis=m.ya);h[a]?(m=h[a],q.a=m.a,q.b=m.b,q.c=m.c):(q.a=m.a,q.b=m.b,q.c=m.c);return q}},{}],1279:[function(b,K,G){var q=b("../../plots/cartesian/axes");K.exports=function(m,l,h){var a={};l=h[l.subplot]._subplot;a.aLabel=q.tickText(l.aaxis,m.a,!0).text;a.bLabel=q.tickText(l.baxis,m.b,!0).text;a.cLabel=q.tickText(l.caxis,m.c,!0).text;return a}},{"../../plots/cartesian/axes":828}],1280:[function(b,K,G){var q=b("../scatter/hover");K.exports=
function(m,l,h,a){if((l=q(m,l,h,a))&&!1!==l[0].index){h=l[0];if(void 0===h.index)return a=m.xa._length,m=a*(1-h.y0/m.ya._length)/2,a-=m,h.x0=Math.max(Math.min(h.x0,a),m),h.x1=Math.max(Math.min(h.x1,a),m),l;var g=h.cd[h.index];m=h.trace;a=h.subplot;h.a=g.a;h.b=g.b;h.c=g.c;h.xLabelVal=void 0;h.yLabelVal=void 0;var e={};e[m.subplot]={_subplot:a};e=m._module.formatLabels(g,m,e);h.aLabel=e.aLabel;h.bLabel=e.bLabel;h.cLabel=e.cLabel;e=g.hi||m.hoverinfo;g=[];m.hovertemplate||(e=e.split("+"),-1!==e.indexOf("all")&&
(e=["a","b","c"]),-1!==e.indexOf("a")&&g.push(a.aaxis._hovertitle+": "+h.aLabel),-1!==e.indexOf("b")&&g.push(a.baxis._hovertitle+": "+h.bLabel),-1!==e.indexOf("c")&&g.push(a.caxis._hovertitle+": "+h.cLabel));h.extraText=g.join("<br>");h.hovertemplate=m.hovertemplate;return l}}},{"../scatter/hover":1198}],1281:[function(b,K,G){K.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../scatter/marker_colorbar"),formatLabels:b("./format_labels"),calc:b("./calc"),plot:b("./plot"),
style:b("../scatter/style").style,styleOnSelect:b("../scatter/style").styleOnSelect,hoverPoints:b("./hover"),selectPoints:b("../scatter/select"),eventData:b("./event_data"),moduleType:"trace",name:"scatterternary",basePlotModule:b("../../plots/ternary"),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/ternary":907,"../scatter/marker_colorbar":1205,"../scatter/select":1209,"../scatter/style":1211,"./attributes":1275,"./calc":1276,"./defaults":1277,"./event_data":1278,
"./format_labels":1279,"./hover":1280,"./plot":1282}],1282:[function(b,K,G){var q=b("../scatter/plot");K.exports=function(m,l,h){var a=l.plotContainer;a.select(".scatterlayer").selectAll("*").remove();a={xaxis:l.xaxis,yaxis:l.yaxis,plot:a,layerClipId:l._hasClipOnAxisFalse?l.clipIdRelative:null};l=l.layers.frontplot.select("g.scatterlayer");q(m,a,h,l)}},{"../scatter/plot":1208}],1283:[function(b,K,G){function q(n){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",
regex:a[n],editType:"plot"}}}var m=b("../scatter/attributes"),l=b("../../components/colorscale/attributes");G=b("../../plots/template_attributes").hovertemplateAttrs;var h=b("../scattergl/attributes"),a=b("../../plots/cartesian/constants").idRegex,g=b("../../plot_api/plot_template").templatedArray;b=b("../../lib/extend").extendFlat;m=m.marker;var e=m.line;e=b(l("marker.line",{editTypeOverride:"calc"}),{width:b({},e.width,{editType:"calc"}),editType:"calc"});l=b(l("marker"),{symbol:m.symbol,size:b({},
m.size,{editType:"markerSize"}),sizeref:m.sizeref,sizemin:m.sizemin,sizemode:m.sizemode,opacity:m.opacity,colorbar:m.colorbar,line:e,editType:"calc"});l.color.editType=l.cmin.editType=l.cmax.editType="style";K.exports={dimensions:g("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},
matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:b({},h.text,{}),hovertext:b({},h.hovertext,{}),hovertemplate:G(),marker:l,xaxes:q("x"),yaxes:q("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:h.selected.marker,editType:"calc"},unselected:{marker:h.unselected.marker,
editType:"calc"},opacity:h.opacity}},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plot_api/plot_template":817,"../../plots/cartesian/constants":834,"../../plots/template_attributes":906,"../scatter/attributes":1187,"../scattergl/attributes":1239}],1284:[function(b,K,G){function q(c){var d=c._fullLayout,f=d._glcanvas.data()[0].regl,k=d._splomGrid;k||(k=d._splomGrid=l(f));k.update(m(c))}function m(c){function d(F,I,J,L,H,P){var M=I[F+"color"];F=I[F+"width"];I=String(M+
F);I in u?u[I].data.push(NaN,NaN,J,L,H,P):u[I]={data:[J,L,H,P],join:"rect",thickness:F,color:M,viewport:r,range:r,overlay:!1}}var f=c._fullLayout,k=f._size,r=[0,0,f.width,f.height],u={},v;for(v in f._splomSubplots){var x=f._plots[v],C=x.xaxis;x=x.yaxis;var z=C._gridVals,y=x._gridVals,D=k.b+x.domain[0]*k.h,A=-x._m,t=-A*x.r2l(x.range[0],x.calendar);if(C.showgrid)for(v=0;v<z.length;v++){var B=C._offset+C.l2p(z[v].x);d("grid",C,B,D,B,D+x._length)}if(x.showgrid)for(v=0;v<y.length;v++)z=D+t+A*y[v].x,d("grid",
x,C._offset,z,C._offset+C._length,z);p(c,C,x)&&(B=C._offset+C.l2p(0),d("zeroline",C,B,D,B,D+x._length));p(c,x,C)&&(z=D+t+0,d("zeroline",x,C._offset,z,C._offset+C._length,z))}c=[];for(v in u)c.push(u[v]);return c}var l=b("regl-line2d"),h=b("../../registry"),a=b("../../lib/prepare_regl"),g=b("../../plots/get_data").getModuleCalcData,e=b("../../plots/cartesian"),n=b("../../plots/cartesian/axis_ids").getFromId,p=b("../../plots/cartesian/axes").shouldShowZeroLine;K.exports={name:"splom",attr:e.attr,attrRegex:e.attrRegex,
layoutAttributes:e.layoutAttributes,supplyLayoutDefaults:e.supplyLayoutDefaults,drawFramework:e.drawFramework,plot:function(c){var d=c._fullLayout,f=h.getModule("splom"),k=g(c.calcdata,f)[0];a(c,["ANGLE_instanced_arrays","OES_element_index_uint"])&&(d._hasOnlyLargeSploms&&q(c),f.plot(c,{},k))},drag:function(c){var d=c.calcdata,f=c._fullLayout;f._hasOnlyLargeSploms&&q(c);for(var k=0;k<d.length;k++){var r=d[k][0].trace,u=f._splomScenes[r.uid];if("splom"===r.type&&u&&u.matrix){for(var v=c,x=r._visibleDims,
C=u.viewOpts.ranges=Array(u.matrixOptions.data.length),z=0;z<x.length;z++){var y=x[z],D=C[z]=Array(4),A=n(v,r._diag[y][0]);A&&(D[0]=A.r2l(A.range[0]),D[2]=A.r2l(A.range[1]));if(y=n(v,r._diag[y][1]))D[1]=y.r2l(y.range[0]),D[3]=y.r2l(y.range[1])}u.selectBatch.length||u.unselectBatch.length?u.matrix.update({ranges:C},{ranges:C}):u.matrix.update({ranges:C})}}},updateGrid:q,clean:function(c,d,f,k){var r={},u;if(k._splomScenes){for(u=0;u<c.length;u++){var v=c[u];"splom"===v.type&&(r[v.uid]=1)}for(u=0;u<
f.length;u++)if(v=f[u],!r[v.uid]){var x=k._splomScenes[v.uid];x&&x.destroy&&x.destroy();k._splomScenes[v.uid]=null;delete k._splomScenes[v.uid]}}0===Object.keys(k._splomScenes||{}).length&&delete k._splomScenes;k._splomGrid&&!d._hasOnlyLargeSploms&&k._hasOnlyLargeSploms&&(k._splomGrid.destroy(),k._splomGrid=null,delete k._splomGrid);e.clean(c,d,f,k)},updateFx:e.updateFx,toSVG:e.toSVG}},{"../../lib/prepare_regl":791,"../../plots/cartesian":841,"../../plots/cartesian/axes":828,"../../plots/cartesian/axis_ids":831,
"../../plots/get_data":865,"../../registry":911,"regl-line2d":535}],1285:[function(b,K,G){var q=b("../../lib"),m=b("../../plots/cartesian/axis_ids"),l=b("../scatter/calc").calcMarkerSize,h=b("../scatter/calc").calcAxisExpansion,a=b("../scatter/colorscale_calc"),g=b("../scattergl/convert").markerSelection,e=b("../scattergl/convert").markerStyle,n=b("./scene_update"),p=b("../../constants/numerical").BADNUM,c=b("../scattergl/constants").TOO_MANY_POINTS;K.exports=function(d,f){function k(F,I){I=F.makeCalcdata({v:I.values,
vcalendar:f.calendar},"v");for(var J=0;J<I.length;J++)I[J]=I[J]===p?NaN:I[J];x.push(I);C.push("log"===F.type?q.simpleMap(I,F.c2l):I)}var r=f.dimensions,u=f._length,v={},x=v.cdata=[],C=v.data=[],z=f._visibleDims=[],y;for(y=0;y<r.length;y++){var D=r[y];if(D.visible){var A=m.getFromId(d,f._diag[y][0]);var t=m.getFromId(d,f._diag[y][1]);A&&t&&A.type!==t.type?q.log("Skipping splom dimension "+y+" with conflicting axis types"):(A?(k(A,D),t&&"category"===t.type&&(t._categories=A._categories.slice())):k(t,
D),z.push(y))}}a(d,f);q.extendFlat(v,e(f));var B=x.length*u>c?2*(v.sizeAvg||Math.max(v.size,3)):l(f,u);for(u=0;u<z.length;u++)y=z[u],D=r[y],A=m.getFromId(d,f._diag[y][0])||{},t=m.getFromId(d,f._diag[y][1])||{},h(d,f,A,t,x[u],x[u],B);d=n(d,f);d.matrix||(d.matrix=!0);d.matrixOptions=v;d.selectedOptions=g(f,f.selected);d.unselectedOptions=g(f,f.unselected);return[{x:!1,y:!1,t:{},trace:f}]}},{"../../constants/numerical":753,"../../lib":778,"../../plots/cartesian/axis_ids":831,"../scatter/calc":1188,"../scatter/colorscale_calc":1190,
"../scattergl/constants":1241,"../scattergl/convert":1242,"./scene_update":1292}],1286:[function(b,K,G){function q(c,d){function f(r,u){return l.coerce(c,d,a.dimensions,r,u)}f("label");var k=f("values");k&&k.length?f("visible"):d.visible=!1;f("axis.type");f("axis.matches")}function m(c,d,f,k){function r(P,M,N,T){if(P){var Q=P.charAt(0),U=f._splomAxes[Q];d["_"+Q+"axes"][P]=1;T.push(P);P in U||(P=U[P]={},N&&(P.label=N.label||"",N.visible&&N.axis&&(N.axis.type&&(P.type=N.axis.type),N.axis.matches&&(P.matches=
M))))}}var u=d.dimensions,v=u.length;c=d.showupperhalf;var x=d.showlowerhalf,C=d.diagonal.visible,z,y=Array(v),D=Array(v);for(z=0;z<v;z++){var A=z?z+1:"";y[z]="x"+A;D[z]="y"+A}y=k("xaxes",y);A=k("yaxes",D);var t=d._diag=Array(v);d._xaxes={};d._yaxes={};k=[];D=[];var B=!C&&!x,F=!C&&!c;d._axesDim={};for(z=0;z<v;z++){var I=u[z],J=0===z,L=z===v-1,H=J&&B||L&&F?void 0:y[z];J=J&&F||L&&B?void 0:A[z];r(H,J,I,k);r(J,H,I,D);t[z]=[H,J];d._axesDim[H]=z;d._axesDim[J]=z}for(z=0;z<k.length;z++)for(u=0;u<D.length;u++)v=
k[z]+D[u],z>u&&c?f._splomSubplots[v]=1:z<u&&x?f._splomSubplots[v]=1:z!==u||!C&&x&&c||(f._splomSubplots[v]=1);if(!x||!C&&c&&x)f._splomGridDflt.xside="bottom",f._splomGridDflt.yside="left"}var l=b("../../lib"),h=b("../../plots/array_container_defaults"),a=b("./attributes"),g=b("../scatter/subtypes"),e=b("../scatter/marker_defaults"),n=b("../parcoords/merge_length"),p=b("../scattergl/helpers").isOpenSymbol;K.exports=function(c,d,f,k){function r(z,y){return l.coerce(c,d,a,z,y)}var u=h(c,d,{name:"dimensions",
handleItemDefaults:q}),v=r("diagonal.visible"),x=r("showupperhalf"),C=r("showlowerhalf");n(d,u,"values")&&(v||x||C)?(r("text"),r("hovertext"),r("hovertemplate"),e(c,d,f,k,r),f=p(d.marker.symbol),u=g.isBubble(d),r("marker.line.width",f||u?1:0),m(c,d,k,r),l.coerceSelectionMarkerOpacity(d,r)):d.visible=!1}},{"../../lib":778,"../../plots/array_container_defaults":823,"../parcoords/merge_length":1158,"../scatter/marker_defaults":1206,"../scatter/subtypes":1212,"../scattergl/helpers":1246,"./attributes":1283}],
1287:[function(b,K,G){var q=b("../../lib"),m=b("../scatter/colorscale_calc"),l=b("../scattergl/convert").markerStyle;K.exports=function(h,a){var g=a.trace;if(a=h._fullLayout._splomScenes[g.uid])m(h,g),q.extendFlat(a.matrixOptions,l(g)),h=q.extendFlat({},a.matrixOptions,a.viewOpts),a.matrix.update(h,null)}},{"../../lib":778,"../scatter/colorscale_calc":1190,"../scattergl/convert":1242}],1288:[function(b,K,G){G.getDimIndex=function(q,m){m=m._id;for(var l={x:0,y:1}[m.charAt(0)],h=q._visibleDims,a=0;a<
h.length;a++)if(q._diag[h[a]][l]===m)return a;return!1}},{}],1289:[function(b,K,G){var q=b("./helpers"),m=b("../scattergl/hover").calcHover;K.exports={hoverPoints:function(l,h,a){var g=l.cd[0].trace,e=l.scene.matrixOptions.cdata,n=l.xa,p=l.ya;h=n.c2p(h);a=p.c2p(a);var c=l.distance,d=q.getDimIndex(g,n),f=q.getDimIndex(g,p);if(!1===d||!1===f)return[l];d=e[d];e=e[f];var k;for(f=0;f<d.length;f++){var r=e[f],u=n.c2p(d[f])-h;r=p.c2p(r)-a;u=Math.sqrt(u*u+r*r);if(u<c){c=k=u;var v=f}}l.index=v;l.distance=
c;l.dxy=k;return void 0===v?[l]:[m(l,d,e,g)]}}},{"../scattergl/hover":1247,"./helpers":1288}],1290:[function(b,K,G){G=b("../../registry");var q=b("../../components/grid");K.exports={moduleType:"trace",name:"splom",basePlotModule:b("./base_plot"),categories:"gl regl cartesian symbols showLegend scatter-like".split(" "),attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../scatter/marker_colorbar"),calc:b("./calc"),plot:b("./plot"),hoverPoints:b("./hover").hoverPoints,selectPoints:b("./select"),
editStyle:b("./edit_style"),meta:{}};G.register(q)},{"../../components/grid":687,"../../registry":911,"../scatter/marker_colorbar":1205,"./attributes":1283,"./base_plot":1284,"./calc":1285,"./defaults":1286,"./edit_style":1287,"./hover":1289,"./plot":1291,"./select":1293}],1291:[function(b,K,G){var q=b("regl-splom"),m=b("../../lib"),l=b("../../plots/cartesian/axis_ids"),h=b("../../components/dragelement/helpers").selectMode;K.exports=function(a,g,e){if(e.length)for(g=0;g<e.length;g++){var n,p,c=a,
d=e[g][0],f=c._fullLayout,k=f._size,r=d.trace;var u=d.t;d=f._splomScenes[r.uid];var v=d.matrixOptions,x=v.cdata,C=f._glcanvas.data()[0].regl,z=f.dragmode;if(0!==x.length){v.lower=r.showupperhalf;v.upper=r.showlowerhalf;v.diagonal=r.diagonal.visible;var y=r._visibleDims,D=x.length,A=d.viewOpts={};A.ranges=Array(D);A.domains=Array(D);for(n=0;n<y.length;n++){var t=y[n];var B=A.ranges[n]=Array(4),F=A.domains[n]=Array(4);if(p=l.getFromId(c,r._diag[t][0]))B[0]=p._rl[0],B[2]=p._rl[1],F[0]=p.domain[0],F[2]=
p.domain[1];if(t=l.getFromId(c,r._diag[t][1]))B[1]=t._rl[0],B[3]=t._rl[1],F[1]=t.domain[0],F[3]=t.domain[1]}A.viewport=[k.l,k.b,k.w+k.l,k.h+k.b];!0===d.matrix&&(d.matrix=q(C));t=-1<f.clickmode.indexOf("select");f=!0;if(h(z)||r.selectedpoints||t){z=r._length;if(r.selectedpoints){p=d.selectBatch=r.selectedpoints;n={};for(t=0;t<p.length;t++)n[p[t]]=!0;p=[];for(t=0;t<z;t++)n[t]||p.push(t);d.unselectBatch=p}k=u.xpx=Array(D);D=u.ypx=Array(D);for(n=0;n<y.length;n++){t=y[n];if(p=l.getFromId(c,r._diag[t][0]))for(k[n]=
Array(z),u=0;u<z;u++)k[n][u]=p.c2p(x[n][u]);if(t=l.getFromId(c,r._diag[t][1]))for(D[n]=Array(z),u=0;u<z;u++)D[n][u]=t.c2p(x[n][u])}if(d.selectBatch.length||d.unselectBatch.length)c=m.extendFlat({},v,d.unselectedOptions,A),r=m.extendFlat({},v,d.selectedOptions,A),d.matrix.update(c,r),f=!1}else u.xpx=u.ypx=null;f&&(v=m.extendFlat({},v,A),d.matrix.update(v,null))}}}},{"../../components/dragelement/helpers":661,"../../lib":778,"../../plots/cartesian/axis_ids":831,"regl-splom":539}],1292:[function(b,K,
G){var q=b("../../lib");K.exports=function(m,l){var h=m._fullLayout;m=l.uid;var a=h._splomScenes;a||(a=h._splomScenes={});h={dirty:!0,selectBatch:[],unselectBatch:[]};var g={matrix:!1,selectBatch:[],unselectBatch:[]},e=a[l.uid];e||(e=a[m]=q.extendFlat({},h,g),e.draw=function(){e.matrix&&e.matrix.draw&&(e.selectBatch.length||e.unselectBatch.length?e.matrix.draw(e.unselectBatch,e.selectBatch):e.matrix.draw());e.dirty=!1},e.destroy=function(){e.matrix&&e.matrix.destroy&&e.matrix.destroy();e.matrixOptions=
null;e.selectBatch=null;e=e.unselectBatch=null});e.dirty||q.extendFlat(e,h);return e}},{"../../lib":778}],1293:[function(b,K,G){var q=b("../../lib"),m=b("../scatter/subtypes"),l=b("./helpers");K.exports=function(h,a){var g=h.cd,e=g[0].trace,n=g[0].t;g=h.scene;var p=g.matrixOptions.cdata,c=h.xaxis,d=h.yaxis,f=[];if(!g)return f;var k=!m.hasMarkers(e)&&!m.hasText(e);if(!0!==e.visible||k)return f;c=l.getDimIndex(e,c);d=l.getDimIndex(e,d);if(!1===c||!1===d)return f;e=n.xpx[c];n=n.ypx[d];c=p[c];k=p[d];
p=[];d=[];if(!1!==a&&!a.degenerate)for(var r=0;r<c.length;r++)a.contains([e[r],n[r]],null,r,h)?(p.push(r),f.push({pointNumber:r,x:c[r],y:k[r]})):d.push(r);h=g.matrixOptions;p.length||d.length?g.selectBatch.length||g.unselectBatch.length||g.matrix.update(g.unselectedOptions,q.extendFlat({},h,g.selectedOptions,g.viewOpts)):g.matrix.update(h,null);g.selectBatch=p;g.unselectBatch=d;return f}},{"../../lib":778,"../scatter/subtypes":1212,"./helpers":1288}],1294:[function(b,K,G){G=b("../../components/colorscale/attributes");
var q=b("../../plots/template_attributes").hovertemplateAttrs,m=b("../mesh3d/attributes"),l=b("../../plots/attributes");b=b("../../lib/extend").extendFlat;var h={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},
y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1E3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:q({editType:"calc"},{keys:"tubex tubey tubez tubeu tubev tubew norm divergence".split(" ")}),showlegend:b({},l.showlegend,{dflt:!1})};b(h,G("",{colorAttr:"u/v/w norm",
showScaleDflt:!0,editTypeOverride:"calc"}));["opacity","lightposition","lighting"].forEach(function(a){h[a]=m[a]});h.hoverinfo=b({},l.hoverinfo,{editType:"calc",flags:"x y z u v w norm divergence text name".split(" "),dflt:"x+y+z+norm+text+name"});h.transforms=void 0;K.exports=h},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,"../mesh3d/attributes":1128}],1295:[function(b,K,G){function q(a){var g=a._x,e=a._y,
n=a._z,p=a._len,c,d,f=-Infinity,k=Infinity,r=-Infinity,u=Infinity,v=-Infinity,x=Infinity,C="";if(p){var z=g[0];var y=e[0];var D=n[0]}if(1<p){var A=g[p-1];var t=e[p-1];var B=n[p-1]}for(c=0;c<p;c++){f=Math.max(f,g[c]);k=Math.min(k,g[c]);r=Math.max(r,e[c]);u=Math.min(u,e[c]);v=Math.max(v,n[c]);x=Math.min(x,n[c]);if(!F&&g[c]!==z){var F=!0;C+="x"}if(!I&&e[c]!==y){var I=!0;C+="y"}if(!J&&n[c]!==D){var J=!0;C+="z"}}F||(C+="x");I||(C+="y");J||(C+="z");var L=l.distinctVals(a._x).vals,H=l.distinctVals(a._y).vals,
P=l.distinctVals(a._z).vals;C=C.replace("x",(z>A?"-":"+")+"x");C=C.replace("y",(y>t?"-":"+")+"y");C=C.replace("z",(D>B?"-":"+")+"z");if(!p||p<L.length*H.length*P.length)p=0,L=[],H=[],P=[];c=function(U){return"x"===U?g:"y"===U?e:n};A=function(U){return"x"===U?L:"y"===U?H:P};B=function(U){return U[p-1]<U[0]?-1:1};a=c(C[1]);F=c(C[3]);I=c(C[5]);J=A(C[1]).length;z=A(C[3]).length;A=A(C[5]).length;y=!1;t=B(c(C[1]));D=B(c(C[3]));var M=B(c(C[5]));for(c=0;c<A-1;c++){for(B=0;B<z-1;B++){for(d=0;d<J-1;d++){var N=
J*(z*c+B)+d,T=J*(z*c+(B+1))+d,Q=J*(z*(c+1)+B)+d;a[N]*t<a[J*(z*c+B)+(d+1)]*t&&F[N]*D<F[T]*D&&I[N]*M<I[Q]*M||(y=!0);if(y)break}if(y)break}if(y)break}y&&(l.warn("Encountered arbitrary coordinates! Unable to input data grid."),p=0,L=[],H=[],P=[]);return{xMin:k,yMin:u,zMin:x,xMax:f,yMax:r,zMax:v,Xs:L,Ys:H,Zs:P,len:p,fill:C}}function m(a,g){void 0===g&&(g=a.length);if(l.isTypedArray(a))return a.subarray(0,g);for(var e=[],n=0;n<g;n++)e[n]=+a[n];return e}var l=b("../../lib"),h=b("../../components/colorscale/calc");
K.exports={calc:function(a,g){g._len=Math.min(g.u.length,g.v.length,g.w.length,g.x.length,g.y.length,g.z.length);g._u=m(g.u,g._len);g._v=m(g.v,g._len);g._w=m(g.w,g._len);g._x=m(g.x,g._len);g._y=m(g.y,g._len);g._z=m(g.z,g._len);var e=q(g);g._gridFill=e.fill;g._Xs=e.Xs;g._Ys=e.Ys;g._Zs=e.Zs;g._len=e.len;var n=0;if(g.starts){var p=m(g.starts.x||[]);var c=m(g.starts.y||[]);var d=m(g.starts.z||[]);n=Math.min(p.length,c.length,d.length)}g._startsX=p||[];g._startsY=c||[];g._startsZ=d||[];var f=0,k=Infinity,
r;for(r=0;r<g._len;r++){var u=g._u[r],v=g._v[r],x=g._w[r];u=Math.sqrt(u*u+v*v+x*x);f=Math.max(f,u);k=Math.min(k,u)}h(a,g,{vals:[k,f],containerStr:"",cLetter:"c"});for(r=0;r<n;r++)a=p[r],e.xMax=Math.max(e.xMax,a),e.xMin=Math.min(e.xMin,a),a=c[r],e.yMax=Math.max(e.yMax,a),e.yMin=Math.min(e.yMin,a),a=d[r],e.zMax=Math.max(e.zMax,a),e.zMin=Math.min(e.zMin,a);g._slen=n;g._normMax=f;g._xbnds=[e.xMin,e.xMax];g._ybnds=[e.yMin,e.yMax];g._zbnds=[e.zMin,e.zMax]},filter:m,processGrid:q}},{"../../components/colorscale/calc":651,
"../../lib":778}],1296:[function(b,K,G){function q(f,k){this.scene=f;this.uid=k;this.data=this.mesh=null}function m(f){var k=f.length;return 2<k?f.slice(1,k-1):2===k?[(f[0]+f[1])/2]:f}function l(f){var k=f.length;return 1===k?[.5,.5]:[f[1]-f[0],f[k-1]-f[k-2]]}function h(f,k){function r(J,L){var H=u[L],P=v[d[L]];return e.simpleMap(J,function(M){return H.d2l(M)*P})}var u=f.fullSceneLayout,v=f.dataScale,x=k._len;f={};f.vectors=c(r(k._u,"xaxis"),r(k._v,"yaxis"),r(k._w,"zaxis"),x);if(!x)return{positions:[],
cells:[]};var C=r(k._Xs,"xaxis"),z=r(k._Ys,"yaxis");x=r(k._Zs,"zaxis");f.meshgrid=[C,z,x];f.gridFill=k._gridFill;if(k._slen)f.startingPositions=c(r(k._startsX,"xaxis"),r(k._startsY,"yaxis"),r(k._startsZ,"zaxis"));else{for(var y=z[0],D=m(C),A=m(x),t=Array(D.length*A.length),B=0,F=0;F<D.length;F++)for(var I=0;I<A.length;I++)t[B++]=[D[F],y,A[I]];f.startingPositions=t}f.colormap=n(k);f.tubeSize=k.sizeref;f.maxLength=k.maxdisplayed;y=r(k._xbnds,"xaxis");D=r(k._ybnds,"yaxis");A=r(k._zbnds,"zaxis");C=l(C);
z=l(z);x=l(x);f=a(f,[[y[0]-C[0],D[0]-z[0],A[0]-x[0]],[y[1]+C[1],D[1]+z[1],A[1]+x[1]]]);x=p(k);f.vertexIntensityBounds=[x.min/k._normMax,x.max/k._normMax];x=k.lightposition;f.lightPosition=[x.x,x.y,x.z];f.ambient=k.lighting.ambient;f.diffuse=k.lighting.diffuse;f.specular=k.lighting.specular;f.roughness=k.lighting.roughness;f.fresnel=k.lighting.fresnel;f.opacity=k.opacity;k._pad=f.tubeScale*k.sizeref*2;return f}var a=b("gl-streamtube3d"),g=a.createTubeMesh,e=b("../../lib"),n=b("../../lib/gl_format_color").parseColorScale,
p=b("../../components/colorscale").extractOpts,c=b("../../plots/gl3d/zip3"),d={xaxis:0,yaxis:1,zaxis:2};b=q.prototype;b.handlePick=function(f){function k(C,z){var y=u[d[z]];return r[z].l2c(C)/y}var r=this.scene.fullSceneLayout,u=this.scene.dataScale;if(f.object===this.mesh){var v=f.data.position,x=f.data.velocity;f.traceCoordinate=[k(v[0],"xaxis"),k(v[1],"yaxis"),k(v[2],"zaxis"),k(x[0],"xaxis"),k(x[1],"yaxis"),k(x[2],"zaxis"),f.data.intensity*this.data._normMax,f.data.divergence];f.textLabel=this.data.hovertext||
this.data.text;return!0}};b.update=function(f){this.data=f;f=h(this.scene,f);this.mesh.update(f)};b.dispose=function(){this.scene.glplot.remove(this.mesh);this.mesh.dispose()};K.exports=function(f,k){var r=f.glplot.gl,u=h(f,k);r=g(r,u);u=new q(f,k.uid);u.mesh=r;u.data=k;r._trace=u;f.glplot.add(r);return u}},{"../../components/colorscale":655,"../../lib":778,"../../lib/gl_format_color":774,"../../plots/gl3d/zip3":881,"gl-streamtube3d":348}],1297:[function(b,K,G){var q=b("../../lib"),m=b("../../components/colorscale/defaults"),
l=b("./attributes");K.exports=function(h,a,g,e){function n(r,u){return q.coerce(h,a,l,r,u)}g=n("u");var p=n("v"),c=n("w"),d=n("x"),f=n("y"),k=n("z");g&&g.length&&p&&p.length&&c&&c.length&&d&&d.length&&f&&f.length&&k&&k.length?(n("starts.x"),n("starts.y"),n("starts.z"),n("maxdisplayed"),n("sizeref"),n("lighting.ambient"),n("lighting.diffuse"),n("lighting.specular"),n("lighting.roughness"),n("lighting.fresnel"),n("lightposition.x"),n("lightposition.y"),n("lightposition.z"),m(h,a,e,n,{prefix:"",cLetter:"c"}),
n("text"),n("hovertext"),n("hovertemplate"),a._length=null):a.visible=!1}},{"../../components/colorscale/defaults":653,"../../lib":778,"./attributes":1294}],1298:[function(b,K,G){K.exports={moduleType:"trace",name:"streamtube",basePlotModule:b("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:b("./calc").calc,plot:b("./convert"),eventData:function(q,m){q.tubex=q.x;q.tubey=q.y;q.tubez=q.z;q.tubeu=m.traceCoordinate[3];
q.tubev=m.traceCoordinate[4];q.tubew=m.traceCoordinate[5];q.norm=m.traceCoordinate[6];q.divergence=m.traceCoordinate[7];delete q.x;delete q.y;delete q.z;return q},meta:{}}},{"../../plots/gl3d":870,"./attributes":1294,"./calc":1295,"./convert":1296,"./defaults":1297}],1299:[function(b,K,G){G=b("../../plots/attributes");var q=b("../../plots/template_attributes").hovertemplateAttrs,m=b("../../plots/template_attributes").texttemplateAttrs,l=b("../../components/colorscale/attributes"),h=b("../../plots/domain").attributes,
a=b("../pie/attributes"),g=b("./constants");b=b("../../lib/extend").extendFlat;K.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",
dflt:-1},marker:b({colors:{valType:"data_array",editType:"calc"},line:{color:b({},a.marker.line.color,{dflt:null}),width:b({},a.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},l("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:a.text,textinfo:{valType:"flaglist",flags:"label;text;value;current path;percent root;percent entry;percent parent".split(";"),extras:["none"],editType:"plot"},texttemplate:m({editType:"plot"},
{keys:g.eventDataKeys.concat(["label","value"])}),hovertext:a.hovertext,hoverinfo:b({},G.hoverinfo,{flags:"label;text;value;name;current path;percent root;percent entry;percent parent".split(";"),dflt:"label+text+value+name"}),hovertemplate:q({},{keys:g.eventDataKeys}),textfont:a.textfont,insidetextorientation:a.insidetextorientation,insidetextfont:a.insidetextfont,outsidetextfont:b({},a.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:a.sort,root:{color:{valType:"color",
editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:h({name:"sunburst",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/domain":855,"../../plots/template_attributes":906,"../pie/attributes":1161,"./constants":1302}],1300:[function(b,K,G){var q=b("../../plots/plots");G.name="sunburst";G.plot=function(m,l,h,a){q.plotBasePlot(G.name,m,l,h,a)};G.clean=function(m,l,h,a){q.cleanBasePlot(G.name,m,l,h,a)}},
{"../../plots/plots":891}],1301:[function(b,K,G){function q(f,k,r){var u=0,v=f.children;if(v){for(var x=v.length,C=0;C<x;C++)u+=q(v[C],k,r);r.branches&&u++}else r.leaves&&u++;f.value=f.data.data.value=u;k._values||(k._values=[]);return k._values[f.data.data.i]=u}var m=b("d3-hierarchy"),l=b("fast-isnumeric"),h=b("../../lib"),a=b("../../components/colorscale").makeColorScaleFuncFromTrace,g=b("../pie/calc").makePullColorFn,e=b("../pie/calc").generateExtendedColors,n=b("../../components/colorscale").calc,
p=b("../../constants/numerical").ALMOST_EQUAL,c={},d={};G.calc=function(f,k){var r=f._fullLayout,u=k.ids,v=h.isArrayOrTypedArray(u),x=k.labels,C=k.parents,z=k.values,y=h.isArrayOrTypedArray(z),D=[],A={},t={},B=function(aa,fa){A[aa]?A[aa].push(fa):A[aa]=[fa];t[fa]=1},F=function(aa){return aa||"number"===typeof aa},I=function(aa){return!y||l(z[aa])&&0<=z[aa]};if(v){v=Math.min(u.length,C.length);var J=function(aa){return F(u[aa])&&I(aa)};var L=function(aa){return String(u[aa])}}else v=Math.min(x.length,
C.length),J=function(aa){return F(x[aa])&&I(aa)},L=function(aa){return String(x[aa])};y&&(v=Math.min(v,z.length));for(var H=0;H<v;H++)if(J(H)){var P=L(H),M=F(C[H])?String(C[H]):"",N={i:H,id:P,pid:M,label:F(x[H])?String(x[H]):""};y&&(N.v=+z[H]);D.push(N);B(M,P)}if(!A[""]){C=[];for(var T in A)t[T]||C.push(T);if(1===C.length)T=C[0],D.unshift({hasImpliedRoot:!0,id:T,pid:"",label:T});else return h.warn(["Multiple implied roots, cannot build",k.type,"hierarchy of",k.name+".","These roots include:",C.join(", ")].join(" "))}else if(1<
A[""].length){T=h.randstr();for(C=0;C<D.length;C++)""===D[C].pid&&(D[C].pid=T);D.unshift({hasMultipleRoots:!0,id:T,pid:"",label:""})}try{var Q=m.stratify().id(function(aa){return aa.id}).parentId(function(aa){return aa.pid})(D)}catch(aa){return h.warn(["Failed to build",k.type,"hierarchy of",k.name+".","Error:",aa.message].join(" "))}Q=m.hierarchy(Q);var U=!1;if(y)switch(k.branchvalues){case "remainder":Q.sum(function(aa){return aa.data.v});break;case "total":Q.each(function(aa){var fa=aa.data.data,
ha=fa.v;if(aa.children){var ja=aa.children.reduce(function(ba,ma){return ba+ma.data.data.v},0);if(fa.hasImpliedRoot||fa.hasMultipleRoots)ha=ja;if(ha<ja*p)return U=!0,h.warn(["Total value for node",aa.data.data.id,"of",k.name,"is smaller than the sum of its children. \nparent value =",ha,"\nchildren sum =",ja].join(" "))}aa.value=ha})}else q(Q,k,{branches:-1!==k.count.indexOf("branches"),leaves:-1!==k.count.indexOf("leaves")});if(!U){k.sort&&Q.sort(function(aa,fa){return fa.value-aa.value});var S=
k.marker.colors||[];T=!!S.length;if(k._hasColorscale){T||(S=y?k.values:k._values);n(f,k,{vals:S,containerStr:"marker",cLetter:"c"});var X=a(k.marker)}else var Z=g(r["_"+k.type+"colormap"]);Q.each(function(aa){aa=aa.data.data;aa.color=k._hasColorscale?X(S[aa.i]):Z(S[aa.i],aa.id)});D[0].hierarchy=Q;return D}};G._runCrossTraceCalc=function(f,k){function r(D){var A=D.data.data,t=A.id;!1===A.color&&(x[t]?A.color=x[t]:D.parent?D.parent.parent?A.color=D.parent.data.data.color:(x[t]=A.color=v[C%v.length],
C++):A.color=y)}var u=k._fullLayout;k=k.calcdata;var v=u[f+"colorway"],x=u["_"+f+"colormap"];u["extend"+f+"colors"]&&(v=e(v,"treemap"===f?d:c));var C=0;for(u=0;u<k.length;u++){var z=k[u][0];if(z.trace.type===f&&z.hierarchy){var y=z.trace.root.color;z.hierarchy.each(r)}}};G.crossTraceCalc=function(f){return G._runCrossTraceCalc("sunburst",f)}},{"../../components/colorscale":655,"../../constants/numerical":753,"../../lib":778,"../pie/calc":1163,"d3-hierarchy":161,"fast-isnumeric":241}],1302:[function(b,
K,G){K.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:"currentPath root entry percentRoot percentEntry percentParent".split(" ")}},{}],1303:[function(b,K,G){var q=b("../../lib"),m=b("./attributes"),l=b("../../plots/domain").defaults,h=b("../bar/defaults").handleText;b=b("../../components/colorscale");var a=b.hasColorscale,g=b.handleDefaults;K.exports=function(e,n,p,c){function d(k,r){return q.coerce(e,n,m,k,r)}p=d("labels");var f=d("parents");p&&p.length&&f&&f.length?
((p=d("values"))&&p.length?d("branchvalues"):d("count"),d("level"),d("maxdepth"),d("marker.line.width")&&d("marker.line.color",c.paper_bgcolor),d("marker.colors"),(p=n._hasColorscale=a(e,"marker","colors")||(e.marker||{}).coloraxis)&&g(e,n,c,d,{prefix:"marker.",cLetter:"c"}),d("leaf.opacity",p?1:.7),p=d("text"),d("texttemplate"),n.texttemplate||d("textinfo",Array.isArray(p)?"text+label":"label"),d("hovertext"),d("hovertemplate"),h(e,n,c,d,"auto",{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,
moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),d("insidetextorientation"),d("sort"),d("rotation"),d("root.color"),l(n,c,d),n._length=null):n.visible=!1}},{"../../components/colorscale":655,"../../lib":778,"../../plots/domain":855,"../bar/defaults":925,"./attributes":1299}],1304:[function(b,K,G){function q(c,d,f){for(var k=c.data.data,r={curveNumber:d.index,pointNumber:k.i,data:d._input,fullData:d},u=0;u<f.length;u++){var v=f[u];v in c&&(r[v]=c[v])}"parentString"in c&&!n.isHierarchyRoot(c)&&
(r.parent=c.parentString);h(r,d,k.i);return r}var m=b("d3"),l=b("../../registry"),h=b("../../components/fx/helpers").appendArrayPointValue,a=b("../../components/fx"),g=b("../../lib"),e=b("../../lib/events"),n=b("./helpers"),p=b("../pie/helpers").formatPieValue;K.exports=function(c,d,f,k,r){var u=k[0],v=u.trace,x=u.hierarchy,C="sunburst"===v.type,z="treemap"===v.type;"_hasHoverLabel"in v||(v._hasHoverLabel=!1);"_hasHoverEvent"in v||(v._hasHoverEvent=!1);c.on("mouseover",function(y){var D=f._fullLayout;
if(!f._dragging&&!1!==D.hovermode){var A=f._fullData[v.index],t=y.data.data,B=t.i,F=n.isHierarchyRoot(y),I=n.getParent(x,y),J=n.getValue(y),L=function(fa){return g.castOption(A,B,fa)},H=L("hovertemplate"),P=a.castHoverinfo(A,D,B),M=D.separators;if(H||P&&"none"!==P&&"skip"!==P){if(C){var N=u.cx+y.pxmid[0]*(1-y.rInscribed);var T=u.cy+y.pxmid[1]*(1-y.rInscribed)}z&&(N=y._hoverX,T=y._hoverY);var Q={},U=[],S=[],X=function(fa){return-1!==U.indexOf(fa)};P&&(U="all"===P?A._module.attributes.hoverinfo.flags:
P.split("+"));Q.label=t.label;X("label")&&Q.label&&S.push(Q.label);t.hasOwnProperty("v")&&(Q.value=t.v,Q.valueLabel=p(Q.value,M),X("value")&&S.push(Q.valueLabel));Q.currentPath=y.currentPath=n.getPath(y.data);X("current path")&&!F&&S.push(Q.currentPath);var Z=[];P=function(){-1===Z.indexOf(aa)&&(S.push(aa),Z.push(aa))};Q.percentParent=y.percentParent=J/n.getValue(I);Q.parent=y.parentString=n.getPtLabel(I);if(X("percent parent")){var aa=n.formatPercent(Q.percentParent,M)+" of "+Q.parent;P()}Q.percentEntry=
y.percentEntry=J/n.getValue(d);Q.entry=y.entry=n.getPtLabel(d);!X("percent entry")||F||y.onPathbar||(aa=n.formatPercent(Q.percentEntry,M)+" of "+Q.entry,P());Q.percentRoot=y.percentRoot=J/n.getValue(x);Q.root=y.root=n.getPtLabel(x);X("percent root")&&!F&&(aa=n.formatPercent(Q.percentRoot,M)+" of "+Q.root,P());Q.text=L("hovertext")||L("text");X("text")&&(aa=Q.text,g.isValidTextValue(aa)&&S.push(aa));t={trace:A,y:T,text:S.join("<br>"),name:H||X("name")?A.name:void 0,color:L("hoverlabel.bgcolor")||t.color,
borderColor:L("hoverlabel.bordercolor"),fontFamily:L("hoverlabel.font.family"),fontSize:L("hoverlabel.font.size"),fontColor:L("hoverlabel.font.color"),nameLength:L("hoverlabel.namelength"),textAlign:L("hoverlabel.align"),hovertemplate:H,hovertemplateLabels:Q,eventData:[q(y,A,r.eventDataKeys)]};C&&(t.x0=N-y.rInscribed*y.rpx1,t.x1=N+y.rInscribed*y.rpx1,t.idealAlign=0>y.pxmid[0]?"left":"right");z&&(t.x=N,t.idealAlign=0>N?"left":"right");a.loneHover(t,{container:D._hoverlayer.node(),outerContainer:D._paper.node(),
gd:f});v._hasHoverLabel=!0}z&&(D=c.select("path.surface"),r.styleOne(D,y,A,{hovered:!0}));v._hasHoverEvent=!0;f.emit("plotly_hover",{points:[q(y,A,r.eventDataKeys)],event:m.event})}});c.on("mouseout",function(y){var D=f._fullLayout,A=f._fullData[v.index],t=m.select(this).datum();v._hasHoverEvent&&(y.originalEvent=m.event,f.emit("plotly_unhover",{points:[q(t,A,r.eventDataKeys)],event:m.event}),v._hasHoverEvent=!1);v._hasHoverLabel&&(a.loneUnhover(D._hoverlayer.node()),v._hasHoverLabel=!1);z&&(y=c.select("path.surface"),
r.styleOne(y,t,A,{hovered:!1}))});c.on("click",function(y){var D=f._fullLayout,A=f._fullData[v.index],t=C&&(n.isHierarchyRoot(y)||n.isLeaf(y)),B=n.getPtId(y);B=n.isEntry(y)?n.findEntryWithChild(x,B):n.findEntryWithLevel(x,B);B=n.getPtId(B);var F={points:[q(y,A,r.eventDataKeys)],event:m.event};t||(F.nextLevel=B);F=e.triggerHandler(f,"plotly_"+v.type+"click",F);!1!==F&&D.hovermode&&(f._hoverdata=[q(y,A,r.eventDataKeys)],a.click(f,m.event));t||!1===F||f._dragging||f._transitioning||(l.call("_storeDirectGUIEdit",
A,D._tracePreGUI[A.uid],{level:A.level}),y={data:[{level:B}],traces:[v.index]},A={frame:{redraw:!1,duration:r.transitionTime},transition:{duration:r.transitionTime,easing:r.transitionEasing},mode:"immediate",fromcurrent:!0},a.loneUnhover(D._hoverlayer.node()),l.call("animate",f,y,A))})}},{"../../components/fx":683,"../../components/fx/helpers":679,"../../lib":778,"../../lib/events":767,"../../registry":911,"../pie/helpers":1166,"./helpers":1305,d3:169}],1305:[function(b,K,G){var q=b("../../lib"),
m=b("../../components/color"),l=b("../../lib/setcursor"),h=b("../pie/helpers");G.findEntryWithLevel=function(a,g){var e;g&&a.eachAfter(function(n){if(G.getPtId(n)===g)return e=n.copy()});return e||a};G.findEntryWithChild=function(a,g){var e;a.eachAfter(function(n){for(var p=n.children||[],c=0;c<p.length;c++)if(G.getPtId(p[c])===g)return e=n.copy()});return e||a};G.isEntry=function(a){return!a.parent};G.isLeaf=function(a){return!a.children};G.getPtId=function(a){return a.data.data.id};G.getPtLabel=
function(a){return a.data.data.label};G.getValue=function(a){return a.value};G.isHierarchyRoot=function(a){return""===a.data.data.pid};G.setSliceCursor=function(a,g,e){g=e.isTransitioning;g||(g=a.datum(),g=e.hideOnRoot&&G.isHierarchyRoot(g)||e.hideOnLeaves&&G.isLeaf(g));l(a,g?null:"pointer")};G.getInsideTextFontKey=function(a,g,e,n,p){e=e.data.data.i;return q.castOption(g,e,((p||{}).onPathbar?"pathbar.textfont":"insidetextfont")+"."+a)||q.castOption(g,e,"textfont."+a)||n.size};G.getOutsideTextFontKey=
function(a,g,e,n){e=e.data.data.i;return q.castOption(g,e,"outsidetextfont."+a)||q.castOption(g,e,"textfont."+a)||n.size};G.isOutsideText=function(a,g){return!a._hasColorscale&&G.isHierarchyRoot(g)};G.determineTextFont=function(a,g,e,n){if(G.isOutsideText(a,g))a={color:G.getOutsideTextFontKey("color",a,g,e),family:G.getOutsideTextFontKey("family",a,g,e),size:G.getOutsideTextFontKey("size",a,g,e)};else{var p=g.data.data,c=p.i,d=q.castOption(a,c,((n||{}).onPathbar?"pathbar.textfont":"insidetextfont")+
".color");!d&&a._input.textfont&&(d=q.castOption(a._input,c,"textfont.color"));a={color:d||m.contrast(p.color),family:G.getInsideTextFontKey("family",a,g,e,n),size:G.getInsideTextFontKey("size",a,g,e,n)}}return a};G.hasTransition=function(a){return!!(a&&0<a.duration)};G.getMaxDepth=function(a){return 0<=a.maxdepth?a.maxdepth:Infinity};G.isHeader=function(a,g){return!(G.isLeaf(a)||a.depth===g._maxDepth-1)};G.getParent=function(a,g){return G.findEntryWithLevel(a,g.data.data.pid)};G.listPath=function(a,
g){a=a.parent;if(!a)return[];var e=g?[a.data[g]]:[a];return G.listPath(a,g).concat(e)};G.getPath=function(a){return G.listPath(a,"label").join("/")+"/"};G.formatValue=h.formatPieValue;G.formatPercent=function(a,g){var e=q.formatPercent(a,0);"0%"===e&&(e=h.formatPiePercent(a,g));return e}},{"../../components/color":643,"../../lib":778,"../../lib/setcursor":799,"../pie/helpers":1166}],1306:[function(b,K,G){K.exports={moduleType:"trace",name:"sunburst",basePlotModule:b("./base_plot"),categories:[],animatable:!0,
attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults"),supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc").calc,crossTraceCalc:b("./calc").crossTraceCalc,plot:b("./plot").plot,style:b("./style").style,colorbar:b("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":1205,"./attributes":1299,"./base_plot":1300,"./calc":1301,"./defaults":1303,"./layout_attributes":1307,"./layout_defaults":1308,"./plot":1309,"./style":1310}],1307:[function(b,
K,G){K.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1308:[function(b,K,G){var q=b("../../lib"),m=b("./layout_attributes");K.exports=function(l,h){q.coerce(l,h,m,"sunburstcolorway",h.colorway);q.coerce(l,h,m,"extendsunburstcolors",void 0)}},{"../../lib":778,"./layout_attributes":1307}],1309:[function(b,K,G){function q(y,D,A,t){function B(sa){var ta=z.getPtId(sa),Aa=fa[ta],Ka=fa[z.getPtId(T)];if(Ka){var Sa=(sa.x1>
Ka.x1?2*Math.PI:0)+ba;sa=sa.rpx1<Ka.rpx1?{rpx0:0,rpx1:0}:{x0:Sa,x1:Sa}}else{var db,eb=z.getPtId(sa.parent);P.each(function(ab){if(z.getPtId(ab)===eb)return db=ab});sa=db.children;var lb;sa.forEach(function(ab,Ya){if(z.getPtId(ab)===ta)return lb=Ya});sa=sa.length;Ka=a.interpolate(db.x0,db.x1);sa={rpx0:S,rpx1:S,x0:Ka(lb/sa),x1:Ka((lb+1)/sa)}}return a.interpolate(Aa,sa)}function F(sa){var ta=fa[z.getPtId(sa)],Aa={x0:sa.x0,x1:sa.x1,rpx0:sa.rpx0,rpx1:sa.rpx1};ta||(aa?sa.parent?la?(sa=(sa.x1>la?2*Math.PI:
0)+ba,ta={x0:sa,x1:sa}):(ta={rpx0:S,rpx1:S},n.extendFlat(ta,J(sa))):ta={rpx0:0,rpx1:0}:ta={x0:ba,x1:ba});return a.interpolate(ta,Aa)}function I(sa){var ta=fa[z.getPtId(sa)],Aa=sa.transform;ta||(ta={rpx1:sa.rpx1,transform:{textPosAngle:Aa.textPosAngle,scale:0,rotate:Aa.rotate,rCenter:Aa.rCenter,x:Aa.x,y:Aa.y}},aa?sa.parent?la?ta.x0=ta.x1=sa.x1>la?2*Math.PI:0:n.extendFlat(ta,J(sa)):ta.x0=ta.x1=ba:ta.x0=ta.x1=ba);var Ka=a.interpolate(ta.transform.textPosAngle,sa.transform.textPosAngle),Sa=a.interpolate(ta.rpx1,
sa.rpx1),db=a.interpolate(ta.x0,sa.x0),eb=a.interpolate(ta.x1,sa.x1),lb=a.interpolate(ta.transform.scale,Aa.scale),ab=a.interpolate(ta.transform.rotate,Aa.rotate),Ya=0===Aa.rCenter?3:0===ta.transform.rCenter?1/3:1,hb=a.interpolate(ta.transform.rCenter,Aa.rCenter);return function(nb){var va=Sa(nb),Ba=db(nb),Ga=eb(nb),Na=hb(Math.pow(nb,Ya));Ba=qa(va,(Ba+Ga)/2);Ga=Ka(nb);va={pxmid:Ba,rpx1:va,transform:{textPosAngle:Ga,rCenter:Na,x:Aa.x,y:Aa.y}};c(N.type,Aa,L);return{transform:{targetX:oa(va),targetY:na(va),
scale:lb(nb),rotate:ab(nb),rCenter:Na}}}}function J(sa){var ta=sa.parent,Aa=fa[z.getPtId(ta)],Ka={};Aa?(ta=ta.children,sa=ta.indexOf(sa),ta=ta.length,Aa=a.interpolate(Aa.x0,Aa.x1),Ka.x0=Aa(sa/ta),Ka.x1=Aa(sa/ta)):Ka.x0=Ka.x1=0;return Ka}var L=y._fullLayout,H=!L.uniformtext.mode&&z.hasTransition(t),P=a.select(A).selectAll("g.slice"),M=D[0],N=M.trace,T=z.findEntryWithLevel(M.hierarchy,N.level);A=z.getMaxDepth(N);t=L._size;var Q=N.domain,U=t.h*(Q.y[1]-Q.y[0]),S=.5*Math.min(t.w*(Q.x[1]-Q.x[0]),U),X=M.cx=
t.l+t.w*(Q.x[1]+Q.x[0])/2,Z=M.cy=t.t+t.h*(1-Q.y[0])-U/2;if(!T)return P.remove();var aa=null,fa={};H&&P.each(function(sa){fa[z.getPtId(sa)]={rpx0:sa.rpx0,rpx1:sa.rpx1,x0:sa.x0,x1:sa.x1,transform:sa.transform};!aa&&z.isEntry(sa)&&(aa=sa)});t=m(T).descendants();Q=T.height+1;var ha=0,ja=A;M.hasMultipleRoots&&z.isHierarchyRoot(T)&&(t=t.slice(1),--Q,ha=1,ja+=1);t=t.filter(function(sa){return sa.y1<=ja});var ba=f(N.rotation);ba&&t.forEach(function(sa){sa.x0+=ba;sa.x1+=ba});var ma=Math.min(Q,A),qa=function(sa,
ta){return[sa*Math.cos(ta),-sa*Math.sin(ta)]},ka=function(sa){return n.pathAnnulus(sa.rpx0,sa.rpx1,sa.x0,sa.x1,X,Z)},oa=function(sa){return X+h(sa.rpx1,sa.transform.textPosAngle)[0]*(sa.transform.rCenter||0)+(sa.transform.x||0)},na=function(sa){return Z+h(sa.rpx1,sa.transform.textPosAngle)[1]*(sa.transform.rCenter||0)+(sa.transform.y||0)};P=P.data(t,z.getPtId);P.enter().append("g").classed("slice",!0);H?P.exit().transition().each(function(){var sa=a.select(this);sa.select("path.surface").transition().attrTween("d",
function(ta){var Aa=B(ta);return function(Ka){return ka(Aa(Ka))}});sa.select("g.slicetext").attr("opacity",0)}).remove():P.exit().remove();P.order();var la=null;if(H&&aa){var ia=z.getPtId(aa);P.each(function(sa){null===la&&z.getPtId(sa)===ia&&(la=sa.x1)})}A=P;H&&(A=A.transition().each("end",function(){var sa=a.select(this);z.setSliceCursor(sa,y,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})}));A.each(function(sa){var ta=a.select(this),Aa=n.ensureSingle(ta,"path","surface",function(eb){eb.style("pointer-events",
"all")});sa.rpx0=(sa.y0-ha)/ma*S;sa.rpx1=(sa.y1-ha)/ma*S;sa.xmid=(sa.x0+sa.x1)/2;sa.pxmid=qa(sa.rpx1,sa.xmid);sa.midangle=-(sa.xmid-Math.PI/2);sa.startangle=-(sa.x0-Math.PI/2);sa.stopangle=-(sa.x1-Math.PI/2);sa.halfangle=.5*Math.min(n.angleDelta(sa.x0,sa.x1)||Math.PI,Math.PI);sa.ring=1-sa.rpx0/sa.rpx1;sa.rInscribed=l(sa,N);H?Aa.transition().attrTween("d",function(eb){var lb=F(eb);return function(ab){return ka(lb(ab))}}):Aa.attr("d",ka);ta.call(x,T,y,D,{eventDataKeys:C.eventDataKeys,transitionTime:C.CLICK_TRANSITION_TIME,
transitionEasing:C.CLICK_TRANSITION_EASING}).call(z.setSliceCursor,y,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:y._transitioning});Aa.call(u,sa,N);ta=n.ensureSingle(ta,"g","slicetext");ta=n.ensureSingle(ta,"text","",function(eb){eb.attr("data-notex",1)});var Ka=n.ensureUniformFontSize(y,z.determineTextFont(N,sa,L.font));ta.text(G.formatSliceLabel(sa,T,N,D,L)).classed("slicetext",!0).attr("text-anchor","middle").call(e.font,Ka).call(p.convertToTspans,y);var Sa=e.bBox(ta.node());sa.transform=r(Sa,
sa,M);sa.transform.targetX=oa(sa);sa.transform.targetY=na(sa);var db=function(eb,lb){eb=eb.transform;k(eb,lb);eb.fontSize=Ka.size;c(N.type,eb,L);return n.getTextTransform(eb)};H?ta.transition().attrTween("transform",function(eb){var lb=I(eb);return function(ab){return db(lb(ab),Sa)}}):ta.attr("transform",db(sa,Sa))})}function m(y){return g.partition().size([2*Math.PI,y.height+1])(y)}function l(y){return 0===y.rpx0&&n.isFullCircle([y.x0,y.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(y.halfangle)),y.ring/
2))}function h(y,D){return[y*Math.sin(D),-y*Math.cos(D)]}var a=b("d3"),g=b("d3-hierarchy"),e=b("../../components/drawing"),n=b("../../lib"),p=b("../../lib/svg_text_utils");K=b("../bar/uniform_text");var c=K.recordMinTextSize,d=K.clearMinTextSize;K=b("../pie/plot");var f=b("../pie/helpers").getRotationAngle,k=K.computeTransform,r=K.transformInsideText,u=b("./style").styleOne,v=b("../bar/style").resizeText,x=b("./fx"),C=b("./constants"),z=b("./helpers");G.plot=function(y,D,A,t){var B=y._fullLayout,
F=B._sunburstlayer,I,J=!A,L=!B.uniformtext.mode&&z.hasTransition(A);d("sunburst",B);D=F.selectAll("g.trace.sunburst").data(D,function(H){return H[0].trace.uid});D.enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round");D.order();L?(t&&(I=t()),a.transition().duration(A.duration).ease(A.easing).each("end",function(){I&&I()}).each("interrupt",function(){I&&I()}).each(function(){F.selectAll("g.trace").each(function(H){q(y,H,this,A)})})):(D.each(function(H){q(y,H,
this,A)}),B.uniformtext.mode&&v(y,B._sunburstlayer.selectAll(".trace"),"sunburst"));J&&D.exit().remove()};G.formatSliceLabel=function(y,D,A,t,B){var F=A.texttemplate,I=A.textinfo;if(!(F||I&&"none"!==I))return"";var J=B.separators,L=y.data.data;t=t[0].hierarchy;var H=z.isHierarchyRoot(y),P=z.getParent(t,y),M=z.getValue(y);if(!F){var N=I.split("+");B=function(X){return-1!==N.indexOf(X)};var T=[];B("label")&&L.label&&T.push(L.label);L.hasOwnProperty("v")&&B("value")&&T.push(z.formatValue(L.v,J));if(!H){B("current path")&&
T.push(z.getPath(y.data));y=0;B("percent parent")&&y++;B("percent entry")&&y++;B("percent root")&&y++;var Q=1<y;if(y){y=function(X){S=z.formatPercent(U,J);Q&&(S+=" of "+X);T.push(S)};if(B("percent parent")&&!H){var U=M/z.getValue(P);y("parent")}B("percent entry")&&(U=M/z.getValue(D),y("entry"));B("percent root")&&(U=M/z.getValue(t),y("root"))}}if(B("text")){var S=n.castOption(A,L.i,"text");n.isValidTextValue(S)&&T.push(S)}return T.join("<br>")}F=n.castOption(A,L.i,"texttemplate");if(!F)return"";I=
{};L.label&&(I.label=L.label);L.hasOwnProperty("v")&&(I.value=L.v,I.valueLabel=z.formatValue(L.v,J));I.currentPath=z.getPath(y.data);H||(I.percentParent=M/z.getValue(P),I.percentParentLabel=z.formatPercent(I.percentParent,J),I.parent=z.getPtLabel(P));I.percentEntry=M/z.getValue(D);I.percentEntryLabel=z.formatPercent(I.percentEntry,J);I.entry=z.getPtLabel(D);I.percentRoot=M/z.getValue(t);I.percentRootLabel=z.formatPercent(I.percentRoot,J);I.root=z.getPtLabel(t);L.hasOwnProperty("color")&&(I.color=
L.color);D=n.castOption(A,L.i,"text");if(n.isValidTextValue(D)||""===D)I.text=D;I.customdata=n.castOption(A,L.i,"customdata");return n.texttemplateString(F,I,B._d3locale,I,A._meta||{})}},{"../../components/drawing":665,"../../lib":778,"../../lib/svg_text_utils":803,"../bar/style":935,"../bar/uniform_text":937,"../pie/helpers":1166,"../pie/plot":1170,"./constants":1302,"./fx":1304,"./helpers":1305,"./style":1310,d3:169,"d3-hierarchy":161}],1310:[function(b,K,G){function q(g,e,n){var p=e.data.data;
e=!e.children;var c=p.i,d=h.castOption(n,c,"marker.line.color")||l.defaultLine;c=h.castOption(n,c,"marker.line.width")||0;g.style("stroke-width",c).call(l.fill,p.color).call(l.stroke,d).style("opacity",e?n.leaf.opacity:null)}var m=b("d3"),l=b("../../components/color"),h=b("../../lib"),a=b("../bar/uniform_text").resizeText;K.exports={style:function(g){var e=g._fullLayout._sunburstlayer.selectAll(".trace");a(g,e,"sunburst");e.each(function(n){var p=m.select(this),c=n[0].trace;p.style("opacity",c.opacity);
p.selectAll("path.surface").each(function(d){m.select(this).call(q,d,c)})})},styleOne:q}},{"../../components/color":643,"../../lib":778,"../bar/uniform_text":937,d3:169}],1311:[function(b,K,G){function q(e){return{valType:"boolean",dflt:!1}}function m(e){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:q("x"),y:q("y"),z:q("z")},color:{valType:"color",
dflt:l.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:l.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var l=b("../../components/color");G=b("../../components/colorscale/attributes");var h=b("../../plots/template_attributes").hovertemplateAttrs,a=b("../../plots/attributes"),g=b("../../lib/extend").extendFlat;b=b("../../plot_api/edit_types").overrideAll;
K=K.exports=b(g({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:h(),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},G("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:m("x"),y:m("y"),z:m("z")},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",
min:-1E5,max:1E5,dflt:10},y:{valType:"number",min:-1E5,max:1E5,dflt:1E4},z:{valType:"number",min:-1E5,max:1E5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:g({},G.zauto,{}),zmin:g({},
G.zmin,{}),zmax:g({},G.zmax,{})},hoverinfo:g({},a.hoverinfo),showlegend:g({},a.showlegend,{dflt:!1})}),"calc","nested");K.x.editType=K.y.editType=K.z.editType="calc+clearAxisTypes";K.transforms=void 0},{"../../components/color":643,"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plot_api/edit_types":810,"../../plots/attributes":824,"../../plots/template_attributes":906}],1312:[function(b,K,G){var q=b("../../components/colorscale/calc");K.exports=function(m,l){l.surfacecolor?
q(m,l,{vals:l.surfacecolor,containerStr:"",cLetter:"c"}):q(m,l,{vals:l.z,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":651}],1313:[function(b,K,G){function q(v,x,C){this.scene=v;this.uid=C;this.surface=x;this.data=null;this.showContour=[!1,!1,!1];this.contourStart=[null,null,null];this.contourEnd=[null,null,null];this.contourSize=[0,0,0];this.minValues=[Infinity,Infinity,Infinity];this.maxValues=[-Infinity,-Infinity,-Infinity];this.dataScaleY=this.dataScaleX=1;this.refineData=
!0;this.objectOffset=[0,0,0]}function m(v){for(var x=[],C=0;C<k.length;C++){var z=k[C],y=x,D=y.push;var A=v;if(A<z)z=0;else{for(var t=0;0===Math.floor(A%z);)A/=z,t++;z=t}D.call(y,z)}return x}function l(v,x,C){var z=C[8]+C[2]*x[0]+C[5]*x[1];v[0]=(C[6]+C[0]*x[0]+C[3]*x[1])/z;v[1]=(C[7]+C[1]*x[0]+C[4]*x[1])/z;return v}var h=b("gl-surface3d"),a=b("ndarray"),g=b("ndarray-linear-interpolate").d2,e=b("../heatmap/interp2d"),n=b("../heatmap/find_empties"),p=b("../../lib").isArrayOrTypedArray,c=b("../../lib/gl_format_color").parseColorScale,
d=b("../../lib/str2rgbarray"),f=b("../../components/colorscale").extractOpts;b=q.prototype;b.getXat=function(v,x,C,z){v=p(this.data.x)?p(this.data.x[0])?this.data.x[x][v]:this.data.x[v]:v;return void 0===C?v:z.d2l(v,0,C)};b.getYat=function(v,x,C,z){v=p(this.data.y)?p(this.data.y[0])?this.data.y[x][v]:this.data.y[x]:x;return void 0===C?v:z.d2l(v,0,C)};b.getZat=function(v,x,C,z){var y=this.data.z[x][v];null===y&&this.data.connectgaps&&this.data._interpolatedZ&&(y=this.data._interpolatedZ[x][v]);return void 0===
C?y:z.d2l(y,0,C)};b.handlePick=function(v){if(v.object===this.surface){var x=Math.max(Math.min(Math.round((v.data.index[0]-1)/this.dataScaleX-1),this.data.z[0].length-1),0),C=Math.max(Math.min(Math.round((v.data.index[1]-1)/this.dataScaleY-1),this.data._ylength-1),0);v.index=[x,C];v.traceCoordinate=[this.getXat(x,C),this.getYat(x,C),this.getZat(x,C)];v.dataCoordinate=[this.getXat(x,C,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(x,C,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),
this.getZat(x,C,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var z=0;3>z;z++){var y=v.dataCoordinate[z];null!==y&&void 0!==y&&(v.dataCoordinate[z]*=this.scene.dataScale[z])}z=this.data.hovertext||this.data.text;Array.isArray(z)&&z[C]&&void 0!==z[C][x]?v.textLabel=z[C][x]:v.textLabel=z?z:"";v.data.dataCoordinate=v.dataCoordinate.slice();this.surface.highlight(v.data);this.scene.glplot.spikes.position=v.dataCoordinate;return!0}};var k=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,
67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,
839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,
1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,
2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];b.calcXnums=function(v){var x,C=[];for(x=1;x<v;x++){var z=this.getXat(x-1,0),y=this.getXat(x,0);C[x-1]=y!==
z&&void 0!==z&&null!==z&&void 0!==y&&null!==y?Math.abs(y-z):0}z=0;for(x=1;x<v;x++)z+=C[x-1];for(x=1;x<v;x++)C[x-1]=0===C[x-1]?1:Math.round(z/C[x-1]);return C};b.calcYnums=function(v){var x,C=[];for(x=1;x<v;x++){var z=this.getYat(0,x-1),y=this.getYat(0,x);C[x-1]=y!==z&&void 0!==z&&null!==z&&void 0!==y&&null!==y?Math.abs(y-z):0}z=0;for(x=1;x<v;x++)z+=C[x-1];for(x=1;x<v;x++)C[x-1]=0===C[x-1]?1:Math.round(z/C[x-1]);return C};G=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260];var r=G[9],u=G[13];b.estimateScale=
function(v,x){x=0===x?this.calcXnums(v):this.calcYnums(v);if(0===x.length)x=void 0;else{for(var C=1,z=0;z<x.length;z++){var y=x[z];if(1>C||1>y)C=void 0;else{C=m(C);y=m(y);for(var D=1,A=0;A<k.length;A++)D*=Math.pow(k[A],Math.max(C[A],y[A]));C=D}}x=C}for(z=1+x;z<r;)z*=2;for(;z>u;){z--;C=x=z;z=m(C);for(y=0;y<k.length;y++)if(0<z[y]){C=k[y];break}z=x/C;z++;z<r&&(z=u)}v=Math.round(z/v);return 1<v?v:1};b.refineCoords=function(v){var x=this.dataScaleX,C=this.dataScaleY,z=Math.floor(v[0].shape[0]*x+1)|0,y=
Math.floor(v[0].shape[1]*C+1)|0,D=1+v[0].shape[0]+1,A=1+v[0].shape[1]+1;D=a(new Float32Array(D*A),[D,A]);x=[1/x,0,0,0,1/C,0,0,0,1];for(C=0;C<v.length;++C){this.surface.padField(D,v[C]);for(var t=A=a(new Float32Array(z*y),[z,y]),B=D,F=l,I=x,J=[0,0],L=t.shape[0],H=t.shape[1],P=0;P<L;P++)for(var M=0;M<H;M++)F(J,[P,M],I),t.set(P,M,g(B,J[0],J[1]));v[C]=A}};b.setContourLevels=function(){var v=[[],[],[]],x=[!1,!1,!1],C=!1,z,y;for(z=0;3>z;++z)if(this.showContour[z]&&(C=!0,0<this.contourSize[z]&&null!==this.contourStart[z]&&
null!==this.contourEnd[z]&&this.contourEnd[z]>this.contourStart[z]))for(x[z]=!0,y=this.contourStart[z];y<this.contourEnd[z];y+=this.contourSize[z]){var D=y*this.scene.dataScale[z];for(var A=v[z],t=!1,B=0;B<A.length;B++)if(D===A[B]){t=!0;break}!1===t&&A.push(D)}if(C){C=[[],[],[]];for(z=0;3>z;++z)this.showContour[z]&&(C[z]=x[z]?v[z]:this.scene.contourLevels[z]);this.surface.update({levels:C})}};b.update=function(v){var x=this.scene,C=x.fullSceneLayout,z=this.surface,y=c(v),D=x.dataScale,A=v.z[0].length,
t=v._ylength;x=x.contourLevels;this.data=v;var B,F,I,J=[];for(B=0;3>B;B++)for(J[B]=[],F=0;F<A;F++)J[B][F]=[];for(F=0;F<A;F++)for(I=0;I<t;I++)J[0][F][I]=this.getXat(F,I,v.xcalendar,C.xaxis),J[1][F][I]=this.getYat(F,I,v.ycalendar,C.yaxis),J[2][F][I]=this.getZat(F,I,v.zcalendar,C.zaxis);if(v.connectgaps)for(v._emptypoints=n(J[2]),e(J[2],v._emptypoints),v._interpolatedZ=[],F=0;F<A;F++)for(v._interpolatedZ[F]=[],I=0;I<t;I++)v._interpolatedZ[F][I]=J[2][F][I];for(B=0;3>B;B++)for(F=0;F<A;F++)for(I=0;I<t;I++)C=
J[B][F][I],J[B][F][I]=null===C||void 0===C?NaN:J[B][F][I]*D[B];for(B=0;3>B;B++)for(F=0;F<A;F++)for(I=0;I<t;I++)C=J[B][F][I],null!==C&&void 0!==C&&(this.minValues[B]>C&&(this.minValues[B]=C),this.maxValues[B]<C&&(this.maxValues[B]=C));for(B=0;3>B;B++)this.objectOffset[B]=.5*(this.minValues[B]+this.maxValues[B]);for(B=0;3>B;B++)for(F=0;F<A;F++)for(I=0;I<t;I++)C=J[B][F][I],null!==C&&void 0!==C&&(J[B][F][I]-=this.objectOffset[B]);C=[a(new Float32Array(A*t),[A,t]),a(new Float32Array(A*t),[A,t]),a(new Float32Array(A*
t),[A,t])];for(B=0;3>B;B++)for(F=0;F<A;F++)for(I=0;I<t;I++)C[B].set(F,I,J[B][F][I]);J={colormap:y,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!v.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:v.opacityscale,opacity:v.opacity};B=f(v);J.intensityBounds=[B.min,B.max];if(v.surfacecolor){B=a(new Float32Array(A*
t),[A,t]);for(F=0;F<A;F++)for(I=0;I<t;I++)B.set(F,I,v.surfacecolor[I][F]);C.push(B)}else J.intensityBounds[0]*=D[2],J.intensityBounds[1]*=D[2];if(u<C[0].shape[0]||u<C[0].shape[1])this.refineData=!1;!0===this.refineData&&(this.dataScaleX=this.estimateScale(C[0].shape[0],0),this.dataScaleY=this.estimateScale(C[0].shape[1],1),1===this.dataScaleX&&1===this.dataScaleY||this.refineCoords(C));v.surfacecolor&&(J.intensity=C.pop());A=[!0,!0,!0];t=["x","y","z"];for(B=0;3>B;++B)D=v.contours[t[B]],A[B]=D.highlight,
J.showContour[B]=D.show||D.highlight,J.showContour[B]&&(J.contourProject[B]=[D.project.x,D.project.y,D.project.z],D.show?(this.showContour[B]=!0,J.levels[B]=x[B],z.highlightColor[B]=J.contourColor[B]=d(D.color),z.highlightTint[B]=D.usecolormap?J.contourTint[B]=0:J.contourTint[B]=1,J.contourWidth[B]=D.width,this.contourStart[B]=D.start,this.contourEnd[B]=D.end,this.contourSize[B]=D.size):(this.showContour[B]=!1,this.contourStart[B]=null,this.contourEnd[B]=null,this.contourSize[B]=0),D.highlight&&(J.dynamicColor[B]=
d(D.highlightcolor),J.dynamicWidth[B]=D.highlightwidth));x=y[0].rgb;y=y[y.length-1].rgb;x[0]===y[0]&&x[1]===y[1]&&x[2]===y[2]&&x[3]===y[3]&&(J.vertexColor=!0);J.objectOffset=this.objectOffset;J.coords=C;z.update(J);z.visible=v.visible;z.enableDynamic=A;z.enableHighlight=A;z.snapToData=!0;"lighting"in v&&(z.ambientLight=v.lighting.ambient,z.diffuseLight=v.lighting.diffuse,z.specularLight=v.lighting.specular,z.roughness=v.lighting.roughness,z.fresnel=v.lighting.fresnel);"lightposition"in v&&(z.lightPosition=
[v.lightposition.x,v.lightposition.y,v.lightposition.z])};b.dispose=function(){this.scene.glplot.remove(this.surface);this.surface.dispose()};K.exports=function(v,x){var C=h({gl:v.glplot.gl}),z=new q(v,C,x.uid);C._trace=z;z.update(x);v.glplot.add(C);return z}},{"../../components/colorscale":655,"../../lib":778,"../../lib/gl_format_color":774,"../../lib/str2rgbarray":802,"../heatmap/find_empties":1071,"../heatmap/interp2d":1074,"gl-surface3d":351,ndarray:495,"ndarray-linear-interpolate":489}],1314:[function(b,
K,G){function q(e,n,p,c){e=c("opacityscale");if("max"===e)n.opacityscale=[[0,.1],[1,1]];else if("min"===e)n.opacityscale=[[0,1],[1,.1]];else if("extremes"===e){e=[];for(p=0;32>p;p++)c=p/31,e.push([c,Math.max(0,Math.min(1,.1+.9*(1-Math.pow(Math.sin(1*c*Math.PI),2))))]);n.opacityscale=e}else{a:if(p=0,!Array.isArray(e)||2>e.length||!e[0]||!e[e.length-1]||0!==+e[0][0]||1!==+e[e.length-1][0])e=!1;else{for(c=0;c<e.length;c++){var d=e[c];if(2!==d.length||+d[0]<p){e=!1;break a}p=+d[0]}e=!0}e||(n.opacityscale=
void 0)}}function m(e,n,p){n in e&&!(p in e)&&(e[p]=e[n])}var l=b("../../registry"),h=b("../../lib"),a=b("../../components/colorscale/defaults"),g=b("./attributes");K.exports={supplyDefaults:function(e,n,p,c){function d(C,z){return h.coerce(e,n,g,C,z)}p=d("x");var f=d("y");var k=d("z");if(!k||!k.length||p&&1>p.length||f&&1>f.length)n.visible=!1;else{n._xlength=Array.isArray(p)&&h.isArrayOrTypedArray(p[0])?k.length:k[0].length;n._ylength=k.length;l.getComponentMethod("calendars","handleTraceDefaults")(e,
n,["x","y","z"],c);d("text");d("hovertext");d("hovertemplate");"lighting.ambient lighting.diffuse lighting.specular lighting.roughness lighting.fresnel lightposition.x lightposition.y lightposition.z hidesurface connectgaps opacity".split(" ").forEach(function(C){d(C)});k=d("surfacecolor");var r=["x","y","z"];for(p=0;3>p;++p){var u="contours."+r[p],v=d(u+".show"),x=d(u+".highlight");if(v||x)for(f=0;3>f;++f)d(u+".project."+r[f]);v&&(d(u+".color"),d(u+".width"),d(u+".usecolormap"));x&&(d(u+".highlightcolor"),
d(u+".highlightwidth"));d(u+".start");d(u+".end");d(u+".size")}k||(m(e,"zmin","cmin"),m(e,"zmax","cmax"),m(e,"zauto","cauto"));a(e,n,c,d,{prefix:"",cLetter:"c"});q(e,n,c,d);n._length=null}},opacityscaleDefaults:q}},{"../../components/colorscale/defaults":653,"../../lib":778,"../../registry":911,"./attributes":1311}],1315:[function(b,K,G){K.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults").supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:b("./calc"),plot:b("./convert"),moduleType:"trace",
name:"surface",basePlotModule:b("../../plots/gl3d"),categories:["gl3d","2dMap","showLegend"],meta:{}}},{"../../plots/gl3d":870,"./attributes":1311,"./calc":1312,"./convert":1313,"./defaults":1314}],1316:[function(b,K,G){G=b("../../components/annotations/attributes");var q=b("../../lib/extend").extendFlat,m=b("../../plot_api/edit_types").overrideAll,l=b("../../plots/font_attributes"),h=b("../../plots/domain").attributes;b("../../constants/docs");(K.exports=m({domain:h({name:"table",trace:!0}),columnwidth:{valType:"number",
arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[]},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:q({},G.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:q({},l({arrayOk:!0}))},cells:{values:{valType:"data_array",
dflt:[]},format:{valType:"data_array",dflt:[]},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:q({},G.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:q({},l({arrayOk:!0}))}},"calc","from-root")).transforms=void 0},{"../../components/annotations/attributes":626,"../../constants/docs":748,
"../../lib/extend":768,"../../plot_api/edit_types":810,"../../plots/domain":855,"../../plots/font_attributes":856}],1317:[function(b,K,G){var q=b("../../plots/get_data").getModuleCalcData,m=b("./plot");G.name="table";G.plot=function(l){var h=q(l.calcdata,"table")[0];h.length&&m(l,h)};G.clean=function(l,h,a,g){l=g._has&&g._has("table");h=h._has&&h._has("table");l&&!h&&g._paperdiv.selectAll(".table").remove()}},{"../../plots/get_data":865,"./plot":1324}],1318:[function(b,K,G){var q=b("../../lib/gup").wrap;
K.exports=function(){return q({})}},{"../../lib/gup":775}],1319:[function(b,K,G){K.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1E3,scrollbarHideDuration:1E3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",
wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",
scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},{}],1320:[function(b,K,G){function q(f){if(Array.isArray(f)){for(var k=0,r=0;r<f.length;r++)k=Math.max(k,q(f[r]));return k}return f}function m(f,k){return f+k}function l(f){f=f.slice();var k=Infinity,r=0,u;for(u=0;u<f.length;u++)Array.isArray(f[u])||(f[u]=[f[u]]),k=Math.min(k,f[u].length),r=Math.max(r,f[u].length);if(k!==r)for(u=0;u<f.length;u++)(k=r-f[u].length)&&
(f[u]=f[u].concat(h(k)));return f}function h(f){for(var k=Array(f),r=0;r<f;r++)k[r]="";return k}function a(f){return f.calcdata.columns.reduce(function(k,r){return r.xIndex<f.xIndex?k+r.columnWidth:k},0)}function g(f,k){return Object.keys(f).map(function(r){return c({},f[r],{auxiliaryBlocks:k})})}function e(f,k){for(var r={},u,v=0,x=0,C=n(),z=0,y=0,D=0;D<f.length;D++)if(u=f[D],C.rows.push({rowIndex:D,rowHeight:u}),x+=u,x>=k||D===f.length-1)r[v]=C,C.key=y++,C.firstRowIndex=z,C.lastRowIndex=D,C=n(),
v+=x,z=D+1,x=0;return r}function n(){return{firstRowIndex:null,lastRowIndex:null,rows:[]}}var p=b("./constants"),c=b("../../lib/extend").extendFlat,d=b("fast-isnumeric");K.exports=function(f,k){var r=l(k.cells.values),u=function(H){return H.slice(k.header.values.length,H.length)},v=l(k.header.values);v.length&&!v[0].length&&(v[0]=[""],v=l(v));var x=v.concat(u(r).map(function(){return h((v[0]||[""]).length)})),C=k.domain,z=Math.floor(f._fullLayout._size.w*(C.x[1]-C.x[0])),y=Math.floor(f._fullLayout._size.h*
(C.y[1]-C.y[0])),D=k.header.values.length?x[0].map(function(){return k.header.height}):[p.emptyHeaderHeight],A=r.length?r[0].map(function(){return k.cells.height}):[],t=D.reduce(m,0);A=e(A,y-t+p.uplift);D=e(D,t);D=g(D,[]);A=g(A,D);var B={},F=k._fullInput.columnorder.concat(u(r.map(function(H,P){return P}))),I=x.map(function(H,P){H=Array.isArray(k.columnwidth)?k.columnwidth[Math.min(P,k.columnwidth.length-1)]:k.columnwidth;return d(H)?Number(H):1}),J=I.reduce(m,0);I=I.map(function(H){return H/J*z});
u=Math.max(q(k.header.line.width),q(k.cells.line.width));var L={key:k.uid+f._context.staticPlot,translateX:C.x[0]*f._fullLayout._size.w,translateY:f._fullLayout._size.h*(1-C.y[1]),size:f._fullLayout._size,width:z,maxLineWidth:u,height:y,columnOrder:F,groupHeight:y,rowBlocks:A,headerRowBlocks:D,scrollY:0,cells:c({},k.cells,{values:r}),headerCells:c({},k.header,{values:x}),gdColumns:x.map(function(H){return H[0]}),gdColumnsOriginalOrder:x.map(function(H){return H[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},
columns:x.map(function(H,P){B[H]=(B[H]||0)+1;return{key:H+"__"+B[H],label:H,specIndex:P,xIndex:F[P],xScale:a,x:void 0,calcdata:void 0,columnWidth:I[P]}})};L.columns.forEach(function(H){H.calcdata=L;H.x=a(H)});return L}},{"../../lib/extend":768,"./constants":1319,"fast-isnumeric":241}],1321:[function(b,K,G){function q(l){var h=(l=l.rowBlocks[l.page])?l.rows[0].rowIndex:0;return[h,l?h+l.rows.length:0]}var m=b("../../lib/extend").extendFlat;G.splitToPanels=function(l){var h=[0,0],a=m({},l,{key:"header",
type:"header",page:0,prevPages:h,currentRepaint:[null,null],dragHandle:!0,values:l.calcdata.headerCells.values[l.specIndex],rowBlocks:l.calcdata.headerRowBlocks,calcdata:m({},l.calcdata,{cells:l.calcdata.headerCells})}),g=m({},l,{key:"cells1",type:"cells",page:0,prevPages:h,currentRepaint:[null,null],dragHandle:!1,values:l.calcdata.cells.values[l.specIndex],rowBlocks:l.calcdata.rowBlocks});l=m({},l,{key:"cells2",type:"cells",page:1,prevPages:h,currentRepaint:[null,null],dragHandle:!1,values:l.calcdata.cells.values[l.specIndex],
rowBlocks:l.calcdata.rowBlocks});return[g,l,a]};G.splitToCells=function(l){var h=q(l);return(l.values||[]).slice(h[0],h[1]).map(function(a,g){var e="string"===typeof a&&a.match(/[<$&> ]/)?"_keybuster_"+Math.random():"";return{keyWithinBlock:g+e,key:h[0]+g,column:l,calcdata:l.calcdata,page:l.page,rowBlocks:l.rowBlocks,value:a}})}},{"../../lib/extend":768}],1322:[function(b,K,G){function q(a,g){var e=a.header.values.length;a=(a.columnorder||[]).slice(0,e);var n=a.slice().sort(function(c,d){return c-
d});a=a.map(function(c){return n.indexOf(c)});for(var p=a.length;p<e;p++)a.push(p);g("columnorder",a)}var m=b("../../lib"),l=b("./attributes"),h=b("../../plots/domain").defaults;K.exports=function(a,g,e,n){function p(c,d){return m.coerce(a,g,l,c,d)}h(g,n,p);p("columnwidth");p("header.values");p("header.format");p("header.align");p("header.prefix");p("header.suffix");p("header.height");p("header.line.width");p("header.line.color");p("header.fill.color");m.coerceFont(p,"header.font",m.extendFlat({},
n.font));q(g,p);p("cells.values");p("cells.format");p("cells.align");p("cells.prefix");p("cells.suffix");p("cells.height");p("cells.line.width");p("cells.line.color");p("cells.fill.color");m.coerceFont(p,"cells.font",m.extendFlat({},n.font));g._length=null}},{"../../lib":778,"../../plots/domain":855,"./attributes":1316}],1323:[function(b,K,G){K.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc"),plot:b("./plot"),moduleType:"trace",name:"table",basePlotModule:b("./base_plot"),
categories:["noOpacity"],meta:{}}},{"./attributes":1316,"./base_plot":1317,"./calc":1318,"./defaults":1322,"./plot":1324}],1324:[function(b,K,G){function q(ha){return Math.ceil(ha.calcdata.maxLineWidth/2)}function m(ha,ja){return"clip"+ha._fullLayout._uid+"_columnBoundaryClippath_"+ja.calcdata.key+"_"+ja.specIndex}function l(ha){return[].concat.apply([],ha.map(function(ja){return ja})).map(function(ja){return ja.__data__})}function h(ha,ja,ba){var ma=ha.selectAll("."+P.cn.scrollbarKit).data(N.repeat,
N.keyFun);ma.enter().append("g").classed(P.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision");ma.each(function(ka){var oa=ka.scrollbarState;var na=ka.rowBlocks;na=L(na,na.length-1)+(na.length?H(na[na.length-1],Infinity):1);oa.totalHeight=na;oa.scrollableAreaHeight=ka.groupHeight-z(ka);oa.currentlyVisibleHeight=Math.min(oa.totalHeight,oa.scrollableAreaHeight);oa.ratio=oa.currentlyVisibleHeight/oa.totalHeight;oa.barLength=Math.max(oa.ratio*oa.currentlyVisibleHeight,P.goldenRatio*P.scrollbarWidth);
oa.barWiggleRoom=oa.currentlyVisibleHeight-oa.barLength;oa.wiggleRoom=Math.max(0,oa.totalHeight-oa.scrollableAreaHeight);oa.topY=0===oa.barWiggleRoom?0:ka.scrollY/oa.wiggleRoom*oa.barWiggleRoom;oa.bottomY=oa.topY+oa.barLength;oa.dragMultiplier=oa.wiggleRoom/oa.barWiggleRoom}).attr("transform",function(ka){return S(ka.width+P.scrollbarWidth/2+P.scrollbarOffset,z(ka))});ma=ma.selectAll("."+P.cn.scrollbar).data(N.repeat,N.keyFun);ma.enter().append("g").classed(P.cn.scrollbar,!0);var qa=ma.selectAll("."+
P.cn.scrollbarSlider).data(N.repeat,N.keyFun);qa.enter().append("g").classed(P.cn.scrollbarSlider,!0);qa.attr("transform",function(ka){return S(0,ka.scrollbarState.topY||0)});qa=qa.selectAll("."+P.cn.scrollbarGlyph).data(N.repeat,N.keyFun);qa.enter().append("line").classed(P.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",P.scrollbarWidth).attr("stroke-linecap","round").attr("y1",P.scrollbarWidth/2);qa.attr("y2",function(ka){return ka.scrollbarState.barLength-P.scrollbarWidth/2}).attr("stroke-opacity",
function(ka){return ka.columnDragInProgress||!ka.scrollbarState.barWiggleRoom||ba?0:.4});qa.transition().delay(0).duration(0);qa.transition().delay(P.scrollbarHideDelay).duration(P.scrollbarHideDuration).attr("stroke-opacity",0);ma=ma.selectAll("."+P.cn.scrollbarCaptureZone).data(N.repeat,N.keyFun);ma.enter().append("line").classed(P.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",P.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",
function(ka){var oa=M.event.y,na=this.getBoundingClientRect(),la=ka.scrollbarState;oa-=na.top;na=M.scale.linear().domain([0,la.scrollableAreaHeight]).range([0,la.totalHeight]).clamp(!0);la.topY<=oa&&oa<=la.bottomY||A(ja,ha,null,na(oa-la.barLength/2))(ka)}).call(M.behavior.drag().origin(function(ka){M.event.stopPropagation();ka.scrollbarState.scrollbarScrollInProgress=!0;return ka}).on("drag",A(ja,ha)).on("dragend",function(){}));ma.attr("y2",function(ka){return ka.scrollbarState.scrollableAreaHeight});
ja._context.staticPlot&&(qa.remove(),ma.remove())}function a(ha,ja,ba,ma){ba=ba.selectAll("."+P.cn.columnCells).data(N.repeat,N.keyFun);ba.enter().append("g").classed(P.cn.columnCells,!0);ba.exit().remove();ba=g(ba);c(ba);var qa=e(ba);f(qa);qa=p(ba);qa=n(qa);d(qa);k(qa,ja,ma,ha);J(ba)}function g(ha){ha=ha.selectAll("."+P.cn.columnCell).data(aa.splitToCells,function(ja){return ja.keyWithinBlock});ha.enter().append("g").classed(P.cn.columnCell,!0);ha.exit().remove();return ha}function e(ha){ha=ha.selectAll("."+
P.cn.cellRect).data(N.repeat,function(ja){return ja.keyWithinBlock});ha.enter().append("rect").classed(P.cn.cellRect,!0);return ha}function n(ha){ha=ha.selectAll("."+P.cn.cellText).data(N.repeat,function(ja){return ja.keyWithinBlock});ha.enter().append("text").classed(P.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){M.event.stopPropagation()});return ha}function p(ha){ha=ha.selectAll("."+P.cn.cellTextHolder).data(N.repeat,function(ja){return ja.keyWithinBlock});
ha.enter().append("g").classed(P.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision");return ha}function c(ha){ha.each(function(ja,ba){var ma=ja.calcdata.cells.font,qa=ja.column.specIndex;ma={size:u(ma.size,qa,ba),color:u(ma.color,qa,ba),family:u(ma.family,qa,ba)};ja.rowNumber=ja.key;ja.align=u(ja.calcdata.cells.align,qa,ba);ja.cellBorderWidth=u(ja.calcdata.cells.line.width,qa,ba);ja.font=ma})}function d(ha){ha.each(function(ja){T.font(M.select(this),ja.font)})}function f(ha){ha.attr("width",
function(ja){return ja.column.columnWidth}).attr("stroke-width",function(ja){return ja.cellBorderWidth}).each(function(ja){var ba=M.select(this);fa.stroke(ba,u(ja.calcdata.cells.line.color,ja.column.specIndex,ja.rowNumber));fa.fill(ba,u(ja.calcdata.cells.fill.color,ja.column.specIndex,ja.rowNumber))})}function k(ha,ja,ba,ma){ha.text(function(qa){var ka=qa.column.specIndex,oa=qa.rowNumber,na=qa.value,la="string"===typeof na,ia=la&&na.match(/<br>/i),sa=!la||ia;qa.mayHaveMarkup=la&&na.match(/[<&>]/);
na="string"===typeof na&&na.match(P.latexCheck);la=(qa.latex=na)?"":u(qa.calcdata.cells.prefix,ka,oa)||"";var ta=na?"":u(qa.calcdata.cells.suffix,ka,oa)||"";ka=na?null:u(qa.calcdata.cells.format,ka,oa)||null;ka=la+(ka?M.format(ka)(qa.value):qa.value)+ta;var Aa;qa.wrappingNeeded=!qa.wrapped&&!sa&&!na&&(Aa=-1!==ka.indexOf(P.wrapSplitCharacter));qa.cellHeightMayIncrease=ia||na||qa.mayHaveMarkup||(void 0===Aa?-1!==ka.indexOf(P.wrapSplitCharacter):Aa);qa.needsConvertToTspans=qa.mayHaveMarkup||qa.wrappingNeeded||
qa.latex;qa.wrappingNeeded?(ia=(" "===P.wrapSplitCharacter?ka.replace(/<a href=/ig,"<a_href="):ka).split(P.wrapSplitCharacter),ia=" "===P.wrapSplitCharacter?ia.map(function(Ka){return Ka.replace(/<a_href=/ig,"<a href=")}):ia,qa.fragments=ia.map(function(Ka){return{text:Ka,width:null}}),qa.fragments.push({fragment:P.wrapSpacer,width:null}),qa=ia.join(P.lineBreaker)+P.lineBreaker+P.wrapSpacer):(delete qa.fragments,qa=ka);return qa}).attr("dy",function(qa){return qa.needsConvertToTspans?0:"0.75em"}).each(function(qa){var ka=
M.select(this),oa=qa.wrappingNeeded?B:F;qa.needsConvertToTspans?Q.convertToTspans(ka,ma,oa(ba,this,ja,ma,qa)):M.select(this.parentNode).attr("transform",function(na){return S(I(na),P.cellPad)}).attr("text-anchor",function(na){return{left:"start",center:"middle",right:"end"}[na.align]})})}function r(ha,ja,ba){var ma=ja.gdColumnsOriginalOrder;ja.gdColumns.sort(function(qa,ka){return ba[ma.indexOf(qa)]-ba[ma.indexOf(ka)]});ja.columnorder=ba;ha.emit("plotly_restyle")}function u(ha,ja,ba){return Array.isArray(ha)?
(ha=ha[Math.min(ja,ha.length-1)],Array.isArray(ha)?ha[Math.min(ba,ha.length-1)]:ha):ha}function v(ha,ja,ba){ha.transition().ease(P.releaseTransitionEase).duration(P.releaseTransitionDuration).attr("transform",S(ja.x,ba))}function x(ha){return"cells"===ha.type}function C(ha){return"header"===ha.type}function z(ha){return(ha.rowBlocks.length?ha.rowBlocks[0].auxiliaryBlocks:[]).reduce(function(ja,ba){return ja+H(ba,Infinity)},0)}function y(ha,ja,ba){for(var ma=[],qa=0,ka=0;ka<ha.length;ka++){for(var oa=
ha[ka],na=oa.rows,la=0,ia=0;ia<na.length;ia++)la+=na[ia].rowHeight;oa.allRowsHeight=la;oa=ja;na=oa+ba;oa<qa+la&&na>qa&&ma.push(ka);qa+=la}return ma}function D(ha,ja,ba){var ma=l(ja)[0];if(void 0!==ma){var qa=ma.rowBlocks,ka=ma.calcdata,oa=L(qa,qa.length),na=ma.calcdata.groupHeight-z(ma),la=ka.scrollY=Math.max(0,Math.min(oa-na,ka.scrollY)),ia=y(qa,la,na);1===ia.length&&(ia[0]===qa.length-1?ia.unshift(ia[0]-1):ia.push(ia[0]+1));ia[0]%2&&ia.reverse();ja.each(function(sa,ta){sa.page=ia[ta];sa.scrollY=
la});ja.attr("transform",function(sa){sa=L(sa.rowBlocks,sa.page)-sa.scrollY;return S(0,sa)});ha&&(t(ha,ba,ja,ia,ma.prevPages,ma,0),t(ha,ba,ja,ia,ma.prevPages,ma,1),h(ba,ha))}}function A(ha,ja,ba,ma){return function(qa){var ka=qa.calcdata?qa.calcdata:qa;qa=ja.filter(function(la){return ka.key===la.key});var oa=ba||ka.scrollbarState.dragMultiplier,na=ka.scrollY;ka.scrollY=void 0===ma?ka.scrollY+oa*M.event.dy:ma;oa=qa.selectAll("."+P.cn.yColumn).selectAll("."+P.cn.columnBlock).filter(x);D(ha,oa,qa);
return ka.scrollY===na}}function t(ha,ja,ba,ma,qa,ka,oa){ma[oa]!==qa[oa]&&(clearTimeout(ka.currentRepaint[oa]),ka.currentRepaint[oa]=setTimeout(function(){var na=ba.filter(function(la,ia){return ia===oa&&ma[ia]!==qa[ia]});a(ha,ja,na,ba);qa[oa]=ma[oa]}))}function B(ha,ja,ba,ma){return function(){var qa=M.select(ja.parentNode);qa.each(function(ka){var oa=ka.fragments;qa.selectAll("tspan.line").each(function(Sa,db){oa[db].width=this.getComputedTextLength()});var na=oa[oa.length-1].width,la=oa.slice(0,
-1),ia=[],sa=0,ta=ka.column.columnWidth-2*P.cellPad;for(ka.value="";la.length;){var Aa=la.shift();var Ka=Aa.width+na;sa+Ka>ta&&(ka.value+=ia.join(P.wrapSpacer)+P.lineBreaker,ia=[],sa=0);ia.push(Aa.text);sa+=Ka}sa&&(ka.value+=ia.join(P.wrapSpacer));ka.wrapped=!0});qa.selectAll("tspan.line").remove();k(qa.select("."+P.cn.cellText),ba,ha,ma);M.select(ja.parentNode.parentNode).call(J)}}function F(ha,ja,ba,ma,qa){return function(){if(!qa.settledY){var ka=M.select(ja.parentNode),oa=qa.rowBlocks[qa.page],
na=qa.key-oa.firstRowIndex,la=oa.rows[na].rowHeight,ia=qa.cellHeightMayIncrease?ja.parentNode.getBoundingClientRect().height+2*P.cellPad:la;la=Math.max(ia,la);la-oa.rows[na].rowHeight&&(oa.rows[na].rowHeight=la,ha.selectAll("."+P.cn.columnCell).call(J),D(null,ha.filter(x),0),h(ba,ma,!0));ka.attr("transform",function(){var sa=this.parentNode.getBoundingClientRect(),ta=M.select(this.parentNode).select("."+P.cn.cellRect).node().getBoundingClientRect(),Aa=this.transform.baseVal.consolidate();sa=ta.top-
sa.top+(Aa?Aa.matrix.f:P.cellPad);return S(I(qa,M.select(this.parentNode).select("."+P.cn.cellTextHolder).node().getBoundingClientRect().width),sa)});qa.settledY=!0}}}function I(ha,ja){switch(ha.align){case "left":return P.cellPad;case "right":return ha.column.columnWidth-(ja||0)-P.cellPad;case "center":return(ha.column.columnWidth-(ja||0))/2;default:return P.cellPad}}function J(ha){ha.attr("transform",function(ja){var ba=ja.rowBlocks[0].auxiliaryBlocks.reduce(function(ma,qa){return ma+H(qa,Infinity)},
0);ja=H(ja.rowBlocks[ja.page],ja.key);return S(0,ja+ba)}).selectAll("."+P.cn.cellRect).attr("height",function(ja){var ba=ja.rowBlocks[ja.page];return ba.rows[ja.key-ba.firstRowIndex].rowHeight})}function L(ha,ja){var ba=0;for(--ja;0<=ja;ja--){var ma=ha[ja];var qa=ma.allRowsHeight;if(void 0!==qa)ma=qa;else{for(var ka=qa=0;ka<ma.rows.length;ka++)qa+=ma.rows[ka].rowHeight;ma=ma.allRowsHeight=qa}ba+=ma}return ba}function H(ha,ja){for(var ba=0,ma=0;ma<ha.rows.length&&ha.rows[ma].rowIndex<ja;ma++)ba+=ha.rows[ma].rowHeight;
return ba}var P=b("./constants"),M=b("d3"),N=b("../../lib/gup"),T=b("../../components/drawing"),Q=b("../../lib/svg_text_utils"),U=b("../../lib").raiseToTop,S=b("../../lib").strTranslate,X=b("../../lib").cancelTransition,Z=b("./data_preparation_helper"),aa=b("./data_split_helpers"),fa=b("../../components/color");K.exports=function(ha,ja){var ba=!ha._context.staticPlot;ja=ha._fullLayout._paper.selectAll("."+P.cn.table).data(ja.map(function(na){na=N.unwrap(na).trace;return Z(ha,na)}),N.keyFun);ja.exit().remove();
ja.enter().append("g").classed(P.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all");ja.attr("width",function(na){return na.width+na.size.l+na.size.r}).attr("height",function(na){return na.height+na.size.t+na.size.b}).attr("transform",function(na){return S(na.translateX,na.translateY)});var ma=ja.selectAll("."+P.cn.tableControlView).data(N.repeat,
N.keyFun);ja=ma.enter().append("g").classed(P.cn.tableControlView,!0).style("box-sizing","content-box");if(ba){var qa="onwheel"in document?"wheel":"mousewheel";ja.on("mousemove",function(na){ma.filter(function(la){return na===la}).call(h,ha)}).on(qa,function(na){na.scrollbarState.wheeling||(na.scrollbarState.wheeling=!0,A(ha,ma,null,na.scrollY+M.event.deltaY)(na)||(M.event.stopPropagation(),M.event.preventDefault()),na.scrollbarState.wheeling=!1)}).call(h,ha,!0)}ma.attr("transform",function(na){return S(na.size.l,
na.size.t)});ja=ma.selectAll("."+P.cn.scrollBackground).data(N.repeat,N.keyFun);ja.enter().append("rect").classed(P.cn.scrollBackground,!0).attr("fill","none");ja.attr("width",function(na){return na.width}).attr("height",function(na){return na.height});ma.each(function(na){T.setClipUrl(M.select(this),"clip"+ha._fullLayout._uid+"_scrollAreaBottomClip_"+na.key,ha)});var ka=ma.selectAll("."+P.cn.yColumn).data(function(na){return na.columns},N.keyFun);ka.enter().append("g").classed(P.cn.yColumn,!0);ka.exit().remove();
ka.attr("transform",function(na){return S(na.x,0)});ba&&ka.call(M.behavior.drag().origin(function(na){var la=M.select(this);v(la,na,-P.uplift);U(this);na.calcdata.columnDragInProgress=!0;h(ma.filter(function(ia){return na.calcdata.key===ia.key}),ha);return na}).on("drag",function(na){var la=M.select(this);na.x=Math.max(-P.overdrag,Math.min(na.calcdata.width+P.overdrag-na.columnWidth,M.event.x));l(ka).filter(function(ia){return ia.calcdata.key===na.calcdata.key}).sort(function(ia,sa){return(na===ia?
M.event.x:ia.x)+ia.columnWidth/2-((na===sa?M.event.x:sa.x)+sa.columnWidth/2)}).forEach(function(ia,sa){ia.xIndex=sa;ia.x=na===ia?ia.x:ia.xScale(ia)});ka.filter(function(ia){return na!==ia}).transition().ease(P.transitionEase).duration(P.transitionDuration).attr("transform",function(ia){return S(ia.x,0)});la.call(X).attr("transform",S(na.x,-P.uplift))}).on("dragend",function(na){var la=M.select(this),ia=na.calcdata;na.x=na.xScale(na);na.calcdata.columnDragInProgress=!1;v(la,na,0);r(ha,ia,ia.columns.map(function(sa){return sa.xIndex}))}));
ka.each(function(na){T.setClipUrl(M.select(this),m(ha,na),ha)});qa=ka.selectAll("."+P.cn.columnBlock).data(aa.splitToPanels,N.keyFun);qa.enter().append("g").classed(P.cn.columnBlock,!0).attr("id",function(na){return na.key});qa.style("cursor",function(na){return na.dragHandle?"ew-resize":na.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var oa=qa.filter(C);ja=qa.filter(x);ba&&ja.call(M.behavior.drag().origin(function(na){M.event.stopPropagation();return na}).on("drag",A(ha,ma,-1)).on("dragend",
function(){}));a(ha,ma,oa,qa);a(ha,ma,ja,qa);ba=ma.selectAll("."+P.cn.scrollAreaClip).data(N.repeat,N.keyFun);ba.enter().append("clipPath").classed(P.cn.scrollAreaClip,!0).attr("id",function(na){return"clip"+ha._fullLayout._uid+"_scrollAreaBottomClip_"+na.key});ba=ba.selectAll("."+P.cn.scrollAreaClipRect).data(N.repeat,N.keyFun);ba.enter().append("rect").classed(P.cn.scrollAreaClipRect,!0).attr("x",-P.overdrag).attr("y",-P.uplift).attr("fill","none");ba.attr("width",function(na){return na.width+2*
P.overdrag}).attr("height",function(na){return na.height+P.uplift});ka.selectAll("."+P.cn.columnBoundary).data(N.repeat,N.keyFun).enter().append("g").classed(P.cn.columnBoundary,!0);ba=ka.selectAll("."+P.cn.columnBoundaryClippath).data(N.repeat,N.keyFun);ba.enter().append("clipPath").classed(P.cn.columnBoundaryClippath,!0);ba.attr("id",function(na){return m(ha,na)});ba=ba.selectAll("."+P.cn.columnBoundaryRect).data(N.repeat,N.keyFun);ba.enter().append("rect").classed(P.cn.columnBoundaryRect,!0).attr("fill",
"none");ba.attr("width",function(na){return na.columnWidth+2*q(na)}).attr("height",function(na){return na.calcdata.height+2*q(na)+P.uplift}).attr("x",function(na){return-q(na)}).attr("y",function(na){return-q(na)});D(null,ja,ma)}},{"../../components/color":643,"../../components/drawing":665,"../../lib":778,"../../lib/gup":775,"../../lib/svg_text_utils":803,"./constants":1319,"./data_preparation_helper":1320,"./data_split_helpers":1321,d3:169}],1325:[function(b,K,G){G=b("../../plots/template_attributes").hovertemplateAttrs;
var q=b("../../plots/template_attributes").texttemplateAttrs,m=b("../../components/colorscale/attributes"),l=b("../../plots/domain").attributes,h=b("../pie/attributes"),a=b("../sunburst/attributes"),g=b("./constants");b=b("../../lib/extend").extendFlat;K.exports={labels:a.labels,parents:a.parents,values:a.values,branchvalues:a.branchvalues,count:a.count,level:a.level,maxdepth:a.maxdepth,tiling:{packing:{valType:"enumerated",values:"squarify binary dice slice slice-dice dice-slice".split(" "),dflt:"squarify",
editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:b({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:a.marker.colors,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},
line:a.marker.line,editType:"calc"},m("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:b({},h.textfont,{}),editType:"calc"},text:h.text,textinfo:a.textinfo,texttemplate:q({editType:"plot"},{keys:g.eventDataKeys.concat(["label",
"value"])}),hovertext:h.hovertext,hoverinfo:a.hoverinfo,hovertemplate:G({},{keys:g.eventDataKeys}),textfont:h.textfont,insidetextfont:h.insidetextfont,outsidetextfont:b({},h.outsidetextfont,{}),textposition:{valType:"enumerated",values:"top left;top center;top right;middle left;middle center;middle right;bottom left;bottom center;bottom right".split(";"),dflt:"top left",editType:"plot"},sort:h.sort,root:a.root,domain:l({name:"treemap",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":650,
"../../lib/extend":768,"../../plots/domain":855,"../../plots/template_attributes":906,"../pie/attributes":1161,"../sunburst/attributes":1299,"./constants":1328}],1326:[function(b,K,G){var q=b("../../plots/plots");G.name="treemap";G.plot=function(m,l,h,a){q.plotBasePlot(G.name,m,l,h,a)};G.clean=function(m,l,h,a){q.cleanBasePlot(G.name,m,l,h,a)}},{"../../plots/plots":891}],1327:[function(b,K,G){var q=b("../sunburst/calc");G.calc=function(m,l){return q.calc(m,l)};G.crossTraceCalc=function(m){return q._runCrossTraceCalc("treemap",
m)}},{"../sunburst/calc":1301}],1328:[function(b,K,G){K.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:"currentPath root entry percentRoot percentEntry percentParent".split(" "),gapWithPathbar:1}},{}],1329:[function(b,K,G){var q=b("../../lib"),m=b("./attributes"),l=b("../../components/color"),h=b("../../plots/domain").defaults,a=b("../bar/defaults").handleText,g=b("../bar/constants").TEXTPAD;b=b("../../components/colorscale");var e=b.hasColorscale,n=b.handleDefaults;
K.exports=function(p,c,d,f){function k(x,C){return q.coerce(p,c,m,x,C)}d=k("labels");var r=k("parents");if(d&&d.length&&r&&r.length){(d=k("values"))&&d.length?k("branchvalues"):k("count");k("level");k("maxdepth");"squarify"===k("tiling.packing")&&k("tiling.squarifyratio");k("tiling.flip");k("tiling.pad");d=k("text");k("texttemplate");c.texttemplate||k("textinfo",Array.isArray(d)?"text+label":"label");k("hovertext");k("hovertemplate");d=k("pathbar.visible");a(p,c,f,k,"auto",{hasPathbar:d,moduleHasSelected:!1,
moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1});k("textposition");r=-1!==c.textposition.indexOf("bottom");k("marker.line.width")&&k("marker.line.color",f.paper_bgcolor);var u=k("marker.colors"),v=c._hasColorscale=e(p,"marker","colors")||(p.marker||{}).coloraxis;v?n(p,c,f,k,{prefix:"marker.",cLetter:"c"}):k("marker.depthfade",!(u||[]).length);u=2*c.textfont.size;k("marker.pad.t",r?u/4:u);k("marker.pad.l",u/4);k("marker.pad.r",u/4);
k("marker.pad.b",r?u:u/4);v&&n(p,c,f,k,{prefix:"marker.",cLetter:"c"});c._hovered={marker:{line:{width:2,color:l.contrast(f.paper_bgcolor)}}};d&&(k("pathbar.thickness",c.pathbar.textfont.size+2*g),k("pathbar.side"),k("pathbar.edgeshape"));k("sort");k("root.color");h(c,f,k);c._length=null}else c.visible=!1}},{"../../components/color":643,"../../components/colorscale":655,"../../lib":778,"../../plots/domain":855,"../bar/constants":923,"../bar/defaults":925,"./attributes":1325}],1330:[function(b,K,G){var q=
b("d3"),m=b("../../lib"),l=b("../../components/drawing"),h=b("../../lib/svg_text_utils"),a=b("./partition"),g=b("./style").styleOne,e=b("./constants"),n=b("../sunburst/helpers"),p=b("../sunburst/fx");K.exports=function(c,d,f,k,r){var u=r.barDifY,v=r.width,x=r.height,C=r.viewX,z=r.viewY,y=r.pathSlice,D=r.toMoveInsideSlice,A=r.strTransform,t=r.hasTransition,B=r.handleSlicesExit,F=r.makeUpdateSliceInterpolator,I=r.makeUpdateTextInterpolator,J={},L=c._fullLayout;r=d[0];var H=r.trace;r=r.hierarchy;var P=
v/H._entryDepth,M=n.listPath(f.data,"id");r=a(r.copy(),[v,x],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();r=r.filter(function(N){var T=M.indexOf(N.data.id);if(-1===T)return!1;N.x0=P*T;N.x1=P*(T+1);N.y0=u;N.y1=u+x;return N.onPathbar=!0});r.reverse();k=k.data(r,n.getPtId);k.enter().append("g").classed("pathbar",!0);B(k,!0,J,[v,x],y);k.order();t&&(k=k.transition().each("end",function(){var N=q.select(this);n.setSliceCursor(N,c,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})}));
k.each(function(N){N._hoverX=C(N.x1-Math.min(v,x)/2);N._hoverY=z(N.y1-x/2);var T=q.select(this),Q=m.ensureSingle(T,"path","surface",function(U){U.style("pointer-events","all")});t?Q.transition().attrTween("d",function(U){var S=F(U,!0,J,[v,x]);return function(X){return y(S(X))}}):Q.attr("d",y);T.call(p,f,c,d,{styleOne:g,eventDataKeys:e.eventDataKeys,transitionTime:e.CLICK_TRANSITION_TIME,transitionEasing:e.CLICK_TRANSITION_EASING}).call(n.setSliceCursor,c,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:c._transitioning});
Q.call(g,N,H,{hovered:!1});N._text=(n.getPtLabel(N)||"").split("<br>").join(" ")||"";T=m.ensureSingle(T,"g","slicetext");T=m.ensureSingle(T,"text","",function(U){U.attr("data-notex",1)});Q=m.ensureUniformFontSize(c,n.determineTextFont(H,N,L.font,{onPathbar:!0}));T.text(N._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(l.font,Q).call(h.convertToTspans,c);N.textBB=l.bBox(T.node());N.transform=D(N,{fontSize:Q.size,onPathbar:!0});N.transform.fontSize=Q.size;t?T.transition().attrTween("transform",
function(U){var S=I(U,!0,J,[v,x]);return function(X){return A(S(X))}}):T.attr("transform",A(N))})}},{"../../components/drawing":665,"../../lib":778,"../../lib/svg_text_utils":803,"../sunburst/fx":1304,"../sunburst/helpers":1305,"./constants":1328,"./partition":1335,"./style":1337,d3:169}],1331:[function(b,K,G){var q=b("d3"),m=b("../../lib"),l=b("../../components/drawing"),h=b("../../lib/svg_text_utils"),a=b("./partition"),g=b("./style").styleOne,e=b("./constants"),n=b("../sunburst/helpers"),p=b("../sunburst/fx"),
c=b("../sunburst/plot").formatSliceLabel;K.exports=function(d,f,k,r,u){var v=u.width,x=u.height,C=u.viewX,z=u.viewY,y=u.pathSlice,D=u.toMoveInsideSlice,A=u.strTransform,t=u.hasTransition,B=u.handleSlicesExit,F=u.makeUpdateSliceInterpolator,I=u.makeUpdateTextInterpolator;u=u.prevEntry;var J=d._fullLayout,L=f[0].trace,H=-1!==L.textposition.indexOf("left"),P=-1!==L.textposition.indexOf("right"),M=-1!==L.textposition.indexOf("bottom"),N=!M&&!L.marker.pad.t||M&&!L.marker.pad.b,T=a(k,[v,x],{packing:L.tiling.packing,
squarifyratio:L.tiling.squarifyratio,flipX:-1<L.tiling.flip.indexOf("x"),flipY:-1<L.tiling.flip.indexOf("y"),pad:{inner:L.tiling.pad,top:L.marker.pad.t,left:L.marker.pad.l,right:L.marker.pad.r,bottom:L.marker.pad.b}}).descendants(),Q=Infinity,U=-Infinity;T.forEach(function(Z){var aa=Z.depth;aa>=L._maxDepth?(Z.x0=Z.x1=(Z.x0+Z.x1)/2,Z.y0=Z.y1=(Z.y0+Z.y1)/2):(Q=Math.min(Q,aa),U=Math.max(U,aa))});r=r.data(T,n.getPtId);L._maxVisibleLayers=isFinite(U)?U-Q+1:0;r.enter().append("g").classed("slice",!0);B(r,
!1,{},[v,x],y);r.order();var S=null;if(t&&u){var X=n.getPtId(u);r.each(function(Z){null===S&&n.getPtId(Z)===X&&(S={x0:Z.x0,x1:Z.x1,y0:Z.y0,y1:Z.y1})})}t&&(r=r.transition().each("end",function(){var Z=q.select(this);n.setSliceCursor(Z,d,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})}));r.each(function(Z){var aa=n.isHeader(Z,L);Z._hoverX=C(Z.x1-L.marker.pad.r);Z._hoverY=M?z(Z.y1-L.marker.pad.b/2):z(Z.y0+L.marker.pad.t/2);var fa=q.select(this),ha=m.ensureSingle(fa,"path","surface",function(ja){ja.style("pointer-events",
"all")});t?ha.transition().attrTween("d",function(ja){var ba=F(ja,!1,S||{x0:0,x1:v,y0:0,y1:x},[v,x]);return function(ma){return y(ba(ma))}}):ha.attr("d",y);fa.call(p,k,d,f,{styleOne:g,eventDataKeys:e.eventDataKeys,transitionTime:e.CLICK_TRANSITION_TIME,transitionEasing:e.CLICK_TRANSITION_EASING}).call(n.setSliceCursor,d,{isTransitioning:d._transitioning});ha.call(g,Z,L,{hovered:!1});Z._text=Z.x0===Z.x1||Z.y0===Z.y1?"":aa?N?"":n.getPtLabel(Z)||"":c(Z,k,L,f,J)||"";fa=m.ensureSingle(fa,"g","slicetext");
fa=m.ensureSingle(fa,"text","",function(ja){ja.attr("data-notex",1)});ha=m.ensureUniformFontSize(d,n.determineTextFont(L,Z,J.font));fa.text(Z._text||" ").classed("slicetext",!0).attr("text-anchor",P?"end":H||aa?"start":"middle").call(l.font,ha).call(h.convertToTspans,d);Z.textBB=l.bBox(fa.node());Z.transform=D(Z,{fontSize:ha.size,isHeader:aa});Z.transform.fontSize=ha.size;t?fa.transition().attrTween("transform",function(ja){var ba=I(ja,!1,S||{x0:0,x1:v,y0:0,y1:x},[v,x]);return function(ma){return A(ba(ma))}}):
fa.attr("transform",A(Z))});return S}},{"../../components/drawing":665,"../../lib":778,"../../lib/svg_text_utils":803,"../sunburst/fx":1304,"../sunburst/helpers":1305,"../sunburst/plot":1309,"./constants":1328,"./partition":1335,"./style":1337,d3:169}],1332:[function(b,K,G){K.exports={moduleType:"trace",name:"treemap",basePlotModule:b("./base_plot"),categories:[],animatable:!0,attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults"),supplyLayoutDefaults:b("./layout_defaults"),
calc:b("./calc").calc,crossTraceCalc:b("./calc").crossTraceCalc,plot:b("./plot"),style:b("./style").style,colorbar:b("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":1205,"./attributes":1325,"./base_plot":1326,"./calc":1327,"./defaults":1329,"./layout_attributes":1333,"./layout_defaults":1334,"./plot":1336,"./style":1337}],1333:[function(b,K,G){K.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],
1334:[function(b,K,G){var q=b("../../lib"),m=b("./layout_attributes");K.exports=function(l,h){q.coerce(l,h,m,"treemapcolorway",h.colorway);q.coerce(l,h,m,"extendtreemapcolors",void 0)}},{"../../lib":778,"./layout_attributes":1333}],1335:[function(b,K,G){function q(h,a){switch(h){case "squarify":return l.treemapSquarify.ratio(a);case "binary":return l.treemapBinary;case "dice":return l.treemapDice;case "slice":return l.treemapSlice;default:return l.treemapSliceDice}}function m(h,a,g){if(g.swapXY){var e=
h.x0;h.x0=h.y0;h.y0=e;e=h.x1;h.x1=h.y1;h.y1=e}g.flipX&&(e=h.x0,h.x0=a[0]-h.x1,h.x1=a[0]-e);g.flipY&&(e=h.y0,h.y0=a[1]-h.y1,h.y1=a[1]-e);if(h=h.children)for(e=0;e<h.length;e++)m(h[e],a,g)}var l=b("d3-hierarchy");K.exports=function(h,a,g){var e=g.flipX,n=g.flipY,p="dice-slice"===g.packing,c=g.pad[n?"bottom":"top"],d=g.pad[e?"right":"left"],f=g.pad[e?"left":"right"],k=g.pad[n?"top":"bottom"];if(p){var r=d;d=c;c=r;r=f;f=k;k=r}h=l.treemap().tile(q(g.packing,g.squarifyratio)).paddingInner(g.pad.inner).paddingLeft(d).paddingRight(f).paddingTop(c).paddingBottom(k).size(p?
[a[1],a[0]]:a)(h);(p||e||n)&&m(h,a,{swapXY:p,flipX:e,flipY:n});return h}},{"d3-hierarchy":161}],1336:[function(b,K,G){function q(r){return h.isHierarchyRoot(r)?"":h.getPtId(r)}function m(r,u,v,x){var C=r._fullLayout,z=u[0],y=z.trace,D=z.hierarchy,A=h.findEntryWithLevel(D,y.level),t=l.select(v);v=t.selectAll("g.pathbar");t=t.selectAll("g.slice");if(A){var B=h.isHierarchyRoot(A),F=!C.uniformtext.mode&&h.hasTransition(x),I=h.getMaxDepth(y),J=C._size,L=y.domain,H=J.w*(L.x[1]-L.x[0]);x=J.h*(L.y[1]-L.y[0]);
var P=y.pathbar.thickness,M=y.marker.line.width+d.gapWithPathbar;M=y.pathbar.visible?-1<y.pathbar.side.indexOf("bottom")?x+M:-(P+M):0;var N={x0:H,x1:H,y0:M,y1:M+P},T=function(ta,Aa,Ka){var Sa=y.tiling.pad;return{x0:ta.x0-Sa-Sa<=Aa.x0?0:ta.x0-Sa+Sa>=Aa.x1?Ka[0]:ta.x0,x1:ta.x1+Sa-Sa<=Aa.x0?0:ta.x1+Sa+Sa>=Aa.x1?Ka[0]:ta.x1,y0:ta.y0-Sa-Sa<=Aa.y0?0:ta.y0-Sa+Sa>=Aa.y1?Ka[1]:ta.y0,y1:ta.y1+Sa-Sa<=Aa.y0?0:ta.y1+Sa+Sa>=Aa.y1?Ka[1]:ta.y1}},Q=null,U={},S={},X=null,Z=function(ta,Aa){return Aa?U[q(ta)]:S[q(ta)]};
z.hasMultipleRoots&&B&&I++;y._maxDepth=I;y._backgroundColor=C.paper_bgcolor;y._entryDepth=A.data.depth;y._atRootLevel=B;var aa=-H/2+J.l+J.w*(L.x[1]+L.x[0])/2,fa=-x/2+J.t+J.h*(1-(L.y[1]+L.y[0])/2),ha=fa+0,ja=aa+0;z=function(ta){return ja+ta};B=function(ta){return ha+ta};var ba=ja+0,ma=function(ta){ta.x=Math.max(ba,ta.x)},qa=y.pathbar.edgeshape;J=function(ta){var Aa=ja+Math.max(Math.min(ta.x0,ta.x0),0),Ka=ja+Math.min(Math.max(ta.x1,ta.x1),H),Sa=ha+ta.y0,db=ha+ta.y1;ta=P/2;var eb={},lb={};eb.x=Aa;lb.x=
Ka;eb.y=lb.y=(Sa+db)/2;var ab={x:Aa,y:Sa};Sa={x:Ka,y:Sa};Ka={x:Ka,y:db};Aa={x:Aa,y:db};">"===qa?(ab.x-=ta,Sa.x-=ta,Ka.x-=ta,Aa.x-=ta):"/"===qa?(Ka.x-=ta,Aa.x-=ta,eb.x-=ta/2,lb.x-=ta/2):"\\"===qa?(ab.x-=ta,Sa.x-=ta,eb.x-=ta/2,lb.x-=ta/2):"<"===qa&&(eb.x-=ta,lb.x-=ta);ma(ab);ma(Aa);ma(eb);ma(Sa);ma(Ka);ma(lb);return"M"+(ab.x+","+ab.y)+"L"+(Sa.x+","+Sa.y)+"L"+(lb.x+","+lb.y)+"L"+(Ka.x+","+Ka.y)+"L"+(Aa.x+","+Aa.y)+"L"+(eb.x+","+eb.y)+"Z"};var ka=function(ta,Aa){var Ka=ta.x0,Sa=ta.x1,db=ta.y0,eb=ta.y1;
ta=ta.textBB;var lb=-1!==y.textposition.indexOf("bottom"),ab=-1!==y.textposition.indexOf("top")||Aa.isHeader&&!lb?"start":lb?"end":"middle",Ya=-1!==y.textposition.indexOf("right"),hb=-1!==y.textposition.indexOf("left")||Aa.onPathbar,nb=y.marker.pad;Aa.isHeader&&(Ka+=nb.l-g,Sa-=nb.r-g,Ka>=Sa&&(Ka=Sa=(Ka+Sa)/2),lb?(lb=eb-nb.b,db<lb&&lb<eb&&(db=lb)):(lb=db+nb.t,db<lb&&lb<eb&&(eb=lb)));ta=e(Ka,Sa,db,eb,ta,{isHorizontal:!1,constrained:!0,angle:0,anchor:ab,leftToRight:hb?-1:Ya?1:0});ta.fontSize=Aa.fontSize;
ta.targetX=aa+ta.targetX;ta.targetY=fa+ta.targetY;if(isNaN(ta.targetX)||isNaN(ta.targetY))return{};Ka!==Sa&&db!==eb&&n(y.type,ta,C);return{scale:ta.scale,rotate:ta.rotate,textX:ta.textX,textY:ta.textY,anchorX:ta.anchorX,anchorY:ta.anchorY,targetX:ta.targetX,targetY:ta.targetY}},oa=function(ta,Aa){for(var Ka,Sa=0;!Ka&&Sa<I;)Sa++,(ta=ta.parent)?Ka=Z(ta,Aa):Sa=I;return Ka||{}},na=function(ta,Aa,Ka,Sa){Ka=Z(ta,Aa);ta=Aa?N:(Aa=Z(A,Aa))?T(ta,Aa,Sa):{};return l.interpolate(Ka,ta)};L=function(ta,Aa,Ka,Sa){var db=
Z(ta,Aa);db?Sa=db:Aa?Sa=N:Q?ta.parent?(Ka=X||Ka)&&!Aa?Sa=T(ta,Ka,Sa):(Sa={},a.extendFlat(Sa,oa(ta,Aa))):Sa=ta:Sa={};return l.interpolate(Sa,{x0:ta.x0,x1:ta.x1,y0:ta.y0,y1:ta.y1})};var la=function(ta,Aa,Ka,Sa){var db=Z(ta,Aa),eb={};Aa?Sa=U[q(D)]||N:(Ka=S[y.level]||Ka,Sa=ta.data.depth-A.data.depth<I?T(ta,Ka,Sa):{});a.extendFlat(eb,{transform:ka({x0:Sa.x0,x1:Sa.x1,y0:Sa.y0,y1:Sa.y1,textBB:ta.textBB,_text:ta._text},{isHeader:h.isHeader(ta,y)})});db?eb=db:ta.parent&&a.extendFlat(eb,oa(ta,Aa));Aa=ta.transform;
ta.x0!==ta.x1&&ta.y0!==ta.y1&&n(y.type,Aa,C);return l.interpolate(eb,{transform:{scale:Aa.scale,rotate:Aa.rotate,textX:Aa.textX,textY:Aa.textY,anchorX:Aa.anchorX,anchorY:Aa.anchorY,targetX:Aa.targetX,targetY:Aa.targetY}})},ia=function(ta,Aa,Ka,Sa,db){var eb=Sa[0],lb=Sa[1];F?ta.exit().transition().each(function(){var ab=l.select(this);ab.select("path.surface").transition().attrTween("d",function(Ya){var hb=na(Ya,Aa,Ka,[eb,lb]);return function(nb){return db(hb(nb))}});ab.select("g.slicetext").attr("opacity",
0)}).remove():ta.exit().remove()},sa=function(ta){var Aa=ta.transform;ta.x0!==ta.x1&&ta.y0!==ta.y1&&n(y.type,Aa,C);return a.getTextTransform({textX:Aa.textX,textY:Aa.textY,anchorX:Aa.anchorX,anchorY:Aa.anchorY,targetX:Aa.targetX,targetY:Aa.targetY,scale:Aa.scale,rotate:Aa.rotate})};F&&(v.each(function(ta){U[q(ta)]={x0:ta.x0,x1:ta.x1,y0:ta.y0,y1:ta.y1};ta.transform&&(U[q(ta)].transform={textX:ta.transform.textX,textY:ta.transform.textY,anchorX:ta.transform.anchorX,anchorY:ta.transform.anchorY,targetX:ta.transform.targetX,
targetY:ta.transform.targetY,scale:ta.transform.scale,rotate:ta.transform.rotate})}),t.each(function(ta){S[q(ta)]={x0:ta.x0,x1:ta.x1,y0:ta.y0,y1:ta.y1};ta.transform&&(S[q(ta)].transform={textX:ta.transform.textX,textY:ta.transform.textY,anchorX:ta.transform.anchorX,anchorY:ta.transform.anchorY,targetX:ta.transform.targetX,targetY:ta.transform.targetY,scale:ta.transform.scale,rotate:ta.transform.rotate});!Q&&h.isEntry(ta)&&(Q=ta)}));X=f(r,u,A,t,{width:H,height:x,viewX:function(ta){return aa+ta},viewY:function(ta){return fa+
ta},pathSlice:function(ta){var Aa=aa+ta.x0,Ka=aa+ta.x1,Sa=fa+ta.y0;ta=fa+ta.y1;return Ka-Aa&&ta-Sa?"M"+(Aa+","+(Sa+0))+"L"+(Ka-0+","+Sa)+"L"+(Ka+","+(ta-0))+"L"+(Aa+0+","+ta)+"Z":""},toMoveInsideSlice:ka,prevEntry:Q,makeUpdateSliceInterpolator:L,makeUpdateTextInterpolator:la,handleSlicesExit:ia,hasTransition:F,strTransform:sa});y.pathbar.visible?k(r,u,A,v,{barDifY:M,width:H,height:P,viewX:z,viewY:B,pathSlice:J,toMoveInsideSlice:ka,makeUpdateSliceInterpolator:L,makeUpdateTextInterpolator:la,handleSlicesExit:ia,
hasTransition:F,strTransform:sa}):v.remove()}else v.remove(),t.remove()}var l=b("d3"),h=b("../sunburst/helpers"),a=b("../../lib"),g=b("../bar/constants").TEXTPAD,e=b("../bar/plot").toMoveInsideBar;G=b("../bar/uniform_text");var n=G.recordMinTextSize,p=G.clearMinTextSize,c=b("../bar/style").resizeText,d=b("./constants"),f=b("./draw_descendants"),k=b("./draw_ancestors");K.exports=function(r,u,v,x){var C=r._fullLayout,z=C._treemaplayer,y,D=!v;p("treemap",C);u=z.selectAll("g.trace.treemap").data(u,function(A){return A[0].trace.uid});
u.enter().append("g").classed("trace",!0).classed("treemap",!0);u.order();!C.uniformtext.mode&&h.hasTransition(v)?(x&&(y=x()),l.transition().duration(v.duration).ease(v.easing).each("end",function(){y&&y()}).each("interrupt",function(){y&&y()}).each(function(){z.selectAll("g.trace").each(function(A){m(r,A,this,v)})})):(u.each(function(A){m(r,A,this,v)}),C.uniformtext.mode&&c(r,C._treemaplayer.selectAll(".trace"),"treemap"));D&&u.exit().remove()}},{"../../lib":778,"../bar/constants":923,"../bar/plot":932,
"../bar/style":935,"../bar/uniform_text":937,"../sunburst/helpers":1305,"./constants":1328,"./draw_ancestors":1330,"./draw_descendants":1331,d3:169}],1337:[function(b,K,G){function q(e,n,p,c){var d=(c||{}).hovered;c=n.data.data;var f=c.i;c=c.color;var k=a.isHierarchyRoot(n),r=1;if(d)d=p._hovered.marker.line.color,f=p._hovered.marker.line.width;else if(k&&c===p.root.color)r=100,d="rgba(0,0,0,0)",f=0;else if(d=h.castOption(p,f,"marker.line.color")||l.defaultLine,f=h.castOption(p,f,"marker.line.width")||
0,!p._hasColorscale&&!n.onPathbar){var u=p.marker.depthfade;if(u&&(k=l.combine(l.addOpacity(p._backgroundColor,.75),c),!0===u?(u=a.getMaxDepth(p),n=isFinite(u)?a.isLeaf(n)?0:p._maxVisibleLayers-(n.data.depth-p._entryDepth):n.data.height+1):(n=n.data.depth-p._entryDepth,p._atRootLevel||n++),0<n))for(p=0;p<n;p++)c=l.combine(l.addOpacity(k,.5*p/n),c)}e.style("stroke-width",f).call(l.fill,c).call(l.stroke,d).style("opacity",r)}var m=b("d3"),l=b("../../components/color"),h=b("../../lib"),a=b("../sunburst/helpers"),
g=b("../bar/uniform_text").resizeText;K.exports={style:function(e){var n=e._fullLayout._treemaplayer.selectAll(".trace");g(e,n,"treemap");n.each(function(p){var c=m.select(this),d=p[0].trace;c.style("opacity",d.opacity);c.selectAll("path.surface").each(function(f){m.select(this).call(q,f,d,{hovered:!1})})})},styleOne:q}},{"../../components/color":643,"../../lib":778,"../bar/uniform_text":937,"../sunburst/helpers":1305,d3:169}],1338:[function(b,K,G){G=b("../box/attributes");b=b("../../lib/extend").extendFlat;
K.exports={y:G.y,x:G.x,x0:G.x0,y0:G.y0,name:b({},G.name,{}),orientation:b({},G.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",
editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:G.fillcolor,points:b({},G.boxpoints,{}),jitter:b({},G.jitter,{}),pointpos:b({},G.pointpos,{}),width:b({},G.width,{}),marker:G.marker,text:G.text,hovertext:G.hovertext,hovertemplate:G.hovertemplate,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},
width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:G.offsetgroup,alignmentgroup:G.alignmentgroup,selected:G.selected,unselected:G.unselected,hoveron:{valType:"flaglist",flags:["violins","points",
"kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},{"../../lib/extend":768,"../box/attributes":946}],1339:[function(b,K,G){function q(e,n,p,c){function d(v){var x=k[v];x="multicategory"===p.type?p.r2c(x):p.d2c(x,0,e[n.valLetter+"calendar"]);return x===g?u[v]:x}var f=e.spanmode,k=e.span||[],r=[n.min,n.max],u=[n.min-2*c,n.max+2*c];c="soft"===f?u:"hard"===f?r:[d(0),d(1)];f={type:"linear",range:c};l.setConvert(f);f.cleanRange();return c}var m=b("../../lib"),l=b("../../plots/cartesian/axes"),
h=b("../box/calc"),a=b("./helpers"),g=b("../../constants/numerical").BADNUM;K.exports=function(e,n){var p=h(e,n);if(p[0].t.empty)return p;for(var c=e._fullLayout,d=l.getFromId(e,n["h"===n.orientation?"xaxis":"yaxis"]),f=Infinity,k=-Infinity,r=0,u=0,v=0;v<p.length;v++){var x=p[v],C=x.pts.map(a.extractVal),z=x;var y=x;var D=y.max-y.min;if(D)if(n.bandwidth)y=Math.max(n.bandwidth,D/1E4);else{var A=C.length,t=m.stdev(C,A-1,y.mean);y=Math.max(1.059*Math.min(t,(y.q3-y.q1)/1.349)*Math.pow(A,-.2),D/100)}else y=
n.bandwidth?n.bandwidth:0;D=z.bandwidth=y;z=x.span=q(n,x,d,D);if(x.min===x.max&&0===D)z=x.span=[x.min,x.max],x.density=[{v:1,t:z[0]}],x.bandwidth=D,r=Math.max(r,1);else{y=z[1]-z[0];A=Math.ceil(y/(D/3));y/=A;if(!isFinite(y)||!isFinite(A))return m.error("Something went wrong with computing the violin span"),p[0].t.empty=!0,p;D=a.makeKDE(x,n,C);x.density=Array(A);A=0;for(t=z[0];t<z[1]+y/2;A++,t+=y){var B=D(t);x.density[A]={v:B,t:t};r=Math.max(r,B)}}u=Math.max(u,C.length);f=Math.min(f,z[0]);k=Math.max(k,
z[1])}f=l.findExtremes(d,[f,k],{padded:!0});n._extremes[d._id]=f;n.width?p[0].t.maxKDE=r:(c=c._violinScaleGroupStats,n=n.scalegroup,(d=c[n])?(d.maxKDE=Math.max(d.maxKDE,r),d.maxCount=Math.max(d.maxCount,u)):c[n]={maxKDE:r,maxCount:u});p[0].t.labels.kde=m._(e,"kde:");return p}},{"../../constants/numerical":753,"../../lib":778,"../../plots/cartesian/axes":828,"../box/calc":947,"./helpers":1342}],1340:[function(b,K,G){var q=b("../box/cross_trace_calc").setPositionOffset,m=["v","h"];K.exports=function(l,
h){var a=l.calcdata,g=h.xaxis;h=h.yaxis;for(var e=0;e<m.length;e++){for(var n=m[e],p="h"===n?h:g,c=[],d=0;d<a.length;d++){var f=a[d],k=f[0].t;f=f[0].trace;!0!==f.visible||"violin"!==f.type||k.empty||f.orientation!==n||f.xaxis!==g._id||f.yaxis!==h._id||c.push(d)}q("violin",l,c,p)}}},{"../box/cross_trace_calc":948}],1341:[function(b,K,G){var q=b("../../lib"),m=b("../../components/color"),l=b("../box/defaults"),h=b("./attributes");K.exports=function(a,g,e,n){function p(u,v){return q.coerce(a,g,h,u,v)}
function c(u,v){return q.coerce2(a,g,h,u,v)}l.handleSampleDefaults(a,g,p,n);if(!1!==g.visible){p("bandwidth");p("side");p("width")||(p("scalegroup",g.name),p("scalemode"));n=p("span");var d;Array.isArray(n)&&(d="manual");p("spanmode",d);d=p("line.color",(a.marker||{}).color||e);e=p("line.width");var f=p("fillcolor",m.addOpacity(g.line.color,.5));l.handlePointsDefaults(a,g,p,{prefix:""});n=c("box.width");f=c("box.fillcolor",f);var k=c("box.line.color",d),r=c("box.line.width",e);p("box.visible",!!(n||
f||k||r))||(g.box={visible:!1});d=c("meanline.color",d);e=c("meanline.width",e);p("meanline.visible",!(!d&&!e))||(g.meanline={visible:!1})}}},{"../../components/color":643,"../../lib":778,"../box/defaults":949,"./attributes":1338}],1342:[function(b,K,G){var q=b("../../lib");G.makeKDE=function(m,l,h){var a=h.length,g=m.bandwidth,e=1/(a*g);return function(n){for(var p=0,c=0;c<a;c++){var d=(n-h[c])/g;p+=1/Math.sqrt(2*Math.PI)*Math.exp(-.5*d*d)}return e*p}};G.getPositionOnKdePath=function(m,l,h){if("h"===
l.orientation){var a="y";var g="x"}else a="x",g="y";h=q.findPointOnPath(m.path,h,g,{pathLength:m.pathLength});m=m.posCenterPx;a=h[a];return[a,"both"===l.side?2*m-a:m]};G.getKdeValue=function(m,l,h){var a=m.pts.map(G.extractVal);return G.makeKDE(m,l,a)(h)/m.posDensityScale};G.extractVal=function(m){return m.v}},{"../../lib":778}],1343:[function(b,K,G){var q=b("../../lib"),m=b("../../plots/cartesian/axes"),l=b("../box/hover"),h=b("./helpers");K.exports=function(a,g,e,n,p){var c=a.cd,d=c[0].trace,f=
d.hoveron,k=-1!==f.indexOf("violins"),r=-1!==f.indexOf("kde"),u=[],v;if(k||r){var x=l.hoverOnBoxes(a,g,e,n);if(r&&0<x.length){var C=a.xa,z=a.ya;if("h"===d.orientation){var y=g;r="y";var D=z;var A="x"}else y=e,r="x",D=C,A="y",C=z;var t=c[a.index];if(y>=t.span[0]&&y<=t.span[1]){var B=q.extendFlat({},a);z=C.c2p(y,!0);var F=h.getKdeValue(t,d,y);t=h.getPositionOnKdePath(t,d,z);var I=D._offset;D=D._length;B[r+"0"]=t[0];B[r+"1"]=t[1];B[A+"0"]=B[A+"1"]=z;B[A+"Label"]=A+": "+m.hoverLabelText(C,y)+", "+c[0].t.labels.kde+
" "+F.toFixed(3);B.spikeDistance=x[0].spikeDistance;c=r+"Spike";B[c]=x[0][c];x[0].spikeDistance=void 0;x[0][c]=void 0;B.hovertemplate=!1;u.push(B);B={stroke:a.color};B[r+"1"]=q.constrain(I+t[0],I,I+D);B[r+"2"]=q.constrain(I+t[1],I,I+D);B[A+"1"]=B[A+"2"]=C._offset+z}}k&&(u=u.concat(x))}-1!==f.indexOf("points")&&(v=l.hoverOnPoints(a,g,e));a=p.selectAll(".violinline-"+d.uid).data(B?[0]:[]);a.enter().append("line").classed("violinline-"+d.uid,!0).attr("stroke-width",1.5);a.exit().remove();a.attr(B);if("closest"===
n)return v?[v]:u;v&&u.push(v);return u}},{"../../lib":778,"../../plots/cartesian/axes":828,"../box/hover":951,"./helpers":1342}],1344:[function(b,K,G){K.exports={attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults"),crossTraceDefaults:b("../box/defaults").crossTraceDefaults,supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc"),crossTraceCalc:b("./cross_trace_calc"),plot:b("./plot"),style:b("./style"),styleOnSelect:b("../scatter/style").styleOnSelect,
hoverPoints:b("./hover"),selectPoints:b("../box/select"),moduleType:"trace",name:"violin",basePlotModule:b("../../plots/cartesian"),categories:"cartesian svg symbols oriented box-violin showLegend violinLayout zoomScale".split(" "),meta:{}}},{"../../plots/cartesian":841,"../box/defaults":949,"../box/select":956,"../scatter/style":1211,"./attributes":1338,"./calc":1339,"./cross_trace_calc":1340,"./defaults":1341,"./hover":1343,"./layout_attributes":1345,"./layout_defaults":1346,"./plot":1347,"./style":1348}],
1345:[function(b,K,G){G=b("../box/layout_attributes");b=b("../../lib").extendFlat;K.exports={violinmode:b({},G.boxmode,{}),violingap:b({},G.boxgap,{}),violingroupgap:b({},G.boxgroupgap,{})}},{"../../lib":778,"../box/layout_attributes":953}],1346:[function(b,K,G){var q=b("../../lib"),m=b("./layout_attributes"),l=b("../box/layout_defaults");K.exports=function(h,a,g){l._supply(h,a,g,function(e,n){return q.coerce(h,a,m,e,n)},"violin")}},{"../../lib":778,"../box/layout_defaults":954,"./layout_attributes":1345}],
1347:[function(b,K,G){var q=b("d3"),m=b("../../lib"),l=b("../../components/drawing"),h=b("../box/plot"),a=b("../scatter/line_points"),g=b("./helpers");K.exports=function(e,n,p,c){function d(u){u=a(u,{xaxis:k,yaxis:r,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return l.smoothopen(u[0],1)}var f=e._fullLayout,k=n.xaxis,r=n.yaxis;m.makeTraceGroups(c,p,"trace violins").each(function(u){var v=q.select(this);u=u[0];var x=u.t,C=u.trace;if(!0!==C.visible||x.empty)v.remove();
else{var z=x.bPos,y=x.bdPos,D=n[x.valLetter+"axis"],A=n[x.posLetter+"axis"],t="both"===C.side,B=t||"positive"===C.side,F=t||"negative"===C.side;u=v.selectAll("path.violin").data(m.identity);u.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","violin");u.exit().remove();u.each(function(L){var H=q.select(this),P=L.density,M=P.length,N=A.c2l(L.pos+z,!0),T=A.l2p(N);if(C.width)var Q=x.maxKDE/y;else Q=f._violinScaleGroupStats[C.scalegroup],Q="count"===C.scalemode?Q.maxKDE/
y*(Q.maxCount/L.pts.length):Q.maxKDE/y;var U;if(B){var S=Array(M);for(U=0;U<M;U++){var X=S[U]={};X[x.posLetter]=N+P[U].v/Q;X[x.valLetter]=D.c2l(P[U].t,!0)}var Z=d(S)}if(F){S=Array(M);var aa=0;for(U=M-1;aa<M;aa++,U--)X=S[aa]={},X[x.posLetter]=N-P[U].v/Q,X[x.valLetter]=D.c2l(P[U].t,!0);aa=d(S)}t?Z=Z+"L"+aa.substr(1)+"Z":(N=[T,D.c2p(P[0].t)],P=[T,D.c2p(P[M-1].t)],"h"===C.orientation&&(N.reverse(),P.reverse()),Z=B?"M"+N+"L"+Z.substr(1)+"L"+P:"M"+P+"L"+aa.substr(1)+"L"+N);H.attr("d",Z);L.posCenterPx=T;
L.posDensityScale=Q*y;L.path=H.node();L.pathLength=L.path.getTotalLength()/(t?2:1)});var I=C.box;u=I.width;I=(I.line||{}).width;t?(u*=y,I=0):B?(u=[0,y*u/2],I*={x:1,y:-1}[x.posLetter]):(u=[y*u/2,0],I*={x:-1,y:1}[x.posLetter]);h.plotBoxAndWhiskers(v,{pos:A,val:D},C,{bPos:z,bdPos:u,bPosPxOffset:I});h.plotBoxMean(v,{pos:A,val:D},C,{bPos:z,bdPos:u,bPosPxOffset:I});if(!C.box.visible&&C.meanline.visible)var J=m.identity;J=v.selectAll("path.meanline").data(J||[]);J.enter().append("path").attr("class","meanline").style("fill",
"none").style("vector-effect","non-scaling-stroke");J.exit().remove();J.each(function(L){var H=D.c2p(L.mean,!0);L=g.getPositionOnKdePath(L,C,H);q.select(this).attr("d","h"===C.orientation?"M"+H+","+L[0]+"V"+L[1]:"M"+L[0]+","+H+"H"+L[1])});h.plotPoints(v,{x:k,y:r},C,x)}})}},{"../../components/drawing":665,"../../lib":778,"../box/plot":955,"../scatter/line_points":1201,"./helpers":1342,d3:169}],1348:[function(b,K,G){var q=b("d3"),m=b("../../components/color"),l=b("../scatter/style").stylePoints;K.exports=
function(h){var a=q.select(h).selectAll("g.trace.violins");a.style("opacity",function(g){return g[0].trace.opacity});a.each(function(g){g=g[0].trace;var e=q.select(this),n=g.box||{},p=n.line||{},c=g.meanline||{},d=c.width;e.selectAll("path.violin").style("stroke-width",g.line.width+"px").call(m.stroke,g.line.color).call(m.fill,g.fillcolor);e.selectAll("path.box").style("stroke-width",p.width+"px").call(m.stroke,p.color).call(m.fill,n.fillcolor);n={"stroke-width":d+"px","stroke-dasharray":2*d+"px,"+
d+"px"};e.selectAll("path.mean").style(n).call(m.stroke,c.color);e.selectAll("path.meanline").style(n).call(m.stroke,c.color);l(e,g,h)})}},{"../../components/color":643,"../scatter/style":1211,d3:169}],1349:[function(b,K,G){G=b("../../components/colorscale/attributes");var q=b("../isosurface/attributes"),m=b("../surface/attributes"),l=b("../../plots/attributes"),h=b("../../lib/extend").extendFlat;b=b("../../plot_api/edit_types").overrideAll;K=K.exports=b(h({x:q.x,y:q.y,z:q.z,value:q.value,isomin:q.isomin,
isomax:q.isomax,surface:q.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:q.slices,caps:q.caps,text:q.text,hovertext:q.hovertext,hovertemplate:q.hovertemplate},G("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:q.colorbar,opacity:q.opacity,opacityscale:m.opacityscale,lightposition:q.lightposition,lighting:q.lighting,flatshading:q.flatshading,contour:q.contour,hoverinfo:h({},l.hoverinfo),showlegend:h({},l.showlegend,
{dflt:!1})}),"calc","nested");K.x.editType=K.y.editType=K.z.editType=K.value.editType="calc+clearAxisTypes";K.transforms=void 0},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plot_api/edit_types":810,"../../plots/attributes":824,"../isosurface/attributes":1123,"../surface/attributes":1311}],1350:[function(b,K,G){function q(p,c,d){this.scene=p;this.uid=d;this.mesh=c;this.name="";this.data=null;this.showContour=!1}var m=b("gl-mesh3d"),l=b("../../lib/gl_format_color").parseColorScale,
h=b("../../lib/str2rgbarray"),a=b("../../components/colorscale").extractOpts,g=b("../../plots/gl3d/zip3"),e=b("../isosurface/convert").findNearestOnAxis,n=b("../isosurface/convert").generateIsoMeshes;b=q.prototype;b.handlePick=function(p){if(p.object===this.mesh){var c=p.data.index,d=this.data._meshY[c],f=this.data._meshZ[c],k=this.data._Ys.length,r=this.data._Zs.length;c=e(this.data._meshX[c],this.data._Xs).id;d=e(d,this.data._Ys).id;f=e(f,this.data._Zs).id;k=p.index=f+r*d+r*k*c;p.traceCoordinate=
[this.data._meshX[k],this.data._meshY[k],this.data._meshZ[k],this.data._value[k]];r=this.data.hovertext||this.data.text;Array.isArray(r)&&void 0!==r[k]?p.textLabel=r[k]:r&&(p.textLabel=r);return!0}};b.update=function(p){function c(k,r,u,v){return r.map(function(x){return k.d2l(x,0,v)*u})}var d=this.scene,f=d.fullSceneLayout;this.data=n(p);d=g(c(f.xaxis,p._meshX,d.dataScale[0],p.xcalendar),c(f.yaxis,p._meshY,d.dataScale[1],p.ycalendar),c(f.zaxis,p._meshZ,d.dataScale[2],p.zcalendar));f=g(p._meshI,p._meshJ,
p._meshK);d={positions:d,cells:f,lightPosition:[p.lightposition.x,p.lightposition.y,p.lightposition.z],ambient:p.lighting.ambient,diffuse:p.lighting.diffuse,specular:p.lighting.specular,roughness:p.lighting.roughness,fresnel:p.lighting.fresnel,vertexNormalsEpsilon:p.lighting.vertexnormalsepsilon,faceNormalsEpsilon:p.lighting.facenormalsepsilon,opacity:p.opacity,opacityscale:p.opacityscale,contourEnable:p.contour.show,contourColor:h(p.contour.color).slice(0,3),contourWidth:p.contour.width,useFacetNormals:p.flatshading};
f=a(p);d.vertexIntensity=p._meshIntensity;d.vertexIntensityBounds=[f.min,f.max];d.colormap=l(p);this.mesh.update(d)};b.dispose=function(){this.scene.glplot.remove(this.mesh);this.mesh.dispose()};K.exports=function(p,c){var d=m({gl:p.glplot.gl}),f=new q(p,d,c.uid);d._trace=f;f.update(c);p.glplot.add(d);return f}},{"../../components/colorscale":655,"../../lib/gl_format_color":774,"../../lib/str2rgbarray":802,"../../plots/gl3d/zip3":881,"../isosurface/convert":1125,"gl-mesh3d":309}],1351:[function(b,
K,G){var q=b("../../lib"),m=b("./attributes"),l=b("../isosurface/defaults").supplyIsoDefaults,h=b("../surface/defaults").opacityscaleDefaults;K.exports=function(a,g,e,n){function p(c,d){return q.coerce(a,g,m,c,d)}l(a,g,e,n,p);h(a,g,n,p)}},{"../../lib":778,"../isosurface/defaults":1126,"../surface/defaults":1314,"./attributes":1349}],1352:[function(b,K,G){K.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("../isosurface/calc"),colorbar:{min:"cmin",max:"cmax"},plot:b("./convert"),
moduleType:"trace",name:"volume",basePlotModule:b("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":870,"../isosurface/calc":1124,"./attributes":1349,"./convert":1350,"./defaults":1351}],1353:[function(b,K,G){function q(n){return{marker:{color:e({},m.marker.color,{arrayOk:!1,editType:"style"}),line:{color:e({},m.marker.line.color,{arrayOk:!1,editType:"style"}),width:e({},m.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}
var m=b("../bar/attributes");G=b("../scatter/attributes").line;var l=b("../../plots/attributes"),h=b("../../plots/template_attributes").hovertemplateAttrs,a=b("../../plots/template_attributes").texttemplateAttrs,g=b("./constants"),e=b("../../lib/extend").extendFlat;b=b("../../components/color");K.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:m.x,x0:m.x0,dx:m.dx,y:m.y,y0:m.y0,dy:m.dy,xperiod:m.xperiod,yperiod:m.yperiod,
xperiod0:m.xperiod0,yperiod0:m.yperiod0,xperiodalignment:m.xperiodalignment,yperiodalignment:m.yperiodalignment,hovertext:m.hovertext,hovertemplate:h({},{keys:g.eventDataKeys}),hoverinfo:e({},l.hoverinfo,{flags:"name x y text initial delta final".split(" ")}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:a({editType:"plot"},{keys:g.eventDataKeys.concat(["label"])}),text:m.text,textposition:m.textposition,insidetextanchor:m.insidetextanchor,
textangle:m.textangle,textfont:m.textfont,insidetextfont:m.insidetextfont,outsidetextfont:m.outsidetextfont,constraintext:m.constraintext,cliponaxis:m.cliponaxis,orientation:m.orientation,offset:m.offset,width:m.width,increasing:q("increasing"),decreasing:q("decreasing"),totals:q("intermediate sums and total"),connector:{line:{color:e({},G.color,{dflt:b.defaultLine}),width:e({},G.width,{editType:"plot"}),dash:G.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",
editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:m.offsetgroup,alignmentgroup:m.alignmentgroup}},{"../../components/color":643,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,"../bar/attributes":921,"../scatter/attributes":1187,"./constants":1355}],1354:[function(b,K,G){function q(n){return"a"===n||"absolute"===n}function m(n){return"t"===n||"total"===n}var l=b("../../plots/cartesian/axes"),h=b("../../plots/cartesian/align_period"),
a=b("../../lib").mergeArray,g=b("../scatter/calc_selection"),e=b("../../constants/numerical").BADNUM;K.exports=function(n,p){var c=l.getFromId(n,p.xaxis||"x"),d=l.getFromId(n,p.yaxis||"y");if("h"===p.orientation){n=c.makeCalcdata(p,"x");var f=d.makeCalcdata(p,"y");c=h(p,d,"y",f);d=!!p.yperiodalignment}else n=d.makeCalcdata(p,"y"),f=c.makeCalcdata(p,"x"),c=h(p,c,"x",f),d=!!p.xperiodalignment;for(var k=Math.min(c.length,n.length),r=Array(k),u=0,v,x=!1,C=0;C<k;C++){v=n[C]||0;var z=!1;(n[C]!==e||m(p.measure[C])||
q(p.measure[C]))&&C+1<k&&(n[C+1]!==e||m(p.measure[C+1])||q(p.measure[C+1]))&&(z=!0);z=r[C]={i:C,p:c[C],s:v,rawS:v,cNext:z};q(p.measure[C])?(u=z.s,z.isSum=!0,z.dir="totals",z.s=u):m(p.measure[C])?(z.isSum=!0,z.dir="totals",z.s=u):(z.isSum=!1,z.dir=0>z.rawS?"decreasing":"increasing",v=z.s,z.s=u+v,u+=v);"totals"===z.dir&&(x=!0);d&&(r[C].orig_p=f[C]);p.ids&&(z.id=String(p.ids[C]));z.v=(p.base||0)+u}r.length&&(r[0].hasTotals=x);a(p.text,r,"tx");a(p.hovertext,r,"htx");g(r,p);return r}},{"../../constants/numerical":753,
"../../lib":778,"../../plots/cartesian/align_period":825,"../../plots/cartesian/axes":828,"../scatter/calc_selection":1189}],1355:[function(b,K,G){K.exports={eventDataKeys:["initial","delta","final"]}},{}],1356:[function(b,K,G){var q=b("../bar/cross_trace_calc").setGroupPositions;K.exports=function(m,l){var h=m._fullLayout,a=m._fullData,g=m.calcdata,e=l.xaxis,n=l.yaxis;l=[];var p=[],c=[],d;for(d=0;d<a.length;d++){var f=a[d];if(!0===f.visible&&f.xaxis===e._id&&f.yaxis===n._id&&"waterfall"===f.type){var k=
g[d];"h"===f.orientation?c.push(k):p.push(k);l.push(k)}}k={mode:h.waterfallmode,norm:h.waterfallnorm,gap:h.waterfallgap,groupgap:h.waterfallgroupgap};q(m,e,n,p,k);q(m,n,e,c,k);for(d=0;d<l.length;d++)for(k=l[d],m=0;m<k.length;m++)e=k[m],!1===e.isSum&&(e.s0+=0===m?0:k[m-1].s),m+1<k.length&&(k[m].nextP0=k[m+1].p0,k[m].nextS0=k[m+1].s0)}},{"../bar/cross_trace_calc":924}],1357:[function(b,K,G){function q(d,f,k){d(f+".marker.color",k);d(f+".marker.line.color",n.defaultLine);d(f+".marker.line.width")}var m=
b("../../lib"),l=b("../bar/defaults").handleGroupingDefaults,h=b("../bar/defaults").handleText,a=b("../scatter/xy_defaults"),g=b("../scatter/period_defaults"),e=b("./attributes"),n=b("../../components/color");b=b("../../constants/delta.js");var p=b.INCREASING.COLOR,c=b.DECREASING.COLOR;K.exports={supplyDefaults:function(d,f,k,r){function u(v,x){return m.coerce(d,f,e,v,x)}a(d,f,r,u)?(g(d,f,r,u),u("measure"),u("orientation",f.x&&!f.y?"h":"v"),u("base"),u("offset"),u("width"),u("text"),u("hovertext"),
u("hovertemplate"),k=u("textposition"),h(d,f,r,u,k,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"!==f.textposition&&(u("texttemplate"),f.texttemplate||u("textinfo")),q(u,"increasing",p),q(u,"decreasing",c),q(u,"totals","#4499FF"),u("connector.visible")&&(u("connector.mode"),u("connector.line.width")&&(u("connector.line.color"),u("connector.line.dash")))):f.visible=!1},crossTraceDefaults:function(d,f){function k(x){return m.coerce(u._input,
u,e,x)}if("group"===f.waterfallmode)for(var r=0;r<d.length;r++){var u=d[r];var v=u._input;l(v,u,f,k)}}}},{"../../components/color":643,"../../constants/delta.js":747,"../../lib":778,"../bar/defaults":925,"../scatter/period_defaults":1207,"../scatter/xy_defaults":1214,"./attributes":1353}],1358:[function(b,K,G){K.exports=function(q,m){q.x="xVal"in m?m.xVal:m.x;q.y="yVal"in m?m.yVal:m.y;"initial"in m&&(q.initial=m.initial);"delta"in m&&(q.delta=m.delta);"final"in m&&(q.final=m.final);m.xa&&(q.xaxis=
m.xa);m.ya&&(q.yaxis=m.ya);return q}},{}],1359:[function(b,K,G){function q(e,n){var p=e[n.dir].marker;e=p.color;n=p.line.color;p=p.line.width;if(l(e))return e;if(l(n)&&p)return n}var m=b("../../plots/cartesian/axes").hoverLabelText,l=b("../../components/color").opacity,h=b("../bar/hover").hoverOnBars;b=b("../../constants/delta.js");var a=b.INCREASING.SYMBOL,g=b.DECREASING.SYMBOL;K.exports=function(e,n,p,c){if(n=h(e,n,p,c)){var d=n.cd;p=d[0].trace;var f=(c="h"===p.orientation)?e.xa:e.ya;e=d[n.index];
d=e.isSum?e.b+e.s:e.rawS;if(!e.isSum){n.initial=e.b+e.s-d;n.delta=d;n.final=n.initial+n.delta;var k=m(f,Math.abs(n.delta));n.deltaLabel=0>d?"("+k+")":k;n.finalLabel=m(f,n.final);n.initialLabel=m(f,n.initial)}k=e.hi||p.hoverinfo;f=[];if(k&&"none"!==k&&"skip"!==k){var r="all"===k,u=k.split("+");k=function(v){return r||-1!==u.indexOf(v)};e.isSum||(!k("final")||(c?k("x"):k("y"))||f.push(n.finalLabel),k("delta")&&(0>d?f.push(n.deltaLabel+" "+g):f.push(n.deltaLabel+" "+a)),k("initial")&&f.push("Initial: "+
n.initialLabel))}f.length&&(n.extraText=f.join("<br>"));n.color=q(p,e);return[n]}}},{"../../components/color":643,"../../constants/delta.js":747,"../../plots/cartesian/axes":828,"../bar/hover":928}],1360:[function(b,K,G){K.exports={attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults").supplyDefaults,crossTraceDefaults:b("./defaults").crossTraceDefaults,supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc"),crossTraceCalc:b("./cross_trace_calc"),
plot:b("./plot"),style:b("./style").style,hoverPoints:b("./hover"),eventData:b("./event_data"),selectPoints:b("../bar/select"),moduleType:"trace",name:"waterfall",basePlotModule:b("../../plots/cartesian"),categories:"bar-like cartesian svg oriented showLegend zoomScale".split(" "),meta:{}}},{"../../plots/cartesian":841,"../bar/select":933,"./attributes":1353,"./calc":1354,"./cross_trace_calc":1356,"./defaults":1357,"./event_data":1358,"./hover":1359,"./layout_attributes":1361,"./layout_defaults":1362,
"./plot":1363,"./style":1364}],1361:[function(b,K,G){K.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],1362:[function(b,K,G){var q=b("../../lib"),m=b("./layout_attributes");K.exports=function(l,h,a){for(var g=!1,e=0;e<a.length;e++){var n=a[e];if(n.visible&&"waterfall"===n.type){g=!0;break}}g&&(q.coerce(l,h,m,
"waterfallmode",void 0),q.coerce(l,h,m,"waterfallgap",.2),q.coerce(l,h,m,"waterfallgroupgap",void 0))}},{"../../lib":778,"./layout_attributes":1361}],1363:[function(b,K,G){function q(n,p,c,d){var f=p.xaxis,k=p.yaxis;l.makeTraceGroups(d,c,"trace bars").each(function(r){var u=m.select(this);r=r[0].trace;u=l.ensureSingle(u,"g","lines");if(r.connector&&r.connector.visible){var v="h"===r.orientation,x=r.connector.mode;u=u.selectAll("g.line").data(l.identity);u.enter().append("g").classed("line",!0);u.exit().remove();
var C=u.size();u.each(function(z,y){if(y===C-1||z.cNext){var D=[];var A=[];var t=v?f:k,B=v?k:f;D[0]=t.c2p(z.s0,!0);A[0]=B.c2p(z.p0,!0);D[1]=t.c2p(z.s1,!0);A[1]=B.c2p(z.p1,!0);D[2]=t.c2p(z.nextS0,!0);A[2]=B.c2p(z.nextP0,!0);A=v?[D,A]:[A,D];D=A[0];A=A[1];t="";D[0]!==a&&A[0]!==a&&D[1]!==a&&A[1]!==a&&("spanning"===x&&!z.isSum&&0<y&&(t=v?t+("M"+D[0]+","+A[1]+"V"+A[0]):t+("M"+D[1]+","+A[0]+"H"+D[0])),"between"!==x&&(z.isSum||y<C-1)&&(t=v?t+("M"+D[1]+","+A[0]+"V"+A[1]):t+("M"+D[0]+","+A[1]+"H"+D[1])),D[2]!==
a&&A[2]!==a&&(t=v?t+("M"+D[1]+","+A[1]+"V"+A[2]):t+("M"+D[1]+","+A[1]+"H"+D[2])));""===t&&(t="M0,0Z");l.ensureSingle(m.select(this),"path").attr("d",t).call(h.setClipUrl,p.layerClipId,n)}})}else u.remove()})}var m=b("d3"),l=b("../../lib"),h=b("../../components/drawing"),a=b("../../constants/numerical").BADNUM,g=b("../bar/plot"),e=b("../bar/uniform_text").clearMinTextSize;K.exports=function(n,p,c,d){var f=n._fullLayout;e("waterfall",f);g.plot(n,p,c,d,{mode:f.waterfallmode,norm:f.waterfallmode,gap:f.waterfallgap,
groupgap:f.waterfallgroupgap});q(n,p,c,d)}},{"../../components/drawing":665,"../../constants/numerical":753,"../../lib":778,"../bar/plot":932,"../bar/uniform_text":937,d3:169}],1364:[function(b,K,G){var q=b("d3"),m=b("../../components/drawing"),l=b("../../components/color"),h=b("../../constants/interactions").DESELECTDIM;G=b("../bar/style");var a=b("../bar/uniform_text").resizeText,g=G.styleTextPoints;K.exports={style:function(e,n,p){n=p?p:q.select(e).selectAll("g.waterfalllayer").selectAll("g.trace");
a(e,n,"waterfall");n.style("opacity",function(c){return c[0].trace.opacity});n.each(function(c){var d=q.select(this),f=c[0].trace;d.selectAll(".point > path").each(function(k){if(!k.isBlank){var r=f[k.dir].marker;q.select(this).call(l.fill,r.color).call(l.stroke,r.line.color).call(m.dashLine,r.line.dash,r.line.width).style("opacity",f.selectedpoints&&!k.selected?h:1)}});g(d,f,e);d.selectAll(".lines").each(function(){var k=f.connector.line;m.lineGroupStyle(q.select(this).selectAll("path"),k.width,
k.color,k.dash)})})}}},{"../../components/color":643,"../../components/drawing":665,"../../constants/interactions":752,"../bar/style":935,"../bar/uniform_text":937,d3:169}],1365:[function(b,K,G){function q(k,r,u,v){if(v.enabled){var x=v.target,C=e.nestedProperty(r,x),z=C.get();k=g.getDataConversions(k,r,x,z);k=m(v,k);for(var y=Array(u.length),D=0;D<u.length;D++)y[D]=k(z,u[D]);C.set(y);"count"===v.func&&e.pushUnique(r._arrayAttrs,x)}}function m(k,r){var u=r.d2c,v=r.c2d;switch(k.func){case "count":return l;
case "first":return h;case "last":return a;case "sum":return function(x,C){for(var z=0,y=0;y<C.length;y++){var D=u(x[C[y]]);D!==c&&(z+=D)}return v(z)};case "avg":return function(x,C){for(var z=0,y=0,D=0;D<C.length;D++){var A=u(x[C[D]]);A!==c&&(z+=A,y++)}return y?v(z/y):c};case "min":return function(x,C){for(var z=Infinity,y=0;y<C.length;y++){var D=u(x[C[y]]);D!==c&&(z=Math.min(z,D))}return Infinity===z?c:v(z)};case "max":return function(x,C){for(var z=-Infinity,y=0;y<C.length;y++){var D=u(x[C[y]]);
D!==c&&(z=Math.max(z,D))}return-Infinity===z?c:v(z)};case "range":return function(x,C){for(var z=Infinity,y=-Infinity,D=0;D<C.length;D++){var A=u(x[C[D]]);A!==c&&(z=Math.min(z,A),y=Math.max(y,A))}return-Infinity===y||Infinity===z?c:v(y-z)};case "change":return function(x,C){var z=u(x[C[0]]);x=u(x[C[C.length-1]]);return z===c||x===c?c:v(x-z)};case "median":return function(x,C){for(var z=[],y=0;y<C.length;y++){var D=u(x[C[y]]);D!==c&&z.push(D)}if(!z.length)return c;z.sort(e.sorterAsc);x=(z.length-1)/
2;return v((z[Math.floor(x)]+z[Math.ceil(x)])/2)};case "mode":return function(x,C){for(var z={},y=0,D=c,A=0;A<C.length;A++){var t=u(x[C[A]]);if(t!==c){var B=z[t]=(z[t]||0)+1;B>y&&(y=B,D=t)}}return y?v(D):c};case "rms":return function(x,C){for(var z=0,y=0,D=0;D<C.length;D++){var A=u(x[C[D]]);A!==c&&(z+=A*A,y++)}return y?v(Math.sqrt(z/y)):c};case "stddev":return function(x,C){var z=0,y=0,D=1,A=c,t;for(t=0;t<C.length&&A===c;t++)A=u(x[C[t]]);if(A===c)return c;for(;t<C.length;t++){var B=u(x[C[t]]);B!==
c&&(B-=A,z+=B,y+=B*B,D++)}return(x="sample"===k.funcmode?D-1:D)?Math.sqrt((y-z*z/D)/x):0}}}function l(k,r){return r.length}function h(k,r){return k[r[0]]}function a(k,r){return k[r[r.length-1]]}var g=b("../plots/cartesian/axes"),e=b("../lib"),n=b("../plot_api/plot_schema"),p=b("./helpers").pointsAccessorFunction,c=b("../constants/numerical").BADNUM;G.moduleType="transform";G.name="aggregate";var d=G.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,
noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:"count sum avg median mode rms stddev min max first last change range".split(" "),dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},f=d.aggregations;G.supplyDefaults=function(k,
r){function u(t,B){return e.coerce(y[x],D,f,t,B)}var v={},x;if(!e.coerce(k,v,d,"enabled",void 0))return v;r=n.findArrayAttributes(r);var C={};for(x=0;x<r.length;x++)C[r[x]]=1;var z=e.coerce(k,v,d,"groups",void 0);if(!Array.isArray(z)){if(!C[z])return v.enabled=!1,v;C[z]=0}var y=k.aggregations||[];k=v.aggregations=Array(y.length);for(x=0;x<y.length;x++){var D={_index:x};z=u("target");var A=u("func");u("enabled")&&z&&(C[z]||"count"===A&&void 0===C[z])?("stddev"===A&&u("funcmode"),C[z]=0,k[x]=D):k[x]=
{enabled:!1,_index:x}}for(x=0;x<r.length;x++)C[r[x]]&&k.push({target:r[x],func:f.func.dflt,enabled:!0,_index:-1});return v};G.calcTransform=function(k,r,u){if(u.enabled){var v=u.groups,x=e.getTargetArray(r,{target:v});if(x){var C,z={},y={},D=[],A=p(r.transforms,u),t=x.length;r._length&&(t=Math.min(t,r._length));for(C=0;C<t;C++){var B=x[C];var F=z[B];void 0===F?(z[B]=D.length,F=[C],D.push(F),y[z[B]]=A(C)):(D[F].push(C),y[z[B]]=(y[z[B]]||[]).concat(A(C)))}u._indexToPoints=y;u=u.aggregations;for(C=0;C<
u.length;C++)q(k,r,D,u[C]);"string"===typeof v&&q(k,r,D,{target:v,func:"first",enabled:!0});r._length=D.length}}}},{"../constants/numerical":753,"../lib":778,"../plot_api/plot_schema":816,"../plots/cartesian/axes":828,"./helpers":1368}],1366:[function(b,K,G){function q(p,c,d){var f=p.operation,k=p.value,r=Array.isArray(k),u=function(C){return c(C,0,p.valuecalendar)},v=function(C){return c(C,0,d)},x;-1!==g.indexOf(f)?x=r?u(k[0]):u(k):-1!==e.indexOf(f)?x=r?[u(k[0]),u(k[1])]:[u(k),u(k)]:-1!==n.indexOf(f)&&
(x=r?k.map(u):[u(k)]);switch(f){case "=":return function(C){return v(C)===x};case "!=":return function(C){return v(C)!==x};case "<":return function(C){return v(C)<x};case "<=":return function(C){return v(C)<=x};case ">":return function(C){return v(C)>x};case ">=":return function(C){return v(C)>=x};case "[]":return function(C){C=v(C);return C>=x[0]&&C<=x[1]};case "()":return function(C){C=v(C);return C>x[0]&&C<x[1]};case "[)":return function(C){C=v(C);return C>=x[0]&&C<x[1]};case "(]":return function(C){C=
v(C);return C>x[0]&&C<=x[1]};case "][":return function(C){C=v(C);return C<=x[0]||C>=x[1]};case ")(":return function(C){C=v(C);return C<x[0]||C>x[1]};case "](":return function(C){C=v(C);return C<=x[0]||C>x[1]};case ")[":return function(C){C=v(C);return C<x[0]||C>=x[1]};case "{}":return function(C){return-1!==x.indexOf(v(C))};case "}{":return function(C){return-1===x.indexOf(v(C))}}}var m=b("../lib"),l=b("../registry"),h=b("../plots/cartesian/axes"),a=b("./helpers").pointsAccessorFunction;b=b("../constants/filter_ops");
var g=b.COMPARISON_OPS,e=b.INTERVAL_OPS,n=b.SET_OPS;G.moduleType="transform";G.name="filter";G.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(g).concat(e).concat(n),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"};G.supplyDefaults=function(p){function c(k,
r){return m.coerce(p,d,G.attributes,k,r)}var d={};if(c("enabled")){var f=c("target");if(m.isArrayOrTypedArray(f)&&0===f.length)return d.enabled=!1,d;c("preservegaps");c("operation");c("value");f=l.getComponentMethod("calendars","handleDefaults");f(p,d,"valuecalendar",null);f(p,d,"targetcalendar",null)}return d};G.calcTransform=function(p,c,d){function f(t,B){for(var F=0;F<x.length;F++){var I=m.nestedProperty(c,x[F]);t(I,B)}}if(d.enabled){var k=m.getTargetArray(c,d);if(k){var r=d.target,u=k.length;
c._length&&(u=Math.min(u,c._length));var v=d.targetcalendar,x=c._arrayAttrs,C=d.preservegaps;if("string"===typeof r){var z=m.nestedProperty(c,r+"calendar").get();z&&(v=z)}p=h.getDataToCoordFunc(p,c,r,k);v=q(d,p,v);var y={};p={};r=0;if(C){var D=function(t){y[t.astr]=m.extendDeep([],t.get());t.set(Array(u))};z=function(t,B){var F=y[t.astr][B];t.get()[B]=F}}else D=function(t){y[t.astr]=m.extendDeep([],t.get());t.set([])},z=function(t,B){B=y[t.astr][B];t.get().push(B)};f(D);D=a(c.transforms,d);for(var A=
0;A<u;A++)v(k[A])?(f(z,A),p[r++]=D(A)):C&&r++;d._indexToPoints=p;c._length=r}}}},{"../constants/filter_ops":749,"../lib":778,"../plots/cartesian/axes":828,"../registry":911,"./helpers":1368}],1367:[function(b,K,G){var q=b("../lib"),m=b("../plot_api/plot_schema"),l=b("../plots/plots"),h=b("./helpers").pointsAccessorFunction;G.moduleType="transform";G.name="groupby";G.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",
editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"};G.supplyDefaults=function(a,g,e){g={};if(!q.coerce(a,g,G.attributes,"enabled",void 0))return g;q.coerce(a,g,G.attributes,"groups",void 0);q.coerce(a,g,G.attributes,"nameformat",1<e._dataLength?"%{group} (%{trace})":"%{group}");e=a.styles;var n=g.styles=[];if(e)for(a=0;a<e.length;a++){var p=n[a]={};q.coerce(e[a],
n[a],G.attributes.styles,"target");var c=q.coerce(e[a],n[a],G.attributes.styles,"value");q.isPlainObject(c)?p.value=q.extendDeep({},c):c&&delete p.value}return g};G.transform=function(a,g){var e,n=[];for(e=0;e<a.length;e++){var p=void 0,c;var d=a[e];var f=g.transform;var k=g.transformIndex;var r=d.transforms[k].groups,u=h(d.transforms,f);if(q.isArrayOrTypedArray(r)&&0!==r.length){var v=q.filterUnique(r),x=Array(v.length),C=r.length,z=m.findArrayAttributes(d),y=f.styles||[],D={};for(c=0;c<y.length;c++)D[y[c].target]=
y[c].value;f.styles&&(p=q.keyedContainer(f,"styles","target","value.name"));y={};var A={};for(c=0;c<v.length;c++){var t=v[c];y[t]=c;A[t]=0;var B=x[c]=q.extendDeepNoArrays({},d);B._group=t;B.transforms[k]._indexToPoints={};var F=null;p&&(F=p.get(t));B.name=F||""===F?F:q.templateString(f.nameformat,{trace:d.name,group:t});F=B.transforms;B.transforms=[];for(t=0;t<F.length;t++)B.transforms[t]=q.extendDeepNoArrays({},F[t]);for(t=0;t<z.length;t++)q.nestedProperty(B,z[t]).set([])}for(c=0;c<z.length;c++){f=
z[c];t=0;for(p=[];t<v.length;t++)p[t]=q.nestedProperty(x[t],f).get();f=q.nestedProperty(d,f).get();for(t=0;t<C;t++)p[y[r[t]]].push(f[t])}for(t=0;t<C;t++)B=x[y[r[t]]],B.transforms[k]._indexToPoints[A[r[t]]]=u(t),A[r[t]]++;for(c=0;c<v.length;c++)t=v[c],B=x[c],l.clearExpandedTraceDefaultColors(B),q.extendDeepNoArrays(B,D[t]||{});d=x}else d=[d];for(k=0;k<d.length;k++)n.push(d[k])}return n}},{"../lib":778,"../plot_api/plot_schema":816,"../plots/plots":891,"./helpers":1368}],1368:[function(b,K,G){G.pointsAccessorFunction=
function(q,m){for(var l,h,a=0;a<q.length;a++){l=q[a];if(l===m)break;l._indexToPoints&&!1!==l.enabled&&(h=l._indexToPoints)}return h?function(g){return h[g]}:function(g){return[g]}}},{}],1369:[function(b,K,G){function q(g,e){switch(g.order){case "ascending":return function(n,p){n=e(n.v);p=e(p.v);return n===a?1:p===a?-1:n-p};case "descending":return function(n,p){n=e(n.v);p=e(p.v);return n===a?1:p===a?-1:p-n}}}var m=b("../lib"),l=b("../plots/cartesian/axes"),h=b("./helpers").pointsAccessorFunction,
a=b("../constants/numerical").BADNUM;G.moduleType="transform";G.name="sort";G.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"};G.supplyDefaults=function(g){var e={};m.coerce(g,e,G.attributes,"enabled",void 0)&&(m.coerce(g,e,G.attributes,"target",void 0),m.coerce(g,e,G.attributes,"order",void 0));
return e};G.calcTransform=function(g,e,n){if(n.enabled){var p=m.getTargetArray(e,n);if(p){var c=n.target,d=p.length;e._length&&(d=Math.min(d,e._length));var f=e._arrayAttrs;c=l.getDataToCoordFunc(g,e,c,p);var k=d,r=Array(k);g=Array(k);var u;for(u=0;u<k;u++)r[u]={v:p[u],i:u};r.sort(q(n,c));for(u=0;u<k;u++)g[u]=r[u].i;p=h(e.transforms,n);c={};for(k=0;k<f.length;k++){u=m.nestedProperty(e,f[k]);var v=u.get(),x=Array(d);for(r=0;r<d;r++)x[r]=v[g[r]];u.set(x)}for(r=0;r<d;r++)c[r]=p(g[r]);n._indexToPoints=
c;e._length=d}}}},{"../constants/numerical":753,"../lib":778,"../plots/cartesian/axes":828,"./helpers":1368}],1370:[function(b,K,G){G.version="1.58.4"},{}]},{},[26])(26)});
